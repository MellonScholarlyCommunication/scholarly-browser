var eU=Object.defineProperty;var tU=(t,e,r)=>e in t?eU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var $r=(t,e,r)=>(tU(t,typeof e!="symbol"?e+"":e,r),r),b3=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var fe=(t,e,r)=>(b3(t,e,"read from private field"),r?r.call(t):e.get(t)),St=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ut=(t,e,r,n)=>(b3(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var Dy=(t,e,r,n)=>({set _(a){ut(t,e,a,r)},get _(){return fe(t,e,n)}}),it=(t,e,r)=>(b3(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();function kO(t,e){const r=Object.create(null),n=t.split(",");for(let a=0;a<n.length;a++)r[n[a]]=!0;return e?a=>!!r[a.toLowerCase()]:a=>!!r[a]}const Tr={},Od=[],es=()=>{},rU=()=>!1,nU=/^on[^a-z]/,e_=t=>nU.test(t),QO=t=>t.startsWith("onUpdate:"),An=Object.assign,GO=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},iU=Object.prototype.hasOwnProperty,qt=(t,e)=>iU.call(t,e),bt=Array.isArray,Ad=t=>t_(t)==="[object Map]",$8=t=>t_(t)==="[object Set]",Tt=t=>typeof t=="function",tn=t=>typeof t=="string",zO=t=>typeof t=="symbol",Fr=t=>t!==null&&typeof t=="object",U8=t=>Fr(t)&&Tt(t.then)&&Tt(t.catch),q8=Object.prototype.toString,t_=t=>q8.call(t),aU=t=>t_(t).slice(8,-1),V8=t=>t_(t)==="[object Object]",WO=t=>tn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,z1=kO(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),r_=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},sU=/-(\w)/g,ks=r_(t=>t.replace(sU,(e,r)=>r?r.toUpperCase():"")),oU=/\B([A-Z])/g,cf=r_(t=>t.replace(oU,"-$1").toLowerCase()),n_=r_(t=>t.charAt(0).toUpperCase()+t.slice(1)),_3=r_(t=>t?`on${n_(t)}`:""),hp=(t,e)=>!Object.is(t,e),g3=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},_b=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},uU=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let yI;const SE=()=>yI||(yI=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Du(t){if(bt(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],a=tn(n)?fU(n):Du(n);if(a)for(const s in a)e[s]=a[s]}return e}else{if(tn(t))return t;if(Fr(t))return t}}const cU=/;(?![^(]*\))/g,lU=/:([^]+)/,dU=/\/\*[^]*?\*\//g;function fU(t){const e={};return t.replace(dU,"").split(cU).forEach(r=>{if(r){const n=r.split(lU);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function En(t){let e="";if(tn(t))e=t;else if(bt(t))for(let r=0;r<t.length;r++){const n=En(t[r]);n&&(e+=n+" ")}else if(Fr(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const hU="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pU=kO(hU);function H8(t){return!!t||t===""}const Cr=t=>tn(t)?t:t==null?"":bt(t)||Fr(t)&&(t.toString===q8||!Tt(t.toString))?JSON.stringify(t,k8,2):String(t),k8=(t,e)=>e&&e.__v_isRef?k8(t,e.value):Ad(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,a])=>(r[`${n} =>`]=a,r),{})}:$8(e)?{[`Set(${e.size})`]:[...e.values()]}:Fr(e)&&!bt(e)&&!V8(e)?String(e):e;let qa;class yU{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=qa,!e&&qa&&(this.index=(qa.scopes||(qa.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=qa;try{return qa=this,e()}finally{qa=r}}}on(){qa=this}off(){qa=this.parent}stop(e){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function bU(t,e=qa){e&&e.active&&e.effects.push(t)}function _U(){return qa}const XO=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Q8=t=>(t.w&Gu)>0,G8=t=>(t.n&Gu)>0,gU=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Gu},mU=t=>{const{deps:e}=t;if(e.length){let r=0;for(let n=0;n<e.length;n++){const a=e[n];Q8(a)&&!G8(a)?a.delete(t):e[r++]=a,a.w&=~Gu,a.n&=~Gu}e.length=r}},TE=new WeakMap;let Nh=0,Gu=1;const EE=30;let Ka;const Yc=Symbol(""),OE=Symbol("");class KO{constructor(e,r=null,n){this.fn=e,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,bU(this,n)}run(){if(!this.active)return this.fn();let e=Ka,r=Lu;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Ka,Ka=this,Lu=!0,Gu=1<<++Nh,Nh<=EE?gU(this):bI(this),this.fn()}finally{Nh<=EE&&mU(this),Gu=1<<--Nh,Ka=this.parent,Lu=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ka===this?this.deferStop=!0:this.active&&(bI(this),this.onStop&&this.onStop(),this.active=!1)}}function bI(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let Lu=!0;const z8=[];function lf(){z8.push(Lu),Lu=!1}function df(){const t=z8.pop();Lu=t===void 0?!0:t}function Ui(t,e,r){if(Lu&&Ka){let n=TE.get(t);n||TE.set(t,n=new Map);let a=n.get(r);a||n.set(r,a=XO()),W8(a)}}function W8(t,e){let r=!1;Nh<=EE?G8(t)||(t.n|=Gu,r=!Q8(t)):r=!t.has(Ka),r&&(t.add(Ka),Ka.deps.push(t))}function Uo(t,e,r,n,a,s){const o=TE.get(t);if(!o)return;let u=[];if(e==="clear")u=[...o.values()];else if(r==="length"&&bt(t)){const c=Number(n);o.forEach((l,d)=>{(d==="length"||d>=c)&&u.push(l)})}else switch(r!==void 0&&u.push(o.get(r)),e){case"add":bt(t)?WO(r)&&u.push(o.get("length")):(u.push(o.get(Yc)),Ad(t)&&u.push(o.get(OE)));break;case"delete":bt(t)||(u.push(o.get(Yc)),Ad(t)&&u.push(o.get(OE)));break;case"set":Ad(t)&&u.push(o.get(Yc));break}if(u.length===1)u[0]&&AE(u[0]);else{const c=[];for(const l of u)l&&c.push(...l);AE(XO(c))}}function AE(t,e){const r=bt(t)?t:[...t];for(const n of r)n.computed&&_I(n);for(const n of r)n.computed||_I(n)}function _I(t,e){(t!==Ka||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const vU=kO("__proto__,__v_isRef,__isVue"),X8=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(zO)),wU=JO(),SU=JO(!1,!0),TU=JO(!0),gI=EU();function EU(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const n=Wt(this);for(let s=0,o=this.length;s<o;s++)Ui(n,"get",s+"");const a=n[e](...r);return a===-1||a===!1?n[e](...r.map(Wt)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){lf();const n=Wt(this)[e].apply(this,r);return df(),n}}),t}function OU(t){const e=Wt(this);return Ui(e,"has",t),e.hasOwnProperty(t)}function JO(t=!1,e=!1){return function(n,a,s){if(a==="__v_isReactive")return!t;if(a==="__v_isReadonly")return t;if(a==="__v_isShallow")return e;if(a==="__v_raw"&&s===(t?e?qU:e5:e?Z8:Y8).get(n))return n;const o=bt(n);if(!t){if(o&&qt(gI,a))return Reflect.get(gI,a,s);if(a==="hasOwnProperty")return OU}const u=Reflect.get(n,a,s);return(zO(a)?X8.has(a):vU(a))||(t||Ui(n,"get",a),e)?u:Zn(u)?o&&WO(a)?u:u.value:Fr(u)?t?r5(u):a_(u):u}}const AU=K8(),xU=K8(!0);function K8(t=!1){return function(r,n,a,s){let o=r[n];if(Fd(o)&&Zn(o)&&!Zn(a))return!1;if(!t&&(!gb(a)&&!Fd(a)&&(o=Wt(o),a=Wt(a)),!bt(r)&&Zn(o)&&!Zn(a)))return o.value=a,!0;const u=bt(r)&&WO(n)?Number(n)<r.length:qt(r,n),c=Reflect.set(r,n,a,s);return r===Wt(s)&&(u?hp(a,o)&&Uo(r,"set",n,a):Uo(r,"add",n,a)),c}}function RU(t,e){const r=qt(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&r&&Uo(t,"delete",e,void 0),n}function IU(t,e){const r=Reflect.has(t,e);return(!zO(e)||!X8.has(e))&&Ui(t,"has",e),r}function PU(t){return Ui(t,"iterate",bt(t)?"length":Yc),Reflect.ownKeys(t)}const J8={get:wU,set:AU,deleteProperty:RU,has:IU,ownKeys:PU},DU={get:TU,set(t,e){return!0},deleteProperty(t,e){return!0}},NU=An({},J8,{get:SU,set:xU}),YO=t=>t,i_=t=>Reflect.getPrototypeOf(t);function Ny(t,e,r=!1,n=!1){t=t.__v_raw;const a=Wt(t),s=Wt(e);r||(e!==s&&Ui(a,"get",e),Ui(a,"get",s));const{has:o}=i_(a),u=n?YO:r?tA:pp;if(o.call(a,e))return u(t.get(e));if(o.call(a,s))return u(t.get(s));t!==a&&t.get(e)}function jy(t,e=!1){const r=this.__v_raw,n=Wt(r),a=Wt(t);return e||(t!==a&&Ui(n,"has",t),Ui(n,"has",a)),t===a?r.has(t):r.has(t)||r.has(a)}function Cy(t,e=!1){return t=t.__v_raw,!e&&Ui(Wt(t),"iterate",Yc),Reflect.get(t,"size",t)}function mI(t){t=Wt(t);const e=Wt(this);return i_(e).has.call(e,t)||(e.add(t),Uo(e,"add",t,t)),this}function vI(t,e){e=Wt(e);const r=Wt(this),{has:n,get:a}=i_(r);let s=n.call(r,t);s||(t=Wt(t),s=n.call(r,t));const o=a.call(r,t);return r.set(t,e),s?hp(e,o)&&Uo(r,"set",t,e):Uo(r,"add",t,e),this}function wI(t){const e=Wt(this),{has:r,get:n}=i_(e);let a=r.call(e,t);a||(t=Wt(t),a=r.call(e,t)),n&&n.call(e,t);const s=e.delete(t);return a&&Uo(e,"delete",t,void 0),s}function SI(){const t=Wt(this),e=t.size!==0,r=t.clear();return e&&Uo(t,"clear",void 0,void 0),r}function My(t,e){return function(n,a){const s=this,o=s.__v_raw,u=Wt(o),c=e?YO:t?tA:pp;return!t&&Ui(u,"iterate",Yc),o.forEach((l,d)=>n.call(a,c(l),c(d),s))}}function Fy(t,e,r){return function(...n){const a=this.__v_raw,s=Wt(a),o=Ad(s),u=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=a[t](...n),d=r?YO:e?tA:pp;return!e&&Ui(s,"iterate",c?OE:Yc),{next(){const{value:f,done:h}=l.next();return h?{value:f,done:h}:{value:u?[d(f[0]),d(f[1])]:d(f),done:h}},[Symbol.iterator](){return this}}}}function cu(t){return function(...e){return t==="delete"?!1:this}}function jU(){const t={get(s){return Ny(this,s)},get size(){return Cy(this)},has:jy,add:mI,set:vI,delete:wI,clear:SI,forEach:My(!1,!1)},e={get(s){return Ny(this,s,!1,!0)},get size(){return Cy(this)},has:jy,add:mI,set:vI,delete:wI,clear:SI,forEach:My(!1,!0)},r={get(s){return Ny(this,s,!0)},get size(){return Cy(this,!0)},has(s){return jy.call(this,s,!0)},add:cu("add"),set:cu("set"),delete:cu("delete"),clear:cu("clear"),forEach:My(!0,!1)},n={get(s){return Ny(this,s,!0,!0)},get size(){return Cy(this,!0)},has(s){return jy.call(this,s,!0)},add:cu("add"),set:cu("set"),delete:cu("delete"),clear:cu("clear"),forEach:My(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Fy(s,!1,!1),r[s]=Fy(s,!0,!1),e[s]=Fy(s,!1,!0),n[s]=Fy(s,!0,!0)}),[t,r,e,n]}const[CU,MU,FU,LU]=jU();function ZO(t,e){const r=e?t?LU:FU:t?MU:CU;return(n,a,s)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?n:Reflect.get(qt(r,a)&&a in n?r:n,a,s)}const BU={get:ZO(!1,!1)},$U={get:ZO(!1,!0)},UU={get:ZO(!0,!1)},Y8=new WeakMap,Z8=new WeakMap,e5=new WeakMap,qU=new WeakMap;function VU(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function HU(t){return t.__v_skip||!Object.isExtensible(t)?0:VU(aU(t))}function a_(t){return Fd(t)?t:eA(t,!1,J8,BU,Y8)}function t5(t){return eA(t,!1,NU,$U,Z8)}function r5(t){return eA(t,!0,DU,UU,e5)}function eA(t,e,r,n,a){if(!Fr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=a.get(t);if(s)return s;const o=HU(t);if(o===0)return t;const u=new Proxy(t,o===2?n:r);return a.set(t,u),u}function xd(t){return Fd(t)?xd(t.__v_raw):!!(t&&t.__v_isReactive)}function Fd(t){return!!(t&&t.__v_isReadonly)}function gb(t){return!!(t&&t.__v_isShallow)}function n5(t){return xd(t)||Fd(t)}function Wt(t){const e=t&&t.__v_raw;return e?Wt(e):t}function i5(t){return _b(t,"__v_skip",!0),t}const pp=t=>Fr(t)?a_(t):t,tA=t=>Fr(t)?r5(t):t;function a5(t){Lu&&Ka&&(t=Wt(t),W8(t.dep||(t.dep=XO())))}function s5(t,e){t=Wt(t);const r=t.dep;r&&AE(r)}function Zn(t){return!!(t&&t.__v_isRef===!0)}function pi(t){return o5(t,!1)}function kU(t){return o5(t,!0)}function o5(t,e){return Zn(t)?t:new QU(t,e)}class QU{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:Wt(e),this._value=r?e:pp(e)}get value(){return a5(this),this._value}set value(e){const r=this.__v_isShallow||gb(e)||Fd(e);e=r?e:Wt(e),hp(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:pp(e),s5(this))}}function Dt(t){return Zn(t)?t.value:t}const GU={get:(t,e,r)=>Dt(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const a=t[e];return Zn(a)&&!Zn(r)?(a.value=r,!0):Reflect.set(t,e,r,n)}};function u5(t){return xd(t)?t:new Proxy(t,GU)}class zU{constructor(e,r,n,a){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new KO(e,()=>{this._dirty||(this._dirty=!0,s5(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=n}get value(){const e=Wt(this);return a5(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function WU(t,e,r=!1){let n,a;const s=Tt(t);return s?(n=t,a=es):(n=t.get,a=t.set),new zU(n,a,s||!a,r)}function Bu(t,e,r,n){let a;try{a=n?t(...n):t()}catch(s){s_(s,e,r)}return a}function ts(t,e,r,n){if(Tt(t)){const s=Bu(t,e,r,n);return s&&U8(s)&&s.catch(o=>{s_(o,e,r)}),s}const a=[];for(let s=0;s<t.length;s++)a.push(ts(t[s],e,r,n));return a}function s_(t,e,r,n=!0){const a=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,u=r;for(;s;){const l=s.ec;if(l){for(let d=0;d<l.length;d++)if(l[d](t,o,u)===!1)return}s=s.parent}const c=e.appContext.config.errorHandler;if(c){Bu(c,null,10,[t,o,u]);return}}XU(t,r,a,n)}function XU(t,e,r,n=!0){console.error(t)}let yp=!1,xE=!1;const Yn=[];let Ds=0;const Rd=[];let wo=null,Fc=0;const c5=Promise.resolve();let rA=null;function l5(t){const e=rA||c5;return t?e.then(this?t.bind(this):t):e}function KU(t){let e=Ds+1,r=Yn.length;for(;e<r;){const n=e+r>>>1;bp(Yn[n])<t?e=n+1:r=n}return e}function nA(t){(!Yn.length||!Yn.includes(t,yp&&t.allowRecurse?Ds+1:Ds))&&(t.id==null?Yn.push(t):Yn.splice(KU(t.id),0,t),d5())}function d5(){!yp&&!xE&&(xE=!0,rA=c5.then(h5))}function JU(t){const e=Yn.indexOf(t);e>Ds&&Yn.splice(e,1)}function YU(t){bt(t)?Rd.push(...t):(!wo||!wo.includes(t,t.allowRecurse?Fc+1:Fc))&&Rd.push(t),d5()}function TI(t,e=yp?Ds+1:0){for(;e<Yn.length;e++){const r=Yn[e];r&&r.pre&&(Yn.splice(e,1),e--,r())}}function f5(t){if(Rd.length){const e=[...new Set(Rd)];if(Rd.length=0,wo){wo.push(...e);return}for(wo=e,wo.sort((r,n)=>bp(r)-bp(n)),Fc=0;Fc<wo.length;Fc++)wo[Fc]();wo=null,Fc=0}}const bp=t=>t.id==null?1/0:t.id,ZU=(t,e)=>{const r=bp(t)-bp(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function h5(t){xE=!1,yp=!0,Yn.sort(ZU);const e=es;try{for(Ds=0;Ds<Yn.length;Ds++){const r=Yn[Ds];r&&r.active!==!1&&Bu(r,null,14)}}finally{Ds=0,Yn.length=0,f5(),yp=!1,rA=null,(Yn.length||Rd.length)&&h5()}}function eq(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Tr;let a=r;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in n){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:h}=n[d]||Tr;h&&(a=r.map(p=>tn(p)?p.trim():p)),f&&(a=r.map(uU))}let u,c=n[u=_3(e)]||n[u=_3(ks(e))];!c&&s&&(c=n[u=_3(cf(e))]),c&&ts(c,t,6,a);const l=n[u+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[u])return;t.emitted[u]=!0,ts(l,t,6,a)}}function p5(t,e,r=!1){const n=e.emitsCache,a=n.get(t);if(a!==void 0)return a;const s=t.emits;let o={},u=!1;if(!Tt(t)){const c=l=>{const d=p5(l,e,!0);d&&(u=!0,An(o,d))};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!u?(Fr(t)&&n.set(t,null),null):(bt(s)?s.forEach(c=>o[c]=null):An(o,s),Fr(t)&&n.set(t,o),o)}function o_(t,e){return!t||!e_(e)?!1:(e=e.slice(2).replace(/Once$/,""),qt(t,e[0].toLowerCase()+e.slice(1))||qt(t,cf(e))||qt(t,e))}let Fn=null,u_=null;function mb(t){const e=Fn;return Fn=t,u_=t&&t.type.__scopeId||null,e}function tq(t){u_=t}function rq(){u_=null}function Hr(t,e=Fn,r){if(!e||t._n)return t;const n=(...a)=>{n._d&&MI(-1);const s=mb(e);let o;try{o=t(...a)}finally{mb(s),n._d&&MI(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function m3(t){const{type:e,vnode:r,proxy:n,withProxy:a,props:s,propsOptions:[o],slots:u,attrs:c,emit:l,render:d,renderCache:f,data:h,setupState:p,ctx:b,inheritAttrs:_}=t;let E,w;const O=mb(t);try{if(r.shapeFlag&4){const T=a||n;E=Is(d.call(T,T,f,s,p,h,b)),w=c}else{const T=e;E=Is(T.length>1?T(s,{attrs:c,slots:u,emit:l}):T(s,null)),w=e.props?c:nq(c)}}catch(T){tp.length=0,s_(T,t,1),E=dr(zu)}let A=E;if(w&&_!==!1){const T=Object.keys(w),{shapeFlag:I}=A;T.length&&I&7&&(o&&T.some(QO)&&(w=iq(w,o)),A=Ld(A,w))}return r.dirs&&(A=Ld(A),A.dirs=A.dirs?A.dirs.concat(r.dirs):r.dirs),r.transition&&(A.transition=r.transition),E=A,mb(O),E}const nq=t=>{let e;for(const r in t)(r==="class"||r==="style"||e_(r))&&((e||(e={}))[r]=t[r]);return e},iq=(t,e)=>{const r={};for(const n in t)(!QO(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function aq(t,e,r){const{props:n,children:a,component:s}=t,{props:o,children:u,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&c>=0){if(c&1024)return!0;if(c&16)return n?EI(n,o,l):!!o;if(c&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const h=d[f];if(o[h]!==n[h]&&!o_(l,h))return!0}}}else return(a||u)&&(!u||!u.$stable)?!0:n===o?!1:n?o?EI(n,o,l):!0:!!o;return!1}function EI(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let a=0;a<n.length;a++){const s=n[a];if(e[s]!==t[s]&&!o_(r,s))return!0}return!1}function sq({vnode:t,parent:e},r){for(;e&&e.subTree===t;)(t=e.vnode).el=r,e=e.parent}const oq=t=>t.__isSuspense;function uq(t,e){e&&e.pendingBranch?bt(t)?e.effects.push(...t):e.effects.push(t):YU(t)}function y5(t,e){return iA(t,null,e)}const Ly={};function Id(t,e,r){return iA(t,e,r)}function iA(t,e,{immediate:r,deep:n,flush:a,onTrack:s,onTrigger:o}=Tr){var u;const c=_U()===((u=On)==null?void 0:u.scope)?On:null;let l,d=!1,f=!1;if(Zn(t)?(l=()=>t.value,d=gb(t)):xd(t)?(l=()=>t,n=!0):bt(t)?(f=!0,d=t.some(T=>xd(T)||gb(T)),l=()=>t.map(T=>{if(Zn(T))return T.value;if(xd(T))return Qc(T);if(Tt(T))return Bu(T,c,2)})):Tt(t)?e?l=()=>Bu(t,c,2):l=()=>{if(!(c&&c.isUnmounted))return h&&h(),ts(t,c,3,[p])}:l=es,e&&n){const T=l;l=()=>Qc(T())}let h,p=T=>{h=O.onStop=()=>{Bu(T,c,4)}},b;if(gp)if(p=es,e?r&&ts(e,c,3,[l(),f?[]:void 0,p]):l(),a==="sync"){const T=Yq();b=T.__watcherHandles||(T.__watcherHandles=[])}else return es;let _=f?new Array(t.length).fill(Ly):Ly;const E=()=>{if(O.active)if(e){const T=O.run();(n||d||(f?T.some((I,D)=>hp(I,_[D])):hp(T,_)))&&(h&&h(),ts(e,c,3,[T,_===Ly?void 0:f&&_[0]===Ly?[]:_,p]),_=T)}else O.run()};E.allowRecurse=!!e;let w;a==="sync"?w=E:a==="post"?w=()=>Ci(E,c&&c.suspense):(E.pre=!0,c&&(E.id=c.uid),w=()=>nA(E));const O=new KO(l,w);e?r?E():_=O.run():a==="post"?Ci(O.run.bind(O),c&&c.suspense):O.run();const A=()=>{O.stop(),c&&c.scope&&GO(c.scope.effects,O)};return b&&b.push(A),A}function cq(t,e,r){const n=this.proxy,a=tn(t)?t.includes(".")?b5(n,t):()=>n[t]:t.bind(n,n);let s;Tt(e)?s=e:(s=e.handler,r=e);const o=On;Bd(this);const u=iA(a,s.bind(n),r);return o?Bd(o):Zc(),u}function b5(t,e){const r=e.split(".");return()=>{let n=t;for(let a=0;a<r.length&&n;a++)n=n[r[a]];return n}}function Qc(t,e){if(!Fr(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Zn(t))Qc(t.value,e);else if(bt(t))for(let r=0;r<t.length;r++)Qc(t[r],e);else if($8(t)||Ad(t))t.forEach(r=>{Qc(r,e)});else if(V8(t))for(const r in t)Qc(t[r],e);return t}function vb(t,e){const r=Fn;if(r===null)return t;const n=f_(r)||r.proxy,a=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,u,c,l=Tr]=e[s];o&&(Tt(o)&&(o={mounted:o,updated:o}),o.deep&&Qc(u),a.push({dir:o,instance:n,value:u,oldValue:void 0,arg:c,modifiers:l}))}return t}function gc(t,e,r,n){const a=t.dirs,s=e&&e.dirs;for(let o=0;o<a.length;o++){const u=a[o];s&&(u.oldValue=s[o].value);let c=u.dir[n];c&&(lf(),ts(c,r,8,[t.el,u,t,e]),df())}}function Sa(t,e){return Tt(t)?(()=>An({name:t.name},e,{setup:t}))():t}const Zh=t=>!!t.type.__asyncLoader,_5=t=>t.type.__isKeepAlive;function lq(t,e){g5(t,"a",e)}function dq(t,e){g5(t,"da",e)}function g5(t,e,r=On){const n=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(c_(e,n,r),r){let a=r.parent;for(;a&&a.parent;)_5(a.parent.vnode)&&fq(n,e,r,a),a=a.parent}}function fq(t,e,r,n){const a=c_(e,t,n,!0);aA(()=>{GO(n[e],a)},r)}function c_(t,e,r=On,n=!1){if(r){const a=r[t]||(r[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(r.isUnmounted)return;lf(),Bd(r);const u=ts(e,r,t,o);return Zc(),df(),u});return n?a.unshift(s):a.push(s),s}}const Xo=t=>(e,r=On)=>(!gp||t==="sp")&&c_(t,(...n)=>e(...n),r),hq=Xo("bm"),m5=Xo("m"),pq=Xo("bu"),v5=Xo("u"),yq=Xo("bum"),aA=Xo("um"),bq=Xo("sp"),_q=Xo("rtg"),gq=Xo("rtc");function mq(t,e=On){c_("ec",t,e)}const sA="components";function mc(t,e){return S5(sA,t,!0,e)||t}const w5=Symbol.for("v-ndc");function Ko(t){return tn(t)?S5(sA,t,!1)||t:t||w5}function S5(t,e,r=!0,n=!1){const a=Fn||On;if(a){const s=a.type;if(t===sA){const u=Xq(s,!1);if(u&&(u===e||u===ks(e)||u===n_(ks(e))))return s}const o=OI(a[t]||s[t],e)||OI(a.appContext[t],e);return!o&&n?s:o}}function OI(t,e){return t&&(t[e]||t[ks(e)]||t[n_(ks(e))])}function AI(t,e,r,n){let a;const s=r&&r[n];if(bt(t)||tn(t)){a=new Array(t.length);for(let o=0,u=t.length;o<u;o++)a[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){a=new Array(t);for(let o=0;o<t;o++)a[o]=e(o+1,o,void 0,s&&s[o])}else if(Fr(t))if(t[Symbol.iterator])a=Array.from(t,(o,u)=>e(o,u,void 0,s&&s[u]));else{const o=Object.keys(t);a=new Array(o.length);for(let u=0,c=o.length;u<c;u++){const l=o[u];a[u]=e(t[l],l,u,s&&s[u])}}else a=[];return r&&(r[n]=a),a}function rs(t,e,r={},n,a){if(Fn.isCE||Fn.parent&&Zh(Fn.parent)&&Fn.parent.isCE)return e!=="default"&&(r.name=e),dr("slot",r,n&&n());let s=t[e];s&&s._c&&(s._d=!1),At();const o=s&&T5(s(r)),u=ra(Fi,{key:r.key||o&&o.key||`_${e}`},o||(n?n():[]),o&&t._===1?64:-2);return!a&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),s&&s._c&&(s._d=!0),u}function T5(t){return t.some(e=>Tb(e)?!(e.type===zu||e.type===Fi&&!T5(e.children)):!0)?t:null}const RE=t=>t?C5(t)?f_(t)||t.proxy:RE(t.parent):null,ep=An(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>RE(t.parent),$root:t=>RE(t.root),$emit:t=>t.emit,$options:t=>oA(t),$forceUpdate:t=>t.f||(t.f=()=>nA(t.update)),$nextTick:t=>t.n||(t.n=l5.bind(t.proxy)),$watch:t=>cq.bind(t)}),v3=(t,e)=>t!==Tr&&!t.__isScriptSetup&&qt(t,e),vq={get({_:t},e){const{ctx:r,setupState:n,data:a,props:s,accessCache:o,type:u,appContext:c}=t;let l;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return a[e];case 4:return r[e];case 3:return s[e]}else{if(v3(n,e))return o[e]=1,n[e];if(a!==Tr&&qt(a,e))return o[e]=2,a[e];if((l=t.propsOptions[0])&&qt(l,e))return o[e]=3,s[e];if(r!==Tr&&qt(r,e))return o[e]=4,r[e];IE&&(o[e]=0)}}const d=ep[e];let f,h;if(d)return e==="$attrs"&&Ui(t,"get",e),d(t);if((f=u.__cssModules)&&(f=f[e]))return f;if(r!==Tr&&qt(r,e))return o[e]=4,r[e];if(h=c.config.globalProperties,qt(h,e))return h[e]},set({_:t},e,r){const{data:n,setupState:a,ctx:s}=t;return v3(a,e)?(a[e]=r,!0):n!==Tr&&qt(n,e)?(n[e]=r,!0):qt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:a,propsOptions:s}},o){let u;return!!r[o]||t!==Tr&&qt(t,o)||v3(e,o)||(u=s[0])&&qt(u,o)||qt(n,o)||qt(ep,o)||qt(a.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:qt(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function wq(){return Sq().attrs}function Sq(){const t=Qq();return t.setupContext||(t.setupContext=F5(t))}function xI(t){return bt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let IE=!0;function Tq(t){const e=oA(t),r=t.proxy,n=t.ctx;IE=!1,e.beforeCreate&&RI(e.beforeCreate,t,"bc");const{data:a,computed:s,methods:o,watch:u,provide:c,inject:l,created:d,beforeMount:f,mounted:h,beforeUpdate:p,updated:b,activated:_,deactivated:E,beforeDestroy:w,beforeUnmount:O,destroyed:A,unmounted:T,render:I,renderTracked:D,renderTriggered:U,errorCaptured:H,serverPrefetch:N,expose:R,inheritAttrs:F,components:X,directives:ne,filters:$}=e;if(l&&Eq(l,n,null),o)for(const se in o){const ie=o[se];Tt(ie)&&(n[se]=ie.bind(r))}if(a){const se=a.call(r,r);Fr(se)&&(t.data=a_(se))}if(IE=!0,s)for(const se in s){const ie=s[se],be=Tt(ie)?ie.bind(r,r):Tt(ie.get)?ie.get.bind(r,r):es,he=!Tt(ie)&&Tt(ie.set)?ie.set.bind(r):es,Te=nr({get:be,set:he});Object.defineProperty(n,se,{enumerable:!0,configurable:!0,get:()=>Te.value,set:Ne=>Te.value=Ne})}if(u)for(const se in u)E5(u[se],n,r,se);if(c){const se=Tt(c)?c.call(r):c;Reflect.ownKeys(se).forEach(ie=>{W1(ie,se[ie])})}d&&RI(d,t,"c");function Q(se,ie){bt(ie)?ie.forEach(be=>se(be.bind(r))):ie&&se(ie.bind(r))}if(Q(hq,f),Q(m5,h),Q(pq,p),Q(v5,b),Q(lq,_),Q(dq,E),Q(mq,H),Q(gq,D),Q(_q,U),Q(yq,O),Q(aA,T),Q(bq,N),bt(R))if(R.length){const se=t.exposed||(t.exposed={});R.forEach(ie=>{Object.defineProperty(se,ie,{get:()=>r[ie],set:be=>r[ie]=be})})}else t.exposed||(t.exposed={});I&&t.render===es&&(t.render=I),F!=null&&(t.inheritAttrs=F),X&&(t.components=X),ne&&(t.directives=ne)}function Eq(t,e,r=es){bt(t)&&(t=PE(t));for(const n in t){const a=t[n];let s;Fr(a)?"default"in a?s=ns(a.from||n,a.default,!0):s=ns(a.from||n):s=ns(a),Zn(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[n]=s}}function RI(t,e,r){ts(bt(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function E5(t,e,r,n){const a=n.includes(".")?b5(r,n):()=>r[n];if(tn(t)){const s=e[t];Tt(s)&&Id(a,s)}else if(Tt(t))Id(a,t.bind(r));else if(Fr(t))if(bt(t))t.forEach(s=>E5(s,e,r,n));else{const s=Tt(t.handler)?t.handler.bind(r):e[t.handler];Tt(s)&&Id(a,s,t)}}function oA(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:a,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,u=s.get(e);let c;return u?c=u:!a.length&&!r&&!n?c=e:(c={},a.length&&a.forEach(l=>wb(c,l,o,!0)),wb(c,e,o)),Fr(e)&&s.set(e,c),c}function wb(t,e,r,n=!1){const{mixins:a,extends:s}=e;s&&wb(t,s,r,!0),a&&a.forEach(o=>wb(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const u=Oq[o]||r&&r[o];t[o]=u?u(t[o],e[o]):e[o]}return t}const Oq={data:II,props:PI,emits:PI,methods:jh,computed:jh,beforeCreate:di,created:di,beforeMount:di,mounted:di,beforeUpdate:di,updated:di,beforeDestroy:di,beforeUnmount:di,destroyed:di,unmounted:di,activated:di,deactivated:di,errorCaptured:di,serverPrefetch:di,components:jh,directives:jh,watch:xq,provide:II,inject:Aq};function II(t,e){return e?t?function(){return An(Tt(t)?t.call(this,this):t,Tt(e)?e.call(this,this):e)}:e:t}function Aq(t,e){return jh(PE(t),PE(e))}function PE(t){if(bt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function di(t,e){return t?[...new Set([].concat(t,e))]:e}function jh(t,e){return t?An(Object.create(null),t,e):e}function PI(t,e){return t?bt(t)&&bt(e)?[...new Set([...t,...e])]:An(Object.create(null),xI(t),xI(e??{})):e}function xq(t,e){if(!t)return e;if(!e)return t;const r=An(Object.create(null),t);for(const n in e)r[n]=di(t[n],e[n]);return r}function O5(){return{app:null,config:{isNativeTag:rU,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Rq=0;function Iq(t,e){return function(n,a=null){Tt(n)||(n=An({},n)),a!=null&&!Fr(a)&&(a=null);const s=O5(),o=new Set;let u=!1;const c=s.app={_uid:Rq++,_component:n,_props:a,_container:null,_context:s,_instance:null,version:Zq,get config(){return s.config},set config(l){},use(l,...d){return o.has(l)||(l&&Tt(l.install)?(o.add(l),l.install(c,...d)):Tt(l)&&(o.add(l),l(c,...d))),c},mixin(l){return s.mixins.includes(l)||s.mixins.push(l),c},component(l,d){return d?(s.components[l]=d,c):s.components[l]},directive(l,d){return d?(s.directives[l]=d,c):s.directives[l]},mount(l,d,f){if(!u){const h=dr(n,a);return h.appContext=s,d&&e?e(h,l):t(h,l,f),u=!0,c._container=l,l.__vue_app__=c,f_(h.component)||h.component.proxy}},unmount(){u&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,d){return s.provides[l]=d,c},runWithContext(l){Sb=c;try{return l()}finally{Sb=null}}};return c}}let Sb=null;function W1(t,e){if(On){let r=On.provides;const n=On.parent&&On.parent.provides;n===r&&(r=On.provides=Object.create(n)),r[t]=e}}function ns(t,e,r=!1){const n=On||Fn;if(n||Sb){const a=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Sb._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return r&&Tt(e)?e.call(n&&n.proxy):e}}function Pq(t,e,r,n=!1){const a={},s={};_b(s,d_,1),t.propsDefaults=Object.create(null),A5(t,e,a,s);for(const o in t.propsOptions[0])o in a||(a[o]=void 0);r?t.props=n?a:t5(a):t.type.props?t.props=a:t.props=s,t.attrs=s}function Dq(t,e,r,n){const{props:a,attrs:s,vnode:{patchFlag:o}}=t,u=Wt(a),[c]=t.propsOptions;let l=!1;if((n||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let h=d[f];if(o_(t.emitsOptions,h))continue;const p=e[h];if(c)if(qt(s,h))p!==s[h]&&(s[h]=p,l=!0);else{const b=ks(h);a[b]=DE(c,u,b,p,t,!1)}else p!==s[h]&&(s[h]=p,l=!0)}}}else{A5(t,e,a,s)&&(l=!0);let d;for(const f in u)(!e||!qt(e,f)&&((d=cf(f))===f||!qt(e,d)))&&(c?r&&(r[f]!==void 0||r[d]!==void 0)&&(a[f]=DE(c,u,f,void 0,t,!0)):delete a[f]);if(s!==u)for(const f in s)(!e||!qt(e,f))&&(delete s[f],l=!0)}l&&Uo(t,"set","$attrs")}function A5(t,e,r,n){const[a,s]=t.propsOptions;let o=!1,u;if(e)for(let c in e){if(z1(c))continue;const l=e[c];let d;a&&qt(a,d=ks(c))?!s||!s.includes(d)?r[d]=l:(u||(u={}))[d]=l:o_(t.emitsOptions,c)||(!(c in n)||l!==n[c])&&(n[c]=l,o=!0)}if(s){const c=Wt(r),l=u||Tr;for(let d=0;d<s.length;d++){const f=s[d];r[f]=DE(a,c,f,l[f],t,!qt(l,f))}}return o}function DE(t,e,r,n,a,s){const o=t[r];if(o!=null){const u=qt(o,"default");if(u&&n===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Tt(c)){const{propsDefaults:l}=a;r in l?n=l[r]:(Bd(a),n=l[r]=c.call(null,e),Zc())}else n=c}o[0]&&(s&&!u?n=!1:o[1]&&(n===""||n===cf(r))&&(n=!0))}return n}function x5(t,e,r=!1){const n=e.propsCache,a=n.get(t);if(a)return a;const s=t.props,o={},u=[];let c=!1;if(!Tt(t)){const d=f=>{c=!0;const[h,p]=x5(f,e,!0);An(o,h),p&&u.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!c)return Fr(t)&&n.set(t,Od),Od;if(bt(s))for(let d=0;d<s.length;d++){const f=ks(s[d]);DI(f)&&(o[f]=Tr)}else if(s)for(const d in s){const f=ks(d);if(DI(f)){const h=s[d],p=o[f]=bt(h)||Tt(h)?{type:h}:An({},h);if(p){const b=CI(Boolean,p.type),_=CI(String,p.type);p[0]=b>-1,p[1]=_<0||b<_,(b>-1||qt(p,"default"))&&u.push(f)}}}const l=[o,u];return Fr(t)&&n.set(t,l),l}function DI(t){return t[0]!=="$"}function NI(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function jI(t,e){return NI(t)===NI(e)}function CI(t,e){return bt(e)?e.findIndex(r=>jI(r,t)):Tt(e)&&jI(e,t)?0:-1}const R5=t=>t[0]==="_"||t==="$stable",uA=t=>bt(t)?t.map(Is):[Is(t)],Nq=(t,e,r)=>{if(e._n)return e;const n=Hr((...a)=>uA(e(...a)),r);return n._c=!1,n},I5=(t,e,r)=>{const n=t._ctx;for(const a in t){if(R5(a))continue;const s=t[a];if(Tt(s))e[a]=Nq(a,s,n);else if(s!=null){const o=uA(s);e[a]=()=>o}}},P5=(t,e)=>{const r=uA(e);t.slots.default=()=>r},jq=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=Wt(e),_b(e,"_",r)):I5(e,t.slots={})}else t.slots={},e&&P5(t,e);_b(t.slots,d_,1)},Cq=(t,e,r)=>{const{vnode:n,slots:a}=t;let s=!0,o=Tr;if(n.shapeFlag&32){const u=e._;u?r&&u===1?s=!1:(An(a,e),!r&&u===1&&delete a._):(s=!e.$stable,I5(e,a)),o=e}else e&&(P5(t,e),o={default:1});if(s)for(const u in a)!R5(u)&&!(u in o)&&delete a[u]};function NE(t,e,r,n,a=!1){if(bt(t)){t.forEach((h,p)=>NE(h,e&&(bt(e)?e[p]:e),r,n,a));return}if(Zh(n)&&!a)return;const s=n.shapeFlag&4?f_(n.component)||n.component.proxy:n.el,o=a?null:s,{i:u,r:c}=t,l=e&&e.r,d=u.refs===Tr?u.refs={}:u.refs,f=u.setupState;if(l!=null&&l!==c&&(tn(l)?(d[l]=null,qt(f,l)&&(f[l]=null)):Zn(l)&&(l.value=null)),Tt(c))Bu(c,u,12,[o,d]);else{const h=tn(c),p=Zn(c);if(h||p){const b=()=>{if(t.f){const _=h?qt(f,c)?f[c]:d[c]:c.value;a?bt(_)&&GO(_,s):bt(_)?_.includes(s)||_.push(s):h?(d[c]=[s],qt(f,c)&&(f[c]=d[c])):(c.value=[s],t.k&&(d[t.k]=c.value))}else h?(d[c]=o,qt(f,c)&&(f[c]=o)):p&&(c.value=o,t.k&&(d[t.k]=o))};o?(b.id=-1,Ci(b,r)):b()}}}const Ci=uq;function Mq(t){return Fq(t)}function Fq(t,e){const r=SE();r.__VUE__=!0;const{insert:n,remove:a,patchProp:s,createElement:o,createText:u,createComment:c,setText:l,setElementText:d,parentNode:f,nextSibling:h,setScopeId:p=es,insertStaticContent:b}=t,_=(m,y,v,j=null,V=null,q=null,G=!1,Y=null,ee=!!y.dynamicChildren)=>{if(m===y)return;m&&!zf(m,y)&&(j=J(m),Ne(m,V,q,!0),m=null),y.patchFlag===-2&&(ee=!1,y.dynamicChildren=null);const{type:ae,ref:ve,shapeFlag:me}=y;switch(ae){case l_:E(m,y,v,j);break;case zu:w(m,y,v,j);break;case w3:m==null&&O(y,v,j,G);break;case Fi:X(m,y,v,j,V,q,G,Y,ee);break;default:me&1?I(m,y,v,j,V,q,G,Y,ee):me&6?ne(m,y,v,j,V,q,G,Y,ee):(me&64||me&128)&&ae.process(m,y,v,j,V,q,G,Y,ee,pe)}ve!=null&&V&&NE(ve,m&&m.ref,q,y||m,!y)},E=(m,y,v,j)=>{if(m==null)n(y.el=u(y.children),v,j);else{const V=y.el=m.el;y.children!==m.children&&l(V,y.children)}},w=(m,y,v,j)=>{m==null?n(y.el=c(y.children||""),v,j):y.el=m.el},O=(m,y,v,j)=>{[m.el,m.anchor]=b(m.children,y,v,j,m.el,m.anchor)},A=({el:m,anchor:y},v,j)=>{let V;for(;m&&m!==y;)V=h(m),n(m,v,j),m=V;n(y,v,j)},T=({el:m,anchor:y})=>{let v;for(;m&&m!==y;)v=h(m),a(m),m=v;a(y)},I=(m,y,v,j,V,q,G,Y,ee)=>{G=G||y.type==="svg",m==null?D(y,v,j,V,q,G,Y,ee):N(m,y,V,q,G,Y,ee)},D=(m,y,v,j,V,q,G,Y)=>{let ee,ae;const{type:ve,props:me,shapeFlag:Ee,transition:k,dirs:W}=m;if(ee=m.el=o(m.type,q,me&&me.is,me),Ee&8?d(ee,m.children):Ee&16&&H(m.children,ee,null,j,V,q&&ve!=="foreignObject",G,Y),W&&gc(m,null,j,"created"),U(ee,m,m.scopeId,G,j),me){for(const S in me)S!=="value"&&!z1(S)&&s(ee,S,null,me[S],q,m.children,j,V,oe);"value"in me&&s(ee,"value",null,me.value),(ae=me.onVnodeBeforeMount)&&vs(ae,j,m)}W&&gc(m,null,j,"beforeMount");const M=(!V||V&&!V.pendingBranch)&&k&&!k.persisted;M&&k.beforeEnter(ee),n(ee,y,v),((ae=me&&me.onVnodeMounted)||M||W)&&Ci(()=>{ae&&vs(ae,j,m),M&&k.enter(ee),W&&gc(m,null,j,"mounted")},V)},U=(m,y,v,j,V)=>{if(v&&p(m,v),j)for(let q=0;q<j.length;q++)p(m,j[q]);if(V){let q=V.subTree;if(y===q){const G=V.vnode;U(m,G,G.scopeId,G.slotScopeIds,V.parent)}}},H=(m,y,v,j,V,q,G,Y,ee=0)=>{for(let ae=ee;ae<m.length;ae++){const ve=m[ae]=Y?Su(m[ae]):Is(m[ae]);_(null,ve,y,v,j,V,q,G,Y)}},N=(m,y,v,j,V,q,G)=>{const Y=y.el=m.el;let{patchFlag:ee,dynamicChildren:ae,dirs:ve}=y;ee|=m.patchFlag&16;const me=m.props||Tr,Ee=y.props||Tr;let k;v&&vc(v,!1),(k=Ee.onVnodeBeforeUpdate)&&vs(k,v,y,m),ve&&gc(y,m,v,"beforeUpdate"),v&&vc(v,!0);const W=V&&y.type!=="foreignObject";if(ae?R(m.dynamicChildren,ae,Y,v,j,W,q):G||ie(m,y,Y,null,v,j,W,q,!1),ee>0){if(ee&16)F(Y,y,me,Ee,v,j,V);else if(ee&2&&me.class!==Ee.class&&s(Y,"class",null,Ee.class,V),ee&4&&s(Y,"style",me.style,Ee.style,V),ee&8){const M=y.dynamicProps;for(let S=0;S<M.length;S++){const x=M[S],z=me[x],ue=Ee[x];(ue!==z||x==="value")&&s(Y,x,z,ue,V,m.children,v,j,oe)}}ee&1&&m.children!==y.children&&d(Y,y.children)}else!G&&ae==null&&F(Y,y,me,Ee,v,j,V);((k=Ee.onVnodeUpdated)||ve)&&Ci(()=>{k&&vs(k,v,y,m),ve&&gc(y,m,v,"updated")},j)},R=(m,y,v,j,V,q,G)=>{for(let Y=0;Y<y.length;Y++){const ee=m[Y],ae=y[Y],ve=ee.el&&(ee.type===Fi||!zf(ee,ae)||ee.shapeFlag&70)?f(ee.el):v;_(ee,ae,ve,null,j,V,q,G,!0)}},F=(m,y,v,j,V,q,G)=>{if(v!==j){if(v!==Tr)for(const Y in v)!z1(Y)&&!(Y in j)&&s(m,Y,v[Y],null,G,y.children,V,q,oe);for(const Y in j){if(z1(Y))continue;const ee=j[Y],ae=v[Y];ee!==ae&&Y!=="value"&&s(m,Y,ae,ee,G,y.children,V,q,oe)}"value"in j&&s(m,"value",v.value,j.value)}},X=(m,y,v,j,V,q,G,Y,ee)=>{const ae=y.el=m?m.el:u(""),ve=y.anchor=m?m.anchor:u("");let{patchFlag:me,dynamicChildren:Ee,slotScopeIds:k}=y;k&&(Y=Y?Y.concat(k):k),m==null?(n(ae,v,j),n(ve,v,j),H(y.children,v,ve,V,q,G,Y,ee)):me>0&&me&64&&Ee&&m.dynamicChildren?(R(m.dynamicChildren,Ee,v,V,q,G,Y),(y.key!=null||V&&y===V.subTree)&&D5(m,y,!0)):ie(m,y,v,ve,V,q,G,Y,ee)},ne=(m,y,v,j,V,q,G,Y,ee)=>{y.slotScopeIds=Y,m==null?y.shapeFlag&512?V.ctx.activate(y,v,j,G,ee):$(y,v,j,V,q,G,ee):C(m,y,ee)},$=(m,y,v,j,V,q,G)=>{const Y=m.component=kq(m,j,V);if(_5(m)&&(Y.ctx.renderer=pe),Gq(Y),Y.asyncDep){if(V&&V.registerDep(Y,Q),!m.el){const ee=Y.subTree=dr(zu);w(null,ee,y,v)}return}Q(Y,m,y,v,V,q,G)},C=(m,y,v)=>{const j=y.component=m.component;if(aq(m,y,v))if(j.asyncDep&&!j.asyncResolved){se(j,y,v);return}else j.next=y,JU(j.update),j.update();else y.el=m.el,j.vnode=y},Q=(m,y,v,j,V,q,G)=>{const Y=()=>{if(m.isMounted){let{next:ve,bu:me,u:Ee,parent:k,vnode:W}=m,M=ve,S;vc(m,!1),ve?(ve.el=W.el,se(m,ve,G)):ve=W,me&&g3(me),(S=ve.props&&ve.props.onVnodeBeforeUpdate)&&vs(S,k,ve,W),vc(m,!0);const x=m3(m),z=m.subTree;m.subTree=x,_(z,x,f(z.el),J(z),m,V,q),ve.el=x.el,M===null&&sq(m,x.el),Ee&&Ci(Ee,V),(S=ve.props&&ve.props.onVnodeUpdated)&&Ci(()=>vs(S,k,ve,W),V)}else{let ve;const{el:me,props:Ee}=y,{bm:k,m:W,parent:M}=m,S=Zh(y);if(vc(m,!1),k&&g3(k),!S&&(ve=Ee&&Ee.onVnodeBeforeMount)&&vs(ve,M,y),vc(m,!0),me&&P){const x=()=>{m.subTree=m3(m),P(me,m.subTree,m,V,null)};S?y.type.__asyncLoader().then(()=>!m.isUnmounted&&x()):x()}else{const x=m.subTree=m3(m);_(null,x,v,j,m,V,q),y.el=x.el}if(W&&Ci(W,V),!S&&(ve=Ee&&Ee.onVnodeMounted)){const x=y;Ci(()=>vs(ve,M,x),V)}(y.shapeFlag&256||M&&Zh(M.vnode)&&M.vnode.shapeFlag&256)&&m.a&&Ci(m.a,V),m.isMounted=!0,y=v=j=null}},ee=m.effect=new KO(Y,()=>nA(ae),m.scope),ae=m.update=()=>ee.run();ae.id=m.uid,vc(m,!0),ae()},se=(m,y,v)=>{y.component=m;const j=m.vnode.props;m.vnode=y,m.next=null,Dq(m,y.props,j,v),Cq(m,y.children,v),lf(),TI(),df()},ie=(m,y,v,j,V,q,G,Y,ee=!1)=>{const ae=m&&m.children,ve=m?m.shapeFlag:0,me=y.children,{patchFlag:Ee,shapeFlag:k}=y;if(Ee>0){if(Ee&128){he(ae,me,v,j,V,q,G,Y,ee);return}else if(Ee&256){be(ae,me,v,j,V,q,G,Y,ee);return}}k&8?(ve&16&&oe(ae,V,q),me!==ae&&d(v,me)):ve&16?k&16?he(ae,me,v,j,V,q,G,Y,ee):oe(ae,V,q,!0):(ve&8&&d(v,""),k&16&&H(me,v,j,V,q,G,Y,ee))},be=(m,y,v,j,V,q,G,Y,ee)=>{m=m||Od,y=y||Od;const ae=m.length,ve=y.length,me=Math.min(ae,ve);let Ee;for(Ee=0;Ee<me;Ee++){const k=y[Ee]=ee?Su(y[Ee]):Is(y[Ee]);_(m[Ee],k,v,null,V,q,G,Y,ee)}ae>ve?oe(m,V,q,!0,!1,me):H(y,v,j,V,q,G,Y,ee,me)},he=(m,y,v,j,V,q,G,Y,ee)=>{let ae=0;const ve=y.length;let me=m.length-1,Ee=ve-1;for(;ae<=me&&ae<=Ee;){const k=m[ae],W=y[ae]=ee?Su(y[ae]):Is(y[ae]);if(zf(k,W))_(k,W,v,null,V,q,G,Y,ee);else break;ae++}for(;ae<=me&&ae<=Ee;){const k=m[me],W=y[Ee]=ee?Su(y[Ee]):Is(y[Ee]);if(zf(k,W))_(k,W,v,null,V,q,G,Y,ee);else break;me--,Ee--}if(ae>me){if(ae<=Ee){const k=Ee+1,W=k<ve?y[k].el:j;for(;ae<=Ee;)_(null,y[ae]=ee?Su(y[ae]):Is(y[ae]),v,W,V,q,G,Y,ee),ae++}}else if(ae>Ee)for(;ae<=me;)Ne(m[ae],V,q,!0),ae++;else{const k=ae,W=ae,M=new Map;for(ae=W;ae<=Ee;ae++){const Ue=y[ae]=ee?Su(y[ae]):Is(y[ae]);Ue.key!=null&&M.set(Ue.key,ae)}let S,x=0;const z=Ee-W+1;let ue=!1,ge=0;const we=new Array(z);for(ae=0;ae<z;ae++)we[ae]=0;for(ae=k;ae<=me;ae++){const Ue=m[ae];if(x>=z){Ne(Ue,V,q,!0);continue}let Ge;if(Ue.key!=null)Ge=M.get(Ue.key);else for(S=W;S<=Ee;S++)if(we[S-W]===0&&zf(Ue,y[S])){Ge=S;break}Ge===void 0?Ne(Ue,V,q,!0):(we[Ge-W]=ae+1,Ge>=ge?ge=Ge:ue=!0,_(Ue,y[Ge],v,null,V,q,G,Y,ee),x++)}const Me=ue?Lq(we):Od;for(S=Me.length-1,ae=z-1;ae>=0;ae--){const Ue=W+ae,Ge=y[Ue],We=Ue+1<ve?y[Ue+1].el:j;we[ae]===0?_(null,Ge,v,We,V,q,G,Y,ee):ue&&(S<0||ae!==Me[S]?Te(Ge,v,We,2):S--)}}},Te=(m,y,v,j,V=null)=>{const{el:q,type:G,transition:Y,children:ee,shapeFlag:ae}=m;if(ae&6){Te(m.component.subTree,y,v,j);return}if(ae&128){m.suspense.move(y,v,j);return}if(ae&64){G.move(m,y,v,pe);return}if(G===Fi){n(q,y,v);for(let me=0;me<ee.length;me++)Te(ee[me],y,v,j);n(m.anchor,y,v);return}if(G===w3){A(m,y,v);return}if(j!==2&&ae&1&&Y)if(j===0)Y.beforeEnter(q),n(q,y,v),Ci(()=>Y.enter(q),V);else{const{leave:me,delayLeave:Ee,afterLeave:k}=Y,W=()=>n(q,y,v),M=()=>{me(q,()=>{W(),k&&k()})};Ee?Ee(q,W,M):M()}else n(q,y,v)},Ne=(m,y,v,j=!1,V=!1)=>{const{type:q,props:G,ref:Y,children:ee,dynamicChildren:ae,shapeFlag:ve,patchFlag:me,dirs:Ee}=m;if(Y!=null&&NE(Y,null,v,m,!0),ve&256){y.ctx.deactivate(m);return}const k=ve&1&&Ee,W=!Zh(m);let M;if(W&&(M=G&&G.onVnodeBeforeUnmount)&&vs(M,y,m),ve&6)xe(m.component,v,j);else{if(ve&128){m.suspense.unmount(v,j);return}k&&gc(m,null,y,"beforeUnmount"),ve&64?m.type.remove(m,y,v,V,pe,j):ae&&(q!==Fi||me>0&&me&64)?oe(ae,y,v,!1,!0):(q===Fi&&me&384||!V&&ve&16)&&oe(ee,y,v),j&&ye(m)}(W&&(M=G&&G.onVnodeUnmounted)||k)&&Ci(()=>{M&&vs(M,y,m),k&&gc(m,null,y,"unmounted")},v)},ye=m=>{const{type:y,el:v,anchor:j,transition:V}=m;if(y===Fi){ce(v,j);return}if(y===w3){T(m);return}const q=()=>{a(v),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(m.shapeFlag&1&&V&&!V.persisted){const{leave:G,delayLeave:Y}=V,ee=()=>G(v,q);Y?Y(m.el,q,ee):ee()}else q()},ce=(m,y)=>{let v;for(;m!==y;)v=h(m),a(m),m=v;a(y)},xe=(m,y,v)=>{const{bum:j,scope:V,update:q,subTree:G,um:Y}=m;j&&g3(j),V.stop(),q&&(q.active=!1,Ne(G,m,y,v)),Y&&Ci(Y,y),Ci(()=>{m.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},oe=(m,y,v,j=!1,V=!1,q=0)=>{for(let G=q;G<m.length;G++)Ne(m[G],y,v,j,V)},J=m=>m.shapeFlag&6?J(m.component.subTree):m.shapeFlag&128?m.suspense.next():h(m.anchor||m.el),le=(m,y,v)=>{m==null?y._vnode&&Ne(y._vnode,null,null,!0):_(y._vnode||null,m,y,null,null,null,v),TI(),f5(),y._vnode=m},pe={p:_,um:Ne,m:Te,r:ye,mt:$,mc:H,pc:ie,pbc:R,n:J,o:t};let L,P;return e&&([L,P]=e(pe)),{render:le,hydrate:L,createApp:Iq(le,L)}}function vc({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function D5(t,e,r=!1){const n=t.children,a=e.children;if(bt(n)&&bt(a))for(let s=0;s<n.length;s++){const o=n[s];let u=a[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=a[s]=Su(a[s]),u.el=o.el),r||D5(o,u)),u.type===l_&&(u.el=o.el)}}function Lq(t){const e=t.slice(),r=[0];let n,a,s,o,u;const c=t.length;for(n=0;n<c;n++){const l=t[n];if(l!==0){if(a=r[r.length-1],t[a]<l){e[n]=a,r.push(n);continue}for(s=0,o=r.length-1;s<o;)u=s+o>>1,t[r[u]]<l?s=u+1:o=u;l<t[r[s]]&&(s>0&&(e[n]=r[s-1]),r[s]=n)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=e[o];return r}const Bq=t=>t.__isTeleport,Fi=Symbol.for("v-fgt"),l_=Symbol.for("v-txt"),zu=Symbol.for("v-cmt"),w3=Symbol.for("v-stc"),tp=[];let Za=null;function At(t=!1){tp.push(Za=t?null:[])}function $q(){tp.pop(),Za=tp[tp.length-1]||null}let _p=1;function MI(t){_p+=t}function N5(t){return t.dynamicChildren=_p>0?Za||Od:null,$q(),_p>0&&Za&&Za.push(t),t}function lr(t,e,r,n,a,s){return N5(Vt(t,e,r,n,a,s,!0))}function ra(t,e,r,n,a){return N5(dr(t,e,r,n,a,!0))}function Tb(t){return t?t.__v_isVNode===!0:!1}function zf(t,e){return t.type===e.type&&t.key===e.key}const d_="__vInternal",j5=({key:t})=>t??null,X1=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?tn(t)||Zn(t)||Tt(t)?{i:Fn,r:t,k:e,f:!!r}:t:null);function Vt(t,e=null,r=null,n=0,a=null,s=t===Fi?0:1,o=!1,u=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&j5(e),ref:e&&X1(e),scopeId:u_,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Fn};return u?(cA(c,r),s&128&&t.normalize(c)):r&&(c.shapeFlag|=tn(r)?8:16),_p>0&&!o&&Za&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Za.push(c),c}const dr=Uq;function Uq(t,e=null,r=null,n=0,a=null,s=!1){if((!t||t===w5)&&(t=zu),Tb(t)){const u=Ld(t,e,!0);return r&&cA(u,r),_p>0&&!s&&Za&&(u.shapeFlag&6?Za[Za.indexOf(t)]=u:Za.push(u)),u.patchFlag|=-2,u}if(Kq(t)&&(t=t.__vccOpts),e){e=qq(e);let{class:u,style:c}=e;u&&!tn(u)&&(e.class=En(u)),Fr(c)&&(n5(c)&&!bt(c)&&(c=An({},c)),e.style=Du(c))}const o=tn(t)?1:oq(t)?128:Bq(t)?64:Fr(t)?4:Tt(t)?2:0;return Vt(t,e,r,n,a,o,s,!0)}function qq(t){return t?n5(t)||d_ in t?An({},t):t:null}function Ld(t,e,r=!1){const{props:n,ref:a,patchFlag:s,children:o}=t,u=e?jE(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&j5(u),ref:e&&e.ref?r&&a?bt(a)?a.concat(X1(e)):[a,X1(e)]:X1(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fi?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ld(t.ssContent),ssFallback:t.ssFallback&&Ld(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function od(t=" ",e=0){return dr(l_,null,t,e)}function cn(t="",e=!1){return e?(At(),ra(zu,null,t)):dr(zu,null,t)}function Is(t){return t==null||typeof t=="boolean"?dr(zu):bt(t)?dr(Fi,null,t.slice()):typeof t=="object"?Su(t):dr(l_,null,String(t))}function Su(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ld(t)}function cA(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(bt(e))r=16;else if(typeof e=="object")if(n&65){const a=e.default;a&&(a._c&&(a._d=!1),cA(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!(d_ in e)?e._ctx=Fn:a===3&&Fn&&(Fn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Tt(e)?(e={default:e,_ctx:Fn},r=32):(e=String(e),n&64?(r=16,e=[od(e)]):r=8);t.children=e,t.shapeFlag|=r}function jE(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const a in n)if(a==="class")e.class!==n.class&&(e.class=En([e.class,n.class]));else if(a==="style")e.style=Du([e.style,n.style]);else if(e_(a)){const s=e[a],o=n[a];o&&s!==o&&!(bt(s)&&s.includes(o))&&(e[a]=s?[].concat(s,o):o)}else a!==""&&(e[a]=n[a])}return e}function vs(t,e,r,n=null){ts(t,e,7,[r,n])}const Vq=O5();let Hq=0;function kq(t,e,r){const n=t.type,a=(e?e.appContext:t.appContext)||Vq,s={uid:Hq++,vnode:t,type:n,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new yU(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:x5(n,a),emitsOptions:p5(n,a),emit:null,emitted:null,propsDefaults:Tr,inheritAttrs:n.inheritAttrs,ctx:Tr,data:Tr,props:Tr,attrs:Tr,slots:Tr,refs:Tr,setupState:Tr,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=eq.bind(null,s),t.ce&&t.ce(s),s}let On=null;const Qq=()=>On||Fn;let lA,Hl,FI="__VUE_INSTANCE_SETTERS__";(Hl=SE()[FI])||(Hl=SE()[FI]=[]),Hl.push(t=>On=t),lA=t=>{Hl.length>1?Hl.forEach(e=>e(t)):Hl[0](t)};const Bd=t=>{lA(t),t.scope.on()},Zc=()=>{On&&On.scope.off(),lA(null)};function C5(t){return t.vnode.shapeFlag&4}let gp=!1;function Gq(t,e=!1){gp=e;const{props:r,children:n}=t.vnode,a=C5(t);Pq(t,r,a,e),jq(t,n);const s=a?zq(t,e):void 0;return gp=!1,s}function zq(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=i5(new Proxy(t.ctx,vq));const{setup:n}=r;if(n){const a=t.setupContext=n.length>1?F5(t):null;Bd(t),lf();const s=Bu(n,t,0,[t.props,a]);if(df(),Zc(),U8(s)){if(s.then(Zc,Zc),e)return s.then(o=>{LI(t,o,e)}).catch(o=>{s_(o,t,0)});t.asyncDep=s}else LI(t,s,e)}else M5(t,e)}function LI(t,e,r){Tt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Fr(e)&&(t.setupState=u5(e)),M5(t,r)}let BI;function M5(t,e,r){const n=t.type;if(!t.render){if(!e&&BI&&!n.render){const a=n.template||oA(t).template;if(a){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:u,compilerOptions:c}=n,l=An(An({isCustomElement:s,delimiters:u},o),c);n.render=BI(a,l)}}t.render=n.render||es}Bd(t),lf(),Tq(t),df(),Zc()}function Wq(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,r){return Ui(t,"get","$attrs"),e[r]}}))}function F5(t){const e=r=>{t.exposed=r||{}};return{get attrs(){return Wq(t)},slots:t.slots,emit:t.emit,expose:e}}function f_(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(u5(i5(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in ep)return ep[r](t)},has(e,r){return r in e||r in ep}}))}function Xq(t,e=!0){return Tt(t)?t.displayName||t.name:t.name||e&&t.__name}function Kq(t){return Tt(t)&&"__vccOpts"in t}const nr=(t,e)=>WU(t,e,gp);function L5(t,e,r){const n=arguments.length;return n===2?Fr(e)&&!bt(e)?Tb(e)?dr(t,null,[e]):dr(t,e):dr(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Tb(r)&&(r=[r]),dr(t,e,r))}const Jq=Symbol.for("v-scx"),Yq=()=>ns(Jq),Zq="3.3.4",eV="http://www.w3.org/2000/svg",Lc=typeof document<"u"?document:null,$I=Lc&&Lc.createElement("template"),tV={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const a=e?Lc.createElementNS(eV,t):Lc.createElement(t,r?{is:r}:void 0);return t==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:t=>Lc.createTextNode(t),createComment:t=>Lc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Lc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,a,s){const o=r?r.previousSibling:e.lastChild;if(a&&(a===s||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===s||!(a=a.nextSibling)););else{$I.innerHTML=n?`<svg>${t}</svg>`:t;const u=$I.content;if(n){const c=u.firstChild;for(;c.firstChild;)u.appendChild(c.firstChild);u.removeChild(c)}e.insertBefore(u,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}};function rV(t,e,r){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}function nV(t,e,r){const n=t.style,a=tn(r);if(r&&!a){if(e&&!tn(e))for(const s in e)r[s]==null&&CE(n,s,"");for(const s in r)CE(n,s,r[s])}else{const s=n.display;a?e!==r&&(n.cssText=r):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=s)}}const UI=/\s*!important$/;function CE(t,e,r){if(bt(r))r.forEach(n=>CE(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=iV(t,e);UI.test(r)?t.setProperty(cf(n),r.replace(UI,""),"important"):t[n]=r}}const qI=["Webkit","Moz","ms"],S3={};function iV(t,e){const r=S3[e];if(r)return r;let n=ks(e);if(n!=="filter"&&n in t)return S3[e]=n;n=n_(n);for(let a=0;a<qI.length;a++){const s=qI[a]+n;if(s in t)return S3[e]=s}return e}const VI="http://www.w3.org/1999/xlink";function aV(t,e,r,n,a){if(n&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(VI,e.slice(6,e.length)):t.setAttributeNS(VI,e,r);else{const s=pU(e);r==null||s&&!H8(r)?t.removeAttribute(e):t.setAttribute(e,s?"":r)}}function sV(t,e,r,n,a,s,o){if(e==="innerHTML"||e==="textContent"){n&&o(n,a,s),t[e]=r??"";return}const u=t.tagName;if(e==="value"&&u!=="PROGRESS"&&!u.includes("-")){t._value=r;const l=u==="OPTION"?t.getAttribute("value"):t.value,d=r??"";l!==d&&(t.value=d),r==null&&t.removeAttribute(e);return}let c=!1;if(r===""||r==null){const l=typeof t[e];l==="boolean"?r=H8(r):r==null&&l==="string"?(r="",c=!0):l==="number"&&(r=0,c=!0)}try{t[e]=r}catch{}c&&t.removeAttribute(e)}function oV(t,e,r,n){t.addEventListener(e,r,n)}function uV(t,e,r,n){t.removeEventListener(e,r,n)}function cV(t,e,r,n,a=null){const s=t._vei||(t._vei={}),o=s[e];if(n&&o)o.value=n;else{const[u,c]=lV(e);if(n){const l=s[e]=hV(n,a);oV(t,u,l,c)}else o&&(uV(t,u,o,c),s[e]=void 0)}}const HI=/(?:Once|Passive|Capture)$/;function lV(t){let e;if(HI.test(t)){e={};let n;for(;n=t.match(HI);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):cf(t.slice(2)),e]}let T3=0;const dV=Promise.resolve(),fV=()=>T3||(dV.then(()=>T3=0),T3=Date.now());function hV(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;ts(pV(n,r.value),e,5,[n])};return r.value=t,r.attached=fV(),r}function pV(t,e){if(bt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>a=>!a._stopped&&n&&n(a))}else return e}const kI=/^on[a-z]/,yV=(t,e,r,n,a=!1,s,o,u,c)=>{e==="class"?rV(t,n,a):e==="style"?nV(t,r,n):e_(e)?QO(e)||cV(t,e,r,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):bV(t,e,n,a))?sV(t,e,n,s,o,u,c):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),aV(t,e,n,a))};function bV(t,e,r,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&kI.test(e)&&Tt(r)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||kI.test(e)&&tn(r)?!1:e in t}const _V=An({patchProp:yV},tV);let QI;function gV(){return QI||(QI=Mq(_V))}const mV=(...t)=>{const e=gV().createApp(...t),{mount:r}=e;return e.mount=n=>{const a=vV(n);if(!a)return;const s=e._component;!Tt(s)&&!s.render&&!s.template&&(s.template=a.innerHTML),a.innerHTML="";const o=r(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),o},e};function vV(t){return tn(t)?document.querySelector(t):t}const wV=["primary","secondary","success","danger","warning","info","light","dark"],SV="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%",TV=[0,0,0],GI=.5,EV=t=>t&&wV.includes(t.toLowerCase()),OV=(t,e)=>{const r=s=>(s.length<7&&(s=`#${s[1]}${s[1]}${s[2]}${s[2]}${s[3]}${s[3]}`),[parseInt(s.substr(1,2),16),parseInt(s.substr(3,2),16),parseInt(s.substr(5,2),16)]),n=s=>{const o=document.body.appendChild(document.createElement("fictum")),u="rgb(1, 2, 3)";return o.style.color=u,o.style.color!==u||(o.style.color=s,o.style.color===u||o.style.color==="")?e:(s=getComputedStyle(o).color,document.body.removeChild(o),s)},a=s=>{const o=s.match(/[.\d]+/g);if(o===null)return;const u=o.map(c=>+Number(c));return u.length=3,u};return typeof t=="string"&&t.toLowerCase()==="transparent"?e:typeof t=="string"&&t[0]==="#"?r(t):(typeof t=="string"&&t.indexOf("rgb")===-1&&(t=n(t)),typeof t=="string"&&t.indexOf("rgb")===0?a(t):e)},AV=({offsetX:t,offsetY:e,height:r,width:n})=>{const a=e<=r/2,s=t<=n/2,o=(f,h)=>Math.sqrt(f**2+h**2),u=e===r/2&&t===n/2,c={first:a===!0&&s===!1,second:a===!0&&s===!0,third:a===!1&&s===!0,fourth:a===!1&&s===!1},l={topLeft:o(t,e),topRight:o(n-t,e),bottomLeft:o(t,r-e),bottomRight:o(n-t,r-e)};let d=0;return u||c.fourth?d=l.topLeft:c.third?d=l.topRight:c.second?d=l.bottomRight:c.first&&(d=l.bottomLeft),d*2},xV=(t,e)=>{for(const r in e)t.style[r]=e[r]},RV=t=>{const e=OV(t,TV);if(t!==""&&e){const r=e.join(",");return`radial-gradient(circle, ${SV.split("{{color}}").join(`${r}`)})`}},IV=(t,e,r)=>{const n=document.createElement("div");n.classList.add("ripple-wave");const a={offsetX:r.centered?e.height/2:e.left,offsetY:r.centered?e.width/2:e.top,height:e.height,width:e.width},s=AV(a),o=r.radius||s/2,u={delay:r.duration&&r.duration*GI,duration:r.duration&&r.duration-r.duration*GI},c={left:r.centered?`${Math.round(e.width/2-o)}px`:`${Math.round(e.left-o)}px`,top:r.centered?`${Math.round(e.height/2-o)}px`:`${Math.round(e.top-o)}px`,height:`${Math.round(r.radius&&r.radius*2||s)}px`,width:`${Math.round(r.radius&&r.radius*2||s)}px`,transitionDelay:`0s, ${u.delay}ms`,transitionDuration:`${r.duration}ms, ${u.duration}ms`};r.unbound&&t.classList.add("ripple-surface-unbound"),EV(r.color)?t.classList.add(`ripple-surface-${r.color}`):c.backgroundImage=RV(r.color),xV(n,c),t.appendChild(n),setTimeout(()=>{n.classList.add("active")},50),setTimeout(()=>{t.removeChild(n)},r.duration?r.duration+1e3:1e3)},B5={mounted(t,e){if(e.value===!1)return;const r={centered:e.value&&e.value.centered||!1,color:e.value&&e.value.color||"",duration:e.value&&e.value.duration||500,radius:e.value&&e.value.radius||0,unbound:e.value&&e.value.unbound||!1};t.classList.add("ripple-surface"),t.waves=n=>{const a={top:n.layerY,left:n.layerX,height:t.offsetHeight,width:t.offsetWidth};IV(t,a,r)},t.addEventListener("click",n=>t.waves(n))},updated(t){t.classList.contains("ripple-surface")||t.classList.add("ripple-surface")},unmounted(t){t.removeEventListener("click",e=>t.waves(e))}},PV={name:"MDBBtn"},DV=Sa({...PV,props:{color:String,size:String,outline:String,rounded:Boolean,floating:Boolean,toggler:Boolean,toggle:Boolean,role:{type:String,default:"button"},type:{type:String,default:"button"},tag:{type:String,default:"button"},block:{type:Boolean,default:!1},ripple:{type:[Object,Boolean],default:t=>t.outline||t.color==="light"||t.color==="link"?{color:"dark"}:!0},picker:Boolean},emits:["update:toggle"],setup(t,{emit:e}){const r=t,n=pi(r.toggle),a=nr(()=>[!r.picker&&"btn",r.color&&`btn-${r.color}`,r.size&&`btn-${r.size}`,r.outline&&`btn-outline-${r.outline}`,r.rounded&&"btn-rounded",r.floating&&"btn-floating",r.block&&"btn-block",n.value&&"active"]),s=()=>{r.toggler&&(n.value=!n.value,e("update:toggle",n.value))};return(o,u)=>vb((At(),ra(Ko(t.tag),{type:t.type,role:t.role,class:En(Dt(a)),onClick:s},{default:Hr(()=>[rs(o.$slots,"default")]),_:3},8,["type","role","class"])),[[Dt(B5),t.ripple]])}}),NV={name:"MDBCard"},jV=Sa({...NV,props:{tag:{type:String,default:"div"},border:String,bg:String,text:[String,Array],shadow:String},setup(t){const e=t,r=nr(()=>{const a=e.text;return["card",e.border&&`border border-${e.border}`,e.bg&&`bg-${e.bg}`,e.shadow&&`shadow-${e.shadow}`,e.text&&n(a)]}),n=a=>typeof a=="string"?`text-${a}`:a.map(s=>`text-${s}`.trim()).join(" ");return(a,s)=>(At(),ra(Ko(t.tag),{class:En(Dt(r))},{default:Hr(()=>[rs(a.$slots,"default")]),_:3},8,["class"]))}}),CV={name:"MDBCardBody"},MV=Sa({...CV,props:{tag:{type:String,default:"div"},text:{type:[String,Array]}},setup(t){const e=t,r=nr(()=>{const a=e.text;return["card-body",e.text&&n(a)]}),n=a=>typeof a=="string"?`text-${a}`:a.map(s=>`text-${s}`.trim()).join(" ");return(a,s)=>(At(),ra(Ko(t.tag),{class:En(Dt(r))},{default:Hr(()=>[rs(a.$slots,"default")]),_:3},8,["class"]))}}),FV={name:"MDBCardTitle"},LV=Sa({...FV,props:{tag:{type:String,default:"h5"},subtitle:{type:Boolean,default:!1}},setup(t){const e=t,r=nr(()=>e.subtitle?e.tag!=="h5"?e.tag:"h6":e.tag),n=nr(()=>[e.subtitle?"card-subtitle":"card-title"]);return(a,s)=>(At(),ra(Ko(Dt(r)),{class:En(Dt(n))},{default:Hr(()=>[rs(a.$slots,"default")]),_:3},8,["class"]))}}),BV={name:"MDBCardText"},$V=Sa({...BV,props:{tag:{type:String,default:"p"}},setup(t){const e=nr(()=>["card-text"]);return(r,n)=>(At(),ra(Ko(t.tag),{class:En(Dt(e))},{default:Hr(()=>[rs(r.$slots,"default")]),_:3},8,["class"]))}}),UV={name:"MDBCardFooter"},qV=Sa({...UV,props:{tag:{type:String,default:"div"},bg:String,border:String},setup(t){const e=t,r=nr(()=>["card-footer",e.border&&`border-${e.border}`,e.bg&&`bg-${e.bg}`]);return(n,a)=>(At(),ra(Ko(t.tag),{class:En(Dt(r))},{default:Hr(()=>[rs(n.$slots,"default")]),_:3},8,["class"]))}}),VV=1e6,HV=t=>{do t+=Math.floor(Math.random()*VV);while(document.getElementById(t));return t},kV=/\..*/,QV={mouseenter:"mouseover",mouseleave:"mouseout"},GV=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function $5(t,e,r){const n=typeof e=="string",a=n?r:e;let s=t.replace(kV,"");const o=QV[s];return o&&(s=o),GV.indexOf(s)>-1||(s=t),[n,a,s]}function zV(t,e,r,n){if(typeof e!="string"||!t)return;r||(r=n,n=null);const[a,s,o]=$5(e,r,n);t.addEventListener(o,s,a)}function WV(t,e,r,n){t.removeEventListener(e,r,!!n)}const XV=function(t,e,r,n=void 0){zV(t,e,r,n)},KV=function(t,e,r,n=void 0){if(typeof e!="string"||!t)return;const[a,s,o]=$5(e,r,n);WV(t,o,s,a?r:null)};var ME={stopProp(t){t.stopPropagation()},mounted(t,e){const r=a=>{const s=a.target;!t.contains(s)&&t!==s&&e.value(a)};t.clickOutside=r;const n=e.modifiers.mousedown?"mousedown":"click";document.addEventListener(n,a=>{var s;return(s=t.clickOutside)==null?void 0:s.call(t,a)}),document.addEventListener("touchstart",a=>{var s;return(s=t.clickOutside)==null?void 0:s.call(t,a)})},unmounted(t,e){if(!t.clickOutside)return;const r=e.modifiers.mousedown?"mousedown":"click";document.removeEventListener(r,n=>{var a;return(a=t.clickOutside)==null?void 0:a.call(t,n)}),document.removeEventListener("touchstart",n=>{var a;return(a=t.clickOutside)==null?void 0:a.call(t,n)}),delete t.clickOutside}};const JV={key:1,class:"visually-hidden"},YV={name:"MDBDropdownToggle"};({...YV,props:{...DV.props}});const ZV={name:"MDBContainer"},eH=Sa({...ZV,props:{tag:{type:String,default:"div"},sm:{type:Boolean,default:!1},md:{type:Boolean,default:!1},lg:{type:Boolean,default:!1},xl:{type:Boolean,default:!1},xxl:{type:Boolean,default:!1},fluid:{type:Boolean,default:!1}},setup(t){const e=t,r=nr(()=>[e.fluid?"container-fluid":"",e.sm?"container-sm":"",e.md?"container-md":"",e.lg?"container-lg":"",e.xl?"container-xl":"",e.xxl?"container-xxl":"",!e.fluid&&!e.sm&&!e.md&&!e.lg&&!e.xl&&!e.xxl?"container":""]);return(n,a)=>(At(),ra(Ko(t.tag),{class:En(Dt(r))},{default:Hr(()=>[rs(n.$slots,"default")]),_:3},8,["class"]))}}),tH=["id","value"],rH=["for"],nH={key:2,class:"form-helper"},iH={key:3,class:"form-helper"},aH={class:"form-counter"},sH=Vt("div",{class:"form-notch-trailing"},null,-1),oH=["id","value"],uH=["for"],cH={key:1,class:"form-helper"},lH={key:2,class:"form-helper"},dH={class:"form-counter"},fH=Vt("div",{class:"form-notch-trailing"},null,-1),hH={key:9,class:"form-text"},pH={name:"MDBInput",inheritAttrs:!1},yH=Sa({...pH,props:{id:String,label:String,labelClass:String,modelValue:[String,Number,Date],size:String,formOutline:{type:Boolean,default:!0},wrapperClass:String,inputGroup:{type:[Boolean,String],default:!1},wrap:{type:Boolean,default:!0},formText:String,white:Boolean,validationEvent:String,isValidated:Boolean,isValid:Boolean,validFeedback:String,invalidFeedback:String,tooltipFeedback:{type:Boolean,default:!1},tag:{type:String,default:"div"},helper:String,counter:Boolean,maxlength:{type:Number,default:0}},emits:["update:modelValue","click-outside","on-validate"],setup(t,{expose:e,emit:r}){const n=t,a=wq(),s=pi(null),o=pi(n.modelValue),u=pi(null),c=pi(!1),l=pi(9),d=pi(0),f=n.id||HV("MDBInput-"),h=nr(()=>[n.formOutline&&"form-outline",_.value,n.white&&"form-white",n.wrapperClass]),p=nr(()=>["form-control",n.size?`form-control-${n.size}`:n.inputGroup&&n.inputGroup!==!0&&`form-control-${n.inputGroup}`,(o.value||o.value===0)&&"active",c.value&&"placeholder-active",A.value&&T.value&&"is-valid",A.value&&!T.value&&"is-invalid"]),b=nr(()=>["form-label",n.labelClass]),_=nr(()=>{if(n.inputGroup)return n.inputGroup!==!0?`input-group input-group-${n.inputGroup}`:"input-group"}),E=nr(()=>n.inputGroup&&A.value?{marginBottom:"1rem"}:""),w=nr(()=>n.tooltipFeedback?"valid-tooltip":"valid-feedback"),O=nr(()=>n.tooltipFeedback?"invalid-tooltip":"invalid-feedback"),A=pi(n.isValidated),T=pi(n.isValid),I=pi(""),D=nr(()=>A.value&&!T.value&&n.validationEvent?I.value:n.invalidFeedback),U=he=>{const Te=he.target;T.value=Te.checkValidity(),T.value||(I.value=Te.validationMessage),A.value=!0,r("on-validate",T.value)},H=()=>{n.validationEvent!=="submit"&&typeof s.value!="string"&&XV(s.value,n.validationEvent,U)};function N(){u.value&&(d.value=u.value.clientWidth*.8+8)}function R(){a.placeholder&&!u.value?c.value=!0:c.value=!1}const F=pi(null);F.value=typeof o.value=="string"&&o.value?o.value.length:0;function X(he){const Te=he.target;if(n.counter){if(Te.value.length>n.maxlength){typeof o.value=="string"&&(Te.value=o.value);return}F.value=Te.value.length}o.value=Te.value,r("update:modelValue",o.value)}function ne(){r("click-outside")}const $=pi(null),C=pi(),Q=he=>{C.value.forEach(Te=>Te.style.opacity=he?"0":"1"),he&&($.value.style.opacity="1")},se=a.type&&a.type==="date",ie=(he=!1)=>{var Te;n.label&&n.formOutline&&((Te=C.value)==null?void 0:Te.length)>1&&Q(he),se&&typeof s.value!="string"&&(s.value.type=he?"date":"text")},be=he=>![...he.parentNode.children].findIndex(Te=>Te===he);return m5(()=>{if(N(),R(),ie(),n.label&&n.formOutline&&(C.value=s.value.parentNode.querySelectorAll(".form-notch")),n.label&&n.formOutline&&!be(s.value)){const he=parseFloat(getComputedStyle(u.value).left);u.value.style.left=`${he+s.value.offsetLeft}px`,l.value+=s.value.offsetLeft}n.validationEvent&&H()}),v5(()=>{N(),R()}),aA(()=>{typeof s.value!="string"&&KV(s.value,n.validationEvent,U)}),y5(()=>{var he,Te;if(n.counter&&typeof n.modelValue=="string"){if(((he=n.modelValue)==null?void 0:he.length)>n.maxlength){o.value=n.modelValue.slice(0,n.maxlength),F.value=n.maxlength;return}F.value=((Te=n.modelValue)==null?void 0:Te.length)||0}o.value=n.modelValue}),Id(()=>n.isValidated,he=>A.value=he),Id(()=>n.isValid,he=>T.value=he),e({inputRef:s}),(he,Te)=>(At(),lr(Fi,null,[t.wrap?cn("",!0):vb((At(),lr("input",jE({key:0,class:Dt(p),id:Dt(f),value:o.value},he.$attrs,{onInput:X,ref_key:"inputRef",ref:s,onFocus:Te[0]||(Te[0]=Ne=>ie(!0)),onBlur:Te[1]||(Te[1]=Ne=>ie())}),null,16,tH)),[[Dt(ME),ne]]),t.label&&!t.wrap?(At(),lr("label",{key:1,ref_key:"labelRef",ref:u,class:En(Dt(b)),for:Dt(f)},Cr(t.label),11,rH)):cn("",!0),!t.wrap&&t.helper?(At(),lr("div",nH,Cr(t.helper),1)):cn("",!0),!t.wrap&&t.counter?(At(),lr("div",iH,[Vt("div",aH,Cr(F.value)+" / "+Cr(t.maxlength),1)])):cn("",!0),t.wrap?cn("",!0):rs(he.$slots,"default",{key:4}),!t.wrap&&t.validFeedback?(At(),lr("div",{key:5,class:En(Dt(w))},Cr(t.validFeedback),3)):cn("",!0),!t.wrap&&Dt(D)?(At(),lr("div",{key:6,class:En(Dt(O))},Cr(Dt(D)),3)):cn("",!0),!t.wrap&&t.formOutline?(At(),lr("div",{key:7,class:"form-notch",ref_key:"notchRef",ref:$},[Vt("div",{class:"form-notch-leading",style:Du({width:`${l.value}px`})},null,4),Vt("div",{class:"form-notch-middle",style:Du({width:`${d.value}px`})},null,4),sH],512)):cn("",!0),t.wrap?vb((At(),ra(Ko(t.tag),{key:8,class:En(Dt(h)),style:Du(Dt(E))},{default:Hr(()=>[rs(he.$slots,"prepend"),Vt("input",jE({class:Dt(p)},he.$attrs,{id:Dt(f),value:o.value,onInput:X,ref_key:"inputRef",ref:s,onFocus:Te[2]||(Te[2]=Ne=>ie(!0)),onBlur:Te[3]||(Te[3]=Ne=>ie())}),null,16,oH),t.label?(At(),lr("label",{key:0,ref_key:"labelRef",ref:u,class:En(Dt(b)),for:Dt(f)},Cr(t.label),11,uH)):cn("",!0),t.helper?(At(),lr("div",cH,Cr(t.helper),1)):cn("",!0),t.counter?(At(),lr("div",lH,[Vt("div",dH,Cr(F.value)+" / "+Cr(t.maxlength),1)])):cn("",!0),rs(he.$slots,"default"),t.validFeedback?(At(),lr("div",{key:3,class:En(Dt(w))},Cr(t.validFeedback),3)):cn("",!0),Dt(D)?(At(),lr("div",{key:4,class:En(Dt(O))},Cr(Dt(D)),3)):cn("",!0),t.formOutline?(At(),lr("div",{key:5,class:"form-notch",ref_key:"notchRef",ref:$},[Vt("div",{class:"form-notch-leading",style:Du({width:`${l.value}px`})},null,4),Vt("div",{class:"form-notch-middle",style:Du({width:`${d.value}px`})},null,4),fH],512)):cn("",!0)]),_:3},8,["class","style"])),[[Dt(ME),ne]]):cn("",!0),t.formText?(At(),lr("div",hH,Cr(t.formText),1)):cn("",!0)],64))}});var g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bH(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function h_(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var U5={},p_={},y_={},Gp={},q5={},b_={},Je={},dA={},V5={};Object.defineProperty(V5,"__esModule",{value:!0});var H5={};Object.defineProperty(H5,"__esModule",{value:!0});var k5={};Object.defineProperty(k5,"__esModule",{value:!0});var Q5={};Object.defineProperty(Q5,"__esModule",{value:!0});var G5={};Object.defineProperty(G5,"__esModule",{value:!0});var z5={};Object.defineProperty(z5,"__esModule",{value:!0});var W5={};Object.defineProperty(W5,"__esModule",{value:!0});var X5={};Object.defineProperty(X5,"__esModule",{value:!0});var K5={};Object.defineProperty(K5,"__esModule",{value:!0});var J5={};Object.defineProperty(J5,"__esModule",{value:!0});var Y5={};Object.defineProperty(Y5,"__esModule",{value:!0});var Z5={};Object.defineProperty(Z5,"__esModule",{value:!0});var ej={};Object.defineProperty(ej,"__esModule",{value:!0});var __={};Object.defineProperty(__,"__esModule",{value:!0});__.Logger=void 0;class g_{static getLevelOrdinal(e){return g_.LEVELS[e]}}__.Logger=g_;g_.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(V5,t),r(H5,t),r(k5,t),r(Q5,t),r(G5,t),r(z5,t),r(W5,t),r(X5,t),r(K5,t),r(J5,t),r(Y5,t),r(Z5,t),r(ej,t),r(__,t)})(dA);var rl={},zp="delete",Er=5,ba=1<<Er,wi=ba-1,$t={};function FE(){return{value:!1}}function _a(t){t&&(t.value=!0)}function fA(){}function $d(t){return t.size===void 0&&(t.size=t.__iterate(tj)),t.size}function Wu(t,e){if(typeof e!="number"){var r=e>>>0;if(""+r!==e||r===4294967295)return NaN;e=r}return e<0?$d(t)+e:e}function tj(){return!0}function Wp(t,e,r){return(t===0&&!nj(t)||r!==void 0&&t<=-r)&&(e===void 0||r!==void 0&&e>=r)}function ff(t,e){return rj(t,e,0)}function Xp(t,e){return rj(t,e,e)}function rj(t,e,r){return t===void 0?r:nj(t)?e===1/0?e:Math.max(0,e+t)|0:e===void 0||e===t?t:Math.min(e,t)|0}function nj(t){return t<0||t===0&&1/t===-1/0}var ij="@@__IMMUTABLE_ITERABLE__@@";function ei(t){return!!(t&&t[ij])}var aj="@@__IMMUTABLE_KEYED__@@";function hr(t){return!!(t&&t[aj])}var sj="@@__IMMUTABLE_INDEXED__@@";function Ln(t){return!!(t&&t[sj])}function hf(t){return hr(t)||Ln(t)}var Ar=function(e){return ei(e)?e:ti(e)},Ta=function(t){function e(r){return hr(r)?r:rc(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ar),hl=function(t){function e(r){return Ln(r)?r:Ea(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ar),pf=function(t){function e(r){return ei(r)&&!hf(r)?r:_f(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ar);Ar.Keyed=Ta;Ar.Indexed=hl;Ar.Set=pf;var oj="@@__IMMUTABLE_SEQ__@@";function Kp(t){return!!(t&&t[oj])}var uj="@@__IMMUTABLE_RECORD__@@";function tc(t){return!!(t&&t[uj])}function sa(t){return ei(t)||tc(t)}var yf="@@__IMMUTABLE_ORDERED__@@";function ta(t){return!!(t&&t[yf])}var Jp=0,as=1,va=2,LE=typeof Symbol=="function"&&Symbol.iterator,cj="@@iterator",m_=LE||cj,kt=function(e){this.next=e};kt.prototype.toString=function(){return"[Iterator]"};kt.KEYS=Jp;kt.VALUES=as;kt.ENTRIES=va;kt.prototype.inspect=kt.prototype.toSource=function(){return this.toString()};kt.prototype[m_]=function(){return this};function xr(t,e,r,n){var a=t===0?e:t===1?r:[e,r];return n?n.value=a:n={value:a,done:!1},n}function Ti(){return{value:void 0,done:!0}}function hA(t){return Array.isArray(t)?!0:!!v_(t)}function zI(t){return t&&typeof t.next=="function"}function BE(t){var e=v_(t);return e&&e.call(t)}function v_(t){var e=t&&(LE&&t[LE]||t[cj]);if(typeof e=="function")return e}function _H(t){var e=v_(t);return e&&e===t.entries}function gH(t){var e=v_(t);return e&&e===t.keys}var bf=Object.prototype.hasOwnProperty;function pA(t){return Array.isArray(t)||typeof t=="string"?!0:t&&typeof t=="object"&&Number.isInteger(t.length)&&t.length>=0&&(t.length===0?Object.keys(t).length===1:t.hasOwnProperty(t.length-1))}var ti=function(t){function e(r){return r==null?bA():sa(r)?r.toSeq():vH(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(n,a){var s=this._cache;if(s){for(var o=s.length,u=0;u!==o;){var c=s[a?o-++u:u++];if(n(c[1],c[0],this)===!1)break}return u}return this.__iterateUncached(n,a)},e.prototype.__iterator=function(n,a){var s=this._cache;if(s){var o=s.length,u=0;return new kt(function(){if(u===o)return Ti();var c=s[a?o-++u:u++];return xr(n,c[0],c[1])})}return this.__iteratorUncached(n,a)},e}(Ar),rc=function(t){function e(r){return r==null?bA().toKeyedSeq():ei(r)?hr(r)?r.toSeq():r.fromEntrySeq():tc(r)?r.toSeq():_A(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(ti),Ea=function(t){function e(r){return r==null?bA():ei(r)?hr(r)?r.entrySeq():r.toIndexedSeq():tc(r)?r.toSeq().entrySeq():lj(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(ti),_f=function(t){function e(r){return(ei(r)&&!hf(r)?r:Ea(r)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(ti);ti.isSeq=Kp;ti.Keyed=rc;ti.Set=_f;ti.Indexed=Ea;ti.prototype[oj]=!0;var nl=function(t){function e(r){this._array=r,this.size=r.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,a){return this.has(n)?this._array[Wu(this,n)]:a},e.prototype.__iterate=function(n,a){for(var s=this._array,o=s.length,u=0;u!==o;){var c=a?o-++u:u++;if(n(s[c],c,this)===!1)break}return u},e.prototype.__iterator=function(n,a){var s=this._array,o=s.length,u=0;return new kt(function(){if(u===o)return Ti();var c=a?o-++u:u++;return xr(n,c,s[c])})},e}(Ea),yA=function(t){function e(r){var n=Object.keys(r).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r):[]);this._object=r,this._keys=n,this.size=n.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,a){return a!==void 0&&!this.has(n)?a:this._object[n]},e.prototype.has=function(n){return bf.call(this._object,n)},e.prototype.__iterate=function(n,a){for(var s=this._object,o=this._keys,u=o.length,c=0;c!==u;){var l=o[a?u-++c:c++];if(n(s[l],l,this)===!1)break}return c},e.prototype.__iterator=function(n,a){var s=this._object,o=this._keys,u=o.length,c=0;return new kt(function(){if(c===u)return Ti();var l=o[a?u-++c:c++];return xr(n,l,s[l])})},e}(rc);yA.prototype[yf]=!0;var mH=function(t){function e(r){this._collection=r,this.size=r.length||r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,a){if(a)return this.cacheResult().__iterate(n,a);var s=this._collection,o=BE(s),u=0;if(zI(o))for(var c;!(c=o.next()).done&&n(c.value,u++,this)!==!1;);return u},e.prototype.__iteratorUncached=function(n,a){if(a)return this.cacheResult().__iterator(n,a);var s=this._collection,o=BE(s);if(!zI(o))return new kt(Ti);var u=0;return new kt(function(){var c=o.next();return c.done?c:xr(n,u++,c.value)})},e}(Ea),WI;function bA(){return WI||(WI=new nl([]))}function _A(t){var e=gA(t);if(e)return e.fromEntrySeq();if(typeof t=="object")return new yA(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function lj(t){var e=gA(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function vH(t){var e=gA(t);if(e)return _H(t)?e.fromEntrySeq():gH(t)?e.toSetSeq():e;if(typeof t=="object")return new yA(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function gA(t){return pA(t)?new nl(t):hA(t)?new mH(t):void 0}var dj="@@__IMMUTABLE_MAP__@@";function Yp(t){return!!(t&&t[dj])}function w_(t){return Yp(t)&&ta(t)}function Eb(t){return!!(t&&typeof t.equals=="function"&&typeof t.hashCode=="function")}function hn(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if(typeof t.valueOf=="function"&&typeof e.valueOf=="function"){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(Eb(t)&&Eb(e)&&t.equals(e))}var Wf=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,r){e|=0,r|=0;var n=e&65535,a=r&65535;return n*a+((e>>>16)*a+n*(r>>>16)<<16>>>0)|0};function S_(t){return t>>>1&1073741824|t&3221225471}var wH=Object.prototype.valueOf;function gi(t){if(t==null)return XI(t);if(typeof t.hashCode=="function")return S_(t.hashCode(t));var e=xH(t);if(e==null)return XI(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return SH(e);case"string":return e.length>RH?TH(e):$E(e);case"object":case"function":return OH(e);case"symbol":return EH(e);default:if(typeof e.toString=="function")return $E(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function XI(t){return t===null?1108378658:1108378659}function SH(t){if(t!==t||t===1/0)return 0;var e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return S_(e)}function TH(t){var e=A3[t];return e===void 0&&(e=$E(t),O3===IH&&(O3=0,A3={}),O3++,A3[t]=e),e}function $E(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return S_(e)}function EH(t){var e=YI[t];return e!==void 0||(e=fj(),YI[t]=e),e}function OH(t){var e;if(UE&&(e=qE.get(t),e!==void 0)||(e=t[Bc],e!==void 0)||!JI&&(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Bc],e!==void 0||(e=AH(t),e!==void 0)))return e;if(e=fj(),UE)qE.set(t,e);else{if(KI!==void 0&&KI(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(JI)Object.defineProperty(t,Bc,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Bc]=e;else if(t.nodeType!==void 0)t[Bc]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var KI=Object.isExtensible,JI=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function AH(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function xH(t){return t.valueOf!==wH&&typeof t.valueOf=="function"?t.valueOf(t):t}function fj(){var t=++E3;return E3&1073741824&&(E3=0),t}var UE=typeof WeakMap=="function",qE;UE&&(qE=new WeakMap);var YI=Object.create(null),E3=0,Bc="__immutablehash__";typeof Symbol=="function"&&(Bc=Symbol(Bc));var RH=16,IH=255,O3=0,A3={},T_=function(t){function e(r,n){this._iter=r,this._useKeys=n,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,a){return this._iter.get(n,a)},e.prototype.has=function(n){return this._iter.has(n)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var n=this,a=mA(this,!0);return this._useKeys||(a.valueSeq=function(){return n._iter.toSeq().reverse()}),a},e.prototype.map=function(n,a){var s=this,o=_j(this,n,a);return this._useKeys||(o.valueSeq=function(){return s._iter.toSeq().map(n,a)}),o},e.prototype.__iterate=function(n,a){var s=this;return this._iter.__iterate(function(o,u){return n(o,u,s)},a)},e.prototype.__iterator=function(n,a){return this._iter.__iterator(n,a)},e}(rc);T_.prototype[yf]=!0;var hj=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,a){var s=this,o=0;return a&&$d(this),this._iter.__iterate(function(u){return n(u,a?s.size-++o:o++,s)},a)},e.prototype.__iterator=function(n,a){var s=this,o=this._iter.__iterator(as,a),u=0;return a&&$d(this),new kt(function(){var c=o.next();return c.done?c:xr(n,a?s.size-++u:u++,c.value,c)})},e}(Ea),pj=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,a){var s=this;return this._iter.__iterate(function(o){return n(o,o,s)},a)},e.prototype.__iterator=function(n,a){var s=this._iter.__iterator(as,a);return new kt(function(){var o=s.next();return o.done?o:xr(n,o.value,o.value,o)})},e}(_f),yj=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(n,a){var s=this;return this._iter.__iterate(function(o){if(o){eP(o);var u=ei(o);return n(u?o.get(1):o[1],u?o.get(0):o[0],s)}},a)},e.prototype.__iterator=function(n,a){var s=this._iter.__iterator(as,a);return new kt(function(){for(;;){var o=s.next();if(o.done)return o;var u=o.value;if(u){eP(u);var c=ei(u);return xr(n,c?u.get(0):u[0],c?u.get(1):u[1],o)}}})},e}(rc);hj.prototype.cacheResult=T_.prototype.cacheResult=pj.prototype.cacheResult=yj.prototype.cacheResult=SA;function bj(t){var e=Js(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var r=t.reverse.apply(this);return r.flip=function(){return t.reverse()},r},e.has=function(r){return t.includes(r)},e.includes=function(r){return t.has(r)},e.cacheResult=SA,e.__iterateUncached=function(r,n){var a=this;return t.__iterate(function(s,o){return r(o,s,a)!==!1},n)},e.__iteratorUncached=function(r,n){if(r===va){var a=t.__iterator(r,n);return new kt(function(){var s=a.next();if(!s.done){var o=s.value[0];s.value[0]=s.value[1],s.value[1]=o}return s})}return t.__iterator(r===as?Jp:as,n)},e}function _j(t,e,r){var n=Js(t);return n.size=t.size,n.has=function(a){return t.has(a)},n.get=function(a,s){var o=t.get(a,$t);return o===$t?s:e.call(r,o,a,t)},n.__iterateUncached=function(a,s){var o=this;return t.__iterate(function(u,c,l){return a(e.call(r,u,c,l),c,o)!==!1},s)},n.__iteratorUncached=function(a,s){var o=t.__iterator(va,s);return new kt(function(){var u=o.next();if(u.done)return u;var c=u.value,l=c[0];return xr(a,l,e.call(r,c[1],l,t),u)})},n}function mA(t,e){var r=this,n=Js(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var a=bj(t);return a.reverse=function(){return t.flip()},a}),n.get=function(a,s){return t.get(e?a:-1-a,s)},n.has=function(a){return t.has(e?a:-1-a)},n.includes=function(a){return t.includes(a)},n.cacheResult=SA,n.__iterate=function(a,s){var o=this,u=0;return s&&$d(t),t.__iterate(function(c,l){return a(c,e?l:s?o.size-++u:u++,o)},!s)},n.__iterator=function(a,s){var o=0;s&&$d(t);var u=t.__iterator(va,!s);return new kt(function(){var c=u.next();if(c.done)return c;var l=c.value;return xr(a,e?l[0]:s?r.size-++o:o++,l[1],c)})},n}function gj(t,e,r,n){var a=Js(t);return n&&(a.has=function(s){var o=t.get(s,$t);return o!==$t&&!!e.call(r,o,s,t)},a.get=function(s,o){var u=t.get(s,$t);return u!==$t&&e.call(r,u,s,t)?u:o}),a.__iterateUncached=function(s,o){var u=this,c=0;return t.__iterate(function(l,d,f){if(e.call(r,l,d,f))return c++,s(l,n?d:c-1,u)},o),c},a.__iteratorUncached=function(s,o){var u=t.__iterator(va,o),c=0;return new kt(function(){for(;;){var l=u.next();if(l.done)return l;var d=l.value,f=d[0],h=d[1];if(e.call(r,h,f,t))return xr(s,n?f:c++,h,l)}})},a}function PH(t,e,r){var n=ic().asMutable();return t.__iterate(function(a,s){n.update(e.call(r,a,s,t),0,function(o){return o+1})}),n.asImmutable()}function DH(t,e,r){var n=hr(t),a=(ta(t)?ss():ic()).asMutable();t.__iterate(function(o,u){a.update(e.call(r,o,u,t),function(c){return c=c||[],c.push(n?[u,o]:o),c})});var s=wA(t);return a.map(function(o){return fr(t,s(o))}).asImmutable()}function NH(t,e,r){var n=hr(t),a=[[],[]];t.__iterate(function(o,u){a[e.call(r,o,u,t)?1:0].push(n?[u,o]:o)});var s=wA(t);return a.map(function(o){return fr(t,s(o))})}function vA(t,e,r,n){var a=t.size;if(Wp(e,r,a))return t;var s=ff(e,a),o=Xp(r,a);if(s!==s||o!==o)return vA(t.toSeq().cacheResult(),e,r,n);var u=o-s,c;u===u&&(c=u<0?0:u);var l=Js(t);return l.size=c===0?c:t.size&&c||void 0,!n&&Kp(t)&&c>=0&&(l.get=function(d,f){return d=Wu(this,d),d>=0&&d<c?t.get(d+s,f):f}),l.__iterateUncached=function(d,f){var h=this;if(c===0)return 0;if(f)return this.cacheResult().__iterate(d,f);var p=0,b=!0,_=0;return t.__iterate(function(E,w){if(!(b&&(b=p++<s)))return _++,d(E,n?w:_-1,h)!==!1&&_!==c}),_},l.__iteratorUncached=function(d,f){if(c!==0&&f)return this.cacheResult().__iterator(d,f);if(c===0)return new kt(Ti);var h=t.__iterator(d,f),p=0,b=0;return new kt(function(){for(;p++<s;)h.next();if(++b>c)return Ti();var _=h.next();return n||d===as||_.done?_:d===Jp?xr(d,b-1,void 0,_):xr(d,b-1,_.value[1],_)})},l}function jH(t,e,r){var n=Js(t);return n.__iterateUncached=function(a,s){var o=this;if(s)return this.cacheResult().__iterate(a,s);var u=0;return t.__iterate(function(c,l,d){return e.call(r,c,l,d)&&++u&&a(c,l,o)}),u},n.__iteratorUncached=function(a,s){var o=this;if(s)return this.cacheResult().__iterator(a,s);var u=t.__iterator(va,s),c=!0;return new kt(function(){if(!c)return Ti();var l=u.next();if(l.done)return l;var d=l.value,f=d[0],h=d[1];return e.call(r,h,f,o)?a===va?l:xr(a,f,h,l):(c=!1,Ti())})},n}function mj(t,e,r,n){var a=Js(t);return a.__iterateUncached=function(s,o){var u=this;if(o)return this.cacheResult().__iterate(s,o);var c=!0,l=0;return t.__iterate(function(d,f,h){if(!(c&&(c=e.call(r,d,f,h))))return l++,s(d,n?f:l-1,u)}),l},a.__iteratorUncached=function(s,o){var u=this;if(o)return this.cacheResult().__iterator(s,o);var c=t.__iterator(va,o),l=!0,d=0;return new kt(function(){var f,h,p;do{if(f=c.next(),f.done)return n||s===as?f:s===Jp?xr(s,d++,void 0,f):xr(s,d++,f.value[1],f);var b=f.value;h=b[0],p=b[1],l&&(l=e.call(r,p,h,u))}while(l);return s===va?f:xr(s,h,p,f)})},a}function CH(t,e){var r=hr(t),n=[t].concat(e).map(function(o){return ei(o)?r&&(o=Ta(o)):o=r?_A(o):lj(Array.isArray(o)?o:[o]),o}).filter(function(o){return o.size!==0});if(n.length===0)return t;if(n.length===1){var a=n[0];if(a===t||r&&hr(a)||Ln(t)&&Ln(a))return a}var s=new nl(n);return r?s=s.toKeyedSeq():Ln(t)||(s=s.toSetSeq()),s=s.flatten(!0),s.size=n.reduce(function(o,u){if(o!==void 0){var c=u.size;if(c!==void 0)return o+c}},0),s}function vj(t,e,r){var n=Js(t);return n.__iterateUncached=function(a,s){if(s)return this.cacheResult().__iterate(a,s);var o=0,u=!1;function c(l,d){l.__iterate(function(f,h){return(!e||d<e)&&ei(f)?c(f,d+1):(o++,a(f,r?h:o-1,n)===!1&&(u=!0)),!u},s)}return c(t,0),o},n.__iteratorUncached=function(a,s){if(s)return this.cacheResult().__iterator(a,s);var o=t.__iterator(a,s),u=[],c=0;return new kt(function(){for(;o;){var l=o.next();if(l.done!==!1){o=u.pop();continue}var d=l.value;if(a===va&&(d=d[1]),(!e||u.length<e)&&ei(d))u.push(o),o=d.__iterator(a,s);else return r?l:xr(a,c++,d,l)}return Ti()})},n}function MH(t,e,r){var n=wA(t);return t.toSeq().map(function(a,s){return n(e.call(r,a,s,t))}).flatten(!0)}function FH(t,e){var r=Js(t);return r.size=t.size&&t.size*2-1,r.__iterateUncached=function(n,a){var s=this,o=0;return t.__iterate(function(u){return(!o||n(e,o++,s)!==!1)&&n(u,o++,s)!==!1},a),o},r.__iteratorUncached=function(n,a){var s=t.__iterator(as,a),o=0,u;return new kt(function(){return(!u||o%2)&&(u=s.next(),u.done)?u:o%2?xr(n,o++,e):xr(n,o++,u.value,u)})},r}function Ud(t,e,r){e||(e=wj);var n=hr(t),a=0,s=t.toSeq().map(function(o,u){return[u,o,a++,r?r(o,u,t):o]}).valueSeq().toArray();return s.sort(function(o,u){return e(o[3],u[3])||o[2]-u[2]}).forEach(n?function(o,u){s[u].length=2}:function(o,u){s[u]=o[1]}),n?rc(s):Ln(t)?Ea(s):_f(s)}function By(t,e,r){if(e||(e=wj),r){var n=t.toSeq().map(function(a,s){return[a,r(a,s,t)]}).reduce(function(a,s){return ZI(e,a[1],s[1])?s:a});return n&&n[0]}return t.reduce(function(a,s){return ZI(e,a,s)?s:a})}function ZI(t,e,r){var n=t(r,e);return n===0&&r!==e&&(r==null||r!==r)||n>0}function $y(t,e,r,n){var a=Js(t),s=new nl(r).map(function(o){return o.size});return a.size=n?s.max():s.min(),a.__iterate=function(o,u){for(var c=this.__iterator(as,u),l,d=0;!(l=c.next()).done&&o(l.value,d++,this)!==!1;);return d},a.__iteratorUncached=function(o,u){var c=r.map(function(f){return f=Ar(f),BE(u?f.reverse():f)}),l=0,d=!1;return new kt(function(){var f;return d||(f=c.map(function(h){return h.next()}),d=n?f.every(function(h){return h.done}):f.some(function(h){return h.done})),d?Ti():xr(o,l++,e.apply(null,f.map(function(h){return h.value})))})},a}function fr(t,e){return t===e?t:Kp(t)?e:t.constructor(e)}function eP(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function wA(t){return hr(t)?Ta:Ln(t)?hl:pf}function Js(t){return Object.create((hr(t)?rc:Ln(t)?Ea:_f).prototype)}function SA(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):ti.prototype.cacheResult.call(this)}function wj(t,e){return t===void 0&&e===void 0?0:t===void 0?1:e===void 0?-1:t>e?1:t<e?-1:0}function Ns(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),a=0;a<r;a++)n[a]=t[a+e];return n}function TA(t,e){if(!t)throw new Error(e)}function Ki(t){TA(t!==1/0,"Cannot perform this action with an infinite size.")}function Sj(t){if(pA(t)&&typeof t!="string")return t;if(ta(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}var LH=Object.prototype.toString;function E_(t){if(!t||typeof t!="object"||LH.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e,n=Object.getPrototypeOf(e);n!==null;)r=n,n=Object.getPrototypeOf(r);return r===e}function Xu(t){return typeof t=="object"&&(sa(t)||Array.isArray(t)||E_(t))}function mp(t){try{return typeof t=="string"?JSON.stringify(t):String(t)}catch{return JSON.stringify(t)}}function EA(t,e){return sa(t)?t.has(e):Xu(t)&&bf.call(t,e)}function O_(t,e,r){return sa(t)?t.get(e,r):EA(t,e)?typeof t.get=="function"?t.get(e):t[e]:r}function Ob(t){if(Array.isArray(t))return Ns(t);var e={};for(var r in t)bf.call(t,r)&&(e[r]=t[r]);return e}function OA(t,e){if(!Xu(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(sa(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!bf.call(t,e))return t;var r=Ob(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function AA(t,e,r){if(!Xu(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(sa(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(bf.call(t,e)&&r===t[e])return t;var n=Ob(t);return n[e]=r,n}function nc(t,e,r,n){n||(n=r,r=void 0);var a=Tj(sa(t),t,Sj(e),0,r,n);return a===$t?r:a}function Tj(t,e,r,n,a,s){var o=e===$t;if(n===r.length){var u=o?a:e,c=s(u);return c===u?e:c}if(!o&&!Xu(e))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(mp)+"]: "+e);var l=r[n],d=o?$t:O_(e,l,$t),f=Tj(d===$t?t:sa(d),d,r,n+1,a,s);return f===d?e:f===$t?OA(e,l):AA(o?t?Ja():{}:e,l,f)}function xA(t,e,r){return nc(t,e,$t,function(){return r})}function RA(t,e){return xA(this,t,e)}function IA(t,e){return nc(t,e,function(){return $t})}function PA(t){return IA(this,t)}function A_(t,e,r,n){return nc(t,[e],r,n)}function DA(t,e,r){return arguments.length===1?t(this):A_(this,t,e,r)}function NA(t,e,r){return nc(this,t,e,r)}function Ej(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Aj(this,t)}function Oj(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(typeof t!="function")throw new TypeError("Invalid merger function: "+t);return Aj(this,e,t)}function Aj(t,e,r){for(var n=[],a=0;a<e.length;a++){var s=Ta(e[a]);s.size!==0&&n.push(s)}return n.length===0?t:t.toSeq().size===0&&!t.__ownerID&&n.length===1?t.constructor(n[0]):t.withMutations(function(o){for(var u=r?function(l,d){A_(o,d,$t,function(f){return f===$t?l:r(f,l,d)})}:function(l,d){o.set(d,l)},c=0;c<n.length;c++)n[c].forEach(u)})}function xj(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return e0(t,e)}function Rj(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return e0(e,r,t)}function Ij(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Zp(t,e)}function Pj(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return Zp(e,r,t)}function Zp(t,e,r){return e0(t,e,BH(r))}function e0(t,e,r){if(!Xu(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(sa(t))return typeof r=="function"&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),a=t,s=n?hl:Ta,o=n?function(c){a===t&&(a=Ob(a)),a.push(c)}:function(c,l){var d=bf.call(a,l),f=d&&r?r(a[l],c,l):c;(!d||f!==a[l])&&(a===t&&(a=Ob(a)),a[l]=f)},u=0;u<e.length;u++)s(e[u]).forEach(o);return a}function BH(t){function e(r,n,a){return Xu(r)&&Xu(n)&&$H(r,n)?e0(r,[n],e):t?t(r,n,a):n}return e}function $H(t,e){var r=ti(t),n=ti(e);return Ln(r)===Ln(n)&&hr(r)===hr(n)}function Dj(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Zp(this,t)}function Nj(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Zp(this,e,t)}function jA(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return nc(this,t,Ja(),function(n){return e0(n,e)})}function CA(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return nc(this,t,Ja(),function(n){return Zp(n,e)})}function t0(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function r0(){return this.__ownerID?this:this.__ensureOwner(new fA)}function n0(){return this.__ensureOwner()}function MA(){return this.__altered}var ic=function(t){function e(r){return r==null?Ja():Yp(r)&&!ta(r)?r:Ja().withMutations(function(n){var a=t(r);Ki(a.size),a.forEach(function(s,o){return n.set(o,s)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return Ja().withMutations(function(s){for(var o=0;o<n.length;o+=2){if(o+1>=n.length)throw new Error("Missing value for key: "+n[o]);s.set(n[o],n[o+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(n,a){return this._root?this._root.get(0,void 0,n,a):a},e.prototype.set=function(n,a){return nP(this,n,a)},e.prototype.remove=function(n){return nP(this,n,$t)},e.prototype.deleteAll=function(n){var a=Ar(n);return a.size===0?this:this.withMutations(function(s){a.forEach(function(o){return s.remove(o)})})},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ja()},e.prototype.sort=function(n){return ss(Ud(this,n))},e.prototype.sortBy=function(n,a){return ss(Ud(this,a,n))},e.prototype.map=function(n,a){var s=this;return this.withMutations(function(o){o.forEach(function(u,c){o.set(c,n.call(a,u,c,s))})})},e.prototype.__iterator=function(n,a){return new UH(this,n,a)},e.prototype.__iterate=function(n,a){var s=this,o=0;return this._root&&this._root.iterate(function(u){return o++,n(u[1],u[0],s)},a),o},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?FA(this.size,this._root,n,this.__hash):this.size===0?Ja():(this.__ownerID=n,this.__altered=!1,this)},e}(Ta);ic.isMap=Yp;var Rr=ic.prototype;Rr[dj]=!0;Rr[zp]=Rr.remove;Rr.removeAll=Rr.deleteAll;Rr.setIn=RA;Rr.removeIn=Rr.deleteIn=PA;Rr.update=DA;Rr.updateIn=NA;Rr.merge=Rr.concat=Ej;Rr.mergeWith=Oj;Rr.mergeDeep=Dj;Rr.mergeDeepWith=Nj;Rr.mergeIn=jA;Rr.mergeDeepIn=CA;Rr.withMutations=t0;Rr.wasAltered=MA;Rr.asImmutable=n0;Rr["@@transducer/init"]=Rr.asMutable=r0;Rr["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])};Rr["@@transducer/result"]=function(t){return t.asImmutable()};var vp=function(e,r){this.ownerID=e,this.entries=r};vp.prototype.get=function(e,r,n,a){for(var s=this.entries,o=0,u=s.length;o<u;o++)if(hn(n,s[o][0]))return s[o][1];return a};vp.prototype.update=function(e,r,n,a,s,o,u){for(var c=s===$t,l=this.entries,d=0,f=l.length;d<f&&!hn(a,l[d][0]);d++);var h=d<f;if(h?l[d][1]===s:c)return this;if(_a(u),(c||!h)&&_a(o),!(c&&l.length===1)){if(!h&&!c&&l.length>=GH)return qH(e,l,a,s);var p=e&&e===this.ownerID,b=p?l:Ns(l);return h?c?d===f-1?b.pop():b[d]=b.pop():b[d]=[a,s]:b.push([a,s]),p?(this.entries=b,this):new vp(e,b)}};var qd=function(e,r,n){this.ownerID=e,this.bitmap=r,this.nodes=n};qd.prototype.get=function(e,r,n,a){r===void 0&&(r=gi(n));var s=1<<((e===0?r:r>>>e)&wi),o=this.bitmap;return o&s?this.nodes[jj(o&s-1)].get(e+Er,r,n,a):a};qd.prototype.update=function(e,r,n,a,s,o,u){n===void 0&&(n=gi(a));var c=(r===0?n:n>>>r)&wi,l=1<<c,d=this.bitmap,f=(d&l)!==0;if(!f&&s===$t)return this;var h=jj(d&l-1),p=this.nodes,b=f?p[h]:void 0,_=LA(b,e,r+Er,n,a,s,o,u);if(_===b)return this;if(!f&&_&&p.length>=zH)return HH(e,p,d,c,_);if(f&&!_&&p.length===2&&iP(p[h^1]))return p[h^1];if(f&&_&&p.length===1&&iP(_))return _;var E=e&&e===this.ownerID,w=f?_?d:d^l:d|l,O=f?_?Cj(p,h,_,E):QH(p,h,E):kH(p,h,_,E);return E?(this.bitmap=w,this.nodes=O,this):new qd(e,w,O)};var wp=function(e,r,n){this.ownerID=e,this.count=r,this.nodes=n};wp.prototype.get=function(e,r,n,a){r===void 0&&(r=gi(n));var s=(e===0?r:r>>>e)&wi,o=this.nodes[s];return o?o.get(e+Er,r,n,a):a};wp.prototype.update=function(e,r,n,a,s,o,u){n===void 0&&(n=gi(a));var c=(r===0?n:n>>>r)&wi,l=s===$t,d=this.nodes,f=d[c];if(l&&!f)return this;var h=LA(f,e,r+Er,n,a,s,o,u);if(h===f)return this;var p=this.count;if(!f)p++;else if(!h&&(p--,p<WH))return VH(e,d,p,c);var b=e&&e===this.ownerID,_=Cj(d,c,h,b);return b?(this.count=p,this.nodes=_,this):new wp(e,p,_)};var Vd=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entries=n};Vd.prototype.get=function(e,r,n,a){for(var s=this.entries,o=0,u=s.length;o<u;o++)if(hn(n,s[o][0]))return s[o][1];return a};Vd.prototype.update=function(e,r,n,a,s,o,u){n===void 0&&(n=gi(a));var c=s===$t;if(n!==this.keyHash)return c?this:(_a(u),_a(o),BA(this,e,r,n,[a,s]));for(var l=this.entries,d=0,f=l.length;d<f&&!hn(a,l[d][0]);d++);var h=d<f;if(h?l[d][1]===s:c)return this;if(_a(u),(c||!h)&&_a(o),c&&f===2)return new qo(e,this.keyHash,l[d^1]);var p=e&&e===this.ownerID,b=p?l:Ns(l);return h?c?d===f-1?b.pop():b[d]=b.pop():b[d]=[a,s]:b.push([a,s]),p?(this.entries=b,this):new Vd(e,this.keyHash,b)};var qo=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entry=n};qo.prototype.get=function(e,r,n,a){return hn(n,this.entry[0])?this.entry[1]:a};qo.prototype.update=function(e,r,n,a,s,o,u){var c=s===$t,l=hn(a,this.entry[0]);if(l?s===this.entry[1]:c)return this;if(_a(u),c){_a(o);return}return l?e&&e===this.ownerID?(this.entry[1]=s,this):new qo(e,this.keyHash,[a,s]):(_a(o),BA(this,e,r,gi(a),[a,s]))};vp.prototype.iterate=Vd.prototype.iterate=function(t,e){for(var r=this.entries,n=0,a=r.length-1;n<=a;n++)if(t(r[e?a-n:n])===!1)return!1};qd.prototype.iterate=wp.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,a=r.length-1;n<=a;n++){var s=r[e?a-n:n];if(s&&s.iterate(t,e)===!1)return!1}};qo.prototype.iterate=function(t,e){return t(this.entry)};var UH=function(t){function e(r,n,a){this._type=n,this._reverse=a,this._stack=r._root&&tP(r._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var n=this._type,a=this._stack;a;){var s=a.node,o=a.index++,u=void 0;if(s.entry){if(o===0)return x3(n,s.entry)}else if(s.entries){if(u=s.entries.length-1,o<=u)return x3(n,s.entries[this._reverse?u-o:o])}else if(u=s.nodes.length-1,o<=u){var c=s.nodes[this._reverse?u-o:o];if(c){if(c.entry)return x3(n,c.entry);a=this._stack=tP(c,a)}continue}a=this._stack=this._stack.__prev}return Ti()},e}(kt);function x3(t,e){return xr(t,e[0],e[1])}function tP(t,e){return{node:t,index:0,__prev:e}}function FA(t,e,r,n){var a=Object.create(Rr);return a.size=t,a._root=e,a.__ownerID=r,a.__hash=n,a.__altered=!1,a}var rP;function Ja(){return rP||(rP=FA(0))}function nP(t,e,r){var n,a;if(t._root){var s=FE(),o=FE();if(n=LA(t._root,t.__ownerID,0,void 0,e,r,s,o),!o.value)return t;a=t.size+(s.value?r===$t?-1:1:0)}else{if(r===$t)return t;a=1,n=new vp(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=a,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?FA(a,n):Ja()}function LA(t,e,r,n,a,s,o,u){return t?t.update(e,r,n,a,s,o,u):s===$t?t:(_a(u),_a(o),new qo(e,n,[a,s]))}function iP(t){return t.constructor===qo||t.constructor===Vd}function BA(t,e,r,n,a){if(t.keyHash===n)return new Vd(e,n,[t.entry,a]);var s=(r===0?t.keyHash:t.keyHash>>>r)&wi,o=(r===0?n:n>>>r)&wi,u,c=s===o?[BA(t,e,r+Er,n,a)]:(u=new qo(e,n,a),s<o?[t,u]:[u,t]);return new qd(e,1<<s|1<<o,c)}function qH(t,e,r,n){t||(t=new fA);for(var a=new qo(t,gi(r),[r,n]),s=0;s<e.length;s++){var o=e[s];a=a.update(t,0,void 0,o[0],o[1])}return a}function VH(t,e,r,n){for(var a=0,s=0,o=new Array(r),u=0,c=1,l=e.length;u<l;u++,c<<=1){var d=e[u];d!==void 0&&u!==n&&(a|=c,o[s++]=d)}return new qd(t,a,o)}function HH(t,e,r,n,a){for(var s=0,o=new Array(ba),u=0;r!==0;u++,r>>>=1)o[u]=r&1?e[s++]:void 0;return o[n]=a,new wp(t,s+1,o)}function jj(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function Cj(t,e,r,n){var a=n?t:Ns(t);return a[e]=r,a}function kH(t,e,r,n){var a=t.length+1;if(n&&e+1===a)return t[e]=r,t;for(var s=new Array(a),o=0,u=0;u<a;u++)u===e?(s[u]=r,o=-1):s[u]=t[u+o];return s}function QH(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var a=new Array(n),s=0,o=0;o<n;o++)o===e&&(s=1),a[o]=t[o+s];return a}var GH=ba/4,zH=ba/2,WH=ba/4,Mj="@@__IMMUTABLE_LIST__@@";function x_(t){return!!(t&&t[Mj])}var gf=function(t){function e(r){var n=K1();if(r==null)return n;if(x_(r))return r;var a=t(r),s=a.size;return s===0?n:(Ki(s),s>0&&s<ba?Sp(0,s,Er,null,new $u(a.toArray())):n.withMutations(function(o){o.setSize(s),a.forEach(function(u,c){return o.set(c,u)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(n,a){if(n=Wu(this,n),n>=0&&n<this.size){n+=this._origin;var s=Fj(this,n);return s&&s.array[n&wi]}return a},e.prototype.set=function(n,a){return XH(this,n,a)},e.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},e.prototype.insert=function(n,a){return this.splice(n,0,a)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Er,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):K1()},e.prototype.push=function(){var n=arguments,a=this.size;return this.withMutations(function(s){Tu(s,0,a+n.length);for(var o=0;o<n.length;o++)s.set(a+o,n[o])})},e.prototype.pop=function(){return Tu(this,0,-1)},e.prototype.unshift=function(){var n=arguments;return this.withMutations(function(a){Tu(a,-n.length);for(var s=0;s<n.length;s++)a.set(s,n[s])})},e.prototype.shift=function(){return Tu(this,1)},e.prototype.concat=function(){for(var n=arguments,a=[],s=0;s<arguments.length;s++){var o=n[s],u=t(typeof o!="string"&&hA(o)?o:[o]);u.size!==0&&a.push(u)}return a.length===0?this:this.size===0&&!this.__ownerID&&a.length===1?this.constructor(a[0]):this.withMutations(function(c){a.forEach(function(l){return l.forEach(function(d){return c.push(d)})})})},e.prototype.setSize=function(n){return Tu(this,0,n)},e.prototype.map=function(n,a){var s=this;return this.withMutations(function(o){for(var u=0;u<s.size;u++)o.set(u,n.call(a,o.get(u),u,s))})},e.prototype.slice=function(n,a){var s=this.size;return Wp(n,a,s)?this:Tu(this,ff(n,s),Xp(a,s))},e.prototype.__iterator=function(n,a){var s=a?this.size:0,o=aP(this,a);return new kt(function(){var u=o();return u===rp?Ti():xr(n,a?--s:s++,u)})},e.prototype.__iterate=function(n,a){for(var s=a?this.size:0,o=aP(this,a),u;(u=o())!==rp&&n(u,a?--s:s++,this)!==!1;);return s},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Sp(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?K1():(this.__ownerID=n,this.__altered=!1,this)},e}(hl);gf.isList=x_;var rn=gf.prototype;rn[Mj]=!0;rn[zp]=rn.remove;rn.merge=rn.concat;rn.setIn=RA;rn.deleteIn=rn.removeIn=PA;rn.update=DA;rn.updateIn=NA;rn.mergeIn=jA;rn.mergeDeepIn=CA;rn.withMutations=t0;rn.wasAltered=MA;rn.asImmutable=n0;rn["@@transducer/init"]=rn.asMutable=r0;rn["@@transducer/step"]=function(t,e){return t.push(e)};rn["@@transducer/result"]=function(t){return t.asImmutable()};var $u=function(e,r){this.array=e,this.ownerID=r};$u.prototype.removeBefore=function(e,r,n){if(n===r?1<<r:this.array.length===0)return this;var a=n>>>r&wi;if(a>=this.array.length)return new $u([],e);var s=a===0,o;if(r>0){var u=this.array[a];if(o=u&&u.removeBefore(e,r-Er,n),o===u&&s)return this}if(s&&!o)return this;var c=Hd(this,e);if(!s)for(var l=0;l<a;l++)c.array[l]=void 0;return o&&(c.array[a]=o),c};$u.prototype.removeAfter=function(e,r,n){if(n===(r?1<<r:0)||this.array.length===0)return this;var a=n-1>>>r&wi;if(a>=this.array.length)return this;var s;if(r>0){var o=this.array[a];if(s=o&&o.removeAfter(e,r-Er,n),s===o&&a===this.array.length-1)return this}var u=Hd(this,e);return u.array.splice(a+1),s&&(u.array[a]=s),u};var rp={};function aP(t,e){var r=t._origin,n=t._capacity,a=Tp(n),s=t._tail;return o(t._root,t._level,0);function o(l,d,f){return d===0?u(l,f):c(l,d,f)}function u(l,d){var f=d===a?s&&s.array:l&&l.array,h=d>r?0:r-d,p=n-d;return p>ba&&(p=ba),function(){if(h===p)return rp;var b=e?--p:h++;return f&&f[b]}}function c(l,d,f){var h,p=l&&l.array,b=f>r?0:r-f>>d,_=(n-f>>d)+1;return _>ba&&(_=ba),function(){for(;;){if(h){var E=h();if(E!==rp)return E;h=null}if(b===_)return rp;var w=e?--_:b++;h=o(p&&p[w],d-Er,f+(w<<d))}}}}function Sp(t,e,r,n,a,s,o){var u=Object.create(rn);return u.size=e-t,u._origin=t,u._capacity=e,u._level=r,u._root=n,u._tail=a,u.__ownerID=s,u.__hash=o,u.__altered=!1,u}var sP;function K1(){return sP||(sP=Sp(0,0,Er))}function XH(t,e,r){if(e=Wu(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(o){e<0?Tu(o,e).set(0,r):Tu(o,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,a=t._root,s=FE();return e>=Tp(t._capacity)?n=VE(n,t.__ownerID,0,e,r,s):a=VE(a,t.__ownerID,t._level,e,r,s),s.value?t.__ownerID?(t._root=a,t._tail=n,t.__hash=void 0,t.__altered=!0,t):Sp(t._origin,t._capacity,t._level,a,n):t}function VE(t,e,r,n,a,s){var o=n>>>r&wi,u=t&&o<t.array.length;if(!u&&a===void 0)return t;var c;if(r>0){var l=t&&t.array[o],d=VE(l,e,r-Er,n,a,s);return d===l?t:(c=Hd(t,e),c.array[o]=d,c)}return u&&t.array[o]===a?t:(s&&_a(s),c=Hd(t,e),a===void 0&&o===c.array.length-1?c.array.pop():c.array[o]=a,c)}function Hd(t,e){return e&&t&&e===t.ownerID?t:new $u(t?t.array.slice():[],e)}function Fj(t,e){if(e>=Tp(t._capacity))return t._tail;if(e<1<<t._level+Er){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&wi],n-=Er;return r}}function Tu(t,e,r){e!==void 0&&(e|=0),r!==void 0&&(r|=0);var n=t.__ownerID||new fA,a=t._origin,s=t._capacity,o=a+e,u=r===void 0?s:r<0?s+r:a+r;if(o===a&&u===s)return t;if(o>=u)return t.clear();for(var c=t._level,l=t._root,d=0;o+d<0;)l=new $u(l&&l.array.length?[void 0,l]:[],n),c+=Er,d+=1<<c;d&&(o+=d,a+=d,u+=d,s+=d);for(var f=Tp(s),h=Tp(u);h>=1<<c+Er;)l=new $u(l&&l.array.length?[l]:[],n),c+=Er;var p=t._tail,b=h<f?Fj(t,u-1):h>f?new $u([],n):p;if(p&&h>f&&o<s&&p.array.length){l=Hd(l,n);for(var _=l,E=c;E>Er;E-=Er){var w=f>>>E&wi;_=_.array[w]=Hd(_.array[w],n)}_.array[f>>>Er&wi]=p}if(u<s&&(b=b&&b.removeAfter(n,0,u)),o>=h)o-=h,u-=h,c=Er,l=null,b=b&&b.removeBefore(n,0,o);else if(o>a||h<f){for(d=0;l;){var O=o>>>c&wi;if(O!==h>>>c&wi)break;O&&(d+=(1<<c)*O),c-=Er,l=l.array[O]}l&&o>a&&(l=l.removeBefore(n,c,o-d)),l&&h<f&&(l=l.removeAfter(n,c,h-d)),d&&(o-=d,u-=d)}return t.__ownerID?(t.size=u-o,t._origin=o,t._capacity=u,t._level=c,t._root=l,t._tail=b,t.__hash=void 0,t.__altered=!0,t):Sp(o,u,c,l,b)}function Tp(t){return t<ba?0:t-1>>>Er<<Er}var ss=function(t){function e(r){return r==null?Ch():w_(r)?r:Ch().withMutations(function(n){var a=Ta(r);Ki(a.size),a.forEach(function(s,o){return n.set(o,s)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(n,a){var s=this._map.get(n);return s!==void 0?this._list.get(s)[1]:a},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Ch()},e.prototype.set=function(n,a){return uP(this,n,a)},e.prototype.remove=function(n){return uP(this,n,$t)},e.prototype.__iterate=function(n,a){var s=this;return this._list.__iterate(function(o){return o&&n(o[1],o[0],s)},a)},e.prototype.__iterator=function(n,a){return this._list.fromEntrySeq().__iterator(n,a)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var a=this._map.__ensureOwner(n),s=this._list.__ensureOwner(n);return n?$A(a,s,n,this.__hash):this.size===0?Ch():(this.__ownerID=n,this.__altered=!1,this._map=a,this._list=s,this)},e}(ic);ss.isOrderedMap=w_;ss.prototype[yf]=!0;ss.prototype[zp]=ss.prototype.remove;function $A(t,e,r,n){var a=Object.create(ss.prototype);return a.size=t?t.size:0,a._map=t,a._list=e,a.__ownerID=r,a.__hash=n,a.__altered=!1,a}var oP;function Ch(){return oP||(oP=$A(Ja(),K1()))}function uP(t,e,r){var n=t._map,a=t._list,s=n.get(e),o=s!==void 0,u,c;if(r===$t){if(!o)return t;a.size>=ba&&a.size>=n.size*2?(c=a.filter(function(l,d){return l!==void 0&&s!==d}),u=c.toKeyedSeq().map(function(l){return l[0]}).flip().toMap(),t.__ownerID&&(u.__ownerID=c.__ownerID=t.__ownerID)):(u=n.remove(e),c=s===a.size-1?a.pop():a.set(s,void 0))}else if(o){if(r===a.get(s)[1])return t;u=n,c=a.set(s,[e,r])}else u=n.set(e,a.size),c=a.set(a.size,[e,r]);return t.__ownerID?(t.size=u.size,t._map=u,t._list=c,t.__hash=void 0,t.__altered=!0,t):$A(u,c)}var Lj="@@__IMMUTABLE_STACK__@@";function Ep(t){return!!(t&&t[Lj])}var i0=function(t){function e(r){return r==null?Uy():Ep(r)?r:Uy().pushAll(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(n,a){var s=this._head;for(n=Wu(this,n);s&&n--;)s=s.next;return s?s.value:a},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var a=this.size+arguments.length,s=this._head,o=arguments.length-1;o>=0;o--)s={value:n[o],next:s};return this.__ownerID?(this.size=a,this._head=s,this.__hash=void 0,this.__altered=!0,this):Mh(a,s)},e.prototype.pushAll=function(n){if(n=t(n),n.size===0)return this;if(this.size===0&&Ep(n))return n;Ki(n.size);var a=this.size,s=this._head;return n.__iterate(function(o){a++,s={value:o,next:s}},!0),this.__ownerID?(this.size=a,this._head=s,this.__hash=void 0,this.__altered=!0,this):Mh(a,s)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Uy()},e.prototype.slice=function(n,a){if(Wp(n,a,this.size))return this;var s=ff(n,this.size),o=Xp(a,this.size);if(o!==this.size)return t.prototype.slice.call(this,n,a);for(var u=this.size-s,c=this._head;s--;)c=c.next;return this.__ownerID?(this.size=u,this._head=c,this.__hash=void 0,this.__altered=!0,this):Mh(u,c)},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Mh(this.size,this._head,n,this.__hash):this.size===0?Uy():(this.__ownerID=n,this.__altered=!1,this)},e.prototype.__iterate=function(n,a){var s=this;if(a)return new nl(this.toArray()).__iterate(function(c,l){return n(c,l,s)},a);for(var o=0,u=this._head;u&&n(u.value,o++,this)!==!1;)u=u.next;return o},e.prototype.__iterator=function(n,a){if(a)return new nl(this.toArray()).__iterator(n,a);var s=0,o=this._head;return new kt(function(){if(o){var u=o.value;return o=o.next,xr(n,s++,u)}return Ti()})},e}(hl);i0.isStack=Ep;var Ei=i0.prototype;Ei[Lj]=!0;Ei.shift=Ei.pop;Ei.unshift=Ei.push;Ei.unshiftAll=Ei.pushAll;Ei.withMutations=t0;Ei.wasAltered=MA;Ei.asImmutable=n0;Ei["@@transducer/init"]=Ei.asMutable=r0;Ei["@@transducer/step"]=function(t,e){return t.unshift(e)};Ei["@@transducer/result"]=function(t){return t.asImmutable()};function Mh(t,e,r,n){var a=Object.create(Ei);return a.size=t,a._head=e,a.__ownerID=r,a.__hash=n,a.__altered=!1,a}var cP;function Uy(){return cP||(cP=Mh(0))}var Bj="@@__IMMUTABLE_SET__@@";function a0(t){return!!(t&&t[Bj])}function R_(t){return a0(t)&&ta(t)}function UA(t,e){if(t===e)return!0;if(!ei(e)||t.size!==void 0&&e.size!==void 0&&t.size!==e.size||t.__hash!==void 0&&e.__hash!==void 0&&t.__hash!==e.__hash||hr(t)!==hr(e)||Ln(t)!==Ln(e)||ta(t)!==ta(e))return!1;if(t.size===0&&e.size===0)return!0;var r=!hf(t);if(ta(t)){var n=t.entries();return e.every(function(c,l){var d=n.next().value;return d&&hn(d[1],c)&&(r||hn(d[0],l))})&&n.next().done}var a=!1;if(t.size===void 0)if(e.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{a=!0;var s=t;t=e,e=s}var o=!0,u=e.__iterate(function(c,l){if(r?!t.has(c):a?!hn(c,t.get(l,$t)):!hn(t.get(l,$t),c))return o=!1,!1});return o&&t.size===u}function pl(t,e){var r=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Ab(t){if(!t||typeof t!="object")return t;if(!ei(t)){if(!Xu(t))return t;t=ti(t)}if(hr(t)){var e={};return t.__iterate(function(n,a){e[a]=Ab(n)}),e}var r=[];return t.__iterate(function(n){r.push(Ab(n))}),r}var mf=function(t){function e(r){return r==null?Fh():a0(r)&&!ta(r)?r:Fh().withMutations(function(n){var a=t(r);Ki(a.size),a.forEach(function(s){return n.add(s)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(Ta(n).keySeq())},e.intersect=function(n){return n=Ar(n).toArray(),n.length?Bn.intersect.apply(e(n.pop()),n):Fh()},e.union=function(n){return n=Ar(n).toArray(),n.length?Bn.union.apply(e(n.pop()),n):Fh()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(n){return this._map.has(n)},e.prototype.add=function(n){return qy(this,this._map.set(n,n))},e.prototype.remove=function(n){return qy(this,this._map.remove(n))},e.prototype.clear=function(){return qy(this,this._map.clear())},e.prototype.map=function(n,a){var s=this,o=!1,u=qy(this,this._map.mapEntries(function(c){var l=c[1],d=n.call(a,l,l,s);return d!==l&&(o=!0),[d,d]},a));return o?u:this},e.prototype.union=function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return n=n.filter(function(s){return s.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(s){for(var o=0;o<n.length;o++)typeof n[o]=="string"?s.add(n[o]):t(n[o]).forEach(function(u){return s.add(u)})})},e.prototype.intersect=function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];if(n.length===0)return this;n=n.map(function(o){return t(o)});var s=[];return this.forEach(function(o){n.every(function(u){return u.includes(o)})||s.push(o)}),this.withMutations(function(o){s.forEach(function(u){o.remove(u)})})},e.prototype.subtract=function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];if(n.length===0)return this;n=n.map(function(o){return t(o)});var s=[];return this.forEach(function(o){n.some(function(u){return u.includes(o)})&&s.push(o)}),this.withMutations(function(o){s.forEach(function(u){o.remove(u)})})},e.prototype.sort=function(n){return il(Ud(this,n))},e.prototype.sortBy=function(n,a){return il(Ud(this,a,n))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(n,a){var s=this;return this._map.__iterate(function(o){return n(o,o,s)},a)},e.prototype.__iterator=function(n,a){return this._map.__iterator(n,a)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var a=this._map.__ensureOwner(n);return n?this.__make(a,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=a,this)},e}(pf);mf.isSet=a0;var Bn=mf.prototype;Bn[Bj]=!0;Bn[zp]=Bn.remove;Bn.merge=Bn.concat=Bn.union;Bn.withMutations=t0;Bn.asImmutable=n0;Bn["@@transducer/init"]=Bn.asMutable=r0;Bn["@@transducer/step"]=function(t,e){return t.add(e)};Bn["@@transducer/result"]=function(t){return t.asImmutable()};Bn.__empty=Fh;Bn.__make=$j;function qy(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:e.size===0?t.__empty():t.__make(e)}function $j(t,e){var r=Object.create(Bn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var lP;function Fh(){return lP||(lP=$j(Ja()))}var qA=function(t){function e(r,n,a){if(!(this instanceof e))return new e(r,n,a);if(TA(a!==0,"Cannot step a Range by 0"),r=r||0,n===void 0&&(n=1/0),a=a===void 0?1:Math.abs(a),n<r&&(a=-a),this._start=r,this._end=n,this._step=a,this.size=Math.max(0,Math.ceil((n-r)/a-1)+1),this.size===0){if(R3)return R3;R3=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},e.prototype.get=function(n,a){return this.has(n)?this._start+Wu(this,n)*this._step:a},e.prototype.includes=function(n){var a=(n-this._start)/this._step;return a>=0&&a<this.size&&a===Math.floor(a)},e.prototype.slice=function(n,a){return Wp(n,a,this.size)?this:(n=ff(n,this.size),a=Xp(a,this.size),a<=n?new e(0,0):new e(this.get(n,this._end),this.get(a,this._end),this._step))},e.prototype.indexOf=function(n){var a=n-this._start;if(a%this._step===0){var s=a/this._step;if(s>=0&&s<this.size)return s}return-1},e.prototype.lastIndexOf=function(n){return this.indexOf(n)},e.prototype.__iterate=function(n,a){for(var s=this.size,o=this._step,u=a?this._start+(s-1)*o:this._start,c=0;c!==s&&n(u,a?s-++c:c++,this)!==!1;)u+=a?-o:o;return c},e.prototype.__iterator=function(n,a){var s=this.size,o=this._step,u=a?this._start+(s-1)*o:this._start,c=0;return new kt(function(){if(c===s)return Ti();var l=u;return u+=a?-o:o,xr(n,a?s-++c:c++,l)})},e.prototype.equals=function(n){return n instanceof e?this._start===n._start&&this._end===n._end&&this._step===n._step:UA(this,n)},e}(Ea),R3;function I_(t,e,r){for(var n=Sj(e),a=0;a!==n.length;)if(t=O_(t,n[a++],$t),t===$t)return r;return t}function Uj(t,e){return I_(this,t,e)}function VA(t,e){return I_(t,e,$t)!==$t}function KH(t){return VA(this,t)}function qj(){Ki(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t}Ar.isIterable=ei;Ar.isKeyed=hr;Ar.isIndexed=Ln;Ar.isAssociative=hf;Ar.isOrdered=ta;Ar.Iterator=kt;pl(Ar,{toArray:function(){Ki(this.size);var e=new Array(this.size||0),r=hr(this),n=0;return this.__iterate(function(a,s){e[n++]=r?[s,a]:a}),e},toIndexedSeq:function(){return new hj(this)},toJS:function(){return Ab(this)},toKeyedSeq:function(){return new T_(this,!0)},toMap:function(){return ic(this.toKeyedSeq())},toObject:qj,toOrderedMap:function(){return ss(this.toKeyedSeq())},toOrderedSet:function(){return il(hr(this)?this.valueSeq():this)},toSet:function(){return mf(hr(this)?this.valueSeq():this)},toSetSeq:function(){return new pj(this)},toSeq:function(){return Ln(this)?this.toIndexedSeq():hr(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return i0(hr(this)?this.valueSeq():this)},toList:function(){return gf(hr(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,r){return this.size===0?e+r:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+r},concat:function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return fr(this,CH(this,e))},includes:function(e){return this.some(function(r){return hn(r,e)})},entries:function(){return this.__iterator(va)},every:function(e,r){Ki(this.size);var n=!0;return this.__iterate(function(a,s,o){if(!e.call(r,a,s,o))return n=!1,!1}),n},filter:function(e,r){return fr(this,gj(this,e,r,!0))},partition:function(e,r){return NH(this,e,r)},find:function(e,r,n){var a=this.findEntry(e,r);return a?a[1]:n},forEach:function(e,r){return Ki(this.size),this.__iterate(r?e.bind(r):e)},join:function(e){Ki(this.size),e=e!==void 0?""+e:",";var r="",n=!0;return this.__iterate(function(a){n?n=!1:r+=e,r+=a!=null?a.toString():""}),r},keys:function(){return this.__iterator(Jp)},map:function(e,r){return fr(this,_j(this,e,r))},reduce:function(e,r,n){return dP(this,e,r,n,arguments.length<2,!1)},reduceRight:function(e,r,n){return dP(this,e,r,n,arguments.length<2,!0)},reverse:function(){return fr(this,mA(this,!0))},slice:function(e,r){return fr(this,vA(this,e,r,!0))},some:function(e,r){Ki(this.size);var n=!1;return this.__iterate(function(a,s,o){if(e.call(r,a,s,o))return n=!0,!1}),n},sort:function(e){return fr(this,Ud(this,e))},values:function(){return this.__iterator(as)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(e,r){return $d(e?this.toSeq().filter(e,r):this)},countBy:function(e,r){return PH(this,e,r)},equals:function(e){return UA(this,e)},entrySeq:function(){var e=this;if(e._cache)return new nl(e._cache);var r=e.toSeq().map(YH).toIndexedSeq();return r.fromEntrySeq=function(){return e.toSeq()},r},filterNot:function(e,r){return this.filter(I3(e),r)},findEntry:function(e,r,n){var a=n;return this.__iterate(function(s,o,u){if(e.call(r,s,o,u))return a=[o,s],!1}),a},findKey:function(e,r){var n=this.findEntry(e,r);return n&&n[0]},findLast:function(e,r,n){return this.toKeyedSeq().reverse().find(e,r,n)},findLastEntry:function(e,r,n){return this.toKeyedSeq().reverse().findEntry(e,r,n)},findLastKey:function(e,r){return this.toKeyedSeq().reverse().findKey(e,r)},first:function(e){return this.find(tj,null,e)},flatMap:function(e,r){return fr(this,MH(this,e,r))},flatten:function(e){return fr(this,vj(this,e,!0))},fromEntrySeq:function(){return new yj(this)},get:function(e,r){return this.find(function(n,a){return hn(a,e)},void 0,r)},getIn:Uj,groupBy:function(e,r){return DH(this,e,r)},has:function(e){return this.get(e,$t)!==$t},hasIn:KH,isSubset:function(e){return e=typeof e.includes=="function"?e:Ar(e),this.every(function(r){return e.includes(r)})},isSuperset:function(e){return e=typeof e.isSubset=="function"?e:Ar(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(r){return hn(r,e)})},keySeq:function(){return this.toSeq().map(JH).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return By(this,e)},maxBy:function(e,r){return By(this,r,e)},min:function(e){return By(this,e?fP(e):pP)},minBy:function(e,r){return By(this,r?fP(r):pP,e)},rest:function(){return this.slice(1)},skip:function(e){return e===0?this:this.slice(Math.max(0,e))},skipLast:function(e){return e===0?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,r){return fr(this,mj(this,e,r,!0))},skipUntil:function(e,r){return this.skipWhile(I3(e),r)},sortBy:function(e,r){return fr(this,Ud(this,r,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,r){return fr(this,jH(this,e,r))},takeUntil:function(e,r){return this.takeWhile(I3(e),r)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ZH(this))}});var ri=Ar.prototype;ri[ij]=!0;ri[m_]=ri.values;ri.toJSON=ri.toArray;ri.__toStringMapper=mp;ri.inspect=ri.toSource=function(){return this.toString()};ri.chain=ri.flatMap;ri.contains=ri.includes;pl(Ta,{flip:function(){return fr(this,bj(this))},mapEntries:function(e,r){var n=this,a=0;return fr(this,this.toSeq().map(function(s,o){return e.call(r,[o,s],a++,n)}).fromEntrySeq())},mapKeys:function(e,r){var n=this;return fr(this,this.toSeq().flip().map(function(a,s){return e.call(r,a,s,n)}).flip())}});var s0=Ta.prototype;s0[aj]=!0;s0[m_]=ri.entries;s0.toJSON=qj;s0.__toStringMapper=function(t,e){return mp(e)+": "+mp(t)};pl(hl,{toKeyedSeq:function(){return new T_(this,!1)},filter:function(e,r){return fr(this,gj(this,e,r,!1))},findIndex:function(e,r){var n=this.findEntry(e,r);return n?n[0]:-1},indexOf:function(e){var r=this.keyOf(e);return r===void 0?-1:r},lastIndexOf:function(e){var r=this.lastKeyOf(e);return r===void 0?-1:r},reverse:function(){return fr(this,mA(this,!1))},slice:function(e,r){return fr(this,vA(this,e,r,!1))},splice:function(e,r){var n=arguments.length;if(r=Math.max(r||0,0),n===0||n===2&&!r)return this;e=ff(e,e<0?this.count():this.size);var a=this.slice(0,e);return fr(this,n===1?a:a.concat(Ns(arguments,2),this.slice(e+r)))},findLastIndex:function(e,r){var n=this.findLastEntry(e,r);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return fr(this,vj(this,e,!1))},get:function(e,r){return e=Wu(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?r:this.find(function(n,a){return a===e},void 0,r)},has:function(e){return e=Wu(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return fr(this,FH(this,e))},interleave:function(){var e=[this].concat(Ns(arguments)),r=$y(this.toSeq(),Ea.of,e),n=r.flatten(!0);return r.size&&(n.size=r.size*e.length),fr(this,n)},keySeq:function(){return qA(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,r){return fr(this,mj(this,e,r,!1))},zip:function(){var e=[this].concat(Ns(arguments));return fr(this,$y(this,hP,e))},zipAll:function(){var e=[this].concat(Ns(arguments));return fr(this,$y(this,hP,e,!0))},zipWith:function(e){var r=Ns(arguments);return r[0]=this,fr(this,$y(this,e,r))}});var vf=hl.prototype;vf[sj]=!0;vf[yf]=!0;pl(pf,{get:function(e,r){return this.has(e)?e:r},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var kd=pf.prototype;kd.has=ri.includes;kd.contains=kd.includes;kd.keys=kd.values;pl(rc,s0);pl(Ea,vf);pl(_f,kd);function dP(t,e,r,n,a,s){return Ki(t.size),t.__iterate(function(o,u,c){a?(a=!1,r=o):r=e.call(n,r,o,u,c)},s),r}function JH(t,e){return e}function YH(t,e){return[e,t]}function I3(t){return function(){return!t.apply(this,arguments)}}function fP(t){return function(){return-t.apply(this,arguments)}}function hP(){return Ns(arguments)}function pP(t,e){return t<e?1:t>e?-1:0}function ZH(t){if(t.size===1/0)return 0;var e=ta(t),r=hr(t),n=e?1:0,a=t.__iterate(r?e?function(s,o){n=31*n+yP(gi(s),gi(o))|0}:function(s,o){n=n+yP(gi(s),gi(o))|0}:e?function(s){n=31*n+gi(s)|0}:function(s){n=n+gi(s)|0});return ek(a,n)}function ek(t,e){return e=Wf(e,3432918353),e=Wf(e<<15|e>>>-15,461845907),e=Wf(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Wf(e^e>>>16,2246822507),e=Wf(e^e>>>13,3266489909),e=S_(e^e>>>16),e}function yP(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var il=function(t){function e(r){return r==null?HE():R_(r)?r:HE().withMutations(function(n){var a=pf(r);Ki(a.size),a.forEach(function(s){return n.add(s)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(Ta(n).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(mf);il.isOrderedSet=R_;var yl=il.prototype;yl[yf]=!0;yl.zip=vf.zip;yl.zipWith=vf.zipWith;yl.zipAll=vf.zipAll;yl.__empty=HE;yl.__make=Vj;function Vj(t,e){var r=Object.create(yl);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var bP;function HE(){return bP||(bP=Vj(Ch()))}var Hj={LeftThenRight:-1,RightThenLeft:1};function tk(t){if(tc(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(sa(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(t===null||typeof t!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var nn=function(e,r){var n;tk(e);var a=function(u){var c=this;if(u instanceof a)return u;if(!(this instanceof a))return new a(u);if(!n){n=!0;var l=Object.keys(e),d=s._indices={};s._name=r,s._keys=l,s._defaultValues=e;for(var f=0;f<l.length;f++){var h=l[f];d[h]=f,s[h]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+kA(this)+' with property "'+h+'" since that property name is part of the Record API.'):rk(s,h)}}return this.__ownerID=void 0,this._values=gf().withMutations(function(p){p.setSize(c._keys.length),Ta(u).forEach(function(b,_){p.set(c._indices[_],b===c._defaultValues[_]?void 0:b)})}),this},s=a.prototype=Object.create(yr);return s.constructor=a,r&&(a.displayName=r),a};nn.prototype.toString=function(){for(var e=kA(this)+" { ",r=this._keys,n,a=0,s=r.length;a!==s;a++)n=r[a],e+=(a?", ":"")+n+": "+mp(this.get(n));return e+" }"};nn.prototype.equals=function(e){return this===e||tc(e)&&Qd(this).equals(Qd(e))};nn.prototype.hashCode=function(){return Qd(this).hashCode()};nn.prototype.has=function(e){return this._indices.hasOwnProperty(e)};nn.prototype.get=function(e,r){if(!this.has(e))return r;var n=this._indices[e],a=this._values.get(n);return a===void 0?this._defaultValues[e]:a};nn.prototype.set=function(e,r){if(this.has(e)){var n=this._values.set(this._indices[e],r===this._defaultValues[e]?void 0:r);if(n!==this._values&&!this.__ownerID)return HA(this,n)}return this};nn.prototype.remove=function(e){return this.set(e)};nn.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:HA(this,e)};nn.prototype.wasAltered=function(){return this._values.wasAltered()};nn.prototype.toSeq=function(){return Qd(this)};nn.prototype.toJS=function(){return Ab(this)};nn.prototype.entries=function(){return this.__iterator(va)};nn.prototype.__iterator=function(e,r){return Qd(this).__iterator(e,r)};nn.prototype.__iterate=function(e,r){return Qd(this).__iterate(e,r)};nn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var r=this._values.__ensureOwner(e);return e?HA(this,r,e):(this.__ownerID=e,this._values=r,this)};nn.isRecord=tc;nn.getDescriptiveName=kA;var yr=nn.prototype;yr[uj]=!0;yr[zp]=yr.remove;yr.deleteIn=yr.removeIn=PA;yr.getIn=Uj;yr.hasIn=ri.hasIn;yr.merge=Ej;yr.mergeWith=Oj;yr.mergeIn=jA;yr.mergeDeep=Dj;yr.mergeDeepWith=Nj;yr.mergeDeepIn=CA;yr.setIn=RA;yr.update=DA;yr.updateIn=NA;yr.withMutations=t0;yr.asMutable=r0;yr.asImmutable=n0;yr[m_]=yr.entries;yr.toJSON=yr.toObject=ri.toObject;yr.inspect=yr.toSource=function(){return this.toString()};function HA(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function kA(t){return t.constructor.displayName||t.constructor.name||"Record"}function Qd(t){return _A(t._keys.map(function(e){return[e,t.get(e)]}))}function rk(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(r){TA(this.__ownerID,"Cannot set on an immutable record."),this.set(e,r)}})}catch{}}var kj=function(t){function e(r,n){if(!(this instanceof e))return new e(r,n);if(this._value=r,this.size=n===void 0?1/0:Math.max(0,n),this.size===0){if(P3)return P3;P3=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(n,a){return this.has(n)?this._value:a},e.prototype.includes=function(n){return hn(this._value,n)},e.prototype.slice=function(n,a){var s=this.size;return Wp(n,a,s)?this:new e(this._value,Xp(a,s)-ff(n,s))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(n){return hn(this._value,n)?0:-1},e.prototype.lastIndexOf=function(n){return hn(this._value,n)?this.size:-1},e.prototype.__iterate=function(n,a){for(var s=this.size,o=0;o!==s&&n(this._value,a?s-++o:o++,this)!==!1;);return o},e.prototype.__iterator=function(n,a){var s=this,o=this.size,u=0;return new kt(function(){return u===o?Ti():xr(n,a?o-++u:u++,s._value)})},e.prototype.equals=function(n){return n instanceof e?hn(this._value,n._value):UA(n)},e}(Ea),P3;function Qj(t,e){return Gj([],e||nk,t,"",e&&e.length>2?[]:void 0,{"":t})}function Gj(t,e,r,n,a,s){if(typeof r!="string"&&!sa(r)&&(pA(r)||hA(r)||E_(r))){if(~t.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");t.push(r),a&&n!==""&&a.push(n);var o=e.call(s,n,ti(r).map(function(u,c){return Gj(t,e,u,c,a,r)}),a&&a.slice());return t.pop(),a&&a.pop(),o}return r}function nk(t,e){return Ln(e)?e.toList():hr(e)?e.toMap():e.toSet()}var zj="4.3.4",ik={version:zj,Collection:Ar,Iterable:Ar,Seq:ti,Map:ic,OrderedMap:ss,List:gf,Stack:i0,Set:mf,OrderedSet:il,PairSorting:Hj,Record:nn,Range:qA,Repeat:kj,is:hn,fromJS:Qj,hash:gi,isImmutable:sa,isCollection:ei,isKeyed:hr,isIndexed:Ln,isAssociative:hf,isOrdered:ta,isValueObject:Eb,isPlainObject:E_,isSeq:Kp,isList:x_,isMap:Yp,isOrderedMap:w_,isStack:Ep,isSet:a0,isOrderedSet:R_,isRecord:tc,get:O_,getIn:I_,has:EA,hasIn:VA,merge:xj,mergeDeep:Ij,mergeWith:Rj,mergeDeepWith:Pj,remove:OA,removeIn:IA,set:AA,setIn:xA,update:A_,updateIn:nc},ak=Ar;const sk=Object.freeze(Object.defineProperty({__proto__:null,Collection:Ar,Iterable:ak,List:gf,Map:ic,OrderedMap:ss,OrderedSet:il,PairSorting:Hj,Range:qA,Record:nn,Repeat:kj,Seq:ti,Set:mf,Stack:i0,default:ik,fromJS:Qj,get:O_,getIn:I_,has:EA,hasIn:VA,hash:gi,is:hn,isAssociative:hf,isCollection:ei,isImmutable:sa,isIndexed:Ln,isKeyed:hr,isList:x_,isMap:Yp,isOrdered:ta,isOrderedMap:w_,isOrderedSet:R_,isPlainObject:E_,isRecord:tc,isSeq:Kp,isSet:a0,isStack:Ep,isValueObject:Eb,merge:xj,mergeDeep:Ij,mergeDeepWith:Pj,mergeWith:Rj,remove:OA,removeIn:IA,set:AA,setIn:xA,update:A_,updateIn:nc,version:zj},Symbol.toStringTag,{value:"Module"})),QA=h_(sk);Object.defineProperty(rl,"__esModule",{value:!0});rl.ActionContextKey=rl.ActionContext=void 0;const _P=QA;class hd{constructor(e={}){this.map=(0,_P.Map)(e)}setDefault(e,r){return this.has(e)?this:this.set(e,r)}set(e,r){return this.setRaw(e.name,r)}setRaw(e,r){return new hd(this.map.set(e,r))}delete(e){return new hd(this.map.delete(e.name))}get(e){return this.getRaw(e.name)}getRaw(e){return this.map.get(e)}getSafe(e){if(!this.has(e))throw new Error(`Context entry ${e.name} is required but not available`);return this.get(e)}has(e){return this.hasRaw(e.name)}hasRaw(e){return this.map.has(e)}merge(...e){let r=this;for(const n of e)for(const a of n.keys())r=r.set(a,n.get(a));return r}keys(){return[...this.map.keys()].map(e=>new Wj(e))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(e){return e instanceof hd?e:new hd((0,_P.Map)(e||{}))}}rl.ActionContext=hd;class Wj{constructor(e){this.name=e}}rl.ActionContextKey=Wj;var o0={};Object.defineProperty(o0,"__esModule",{value:!0});o0.Bus=void 0;class ok{constructor(e){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,e)}subscribe(e){this.actors.push(e),this.reorderForDependencies()}subscribeObserver(e){this.observers.push(e)}unsubscribe(e){const r=this.actors.indexOf(e);return r>=0?(this.actors.splice(r,1),!0):!1}unsubscribeObserver(e){const r=this.observers.indexOf(e);return r>=0?(this.observers.splice(r,1),!0):!1}publish(e){return this.actors.map(r=>({actor:r,reply:r.test(e)}))}onRun(e,r,n){for(const a of this.observers)a.onRun(e,r,n)}addDependencies(e,r){for(const n of r){let a=this.dependencyLinks.get(n);a||(a=[],this.dependencyLinks.set(n,a)),a.push(e)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const e=[];for(const r of this.dependencyLinks.keys()){const n=this.actors.indexOf(r);n>=0&&(this.actors.splice(n,1),e.push(r))}for(;e.length>0;){let r=-1;for(let a=0;a<e.length;a++){let s=!0;for(const o of this.dependencyLinks.get(e[a]))if(!this.actors.includes(o)&&e.includes(o)){s=!1;break}if(s){r=a;break}}if(r<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const n=e.splice(r,1)[0];this.actors.push(n)}}}}o0.Bus=ok;var P_={};Object.defineProperty(P_,"__esModule",{value:!0});P_.BusIndexed=void 0;const uk=o0;class ck extends uk.Bus{constructor(e){super(e),this.actorsIndex={}}subscribe(e){const r=this.getActorIdentifier(e)||"_undefined_";let n=this.actorsIndex[r];n||(n=this.actorsIndex[r]=[]),n.push(e),super.subscribe(e)}unsubscribe(e){const r=this.getActorIdentifier(e)||"_undefined_",n=this.actorsIndex[r];if(n){const a=n.indexOf(e);a>=0&&n.splice(a,1),n.length===0&&delete this.actorsIndex[r]}return super.unsubscribe(e)}publish(e){const r=this.getActionIdentifier(e);return r?[...this.actorsIndex[r]||[],...this.actorsIndex._undefined_||[]].map(a=>({actor:a,reply:a.test(e)})):super.publish(e)}getActorIdentifier(e){return this.actorIdentifierFields.reduce((r,n)=>r[n],e)}getActionIdentifier(e){return this.actionIdentifierFields.reduce((r,n)=>r[n],e)}}P_.BusIndexed=ck;var u0={};Object.defineProperty(u0,"__esModule",{value:!0});u0.CONTEXT_KEY_LOGGER=void 0;const lk=rl;u0.CONTEXT_KEY_LOGGER=new lk.ActionContextKey("@comunica/core:log");var D_={};Object.defineProperty(D_,"__esModule",{value:!0});D_.ActionObserver=void 0;class dk{constructor(e){Object.assign(this,e)}}D_.ActionObserver=dk;var N_={};Object.defineProperty(N_,"__esModule",{value:!0});N_.Actor=void 0;const fk=u0;class Eu{constructor(e){this.beforeActors=[],Object.assign(this,e),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors)}static getContextLogger(e){return e.get(fk.CONTEXT_KEY_LOGGER)}runObservable(e){const r=this.run(e);return this.bus.onRun(this,e,r),r}async initialize(){return!0}async deinitialize(){return!0}getDefaultLogData(e,r){const n=r?r():{};return n.actor=this.name,n}logTrace(e,r,n){const a=Eu.getContextLogger(e);a&&a.trace(r,this.getDefaultLogData(e,n))}logDebug(e,r,n){const a=Eu.getContextLogger(e);a&&a.debug(r,this.getDefaultLogData(e,n))}logInfo(e,r,n){const a=Eu.getContextLogger(e);a&&a.info(r,this.getDefaultLogData(e,n))}logWarn(e,r,n){const a=Eu.getContextLogger(e);a&&a.warn(r,this.getDefaultLogData(e,n))}logError(e,r,n){const a=Eu.getContextLogger(e);a&&a.error(r,this.getDefaultLogData(e,n))}logFatal(e,r,n){const a=Eu.getContextLogger(e);a&&a.fatal(r,this.getDefaultLogData(e,n))}}N_.Actor=Eu;var j_={};Object.defineProperty(j_,"__esModule",{value:!0});j_.Mediator=void 0;class hk{constructor(e){Object.assign(this,e)}publish(e){const r=this.bus.publish(e);if(r.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return r}async mediateActor(e){return await this.mediateWith(e,this.publish(e))}async mediate(e){return(await this.mediateActor(e)).runObservable(e)}}j_.Mediator=hk;(function(t){var e=g&&g.__createBinding||(Object.create?function(s,o,u,c){c===void 0&&(c=u);var l=Object.getOwnPropertyDescriptor(o,u);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(s,c,l)}:function(s,o,u,c){c===void 0&&(c=u),s[c]=o[u]}),r=g&&g.__exportStar||function(s,o){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&e(o,s,u)};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const a=dA.Logger;t.Logger=a,r(rl,t),r(o0,t),r(P_,t),r(u0,t),r(D_,t),r(N_,t),r(j_,t)})(Je);Object.defineProperty(b_,"__esModule",{value:!0});b_.ActorInit=void 0;const pk=Je;class yk extends pk.Actor{constructor(e){super(e)}}b_.ActorInit=yk;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(b_,t)})(q5);Object.defineProperty(Gp,"__esModule",{value:!0});Gp.ActorInitQueryBase=void 0;const bk=q5;class _k extends bk.ActorInit{constructor(e){var r;(r=e.contextKeyShortcutsExtensions)==null||r.forEach(n=>{if(Object.keys(e.contextKeyShortcuts).some(a=>Object.keys(n).includes(a)))throw new Error("Duplicate keys found while adding `contextKeyShortcutsExtensions`.");e.contextKeyShortcuts={...e.contextKeyShortcuts,...n}}),super(e)}async test(e){return!0}async run(e){throw new Error("ActorInitSparql#run is not supported in the browser.")}}Gp.ActorInitQueryBase=_k;var C_={},D3={exports:{}},gP;function Jo(){if(gP)return D3.exports;gP=1;var t=D3.exports={},e,r;function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?r=clearTimeout:r=a}catch{r=a}})();function s(_){if(e===setTimeout)return setTimeout(_,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(_,0);try{return e(_,0)}catch{try{return e.call(null,_,0)}catch{return e.call(this,_,0)}}}function o(_){if(r===clearTimeout)return clearTimeout(_);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(_);try{return r(_)}catch{try{return r.call(null,_)}catch{return r.call(this,_)}}}var u=[],c=!1,l,d=-1;function f(){!c||!l||(c=!1,l.length?u=l.concat(u):d=-1,u.length&&h())}function h(){if(!c){var _=s(f);c=!0;for(var E=u.length;E;){for(l=u,u=[];++d<E;)l&&l[d].run();d=-1,E=u.length}l=null,c=!1,o(_)}}t.nextTick=function(_){var E=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)E[w-1]=arguments[w];u.push(new p(_,E)),u.length===1&&!c&&s(h)};function p(_,E){this.fun=_,this.array=E}p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function b(){}return t.on=b,t.addListener=b,t.once=b,t.off=b,t.removeListener=b,t.removeAllListeners=b,t.emit=b,t.prependListener=b,t.prependOnceListener=b,t.listeners=function(_){return[]},t.binding=function(_){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(_){throw new Error("process.chdir is not supported")},t.umask=function(){return 0},D3.exports}Object.defineProperty(C_,"__esModule",{value:!0});C_.ActorInitQuery=void 0;const gk=Gp;typeof process>"u"&&(globalThis.process=Jo());class mk extends gk.ActorInitQueryBase{}C_.ActorInitQuery=mk;var M_={},ct={},c0={},Ut={},Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.KeysRdfUpdateQuads=Mr.KeysRdfResolveQuadPattern=Mr.KeysRdfParseHtmlScript=Mr.KeysRdfParseJsonLd=Mr.KeysQueryOperation=Mr.KeysInitQuery=Mr.KeysHttpProxy=Mr.KeysHttpMemento=Mr.KeysHttpWayback=Mr.KeysHttp=Mr.KeysCore=void 0;const pt=Je;Mr.KeysCore={log:pt.CONTEXT_KEY_LOGGER};Mr.KeysHttp={includeCredentials:new pt.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new pt.ActionContextKey("@comunica/bus-http:auth"),fetch:new pt.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new pt.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new pt.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new pt.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelay:new pt.ActionContextKey("@comunica/bus-http:http-retry-delay"),httpRetryOnServerError:new pt.ActionContextKey("@comunica/bus-http:http-retry-on-server-error")};Mr.KeysHttpWayback={recoverBrokenLinks:new pt.ActionContextKey("@comunica/bus-http:recover-broken-links")};Mr.KeysHttpMemento={datetime:new pt.ActionContextKey("@comunica/actor-http-memento:datetime")};Mr.KeysHttpProxy={httpProxyHandler:new pt.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")};Mr.KeysInitQuery={initialBindings:new pt.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new pt.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new pt.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new pt.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new pt.ActionContextKey("@comunica/actor-init-query:queryString"),query:new pt.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new pt.ActionContextKey("@comunica/actor-init-query:baseIRI"),functionArgumentsCache:new pt.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new pt.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),extensionFunctionCreator:new pt.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new pt.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),cliArgsHandlers:new pt.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new pt.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new pt.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new pt.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new pt.ActionContextKey("@context")};Mr.KeysQueryOperation={operation:new pt.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new pt.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new pt.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new pt.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new pt.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new pt.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new pt.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new pt.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph")};Mr.KeysRdfParseJsonLd={documentLoader:new pt.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new pt.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new pt.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")};Mr.KeysRdfParseHtmlScript={processingHtmlScript:new pt.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new pt.ActionContextKey("extractAllScripts")};Mr.KeysRdfResolveQuadPattern={sources:new pt.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sources"),source:new pt.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:source"),sourceIds:new pt.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sourceIds"),hypermediaSourcesAggregatedStores:new pt.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:hypermediaSourcesAggregatedStores")};Mr.KeysRdfUpdateQuads={destination:new pt.ActionContextKey("@comunica/bus-rdf-update-quads:destination")};(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Mr,t)})(Ut);var F_={},L_={};Object.defineProperty(L_,"__esModule",{value:!0});L_.BlankNodeScoped=void 0;class vk{constructor(e,r){this.termType="BlankNode",this.value=e,this.skolemized=r}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}}L_.BlankNodeScoped=vk;var B_={};Object.defineProperty(B_,"__esModule",{value:!0});B_.BlankNodeBindingsScoped=void 0;class wk{constructor(e){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}}B_.BlankNodeBindingsScoped=wk;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(L_,t),r(B_,t)})(F_);var al={},$n={},l0={},d0={},Zt={},Xn={},ft={},f0={};Object.defineProperty(f0,"__esModule",{value:!0});f0.BlankNode=void 0;let Sk=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}};f0.BlankNode=Sk;var $_={},h0={};Object.defineProperty(h0,"__esModule",{value:!0});h0.DefaultGraph=void 0;let kE=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&e.termType==="DefaultGraph"}};h0.DefaultGraph=kE;kE.INSTANCE=new kE;var p0={},wf={};Object.defineProperty(wf,"__esModule",{value:!0});wf.NamedNode=void 0;let Tk=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&e.termType==="NamedNode"&&e.value===this.value}};wf.NamedNode=Tk;Object.defineProperty(p0,"__esModule",{value:!0});p0.Literal=void 0;const Xj=wf;let GA=class QE{constructor(e,r){this.termType="Literal",this.value=e,typeof r=="string"?(this.language=r,this.datatype=QE.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=QE.XSD_STRING)}equals(e){return!!e&&e.termType==="Literal"&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}};p0.Literal=GA;GA.RDF_LANGUAGE_STRING=new Xj.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");GA.XSD_STRING=new Xj.NamedNode("http://www.w3.org/2001/XMLSchema#string");var y0={};Object.defineProperty(y0,"__esModule",{value:!0});y0.Quad=void 0;let Ek=class{constructor(e,r,n,a){this.termType="Quad",this.value="",this.subject=e,this.predicate=r,this.object=n,this.graph=a}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}};y0.Quad=Ek;var b0={};Object.defineProperty(b0,"__esModule",{value:!0});b0.Variable=void 0;let Ok=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&e.termType==="Variable"&&e.value===this.value}};b0.Variable=Ok;Object.defineProperty($_,"__esModule",{value:!0});$_.DataFactory=void 0;const Ak=f0,xk=h0,mP=p0,Rk=wf,Ik=y0,Pk=b0;let Dk=0,Nk=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${Dk++}_`}namedNode(e){return new Rk.NamedNode(e)}blankNode(e){return new Ak.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,r){return new mP.Literal(e,r)}variable(e){return new Pk.Variable(e)}defaultGraph(){return xk.DefaultGraph.INSTANCE}quad(e,r,n,a){return new Ik.Quad(e,r,n,a||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(mP.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}};$_.DataFactory=Nk;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(f0,t),r($_,t),r(h0,t),r(p0,t),r(wf,t),r(y0,t),r(b0,t)})(ft);Object.defineProperty(Xn,"__esModule",{value:!0});Xn.stringQuadToQuad=Xn.quadToStringQuad=Xn.stringToTerm=Xn.getLiteralLanguage=Xn.getLiteralType=Xn.getLiteralValue=Xn.termToString=void 0;const jk=ft,Kj=new jk.DataFactory;function Do(t){if(t)switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return"_:"+t.value;case"Literal":const e=t;return'"'+e.value+'"'+(e.datatype&&e.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&e.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+e.datatype.value:"")+(e.language?"@"+e.language:"");case"Quad":return`<<${Do(t.subject)} ${Do(t.predicate)} ${Do(t.object)}${t.graph.termType==="DefaultGraph"?"":" "+Do(t.graph)}>>`;case"Variable":return"?"+t.value;case"DefaultGraph":return t.value}}Xn.termToString=Do;function Jj(t){const e=/^"([^]*)"/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]}Xn.getLiteralValue=Jj;function Yj(t){const e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}Xn.getLiteralType=Yj;function Zj(t){const e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]?e[1].toLowerCase():""}Xn.getLiteralLanguage=Zj;function No(t,e){if(e=e||Kj,!t||!t.length)return e.defaultGraph();switch(t[0]){case"_":return e.blankNode(t.substr(2));case"?":if(!e.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return e.variable(t.substr(1));case'"':const r=Zj(t),n=e.namedNode(Yj(t));return e.literal(Jj(t),r||n);case"<":default:if(t[0]==="<"&&t.length>4&&t[1]==="<"&&t[t.length-1]===">"&&t[t.length-2]===">"){const a=t.slice(2,-2).trim();let s=[],o=0,u=0,c=!1;for(let l=0;l<a.length;l++){const d=a[l];if(d==="<"&&o++,d===">"){if(o===0)throw new Error("Found closing tag without opening tag in "+t);o--}if(d==='"'){let f=!1,h=l;for(;h-- >0&&a[h]==="\\";)f=!f;f||(c=!c)}if(d===" "&&!c&&o===0){for(s.push(a.slice(u,l));a[l+1]===" ";)l+=1;u=l+1}}if(o!==0)throw new Error("Found opening tag without closing tag in "+t);if(s.push(a.slice(u,a.length)),s.length!==3&&s.length!==4)throw new Error("Nested quad syntax error "+t);return s=s.map(l=>l.startsWith("<")&&!l.includes(" ")?l.slice(1,-1):l),e.quad(No(s[0]),No(s[1]),No(s[2]),s[3]?No(s[3]):void 0)}return e.namedNode(t)}}Xn.stringToTerm=No;function Ck(t){return{subject:Do(t.subject),predicate:Do(t.predicate),object:Do(t.object),graph:Do(t.graph)}}Xn.quadToStringQuad=Ck;function Mk(t,e){return e=e||Kj,e.quad(No(t.subject,e),No(t.predicate,e),No(t.object,e),No(t.graph,e))}Xn.stringQuadToQuad=Mk;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.termToString=t.stringToTerm=t.stringQuadToQuad=t.quadToStringQuad=t.getLiteralValue=t.getLiteralType=t.getLiteralLanguage=void 0;const e=Xn;Object.defineProperty(t,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(t,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(t,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(t,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(t,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(t,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(t,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(Zt);Object.defineProperty(d0,"__esModule",{value:!0});d0.bindingsToString=void 0;const Fk=Zt;function Lk(t){const e={};for(const r of t.keys())e[r.value]=(0,Fk.termToString)(t.get(r));return JSON.stringify(e,null,"  ")}d0.bindingsToString=Lk;Object.defineProperty(l0,"__esModule",{value:!0});l0.Bindings=void 0;const Vy=QA,Bk=d0;class Ou{constructor(e,r){this.type="bindings",this.dataFactory=e,this.entries=r}has(e){return this.entries.has(typeof e=="string"?e:e.value)}get(e){return this.entries.get(typeof e=="string"?e:e.value)}set(e,r){return new Ou(this.dataFactory,this.entries.set(typeof e=="string"?e:e.value,r))}delete(e){return new Ou(this.dataFactory,this.entries.delete(typeof e=="string"?e:e.value))}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),e=>this.dataFactory.variable(e))}values(){return this.iteratorToIterable(this.entries.values())}forEach(e){this.entries.forEach((r,n)=>e(r,this.dataFactory.variable(n)))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([e,r])=>[this.dataFactory.variable(e),r])[Symbol.iterator]()}equals(e){var r;if(!e)return!1;if(this===e)return!0;if(this.size!==e.size)return!1;for(const n of this.keys())if(!((r=this.get(n))!=null&&r.equals(e.get(n))))return!1;return!0}filter(e){return new Ou(this.dataFactory,(0,Vy.Map)(this.entries.filter((r,n)=>e(r,this.dataFactory.variable(n)))))}map(e){return new Ou(this.dataFactory,(0,Vy.Map)(this.entries.map((r,n)=>e(r,this.dataFactory.variable(n)))))}merge(e){const r=new Set([...this.iteratorToIterable(this.entries.keys()),...[...e.keys()].map(a=>a.value)]),n=[];for(const a of r){const s=this.entries.get(a),o=e.get(this.dataFactory.variable(a));if(s&&o&&!s.equals(o))return;const u=s||o;n.push([a,u])}return new Ou(this.dataFactory,(0,Vy.Map)(n))}mergeWith(e,r){const n=new Set([...this.iteratorToIterable(this.entries.keys()),...[...r.keys()].map(s=>s.value)]),a=[];for(const s of n){const o=this.dataFactory.variable(s),u=this.entries.get(s),c=r.get(o);let l;u&&c&&!u.equals(c)?l=e(u,c,o):l=u||c,a.push([s,l])}return new Ou(this.dataFactory,(0,Vy.Map)(a))}toString(){return(0,Bk.bindingsToString)(this)}*mapIterable(e,r){for(const n of e)yield r(n)}iteratorToIterable(e){return{[Symbol.iterator]:()=>e}}}l0.Bindings=Ou;var U_={};Object.defineProperty(U_,"__esModule",{value:!0});U_.BindingsFactory=void 0;const $k=QA,Uk=ft,qk=l0;class Vk{constructor(e=new Uk.DataFactory){this.dataFactory=e}bindings(e=[]){return new qk.Bindings(this.dataFactory,(0,$k.Map)(e.map(([r,n])=>[r.value,n])))}fromBindings(e){return this.bindings([...e])}fromRecord(e){return this.bindings(Object.entries(e).map(([r,n])=>[this.dataFactory.variable(r),n]))}}U_.BindingsFactory=Vk;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(l0,t),r(U_,t),r(d0,t)})($n);var an={},st={};Object.defineProperty(st,"__esModule",{value:!0});st.matchPatternMappings=st.matchPatternComplete=st.matchPattern=st.matchTerm=st.getValueNestedPath=st.someTermsNested=st.someTerms=st.everyTermsNested=st.everyTerms=st.reduceTermsNested=st.reduceTerms=st.mapTermsNested=st.mapTerms=st.filterQuadTermNamesNested=st.filterQuadTermNames=st.filterTermsNested=st.filterTerms=st.forEachTermsNested=st.forEachTerms=st.collectNamedTerms=st.getNamedTerms=st.getTermsNested=st.getTerms=st.TRIPLE_TERM_NAMES=st.QUAD_TERM_NAMES=void 0;const Hk=ft,zA=new Hk.DataFactory;st.QUAD_TERM_NAMES=["subject","predicate","object","graph"];st.TRIPLE_TERM_NAMES=["subject","predicate","object"];function eC(t,e){return e&&t.graph.termType==="DefaultGraph"?[t.subject,t.predicate,t.object]:[t.subject,t.predicate,t.object,t.graph]}st.getTerms=eC;function tC(t,e){const r=[];for(const n of eC(t,e))n.termType==="Quad"?tC(n,e).forEach(a=>r.push(a)):r.push(n);return r}st.getTermsNested=tC;function kk(t){return[{key:"subject",value:t.subject},{key:"predicate",value:t.predicate},{key:"object",value:t.object},{key:"graph",value:t.graph}]}st.getNamedTerms=kk;function Qk(t,e,r){const n={};return t.forEach(a=>n[a.key]=a.value),e&&(n.subject=n.subject||e("subject"),n.predicate=n.predicate||e("predicate"),n.object=n.object||e("object"),n.graph=n.graph||e("graph")),(r||zA).quad(n.subject,n.predicate,n.object,n.graph)}st.collectNamedTerms=Qk;function Gk(t,e){e(t.subject,"subject"),e(t.predicate,"predicate"),e(t.object,"object"),e(t.graph,"graph")}st.forEachTerms=Gk;function Lh(t,e,r=[]){t.subject.termType==="Quad"?Lh(t.subject,e,[...r,"subject"]):e(t.subject,[...r,"subject"]),t.predicate.termType==="Quad"?Lh(t.predicate,e,[...r,"predicate"]):e(t.predicate,[...r,"predicate"]),t.object.termType==="Quad"?Lh(t.object,e,[...r,"object"]):e(t.object,[...r,"object"]),t.graph.termType==="Quad"?Lh(t.graph,e,[...r,"graph"]):e(t.graph,[...r,"graph"])}st.forEachTermsNested=Lh;function zk(t,e){const r=[];return e(t.subject,"subject")&&r.push(t.subject),e(t.predicate,"predicate")&&r.push(t.predicate),e(t.object,"object")&&r.push(t.object),e(t.graph,"graph")&&r.push(t.graph),r}st.filterTerms=zk;function Bh(t,e,r=[]){let n=[];return t.subject.termType==="Quad"?n=[...n,...Bh(t.subject,e,[...r,"subject"])]:e(t.subject,[...r,"subject"])&&n.push(t.subject),t.predicate.termType==="Quad"?n=[...n,...Bh(t.predicate,e,[...r,"predicate"])]:e(t.predicate,[...r,"predicate"])&&n.push(t.predicate),t.object.termType==="Quad"?n=[...n,...Bh(t.object,e,[...r,"object"])]:e(t.object,[...r,"object"])&&n.push(t.object),t.graph.termType==="Quad"?n=[...n,...Bh(t.graph,e,[...r,"graph"])]:e(t.graph,[...r,"graph"])&&n.push(t.graph),n}st.filterTermsNested=Bh;function Wk(t,e){const r=[];return e(t.subject,"subject")&&r.push("subject"),e(t.predicate,"predicate")&&r.push("predicate"),e(t.object,"object")&&r.push("object"),e(t.graph,"graph")&&r.push("graph"),r}st.filterQuadTermNames=Wk;function $h(t,e,r=[]){let n=[];const a=[...r,"subject"];t.subject.termType==="Quad"?n=[...n,...$h(t.subject,e,a)]:e(t.subject,a)&&n.push(a);const s=[...r,"predicate"];t.predicate.termType==="Quad"?n=[...n,...$h(t.predicate,e,s)]:e(t.predicate,s)&&n.push(s);const o=[...r,"object"];t.object.termType==="Quad"?n=[...n,...$h(t.object,e,o)]:e(t.object,o)&&n.push(o);const u=[...r,"graph"];return t.graph.termType==="Quad"?n=[...n,...$h(t.graph,e,u)]:e(t.graph,u)&&n.push(u),n}st.filterQuadTermNamesNested=$h;function Xk(t,e,r){return(r||zA).quad(e(t.subject,"subject"),e(t.predicate,"predicate"),e(t.object,"object"),e(t.graph,"graph"))}st.mapTerms=Xk;function Uh(t,e,r,n=[]){return(r||zA).quad(t.subject.termType==="Quad"?Uh(t.subject,e,r,[...n,"subject"]):e(t.subject,[...n,"subject"]),t.predicate.termType==="Quad"?Uh(t.predicate,e,r,[...n,"predicate"]):e(t.predicate,[...n,"predicate"]),t.object.termType==="Quad"?Uh(t.object,e,r,[...n,"object"]):e(t.object,[...n,"object"]),t.graph.termType==="Quad"?Uh(t.graph,e,r,[...n,"graph"]):e(t.graph,[...n,"graph"]))}st.mapTermsNested=Uh;function Kk(t,e,r){let n=r;return n=e(n,t.subject,"subject"),n=e(n,t.predicate,"predicate"),n=e(n,t.object,"object"),e(n,t.graph,"graph")}st.reduceTerms=Kk;function qh(t,e,r,n=[]){let a=r;return t.subject.termType==="Quad"?a=qh(t.subject,e,a,[...n,"subject"]):a=e(a,t.subject,[...n,"subject"]),t.predicate.termType==="Quad"?a=qh(t.predicate,e,a,[...n,"predicate"]):a=e(a,t.predicate,[...n,"predicate"]),t.object.termType==="Quad"?a=qh(t.object,e,a,[...n,"object"]):a=e(a,t.object,[...n,"object"]),t.graph.termType==="Quad"?a=qh(t.graph,e,a,[...n,"graph"]):a=e(a,t.graph,[...n,"graph"]),a}st.reduceTermsNested=qh;function rC(t,e){return e(t.subject,"subject")&&e(t.predicate,"predicate")&&e(t.object,"object")&&e(t.graph,"graph")}st.everyTerms=rC;function Vh(t,e,r=[]){return(t.subject.termType==="Quad"?Vh(t.subject,e,[...r,"subject"]):e(t.subject,[...r,"subject"]))&&(t.predicate.termType==="Quad"?Vh(t.predicate,e,[...r,"predicate"]):e(t.predicate,[...r,"predicate"]))&&(t.object.termType==="Quad"?Vh(t.object,e,[...r,"object"]):e(t.object,[...r,"object"]))&&(t.graph.termType==="Quad"?Vh(t.graph,e,[...r,"graph"]):e(t.graph,[...r,"graph"]))}st.everyTermsNested=Vh;function Jk(t,e){return e(t.subject,"subject")||e(t.predicate,"predicate")||e(t.object,"object")||e(t.graph,"graph")}st.someTerms=Jk;function Hh(t,e,r=[]){return(t.subject.termType==="Quad"?Hh(t.subject,e,[...r,"subject"]):e(t.subject,[...r,"subject"]))||(t.predicate.termType==="Quad"?Hh(t.predicate,e,[...r,"predicate"]):e(t.predicate,[...r,"predicate"]))||(t.object.termType==="Quad"?Hh(t.object,e,[...r,"object"]):e(t.object,[...r,"object"]))||(t.graph.termType==="Quad"?Hh(t.graph,e,[...r,"graph"]):e(t.graph,[...r,"graph"]))}st.someTermsNested=Hh;function nC(t,e){if(e.length===0)return t;if(t.termType==="Quad")return nC(t[e[0]],e.slice(1));throw new Error(`Tried to get ${e[0]} from term of type ${t.termType}`)}st.getValueNestedPath=nC;function kh(t,e){return!e||e.termType==="Variable"||e.termType==="Quad"&&t.termType==="Quad"&&aC(t,e)||e.equals(t)}st.matchTerm=kh;function iC(t,e,r,n,a){return kh(t.subject,e)&&kh(t.predicate,r)&&kh(t.object,n)&&kh(t.graph,a)}st.matchPattern=iC;function aC(t,e){return iC(t,e.subject,e.predicate,e.object,e.graph)}st.matchPatternComplete=aC;function Yk(t,e,r={}){const n={};function a(s,o){return rC(s,(u,c)=>{var l,d;const f=o[c];switch(u.termType){case"Variable":return r.skipVarMapping&&f.termType==="Variable"||((d=(l=n[u.value])===null||l===void 0?void 0:l.equals(f))!==null&&d!==void 0?d:(n[u.value]=f,!0));case"Quad":return f.termType==="Quad"&&a(u,f);default:return u.equals(f)}})}return a(e,t)&&(r.returnMappings?n:!0)}st.matchPatternMappings=Yk;var en={};Object.defineProperty(en,"__esModule",{value:!0});en.getQuads=en.getDefaultGraphs=en.getVariables=en.getLiterals=en.getBlankNodes=en.getNamedNodes=en.getTermsOfType=en.uniqTerms=en.TERM_TYPES=void 0;const Zk=Zt;en.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function eQ(t){const e={};return t.filter(r=>{const n=(0,Zk.termToString)(r);return!(n in e)&&(e[n]=!0)})}en.uniqTerms=eQ;function bl(t,e){return t.filter(r=>r.termType===e)}en.getTermsOfType=bl;function tQ(t){return bl(t,"NamedNode")}en.getNamedNodes=tQ;function rQ(t){return bl(t,"BlankNode")}en.getBlankNodes=rQ;function nQ(t){return bl(t,"Literal")}en.getLiterals=nQ;function iQ(t){return bl(t,"Variable")}en.getVariables=iQ;function aQ(t){return bl(t,"DefaultGraph")}en.getDefaultGraphs=aQ;function sQ(t){return bl(t,"Quad")}en.getQuads=sQ;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(st,t),r(en,t)})(an);var gt={},WA={},oQ=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!t(e[a],r[a]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(a of e.entries())if(!r.has(a[0]))return!1;for(a of e.entries())if(!t(a[1],r.get(a[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(a of e.entries())if(!r.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(n=e.length,n!=r.length)return!1;for(a=n;a--!==0;)if(e[a]!==r[a])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!==0;){var o=s[a];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r},Sf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.expressionTypes=t.types=void 0,function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"}(t.types||(t.types={})),function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"}(t.expressionTypes||(t.expressionTypes={}))})(Sf);var Tf={},XA={};let q_=class{constructor(){return uQ||this}equals(e){return e&&this.termType===e.termType}};Object.defineProperty(q_.prototype,"value",{enumerable:!0,value:"*"});Object.defineProperty(q_.prototype,"termType",{enumerable:!0,value:"Wildcard"});var uQ=new q_;XA.Wildcard=q_;var cQ=function(){var t=function(Re,Oe,Pe,Le){for(Pe=Pe||{},Le=Re.length;Le--;Pe[Re[Le]]=Oe);return Pe},e=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],r=[2,247],n=[100,110,113,115,116,123,126,131,329,330,331,332,333],a=[2,409],s=[1,18],o=[1,27],u=[13,16,45,197,224,229,308],c=[28,29,53],l=[28,53],d=[1,42],f=[1,45],h=[1,41],p=[1,44],b=[123,126],_=[1,67],E=[39,45,87],w=[13,16,45,197,224,308],O=[1,87],A=[2,281],T=[1,86],I=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],D=[6,28,29,53,63,70,73,81,83,85],U=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],H=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],N=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],R=[13,16,308],F=[112,132,327,334],X=[13,16,112,132,308],ne=[1,111],$=[1,117],C=[112,132,327,328,334],Q=[13,16,112,132,308,328],se=[28,29,45,53,87],ie=[1,138],be=[1,151],he=[1,128],Te=[1,127],Ne=[1,129],ye=[1,140],ce=[1,141],xe=[1,142],oe=[1,143],J=[1,144],le=[1,145],pe=[1,147],L=[1,148],P=[2,457],m=[1,158],y=[1,159],v=[1,160],j=[1,152],V=[1,153],q=[1,156],G=[1,171],Y=[1,172],ee=[1,173],ae=[1,174],ve=[1,175],me=[1,176],Ee=[1,167],k=[1,168],W=[1,169],M=[1,170],S=[1,157],x=[1,166],z=[1,161],ue=[1,162],ge=[1,163],we=[1,164],Me=[1,165],Ue=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Ge=[1,195],We=[6,31,73,81,83,85],lt=[2,285],Wr=[1,199],br=[1,201],Br=[6,31,70,73,81,83,85],Qt=[2,283],_r=[1,207],Pr=[1,218],kr=[1,223],xn=[1,219],Et=[1,225],B=[1,226],re=[1,224],Se=[6,63,70,73,81,83,85],Fe=[1,236],Ae=[2,334],ze=[1,243],De=[1,241],Be=[6,193],Ye=[2,349],Pt=[2,339],at=[28,128],qe=[47,48,193,272],ys=[47,48,193,242,272],ke=[47,48,193,242,246,272],bn=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],gr=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],mr=[1,271],Pi=[1,270],wt=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],ha=[1,281],Hi=[1,280],ir=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],io=[45,89],au=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Xr=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Di=[31,89],sn=[48,87],ki=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],on=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],Pa=[1,313],Zr=[6,85],bs=[6,31,81,83,85],Da=[2,361],ai=[2,353],qn=[1,343],su=[31,112,335],Na=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],jl=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],te=[6,109,193],de=[31,112],_e=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],$e=[1,390],He=[1,391],Xe=[13,16,87,197,308,314],mt=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],Bt=[1,417],er=[1,418],Dr=[13,16,48,197,229,308],Kt=[6,31,85],vr=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],si=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],Vn=[29,31,85,112,159,160,161,163,164],Rn=[1,443],oi=[1,444],ja=[1,449],_n=[31,112,193,232,318,335],ao=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],dc=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],fc=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Gt=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],gn=[31,45],so=[1,507],ou=[1,508],gy=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],my=[29,31,85,112,159,160,161,163,164,335],hc=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],XR=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],KR=[2,352],t3=[13,16,197,308,314],JR=[1,565],Cl=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],YR=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],oo=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],ZR=[13,16,87,308],uo=[2,364],Ml=[29,31,85,112,159,160,161,163,164,193,232,318,335],vy=[31,112,193,232,272,318,335],co=[2,359],eI=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],wy=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],tI=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],rI=[2,347],r3={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:function(Oe,Pe,Le,nt,ot,K,Qi){var Z=K.length-1;switch(ot){case 1:if(K[Z-1]=K[Z-1]||{},Rt.base&&(K[Z-1].base=Rt.base),Rt.base="",K[Z-1].prefixes=Rt.prefixes,Rt.prefixes=null,Rt.pathOnly){if(K[Z-1].type==="path"||"termType"in K[Z-1])return K[Z-1];throw new Error("Received full SPARQL query in path only mode")}else if(K[Z-1].type==="path"||"termType"in K[Z-1])throw new Error("Received only path in full SPARQL mode");if(K[Z-1].type==="update"){const Ot={};for(const Jt of K[Z-1].updates)if(Jt.updateType==="insert"){const vt={};for(const Pn of Jt.insert)if(Pn.type==="bgp"||Pn.type==="graph")for(const Dn of Pn.triples)Dn.subject.termType==="BlankNode"&&(vt[Dn.subject.value]=!0),Dn.predicate.termType==="BlankNode"&&(vt[Dn.predicate.value]=!0),Dn.object.termType==="BlankNode"&&(vt[Dn.object.value]=!0);for(const Pn of Object.keys(vt)){if(Ot[Pn])throw new Error("Detected reuse blank node across different INSERT DATA clauses");Ot[Pn]=!0}}}return K[Z-1];case 2:this.$={...K[Z-1],...K[Z],type:"query"};break;case 4:Rt.base=kf(K[Z]);break;case 5:Rt.prefixes||(Rt.prefixes={}),K[Z-1]=K[Z-1].substr(0,K[Z-1].length-1),K[Z]=kf(K[Z]),Rt.prefixes[K[Z-1]]=K[Z];break;case 6:this.$={...K[Z-3],...bc(K[Z-2]),...K[Z-1],...K[Z]};break;case 7:if(!Rt.skipValidation&&(l3(K[Z-3].variables.map(Jt=>c3(Jt.expression))).some(Jt=>Jt.aggregation==="count"&&!(Jt.expression instanceof Sy))||K[Z].group)){for(const Jt of K[Z-3].variables)if(Jt.termType==="Variable"){if(!K[Z].group||!K[Z].group.map(vt=>Ul(vt)).includes(Ul(Jt)))throw Error("Projection of ungrouped variable (?"+Ul(Jt)+")")}else if(c3(Jt.expression).length===0){const vt=J$(Jt.expression);for(const Pn of vt)if(!K[Z].group||!K[Z].group.map||!K[Z].group.map(Dn=>Ul(Dn)).includes(Ul(Pn)))throw Error("Use of ungrouped variable in projection of operation (?"+Ul(Pn)+")")}}const ql=K[Z-1].where.filter(Ot=>Ot.type==="query");if(ql.length>0){const Ot=K[Z-3].variables.filter(vt=>vt.variable&&vt.variable.value).map(vt=>vt.variable.value),Jt=l3(ql.map(vt=>vt.variables)).map(vt=>vt.value||vt.variable.value);for(const vt of Ot)if(Jt.indexOf(vt)>=0)throw Error("Target id of 'AS' (?"+vt+") already used in subquery")}this.$=Kr(K[Z-3],bc(K[Z-2]),K[Z-1],K[Z]);break;case 8:this.$=Kr({queryType:"CONSTRUCT",template:K[Z-3]},bc(K[Z-2]),K[Z-1],K[Z]);break;case 9:this.$=Kr({queryType:"CONSTRUCT",template:K[Z-2]=K[Z-2]?K[Z-2].triples:[]},bc(K[Z-5]),{where:[{type:"bgp",triples:Fl([],K[Z-2])}]},K[Z]);break;case 10:this.$=Kr({queryType:"DESCRIBE",variables:K[Z-3]==="*"?[new Sy]:K[Z-3]},bc(K[Z-2]),K[Z-1],K[Z]);break;case 11:this.$=Kr({queryType:"ASK"},bc(K[Z-2]),K[Z-1],K[Z]);break;case 12:this.$=Kr(K[Z-1],{variables:[new Sy]});break;case 13:const p3=K[Z].map(Ot=>Ot.value||Ot.variable.value),Ry=Y$(p3);if(Ry.length>0)throw Error("Two or more of the resulting columns have the same name (?"+Ry[0]+")");this.$=Kr(K[Z-1],{variables:K[Z]});break;case 14:this.$=Kr({queryType:"SELECT"},K[Z]&&(K[Z-1]=ui(K[Z]),K[Z]={},K[Z][K[Z-1]]=!0,K[Z]));break;case 16:case 27:this.$=Ll(K[Z-3],{variable:K[Z-1]});break;case 17:case 18:this.$=Kr(K[Z-3],K[Z-2],K[Z-1],K[Z],{type:"query"});break;case 19:case 58:this.$={iri:K[Z],named:!!K[Z-1]};break;case 20:this.$={where:K[Z].patterns};break;case 21:this.$=Kr(K[Z-1],K[Z]);break;case 22:this.$=Kr(K[Z-2],K[Z-1],K[Z]);break;case 23:this.$={group:K[Z]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=Ll(K[Z]);break;case 26:this.$=Ll(K[Z-1]);break;case 29:this.$={having:K[Z]};break;case 30:this.$={order:K[Z]};break;case 32:this.$=Ll(K[Z],{descending:!0});break;case 35:this.$={limit:$l(K[Z])};break;case 36:this.$={offset:$l(K[Z])};break;case 37:this.$={limit:$l(K[Z-2]),offset:$l(K[Z])};break;case 38:this.$={limit:$l(K[Z]),offset:$l(K[Z-2])};break;case 39:case 43:this.$={type:"values",values:K[Z]};break;case 40:case 84:this.$=K[Z-1].map(Ot=>({[K[Z-3]]:Ot}));break;case 41:case 85:this.$=K[Z-1].map(()=>({}));break;case 42:case 86:var uu=K[Z-4].length;K[Z-4]=K[Z-4].map(n3),this.$=K[Z-1].map(function(Ot){if(Ot.length!==uu)throw Error("Inconsistent VALUES length");for(var Jt={},vt=0;vt<uu;vt++)Jt["?"+K[Z-4][vt].value]=Ot[vt];return Jt});break;case 44:case 65:case 100:case 126:case 175:this.$=K[Z-1];break;case 45:this.$={type:"update",updates:yc(K[Z-2],K[Z-1])};break;case 46:this.$=Kr({type:"load",silent:!!K[Z-2],source:K[Z-1]},K[Z]&&{destination:K[Z]});break;case 47:this.$={type:ui(K[Z-2]),silent:!!K[Z-1],graph:K[Z]};break;case 48:this.$={type:ui(K[Z-4]),silent:!!K[Z-3],source:K[Z-2],destination:K[Z]};break;case 49:this.$={type:"create",silent:!!K[Z-2],graph:{type:"graph",name:K[Z]}};break;case 50:this.$={updateType:"insert",insert:hI(K[Z])};break;case 51:this.$={updateType:"delete",delete:h3(hI(K[Z]))};break;case 52:this.$={updateType:"deletewhere",delete:h3(K[Z])};break;case 53:this.$={updateType:"insertdelete",...K[Z-4],...K[Z-3],...bc(K[Z-2],"using"),where:K[Z].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=K[Z];break;case 55:this.$={delete:h3(K[Z-1]),insert:K[Z]||[]};break;case 56:this.$={delete:[],insert:K[Z]};break;case 59:this.$={graph:K[Z]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:K[Z]};break;case 64:this.$={[ui(K[Z])]:!0};break;case 66:this.$=K[Z-1]?_s(K[Z],[K[Z-1]]):_s(K[Z]);break;case 67:var Oy=Kr(K[Z-3]||{triples:[]},{type:"graph",name:K[Z-5]});this.$=K[Z]?[Oy,K[Z]]:[Oy];break;case 68:case 73:this.$={type:"bgp",triples:_s(K[Z-2],[K[Z-1]])};break;case 69:this.$={type:"group",patterns:[K[Z-1]]};break;case 70:for(const Ot of K[Z-1].filter(Jt=>Jt.type==="bind")){const Jt=K[Z-1].indexOf(Ot),vt=new Set;for(const Pn of K[Z-1].slice(0,Jt))(Pn.type==="group"||Pn.type==="bgp")&&dI(Pn).forEach(Dn=>vt.add(Dn));if(vt.has(Ot.variable.value))throw Error("Variable used to bind is already bound (?"+Ot.variable.value+")")}this.$={type:"group",patterns:K[Z-1]};break;case 71:this.$=K[Z-1]?_s([K[Z-1]],K[Z]):_s(K[Z]);break;case 72:this.$=K[Z]?[K[Z-2],K[Z]]:K[Z-2];break;case 75:this.$=Kr(K[Z],{type:"optional"});break;case 76:this.$=Kr(K[Z],{type:"minus"});break;case 77:this.$=Kr(K[Z],{type:"graph",name:K[Z-1]});break;case 78:this.$=Kr(K[Z],{type:"service",name:K[Z-1],silent:!!K[Z-2]});break;case 79:this.$={type:"filter",expression:K[Z]};break;case 80:this.$={type:"bind",variable:K[Z-1],expression:K[Z-3]};break;case 89:this.$=Gf(K[Z]);break;case 90:this.$=void 0;break;case 91:this.$=K[Z-1].length?{type:"union",patterns:_s(K[Z-1].map(a3),[a3(K[Z])])}:K[Z];break;case 95:this.$={...K[Z],function:K[Z-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:yc(K[Z-2],K[Z-1]),distinct:!!K[Z-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=yc(K[Z-2],K[Z-1]);break;case 101:this.$=_s(K[Z-2],[K[Z-1]]);break;case 102:case 112:this.$=f3(K[Z].map(Ot=>Kr(lo(K[Z-1]),Ot)));break;case 103:this.$=f3(Fl(K[Z].map(Ot=>Kr(lo(K[Z-1].entity),Ot)),K[Z-1].triples));break;case 105:this.$=_s([K[Z-1]],K[Z]);break;case 106:this.$=_s(K[Z]);break;case 107:this.$=u3(K[Z-1],K[Z]);break;case 109:case 237:this.$=Rt.factory.namedNode(q$);break;case 110:case 118:this.$=yc(K[Z-1],K[Z]);break;case 111:this.$=K[Z]?{annotation:K[Z],object:K[Z-1]}:K[Z-1];break;case 113:this.$=K[Z]?f3(Fl(K[Z].map(Ot=>Kr(lo(K[Z-1].entity),Ot)),K[Z-1].triples)):K[Z-1].triples;break;case 114:this.$=u3(...K[Z-1],K[Z]);break;case 116:this.$=u3(...K[Z]);break;case 117:case 159:case 163:this.$=[K[Z-1],K[Z]];break;case 119:this.$=K[Z]?{object:K[Z-1],annotation:K[Z]}:K[Z-1];break;case 120:this.$=K[Z-1].length?Bl("|",yc(K[Z-1],K[Z])):K[Z];break;case 121:this.$=K[Z-1].length?Bl("/",yc(K[Z-1],K[Z])):K[Z];break;case 122:this.$=K[Z]?Bl(K[Z],[K[Z-1]]):K[Z-1];break;case 123:this.$=K[Z-1]?Bl(K[Z-1],[K[Z]]):K[Z];break;case 125:case 131:this.$=Bl(K[Z-1],[K[Z]]);break;case 129:this.$=Bl("|",yc(K[Z-2],K[Z-1]));break;case 132:case 134:this.$=X$(K[Z-1]);break;case 133:case 135:this.$=K$(K[Z-1]);break;case 140:this.$={entity:K[Z],triples:[]};break;case 145:this.$=n3(K[Z]);break;case 149:this.$=Rt.factory.namedNode(nI);break;case 151:case 153:case 158:case 162:this.$=i3(K[Z-1],K[Z]);break;case 152:this.$=["||",K[Z]];break;case 154:this.$=["&&",K[Z]];break;case 156:this.$=In(K[Z-1],[K[Z-2],K[Z]]);break;case 157:this.$=In(K[Z-2]?"notin":"in",[K[Z-3],K[Z]]);break;case 160:this.$=["+",i3(K[Z-1],K[Z])];break;case 161:var Ay=gs(K[Z-1].value.replace("-",""),K[Z-1].datatype);this.$=["-",i3(Ay,K[Z])];break;case 164:this.$=In("UPLUS",[K[Z]]);break;case 165:this.$=In(K[Z-1],[K[Z]]);break;case 166:this.$=In("UMINUS",[K[Z]]);break;case 177:this.$=In(ui(K[Z-1]));break;case 178:this.$=In(ui(K[Z-3]),[K[Z-1]]);break;case 179:this.$=Gf(In(ui(K[Z-3]),[K[Z-1]]));break;case 180:this.$=In(ui(K[Z-5]),[K[Z-3],K[Z-1]]);break;case 181:this.$=In(ui(K[Z-7]),[K[Z-5],K[Z-3],K[Z-1]]);break;case 182:this.$=Gf(In(ui(K[Z-7]),[K[Z-5],K[Z-3],K[Z-1]]));break;case 183:this.$=In(ui(K[Z-1]),K[Z]);break;case 184:this.$=In("bound",[n3(K[Z-1])]);break;case 185:this.$=In(K[Z-1],[]);break;case 186:this.$=In(K[Z-3],[K[Z-1]]);break;case 187:this.$=In(K[Z-2]?"notexists":"exists",[a3(K[Z])]);break;case 188:case 189:this.$=Ll(K[Z-1],{type:"aggregate",aggregation:ui(K[Z-4]),distinct:!!K[Z-2]});break;case 190:this.$=Ll(K[Z-2],{type:"aggregate",aggregation:ui(K[Z-5]),distinct:!!K[Z-3],separator:typeof K[Z-1]=="string"?K[Z-1]:" "});break;case 192:this.$=gs(K[Z]);break;case 193:this.$=Q$(K[Z-1],ui(K[Z].substr(1)));break;case 194:this.$=gs(K[Z-2],K[Z]);break;case 195:case 204:this.$=gs(K[Z],iI);break;case 196:case 205:this.$=gs(K[Z],aI);break;case 197:case 206:this.$=gs(ui(K[Z]),sI);break;case 200:this.$=gs(K[Z].toLowerCase(),k$);break;case 201:this.$=gs(K[Z].substr(1),iI);break;case 202:this.$=gs(K[Z].substr(1),aI);break;case 203:this.$=gs(K[Z].substr(1).toLowerCase(),sI);break;case 207:case 208:this.$=lI(K[Z],1);break;case 209:case 210:this.$=lI(K[Z],3);break;case 211:this.$=Rt.factory.namedNode(kf(K[Z]));break;case 213:var xy=K[Z].indexOf(":"),Jr=K[Z].substr(0,xy),ms=Rt.prefixes[Jr];if(!ms)throw new Error("Unknown prefix: "+Jr);var _c=kf(ms+K[Z].substr(xy+1));this.$=Rt.factory.namedNode(_c);break;case 214:if(K[Z]=K[Z].substr(0,K[Z].length-1),!(K[Z]in Rt.prefixes))throw new Error("Unknown prefix: "+K[Z]);var _c=kf(Rt.prefixes[K[Z]]);this.$=Rt.factory.namedNode(_c);break;case 215:this.$=Qf(K[Z].replace(/^(_:)/,""));break;case 216:this.$=Qf();break;case 217:case 218:case 232:this.$=Gf(s3(K[Z-3],K[Z-2],K[Z-1]));break;case 230:case 231:this.$=Gf(K[Z-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:K[Z-1].push(K[Z]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[K[Z]];break;case 308:K[Z-3].push(K[Z-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:K[Z-2].push(K[Z-1]);break}},table:[t(e,r,{3:1,4:2,10:3}),{1:[3]},t(n,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:a,16:a,45:a,197:a,224:a,229:a,308:a,24:[1,13],32:[1,14],36:[1,15],41:s}),t([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:o},{6:[2,239]},t(u,[2,411],{216:28,217:29}),t(c,[2,249],{18:30}),t(c,[2,251],{22:31}),t(l,[2,255],{25:32,27:33,29:[1,34]}),{13:d,16:f,33:35,39:[1,37],44:39,55:40,87:h,139:38,307:43,308:p,323:36},t(c,[2,267],{37:46}),t(b,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:_,87:h},t(E,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),t(e,[2,248]),t(e,[2,245]),t(e,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},t([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),t(w,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:O,29:A,52:84,53:T,56:85},{19:88,28:O,29:A,52:89,53:T,56:85},t(c,[2,253],{26:90}),{28:[1,91],52:92,53:T},t(I,[2,385],{181:93,182:94,183:95,31:[2,383]}),t(D,[2,263],{34:96}),t(D,[2,261],{44:39,55:40,307:43,139:97,13:d,16:f,87:h,308:p}),t(D,[2,262]),t(U,[2,259]),t(H,[2,143]),t(H,[2,144]),t([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),t(N,[2,211]),t(N,[2,212]),t(N,[2,213]),t(N,[2,214]),{19:98,28:O,29:A,52:99,53:T,56:85},{6:[2,309],99:100,193:[1,101]},t(R,[2,311],{101:102,328:[1,103]}),t(F,[2,317],{104:104,328:[1,105]}),t(X,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:ne,114:110},{29:ne,114:112},{29:ne,114:113},{118:114,123:[1,115],125:116,126:$},t(C,[2,315]),t(C,[2,316]),t(Q,[2,319]),t(Q,[2,320]),t(Q,[2,321]),t(b,[2,327]),{13:d,16:f,55:118,307:43,308:p},t(c,[2,12]),t(c,[2,13],{44:66,43:119,45:_,87:h}),t(se,[2,269]),t(se,[2,15]),{13:d,16:f,44:136,45:ie,46:120,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(E,[2,14]),t(E,[2,274]),t(E,[2,271]),t(E,[2,272]),t(e,[2,4]),{13:[1,177]},t(Ue,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},t(u,[2,410]),t([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:d,16:f,45:[1,193],55:194,197:Ge,219:189,220:190,223:191,224:[1,192],307:43,308:p},t(w,[2,419]),t(We,lt,{20:196,59:197,69:198,70:Wr}),t(c,[2,250]),{29:br,57:200},t(R,[2,279],{54:202,327:[1,203]}),{29:[2,282]},t(Br,Qt,{23:204,58:205,62:206,63:_r}),t(c,[2,252]),{19:208,28:O,29:A,52:209,53:T,56:85},{29:[1,210]},t(l,[2,256]),{31:[1,211]},{31:[2,384]},{13:d,16:f,44:215,45:Pr,55:220,82:be,87:h,89:kr,145:212,172:221,185:213,187:214,231:xn,236:216,237:222,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,309:Et,310:B,311:217,312:re},t(Se,[2,265],{56:85,35:227,52:228,19:229,28:O,29:A,53:T}),t(U,[2,260]),t(Br,Qt,{58:205,62:206,23:230,63:_r}),t(c,[2,268]),{6:[2,45]},t(e,r,{10:3,4:231}),{13:d,16:f,55:232,307:43,308:p},t(R,[2,312]),{105:233,112:Fe,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},t(F,[2,318]),t(R,Ae,{108:240,133:242,112:ze,132:De}),t(X,[2,323]),{112:[1,244]},{112:[2,325]},t(Be,[2,50]),t(I,Ye,{135:245,136:246,143:247,144:248,31:Pt,112:Pt}),t(Be,[2,51]),t(Be,[2,52]),t(at,[2,328],{119:249}),{29:ne,114:250},t(at,[2,56]),{29:ne,114:251},t(b,[2,59]),t(se,[2,270]),{47:[1,252]},t(qe,[2,150]),t(ys,[2,428],{240:253}),t(ke,[2,430],{244:254}),t(ke,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),t(bn,[2,440],{252:264}),t(gr,[2,448],{260:265}),{13:d,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:be,87:h,172:135,255:154,257:155,264:266,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{13:d,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:be,87:h,172:135,255:154,257:155,264:267,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{13:d,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:be,87:h,172:135,255:154,257:155,264:268,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(gr,[2,167]),t(gr,[2,168]),t(gr,[2,169]),t(gr,[2,170],{176:269,45:mr,89:Pi}),t(gr,[2,171]),t(gr,[2,172]),t(gr,[2,173]),t(gr,[2,174]),{13:d,16:f,44:136,45:ie,46:272,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(wt,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:ha,89:Hi,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},t(ir,[2,192],{292:[1,286],293:[1,287]}),t(ir,[2,195]),t(ir,[2,196]),t(ir,[2,197]),t(ir,[2,198]),t(ir,[2,199]),t(ir,[2,200]),{13:d,16:f,44:39,55:40,82:be,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},t(io,[2,452]),t(io,[2,453]),t(io,[2,454]),t(io,[2,455]),t(io,[2,456]),{279:[2,458]},t(au,[2,207]),t(au,[2,208]),t(au,[2,209]),t(au,[2,210]),t(ir,[2,201]),t(ir,[2,202]),t(ir,[2,203]),t(ir,[2,204]),t(ir,[2,205]),t(ir,[2,206]),t(e,[2,5]),t(Xr,[2,297],{88:295}),t(Di,[2,299],{90:296}),{48:[1,297],87:[1,298]},t(sn,[2,301]),t(Ue,[2,43]),t(Ue,[2,82]),t(Ue,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},t(u,[2,412]),t(ki,[2,123]),t(ki,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),t(on,[2,124]),{13:d,16:f,45:[1,311],55:194,89:[1,310],197:Ge,223:312,225:308,226:309,229:Pa,307:43,308:p},t(u,a,{215:10,214:314}),t(on,[2,236]),t(on,[2,237]),t(Zr,[2,6]),t(bs,[2,287],{60:315,72:316,73:[1,317]}),t(We,[2,286]),{13:d,16:f,45:ie,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,307:43,308:p,346:x,347:z,348:ue,349:ge,350:we,351:Me},t([6,31,63,70,73,81,83,85],[2,20]),t(I,Da,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:ai,31:ai,85:ai,112:ai,159:ai,160:ai,161:ai,163:ai,164:ai,41:s}),{13:d,16:f,55:331,307:43,308:p},t(R,[2,280]),t(Zr,[2,7]),t(We,lt,{59:197,69:198,20:332,70:Wr}),t(Br,[2,284]),{64:[1,333]},t(Br,Qt,{58:205,62:206,23:334,63:_r}),t(c,[2,254]),t(I,Ye,{144:248,30:335,143:336,31:[2,257]}),t(c,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:d,16:f,44:39,55:40,87:h,139:342,186:339,190:340,195:341,197:qn,307:43,308:p},t(su,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:d,16:f,87:h,197:qn,308:p}),t(Na,[2,227]),t(Na,[2,228]),t(Na,[2,229]),{13:d,16:f,44:215,45:Pr,55:220,82:be,87:h,89:kr,172:221,185:351,187:350,200:348,230:347,231:xn,234:349,236:216,237:222,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,309:Et,310:B,311:217,312:re},{13:d,16:f,44:39,55:40,87:h,139:342,186:352,190:340,195:341,197:qn,307:43,308:p},t(Na,[2,146]),t(Na,[2,147]),t(Na,[2,148]),t(Na,[2,149]),{13:d,16:f,44:354,55:355,82:be,87:h,172:357,237:356,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,309:Et,310:B,311:358,312:re,313:353},t(jl,[2,215]),t(jl,[2,216]),t(Br,Qt,{58:205,62:206,23:359,63:_r}),t(D,[2,264]),t(Se,[2,266]),t(Zr,[2,11]),t(n,[2,308],{6:[2,310]}),t(Be,[2,313],{102:360,120:361,121:[1,362]}),t(Be,[2,47]),t(Be,[2,63]),t(Be,[2,64]),{13:d,16:f,55:363,307:43,308:p},t(Be,[2,336]),t(Be,[2,337]),t(Be,[2,338]),{109:[1,364]},t(te,[2,60]),{13:d,16:f,55:365,307:43,308:p},t(R,[2,335]),{13:d,16:f,55:366,307:43,308:p},{31:[1,367]},t(de,[2,341],{137:368}),t(de,[2,340]),{13:d,16:f,44:215,45:Pr,55:220,82:be,87:h,89:kr,145:369,172:221,185:213,187:214,231:xn,236:216,237:222,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,309:Et,310:B,311:217,312:re},{28:[1,370],127:371,128:[1,372]},t(at,[2,330],{124:373,125:374,126:$}),t(at,[2,57]),{44:375,87:h},t(qe,[2,151],{241:376,242:[1,377]}),t(ys,[2,153],{245:378,246:[1,379]}),{13:d,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,247:380,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{250:[1,381]},t(_e,[2,432]),t(_e,[2,433]),t(_e,[2,434]),t(_e,[2,435]),t(_e,[2,436]),t(_e,[2,437]),{250:[2,439]},t([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:G,298:Y,299:ee,300:ae,301:ve,302:me}),t(bn,[2,162],{261:388,262:389,39:$e,338:He}),t(gr,[2,164]),t(gr,[2,165]),t(gr,[2,166]),t(wt,[2,95]),t(wt,[2,96]),t(_e,[2,377],{177:392,325:[1,393]}),{48:[1,394]},t(wt,[2,177]),{13:d,16:f,44:136,45:ie,46:395,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{13:d,16:f,44:136,45:ie,46:396,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{13:d,16:f,44:136,45:ie,46:397,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{13:d,16:f,44:136,45:ie,46:398,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{13:d,16:f,44:136,45:ie,46:399,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(wt,[2,183]),t(wt,[2,98]),t(_e,[2,381],{180:400}),{87:[1,401]},t(wt,[2,185]),{13:d,16:f,44:136,45:ie,46:402,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{29:br,57:403},t(ir,[2,193]),{13:d,16:f,55:404,307:43,308:p},{13:d,16:f,44:39,55:40,87:h,139:342,195:405,197:qn,307:43,308:p},t(Xe,[2,233]),t(Xe,[2,234]),t(Xe,[2,235]),t(mt,[2,459],{281:406,325:[1,407]}),t(_e,[2,463],{284:408,325:[1,409]}),t(_e,[2,465],{286:410,325:[1,411]}),{13:d,16:f,31:[1,412],55:414,82:be,171:413,172:415,173:416,174:Bt,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:er},{31:[1,419],89:[1,420]},{29:[1,421]},t(sn,[2,302]),t(Xr,[2,367],{167:422}),t(Di,[2,369],{168:423}),{48:[1,424],87:[1,425]},t(sn,[2,371]),t(ki,[2,122]),t(ki,[2,417]),t(ki,[2,413]),t(ki,[2,414]),t(ki,[2,415]),t(on,[2,125]),t(on,[2,127]),t(on,[2,128]),t(Dr,[2,420],{227:426}),t(on,[2,130]),{13:d,16:f,55:194,197:Ge,223:427,307:43,308:p},{48:[1,428]},t(Kt,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),t(bs,[2,288]),{64:[1,433]},t(We,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:d,16:f,45:ie,268:ye,269:ce,270:xe,271:oe,273:J,274:le,276:pe,277:L,279:P,280:m,283:y,285:v,308:p,346:x,347:z,348:ue,349:ge,350:we,351:Me}),t(vr,[2,293]),t(si,[2,92]),t(si,[2,93]),t(si,[2,94]),{45:mr,89:Pi,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:O,29:A,56:85},{19:438,28:O,29:A,56:85},t(Vn,[2,355],{149:439}),t(Vn,[2,354]),{13:d,16:f,44:215,45:Rn,55:220,82:be,87:h,89:kr,156:440,172:221,185:441,203:442,231:oi,236:216,237:222,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,309:Et,310:B,311:217,312:re},t(D,[2,19]),t(Kt,[2,21]),{13:d,16:f,44:450,45:ja,55:323,65:445,66:446,67:447,68:448,87:h,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,307:43,308:p,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(Zr,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},t(I,[2,386],{31:[2,388]}),t(su,[2,102]),t(_n,[2,391],{191:452}),t(I,[2,395],{196:453,198:454}),t(I,[2,108]),t(I,[2,109]),t(su,[2,103]),t(su,[2,104]),t(su,[2,390]),{13:d,16:f,44:215,45:Pr,48:[1,455],55:220,82:be,87:h,89:kr,172:221,185:351,187:350,200:456,231:xn,234:349,236:216,237:222,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,309:Et,310:B,311:217,312:re},t(ao,[2,424]),t(dc,[2,136]),t(dc,[2,137]),t(fc,[2,140]),{232:[1,457]},{13:d,16:f,44:39,55:40,87:h,139:342,195:458,197:qn,307:43,308:p},t(Xe,[2,219]),t(Xe,[2,220]),t(Xe,[2,221]),t(Xe,[2,222]),t(Xe,[2,223]),t(Zr,[2,10]),t(Be,[2,46]),t(Be,[2,314]),{112:Fe,122:459},t(Be,[2,62]),t(R,Ae,{133:242,108:460,112:ze,132:De}),t(te,[2,61]),t(Be,[2,49]),t([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},t(de,[2,351],{146:463,335:[1,464]}),{29:br,57:465},t(at,[2,329]),t(R,[2,332],{129:466,327:[1,467]}),t(at,[2,55]),t(at,[2,331]),{48:[1,468]},t(ys,[2,429]),{13:d,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(ke,[2,431]),{13:d,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,243:470,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(ke,[2,156]),{45:ha,89:Hi,179:471},t(bn,[2,441]),{13:d,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,251:472,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(gr,[2,444],{256:473}),t(gr,[2,446],{258:474}),t(_e,[2,442]),t(_e,[2,443]),t(gr,[2,449]),{13:d,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,255:154,257:155,259:475,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(_e,[2,450]),t(_e,[2,451]),t(_e,[2,379],{178:476}),t(_e,[2,378]),t([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:d,16:f,44:136,45:ie,46:482,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{48:[1,483]},{48:[1,484]},t(wt,[2,187]),t(ir,[2,194]),{13:d,16:f,44:39,55:40,82:be,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,320:485},{13:d,16:f,39:[1,487],44:136,45:ie,46:488,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,282:486,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(mt,[2,460]),{13:d,16:f,44:136,45:ie,46:489,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(_e,[2,464]),{13:d,16:f,44:136,45:ie,46:490,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(_e,[2,466]),t(Ue,[2,40]),t(Xr,[2,298]),t(Gt,[2,87]),t(Gt,[2,88]),t(Gt,[2,89]),t(Gt,[2,90]),{13:d,16:f,55:492,82:be,172:493,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,311:494,312:re,315:491},t(Ue,[2,41]),t(Di,[2,300]),t(gn,[2,303],{92:495}),{13:d,16:f,31:[1,496],55:414,82:be,171:497,172:415,173:416,174:Bt,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:er},{31:[1,498],89:[1,499]},{29:[1,500]},t(sn,[2,372]),{13:d,16:f,48:[2,422],55:194,197:Ge,223:312,226:502,228:501,229:Pa,307:43,308:p},t(on,[2,131]),t(on,[2,126]),t(Kt,[2,22]),t(Kt,[2,290]),{82:[1,503]},{82:[1,504]},{13:d,16:f,44:510,45:ie,55:323,67:321,68:322,74:505,75:506,76:so,77:320,78:ou,79:509,87:h,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,307:43,308:p,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(vr,[2,294]),t(gy,[2,69]),t(gy,[2,70]),t(We,lt,{59:197,69:198,20:511,70:Wr}),t(Br,Qt,{58:205,62:206,23:512,63:_r}),{29:[2,375],31:[2,71],84:522,85:o,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},t(Vn,[2,363],{157:524,335:[1,525]}),t(u,a,{215:10,202:526,205:527,208:528,214:529,44:530,87:h}),t(my,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:a,16:a,45:a,197:a,224:a,229:a,308:a,87:h}),{13:d,16:f,44:215,45:Rn,55:220,82:be,87:h,89:kr,172:221,185:351,203:536,212:534,231:oi,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,309:Et,310:B,311:217,312:re},t(u,a,{215:10,205:527,208:528,214:529,44:530,202:537,87:h}),t(Br,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:d,16:f,45:ja,87:h,268:ye,269:ce,270:xe,271:oe,273:J,274:le,276:pe,277:L,279:P,280:m,283:y,285:v,308:p,346:x,347:z,348:ue,349:ge,350:we,351:Me}),t(hc,[2,291]),t(hc,[2,24]),t(hc,[2,25]),{13:d,16:f,44:136,45:ie,46:539,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(hc,[2,28]),t(Br,Qt,{58:205,62:206,23:540,63:_r}),t([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),t(_n,[2,107]),{13:d,16:f,44:215,45:Pr,55:220,82:be,87:h,89:kr,172:221,185:351,187:350,199:543,200:544,231:xn,234:349,236:216,237:222,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,309:Et,310:B,311:217,312:re},t(XR,[2,132]),t(ao,[2,425]),t(XR,[2,133]),{13:d,16:f,44:354,55:355,82:be,87:h,172:357,237:356,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,309:Et,310:B,311:358,312:re,313:545},t(Be,[2,54]),t(Be,[2,48]),t(de,[2,342]),{13:d,16:f,44:39,55:40,87:h,139:546,307:43,308:p},t(de,[2,68]),t(I,[2,350],{31:KR,112:KR}),t(Be,[2,53]),{13:d,16:f,55:547,307:43,308:p},t(R,[2,333]),t(se,[2,16]),t(ys,[2,152]),t(ke,[2,154]),t(ke,[2,157]),t(bn,[2,159]),t(bn,[2,160],{262:389,261:548,39:$e,338:He}),t(bn,[2,161],{262:389,261:549,39:$e,338:He}),t(gr,[2,163]),{13:d,16:f,44:136,45:ie,46:550,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(wt,[2,178]),t(wt,[2,179]),{13:d,16:f,44:136,45:ie,46:551,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{13:d,16:f,44:136,45:ie,46:552,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{13:d,16:f,44:136,45:ie,46:553,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{48:[1,554],272:[1,555]},t(wt,[2,184]),t(wt,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:d,16:f,55:194,197:Ge,223:562,307:43,308:p},t(t3,[2,224]),t(t3,[2,225]),t(t3,[2,226]),{31:[1,563],45:JR,94:564},t(Ue,[2,84]),t(Xr,[2,368]),t(Ue,[2,85]),t(Di,[2,370]),t(gn,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},t(Kt,[2,35],{83:[1,569]}),t(Kt,[2,36],{81:[1,570]}),t(bs,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:d,16:f,45:ie,76:so,78:ou,87:h,268:ye,269:ce,270:xe,271:oe,273:J,274:le,276:pe,277:L,279:P,280:m,283:y,285:v,308:p,346:x,347:z,348:ue,349:ge,350:we,351:Me}),t(Cl,[2,295]),{45:ie,77:572},{45:ie,77:573},t(Cl,[2,33]),t(Cl,[2,34]),{31:[2,275],50:574,84:575,85:o},{31:[2,277],51:576,84:577,85:o},t(Vn,[2,356]),t(YR,[2,357],{152:578,335:[1,579]}),t(oo,[2,74]),{29:br,57:580},{29:br,57:581},{13:d,16:f,44:39,55:40,87:h,139:582,307:43,308:p},t(ZR,[2,365],{162:583,328:[1,584]}),{13:d,16:f,45:ie,55:323,67:321,68:322,77:320,79:585,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,307:43,308:p,346:x,347:z,348:ue,349:ge,350:we,351:Me},{45:[1,586]},t(oo,[2,81]),{29:br,57:587},t(Vn,[2,73]),t(I,[2,362],{29:uo,31:uo,85:uo,112:uo,159:uo,160:uo,161:uo,163:uo,164:uo}),t(my,[2,112]),t(Ml,[2,401],{206:588}),t(I,[2,405],{209:589,210:590}),t(I,[2,403]),t(I,[2,404]),t(my,[2,113]),t(my,[2,400]),{13:d,16:f,44:215,45:Rn,48:[1,591],55:220,82:be,87:h,89:kr,172:221,185:351,203:536,212:592,231:oi,234:535,236:216,237:222,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,309:Et,310:B,311:217,312:re},t(ao,[2,426]),t(fc,[2,138]),t(fc,[2,139]),{232:[1,593]},t(hc,[2,292]),{47:[1,595],48:[1,594]},t(Zr,[2,9]),t(_n,[2,392]),t(_n,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:d,16:f,87:h,197:qn,308:p}),t(_n,[2,110],{272:[1,598]}),t(vy,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},t(at,[2,58]),t(gr,[2,445]),t(gr,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},t(wt,[2,99]),t(_e,[2,382]),t([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),t(wt,[2,188]),t(wt,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:d,16:f,55:492,82:be,172:493,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,311:494,312:re,315:611},t(Ue,[2,42]),t(gn,[2,304]),{13:d,16:f,55:414,82:be,95:612,171:613,172:415,173:416,174:Bt,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:er},{31:[1,614],45:JR,94:615},t(on,[2,129]),t(Dr,[2,421]),{82:[1,616]},{82:[1,617]},t(Cl,[2,296]),t(Cl,[2,31]),t(Cl,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},t(I,Da,{155:330,153:618,154:619,29:co,31:co,85:co,112:co,159:co,160:co,161:co,163:co,164:co}),t(YR,[2,358]),t(oo,[2,75]),t(oo,[2,76]),{29:br,57:620},{13:d,16:f,44:39,55:40,87:h,139:621,307:43,308:p},t(ZR,[2,366]),t(oo,[2,79]),{13:d,16:f,44:136,45:ie,46:622,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(oo,[2,91],{336:[1,623]}),t([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),t(Ml,[2,117]),{13:d,16:f,44:215,45:Rn,55:220,82:be,87:h,89:kr,172:221,185:351,203:536,211:626,212:627,231:oi,234:535,236:216,237:222,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,309:Et,310:B,311:217,312:re},t(Na,[2,134]),t(ao,[2,427]),t(Na,[2,135]),t(hc,[2,26]),{44:628,87:h},t(_n,[2,106]),t(_n,[2,394]),t(I,[2,396]),t(vy,[2,111]),t(vy,[2,398]),{13:d,16:f,44:39,55:40,87:h,139:342,186:629,190:340,195:341,197:qn,307:43,308:p},t(jl,[2,217]),t(I,Ye,{144:248,140:630,143:631,31:[2,343]}),t(wt,[2,97]),t(_e,[2,380]),t(wt,[2,180]),{13:d,16:f,44:136,45:ie,46:632,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},{13:d,16:f,44:136,45:ie,46:633,55:133,67:132,68:134,77:131,82:be,87:h,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Te,264:130,265:Ne,266:137,267:139,268:ye,269:ce,270:xe,271:oe,273:J,274:le,275:146,276:pe,277:L,278:149,279:P,280:m,283:y,285:v,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:S,346:x,347:z,348:ue,349:ge,350:we,351:Me},t(wt,[2,190]),{290:[1,634]},{314:[1,635]},{13:d,16:f,48:[1,636],55:414,82:be,171:637,172:415,173:416,174:Bt,255:154,257:155,291:150,294:j,295:V,296:q,297:G,298:Y,299:ee,300:ae,301:ve,302:me,303:Ee,304:k,305:W,306:M,307:43,308:p,312:er},t(eI,[2,305]),t(Ue,[2,86]),t(gn,[2,374]),t(Kt,[2,37]),t(Kt,[2,38]),t(Vn,[2,72]),t(Vn,[2,360]),t(oo,[2,77]),{29:br,57:638},{47:[1,639]},{29:[2,376]},t(Ml,[2,402]),t(Ml,[2,115],{215:10,208:528,214:529,44:530,205:640,13:a,16:a,45:a,197:a,224:a,229:a,308:a,87:h}),t(Ml,[2,118],{272:[1,641]}),t(wy,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:Ee,304:k,305:W,306:M},t(Gt,[2,218]),t(gn,[2,44]),t(eI,[2,306]),t(oo,[2,78]),{44:651,87:h},t(Ml,[2,116]),t(I,[2,406]),t(wy,[2,119]),t(wy,[2,408]),t(u,a,{215:10,205:527,208:528,214:529,44:530,202:652,87:h}),t(hc,[2,27]),t(vy,[2,230]),t(tI,[2,345],{141:653,335:[1,654]}),t(wt,[2,181]),t(wt,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},t(I,Ye,{144:248,142:657,143:658,31:rI,112:rI}),t(tI,[2,346]),t(oo,[2,80]),t(wy,[2,231]),t(de,[2,67]),t(de,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:function(Oe,Pe){if(Pe.recoverable)this.trace(Oe);else{var Le=new Error(Oe);throw Le.hash=Pe,Le}},parse:function(Oe){var Pe=this,Le=[0],nt=[null],ot=[],K=this.table,Qi="",Z=0,uu=0,Oy=2,Ay=1,xy=ot.slice.call(arguments,1),Jr=Object.create(this.lexer),ms={yy:{}};for(var _c in this.yy)Object.prototype.hasOwnProperty.call(this.yy,_c)&&(ms.yy[_c]=this.yy[_c]);Jr.setInput(Oe,ms.yy),ms.yy.lexer=Jr,ms.yy.parser=this,typeof Jr.yylloc>"u"&&(Jr.yylloc={});var ql=Jr.yylloc;ot.push(ql);var p3=Jr.options&&Jr.options.ranges;typeof ms.yy.parseError=="function"?this.parseError=ms.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Ry=function(){var Vl;return Vl=Jr.lex()||Ay,typeof Vl!="number"&&(Vl=Pe.symbols_[Vl]||Vl),Vl},Ot,Jt,vt,Pn,Dn={},Iy,fo,pI,Py;;){if(Jt=Le[Le.length-1],this.defaultActions[Jt]?vt=this.defaultActions[Jt]:((Ot===null||typeof Ot>"u")&&(Ot=Ry()),vt=K[Jt]&&K[Jt][Ot]),typeof vt>"u"||!vt.length||!vt[0]){var y3="";Py=[];for(Iy in K[Jt])this.terminals_[Iy]&&Iy>Oy&&Py.push("'"+this.terminals_[Iy]+"'");Jr.showPosition?y3="Parse error on line "+(Z+1)+`:
`+Jr.showPosition()+`
Expecting `+Py.join(", ")+", got '"+(this.terminals_[Ot]||Ot)+"'":y3="Parse error on line "+(Z+1)+": Unexpected "+(Ot==Ay?"end of input":"'"+(this.terminals_[Ot]||Ot)+"'"),this.parseError(y3,{text:Jr.match,token:this.terminals_[Ot]||Ot,line:Jr.yylineno,loc:ql,expected:Py})}if(vt[0]instanceof Array&&vt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Jt+", token: "+Ot);switch(vt[0]){case 1:Le.push(Ot),nt.push(Jr.yytext),ot.push(Jr.yylloc),Le.push(vt[1]),Ot=null,uu=Jr.yyleng,Qi=Jr.yytext,Z=Jr.yylineno,ql=Jr.yylloc;break;case 2:if(fo=this.productions_[vt[1]][1],Dn.$=nt[nt.length-fo],Dn._$={first_line:ot[ot.length-(fo||1)].first_line,last_line:ot[ot.length-1].last_line,first_column:ot[ot.length-(fo||1)].first_column,last_column:ot[ot.length-1].last_column},p3&&(Dn._$.range=[ot[ot.length-(fo||1)].range[0],ot[ot.length-1].range[1]]),Pn=this.performAction.apply(Dn,[Qi,uu,Z,ms.yy,vt[1],nt,ot].concat(xy)),typeof Pn<"u")return Pn;fo&&(Le=Le.slice(0,-1*fo*2),nt=nt.slice(0,-1*fo),ot=ot.slice(0,-1*fo)),Le.push(this.productions_[vt[1]][0]),nt.push(Dn.$),ot.push(Dn._$),pI=K[Le[Le.length-2]][Le[Le.length-1]],Le.push(pI);break;case 3:return!0}}return!0}},Sy=XA.Wildcard,Ty="http://www.w3.org/1999/02/22-rdf-syntax-ns#",q$=Ty+"type",V$=Ty+"first",H$=Ty+"rest",nI=Ty+"nil",Ey="http://www.w3.org/2001/XMLSchema#",iI=Ey+"integer",aI=Ey+"decimal",sI=Ey+"double",k$=Ey+"boolean",pc="",oI="",uI="";function ui(Re){return Re.toLowerCase()}function yc(Re,Oe){return Re.push(Oe),Re}function Fl(Re,Oe){return Re.push.apply(Re,Oe),Re}function Kr(Re){Re||(Re={});for(var Oe=1,Pe=arguments.length,Le;Oe<Pe&&(Le=arguments[Oe]||{});Oe++)for(var nt in Le)Re[nt]=Le[nt];return Re}function _s(){for(var Re=[],Oe=0,Pe=arguments.length;Oe<Pe;Oe++)Re=Re.concat.apply(Re,arguments[Oe]);return Re}function kf(Re){if(Re[0]==="<"&&(Re=Re.substring(1,Re.length-1)),/^[a-z]+:/i.test(Re))return Re;if(!Rt.base)throw new Error("Cannot resolve relative IRI "+Re+" because no base IRI was set.");switch(pc!==Rt.base&&(pc=Rt.base,oI=pc.replace(/[^\/:]*$/,""),uI=pc.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),Re[0]){case void 0:return pc;case"#":return pc+Re;case"?":return pc.replace(/(?:\?.*)?$/,Re);case"/":return uI+Re;default:return oI+Re}}function n3(Re){if(Re){var Oe=Re[0];if(Oe==="?"||Oe==="$")return Rt.factory.variable(Re.substr(1))}return Re}function In(Re,Oe){return{type:"operation",operator:Re,args:Oe||[]}}function Ll(Re,Oe){var Pe={expression:Re==="*"?new Sy:Re};if(Oe)for(var Le in Oe)Pe[Le]=Oe[Le];return Pe}function Bl(Re,Oe){return{type:"path",pathType:Re,items:Oe}}function i3(Re,Oe){for(var Pe=0,Le=Oe.length,nt;Pe<Le&&(nt=Oe[Pe]);Pe++)Re=In(nt[0],[Re,nt[1]]);return Re}function bc(Re,Oe){var Pe=[],Le=[],nt=Re.length,ot,K={};if(!nt)return null;for(var Qi=0;Qi<nt&&(ot=Re[Qi]);Qi++)(ot.named?Le:Pe).push(ot.iri);return K[Oe||"from"]={default:Pe,named:Le},K}function $l(Re){return parseInt(Re,10)}function a3(Re){return Re.type==="group"&&Re.patterns.length===1?Re.patterns[0]:Re}function gs(Re,Oe){return Oe&&Oe.termType!=="NamedNode"&&(Oe=Rt.factory.namedNode(Oe)),Rt.factory.literal(Re,Oe)}function Q$(Re,Oe){return Rt.factory.literal(Re,Oe)}function s3(Re,Oe,Pe){if(!("termType"in Oe))throw new Error("Nested triples cannot contain paths");return Rt.factory.quad(Re,Oe,Pe)}function lo(Re,Oe,Pe,Le){var nt={};return Re!=null&&(nt.subject=Re),Oe!=null&&(nt.predicate=Oe),Pe!=null&&(nt.object=Pe),Le!=null&&(nt.annotations=Le),nt}function Qf(Re){return typeof Re=="string"?Re.startsWith("e_")?Rt.factory.blankNode(Re):Rt.factory.blankNode("e_"+Re):Rt.factory.blankNode("g_"+cI++)}var cI=0;Rt._resetBlanks=function(){cI=0};var G$=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,z$={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},W$=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,o3=String.fromCharCode;function lI(Re,Oe){Re=Re.substring(Oe,Re.length-Oe);try{Re=Re.replace(G$,function(Pe,Le,nt,ot){var K;if(Le){if(K=parseInt(Le,16),isNaN(K))throw new Error;return o3(K)}else if(nt){if(K=parseInt(nt,16),isNaN(K))throw new Error;return K<65535?o3(K):o3(55296+((K-=65536)>>10),56320+(K&1023))}else{var Qi=z$[ot];if(!Qi)throw new Error;return Qi}})}catch{return""}if(W$.exec(Re))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+Re);return Re}function X$(Re){var Oe=Qf(),Pe=Oe,Le=[],nt,ot=[];Re.forEach(function(uu){Le.push(uu.entity),Fl(ot,uu.triples)});for(var K=0,Qi=0,Z=Le.length,nt=Array(Z*2);K<Z;)nt[Qi++]=lo(Pe,Rt.factory.namedNode(V$),Le[K]),nt[Qi++]=lo(Pe,Rt.factory.namedNode(H$),Pe=++K<Z?Qf():Rt.factory.namedNode(nI));return{entity:Oe,triples:Fl(nt,ot)}}function K$(Re){var Oe=Qf();return{entity:Oe,triples:Re.map(function(Pe){return Kr(lo(Oe),Pe)})}}function u3(Re,Oe,Pe){var Le=[],nt=[];return Oe.forEach(function(ot){let K=null;ot.annotation&&(K=ot.annotation,ot=ot.object),Le.push(lo(null,Re,ot.entity,K)),Fl(nt,ot.triples)}),_s(Le,Pe||[],nt)}function Ul(Re){return Re.variable?Re.variable.value:Re.value||Re.expression.value}function c3(Re){if(!Re)return[];if(Re.type==="aggregate")return[Re];if(Re.type==="operation"){const Oe=[];for(const Pe of Re.args)Oe.push(...c3(Pe));return Oe}return[]}function J$(Re){const Oe=new Set,Pe=function(Le){Le&&(Le.termType==="Variable"?Oe.add(Le):Le.type==="operation"&&Le.args.forEach(Pe))};return Pe(Re),Oe}function l3(Re,Oe=1,Pe=[]){for(const Le of Re)Oe>0&&Le instanceof Array?l3(Le,Oe-1,Pe):Pe.push(Le);return Pe}function d3(Re){return Re.termType==="Variable"}function dI(Re){if(Re.triples){const Oe=[];for(const Pe of Re.triples)d3(Pe.subject)&&Oe.push(Pe.subject.value),d3(Pe.predicate)&&Oe.push(Pe.predicate.value),d3(Pe.object)&&Oe.push(Pe.object.value);return Oe}else if(Re.patterns){const Oe=[];for(const Pe of Re.patterns)Oe.push(...dI(Pe));return Oe}return[]}function Y$(Re){const Oe=Re.slice().sort(),Pe=[];for(let Le=0;Le<Oe.length-1;Le++)Oe[Le+1]==Oe[Le]&&Pe.push(Oe[Le]);return Pe}function Gf(Re){if(!Rt.sparqlStar)throw new Error("SPARQL-star support is not enabled");return Re}function fI(Re,Oe,Pe){for(const Le of Oe){const nt=lo("subject"in Le?Le.subject:Re,Le.predicate,Le.object);Pe.push(nt),Le.annotations&&fI(s3(Re,Le.predicate,Le.object),Le.annotations,Pe)}}function f3(Re){if(Rt.sparqlStar){const Oe=[];return Re.forEach(Pe=>{const Le=lo(Pe.subject,Pe.predicate,Pe.object);Oe.push(Le),Pe.annotations&&fI(s3(Pe.subject,Pe.predicate,Pe.object),Pe.annotations,Oe)}),Oe}return Re}function hI(Re){for(const Oe of Re){if(Oe.type==="graph"&&Oe.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(Oe.type==="bgp"||Oe.type==="graph"){for(const Pe of Oe.triples)if(Pe.subject.termType==="Variable"||Pe.predicate.termType==="Variable"||Pe.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return Re}function h3(Re){for(const Oe of Re)if(Oe.type==="bgp"){for(const Pe of Oe.triples)if(Pe.subject.termType==="BlankNode"||Pe.predicate.termType==="BlankNode"||Pe.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return Re}var Z$=function(){var Re={EOF:1,parseError:function(Pe,Le){if(this.yy.parser)this.yy.parser.parseError(Pe,Le);else throw new Error(Pe)},setInput:function(Oe,Pe){return this.yy=Pe||this.yy||{},this._input=Oe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Oe=this._input[0];this.yytext+=Oe,this.yyleng++,this.offset++,this.match+=Oe,this.matched+=Oe;var Pe=Oe.match(/(?:\r\n?|\n).*/g);return Pe?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Oe},unput:function(Oe){var Pe=Oe.length,Le=Oe.split(/(?:\r\n?|\n)/g);this._input=Oe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Pe),this.offset-=Pe;var nt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Le.length-1&&(this.yylineno-=Le.length-1);var ot=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Le?(Le.length===nt.length?this.yylloc.first_column:0)+nt[nt.length-Le.length].length-Le[0].length:this.yylloc.first_column-Pe},this.options.ranges&&(this.yylloc.range=[ot[0],ot[0]+this.yyleng-Pe]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Oe){this.unput(this.match.slice(Oe))},pastInput:function(){var Oe=this.matched.substr(0,this.matched.length-this.match.length);return(Oe.length>20?"...":"")+Oe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Oe=this.match;return Oe.length<20&&(Oe+=this._input.substr(0,20-Oe.length)),(Oe.substr(0,20)+(Oe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Oe=this.pastInput(),Pe=new Array(Oe.length+1).join("-");return Oe+this.upcomingInput()+`
`+Pe+"^"},test_match:function(Oe,Pe){var Le,nt,ot;if(this.options.backtrack_lexer&&(ot={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ot.yylloc.range=this.yylloc.range.slice(0))),nt=Oe[0].match(/(?:\r\n?|\n).*/g),nt&&(this.yylineno+=nt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:nt?nt[nt.length-1].length-nt[nt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Oe[0].length},this.yytext+=Oe[0],this.match+=Oe[0],this.matches=Oe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Oe[0].length),this.matched+=Oe[0],Le=this.performAction.call(this,this.yy,this,Pe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Le)return Le;if(this._backtrack){for(var K in ot)this[K]=ot[K];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Oe,Pe,Le,nt;this._more||(this.yytext="",this.match="");for(var ot=this._currentRules(),K=0;K<ot.length;K++)if(Le=this._input.match(this.rules[ot[K]]),Le&&(!Pe||Le[0].length>Pe[0].length)){if(Pe=Le,nt=K,this.options.backtrack_lexer){if(Oe=this.test_match(Le,ot[K]),Oe!==!1)return Oe;if(this._backtrack){Pe=!1;continue}else return!1}else if(!this.options.flex)break}return Pe?(Oe=this.test_match(Pe,ot[nt]),Oe!==!1?Oe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Pe=this.next();return Pe||this.lex()},begin:function(Pe){this.conditionStack.push(Pe)},popState:function(){var Pe=this.conditionStack.length-1;return Pe>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Pe){return Pe=this.conditionStack.length-1-Math.abs(Pe||0),Pe>=0?this.conditionStack[Pe]:"INITIAL"},pushState:function(Pe){this.begin(Pe)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(Pe,Le,nt,ot){switch(nt){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(Le.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return Re}();r3.lexer=Z$;function Rt(){this.yy={}}return Rt.prototype=r3,r3.Parser=Rt,new Rt}(),lQ=cQ,dQ="http://www.w3.org/2001/XMLSchema#integer",fQ="http://www.w3.org/2001/XMLSchema#string";function Ir(t){this._options=t=t||{};var e=t.prefixes||{};this._prefixByIri={};var r=[];for(var n in e){var a=e[n];np(a)&&(this._prefixByIri[a]=n,r.push(a))}var s=r.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+s+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=t.sparqlStar,this._indent=np(t.indent)?t.indent:"  ",this._newline=np(t.newline)?t.newline:`
`,this._explicitDatatype=!!t.explicitDatatype}Ir.prototype.toQuery=function(t){var e="";return t.queryType&&(e+=t.queryType.toUpperCase()+" "),t.reduced&&(e+="REDUCED "),t.distinct&&(e+="DISTINCT "),t.variables?e+=Ji(t.variables,void 0,function(r){return Uu(r)?this.toEntity(r):"("+this.toExpression(r.expression)+" AS "+xb(r.variable)+")"},this)+" ":t.template&&(e+=this.group(t.template,!0)+this._newline),t.from&&(e+=this.graphs("FROM ",t.from.default)+this.graphs("FROM NAMED ",t.from.named)),t.where&&(e+="WHERE "+this.group(t.where,!0)+this._newline),t.updates&&(e+=Ji(t.updates,";"+this._newline,this.toUpdate,this)),t.group&&(e+="GROUP BY "+Ji(t.group,void 0,function(r){var n=Uu(r.expression)?this.toEntity(r.expression):"("+this.toExpression(r.expression)+")";return r.variable?"("+n+" AS "+xb(r.variable)+")":n},this)+this._newline),t.having&&(e+="HAVING ("+Ji(t.having,void 0,this.toExpression,this)+")"+this._newline),t.order&&(e+="ORDER BY "+Ji(t.order,void 0,function(r){var n="("+this.toExpression(r.expression)+")";return r.descending?"DESC "+n:n},this)+this._newline),t.offset&&(e+="OFFSET "+t.offset+this._newline),t.limit&&(e+="LIMIT "+t.limit+this._newline),t.values&&(e+=this.values(t)),e=this.baseAndPrefixes(t)+e,e.trim()};Ir.prototype.baseAndPrefixes=function(t){var e=t.base?"BASE <"+t.base+">"+this._newline:"",r="";for(var n in t.prefixes)(this._options.allPrefixes||this._usedPrefixes[n])&&(r+="PREFIX "+n+": <"+t.prefixes[n]+">"+this._newline);return e+r};Ir.prototype.toPattern=function(t){var e=t.type||t instanceof Array&&"array"||(t.subject&&t.predicate&&t.object?"triple":"");if(!(e in this))throw new Error("Unknown entry type: "+e);return this[e](t)};Ir.prototype.triple=function(t){return this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+"."};Ir.prototype.array=function(t){return Ji(t,this._newline,this.toPattern,this)};Ir.prototype.bgp=function(t){return this.encodeTriples(t.triples)};Ir.prototype.encodeTriples=function(t){if(!t.length)return"";for(var e=[],r=void 0,n=void 0,a=0;a<t.length;a++){var s=t[a];$c(s.subject,r)?$c(s.predicate,n)?e.push(","):(n=s.predicate,e.push(";"+this._newline,this._indent,this.toEntity(n))):(r&&e.push("."+this._newline),r=s.subject,n=s.predicate,e.push(this.toEntity(r)," ",this.toEntity(n))),e.push(" ",this.toEntity(s.object))}return e.push("."),e.join("")};Ir.prototype.graph=function(t){return"GRAPH "+this.toEntity(t.name)+" "+this.group(t)};Ir.prototype.graphs=function(t,e){return!e||e.length===0?"":Ji(e,"",function(r){return t+this.toEntity(r)+this._newline},this)};Ir.prototype.group=function(t,e){return t=e!==!0?this.array(t.patterns||t.triples):this.toPattern(t.type!=="group"?t:t.patterns),t.indexOf(this._newline)===-1?"{ "+t+" }":"{"+this._newline+this.indent(t)+this._newline+"}"};Ir.prototype.query=function(t){return this.toQuery(t)};Ir.prototype.filter=function(t){return"FILTER("+this.toExpression(t.expression)+")"};Ir.prototype.bind=function(t){return"BIND("+this.toExpression(t.expression)+" AS "+xb(t.variable)+")"};Ir.prototype.optional=function(t){return"OPTIONAL "+this.group(t)};Ir.prototype.union=function(t){return Ji(t.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)};Ir.prototype.minus=function(t){return"MINUS "+this.group(t)};Ir.prototype.values=function(t){var e=Object.keys(t.values.reduce(function(a,s){for(var o in s)a[o]=!0;return a},{})),r,n;return e.length===1?r=n="":(r="(",n=")"),"VALUES "+r+e.join(" ")+n+" {"+this._newline+Ji(t.values,this._newline,function(a){return"  "+r+Ji(e,void 0,function(s){return a[s]?this.toEntity(a[s]):"UNDEF"},this)+n},this)+this._newline+"}"};Ir.prototype.service=function(t){return"SERVICE "+(t.silent?"SILENT ":"")+this.toEntity(t.name)+" "+this.group(t)};Ir.prototype.toExpression=function(t){if(Uu(t))return this.toEntity(t);switch(t.type.toLowerCase()){case"aggregate":return t.aggregation.toUpperCase()+"("+(t.distinct?"DISTINCT ":"")+this.toExpression(t.expression)+(typeof t.separator=="string"?'; SEPARATOR = "'+t.separator.replace(sC,oC)+'"':"")+")";case"functioncall":return this.toEntity(t.function)+"("+Ji(t.args,", ",this.toExpression,this)+")";case"operation":var e=t.operator.toUpperCase(),r=t.args||[];switch(t.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(Uu(r[0])?this.toEntity(r[0]):"("+this.toExpression(r[0])+")")+" "+e+" "+(Uu(r[1])?this.toEntity(r[1]):"("+this.toExpression(r[1])+")");case"!":return"!("+this.toExpression(r[0])+")";case"uplus":return"+("+this.toExpression(r[0])+")";case"uminus":return"-("+this.toExpression(r[0])+")";case"notin":e="NOT IN";case"in":return this.toExpression(r[0])+" "+e+"("+(np(r[1])?r[1]:Ji(r[1],", ",this.toExpression,this))+")";case"notexists":e="NOT EXISTS";case"exists":return e+" "+this.group(r[0],!0);default:return e+"("+Ji(r,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+t.type)}};Ir.prototype.toEntity=function(t){if(Uu(t))switch(t.termType){case"Wildcard":return"*";case"Variable":return xb(t);case"BlankNode":return"_:"+t.value;case"Literal":var e=t.value||"",r=t.language||"",n=t.datatype;if(t='"'+e.replace(sC,oC)+'"',r)t+="@"+r;else if(n){if(!this._explicitDatatype)switch(n.value){case fQ:return t;case dQ:if(/^\d+$/.test(e))return e+" "}t+="^^"+this.encodeIRI(n.value)}return t;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return t.graph&&t.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(t.graph)+" { "+this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+" }  >>":"<< "+this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+" >>";default:return this.encodeIRI(t.value)}else{var a=t.items.map(this.toEntity,this),s=t.pathType;switch(s){case"^":case"!":return s+a[0];case"*":case"+":case"?":return"("+a[0]+s+")";default:return"("+a.join(s)+")"}}};var sC=/["\\\t\n\r\b\f]/g,oC=function(t){return hQ[t]},hQ={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};Ir.prototype.encodeIRI=function(t){var e=this._prefixRegex.exec(t);if(e){var r=this._prefixByIri[e[1]];return this._usedPrefixes[r]=!0,r+":"+e[2]}return"<"+t+">"};Ir.prototype.toUpdate=function(t){switch(t.type||t.updateType){case"load":return"LOAD"+(t.source?" "+this.toEntity(t.source):"")+(t.destination?" INTO GRAPH "+this.toEntity(t.destination):"");case"insert":return"INSERT DATA "+this.group(t.insert,!0);case"delete":return"DELETE DATA "+this.group(t.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(t.delete,!0);case"insertdelete":return(t.graph?"WITH "+this.toEntity(t.graph)+this._newline:"")+(t.delete.length?"DELETE "+this.group(t.delete,!0)+this._newline:"")+(t.insert.length?"INSERT "+this.group(t.insert,!0)+this._newline:"")+(t.using?this.graphs("USING ",t.using.default):"")+(t.using?this.graphs("USING NAMED ",t.using.named):"")+"WHERE "+this.group(t.where,!0);case"add":case"copy":case"move":return t.type.toUpperCase()+" "+(t.silent?"SILENT ":"")+(t.source.default?"DEFAULT":this.toEntity(t.source.name))+" TO "+this.toEntity(t.destination.name);case"create":case"clear":case"drop":return t.type.toUpperCase()+(t.silent?" SILENT ":" ")+(t.graph.default?"DEFAULT":t.graph.named?"NAMED":t.graph.all?"ALL":"GRAPH "+this.toEntity(t.graph.name));default:throw new Error("Unknown update query type: "+t.type)}};Ir.prototype.indent=function(t){return t.replace(/^/gm,this._indent)};function xb(t){return"?"+t.value}function np(t){return typeof t=="string"}function Uu(t){return typeof t.termType=="string"}function $c(t,e){if(!t||!Uu(t)||!e||!Uu(e)||t.termType!==e.termType)return!1;switch(t.termType){case"Literal":return t.value===e.value&&t.language===e.language&&$c(t.datatype,e.datatype);case"Quad":return $c(t.subject,e.subject)&&$c(t.predicate,e.predicate)&&$c(t.object,e.object)&&$c(t.graph,e.graph);default:return t.value===e.value}}function Ji(t,e,r,n){return t.map(r,n).join(np(e)?e:" ")}var pQ=function(e={}){return{stringify:function(r){var n=Object.create(e);return n.prefixes=r.prefixes,new Ir(n).toQuery(r)},createGenerator:function(){return new Ir(e)}}},ho=lQ.Parser,yQ=pQ,bQ=XA.Wildcard,{DataFactory:_Q}=ft,_0={Parser:function({prefixes:t,baseIRI:e,factory:r,sparqlStar:n,skipValidation:a,skipUngroupedVariableCheck:s,pathOnly:o}={}){var u={};for(var c in t||{})u[c]=t[c];var l=new ho;return l.parse=function(){return ho.base=e||"",ho.prefixes=Object.create(u),ho.factory=r||new _Q,ho.sparqlStar=!!n,ho.pathOnly=!!o,ho.skipValidation=!!a||!!s,ho.prototype.parse.apply(l,arguments)},l._resetBlanks=ho._resetBlanks,l},Generator:yQ,Wildcard:bQ},gQ=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),mQ=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vQ=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gQ(e,t,r);return mQ(e,t),e};Object.defineProperty(Tf,"__esModule",{value:!0});const rt=vQ(Sf),wQ=ft,SQ=Zt,TQ=_0;class EQ{constructor(e){this.dataFactory=e||new wQ.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(e,r=!0){return this.flattenMulti({type:rt.types.ALT,input:e},r)}createAsk(e){return{type:rt.types.ASK,input:e}}createBoundAggregate(e,r,n,a,s){const o=this.createAggregateExpression(r,n,a,s);return o.variable=e,o}createBgp(e){return{type:rt.types.BGP,patterns:e}}createConstruct(e,r){return{type:rt.types.CONSTRUCT,input:e,template:r}}createDescribe(e,r){return{type:rt.types.DESCRIBE,input:e,terms:r}}createDistinct(e){return{type:rt.types.DISTINCT,input:e}}createExtend(e,r,n){return{type:rt.types.EXTEND,input:e,variable:r,expression:n}}createFrom(e,r,n){return{type:rt.types.FROM,input:e,default:r,named:n}}createFilter(e,r){return{type:rt.types.FILTER,input:e,expression:r}}createGraph(e,r){return{type:rt.types.GRAPH,input:e,name:r}}createGroup(e,r,n){return{type:rt.types.GROUP,input:e,variables:r,aggregates:n}}createInv(e){return{type:rt.types.INV,path:e}}createJoin(e,r=!0){return this.flattenMulti({type:rt.types.JOIN,input:e},r)}createLeftJoin(e,r,n){return n?{type:rt.types.LEFT_JOIN,input:[e,r],expression:n}:{type:rt.types.LEFT_JOIN,input:[e,r]}}createLink(e){return{type:rt.types.LINK,iri:e}}createMinus(e,r){return{type:rt.types.MINUS,input:[e,r]}}createNop(){return{type:rt.types.NOP}}createNps(e){return{type:rt.types.NPS,iris:e}}createOneOrMorePath(e){return{type:rt.types.ONE_OR_MORE_PATH,path:e}}createOrderBy(e,r){return{type:rt.types.ORDER_BY,input:e,expressions:r}}createPath(e,r,n,a){return a?{type:rt.types.PATH,subject:e,predicate:r,object:n,graph:a}:{type:rt.types.PATH,subject:e,predicate:r,object:n,graph:this.dataFactory.defaultGraph()}}createPattern(e,r,n,a){const s=this.dataFactory.quad(e,r,n,a);return s.type=rt.types.PATTERN,s}createProject(e,r){return{type:rt.types.PROJECT,input:e,variables:r}}createReduced(e){return{type:rt.types.REDUCED,input:e}}createSeq(e,r=!0){return this.flattenMulti({type:rt.types.SEQ,input:e},r)}createService(e,r,n){return{type:rt.types.SERVICE,input:e,name:r,silent:!!n}}createSlice(e,r,n){return r=r||0,n!==void 0?{type:rt.types.SLICE,input:e,start:r,length:n}:{type:rt.types.SLICE,input:e,start:r}}createUnion(e,r=!0){return this.flattenMulti({type:rt.types.UNION,input:e},r)}createValues(e,r){return{type:rt.types.VALUES,variables:e,bindings:r}}createZeroOrMorePath(e){return{type:rt.types.ZERO_OR_MORE_PATH,path:e}}createZeroOrOnePath(e){return{type:rt.types.ZERO_OR_ONE_PATH,path:e}}createAggregateExpression(e,r,n,a){return a?{type:rt.types.EXPRESSION,expressionType:rt.expressionTypes.AGGREGATE,aggregator:e,expression:r,separator:a,distinct:n}:{type:rt.types.EXPRESSION,expressionType:rt.expressionTypes.AGGREGATE,aggregator:e,expression:r,distinct:n}}createExistenceExpression(e,r){return{type:rt.types.EXPRESSION,expressionType:rt.expressionTypes.EXISTENCE,not:e,input:r}}createNamedExpression(e,r){return{type:rt.types.EXPRESSION,expressionType:rt.expressionTypes.NAMED,name:e,args:r}}createOperatorExpression(e,r){return{type:rt.types.EXPRESSION,expressionType:rt.expressionTypes.OPERATOR,operator:e,args:r}}createTermExpression(e){return{type:rt.types.EXPRESSION,expressionType:rt.expressionTypes.TERM,term:e}}createWildcardExpression(){return{type:rt.types.EXPRESSION,expressionType:rt.expressionTypes.WILDCARD,wildcard:new TQ.Wildcard}}createTerm(e){return(0,SQ.stringToTerm)(e,this.dataFactory)}createCompositeUpdate(e){return{type:rt.types.COMPOSITE_UPDATE,updates:e}}createDeleteInsert(e,r,n){const a={type:rt.types.DELETE_INSERT};return e&&(a.delete=e),r&&(a.insert=r),n&&(a.where=n),a}createLoad(e,r,n){const a={type:rt.types.LOAD,source:e};return r&&(a.destination=r),this.addSilent(a,!!n)}createClear(e,r){return this.addSilent({type:rt.types.CLEAR,source:e},!!r)}createCreate(e,r){return this.addSilent({type:rt.types.CREATE,source:e},!!r)}createDrop(e,r){return this.addSilent({type:rt.types.DROP,source:e},!!r)}createAdd(e,r,n){return this.addSilent({type:rt.types.ADD,source:e,destination:r},!!n)}createMove(e,r,n){return this.addSilent({type:rt.types.MOVE,source:e,destination:r},!!n)}createCopy(e,r,n){return this.addSilent({type:rt.types.COPY,source:e,destination:r},!!n)}addSilent(e,r){return r&&(e.silent=r),e}flattenMulti(e,r){if(!r)return e;const n=e.type,a=e.input;let s=[];for(const o of a)o.type===n?s.push(...o.input):s.push(o);return e.input=s,e}}Tf.default=EQ;var g0={},OQ=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(g0,"__esModule",{value:!0});const je=Sf,vP=OQ(Tf),AQ=an;let xQ=class fi{static flatten(e){return Array.prototype.concat(...e).filter(r=>r)}static objectify(e){if(e.termType){if(e.termType==="Quad")return{type:"pattern",termType:"Quad",subject:fi.objectify(e.subject),predicate:fi.objectify(e.predicate),object:fi.objectify(e.object),graph:fi.objectify(e.graph)};{let r={termType:e.termType,value:e.value};return e.language&&(r.language=e.language),e.datatype&&(r.datatype=fi.objectify(e.datatype)),r}}if(Array.isArray(e))return e.map(r=>fi.objectify(r));if(e===Object(e)){let r={};for(let n of Object.keys(e))r[n]=fi.objectify(e[n]);return r}return e}static inScopeVariables(e){const r=[];function n(s){r.find(o=>s.value===o.value)||r.push(s)}function a(s){s.subject.termType==="Variable"&&n(s.subject),s.predicate.termType==="Variable"&&n(s.predicate),s.object.termType==="Variable"&&n(s.object),s.graph.termType==="Variable"&&n(s.graph),s.subject.termType==="Quad"&&a(s.subject),s.predicate.termType==="Quad"&&a(s.predicate),s.object.termType==="Quad"&&a(s.object),s.graph.termType==="Quad"&&a(s.graph)}return fi.recurseOperation(e,{[je.types.EXPRESSION]:s=>(s.expressionType===je.expressionTypes.AGGREGATE&&s.variable&&n(s.variable),!0),[je.types.EXTEND]:s=>(n(s.variable),!0),[je.types.GRAPH]:s=>(s.name.termType==="Variable"&&n(s.name),!0),[je.types.GROUP]:s=>(s.variables.forEach(n),!0),[je.types.PATH]:s=>(s.subject.termType==="Variable"&&n(s.subject),s.object.termType==="Variable"&&n(s.object),s.graph.termType==="Variable"&&n(s.graph),s.subject.termType==="Quad"&&a(s.subject),s.object.termType==="Quad"&&a(s.object),s.graph.termType==="Quad"&&a(s.graph),!0),[je.types.PATTERN]:s=>(a(s),!0),[je.types.PROJECT]:s=>(s.variables.forEach(n),!1),[je.types.SERVICE]:s=>(s.name.termType==="Variable"&&n(s.name),!0),[je.types.VALUES]:s=>(s.variables.forEach(n),!0)}),r}static recurseOperation(e,r){let n=e,a=!0;const s=r[e.type];if(s&&(a=s(e)),!a)return;let o=u=>fi.recurseOperation(u,r);switch(n.type){case je.types.ALT:n.input.map(o);break;case je.types.ASK:o(n.input);break;case je.types.BGP:n.patterns.forEach(o);break;case je.types.CONSTRUCT:o(n.input),n.template.map(o);break;case je.types.DESCRIBE:o(n.input);break;case je.types.DISTINCT:o(n.input);break;case je.types.EXPRESSION:n.expressionType===je.expressionTypes.EXISTENCE&&o(n.input);break;case je.types.EXTEND:o(n.input),o(n.expression);break;case je.types.FILTER:o(n.input),o(n.expression);break;case je.types.FROM:o(n.input);break;case je.types.GRAPH:o(n.input);break;case je.types.GROUP:o(n.input),n.aggregates.forEach(o);break;case je.types.INV:o(n.path);break;case je.types.JOIN:n.input.map(o);break;case je.types.LEFT_JOIN:n.input.map(o),n.expression&&o(n.expression);break;case je.types.LINK:break;case je.types.MINUS:n.input.map(o);break;case je.types.NOP:break;case je.types.NPS:break;case je.types.ONE_OR_MORE_PATH:o(n.path);break;case je.types.ORDER_BY:o(n.input),n.expressions.forEach(o);break;case je.types.PATH:o(n.predicate);break;case je.types.PATTERN:break;case je.types.PROJECT:o(n.input);break;case je.types.REDUCED:o(n.input);break;case je.types.SEQ:n.input.map(o);break;case je.types.SERVICE:o(n.input);break;case je.types.SLICE:o(n.input);break;case je.types.UNION:n.input.map(o);break;case je.types.VALUES:break;case je.types.ZERO_OR_MORE_PATH:o(n.path);break;case je.types.ZERO_OR_ONE_PATH:o(n.path);break;case je.types.COMPOSITE_UPDATE:n.updates.forEach(u=>o(u));break;case je.types.DELETE_INSERT:n.delete&&n.delete.forEach(u=>o(u)),n.insert&&n.insert.forEach(u=>o(u)),n.where&&o(n.where);break;case je.types.LOAD:break;case je.types.CLEAR:break;case je.types.CREATE:break;case je.types.DROP:break;case je.types.ADD:break;case je.types.MOVE:break;case je.types.COPY:break;default:throw new Error(`Unknown Operation type ${n.type}`)}}static mapOperation(e,r,n){let a=e,s=!0,o=!0;n=n||new vP.default;const u=r[e.type];if(u){const d=u(e,n);a=d.result,s=d.recurse,o=d.copyMetadata!==!1}let c;if(o&&(a.metadata||e.metadata)&&(c={...a.metadata,...e.metadata}),!s)return c&&(a.metadata=c),a;let l=d=>fi.mapOperation(d,r,n);switch(a.type){case je.types.ALT:a=n.createAlt(a.input.map(l));break;case je.types.ASK:a=n.createAsk(l(a.input));break;case je.types.BGP:a=n.createBgp(a.patterns.map(l));break;case je.types.CONSTRUCT:a=n.createConstruct(l(a.input),a.template.map(l));break;case je.types.DESCRIBE:a=n.createDescribe(l(a.input),a.terms);break;case je.types.DISTINCT:a=n.createDistinct(l(a.input));break;case je.types.EXPRESSION:a=fi.mapExpression(a,r,n);break;case je.types.EXTEND:a=n.createExtend(l(a.input),a.variable,l(a.expression));break;case je.types.FILTER:a=n.createFilter(l(a.input),l(a.expression));break;case je.types.FROM:a=n.createFrom(l(a.input),[...a.default],[...a.named]);break;case je.types.GRAPH:a=n.createGraph(l(a.input),a.name);break;case je.types.GROUP:a=n.createGroup(l(a.input),[].concat(a.variables),a.aggregates.map(l));break;case je.types.INV:a=n.createInv(l(a.path));break;case je.types.JOIN:a=n.createJoin(a.input.map(l));break;case je.types.LEFT_JOIN:a=n.createLeftJoin(l(a.input[0]),l(a.input[1]),a.expression?l(a.expression):void 0);break;case je.types.LINK:a=n.createLink(a.iri);break;case je.types.MINUS:a=n.createMinus(l(a.input[0]),l(a.input[1]));break;case je.types.NOP:a=n.createNop();break;case je.types.NPS:a=n.createNps([].concat(a.iris));break;case je.types.ONE_OR_MORE_PATH:a=n.createOneOrMorePath(l(a.path));break;case je.types.ORDER_BY:a=n.createOrderBy(l(a.input),a.expressions.map(l));break;case je.types.PATH:a=n.createPath(a.subject,l(a.predicate),a.object,a.graph);break;case je.types.PATTERN:a=n.createPattern(a.subject,a.predicate,a.object,a.graph);break;case je.types.PROJECT:a=n.createProject(l(a.input),[...a.variables]);break;case je.types.REDUCED:a=n.createReduced(l(a.input));break;case je.types.SEQ:a=n.createSeq(a.input.map(l));break;case je.types.SERVICE:a=n.createService(l(a.input),a.name,a.silent);break;case je.types.SLICE:a=n.createSlice(l(a.input),a.start,a.length);break;case je.types.UNION:a=n.createUnion(a.input.map(l));break;case je.types.VALUES:a=n.createValues([].concat(a.variables),a.bindings.map(d=>Object.assign({},d)));break;case je.types.ZERO_OR_MORE_PATH:a=n.createZeroOrMorePath(l(a.path));break;case je.types.ZERO_OR_ONE_PATH:a=n.createZeroOrOnePath(l(a.path));break;case je.types.COMPOSITE_UPDATE:a=n.createCompositeUpdate(a.updates.map(l));break;case je.types.DELETE_INSERT:a=n.createDeleteInsert(a.delete?a.delete.map(l):void 0,a.insert?a.insert.map(l):void 0,a.where?l(a.where):void 0);break;case je.types.LOAD:a=n.createLoad(a.source,a.destination,a.silent);break;case je.types.CLEAR:a=n.createClear(a.source,a.silent);break;case je.types.CREATE:a=n.createCreate(a.source,a.silent);break;case je.types.DROP:a=n.createDrop(a.source,a.silent);break;case je.types.ADD:a=n.createAdd(a.source,a.destination);break;case je.types.MOVE:a=n.createMove(a.source,a.destination);break;case je.types.COPY:a=n.createCopy(a.source,a.destination);break;default:throw new Error(`Unknown Operation type ${a.type}`)}return c&&(a.metadata=c),a}static mapExpression(e,r,n){let a=e,s=!0;n=n||new vP.default;const o=r[e.expressionType];if(o&&({result:a,recurse:s}=o(e,n)),!s)return a;let u=c=>fi.mapOperation(c,r,n);switch(e.expressionType){case je.expressionTypes.AGGREGATE:return e.variable?n.createBoundAggregate(e.variable,e.aggregator,u(e.expression),e.distinct,e.separator):n.createAggregateExpression(e.aggregator,u(e.expression),e.distinct,e.separator);case je.expressionTypes.EXISTENCE:return n.createExistenceExpression(e.not,u(e.input));case je.expressionTypes.NAMED:return n.createNamedExpression(e.name,e.args.map(u));case je.expressionTypes.OPERATOR:return n.createOperatorExpression(e.operator,e.args.map(u));case je.expressionTypes.TERM:return n.createTermExpression(e.term);case je.expressionTypes.WILDCARD:return n.createWildcardExpression();default:throw new Error(`Unknown Expression type ${e.expressionType}`)}}static cloneOperation(e){return fi.mapOperation(e,{})}static cloneExpression(e){return fi.mapExpression(e,{})}static createUniqueVariable(e,r,n){let a=0,s=e;for(;r[s];)s=`${e}${a++}`;return n.variable(s)}static isSimpleTerm(e){return e.termType!==void 0&&e.termType!=="Quad"&&e.termType!=="Wildcard"}static isQuad(e){return e.termType==="Quad"}static hasQuadVariables(e){return(0,AQ.someTermsNested)(e,r=>r.termType==="Variable")}static isWildcard(e){return e.termType==="Wildcard"}};g0.default=xQ;var RQ=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),IQ=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),PQ=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&RQ(e,t,r);return IQ(e,t),e},uC=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(WA,"__esModule",{value:!0});const DQ=oQ,NQ=Zt,Qh=PQ(Sf),jQ=uC(Tf),Si=uC(g0),CQ=_0.Parser,vi=Qh.types;let Gd=new Set,cC=0,V_=!1,Qe;function MQ(t,e){e=e||{},Qe=new jQ.default(e.dataFactory);let r;if(FQ(t)){let n=new CQ(e);n._resetBlanks(),r=n.parse(t)}else r=t;return lC(r,e.quads,e.blankToVariable)}WA.default=MQ;function lC(t,e,r){if(Gd=new Set,cC=0,V_=!!e,!t.type)return Qe.createNop();if(t.type!=="query"&&t.type!=="update")throw new Error("Translate only works on complete query or update objects.");let n;if(GE(t),t.type==="query"){const a={type:"group",patterns:t.where||[]};n=jo(a),n=HQ(t,n)}else t.type==="update"&&(n=QQ(t));return r&&(n=hC(n)),n}function FQ(t){return typeof t=="string"}function dC(t){return!!(t!=null&&t.termType)}function LQ(t){return t.subject&&t.predicate&&t.object}function Op(t){return(t==null?void 0:t.termType)==="Variable"}function GE(t){if(dC(t))Op(t)&&Gd.add(`?${t.value}`);else if(Array.isArray(t))for(const e of t)GE(e);else if(t&&typeof t=="object")for(let e of Object.keys(t))e.startsWith("?")&&Gd.add(e),GE(t[e])}function jn(t){let e={};if(LQ(t)){const r=[jn(t.subject),jn(t.predicate),jn(t.object),t.graph?jn(t.graph):{}];Object.assign(e,...r)}else if(dC(t))Op(t)&&(e[t.value]=t);else if(t.type==="bgp"){const r=t.triples;Object.assign(e,...r.map(jn))}else if(t.type==="path")Object.assign(e,...t.items.map(jn));else if(t.type==="group"||t.type==="union"||t.type==="optional")Object.assign(e,...t.patterns.map(jn));else if(t.type==="service"||t.type==="graph")Object.assign(e,jn(t.name)),Object.assign(e,...t.patterns.map(jn));else if(t.type==="bind")Object.assign(e,jn(t.variable));else if(t.type==="values"){if(t.values.length>0){const r=Object.keys(t.values[0]).map(n=>Qe.createTerm(n));Object.assign(e,...r.map(jn))}}else if(t.type==="query"&&(t.queryType==="SELECT"||t.queryType==="DESCRIBE")){t.where&&t.variables.some(Si.default.isWildcard)&&Object.assign(e,...t.where.map(jn));for(const r of t.variables)Op(r)?Object.assign(e,jn(r)):r.variable&&Object.assign(e,jn(r.variable));if(t.queryType==="SELECT"){if(t.group)for(const r of t.group)r.variable&&Object.assign(e,jn(r.variable));if(t.values){const r={type:"values",values:t.values};Object.assign(e,jn(r))}}}return e}function jo(t){let e=[],r=[];if("patterns"in t)for(let a of t.patterns)(a.type==="filter"?e:r).push(a);if(t.type==="bgp")return BQ(t);let n;if(t.type==="union")n=Qe.createUnion(r.map(a=>(a.type!=="group"&&(a={type:"group",patterns:[a]}),jo(a))));else{if(t.type==="graph")return UQ(t);if(t.type==="group")n=r.reduce(VQ,Qe.createBgp([]));else if(t.type==="values")n=fC(t);else if(t.type==="query")n=lC(t,V_,!1);else throw new Error(`Unexpected type: ${t.type}`)}if(e.length>0){let a=e.map(s=>Xi(s.expression));a.length>0&&(n=Qe.createFilter(n,a.reduce((s,o)=>Qe.createOperatorExpression("&&",[s,o]))))}return n}function Xi(t){if(Si.default.isSimpleTerm(t))return Qe.createTermExpression(t);if(Si.default.isQuad(t))return Si.default.hasQuadVariables(t)?Qe.createOperatorExpression("triple",[Xi(t.subject),Xi(t.predicate),Xi(t.object)]):Qe.createTermExpression(t);if(Si.default.isWildcard(t))return Qe.createWildcardExpression();if("aggregation"in t)return Qe.createAggregateExpression(t.aggregation,Xi(t.expression),!!t.distinct,t.separator);if("function"in t)return Qe.createNamedExpression(t.function,t.args.map(Xi));if("operator"in t)return t.operator==="exists"||t.operator==="notexists"?Qe.createExistenceExpression(t.operator==="notexists",jo(t.args[0])):((t.operator==="in"||t.operator==="notin")&&(t.args=[t.args[0]].concat(t.args[1])),Qe.createOperatorExpression(t.operator,t.args.map(Xi)));throw new Error(`Unknown expression: ${JSON.stringify(t)}`)}function BQ(t){let e=[],r=[];for(let n of t.triples)if("pathType"in n.predicate){let a=$Q(n);for(let s of a)s.type===vi.PATH?(e.length>0&&r.push(Qe.createBgp(e)),e=[],r.push(s)):e.push(s)}else e.push(KA(n));return e.length>0&&r.push(Qe.createBgp(e)),r.length===1?r[0]:Qe.createJoin(r)}function $Q(t){let e=t.subject,r=Dc(t.predicate),n=t.object;return zE(e,r,n)}function Dc(t){if(Si.default.isSimpleTerm(t)){if(t.termType==="NamedNode")return Qe.createLink(t);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(t)}`)}if(t.pathType==="^")return Qe.createInv(Dc(t.items[0]));if(t.pathType==="!"){let e=[],r=[],n;"pathType"in t.items[0]&&t.items[0].pathType==="|"?n=t.items[0].items:n=t.items;for(let o of n)if(Si.default.isSimpleTerm(o))e.push(o);else if(o.pathType==="^")r.push(o.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(o)}`);let a=Qe.createNps(e),s=Qe.createInv(Qe.createNps(r));return r.length===0?a:e.length===0?s:Qe.createAlt([a,s])}if(t.pathType==="/")return Qe.createSeq(t.items.map(Dc));if(t.pathType==="|")return Qe.createAlt(t.items.map(Dc));if(t.pathType==="*")return Qe.createZeroOrMorePath(Dc(t.items[0]));if(t.pathType==="+")return Qe.createOneOrMorePath(Dc(t.items[0]));if(t.pathType==="?")return Qe.createZeroOrOnePath(Dc(t.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(t)}`)}function zE(t,e,r){if(e.type===vi.LINK)return[Qe.createPattern(t,e.iri,r)];if(e.type===vi.INV)return zE(r,e.path,t);if(e.type===vi.SEQ){let n=t;return Si.default.flatten(e.input.map((a,s)=>{const o=s===e.input.length-1?r:zd(),u=zE(n,a,o);return o.termType==="Variable"&&(n=o),u}))}return[Qe.createPath(t,e,r)]}function zd(){let t=`?var${cC++}`;return Gd.has(t)?zd():(Gd.add(t),Qe.createTerm(t))}function KA(t){if("pathType"in t.predicate)throw new Error("Trying to translate property path to quad.");return Qe.createPattern(t.subject,t.predicate,t.object,t.graph)}function UQ(t){const e={type:"group",patterns:t.patterns};let r=jo(e);return V_?r=Uc(r,t.name):r=Qe.createGraph(r,t.name),r}let qQ=Object.values(vi);function Uc(t,e,r){if(t.type===vi.GRAPH){if(r)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");t=Uc(t.input,t.name)}else if(t.type===vi.BGP)t.patterns=t.patterns.map(n=>(r&&(n.subject.equals(e)&&(n.subject=r),n.predicate.equals(e)&&(n.predicate=r),n.object.equals(e)&&(n.object=r)),n.graph.termType==="DefaultGraph"&&(n.graph=e),n));else if(t.type===vi.PATH)r&&(t.subject.equals(e)&&(t.subject=r),t.object.equals(e)&&(t.object=r)),t.graph.termType==="DefaultGraph"&&(t.graph=e);else if(t.type===vi.PROJECT&&!r)t.variables.some(n=>n.equals(e))||(r=zd()),t.input=Uc(t.input,e,r);else if(t.type===vi.EXTEND&&!r)t.variable.equals(e)&&(r=zd()),t.input=Uc(t.input,e,r);else for(let n of Object.keys(t))Array.isArray(t[n])?t[n]=t[n].map(a=>Uc(a,e,r)):qQ.indexOf(t[n].type)>=0?t[n]=Uc(t[n],e,r):r&&Op(t[n])&&t[n].equals(e)&&(t[n]=r);return t}function VQ(t,e){if(e.type==="optional"){const r=jo({type:"group",patterns:e.patterns});r.type===vi.FILTER?t=Qe.createLeftJoin(t,r.input,r.expression):t=Qe.createLeftJoin(t,r)}else if(e.type==="minus"){const r=jo({type:"group",patterns:e.patterns});t=Qe.createMinus(t,r)}else if(e.type==="bind")t=Qe.createExtend(t,e.variable,Xi(e.expression));else if(e.type==="service"){const r={type:"group",patterns:e.patterns},n=Qe.createService(jo(r),e.name,e.silent);t=wP(t,n)}else{const r=jo(e);t=wP(t,r)}return t}function wP(t,e){return t.type===vi.BGP&&e.type===vi.BGP?t=Qe.createBgp([...t.patterns,...e.patterns]):t.type===vi.BGP&&t.patterns.length===0?t=e:e.type===vi.BGP&&e.patterns.length===0||(t=Qe.createJoin([t,e])),t}function fC(t){let e=(t.values.length===0?[]:Object.keys(t.values[0])).map(Qe.createTerm.bind(Qe)),r=t.values.map(n=>{let a=Object.keys(n);a=a.filter(o=>n[o]!==void 0);let s={};for(let o of a)s[o]=n[o];return s});return Qe.createValues(e,r)}function HQ(t,e){const r=t,n=[],a={};if(r.variables=r.variables&&r.variables.map(o=>ip(o,a)),r.having=r.having&&r.having.map(o=>ip(o,a)),r.order=r.order&&r.order.map(o=>ip(o,a)),r.group||Object.keys(a).length>0){const o=Object.keys(a).map(c=>kQ(a[c],Qe.createTerm(c))),u=[];if(r.group)for(const c of r.group)if(Si.default.isSimpleTerm(c.expression))u.push(c.expression);else{const l="variable"in c?c.variable:zd();e=Qe.createExtend(e,l,Xi(c.expression)),u.push(l)}e=Qe.createGroup(e,u,o)}if(r.having)for(let o of r.having)e=Qe.createFilter(e,Xi(o));t.values&&(e=Qe.createJoin([e,fC(t)]));let s=[];if(t.queryType==="SELECT"||t.queryType==="DESCRIBE")if(t.variables.some(o=>o&&Si.default.isWildcard(o)))s=Object.values(jn(t)).sort((o,u)=>o.value.localeCompare(u.value));else for(let o of t.variables)Op(o)||!("variable"in o)?s.push(o):o.variable&&(s.push(o.variable),n.push(o));for(let o of n)e=Qe.createExtend(e,o.variable,Xi(o.expression));return r.order&&(e=Qe.createOrderBy(e,r.order.map(o=>{let u=Xi(o.expression);return o.descending&&(u=Qe.createOperatorExpression("desc",[u])),u}))),t.queryType==="SELECT"&&(e=Qe.createProject(e,s)),r.distinct&&(e=Qe.createDistinct(e)),r.reduced&&(e=Qe.createReduced(e)),t.queryType==="CONSTRUCT"?e=Qe.createConstruct(e,(t.template||[]).map(KA)):t.queryType==="ASK"?e=Qe.createAsk(e):t.queryType==="DESCRIBE"&&(e=Qe.createDescribe(e,s)),(r.offset||r.limit)&&(e=Qe.createSlice(e,r.offset||0,r.limit)),r.from&&(e=Qe.createFrom(e,r.from.default,r.from.named)),e}function ip(t,e){if("type"in t&&t.type==="aggregate"){let r=!1,n;for(let a of Object.keys(e))if(DQ(e[a],t)){n=Qe.createTerm(a),r=!0;break}return r||(n=zd(),e[(0,NQ.termToString)(n)]=t),n}return"expression"in t&&t.expression?{...t,expression:ip(t.expression,e)}:"args"in t&&t.args?{...t,args:t.args.map(r=>ip(r,e))}:t}function kQ(t,e){if(t.type!=="aggregate"||!t.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(t)}`);const r=Xi(t);return r.variable=e,r}function QQ(t){return t.updates.length===1?SP(t.updates[0]):Qe.createCompositeUpdate(t.updates.map(SP))}function SP(t){if("type"in t){if(t.type==="load")return WQ(t);if(t.type==="clear"||t.type==="create"||t.type==="drop")return zQ(t);if(t.type==="add"||t.type==="copy"||t.type==="move")return XQ(t)}else if(t.updateType==="insertdelete"||t.updateType==="deletewhere"||t.updateType==="delete"||t.updateType==="insert")return GQ(t);throw new Error(`Unknown update type ${JSON.stringify(t)}`)}function GQ(t){if(!V_)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let e=[],r=[],n;if(t.delete&&(e=Si.default.flatten(t.delete.map(a=>TP(a,t.graph)))),t.insert&&(r=Si.default.flatten(t.insert.map(a=>TP(a,t.graph)))),t.where&&t.where.length>0){n=jo({type:"group",patterns:t.where});const a=t.using;a?n=Qe.createFrom(n,a.default,a.named):t.graph&&(n=Uc(n,t.graph))}else t.updateType==="deletewhere"&&e.length>0&&(n=Qe.createBgp(e));return Qe.createDeleteInsert(e.length>0?e:void 0,r.length>0?r:void 0,n)}function TP(t,e){let r=e;t.type==="graph"&&(r=t.name);let n=t.triples;return r&&(n=n.map(a=>Object.assign(a,{graph:r}))),n.map(KA)}function zQ(t){let e;switch(Si.default.isSimpleTerm(t.graph)?e=t.graph:t.graph.all?e="ALL":t.graph.default?e="DEFAULT":t.graph.named?e="NAMED":e=t.graph.name,t.type){case"clear":return Qe.createClear(e,t.silent);case"create":return Qe.createCreate(e,t.silent);case"drop":return Qe.createDrop(e,t.silent)}}function WQ(t){return Qe.createLoad(t.source,t.destination,t.silent)}function XQ(t){const e=t.source.default?"DEFAULT":t.source.name,r=t.destination.default?"DEFAULT":t.destination.name;switch(t.type){case"copy":return Qe.createCopy(e,r,t.silent);case"move":return Qe.createMove(e,r,t.silent);case"add":return Qe.createAdd(e,r,t.silent)}}function hC(t){const e={},r=Array.from(Gd).reduce((a,s)=>(a[s]=!0,a),{});return Si.default.mapOperation(t,{[Qh.types.DELETE_INSERT]:a=>({result:a,recurse:!1}),[Qh.types.PATH]:(a,s)=>({result:s.createPath(n(a.subject),a.predicate,n(a.object),n(a.graph)),recurse:!1}),[Qh.types.PATTERN]:(a,s)=>({result:s.createPattern(n(a.subject),n(a.predicate),n(a.object),n(a.graph)),recurse:!1}),[Qh.types.CONSTRUCT]:a=>({result:Qe.createConstruct(hC(a.input),a.template),recurse:!1})});function n(a){if(a.termType==="BlankNode"){let s=e[a.value];return s||(s=Si.default.createUniqueVariable(a.value,r,Qe.dataFactory),r[s.value]=!0,e[a.value]=s),s}return a}}var Wd={},pC={},Mt={},H_={},Lt={},m0=yC;function yC(t,e){if(!t)throw new Error(e||"Assertion failed")}yC.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var WE={exports:{}};typeof Object.create=="function"?WE.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:WE.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var Ef=WE.exports,KQ=m0,JQ=Ef;Lt.inherits=JQ;function YQ(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function ZQ(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),a=0;a<t.length;a+=2)r.push(parseInt(t[a]+t[a+1],16))}else for(var n=0,a=0;a<t.length;a++){var s=t.charCodeAt(a);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):YQ(t,a)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++a)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(a=0;a<t.length;a++)r[a]=t[a]|0;return r}Lt.toArray=ZQ;function eG(t){for(var e="",r=0;r<t.length;r++)e+=_C(t[r].toString(16));return e}Lt.toHex=eG;function bC(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Lt.htonl=bC;function tG(t,e){for(var r="",n=0;n<t.length;n++){var a=t[n];e==="little"&&(a=bC(a)),r+=gC(a.toString(16))}return r}Lt.toHex32=tG;function _C(t){return t.length===1?"0"+t:t}Lt.zero2=_C;function gC(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Lt.zero8=gC;function rG(t,e,r,n){var a=r-e;KQ(a%4===0);for(var s=new Array(a/4),o=0,u=e;o<s.length;o++,u+=4){var c;n==="big"?c=t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:c=t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],s[o]=c>>>0}return s}Lt.join32=rG;function nG(t,e){for(var r=new Array(t.length*4),n=0,a=0;n<t.length;n++,a+=4){var s=t[n];e==="big"?(r[a]=s>>>24,r[a+1]=s>>>16&255,r[a+2]=s>>>8&255,r[a+3]=s&255):(r[a+3]=s>>>24,r[a+2]=s>>>16&255,r[a+1]=s>>>8&255,r[a]=s&255)}return r}Lt.split32=nG;function iG(t,e){return t>>>e|t<<32-e}Lt.rotr32=iG;function aG(t,e){return t<<e|t>>>32-e}Lt.rotl32=aG;function sG(t,e){return t+e>>>0}Lt.sum32=sG;function oG(t,e,r){return t+e+r>>>0}Lt.sum32_3=oG;function uG(t,e,r,n){return t+e+r+n>>>0}Lt.sum32_4=uG;function cG(t,e,r,n,a){return t+e+r+n+a>>>0}Lt.sum32_5=cG;function lG(t,e,r,n){var a=t[e],s=t[e+1],o=n+s>>>0,u=(o<n?1:0)+r+a;t[e]=u>>>0,t[e+1]=o}Lt.sum64=lG;function dG(t,e,r,n){var a=e+n>>>0,s=(a<e?1:0)+t+r;return s>>>0}Lt.sum64_hi=dG;function fG(t,e,r,n){var a=e+n;return a>>>0}Lt.sum64_lo=fG;function hG(t,e,r,n,a,s,o,u){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+u>>>0,c+=l<u?1:0;var d=t+r+a+o+c;return d>>>0}Lt.sum64_4_hi=hG;function pG(t,e,r,n,a,s,o,u){var c=e+n+s+u;return c>>>0}Lt.sum64_4_lo=pG;function yG(t,e,r,n,a,s,o,u,c,l){var d=0,f=e;f=f+n>>>0,d+=f<e?1:0,f=f+s>>>0,d+=f<s?1:0,f=f+u>>>0,d+=f<u?1:0,f=f+l>>>0,d+=f<l?1:0;var h=t+r+a+o+c+d;return h>>>0}Lt.sum64_5_hi=yG;function bG(t,e,r,n,a,s,o,u,c,l){var d=e+n+s+u+l;return d>>>0}Lt.sum64_5_lo=bG;function _G(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Lt.rotr64_hi=_G;function gG(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Lt.rotr64_lo=gG;function mG(t,e,r){return t>>>r}Lt.shr64_hi=mG;function vG(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Lt.shr64_lo=vG;var Of={},EP=Lt,wG=m0;function k_(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Of.BlockHash=k_;k_.prototype.update=function(e,r){if(e=EP.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=EP.join32(e,0,e.length-n,this.endian);for(var a=0;a<e.length;a+=this._delta32)this._update(e,a,a+this._delta32)}return this};k_.prototype.digest=function(e){return this.update(this._pad()),wG(this.pending===null),this._digest(e)};k_.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,a=new Array(n+this.padLength);a[0]=128;for(var s=1;s<n;s++)a[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)a[s++]=0;a[s++]=0,a[s++]=0,a[s++]=0,a[s++]=0,a[s++]=e>>>24&255,a[s++]=e>>>16&255,a[s++]=e>>>8&255,a[s++]=e&255}else for(a[s++]=e&255,a[s++]=e>>>8&255,a[s++]=e>>>16&255,a[s++]=e>>>24&255,a[s++]=0,a[s++]=0,a[s++]=0,a[s++]=0,o=8;o<this.padLength;o++)a[s++]=0;return a};var Af={},Ys={},SG=Lt,Ms=SG.rotr32;function TG(t,e,r,n){if(t===0)return mC(e,r,n);if(t===1||t===3)return wC(e,r,n);if(t===2)return vC(e,r,n)}Ys.ft_1=TG;function mC(t,e,r){return t&e^~t&r}Ys.ch32=mC;function vC(t,e,r){return t&e^t&r^e&r}Ys.maj32=vC;function wC(t,e,r){return t^e^r}Ys.p32=wC;function EG(t){return Ms(t,2)^Ms(t,13)^Ms(t,22)}Ys.s0_256=EG;function OG(t){return Ms(t,6)^Ms(t,11)^Ms(t,25)}Ys.s1_256=OG;function AG(t){return Ms(t,7)^Ms(t,18)^t>>>3}Ys.g0_256=AG;function xG(t){return Ms(t,17)^Ms(t,19)^t>>>10}Ys.g1_256=xG;var Xd=Lt,RG=Of,IG=Ys,N3=Xd.rotl32,Xf=Xd.sum32,PG=Xd.sum32_5,DG=IG.ft_1,SC=RG.BlockHash,NG=[1518500249,1859775393,2400959708,3395469782];function Qs(){if(!(this instanceof Qs))return new Qs;SC.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Xd.inherits(Qs,SC);var jG=Qs;Qs.blockSize=512;Qs.outSize=160;Qs.hmacStrength=80;Qs.padLength=64;Qs.prototype._update=function(e,r){for(var n=this.W,a=0;a<16;a++)n[a]=e[r+a];for(;a<n.length;a++)n[a]=N3(n[a-3]^n[a-8]^n[a-14]^n[a-16],1);var s=this.h[0],o=this.h[1],u=this.h[2],c=this.h[3],l=this.h[4];for(a=0;a<n.length;a++){var d=~~(a/20),f=PG(N3(s,5),DG(d,o,u,c),l,n[a],NG[d]);l=c,c=u,u=N3(o,30),o=s,s=f}this.h[0]=Xf(this.h[0],s),this.h[1]=Xf(this.h[1],o),this.h[2]=Xf(this.h[2],u),this.h[3]=Xf(this.h[3],c),this.h[4]=Xf(this.h[4],l)};Qs.prototype._digest=function(e){return e==="hex"?Xd.toHex32(this.h,"big"):Xd.split32(this.h,"big")};var Kd=Lt,CG=Of,xf=Ys,MG=m0,Ca=Kd.sum32,FG=Kd.sum32_4,LG=Kd.sum32_5,BG=xf.ch32,$G=xf.maj32,UG=xf.s0_256,qG=xf.s1_256,VG=xf.g0_256,HG=xf.g1_256,TC=CG.BlockHash,kG=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Gs(){if(!(this instanceof Gs))return new Gs;TC.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=kG,this.W=new Array(64)}Kd.inherits(Gs,TC);var EC=Gs;Gs.blockSize=512;Gs.outSize=256;Gs.hmacStrength=192;Gs.padLength=64;Gs.prototype._update=function(e,r){for(var n=this.W,a=0;a<16;a++)n[a]=e[r+a];for(;a<n.length;a++)n[a]=FG(HG(n[a-2]),n[a-7],VG(n[a-15]),n[a-16]);var s=this.h[0],o=this.h[1],u=this.h[2],c=this.h[3],l=this.h[4],d=this.h[5],f=this.h[6],h=this.h[7];for(MG(this.k.length===n.length),a=0;a<n.length;a++){var p=LG(h,qG(l),BG(l,d,f),this.k[a],n[a]),b=Ca(UG(s),$G(s,o,u));h=f,f=d,d=l,l=Ca(c,p),c=u,u=o,o=s,s=Ca(p,b)}this.h[0]=Ca(this.h[0],s),this.h[1]=Ca(this.h[1],o),this.h[2]=Ca(this.h[2],u),this.h[3]=Ca(this.h[3],c),this.h[4]=Ca(this.h[4],l),this.h[5]=Ca(this.h[5],d),this.h[6]=Ca(this.h[6],f),this.h[7]=Ca(this.h[7],h)};Gs.prototype._digest=function(e){return e==="hex"?Kd.toHex32(this.h,"big"):Kd.split32(this.h,"big")};var XE=Lt,OC=EC;function Vo(){if(!(this instanceof Vo))return new Vo;OC.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}XE.inherits(Vo,OC);var QG=Vo;Vo.blockSize=512;Vo.outSize=224;Vo.hmacStrength=192;Vo.padLength=64;Vo.prototype._digest=function(e){return e==="hex"?XE.toHex32(this.h.slice(0,7),"big"):XE.split32(this.h.slice(0,7),"big")};var qi=Lt,GG=Of,zG=m0,Fs=qi.rotr64_hi,Ls=qi.rotr64_lo,AC=qi.shr64_hi,xC=qi.shr64_lo,lu=qi.sum64,j3=qi.sum64_hi,C3=qi.sum64_lo,WG=qi.sum64_4_hi,XG=qi.sum64_4_lo,KG=qi.sum64_5_hi,JG=qi.sum64_5_lo,RC=GG.BlockHash,YG=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function os(){if(!(this instanceof os))return new os;RC.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=YG,this.W=new Array(160)}qi.inherits(os,RC);var IC=os;os.blockSize=1024;os.outSize=512;os.hmacStrength=192;os.padLength=128;os.prototype._prepareBlock=function(e,r){for(var n=this.W,a=0;a<32;a++)n[a]=e[r+a];for(;a<n.length;a+=2){var s=cz(n[a-4],n[a-3]),o=lz(n[a-4],n[a-3]),u=n[a-14],c=n[a-13],l=oz(n[a-30],n[a-29]),d=uz(n[a-30],n[a-29]),f=n[a-32],h=n[a-31];n[a]=WG(s,o,u,c,l,d,f,h),n[a+1]=XG(s,o,u,c,l,d,f,h)}};os.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,a=this.h[0],s=this.h[1],o=this.h[2],u=this.h[3],c=this.h[4],l=this.h[5],d=this.h[6],f=this.h[7],h=this.h[8],p=this.h[9],b=this.h[10],_=this.h[11],E=this.h[12],w=this.h[13],O=this.h[14],A=this.h[15];zG(this.k.length===n.length);for(var T=0;T<n.length;T+=2){var I=O,D=A,U=az(h,p),H=sz(h,p),N=ZG(h,p,b,_,E),R=ez(h,p,b,_,E,w),F=this.k[T],X=this.k[T+1],ne=n[T],$=n[T+1],C=KG(I,D,U,H,N,R,F,X,ne,$),Q=JG(I,D,U,H,N,R,F,X,ne,$);I=nz(a,s),D=iz(a,s),U=tz(a,s,o,u,c),H=rz(a,s,o,u,c,l);var se=j3(I,D,U,H),ie=C3(I,D,U,H);O=E,A=w,E=b,w=_,b=h,_=p,h=j3(d,f,C,Q),p=C3(f,f,C,Q),d=c,f=l,c=o,l=u,o=a,u=s,a=j3(C,Q,se,ie),s=C3(C,Q,se,ie)}lu(this.h,0,a,s),lu(this.h,2,o,u),lu(this.h,4,c,l),lu(this.h,6,d,f),lu(this.h,8,h,p),lu(this.h,10,b,_),lu(this.h,12,E,w),lu(this.h,14,O,A)};os.prototype._digest=function(e){return e==="hex"?qi.toHex32(this.h,"big"):qi.split32(this.h,"big")};function ZG(t,e,r,n,a){var s=t&r^~t&a;return s<0&&(s+=4294967296),s}function ez(t,e,r,n,a,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function tz(t,e,r,n,a){var s=t&r^t&a^r&a;return s<0&&(s+=4294967296),s}function rz(t,e,r,n,a,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function nz(t,e){var r=Fs(t,e,28),n=Fs(e,t,2),a=Fs(e,t,7),s=r^n^a;return s<0&&(s+=4294967296),s}function iz(t,e){var r=Ls(t,e,28),n=Ls(e,t,2),a=Ls(e,t,7),s=r^n^a;return s<0&&(s+=4294967296),s}function az(t,e){var r=Fs(t,e,14),n=Fs(t,e,18),a=Fs(e,t,9),s=r^n^a;return s<0&&(s+=4294967296),s}function sz(t,e){var r=Ls(t,e,14),n=Ls(t,e,18),a=Ls(e,t,9),s=r^n^a;return s<0&&(s+=4294967296),s}function oz(t,e){var r=Fs(t,e,1),n=Fs(t,e,8),a=AC(t,e,7),s=r^n^a;return s<0&&(s+=4294967296),s}function uz(t,e){var r=Ls(t,e,1),n=Ls(t,e,8),a=xC(t,e,7),s=r^n^a;return s<0&&(s+=4294967296),s}function cz(t,e){var r=Fs(t,e,19),n=Fs(e,t,29),a=AC(t,e,6),s=r^n^a;return s<0&&(s+=4294967296),s}function lz(t,e){var r=Ls(t,e,19),n=Ls(e,t,29),a=xC(t,e,6),s=r^n^a;return s<0&&(s+=4294967296),s}var KE=Lt,PC=IC;function Ho(){if(!(this instanceof Ho))return new Ho;PC.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}KE.inherits(Ho,PC);var dz=Ho;Ho.blockSize=1024;Ho.outSize=384;Ho.hmacStrength=192;Ho.padLength=128;Ho.prototype._digest=function(e){return e==="hex"?KE.toHex32(this.h.slice(0,12),"big"):KE.split32(this.h.slice(0,12),"big")};Af.sha1=jG;Af.sha224=QG;Af.sha256=EC;Af.sha384=dz;Af.sha512=IC;var DC={},sl=Lt,fz=Of,Hy=sl.rotl32,OP=sl.sum32,Kf=sl.sum32_3,AP=sl.sum32_4,NC=fz.BlockHash;function zs(){if(!(this instanceof zs))return new zs;NC.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}sl.inherits(zs,NC);DC.ripemd160=zs;zs.blockSize=512;zs.outSize=160;zs.hmacStrength=192;zs.padLength=64;zs.prototype._update=function(e,r){for(var n=this.h[0],a=this.h[1],s=this.h[2],o=this.h[3],u=this.h[4],c=n,l=a,d=s,f=o,h=u,p=0;p<80;p++){var b=OP(Hy(AP(n,xP(p,a,s,o),e[yz[p]+r],hz(p)),_z[p]),u);n=u,u=o,o=Hy(s,10),s=a,a=b,b=OP(Hy(AP(c,xP(79-p,l,d,f),e[bz[p]+r],pz(p)),gz[p]),h),c=h,h=f,f=Hy(d,10),d=l,l=b}b=Kf(this.h[1],s,f),this.h[1]=Kf(this.h[2],o,h),this.h[2]=Kf(this.h[3],u,c),this.h[3]=Kf(this.h[4],n,l),this.h[4]=Kf(this.h[0],a,d),this.h[0]=b};zs.prototype._digest=function(e){return e==="hex"?sl.toHex32(this.h,"little"):sl.split32(this.h,"little")};function xP(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function hz(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function pz(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var yz=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],bz=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],_z=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],gz=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],mz=Lt,vz=m0;function Jd(t,e,r){if(!(this instanceof Jd))return new Jd(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(mz.toArray(e,r))}var wz=Jd;Jd.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),vz(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};Jd.prototype.update=function(e,r){return this.inner.update(e,r),this};Jd.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Lt,e.common=Of,e.sha=Af,e.ripemd=DC,e.hmac=wz,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(H_);Object.defineProperty(Mt,"__esModule",{value:!0});Mt.isTermGrounded=Mt.termToSignature=Mt.quadToSignature=Mt.sha1hex=Mt.hashTerm=Mt.hashTerms=Mt.getGraphBlankNodes=Mt.uniqGraph=Mt.deindexGraph=Mt.indexGraph=Mt.getQuadsWithoutBlankNodes=Mt.getQuadsWithBlankNodes=Mt.hasValue=Mt.hashValues=Mt.getBijectionInner=Mt.getBijection=Mt.isomorphic=void 0;const Sz=H_,Ya=Zt,Bs=an;function Tz(t,e){return!!jC(t,e)}Mt.isomorphic=Tz;function jC(t,e){const r=Rb(YE(t)),n=Rb(YE(e));if(Object.keys(r).length!==Object.keys(n).length)return null;for(const c in r)if(r[c]!==n[c])return null;const a=ZE(JE(t)),s=ZE(JE(e)),o=eO(t),u=eO(e);return JA(a,s,o,u)}Mt.getBijection=jC;function JA(t,e,r,n,a,s){a||(a={}),s||(s={});const[o,u]=tO(t,r,a),[c,l]=tO(e,n,s);if(Object.keys(o).length!==Object.keys(c).length)return null;for(const f in o)if(!MC(c,o[f]))return null;let d={};for(const f of r){const h=Ya.termToString(f),p=u[h];for(const b in l)if(l[b]===p){d[h]=b,delete l[b];break}}if(!RP(Object.keys(d).sort(),r.map(Ya.termToString).sort())||!RP(CC(d).sort(),n.map(Ya.termToString).sort())){d=null;for(const f of r){const h=Ya.termToString(f);if(!o[h])for(const p of n){const b=Ya.termToString(p);if(!c[b]&&u[h]===l[b]){const _=YA(h);d=JA(t,e,r,n,Object.assign(Object.assign({},o),{[h]:_}),Object.assign(Object.assign({},c),{[b]:_}))}}}}return d}Mt.getBijectionInner=JA;function RP(t,e){if(t.length!==e.length)return!1;for(let r=t.length;r--;)if(t[r]!==e[r])return!1;return!0}function CC(t){const e=[];for(const r in t)e.push(t[r]);return e}Mt.hashValues=CC;function MC(t,e){for(const r in t)if(t[r]===e)return!0;return!1}Mt.hasValue=MC;function JE(t){return t.filter(e=>Bs.someTerms(e,r=>r.termType==="BlankNode"||r.termType==="Quad"&&Bs.getTermsNested(r).some(n=>n.termType==="BlankNode")))}Mt.getQuadsWithBlankNodes=JE;function YE(t){return t.filter(e=>Bs.everyTerms(e,r=>r.termType!=="BlankNode"&&!(r.termType==="Quad"&&Bs.getTermsNested(r).some(n=>n.termType==="BlankNode"))))}Mt.getQuadsWithoutBlankNodes=YE;function Rb(t){const e={};for(const r of t)e[JSON.stringify(Ya.quadToStringQuad(r))]=!0;return e}Mt.indexGraph=Rb;function FC(t){return Object.keys(t).map(e=>Ya.stringQuadToQuad(JSON.parse(e)))}Mt.deindexGraph=FC;function ZE(t){return FC(Rb(t))}Mt.uniqGraph=ZE;function eO(t){return Bs.uniqTerms(t.map(e=>Bs.getBlankNodes(Bs.getTermsNested(e))).reduce((e,r)=>e.concat(r),[]))}Mt.getGraphBlankNodes=eO;function tO(t,e,r){const n=Object.assign({},r),a={};let s=!0;for(;s;){const o=Object.keys(n).length;for(const c of e){const l=Ya.termToString(c);if(!n[l]){const[d,f]=LC(c,t,n);d&&(n[l]=f),a[l]=f}}const u={};for(const c in a){const l=a[c];u[l]===void 0?u[l]=c:u[l]=!1}for(const c in u){const l=u[c];l&&(n[l]=c)}s=o!==Object.keys(n).length}return[n,a]}Mt.hashTerms=tO;function LC(t,e,r){const n=[];let a=!0;for(const o of e){const u=Bs.getTermsNested(o);if(u.some(c=>c.equals(t))){n.push(ZA(o,r,t));for(const c of u)!ex(c,r)&&!c.equals(t)&&(a=!1)}}const s=YA(n.sort().join(""));return[a,s]}Mt.hashTerm=LC;function YA(t){return Sz.sha1().update(t).digest("hex")}Mt.sha1hex=YA;function ZA(t,e,r){return Bs.getTerms(t).map(n=>BC(n,e,r)).join("|")}Mt.quadToSignature=ZA;function BC(t,e,r){return t.equals(r)?"@self":t.termType==="BlankNode"?e[Ya.termToString(t)]||"@blank":t.termType==="Quad"?`<${ZA(t,e,r)}>`:Ya.termToString(t)}Mt.termToSignature=BC;function ex(t,e){return t.termType!=="BlankNode"&&!(t.termType==="Quad"&&Bs.getTermsNested(t).some(r=>!ex(r,e)))||!!e[Ya.termToString(t)]}Mt.isTermGrounded=ex;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Mt,t)})(pC);var Ez=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Oz=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Az=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ez(e,t,r);return Oz(e,t),e},$C=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wd,"__esModule",{value:!0});Wd.toSparqlJs=Wd.toSparql=void 0;const xz=pC,Rz=Zt,UC=_0,qC=Az(Sf),Iz=$C(Tf),Oi=$C(g0),tt=qC.types,kl=qC.expressionTypes;let qr;const Gc=new Iz.default;function Pz(t,e={}){return new UC.Generator(e).stringify(VC(t))}Wd.toSparql=Pz;function VC(t){HC(),t=mW(t);let e=Lr(t);return e.type==="group"?e.patterns[0]:e}Wd.toSparqlJs=VC;function HC(){qr={project:!1,extend:[],group:[],aggregates:[],order:[]}}function Lr(t){switch(t.type!==tt.EXTEND&&t.type!==tt.ORDER_BY&&t.type!==tt.GRAPH&&(qr.project=!1),t.type){case tt.EXPRESSION:return Ws(t);case tt.ASK:return M3(t,tt.ASK);case tt.BGP:return Bz(t);case tt.CONSTRUCT:return $z(t);case tt.DESCRIBE:return M3(t,tt.DESCRIBE);case tt.DISTINCT:return Uz(t);case tt.EXTEND:return qz(t);case tt.FROM:return Vz(t);case tt.FILTER:return Hz(t);case tt.GRAPH:return kz(t);case tt.GROUP:return Qz(t);case tt.JOIN:return Gz(t);case tt.LEFT_JOIN:return zz(t);case tt.MINUS:return Wz(t);case tt.NOP:return{};case tt.ORDER_BY:return Xz(t);case tt.PATH:return Kz(t);case tt.PATTERN:return Ap(t);case tt.PROJECT:return M3(t,tt.PROJECT);case tt.REDUCED:return Jz(t);case tt.SERVICE:return Yz(t);case tt.SLICE:return Zz(t);case tt.UNION:return eW(t);case tt.VALUES:return tW(t);case tt.COMPOSITE_UPDATE:return lW(t);case tt.DELETE_INSERT:return dW(t);case tt.LOAD:return fW(t);case tt.CLEAR:return hW(t);case tt.CREATE:return pW(t);case tt.DROP:return yW(t);case tt.ADD:return bW(t);case tt.MOVE:return _W(t);case tt.COPY:return gW(t)}throw new Error(`Unknown Operation type ${t.type}`)}function Ws(t){switch(t.expressionType){case kl.AGGREGATE:return Dz(t);case kl.EXISTENCE:return Nz(t);case kl.NAMED:return jz(t);case kl.OPERATOR:return Cz(t);case kl.TERM:return Mz(t);case kl.WILDCARD:return Fz(t)}throw new Error(`Unknown Expression Operation type ${t.expressionType}`)}function _l(t){switch(t.type){case tt.ALT:return rW(t);case tt.INV:return nW(t);case tt.LINK:return iW(t);case tt.NPS:return aW(t);case tt.ONE_OR_MORE_PATH:return sW(t);case tt.SEQ:return oW(t);case tt.ZERO_OR_MORE_PATH:return uW(t);case tt.ZERO_OR_ONE_PATH:return cW(t)}throw new Error(`Unknown Path type ${t.type}`)}function pd(t){return(0,Rz.termToString)(t)}function Dz(t){const e={expression:Ws(t.expression),type:"aggregate",aggregation:t.aggregator,distinct:t.distinct};return t.separator&&(e.separator=t.separator),e}function Nz(t){return{type:"operation",operator:t.not?"notexists":"exists",args:Oi.default.flatten([Lr(t.input)])}}function jz(t){return{type:"functionCall",function:t.name,args:t.args.map(Ws)}}function Cz(t){if(t.operator==="desc"){const r={expression:Ws(t.args[0])};return r.descending=!0,r}const e={type:"operation",operator:t.operator,args:t.args.map(Ws)};return(e.operator==="in"||e.operator==="notin")&&(e.args=[e.args[0]].concat([e.args.slice(1)])),e}function Mz(t){return t.term}function Fz(t){return t.wildcard}function Lz(t){return t}function Bz(t){let e=t.patterns.map(Ap);return e.length===0?null:{type:"bgp",triples:e}}function $z(t){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:t.template.map(Ap),where:Oi.default.flatten([Lr(t.input)])}}function Uz(t){let e=Lr(t.input);return e.patterns[0].distinct=!0,e}function qz(t){return qr.project?(qr.extend.push(t),Lr(t.input)):Oi.default.flatten([Lr(t.input),{type:"bind",variable:t.variable,expression:Ws(t.expression)}])}function Vz(t){const e=Lr(t.input);let r=e;return e.type==="group"&&(r=e.patterns[0]),r.from={default:t.default,named:t.named},e}function Hz(t){return{type:"group",patterns:Oi.default.flatten([Lr(t.input),{type:"filter",expression:Ws(t.expression)}])}}function kz(t){return{type:"graph",patterns:Oi.default.flatten([Lr(t.input)]),name:t.name}}function Qz(t){const e=Lr(t.input),r=t.aggregates.map(Lz);return qr.aggregates.push(...r),qr.group.push(...t.variables),e}function Gz(t){return Oi.default.flatten(t.input.map(Lr)).reduce((r,n)=>(n.type!=="bgp"||r.length==0||r[r.length-1].type!=="bgp"?r.push(n):r[r.length-1].triples.push(...n.triples),r),[])}function zz(t){const e={type:"optional",patterns:[Lr(t.input[1])]};return t.expression&&e.patterns.push({type:"filter",expression:Ws(t.expression)}),e.patterns=Oi.default.flatten(e.patterns),Oi.default.flatten([Lr(t.input[0]),e])}function Wz(t){let e=Lr(t.input[1]);return e.type==="group"&&(e=e.patterns),Array.isArray(e)||(e=[e]),Oi.default.flatten([Lr(t.input[0]),{type:"minus",patterns:e}])}function Xz(t){return qr.order.push(...t.expressions),Lr(t.input)}function Kz(t){return{type:"bgp",triples:[{subject:t.subject,predicate:_l(t.predicate),object:t.object}]}}function Ap(t){return{subject:t.subject,predicate:t.predicate,object:t.object}}function Ib(t,e){let r=Oi.default.isSimpleTerm(t)?pd(t):t;if(typeof r=="string"){if(e[r])return e[r]}else if(Array.isArray(t))t=t.map(n=>Ib(n,e));else for(let n of Object.keys(t))t[n]=Ib(t[n],e);return t}function M3(t,e){const r={type:"query",prefixes:{}},n=r;let a;e===tt.PROJECT?(r.queryType="SELECT",a=t.variables):e===tt.ASK?r.queryType="ASK":e===tt.DESCRIBE&&(r.queryType="DESCRIBE",a=t.terms);const s=qr.extend,o=qr.group,u=qr.aggregates,c=qr.order;HC(),qr.project=!0;let l=Oi.default.flatten([Lr(t.input)]);l.length===1&&l[0].type==="group"&&(l=l[0].patterns),r.where=l;let d={};for(let h of qr.aggregates)d[pd(h.variable)]=Ws(h);let f={};for(let h=qr.extend.length-1;h>=0;--h){let p=qr.extend[h];f[pd(p.variable)]=Ib(Ws(p.expression),d)}if(qr.group.length>0&&(n.group=qr.group.map(h=>{let p=pd(h);if(f[p]){let b=f[p];return delete f[p],{variable:h,expression:b}}return{expression:h}})),qr.order.length>0&&(n.order=qr.order.map(Lr).map(h=>h.descending?h:{expression:h})),a&&(n.variables=a.map(h=>{let p=pd(h);return f[p]?{variable:h,expression:f[p]}:h}),n.variables.length===0&&(n.variables=[new UC.Wildcard])),r.where.length>0&&r.where[r.where.length-1].type==="filter"){const h=r.where[r.where.length-1];rO(h,Object.keys(d))&&(n.having=Oi.default.flatten([Ib(h.expression,d)]),r.where.splice(-1))}return qr.extend=s,qr.group=o,qr.aggregates=u,qr.order=c,{type:"group",patterns:[n]}}function rO(t,e){return Oi.default.isSimpleTerm(t)?e.indexOf(pd(t))>=0:Array.isArray(t)?t.some(r=>rO(r,e)):t===Object(t)?Object.keys(t).some(r=>rO(t[r],e)):e.indexOf(t)>=0}function Jz(t){let e=Lr(t.input);return e.patterns[0].reduced=!0,e}function Yz(t){let e=Lr(t.input);return e.type==="group"&&(e=e.patterns),Array.isArray(e)||(e=[e]),{type:"service",name:t.name,silent:t.silent,patterns:e}}function Zz(t){let e=Lr(t.input),r=e;return e.type&&e.type==="group"&&(r=e.patterns[0]),t.start!==0&&(r.offset=t.start),t.length!==void 0&&(r.limit=t.length),e}function eW(t){return{type:"union",patterns:Oi.default.flatten(t.input.map(Lr))}}function tW(t){return{type:"values",values:t.bindings.map(e=>{let r={};for(let n of t.variables){let a=`?${n.value}`;e[a]?r[a]=e[a]:r[a]=void 0}return r})}}function rW(t){const e=t.input.map(_l);return e.every(r=>"pathType"in r&&r.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:Oi.default.flatten(e.map(r=>r.items))}]}:{type:"path",pathType:"|",items:e}}function nW(t){if(t.path.type===tt.NPS){const e=t.path.iris.map(r=>({type:"path",pathType:"^",items:[r]}));return e.length<=1?{type:"path",pathType:"!",items:e}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:e}]}}return{type:"path",pathType:"^",items:[_l(t.path)]}}function iW(t){return t.iri}function aW(t){return t.iris.length<=1?{type:"path",pathType:"!",items:t.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:t.iris}]}}function sW(t){return{type:"path",pathType:"+",items:[_l(t.path)]}}function oW(t){return{type:"path",pathType:"/",items:t.input.map(_l)}}function uW(t){return{type:"path",pathType:"*",items:[_l(t.path)]}}function cW(t){return{type:"path",pathType:"?",items:[_l(t.path)]}}function lW(t){const e=t.updates.map(r=>Lr(r).updates[0]);return{prefixes:{},type:"update",updates:e}}function dW(t){var e;let r=t.where,n;if(r&&r.type===tt.FROM){let s=r;r=s.input,n={default:s.default,named:s.named}}const a=[{updateType:"insertdelete",delete:IP(t.delete||[]),insert:IP(t.insert||[])}];if(n&&(a[0].using=n),!r||r.type===tt.BGP&&r.patterns.length===0)a[0].where=[];else{const s=[];let o=Lr(Pb(r,s));if(o.type==="group"?a[0].where=o.patterns:a[0].where=[o],s.length>0){if(s.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((e=s[0])===null||e===void 0?void 0:e.value)!==""&&(a[0].where=[{type:"graph",patterns:a[0].where,name:s[0]}])}}return!t.delete&&!t.where?(a[0].updateType="insert",delete a[0].delete,delete a[0].where):!t.insert&&!t.where?(delete a[0].insert,delete a[0].where,t.delete.some(s=>s.subject.termType==="Variable"||s.predicate.termType==="Variable"||s.object.termType==="Variable")?a[0].updateType="deletewhere":a[0].updateType="delete"):!t.insert&&t.where&&t.where.type==="bgp"&&(0,xz.isomorphic)(t.delete,t.where.patterns)&&(delete a[0].where,a[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:a}}function fW(t){const e=[{type:"load",silent:!!t.silent,source:t.source}];return t.destination&&(e[0].destination=t.destination),{prefixes:{},type:"update",updates:e}}function hW(t){return tx(t,"clear")}function pW(t){return tx(t,"create")}function yW(t){return tx(t,"drop")}function tx(t,e){const r=[{type:e,silent:!!t.silent}];return t.source==="DEFAULT"?r[0].graph={default:!0}:t.source==="NAMED"?r[0].graph={named:!0}:t.source==="ALL"?r[0].graph={all:!0}:r[0].graph={type:"graph",name:t.source},{prefixes:{},type:"update",updates:r}}function bW(t){return rx(t,"add")}function _W(t){return rx(t,"move")}function gW(t){return rx(t,"copy")}function rx(t,e){const r=[{type:e,silent:!!t.silent}];return r[0].source=t.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:t.source},r[0].destination=t.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:t.destination},{prefixes:{},type:"update",updates:r}}function IP(t){if(!t)return[];const e={};return t.forEach(r=>{const n=r.graph.value;e[n]||(e[n]=[]),e[n].push(r)}),Object.keys(e).map(r=>r===""?{type:"bgp",triples:e[r].map(Ap)}:{type:"graph",triples:e[r].map(Ap),name:e[r][0].graph})}function mW(t){return Pb(t,[])}function Pb(t,e){if(Array.isArray(t))return t.map(o=>Pb(o,e));if(!t.type||t.type===tt.DELETE_INSERT)return t;if((t.type===tt.PATTERN||t.type===tt.PATH)&&t.graph)return e.push(t.graph),t.graph.name!==""?t.type===tt.PATTERN?Gc.createPattern(t.subject,t.predicate,t.object):Gc.createPath(t.subject,t.predicate,t.object):t;const r={},n={},a={};for(let o of Object.keys(t)){const u=[];if(r[o]=Pb(t[o],u),u.length>0){n[o]=u;for(const c of u)a[c.value]=c}}const s=Object.keys(a);if(s.length>0)if(s.length===1&&t.type!==tt.PROJECT)e.push(a[s[0]]);else{if(t.type===tt.BGP)return vW(t,n.patterns);for(let o of Object.keys(n)){const u=r[o];Array.isArray(u)?r[o]=u.map((c,l)=>n[o][0].value===""?c:Gc.createGraph(c,n[o][l])):n[o][0].value!==""&&(r[o]=Gc.createGraph(u,n[o][0]))}}return r}function vW(t,e){var r;const n={};for(let o=0;o<t.patterns.length;++o){const u=t.patterns[o],c=e[o].value;n[c]=(r=n[c])!==null&&r!==void 0?r:{patterns:[],graph:e[o]},n[c].patterns.push(u)}let a=[];for(const[o,{patterns:u,graph:c}]of Object.entries(n)){const l=Gc.createBgp(u);a.push(o===""?l:Gc.createGraph(l,c))}let s=a[0];for(let o=1;o<a.length;++o)s=Gc.createJoin([s,a[o]]);return s}(function(t){var e=g&&g.__createBinding||(Object.create?function(d,f,h,p){p===void 0&&(p=h);var b=Object.getOwnPropertyDescriptor(f,h);(!b||("get"in b?!f.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(d,p,b)}:function(d,f,h,p){p===void 0&&(p=h),d[p]=f[h]}),r=g&&g.__setModuleDefault||(Object.create?function(d,f){Object.defineProperty(d,"default",{enumerable:!0,value:f})}:function(d,f){d.default=f}),n=g&&g.__importStar||function(d){if(d&&d.__esModule)return d;var f={};if(d!=null)for(var h in d)h!=="default"&&Object.prototype.hasOwnProperty.call(d,h)&&e(f,d,h);return r(f,d),f},a=g&&g.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.toSparqlJs=t.toSparql=t.Factory=t.Algebra=t.translate=void 0;const s=a(WA);t.translate=s.default;const o=n(Sf);t.Algebra=o;const u=a(Tf);t.Factory=u.default;const c=Wd;Object.defineProperty(t,"toSparql",{enumerable:!0,get:function(){return c.toSparql}}),Object.defineProperty(t,"toSparqlJs",{enumerable:!0,get:function(){return c.toSparqlJs}});const l=a(g0);t.Util=l.default})(gt);Object.defineProperty(al,"__esModule",{value:!0});al.materializeOperation=al.materializeTerm=void 0;const wW=$n,Ql=Zt,PP=an,SW=gt,TW=new wW.BindingsFactory;function Ts(t,e){if(t.termType==="Variable"){const r=e.get(t);if(r)return r}return t.termType==="Quad"&&(0,PP.someTermsNested)(t,r=>r.termType==="Variable")?(0,PP.mapTermsNested)(t,r=>Ts(r,e)):t}al.materializeTerm=Ts;function nO(t,e,r={}){return r={strictTargetVariables:"strictTargetVariables"in r?r.strictTargetVariables:!1,bindFilter:"bindFilter"in r?r.bindFilter:!0},SW.Util.mapOperation(t,{path(n,a){return{recurse:!1,result:a.createPath(Ts(n.subject,e),n.predicate,Ts(n.object,e),Ts(n.graph,e))}},pattern(n,a){return{recurse:!1,result:a.createPattern(Ts(n.subject,e),Ts(n.predicate,e),Ts(n.object,e),Ts(n.graph,e))}},extend(n){if(e.has(n.variable)){if(r.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,Ql.termToString)(n.variable)} in a BIND operator.`);return{recurse:!0,result:nO(n.input,e,r)}}return{recurse:!0,result:n}},group(n,a){if(r.strictTargetVariables){for(const o of n.variables)if(e.has(o))throw new Error(`Tried to bind variable ${(0,Ql.termToString)(o)} in a GROUP BY operator.`);return{recurse:!0,result:n}}const s=n.variables.filter(o=>!e.has(o));return{recurse:!0,result:a.createGroup(n.input,s,n.aggregates)}},project(n,a){if(r.strictTargetVariables){for(const u of n.variables)if(e.has(u))throw new Error(`Tried to bind variable ${(0,Ql.termToString)(u)} in a SELECT operator.`);return{recurse:!0,result:n}}const s=n.variables.filter(u=>!e.has(u)),o=TW.bindings(n.variables.map(u=>{const c=e.get(u);if(c)return[u,c]}).filter(u=>!!u));return{recurse:!1,result:a.createProject(nO(n.input,o,r),s)}},values(n,a){if(r.strictTargetVariables){for(const s of n.variables)if(e.has(s))throw new Error(`Tried to bind variable ${(0,Ql.termToString)(s)} in a VALUES operator.`)}else{const s=n.variables.filter(u=>!e.has(u)),o=n.bindings.map(u=>{const c={...u};let l=!0;return e.forEach((d,f)=>{const h=(0,Ql.termToString)(f);h in c&&(d.equals(c[h])||(l=!1),delete c[h])}),l?c:void 0}).filter(Boolean);return{recurse:!0,result:a.createValues(s,o)}}return{recurse:!1,result:n}},expression(n,a){if(!r.bindFilter)return{recurse:!1,result:n};if(n.expressionType==="term")return{recurse:!1,result:a.createTermExpression(Ts(n.term,e))};if(n.expressionType==="aggregate"&&"variable"in n&&e.has(n.variable)){if(r.strictTargetVariables)throw new Error(`Tried to bind ${(0,Ql.termToString)(n.variable)} in a ${n.aggregator} aggregate.`);return{recurse:!0,result:n}}return{recurse:!0,result:n}}})}al.materializeOperation=nO;Object.defineProperty(c0,"__esModule",{value:!0});c0.ActorQueryOperation=void 0;const du=Ut,EW=Je,DP=F_,OW=al;let NP=0;class Au extends EW.Actor{constructor(e){super(e)}static getSafeBindings(e){return Au.validateQueryOutput(e,"bindings"),e}static getSafeQuads(e){return Au.validateQueryOutput(e,"quads"),e}static getSafeBoolean(e){return Au.validateQueryOutput(e,"boolean"),e}static getSafeVoid(e){return Au.validateQueryOutput(e,"void"),e}static cachifyMetadata(e){let r;return()=>(r||(r=e(),r.then(n=>n.state.addInvalidateListener(()=>{r=void 0})).catch(()=>{})),r)}static validateQueryOutput(e,r){if(e.type!==r)throw new Error(`Invalid query output type: Expected '${r}' but got '${e.type}'`)}static getBaseExpressionContext(e){const r=e.get(du.KeysInitQuery.queryTimestamp),n=e.get(du.KeysInitQuery.baseIRI),a=e.get(du.KeysInitQuery.functionArgumentsCache)||{};if(e.has(du.KeysInitQuery.extensionFunctionCreator)&&e.has(du.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");let s=e.get(du.KeysInitQuery.extensionFunctionCreator);const o=e.get(du.KeysInitQuery.extensionFunctions);return o&&(s=u=>o[u.value]),{now:r,baseIRI:n,extensionFunctionCreator:s,functionArgumentsCache:a}}static getExpressionContext(e,r){return{...this.getBaseExpressionContext(e),bnode:n=>new DP.BlankNodeBindingsScoped(n||`BNODE_${NP++}`)}}static getAsyncExpressionContext(e,r){return{...this.getBaseExpressionContext(e),bnode:n=>Promise.resolve(new DP.BlankNodeBindingsScoped(n||`BNODE_${NP++}`)),exists:Au.createExistenceResolver(e,r)}}static createExistenceResolver(e,r){return async(n,a)=>{const s=(0,OW.materializeOperation)(n.input,a),o=await r.mediate({operation:s,context:e}),u=Au.getSafeBindings(o);return new Promise((c,l)=>{u.bindingsStream.on("end",()=>{c(!1)}),u.bindingsStream.on("error",l),u.bindingsStream.on("data",()=>{u.bindingsStream.close(),c(!0)})}).then(c=>n.not?!c:c)}}static throwOnReadOnly(e){if(e.get(du.KeysQueryOperation.readOnly))throw new Error("Attempted a write operation in read-only mode")}}c0.ActorQueryOperation=Au;var v0={};Object.defineProperty(v0,"__esModule",{value:!0});v0.ActorQueryOperationTyped=void 0;const ky=Ut,jP=c0;class AW extends jP.ActorQueryOperation{constructor(e,r){if(super({...e,operationName:r}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(e){if(!e.operation)throw new Error("Missing field 'operation' in a query operation action.");if(e.operation.type!==this.operationName)throw new Error(`Actor ${this.name} only supports ${this.operationName} operations, but got ${e.operation.type}`);const r=e.operation;return this.testOperation(r,e.context)}async run(e){const r=e.context.get(ky.KeysInitQuery.physicalQueryPlanLogger);r&&(r.logOperation(e.operation.type,void 0,e.operation,e.context.get(ky.KeysInitQuery.physicalQueryPlanNode),this.name,{}),e.context=e.context.set(ky.KeysInitQuery.physicalQueryPlanNode,e.operation));const n=e.operation,a=e.context.set(ky.KeysQueryOperation.operation,n),s=await this.runOperation(n,a);return"metadata"in s&&(s.metadata=jP.ActorQueryOperation.cachifyMetadata(s.metadata)),s}}v0.ActorQueryOperationTyped=AW;var Q_={};Object.defineProperty(Q_,"__esModule",{value:!0});Q_.ActorQueryOperationTypedMediated=void 0;const xW=v0;class RW extends xW.ActorQueryOperationTyped{constructor(e,r){super(e,r)}}Q_.ActorQueryOperationTypedMediated=RW;var G_={};Object.defineProperty(G_,"__esModule",{value:!0});G_.BusQueryOperation=void 0;const IW=Je;class PW extends IW.BusIndexed{constructor(e){super({...e,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}}G_.BusQueryOperation=PW;var z_={},Ht={},nx={exports:{}},Pd=typeof Reflect=="object"?Reflect:null,CP=Pd&&typeof Pd.apply=="function"?Pd.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},J1;Pd&&typeof Pd.ownKeys=="function"?J1=Pd.ownKeys:Object.getOwnPropertySymbols?J1=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:J1=function(e){return Object.getOwnPropertyNames(e)};function DW(t){console&&console.warn&&console.warn(t)}var kC=Number.isNaN||function(e){return e!==e};function cr(){cr.init.call(this)}nx.exports=cr;nx.exports.once=MW;cr.EventEmitter=cr;cr.prototype._events=void 0;cr.prototype._eventsCount=0;cr.prototype._maxListeners=void 0;var MP=10;function W_(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(cr,"defaultMaxListeners",{enumerable:!0,get:function(){return MP},set:function(t){if(typeof t!="number"||t<0||kC(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");MP=t}});cr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};cr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||kC(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function QC(t){return t._maxListeners===void 0?cr.defaultMaxListeners:t._maxListeners}cr.prototype.getMaxListeners=function(){return QC(this)};cr.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var a=e==="error",s=this._events;if(s!==void 0)a=a&&s.error===void 0;else if(!a)return!1;if(a){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")CP(c,this,r);else for(var l=c.length,d=KC(c,l),n=0;n<l;++n)CP(d[n],this,r);return!0};function GC(t,e,r,n){var a,s,o;if(W_(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),a=QC(t),a>0&&o.length>a&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,DW(u)}return t}cr.prototype.addListener=function(e,r){return GC(this,e,r,!1)};cr.prototype.on=cr.prototype.addListener;cr.prototype.prependListener=function(e,r){return GC(this,e,r,!0)};function NW(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function zC(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},a=NW.bind(n);return a.listener=r,n.wrapFn=a,a}cr.prototype.once=function(e,r){return W_(r),this.on(e,zC(this,e,r)),this};cr.prototype.prependOnceListener=function(e,r){return W_(r),this.prependListener(e,zC(this,e,r)),this};cr.prototype.removeListener=function(e,r){var n,a,s,o,u;if(W_(r),a=this._events,a===void 0)return this;if(n=a[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){u=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():jW(n,s),n.length===1&&(a[e]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",e,u||r)}return this};cr.prototype.off=cr.prototype.removeListener;cr.prototype.removeAllListeners=function(e){var r,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(a=0;a<s.length;++a)o=s[a],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(e,r[a]);return this};function WC(t,e,r){var n=t._events;if(n===void 0)return[];var a=n[e];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?CW(a):KC(a,a.length)}cr.prototype.listeners=function(e){return WC(this,e,!0)};cr.prototype.rawListeners=function(e){return WC(this,e,!1)};cr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):XC.call(t,e)};cr.prototype.listenerCount=XC;function XC(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}cr.prototype.eventNames=function(){return this._eventsCount>0?J1(this._events):[]};function KC(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function jW(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function CW(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function MW(t,e){return new Promise(function(r,n){function a(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",a),r([].slice.call(arguments))}JC(t,e,s,{once:!0}),e!=="error"&&FW(t,a,{once:!0})})}function FW(t,e,r){typeof t.on=="function"&&JC(t,"error",e,r)}function JC(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function a(s){n.once&&t.removeEventListener(e,a),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Rf=nx.exports,X_={};Object.defineProperty(X_,"__esModule",{value:!0});X_.LinkedList=void 0;class LW{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}get empty(){return this._head===null}push(e){const r={value:e,next:null};this._tail===null?this._head=this._tail=r:this._tail.next=this._tail=r,this._length++}shift(){if(this._head===null)return;const{value:e,next:r}=this._head;return this._head=r,r===null&&(this._tail=null),this._length--,e}clear(){this._length=0,this._head=this._tail=null}}X_.LinkedList=LW;var K_={};Object.defineProperty(K_,"__esModule",{value:!0});K_.createTaskScheduler=void 0;const BW=Promise.resolve(void 0);function $W(){const t=typeof queueMicrotask=="function"?queueMicrotask:a=>BW.then(a),e=typeof setImmediate=="function"?setImmediate:a=>setTimeout(a,0);let r=0,n=null;return a=>{n!==null?n.push(a):++r<100?t(a):(n=[a],e(()=>{for(const s of n)t(s);n=null,r=0}))}}K_.createTaskScheduler=$W;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isIterator=t.isIterable=t.isSourceExpression=t.isPromise=t.isEventEmitter=t.isFunction=t.range=t.union=t.fromIterable=t.fromIterator=t.fromArray=t.single=t.empty=t.wrap=t.WrappingIterator=t.ClonedIterator=t.UnionIterator=t.MultiTransformIterator=t.SimpleTransformIterator=t.TransformIterator=t.BufferedIterator=t.MappingIterator=t.DESTINATION=t.identity=t.IntegerIterator=t.ArrayIterator=t.SingletonIterator=t.EmptyIterator=t.AsyncIterator=t.DESTROYED=t.ENDED=t.CLOSED=t.CLOSING=t.OPEN=t.INIT=t.setTaskScheduler=t.getTaskScheduler=t.scheduleTask=t.LinkedList=void 0;const e=Rf,r=X_;Object.defineProperty(t,"LinkedList",{enumerable:!0,get:function(){return r.LinkedList}});let a=K_.createTaskScheduler();function s(m){a(m)}t.scheduleTask=s;function o(){return a}t.getTaskScheduler=o;function u(m){a=m}t.setTaskScheduler=u,t.INIT=1,t.OPEN=2,t.CLOSING=4,t.CLOSED=8,t.ENDED=16,t.DESTROYED=32;class c extends e.EventEmitter{constructor(y=t.OPEN){super(),this._readable=!1,this._state=y,this.on("newListener",l)}_changeState(y,v=!1){const j=y>this._state&&this._state<t.ENDED;return j&&(this._state=y,y===t.ENDED&&(v?a(()=>this.emit("end")):this.emit("end"))),j}read(){return null}forEach(y,v){this.on("data",xe(y,v))}close(){this._changeState(t.CLOSED)&&this._endAsync()}destroy(y){this.done||this._destroy(y,v=>{y=y||v,y&&this.emit("error",y),this._end(!0)})}_destroy(y,v){v()}_end(y=!1){this._changeState(y?t.DESTROYED:t.ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){a(()=>this._end())}get readable(){return this._readable}set readable(y){y=!!y&&!this.done,this._readable!==y&&(this._readable=y,y&&a(()=>this.emit("readable")))}get closed(){return this._state>=t.CLOSING}get ended(){return this._state===t.ENDED}get destroyed(){return this._state===t.DESTROYED}get done(){return this._state>=t.ENDED}toString(){const y=this._toStringDetails();return`[${this.constructor.name}${y?` ${y}`:""}]`}_toStringDetails(){return""}toArray(y){const v=[],j=typeof(y==null?void 0:y.limit)=="number"?y.limit:1/0;return this.ended||j<=0?Promise.resolve(v):new Promise((V,q)=>{const G=()=>V(v),Y=ee=>{v.push(ee),v.length>=j&&(this.removeListener("error",q),this.removeListener("data",Y),this.removeListener("end",G),V(v))};this.on("error",q),this.on("data",Y),this.on("end",G)})}getProperty(y,v){const j=this._properties;if(!v)return j&&j[y];if(j&&y in j)a(()=>v(j[y]));else{let V;(V=this._propertyCallbacks)||(this._propertyCallbacks=V=Object.create(null)),y in V?V[y].push(v):V[y]=[v]}}setProperty(y,v){const j=this._properties||(this._properties=Object.create(null));j[y]=v;const V=this._propertyCallbacks||{},q=V[y];if(q){delete V[y],a(()=>{for(const G of q)G(v)});for(y in V)return;delete this._propertyCallbacks}}getProperties(){const y=this._properties,v={};for(const j in y)v[j]=y[j];return v}setProperties(y){for(const v in y)this.setProperty(v,y[v])}copyProperties(y,v){for(const j of v)y.getProperty(j,V=>this.setProperty(j,V))}transform(y){return new R(this,y)}map(y,v){return new w(this,xe(y,v))}filter(y,v){return this.map(function(j){return y.call(v||this,j)?j:null})}uniq(y=E){const v=new Set;return this.filter(function(j){const V=y.call(this,j);return v.has(V)?!1:(v.add(V),!0)})}prepend(y){return this.transform({prepend:y})}append(y){return this.transform({append:y})}surround(y,v){return this.transform({prepend:y,append:v})}skip(y){return this.map(v=>y-- >0?null:v)}take(y){return this.transform({limit:y})}range(y,v){return this.transform({offset:y,limit:Math.max(v-y+1,0)})}clone(){return new $(this)}}t.AsyncIterator=c;function l(m){m==="data"&&(this.removeListener("newListener",l),f(this,"readable",d),this.readable&&a(()=>d.call(this)))}function d(){let m;for(;this.listenerCount("data")!==0&&(m=this.read())!==null;)this.emit("data",m);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",d),f(this,"newListener",l))}function f(m,y,v){m.listeners(y).includes(v)||m.on(y,v)}class h extends c{constructor(){super(),this._changeState(t.ENDED,!0)}}t.EmptyIterator=h;class p extends c{constructor(y){super(),this._item=y,y===null?this.close():this.readable=!0}read(){const y=this._item;return this._item=null,this.close(),y}_toStringDetails(){return this._item===null?"":`(${this._item})`}}t.SingletonIterator=p;class b extends c{constructor(y=[],{autoStart:v=!0,preserve:j=!0}={}){super();const V=j||!Array.isArray(y)?[...y]:y;this._index=0,this._sourceStarted=v!==!1,this._truncateThreshold=j?-1:64,this._sourceStarted&&V.length===0?this.close():this._buffer=V,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let y=null;return this._buffer&&(this._index<this._buffer.length&&(y=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),y}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(y,v){delete this._buffer,v()}toArray(y={}){if(!this._buffer)return Promise.resolve([]);const{length:v}=this._buffer,j=this._index,V=typeof y.limit!="number"?v:j+y.limit,q=this._buffer.slice(j,V);return this._index=V,V>=v&&this.close(),Promise.resolve(q)}}t.ArrayIterator=b;class _ extends c{constructor({start:y=0,step:v=1,end:j}={}){super(),Number.isFinite(y)&&(y=Math.trunc(y)),this._next=y,Number.isFinite(v)&&(v=Math.trunc(v)),this._step=v;const V=v>=0,q=V?1/0:-1/0;Number.isFinite(j)?j=Math.trunc(j):j!==-q&&(j=q),this._last=j,!Number.isFinite(y)||(V?y>j:y<j)?this.close():this.readable=!0}read(){if(this.closed)return null;const y=this._next,v=this._step,j=this._last,V=this._next+=v;return(v>=0?V>j:V<j)&&this.close(),y}_toStringDetails(){return`(${this._next}...${this._last})`}}t.IntegerIterator=_;function E(m){return m}t.identity=E,t.DESTINATION=Symbol("destination");class w extends c{constructor(y,v=E,j={}){super(),this._map=v,this._source=O(y),this._destroySource=j.destroySource!==!1,y.done?this.close():(this._source[t.DESTINATION]=this,this._source.on("end",U),this._source.on("error",D),this._source.on("readable",I),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let y,v;for(;(y=this._source.read())!==null;)if((v=this._map(y))!==null)return v}this.readable=!1,this._source.done&&this.close()}return null}_end(y){this._source.removeListener("end",U),this._source.removeListener("error",D),this._source.removeListener("readable",I),delete this._source[t.DESTINATION],this._destroySource&&this._source.destroy(),super._end(y)}}t.MappingIterator=w;function O(m,y=!1){if(!m||!oe(m.read)||!oe(m.on))throw new TypeError(`Invalid source: ${m}`);if(!y&&m[t.DESTINATION])throw new Error("The source already has a destination");return m}class A extends c{constructor({maxBufferSize:y=4,autoStart:v=!0}={}){super(t.INIT),this._buffer=new r.LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=y,a(()=>this._init(v)),this._sourceStarted=v!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(y){y!==1/0&&(y=Number.isFinite(y)?Math.max(Math.trunc(y),1):4),this._maxBufferSize!==y&&(this._maxBufferSize=y,this._state===t.OPEN&&this._fillBuffer())}_init(y){let v=!1;this._reading=!0,this._begin(()=>{if(v)throw new Error("done callback called multiple times");v=!0,this._reading=!1,this._changeState(t.OPEN),y?this._fillBufferAsync():this.readable=!0})}_begin(y){y()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const y=this._buffer;let v;return y.empty?(v=null,this.readable=!1):v=y.shift(),!this._reading&&y.length<this._maxBufferSize&&(this.closed?y.empty&&this._endAsync():this._fillBufferAsync()),v}_read(y,v){v()}_push(y){this.done||(this._pushedCount++,this._buffer.push(y),this.readable=!0)}_fillBuffer(){let y;this._reading||(this.closed?this._completeClose():(y=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(y,()=>{if(!y)throw new Error("done callback called multiple times");y=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,a(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(t.CLOSING):this._completeClose()}_completeClose(){this._changeState(t.CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(y,v){this._buffer.clear(),v()}_flush(y){y()}_toStringDetails(){const y=this._buffer;return`{${y.empty?"":`next: ${y.first}, `}buffer: ${y.length}}`}}t.BufferedIterator=A;class T extends A{constructor(y,v=y||{}){super(v),this._boundPush=j=>this._push(j),pe(y)||(y=v.source),J(y)?this.source=y:y&&(this._createSource=le(y)?()=>y:y,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!v.optional,this._destroySource=v.destroySource!==!1}get source(){return oe(this._createSource)&&this._loadSourceAsync(),this._source}set source(y){const v=this._source=this._validateSource(y);v[t.DESTINATION]=this,this.done?this._destroySource&&v.destroy():v.done?this.close():(v.on("end",H),v.on("readable",N),v.on("error",D))}_loadSourceAsync(){oe(this._createSource)&&(Promise.resolve(this._createSource()).then(y=>{delete this._createSource,this.source=y,this._fillBuffer()},y=>this.emit("error",y)),this._createSource=null)}_validateSource(y,v=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return O(y,v)}_read(y,v){const j=()=>{this._pushedCount<y&&!this.closed?a(()=>this._readAndTransform(j,v)):v()};this._readAndTransform(j,v)}_readAndTransform(y,v){let j;const V=this.source;!V||V.done||(j=V.read())===null?v():this._optional?this._optionalTransform(j,y):this._transform(j,y,this._boundPush)}_optionalTransform(y,v){const j=this._pushedCount;this._transform(y,()=>{j===this._pushedCount&&this._push(y),v()},this._boundPush)}_transform(y,v,j){j(y),v()}_closeWhenDone(){this.close()}_end(y){const v=this._source;v&&(v.removeListener("end",H),v.removeListener("error",D),v.removeListener("readable",N),delete v[t.DESTINATION],this._destroySource&&v.destroy()),super._end(y)}}t.TransformIterator=T;function I(){this[t.DESTINATION].readable=!0}function D(m){this[t.DESTINATION].emit("error",m)}function U(){this[t.DESTINATION].close()}function H(){this[t.DESTINATION]._closeWhenDone()}function N(){this[t.DESTINATION]._sourceStarted!==!1&&this[t.DESTINATION]._fillBuffer()}class R extends T{constructor(y,v){if(super(y,v),this._offset=0,this._limit=1/0,this._filter=j=>!0,v=v||(pe(y)?null:y),v){const j=oe(v)?v:v.transform,{limit:V,offset:q,filter:G,map:Y,prepend:ee,append:ae}=v;q===1/0||V===-1/0?this._limit=0:(Number.isFinite(q)&&(this._offset=Math.max(Math.trunc(q),0)),Number.isFinite(V)&&(this._limit=Math.max(Math.trunc(V),0)),oe(G)&&(this._filter=G),oe(Y)&&(this._map=Y),this._transform=oe(j)?j:null),ee&&(this._prepender=J(ee)?ee:he(ee)),ae&&(this._appender=J(ae)?ae:he(ae))}}_read(y,v){const j=()=>this._readAndTransformSimple(y,V,v);this._readAndTransformSimple(y,V,v);function V(){a(j)}}_readAndTransformSimple(y,v,j){let V;const{source:q}=this;if(!q||q.done){j();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<y&&(V=q.read())!==null;){if(!this._filter(V)||this._offset!==0&&this._offset--)continue;const G=typeof this._map>"u"?V:this._map(V);if(G===null)this._optional&&this._push(V);else if(!oe(this._transform))this._push(G);else{this._optional?this._optionalTransform(G,v):this._transform(G,v,this._boundPush);return}--this._limit===0&&this.close()}j()}_begin(y){this._insert(this._prepender,y),delete this._prepender}_flush(y){this._insert(this._appender,y),delete this._appender}_insert(y,v){const j=q=>this._push(q);!y||y.done?v():(y.on("data",j),y.on("end",V));function V(){y.removeListener("data",j),y.removeListener("end",V),v()}}}t.SimpleTransformIterator=R;class F extends T{constructor(y,v){if(super(y,v),this._transformerQueue=[],v){const j=oe(v)?v:v.multiTransform;j&&(this._createTransformer=j)}}_read(y,v){const j=this._transformerQueue,V=this._optional;let q,G;for(;(q=j[0])&&q.transformer.done;){V&&q.item!==null&&(y--,this._push(q.item)),j.shift();const{transformer:ee}=q;ee.removeListener("end",N),ee.removeListener("readable",N),ee.removeListener("error",D)}const{source:Y}=this;for(;Y&&!Y.done&&j.length<this.maxBufferSize&&(G=Y.read(),G!==null);){const ee=this._createTransformer(G)||new h;ee[t.DESTINATION]=this,ee.on("end",N),ee.on("readable",N),ee.on("error",D),j.push({transformer:ee,item:G})}if(q=j[0],q){const{transformer:ee}=q;for(;y-- >0&&(G=ee.read())!==null;)this._push(G),V&&(q.item=null)}else Y&&Y.done&&this.close();v()}_createTransformer(y){return new p(y)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(y){if(super._end(y),this._destroySource)for(const v of this._transformerQueue)v.transformer.destroy()}}t.MultiTransformIterator=F;class X extends A{constructor(y,v={}){super(v),this._sources=[],this._currentSource=-1;const j=v.autoStart!==!1;if(J(y))y.on("error",V=>this.emit("error",V)),this._pending={loading:!1,sources:y},j&&this._loadSources();else if(Array.isArray(y)&&y.length>0)for(const V of y)this._addSource(V);else j&&this.close();this._destroySources=v.destroySources!==!1}_loadSources(){const y=this._pending.sources;this._pending.loading=!0,y.done?(delete this._pending,this.close()):(y.on("data",v=>{this._addSource(v),this._fillBufferAsync()}),y.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(y){le(y)&&(y=se(y)),y.done||(this._sources.push(y),y[t.DESTINATION]=this,y.on("error",D),y.on("readable",N),y.on("end",ne))}_removeEmptySources(){this._sources=this._sources.filter((y,v)=>(y.done&&v<=this._currentSource&&this._currentSource--,!y.done)),this._fillBuffer()}_read(y,v){var j;((j=this._pending)===null||j===void 0?void 0:j.loading)===!1&&this._loadSources();let V=0,q;for(;V!==(V=y);)for(let G=0;G<this._sources.length&&y>0;G++)this._currentSource=(this._currentSource+1)%this._sources.length,(q=this._sources[this._currentSource].read())!==null&&(y--,this._push(q));!this._pending&&this._sources.length===0&&this.close(),v()}_end(y=!1){if(super._end(y),this._destroySources){for(const v of this._sources)v.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}t.UnionIterator=X;function ne(){this[t.DESTINATION]._removeEmptySources()}class $ extends T{constructor(y){super(y,{autoStart:!1}),this._readPosition=0,this._reading=!1,y&&(this.readable=!0)}_init(){}close(){c.prototype.close.call(this)}get source(){return super.source}set source(y){const v=this._source=this._validateSource(y),j=v&&v[t.DESTINATION]||(v[t.DESTINATION]=new C(v));this.done?this._destroySource&&v.destroy():j.endsAt(0)?this.close():(j.register(this),(v._sourceStarted===!1||j.readAt(0)!==null)&&(this.readable=!0));const V=this._propertyCallbacks;for(const q in V){const G=V[q];for(const Y of G)this._getSourceProperty(q,Y)}}_validateSource(y,v=!1){const j=y&&y[t.DESTINATION];return super._validateSource(y,!j||j instanceof C)}getProperty(y,v){const{source:j}=this,V=this._properties,q=V&&y in V;if(!v)return q?V&&V[y]:j&&j.getProperty(y);super.getProperty(y,v),j&&!q&&this._getSourceProperty(y,v)}_getSourceProperty(y,v){this.source.getProperty(y,j=>{(!this._properties||!(y in this._properties))&&v(j)})}getProperties(){const y=this.source?this.source.getProperties():{},v=this._properties;for(const j in v)y[j]=v[j];return y}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const y=this.source;let v=null;if(!this.done&&y){const j=y[t.DESTINATION];(v=j.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,j.endsAt(this._readPosition)&&this.close()}return v}_end(y){const v=this.source,j=v==null?void 0:v[t.DESTINATION];j&&j.unregister(this),A.prototype._end.call(this,y)}}t.ClonedIterator=$;class C{constructor(y){if(this._history=[],this._trackers=new Set,this._source=y,!y.done){const v=()=>{for(const q of this._trackers)q.readable=!0},j=q=>{for(const G of this._trackers)G.emit("error",q)},V=()=>{for(const q of this._trackers)q._sourceStarted!==!1&&q._readPosition===this._history.length&&q.close();this._trackers.clear(),y.removeListener("end",V),y.removeListener("error",j),y.removeListener("readable",v)};y.on("end",V),y.on("error",j),y.on("readable",v)}}register(y){this._source.done||this._trackers.add(y)}unregister(y){this._trackers.delete(y)}readAt(y){let v=null;return y<this._history.length?v=this._history[y]:!this._source.done&&(v=this._source.read())!==null&&(this._history[y]=v),v}endsAt(y){return this._source.done&&this._history.length===y}}class Q extends c{constructor(y,v){super(),this._source=null,this._destroySource=(v==null?void 0:v.destroySource)!==!1,le(y)?(this._source=new c,y.then(j=>{this._source=null,this.source=j}).catch(j=>this.emit("error",j))):y&&(this.source=y)}set source(y){let v=y;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(L(v)&&(v=v[Symbol.iterator]()),P(v)){let j=v;v=new e.EventEmitter,v.read=()=>{if(j!==null){let V;for(;!(V=j.next()).done;)if(V.value!==null)return V.value;j=null,this.close()}return null}}else v=O(v);if(this.done){this._destroySource&&oe(v.destroy)&&v.destroy();return}v[t.DESTINATION]=this,v.on("end",U),v.on("error",D),v.on("readable",I),this._source=v,this.readable=v.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const y=this._source.read();if(y!==null)return y;this.readable=!1}return null}_end(y=!1){this._source!==null&&(this._source.removeListener("end",U),this._source.removeListener("error",D),this._source.removeListener("readable",I),delete this._source[t.DESTINATION],this._destroySource&&oe(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(y)}}t.WrappingIterator=Q;function se(m,y){if(y&&("autoStart"in y||"optional"in y||"source"in y||"maxBufferSize"in y))return m&&!J(m)&&(m=new Q(m)),new T(m,y);if(!m)return ie();if(le(m))return new Q(m,y);if(m instanceof c)return m;if(Array.isArray(m))return he(m);if(L(m)||P(m)||J(m))return new Q(m,y);throw new TypeError(`Invalid source: ${m}`)}t.wrap=se;function ie(){return new h}t.empty=ie;function be(m){return new p(m)}t.single=be;function he(m){return new b(m)}t.fromArray=he;function Te(m){return new Q(m)}t.fromIterator=Te;function Ne(m){return new Q(m)}t.fromIterable=Ne;function ye(m){return new X(m)}t.union=ye;function ce(m,y,v){return new _({start:m,end:y,step:v})}t.range=ce;function xe(m,y){return y?m.bind(y):m}function oe(m){return typeof m=="function"}t.isFunction=oe;function J(m){return oe(m==null?void 0:m.on)}t.isEventEmitter=J;function le(m){return oe(m==null?void 0:m.then)}t.isPromise=le;function pe(m){return m&&(J(m)||le(m)||oe(m))}t.isSourceExpression=pe;function L(m){return m&&Symbol.iterator in m}t.isIterable=L;function P(m){return oe(m==null?void 0:m.next)}t.isIterator=P})(Ht);Object.defineProperty(z_,"__esModule",{value:!0});z_.ClosableTransformIterator=void 0;const UW=Ht;class qW extends UW.TransformIterator{constructor(e,r){super(e,r),this.onClose=r.onClose}_end(e){this.onClose(),super._end(e)}}z_.ClosableTransformIterator=qW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(c0,t),r(v0,t),r(Q_,t),r(al,t),r(G_,t),r(z_,t)})(ct);var J_={};Object.defineProperty(J_,"__esModule",{value:!0});J_.MemoryPhysicalQueryPlanLogger=void 0;const Qy=Zt;class VW{constructor(){this.children=new Map}logOperation(e,r,n,a,s,o){const u={actor:s,logicalOperator:e,physicalOperator:r,rawNode:n,children:[],metadata:o};if(this.children.set(n,u.children),this.rootNode){if(!a)throw new Error("Detected more than one parent-less node");const c=this.children.get(a);if(!c)throw new Error("Could not find parent node");c.push(u)}else{if(a)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=u}}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(e){return{logical:e.logicalOperator,physical:e.physicalOperator,...this.getLogicalMetadata(e.rawNode),...e.metadata,...e.children.length>0?{children:e.children.map(r=>this.planNodeToJson(r))}:{}}}getLogicalMetadata(e){if("type"in e){const r=e;switch(r.type){case"pattern":return{pattern:this.quadToString(r)};case"project":return{variables:r.variables.map(n=>n.value)}}}return{}}quadToString(e){return`${(0,Qy.termToString)(e.subject)} ${(0,Qy.termToString)(e.predicate)} ${(0,Qy.termToString)(e.object)}${e.graph.termType==="DefaultGraph"?"":` ${(0,Qy.termToString)(e.graph)}`}`}}J_.MemoryPhysicalQueryPlanLogger=VW;Object.defineProperty(M_,"__esModule",{value:!0});M_.QueryEngineBase=void 0;const HW=ct,mn=Ut,Jf=Je,kW=J_;class Db{constructor(e){this.actorInitQuery=e,this.defaultFunctionArgumentsCache={}}async queryBindings(e,r){return this.queryOfType(e,r,"bindings")}async queryQuads(e,r){return this.queryOfType(e,r,"quads")}async queryBoolean(e,r){return this.queryOfType(e,r,"boolean")}async queryVoid(e,r){return this.queryOfType(e,r,"void")}async queryOfType(e,r,n){const a=await this.query(e,r);if(a.resultType===n)return await a.execute();throw new Error(`Query result type '${n}' was expected, while '${a.resultType}' was found.`)}async query(e,r){const n=await this.queryOrExplain(e,r);if("explain"in n)throw new Error("Tried to explain a query when in query-only mode");return n}async explain(e,r,n){return r.explain=n,await this.queryOrExplain(e,r)}async queryOrExplain(e,r){r=r||{};for(const h in r)this.actorInitQuery.contextKeyShortcuts[h]&&(r[this.actorInitQuery.contextKeyShortcuts[h]]=r[h],delete r[h]);let n=new Jf.ActionContext(r),a={language:"sparql",version:"1.1"};n.has(mn.KeysInitQuery.queryFormat)&&(a=n.get(mn.KeysInitQuery.queryFormat),n=n.delete(mn.KeysInitQuery.queryFormat),a.language==="graphql"&&(n=n.setDefault(mn.KeysInitQuery.graphqlSingularizeVariables,{})));const s=n.get(mn.KeysInitQuery.baseIRI);n=n.setDefault(mn.KeysInitQuery.queryTimestamp,new Date).setDefault(mn.KeysRdfResolveQuadPattern.sourceIds,new Map).setDefault(mn.KeysCore.log,this.actorInitQuery.logger).setDefault(mn.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(mn.KeysRdfResolveQuadPattern.hypermediaSourcesAggregatedStores,new Map),n=(await this.actorInitQuery.mediatorContextPreprocess.mediate({context:n})).context;const o=n.get(mn.KeysInitQuery.explain);let u;if(typeof e=="string"){n=n.set(mn.KeysInitQuery.queryString,e);const h=await this.actorInitQuery.mediatorQueryParse.mediate({context:n,query:e,queryFormat:a,baseIRI:s});u=h.operation,h.baseIRI&&(n=n.set(mn.KeysInitQuery.baseIRI,h.baseIRI))}else u=e;if(o==="parsed")return{explain:!0,type:o,data:u};n.has(mn.KeysInitQuery.initialBindings)&&(u=(0,HW.materializeOperation)(u,n.get(mn.KeysInitQuery.initialBindings)),n=n.delete(mn.KeysInitQuery.queryString));const c=await this.actorInitQuery.mediatorOptimizeQueryOperation.mediate({context:n,operation:u});if(u=c.operation,n=c.context||n,o==="logical")return{explain:!0,type:o,data:u};n=n.set(mn.KeysInitQuery.query,u);let l;o==="physical"&&(l=new kW.MemoryPhysicalQueryPlanLogger,n=n.set(mn.KeysInitQuery.physicalQueryPlanLogger,l));const d=await this.actorInitQuery.mediatorQueryOperation.mediate({context:n,operation:u});d.context=n;const f=Db.internalToFinalResult(d);if(l){switch(f.resultType){case"bindings":await(await f.execute()).toArray();break;case"quads":await(await f.execute()).toArray();break;case"boolean":await f.execute();break;case"void":await f.execute();break}return{explain:!0,type:o,data:l.toJson()}}return f}async getResultMediaTypes(e){return e=Jf.ActionContext.ensureActionContext(e),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(e){return e=Jf.ActionContext.ensureActionContext(e),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(e,r,n){if(n=Jf.ActionContext.ensureActionContext(n),!r)switch(e.resultType){case"bindings":r="application/json";break;case"quads":r="application/trig";break;default:r="simple";break}const a={...await Db.finalToInternalResult(e),context:n};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:n,handle:a,handleMediaType:r})).handle}invalidateHttpCache(e,r){return r=Jf.ActionContext.ensureActionContext(r),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:e,context:r})}static internalToFinalResult(e){switch(e.type){case"bindings":return{resultType:"bindings",execute:async()=>e.bindingsStream,metadata:async()=>await e.metadata(),context:e.context};case"quads":return{resultType:"quads",execute:async()=>e.quadStream,metadata:async()=>await e.metadata(),context:e.context};case"boolean":return{resultType:"boolean",execute:async()=>e.execute(),context:e.context};case"void":return{resultType:"void",execute:async()=>e.execute(),context:e.context}}}static async finalToInternalResult(e){switch(e.resultType){case"bindings":return{type:"bindings",bindingsStream:await e.execute(),metadata:async()=>await e.metadata()};case"quads":return{type:"quads",quadStream:await e.execute(),metadata:async()=>await e.metadata()};case"boolean":return{type:"boolean",execute:()=>e.execute()};case"void":return{type:"void",execute:()=>e.execute()}}}}M_.QueryEngineBase=Db;(function(t){var e=g&&g.__createBinding||(Object.create?function(a,s,o,u){u===void 0&&(u=o);var c=Object.getOwnPropertyDescriptor(s,o);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(a,u,c)}:function(a,s,o,u){u===void 0&&(u=o),a[u]=s[o]}),r=g&&g.__exportStar||function(a,s){for(var o in a)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,a,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryEngineBase=void 0,r(Gp,t),r(C_,t);var n=M_;Object.defineProperty(t,"QueryEngineBase",{enumerable:!0,get:function(){return n.QueryEngineBase}})})(y_);var YC={},Y_={};Object.defineProperty(Y_,"__esModule",{value:!0});Y_.LoggerVoid=void 0;const QW=dA;class GW extends QW.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}}Y_.LoggerVoid=GW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Y_,t)})(YC);var Z_={},eg={},tg={},rg={};Object.defineProperty(rg,"__esModule",{value:!0});rg.ActorExtractLinks=void 0;const zW=Je;class WW extends zW.Actor{constructor(e){super(e)}static collectStream(e,r){return new Promise((n,a)=>{const s=[];e.on("error",a),e.on("data",o=>r(o,s)),e.on("end",()=>{n(s)})})}}rg.ActorExtractLinks=WW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(rg,t)})(tg);Object.defineProperty(eg,"__esModule",{value:!0});eg.ActorExtractLinksPredicates=void 0;const FP=tg;class XW extends FP.ActorExtractLinks{constructor(e){super(e),this.predicates=e.predicateRegexes.map(r=>new RegExp(r,"u"))}async test(e){return!0}async run(e){return{links:await FP.ActorExtractLinks.collectStream(e.metadata,(r,n)=>{if(!this.checkSubject||this.subjectMatches(r.subject.value,e.url)){for(const a of this.predicates)if(a.test(r.predicate.value)){n.push({url:r.object.value});break}}})}}subjectMatches(e,r){const n=e.indexOf("#");return n>=0&&(e=e.slice(0,n)),e===r}}eg.ActorExtractLinksPredicates=XW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(eg,t)})(Z_);var ZC={},ng={};Object.defineProperty(ng,"__esModule",{value:!0});ng.ActorExtractLinksQuadPatternQuery=void 0;const LP=tg,KW=Ut,JW=ft,Gl=an,BP=gt,iO=new JW.DataFactory,Gy=iO.variable("__comunica:pp_var");class ap extends LP.ActorExtractLinks{constructor(e){super(e)}static getCurrentQuery(e){const r=e.get(KW.KeysInitQuery.query);if(r)return r}static matchQuadPatternInOperation(e,r){const n=[];return BP.Util.recurseOperation(r,{pattern(a){return(0,Gl.matchPatternComplete)(e,a)&&n.push(a),!1},path(a){return BP.Util.recurseOperation(a,{link(s){const o=iO.quad(Gy,s.iri,Gy,a.graph);return(0,Gl.matchPatternComplete)(e,o)&&n.push(o),!1},nps(s){for(const o of s.iris){const u=iO.quad(Gy,o,Gy,a.graph);(0,Gl.matchPatternComplete)(e,u)&&n.push(u)}return!1}}),!1}}),n}async test(e){if(!ap.getCurrentQuery(e.context))throw new Error(`Actor ${this.name} can only work in the context of a query.`);return!0}async run(e){const r=ap.getCurrentQuery(e.context);return{links:await LP.ActorExtractLinks.collectStream(e.metadata,(n,a)=>{const s=ap.matchQuadPatternInOperation(n,r);if(s.length>0)if(this.onlyVariables){const o={};for(const u of s)for(const c of(0,Gl.filterQuadTermNames)(u,l=>l.termType==="Variable"))o[c]=!0;for(const u of Object.keys(o))n[u].termType==="NamedNode"&&a.push({url:n[u].value})}else for(const o of(0,Gl.getNamedNodes)((0,Gl.getTerms)(n)))a.push({url:o.value})})}}}ng.ActorExtractLinksQuadPatternQuery=ap;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ng,t)})(ZC);var e9={},ig={};Object.defineProperty(ig,"__esModule",{value:!0});ig.MediatorCombineArray=void 0;const YW=Je;class ZW extends YW.Mediator{constructor(e){super(e),this.combiner=this.createCombiner()}async mediate(e){let r;try{r=this.publish(e)}catch{r=[]}await Promise.all(r.map(({reply:a})=>a));const n=await Promise.all(r.map(a=>a.actor.runObservable(e)));return this.combiner(n)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return e=>{const r={};for(const n of this.fields)r[n]=[],[[]].concat(e.map(a=>a[n])).forEach((a,s,o)=>{a&&r[n].push(...a)});return r}}}ig.MediatorCombineArray=ZW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ig,t)})(e9);var ix={},ag={};Object.defineProperty(ag,"__esModule",{value:!0});ag.MediatorCombinePipeline=void 0;const eX=Je;class tX extends eX.Mediator{constructor(e){super(e)}async mediate(e){let r;try{r=this.publish(e)}catch{return e}if(this.filterErrors){const a=[];for(const s of r)try{await s.reply,a.push(s)}catch{}r=a}if(r=await Promise.all(r.map(async({actor:a,reply:s})=>({actor:a,reply:await s}))),this.order){const a=s=>{const o=this.field?s[this.field]:s;if(typeof o!="number")throw new Error("Cannot order elements that are not numbers.");return o};r=r.sort((s,o)=>(this.order==="increasing"?1:-1)*(a(s.reply)-a(o.reply)))}let n=e;for(const{actor:a}of r)n={...n,...await a.runObservable(n)};return n}mediateWith(){throw new Error("Method not supported.")}}ag.MediatorCombinePipeline=tX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ag,t)})(ix);var t9={},sg={},w0={},og={};Object.defineProperty(og,"__esModule",{value:!0});og.ActorOptimizeQueryOperation=void 0;const rX=Je;class nX extends rX.Actor{constructor(e){super(e)}}og.ActorOptimizeQueryOperation=nX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(og,t)})(w0);Object.defineProperty(sg,"__esModule",{value:!0});sg.ActorOptimizeQueryOperationSetSeedSourcesQuadpatternIris=void 0;const iX=w0,$P=Ut,F3=gt;class aX extends iX.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return!0}async run(e){const r=e.context.get($P.KeysRdfResolveQuadPattern.sources);if(!r||r.length===0){const n=[...new Set(this.extractIrisFromOperation(e.operation))];e.context=e.context.set($P.KeysRdfResolveQuadPattern.sources,n)}return{...e,context:e.context}}extractIrisFromOperation(e){const r=[];return F3.Util.recurseOperation(e,{[F3.Algebra.types.PATH]:n=>(this.extractSubjects&&n.subject.termType==="NamedNode"&&r.push(n.subject.value),this.extractObjects&&n.object.termType==="NamedNode"&&r.push(n.object.value),this.extractGraphs&&n.graph.termType==="NamedNode"&&r.push(n.graph.value),!1),[F3.Algebra.types.PATTERN]:n=>(this.extractSubjects&&n.subject.termType==="NamedNode"&&r.push(n.subject.value),this.extractPredicates&&n.predicate.termType==="NamedNode"&&r.push(n.predicate.value),this.extractObjects&&n.object.termType==="NamedNode"&&(this.extractVocabIris||n.predicate.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#type")&&r.push(n.object.value),this.extractGraphs&&n.graph.termType==="NamedNode"&&r.push(n.graph.value),!1)}),r}}sg.ActorOptimizeQueryOperationSetSeedSourcesQuadpatternIris=aX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(sg,t)})(t9);var r9={},ug={};Object.defineProperty(ug,"__esModule",{value:!0});ug.ActorOptimizeQueryOperationJoinBgp=void 0;const sX=w0,oX=gt;class uX extends sX.ActorOptimizeQueryOperation{async test(e){return!0}async run(e){return{operation:oX.Util.mapOperation(e.operation,{join(n,a){return n.input.every(s=>s.type==="bgp")?{recurse:!1,result:a.createBgp(n.input.flatMap(s=>s.patterns))}:{recurse:!1,result:n}}}),context:e.context}}}ug.ActorOptimizeQueryOperationJoinBgp=uX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ug,t)})(r9);var n9={},cg={};Object.defineProperty(cg,"__esModule",{value:!0});cg.ActorOptimizeQueryOperationBgpToJoin=void 0;const cX=w0,lX=gt;class dX extends cX.ActorOptimizeQueryOperation{async test(e){return!0}async run(e){return{operation:lX.Util.mapOperation(e.operation,{bgp(n,a){return{recurse:!1,result:a.createJoin(n.patterns)}}}),context:e.context}}}cg.ActorOptimizeQueryOperationBgpToJoin=dX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(cg,t)})(n9);var i9={},lg={};Object.defineProperty(lg,"__esModule",{value:!0});lg.ActorOptimizeQueryOperationJoinConnected=void 0;const fX=w0,UP=gt;class sp extends fX.ActorOptimizeQueryOperation{async test(e){return!0}async run(e){return{operation:UP.Util.mapOperation(e.operation,{join(n,a){return{recurse:!1,result:sp.cluster(n,a)}}}),context:e.context}}static cluster(e,r){const n=e.input.map(u=>({inScopeVariables:Object.fromEntries(UP.Util.inScopeVariables(u).map(c=>[c.value,!0])),entries:[u]}));let a,s=n;do a=s,s=sp.clusterIteration(a);while(a.length!==s.length);const o=s.map(u=>r.createJoin(u.entries));return o.length===1?o[0]:r.createJoin(o,!1)}static clusterIteration(e){const r=[];for(const n of e){let a=!1;for(const s of r)if(sp.haveOverlappingVariables(n.inScopeVariables,s.inScopeVariables)){s.entries=[...s.entries,...n.entries],s.inScopeVariables={...s.inScopeVariables,...n.inScopeVariables},a=!0;break}a||r.push({inScopeVariables:n.inScopeVariables,entries:n.entries})}return r}static haveOverlappingVariables(e,r){for(const n of Object.keys(e))if(r[n])return!0;return!1}}lg.ActorOptimizeQueryOperationJoinConnected=sp;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(lg,t)})(i9);var If={},dg={};Object.defineProperty(dg,"__esModule",{value:!0});dg.MediatorNumber=void 0;const hX=Je;class pX extends hX.Mediator{constructor(e){super(e),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return e=>e.reduce((r,n,a)=>{const s=this.getOrDefault(n[this.field],Number.POSITIVE_INFINITY);return s!==null&&(Number.isNaN(r[0])||r[0]>s)?[s,a]:r},[Number.NaN,-1])[1];case"max":return e=>e.reduce((r,n,a)=>{const s=this.getOrDefault(n[this.field],Number.NEGATIVE_INFINITY);return s!==null&&(Number.isNaN(r[0])||r[0]<s)?[s,a]:r},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(e,r){return e===void 0?r:e}async mediateWith(e,r){let n=r.map(({reply:u})=>u);const a=[];if(this.ignoreErrors){const u={};u[this.field]=null,n=n.map(c=>c.catch(l=>(a.push(l),u)))}const s=await Promise.all(n),o=this.indexPicker(s);if(o<0)throw new Error(`All actors rejected their test in ${this.name}
${a.map(u=>u.message).join(`
`)}`);return r[o].actor}}dg.MediatorNumber=pX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(dg,t)})(If);var a9={},fg={},oa={},hg={};Object.defineProperty(hg,"__esModule",{value:!0});hg.MetadataValidationState=void 0;class yX{constructor(){this.invalidateListeners=[],this.valid=!0}addInvalidateListener(e){this.invalidateListeners.push(e)}invalidate(){if(this.valid){this.valid=!1;for(const e of this.invalidateListeners)e()}}}hg.MetadataValidationState=yX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(hg,t)})(oa);Object.defineProperty(fg,"__esModule",{value:!0});fg.ActorQueryOperationValues=void 0;const bX=$n,_X=ct,gX=oa,mX=Ht,vX=ft,wX=new bX.BindingsFactory,SX=new vX.DataFactory;class TX extends _X.ActorQueryOperationTyped{constructor(e){super(e,"values")}async testOperation(e,r){return!0}async runOperation(e,r){const n=new mX.ArrayIterator(e.bindings.map(o=>wX.bindings(Object.entries(o).map(([u,c])=>[SX.variable(u.slice(1)),c])))),a=e.variables;return{type:"bindings",bindingsStream:n,metadata:()=>Promise.resolve({state:new gX.MetadataValidationState,cardinality:{type:"exact",value:e.bindings.length},canContainUndefs:e.bindings.some(o=>a.some(u=>!(`?${u.value}`in o))),variables:a})}}}fg.ActorQueryOperationValues=TX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(fg,t)})(a9);var xi={},pg={};Object.defineProperty(pg,"__esModule",{value:!0});pg.MediatorRace=void 0;const EX=Je;class OX extends EX.Mediator{constructor(e){super(e)}mediateWith(e,r){return new Promise((n,a)=>{const s=[];for(const o of r)o.reply.then(()=>{n(o.actor)}).catch(u=>{s.push(u),s.length===r.length&&a(new Error(`${this.name} mediated over all rejecting actors:
${s.map(c=>c.message).join(`
`)}`))})})}}pg.MediatorRace=OX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(pg,t)})(xi);var s9={},yg={},ax={},bg={};Object.defineProperty(bg,"__esModule",{value:!0});bg.ActorQueryParse=void 0;const AX=Je;class xX extends AX.Actor{constructor(e){super(e)}}bg.ActorQueryParse=xX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(bg,t)})(ax);Object.defineProperty(yg,"__esModule",{value:!0});yg.ActorQueryParseSparql=void 0;const RX=ax,IX=gt,PX=_0;class DX extends RX.ActorQueryParse{constructor(e){super(e),this.prefixes=Object.freeze(this.prefixes)}async test(e){if(e.queryFormat&&e.queryFormat.language!=="sparql")throw new Error("This actor can only parse SPARQL queries");return!0}async run(e){const n=new PX.Parser({prefixes:this.prefixes,baseIRI:e.baseIRI,sparqlStar:!0}).parse(e.query);return{baseIRI:n.type==="query"?n.base:void 0,operation:(0,IX.translate)(n,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:e.baseIRI})}}}yg.ActorQueryParseSparql=DX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(yg,t)})(s9);var o9={},_g={},u9={},sx={},ox={},Yo={};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.DirectiveNodeHandlerAdapter=void 0;class NX{constructor(e,r,n){this.targetKind=e,this.util=r,this.settings=n}getDirectiveConditionalValue(e,r){const n=this.util.getArgument(e.arguments,"if");if(!n)throw new Error(`The directive ${e.name.value} is missing an if-argument.`);const a=this.util.handleNodeValue(n.value,n.name.value,r);if(a.terms.length!==1)throw new Error(`Can not apply the directive ${e.name.value} with a list.`);return a.terms[0]}isDirectiveScopeAll(e){const r=this.util.getArgument(e.arguments,"scope");return r&&r.value.kind==="EnumValue"&&r.value.value==="all"}}Yo.DirectiveNodeHandlerAdapter=NX;var gg={};Object.defineProperty(gg,"__esModule",{value:!0});gg.DirectiveNodeHandlerInclude=void 0;const jX=Yo;class CX extends jX.DirectiveNodeHandlerAdapter{constructor(e,r){super("include",e,r)}handle(e,r){const n=this.getDirectiveConditionalValue(e.directive,r);return n.termType==="Literal"&&n.value==="false"?{ignore:!0}:{}}}gg.DirectiveNodeHandlerInclude=CX;var mg={};Object.defineProperty(mg,"__esModule",{value:!0});mg.DirectiveNodeHandlerOptional=void 0;const MX=Yo;class FX extends MX.DirectiveNodeHandlerAdapter{constructor(e,r){super("optional",e,r)}handle(e,r){return{operationOverrider:n=>this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),n)}}}mg.DirectiveNodeHandlerOptional=FX;var vg={},Pf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SingularizeState=void 0,function(e){e[e.SINGLE=0]="SINGLE",e[e.PLURAL=1]="PLURAL"}(t.SingularizeState||(t.SingularizeState={}))})(Pf);Object.defineProperty(vg,"__esModule",{value:!0});vg.DirectiveNodeHandlerPlural=void 0;const LX=Pf,BX=Yo;class $X extends BX.DirectiveNodeHandlerAdapter{constructor(e,r){super("plural",e,r)}handle(e,r){return this.isDirectiveScopeAll(e.directive)&&(r.singularizeState=LX.SingularizeState.PLURAL),delete r.singularizeVariables[this.util.nameToVariable(e.fieldLabel,r).value],{}}}vg.DirectiveNodeHandlerPlural=$X;var wg={};Object.defineProperty(wg,"__esModule",{value:!0});wg.DirectiveNodeHandlerSingle=void 0;const UX=Pf,qX=Yo;class VX extends qX.DirectiveNodeHandlerAdapter{constructor(e,r){super("single",e,r)}handle(e,r){return this.isDirectiveScopeAll(e.directive)&&(r.singularizeState=UX.SingularizeState.SINGLE),r.singularizeVariables[this.util.nameToVariable(e.fieldLabel,r).value]=!0,{}}}wg.DirectiveNodeHandlerSingle=VX;var Sg={};Object.defineProperty(Sg,"__esModule",{value:!0});Sg.DirectiveNodeHandlerSkip=void 0;const HX=Yo;class kX extends HX.DirectiveNodeHandlerAdapter{constructor(e,r){super("skip",e,r)}handle(e,r){const n=this.getDirectiveConditionalValue(e.directive,r);return n.termType==="Literal"&&n.value==="true"?{ignore:!0}:{}}}Sg.DirectiveNodeHandlerSkip=kX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Yo,t),r(gg,t),r(mg,t),r(vg,t),r(wg,t),r(Sg,t)})(ox);var c9={},ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.NodeValueHandlerAdapter=void 0;class QX{constructor(e,r,n){this.targetKind=e,this.util=r,this.settings=n}}ua.NodeValueHandlerAdapter=QX;var Tg={};Object.defineProperty(Tg,"__esModule",{value:!0});Tg.NodeValueHandlerBoolean=void 0;const GX=ua;class zX extends GX.NodeValueHandlerAdapter{constructor(e,r){super("BooleanValue",e,r),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")}handle(e,r,n){return{terms:[this.util.dataFactory.literal(e.value?"true":"false",this.datatype)]}}}Tg.NodeValueHandlerBoolean=zX;var Eg={};Object.defineProperty(Eg,"__esModule",{value:!0});Eg.NodeValueHandlerEnum=void 0;const WX=ua;class XX extends WX.NodeValueHandlerAdapter{constructor(e,r){super("EnumValue",e,r)}handle(e,r,n){return{terms:[this.util.valueToNamedNode(e.value,n.context)]}}}Eg.NodeValueHandlerEnum=XX;var Og={};Object.defineProperty(Og,"__esModule",{value:!0});Og.NodeValueHandlerFloat=void 0;const KX=ua;class JX extends KX.NodeValueHandlerAdapter{constructor(e,r){super("FloatValue",e,r),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#float")}handle(e,r,n){return{terms:[this.util.dataFactory.literal(e.value,this.datatype)]}}}Og.NodeValueHandlerFloat=JX;var Ag={};Object.defineProperty(Ag,"__esModule",{value:!0});Ag.NodeValueHandlerInt=void 0;const YX=ua;class ZX extends YX.NodeValueHandlerAdapter{constructor(e,r){super("IntValue",e,r),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#integer")}handle(e,r,n){return{terms:[this.util.dataFactory.literal(e.value,this.datatype)]}}}Ag.NodeValueHandlerInt=ZX;var xg={};Object.defineProperty(xg,"__esModule",{value:!0});xg.NodeValueHandlerList=void 0;const eK=ua;class tK extends eK.NodeValueHandlerAdapter{constructor(e,r){super("ListValue",e,r),this.nodeFirst=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),this.nodeRest=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),this.nodeNil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(e,r,n){const a=[];let s=[];for(const o of e.values){const u=this.util.handleNodeValue(o,r,n);for(const c of u.terms)a.push(c);u.auxiliaryPatterns&&(s=s.concat(u.auxiliaryPatterns))}if(this.settings.arraysToRdfLists){const o=this.util.dataFactory.blankNode();let u=o,c=a.length;for(const l of a){s.push(this.util.operationFactory.createPattern(u,this.nodeFirst,l,n.graph));const d=--c===0?this.nodeNil:this.util.dataFactory.blankNode();s.push(this.util.operationFactory.createPattern(u,this.nodeRest,d,n.graph)),u=d}return{terms:[o],auxiliaryPatterns:s}}else return{terms:a,auxiliaryPatterns:s}}}xg.NodeValueHandlerList=tK;var Rg={};Object.defineProperty(Rg,"__esModule",{value:!0});Rg.NodeValueHandlerNull=void 0;const rK=ua;class nK extends rK.NodeValueHandlerAdapter{constructor(e,r){super("NullValue",e,r),this.nil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(e,r,n){return{terms:[this.nil]}}}Rg.NodeValueHandlerNull=nK;var Ig={};Object.defineProperty(Ig,"__esModule",{value:!0});Ig.NodeValueHandlerObject=void 0;const iK=ua;class aK extends iK.NodeValueHandlerAdapter{constructor(e,r){super("ObjectValue",e,r)}handle(e,r,n){const a=this.util.dataFactory.blankNode();let s=[];for(const o of e.fields){const u=this.util.handleNodeValue(o.value,r,n);for(const c of u.terms)s.push(this.util.createQuadPattern(a,o.name,c,n.graph,n.context));u.auxiliaryPatterns&&(s=s.concat(u.auxiliaryPatterns))}return{terms:[a],auxiliaryPatterns:s}}}Ig.NodeValueHandlerObject=aK;var Pg={};Object.defineProperty(Pg,"__esModule",{value:!0});Pg.NodeValueHandlerString=void 0;const sK=ua;class oK extends sK.NodeValueHandlerAdapter{constructor(e,r){super("StringValue",e,r)}handle(e,r,n){const a=n.context.getContextRaw()[r];let s,o;return a&&typeof a!="string"&&(a["@language"]?s=a["@language"]:a["@type"]&&(o=this.util.dataFactory.namedNode(a["@type"]))),{terms:[this.util.dataFactory.literal(e.value,s||o)]}}}Pg.NodeValueHandlerString=oK;var Dg={};Object.defineProperty(Dg,"__esModule",{value:!0});Dg.NodeValueHandlerVariable=void 0;const uK=ua;class cK extends uK.NodeValueHandlerAdapter{constructor(e,r){super("Variable",e,r)}handle(e,r,n){const a=e.name.value,s=n.variablesDict[a],o=n.variablesMetaDict[a];if(!s){if(!n.ignoreUnknownVariables&&(!o||o.mandatory))throw new Error(`Undefined variable: ${a}`);{const u=this.util.dataFactory.variable(a);return n.terminalVariables.map(c=>c.value).indexOf(a)<0&&n.terminalVariables.push(u),{terms:[u]}}}if(s.kind==="Variable")throw new Error(`Variable refers to another variable: ${a}`);if(o)if(o.list){if(s.kind!=="ListValue")throw new Error(`Expected a list, but got ${s.kind} for ${a}`);if(o.type){const u=s;for(const c of u.values)if(c.kind!==o.type)throw new Error(`Expected ${o.type}, but got ${c.kind} for ${a}`)}}else o.type;return this.util.handleNodeValue(s,r,n)}}Dg.NodeValueHandlerVariable=cK;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ua,t),r(Tg,t),r(Eg,t),r(Og,t),r(Ag,t),r(xg,t),r(Rg,t),r(Ig,t),r(Pg,t),r(Dg,t)})(c9);var gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.NodeHandlerAdapter=void 0;class lK{constructor(e,r,n){this.targetKind=e,this.util=r,this.settings=n}getNodeQuadContextSelectionSet(e,r,n){const a={};if(e){for(const s of e.selections)if(s.kind==="Field"){const o=s;this.handleNodeQuadContextField(o,n,a,"id","subject"),this.handleNodeQuadContextField(o,n,a,"graph","graph")}}return a}handleNodeQuadContextField(e,r,n,a,s){if(!n[s]&&e.name.value===a){if(!n[s]){const o=this.util.getArgument(e.arguments,"_");if(o){const u=this.util.handleNodeValue(o.value,e.name.value,r);if(u.terms.length!==1)throw new Error(`Only single values can be set as ${a}, but got ${u.terms.length} at ${e.name.value}`);n[s]=u.terms[0],u.auxiliaryPatterns&&(n.auxiliaryPatterns||(n.auxiliaryPatterns=[]),n.auxiliaryPatterns.concat(u.auxiliaryPatterns))}}if(!n[s]){const o=this.util.nameToVariable(this.util.getFieldLabel(e),r);r.terminalVariables.push(o),n[s]=o}}}getDirectiveOutputs(e,r,n){const a=[];if(e)for(const s of e){const o=this.util.handleDirectiveNode({directive:s,fieldLabel:r},n);if(o){if(o.ignore)return null;a.push(o)}}return a}handleDirectiveOutputs(e,r){for(const n of e){if(n.ignore)return this.util.operationFactory.createBgp([]);n.operationOverrider&&(r=n.operationOverrider(r))}return r}}gl.NodeHandlerAdapter=lK;var Df={};Object.defineProperty(Df,"__esModule",{value:!0});Df.NodeHandlerDefinitionAdapter=void 0;const dK=gl;class fK extends dK.NodeHandlerAdapter{constructor(e,r,n){super(e,r,n)}}Df.NodeHandlerDefinitionAdapter=fK;var Ng={};Object.defineProperty(Ng,"__esModule",{value:!0});Ng.NodeHandlerDefinitionFragment=void 0;const hK=Df;class pK extends hK.NodeHandlerDefinitionAdapter{constructor(e,r){super("FragmentDefinition",e,r)}handle(e,r){throw new Error("Illegal state: fragment definitions must be indexed and removed before processing")}}Ng.NodeHandlerDefinitionFragment=pK;var jg={};Object.defineProperty(jg,"__esModule",{value:!0});jg.NodeHandlerDefinitionOperation=void 0;const yK=Df;class bK extends yK.NodeHandlerDefinitionAdapter{constructor(e,r){super("OperationDefinition",e,r)}handle(e,r){if(e.operation!=="query")throw new Error("Unsupported definition operation: "+e.operation);if(e.variableDefinitions)for(const s of e.variableDefinitions){const o=s.variable.name.value;s.defaultValue&&(r.variablesDict[o]||(r.variablesDict[o]=s.defaultValue));let u=s.type;const c=u.kind==="NonNullType";c&&(u=u.type);const l=u.kind==="ListType";l&&(u=u.type);const d=u.name.value;r.variablesMetaDict[o]={mandatory:c,list:l,type:d}}const n=this.getDirectiveOutputs(e.directives,e.name?e.name.value:"",r);if(!n)return this.util.operationFactory.createBgp([]);const a=this.util.joinOperations(e.selectionSet.selections.map(s=>this.util.handleNode(s,r)));return this.handleDirectiveOutputs(n,a)}}jg.NodeHandlerDefinitionOperation=bK;var Cg={};Object.defineProperty(Cg,"__esModule",{value:!0});Cg.NodeHandlerDocument=void 0;const qP=gt,_K=gl;class gK extends _K.NodeHandlerAdapter{constructor(e,r){super("Document",e,r)}handle(e,r){const n=e.definitions.map(s=>{const o=this.getNodeQuadContextDefinitionNode(s,Object.assign(Object.assign({},r),{ignoreUnknownVariables:!0})),u=Object.assign(Object.assign({},r),{graph:o.graph||r.graph,subject:o.subject||this.util.dataFactory.blankNode()});let c=this.util.handleNode(s,u);return o&&o.auxiliaryPatterns&&(c=this.util.joinOperations([c,this.util.operationFactory.createBgp(o.auxiliaryPatterns)])),c}),a=this.util.operationFactory.createProject(n.length===1?n[0]:this.util.operationFactory.createUnion(n),r.terminalVariables);return this.translateBlankNodesToVariables(a)}getNodeQuadContextDefinitionNode(e,r){if(e.kind==="OperationDefinition")return this.getNodeQuadContextSelectionSet(e.selectionSet,e.name?e.name.value:"",r);throw new Error(`Unsupported definition: ${e.kind}`)}translateBlankNodesToVariables(e){const r=this,n={},a=Array.from(e.variables).reduce((o,u)=>(o[u.value]=!0,o),{});return qP.Util.mapOperation(e,{path:(o,u)=>({recurse:!1,result:u.createPath(s(o.subject),o.predicate,s(o.object),s(o.graph))}),pattern:(o,u)=>({recurse:!1,result:u.createPattern(s(o.subject),s(o.predicate),s(o.object),s(o.graph))})});function s(o){if(o.termType==="BlankNode"){let u=n[o.value];return u||(u=qP.Util.createUniqueVariable(o.value,a,r.util.dataFactory),a[u.value]=!0,n[o.value]=u),u}return o}}}Cg.NodeHandlerDocument=gK;var ml={};Object.defineProperty(ml,"__esModule",{value:!0});ml.NodeHandlerSelectionAdapter=void 0;const mK=gt,vK=Pf,wK=gl;class SK extends wK.NodeHandlerAdapter{constructor(e,r,n){super(e,r,n)}getNodeQuadContextFieldNode(e,r,n){return this.getNodeQuadContextSelectionSet(e.selectionSet,r,Object.assign(Object.assign({},n),{path:this.util.appendFieldToPath(n.path,r)}))}fieldToOperation(e,r,n,a){const s=n;let o=0,u;if((r.name.value==="id"||r.name.value==="graph")&&(n=!1,r.arguments))for(const w of r.arguments)w.name.value==="_"&&this.util.handleNodeValue(w.value,r.name.value,e);const c=this.util.getFieldLabel(r);if(e.singularizeState===vK.SingularizeState.SINGLE&&(e.singularizeVariables[this.util.nameToVariable(c,e).value]=!0),n){const w=this.handleMetaField(e,c,a);if(w)return w}const l=a?[this.util.operationFactory.createBgp(a)]:[],d=this.getNodeQuadContextFieldNode(r,c,e);let f=d.subject||this.util.nameToVariable(c,e),h=d.graph||e.graph;d.auxiliaryPatterns&&l.push(this.util.operationFactory.createBgp(d.auxiliaryPatterns));let p=!0,b=null;if(n&&r.arguments&&r.arguments.length){for(const w of r.arguments)if(w.name.value==="_"){const O=this.util.handleNodeValue(w.value,r.name.value,e);b=O.terms,l.push(this.util.operationFactory.createBgp(O.terms.map(A=>this.util.createQuadPattern(e.subject,r.name,A,e.graph,e.context)))),O.auxiliaryPatterns&&l.push(this.util.operationFactory.createBgp(O.auxiliaryPatterns)),n=!1;break}else if(w.name.value==="graph"){const O=this.util.handleNodeValue(w.value,r.name.value,e);if(O.terms.length!==1)throw new Error(`Only single values can be set as graph, but got ${O.terms.length} at ${r.name.value}`);h=O.terms[0],e=Object.assign(Object.assign({},e),{graph:h}),O.auxiliaryPatterns&&l.push(this.util.operationFactory.createBgp(O.auxiliaryPatterns));break}else if(w.name.value==="alt"){let O=w.value;O.kind!=="ListValue"&&(O={kind:"ListValue",values:[O]}),l.push(this.util.createQuadPath(e.subject,r.name,O,f,e.graph,e.context)),p=!1;break}}if(n&&p&&l.push(this.util.operationFactory.createBgp([this.util.createQuadPattern(e.subject,r.name,f,e.graph,e.context)])),r.arguments&&r.arguments.length){for(const w of r.arguments)if(!(w.name.value==="_"||w.name.value==="graph"||w.name.value==="alt"))if(w.name.value==="first"){if(w.value.kind!=="IntValue")throw new Error("Invalid value type for 'first' argument: "+w.value.kind);u=parseInt(w.value.value,10)}else if(w.name.value==="offset"){if(w.value.kind!=="IntValue")throw new Error("Invalid value type for 'offset' argument: "+w.value.kind);o=parseInt(w.value.value,10)}else{const O=this.util.handleNodeValue(w.value,w.name.value,e);l.push(this.util.operationFactory.createBgp(O.terms.map(A=>this.util.createQuadPattern(f,w.name,A,e.graph,e.context)))),O.auxiliaryPatterns&&l.push(this.util.operationFactory.createBgp(O.auxiliaryPatterns))}}const _=this.getDirectiveOutputs(r.directives,c,e);if(!_)return this.util.operationFactory.createBgp([]);let E=this.util.joinOperations(l);if(r.selectionSet&&r.selectionSet.selections.length){if(b){if(b.length!==1)throw new Error(`Only single values can be set as id, but got ${b.length} at ${r.name.value}`);f=b[0]}const w=Object.assign(Object.assign(Object.assign({},e),s?{path:this.util.appendFieldToPath(e.path,c)}:{}),{graph:h,subject:s?f:e.subject});let O=!1;const A=r.selectionSet.selections.filter(I=>I.kind==="Field"&&I.name.value==="totalCount"?(O=!0,!1):!0);let T=this.util.joinOperations(l.concat(A.map(I=>this.util.handleNode(I,w))));if(O){const I=this.util.dataFactory.variable("var"+this.settings.expressionVariableCounter++),D=this.util.dataFactory.variable(f.value+this.settings.variableDelimiter+"totalCount"),U=this.util.operationFactory.createBoundAggregate(I,"count",this.util.operationFactory.createTermExpression(f),!1),H=this.util.operationFactory.createProject(this.util.operationFactory.createExtend(this.util.operationFactory.createGroup(E,[],[U]),D,this.util.operationFactory.createTermExpression(I)),[D]);e.terminalVariables.push(D),A.length?T=this.util.operationFactory.createJoin([this.util.operationFactory.createProject(T,[]),H]):T=H}E=T}else n&&f.termType==="Variable"&&e.terminalVariables.push(f);return(o||u)&&(E=this.util.operationFactory.createSlice(this.util.operationFactory.createProject(E,mK.Util.inScopeVariables(E)),o,u)),this.handleDirectiveOutputs(_,E)}handleMetaField(e,r,n){if(r==="__typename"){const a=this.util.nameToVariable(r,e);return e.terminalVariables.push(a),this.util.operationFactory.createBgp([this.util.operationFactory.createPattern(e.subject,this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.util.nameToVariable(r,e),e.graph)].concat(n||[]))}}}ml.NodeHandlerSelectionAdapter=SK;var Mg={};Object.defineProperty(Mg,"__esModule",{value:!0});Mg.NodeHandlerSelectionField=void 0;const TK=ml;class EK extends TK.NodeHandlerSelectionAdapter{constructor(e,r){super("Field",e,r)}handle(e,r){return this.fieldToOperation(r,e,!0)}}Mg.NodeHandlerSelectionField=EK;var Fg={};Object.defineProperty(Fg,"__esModule",{value:!0});Fg.NodeHandlerSelectionFragmentSpread=void 0;const OK=ml;class AK extends OK.NodeHandlerSelectionAdapter{constructor(e,r){super("FragmentSpread",e,r)}handle(e,r){const n=r.fragmentDefinitions[e.name.value];if(!n)throw new Error("Undefined fragment definition: "+e.name.value);const a={alias:void 0,arguments:void 0,directives:n.directives,kind:"Field",name:e.name,selectionSet:n.selectionSet},s=[this.util.newTypePattern(r.subject,n.typeCondition,r)];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(r,a,!1,s))}}Fg.NodeHandlerSelectionFragmentSpread=AK;var Lg={};Object.defineProperty(Lg,"__esModule",{value:!0});Lg.NodeHandlerSelectionInlineFragment=void 0;const xK=ml;class RK extends xK.NodeHandlerSelectionAdapter{constructor(e,r){super("InlineFragment",e,r)}handle(e,r){const n={alias:void 0,arguments:void 0,directives:e.directives,kind:"Field",name:{kind:"Name",value:r.subject.value},selectionSet:e.selectionSet},a=e.typeCondition?[this.util.newTypePattern(r.subject,e.typeCondition,r)]:[];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(r,n,!1,a))}}Lg.NodeHandlerSelectionInlineFragment=RK;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ox,t),r(c9,t),r(gl,t),r(Df,t),r(Ng,t),r(jg,t),r(Cg,t),r(ml,t),r(Mg,t),r(Fg,t),r(Lg,t)})(sx);var Bg={},l9=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag",IK=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;const aO=IK;function Y1(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Y1=function(r){return typeof r}:Y1=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Y1(t)}var PK=10,d9=2;function f9(t){return $g(t,[])}function $g(t,e){switch(Y1(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return t===null?"null":DK(t,e);default:return String(t)}}function DK(t,e){if(e.indexOf(t)!==-1)return"[Circular]";var r=[].concat(e,[t]),n=CK(t);if(n!==void 0){var a=n.call(t);if(a!==t)return typeof a=="string"?a:$g(a,r)}else if(Array.isArray(t))return jK(t,r);return NK(t,r)}function NK(t,e){var r=Object.keys(t);if(r.length===0)return"{}";if(e.length>d9)return"["+MK(t)+"]";var n=r.map(function(a){var s=$g(t[a],e);return a+": "+s});return"{ "+n.join(", ")+" }"}function jK(t,e){if(t.length===0)return"[]";if(e.length>d9)return"[Array]";for(var r=Math.min(PK,t.length),n=t.length-r,a=[],s=0;s<r;++s)a.push($g(t[s],e));return n===1?a.push("... 1 more item"):n>1&&a.push("... ".concat(n," more items")),"["+a.join(", ")+"]"}function CK(t){var e=t[String(aO)];if(typeof e=="function")return e;if(typeof t.inspect=="function")return t.inspect}function MK(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){var r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}function L3(t,e){var r=!!t;if(!r)throw new Error(e)}const FK=function(e,r){return e instanceof r};function VP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function LK(t,e,r){return e&&VP(t.prototype,e),r&&VP(t,r),t}var ux=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof e=="string"||L3(0,"Body must be a string. Received: ".concat(f9(e),".")),this.body=e,this.name=r,this.locationOffset=n,this.locationOffset.line>0||L3(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||L3(0,"column in locationOffset is 1-indexed and must be positive.")}return LK(t,[{key:l9,get:function(){return"Source"}}]),t}();function BK(t){return FK(t,ux)}function Nb(t,e){for(var r=/\r\n|[\n\r]/g,n=1,a=e+1,s;(s=r.exec(t.body))&&s.index<e;)n+=1,a=e+1-(s.index+s[0].length);return{line:n,column:a}}function h9(t){return cx(t.source,Nb(t.source,t.start))}function cx(t,e){var r=t.locationOffset.column-1,n=Z1(r)+t.body,a=e.line-1,s=t.locationOffset.line-1,o=e.line+s,u=e.line===1?r:0,c=e.column+u,l="".concat(t.name,":").concat(o,":").concat(c,`
`),d=n.split(/\r\n|[\n\r]/g),f=d[a];if(f.length>120){for(var h=Math.floor(c/80),p=c%80,b=[],_=0;_<f.length;_+=80)b.push(f.slice(_,_+80));return l+HP([["".concat(o),b[0]]].concat(b.slice(1,h+1).map(function(E){return["",E]}),[[" ",Z1(p-1)+"^"],["",b[h+1]]]))}return l+HP([["".concat(o-1),d[a-1]],["".concat(o),f],["",Z1(c-1)+"^"],["".concat(o+1),d[a+1]]])}function HP(t){var e=t.filter(function(n){n[0];var a=n[1];return a!==void 0}),r=Math.max.apply(Math,e.map(function(n){var a=n[0];return a.length}));return e.map(function(n){var a=n[0],s=n[1];return $K(r,a)+(s?" | "+s:" |")}).join(`
`)}function Z1(t){return Array(t+1).join(" ")}function $K(t,e){return Z1(t-e.length)+e}var Ve=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Ie=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function eb(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?eb=function(r){return typeof r}:eb=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},eb(t)}function UK(t){return eb(t)=="object"&&t!==null}function tb(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tb=function(r){return typeof r}:tb=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},tb(t)}function kP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kP(Object(r),!0).forEach(function(n){VK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VK(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kK(t,e,r){return e&&QP(t.prototype,e),r&&QP(t,r),t}function QK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xp(t,e)}function GK(t){var e=y9();return function(){var n=Rp(t),a;if(e){var s=Rp(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return p9(this,a)}}function p9(t,e){return e&&(tb(e)==="object"||typeof e=="function")?e:Gh(t)}function Gh(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sO(t){var e=typeof Map=="function"?new Map:void 0;return sO=function(n){if(n===null||!zK(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,a)}function a(){return rb(n,arguments,Rp(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),xp(a,n)},sO(t)}function rb(t,e,r){return y9()?rb=Reflect.construct:rb=function(a,s,o){var u=[null];u.push.apply(u,s);var c=Function.bind.apply(a,u),l=new c;return o&&xp(l,o.prototype),l},rb.apply(null,arguments)}function y9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function zK(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function xp(t,e){return xp=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},xp(t,e)}function Rp(t){return Rp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Rp(t)}var WK=function(t){QK(r,t);var e=GK(r);function r(n,a,s,o,u,c,l){var d,f,h,p;HK(this,r),p=e.call(this,n),p.name="GraphQLError",p.originalError=c??void 0,p.nodes=GP(Array.isArray(a)?a:a?[a]:void 0);for(var b=[],_=0,E=(w=p.nodes)!==null&&w!==void 0?w:[];_<E.length;_++){var w,O=E[_],A=O.loc;A!=null&&b.push(A)}b=GP(b),p.source=s??((d=b)===null||d===void 0?void 0:d[0].source),p.positions=o??((f=b)===null||f===void 0?void 0:f.map(function(I){return I.start})),p.locations=o&&s?o.map(function(I){return Nb(s,I)}):(h=b)===null||h===void 0?void 0:h.map(function(I){return Nb(I.source,I.start)}),p.path=u??void 0;var T=c==null?void 0:c.extensions;return l==null&&UK(T)?p.extensions=qK({},T):p.extensions=l??{},Object.defineProperties(Gh(p),{message:{enumerable:!0},locations:{enumerable:p.locations!=null},path:{enumerable:p.path!=null},extensions:{enumerable:p.extensions!=null&&Object.keys(p.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?(Object.defineProperty(Gh(p),"stack",{value:c.stack,writable:!0,configurable:!0}),p9(p)):(Error.captureStackTrace?Error.captureStackTrace(Gh(p),r):Object.defineProperty(Gh(p),"stack",{value:Error().stack,writable:!0,configurable:!0}),p)}return kK(r,[{key:"toString",value:function(){return XK(this)}},{key:l9,get:function(){return"Object"}}]),r}(sO(Error));function GP(t){return t===void 0||t.length===0?void 0:t}function XK(t){var e=t.message;if(t.nodes)for(var r=0,n=t.nodes;r<n.length;r++){var a=n[r];a.loc&&(e+=`

`+h9(a.loc))}else if(t.source&&t.locations)for(var s=0,o=t.locations;s<o.length;s++){var u=o[s];e+=`

`+cx(t.source,u)}return e}function ea(t,e,r){return new WK("Syntax Error: ".concat(r),void 0,t,[e])}function KK(t,e){var r=!!t;if(!r)throw new Error(e??"Unexpected invariant triggered.")}function b9(t){var e=t.prototype.toJSON;typeof e=="function"||KK(0),t.prototype.inspect=e,aO&&(t.prototype[aO]=e)}var lx=function(){function t(r,n,a){this.start=r.start,this.end=n.end,this.startToken=r,this.endToken=n,this.source=a}var e=t.prototype;return e.toJSON=function(){return{start:this.start,end:this.end}},t}();b9(lx);var Vr=function(){function t(r,n,a,s,o,u,c){this.kind=r,this.start=n,this.end=a,this.line=s,this.column=o,this.value=c,this.prev=u,this.next=null}var e=t.prototype;return e.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t}();b9(Vr);function zP(t){return t!=null&&typeof t.kind=="string"}function JK(t){var e=t.split(/\r\n|[\n\r]/g),r=YK(t);if(r!==0)for(var n=1;n<e.length;n++)e[n]=e[n].slice(r);for(var a=0;a<e.length&&WP(e[a]);)++a;for(var s=e.length;s>a&&WP(e[s-1]);)--s;return e.slice(a,s).join(`
`)}function WP(t){for(var e=0;e<t.length;++e)if(t[e]!==" "&&t[e]!=="	")return!1;return!0}function YK(t){for(var e,r=!0,n=!0,a=0,s=null,o=0;o<t.length;++o)switch(t.charCodeAt(o)){case 13:t.charCodeAt(o+1)===10&&++o;case 10:r=!1,n=!0,a=0;break;case 9:case 32:++a;break;default:n&&!r&&(s===null||a<s)&&(s=a),n=!1}return(e=s)!==null&&e!==void 0?e:0}function ZK(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=t.indexOf(`
`)===-1,a=t[0]===" "||t[0]==="	",s=t[t.length-1]==='"',o=t[t.length-1]==="\\",u=!n||s||o||r,c="";return u&&!(n&&a)&&(c+=`
`+e),c+=e?t.replace(/\n/g,`
`+e):t,u&&(c+=`
`),'"""'+c.replace(/"""/g,'\\"""')+'"""'}var _9=function(){function t(r){var n=new Vr(Ie.SOF,0,0,0,0,null);this.source=r,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}var e=t.prototype;return e.advance=function(){this.lastToken=this.token;var n=this.token=this.lookahead();return n},e.lookahead=function(){var n=this.token;if(n.kind!==Ie.EOF)do{var a;n=(a=n.next)!==null&&a!==void 0?a:n.next=tJ(this,n)}while(n.kind===Ie.COMMENT);return n},t}();function eJ(t){return t===Ie.BANG||t===Ie.DOLLAR||t===Ie.AMP||t===Ie.PAREN_L||t===Ie.PAREN_R||t===Ie.SPREAD||t===Ie.COLON||t===Ie.EQUALS||t===Ie.AT||t===Ie.BRACKET_L||t===Ie.BRACKET_R||t===Ie.BRACE_L||t===Ie.PIPE||t===Ie.BRACE_R}function ol(t){return isNaN(t)?Ie.EOF:t<127?JSON.stringify(String.fromCharCode(t)):'"\\u'.concat(("00"+t.toString(16).toUpperCase()).slice(-4),'"')}function tJ(t,e){for(var r=t.source,n=r.body,a=n.length,s=e.end;s<a;){var o=n.charCodeAt(s),u=t.line,c=1+s-t.lineStart;switch(o){case 65279:case 9:case 32:case 44:++s;continue;case 10:++s,++t.line,t.lineStart=s;continue;case 13:n.charCodeAt(s+1)===10?s+=2:++s,++t.line,t.lineStart=s;continue;case 33:return new Vr(Ie.BANG,s,s+1,u,c,e);case 35:return nJ(r,s,u,c,e);case 36:return new Vr(Ie.DOLLAR,s,s+1,u,c,e);case 38:return new Vr(Ie.AMP,s,s+1,u,c,e);case 40:return new Vr(Ie.PAREN_L,s,s+1,u,c,e);case 41:return new Vr(Ie.PAREN_R,s,s+1,u,c,e);case 46:if(n.charCodeAt(s+1)===46&&n.charCodeAt(s+2)===46)return new Vr(Ie.SPREAD,s,s+3,u,c,e);break;case 58:return new Vr(Ie.COLON,s,s+1,u,c,e);case 61:return new Vr(Ie.EQUALS,s,s+1,u,c,e);case 64:return new Vr(Ie.AT,s,s+1,u,c,e);case 91:return new Vr(Ie.BRACKET_L,s,s+1,u,c,e);case 93:return new Vr(Ie.BRACKET_R,s,s+1,u,c,e);case 123:return new Vr(Ie.BRACE_L,s,s+1,u,c,e);case 124:return new Vr(Ie.PIPE,s,s+1,u,c,e);case 125:return new Vr(Ie.BRACE_R,s,s+1,u,c,e);case 34:return n.charCodeAt(s+1)===34&&n.charCodeAt(s+2)===34?sJ(r,s,u,c,e,t):aJ(r,s,u,c,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return iJ(r,s,o,u,c,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return uJ(r,s,u,c,e)}throw ea(r,s,rJ(o))}var l=t.line,d=1+s-t.lineStart;return new Vr(Ie.EOF,a,a,l,d,e)}function rJ(t){return t<32&&t!==9&&t!==10&&t!==13?"Cannot contain the invalid character ".concat(ol(t),"."):t===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(ol(t),".")}function nJ(t,e,r,n,a){var s=t.body,o,u=e;do o=s.charCodeAt(++u);while(!isNaN(o)&&(o>31||o===9));return new Vr(Ie.COMMENT,e,u,r,n,a,s.slice(e+1,u))}function iJ(t,e,r,n,a,s){var o=t.body,u=r,c=e,l=!1;if(u===45&&(u=o.charCodeAt(++c)),u===48){if(u=o.charCodeAt(++c),u>=48&&u<=57)throw ea(t,c,"Invalid number, unexpected digit after 0: ".concat(ol(u),"."))}else c=B3(t,c,u),u=o.charCodeAt(c);if(u===46&&(l=!0,u=o.charCodeAt(++c),c=B3(t,c,u),u=o.charCodeAt(c)),(u===69||u===101)&&(l=!0,u=o.charCodeAt(++c),(u===43||u===45)&&(u=o.charCodeAt(++c)),c=B3(t,c,u),u=o.charCodeAt(c)),u===46||cJ(u))throw ea(t,c,"Invalid number, expected digit but got: ".concat(ol(u),"."));return new Vr(l?Ie.FLOAT:Ie.INT,e,c,n,a,s,o.slice(e,c))}function B3(t,e,r){var n=t.body,a=e,s=r;if(s>=48&&s<=57){do s=n.charCodeAt(++a);while(s>=48&&s<=57);return a}throw ea(t,a,"Invalid number, expected digit but got: ".concat(ol(s),"."))}function aJ(t,e,r,n,a){for(var s=t.body,o=e+1,u=o,c=0,l="";o<s.length&&!isNaN(c=s.charCodeAt(o))&&c!==10&&c!==13;){if(c===34)return l+=s.slice(u,o),new Vr(Ie.STRING,e,o+1,r,n,a,l);if(c<32&&c!==9)throw ea(t,o,"Invalid character within String: ".concat(ol(c),"."));if(++o,c===92){switch(l+=s.slice(u,o-1),c=s.charCodeAt(o),c){case 34:l+='"';break;case 47:l+="/";break;case 92:l+="\\";break;case 98:l+="\b";break;case 102:l+="\f";break;case 110:l+=`
`;break;case 114:l+="\r";break;case 116:l+="	";break;case 117:{var d=oJ(s.charCodeAt(o+1),s.charCodeAt(o+2),s.charCodeAt(o+3),s.charCodeAt(o+4));if(d<0){var f=s.slice(o+1,o+5);throw ea(t,o,"Invalid character escape sequence: \\u".concat(f,"."))}l+=String.fromCharCode(d),o+=4;break}default:throw ea(t,o,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}++o,u=o}}throw ea(t,o,"Unterminated string.")}function sJ(t,e,r,n,a,s){for(var o=t.body,u=e+3,c=u,l=0,d="";u<o.length&&!isNaN(l=o.charCodeAt(u));){if(l===34&&o.charCodeAt(u+1)===34&&o.charCodeAt(u+2)===34)return d+=o.slice(c,u),new Vr(Ie.BLOCK_STRING,e,u+3,r,n,a,JK(d));if(l<32&&l!==9&&l!==10&&l!==13)throw ea(t,u,"Invalid character within String: ".concat(ol(l),"."));l===10?(++u,++s.line,s.lineStart=u):l===13?(o.charCodeAt(u+1)===10?u+=2:++u,++s.line,s.lineStart=u):l===92&&o.charCodeAt(u+1)===34&&o.charCodeAt(u+2)===34&&o.charCodeAt(u+3)===34?(d+=o.slice(c,u)+'"""',u+=4,c=u):++u}throw ea(t,u,"Unterminated string.")}function oJ(t,e,r,n){return zy(t)<<12|zy(e)<<8|zy(r)<<4|zy(n)}function zy(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function uJ(t,e,r,n,a){for(var s=t.body,o=s.length,u=e+1,c=0;u!==o&&!isNaN(c=s.charCodeAt(u))&&(c===95||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++u;return new Vr(Ie.NAME,e,u,r,n,a,s.slice(e,u))}function cJ(t){return t===95||t>=65&&t<=90||t>=97&&t<=122}var g9=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function lJ(t,e){var r=new dx(t,e);return r.parseDocument()}function dJ(t,e){var r=new dx(t,e);r.expectToken(Ie.SOF);var n=r.parseValueLiteral(!1);return r.expectToken(Ie.EOF),n}function fJ(t,e){var r=new dx(t,e);r.expectToken(Ie.SOF);var n=r.parseTypeReference();return r.expectToken(Ie.EOF),n}var dx=function(){function t(r,n){var a=BK(r)?r:new ux(r);this._lexer=new _9(a),this._options=n}var e=t.prototype;return e.parseName=function(){var n=this.expectToken(Ie.NAME);return{kind:Ve.NAME,value:n.value,loc:this.loc(n)}},e.parseDocument=function(){var n=this._lexer.token;return{kind:Ve.DOCUMENT,definitions:this.many(Ie.SOF,this.parseDefinition,Ie.EOF),loc:this.loc(n)}},e.parseDefinition=function(){if(this.peek(Ie.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(Ie.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},e.parseOperationDefinition=function(){var n=this._lexer.token;if(this.peek(Ie.BRACE_L))return{kind:Ve.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(n)};var a=this.parseOperationType(),s;return this.peek(Ie.NAME)&&(s=this.parseName()),{kind:Ve.OPERATION_DEFINITION,operation:a,name:s,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},e.parseOperationType=function(){var n=this.expectToken(Ie.NAME);switch(n.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(n)},e.parseVariableDefinitions=function(){return this.optionalMany(Ie.PAREN_L,this.parseVariableDefinition,Ie.PAREN_R)},e.parseVariableDefinition=function(){var n=this._lexer.token;return{kind:Ve.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(Ie.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(Ie.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(n)}},e.parseVariable=function(){var n=this._lexer.token;return this.expectToken(Ie.DOLLAR),{kind:Ve.VARIABLE,name:this.parseName(),loc:this.loc(n)}},e.parseSelectionSet=function(){var n=this._lexer.token;return{kind:Ve.SELECTION_SET,selections:this.many(Ie.BRACE_L,this.parseSelection,Ie.BRACE_R),loc:this.loc(n)}},e.parseSelection=function(){return this.peek(Ie.SPREAD)?this.parseFragment():this.parseField()},e.parseField=function(){var n=this._lexer.token,a=this.parseName(),s,o;return this.expectOptionalToken(Ie.COLON)?(s=a,o=this.parseName()):o=a,{kind:Ve.FIELD,alias:s,name:o,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(Ie.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},e.parseArguments=function(n){var a=n?this.parseConstArgument:this.parseArgument;return this.optionalMany(Ie.PAREN_L,a,Ie.PAREN_R)},e.parseArgument=function(){var n=this._lexer.token,a=this.parseName();return this.expectToken(Ie.COLON),{kind:Ve.ARGUMENT,name:a,value:this.parseValueLiteral(!1),loc:this.loc(n)}},e.parseConstArgument=function(){var n=this._lexer.token;return{kind:Ve.ARGUMENT,name:this.parseName(),value:(this.expectToken(Ie.COLON),this.parseValueLiteral(!0)),loc:this.loc(n)}},e.parseFragment=function(){var n=this._lexer.token;this.expectToken(Ie.SPREAD);var a=this.expectOptionalKeyword("on");return!a&&this.peek(Ie.NAME)?{kind:Ve.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(n)}:{kind:Ve.INLINE_FRAGMENT,typeCondition:a?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},e.parseFragmentDefinition=function(){var n,a=this._lexer.token;return this.expectKeyword("fragment"),((n=this._options)===null||n===void 0?void 0:n.experimentalFragmentVariables)===!0?{kind:Ve.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(a)}:{kind:Ve.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(a)}},e.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},e.parseValueLiteral=function(n){var a=this._lexer.token;switch(a.kind){case Ie.BRACKET_L:return this.parseList(n);case Ie.BRACE_L:return this.parseObject(n);case Ie.INT:return this._lexer.advance(),{kind:Ve.INT,value:a.value,loc:this.loc(a)};case Ie.FLOAT:return this._lexer.advance(),{kind:Ve.FLOAT,value:a.value,loc:this.loc(a)};case Ie.STRING:case Ie.BLOCK_STRING:return this.parseStringLiteral();case Ie.NAME:switch(this._lexer.advance(),a.value){case"true":return{kind:Ve.BOOLEAN,value:!0,loc:this.loc(a)};case"false":return{kind:Ve.BOOLEAN,value:!1,loc:this.loc(a)};case"null":return{kind:Ve.NULL,loc:this.loc(a)};default:return{kind:Ve.ENUM,value:a.value,loc:this.loc(a)}}case Ie.DOLLAR:if(!n)return this.parseVariable();break}throw this.unexpected()},e.parseStringLiteral=function(){var n=this._lexer.token;return this._lexer.advance(),{kind:Ve.STRING,value:n.value,block:n.kind===Ie.BLOCK_STRING,loc:this.loc(n)}},e.parseList=function(n){var a=this,s=this._lexer.token,o=function(){return a.parseValueLiteral(n)};return{kind:Ve.LIST,values:this.any(Ie.BRACKET_L,o,Ie.BRACKET_R),loc:this.loc(s)}},e.parseObject=function(n){var a=this,s=this._lexer.token,o=function(){return a.parseObjectField(n)};return{kind:Ve.OBJECT,fields:this.any(Ie.BRACE_L,o,Ie.BRACE_R),loc:this.loc(s)}},e.parseObjectField=function(n){var a=this._lexer.token,s=this.parseName();return this.expectToken(Ie.COLON),{kind:Ve.OBJECT_FIELD,name:s,value:this.parseValueLiteral(n),loc:this.loc(a)}},e.parseDirectives=function(n){for(var a=[];this.peek(Ie.AT);)a.push(this.parseDirective(n));return a},e.parseDirective=function(n){var a=this._lexer.token;return this.expectToken(Ie.AT),{kind:Ve.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(n),loc:this.loc(a)}},e.parseTypeReference=function(){var n=this._lexer.token,a;return this.expectOptionalToken(Ie.BRACKET_L)?(a=this.parseTypeReference(),this.expectToken(Ie.BRACKET_R),a={kind:Ve.LIST_TYPE,type:a,loc:this.loc(n)}):a=this.parseNamedType(),this.expectOptionalToken(Ie.BANG)?{kind:Ve.NON_NULL_TYPE,type:a,loc:this.loc(n)}:a},e.parseNamedType=function(){var n=this._lexer.token;return{kind:Ve.NAMED_TYPE,name:this.parseName(),loc:this.loc(n)}},e.parseTypeSystemDefinition=function(){var n=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(n.kind===Ie.NAME)switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(n)},e.peekDescription=function(){return this.peek(Ie.STRING)||this.peek(Ie.BLOCK_STRING)},e.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},e.parseSchemaDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("schema");var s=this.parseDirectives(!0),o=this.many(Ie.BRACE_L,this.parseOperationTypeDefinition,Ie.BRACE_R);return{kind:Ve.SCHEMA_DEFINITION,description:a,directives:s,operationTypes:o,loc:this.loc(n)}},e.parseOperationTypeDefinition=function(){var n=this._lexer.token,a=this.parseOperationType();this.expectToken(Ie.COLON);var s=this.parseNamedType();return{kind:Ve.OPERATION_TYPE_DEFINITION,operation:a,type:s,loc:this.loc(n)}},e.parseScalarTypeDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("scalar");var s=this.parseName(),o=this.parseDirectives(!0);return{kind:Ve.SCALAR_TYPE_DEFINITION,description:a,name:s,directives:o,loc:this.loc(n)}},e.parseObjectTypeDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("type");var s=this.parseName(),o=this.parseImplementsInterfaces(),u=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:Ve.OBJECT_TYPE_DEFINITION,description:a,name:s,interfaces:o,directives:u,fields:c,loc:this.loc(n)}},e.parseImplementsInterfaces=function(){var n;if(!this.expectOptionalKeyword("implements"))return[];if(((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLImplementsInterfaces)===!0){var a=[];this.expectOptionalToken(Ie.AMP);do a.push(this.parseNamedType());while(this.expectOptionalToken(Ie.AMP)||this.peek(Ie.NAME));return a}return this.delimitedMany(Ie.AMP,this.parseNamedType)},e.parseFieldsDefinition=function(){var n;return((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLEmptyFields)===!0&&this.peek(Ie.BRACE_L)&&this._lexer.lookahead().kind===Ie.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(Ie.BRACE_L,this.parseFieldDefinition,Ie.BRACE_R)},e.parseFieldDefinition=function(){var n=this._lexer.token,a=this.parseDescription(),s=this.parseName(),o=this.parseArgumentDefs();this.expectToken(Ie.COLON);var u=this.parseTypeReference(),c=this.parseDirectives(!0);return{kind:Ve.FIELD_DEFINITION,description:a,name:s,arguments:o,type:u,directives:c,loc:this.loc(n)}},e.parseArgumentDefs=function(){return this.optionalMany(Ie.PAREN_L,this.parseInputValueDef,Ie.PAREN_R)},e.parseInputValueDef=function(){var n=this._lexer.token,a=this.parseDescription(),s=this.parseName();this.expectToken(Ie.COLON);var o=this.parseTypeReference(),u;this.expectOptionalToken(Ie.EQUALS)&&(u=this.parseValueLiteral(!0));var c=this.parseDirectives(!0);return{kind:Ve.INPUT_VALUE_DEFINITION,description:a,name:s,type:o,defaultValue:u,directives:c,loc:this.loc(n)}},e.parseInterfaceTypeDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("interface");var s=this.parseName(),o=this.parseImplementsInterfaces(),u=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:Ve.INTERFACE_TYPE_DEFINITION,description:a,name:s,interfaces:o,directives:u,fields:c,loc:this.loc(n)}},e.parseUnionTypeDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("union");var s=this.parseName(),o=this.parseDirectives(!0),u=this.parseUnionMemberTypes();return{kind:Ve.UNION_TYPE_DEFINITION,description:a,name:s,directives:o,types:u,loc:this.loc(n)}},e.parseUnionMemberTypes=function(){return this.expectOptionalToken(Ie.EQUALS)?this.delimitedMany(Ie.PIPE,this.parseNamedType):[]},e.parseEnumTypeDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("enum");var s=this.parseName(),o=this.parseDirectives(!0),u=this.parseEnumValuesDefinition();return{kind:Ve.ENUM_TYPE_DEFINITION,description:a,name:s,directives:o,values:u,loc:this.loc(n)}},e.parseEnumValuesDefinition=function(){return this.optionalMany(Ie.BRACE_L,this.parseEnumValueDefinition,Ie.BRACE_R)},e.parseEnumValueDefinition=function(){var n=this._lexer.token,a=this.parseDescription(),s=this.parseName(),o=this.parseDirectives(!0);return{kind:Ve.ENUM_VALUE_DEFINITION,description:a,name:s,directives:o,loc:this.loc(n)}},e.parseInputObjectTypeDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("input");var s=this.parseName(),o=this.parseDirectives(!0),u=this.parseInputFieldsDefinition();return{kind:Ve.INPUT_OBJECT_TYPE_DEFINITION,description:a,name:s,directives:o,fields:u,loc:this.loc(n)}},e.parseInputFieldsDefinition=function(){return this.optionalMany(Ie.BRACE_L,this.parseInputValueDef,Ie.BRACE_R)},e.parseTypeSystemExtension=function(){var n=this._lexer.lookahead();if(n.kind===Ie.NAME)switch(n.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(n)},e.parseSchemaExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var a=this.parseDirectives(!0),s=this.optionalMany(Ie.BRACE_L,this.parseOperationTypeDefinition,Ie.BRACE_R);if(a.length===0&&s.length===0)throw this.unexpected();return{kind:Ve.SCHEMA_EXTENSION,directives:a,operationTypes:s,loc:this.loc(n)}},e.parseScalarTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var a=this.parseName(),s=this.parseDirectives(!0);if(s.length===0)throw this.unexpected();return{kind:Ve.SCALAR_TYPE_EXTENSION,name:a,directives:s,loc:this.loc(n)}},e.parseObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var a=this.parseName(),s=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),u=this.parseFieldsDefinition();if(s.length===0&&o.length===0&&u.length===0)throw this.unexpected();return{kind:Ve.OBJECT_TYPE_EXTENSION,name:a,interfaces:s,directives:o,fields:u,loc:this.loc(n)}},e.parseInterfaceTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var a=this.parseName(),s=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),u=this.parseFieldsDefinition();if(s.length===0&&o.length===0&&u.length===0)throw this.unexpected();return{kind:Ve.INTERFACE_TYPE_EXTENSION,name:a,interfaces:s,directives:o,fields:u,loc:this.loc(n)}},e.parseUnionTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var a=this.parseName(),s=this.parseDirectives(!0),o=this.parseUnionMemberTypes();if(s.length===0&&o.length===0)throw this.unexpected();return{kind:Ve.UNION_TYPE_EXTENSION,name:a,directives:s,types:o,loc:this.loc(n)}},e.parseEnumTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var a=this.parseName(),s=this.parseDirectives(!0),o=this.parseEnumValuesDefinition();if(s.length===0&&o.length===0)throw this.unexpected();return{kind:Ve.ENUM_TYPE_EXTENSION,name:a,directives:s,values:o,loc:this.loc(n)}},e.parseInputObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var a=this.parseName(),s=this.parseDirectives(!0),o=this.parseInputFieldsDefinition();if(s.length===0&&o.length===0)throw this.unexpected();return{kind:Ve.INPUT_OBJECT_TYPE_EXTENSION,name:a,directives:s,fields:o,loc:this.loc(n)}},e.parseDirectiveDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("directive"),this.expectToken(Ie.AT);var s=this.parseName(),o=this.parseArgumentDefs(),u=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var c=this.parseDirectiveLocations();return{kind:Ve.DIRECTIVE_DEFINITION,description:a,name:s,arguments:o,repeatable:u,locations:c,loc:this.loc(n)}},e.parseDirectiveLocations=function(){return this.delimitedMany(Ie.PIPE,this.parseDirectiveLocation)},e.parseDirectiveLocation=function(){var n=this._lexer.token,a=this.parseName();if(g9[a.value]!==void 0)return a;throw this.unexpected(n)},e.loc=function(n){var a;if(((a=this._options)===null||a===void 0?void 0:a.noLocation)!==!0)return new lx(n,this._lexer.lastToken,this._lexer.source)},e.peek=function(n){return this._lexer.token.kind===n},e.expectToken=function(n){var a=this._lexer.token;if(a.kind===n)return this._lexer.advance(),a;throw ea(this._lexer.source,a.start,"Expected ".concat(m9(n),", found ").concat($3(a),"."))},e.expectOptionalToken=function(n){var a=this._lexer.token;if(a.kind===n)return this._lexer.advance(),a},e.expectKeyword=function(n){var a=this._lexer.token;if(a.kind===Ie.NAME&&a.value===n)this._lexer.advance();else throw ea(this._lexer.source,a.start,'Expected "'.concat(n,'", found ').concat($3(a),"."))},e.expectOptionalKeyword=function(n){var a=this._lexer.token;return a.kind===Ie.NAME&&a.value===n?(this._lexer.advance(),!0):!1},e.unexpected=function(n){var a=n??this._lexer.token;return ea(this._lexer.source,a.start,"Unexpected ".concat($3(a),"."))},e.any=function(n,a,s){this.expectToken(n);for(var o=[];!this.expectOptionalToken(s);)o.push(a.call(this));return o},e.optionalMany=function(n,a,s){if(this.expectOptionalToken(n)){var o=[];do o.push(a.call(this));while(!this.expectOptionalToken(s));return o}return[]},e.many=function(n,a,s){this.expectToken(n);var o=[];do o.push(a.call(this));while(!this.expectOptionalToken(s));return o},e.delimitedMany=function(n,a){this.expectOptionalToken(n);var s=[];do s.push(a.call(this));while(this.expectOptionalToken(n));return s},t}();function $3(t){var e=t.value;return m9(t.kind)+(e!=null?' "'.concat(e,'"'):"")}function m9(t){return eJ(t)?'"'.concat(t,'"'):t}var hJ={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},yd=Object.freeze({});function v9(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:hJ,n=void 0,a=Array.isArray(t),s=[t],o=-1,u=[],c=void 0,l=void 0,d=void 0,f=[],h=[],p=t;do{o++;var b=o===s.length,_=b&&u.length!==0;if(b){if(l=h.length===0?void 0:f[f.length-1],c=d,d=h.pop(),_){if(a)c=c.slice();else{for(var E={},w=0,O=Object.keys(c);w<O.length;w++){var A=O[w];E[A]=c[A]}c=E}for(var T=0,I=0;I<u.length;I++){var D=u[I][0],U=u[I][1];a&&(D-=T),a&&U===null?(c.splice(D,1),T++):c[D]=U}}o=n.index,s=n.keys,u=n.edits,a=n.inArray,n=n.prev}else{if(l=d?a?o:s[o]:void 0,c=d?d[l]:p,c==null)continue;d&&f.push(l)}var H=void 0;if(!Array.isArray(c)){if(!zP(c))throw new Error("Invalid AST Node: ".concat(f9(c),"."));var N=jb(e,c.kind,b);if(N){if(H=N.call(e,c,l,d,f,h),H===yd)break;if(H===!1){if(!b){f.pop();continue}}else if(H!==void 0&&(u.push([l,H]),!b))if(zP(H))c=H;else{f.pop();continue}}}if(H===void 0&&_&&u.push([l,c]),b)f.pop();else{var R;n={inArray:a,index:o,keys:s,edits:u,prev:n},a=Array.isArray(c),s=a?c:(R=r[c.kind])!==null&&R!==void 0?R:[],o=-1,u=[],d&&h.push(d),d=c}}while(n!==void 0);return u.length!==0&&(p=u[u.length-1][1]),p}function pJ(t){var e=new Array(t.length);return{enter:function(n){for(var a=0;a<t.length;a++)if(e[a]==null){var s=jb(t[a],n.kind,!1);if(s){var o=s.apply(t[a],arguments);if(o===!1)e[a]=n;else if(o===yd)e[a]=yd;else if(o!==void 0)return o}}},leave:function(n){for(var a=0;a<t.length;a++)if(e[a]==null){var s=jb(t[a],n.kind,!0);if(s){var o=s.apply(t[a],arguments);if(o===yd)e[a]=yd;else if(o!==void 0&&o!==!1)return o}}else e[a]===n&&(e[a]=null)}}}function jb(t,e,r){var n=t[e];if(n){if(!r&&typeof n=="function")return n;var a=r?n.leave:n.enter;if(typeof a=="function")return a}else{var s=r?t.leave:t.enter;if(s){if(typeof s=="function")return s;var o=s[e];if(typeof o=="function")return o}}}function yJ(t){return v9(t,{leave:_J})}var bJ=80,_J={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return et(e.definitions,`

`)+`
`},OperationDefinition:function(e){var r=e.operation,n=e.name,a=Ur("(",et(e.variableDefinitions,", "),")"),s=et(e.directives," "),o=e.selectionSet;return!n&&!s&&!a&&r==="query"?o:et([r,et([n,a]),s,o]," ")},VariableDefinition:function(e){var r=e.variable,n=e.type,a=e.defaultValue,s=e.directives;return r+": "+n+Ur(" = ",a)+Ur(" ",et(s," "))},SelectionSet:function(e){var r=e.selections;return Fa(r)},Field:function(e){var r=e.alias,n=e.name,a=e.arguments,s=e.directives,o=e.selectionSet,u=Ur("",r,": ")+n,c=u+Ur("(",et(a,", "),")");return c.length>bJ&&(c=u+Ur(`(
`,nb(et(a,`
`)),`
)`)),et([c,et(s," "),o]," ")},Argument:function(e){var r=e.name,n=e.value;return r+": "+n},FragmentSpread:function(e){var r=e.name,n=e.directives;return"..."+r+Ur(" ",et(n," "))},InlineFragment:function(e){var r=e.typeCondition,n=e.directives,a=e.selectionSet;return et(["...",Ur("on ",r),et(n," "),a]," ")},FragmentDefinition:function(e){var r=e.name,n=e.typeCondition,a=e.variableDefinitions,s=e.directives,o=e.selectionSet;return"fragment ".concat(r).concat(Ur("(",et(a,", "),")")," ")+"on ".concat(n," ").concat(Ur("",et(s," ")," "))+o},IntValue:function(e){var r=e.value;return r},FloatValue:function(e){var r=e.value;return r},StringValue:function(e,r){var n=e.value,a=e.block;return a?ZK(n,r==="description"?"":"  "):JSON.stringify(n)},BooleanValue:function(e){var r=e.value;return r?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var r=e.value;return r},ListValue:function(e){var r=e.values;return"["+et(r,", ")+"]"},ObjectValue:function(e){var r=e.fields;return"{"+et(r,", ")+"}"},ObjectField:function(e){var r=e.name,n=e.value;return r+": "+n},Directive:function(e){var r=e.name,n=e.arguments;return"@"+r+Ur("(",et(n,", "),")")},NamedType:function(e){var r=e.name;return r},ListType:function(e){var r=e.type;return"["+r+"]"},NonNullType:function(e){var r=e.type;return r+"!"},SchemaDefinition:Ma(function(t){var e=t.directives,r=t.operationTypes;return et(["schema",et(e," "),Fa(r)]," ")}),OperationTypeDefinition:function(e){var r=e.operation,n=e.type;return r+": "+n},ScalarTypeDefinition:Ma(function(t){var e=t.name,r=t.directives;return et(["scalar",e,et(r," ")]," ")}),ObjectTypeDefinition:Ma(function(t){var e=t.name,r=t.interfaces,n=t.directives,a=t.fields;return et(["type",e,Ur("implements ",et(r," & ")),et(n," "),Fa(a)]," ")}),FieldDefinition:Ma(function(t){var e=t.name,r=t.arguments,n=t.type,a=t.directives;return e+(XP(r)?Ur(`(
`,nb(et(r,`
`)),`
)`):Ur("(",et(r,", "),")"))+": "+n+Ur(" ",et(a," "))}),InputValueDefinition:Ma(function(t){var e=t.name,r=t.type,n=t.defaultValue,a=t.directives;return et([e+": "+r,Ur("= ",n),et(a," ")]," ")}),InterfaceTypeDefinition:Ma(function(t){var e=t.name,r=t.interfaces,n=t.directives,a=t.fields;return et(["interface",e,Ur("implements ",et(r," & ")),et(n," "),Fa(a)]," ")}),UnionTypeDefinition:Ma(function(t){var e=t.name,r=t.directives,n=t.types;return et(["union",e,et(r," "),n&&n.length!==0?"= "+et(n," | "):""]," ")}),EnumTypeDefinition:Ma(function(t){var e=t.name,r=t.directives,n=t.values;return et(["enum",e,et(r," "),Fa(n)]," ")}),EnumValueDefinition:Ma(function(t){var e=t.name,r=t.directives;return et([e,et(r," ")]," ")}),InputObjectTypeDefinition:Ma(function(t){var e=t.name,r=t.directives,n=t.fields;return et(["input",e,et(r," "),Fa(n)]," ")}),DirectiveDefinition:Ma(function(t){var e=t.name,r=t.arguments,n=t.repeatable,a=t.locations;return"directive @"+e+(XP(r)?Ur(`(
`,nb(et(r,`
`)),`
)`):Ur("(",et(r,", "),")"))+(n?" repeatable":"")+" on "+et(a," | ")}),SchemaExtension:function(e){var r=e.directives,n=e.operationTypes;return et(["extend schema",et(r," "),Fa(n)]," ")},ScalarTypeExtension:function(e){var r=e.name,n=e.directives;return et(["extend scalar",r,et(n," ")]," ")},ObjectTypeExtension:function(e){var r=e.name,n=e.interfaces,a=e.directives,s=e.fields;return et(["extend type",r,Ur("implements ",et(n," & ")),et(a," "),Fa(s)]," ")},InterfaceTypeExtension:function(e){var r=e.name,n=e.interfaces,a=e.directives,s=e.fields;return et(["extend interface",r,Ur("implements ",et(n," & ")),et(a," "),Fa(s)]," ")},UnionTypeExtension:function(e){var r=e.name,n=e.directives,a=e.types;return et(["extend union",r,et(n," "),a&&a.length!==0?"= "+et(a," | "):""]," ")},EnumTypeExtension:function(e){var r=e.name,n=e.directives,a=e.values;return et(["extend enum",r,et(n," "),Fa(a)]," ")},InputObjectTypeExtension:function(e){var r=e.name,n=e.directives,a=e.fields;return et(["extend input",r,et(n," "),Fa(a)]," ")}};function Ma(t){return function(e){return et([e.description,t(e)],`
`)}}function et(t){var e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(e=t==null?void 0:t.filter(function(n){return n}).join(r))!==null&&e!==void 0?e:""}function Fa(t){return Ur(`{
`,nb(et(t,`
`)),`
}`)}function Ur(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return e!=null&&e!==""?t+e+r:""}function nb(t){return Ur("  ",t.replace(/\n/g,`
  `))}function gJ(t){return t.indexOf(`
`)!==-1}function XP(t){return t!=null&&t.some(gJ)}function mJ(t){return w9(t)||S9(t)||E9(t)}function w9(t){return t.kind===Ve.OPERATION_DEFINITION||t.kind===Ve.FRAGMENT_DEFINITION}function vJ(t){return t.kind===Ve.FIELD||t.kind===Ve.FRAGMENT_SPREAD||t.kind===Ve.INLINE_FRAGMENT}function wJ(t){return t.kind===Ve.VARIABLE||t.kind===Ve.INT||t.kind===Ve.FLOAT||t.kind===Ve.STRING||t.kind===Ve.BOOLEAN||t.kind===Ve.NULL||t.kind===Ve.ENUM||t.kind===Ve.LIST||t.kind===Ve.OBJECT}function SJ(t){return t.kind===Ve.NAMED_TYPE||t.kind===Ve.LIST_TYPE||t.kind===Ve.NON_NULL_TYPE}function S9(t){return t.kind===Ve.SCHEMA_DEFINITION||T9(t)||t.kind===Ve.DIRECTIVE_DEFINITION}function T9(t){return t.kind===Ve.SCALAR_TYPE_DEFINITION||t.kind===Ve.OBJECT_TYPE_DEFINITION||t.kind===Ve.INTERFACE_TYPE_DEFINITION||t.kind===Ve.UNION_TYPE_DEFINITION||t.kind===Ve.ENUM_TYPE_DEFINITION||t.kind===Ve.INPUT_OBJECT_TYPE_DEFINITION}function E9(t){return t.kind===Ve.SCHEMA_EXTENSION||O9(t)}function O9(t){return t.kind===Ve.SCALAR_TYPE_EXTENSION||t.kind===Ve.OBJECT_TYPE_EXTENSION||t.kind===Ve.INTERFACE_TYPE_EXTENSION||t.kind===Ve.UNION_TYPE_EXTENSION||t.kind===Ve.ENUM_TYPE_EXTENSION||t.kind===Ve.INPUT_OBJECT_TYPE_EXTENSION}const TJ=Object.freeze(Object.defineProperty({__proto__:null,BREAK:yd,DirectiveLocation:g9,Kind:Ve,Lexer:_9,Location:lx,Source:ux,Token:Vr,TokenKind:Ie,getLocation:Nb,getVisitFn:jb,isDefinitionNode:mJ,isExecutableDefinitionNode:w9,isSelectionNode:vJ,isTypeDefinitionNode:T9,isTypeExtensionNode:O9,isTypeNode:SJ,isTypeSystemDefinitionNode:S9,isTypeSystemExtensionNode:E9,isValueNode:wJ,parse:lJ,parseType:fJ,parseValue:dJ,print:yJ,printLocation:h9,printSourceLocation:cx,visit:v9,visitInParallel:pJ},Symbol.toStringTag,{value:"Module"})),EJ=h_(TJ);var S0={},pn={},Ug={};(function(){(function(t){(function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(N){return N&&DataView.prototype.isPrototypeOf(N)}if(r.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(N){return N&&a.indexOf(Object.prototype.toString.call(N))>-1};function o(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(N))throw new TypeError("Invalid character in header field name");return N.toLowerCase()}function u(N){return typeof N!="string"&&(N=String(N)),N}function c(N){var R={next:function(){var F=N.shift();return{done:F===void 0,value:F}}};return r.iterable&&(R[Symbol.iterator]=function(){return R}),R}function l(N){this.map={},N instanceof l?N.forEach(function(R,F){this.append(F,R)},this):Array.isArray(N)?N.forEach(function(R){this.append(R[0],R[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(R){this.append(R,N[R])},this)}l.prototype.append=function(N,R){N=o(N),R=u(R);var F=this.map[N];this.map[N]=F?F+", "+R:R},l.prototype.delete=function(N){delete this.map[o(N)]},l.prototype.get=function(N){return N=o(N),this.has(N)?this.map[N]:null},l.prototype.has=function(N){return this.map.hasOwnProperty(o(N))},l.prototype.set=function(N,R){this.map[o(N)]=u(R)},l.prototype.forEach=function(N,R){for(var F in this.map)this.map.hasOwnProperty(F)&&N.call(R,this.map[F],F,this)},l.prototype.keys=function(){var N=[];return this.forEach(function(R,F){N.push(F)}),c(N)},l.prototype.values=function(){var N=[];return this.forEach(function(R){N.push(R)}),c(N)},l.prototype.entries=function(){var N=[];return this.forEach(function(R,F){N.push([F,R])}),c(N)},r.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);function d(N){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}function f(N){return new Promise(function(R,F){N.onload=function(){R(N.result)},N.onerror=function(){F(N.error)}})}function h(N){var R=new FileReader,F=f(R);return R.readAsArrayBuffer(N),F}function p(N){var R=new FileReader,F=f(R);return R.readAsText(N),F}function b(N){for(var R=new Uint8Array(N),F=new Array(R.length),X=0;X<R.length;X++)F[X]=String.fromCharCode(R[X]);return F.join("")}function _(N){if(N.slice)return N.slice(0);var R=new Uint8Array(N.byteLength);return R.set(new Uint8Array(N)),R.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(N){this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:r.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:r.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():r.arrayBuffer&&r.blob&&n(N)?(this._bodyArrayBuffer=_(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||s(N))?this._bodyArrayBuffer=_(N):this._bodyText=N=Object.prototype.toString.call(N):this._bodyText="",this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var N=d(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var N=d(this);if(N)return N;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(b(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function O(N){var R=N.toUpperCase();return w.indexOf(R)>-1?R:N}function A(N,R){R=R||{};var F=R.body;if(N instanceof A){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,R.headers||(this.headers=new l(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!F&&N._bodyInit!=null&&(F=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new l(R.headers)),this.method=O(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&F)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(F)}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})};function T(N){var R=new FormData;return N.trim().split("&").forEach(function(F){if(F){var X=F.split("="),ne=X.shift().replace(/\+/g," "),$=X.join("=").replace(/\+/g," ");R.append(decodeURIComponent(ne),decodeURIComponent($))}}),R}function I(N){var R=new l,F=N.replace(/\r?\n[\t ]+/g," ");return F.split(/\r?\n/).forEach(function(X){var ne=X.split(":"),$=ne.shift().trim();if($){var C=ne.join(":").trim();R.append($,C)}}),R}E.call(A.prototype);function D(N,R){R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in R?R.statusText:"OK",this.headers=new l(R.headers),this.url=R.url||"",this._initBody(N)}E.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},D.error=function(){var N=new D(null,{status:0,statusText:""});return N.type="error",N};var U=[301,302,303,307,308];D.redirect=function(N,R){if(U.indexOf(R)===-1)throw new RangeError("Invalid status code");return new D(null,{status:R,headers:{location:N}})},e.DOMException=t.DOMException;try{new e.DOMException}catch{e.DOMException=function(R,F){this.message=R,this.name=F;var X=Error(R);this.stack=X.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function H(N,R){return new Promise(function(F,X){var ne=new A(N,R);if(ne.signal&&ne.signal.aborted)return X(new e.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function C(){$.abort()}$.onload=function(){var Q={status:$.status,statusText:$.statusText,headers:I($.getAllResponseHeaders()||"")};Q.url="responseURL"in $?$.responseURL:Q.headers.get("X-Request-URL");var se="response"in $?$.response:$.responseText;F(new D(se,Q))},$.onerror=function(){X(new TypeError("Network request failed"))},$.ontimeout=function(){X(new TypeError("Network request failed"))},$.onabort=function(){X(new e.DOMException("Aborted","AbortError"))},$.open(ne.method,ne.url,!0),ne.credentials==="include"?$.withCredentials=!0:ne.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&r.blob&&($.responseType="blob"),ne.headers.forEach(function(Q,se){$.setRequestHeader(se,Q)}),ne.signal&&(ne.signal.addEventListener("abort",C),$.onreadystatechange=function(){$.readyState===4&&ne.signal.removeEventListener("abort",C)}),$.send(typeof ne._bodyInit>"u"?null:ne._bodyInit)})}return H.polyfill=!0,t.fetch||(t.fetch=H,t.Headers=l,t.Request=A,t.Response=D),e.Headers=l,e.Request=A,e.Response=D,e.fetch=H,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:g)})();var Oa={},qu={};Object.defineProperty(qu,"__esModule",{value:!0});qu.removeDotSegmentsOfPath=qu.removeDotSegments=qu.resolve=void 0;function OJ(t,e){e=e||"";const r=e.indexOf("#");if(r>0&&(e=e.substr(0,r)),!t.length){if(e.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${e}' for value '${t}'`);return e}if(t.startsWith("?")){const l=e.indexOf("?");return l>0&&(e=e.substr(0,l)),e+t}if(t.startsWith("#"))return e+t;if(!e.length){const l=t.indexOf(":");if(l<0)throw new Error(`Found invalid relative IRI '${t}' for a missing baseIRI`);return Nc(t,l)}const n=t.indexOf(":");if(n>=0)return Nc(t,n);const a=e.indexOf(":");if(a<0)throw new Error(`Found invalid baseIRI '${e}' for value '${t}'`);const s=e.substr(0,a+1);if(t.indexOf("//")===0)return s+Nc(t,n);let o;if(e.indexOf("//",a)===a+1){if(o=e.indexOf("/",a+3),o<0)return e.length>a+3?e+"/"+Nc(t,n):s+Nc(t,n)}else if(o=e.indexOf("/",a+1),o<0)return s+Nc(t,n);if(t.indexOf("/")===0)return e.substr(0,o)+Cb(t);let u=e.substr(o);const c=u.lastIndexOf("/");return c>=0&&c<u.length-1&&(u=u.substr(0,c+1),t[0]==="."&&t[1]!=="."&&t[1]!=="/"&&t[2]&&(t=t.substr(1))),t=u+t,t=Cb(t),e.substr(0,o)+t}qu.resolve=OJ;function Cb(t){const e=[];let r=0;for(;r<t.length;)switch(t[r]){case"/":if(t[r+1]===".")if(t[r+2]==="."){if(!KP(t[r+3])){e.push([]),r++;break}e.pop(),t[r+3]||e.push([]),r+=3}else{if(!KP(t[r+2])){e.push([]),r++;break}t[r+2]||e.push([]),r+=2}else e.push([]),r++;break;case"#":case"?":e.length||e.push([]),e[e.length-1].push(t.substr(r)),r=t.length;break;default:e.length||e.push([]),e[e.length-1].push(t[r]),r++;break}return"/"+e.map(n=>n.join("")).join("/")}qu.removeDotSegments=Cb;function Nc(t,e){let r=e+1;e>=0?t[e+1]==="/"&&t[e+2]==="/"&&(r=e+3):t[0]==="/"&&t[1]==="/"&&(r=2);const n=t.indexOf("/",r);if(n<0)return t;const a=t.substr(0,n),s=t.substr(n);return a+Cb(s)}qu.removeDotSegmentsOfPath=Nc;function KP(t){return!t||t==="#"||t==="?"||t==="/"}(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(qu,t)})(Oa);var Nf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=t.ErrorCoded=void 0;class e extends Error{constructor(n,a){super(n),this.code=a}}t.ErrorCoded=e,function(r){r.COLLIDING_KEYWORDS="colliding keywords",r.CONFLICTING_INDEXES="conflicting indexes",r.CYCLIC_IRI_MAPPING="cyclic IRI mapping",r.INVALID_ID_VALUE="invalid @id value",r.INVALID_INDEX_VALUE="invalid @index value",r.INVALID_NEST_VALUE="invalid @nest value",r.INVALID_PREFIX_VALUE="invalid @prefix value",r.INVALID_PROPAGATE_VALUE="invalid @propagate value",r.INVALID_REVERSE_VALUE="invalid @reverse value",r.INVALID_IMPORT_VALUE="invalid @import value",r.INVALID_VERSION_VALUE="invalid @version value",r.INVALID_BASE_IRI="invalid base IRI",r.INVALID_CONTAINER_MAPPING="invalid container mapping",r.INVALID_CONTEXT_ENTRY="invalid context entry",r.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",r.INVALID_DEFAULT_LANGUAGE="invalid default language",r.INVALID_INCLUDED_VALUE="invalid @included value",r.INVALID_IRI_MAPPING="invalid IRI mapping",r.INVALID_JSON_LITERAL="invalid JSON literal",r.INVALID_KEYWORD_ALIAS="invalid keyword alias",r.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",r.INVALID_LANGUAGE_MAPPING="invalid language mapping",r.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",r.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",r.INVALID_LOCAL_CONTEXT="invalid local context",r.INVALID_REMOTE_CONTEXT="invalid remote context",r.INVALID_REVERSE_PROPERTY="invalid reverse property",r.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",r.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",r.INVALID_SCOPED_CONTEXT="invalid scoped context",r.INVALID_SCRIPT_ELEMENT="invalid script element",r.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",r.INVALID_TERM_DEFINITION="invalid term definition",r.INVALID_TYPE_MAPPING="invalid type mapping",r.INVALID_TYPE_VALUE="invalid type value",r.INVALID_TYPED_VALUE="invalid typed value",r.INVALID_VALUE_OBJECT="invalid value object",r.INVALID_VALUE_OBJECT_VALUE="invalid value object value",r.INVALID_VOCAB_MAPPING="invalid vocab mapping",r.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",r.KEYWORD_REDEFINITION="keyword redefinition",r.LOADING_DOCUMENT_FAILED="loading document failed",r.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",r.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",r.PROCESSING_MODE_CONFLICT="processing mode conflict",r.PROTECTED_TERM_REDEFINITION="protected term redefinition",r.CONTEXT_OVERFLOW="context overflow",r.INVALID_BASE_DIRECTION="invalid base direction",r.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",r.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",r.INVALID_EMBEDDED_NODE="invalid embedded node",r.INVALID_ANNOTATION="invalid annotation"}(t.ERROR_CODES||(t.ERROR_CODES={}))})(Nf);var T0={},AJ=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,xJ=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,RJ=/\s|\uFEFF|\xA0/,IJ=/\r?\n[\x20\x09]+/g,PJ=/[;,"]/,DJ=/[;,"]|\s/,NJ=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,po={IDLE:1,URI:2,ATTR:4};function JP(t){return t.replace(xJ,"")}function ib(t){return RJ.test(t)}function jJ(t,e){for(;ib(t[e]);)e++;return e}function YP(t){return DJ.test(t)||!NJ.test(t)}function CJ(t,e){return Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>r in e&&t[r]===e[r])}class Or{constructor(e){this.refs=[],e&&this.parse(e)}rel(e){for(var r=[],n=e.toLowerCase(),a=0;a<this.refs.length;a++)this.refs[a].rel.toLowerCase()===n&&r.push(this.refs[a]);return r}get(e,r){e=e.toLowerCase();for(var n=[],a=0;a<this.refs.length;a++)this.refs[a][e]===r&&n.push(this.refs[a]);return n}set(e){return this.refs.push(e),this}setUnique(e){return this.refs.some(r=>CJ(r,e))||this.refs.push(e),this}has(e,r){e=e.toLowerCase();for(var n=0;n<this.refs.length;n++)if(this.refs[n][e]===r)return!0;return!1}parse(e,s){s=s||0,e=s?e.slice(s):e,e=JP(e).replace(IJ,"");for(var n=po.IDLE,a=e.length,s=0,o=null;s<a;)if(n===po.IDLE){if(ib(e[s])){s++;continue}else if(e[s]==="<"){o!=null&&(o.rel!=null?this.refs.push(...Or.expandRelations(o)):this.refs.push(o));var u=e.indexOf(">",s);if(u===-1)throw new Error("Expected end of URI delimiter at offset "+s);o={uri:e.slice(s+1,u)},s=u,n=po.URI}else throw new Error('Unexpected character "'+e[s]+'" at offset '+s);s++}else if(n===po.URI)if(ib(e[s])){s++;continue}else if(e[s]===";")n=po.ATTR,s++;else if(e[s]===",")n=po.IDLE,s++;else throw new Error('Unexpected character "'+e[s]+'" at offset '+s);else if(n===po.ATTR){if(e[s]===";"||ib(e[s])){s++;continue}var u=e.indexOf("=",s);u===-1&&(u=e.indexOf(";",s)),u===-1&&(u=e.length);var c=JP(e.slice(s,u)).toLowerCase(),l="";if(s=u+1,s=jJ(e,s),e[s]==='"')for(s++;s<a;){if(e[s]==='"'){s++;break}e[s]==="\\"&&s++,l+=e[s],s++}else{for(var u=s+1;!PJ.test(e[u])&&u<a;)u++;l=e.slice(s,u),s=u}switch(o[c]&&Or.isSingleOccurenceAttr(c)||(c[c.length-1]==="*"?o[c]=Or.parseExtendedValue(l):(l=c==="type"?l.toLowerCase():l,o[c]!=null?Array.isArray(o[c])?o[c].push(l):o[c]=[o[c],l]:o[c]=l)),e[s]){case",":n=po.IDLE;break;case";":n=po.ATTR;break}s++}else throw new Error('Unknown parser state "'+n+'"');return o!=null&&(o.rel!=null?this.refs.push(...Or.expandRelations(o)):this.refs.push(o)),o=null,this}toString(){for(var e=[],r="",n=null,a=0;a<this.refs.length;a++)n=this.refs[a],r=Object.keys(this.refs[a]).reduce(function(s,o){return o==="uri"?s:s+"; "+Or.formatAttribute(o,n[o])},"<"+n.uri+">"),e.push(r);return e.join(", ")}}Or.isCompatibleEncoding=function(t){return AJ.test(t)};Or.parse=function(t,e){return new Or().parse(t,e)};Or.isSingleOccurenceAttr=function(t){return t==="rel"||t==="type"||t==="media"||t==="title"||t==="title*"};Or.isTokenAttr=function(t){return t==="rel"||t==="type"||t==="anchor"};Or.escapeQuotes=function(t){return t.replace(/"/g,'\\"')};Or.expandRelations=function(t){var e=t.rel.split(" ");return e.map(function(r){var n=Object.assign({},t);return n.rel=r,n})};Or.parseExtendedValue=function(t){var e=/([^']+)?(?:'([^']*)')?(.+)/.exec(t);return{language:e[2].toLowerCase(),encoding:Or.isCompatibleEncoding(e[1])?null:e[1].toLowerCase(),value:Or.isCompatibleEncoding(e[1])?decodeURIComponent(e[3]):e[3]}};Or.formatExtendedAttribute=function(t,e){var r=(e.encoding||"utf-8").toUpperCase(),n=e.language||"en",a="";return Buffer.isBuffer(e.value)&&Or.isCompatibleEncoding(r)?a=e.value.toString(r):Buffer.isBuffer(e.value)?a=e.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):a=encodeURIComponent(e.value),t+"="+r+"'"+n+"'"+a};Or.formatAttribute=function(t,e){return Array.isArray(e)?e.map(r=>Or.formatAttribute(t,r)).join("; "):t[t.length-1]==="*"||typeof e!="string"?Or.formatExtendedAttribute(t,e):(Or.isTokenAttr(t)?e=YP(e)?'"'+Or.escapeQuotes(e)+'"':Or.escapeQuotes(e):YP(e)&&(e=encodeURIComponent(e),e=e.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),e='"'+e+'"'),t+"="+e)};var A9=Or;Object.defineProperty(T0,"__esModule",{value:!0});T0.FetchDocumentLoader=void 0;const ZP=Nf,MJ=A9,FJ=Oa;class LJ{constructor(e){this.fetcher=e}async load(e){const r=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(r.ok&&r.headers){let n=r.headers.get("Content-Type");if(n){const a=n.indexOf(";");a>0&&(n=n.substr(0,a))}if(n==="application/ld+json")return await r.json();if(r.headers.has("Link")){let a;if(r.headers.forEach((s,o)=>{if(o==="link"){const u=(0,MJ.parse)(s);for(const c of u.get("type","application/ld+json"))if(c.rel==="alternate"){if(a)throw new Error("Multiple JSON-LD alternate links were found on "+e);a=(0,FJ.resolve)(c.uri,e)}}}),a)return this.load(a)}throw new ZP.ErrorCoded(`Unsupported JSON-LD media type ${n}`,ZP.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(r.statusText||`Status code: ${r.status}`)}}T0.FetchDocumentLoader=LJ;var fx={},jf={};Object.defineProperty(jf,"__esModule",{value:!0});jf.Util=void 0;let ca=class vo{static isCompactIri(e){return e.indexOf(":")>0&&!(e&&e[0]==="#")}static getPrefix(e,r){if(e&&e[0]==="#")return null;const n=e.indexOf(":");if(n>=0){if(e.length>n+1&&e.charAt(n+1)==="/"&&e.charAt(n+2)==="/")return null;const a=e.substr(0,n);if(a==="_")return null;if(r[a])return a}return null}static getContextValueId(e){if(e===null||typeof e=="string")return e;const r=e["@id"];return r||null}static isSimpleTermDefinitionPrefix(e,r){return!vo.isPotentialKeyword(e)&&(r.allowPrefixNonGenDelims||typeof e=="string"&&(e[0]==="_"||vo.isPrefixIriEndingWithGenDelim(e)))}static isPotentialKeyword(e){return typeof e=="string"&&vo.KEYWORD_REGEX.test(e)}static isPrefixIriEndingWithGenDelim(e){return vo.ENDS_WITH_GEN_DELIM.test(e)}static isPrefixValue(e){return e&&(typeof e=="string"||e&&typeof e=="object")}static isValidIri(e){return!!(e&&vo.IRI_REGEX.test(e))}static isValidIriWeak(e){return!!e&&e[0]!==":"&&vo.IRI_REGEX_WEAK.test(e)}static isValidKeyword(e){return vo.VALID_KEYWORDS[e]}static isTermProtected(e,r){const n=e[r];return typeof n!="string"&&n&&n["@protected"]}static hasProtectedTerms(e){for(const r of Object.keys(e))if(vo.isTermProtected(e,r))return!0;return!1}static isReservedInternalKeyword(e){return e.startsWith("@__")}static deepEqual(e,r){const n=Object.keys(e),a=Object.keys(r);return n.length!==a.length?!1:n.every(s=>{const o=e[s],u=r[s];return o===u||o!==null&&u!==null&&typeof o=="object"&&typeof u=="object"&&this.deepEqual(o,u)})}};ca.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/;ca.IRI_REGEX_WEAK=/(?::[^:])|\//;ca.KEYWORD_REGEX=/^@[a-z]+$/i;ca.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/;ca.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/;ca.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/;ca.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0};ca.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"];ca.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"];ca.ALIAS_RANGE_BLACKLIST=["@context","@preserve"];ca.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"];ca.CONTAINERS_1_0=["@list","@set","@index"];jf.Util=ca;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpandOptions=t.JsonLdContextNormalized=void 0;const e=Oa,r=Nf,n=jf;class a{constructor(o){this.contextRaw=o}getContextRaw(){return this.contextRaw}expandTerm(o,u,c=t.defaultExpandOptions){const l=this.contextRaw[o];if(l===null||l&&l["@id"]===null)return null;let d=!0;if(l&&u){const E=n.Util.getContextValueId(l);if(E&&E!==o)if(typeof E!="string"||!n.Util.isValidIri(E)&&!n.Util.isValidKeyword(E))n.Util.isPotentialKeyword(E)||(d=!1);else return E}const f=n.Util.getPrefix(o,this.contextRaw),h=this.contextRaw["@vocab"],p=(!!h||h==="")&&h.indexOf(":")<0,b=this.contextRaw["@base"],_=n.Util.isPotentialKeyword(o);if(f){const E=this.contextRaw[f],w=n.Util.getContextValueId(E);if(w){if(typeof E=="string"||!c.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(w,c))return o}else if(w[0]!=="_"&&!_&&!E["@prefix"]&&!(o in this.contextRaw))return o;return w+o.substr(f.length+1)}}else if(u&&(h||h===""||c.allowVocabRelativeToBase&&b&&p)&&!_&&!n.Util.isCompactIri(o))if(p){if(c.allowVocabRelativeToBase)return(h||b?(0,e.resolve)(h,b):"")+o;throw new r.ErrorCoded(`Relative vocab expansion for term '${o}' with vocab '${h}' is not allowed.`,r.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return h+o;else if(!u&&b&&!_&&!n.Util.isCompactIri(o))return(0,e.resolve)(o,b);if(d)return o;throw new r.ErrorCoded(`Invalid IRI mapping found for context entry '${o}': '${JSON.stringify(l)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(o,u){if(u&&this.contextRaw["@vocab"]&&o.startsWith(this.contextRaw["@vocab"]))return o.substr(this.contextRaw["@vocab"].length);if(!u&&this.contextRaw["@base"]&&o.startsWith(this.contextRaw["@base"]))return o.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:o};for(const l in this.contextRaw){const d=this.contextRaw[l];if(d&&!n.Util.isPotentialKeyword(l)){const f=n.Util.getContextValueId(d);if(o.startsWith(f)){const h=o.substr(f.length);if(h)h.length<c.suffix.length&&(c.prefix=l,c.suffix=h);else if(u)return l}}}return c.prefix?c.prefix+":"+c.suffix:o}}t.JsonLdContextNormalized=a,t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(fx);Object.defineProperty(Ug,"__esModule",{value:!0});Ug.ContextParser=void 0;const eD=Oa,Ce=Nf,BJ=T0,La=fx,dt=jf;class Eo{constructor(e){e=e||{},this.documentLoader=e.documentLoader||new BJ.FetchDocumentLoader,this.documentCache={},this.validateContext=!e.skipValidation,this.expandContentTypeToBase=!!e.expandContentTypeToBase,this.remoteContextsDepthLimit=e.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in e?!!e.redirectSchemaOrgHttps:!0}static validateLanguage(e,r,n){if(typeof e!="string")throw new Ce.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(e)}'`,n);if(!dt.Util.REGEX_LANGUAGE_TAG.test(e)){if(r)throw new Ce.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(e)}'`,n);return!1}return!0}static validateDirection(e,r){if(typeof e!="string")throw new Ce.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(e)}'`,Ce.ERROR_CODES.INVALID_BASE_DIRECTION);if(!dt.Util.REGEX_DIRECTION_TAG.test(e)){if(r)throw new Ce.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(e)}'`,Ce.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(e){for(const r of Object.keys(e)){let n=e[r];if(n&&typeof n=="object"&&n["@reverse"]&&!n["@id"]){if(typeof n["@reverse"]!="string"||dt.Util.isValidKeyword(n["@reverse"]))throw new Ce.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${n["@reverse"]}'`,Ce.ERROR_CODES.INVALID_IRI_MAPPING);n=e[r]=Object.assign(Object.assign({},n),{"@id":n["@reverse"]}),n["@id"]=n["@reverse"],dt.Util.isPotentialKeyword(n["@reverse"])?delete n["@reverse"]:n["@reverse"]=!0}}return e}expandPrefixedTerms(e,r,n){const a=e.getContextRaw();for(const s of n||Object.keys(a))if(dt.Util.EXPAND_KEYS_BLACKLIST.indexOf(s)<0&&!dt.Util.isReservedInternalKeyword(s)){const o=a[s];if(dt.Util.isPotentialKeyword(s)&&dt.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(s)>=0&&(s!=="@type"||typeof a[s]=="object"&&!(a[s]["@protected"]||a[s]["@container"]==="@set")))throw new Ce.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${s} to ${JSON.stringify(o)}`,Ce.ERROR_CODES.KEYWORD_REDEFINITION);if(dt.Util.ALIAS_RANGE_BLACKLIST.indexOf(dt.Util.getContextValueId(o))>=0)throw new Ce.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${s} to ${JSON.stringify(o)}`,Ce.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(o&&dt.Util.isPotentialKeyword(dt.Util.getContextValueId(o))&&o["@prefix"]===!0)throw new Ce.ErrorCoded(`Tried to use keyword aliases as prefix: '${s}': '${JSON.stringify(o)}'`,Ce.ERROR_CODES.INVALID_TERM_DEFINITION);for(;dt.Util.isPrefixValue(a[s]);){const u=a[s];let c=!1;if(typeof u=="string")a[s]=e.expandTerm(u,!0),c=c||u!==a[s];else{const l=u["@id"],d=u["@type"],f=!("@prefix"in u)||dt.Util.isValidIri(s);if("@id"in u)l!=null&&typeof l=="string"&&(a[s]=Object.assign(Object.assign({},a[s]),{"@id":e.expandTerm(l,!0)}),c=c||l!==a[s]["@id"]);else if(!dt.Util.isPotentialKeyword(s)&&f){const h=e.expandTerm(s,!0);h!==s&&(a[s]=Object.assign(Object.assign({},a[s]),{"@id":h}),c=!0)}if(d&&typeof d=="string"&&d!=="@vocab"&&(!u["@container"]||!u["@container"]["@type"])&&f){let h=e.expandTerm(d,!0);r&&d===h&&(h=e.expandTerm(d,!1)),h!==d&&(c=!0,a[s]=Object.assign(Object.assign({},a[s]),{"@type":h}))}}if(!c)break}}}normalize(e,{processingMode:r,normalizeLanguageTags:n}){if(n||r===1)for(const a of Object.keys(e))if(a==="@language"&&typeof e[a]=="string")e[a]=e[a].toLowerCase();else{const s=e[a];if(s&&typeof s=="object"&&typeof s["@language"]=="string"){const o=s["@language"].toLowerCase();o!==s["@language"]&&(e[a]=Object.assign(Object.assign({},s),{"@language":o}))}}}containersToHash(e){for(const r of Object.keys(e)){const n=e[r];if(n&&typeof n=="object"){if(typeof n["@container"]=="string")e[r]=Object.assign(Object.assign({},n),{"@container":{[n["@container"]]:!0}});else if(Array.isArray(n["@container"])){const a={};for(const s of n["@container"])a[s]=!0;e[r]=Object.assign(Object.assign({},n),{"@container":a})}}}}applyScopedProtected(e,{processingMode:r},n){if(r&&r>=1.1&&e["@protected"]){for(const a of Object.keys(e))if(!dt.Util.isReservedInternalKeyword(a)&&!dt.Util.isPotentialKeyword(a)&&!dt.Util.isTermProtected(e,a)){const s=e[a];s&&typeof s=="object"?"@protected"in e[a]||(e[a]=Object.assign(Object.assign({},e[a]),{"@protected":!0})):(e[a]={"@id":s,"@protected":!0},dt.Util.isSimpleTermDefinitionPrefix(s,n)&&(e[a]=Object.assign(Object.assign({},e[a]),{"@prefix":!0})))}delete e["@protected"]}}validateKeywordRedefinitions(e,r,n,a){for(const s of a??Object.keys(r))if(dt.Util.isTermProtected(e,s)&&(typeof r[s]=="string"?r[s]={"@id":r[s],"@protected":!0}:r[s]=Object.assign(Object.assign({},r[s]),{"@protected":!0}),!dt.Util.deepEqual(e[s],r[s])))throw new Ce.ErrorCoded(`Attempted to override the protected keyword ${s} from ${JSON.stringify(dt.Util.getContextValueId(e[s]))} to ${JSON.stringify(dt.Util.getContextValueId(r[s]))}`,Ce.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(e,{processingMode:r}){for(const n of Object.keys(e)){if(dt.Util.isReservedInternalKeyword(n))continue;if(n==="")throw new Ce.ErrorCoded(`The empty term is not allowed, got: '${n}': '${JSON.stringify(e[n])}'`,Ce.ERROR_CODES.INVALID_TERM_DEFINITION);const a=e[n],s=typeof a;if(dt.Util.isPotentialKeyword(n)){switch(n.substr(1)){case"vocab":if(a!==null&&s!=="string")throw new Ce.ErrorCoded(`Found an invalid @vocab IRI: ${a}`,Ce.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(a!==null&&s!=="string")throw new Ce.ErrorCoded(`Found an invalid @base IRI: ${e[n]}`,Ce.ERROR_CODES.INVALID_BASE_IRI);break;case"language":a!==null&&Eo.validateLanguage(a,!0,Ce.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(a!==null&&s!=="number")throw new Ce.ErrorCoded(`Found an invalid @version number: ${a}`,Ce.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":a!==null&&Eo.validateDirection(a,!0);break;case"propagate":if(r===1)throw new Ce.ErrorCoded(`Found an illegal @propagate keyword: ${a}`,Ce.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(a!==null&&s!=="boolean")throw new Ce.ErrorCoded(`Found an invalid @propagate value: ${a}`,Ce.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(dt.Util.isValidKeyword(n)&&dt.Util.isValidKeyword(dt.Util.getContextValueId(a)))throw new Ce.ErrorCoded(`Illegal keyword alias in term value, found: '${n}': '${dt.Util.getContextValueId(a)}'`,Ce.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(a!==null)switch(s){case"string":if(dt.Util.getPrefix(a,e)===n)throw new Ce.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${n}': '${JSON.stringify(a)}'`,Ce.ERROR_CODES.CYCLIC_IRI_MAPPING);if(dt.Util.isValidIriWeak(n)){if(a==="@type")throw new Ce.ErrorCoded(`IRIs can not be mapped to @type, found: '${n}': '${a}'`,Ce.ERROR_CODES.INVALID_IRI_MAPPING);if(dt.Util.isValidIri(a)&&a!==new La.JsonLdContextNormalized(e).expandTerm(n))throw new Ce.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${n}': '${a}'`,Ce.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!dt.Util.isCompactIri(n)&&!("@id"in a)&&(a["@type"]==="@id"?!e["@base"]:!e["@vocab"]))throw new Ce.ErrorCoded(`Missing @id in context entry: '${n}': '${JSON.stringify(a)}'`,Ce.ERROR_CODES.INVALID_IRI_MAPPING);for(const o of Object.keys(a)){const u=a[o];if(u)switch(o){case"@id":if(dt.Util.isValidKeyword(u)&&u!=="@type"&&u!=="@id"&&u!=="@graph"&&u!=="@nest")throw new Ce.ErrorCoded(`Illegal keyword alias in term value, found: '${n}': '${JSON.stringify(a)}'`,Ce.ERROR_CODES.INVALID_IRI_MAPPING);if(dt.Util.isValidIriWeak(n)){if(u==="@type")throw new Ce.ErrorCoded(`IRIs can not be mapped to @type, found: '${n}': '${JSON.stringify(a)}'`,Ce.ERROR_CODES.INVALID_IRI_MAPPING);if(dt.Util.isValidIri(u)&&u!==new La.JsonLdContextNormalized(e).expandTerm(n))throw new Ce.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${n}': '${JSON.stringify(a)}'`,Ce.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof u!="string")throw new Ce.ErrorCoded(`Detected non-string @id in context entry: '${n}': '${JSON.stringify(a)}'`,Ce.ERROR_CODES.INVALID_IRI_MAPPING);if(dt.Util.getPrefix(u,e)===n)throw new Ce.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${n}': '${JSON.stringify(a)}'`,Ce.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(a["@container"]==="@type"&&u!=="@id"&&u!=="@vocab")throw new Ce.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${n}': '${u}'`,Ce.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof u!="string")throw new Ce.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(s)}'`,Ce.ERROR_CODES.INVALID_TYPE_MAPPING);if(u!=="@id"&&u!=="@vocab"&&(r===1||u!=="@json")&&(r===1||u!=="@none")&&(u[0]==="_"||!dt.Util.isValidIri(u)))throw new Ce.ErrorCoded(`A context @type must be an absolute IRI, found: '${n}': '${u}'`,Ce.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof u=="string"&&a["@id"]&&a["@id"]!==u)throw new Ce.ErrorCoded(`Found non-matching @id and @reverse term values in '${n}':'${u}' and '${a["@id"]}'`,Ce.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in a)throw new Ce.ErrorCoded(`@nest is not allowed in the reverse property '${n}'`,Ce.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(r===1&&(Object.keys(u).length>1||dt.Util.CONTAINERS_1_0.indexOf(Object.keys(u)[0])<0))throw new Ce.ErrorCoded(`Invalid term @container for '${n}' ('${Object.keys(u)}') in 1.0, must be only one of ${dt.Util.CONTAINERS_1_0.join(", ")}`,Ce.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const c of Object.keys(u)){if(c==="@list"&&a["@reverse"])throw new Ce.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${n}'`,Ce.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(dt.Util.CONTAINERS.indexOf(c)<0)throw new Ce.ErrorCoded(`Invalid term @container for '${n}' ('${c}'), must be one of ${dt.Util.CONTAINERS.join(", ")}`,Ce.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":Eo.validateLanguage(u,!0,Ce.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":Eo.validateDirection(u,!0);break;case"@prefix":if(u!==null&&typeof u!="boolean")throw new Ce.ErrorCoded(`Found an invalid term @prefix boolean in: '${n}': '${JSON.stringify(a)}'`,Ce.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in a)&&!dt.Util.isValidIri(n))throw new Ce.ErrorCoded(`Invalid @prefix definition for '${n}' ('${JSON.stringify(a)}'`,Ce.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(r===1||!a["@container"]||!a["@container"]["@index"])throw new Ce.ErrorCoded(`Attempt to add illegal key to value object: '${n}': '${JSON.stringify(a)}'`,Ce.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(dt.Util.isPotentialKeyword(u)&&u!=="@nest")throw new Ce.ErrorCoded(`Found an invalid term @nest value in: '${n}': '${JSON.stringify(a)}'`,Ce.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new Ce.ErrorCoded(`Found an invalid term value: '${n}': '${a}'`,Ce.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(e,r,n){return typeof e=="string"||(n&&!("@base"in e)&&r.parentContext&&typeof r.parentContext=="object"&&"@base"in r.parentContext&&(e["@base"]=r.parentContext["@base"],r.parentContext["@__baseDocument"]&&(e["@__baseDocument"]=!0)),r.baseIRI&&!r.external&&("@base"in e?e["@base"]!==null&&typeof e["@base"]=="string"&&!dt.Util.isValidIri(e["@base"])&&(e["@base"]=(0,eD.resolve)(e["@base"],r.parentContext&&r.parentContext["@base"]||r.baseIRI)):(e["@base"]=r.baseIRI,e["@__baseDocument"]=!0))),e}normalizeContextIri(e,r){if(!dt.Util.isValidIri(e))try{e=(0,eD.resolve)(e,r)}catch{throw new Error(`Invalid context IRI: ${e}`)}return this.redirectSchemaOrgHttps&&e.startsWith("http://schema.org")&&(e="https://schema.org/"),e}async parseInnerContexts(e,r,n){for(const a of n??Object.keys(e)){const s=e[a];if(s&&typeof s=="object"&&"@context"in s&&s["@context"]!==null&&!r.ignoreScopedContexts){if(this.validateContext)try{const o=Object.assign(Object.assign({},e),{[a]:Object.assign({},e[a])});delete o[a]["@context"],await this.parse(s["@context"],Object.assign(Object.assign({},r),{external:!1,parentContext:o,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(o){throw new Ce.ErrorCoded(o.message,Ce.ERROR_CODES.INVALID_SCOPED_CONTEXT)}e[a]=Object.assign(Object.assign({},s),{"@context":(await this.parse(s["@context"],Object.assign(Object.assign({},r),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:e}))).getContextRaw()})}}return e}async parse(e,r={},n={}){const{baseIRI:a,parentContext:s,external:o,processingMode:u=Eo.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:c,ignoreProtection:l,minimalProcessing:d}=r,f=r.remoteContexts||{};if(Object.keys(f).length>=this.remoteContextsDepthLimit)throw new Ce.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(f),Ce.ERROR_CODES.CONTEXT_OVERFLOW);if(e==null){if(!l&&s&&dt.Util.hasProtectedTerms(s))throw new Ce.ErrorCoded("Illegal context nullification when terms are protected",Ce.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new La.JsonLdContextNormalized(this.applyBaseEntry({},r,!1))}else if(typeof e=="string"){const h=this.normalizeContextIri(e,a),p=this.getOverriddenLoad(h,r);if(p)return new La.JsonLdContextNormalized(p);const b=await this.parse(await this.load(h),Object.assign(Object.assign({},r),{baseIRI:h,external:!0,remoteContexts:Object.assign(Object.assign({},f),{[h]:!0})}));return this.applyBaseEntry(b.getContextRaw(),r,!0),b}else if(Array.isArray(e)){const h=[],p=await Promise.all(e.map((_,E)=>{if(typeof _=="string"){const w=this.normalizeContextIri(_,a);h[E]=w;const O=this.getOverriddenLoad(w,r);return O||this.load(w)}else return _}));if(d)return new La.JsonLdContextNormalized(p);const b=await p.reduce((_,E,w)=>_.then(O=>this.parse(E,Object.assign(Object.assign({},r),{baseIRI:h[w]||r.baseIRI,external:!!h[w]||r.external,parentContext:O.getContextRaw(),remoteContexts:h[w]?Object.assign(Object.assign({},f),{[h[w]]:!0}):f}),{skipValidation:w<p.length-1})),Promise.resolve(new La.JsonLdContextNormalized(s||{})));return this.applyBaseEntry(b.getContextRaw(),r,!0),b}else if(typeof e=="object"){if("@context"in e)return await this.parse(e["@context"],r);if(e=Object.assign({},e),o&&delete e["@base"],this.applyBaseEntry(e,r,!0),this.containersToHash(e),d)return new La.JsonLdContextNormalized(e);let h={};if("@import"in e)if(u>=1.1){if(typeof e["@import"]!="string")throw new Ce.ErrorCoded("An @import value must be a string, but got "+typeof e["@import"],Ce.ERROR_CODES.INVALID_IMPORT_VALUE);h=await this.loadImportContext(this.normalizeContextIri(e["@import"],a)),delete e["@import"]}else throw new Ce.ErrorCoded("Context importing is not supported in JSON-LD 1.0",Ce.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(h,{processingMode:u},La.defaultExpandOptions);const p=Object.assign(h,e);this.idifyReverseTerms(p),this.normalize(p,{processingMode:u,normalizeLanguageTags:c}),this.applyScopedProtected(p,{processingMode:u},La.defaultExpandOptions);const b=Object.keys(p),_=[];if(typeof s=="object")for(const w in s)w in p?_.push(w):p[w]=s[w];await this.parseInnerContexts(p,r,b);const E=new La.JsonLdContextNormalized(p);return(p&&p["@version"]||Eo.DEFAULT_PROCESSING_MODE)>=1.1&&(e["@vocab"]&&typeof e["@vocab"]=="string"||e["@vocab"]==="")&&(s&&"@vocab"in s&&e["@vocab"].indexOf(":")<0?p["@vocab"]=s["@vocab"]+e["@vocab"]:(dt.Util.isCompactIri(e["@vocab"])||e["@vocab"]in p)&&(p["@vocab"]=E.expandTerm(e["@vocab"],!0))),this.expandPrefixedTerms(E,this.expandContentTypeToBase,b),!l&&s&&u>=1.1&&this.validateKeywordRedefinitions(s,p,La.defaultExpandOptions,_),this.validateContext&&!n.skipValidation&&this.validate(p,{processingMode:u}),E}else throw new Ce.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${e}`,Ce.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(e){const r=this.documentCache[e];if(r)return r;let n;try{n=await this.documentLoader.load(e)}catch(a){throw new Ce.ErrorCoded(`Failed to load remote context ${e}: ${a.message}`,Ce.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in n))throw new Ce.ErrorCoded(`Missing @context in remote context at ${e}`,Ce.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[e]=n["@context"]}getOverriddenLoad(e,r){if(e in(r.remoteContexts||{})){if(r.ignoreRemoteScopedContexts)return e;throw new Ce.ErrorCoded("Detected a cyclic context inclusion of "+e,Ce.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(e){let r=await this.load(e);if(typeof r!="object"||Array.isArray(r))throw new Ce.ErrorCoded("An imported context must be a single object: "+e,Ce.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in r)throw new Ce.ErrorCoded("An imported context can not import another context: "+e,Ce.ERROR_CODES.INVALID_CONTEXT_ENTRY);return r=Object.assign({},r),this.containersToHash(r),r}}Eo.DEFAULT_PROCESSING_MODE=1.1;Ug.ContextParser=Eo;var x9={};Object.defineProperty(x9,"__esModule",{value:!0});var R9={};Object.defineProperty(R9,"__esModule",{value:!0});(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ug,t),r(Nf,t),r(T0,t),r(x9,t),r(R9,t),r(fx,t),r(jf,t)})(pn);Object.defineProperty(S0,"__esModule",{value:!0});S0.Util=void 0;const $J=ft,UJ=pn,qJ=gt;let VJ=class{constructor(e){this.nodeHandlers={},this.nodeValueHandlers={},this.directiveNodeHandlers={},this.settings=e,this.dataFactory=e.dataFactory||new $J.DataFactory,this.operationFactory=new qJ.Factory(this.dataFactory),this.contextParser=new UJ.ContextParser}registerNodeHandler(e){this.nodeHandlers[e.targetKind]=e}registerNodeValueHandler(e){this.nodeValueHandlers[e.targetKind]=e}registerDirectiveNodeHandler(e){this.directiveNodeHandlers[e.targetKind]=e}handleNode(e,r){const n=this.nodeHandlers[e.kind];if(!n)throw new Error(`Unsupported GraphQL node '${e.kind}'`);return n.handle(e,r)}handleNodeValue(e,r,n){const a=this.nodeValueHandlers[e.kind];if(!a)throw new Error(`Unsupported GraphQL value node '${e.kind}'`);return a.handle(e,r,n)}handleDirectiveNode(e,r){const n=this.directiveNodeHandlers[e.directive.name.value];return n?n.handle(e,r):null}joinOperations(e){if(e.length===1)return e[0];const r=[],n=[];for(const a of e)a.type==="bgp"?r.push(a):n.push(a);if(r.length===e.length)return this.joinOperationsAsBgp(r);if(r.length===e.length-1&&n[0].type==="leftjoin"&&n[0].input[0].type==="bgp"){const a=n[0];return r.push(a.input[0]),this.operationFactory.createLeftJoin(this.joinOperationsAsBgp(r),a.input[1])}else return n.length===e.length?this.joinOperationsAsNestedJoin(n):this.joinOperationsAsNestedJoin([this.joinOperationsAsBgp(r),this.joinOperationsAsNestedJoin(n)])}joinOperationsAsBgp(e){return this.operationFactory.createBgp([].concat.apply([],e.map(r=>r.patterns)))}joinOperationsAsNestedJoin(e){return this.operationFactory.createJoin(e)}appendFieldToPath(e,r){return e.concat([r])}getFieldLabel(e){return(e.alias?e.alias:e.name).value}nameToVariable(e,r){return this.dataFactory.variable((r.path.length?r.path.join(this.settings.variableDelimiter)+this.settings.variableDelimiter:"")+e)}valueToNamedNode(e,r){const n=r.expandTerm(e,!0);if(this.settings.requireContext&&!n)throw new Error("No context entry was found for "+e);return this.dataFactory.namedNode(n||e)}getArgument(e,r){if(e){for(const n of e)if(n.name.value===r)return n}}newTypePattern(e,r,n){return this.operationFactory.createPattern(e,this.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.valueToNamedNode(r.name.value,n.context),n.graph)}createQuadPattern(e,r,n,a,s){const o=this.valueToNamedNode(r.value,s);return s&&s.getContextRaw()[r.value]&&s.getContextRaw()[r.value]["@reverse"]?this.operationFactory.createPattern(n,o,e,a):this.operationFactory.createPattern(e,o,n,a)}createQuadPath(e,r,n,a,s,o){const u=this.valueToNamedNode(r.value,o);let c=this.operationFactory.createLink(u);for(const l of n.values){if(l.kind!=="EnumValue")throw new Error("Invalid value type for 'alt' argument, must be EnumValue, but got "+l.kind);c=this.operationFactory.createAlt([c,this.operationFactory.createLink(this.valueToNamedNode(l.value,o))])}return o&&o.getContextRaw()[r.value]&&o.getContextRaw()[r.value]["@reverse"]?this.operationFactory.createPath(a,c,e,s):this.operationFactory.createPath(e,c,a,s)}};S0.Util=VJ;var HJ=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(f){o(f)}}function c(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Bg,"__esModule",{value:!0});Bg.Converter=void 0;const kJ=EJ,ci=sx,Yf=ox,QJ=Pf,GJ=S0;let zJ=class ab{constructor(e){e=e||{},e.variableDelimiter=e.variableDelimiter||"_",e.expressionVariableCounter=e.expressionVariableCounter||0,this.util=new GJ.Util(e),this.initializeNodeHandlers(e)}static registerNodeHandlers(e,r){e.registerNodeHandler(new ci.NodeHandlerDocument(e,r)),e.registerNodeHandler(new ci.NodeHandlerDefinitionOperation(e,r)),e.registerNodeHandler(new ci.NodeHandlerDefinitionFragment(e,r)),e.registerNodeHandler(new ci.NodeHandlerSelectionFragmentSpread(e,r)),e.registerNodeHandler(new ci.NodeHandlerSelectionInlineFragment(e,r)),e.registerNodeHandler(new ci.NodeHandlerSelectionField(e,r))}static registerNodeValueHandlers(e,r){e.registerNodeValueHandler(new ci.NodeValueHandlerVariable(e,r)),e.registerNodeValueHandler(new ci.NodeValueHandlerInt(e,r)),e.registerNodeValueHandler(new ci.NodeValueHandlerFloat(e,r)),e.registerNodeValueHandler(new ci.NodeValueHandlerString(e,r)),e.registerNodeValueHandler(new ci.NodeValueHandlerBoolean(e,r)),e.registerNodeValueHandler(new ci.NodeValueHandlerNull(e,r)),e.registerNodeValueHandler(new ci.NodeValueHandlerEnum(e,r)),e.registerNodeValueHandler(new ci.NodeValueHandlerList(e,r)),e.registerNodeValueHandler(new ci.NodeValueHandlerObject(e,r))}static registerDirectiveNodeHandlers(e,r){e.registerDirectiveNodeHandler(new Yf.DirectiveNodeHandlerInclude(e,r)),e.registerDirectiveNodeHandler(new Yf.DirectiveNodeHandlerOptional(e,r)),e.registerDirectiveNodeHandler(new Yf.DirectiveNodeHandlerPlural(e,r)),e.registerDirectiveNodeHandler(new Yf.DirectiveNodeHandlerSingle(e,r)),e.registerDirectiveNodeHandler(new Yf.DirectiveNodeHandlerSkip(e,r))}graphqlToSparqlAlgebra(e,r,n){return HJ(this,void 0,void 0,function*(){return this.graphqlToSparqlAlgebraRawContext(e,yield this.util.contextParser.parse(r),n)})}graphqlToSparqlAlgebraRawContext(e,r,n){n=n||{};const a=typeof e=="string"?(0,kJ.parse)(e):e,s=this.indexFragments(a),o={context:r,fragmentDefinitions:s,graph:this.util.dataFactory.defaultGraph(),path:[],singularizeState:QJ.SingularizeState.PLURAL,singularizeVariables:n.singularizeVariables||{},subject:null,terminalVariables:[],variablesDict:n.variablesDict||{},variablesMetaDict:{}};return this.util.handleNode(a,o)}indexFragments(e){const r={},n=[];for(const a of e.definitions)a.kind==="FragmentDefinition"?r[a.name.value]=a:n.push(a);return e.definitions=n,r}initializeNodeHandlers(e){ab.registerNodeHandlers(this.util,e),ab.registerNodeValueHandlers(this.util,e),ab.registerDirectiveNodeHandlers(this.util,e)}};Bg.Converter=zJ;var I9={};Object.defineProperty(I9,"__esModule",{value:!0});(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(sx,t),r(Bg,t),r(Pf,t),r(I9,t),r(S0,t)})(u9);Object.defineProperty(_g,"__esModule",{value:!0});_g.ActorQueryParseGraphql=void 0;const WJ=ax,tD=Ut,XJ=u9;class KJ extends WJ.ActorQueryParse{constructor(e){super(e),this.graphqlToSparql=new XJ.Converter({requireContext:!0})}async test(e){var r;if(((r=e.queryFormat)==null?void 0:r.language)!=="graphql")throw new Error("This actor can only parse GraphQL queries");return!0}async run(e){const r=e.context.get(tD.KeysInitQuery.jsonLdContext)||{},n={singularizeVariables:e.context.get(tD.KeysInitQuery.graphqlSingularizeVariables)};return{operation:await this.graphqlToSparql.graphqlToSparqlAlgebra(e.query,r,n)}}}_g.ActorQueryParseGraphql=KJ;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(_g,t)})(o9);var ac={},qg={};Object.defineProperty(qg,"__esModule",{value:!0});qg.MediatorCombineUnion=void 0;const JJ=Je;class YJ extends JJ.Mediator{constructor(e){super(e),this.combiner=this.createCombiner()}async mediate(e){let r;try{r=this.publish(e)}catch{r=[]}await Promise.all(r.map(({reply:a})=>a));const n=await Promise.all(r.map(a=>a.actor.runObservable(e)));return this.combiner(n)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return e=>{const r={};return r[this.field]={},[{}].concat(e.map(n=>n[this.field])).forEach((n,a,s)=>{r[this.field]={...n,...r[this.field]}}),r}}}qg.MediatorCombineUnion=YJ;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(qg,t)})(ac);var P9={},Vg={},cs={},Hg={},vl={},E0={};Object.defineProperty(E0,"__esModule",{value:!0});E0.ActorAbstractMediaTyped=void 0;const ZJ=Je;class eY extends ZJ.Actor{constructor(e){super(e)}async run(e){if("handle"in e){const r=e;return{handle:await this.runHandle(r.handle,r.handleMediaType,e.context)}}if("mediaTypes"in e)return{mediaTypes:await this.getMediaTypes(e.context)};if("mediaTypeFormats"in e)return{mediaTypeFormats:await this.getMediaTypeFormats(e.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}async test(e){if("handle"in e){const r=e;return{handle:await this.testHandle(r.handle,r.handleMediaType,e.context)}}if("mediaTypes"in e)return{mediaTypes:await this.testMediaType(e.context)};if("mediaTypeFormats"in e)return{mediaTypeFormats:await this.testMediaTypeFormats(e.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}}E0.ActorAbstractMediaTyped=eY;var kg={};Object.defineProperty(kg,"__esModule",{value:!0});kg.ActorAbstractMediaTypedFixed=void 0;const tY=E0;class rY extends tY.ActorAbstractMediaTyped{constructor(e){super(e);const r=this.priorityScale||this.priorityScale===0?this.priorityScale:1;this.mediaTypePriorities&&Object.entries(this.mediaTypePriorities).forEach(([n,a],s)=>{this.mediaTypePriorities[n]=r*a}),this.mediaTypePriorities=Object.freeze(this.mediaTypePriorities),this.mediaTypeFormats=Object.freeze(this.mediaTypeFormats)}async testHandle(e,r,n){if(!r||!(r in this.mediaTypePriorities))throw new Error(`Unrecognized media type: ${r}`);return await this.testHandleChecked(e,n)}async testMediaType(e){return!0}async getMediaTypes(e){return this.mediaTypePriorities}async testMediaTypeFormats(e){return!0}async getMediaTypeFormats(e){return this.mediaTypeFormats}}kg.ActorAbstractMediaTypedFixed=rY;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(E0,t),r(kg,t)})(vl);Object.defineProperty(Hg,"__esModule",{value:!0});Hg.ActorQueryResultSerialize=void 0;const nY=vl;class iY extends nY.ActorAbstractMediaTyped{constructor(e){super(e)}}Hg.ActorQueryResultSerialize=iY;var Qg={};Object.defineProperty(Qg,"__esModule",{value:!0});Qg.ActorQueryResultSerializeFixedMediaTypes=void 0;const aY=vl;class sY extends aY.ActorAbstractMediaTypedFixed{constructor(e){super(e)}async testHandleChecked(e,r){return!0}}Qg.ActorQueryResultSerializeFixedMediaTypes=sY;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Hg,t),r(Qg,t)})(cs);var D9={exports:{}},U3={exports:{}},la={},Gg={};Gg.byteLength=cY;Gg.toByteArray=dY;Gg.fromByteArray=pY;var js=[],pa=[],oY=typeof Uint8Array<"u"?Uint8Array:Array,q3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var zl=0,uY=q3.length;zl<uY;++zl)js[zl]=q3[zl],pa[q3.charCodeAt(zl)]=zl;pa["-".charCodeAt(0)]=62;pa["_".charCodeAt(0)]=63;function N9(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function cY(t){var e=N9(t),r=e[0],n=e[1];return(r+n)*3/4-n}function lY(t,e,r){return(e+r)*3/4-r}function dY(t){var e,r=N9(t),n=r[0],a=r[1],s=new oY(lY(t,n,a)),o=0,u=a>0?n-4:n,c;for(c=0;c<u;c+=4)e=pa[t.charCodeAt(c)]<<18|pa[t.charCodeAt(c+1)]<<12|pa[t.charCodeAt(c+2)]<<6|pa[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return a===2&&(e=pa[t.charCodeAt(c)]<<2|pa[t.charCodeAt(c+1)]>>4,s[o++]=e&255),a===1&&(e=pa[t.charCodeAt(c)]<<10|pa[t.charCodeAt(c+1)]<<4|pa[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function fY(t){return js[t>>18&63]+js[t>>12&63]+js[t>>6&63]+js[t&63]}function hY(t,e,r){for(var n,a=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),a.push(fY(n));return a.join("")}function pY(t){for(var e,r=t.length,n=r%3,a=[],s=16383,o=0,u=r-n;o<u;o+=s)a.push(hY(t,o,o+s>u?u:o+s));return n===1?(e=t[r-1],a.push(js[e>>2]+js[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],a.push(js[e>>10]+js[e>>4&63]+js[e<<2&63]+"=")),a.join("")}var hx={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */hx.read=function(t,e,r,n,a){var s,o,u=a*8-n-1,c=(1<<u)-1,l=c>>1,d=-7,f=r?a-1:0,h=r?-1:1,p=t[e+f];for(f+=h,s=p&(1<<-d)-1,p>>=-d,d+=u;d>0;s=s*256+t[e+f],f+=h,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=n;d>0;o=o*256+t[e+f],f+=h,d-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(p?-1:1)*o*Math.pow(2,s-n)};hx.write=function(t,e,r,n,a,s){var o,u,c,l=s*8-a-1,d=(1<<l)-1,f=d>>1,h=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,b=n?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+f>=1?e+=h/c:e+=h*Math.pow(2,1-f),e*c>=2&&(o++,c/=2),o+f>=d?(u=0,o=d):o+f>=1?(u=(e*c-1)*Math.pow(2,a),o=o+f):(u=e*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;t[r+p]=u&255,p+=b,u/=256,a-=8);for(o=o<<a|u,l+=a;l>0;t[r+p]=o&255,p+=b,o/=256,l-=8);t[r+p-b]|=_*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Gg,r=hx,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=O,t.INSPECT_MAX_BYTES=50;const a=2147483647;t.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=s(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const M=new Uint8Array(1),S={foo:function(){return 42}};return Object.setPrototypeOf(S,Uint8Array.prototype),Object.setPrototypeOf(M,S),M.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function o(M){if(M>a)throw new RangeError('The value "'+M+'" is invalid for option "size"');const S=new Uint8Array(M);return Object.setPrototypeOf(S,u.prototype),S}function u(M,S,x){if(typeof M=="number"){if(typeof S=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(M)}return c(M,S,x)}u.poolSize=8192;function c(M,S,x){if(typeof M=="string")return h(M,S);if(ArrayBuffer.isView(M))return b(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(ve(M,ArrayBuffer)||M&&ve(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ve(M,SharedArrayBuffer)||M&&ve(M.buffer,SharedArrayBuffer)))return _(M,S,x);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const z=M.valueOf&&M.valueOf();if(z!=null&&z!==M)return u.from(z,S,x);const ue=E(M);if(ue)return ue;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return u.from(M[Symbol.toPrimitive]("string"),S,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}u.from=function(M,S,x){return c(M,S,x)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function l(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function d(M,S,x){return l(M),M<=0?o(M):S!==void 0?typeof x=="string"?o(M).fill(S,x):o(M).fill(S):o(M)}u.alloc=function(M,S,x){return d(M,S,x)};function f(M){return l(M),o(M<0?0:w(M)|0)}u.allocUnsafe=function(M){return f(M)},u.allocUnsafeSlow=function(M){return f(M)};function h(M,S){if((typeof S!="string"||S==="")&&(S="utf8"),!u.isEncoding(S))throw new TypeError("Unknown encoding: "+S);const x=A(M,S)|0;let z=o(x);const ue=z.write(M,S);return ue!==x&&(z=z.slice(0,ue)),z}function p(M){const S=M.length<0?0:w(M.length)|0,x=o(S);for(let z=0;z<S;z+=1)x[z]=M[z]&255;return x}function b(M){if(ve(M,Uint8Array)){const S=new Uint8Array(M);return _(S.buffer,S.byteOffset,S.byteLength)}return p(M)}function _(M,S,x){if(S<0||M.byteLength<S)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<S+(x||0))throw new RangeError('"length" is outside of buffer bounds');let z;return S===void 0&&x===void 0?z=new Uint8Array(M):x===void 0?z=new Uint8Array(M,S):z=new Uint8Array(M,S,x),Object.setPrototypeOf(z,u.prototype),z}function E(M){if(u.isBuffer(M)){const S=w(M.length)|0,x=o(S);return x.length===0||M.copy(x,0,0,S),x}if(M.length!==void 0)return typeof M.length!="number"||me(M.length)?o(0):p(M);if(M.type==="Buffer"&&Array.isArray(M.data))return p(M.data)}function w(M){if(M>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return M|0}function O(M){return+M!=M&&(M=0),u.alloc(+M)}u.isBuffer=function(S){return S!=null&&S._isBuffer===!0&&S!==u.prototype},u.compare=function(S,x){if(ve(S,Uint8Array)&&(S=u.from(S,S.offset,S.byteLength)),ve(x,Uint8Array)&&(x=u.from(x,x.offset,x.byteLength)),!u.isBuffer(S)||!u.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(S===x)return 0;let z=S.length,ue=x.length;for(let ge=0,we=Math.min(z,ue);ge<we;++ge)if(S[ge]!==x[ge]){z=S[ge],ue=x[ge];break}return z<ue?-1:ue<z?1:0},u.isEncoding=function(S){switch(String(S).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(S,x){if(!Array.isArray(S))throw new TypeError('"list" argument must be an Array of Buffers');if(S.length===0)return u.alloc(0);let z;if(x===void 0)for(x=0,z=0;z<S.length;++z)x+=S[z].length;const ue=u.allocUnsafe(x);let ge=0;for(z=0;z<S.length;++z){let we=S[z];if(ve(we,Uint8Array))ge+we.length>ue.length?(u.isBuffer(we)||(we=u.from(we)),we.copy(ue,ge)):Uint8Array.prototype.set.call(ue,we,ge);else if(u.isBuffer(we))we.copy(ue,ge);else throw new TypeError('"list" argument must be an Array of Buffers');ge+=we.length}return ue};function A(M,S){if(u.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||ve(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const x=M.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&x===0)return 0;let ue=!1;for(;;)switch(S){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return q(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return ee(M).length;default:if(ue)return z?-1:q(M).length;S=(""+S).toLowerCase(),ue=!0}}u.byteLength=A;function T(M,S,x){let z=!1;if((S===void 0||S<0)&&(S=0),S>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,S>>>=0,x<=S))return"";for(M||(M="utf8");;)switch(M){case"hex":return be(this,S,x);case"utf8":case"utf-8":return $(this,S,x);case"ascii":return se(this,S,x);case"latin1":case"binary":return ie(this,S,x);case"base64":return ne(this,S,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,S,x);default:if(z)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),z=!0}}u.prototype._isBuffer=!0;function I(M,S,x){const z=M[S];M[S]=M[x],M[x]=z}u.prototype.swap16=function(){const S=this.length;if(S%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<S;x+=2)I(this,x,x+1);return this},u.prototype.swap32=function(){const S=this.length;if(S%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<S;x+=4)I(this,x,x+3),I(this,x+1,x+2);return this},u.prototype.swap64=function(){const S=this.length;if(S%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<S;x+=8)I(this,x,x+7),I(this,x+1,x+6),I(this,x+2,x+5),I(this,x+3,x+4);return this},u.prototype.toString=function(){const S=this.length;return S===0?"":arguments.length===0?$(this,0,S):T.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(S){if(!u.isBuffer(S))throw new TypeError("Argument must be a Buffer");return this===S?!0:u.compare(this,S)===0},u.prototype.inspect=function(){let S="";const x=t.INSPECT_MAX_BYTES;return S=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(S+=" ... "),"<Buffer "+S+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(S,x,z,ue,ge){if(ve(S,Uint8Array)&&(S=u.from(S,S.offset,S.byteLength)),!u.isBuffer(S))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof S);if(x===void 0&&(x=0),z===void 0&&(z=S?S.length:0),ue===void 0&&(ue=0),ge===void 0&&(ge=this.length),x<0||z>S.length||ue<0||ge>this.length)throw new RangeError("out of range index");if(ue>=ge&&x>=z)return 0;if(ue>=ge)return-1;if(x>=z)return 1;if(x>>>=0,z>>>=0,ue>>>=0,ge>>>=0,this===S)return 0;let we=ge-ue,Me=z-x;const Ue=Math.min(we,Me),Ge=this.slice(ue,ge),We=S.slice(x,z);for(let lt=0;lt<Ue;++lt)if(Ge[lt]!==We[lt]){we=Ge[lt],Me=We[lt];break}return we<Me?-1:Me<we?1:0};function D(M,S,x,z,ue){if(M.length===0)return-1;if(typeof x=="string"?(z=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,me(x)&&(x=ue?0:M.length-1),x<0&&(x=M.length+x),x>=M.length){if(ue)return-1;x=M.length-1}else if(x<0)if(ue)x=0;else return-1;if(typeof S=="string"&&(S=u.from(S,z)),u.isBuffer(S))return S.length===0?-1:U(M,S,x,z,ue);if(typeof S=="number")return S=S&255,typeof Uint8Array.prototype.indexOf=="function"?ue?Uint8Array.prototype.indexOf.call(M,S,x):Uint8Array.prototype.lastIndexOf.call(M,S,x):U(M,[S],x,z,ue);throw new TypeError("val must be string, number or Buffer")}function U(M,S,x,z,ue){let ge=1,we=M.length,Me=S.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(M.length<2||S.length<2)return-1;ge=2,we/=2,Me/=2,x/=2}function Ue(We,lt){return ge===1?We[lt]:We.readUInt16BE(lt*ge)}let Ge;if(ue){let We=-1;for(Ge=x;Ge<we;Ge++)if(Ue(M,Ge)===Ue(S,We===-1?0:Ge-We)){if(We===-1&&(We=Ge),Ge-We+1===Me)return We*ge}else We!==-1&&(Ge-=Ge-We),We=-1}else for(x+Me>we&&(x=we-Me),Ge=x;Ge>=0;Ge--){let We=!0;for(let lt=0;lt<Me;lt++)if(Ue(M,Ge+lt)!==Ue(S,lt)){We=!1;break}if(We)return Ge}return-1}u.prototype.includes=function(S,x,z){return this.indexOf(S,x,z)!==-1},u.prototype.indexOf=function(S,x,z){return D(this,S,x,z,!0)},u.prototype.lastIndexOf=function(S,x,z){return D(this,S,x,z,!1)};function H(M,S,x,z){x=Number(x)||0;const ue=M.length-x;z?(z=Number(z),z>ue&&(z=ue)):z=ue;const ge=S.length;z>ge/2&&(z=ge/2);let we;for(we=0;we<z;++we){const Me=parseInt(S.substr(we*2,2),16);if(me(Me))return we;M[x+we]=Me}return we}function N(M,S,x,z){return ae(q(S,M.length-x),M,x,z)}function R(M,S,x,z){return ae(G(S),M,x,z)}function F(M,S,x,z){return ae(ee(S),M,x,z)}function X(M,S,x,z){return ae(Y(S,M.length-x),M,x,z)}u.prototype.write=function(S,x,z,ue){if(x===void 0)ue="utf8",z=this.length,x=0;else if(z===void 0&&typeof x=="string")ue=x,z=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(z)?(z=z>>>0,ue===void 0&&(ue="utf8")):(ue=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ge=this.length-x;if((z===void 0||z>ge)&&(z=ge),S.length>0&&(z<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");ue||(ue="utf8");let we=!1;for(;;)switch(ue){case"hex":return H(this,S,x,z);case"utf8":case"utf-8":return N(this,S,x,z);case"ascii":case"latin1":case"binary":return R(this,S,x,z);case"base64":return F(this,S,x,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,S,x,z);default:if(we)throw new TypeError("Unknown encoding: "+ue);ue=(""+ue).toLowerCase(),we=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ne(M,S,x){return S===0&&x===M.length?e.fromByteArray(M):e.fromByteArray(M.slice(S,x))}function $(M,S,x){x=Math.min(M.length,x);const z=[];let ue=S;for(;ue<x;){const ge=M[ue];let we=null,Me=ge>239?4:ge>223?3:ge>191?2:1;if(ue+Me<=x){let Ue,Ge,We,lt;switch(Me){case 1:ge<128&&(we=ge);break;case 2:Ue=M[ue+1],(Ue&192)===128&&(lt=(ge&31)<<6|Ue&63,lt>127&&(we=lt));break;case 3:Ue=M[ue+1],Ge=M[ue+2],(Ue&192)===128&&(Ge&192)===128&&(lt=(ge&15)<<12|(Ue&63)<<6|Ge&63,lt>2047&&(lt<55296||lt>57343)&&(we=lt));break;case 4:Ue=M[ue+1],Ge=M[ue+2],We=M[ue+3],(Ue&192)===128&&(Ge&192)===128&&(We&192)===128&&(lt=(ge&15)<<18|(Ue&63)<<12|(Ge&63)<<6|We&63,lt>65535&&lt<1114112&&(we=lt))}}we===null?(we=65533,Me=1):we>65535&&(we-=65536,z.push(we>>>10&1023|55296),we=56320|we&1023),z.push(we),ue+=Me}return Q(z)}const C=4096;function Q(M){const S=M.length;if(S<=C)return String.fromCharCode.apply(String,M);let x="",z=0;for(;z<S;)x+=String.fromCharCode.apply(String,M.slice(z,z+=C));return x}function se(M,S,x){let z="";x=Math.min(M.length,x);for(let ue=S;ue<x;++ue)z+=String.fromCharCode(M[ue]&127);return z}function ie(M,S,x){let z="";x=Math.min(M.length,x);for(let ue=S;ue<x;++ue)z+=String.fromCharCode(M[ue]);return z}function be(M,S,x){const z=M.length;(!S||S<0)&&(S=0),(!x||x<0||x>z)&&(x=z);let ue="";for(let ge=S;ge<x;++ge)ue+=Ee[M[ge]];return ue}function he(M,S,x){const z=M.slice(S,x);let ue="";for(let ge=0;ge<z.length-1;ge+=2)ue+=String.fromCharCode(z[ge]+z[ge+1]*256);return ue}u.prototype.slice=function(S,x){const z=this.length;S=~~S,x=x===void 0?z:~~x,S<0?(S+=z,S<0&&(S=0)):S>z&&(S=z),x<0?(x+=z,x<0&&(x=0)):x>z&&(x=z),x<S&&(x=S);const ue=this.subarray(S,x);return Object.setPrototypeOf(ue,u.prototype),ue};function Te(M,S,x){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+S>x)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(S,x,z){S=S>>>0,x=x>>>0,z||Te(S,x,this.length);let ue=this[S],ge=1,we=0;for(;++we<x&&(ge*=256);)ue+=this[S+we]*ge;return ue},u.prototype.readUintBE=u.prototype.readUIntBE=function(S,x,z){S=S>>>0,x=x>>>0,z||Te(S,x,this.length);let ue=this[S+--x],ge=1;for(;x>0&&(ge*=256);)ue+=this[S+--x]*ge;return ue},u.prototype.readUint8=u.prototype.readUInt8=function(S,x){return S=S>>>0,x||Te(S,1,this.length),this[S]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(S,x){return S=S>>>0,x||Te(S,2,this.length),this[S]|this[S+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(S,x){return S=S>>>0,x||Te(S,2,this.length),this[S]<<8|this[S+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(S,x){return S=S>>>0,x||Te(S,4,this.length),(this[S]|this[S+1]<<8|this[S+2]<<16)+this[S+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(S,x){return S=S>>>0,x||Te(S,4,this.length),this[S]*16777216+(this[S+1]<<16|this[S+2]<<8|this[S+3])},u.prototype.readBigUInt64LE=k(function(S){S=S>>>0,y(S,"offset");const x=this[S],z=this[S+7];(x===void 0||z===void 0)&&v(S,this.length-8);const ue=x+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24,ge=this[++S]+this[++S]*2**8+this[++S]*2**16+z*2**24;return BigInt(ue)+(BigInt(ge)<<BigInt(32))}),u.prototype.readBigUInt64BE=k(function(S){S=S>>>0,y(S,"offset");const x=this[S],z=this[S+7];(x===void 0||z===void 0)&&v(S,this.length-8);const ue=x*2**24+this[++S]*2**16+this[++S]*2**8+this[++S],ge=this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+z;return(BigInt(ue)<<BigInt(32))+BigInt(ge)}),u.prototype.readIntLE=function(S,x,z){S=S>>>0,x=x>>>0,z||Te(S,x,this.length);let ue=this[S],ge=1,we=0;for(;++we<x&&(ge*=256);)ue+=this[S+we]*ge;return ge*=128,ue>=ge&&(ue-=Math.pow(2,8*x)),ue},u.prototype.readIntBE=function(S,x,z){S=S>>>0,x=x>>>0,z||Te(S,x,this.length);let ue=x,ge=1,we=this[S+--ue];for(;ue>0&&(ge*=256);)we+=this[S+--ue]*ge;return ge*=128,we>=ge&&(we-=Math.pow(2,8*x)),we},u.prototype.readInt8=function(S,x){return S=S>>>0,x||Te(S,1,this.length),this[S]&128?(255-this[S]+1)*-1:this[S]},u.prototype.readInt16LE=function(S,x){S=S>>>0,x||Te(S,2,this.length);const z=this[S]|this[S+1]<<8;return z&32768?z|4294901760:z},u.prototype.readInt16BE=function(S,x){S=S>>>0,x||Te(S,2,this.length);const z=this[S+1]|this[S]<<8;return z&32768?z|4294901760:z},u.prototype.readInt32LE=function(S,x){return S=S>>>0,x||Te(S,4,this.length),this[S]|this[S+1]<<8|this[S+2]<<16|this[S+3]<<24},u.prototype.readInt32BE=function(S,x){return S=S>>>0,x||Te(S,4,this.length),this[S]<<24|this[S+1]<<16|this[S+2]<<8|this[S+3]},u.prototype.readBigInt64LE=k(function(S){S=S>>>0,y(S,"offset");const x=this[S],z=this[S+7];(x===void 0||z===void 0)&&v(S,this.length-8);const ue=this[S+4]+this[S+5]*2**8+this[S+6]*2**16+(z<<24);return(BigInt(ue)<<BigInt(32))+BigInt(x+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24)}),u.prototype.readBigInt64BE=k(function(S){S=S>>>0,y(S,"offset");const x=this[S],z=this[S+7];(x===void 0||z===void 0)&&v(S,this.length-8);const ue=(x<<24)+this[++S]*2**16+this[++S]*2**8+this[++S];return(BigInt(ue)<<BigInt(32))+BigInt(this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+z)}),u.prototype.readFloatLE=function(S,x){return S=S>>>0,x||Te(S,4,this.length),r.read(this,S,!0,23,4)},u.prototype.readFloatBE=function(S,x){return S=S>>>0,x||Te(S,4,this.length),r.read(this,S,!1,23,4)},u.prototype.readDoubleLE=function(S,x){return S=S>>>0,x||Te(S,8,this.length),r.read(this,S,!0,52,8)},u.prototype.readDoubleBE=function(S,x){return S=S>>>0,x||Te(S,8,this.length),r.read(this,S,!1,52,8)};function Ne(M,S,x,z,ue,ge){if(!u.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(S>ue||S<ge)throw new RangeError('"value" argument is out of bounds');if(x+z>M.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(S,x,z,ue){if(S=+S,x=x>>>0,z=z>>>0,!ue){const Me=Math.pow(2,8*z)-1;Ne(this,S,x,z,Me,0)}let ge=1,we=0;for(this[x]=S&255;++we<z&&(ge*=256);)this[x+we]=S/ge&255;return x+z},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(S,x,z,ue){if(S=+S,x=x>>>0,z=z>>>0,!ue){const Me=Math.pow(2,8*z)-1;Ne(this,S,x,z,Me,0)}let ge=z-1,we=1;for(this[x+ge]=S&255;--ge>=0&&(we*=256);)this[x+ge]=S/we&255;return x+z},u.prototype.writeUint8=u.prototype.writeUInt8=function(S,x,z){return S=+S,x=x>>>0,z||Ne(this,S,x,1,255,0),this[x]=S&255,x+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(S,x,z){return S=+S,x=x>>>0,z||Ne(this,S,x,2,65535,0),this[x]=S&255,this[x+1]=S>>>8,x+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(S,x,z){return S=+S,x=x>>>0,z||Ne(this,S,x,2,65535,0),this[x]=S>>>8,this[x+1]=S&255,x+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(S,x,z){return S=+S,x=x>>>0,z||Ne(this,S,x,4,4294967295,0),this[x+3]=S>>>24,this[x+2]=S>>>16,this[x+1]=S>>>8,this[x]=S&255,x+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(S,x,z){return S=+S,x=x>>>0,z||Ne(this,S,x,4,4294967295,0),this[x]=S>>>24,this[x+1]=S>>>16,this[x+2]=S>>>8,this[x+3]=S&255,x+4};function ye(M,S,x,z,ue){m(S,z,ue,M,x,7);let ge=Number(S&BigInt(4294967295));M[x++]=ge,ge=ge>>8,M[x++]=ge,ge=ge>>8,M[x++]=ge,ge=ge>>8,M[x++]=ge;let we=Number(S>>BigInt(32)&BigInt(4294967295));return M[x++]=we,we=we>>8,M[x++]=we,we=we>>8,M[x++]=we,we=we>>8,M[x++]=we,x}function ce(M,S,x,z,ue){m(S,z,ue,M,x,7);let ge=Number(S&BigInt(4294967295));M[x+7]=ge,ge=ge>>8,M[x+6]=ge,ge=ge>>8,M[x+5]=ge,ge=ge>>8,M[x+4]=ge;let we=Number(S>>BigInt(32)&BigInt(4294967295));return M[x+3]=we,we=we>>8,M[x+2]=we,we=we>>8,M[x+1]=we,we=we>>8,M[x]=we,x+8}u.prototype.writeBigUInt64LE=k(function(S,x=0){return ye(this,S,x,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=k(function(S,x=0){return ce(this,S,x,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(S,x,z,ue){if(S=+S,x=x>>>0,!ue){const Ue=Math.pow(2,8*z-1);Ne(this,S,x,z,Ue-1,-Ue)}let ge=0,we=1,Me=0;for(this[x]=S&255;++ge<z&&(we*=256);)S<0&&Me===0&&this[x+ge-1]!==0&&(Me=1),this[x+ge]=(S/we>>0)-Me&255;return x+z},u.prototype.writeIntBE=function(S,x,z,ue){if(S=+S,x=x>>>0,!ue){const Ue=Math.pow(2,8*z-1);Ne(this,S,x,z,Ue-1,-Ue)}let ge=z-1,we=1,Me=0;for(this[x+ge]=S&255;--ge>=0&&(we*=256);)S<0&&Me===0&&this[x+ge+1]!==0&&(Me=1),this[x+ge]=(S/we>>0)-Me&255;return x+z},u.prototype.writeInt8=function(S,x,z){return S=+S,x=x>>>0,z||Ne(this,S,x,1,127,-128),S<0&&(S=255+S+1),this[x]=S&255,x+1},u.prototype.writeInt16LE=function(S,x,z){return S=+S,x=x>>>0,z||Ne(this,S,x,2,32767,-32768),this[x]=S&255,this[x+1]=S>>>8,x+2},u.prototype.writeInt16BE=function(S,x,z){return S=+S,x=x>>>0,z||Ne(this,S,x,2,32767,-32768),this[x]=S>>>8,this[x+1]=S&255,x+2},u.prototype.writeInt32LE=function(S,x,z){return S=+S,x=x>>>0,z||Ne(this,S,x,4,2147483647,-2147483648),this[x]=S&255,this[x+1]=S>>>8,this[x+2]=S>>>16,this[x+3]=S>>>24,x+4},u.prototype.writeInt32BE=function(S,x,z){return S=+S,x=x>>>0,z||Ne(this,S,x,4,2147483647,-2147483648),S<0&&(S=4294967295+S+1),this[x]=S>>>24,this[x+1]=S>>>16,this[x+2]=S>>>8,this[x+3]=S&255,x+4},u.prototype.writeBigInt64LE=k(function(S,x=0){return ye(this,S,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=k(function(S,x=0){return ce(this,S,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function xe(M,S,x,z,ue,ge){if(x+z>M.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function oe(M,S,x,z,ue){return S=+S,x=x>>>0,ue||xe(M,S,x,4),r.write(M,S,x,z,23,4),x+4}u.prototype.writeFloatLE=function(S,x,z){return oe(this,S,x,!0,z)},u.prototype.writeFloatBE=function(S,x,z){return oe(this,S,x,!1,z)};function J(M,S,x,z,ue){return S=+S,x=x>>>0,ue||xe(M,S,x,8),r.write(M,S,x,z,52,8),x+8}u.prototype.writeDoubleLE=function(S,x,z){return J(this,S,x,!0,z)},u.prototype.writeDoubleBE=function(S,x,z){return J(this,S,x,!1,z)},u.prototype.copy=function(S,x,z,ue){if(!u.isBuffer(S))throw new TypeError("argument should be a Buffer");if(z||(z=0),!ue&&ue!==0&&(ue=this.length),x>=S.length&&(x=S.length),x||(x=0),ue>0&&ue<z&&(ue=z),ue===z||S.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("sourceEnd out of bounds");ue>this.length&&(ue=this.length),S.length-x<ue-z&&(ue=S.length-x+z);const ge=ue-z;return this===S&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,z,ue):Uint8Array.prototype.set.call(S,this.subarray(z,ue),x),ge},u.prototype.fill=function(S,x,z,ue){if(typeof S=="string"){if(typeof x=="string"?(ue=x,x=0,z=this.length):typeof z=="string"&&(ue=z,z=this.length),ue!==void 0&&typeof ue!="string")throw new TypeError("encoding must be a string");if(typeof ue=="string"&&!u.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);if(S.length===1){const we=S.charCodeAt(0);(ue==="utf8"&&we<128||ue==="latin1")&&(S=we)}}else typeof S=="number"?S=S&255:typeof S=="boolean"&&(S=Number(S));if(x<0||this.length<x||this.length<z)throw new RangeError("Out of range index");if(z<=x)return this;x=x>>>0,z=z===void 0?this.length:z>>>0,S||(S=0);let ge;if(typeof S=="number")for(ge=x;ge<z;++ge)this[ge]=S;else{const we=u.isBuffer(S)?S:u.from(S,ue),Me=we.length;if(Me===0)throw new TypeError('The value "'+S+'" is invalid for argument "value"');for(ge=0;ge<z-x;++ge)this[ge+x]=we[ge%Me]}return this};const le={};function pe(M,S,x){le[M]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:S.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${M}]`,this.stack,delete this.name}get code(){return M}set code(ue){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ue,writable:!0})}toString(){return`${this.name} [${M}]: ${this.message}`}}}pe("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?`${M} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pe("ERR_INVALID_ARG_TYPE",function(M,S){return`The "${M}" argument must be of type number. Received type ${typeof S}`},TypeError),pe("ERR_OUT_OF_RANGE",function(M,S,x){let z=`The value of "${M}" is out of range.`,ue=x;return Number.isInteger(x)&&Math.abs(x)>2**32?ue=L(String(x)):typeof x=="bigint"&&(ue=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(ue=L(ue)),ue+="n"),z+=` It must be ${S}. Received ${ue}`,z},RangeError);function L(M){let S="",x=M.length;const z=M[0]==="-"?1:0;for(;x>=z+4;x-=3)S=`_${M.slice(x-3,x)}${S}`;return`${M.slice(0,x)}${S}`}function P(M,S,x){y(S,"offset"),(M[S]===void 0||M[S+x]===void 0)&&v(S,M.length-(x+1))}function m(M,S,x,z,ue,ge){if(M>x||M<S){const we=typeof S=="bigint"?"n":"";let Me;throw ge>3?S===0||S===BigInt(0)?Me=`>= 0${we} and < 2${we} ** ${(ge+1)*8}${we}`:Me=`>= -(2${we} ** ${(ge+1)*8-1}${we}) and < 2 ** ${(ge+1)*8-1}${we}`:Me=`>= ${S}${we} and <= ${x}${we}`,new le.ERR_OUT_OF_RANGE("value",Me,M)}P(z,ue,ge)}function y(M,S){if(typeof M!="number")throw new le.ERR_INVALID_ARG_TYPE(S,"number",M)}function v(M,S,x){throw Math.floor(M)!==M?(y(M,x),new le.ERR_OUT_OF_RANGE(x||"offset","an integer",M)):S<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE(x||"offset",`>= ${x?1:0} and <= ${S}`,M)}const j=/[^+/0-9A-Za-z-_]/g;function V(M){if(M=M.split("=")[0],M=M.trim().replace(j,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function q(M,S){S=S||1/0;let x;const z=M.length;let ue=null;const ge=[];for(let we=0;we<z;++we){if(x=M.charCodeAt(we),x>55295&&x<57344){if(!ue){if(x>56319){(S-=3)>-1&&ge.push(239,191,189);continue}else if(we+1===z){(S-=3)>-1&&ge.push(239,191,189);continue}ue=x;continue}if(x<56320){(S-=3)>-1&&ge.push(239,191,189),ue=x;continue}x=(ue-55296<<10|x-56320)+65536}else ue&&(S-=3)>-1&&ge.push(239,191,189);if(ue=null,x<128){if((S-=1)<0)break;ge.push(x)}else if(x<2048){if((S-=2)<0)break;ge.push(x>>6|192,x&63|128)}else if(x<65536){if((S-=3)<0)break;ge.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((S-=4)<0)break;ge.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return ge}function G(M){const S=[];for(let x=0;x<M.length;++x)S.push(M.charCodeAt(x)&255);return S}function Y(M,S){let x,z,ue;const ge=[];for(let we=0;we<M.length&&!((S-=2)<0);++we)x=M.charCodeAt(we),z=x>>8,ue=x%256,ge.push(ue),ge.push(z);return ge}function ee(M){return e.toByteArray(V(M))}function ae(M,S,x,z){let ue;for(ue=0;ue<z&&!(ue+x>=S.length||ue>=M.length);++ue)S[ue+x]=M[ue];return ue}function ve(M,S){return M instanceof S||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===S.name}function me(M){return M!==M}const Ee=function(){const M="0123456789abcdef",S=new Array(256);for(let x=0;x<16;++x){const z=x*16;for(let ue=0;ue<16;++ue)S[z+ue]=M[x]+M[ue]}return S}();function k(M){return typeof BigInt>"u"?W:M}function W(){throw new Error("BigInt not supported")}})(la);var yn={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array},j9={exports:{}};(function(t){const e=la,r=Object.getPrototypeOf(async function(){}).constructor,n=globalThis.Blob||e.Blob,a=typeof n<"u"?function(u){return u instanceof n}:function(u){return!1};class s extends Error{constructor(u){if(!Array.isArray(u))throw new TypeError(`Expected input to be an Array, got ${typeof u}`);let c="";for(let l=0;l<u.length;l++)c+=`    ${u[l].stack}
`;super(c),this.name="AggregateError",this.errors=u}}t.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(o){let u=!1;return function(...c){u||(u=!0,o.apply(this,c))}},createDeferredPromise:function(){let o,u;return{promise:new Promise((l,d)=>{o=l,u=d}),resolve:o,reject:u}},promisify(o){return new Promise((u,c)=>{o((l,...d)=>l?c(l):u(...d))})},debuglog(){return function(){}},format(o,...u){return o.replace(/%([sdifj])/g,function(...[c,l]){const d=u.shift();return l==="f"?d.toFixed(6):l==="j"?JSON.stringify(d):l==="s"&&typeof d=="object"?`${d.constructor!==Object?d.constructor.name:""} {}`.trim():d.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}},types:{isAsyncFunction(o){return o instanceof r},isArrayBufferView(o){return ArrayBuffer.isView(o)}},isBlob:a},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(j9);var Zo=j9.exports,px={},zg={exports:{}};const{AbortController:C9,AbortSignal:yY}=typeof self<"u"?self:typeof window<"u"?window:void 0;zg.exports=C9;zg.exports.AbortSignal=yY;zg.exports.default=C9;var Wg=zg.exports;const{format:bY,inspect:Mb,AggregateError:_Y}=Zo,gY=globalThis.AggregateError||_Y,mY=Symbol("kIsNodeError"),vY=["string","function","number","object","Function","Object","boolean","bigint","symbol"],wY=/^([A-Z][a-z0-9]*)+$/,SY="__node_internal_",Xg={};function el(t,e){if(!t)throw new Xg.ERR_INTERNAL_ASSERTION(e)}function rD(t){let e="",r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function TY(t,e,r){if(typeof e=="function")return el(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);const n=(e.match(/%[dfijoOs]/g)||[]).length;return el(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:bY(e,...r)}function Un(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(TY(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[mY]=!0,Xg[t]=n}function nD(t){const e=SY+t.name;return Object.defineProperty(t,"name",{value:e}),t}function EY(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const r=new gY([e,t],e.message);return r.code=e.code,r}return t||e}let OY=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Xg.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Un("ERR_ASSERTION","%s",Error);Un("ERR_INVALID_ARG_TYPE",(t,e,r)=>{el(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";const a=[],s=[],o=[];for(const c of e)el(typeof c=="string","All expected entries have to be of type string"),vY.includes(c)?a.push(c.toLowerCase()):wY.test(c)?s.push(c):(el(c!=="object",'The value "object" should be written as "Object"'),o.push(c));if(s.length>0){const c=a.indexOf("object");c!==-1&&(a.splice(a,c,1),s.push("Object"))}if(a.length>0){switch(a.length){case 1:n+=`of type ${a[0]}`;break;case 2:n+=`one of type ${a[0]} or ${a[1]}`;break;default:{const c=a.pop();n+=`one of type ${a.join(", ")}, or ${c}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{const c=s.pop();n+=`an instance of ${s.join(", ")}, or ${c}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{const c=o.pop();n+=`one of ${o.join(", ")}, or ${c}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var u;if((u=r.constructor)!==null&&u!==void 0&&u.name)n+=`. Received an instance of ${r.constructor.name}`;else{const c=Mb(r,{depth:-1});n+=`. Received ${c}`}}else{let c=Mb(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`}return n},TypeError);Un("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=Mb(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Un("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;const a=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${a}.`},TypeError);Un("ERR_MISSING_ARGS",(...t)=>{el(t.length>0,"At least one arg needs to be specified");let e;const r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Un("ERR_OUT_OF_RANGE",(t,e,r)=>{el(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=rD(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=rD(n)),n+="n"):n=Mb(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Un("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Un("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Un("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Un("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Un("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Un("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Un("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Un("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Un("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Un("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Un("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Vi={AbortError:OY,aggregateTwoErrors:nD(EY),hideStackFrames:nD,codes:Xg};const{ArrayIsArray:yx,ArrayPrototypeIncludes:M9,ArrayPrototypeJoin:F9,ArrayPrototypeMap:AY,NumberIsInteger:bx,NumberIsNaN:xY,NumberMAX_SAFE_INTEGER:RY,NumberMIN_SAFE_INTEGER:IY,NumberParseInt:PY,ObjectPrototypeHasOwnProperty:DY,RegExpPrototypeExec:L9,String:NY,StringPrototypeToUpperCase:jY,StringPrototypeTrim:CY}=yn,{hideStackFrames:Aa,codes:{ERR_SOCKET_BAD_PORT:MY,ERR_INVALID_ARG_TYPE:Ri,ERR_INVALID_ARG_VALUE:Cf,ERR_OUT_OF_RANGE:ul,ERR_UNKNOWN_SIGNAL:iD}}=Vi,{normalizeEncoding:FY}=Zo,{isAsyncFunction:LY,isArrayBufferView:BY}=Zo.types,aD={};function $Y(t){return t===(t|0)}function UY(t){return t===t>>>0}const qY=/^[0-7]+$/,VY="must be a 32-bit unsigned integer or an octal string";function HY(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(L9(qY,t)===null)throw new Cf(e,t,VY);t=PY(t,8)}return B9(t,e),t}const kY=Aa((t,e,r=IY,n=RY)=>{if(typeof t!="number")throw new Ri(e,"number",t);if(!bx(t))throw new ul(e,"an integer",t);if(t<r||t>n)throw new ul(e,`>= ${r} && <= ${n}`,t)}),QY=Aa((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Ri(e,"number",t);if(!bx(t))throw new ul(e,"an integer",t);if(t<r||t>n)throw new ul(e,`>= ${r} && <= ${n}`,t)}),B9=Aa((t,e,r=!1)=>{if(typeof t!="number")throw new Ri(e,"number",t);if(!bx(t))throw new ul(e,"an integer",t);const n=r?1:0,a=4294967295;if(t<n||t>a)throw new ul(e,`>= ${n} && <= ${a}`,t)});function _x(t,e){if(typeof t!="string")throw new Ri(e,"string",t)}function GY(t,e,r=void 0,n){if(typeof t!="number")throw new Ri(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&xY(t))throw new ul(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}const zY=Aa((t,e,r)=>{if(!M9(r,t)){const a="must be one of: "+F9(AY(r,s=>typeof s=="string"?`'${s}'`:NY(s)),", ");throw new Cf(e,t,a)}});function $9(t,e){if(typeof t!="boolean")throw new Ri(e,"boolean",t)}function V3(t,e,r){return t==null||!DY(t,e)?r:t[e]}const WY=Aa((t,e,r=null)=>{const n=V3(r,"allowArray",!1),a=V3(r,"allowFunction",!1);if(!V3(r,"nullable",!1)&&t===null||!n&&yx(t)||typeof t!="object"&&(!a||typeof t!="function"))throw new Ri(e,"Object",t)}),XY=Aa((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Ri(e,"a dictionary",t)}),gx=Aa((t,e,r=0)=>{if(!yx(t))throw new Ri(e,"Array",t);if(t.length<r){const n=`must be longer than ${r}`;throw new Cf(e,t,n)}});function KY(t,e){gx(t,e);for(let r=0;r<t.length;r++)_x(t[r],`${e}[${r}]`)}function JY(t,e){gx(t,e);for(let r=0;r<t.length;r++)$9(t[r],`${e}[${r}]`)}function YY(t,e="signal"){if(_x(t,e),aD[t]===void 0)throw aD[jY(t)]!==void 0?new iD(t+" (signals must use all capital letters)"):new iD(t)}const ZY=Aa((t,e="buffer")=>{if(!BY(t))throw new Ri(e,["Buffer","TypedArray","DataView"],t)});function eZ(t,e){const r=FY(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Cf("encoding",e,`is invalid for data of length ${n}`)}function tZ(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&CY(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new MY(e,t,r);return t|0}const rZ=Aa((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Ri(e,"AbortSignal",t)}),nZ=Aa((t,e)=>{if(typeof t!="function")throw new Ri(e,"Function",t)}),iZ=Aa((t,e)=>{if(typeof t!="function"||LY(t))throw new Ri(e,"Function",t)}),aZ=Aa((t,e)=>{if(t!==void 0)throw new Ri(e,"undefined",t)});function sZ(t,e,r){if(!M9(r,t))throw new Ri(e,`('${F9(r,"|")}')`,t)}const oZ=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function sD(t,e){if(typeof t>"u"||!L9(oZ,t))throw new Cf(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function uZ(t){if(typeof t=="string")return sD(t,"hints"),t;if(yx(t)){const e=t.length;let r="";if(e===0)return r;for(let n=0;n<e;n++){const a=t[n];sD(a,"hints"),r+=a,n!==e-1&&(r+=", ")}return r}throw new Cf("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var Kg={isInt32:$Y,isUint32:UY,parseFileMode:HY,validateArray:gx,validateStringArray:KY,validateBooleanArray:JY,validateBoolean:$9,validateBuffer:ZY,validateDictionary:XY,validateEncoding:eZ,validateFunction:nZ,validateInt32:QY,validateInteger:kY,validateNumber:GY,validateObject:WY,validateOneOf:zY,validatePlainFunction:iZ,validatePort:tZ,validateSignalName:YY,validateString:_x,validateUint32:B9,validateUndefined:aZ,validateUnion:sZ,validateAbortSignal:rZ,validateLinkHeaderValue:uZ},mx={exports:{}};const{Symbol:Jg,SymbolAsyncIterator:oD,SymbolIterator:uD,SymbolFor:U9}=yn,q9=Jg("kDestroyed"),V9=Jg("kIsErrored"),oO=Jg("kIsReadable"),H9=Jg("kIsDisturbed"),cZ=U9("nodejs.webstream.isClosedPromise"),lZ=U9("nodejs.webstream.controllerErrorFunction");function Yg(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Zg(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function dZ(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Zs(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function k9(t){return!!(t&&!Zs(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function Q9(t){return!!(t&&!Zs(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function G9(t){return!!(t&&!Zs(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function fZ(t){return k9(t)||Q9(t)||G9(t)}function hZ(t,e){return t==null?!1:e===!0?typeof t[oD]=="function":e===!1?typeof t[uD]=="function":typeof t[oD]=="function"||typeof t[uD]=="function"}function em(t){if(!Zs(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[q9]||n!=null&&n.destroyed)}function z9(t){if(!Zg(t))return null;if(t.writableEnded===!0)return!0;const e=t._writableState;return e!=null&&e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function pZ(t,e){if(!Zg(t))return null;if(t.writableFinished===!0)return!0;const r=t._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function yZ(t){if(!Yg(t))return null;if(t.readableEnded===!0)return!0;const e=t._readableState;return!e||e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function W9(t,e){if(!Yg(t))return null;const r=t._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function X9(t){return t&&t[oO]!=null?t[oO]:typeof(t==null?void 0:t.readable)!="boolean"?null:em(t)?!1:Yg(t)&&t.readable&&!W9(t)}function K9(t){return typeof(t==null?void 0:t.writable)!="boolean"?null:em(t)?!1:Zg(t)&&t.writable&&!z9(t)}function bZ(t,e){return Zs(t)?em(t)?!0:!((e==null?void 0:e.readable)!==!1&&X9(t)||(e==null?void 0:e.writable)!==!1&&K9(t)):null}function _Z(t){var e,r;return Zs(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function gZ(t){var e,r;return Zs(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function mZ(t){if(!Zs(t))return null;if(typeof t.closed=="boolean")return t.closed;const e=t._writableState,r=t._readableState;return typeof(e==null?void 0:e.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(e==null?void 0:e.closed)||(r==null?void 0:r.closed):typeof t._closed=="boolean"&&J9(t)?t._closed:null}function J9(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Y9(t){return typeof t._sent100=="boolean"&&J9(t)}function vZ(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function wZ(t){if(!Zs(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!n&&Y9(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function SZ(t){var e;return!!(t&&((e=t[H9])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function TZ(t){var e,r,n,a,s,o,u,c,l,d;return!!(t&&((e=(r=(n=(a=(s=(o=t[V9])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&a!==void 0?a:(u=t._readableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&n!==void 0?n:(c=t._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(l=t._readableState)===null||l===void 0?void 0:l.errored)!==null&&e!==void 0?e:!((d=t._writableState)===null||d===void 0)&&d.errored))}var eu={kDestroyed:q9,isDisturbed:SZ,kIsDisturbed:H9,isErrored:TZ,kIsErrored:V9,isReadable:X9,kIsReadable:oO,kIsClosedPromise:cZ,kControllerErrorFunction:lZ,isClosed:mZ,isDestroyed:em,isDuplexNodeStream:dZ,isFinished:bZ,isIterable:hZ,isReadableNodeStream:Yg,isReadableStream:k9,isReadableEnded:yZ,isReadableFinished:W9,isReadableErrored:gZ,isNodeStream:Zs,isWebStream:fZ,isWritable:K9,isWritableNodeStream:Zg,isWritableStream:Q9,isWritableEnded:z9,isWritableFinished:pZ,isWritableErrored:_Z,isServerRequest:vZ,isServerResponse:Y9,willEmitClose:wZ,isTransformStream:G9};const xu=Jo(),{AbortError:Z9,codes:EZ}=Vi,{ERR_INVALID_ARG_TYPE:OZ,ERR_STREAM_PREMATURE_CLOSE:cD}=EZ,{kEmptyObject:uO,once:cO}=Zo,{validateAbortSignal:AZ,validateFunction:xZ,validateObject:RZ,validateBoolean:IZ}=Kg,{Promise:PZ,PromisePrototypeThen:DZ}=yn,{isClosed:NZ,isReadable:lD,isReadableNodeStream:H3,isReadableStream:jZ,isReadableFinished:dD,isReadableErrored:fD,isWritable:hD,isWritableNodeStream:pD,isWritableStream:CZ,isWritableFinished:yD,isWritableErrored:bD,isNodeStream:MZ,willEmitClose:FZ,kIsClosedPromise:LZ}=eu;function BZ(t){return t.setHeader&&typeof t.abort=="function"}const lO=()=>{};function eM(t,e,r){var n,a;if(arguments.length===2?(r=e,e=uO):e==null?e=uO:RZ(e,"options"),xZ(r,"callback"),AZ(e.signal,"options.signal"),r=cO(r),jZ(t)||CZ(t))return $Z(t,e,r);if(!MZ(t))throw new OZ("stream",["ReadableStream","WritableStream","Stream"],t);const s=(n=e.readable)!==null&&n!==void 0?n:H3(t),o=(a=e.writable)!==null&&a!==void 0?a:pD(t),u=t._writableState,c=t._readableState,l=()=>{t.writable||h()};let d=FZ(t)&&H3(t)===s&&pD(t)===o,f=yD(t,!1);const h=()=>{f=!0,t.destroyed&&(d=!1),!(d&&(!t.readable||s))&&(!s||p)&&r.call(t)};let p=dD(t,!1);const b=()=>{p=!0,t.destroyed&&(d=!1),!(d&&(!t.writable||o))&&(!o||f)&&r.call(t)},_=I=>{r.call(t,I)};let E=NZ(t);const w=()=>{E=!0;const I=bD(t)||fD(t);if(I&&typeof I!="boolean")return r.call(t,I);if(s&&!p&&H3(t,!0)&&!dD(t,!1))return r.call(t,new cD);if(o&&!f&&!yD(t,!1))return r.call(t,new cD);r.call(t)},O=()=>{E=!0;const I=bD(t)||fD(t);if(I&&typeof I!="boolean")return r.call(t,I);r.call(t)},A=()=>{t.req.on("finish",h)};BZ(t)?(t.on("complete",h),d||t.on("abort",w),t.req?A():t.on("request",A)):o&&!u&&(t.on("end",l),t.on("close",l)),!d&&typeof t.aborted=="boolean"&&t.on("aborted",w),t.on("end",b),t.on("finish",h),e.error!==!1&&t.on("error",_),t.on("close",w),E?xu.nextTick(w):u!=null&&u.errorEmitted||c!=null&&c.errorEmitted?d||xu.nextTick(O):(!s&&(!d||lD(t))&&(f||hD(t)===!1)||!o&&(!d||hD(t))&&(p||lD(t)===!1)||c&&t.req&&t.aborted)&&xu.nextTick(O);const T=()=>{r=lO,t.removeListener("aborted",w),t.removeListener("complete",h),t.removeListener("abort",w),t.removeListener("request",A),t.req&&t.req.removeListener("finish",h),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",h),t.removeListener("end",b),t.removeListener("error",_),t.removeListener("close",w)};if(e.signal&&!E){const I=()=>{const D=r;T(),D.call(t,new Z9(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)xu.nextTick(I);else{const D=r;r=cO((...U)=>{e.signal.removeEventListener("abort",I),D.apply(t,U)}),e.signal.addEventListener("abort",I)}}return T}function $Z(t,e,r){let n=!1,a=lO;if(e.signal)if(a=()=>{n=!0,r.call(t,new Z9(void 0,{cause:e.signal.reason}))},e.signal.aborted)xu.nextTick(a);else{const o=r;r=cO((...u)=>{e.signal.removeEventListener("abort",a),o.apply(t,u)}),e.signal.addEventListener("abort",a)}const s=(...o)=>{n||xu.nextTick(()=>r.apply(t,o))};return DZ(t[LZ].promise,s,s),lO}function UZ(t,e){var r;let n=!1;return e===null&&(e=uO),(r=e)!==null&&r!==void 0&&r.cleanup&&(IZ(e.cleanup,"cleanup"),n=e.cleanup),new PZ((a,s)=>{const o=eM(t,e,u=>{n&&o(),u?s(u):a()})})}mx.exports=eM;mx.exports.finished=UZ;var sc=mx.exports;const $s=Jo(),{aggregateTwoErrors:qZ,codes:{ERR_MULTIPLE_CALLBACK:VZ},AbortError:HZ}=Vi,{Symbol:tM}=yn,{kDestroyed:kZ,isDestroyed:QZ,isFinished:GZ,isServerRequest:zZ}=eu,rM=tM("kDestroy"),dO=tM("kConstruct");function nM(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function WZ(t,e){const r=this._readableState,n=this._writableState,a=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(nM(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),a.constructed?_D(this,t,e):this.once(rM,function(s){_D(this,qZ(s,t),e)}),this)}function _D(t,e,r){let n=!1;function a(s){if(n)return;n=!0;const o=t._readableState,u=t._writableState;nM(s,u,o),u&&(u.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?$s.nextTick(XZ,t,s):$s.nextTick(iM,t)}try{t._destroy(e||null,a)}catch(s){a(s)}}function XZ(t,e){fO(t,e),iM(t)}function iM(t){const e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function fO(t,e){const r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function KZ(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function hO(t,e,r){const n=t._readableState,a=t._writableState;if(a!=null&&a.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||a!=null&&a.autoDestroy?t.destroy(e):e&&(e.stack,a&&!a.errored&&(a.errored=e),n&&!n.errored&&(n.errored=e),r?$s.nextTick(fO,t,e):fO(t,e))}function JZ(t,e){if(typeof t._construct!="function")return;const r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(dO,e),!(t.listenerCount(dO)>1)&&$s.nextTick(YZ,t)}function YZ(t){let e=!1;function r(n){if(e){hO(t,n??new VZ);return}e=!0;const a=t._readableState,s=t._writableState,o=s||a;a&&(a.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(rM,n):n?hO(t,n,!0):$s.nextTick(ZZ,t)}try{t._construct(n=>{$s.nextTick(r,n)})}catch(n){$s.nextTick(r,n)}}function ZZ(t){t.emit(dO)}function gD(t){return(t==null?void 0:t.setHeader)&&typeof t.abort=="function"}function aM(t){t.emit("close")}function eee(t,e){t.emit("error",e),$s.nextTick(aM,t)}function tee(t,e){!t||QZ(t)||(!e&&!GZ(t)&&(e=new HZ),zZ(t)?(t.socket=null,t.destroy(e)):gD(t)?t.abort():gD(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?$s.nextTick(eee,t,e):$s.nextTick(aM,t),t.destroyed||(t[kZ]=!0))}var Mf={construct:JZ,destroyer:tee,destroy:WZ,undestroy:KZ,errorOrDestroy:hO};const{ArrayIsArray:ree,ObjectSetPrototypeOf:sM}=yn,{EventEmitter:tm}=Rf;function rm(t){tm.call(this,t)}sM(rm.prototype,tm.prototype);sM(rm,tm);rm.prototype.pipe=function(t,e){const r=this;function n(d){t.writable&&t.write(d)===!1&&r.pause&&r.pause()}r.on("data",n);function a(){r.readable&&r.resume&&r.resume()}t.on("drain",a),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",u));let s=!1;function o(){s||(s=!0,t.end())}function u(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function c(d){l(),tm.listenerCount(this,"error")===0&&this.emit("error",d)}pO(r,"error",c),pO(t,"error",c);function l(){r.removeListener("data",n),t.removeListener("drain",a),r.removeListener("end",o),r.removeListener("close",u),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};function pO(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):ree(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}var vx={Stream:rm,prependListener:pO},oM={exports:{}};(function(t){const{AbortError:e,codes:r}=Vi,{isNodeStream:n,isWebStream:a,kControllerErrorFunction:s}=eu,o=sc,{ERR_INVALID_ARG_TYPE:u}=r,c=(l,d)=>{if(typeof l!="object"||!("aborted"in l))throw new u(d,"AbortSignal",l)};t.exports.addAbortSignal=function(d,f){if(c(d,"signal"),!n(f)&&!a(f))throw new u("stream",["ReadableStream","WritableStream","Stream"],f);return t.exports.addAbortSignalNoValidate(d,f)},t.exports.addAbortSignalNoValidate=function(l,d){if(typeof l!="object"||!("aborted"in l))return d;const f=n(d)?()=>{d.destroy(new e(void 0,{cause:l.reason}))}:()=>{d[s](new e(void 0,{cause:l.reason}))};return l.aborted?f():(l.addEventListener("abort",f),o(d,()=>l.removeEventListener("abort",f))),d}})(oM);var nm=oM.exports;const{StringPrototypeSlice:mD,SymbolIterator:nee,TypedArrayPrototypeSet:Wy,Uint8Array:iee}=yn,{Buffer:k3}=la,{inspect:aee}=Zo;var see=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){const r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return k3.alloc(0);const r=k3.allocUnsafe(e>>>0);let n=this.head,a=0;for(;n;)Wy(r,n.data,a),a+=n.data.length,n=n.next;return r}consume(e,r){const n=this.head.data;if(e<n.length){const a=n.slice(0,e);return this.head.data=n.slice(e),a}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[nee](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,a=0;do{const s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++a,n.next?this.head=n.next:this.head=this.tail=null):(r+=mD(s,0,e),this.head=n,n.data=mD(s,e));break}++a}while((n=n.next)!==null);return this.length-=a,r}_getBuffer(e){const r=k3.allocUnsafe(e),n=e;let a=this.head,s=0;do{const o=a.data;if(e>o.length)Wy(r,o,n-e),e-=o.length;else{e===o.length?(Wy(r,o,n-e),++s,a.next?this.head=a.next:this.head=this.tail=null):(Wy(r,new iee(o.buffer,o.byteOffset,e),n-e),this.head=a,a.data=o.slice(e));break}++s}while((a=a.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return aee(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:oee,NumberIsInteger:uee}=yn,{ERR_INVALID_ARG_VALUE:cee}=Vi.codes;function lee(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function uM(t){return t?16:16*1024}function dee(t,e,r,n){const a=lee(e,n,r);if(a!=null){if(!uee(a)||a<0){const s=n?`options.${r}`:"options.highWaterMark";throw new cee(s,a)}return oee(a)}return uM(t.objectMode)}var wx={getHighWaterMark:dee,getDefaultHighWaterMark:uM},Fb={},yO={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=la,n=r.Buffer;function a(o,u){for(var c in o)u[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=s);function s(o,u,c){return n(o,u,c)}s.prototype=Object.create(n.prototype),a(n,s),s.from=function(o,u,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,u,c)},s.alloc=function(o,u,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return u!==void 0?typeof c=="string"?l.fill(u,c):l.fill(u):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(yO,yO.exports);var fee=yO.exports,Sx=fee.Buffer,vD=Sx.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function hee(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function pee(t){var e=hee(t);if(typeof e!="string"&&(Sx.isEncoding===vD||!vD(t)))throw new Error("Unknown encoding: "+t);return e||t}Fb.StringDecoder=O0;function O0(t){this.encoding=pee(t);var e;switch(this.encoding){case"utf16le":this.text=vee,this.end=wee,e=4;break;case"utf8":this.fillLast=_ee,e=4;break;case"base64":this.text=See,this.end=Tee,e=3;break;default:this.write=Eee,this.end=Oee;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Sx.allocUnsafe(e)}O0.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};O0.prototype.end=mee;O0.prototype.text=gee;O0.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Q3(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function yee(t,e,r){var n=e.length-1;if(n<r)return 0;var a=Q3(e[n]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--n<r||a===-2?0:(a=Q3(e[n]),a>=0?(a>0&&(t.lastNeed=a-2),a):--n<r||a===-2?0:(a=Q3(e[n]),a>=0?(a>0&&(a===2?a=0:t.lastNeed=a-3),a):0))}function bee(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,""}}function _ee(t){var e=this.lastTotal-this.lastNeed,r=bee(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function gee(t,e){var r=yee(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function mee(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function vee(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function wee(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function See(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Tee(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Eee(t){return t.toString(this.encoding)}function Oee(t){return t&&t.length?this.write(t):""}const wD=Jo(),{PromisePrototypeThen:Aee,SymbolAsyncIterator:SD,SymbolIterator:TD}=yn,{Buffer:xee}=la,{ERR_INVALID_ARG_TYPE:Ree,ERR_STREAM_NULL_VALUES:Iee}=Vi.codes;function Pee(t,e,r){let n;if(typeof e=="string"||e instanceof xee)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let a;if(e&&e[SD])a=!0,n=e[SD]();else if(e&&e[TD])a=!1,n=e[TD]();else throw new Ree("iterable",["Iterable"],e);const s=new t({objectMode:!0,highWaterMark:1,...r});let o=!1;s._read=function(){o||(o=!0,c())},s._destroy=function(l,d){Aee(u(l),()=>wD.nextTick(d,l),f=>wD.nextTick(d,f||l))};async function u(l){const d=l!=null,f=typeof n.throw=="function";if(d&&f){const{value:h,done:p}=await n.throw(l);if(await h,p)return}if(typeof n.return=="function"){const{value:h}=await n.return();await h}}async function c(){for(;;){try{const{value:l,done:d}=a?await n.next():n.next();if(d)s.push(null);else{const f=l&&typeof l.then=="function"?await l:l;if(f===null)throw o=!1,new Iee;if(s.push(f))continue;o=!1}}catch(l){s.destroy(l)}break}}return s}var cM=Pee,G3,ED;function im(){if(ED)return G3;ED=1;const t=Jo(),{ArrayPrototypeIndexOf:e,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:a,ObjectDefineProperties:s,ObjectKeys:o,ObjectSetPrototypeOf:u,Promise:c,SafeSet:l,SymbolAsyncIterator:d,Symbol:f}=yn;G3=he,he.ReadableState=be;const{EventEmitter:h}=Rf,{Stream:p,prependListener:b}=vx,{Buffer:_}=la,{addAbortSignal:E}=nm,w=sc;let O=Zo.debuglog("stream",k=>{O=k});const A=see,T=Mf,{getHighWaterMark:I,getDefaultHighWaterMark:D}=wx,{aggregateTwoErrors:U,codes:{ERR_INVALID_ARG_TYPE:H,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:R,ERR_STREAM_PUSH_AFTER_EOF:F,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:X}}=Vi,{validateObject:ne}=Kg,$=f("kPaused"),{StringDecoder:C}=Fb,Q=cM;u(he.prototype,p.prototype),u(he,p);const se=()=>{},{errorOrDestroy:ie}=T;function be(k,W,M){typeof M!="boolean"&&(M=W instanceof ko()),this.objectMode=!!(k&&k.objectMode),M&&(this.objectMode=this.objectMode||!!(k&&k.readableObjectMode)),this.highWaterMark=k?I(this,k,"readableHighWaterMark",M):D(!1),this.buffer=new A,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[$]=null,this.errorEmitted=!1,this.emitClose=!k||k.emitClose!==!1,this.autoDestroy=!k||k.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=k&&k.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,k&&k.encoding&&(this.decoder=new C(k.encoding),this.encoding=k.encoding)}function he(k){if(!(this instanceof he))return new he(k);const W=this instanceof ko();this._readableState=new be(k,this,W),k&&(typeof k.read=="function"&&(this._read=k.read),typeof k.destroy=="function"&&(this._destroy=k.destroy),typeof k.construct=="function"&&(this._construct=k.construct),k.signal&&!W&&E(k.signal,this)),p.call(this,k),T.construct(this,()=>{this._readableState.needReadable&&pe(this,this._readableState)})}he.prototype.destroy=T.destroy,he.prototype._undestroy=T.undestroy,he.prototype._destroy=function(k,W){W(k)},he.prototype[h.captureRejectionSymbol]=function(k){this.destroy(k)},he.prototype.push=function(k,W){return Te(this,k,W,!1)},he.prototype.unshift=function(k,W){return Te(this,k,W,!0)};function Te(k,W,M,S){O("readableAddChunk",W);const x=k._readableState;let z;if(x.objectMode||(typeof W=="string"?(M=M||x.defaultEncoding,x.encoding!==M&&(S&&x.encoding?W=_.from(W,M).toString(x.encoding):(W=_.from(W,M),M=""))):W instanceof _?M="":p._isUint8Array(W)?(W=p._uint8ArrayToBuffer(W),M=""):W!=null&&(z=new H("chunk",["string","Buffer","Uint8Array"],W))),z)ie(k,z);else if(W===null)x.reading=!1,oe(k,x);else if(x.objectMode||W&&W.length>0)if(S)if(x.endEmitted)ie(k,new X);else{if(x.destroyed||x.errored)return!1;Ne(k,x,W,!0)}else if(x.ended)ie(k,new F);else{if(x.destroyed||x.errored)return!1;x.reading=!1,x.decoder&&!M?(W=x.decoder.write(W),x.objectMode||W.length!==0?Ne(k,x,W,!1):pe(k,x)):Ne(k,x,W,!1)}else S||(x.reading=!1,pe(k,x));return!x.ended&&(x.length<x.highWaterMark||x.length===0)}function Ne(k,W,M,S){W.flowing&&W.length===0&&!W.sync&&k.listenerCount("data")>0?(W.multiAwaitDrain?W.awaitDrainWriters.clear():W.awaitDrainWriters=null,W.dataEmitted=!0,k.emit("data",M)):(W.length+=W.objectMode?1:M.length,S?W.buffer.unshift(M):W.buffer.push(M),W.needReadable&&J(k)),pe(k,W)}he.prototype.isPaused=function(){const k=this._readableState;return k[$]===!0||k.flowing===!1},he.prototype.setEncoding=function(k){const W=new C(k);this._readableState.decoder=W,this._readableState.encoding=this._readableState.decoder.encoding;const M=this._readableState.buffer;let S="";for(const x of M)S+=W.write(x);return M.clear(),S!==""&&M.push(S),this._readableState.length=S.length,this};const ye=1073741824;function ce(k){if(k>ye)throw new R("size","<= 1GiB",k);return k--,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,k|=k>>>16,k++,k}function xe(k,W){return k<=0||W.length===0&&W.ended?0:W.objectMode?1:n(k)?W.flowing&&W.length?W.buffer.first().length:W.length:k<=W.length?k:W.ended?W.length:0}he.prototype.read=function(k){O("read",k),k===void 0?k=NaN:r(k)||(k=a(k,10));const W=this._readableState,M=k;if(k>W.highWaterMark&&(W.highWaterMark=ce(k)),k!==0&&(W.emittedReadable=!1),k===0&&W.needReadable&&((W.highWaterMark!==0?W.length>=W.highWaterMark:W.length>0)||W.ended))return O("read: emitReadable",W.length,W.ended),W.length===0&&W.ended?ee(this):J(this),null;if(k=xe(k,W),k===0&&W.ended)return W.length===0&&ee(this),null;let S=W.needReadable;if(O("need readable",S),(W.length===0||W.length-k<W.highWaterMark)&&(S=!0,O("length less than watermark",S)),W.ended||W.reading||W.destroyed||W.errored||!W.constructed)S=!1,O("reading, ended or constructing",S);else if(S){O("do read"),W.reading=!0,W.sync=!0,W.length===0&&(W.needReadable=!0);try{this._read(W.highWaterMark)}catch(z){ie(this,z)}W.sync=!1,W.reading||(k=xe(M,W))}let x;return k>0?x=Y(k,W):x=null,x===null?(W.needReadable=W.length<=W.highWaterMark,k=0):(W.length-=k,W.multiAwaitDrain?W.awaitDrainWriters.clear():W.awaitDrainWriters=null),W.length===0&&(W.ended||(W.needReadable=!0),M!==k&&W.ended&&ee(this)),x!==null&&!W.errorEmitted&&!W.closeEmitted&&(W.dataEmitted=!0,this.emit("data",x)),x};function oe(k,W){if(O("onEofChunk"),!W.ended){if(W.decoder){const M=W.decoder.end();M&&M.length&&(W.buffer.push(M),W.length+=W.objectMode?1:M.length)}W.ended=!0,W.sync?J(k):(W.needReadable=!1,W.emittedReadable=!0,le(k))}}function J(k){const W=k._readableState;O("emitReadable",W.needReadable,W.emittedReadable),W.needReadable=!1,W.emittedReadable||(O("emitReadable",W.flowing),W.emittedReadable=!0,t.nextTick(le,k))}function le(k){const W=k._readableState;O("emitReadable_",W.destroyed,W.length,W.ended),!W.destroyed&&!W.errored&&(W.length||W.ended)&&(k.emit("readable"),W.emittedReadable=!1),W.needReadable=!W.flowing&&!W.ended&&W.length<=W.highWaterMark,V(k)}function pe(k,W){!W.readingMore&&W.constructed&&(W.readingMore=!0,t.nextTick(L,k,W))}function L(k,W){for(;!W.reading&&!W.ended&&(W.length<W.highWaterMark||W.flowing&&W.length===0);){const M=W.length;if(O("maybeReadMore read 0"),k.read(0),M===W.length)break}W.readingMore=!1}he.prototype._read=function(k){throw new N("_read()")},he.prototype.pipe=function(k,W){const M=this,S=this._readableState;S.pipes.length===1&&(S.multiAwaitDrain||(S.multiAwaitDrain=!0,S.awaitDrainWriters=new l(S.awaitDrainWriters?[S.awaitDrainWriters]:[]))),S.pipes.push(k),O("pipe count=%d opts=%j",S.pipes.length,W);const z=(!W||W.end!==!1)&&k!==t.stdout&&k!==t.stderr?ge:Br;S.endEmitted?t.nextTick(z):M.once("end",z),k.on("unpipe",ue);function ue(Qt,_r){O("onunpipe"),Qt===M&&_r&&_r.hasUnpiped===!1&&(_r.hasUnpiped=!0,Ue())}function ge(){O("onend"),k.end()}let we,Me=!1;function Ue(){O("cleanup"),k.removeListener("close",Wr),k.removeListener("finish",br),we&&k.removeListener("drain",we),k.removeListener("error",lt),k.removeListener("unpipe",ue),M.removeListener("end",ge),M.removeListener("end",Br),M.removeListener("data",We),Me=!0,we&&S.awaitDrainWriters&&(!k._writableState||k._writableState.needDrain)&&we()}function Ge(){Me||(S.pipes.length===1&&S.pipes[0]===k?(O("false write response, pause",0),S.awaitDrainWriters=k,S.multiAwaitDrain=!1):S.pipes.length>1&&S.pipes.includes(k)&&(O("false write response, pause",S.awaitDrainWriters.size),S.awaitDrainWriters.add(k)),M.pause()),we||(we=P(M,k),k.on("drain",we))}M.on("data",We);function We(Qt){O("ondata");const _r=k.write(Qt);O("dest.write",_r),_r===!1&&Ge()}function lt(Qt){if(O("onerror",Qt),Br(),k.removeListener("error",lt),k.listenerCount("error")===0){const _r=k._writableState||k._readableState;_r&&!_r.errorEmitted?ie(k,Qt):k.emit("error",Qt)}}b(k,"error",lt);function Wr(){k.removeListener("finish",br),Br()}k.once("close",Wr);function br(){O("onfinish"),k.removeListener("close",Wr),Br()}k.once("finish",br);function Br(){O("unpipe"),M.unpipe(k)}return k.emit("pipe",M),k.writableNeedDrain===!0?S.flowing&&Ge():S.flowing||(O("pipe resume"),M.resume()),k};function P(k,W){return function(){const S=k._readableState;S.awaitDrainWriters===W?(O("pipeOnDrain",1),S.awaitDrainWriters=null):S.multiAwaitDrain&&(O("pipeOnDrain",S.awaitDrainWriters.size),S.awaitDrainWriters.delete(W)),(!S.awaitDrainWriters||S.awaitDrainWriters.size===0)&&k.listenerCount("data")&&k.resume()}}he.prototype.unpipe=function(k){const W=this._readableState,M={hasUnpiped:!1};if(W.pipes.length===0)return this;if(!k){const x=W.pipes;W.pipes=[],this.pause();for(let z=0;z<x.length;z++)x[z].emit("unpipe",this,{hasUnpiped:!1});return this}const S=e(W.pipes,k);return S===-1?this:(W.pipes.splice(S,1),W.pipes.length===0&&this.pause(),k.emit("unpipe",this,M),this)},he.prototype.on=function(k,W){const M=p.prototype.on.call(this,k,W),S=this._readableState;return k==="data"?(S.readableListening=this.listenerCount("readable")>0,S.flowing!==!1&&this.resume()):k==="readable"&&!S.endEmitted&&!S.readableListening&&(S.readableListening=S.needReadable=!0,S.flowing=!1,S.emittedReadable=!1,O("on readable",S.length,S.reading),S.length?J(this):S.reading||t.nextTick(y,this)),M},he.prototype.addListener=he.prototype.on,he.prototype.removeListener=function(k,W){const M=p.prototype.removeListener.call(this,k,W);return k==="readable"&&t.nextTick(m,this),M},he.prototype.off=he.prototype.removeListener,he.prototype.removeAllListeners=function(k){const W=p.prototype.removeAllListeners.apply(this,arguments);return(k==="readable"||k===void 0)&&t.nextTick(m,this),W};function m(k){const W=k._readableState;W.readableListening=k.listenerCount("readable")>0,W.resumeScheduled&&W[$]===!1?W.flowing=!0:k.listenerCount("data")>0?k.resume():W.readableListening||(W.flowing=null)}function y(k){O("readable nexttick read 0"),k.read(0)}he.prototype.resume=function(){const k=this._readableState;return k.flowing||(O("resume"),k.flowing=!k.readableListening,v(this,k)),k[$]=!1,this};function v(k,W){W.resumeScheduled||(W.resumeScheduled=!0,t.nextTick(j,k,W))}function j(k,W){O("resume",W.reading),W.reading||k.read(0),W.resumeScheduled=!1,k.emit("resume"),V(k),W.flowing&&!W.reading&&k.read(0)}he.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[$]=!0,this};function V(k){const W=k._readableState;for(O("flow",W.flowing);W.flowing&&k.read()!==null;);}he.prototype.wrap=function(k){let W=!1;k.on("data",S=>{!this.push(S)&&k.pause&&(W=!0,k.pause())}),k.on("end",()=>{this.push(null)}),k.on("error",S=>{ie(this,S)}),k.on("close",()=>{this.destroy()}),k.on("destroy",()=>{this.destroy()}),this._read=()=>{W&&k.resume&&(W=!1,k.resume())};const M=o(k);for(let S=1;S<M.length;S++){const x=M[S];this[x]===void 0&&typeof k[x]=="function"&&(this[x]=k[x].bind(k))}return this},he.prototype[d]=function(){return q(this)},he.prototype.iterator=function(k){return k!==void 0&&ne(k,"options"),q(this,k)};function q(k,W){typeof k.read!="function"&&(k=he.wrap(k,{objectMode:!0}));const M=G(k,W);return M.stream=k,M}async function*G(k,W){let M=se;function S(ue){this===k?(M(),M=se):M=ue}k.on("readable",S);let x;const z=w(k,{writable:!1},ue=>{x=ue?U(x,ue):null,M(),M=se});try{for(;;){const ue=k.destroyed?null:k.read();if(ue!==null)yield ue;else{if(x)throw x;if(x===null)return;await new c(S)}}}catch(ue){throw x=U(x,ue),x}finally{(x||(W==null?void 0:W.destroyOnReturn)!==!1)&&(x===void 0||k._readableState.autoDestroy)?T.destroyer(k,null):(k.off("readable",S),z())}}s(he.prototype,{readable:{__proto__:null,get(){const k=this._readableState;return!!k&&k.readable!==!1&&!k.destroyed&&!k.errorEmitted&&!k.endEmitted},set(k){this._readableState&&(this._readableState.readable=!!k)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(k){this._readableState&&(this._readableState.flowing=k)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(k){this._readableState&&(this._readableState.destroyed=k)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(be.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[$]!==!1},set(k){this[$]=!!k}}}),he._fromList=Y;function Y(k,W){if(W.length===0)return null;let M;return W.objectMode?M=W.buffer.shift():!k||k>=W.length?(W.decoder?M=W.buffer.join(""):W.buffer.length===1?M=W.buffer.first():M=W.buffer.concat(W.length),W.buffer.clear()):M=W.buffer.consume(k,W.decoder),M}function ee(k){const W=k._readableState;O("endReadable",W.endEmitted),W.endEmitted||(W.ended=!0,t.nextTick(ae,W,k))}function ae(k,W){if(O("endReadableNT",k.endEmitted,k.length),!k.errored&&!k.closeEmitted&&!k.endEmitted&&k.length===0){if(k.endEmitted=!0,W.emit("end"),W.writable&&W.allowHalfOpen===!1)t.nextTick(ve,W);else if(k.autoDestroy){const M=W._writableState;(!M||M.autoDestroy&&(M.finished||M.writable===!1))&&W.destroy()}}}function ve(k){k.writable&&!k.writableEnded&&!k.destroyed&&k.end()}he.from=function(k,W){return Q(he,k,W)};let me;function Ee(){return me===void 0&&(me={}),me}return he.fromWeb=function(k,W){return Ee().newStreamReadableFromReadableStream(k,W)},he.toWeb=function(k,W){return Ee().newReadableStreamFromStreamReadable(k,W)},he.wrap=function(k,W){var M,S;return new he({objectMode:(M=(S=k.readableObjectMode)!==null&&S!==void 0?S:k.objectMode)!==null&&M!==void 0?M:!0,...W,destroy(x,z){T.destroyer(k,x),z(x)}}).wrap(k)},G3}var z3,OD;function lM(){if(OD)return z3;OD=1;const t=Jo(),{ArrayPrototypeSlice:e,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:a,ObjectDefineProperties:s,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:u,Symbol:c,SymbolHasInstance:l}=yn;z3=C,C.WritableState=ne;const{EventEmitter:d}=Rf,f=vx.Stream,{Buffer:h}=la,p=Mf,{addAbortSignal:b}=nm,{getHighWaterMark:_,getDefaultHighWaterMark:E}=wx,{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_MULTIPLE_CALLBACK:A,ERR_STREAM_CANNOT_PIPE:T,ERR_STREAM_DESTROYED:I,ERR_STREAM_ALREADY_FINISHED:D,ERR_STREAM_NULL_VALUES:U,ERR_STREAM_WRITE_AFTER_END:H,ERR_UNKNOWN_ENCODING:N}=Vi.codes,{errorOrDestroy:R}=p;o(C.prototype,f.prototype),o(C,f);function F(){}const X=c("kOnFinished");function ne(y,v,j){typeof j!="boolean"&&(j=v instanceof ko()),this.objectMode=!!(y&&y.objectMode),j&&(this.objectMode=this.objectMode||!!(y&&y.writableObjectMode)),this.highWaterMark=y?_(this,y,"writableHighWaterMark",j):E(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const V=!!(y&&y.decodeStrings===!1);this.decodeStrings=!V,this.defaultEncoding=y&&y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=he.bind(void 0,v),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,$(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!y||y.emitClose!==!1,this.autoDestroy=!y||y.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[X]=[]}function $(y){y.buffered=[],y.bufferedIndex=0,y.allBuffers=!0,y.allNoop=!0}ne.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},a(ne.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function C(y){const v=this instanceof ko();if(!v&&!n(C,this))return new C(y);this._writableState=new ne(y,this,v),y&&(typeof y.write=="function"&&(this._write=y.write),typeof y.writev=="function"&&(this._writev=y.writev),typeof y.destroy=="function"&&(this._destroy=y.destroy),typeof y.final=="function"&&(this._final=y.final),typeof y.construct=="function"&&(this._construct=y.construct),y.signal&&b(y.signal,this)),f.call(this,y),p.construct(this,()=>{const j=this._writableState;j.writing||ce(this,j),le(this,j)})}a(C,l,{__proto__:null,value:function(y){return n(this,y)?!0:this!==C?!1:y&&y._writableState instanceof ne}}),C.prototype.pipe=function(){R(this,new T)};function Q(y,v,j,V){const q=y._writableState;if(typeof j=="function")V=j,j=q.defaultEncoding;else{if(!j)j=q.defaultEncoding;else if(j!=="buffer"&&!h.isEncoding(j))throw new N(j);typeof V!="function"&&(V=F)}if(v===null)throw new U;if(!q.objectMode)if(typeof v=="string")q.decodeStrings!==!1&&(v=h.from(v,j),j="buffer");else if(v instanceof h)j="buffer";else if(f._isUint8Array(v))v=f._uint8ArrayToBuffer(v),j="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],v);let G;return q.ending?G=new H:q.destroyed&&(G=new I("write")),G?(t.nextTick(V,G),R(y,G,!0),G):(q.pendingcb++,se(y,q,v,j,V))}C.prototype.write=function(y,v,j){return Q(this,y,v,j)===!0},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){const y=this._writableState;y.corked&&(y.corked--,y.writing||ce(this,y))},C.prototype.setDefaultEncoding=function(v){if(typeof v=="string"&&(v=u(v)),!h.isEncoding(v))throw new N(v);return this._writableState.defaultEncoding=v,this};function se(y,v,j,V,q){const G=v.objectMode?1:j.length;v.length+=G;const Y=v.length<v.highWaterMark;return Y||(v.needDrain=!0),v.writing||v.corked||v.errored||!v.constructed?(v.buffered.push({chunk:j,encoding:V,callback:q}),v.allBuffers&&V!=="buffer"&&(v.allBuffers=!1),v.allNoop&&q!==F&&(v.allNoop=!1)):(v.writelen=G,v.writecb=q,v.writing=!0,v.sync=!0,y._write(j,V,v.onwrite),v.sync=!1),Y&&!v.errored&&!v.destroyed}function ie(y,v,j,V,q,G,Y){v.writelen=V,v.writecb=Y,v.writing=!0,v.sync=!0,v.destroyed?v.onwrite(new I("write")):j?y._writev(q,v.onwrite):y._write(q,G,v.onwrite),v.sync=!1}function be(y,v,j,V){--v.pendingcb,V(j),ye(v),R(y,j)}function he(y,v){const j=y._writableState,V=j.sync,q=j.writecb;if(typeof q!="function"){R(y,new A);return}j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0,v?(v.stack,j.errored||(j.errored=v),y._readableState&&!y._readableState.errored&&(y._readableState.errored=v),V?t.nextTick(be,y,j,v,q):be(y,j,v,q)):(j.buffered.length>j.bufferedIndex&&ce(y,j),V?j.afterWriteTickInfo!==null&&j.afterWriteTickInfo.cb===q?j.afterWriteTickInfo.count++:(j.afterWriteTickInfo={count:1,cb:q,stream:y,state:j},t.nextTick(Te,j.afterWriteTickInfo)):Ne(y,j,1,q))}function Te({stream:y,state:v,count:j,cb:V}){return v.afterWriteTickInfo=null,Ne(y,v,j,V)}function Ne(y,v,j,V){for(!v.ending&&!y.destroyed&&v.length===0&&v.needDrain&&(v.needDrain=!1,y.emit("drain"));j-- >0;)v.pendingcb--,V();v.destroyed&&ye(v),le(y,v)}function ye(y){if(y.writing)return;for(let q=y.bufferedIndex;q<y.buffered.length;++q){var v;const{chunk:G,callback:Y}=y.buffered[q],ee=y.objectMode?1:G.length;y.length-=ee,Y((v=y.errored)!==null&&v!==void 0?v:new I("write"))}const j=y[X].splice(0);for(let q=0;q<j.length;q++){var V;j[q]((V=y.errored)!==null&&V!==void 0?V:new I("end"))}$(y)}function ce(y,v){if(v.corked||v.bufferProcessing||v.destroyed||!v.constructed)return;const{buffered:j,bufferedIndex:V,objectMode:q}=v,G=j.length-V;if(!G)return;let Y=V;if(v.bufferProcessing=!0,G>1&&y._writev){v.pendingcb-=G-1;const ee=v.allNoop?F:ve=>{for(let me=Y;me<j.length;++me)j[me].callback(ve)},ae=v.allNoop&&Y===0?j:e(j,Y);ae.allBuffers=v.allBuffers,ie(y,v,!0,v.length,ae,"",ee),$(v)}else{do{const{chunk:ee,encoding:ae,callback:ve}=j[Y];j[Y++]=null;const me=q?1:ee.length;ie(y,v,!1,me,ee,ae,ve)}while(Y<j.length&&!v.writing);Y===j.length?$(v):Y>256?(j.splice(0,Y),v.bufferedIndex=0):v.bufferedIndex=Y}v.bufferProcessing=!1}C.prototype._write=function(y,v,j){if(this._writev)this._writev([{chunk:y,encoding:v}],j);else throw new O("_write()")},C.prototype._writev=null,C.prototype.end=function(y,v,j){const V=this._writableState;typeof y=="function"?(j=y,y=null,v=null):typeof v=="function"&&(j=v,v=null);let q;if(y!=null){const G=Q(this,y,v);G instanceof r&&(q=G)}return V.corked&&(V.corked=1,this.uncork()),q||(!V.errored&&!V.ending?(V.ending=!0,le(this,V,!0),V.ended=!0):V.finished?q=new D("end"):V.destroyed&&(q=new I("end"))),typeof j=="function"&&(q||V.finished?t.nextTick(j,q):V[X].push(j)),this};function xe(y){return y.ending&&!y.destroyed&&y.constructed&&y.length===0&&!y.errored&&y.buffered.length===0&&!y.finished&&!y.writing&&!y.errorEmitted&&!y.closeEmitted}function oe(y,v){let j=!1;function V(q){if(j){R(y,q??A());return}if(j=!0,v.pendingcb--,q){const G=v[X].splice(0);for(let Y=0;Y<G.length;Y++)G[Y](q);R(y,q,v.sync)}else xe(v)&&(v.prefinished=!0,y.emit("prefinish"),v.pendingcb++,t.nextTick(pe,y,v))}v.sync=!0,v.pendingcb++;try{y._final(V)}catch(q){V(q)}v.sync=!1}function J(y,v){!v.prefinished&&!v.finalCalled&&(typeof y._final=="function"&&!v.destroyed?(v.finalCalled=!0,oe(y,v)):(v.prefinished=!0,y.emit("prefinish")))}function le(y,v,j){xe(v)&&(J(y,v),v.pendingcb===0&&(j?(v.pendingcb++,t.nextTick((V,q)=>{xe(q)?pe(V,q):q.pendingcb--},y,v)):xe(v)&&(v.pendingcb++,pe(y,v))))}function pe(y,v){v.pendingcb--,v.finished=!0;const j=v[X].splice(0);for(let V=0;V<j.length;V++)j[V]();if(y.emit("finish"),v.autoDestroy){const V=y._readableState;(!V||V.autoDestroy&&(V.endEmitted||V.readable===!1))&&y.destroy()}}s(C.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(y){this._writableState&&(this._writableState.destroyed=y)}},writable:{__proto__:null,get(){const y=this._writableState;return!!y&&y.writable!==!1&&!y.destroyed&&!y.errored&&!y.ending&&!y.ended},set(y){this._writableState&&(this._writableState.writable=!!y)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const y=this._writableState;return y?!y.destroyed&&!y.ending&&y.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const L=p.destroy;C.prototype.destroy=function(y,v){const j=this._writableState;return!j.destroyed&&(j.bufferedIndex<j.buffered.length||j[X].length)&&t.nextTick(ye,j),L.call(this,y,v),this},C.prototype._undestroy=p.undestroy,C.prototype._destroy=function(y,v){v(y)},C.prototype[d.captureRejectionSymbol]=function(y){this.destroy(y)};let P;function m(){return P===void 0&&(P={}),P}return C.fromWeb=function(y,v){return m().newStreamWritableFromWritableStream(y,v)},C.toWeb=function(y){return m().newWritableStreamFromStreamWritable(y)},z3}var W3,AD;function Dee(){if(AD)return W3;AD=1;const t=Jo(),e=la,{isReadable:r,isWritable:n,isIterable:a,isNodeStream:s,isReadableNodeStream:o,isWritableNodeStream:u,isDuplexNodeStream:c}=eu,l=sc,{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h}}=Vi,{destroyer:p}=Mf,b=ko(),_=im(),{createDeferredPromise:E}=Zo,w=cM,O=globalThis.Blob||e.Blob,A=typeof O<"u"?function(R){return R instanceof O}:function(R){return!1},T=globalThis.AbortController||Wg.AbortController,{FunctionPrototypeCall:I}=yn;class D extends b{constructor(R){super(R),(R==null?void 0:R.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(R==null?void 0:R.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}W3=function N(R,F){if(c(R))return R;if(o(R))return H({readable:R});if(u(R))return H({writable:R});if(s(R))return H({writable:!1,readable:!1});if(typeof R=="function"){const{value:ne,write:$,final:C,destroy:Q}=U(R);if(a(ne))return w(D,ne,{objectMode:!0,write:$,final:C,destroy:Q});const se=ne==null?void 0:ne.then;if(typeof se=="function"){let ie;const be=I(se,ne,he=>{if(he!=null)throw new h("nully","body",he)},he=>{p(ie,he)});return ie=new D({objectMode:!0,readable:!1,write:$,final(he){C(async()=>{try{await be,t.nextTick(he,null)}catch(Te){t.nextTick(he,Te)}})},destroy:Q})}throw new h("Iterable, AsyncIterable or AsyncFunction",F,ne)}if(A(R))return N(R.arrayBuffer());if(a(R))return w(D,R,{objectMode:!0,writable:!1});if(typeof(R==null?void 0:R.writable)=="object"||typeof(R==null?void 0:R.readable)=="object"){const ne=R!=null&&R.readable?o(R==null?void 0:R.readable)?R==null?void 0:R.readable:N(R.readable):void 0,$=R!=null&&R.writable?u(R==null?void 0:R.writable)?R==null?void 0:R.writable:N(R.writable):void 0;return H({readable:ne,writable:$})}const X=R==null?void 0:R.then;if(typeof X=="function"){let ne;return I(X,R,$=>{$!=null&&ne.push($),ne.push(null)},$=>{p(ne,$)}),ne=new D({objectMode:!0,writable:!1,read(){}})}throw new f(F,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],R)};function U(N){let{promise:R,resolve:F}=E();const X=new T,ne=X.signal;return{value:N(async function*(){for(;;){const C=R;R=null;const{chunk:Q,done:se,cb:ie}=await C;if(t.nextTick(ie),se)return;if(ne.aborted)throw new d(void 0,{cause:ne.reason});({promise:R,resolve:F}=E()),yield Q}}(),{signal:ne}),write(C,Q,se){const ie=F;F=null,ie({chunk:C,done:!1,cb:se})},final(C){const Q=F;F=null,Q({done:!0,cb:C})},destroy(C,Q){X.abort(),Q(C)}}}function H(N){const R=N.readable&&typeof N.readable.read!="function"?_.wrap(N.readable):N.readable,F=N.writable;let X=!!r(R),ne=!!n(F),$,C,Q,se,ie;function be(he){const Te=se;se=null,Te?Te(he):he&&ie.destroy(he)}return ie=new D({readableObjectMode:!!(R!=null&&R.readableObjectMode),writableObjectMode:!!(F!=null&&F.writableObjectMode),readable:X,writable:ne}),ne&&(l(F,he=>{ne=!1,he&&p(R,he),be(he)}),ie._write=function(he,Te,Ne){F.write(he,Te)?Ne():$=Ne},ie._final=function(he){F.end(),C=he},F.on("drain",function(){if($){const he=$;$=null,he()}}),F.on("finish",function(){if(C){const he=C;C=null,he()}})),X&&(l(R,he=>{X=!1,he&&p(R,he),be(he)}),R.on("readable",function(){if(Q){const he=Q;Q=null,he()}}),R.on("end",function(){ie.push(null)}),ie._read=function(){for(;;){const he=R.read();if(he===null){Q=ie._read;return}if(!ie.push(he))return}}),ie._destroy=function(he,Te){!he&&se!==null&&(he=new d),Q=null,$=null,C=null,se===null?Te(he):(se=Te,p(F,he),p(R,he))},ie}return W3}var X3,xD;function ko(){if(xD)return X3;xD=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:r,ObjectSetPrototypeOf:n}=yn;X3=o;const a=im(),s=lM();n(o.prototype,a.prototype),n(o,a);{const d=r(s.prototype);for(let f=0;f<d.length;f++){const h=d[f];o.prototype[h]||(o.prototype[h]=s.prototype[h])}}function o(d){if(!(this instanceof o))return new o(d);a.call(this,d),s.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(o.prototype,{writable:{__proto__:null,...e(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(s.prototype,"writableLength")},writableFinished:{__proto__:null,...e(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let u;function c(){return u===void 0&&(u={}),u}o.fromWeb=function(d,f){return c().newStreamDuplexFromReadableWritablePair(d,f)},o.toWeb=function(d){return c().newReadableWritablePairFromDuplex(d)};let l;return o.from=function(d){return l||(l=Dee()),l(d,"body")},X3}const{ObjectSetPrototypeOf:dM,Symbol:Nee}=yn;var fM=Qo;const{ERR_METHOD_NOT_IMPLEMENTED:jee}=Vi.codes,Tx=ko(),{getHighWaterMark:Cee}=wx;dM(Qo.prototype,Tx.prototype);dM(Qo,Tx);const op=Nee("kCallback");function Qo(t){if(!(this instanceof Qo))return new Qo(t);const e=t?Cee(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Tx.call(this,t),this._readableState.sync=!1,this[op]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Mee)}function bO(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Mee(){this._final!==bO&&bO.call(this)}Qo.prototype._final=bO;Qo.prototype._transform=function(t,e,r){throw new jee("_transform()")};Qo.prototype._write=function(t,e,r){const n=this._readableState,a=this._writableState,s=n.length;this._transform(t,e,(o,u)=>{if(o){r(o);return}u!=null&&this.push(u),a.ended||s===n.length||n.length<n.highWaterMark?r():this[op]=r})};Qo.prototype._read=function(){if(this[op]){const t=this[op];this[op]=null,t()}};const{ObjectSetPrototypeOf:hM}=yn;var pM=Yd;const Ex=fM;hM(Yd.prototype,Ex.prototype);hM(Yd,Ex);function Yd(t){if(!(this instanceof Yd))return new Yd(t);Ex.call(this,t)}Yd.prototype._transform=function(t,e,r){r(null,t)};const zh=Jo(),{ArrayIsArray:Fee,Promise:Lee,SymbolAsyncIterator:Bee}=yn,Lb=sc,{once:$ee}=Zo,Uee=Mf,RD=ko(),{aggregateTwoErrors:qee,codes:{ERR_INVALID_ARG_TYPE:_O,ERR_INVALID_RETURN_VALUE:K3,ERR_MISSING_ARGS:Vee,ERR_STREAM_DESTROYED:Hee,ERR_STREAM_PREMATURE_CLOSE:kee},AbortError:Qee}=Vi,{validateFunction:Gee,validateAbortSignal:zee}=Kg,{isIterable:jc,isReadable:J3,isReadableNodeStream:sb,isNodeStream:ID,isTransformStream:ud,isWebStream:Wee,isReadableStream:Y3,isReadableEnded:Xee}=eu,Kee=globalThis.AbortController||Wg.AbortController;let Z3,eT;function PD(t,e,r){let n=!1;t.on("close",()=>{n=!0});const a=Lb(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,Uee.destroyer(t,s||new Hee("pipe")))},cleanup:a}}function Jee(t){return Gee(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function tT(t){if(jc(t))return t;if(sb(t))return Yee(t);throw new _O("val",["Readable","Iterable","AsyncIterable"],t)}async function*Yee(t){eT||(eT=im()),yield*eT.prototype[Bee].call(t)}async function Xy(t,e,r,{end:n}){let a,s=null;const o=l=>{if(l&&(a=l),s){const d=s;s=null,d()}},u=()=>new Lee((l,d)=>{a?d(a):s=()=>{a?d(a):l()}});e.on("drain",o);const c=Lb(e,{readable:!1},o);try{e.writableNeedDrain&&await u();for await(const l of t)e.write(l)||await u();n&&e.end(),await u(),r()}catch(l){r(a!==l?qee(a,l):l)}finally{c(),e.off("drain",o)}}async function rT(t,e,r,{end:n}){ud(e)&&(e=e.writable);const a=e.getWriter();try{for await(const s of t)await a.ready,a.write(s).catch(()=>{});await a.ready,n&&await a.close(),r()}catch(s){try{await a.abort(s),r(s)}catch(o){r(o)}}}function Zee(...t){return yM(t,$ee(Jee(t)))}function yM(t,e,r){if(t.length===1&&Fee(t[0])&&(t=t[0]),t.length<2)throw new Vee("streams");const n=new Kee,a=n.signal,s=r==null?void 0:r.signal,o=[];zee(s,"options.signal");function u(){p(new Qee)}s==null||s.addEventListener("abort",u);let c,l;const d=[];let f=0;function h(O){p(O,--f===0)}function p(O,A){if(O&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=O),!(!c&&!A)){for(;d.length;)d.shift()(c);s==null||s.removeEventListener("abort",u),n.abort(),A&&(c||o.forEach(T=>T()),zh.nextTick(e,c,l))}}let b;for(let O=0;O<t.length;O++){const A=t[O],T=O<t.length-1,I=O>0,D=T||(r==null?void 0:r.end)!==!1,U=O===t.length-1;if(ID(A)){let H=function(N){N&&N.name!=="AbortError"&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"&&h(N)};var w=H;if(D){const{destroy:N,cleanup:R}=PD(A,T,I);d.push(N),J3(A)&&U&&o.push(R)}A.on("error",H),J3(A)&&U&&o.push(()=>{A.removeListener("error",H)})}if(O===0)if(typeof A=="function"){if(b=A({signal:a}),!jc(b))throw new K3("Iterable, AsyncIterable or Stream","source",b)}else jc(A)||sb(A)||ud(A)?b=A:b=RD.from(A);else if(typeof A=="function"){if(ud(b)){var _;b=tT((_=b)===null||_===void 0?void 0:_.readable)}else b=tT(b);if(b=A(b,{signal:a}),T){if(!jc(b,!0))throw new K3("AsyncIterable",`transform[${O-1}]`,b)}else{var E;Z3||(Z3=pM);const H=new Z3({objectMode:!0}),N=(E=b)===null||E===void 0?void 0:E.then;if(typeof N=="function")f++,N.call(b,X=>{l=X,X!=null&&H.write(X),D&&H.end(),zh.nextTick(h)},X=>{H.destroy(X),zh.nextTick(h,X)});else if(jc(b,!0))f++,Xy(b,H,h,{end:D});else if(Y3(b)||ud(b)){const X=b.readable||b;f++,Xy(X,H,h,{end:D})}else throw new K3("AsyncIterable or Promise","destination",b);b=H;const{destroy:R,cleanup:F}=PD(b,!1,!0);d.push(R),U&&o.push(F)}}else if(ID(A)){if(sb(b)){f+=2;const H=ete(b,A,h,{end:D});J3(A)&&U&&o.push(H)}else if(ud(b)||Y3(b)){const H=b.readable||b;f++,Xy(H,A,h,{end:D})}else if(jc(b))f++,Xy(b,A,h,{end:D});else throw new _O("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=A}else if(Wee(A)){if(sb(b))f++,rT(tT(b),A,h,{end:D});else if(Y3(b)||jc(b))f++,rT(b,A,h,{end:D});else if(ud(b))f++,rT(b.readable,A,h,{end:D});else throw new _O("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=A}else b=RD.from(A)}return(a!=null&&a.aborted||s!=null&&s.aborted)&&zh.nextTick(u),b}function ete(t,e,r,{end:n}){let a=!1;if(e.on("close",()=>{a||r(new kee)}),t.pipe(e,{end:!1}),n){let o=function(){a=!0,e.end()};var s=o;Xee(t)?zh.nextTick(o):t.once("end",o)}else r();return Lb(t,{readable:!0,writable:!1},o=>{const u=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&u&&u.ended&&!u.errored&&!u.errorEmitted?t.once("end",r).once("error",r):r(o)}),Lb(e,{readable:!1,writable:!0},r)}var Ox={pipelineImpl:yM,pipeline:Zee};const{pipeline:tte}=Ox,Ky=ko(),{destroyer:rte}=Mf,{isNodeStream:Jy,isReadable:DD,isWritable:ND,isWebStream:nT,isTransformStream:wc,isWritableStream:jD,isReadableStream:CD}=eu,{AbortError:nte,codes:{ERR_INVALID_ARG_VALUE:MD,ERR_MISSING_ARGS:ite}}=Vi,ate=sc;var bM=function(...e){if(e.length===0)throw new ite("streams");if(e.length===1)return Ky.from(e[0]);const r=[...e];if(typeof e[0]=="function"&&(e[0]=Ky.from(e[0])),typeof e[e.length-1]=="function"){const p=e.length-1;e[p]=Ky.from(e[p])}for(let p=0;p<e.length;++p)if(!(!Jy(e[p])&&!nT(e[p]))){if(p<e.length-1&&!(DD(e[p])||CD(e[p])||wc(e[p])))throw new MD(`streams[${p}]`,r[p],"must be readable");if(p>0&&!(ND(e[p])||jD(e[p])||wc(e[p])))throw new MD(`streams[${p}]`,r[p],"must be writable")}let n,a,s,o,u;function c(p){const b=o;o=null,b?b(p):p?u.destroy(p):!h&&!f&&u.destroy()}const l=e[0],d=tte(e,c),f=!!(ND(l)||jD(l)||wc(l)),h=!!(DD(d)||CD(d)||wc(d));if(u=new Ky({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(d!=null&&d.writableObjectMode),writable:f,readable:h}),f){if(Jy(l))u._write=function(b,_,E){l.write(b,_)?E():n=E},u._final=function(b){l.end(),a=b},l.on("drain",function(){if(n){const b=n;n=null,b()}});else if(nT(l)){const _=(wc(l)?l.writable:l).getWriter();u._write=async function(E,w,O){try{await _.ready,_.write(E).catch(()=>{}),O()}catch(A){O(A)}},u._final=async function(E){try{await _.ready,_.close().catch(()=>{}),a=E}catch(w){E(w)}}}const p=wc(d)?d.readable:d;ate(p,()=>{if(a){const b=a;a=null,b()}})}if(h){if(Jy(d))d.on("readable",function(){if(s){const p=s;s=null,p()}}),d.on("end",function(){u.push(null)}),u._read=function(){for(;;){const p=d.read();if(p===null){s=u._read;return}if(!u.push(p))return}};else if(nT(d)){const b=(wc(d)?d.readable:d).getReader();u._read=async function(){for(;;)try{const{value:_,done:E}=await b.read();if(!u.push(_))return;if(E){u.push(null);return}}catch{return}}}}return u._destroy=function(p,b){!p&&o!==null&&(p=new nte),s=null,n=null,a=null,o===null?b(p):(o=b,Jy(d)&&rte(d,p))},u};const _M=globalThis.AbortController||Wg.AbortController,{codes:{ERR_INVALID_ARG_VALUE:ste,ERR_INVALID_ARG_TYPE:A0,ERR_MISSING_ARGS:ote,ERR_OUT_OF_RANGE:ute},AbortError:Xs}=Vi,{validateAbortSignal:wl,validateInteger:cte,validateObject:Sl}=Kg,lte=yn.Symbol("kWeak"),{finished:dte}=sc,fte=bM,{addAbortSignalNoValidate:hte}=nm,{isWritable:pte,isNodeStream:yte}=eu,{ArrayPrototypePush:bte,MathFloor:_te,Number:gte,NumberIsNaN:mte,Promise:FD,PromiseReject:LD,PromisePrototypeThen:vte,Symbol:gM}=yn,Bb=gM("kEmpty"),BD=gM("kEof");function wte(t,e){if(e!=null&&Sl(e,"options"),(e==null?void 0:e.signal)!=null&&wl(e.signal,"options.signal"),yte(t)&&!pte(t))throw new ste("stream",t,"must be writable");const r=fte(this,t);return e!=null&&e.signal&&hte(e.signal,r),r}function am(t,e){if(typeof t!="function")throw new A0("fn",["Function","AsyncFunction"],t);e!=null&&Sl(e,"options"),(e==null?void 0:e.signal)!=null&&wl(e.signal,"options.signal");let r=1;return(e==null?void 0:e.concurrency)!=null&&(r=_te(e.concurrency)),cte(r,"concurrency",1),(async function*(){var a,s;const o=new _M,u=this,c=[],l=o.signal,d={signal:l},f=()=>o.abort();e!=null&&(a=e.signal)!==null&&a!==void 0&&a.aborted&&f(),e==null||(s=e.signal)===null||s===void 0||s.addEventListener("abort",f);let h,p,b=!1;function _(){b=!0}async function E(){try{for await(let A of u){var w;if(b)return;if(l.aborted)throw new Xs;try{A=t(A,d)}catch(T){A=LD(T)}A!==Bb&&(typeof((w=A)===null||w===void 0?void 0:w.catch)=="function"&&A.catch(_),c.push(A),h&&(h(),h=null),!b&&c.length&&c.length>=r&&await new FD(T=>{p=T}))}c.push(BD)}catch(A){const T=LD(A);vte(T,void 0,_),c.push(T)}finally{var O;b=!0,h&&(h(),h=null),e==null||(O=e.signal)===null||O===void 0||O.removeEventListener("abort",f)}}E();try{for(;;){for(;c.length>0;){const w=await c[0];if(w===BD)return;if(l.aborted)throw new Xs;w!==Bb&&(yield w),c.shift(),p&&(p(),p=null)}await new FD(w=>{h=w})}}finally{o.abort(),b=!0,p&&(p(),p=null)}}).call(this)}function Ste(t=void 0){return t!=null&&Sl(t,"options"),(t==null?void 0:t.signal)!=null&&wl(t.signal,"options.signal"),(async function*(){let r=0;for await(const a of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Xs({cause:t.signal.reason});yield[r++,a]}}).call(this)}async function mM(t,e=void 0){for await(const r of Ax.call(this,t,e))return!0;return!1}async function Tte(t,e=void 0){if(typeof t!="function")throw new A0("fn",["Function","AsyncFunction"],t);return!await mM.call(this,async(...r)=>!await t(...r),e)}async function Ete(t,e){for await(const r of Ax.call(this,t,e))return r}async function Ote(t,e){if(typeof t!="function")throw new A0("fn",["Function","AsyncFunction"],t);async function r(n,a){return await t(n,a),Bb}for await(const n of am.call(this,r,e));}function Ax(t,e){if(typeof t!="function")throw new A0("fn",["Function","AsyncFunction"],t);async function r(n,a){return await t(n,a)?n:Bb}return am.call(this,r,e)}class Ate extends ote{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function xte(t,e,r){var n;if(typeof t!="function")throw new A0("reducer",["Function","AsyncFunction"],t);r!=null&&Sl(r,"options"),(r==null?void 0:r.signal)!=null&&wl(r.signal,"options.signal");let a=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const l=new Xs(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await dte(this.destroy(l)),l}const s=new _M,o=s.signal;if(r!=null&&r.signal){const l={once:!0,[lte]:this};r.signal.addEventListener("abort",()=>s.abort(),l)}let u=!1;try{for await(const l of this){var c;if(u=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new Xs;a?e=await t(e,l,{signal:o}):(e=l,a=!0)}if(!u&&!a)throw new Ate}finally{s.abort()}return e}async function Rte(t){t!=null&&Sl(t,"options"),(t==null?void 0:t.signal)!=null&&wl(t.signal,"options.signal");const e=[];for await(const n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Xs(void 0,{cause:t.signal.reason});bte(e,n)}return e}function Ite(t,e){const r=am.call(this,t,e);return(async function*(){for await(const a of r)yield*a}).call(this)}function vM(t){if(t=gte(t),mte(t))return 0;if(t<0)throw new ute("number",">= 0",t);return t}function Pte(t,e=void 0){return e!=null&&Sl(e,"options"),(e==null?void 0:e.signal)!=null&&wl(e.signal,"options.signal"),t=vM(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Xs;for await(const s of this){var a;if(e!=null&&(a=e.signal)!==null&&a!==void 0&&a.aborted)throw new Xs;t--<=0&&(yield s)}}).call(this)}function Dte(t,e=void 0){return e!=null&&Sl(e,"options"),(e==null?void 0:e.signal)!=null&&wl(e.signal,"options.signal"),t=vM(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Xs;for await(const s of this){var a;if(e!=null&&(a=e.signal)!==null&&a!==void 0&&a.aborted)throw new Xs;if(t-- >0)yield s;else return}}).call(this)}px.streamReturningOperators={asIndexedPairs:Ste,drop:Pte,filter:Ax,flatMap:Ite,map:am,take:Dte,compose:wte};px.promiseReturningOperators={every:Tte,forEach:Ote,reduce:xte,toArray:Rte,some:mM,find:Ete};var iT,$D;function wM(){if($D)return iT;$D=1;const{ArrayPrototypePop:t,Promise:e}=yn,{isIterable:r,isNodeStream:n,isWebStream:a}=eu,{pipelineImpl:s}=Ox,{finished:o}=sc;SM();function u(...c){return new e((l,d)=>{let f,h;const p=c[c.length-1];if(p&&typeof p=="object"&&!n(p)&&!r(p)&&!a(p)){const b=t(c);f=b.signal,h=b.end}s(c,(b,_)=>{b?d(b):l(_)},{signal:f,end:h})})}return iT={finished:o,pipeline:u},iT}var UD;function SM(){if(UD)return U3.exports;UD=1;const{Buffer:t}=la,{ObjectDefineProperty:e,ObjectKeys:r,ReflectApply:n}=yn,{promisify:{custom:a}}=Zo,{streamReturningOperators:s,promiseReturningOperators:o}=px,{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=Vi,c=bM,{pipeline:l}=Ox,{destroyer:d}=Mf,f=sc,h=wM(),p=eu,b=U3.exports=vx.Stream;b.isDisturbed=p.isDisturbed,b.isErrored=p.isErrored,b.isReadable=p.isReadable,b.Readable=im();for(const w of r(s)){let A=function(...T){if(new.target)throw u();return b.Readable.from(n(O,this,T))};var E=A;const O=s[w];e(A,"name",{__proto__:null,value:O.name}),e(A,"length",{__proto__:null,value:O.length}),e(b.Readable.prototype,w,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}for(const w of r(o)){let A=function(...I){if(new.target)throw u();return n(O,this,I)};var E=A;const O=o[w];e(A,"name",{__proto__:null,value:O.name}),e(A,"length",{__proto__:null,value:O.length}),e(b.Readable.prototype,w,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}b.Writable=lM(),b.Duplex=ko(),b.Transform=fM,b.PassThrough=pM,b.pipeline=l;const{addAbortSignal:_}=nm;return b.addAbortSignal=_,b.finished=f,b.destroy=d,b.compose=c,e(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return h}}),e(l,a,{__proto__:null,enumerable:!0,get(){return h.pipeline}}),e(f,a,{__proto__:null,enumerable:!0,get(){return h.finished}}),b.Stream=b,b._isUint8Array=function(O){return O instanceof Uint8Array},b._uint8ArrayToBuffer=function(O){return t.from(O.buffer,O.byteOffset,O.byteLength)},U3.exports}(function(t){const e=SM(),r=wM(),n=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=n,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return r}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})(D9);var Xt=D9.exports;Object.defineProperty(Vg,"__esModule",{value:!0});Vg.ActorQueryResultSerializeJson=void 0;const Nte=cs,qD=Zt,jte=Xt;class Cte extends Nte.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}async testHandleChecked(e,r){if(!["bindings","quads","boolean"].includes(e.type))throw new Error("This actor can only handle bindings or quad streams.");return!0}async runHandle(e,r,n){const a=new jte.Readable;a._read=()=>{};let s=!0;if(e.type==="bindings"){const o=e.bindingsStream;a.push("["),o.on("error",u=>a.emit("error",u)),o.on("data",u=>{a.push(s?`
`:`,
`),a.push(JSON.stringify(Object.fromEntries([...u].map(([c,l])=>[c.value,qD.termToString(l)])))),s=!1}),o.on("end",()=>{a.push(s?`]
`:`
]
`),a.push(null)})}else if(e.type==="quads"){const o=e.quadStream;a.push("["),o.on("error",u=>a.emit("error",u)),o.on("data",u=>{a.push(s?`
`:`,
`),a.push(JSON.stringify(qD.quadToStringQuad(u))),s=!1}),o.on("end",()=>{a.push(s?`]
`:`
]
`),a.push(null)})}else try{a.push(`${JSON.stringify(await e.execute())}
`),a.push(null)}catch(o){setTimeout(()=>a.emit("error",o))}return{data:a}}}Vg.ActorQueryResultSerializeJson=Cte;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Vg,t)})(P9);var TM={},sm={};Object.defineProperty(sm,"__esModule",{value:!0});sm.ActorQueryResultSerializeSimple=void 0;const Mte=cs,Fte=Zt,Lte=Xt;class qc extends Mte.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}async testHandleChecked(e,r){if(!["bindings","quads","boolean","void"].includes(e.type))throw new Error("This actor can only handle bindings streams, quad streams, booleans, or updates.");return!0}static termToString(e){return e.termType==="Quad"?(0,Fte.termToString)(e):e.value}async runHandle(e,r,n){const a=new Lte.Readable;a._read=()=>{};let s;if(e.type==="bindings")s=e.bindingsStream,s.on("error",o=>a.emit("error",o)),s.on("data",o=>a.push(`${[...o].map(([u,c])=>`?${u.value}: ${qc.termToString(c)}`).join(`
`)}

`)),s.on("end",()=>a.push(null));else if(e.type==="quads")s=e.quadStream,s.on("error",o=>a.emit("error",o)),s.on("data",o=>a.push(`subject: ${qc.termToString(o.subject)}
predicate: ${qc.termToString(o.predicate)}
object: ${qc.termToString(o.object)}
graph: ${qc.termToString(o.graph)}

`)),s.on("end",()=>a.push(null));else if(e.type==="boolean")try{a.push(`${JSON.stringify(await e.execute())}
`),a.push(null)}catch(o){setTimeout(()=>a.emit("error",o))}else e.execute().then(()=>{a.push(`ok
`),a.push(null)}).catch(o=>setTimeout(()=>a.emit("error",o)));return{data:a}}}sm.ActorQueryResultSerializeSimple=qc;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(sm,t)})(TM);var EM={},om={};Object.defineProperty(om,"__esModule",{value:!0});om.ActorQueryResultSerializeSparqlCsv=void 0;const Bte=cs,$te=Xt;class bd extends Bte.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToCsvBindings(e){if(!e)return"";let r=e.value;if(e.termType==="Literal")r=`${r}`;else if(e.termType==="BlankNode")r=`_:${r}`;else if(e.termType==="Quad"){let n=bd.bindingToCsvBindings(e.object);e.object.termType==="Literal"&&(n=`"${n.replace(/"/ug,'""')}"`),r=`<< ${bd.bindingToCsvBindings(e.subject)} ${bd.bindingToCsvBindings(e.predicate)} ${n} >>`}else r=`<${r}>`;return/[",\n\r]/u.test(r)&&(r=`"${r.replace(/"/ug,'""')}"`),r}async testHandleChecked(e,r){if(e.type!=="bindings")throw new Error("This actor can only handle bindings streams.");return!0}async runHandle(e,r,n){const a=e,s=new $te.Readable;s._read=()=>{};const o=await a.metadata();return s.push(`${o.variables.map(u=>u.value).join(",")}\r
`),a.bindingsStream.on("error",u=>{s.emit("error",u)}),a.bindingsStream.on("data",u=>{s.push(`${o.variables.map(c=>bd.bindingToCsvBindings(u.get(c))).join(",")}\r
`)}),a.bindingsStream.on("end",()=>{s.push(null)}),{data:s}}}om.ActorQueryResultSerializeSparqlCsv=bd;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(om,t)})(EM);var OM={},um={},x0={},Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.stringQuadToQuad=Kn.quadToStringQuad=Kn.stringToTerm=Kn.getLiteralLanguage=Kn.getLiteralType=Kn.getLiteralValue=Kn.termToString=void 0;const Ute=ft,AM=new Ute.DataFactory;function Co(t){if(t)switch(t.termType){case"NamedNode":return`<${Hte(t.value)}>`;case"BlankNode":return`_:${t.value}`;case"Literal":{const e=t;return`"${kte(e.value)}"${e.datatype&&e.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&e.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?`^^<${e.datatype.value}>`:""}${e.language?`@${e.language}`:""}`}case"Quad":return`<<${Co(t.subject)} ${Co(t.predicate)} ${Co(t.object)}${t.graph.termType==="DefaultGraph"?"":` ${Co(t.graph)}`}>>`;case"Variable":return`?${t.value}`;case"DefaultGraph":return t.value}}Kn.termToString=Co;function xM(t){const e=/^"([^]*)"((\^\^.*)|(@.*))?$/u.exec(t);if(!e)throw new Error(`${t} is not a literal`);return e[1].replace(/\\"/ug,'"')}Kn.getLiteralValue=xM;function RM(t){const e=/^"[^]*"(?:\^\^<([^"]+)>|(@)[^@"]+)?$/u.exec(t);if(!e)throw new Error(`${t} is not a literal`);return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}Kn.getLiteralType=RM;function IM(t){const e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/u.exec(t);if(!e)throw new Error(`${t} is not a literal`);return e[1]?e[1].toLowerCase():""}Kn.getLiteralLanguage=IM;function Mo(t,e){if(e=e||AM,!t||t.length===0)return e.defaultGraph();switch(t[0]){case"_":return e.blankNode(t.slice(2));case"?":if(!e.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return e.variable(t.slice(1));case'"':{const r=IM(t),n=e.namedNode(RM(t));return e.literal(xM(t),r||n)}case"<":default:if(t.startsWith("<<")&&t.endsWith(">>")){const r=t.slice(2,-2),n=[];let a=0,s=0;for(let o=0;o<r.length;o++){const u=r[o];if(u==="<"&&a++,u===">"){if(a===0)throw new Error(`Found closing tag without opening tag in ${t}`);a--}u===" "&&a===0&&(n.push(r.slice(s,o)),s=o+1)}if(a!==0)throw new Error(`Found opening tag without closing tag in ${t}`);if(n.push(r.slice(s,r.length)),n.length!==3&&n.length!==4)throw new Error(`Nested quad syntax error ${t}`);return e.quad(Mo(n[0]),Mo(n[1]),Mo(n[2]),n[3]?Mo(n[3]):void 0)}if(!t.startsWith("<")||!t.endsWith(">"))throw new Error(`Detected invalid iri for named node (must be wrapped in <>): ${t}`);return e.namedNode(t.slice(1,-1))}}Kn.stringToTerm=Mo;function qte(t){return{subject:Co(t.subject),predicate:Co(t.predicate),object:Co(t.object),graph:Co(t.graph)}}Kn.quadToStringQuad=qte;function Vte(t,e){return e=e||AM,e.quad(Mo(t.subject,e),Mo(t.predicate,e),Mo(t.object,e),Mo(t.graph,e))}Kn.stringQuadToQuad=Vte;function Hte(t){return t.replace(gO,PM)}function kte(t){return gO.test(t)&&(t=t.replace(gO,PM)),t}const gO=/["\\\t\n\r\b\f\u0000-\u0019]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qte=new Map([["\\","\\\\"],['"','\\"'],["	","\\t"],[`
`,"\\n"],["\r","\\r"],["\b","\\b"],["\f","\\f"]]);function PM(t){const e=Qte.get(t);if(!e){if(t.length===1){const n=t.charCodeAt(0).toString(16);return`${"\\u0000".slice(0,-n.length)}${n}`}const r=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16);return`${"\\U00000000".slice(0,-r.length)}${r}`}return e}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.termToString=t.stringToTerm=t.stringQuadToQuad=t.quadToStringQuad=t.getLiteralValue=t.getLiteralType=t.getLiteralLanguage=void 0;const e=Kn;Object.defineProperty(t,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(t,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(t,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(t,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(t,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(t,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(t,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(x0);Object.defineProperty(um,"__esModule",{value:!0});um.ActorQueryResultSerializeSparqlTsv=void 0;const Gte=cs,zte=x0,Wte=Xt;class xx extends Gte.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToTsvBindings(e){return e?(0,zte.termToString)(e).replace(/\t/gu,"\\t").replace(/\n/gu,"\\n").replace(/\r/gu,"\\r"):""}async testHandleChecked(e,r){if(e.type!=="bindings")throw new Error("This actor can only handle bindings streams.");return!0}async runHandle(e,r,n){const a=e,s=new Wte.Readable;s._read=()=>{};const o=await a.metadata();return s.push(`${o.variables.map(u=>u.value).join("	")}
`),a.bindingsStream.on("error",u=>{s.emit("error",u)}),a.bindingsStream.on("data",u=>{s.push(`${o.variables.map(c=>xx.bindingToTsvBindings(u.get(c))).join("	")}
`)}),a.bindingsStream.on("end",()=>{s.push(null)}),{data:s}}}um.ActorQueryResultSerializeSparqlTsv=xx;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(um,t)})(OM);var DM={},cm={},lm={};Object.defineProperty(lm,"__esModule",{value:!0});lm.XmlSerializer=void 0;class Xte{constructor(e){this.stack=[],this.push=e,this.push(`<?xml version="1.0" encoding="UTF-8"?>
`)}open(e,r){this.push(`${this.identation()+this.formatTag(e,r,"open")}
`),this.stack.push(e)}close(){const e=this.stack.pop();if(e===void 0)throw new Error("There is no tag left to close");this.push(`${this.identation()+this.formatTag(e,{},"close")}
`)}add(e){this.push(this.serializeNode(e))}serializeNode(e){if(e.children===void 0)return`${this.identation()+this.formatTag(e.name,e.attributes,"self-closing")}
`;if(typeof e.children=="string")return`${this.identation()+this.formatTag(e.name,e.attributes,"open")+this.escape(e.children)+this.formatTag(e.name,{},"close")}
`;const r=[];r.push(`${this.identation()+this.formatTag(e.name,e.attributes,"open")}
`),this.stack.push(e.name);for(const n of e.children)r.push(this.serializeNode(n));return this.stack.pop(),r.push(`${this.identation()+this.formatTag(e.name,{},"close")}
`),r.join("")}identation(){return this.stack.map(e=>"  ").join("")}formatTag(e,r,n){return`<${n==="close"?"/":""}${e}${Object.entries(r||{}).map(a=>` ${a[0]}="${this.escape(a[1])}"`)}${n==="self-closing"?"/":""}>`}escape(e){return e.replace(/["&'<>]/gu,r=>{switch(r){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}})}}lm.XmlSerializer=Xte;Object.defineProperty(cm,"__esModule",{value:!0});cm.ActorQueryResultSerializeSparqlXml=void 0;const Kte=cs,Jte=Xt,Yte=lm;class Rx extends Kte.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToXmlBindings(e,r){return{name:"binding",attributes:{name:r.value},children:[this.valueToXmlValue(e)]}}static valueToXmlValue(e){let r;switch(e.termType){case"Literal":return e.language?r={"xml:lang":e.language}:e.datatype&&e.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"?r={datatype:e.datatype.value}:r={},{name:"literal",attributes:r,children:e.value};case"BlankNode":return{name:"bnode",children:e.value};case"Quad":return{name:"triple",children:[{name:"subject",children:[this.valueToXmlValue(e.subject)]},{name:"predicate",children:[this.valueToXmlValue(e.predicate)]},{name:"object",children:[this.valueToXmlValue(e.object)]}]};default:return{name:"uri",children:e.value}}}async testHandleChecked(e,r){if(!["bindings","boolean"].includes(e.type))throw new Error("This actor can only handle bindings streams or booleans.");return!0}async runHandle(e,r,n){const a=new Jte.Readable;a._read=()=>{};const s=new Yte.XmlSerializer(u=>a.push(u));s.open("sparql",{xmlns:"http://www.w3.org/2005/sparql-results#"});const o=await e.metadata();if(s.add({name:"head",children:o.variables.map(u=>({name:"variable",attributes:{name:u.value}}))}),e.type==="bindings"){s.open("results");const u=e.bindingsStream;u.on("error",c=>{a.emit("error",c)}),u.on("data",c=>{s.add({name:"result",children:[...c].map(([l,d])=>Rx.bindingToXmlBindings(d,l))})}),u.on("end",()=>{s.close(),s.close(),setTimeout(()=>a.push(null))})}else try{const u=await e.execute();s.add({name:"boolean",children:u.toString()}),s.close(),setTimeout(()=>a.push(null))}catch(u){setTimeout(()=>a.emit("error",u))}return{data:a}}}cm.ActorQueryResultSerializeSparqlXml=Rx;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(cm,t)})(DM);var NM={},dm={};Object.defineProperty(dm,"__esModule",{value:!0});dm.ActorQueryResultSerializeTable=void 0;const Zte=cs,ere=ft,tre=Zt,jM=an,rre=Xt,nre=new ere.DataFactory,ire=jM.QUAD_TERM_NAMES.map(t=>nre.variable(t));class $b extends Zte.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e),this.padding=$b.repeat(" ",this.columnWidth)}static repeat(e,r){return e.repeat(r)}async testHandleChecked(e,r){if(!["bindings","quads"].includes(e.type))throw new Error("This actor can only handle bindings or quad streams.");return!0}termToString(e){return e.termType==="Quad"?(0,tre.termToString)(e):e.value}pad(e){return e.length<=this.columnWidth?e+this.padding.slice(e.length):`${e.slice(0,this.columnWidth-1)}`}pushHeader(e,r){const n=r.map(a=>this.pad(a.value)).join(" ");e.push(`${n}
${$b.repeat("-",n.length)}
`)}pushRow(e,r,n){e.push(`${r.map(a=>n.has(a)?this.termToString(n.get(a)):"").map(a=>this.pad(a)).join(" ")}
`)}async runHandle(e,r,n){const a=new rre.Readable;a._read=()=>{};let s;if(e.type==="bindings"){s=e.bindingsStream;const o=(await e.metadata()).variables;this.pushHeader(a,o),s.on("error",u=>a.emit("error",u)),s.on("data",u=>this.pushRow(a,o,u))}else s=e.quadStream,this.pushHeader(a,ire),s.on("error",o=>a.emit("error",o)),s.on("data",o=>a.push(`${(0,jM.getTerms)(o).map(u=>this.pad(this.termToString(u))).join(" ")}
`));return s.on("end",()=>a.push(null)),{data:a}}}dm.ActorQueryResultSerializeTable=$b;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(dm,t)})(NM);var CM={},Ip={},MM={},fm={},FM={},mO={},hm={},Go={};Object.defineProperty(Go,"__esModule",{value:!0});Go.Translator=void 0;class are{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(e){throw new Error(`Invalid RDF ${e.datatype.value} value: '${e.value}'`)}registerHandler(e,r,n){for(const a of r)this.supportedRdfDatatypes.push(a),this.fromRdfHandlers[a.value]=e;for(const a of n){let s=this.toRdfHandlers[a];s||(this.toRdfHandlers[a]=s=[]),s.push(e)}}fromRdf(e,r){const n=this.fromRdfHandlers[e.datatype.value];return n?n.fromRdf(e,r):e.value}toRdf(e,r){const n=this.toRdfHandlers[typeof e];if(n)for(const a of n){const s=a.toRdf(e,r);if(s)return s}throw new Error(`Invalid JavaScript value: '${e}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}Go.Translator=are;Object.defineProperty(hm,"__esModule",{value:!0});hm.TypeHandlerBoolean=void 0;const sre=Go;class pm{fromRdf(e,r){switch(e.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return r&&sre.Translator.incorrectRdfDataType(e),!1}toRdf(e,{datatype:r,dataFactory:n}){return n.literal(e?"true":"false",r||n.namedNode(pm.TYPE))}}hm.TypeHandlerBoolean=pm;pm.TYPE="http://www.w3.org/2001/XMLSchema#boolean";var ym={};Object.defineProperty(ym,"__esModule",{value:!0});ym.TypeHandlerDate=void 0;const ore=Go;class Zd{fromRdf(e,r){switch(r&&!e.value.match(Zd.VALIDATORS[e.datatype.value.substr(33,e.datatype.value.length)])&&ore.Translator.incorrectRdfDataType(e),e.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(e.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const n=e.value.split("-");return new Date(0,parseInt(n[0],10)-1,parseInt(n[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(e.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(e.value+"-01");default:return new Date(e.value)}}toRdf(e,{datatype:r,dataFactory:n}){if(r=r||n.namedNode(Zd.TYPES[0]),!(e instanceof Date))return null;const a=e;let s;switch(r.value){case"http://www.w3.org/2001/XMLSchema#gDay":s=String(a.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":s=a.getUTCMonth()+1+"-"+a.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":s=String(a.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":s=a.getUTCFullYear()+"-"+(a.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":s=a.toISOString().replace(/T.*$/,"");break;default:s=a.toISOString()}return n.literal(s,r)}}ym.TypeHandlerDate=Zd;Zd.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"];Zd.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/};var bm={};Object.defineProperty(bm,"__esModule",{value:!0});bm.TypeHandlerNumberDouble=void 0;const ure=Go;class _m{fromRdf(e,r){const n=parseFloat(e.value);return r&&isNaN(n)&&ure.Translator.incorrectRdfDataType(e),n}toRdf(e,{datatype:r,dataFactory:n}){return r=r||n.namedNode(_m.TYPES[0]),isNaN(e)?n.literal("NaN",r):isFinite(e)?e%1===0?null:n.literal(e.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),r):n.literal(e>0?"INF":"-INF",r)}}bm.TypeHandlerNumberDouble=_m;_m.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"];var gm={};Object.defineProperty(gm,"__esModule",{value:!0});gm.TypeHandlerNumberInteger=void 0;const cre=Go;class Fo{fromRdf(e,r){const n=parseInt(e.value,10);return r&&(isNaN(n)||e.value.indexOf(".")>=0)&&cre.Translator.incorrectRdfDataType(e),n}toRdf(e,{datatype:r,dataFactory:n}){return n.literal(String(e),r||(e<=Fo.MAX_INT&&e>=Fo.MIN_INT?n.namedNode(Fo.TYPES[0]):n.namedNode(Fo.TYPES[1])))}}gm.TypeHandlerNumberInteger=Fo;Fo.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"];Fo.MAX_INT=2147483647;Fo.MIN_INT=-2147483648;var mm={};Object.defineProperty(mm,"__esModule",{value:!0});mm.TypeHandlerString=void 0;class LM{fromRdf(e){return e.value}toRdf(e,{datatype:r,dataFactory:n}){return n.literal(e,r)}}mm.TypeHandlerString=LM;LM.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"];(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(hm,t),r(ym,t),r(bm,t),r(gm,t),r(mm,t)})(mO);var BM={};Object.defineProperty(BM,"__esModule",{value:!0});(function(t){var e=g&&g.__createBinding||(Object.create?function(p,b,_,E){E===void 0&&(E=_),Object.defineProperty(p,E,{enumerable:!0,get:function(){return b[_]}})}:function(p,b,_,E){E===void 0&&(E=_),p[E]=b[_]}),r=g&&g.__exportStar||function(p,b){for(var _ in p)_!=="default"&&!Object.prototype.hasOwnProperty.call(b,_)&&e(b,p,_)};Object.defineProperty(t,"__esModule",{value:!0}),t.getSupportedJavaScriptPrimitives=t.getSupportedRdfDatatypes=t.getTermRaw=t.toRdf=t.fromRdf=void 0;const n=ft,a=mO,s=Go;r(mO,t),r(BM,t),r(Go,t);const o=new n.DataFactory,u=new s.Translator;u.registerHandler(new a.TypeHandlerString,a.TypeHandlerString.TYPES.map(p=>o.namedNode(p)),["string"]),u.registerHandler(new a.TypeHandlerBoolean,[a.TypeHandlerBoolean.TYPE].map(p=>o.namedNode(p)),["boolean"]),u.registerHandler(new a.TypeHandlerNumberDouble,a.TypeHandlerNumberDouble.TYPES.map(p=>o.namedNode(p)),["number"]),u.registerHandler(new a.TypeHandlerNumberInteger,a.TypeHandlerNumberInteger.TYPES.map(p=>o.namedNode(p)),["number"]),u.registerHandler(new a.TypeHandlerDate,a.TypeHandlerDate.TYPES.map(p=>o.namedNode(p)),["object"]);function c(p,b){return u.fromRdf(p,b)}t.fromRdf=c;function l(p,b){return b&&"namedNode"in b&&(b={dataFactory:b}),b=b||{},b&&!b.dataFactory&&(b.dataFactory=o),u.toRdf(p,b)}t.toRdf=l;function d(p,b){return p.termType==="Literal"?c(p,b):p.value}t.getTermRaw=d;function f(){return u.getSupportedRdfDatatypes()}t.getSupportedRdfDatatypes=f;function h(){return u.getSupportedJavaScriptPrimitives()}t.getSupportedJavaScriptPrimitives=h})(FM);var Ix={},vm={},{Buffer:Nu}=la,Nt={},$M=Nt.LEFT_BRACE=1,ob=Nt.RIGHT_BRACE=2,UM=Nt.LEFT_BRACKET=3,vO=Nt.RIGHT_BRACKET=4,ub=Nt.COLON=5,Ub=Nt.COMMA=6,qM=Nt.TRUE=7,VM=Nt.FALSE=8,HM=Nt.NULL=9,qb=Nt.STRING=10,kM=Nt.NUMBER=11,Cc=Nt.START=17,QM=Nt.STOP=18,VD=Nt.TRUE1=33,HD=Nt.TRUE2=34,kD=Nt.TRUE3=35,QD=Nt.FALSE1=49,GD=Nt.FALSE2=50,zD=Nt.FALSE3=51,WD=Nt.FALSE4=52,XD=Nt.NULL1=65,KD=Nt.NULL2=66,JD=Nt.NULL3=67,YD=Nt.NUMBER1=81,aT=Nt.NUMBER3=83,Ba=Nt.STRING1=97,ZD=Nt.STRING2=98,eN=Nt.STRING3=99,lre=Nt.STRING4=100,dre=Nt.STRING5=101,tN=Nt.STRING6=102,_d=Nt.VALUE=113,sT=Nt.KEY=114,Yy=Nt.OBJECT=129,Zy=Nt.ARRAY=130,fre="\\".charCodeAt(0),hre="/".charCodeAt(0),pre="\b".charCodeAt(0),yre="\f".charCodeAt(0),bre=`
`.charCodeAt(0),_re="\r".charCodeAt(0),gre="	".charCodeAt(0),Px=64*1024;function e1(t){return Nu.alloc?Nu.alloc(t):new Nu(t)}function Ku(){this.tState=Cc,this.value=void 0,this.string=void 0,this.stringBuffer=e1(Px),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=_d,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:e1(2),3:e1(3),4:e1(4)},this.offset=-1}Ku.toknam=function(t){for(var e=Object.keys(Nt),r=0,n=e.length;r<n;r++){var a=e[r];if(Nt[a]===t)return a}return t&&"0x"+t.toString(16)};var da=Ku.prototype;da.onError=function(t){throw t};da.charError=function(t,e){this.tState=QM,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+Ku.toknam(this.tState)))};da.appendStringChar=function(t){this.stringBufferOffset>=Px&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=t};da.appendStringBuf=function(t,e,r){var n=t.length;typeof e=="number"&&(typeof r=="number"?r<0?n=t.length-e+r:n=r-e:n=t.length-e),n<0&&(n=0),this.stringBufferOffset+n>Px&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),t.copy(this.stringBuffer,this.stringBufferOffset,e,r),this.stringBufferOffset+=n};da.write=function(t){typeof t=="string"&&(t=new Nu(t));for(var e,r=0,n=t.length;r<n;r++)if(this.tState===Cc){if(e=t[r],this.offset++,e===123)this.onToken($M,"{");else if(e===125)this.onToken(ob,"}");else if(e===91)this.onToken(UM,"[");else if(e===93)this.onToken(vO,"]");else if(e===58)this.onToken(ub,":");else if(e===44)this.onToken(Ub,",");else if(e===116)this.tState=VD;else if(e===102)this.tState=QD;else if(e===110)this.tState=XD;else if(e===34)this.string="",this.stringBufferOffset=0,this.tState=Ba;else if(e===45)this.string="-",this.tState=YD;else if(e>=48&&e<64)this.string=String.fromCharCode(e),this.tState=aT;else if(!(e===32||e===9||e===10||e===13))return this.charError(t,r)}else if(this.tState===Ba)if(e=t[r],this.bytes_remaining>0){for(var a=0;a<this.bytes_remaining;a++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+a]=t[a];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,r=r+a-1}else if(this.bytes_remaining===0&&e>=128){if(e<=193||e>244)return this.onError(new Error("Invalid UTF-8 character at position "+r+" in state "+Ku.toknam(this.tState)));if(e>=194&&e<=223&&(this.bytes_in_sequence=2),e>=224&&e<=239&&(this.bytes_in_sequence=3),e>=240&&e<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>t.length){for(var s=0;s<=t.length-1-r;s++)this.temp_buffs[this.bytes_in_sequence][s]=t[r+s];this.bytes_remaining=r+this.bytes_in_sequence-t.length,r=t.length-1}else this.appendStringBuf(t,r,r+this.bytes_in_sequence),r=r+this.bytes_in_sequence-1}else if(e===34)this.tState=Cc,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(qb,this.string),this.offset+=Nu.byteLength(this.string,"utf8")+1,this.string=void 0;else if(e===92)this.tState=ZD;else if(e>=32)this.appendStringChar(e);else return this.charError(t,r);else if(this.tState===ZD)if(e=t[r],e===34)this.appendStringChar(e),this.tState=Ba;else if(e===92)this.appendStringChar(fre),this.tState=Ba;else if(e===47)this.appendStringChar(hre),this.tState=Ba;else if(e===98)this.appendStringChar(pre),this.tState=Ba;else if(e===102)this.appendStringChar(yre),this.tState=Ba;else if(e===110)this.appendStringChar(bre),this.tState=Ba;else if(e===114)this.appendStringChar(_re),this.tState=Ba;else if(e===116)this.appendStringChar(gre),this.tState=Ba;else if(e===117)this.unicode="",this.tState=eN;else return this.charError(t,r);else if(this.tState===eN||this.tState===lre||this.tState===dre||this.tState===tN)if(e=t[r],e>=48&&e<64||e>64&&e<=70||e>96&&e<=102){if(this.unicode+=String.fromCharCode(e),this.tState++===tN){var o=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&o>=56320&&o<57343+1?(this.appendStringBuf(new Nu(String.fromCharCode(this.highSurrogate,o))),this.highSurrogate=void 0):this.highSurrogate===void 0&&o>=55296&&o<56319+1?this.highSurrogate=o:(this.highSurrogate!==void 0&&(this.appendStringBuf(new Nu(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new Nu(String.fromCharCode(o)))),this.tState=Ba}}else return this.charError(t,r);else if(this.tState===YD||this.tState===aT)switch(e=t[r],e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(e),this.tState=aT;break;default:this.tState=Cc;var u=this.numberReviver(this.string);if(u)return u;this.offset+=this.string.length-1,this.string=void 0,r--;break}else if(this.tState===VD)if(t[r]===114)this.tState=HD;else return this.charError(t,r);else if(this.tState===HD)if(t[r]===117)this.tState=kD;else return this.charError(t,r);else if(this.tState===kD)if(t[r]===101)this.tState=Cc,this.onToken(qM,!0),this.offset+=3;else return this.charError(t,r);else if(this.tState===QD)if(t[r]===97)this.tState=GD;else return this.charError(t,r);else if(this.tState===GD)if(t[r]===108)this.tState=zD;else return this.charError(t,r);else if(this.tState===zD)if(t[r]===115)this.tState=WD;else return this.charError(t,r);else if(this.tState===WD)if(t[r]===101)this.tState=Cc,this.onToken(VM,!1),this.offset+=4;else return this.charError(t,r);else if(this.tState===XD)if(t[r]===117)this.tState=KD;else return this.charError(t,r);else if(this.tState===KD)if(t[r]===108)this.tState=JD;else return this.charError(t,r);else if(this.tState===JD)if(t[r]===108)this.tState=Cc,this.onToken(HM,null),this.offset+=3;else return this.charError(t,r)};da.onToken=function(t,e){};da.parseError=function(t,e){this.tState=QM,this.onError(new Error("Unexpected "+Ku.toknam(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+Ku.toknam(this.state)))};da.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})};da.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=_d)};da.emit=function(t){this.mode&&(this.state=Ub),this.onValue(t)};da.onValue=function(t){};da.onToken=function(t,e){if(this.state===_d)if(t===qb||t===kM||t===qM||t===VM||t===HM)this.value&&(this.value[this.key]=e),this.emit(e);else if(t===$M)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=sT,this.mode=Yy;else if(t===UM)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=Zy,this.state=_d;else if(t===ob)if(this.mode===Yy)this.pop();else return this.parseError(t,e);else if(t===vO)if(this.mode===Zy)this.pop();else return this.parseError(t,e);else return this.parseError(t,e);else if(this.state===sT)if(t===qb)this.key=e,this.state=ub;else if(t===ob)this.pop();else return this.parseError(t,e);else if(this.state===ub)if(t===ub)this.state=_d;else return this.parseError(t,e);else if(this.state===Ub)if(t===Ub)this.mode===Zy?(this.key++,this.state=_d):this.mode===Yy&&(this.state=sT);else if(t===vO&&this.mode===Zy||t===ob&&this.mode===Yy)this.pop();else return this.parseError(t,e);else return this.parseError(t,e)};da.numberReviver=function(t){var e=Number(t);if(isNaN(e))return this.charError(buffer,i);t.match(/[0-9]+/)==t&&e.toString()!=t?this.onToken(qb,t):this.onToken(kM,e)};Ku.C=Nt;var GM=Ku;Object.defineProperty(vm,"__esModule",{value:!0});vm.SparqlJsonParser=void 0;const mre=ft,vre=Xt,rN=GM;class wre{constructor(e){var r;e=e||{},this.dataFactory=e.dataFactory||new mre.DataFactory,this.prefixVariableQuestionMark=!!e.prefixVariableQuestionMark,this.suppressMissingStreamResultsError=(r=e.suppressMissingStreamResultsError)!==null&&r!==void 0?r:!0}parseJsonResults(e){return e.results.bindings.map(r=>this.parseJsonBindings(r))}parseJsonResultsStream(e){const r=u=>o.emit("error",u);e.on("error",r);const n=new rN;n.onError=r;let a=!1,s=!1;n.onValue=u=>{if(n.key==="vars"&&n.stack.length===2&&n.stack[1].key==="head")o.emit("variables",u.map(c=>this.dataFactory.variable(c))),a=!0;else if(n.key==="results"&&n.stack.length===1)s=!0;else if(typeof n.key=="number"&&n.stack.length===3&&n.stack[1].key==="results"&&n.stack[2].key==="bindings")try{o.push(this.parseJsonBindings(u))}catch(c){o.emit("error",c)}else n.key==="metadata"&&n.stack.length===1&&o.emit("metadata",u)};const o=e.on("end",u=>{!s&&!this.suppressMissingStreamResultsError?o.emit("error",new Error("No valid SPARQL query results were found.")):a||o.emit("variables",[])}).pipe(new vre.Transform({objectMode:!0,transform(u,c,l){n.write(u),l()}}));return o}parseJsonBindings(e){const r={};for(const n in e){const a=e[n];r[this.prefixVariableQuestionMark?"?"+n:n]=this.parseJsonValue(a)}return r}parseJsonValue(e){let r;switch(e.type){case"bnode":r=this.dataFactory.blankNode(e.value);break;case"literal":e["xml:lang"]?r=this.dataFactory.literal(e.value,e["xml:lang"]):e.datatype?r=this.dataFactory.literal(e.value,this.dataFactory.namedNode(e.datatype)):r=this.dataFactory.literal(e.value);break;case"typed-literal":r=this.dataFactory.literal(e.value,this.dataFactory.namedNode(e.datatype));break;case"triple":const n=e.value;if(!n||!n.subject||!n.predicate||!n.object)throw new Error("Invalid quoted triple: "+JSON.stringify(e));r=this.dataFactory.quad(this.parseJsonValue(n.subject),this.parseJsonValue(n.predicate),this.parseJsonValue(n.object));break;default:r=this.dataFactory.namedNode(e.value);break}return r}parseJsonBoolean(e){if("boolean"in e)return e.boolean;throw new Error("No valid ASK response was found.")}parseJsonBooleanStream(e){return new Promise((r,n)=>{const a=new rN;a.onError=n,a.onValue=s=>{a.key==="boolean"&&typeof s=="boolean"&&a.stack.length===1&&r(s)},e.on("error",n).on("data",s=>a.write(s)).on("end",()=>n(new Error("No valid ASK response was found.")))})}}vm.SparqlJsonParser=wre;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(vm,t)})(Ix);Object.defineProperty(fm,"__esModule",{value:!0});fm.Converter=void 0;const Sre=FM,Tre=Ix;class Es{constructor(e){e=e||{delimiter:"_"},e.prefixVariableQuestionMark=!1,this.delimiter=e.delimiter||"_",this.parser=new Tre.SparqlJsonParser(e),this.materializeRdfJsTerms=e.materializeRdfJsTerms}static addValueToTree(e,r,n,a,s,o){const u=r[0],c=a?a+o+u:u,l=s.singularizeVariables[c];if(r.length===1)l?e[u]||(e[u]=n):(e[u]||(e[u]=[]),e[u].push(n));else{let d;l?(e[u]||(e[u]={}),d=e[u]):(e[u]||(e[u]=[{}]),d=e[u][0]),Es.addValueToTree(d,r.slice(1),n,c,s,o)}}static mergeTrees(e,r){if(typeof e!=typeof r)throw new Error(`Two incompatible tree nodes were found: ${typeof e} and ${typeof r}`);if(Array.isArray(e)!==Array.isArray(r))throw new Error(`Two incompatible tree nodes were found: Array?${Array.isArray(e)} and Array?${Array.isArray(r)}`);if(typeof e=="object"&&typeof r=="object"){if(e.termType&&r.termType)return e.equals(r)?{valid:!0,result:e}:{valid:!1,result:e};if(Array.isArray(e)&&Array.isArray(r)){if(e.length>0){const n=[];let a=!1;for(const s of e){const o=Es.mergeTrees(s,r[0]);o.valid?(a=!0,n.push(o.result)):n.push(s)}if(a)return{valid:!0,result:n}}return{valid:!0,result:e.concat(r)}}else{const n={};for(const a in r)n[a]=r[a];for(const a in e)if(n[a]){const s=Es.mergeTrees(e[a],n[a]);if(s.valid)n[a]=s.result;else return{valid:!1,result:e}}else n[a]=e[a];return{valid:!0,result:n}}}else throw new Error(`Unmergable tree types: ${typeof e} and ${typeof r}`)}static materializeTree(e){if(e.termType)return(0,Sre.getTermRaw)(e);if(Array.isArray(e))return e.map(Es.materializeTree);{const r={};for(const n in e)r[n]=Es.materializeTree(e[n]);return r}}sparqlJsonResultsToTree(e,r){return this.bindingsToTree(this.parser.parseJsonResults(e),r||{singularizeVariables:{}})}bindingsToTree(e,r){const n=r&&r.singularizeVariables[""];let a=n?{}:[];for(const s of e){const o=n?{}:[{}];for(const u in s){const c=u.split(this.delimiter),l=s[u];Es.addValueToTree(n?o:o[0],c,l,"",r,this.delimiter)}a=Es.mergeTrees(a,o).result}return this.materializeRdfJsTerms&&(a=Es.materializeTree(a)),a}}fm.Converter=Es;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(fm,t)})(MM);Object.defineProperty(Ip,"__esModule",{value:!0});Ip.ActorQueryResultSerializeTree=void 0;const Ere=cs,Ore=Ut,Are=Je,xre=Xt,Rre=MM;class Dx extends Ere.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingsStreamToGraphQl(e,r,n){const a=Are.ActionContext.ensureActionContext(r);return new Promise((s,o)=>{const u=[],c=new Rre.Converter(n),l={singularizeVariables:a.get(Ore.KeysInitQuery.graphqlSingularizeVariables)||{}};e.on("error",o),e.on("data",d=>{u.push(Object.fromEntries([...d].map(([f,h])=>[f.value,h])))}),e.on("end",()=>{s(c.bindingsToTree(u,l))})})}async testHandleChecked(e){if(e.type!=="bindings")throw new Error("This actor can only handle bindings streams.");return!0}async runHandle(e,r){const n=new xre.Readable;n._read=()=>{};const a=e.bindingsStream;return a.on("error",s=>n.emit("error",s)),Dx.bindingsStreamToGraphQl(a,e.context,{materializeRdfJsTerms:!0}).then(s=>{n.push(JSON.stringify(s,null,"  ")),n.push(null)}).catch(s=>n.emit("error",s)),{data:n}}}Ip.ActorQueryResultSerializeTree=Dx;(function(t){var e=g&&g.__createBinding||(Object.create?function(s,o,u,c){c===void 0&&(c=u);var l=Object.getOwnPropertyDescriptor(o,u);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(s,c,l)}:function(s,o,u,c){c===void 0&&(c=u),s[c]=o[u]}),r=g&&g.__exportStar||function(s,o){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&e(o,s,u)};Object.defineProperty(t,"__esModule",{value:!0}),t.bindingsStreamToGraphQl=void 0;const n=Ip,{bindingsStreamToGraphQl:a}=n.ActorQueryResultSerializeTree;t.bindingsStreamToGraphQl=a,r(Ip,t)})(CM);var zM={},wm={},WM={},Sm={};Object.defineProperty(Sm,"__esModule",{value:!0});Sm.ActorContextPreprocess=void 0;const Ire=Je;class Pre extends Ire.Actor{constructor(e){super(e)}}Sm.ActorContextPreprocess=Pre;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Sm,t)})(WM);Object.defineProperty(wm,"__esModule",{value:!0});wm.ActorContextPreprocessSourceToDestination=void 0;const Dre=WM,t1=Ut;class Nre extends Dre.ActorContextPreprocess{constructor(e){super(e)}async test(e){return!0}async run(e){if(e.context.get(t1.KeysRdfResolveQuadPattern.sources)&&!e.context.get(t1.KeysRdfUpdateQuads.destination)){const r=e.context.get(t1.KeysRdfResolveQuadPattern.sources);if(r.length===1)return{context:e.context.set(t1.KeysRdfUpdateQuads.destination,r[0])}}return e}}wm.ActorContextPreprocessSourceToDestination=Nre;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(wm,t)})(zM);var XM={},Tm={};Object.defineProperty(Tm,"__esModule",{value:!0});Tm.MediatorAll=void 0;const jre=Je;class Cre extends jre.Mediator{constructor(e){super(e)}async mediate(e){const r=[];let n;try{n=this.publish(e)}catch{n=[]}for(const s of n)try{await s.reply,r.push(s.actor)}catch{}return(await Promise.all(r.map(s=>s.runObservable(e))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}}Tm.MediatorAll=Cre;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tm,t)})(XM);var R0={},I0={};Object.defineProperty(I0,"__esModule",{value:!0});I0.ActorHttpInvalidate=void 0;const Mre=Je;class Fre extends Mre.Actor{constructor(e){super(e)}}I0.ActorHttpInvalidate=Fre;var Em={};Object.defineProperty(Em,"__esModule",{value:!0});Em.ActorHttpInvalidateListenable=void 0;const Lre=I0;class Bre extends Lre.ActorHttpInvalidate{constructor(e){super(e),this.invalidateListeners=[],this.invalidateListeners=[]}addInvalidateListener(e){this.invalidateListeners.push(e)}async test(e){return!0}async run(e){for(const r of this.invalidateListeners)r(e);return{}}}Em.ActorHttpInvalidateListenable=Bre;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(I0,t),r(Em,t)})(R0);var KM={},Om={},JM={},Am={};Object.defineProperty(Am,"__esModule",{value:!0});Am.ActorHashBindings=void 0;const $re=Je;class Ure extends $re.Actor{constructor(e){super(e)}}Am.ActorHashBindings=Ure;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Am,t)})(JM);var qre=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((a,s,o)=>`${a}${o===0?"":","}${t(s===void 0||typeof s=="symbol"?null:s)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,a)=>{if(e[a]===void 0||typeof e[a]=="symbol")return n;const s=n.length===0?"":",";return`${n}${s}${t(a)}:${t(e[a])}`},"")}}`};Object.defineProperty(Om,"__esModule",{value:!0});Om.ActorHashBindingsSha1=void 0;const Vre=JM,Hre=H_,nN=Zt,kre=qre;class Qre extends Vre.ActorHashBindings{async test(e){if(!e.allowHashCollisions)throw new Error(`Actor ${this.name} can not provide hash functions without hash collisions`);return!0}async run(e){return{hashFunction:r=>(0,Hre.sha1)().update(kre(Object.fromEntries([...r].map(([n,a])=>[(0,nN.termToString)(n),(0,nN.termToString)(a)])))).digest("hex"),hashCollisions:!0}}}Om.ActorHashBindingsSha1=Qre;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Om,t)})(KM);var YM={},xm={},Rm={},Im={};Object.defineProperty(Im,"__esModule",{value:!0});Im.ActorRdfSerialize=void 0;const Gre=vl;class zre extends Gre.ActorAbstractMediaTyped{constructor(e){super(e)}}Im.ActorRdfSerialize=zre;var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0});Pm.ActorRdfSerializeFixedMediaTypes=void 0;const Wre=vl;class Xre extends Wre.ActorAbstractMediaTypedFixed{constructor(e){super(e)}async testHandleChecked(e){return!0}}Pm.ActorRdfSerializeFixedMediaTypes=Xre;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Im,t),r(Pm,t)})(Rm);const Zf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",eh="http://www.w3.org/2001/XMLSchema#",oT="http://www.w3.org/2000/10/swap/",Wn={xsd:{decimal:`${eh}decimal`,boolean:`${eh}boolean`,double:`${eh}double`,integer:`${eh}integer`,string:`${eh}string`},rdf:{type:`${Zf}type`,nil:`${Zf}nil`,first:`${Zf}first`,rest:`${Zf}rest`,langString:`${Zf}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${oT}reify#forSome`,forAll:`${oT}reify#forAll`},log:{implies:`${oT}log#implies`}};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let iN;var Kre=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:g):t=>(iN||(iN=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));const Jre=bH(Kre),{xsd:r1}=Wn,Yre=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,aN={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Zre=/[\x00-\x20<>\\"\{\}\|\^\`]/,ene={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},tne=/$0^/;class Nx{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const r in this)!(r in ene)&&this[r]instanceof RegExp&&(this[r]=tne)}else this._n3Mode=e.n3!==!1;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,a=n.length;for(;;){let u,c;for(;u=this._newline.exec(n);)this._comments&&(c=this._comment.exec(u[0]))&&s("comment",c[1],"",this._line,u[0].length),n=n.substr(u[0].length,n.length),a=n.length,this._line++;if(!u&&(u=this._whitespace.exec(n))&&(n=n.substr(u[0].length,n.length)),this._endOfFile.test(n))return r&&(this._comments&&(c=this._comment.exec(n))&&s("comment",c[1],"",this._line,n.length),n=null,s("eof","","",this._line,0)),this._input=n;const l=this._line,d=n[0];let f="",h="",p="",b=null,_=0,E=!1;switch(d){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){E=!0;break}}else{this._n3Mode&&(_=1,f="^");break}case"<":if(b=this._unescapedIri.exec(n))f="IRI",h=b[1];else if(b=this._iri.exec(n)){if(h=this._unescape(b[1]),h===null||Zre.test(h))return o(this);f="IRI"}else n.length>1&&n[1]==="<"?(f="<<",_=2):this._n3Mode&&n.length>1&&n[1]==="="&&(f="inverse",_=2,h=">");break;case">":n.length>1&&n[1]===">"&&(f=">>",_=2);break;case"_":((b=this._blank.exec(n))||r&&(b=this._blank.exec(`${n} `)))&&(f="blank",p="_",h=b[1]);break;case'"':if(b=this._simpleQuotedString.exec(n))h=b[1];else if({value:h,matchLength:_}=this._parseLiteral(n),h===null)return o(this);(b!==null||_!==0)&&(f="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(b=this._simpleApostropheString.exec(n))h=b[1];else if({value:h,matchLength:_}=this._parseLiteral(n),h===null)return o(this);(b!==null||_!==0)&&(f="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(b=this._variable.exec(n))&&(f="var",h=b[0]);break;case"@":this._previousMarker==="literal"&&(b=this._langcode.exec(n))?(f="langcode",h=b[1]):(b=this._keyword.exec(n))&&(f=b[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){f=".",_=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(b=this._number.exec(n)||r&&(b=this._number.exec(`${n} `)))&&(f="literal",h=b[0],p=typeof b[1]=="string"?r1.double:typeof b[2]=="string"?r1.decimal:r1.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(b=this._sparqlKeyword.exec(n))?f=b[0].toUpperCase():E=!0;break;case"f":case"t":(b=this._boolean.exec(n))?(f="literal",h=b[0],p=r1.boolean):E=!0;break;case"a":(b=this._shortPredicates.exec(n))?(f="abbreviation",h="a"):E=!0;break;case"=":this._n3Mode&&n.length>1&&(f="abbreviation",n[1]!==">"?(_=1,h="="):(_=2,h=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(_=1,f=d);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(f="{|",_=2):(f=d,_=1));break;case"|":n.length>=2&&n[1]==="}"&&(f="|}",_=2);break;default:E=!0}if(E&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(b=this._prefix.exec(n))?(f="prefix",h=b[1]||""):((b=this._prefixed.exec(n))||r&&(b=this._prefixed.exec(`${n} `)))&&(f="prefixed",p=b[1]||"",h=this._unescape(b[2]))),this._previousMarker==="^^")switch(f){case"prefixed":f="type";break;case"IRI":f="typeIRI";break;default:f=""}if(!f)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?o(this):this._input=n;const w=_||b[0].length,O=s(f,h,p,l,w);this.previousToken=O,this._previousMarker=f,n=n.substr(w,n.length)}function s(u,c,l,d,f){const h=n?a-n.length:a,p=h+f,b={type:u,value:c,prefix:l,line:d,start:h,end:p};return e(null,b),b}function o(u){e(u._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1;const n=e.replace(Yre,(a,s,o,u)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof o=="string"){let c=Number.parseInt(o,16);return c<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return u in aN?aN[u]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){const r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let a=Math.max(this._literalClosingPos,n);for(;(a=e.indexOf(r,a))>0;){let s=0;for(;e[a-s-1]==="\\";)s++;if(s%2===0){const o=e.substring(n,a),u=o.split(/\r\n|\r|\n/).length-1,c=a+n;if(n===1&&u!==0||n===3&&this._lineMode)break;return this._line+=u,{value:this._unescape(o),matchLength:c}}a++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")Jre(()=>this._tokenizeToEnd(r,!0));else{const n=[];let a;if(this._tokenizeToEnd((s,o)=>s?a=s:n.push(o),!0),a)throw a;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}}function rne(t){return!!t&&t.termType==="NamedNode"}function nne(t){return!!t&&t.termType==="BlankNode"}function ine(t){return!!t&&t.termType==="Literal"}function ane(t){return!!t&&t.termType==="Variable"}function ef(t){return!!t&&t.termType==="DefaultGraph"}function sne(t){return ef(t.graph)}function one(t,e){return ZM({"":t.value||t},e)("")}function ZM(t,e){const r=Object.create(null);for(const a in t)n(a,t[a]);e=e||Ff;function n(a,s){if(typeof s=="string"){const o=Object.create(null);r[a]=u=>o[u]||(o[u]=e.namedNode(s+u))}else if(!(a in r))throw new Error(`Unknown prefix: ${a}`);return r[a]}return n}const eF=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:sne,isBlankNode:nne,isDefaultGraph:ef,isLiteral:ine,isNamedNode:rne,isVariable:ane,prefix:one,prefixes:ZM},Symbol.toStringTag,{value:"Module"})),{rdf:une,xsd:Vc}=Wn;let P0,cne=0;const wO={namedNode:lne,blankNode:dne,variable:hne,literal:fne,defaultGraph:pne,quad:sN,triple:sN},Ff=wO;let eo=class tF{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof tF?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}};class Dm extends eo{get termType(){return"NamedNode"}}class Vu extends eo{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let r=e.lastIndexOf('"')+1;return r<e.length&&e[r++]==="@"?e.substr(r).toLowerCase():""}get datatype(){return new Dm(this.datatypeString)}get datatypeString(){const e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?Vc.string:une.langString}equals(e){return e instanceof Vu?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class jx extends eo{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}let Cx=class extends eo{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}};class Mx extends eo{constructor(){return super(""),P0||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}P0=new Mx;function zc(t,e,r){if(e=e||wO,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===wO)return new Vu(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),t[n+1]==="@"?t.substr(n+2):e.namedNode(t.substr(n+3)));case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(zc(t[0],e,!0),zc(t[1],e,!0),zc(t[2],e,!0),t[3]&&zc(t[3],e,!0))}function _i(t,e){if(typeof t=="string")return t;if(t instanceof eo&&t.termType!=="Quad")return t.id;if(!t)return P0.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==Vc.string?`^^${t.datatype.value}`:""}`;case"Quad":const r=[_i(t.subject,!0),_i(t.predicate,!0),_i(t.object,!0)];return ef(t.graph)||r.push(_i(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}class Pp extends eo{constructor(e,r,n,a){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=a||P0}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function lne(t){return new Dm(t)}function dne(t){return new jx(t||`n3-${cne++}`)}function fne(t,e){if(typeof e=="string")return new Vu(`"${t}"@${e.toLowerCase()}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=Vc.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?Vc.integer:Vc.double:(r=Vc.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===Vc.string?new Vu(`"${t}"`):new Vu(`"${t}"^^${r}`)}function hne(t){return new Cx(t)}function pne(){return P0}function sN(t,e,r,n){return new Pp(t,e,r,n)}let oN=0;class Nm{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&rF(this,e.factory);const r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),a=/trig/.test(r),s=/triple/.test(r),o=/quad/.test(r),u=this._n3Mode=/n3/.test(r),c=s||o;(this._supportsNamedGraphs=!(n||u))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||a||s||u),this._supportsRDFStar=r===""||/star|\*$/.test(r),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new Nx({lineMode:c,n3:u}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){oN=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,a,s){const o=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:a,object:s,graph:r,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":const a=this._resolveIRI(e.value);if(a===null)return this._error("Invalid IRI",e);n=this._namedNode(a);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(s===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._namedNode(s+e.value);break;case"blank":n=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,a=this._readListItem;const s=this._subject,o=this._contextStack,u=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=r=this._blankNode()),a=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(a=this._readPredicate,this._subject===this.RDF_NIL)return a}else if(a=this._getContextEndReader(),this._object===this.RDF_NIL)return a;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,a=this._readListItemDataTypeOrLang):(r=this._literal(e.value,this._namedNode(e.prefix)),a=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._blankNode()),s===null?u.predicate===null?u.subject=n:u.object=n:this._emit(s,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return a}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let r=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(n===void 0)return;r=this._literal(this._literalValue,n),e=null;break;case"langcode":r=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:r}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){const n=this._completeLiteral(e);if(n)return this._object=n.literal,r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph;const a=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);const o=this._predicate,u=this._object;this._subject=this._quad(a,o,u,this.DEFAULTGRAPH),r=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(a!==null){const o=this._predicate,u=this._object;s?this._emit(u,o,a,n):this._emit(a,o,u,n)}return r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){const r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const a=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,a,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n;const a=this._blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=a):(r=this._object,this._object=a),this._emit(r,n,a,this._graph),this._readPath}_readBackwardPath(e){const r=this._blankNode();let n,a;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(a=this._subject,this._subject=r):(a=this._object,this._object=r),this._emit(r,n,a,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const r=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,r,n,a){this._callback(null,this._quad(e,r,n,a||this.DEFAULTGRAPH))}_error(e,r){const n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=uT}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const r=e.length;let n="",a=-1,s=-1,o=0,u="/";for(;a<r;){switch(u){case":":if(s<0&&e[++a]==="/"&&e[++a]==="/")for(;(s=a+1)<r&&e[s]!=="/";)a=s;break;case"?":case"#":a=r;break;case"/":if(e[a+1]===".")switch(u=e[++a+1],u){case"/":n+=e.substring(o,a-1),o=a+1;break;case void 0:case"?":case"#":return n+e.substring(o,a)+e.substr(a+1);case".":if(u=e[++a+1],u===void 0||u==="/"||u==="?"||u==="#"){if(n+=e.substring(o,a-2),(o=n.lastIndexOf("/"))>=s&&(n=n.substr(0,o)),u!=="/")return`${n}/${e.substr(a+1)}`;o=a+1}}}u=e[++a]}return n+e.substring(o)}parse(e,r,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${oN++}_`,this._prefixCallback=n||uT,this._inversePredicate=!1,this._quantified=Object.create(null),!r){const a=[];let s;if(this._callback=(o,u)=>{o?s=o:u&&a.push(u)},this._lexer.tokenize(e).every(o=>this._readCallback=this._readCallback(o)),s)throw s;return a}this._callback=r,this._lexer.tokenize(e,(a,s)=>{a!==null?(this._callback(a),this._callback=uT):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function uT(){}function rF(t,e){const r=e.namedNode;t._namedNode=r,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=r(Wn.rdf.first),t.RDF_REST=r(Wn.rdf.rest),t.RDF_NIL=r(Wn.rdf.nil),t.N3_FORALL=r(Wn.r.forAll),t.N3_FORSOME=r(Wn.r.forSome),t.ABBREVIATIONS={a:r(Wn.rdf.type),"=":r(Wn.owl.sameAs),">":r(Wn.log.implies)},t.QUANTIFIERS_GRAPH=r("urn:n3:quantifiers")}rF(Nm.prototype,Ff);const th=Ff.defaultGraph(),{rdf:yne,xsd:Wl}=Wn,uN=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,cN=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,bne={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class rh extends eo{equals(e){return e===this}}class Fx{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(a,s,o){n+=a,o&&o()},end:a=>{a&&a(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=th,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseMatcher=new RegExp(`^${dN(r.baseIRI)}${r.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=r.baseIRI.length))}get _inDefaultGraph(){return th.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,a,s){try{a.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(th.equals(a)?"":`${this._encodeIriOrBlank(a)} {
`)),this._graph=a,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,s):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,s):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,s)}catch(o){s&&s(o)}}_writeQuadLine(e,r,n,a,s){delete this._prefixMatch,this._write(this.quadToString(e,r,n,a),s)}quadToString(e,r,n,a){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${a&&a.value?` ${this._encodeIriOrBlank(a)} .
`:` .
`}`}quadsToString(e){return e.map(r=>this.quadToString(r.subject,r.predicate,r.object,r.graph)).join("")}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseMatcher&&this._baseMatcher.test(r)&&(r=r.substr(this._baseLength)),uN.test(r)&&(r=r.replace(cN,lN));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;if(uN.test(r)&&(r=r.replace(cN,lN)),e.language)return`"${r}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Wl.string)return`"${r}"`}else switch(e.datatype.value){case Wl.string:return`"${r}"`;case Wl.boolean:if(r==="true"||r==="false")return r;break;case Wl.integer:if(/^[+-]?\d+$/.test(r))return r;break;case Wl.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case Wl.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===yne.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:a}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${ef(a)?"":` ${this._encodeIriOrBlank(a)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,a,s){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof a=="function"?this._writeQuad(e,r,n,th,a):this._writeQuad(e,r,n,a||th,s)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){const a={};a[e]=r,this.addPrefixes(a,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let a in e){let s=e[a];typeof s!="string"&&(s=s.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[s]=a+=":",this._write(`@prefix ${a} <${s}>.
`)}if(n){let a="",s="";for(const o in this._prefixIRIs)a+=a?`|${o}`:o,s+=(s?"|":"")+this._prefixIRIs[o];a=dN(a),this._prefixRegex=new RegExp(`^(?:${s})[^/]*$|^(${a})([_a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,a,s;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),s=n.length){case 0:return new rh("[]");case 1:if(a=n[0],!(a.object instanceof rh))return new rh(`[ ${this._encodePredicate(a.predicate)} ${this._encodeObject(a.object)} ]`);default:let o="[";for(let u=0;u<s;u++)a=n[u],a.predicate.equals(e)?o+=`, ${this._encodeObject(a.object)}`:(o+=`${(u?`;
  `:`
  `)+this._encodePredicate(a.predicate)} ${this._encodeObject(a.object)}`,e=a.predicate);return new rh(`${o}
]`)}}list(e){const r=e&&e.length||0,n=new Array(r);for(let a=0;a<r;a++)n[a]=this._encodeObject(e[a]);return new rh(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,a)=>{r=null,e(n,a)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}}function lN(t){let e=bne[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}function dN(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}class Lx{constructor(e,r){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._entities=Object.create(null),this._blankNodeIndex=0,!r&&e&&!e[0]&&(r=e,e=null),r=r||{},this._factory=r.factory||Ff,e&&this.addQuads(e)}_termFromId(e,r){if(e[0]==="."){const n=this._entities,a=e.split(".");return this._factory.quad(this._termFromId(n[a[1]]),this._termFromId(n[a[2]]),this._termFromId(n[a[3]]),a[4]&&this._termFromId(n[a[4]]))}return zc(e,r)}_termToNumericId(e){if(e.termType==="Quad"){const r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),a=this._termToNumericId(e.object);let s;return r&&n&&a&&(ef(e.graph)||(s=this._termToNumericId(e.graph)))&&this._ids[s?`.${r}.${n}.${a}.${s}`:`.${r}.${n}.${a}`]}return this._ids[_i(e)]}_termToNewNumericId(e){const r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${ef(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:_i(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}get size(){let e=this._size;if(e!==null)return e;e=0;const r=this._graphs;let n,a;for(const s in r)for(const o in n=r[s].subjects)for(const u in a=n[o])e+=Object.keys(a[u]).length;return this._size=e}_addToIndex(e,r,n,a){const s=e[r]||(e[r]={}),o=s[n]||(s[n]={}),u=a in o;return u||(o[a]=null),!u}_removeFromIndex(e,r,n,a){const s=e[r],o=s[n];delete o[a];for(const u in o)return;delete s[n];for(const u in s)return;delete e[r]}*_findInIndex(e,r,n,a,s,o,u,c){let l,d,f;const h=this._entities,p=this._termFromId(c,this._factory),b={subject:null,predicate:null,object:null};r&&((l=e,e={})[r]=l[r]);for(const _ in e)if(d=e[_]){b[s]=this._termFromId(h[_],this._factory),n&&((l=d,d={})[n]=l[n]);for(const E in d)if(f=d[E]){b[o]=this._termFromId(h[E],this._factory);const w=a?a in f?[a]:[]:Object.keys(f);for(let O=0;O<w.length;O++)b[u]=this._termFromId(h[w[O]],this._factory),yield this._factory.quad(b.subject,b.predicate,b.object,p)}}}_loop(e,r){for(const n in e)r(n)}_loopByKey0(e,r,n){let a,s;if(a=e[r])for(s in a)n(s)}_loopByKey1(e,r,n){let a,s;for(a in e)s=e[a],s[r]&&n(a)}_loopBy2Keys(e,r,n,a){let s,o,u;if((s=e[r])&&(o=s[n]))for(u in o)a(u)}_countInIndex(e,r,n,a){let s=0,o,u,c;r&&((o=e,e={})[r]=o[r]);for(const l in e)if(u=e[l]){n&&((o=u,u={})[n]=o[n]);for(const d in u)(c=u[d])&&(a?a in c&&s++:s+=Object.keys(c).length)}return s}_getGraphs(e){if(!_ne(e))return this._graphs;const r={};return r[e]=this._graphs[e],r}_uniqueEntities(e){const r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,a){r||(a=e.graph,n=e.object,r=e.predicate,e=e.subject),a=_i(a);let s=this._graphs[a];s||(s=this._graphs[a]={subjects:{},predicates:{},objects:{}},Object.freeze(s)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n);const o=this._addToIndex(s.subjects,e,r,n);return this._addToIndex(s.predicates,r,n,e),this._addToIndex(s.objects,n,e,r),this._size=null,o}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,a){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:a}=e),!this.readQuads(e,r,n,a).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,a){r||(a=e.graph,n=e.object,r=e.predicate,e=e.subject),a=_i(a);const s=this._graphs;let o,u,c;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(o=s[a])||!(u=o.subjects[e])||!(c=u[r])||!(n in c))return!1;this._removeFromIndex(o.subjects,e,r,n),this._removeFromIndex(o.predicates,r,n,e),this._removeFromIndex(o.objects,n,e,r),this._size!==null&&this._size--;for(e in o.subjects)return!0;return delete s[a],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,a){const s=new Xt.Readable({objectMode:!0});return s._read=()=>{for(const o of this.readQuads(e,r,n,a))s.push(o);s.push(null)},this.remove(s)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,a){return[...this.readQuads(e,r,n,a)]}*readQuads(e,r,n,a){a=a&&_i(a);const s=this._getGraphs(a);let o,u,c,l;if(!(e&&!(u=this._termToNumericId(e))||r&&!(c=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n))))for(const d in s)(o=s[d])&&(u?l?yield*this._findInIndex(o.objects,l,u,c,"object","subject","predicate",d):yield*this._findInIndex(o.subjects,u,c,null,"subject","predicate","object",d):c?yield*this._findInIndex(o.predicates,c,l,null,"predicate","object","subject",d):l?yield*this._findInIndex(o.objects,l,null,null,"object","subject","predicate",d):yield*this._findInIndex(o.subjects,null,null,null,"subject","predicate","object",d))}match(e,r,n,a){return new Bx(this,e,r,n,a)}countQuads(e,r,n,a){a=a&&_i(a);const s=this._getGraphs(a);let o=0,u,c,l,d;if(e&&!(c=this._termToNumericId(e))||r&&!(l=this._termToNumericId(r))||n&&!(d=this._termToNumericId(n)))return 0;for(const f in s)(u=s[f])&&(e?n?o+=this._countInIndex(u.objects,d,c,l):o+=this._countInIndex(u.subjects,c,l,d):r?o+=this._countInIndex(u.predicates,l,d,c):o+=this._countInIndex(u.objects,d,c,l));return o}forEach(e,r,n,a,s){this.some(o=>(e(o),!1),r,n,a,s)}every(e,r,n,a,s){let o=!1;const u=!this.some(c=>(o=!0,!e(c)),r,n,a,s);return o&&u}some(e,r,n,a,s){for(const o of this.readQuads(r,n,a,s))if(e(o))return!0;return!1}getSubjects(e,r,n){const a=[];return this.forSubjects(s=>{a.push(s)},e,r,n),a}forSubjects(e,r,n,a){a=a&&_i(a);const s=this._getGraphs(a);let o,u,c;if(e=this._uniqueEntities(e),!(r&&!(u=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(a in s)(o=s[a])&&(u?c?this._loopBy2Keys(o.predicates,u,c,e):this._loopByKey1(o.subjects,u,e):c?this._loopByKey0(o.objects,c,e):this._loop(o.subjects,e))}getPredicates(e,r,n){const a=[];return this.forPredicates(s=>{a.push(s)},e,r,n),a}forPredicates(e,r,n,a){a=a&&_i(a);const s=this._getGraphs(a);let o,u,c;if(e=this._uniqueEntities(e),!(r&&!(u=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(a in s)(o=s[a])&&(u?c?this._loopBy2Keys(o.objects,c,u,e):this._loopByKey0(o.subjects,u,e):c?this._loopByKey1(o.predicates,c,e):this._loop(o.predicates,e))}getObjects(e,r,n){const a=[];return this.forObjects(s=>{a.push(s)},e,r,n),a}forObjects(e,r,n,a){a=a&&_i(a);const s=this._getGraphs(a);let o,u,c;if(e=this._uniqueEntities(e),!(r&&!(u=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(a in s)(o=s[a])&&(u?c?this._loopBy2Keys(o.subjects,u,c,e):this._loopByKey1(o.objects,u,e):c?this._loopByKey0(o.predicates,c,e):this._loop(o.objects,e))}getGraphs(e,r,n){const a=[];return this.forGraphs(s=>{a.push(s)},e,r,n),a}forGraphs(e,r,n,a){for(const s in this._graphs)this.some(o=>(e(o.graph),!0),r,n,a,s)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){const n={},a=r?()=>!0:(u,c)=>{throw new Error(`${u.value} ${c}`)},s=this.getQuads(null,Wn.rdf.rest,Wn.rdf.nil,null),o=e?[...s]:[];return s.forEach(u=>{const c=[];let l=!1,d,f;const h=u.graph;let p=u.subject;for(;p&&!l;){const b=this.getQuads(null,null,p,null),_=this.getQuads(p,null,null,null);let E,w=null,O=null,A=null;for(let T=0;T<_.length&&!l;T++)E=_[T],E.graph.equals(h)?d?l=a(p,"has non-list arcs out"):E.predicate.value===Wn.rdf.first?w?l=a(p,"has multiple rdf:first arcs"):o.push(w=E):E.predicate.value===Wn.rdf.rest?O?l=a(p,"has multiple rdf:rest arcs"):o.push(O=E):b.length?l=a(p,"can't be subject and object"):(d=E,f="subject"):l=a(p,"not confined to single graph");for(let T=0;T<b.length&&!l;++T)E=b[T],d?l=a(p,"can't have coreferences"):E.predicate.value===Wn.rdf.rest?A?l=a(p,"has incoming rdf:rest arcs"):A=E:(d=E,f="object");w?c.unshift(w.object):l=a(p,"has no list head"),p=A&&A.subject}l?e=!1:d&&(n[d[f].value]=c)}),e&&this.removeQuads(o),n}*[Symbol.iterator](){yield*this.readQuads()}}function _ne(t){return typeof t=="string"||t instanceof String}class Bx extends Xt.Readable{constructor(e,r,n,a,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:a,graph:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:r,object:n,predicate:a,subject:s}=this,o=this._filtered=new Lx({factory:e._factory});for(const u of e.readQuads(s,a,n,r))o.addQuad(u)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,a){return new Bx(this.filtered,e,r,n,a)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class nF extends Xt.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const r=new Nm(e);let n,a;r.parse({on:(s,o)=>{switch(s){case"data":n=o;break;case"end":a=o;break}}},(s,o)=>{s&&this.emit("error",s)||o&&this.push(o)},(s,o)=>{this.emit("prefix",s,o)}),this._transform=(s,o,u)=>{n(s),u()},this._flush=s=>{a(),s()}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),this}}class iF extends Xt.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const r=this._writer=new Fx({write:(n,a,s)=>{this.push(n),s&&s()},end:n=>{this.push(null),n&&n()}},e);this._transform=(n,a,s)=>{r.addQuad(n,s)},this._flush=n=>{r.end(n)}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),e.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}}const gne={Lexer:Nx,Parser:Nm,Writer:Fx,Store:Lx,StreamParser:nF,StreamWriter:iF,Util:eF,DataFactory:Ff,Term:eo,NamedNode:Dm,Literal:Vu,BlankNode:jx,Variable:Cx,DefaultGraph:Mx,Quad:Pp,Triple:Pp,termFromId:zc,termToId:_i},mne=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:jx,DataFactory:Ff,DefaultGraph:Mx,Lexer:Nx,Literal:Vu,NamedNode:Dm,Parser:Nm,Quad:Pp,Store:Lx,StreamParser:nF,StreamWriter:iF,Term:eo,Triple:Pp,Util:eF,Variable:Cx,Writer:Fx,default:gne,termFromId:zc,termToId:_i},Symbol.toStringTag,{value:"Module"})),tu=h_(mne);Object.defineProperty(xm,"__esModule",{value:!0});xm.ActorRdfSerializeN3=void 0;const vne=Rm,wne=tu;class Sne extends vne.ActorRdfSerializeFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){const a=new wne.StreamWriter({format:r});let s;return"pipe"in e.quadStream?(e.quadStream.on("error",o=>a.emit("error",o)),s=e.quadStream.pipe(a)):s=a.import(e.quadStream),{data:s,triples:r==="text/turtle"||r==="application/n-triples"||r==="text/n3"}}}xm.ActorRdfSerializeN3=Sne;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(xm,t)})(YM);var aF={},jm={},sF={},Cm={},Mm={};Object.defineProperty(Mm,"__esModule",{value:!0});Mm.SeparatorType=void 0;class Yr{constructor(e){this.label=e}}Mm.SeparatorType=Yr;Yr.COMMA=new Yr(",");Yr.OBJECT_START=new Yr("{");Yr.OBJECT_END=new Yr("}");Yr.OBJECT_END_COMMA=new Yr("},");Yr.ARRAY_START=new Yr("[");Yr.ARRAY_END=new Yr("]");Yr.ARRAY_END_COMMA=new Yr("],");Yr.GRAPH_FIELD_NONCOMPACT=new Yr('"@graph": [');Yr.GRAPH_FIELD_COMPACT=new Yr('"@graph":[');Yr.CONTEXT_FIELD=new Yr('"@context":');var D0={};Object.defineProperty(D0,"__esModule",{value:!0});D0.Util=void 0;const fN=pn;let Ks=class yu{static termToValue(e,r,n={compactIds:!1,useNativeTypes:!1}){switch(e.termType){case"NamedNode":const a=r.compactIri(e.value,n.vocab);return n.compactIds?a:{"@id":a};case"DefaultGraph":return n.compactIds?e.value:{"@id":e.value};case"BlankNode":const s=`_:${e.value}`;return n.compactIds?s:{"@id":s};case"Literal":if(e.datatype.value===yu.RDF_JSON){let c;try{c=JSON.parse(e.value)}catch(l){throw new fN.ErrorCoded("Invalid JSON literal: "+l.message,fN.ERROR_CODES.INVALID_JSON_LITERAL)}return{"@value":c,"@type":"@json"}}if(n.rdfDirection==="i18n-datatype"&&e.datatype.value.startsWith(yu.I18N)){const[c,l]=e.datatype.value.substr(yu.I18N.length,e.datatype.value.length).split("_");return Object.assign(Object.assign({"@value":e.value},c?{"@language":c}:{}),l?{"@direction":l}:{})}const o=e.datatype.value===yu.XSD_STRING,u={"@value":!o&&n.useNativeTypes?yu.stringToNativeType(e.value,e.datatype.value):e.value};return e.language?Object.assign(Object.assign({},u),{"@language":e.language}):!o&&typeof u["@value"]=="string"?Object.assign(Object.assign({},u),{"@type":e.datatype.value}):u}}static stringToNativeType(e,r){if(r.startsWith(yu.XSD))switch(r.substr(yu.XSD.length)){case"boolean":if(e==="true")return!0;if(e==="false")return!1;throw new Error(`Invalid xsd:boolean value '${e}'`);case"integer":case"number":case"int":case"byte":case"long":const a=parseInt(e,10);if(isNaN(a))throw new Error(`Invalid xsd:integer value '${e}'`);return a;case"float":case"double":const s=parseFloat(e);if(isNaN(s))throw new Error(`Invalid xsd:float value '${e}'`);return s}return e}};D0.Util=Ks;Ks.XSD="http://www.w3.org/2001/XMLSchema#";Ks.XSD_STRING=Ks.XSD+"string";Ks.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";Ks.RDF_TYPE=Ks.RDF+"type";Ks.RDF_JSON=Ks.RDF+"JSON";Ks.I18N="https://www.w3.org/ns/i18n#";Object.defineProperty(Cm,"__esModule",{value:!0});Cm.JsonLdSerializer=void 0;const hN=pn,Qr=Mm,cT=D0,pN=Xt;class $x extends pN.Transform{constructor(e={}){super({objectMode:!0}),this.indentation=0,this.options=e,this.options.baseIRI&&!this.options.context&&(this.options.context={"@base":this.options.baseIRI}),this.options.context?(this.originalContext=this.options.context,this.context=new hN.ContextParser().parse(this.options.context,{baseIRI:this.options.baseIRI})):this.context=Promise.resolve(new hN.JsonLdContextNormalized({}))}import(e){const r=new pN.PassThrough({objectMode:!0});e.on("error",a=>n.emit("error",a)),e.on("data",a=>r.push(a)),e.on("end",()=>r.push(null));const n=r.pipe(new $x(this.options));return n}_transform(e,r,n){this.context.then(a=>{this.transformQuad(e,a),n()}).catch(n)}async list(e){const r=await this.context;return{"@list":e.map(n=>cT.Util.termToValue(n,r,this.options))}}_flush(e){return this.opened||this.pushDocumentStart(),this.lastPredicate&&this.endPredicate(),this.lastSubject&&this.endSubject(),this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.endGraph(),this.endDocument(),e(null,null)}transformQuad(e,r){this.opened||this.pushDocumentStart();const n=this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.lastGraph.equals(e.subject);if(!n&&(!this.lastGraph||!e.graph.equals(this.lastGraph))){let a=e.graph.termType!=="DefaultGraph"&&this.lastSubject&&this.lastSubject.equals(e.graph);this.lastGraph&&(this.lastGraph.termType!=="DefaultGraph"?(this.endPredicate(),this.endSubject(),this.endGraph(!0),a=!1):a?(this.endPredicate(!0),this.lastSubject=null):(this.endPredicate(),this.endSubject(!0))),e.graph.termType!=="DefaultGraph"&&(a||this.pushId(e.graph,!0,r),this.pushSeparator(this.options.space?Qr.SeparatorType.GRAPH_FIELD_NONCOMPACT:Qr.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++),this.lastGraph=e.graph}(!this.lastSubject||!e.subject.equals(this.lastSubject))&&(n?(this.endPredicate(),this.endSubject(),this.indentation--,this.pushSeparator(Qr.SeparatorType.ARRAY_END_COMMA),this.lastGraph=e.graph):(this.lastSubject&&(this.endPredicate(),this.endSubject(!0)),this.pushId(e.subject,!0,r)),this.lastSubject=e.subject),(!this.lastPredicate||!e.predicate.equals(this.lastPredicate))&&(this.lastPredicate&&this.endPredicate(!0),this.pushPredicate(e.predicate,r)),this.pushObject(e.object,r)}pushDocumentStart(){this.opened=!0,this.originalContext&&!this.options.excludeContext?(this.pushSeparator(Qr.SeparatorType.OBJECT_START),this.indentation++,this.pushSeparator(Qr.SeparatorType.CONTEXT_FIELD),this.pushIndented(JSON.stringify(this.originalContext,null,this.options.space)+","),this.pushSeparator(this.options.space?Qr.SeparatorType.GRAPH_FIELD_NONCOMPACT:Qr.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++):(this.pushSeparator(Qr.SeparatorType.ARRAY_START),this.indentation++)}pushId(e,r,n){if(e.termType==="Quad")this.pushNestedQuad(e,!0,n);else{const a=e.termType==="BlankNode"?"_:"+e.value:n.compactIri(e.value,!1);r?this.pushSeparator(Qr.SeparatorType.OBJECT_START):(this.push(Qr.SeparatorType.OBJECT_START.label),this.options.space&&this.push(`
`)),this.indentation++,this.pushIndented(this.options.space?`"@id": "${a}",`:`"@id":"${a}",`)}}pushPredicate(e,r){let n=e.value;!this.options.useRdfType&&n===cT.Util.RDF_TYPE&&(n="@type",this.objectOptions=Object.assign(Object.assign({},this.options),{compactIds:!0,vocab:!0}));const a=r.compactIri(n,!0);this.pushIndented(this.options.space?`"${a}": [`:`"${a}":[`),this.indentation++,this.lastPredicate=e}pushObject(e,r){if(this.hadObjectForPredicate?this.pushSeparator(Qr.SeparatorType.COMMA):this.hadObjectForPredicate=!0,e.termType==="Quad"){const a=this.lastSubject,s=this.lastPredicate;this.hadObjectForPredicate=!1,this.pushNestedQuad(e,!1,r),this.endSubject(!1),this.hadObjectForPredicate=!0,this.lastPredicate=s,this.lastSubject=a;return}let n;try{e["@list"]?n=e:n=cT.Util.termToValue(e,r,this.objectOptions||this.options)}catch(a){return this.emit("error",a)}this.pushIndented(JSON.stringify(n,null,this.options.space))}pushNestedQuad(e,r,n){this.pushSeparator(Qr.SeparatorType.OBJECT_START),this.indentation++,this.pushIndented(this.options.space?'"@id": ':'"@id":',!1),e.graph.termType!=="DefaultGraph"&&this.emit("error",new Error(`Found a nested quad with the non-default graph: ${e.graph.value}`)),this.pushId(e.subject,!1,n),this.pushPredicate(e.predicate,n),this.pushObject(e.object,n),this.endPredicate(!1),this.endSubject(r)}endDocument(){this.opened=!1,this.originalContext&&!this.options.excludeContext?(this.indentation--,this.pushSeparator(Qr.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(Qr.SeparatorType.OBJECT_END)):(this.indentation--,this.pushSeparator(Qr.SeparatorType.ARRAY_END))}endPredicate(e){this.indentation--,this.pushSeparator(e?Qr.SeparatorType.ARRAY_END_COMMA:Qr.SeparatorType.ARRAY_END),this.hadObjectForPredicate=!1,this.objectOptions=null,this.lastPredicate=null}endSubject(e){this.indentation--,this.pushSeparator(e?Qr.SeparatorType.OBJECT_END_COMMA:Qr.SeparatorType.OBJECT_END),this.lastSubject=null}endGraph(e){this.indentation--,this.pushSeparator(Qr.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(e?Qr.SeparatorType.OBJECT_END_COMMA:Qr.SeparatorType.OBJECT_END),this.lastGraph=null}pushSeparator(e){this.pushIndented(e.label)}pushIndented(e,r=!0){const n=this.getIndentPrefix(),a=e.split(`
`).map(s=>n+s).join(`
`);this.push(a),this.options.space&&r&&this.push(`
`)}getIndentPrefix(){return this.options.space?this.options.space.repeat(this.indentation):""}}Cm.JsonLdSerializer=$x;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Cm,t),r(D0,t)})(sF);Object.defineProperty(jm,"__esModule",{value:!0});jm.ActorRdfSerializeJsonLd=void 0;const Tne=Rm,Ene=sF;class One extends Tne.ActorRdfSerializeFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){const a=new Ene.JsonLdSerializer({space:" ".repeat(this.jsonStringifyIndentSpaces)});let s;return"pipe"in e.quadStream?(e.quadStream.on("error",o=>a.emit("error",o)),s=e.quadStream.pipe(a)):s=a.import(e.quadStream),{data:s}}}jm.ActorRdfSerializeJsonLd=One;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(jm,t)})(aF);var oF={},Fm={},Ux={};Object.defineProperty(Ux,"__esModule",{value:!0});function Ane(t,e){return new Promise((r,n)=>{t.on("end",()=>r(e)),t.on("error",n)})}function xne(t){const e=[];return Ane(t.on("data",r=>e.push(r)),e)}Ux.default=xne;var Lm={},qx={},uF={},Bm={};Object.defineProperty(Bm,"__esModule",{value:!0});Bm.fragment=void 0;function Rne(t){let e=t;(e.endsWith("/")||e.endsWith("#"))&&(e=e.slice(0,e.length-1));const r=[];e.lastIndexOf("/")>0&&r.push(e.lastIndexOf("/")),e.lastIndexOf("#")>0&&r.push(e.lastIndexOf("#"));const n=Math.max(...r);return e.slice(n+1)}function Ine(t){var e;const r=(e=t.split(/[^a-z0-9]+/ig).filter(n=>n!=="").map(n=>n[0].toUpperCase()+n.slice(1)).join("").match(/[a-z][a-z0-9]+/ig))===null||e===void 0?void 0:e[0];return typeof r>"u"?void 0:r[0].toLowerCase()+r.slice(1)}function Pne(t){let e=Rne(t);return e=e?Ine(e):void 0,e||"v"}Bm.fragment=Pne;var SO={},$m={},Ju={},TO={exports:{}};(function(t,e){var r=typeof self<"u"?self:g,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var u={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function c($){return $&&DataView.prototype.isPrototypeOf($)}if(u.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function($){return $&&l.indexOf(Object.prototype.toString.call($))>-1};function f($){if(typeof $!="string"&&($=String($)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test($))throw new TypeError("Invalid character in header field name");return $.toLowerCase()}function h($){return typeof $!="string"&&($=String($)),$}function p($){var C={next:function(){var Q=$.shift();return{done:Q===void 0,value:Q}}};return u.iterable&&(C[Symbol.iterator]=function(){return C}),C}function b($){this.map={},$ instanceof b?$.forEach(function(C,Q){this.append(Q,C)},this):Array.isArray($)?$.forEach(function(C){this.append(C[0],C[1])},this):$&&Object.getOwnPropertyNames($).forEach(function(C){this.append(C,$[C])},this)}b.prototype.append=function($,C){$=f($),C=h(C);var Q=this.map[$];this.map[$]=Q?Q+", "+C:C},b.prototype.delete=function($){delete this.map[f($)]},b.prototype.get=function($){return $=f($),this.has($)?this.map[$]:null},b.prototype.has=function($){return this.map.hasOwnProperty(f($))},b.prototype.set=function($,C){this.map[f($)]=h(C)},b.prototype.forEach=function($,C){for(var Q in this.map)this.map.hasOwnProperty(Q)&&$.call(C,this.map[Q],Q,this)},b.prototype.keys=function(){var $=[];return this.forEach(function(C,Q){$.push(Q)}),p($)},b.prototype.values=function(){var $=[];return this.forEach(function(C){$.push(C)}),p($)},b.prototype.entries=function(){var $=[];return this.forEach(function(C,Q){$.push([Q,C])}),p($)},u.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function _($){if($.bodyUsed)return Promise.reject(new TypeError("Already read"));$.bodyUsed=!0}function E($){return new Promise(function(C,Q){$.onload=function(){C($.result)},$.onerror=function(){Q($.error)}})}function w($){var C=new FileReader,Q=E(C);return C.readAsArrayBuffer($),Q}function O($){var C=new FileReader,Q=E(C);return C.readAsText($),Q}function A($){for(var C=new Uint8Array($),Q=new Array(C.length),se=0;se<C.length;se++)Q[se]=String.fromCharCode(C[se]);return Q.join("")}function T($){if($.slice)return $.slice(0);var C=new Uint8Array($.byteLength);return C.set(new Uint8Array($)),C.buffer}function I(){return this.bodyUsed=!1,this._initBody=function($){this._bodyInit=$,$?typeof $=="string"?this._bodyText=$:u.blob&&Blob.prototype.isPrototypeOf($)?this._bodyBlob=$:u.formData&&FormData.prototype.isPrototypeOf($)?this._bodyFormData=$:u.searchParams&&URLSearchParams.prototype.isPrototypeOf($)?this._bodyText=$.toString():u.arrayBuffer&&u.blob&&c($)?(this._bodyArrayBuffer=T($.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf($)||d($))?this._bodyArrayBuffer=T($):this._bodyText=$=Object.prototype.toString.call($):this._bodyText="",this.headers.get("content-type")||(typeof $=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf($)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var $=_(this);if($)return $;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(w)}),this.text=function(){var $=_(this);if($)return $;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(N)}),this.json=function(){return this.text().then(JSON.parse)},this}var D=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function U($){var C=$.toUpperCase();return D.indexOf(C)>-1?C:$}function H($,C){C=C||{};var Q=C.body;if($ instanceof H){if($.bodyUsed)throw new TypeError("Already read");this.url=$.url,this.credentials=$.credentials,C.headers||(this.headers=new b($.headers)),this.method=$.method,this.mode=$.mode,this.signal=$.signal,!Q&&$._bodyInit!=null&&(Q=$._bodyInit,$.bodyUsed=!0)}else this.url=String($);if(this.credentials=C.credentials||this.credentials||"same-origin",(C.headers||!this.headers)&&(this.headers=new b(C.headers)),this.method=U(C.method||this.method||"GET"),this.mode=C.mode||this.mode||null,this.signal=C.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Q)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Q)}H.prototype.clone=function(){return new H(this,{body:this._bodyInit})};function N($){var C=new FormData;return $.trim().split("&").forEach(function(Q){if(Q){var se=Q.split("="),ie=se.shift().replace(/\+/g," "),be=se.join("=").replace(/\+/g," ");C.append(decodeURIComponent(ie),decodeURIComponent(be))}}),C}function R($){var C=new b,Q=$.replace(/\r?\n[\t ]+/g," ");return Q.split(/\r?\n/).forEach(function(se){var ie=se.split(":"),be=ie.shift().trim();if(be){var he=ie.join(":").trim();C.append(be,he)}}),C}I.call(H.prototype);function F($,C){C||(C={}),this.type="default",this.status=C.status===void 0?200:C.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in C?C.statusText:"OK",this.headers=new b(C.headers),this.url=C.url||"",this._initBody($)}I.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},F.error=function(){var $=new F(null,{status:0,statusText:""});return $.type="error",$};var X=[301,302,303,307,308];F.redirect=function($,C){if(X.indexOf(C)===-1)throw new RangeError("Invalid status code");return new F(null,{status:C,headers:{location:$}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(C,Q){this.message=C,this.name=Q;var se=Error(C);this.stack=se.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function ne($,C){return new Promise(function(Q,se){var ie=new H($,C);if(ie.signal&&ie.signal.aborted)return se(new o.DOMException("Aborted","AbortError"));var be=new XMLHttpRequest;function he(){be.abort()}be.onload=function(){var Te={status:be.status,statusText:be.statusText,headers:R(be.getAllResponseHeaders()||"")};Te.url="responseURL"in be?be.responseURL:Te.headers.get("X-Request-URL");var Ne="response"in be?be.response:be.responseText;Q(new F(Ne,Te))},be.onerror=function(){se(new TypeError("Network request failed"))},be.ontimeout=function(){se(new TypeError("Network request failed"))},be.onabort=function(){se(new o.DOMException("Aborted","AbortError"))},be.open(ie.method,ie.url,!0),ie.credentials==="include"?be.withCredentials=!0:ie.credentials==="omit"&&(be.withCredentials=!1),"responseType"in be&&u.blob&&(be.responseType="blob"),ie.headers.forEach(function(Te,Ne){be.setRequestHeader(Ne,Te)}),ie.signal&&(ie.signal.addEventListener("abort",he),be.onreadystatechange=function(){be.readyState===4&&ie.signal.removeEventListener("abort",he)}),be.send(typeof ie._bodyInit>"u"?null:ie._bodyInit)})}return ne.polyfill=!0,s.fetch||(s.fetch=ne,s.Headers=b,s.Request=H,s.Response=F),o.Headers=b,o.Request=H,o.Response=F,o.fetch=ne,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var a=n;e=a.fetch,e.default=a.fetch,e.fetch=a.fetch,e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response,t.exports=e})(TO,TO.exports);var Dne=TO.exports,cF=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(f){o(f)}}function c(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.fetchContext=Ju.fetchJson=void 0;const Nne=Dne;function lF(t,e){var r;return cF(this,void 0,void 0,function*(){return(yield((r=e==null?void 0:e.fetch)!==null&&r!==void 0?r:Nne.fetch)(t)).json()})}Ju.fetchJson=lF;function jne(t,e){return cF(this,void 0,void 0,function*(){return(yield lF(t,e))["@context"]})}Ju.fetchContext=jne;var Cne=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(f){o(f)}}function c(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty($m,"__esModule",{value:!0});$m.lookupUri=void 0;const Mne=Ju;function Fne(t,e){return Cne(this,void 0,void 0,function*(){const r=(yield(0,Mne.fetchContext)(`https://prefix.cc/${t}.file.jsonld`,e))[t];if(typeof r!="string")throw new Error(`Expected uri to be a string, received: ${r} of type ${typeof r}`);return r})}$m.lookupUri=Fne;var Um={},Lne=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(f){o(f)}}function c(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Um,"__esModule",{value:!0});Um.lookupPrefix=void 0;const Bne=Ju;function $ne(t,e){return Lne(this,void 0,void 0,function*(){const r=new URL("https://prefix.cc/reverse");r.searchParams.append("uri",t),r.searchParams.append("format","jsonld");const n=Object.keys(yield(0,Bne.fetchContext)(r,e));if(n.length===0)throw new Error("No prefixes returned");return n[0]})}Um.lookupPrefix=$ne;var qm={},Une=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(f){o(f)}}function c(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(qm,"__esModule",{value:!0});qm.lookupAllPrefixes=void 0;const qne=Ju;function Vne(t){return Une(this,void 0,void 0,function*(){return(0,qne.fetchContext)("https://prefix.cc/context",t)})}qm.lookupAllPrefixes=Vne;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r($m,t),r(Um,t),r(qm,t)})(SO);(function(t){var e=g&&g.__awaiter||function(u,c,l,d){function f(h){return h instanceof l?h:new l(function(p){p(h)})}return new(l||(l=Promise))(function(h,p){function b(w){try{E(d.next(w))}catch(O){p(O)}}function _(w){try{E(d.throw(w))}catch(O){p(O)}}function E(w){w.done?h(w.value):f(w.value).then(b,_)}E((d=d.apply(u,c||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.lookupAllPrefixes=t.prefixToUri=t.uriToPrefix=void 0;const r=Bm,n=SO;function a(u,c){return e(this,void 0,void 0,function*(){let l;try{l=yield(0,n.lookupPrefix)(u,c)}catch{c!=null&&c.mintOnUnknown&&(l=(0,r.fragment)(u).slice(0,4))}if(typeof l<"u"&&typeof(c==null?void 0:c.existingPrefixes)=="object"&&l in c.existingPrefixes){let d=0;for(;`${l}${d}`in c.existingPrefixes;)d+=1;l=`${l}${d}`}return l})}t.uriToPrefix=a;function s(u,c){return e(this,void 0,void 0,function*(){try{return yield(0,n.lookupUri)(u,c)}catch{return}})}t.prefixToUri=s;var o=SO;Object.defineProperty(t,"lookupAllPrefixes",{enumerable:!0,get:function(){return o.lookupAllPrefixes}})})(uF);var Vm={};Object.defineProperty(Vm,"__esModule",{value:!0});Vm.getShaclName=void 0;function Hne(t){if(t.termType!=="NamedNode"||!t.value.startsWith("http://www.w3.org/ns/shacl#"))throw new Error(`Term ${t.value} is not part of the SHACL namespace`);return t.value.slice(27)}Vm.getShaclName=Hne;var Vx={};Object.defineProperty(Vx,"__esModule",{value:!0});Vx.default={deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,uniqueLang:!0,equals:!0,disjoint:!0,lessThan:!0,lessThanOrEquals:!0,qualifiedValueShape:!0,qualifiedMinCount:!0,qualifiedMaxCount:!0,qualifiedValueShapesDisjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0,node:!0};var Hx={};Object.defineProperty(Hx,"__esModule",{value:!0});Hx.default={owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"};var kx={};Object.defineProperty(kx,"__esModule",{value:!0});kx.default={targetNode:!0,targetObjectsOf:!0,targetSubjectsOf:!0,deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,equals:!0,disjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0};var Nn=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(f){o(f)}}function c(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})},Qx=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qx,"__esModule",{value:!0});const zt=tu,kne=uF,n1=x0,nh=Vm,Qne=Qx(Vx),Gne=Qx(Hx),yN=Qx(kx);function lT(t){var e;return(e=/^[^]*[#/]/.exec(t))===null||e===void 0?void 0:e[0]}const dT={"http://www.w3.org/1999/02/22-rdf-syntax-ns#":"rdf","http://www.w3.org/2000/01/rdf-schema#":"rdfs","http://www.w3.org/ns/shacl#":"sh","http://www.w3.org/2001/XMLSchema#":"xsd"},fT={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"};class zne{constructor(e,r,n={},a=void 0,s=!0,o=!1,u,c=!1){this.store=e,this.base=a,this.errorOnExtraQuads=s,this.mintUnspecifiedPrefixes=o,this.fetch=u,this.extendedSyntax=c,this.prefixes={},this.prefixRev={};for(const l of Object.keys(n)){const d=n[l],f=typeof d=="string"?d:d.value;!(f in dT)&&!(l in fT)&&(this.prefixRev[f]=l,this.prefixes[l]=f)}this.writer=r}write(){return Nn(this,void 0,void 0,function*(){const e=this.store.getQuads(null,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/2002/07/owl#Ontology",null);if(e.length===1&&e[0].subject.termType==="NamedNode"){const n=e[0].subject;this.store.removeQuads(e),n.equals(new zt.NamedNode("urn:x-base:default"))||this.writer.add(`BASE ${(0,n1.termToString)(n)}`),yield this.writeImports(n)}else throw new Error("Base expected");if(this.mintUnspecifiedPrefixes){const n=new Set;for(const s of[...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)])if(s.termType==="NamedNode"){const o=lT(s.value);o&&!(o in this.prefixRev)&&!(o in dT)&&n.add(o)}const a=Object.assign(Object.assign({},this.prefixes),fT);yield Promise.all([...n].map(s=>(0,kne.uriToPrefix)(s,{fetch:this.fetch,mintOnUnknown:!0,existingPrefixes:a}).then(o=>{this.prefixes[o]=s,a[o]=s,this.prefixRev[s]=o})))}const r=new Set([...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)].filter(n=>n.termType==="NamedNode").map(n=>lT(n.value)).filter(n=>typeof n=="string"));for(const n in this.prefixRev)r.has(n)||(delete this.prefixes[this.prefixRev[n]],delete this.prefixRev[n]);if(yield this.writePrefixes(),this.prefixes=Object.assign(Object.assign({},this.prefixes),fT),this.prefixRev=Object.assign(Object.assign({},this.prefixRev),dT),this.writer.newLine(),yield this.writeShapes(),this.extendedSyntax){const n=this.store.getSubjects(null,null,null);n.length>0&&this.writer.newLine(1);for(const a of n)this.writer.add(yield this.termToString(a,!0,!0)),this.writer.add(" "),this.writer.indent(),yield this.writeTurtlePredicates(a),this.writer.deindent();n.length>0&&(this.writer.add(" ."),this.writer.newLine())}if(this.errorOnExtraQuads&&this.store.size>0)throw new Error("Dataset contains quads that cannot be written in SHACLC");this.writer.end()})}writeImports(e){return Nn(this,void 0,void 0,function*(){const r=this.store.getObjectsOnce(e,new zt.NamedNode("http://www.w3.org/2002/07/owl#imports"),null);if(r.length>0)for(const n of r)this.writer.add(`IMPORTS <${n.value}>`,!0)})}writePrefixes(){return Nn(this,void 0,void 0,function*(){const e=Object.keys(this.prefixes).filter(r=>!(r in Gne.default)).sort();if(e.length>0)for(const r of e)this.writer.add(`PREFIX ${r}: <${this.prefixes[r]}>`,!0)})}termToString(e,r=!1,n=!1){return Nn(this,void 0,void 0,function*(){try{if(r)throw new Error("Shacl name disabled");return(0,nh.getShaclName)(e)}catch{}if(e.termType==="NamedNode"){const a=lT(e.value);return a&&a in this.prefixRev&&a in this.prefixRev?`${this.prefixRev[a]}:${e.value.slice(a.length)}`:(0,n1.termToString)(e)}if(e.termType==="Literal")return e.datatypeString==="http://www.w3.org/2001/XMLSchema#integer"||e.datatypeString==="http://www.w3.org/2001/XMLSchema#boolean"?e.value:(0,n1.termToString)(e);throw e.termType==="BlankNode"&&n&&(0,n1.termToString)(e),new Error(`Invalid term type for extra statement ${e.value} (${e.termType})`)})}writeShapes(){return Nn(this,void 0,void 0,function*(){for(const e of this.store.getSubjectsOnce(new zt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new zt.NamedNode("http://www.w3.org/ns/shacl#NodeShape"),null)){this.store.getQuadsOnce(e,new zt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new zt.NamedNode("http://www.w3.org/2000/01/rdf-schema#Class"),null).length>0?this.writer.add("shapeClass "):this.writer.add("shape "),this.writer.add(yield this.termToString(e)),this.writer.add(" ");const r=this.store.getObjectsOnce(e,new zt.NamedNode("http://www.w3.org/ns/shacl#targetClass"),null);if(r.length>0){this.writer.add("-> ");for(const a of r)a.termType==="NamedNode"?this.writer.add(yield this.termToString(a)):(this.writer.add("!"),this.writer.add(yield this.termToString(this.singleObject(a,new zt.NamedNode("http://www.w3.org/ns/shacl#not"),!0)))),this.writer.add(" ")}const n=this.store.getPredicates(e,null,null).filter(a=>[new zt.NamedNode("http://www.w3.org/ns/shacl#targetClass"),new zt.NamedNode("http://www.w3.org/ns/shacl#property"),new zt.NamedNode("http://www.w3.org/ns/shacl#or"),...Object.keys(yN.default).map(s=>new zt.NamedNode("http://www.w3.org/ns/shacl#"+s))].every(s=>!a.equals(s)));n.length>0&&(this.writer.add(";"),this.writer.indent(),this.writer.newLine(1)),this.extendedSyntax&&(yield this.writeGivenTurtlePredicates(e,n)),n.length>0&&(this.writer.add(" "),this.writer.deindent()),yield this.writeShapeBody(e,!1)}})}getSingleProperty(e,r){let n=[e];try{let a=(0,nh.getShaclName)(e.predicate),s="pred";if(a==="not"){const o=this.store.getQuadsOnce(e.object,null,null,null);if(n=n.concat(o),o.length!==1)throw new Error("Can only handle having one predicate of 'not'");[e]=o,a=(0,nh.getShaclName)(e.predicate),s="not"}if(!(a in r))throw new Error(`${a} is not allowed`);return{name:a,type:s,object:e.object}}catch{this.store.addQuads(n)}}singleLayerPropertiesList(e,r){const n=[];for(const a of this.store.getQuadsOnce(e,null,null,null)){const s=this.getSingleProperty(a,r);s&&n.push(s)}return n}expectOneProperty(e,r){const n=this.store.getQuadsOnce(e,null,null,null);if(n.length===1){const a=this.getSingleProperty(n[0],r);if(a)return a}this.store.addQuads(n)}orProperties(e,r){const n=[];for(const a of this.store.getQuadsOnce(e,new zt.NamedNode("http://www.w3.org/ns/shacl#or"),null,null)){const s=[];for(const o of this.getList(a.object)){const u=this.expectOneProperty(o,r);if(!u)throw this.store.addQuad(a),new Error("Each entry of the 'or' statement must declare exactly one property");s.push(u)}n.push(s)}return n}getList(e){let r=e;const n=[];for(;!r.equals(new zt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));)n.push(this.singleObject(r,new zt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),!0)),r=this.singleObject(r,new zt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),!0);return n}writeIriLiteralOrArray(e){return Nn(this,void 0,void 0,function*(){if(e.termType==="BlankNode"){this.writer.add("[");let r=!0;for(const n of this.getList(e))r?r=!1:this.writer.add(" "),this.writer.add(yield this.termToString(n));this.writer.add("]")}else this.writer.add(yield this.termToString(e))})}singleObject(e,r,n){var a;return(a=this.singleQuad(e,r,n))===null||a===void 0?void 0:a.object}singleQuad(e,r,n=!1){const a=this.store.getQuadsOnce(e,r,null,null);if(n&&a.length!==1)throw this.store.addQuads(a),new Error(`The subject and predicate ${e==null?void 0:e.value} ${r==null?void 0:r.value} must have exactly one object. Instead has ${a.length}`);if(a.length>1)throw this.store.addQuads(a),new Error(`The subject and predicate ${e==null?void 0:e.value} ${r==null?void 0:r.value} can have at most one object. Instead has ${a.length}`);return a.length===1?a[0]:void 0}writeAssigment({name:e,type:r,object:n}){return Nn(this,void 0,void 0,function*(){r==="not"&&this.writer.add("!"),this.writer.add(e),this.writer.add("="),yield this.writeIriLiteralOrArray(n)})}writeAtom({name:e,type:r,object:n}){return Nn(this,void 0,void 0,function*(){switch(r==="not"&&this.writer.add("!"),e){case"node":{if(n.termType==="NamedNode")this.writer.add(`@${yield this.termToString(n)}`);else if(n.termType==="BlankNode")yield this.writeShapeBody(n);else throw new Error("Invalid nested shape, must be blank node or IRI");return}case"nodeKind":{this.writer.add((0,nh.getShaclName)(n));return}case"class":{this.writer.add(yield this.termToString(n));return}case"datatype":{this.writer.add(yield this.termToString(n));return}default:this.writer.add(e),this.writer.add("="),yield this.writeIriLiteralOrArray(n)}})}writeAssigments(e,r=" ",n=!0,a){return Nn(this,void 0,void 0,function*(){for(const s of e)n?n=!1:this.writer.add(r),a?yield this.writeAtom(s):yield this.writeAssigment(s)})}writeParams(e,r=!0,n,a=!1,s=!1){return Nn(this,void 0,void 0,function*(){const o=this.orProperties(e,n),u=this.singleLayerPropertiesList(e,n);s&&(o.length>0||u.length>0)&&this.writer.newLine(1);for(const c of o)r?r=!1:this.writer.add(" "),yield this.writeAssigments(c,"|",!0,a);yield this.writeAssigments(u," ",r,a),s&&(o.length>0||u.length>0)&&this.writer.add(" .")})}writeShapeBody(e,r=!0){return Nn(this,void 0,void 0,function*(){this.writer.add("{").indent();const n=this.store.getObjectsOnce(e,new zt.NamedNode("http://www.w3.org/ns/shacl#property"),null);yield this.writeParams(e,!0,yN.default,!1,!0);for(const a of n)this.writer.newLine(1),yield this.writeProperty(a);this.writer.deindent().newLine(1),r?this.writer.add("} ."):this.writer.add("}").newLine(1)})}writeProperty(e){return Nn(this,void 0,void 0,function*(){yield this.writePath(this.singleObject(e,new zt.NamedNode("http://www.w3.org/ns/shacl#path"),!0));const r=this.singleObject(e,new zt.NamedNode("http://www.w3.org/ns/shacl#minCount")),n=this.singleObject(e,new zt.NamedNode("http://www.w3.org/ns/shacl#maxCount")),a=this.singleObject(e,new zt.NamedNode("http://www.w3.org/ns/shacl#nodeKind")),s=this.singleObject(e,new zt.NamedNode("http://www.w3.org/ns/shacl#class")),o=this.singleObject(e,new zt.NamedNode("http://www.w3.org/ns/shacl#datatype")),u=this.store.getObjectsOnce(e,new zt.NamedNode("http://www.w3.org/ns/shacl#node"),null);if(a&&(this.writer.add(" "),this.writer.add((0,nh.getShaclName)(a))),s&&(this.writer.add(" "),this.writer.add(yield this.termToString(s))),o&&(this.writer.add(" "),this.writer.add(yield this.termToString(o))),r!==void 0||n!==void 0){if(this.writer.add(" ["),r){if(r.termType!=="Literal"||r.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid min value, must me an integer literal");this.writer.add(r.value)}else this.writer.add("0");if(this.writer.add(".."),n){if(n.termType!=="Literal"||n.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid max value, must me an integer literal");this.store.removeMatches(e,new zt.NamedNode("http://www.w3.org/ns/shacl#maxCount"),void 0,void 0),this.writer.add(n.value)}else this.writer.add("*");this.writer.add("]")}yield this.writeParams(e,!1,Qne.default,!0);const c=[];for(const l of u)if(l.termType==="NamedNode")this.writer.add(" "),this.writer.add(`@${yield this.termToString(l)}`);else if(l.termType==="BlankNode")c.push(l);else throw new Error("Invalid nested shape, must be blank node or IRI");for(const l of c)this.writer.add(" "),yield this.writeShapeBody(l);this.extendedSyntax&&this.store.getQuads(e,null,null,null).length>0&&(this.writer.add(" %"),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(e),this.writer.deindent(),this.writer.newLine(1),this.writer.add("%")),c.length===0&&this.writer.add(" .")})}writeTurtlePredicates(e){return Nn(this,void 0,void 0,function*(){return this.writeGivenTurtlePredicates(e,this.store.getPredicates(e,null,null))})}writeGivenTurtlePredicates(e,r){return Nn(this,void 0,void 0,function*(){let n=!1;if(r.some(a=>a.equals(zt.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")))){const a=this.store.getObjectsOnce(e,zt.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),null);a.length>0&&(n=!0,this.writer.add("a "),yield this.writeTurtleObjects(a))}for(const a of r)a.equals(zt.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))||(n?(this.writer.add(" ;"),this.writer.newLine(1)):n=!0,this.writer.add(yield this.termToString(a,!0)),this.writer.add(" "),yield this.writeTurtleObjects(this.store.getObjectsOnce(e,a,null)))})}writeTurtleObjects(e){return Nn(this,void 0,void 0,function*(){const r=[],n=[];for(const s of e)s.termType==="BlankNode"&&[...this.store.match(null,null,s),...this.store.match(null,s,null)].length===0?r.push(s):n.push(s);this.writer.add((yield Promise.all(n.map(s=>this.termToString(s,!0,!0)))).join(", "));let a=n.length>0;if(r.length>0)for(const s of r)a?this.writer.add(", "):a=!0,(yield this.writeList(s))||(this.writer.add("["),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(s),this.writer.deindent(),this.writer.newLine(1),this.writer.add("]"))})}writeList(e){return Nn(this,void 0,void 0,function*(){let r=e;const n=[],a=[];for(;!r.equals(zt.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));){const o=this.store.getQuadsOnce(r,zt.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),null,null),u=this.store.getQuadsOnce(r,zt.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),null,null);if(a.push(...o,...u),o.length!==1||u.length!==1||this.store.getQuads(r,null,null,null).length!==0)return this.store.addQuads(a),!1;n.push(o[0].object),r=u[0].object}let s=!1;this.writer.add("(");for(const o of n)s?this.writer.add(" "):s=!0,yield this.writeTurtleObjects([o]);return this.writer.add(")"),!0})}writePath(e,r=!1){return Nn(this,void 0,void 0,function*(){if(e.termType==="NamedNode")this.writer.add(yield this.termToString(e));else if(e.termType==="BlankNode"){const n=this.store.getQuadsOnce(e,null,null,null);if(n.length===1){const{predicate:a,object:s}=n[0];switch(a.value){case"http://www.w3.org/ns/shacl#inversePath":this.writer.add("^"),yield this.writePath(s,!0);return;case"http://www.w3.org/ns/shacl#alternativePath":{const o=this.getList(s);if(o.length===0)throw new Error("Invalid Alternative Path - no options");if(o.length===1)yield this.writePath(o[0]);else{r&&this.writer.add("(");let u=!0;for(const c of o)u?u=!1:this.writer.add("|"),yield this.writePath(c,!0);r&&this.writer.add(")")}return}case"http://www.w3.org/ns/shacl#zeroOrMorePath":yield this.writePath(s,!0),this.writer.add("*");return;case"http://www.w3.org/ns/shacl#oneOrMorePath":yield this.writePath(s,!0),this.writer.add("+");return;case"http://www.w3.org/ns/shacl#zeroOrOnePath":yield this.writePath(s,!0),this.writer.add("?");return;default:throw new Error(`Invalid path type ${e.value}`)}}else{this.store.addQuads(n);const a=this.getList(e);if(a.length===0)throw new Error("Invalid Path");{r&&this.writer.add("(");let s=!0;for(const o of a)s?s=!1:this.writer.add("/"),yield this.writePath(o,!0);r&&this.writer.add(")")}}}else throw new Error("Path should be named node or blank node")})}}qx.default=zne;var Gx={};Object.defineProperty(Gx,"__esModule",{value:!0});class Wne{constructor(e){this.indents=0,this.write=e.write,this.end=e.end}indent(){return this.indents+=1,this}deindent(){if(this.indents<1)throw new Error(`Trying to deindent when indent is only ${this.indents}`);return this.indents-=1,this}add(e,r=!1){return this.write(r?`
${"	".repeat(this.indents)}${e}`:e,"utf-8"),this}newLine(e=2){return this.write(`
`.repeat(e)+"	".repeat(this.indents),"utf-8"),this}}Gx.default=Wne;var zx={};Object.defineProperty(zx,"__esModule",{value:!0});const Xne=tu;class Kne extends Xne.Store{getQuadsOnce(e,r,n,a){const s=this.getQuads(e,r,n,a);return this.removeQuads(s),s}getSubjectsOnce(e,r,n){return this.getQuadsOnce(null,e,r,n).map(a=>a.subject)}getObjectsOnce(e,r,n){return this.getQuadsOnce(e,r,null,n).map(a=>a.object)}}zx.default=Kne;var bN=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(f){o(f)}}function c(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})},Wx=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lm,"__esModule",{value:!0});Lm.write=void 0;const Jne=tu,Yne=Wx(qx),Zne=Wx(Gx),eie=Wx(zx);function tie(t,e){return bN(this,void 0,void 0,function*(){return new Promise((r,n)=>bN(this,void 0,void 0,function*(){try{let a="";const s=new eie.default(t),o=s.getGraphs(null,null,null);if(o.length>1)throw new Error("More than one graph found - can serialize in the default graph");if(o.length===1&&!o[0].equals(Jne.DataFactory.defaultGraph()))throw new Error(`Expected all triples to be in the default graph, instead triples were in ${o[0].value}`);const u=new Zne.default({write:l=>{a+=l},end:()=>{let l=s.getQuads(null,null,null,null);l.length===0&&(l=void 0),r({text:a,extraQuads:l})}});yield new Yne.default(s,u,e==null?void 0:e.prefixes,void 0,(e==null?void 0:e.errorOnUnused)!==!1,e==null?void 0:e.mintPrefixes,e==null?void 0:e.fetch,e==null?void 0:e.extendedSyntax).write()}catch(a){n(a)}}))})}Lm.write=tie;Object.defineProperty(Fm,"__esModule",{value:!0});Fm.ActorRdfSerializeShaclc=void 0;const rie=Rm,nie=Ux,iie=Xt,aie=Lm;class sie extends rie.ActorRdfSerializeFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){const a=new iie.Readable;a._read=()=>{};try{const s={};e.quadStream.on("prefix",(u,c)=>{s[u]=c});const{text:o}=await(0,aie.write)(await(0,nie.default)(e.quadStream),{errorOnUnused:!0,extendedSyntax:r==="text/shaclc-ext",prefixes:s});a.push(o),a.push(null)}catch(s){a._read=()=>{a.emit("error",s)}}return{data:a,triples:!0}}}Fm.ActorRdfSerializeShaclc=sie;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fm,t)})(oF);var dF={},Hm={},ls={},km={},N0={},EO={exports:{}},fF=Rf.EventEmitter;const oie={},uie=Object.freeze(Object.defineProperty({__proto__:null,default:oie},Symbol.toStringTag,{value:"Module"})),hF=h_(uie);var hT,_N;function cie(){if(_N)return hT;_N=1;function t(b,_){var E=Object.keys(b);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(b);_&&(w=w.filter(function(O){return Object.getOwnPropertyDescriptor(b,O).enumerable})),E.push.apply(E,w)}return E}function e(b){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?t(Object(E),!0).forEach(function(w){r(b,w,E[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(E)):t(Object(E)).forEach(function(w){Object.defineProperty(b,w,Object.getOwnPropertyDescriptor(E,w))})}return b}function r(b,_,E){return _=o(_),_ in b?Object.defineProperty(b,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):b[_]=E,b}function n(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function a(b,_){for(var E=0;E<_.length;E++){var w=_[E];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,o(w.key),w)}}function s(b,_,E){return _&&a(b.prototype,_),E&&a(b,E),Object.defineProperty(b,"prototype",{writable:!1}),b}function o(b){var _=u(b,"string");return typeof _=="symbol"?_:String(_)}function u(b,_){if(typeof b!="object"||b===null)return b;var E=b[Symbol.toPrimitive];if(E!==void 0){var w=E.call(b,_||"default");if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(b)}var c=la,l=c.Buffer,d=hF,f=d.inspect,h=f&&f.custom||"inspect";function p(b,_,E){l.prototype.copy.call(b,_,E)}return hT=function(){function b(){n(this,b),this.head=null,this.tail=null,this.length=0}return s(b,[{key:"push",value:function(E){var w={data:E,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(E){var w={data:E,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(this.length!==0){var E=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,E}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(E){if(this.length===0)return"";for(var w=this.head,O=""+w.data;w=w.next;)O+=E+w.data;return O}},{key:"concat",value:function(E){if(this.length===0)return l.alloc(0);for(var w=l.allocUnsafe(E>>>0),O=this.head,A=0;O;)p(O.data,w,A),A+=O.data.length,O=O.next;return w}},{key:"consume",value:function(E,w){var O;return E<this.head.data.length?(O=this.head.data.slice(0,E),this.head.data=this.head.data.slice(E)):E===this.head.data.length?O=this.shift():O=w?this._getString(E):this._getBuffer(E),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(E){var w=this.head,O=1,A=w.data;for(E-=A.length;w=w.next;){var T=w.data,I=E>T.length?T.length:E;if(I===T.length?A+=T:A+=T.slice(0,E),E-=I,E===0){I===T.length?(++O,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=T.slice(I));break}++O}return this.length-=O,A}},{key:"_getBuffer",value:function(E){var w=l.allocUnsafe(E),O=this.head,A=1;for(O.data.copy(w),E-=O.data.length;O=O.next;){var T=O.data,I=E>T.length?T.length:E;if(T.copy(w,w.length-E,0,I),E-=I,E===0){I===T.length?(++A,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=T.slice(I));break}++A}return this.length-=A,w}},{key:h,value:function(E,w){return f(this,e(e({},w),{},{depth:0,customInspect:!1}))}}]),b}(),hT}function lie(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return n||a?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(OO,this,t)):process.nextTick(OO,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(cb,r):(r._writableState.errorEmitted=!0,process.nextTick(gN,r,s)):process.nextTick(gN,r,s):e?(process.nextTick(cb,r),e(s)):process.nextTick(cb,r)}),this)}function gN(t,e){OO(t,e),cb(t)}function cb(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function die(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function OO(t,e){t.emit("error",e)}function fie(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var pF={destroy:lie,undestroy:die,errorOrDestroy:fie},Tl={};function hie(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var yF={};function xa(t,e,r){r||(r=Error);function n(s,o,u){return typeof e=="string"?e:e(s,o,u)}var a=function(s){hie(o,s);function o(u,c,l){return s.call(this,n(u,c,l))||this}return o}(r);a.prototype.name=r.name,a.prototype.code=t,yF[t]=a}function mN(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function pie(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function yie(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function bie(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}xa("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);xa("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&pie(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var a;if(yie(t," argument"))a="The ".concat(t," ").concat(n," ").concat(mN(e,"type"));else{var s=bie(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(mN(e,"type"))}return a+=". Received type ".concat(typeof r),a},TypeError);xa("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");xa("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});xa("ERR_STREAM_PREMATURE_CLOSE","Premature close");xa("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});xa("ERR_MULTIPLE_CALLBACK","Callback called multiple times");xa("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");xa("ERR_STREAM_WRITE_AFTER_END","write after end");xa("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);xa("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);xa("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Tl.codes=yF;var _ie=Tl.codes.ERR_INVALID_OPT_VALUE;function gie(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function mie(t,e,r,n){var a=gie(e,n,r);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var s=n?r:"highWaterMark";throw new _ie(s,a)}return Math.floor(a)}return t.objectMode?16:16*1024}var bF={getHighWaterMark:mie},vie=wie;function wie(t,e){if(pT("noDeprecation"))return t;var r=!1;function n(){if(!r){if(pT("throwDeprecation"))throw new Error(e);pT("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function pT(t){try{if(!g.localStorage)return!1}catch{return!1}var e=g.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var yT,vN;function _F(){if(vN)return yT;vN=1,yT=H;function t(oe){var J=this;this.next=null,this.entry=null,this.finish=function(){xe(J,oe)}}var e;H.WritableState=D;var r={deprecate:vie},n=fF,a=la.Buffer,s=(typeof g<"u"?g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(oe){return a.from(oe)}function u(oe){return a.isBuffer(oe)||oe instanceof s}var c=pF,l=bF,d=l.getHighWaterMark,f=Tl.codes,h=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,b=f.ERR_MULTIPLE_CALLBACK,_=f.ERR_STREAM_CANNOT_PIPE,E=f.ERR_STREAM_DESTROYED,w=f.ERR_STREAM_NULL_VALUES,O=f.ERR_STREAM_WRITE_AFTER_END,A=f.ERR_UNKNOWN_ENCODING,T=c.errorOrDestroy;Ef(H,n);function I(){}function D(oe,J,le){e=e||tf(),oe=oe||{},typeof le!="boolean"&&(le=J instanceof e),this.objectMode=!!oe.objectMode,le&&(this.objectMode=this.objectMode||!!oe.writableObjectMode),this.highWaterMark=d(this,oe,"writableHighWaterMark",le),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var pe=oe.decodeStrings===!1;this.decodeStrings=!pe,this.defaultEncoding=oe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(L){Q(J,L)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=oe.emitClose!==!1,this.autoDestroy=!!oe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}D.prototype.getBuffer=function(){for(var J=this.bufferedRequest,le=[];J;)le.push(J),J=J.next;return le},function(){try{Object.defineProperty(D.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var U;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(U=Function.prototype[Symbol.hasInstance],Object.defineProperty(H,Symbol.hasInstance,{value:function(J){return U.call(this,J)?!0:this!==H?!1:J&&J._writableState instanceof D}})):U=function(J){return J instanceof this};function H(oe){e=e||tf();var J=this instanceof e;if(!J&&!U.call(H,this))return new H(oe);this._writableState=new D(oe,this,J),this.writable=!0,oe&&(typeof oe.write=="function"&&(this._write=oe.write),typeof oe.writev=="function"&&(this._writev=oe.writev),typeof oe.destroy=="function"&&(this._destroy=oe.destroy),typeof oe.final=="function"&&(this._final=oe.final)),n.call(this)}H.prototype.pipe=function(){T(this,new _)};function N(oe,J){var le=new O;T(oe,le),process.nextTick(J,le)}function R(oe,J,le,pe){var L;return le===null?L=new w:typeof le!="string"&&!J.objectMode&&(L=new h("chunk",["string","Buffer"],le)),L?(T(oe,L),process.nextTick(pe,L),!1):!0}H.prototype.write=function(oe,J,le){var pe=this._writableState,L=!1,P=!pe.objectMode&&u(oe);return P&&!a.isBuffer(oe)&&(oe=o(oe)),typeof J=="function"&&(le=J,J=null),P?J="buffer":J||(J=pe.defaultEncoding),typeof le!="function"&&(le=I),pe.ending?N(this,le):(P||R(this,pe,oe,le))&&(pe.pendingcb++,L=X(this,pe,P,oe,J,le)),L},H.prototype.cork=function(){this._writableState.corked++},H.prototype.uncork=function(){var oe=this._writableState;oe.corked&&(oe.corked--,!oe.writing&&!oe.corked&&!oe.bufferProcessing&&oe.bufferedRequest&&be(this,oe))},H.prototype.setDefaultEncoding=function(J){if(typeof J=="string"&&(J=J.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((J+"").toLowerCase())>-1))throw new A(J);return this._writableState.defaultEncoding=J,this},Object.defineProperty(H.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function F(oe,J,le){return!oe.objectMode&&oe.decodeStrings!==!1&&typeof J=="string"&&(J=a.from(J,le)),J}Object.defineProperty(H.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function X(oe,J,le,pe,L,P){if(!le){var m=F(J,pe,L);pe!==m&&(le=!0,L="buffer",pe=m)}var y=J.objectMode?1:pe.length;J.length+=y;var v=J.length<J.highWaterMark;if(v||(J.needDrain=!0),J.writing||J.corked){var j=J.lastBufferedRequest;J.lastBufferedRequest={chunk:pe,encoding:L,isBuf:le,callback:P,next:null},j?j.next=J.lastBufferedRequest:J.bufferedRequest=J.lastBufferedRequest,J.bufferedRequestCount+=1}else ne(oe,J,!1,y,pe,L,P);return v}function ne(oe,J,le,pe,L,P,m){J.writelen=pe,J.writecb=m,J.writing=!0,J.sync=!0,J.destroyed?J.onwrite(new E("write")):le?oe._writev(L,J.onwrite):oe._write(L,P,J.onwrite),J.sync=!1}function $(oe,J,le,pe,L){--J.pendingcb,le?(process.nextTick(L,pe),process.nextTick(ye,oe,J),oe._writableState.errorEmitted=!0,T(oe,pe)):(L(pe),oe._writableState.errorEmitted=!0,T(oe,pe),ye(oe,J))}function C(oe){oe.writing=!1,oe.writecb=null,oe.length-=oe.writelen,oe.writelen=0}function Q(oe,J){var le=oe._writableState,pe=le.sync,L=le.writecb;if(typeof L!="function")throw new b;if(C(le),J)$(oe,le,pe,J,L);else{var P=he(le)||oe.destroyed;!P&&!le.corked&&!le.bufferProcessing&&le.bufferedRequest&&be(oe,le),pe?process.nextTick(se,oe,le,P,L):se(oe,le,P,L)}}function se(oe,J,le,pe){le||ie(oe,J),J.pendingcb--,pe(),ye(oe,J)}function ie(oe,J){J.length===0&&J.needDrain&&(J.needDrain=!1,oe.emit("drain"))}function be(oe,J){J.bufferProcessing=!0;var le=J.bufferedRequest;if(oe._writev&&le&&le.next){var pe=J.bufferedRequestCount,L=new Array(pe),P=J.corkedRequestsFree;P.entry=le;for(var m=0,y=!0;le;)L[m]=le,le.isBuf||(y=!1),le=le.next,m+=1;L.allBuffers=y,ne(oe,J,!0,J.length,L,"",P.finish),J.pendingcb++,J.lastBufferedRequest=null,P.next?(J.corkedRequestsFree=P.next,P.next=null):J.corkedRequestsFree=new t(J),J.bufferedRequestCount=0}else{for(;le;){var v=le.chunk,j=le.encoding,V=le.callback,q=J.objectMode?1:v.length;if(ne(oe,J,!1,q,v,j,V),le=le.next,J.bufferedRequestCount--,J.writing)break}le===null&&(J.lastBufferedRequest=null)}J.bufferedRequest=le,J.bufferProcessing=!1}H.prototype._write=function(oe,J,le){le(new p("_write()"))},H.prototype._writev=null,H.prototype.end=function(oe,J,le){var pe=this._writableState;return typeof oe=="function"?(le=oe,oe=null,J=null):typeof J=="function"&&(le=J,J=null),oe!=null&&this.write(oe,J),pe.corked&&(pe.corked=1,this.uncork()),pe.ending||ce(this,pe,le),this},Object.defineProperty(H.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function he(oe){return oe.ending&&oe.length===0&&oe.bufferedRequest===null&&!oe.finished&&!oe.writing}function Te(oe,J){oe._final(function(le){J.pendingcb--,le&&T(oe,le),J.prefinished=!0,oe.emit("prefinish"),ye(oe,J)})}function Ne(oe,J){!J.prefinished&&!J.finalCalled&&(typeof oe._final=="function"&&!J.destroyed?(J.pendingcb++,J.finalCalled=!0,process.nextTick(Te,oe,J)):(J.prefinished=!0,oe.emit("prefinish")))}function ye(oe,J){var le=he(J);if(le&&(Ne(oe,J),J.pendingcb===0&&(J.finished=!0,oe.emit("finish"),J.autoDestroy))){var pe=oe._readableState;(!pe||pe.autoDestroy&&pe.endEmitted)&&oe.destroy()}return le}function ce(oe,J,le){J.ending=!0,ye(oe,J),le&&(J.finished?process.nextTick(le):oe.once("finish",le)),J.ended=!0,oe.writable=!1}function xe(oe,J,le){var pe=oe.entry;for(oe.entry=null;pe;){var L=pe.callback;J.pendingcb--,L(le),pe=pe.next}J.corkedRequestsFree.next=oe}return Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(J){this._writableState&&(this._writableState.destroyed=J)}}),H.prototype.destroy=c.destroy,H.prototype._undestroy=c.undestroy,H.prototype._destroy=function(oe,J){J(oe)},yT}var bT,wN;function tf(){if(wN)return bT;wN=1;var t=Object.keys||function(l){var d=[];for(var f in l)d.push(f);return d};bT=o;var e=mF(),r=_F();Ef(o,e);for(var n=t(r.prototype),a=0;a<n.length;a++){var s=n[a];o.prototype[s]||(o.prototype[s]=r.prototype[s])}function o(l){if(!(this instanceof o))return new o(l);e.call(this,l),r.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function u(){this._writableState.ended||process.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(d){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=d,this._writableState.destroyed=d)}}),bT}var SN=Tl.codes.ERR_STREAM_PREMATURE_CLOSE;function Sie(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];t.apply(this,n)}}}function Tie(){}function Eie(t){return t.setHeader&&typeof t.abort=="function"}function gF(t,e,r){if(typeof e=="function")return gF(t,null,e);e||(e={}),r=Sie(r||Tie);var n=e.readable||e.readable!==!1&&t.readable,a=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||u()},o=t._writableState&&t._writableState.finished,u=function(){a=!1,o=!0,n||r.call(t)},c=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,c=!0,a||r.call(t)},d=function(b){r.call(t,b)},f=function(){var b;if(n&&!c)return(!t._readableState||!t._readableState.ended)&&(b=new SN),r.call(t,b);if(a&&!o)return(!t._writableState||!t._writableState.ended)&&(b=new SN),r.call(t,b)},h=function(){t.req.on("finish",u)};return Eie(t)?(t.on("complete",u),t.on("abort",f),t.req?h():t.on("request",h)):a&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",l),t.on("finish",u),e.error!==!1&&t.on("error",d),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",h),t.req&&t.req.removeListener("finish",u),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("end",l),t.removeListener("error",d),t.removeListener("close",f)}}var Xx=gF,_T,TN;function Oie(){if(TN)return _T;TN=1;var t;function e(A,T,I){return T=r(T),T in A?Object.defineProperty(A,T,{value:I,enumerable:!0,configurable:!0,writable:!0}):A[T]=I,A}function r(A){var T=n(A,"string");return typeof T=="symbol"?T:String(T)}function n(A,T){if(typeof A!="object"||A===null)return A;var I=A[Symbol.toPrimitive];if(I!==void 0){var D=I.call(A,T||"default");if(typeof D!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(A)}var a=Xx,s=Symbol("lastResolve"),o=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function h(A,T){return{value:A,done:T}}function p(A){var T=A[s];if(T!==null){var I=A[f].read();I!==null&&(A[l]=null,A[s]=null,A[o]=null,T(h(I,!1)))}}function b(A){process.nextTick(p,A)}function _(A,T){return function(I,D){A.then(function(){if(T[c]){I(h(void 0,!0));return}T[d](I,D)},D)}}var E=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((t={get stream(){return this[f]},next:function(){var T=this,I=this[u];if(I!==null)return Promise.reject(I);if(this[c])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise(function(N,R){process.nextTick(function(){T[u]?R(T[u]):N(h(void 0,!0))})});var D=this[l],U;if(D)U=new Promise(_(D,this));else{var H=this[f].read();if(H!==null)return Promise.resolve(h(H,!1));U=new Promise(this[d])}return this[l]=U,U}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var T=this;return new Promise(function(I,D){T[f].destroy(null,function(U){if(U){D(U);return}I(h(void 0,!0))})})}),t),E),O=function(T){var I,D=Object.create(w,(I={},e(I,f,{value:T,writable:!0}),e(I,s,{value:null,writable:!0}),e(I,o,{value:null,writable:!0}),e(I,u,{value:null,writable:!0}),e(I,c,{value:T._readableState.endEmitted,writable:!0}),e(I,d,{value:function(H,N){var R=D[f].read();R?(D[l]=null,D[s]=null,D[o]=null,H(h(R,!1))):(D[s]=H,D[o]=N)},writable:!0}),I));return D[l]=null,a(T,function(U){if(U&&U.code!=="ERR_STREAM_PREMATURE_CLOSE"){var H=D[o];H!==null&&(D[l]=null,D[s]=null,D[o]=null,H(U)),D[u]=U;return}var N=D[s];N!==null&&(D[l]=null,D[s]=null,D[o]=null,N(h(void 0,!0))),D[c]=!0}),T.on("readable",b.bind(null,D)),D};return _T=O,_T}var gT,EN;function Aie(){return EN||(EN=1,gT=function(){throw new Error("Readable.from is not available in the browser")}),gT}var mT,ON;function mF(){if(ON)return mT;ON=1,mT=N;var t;N.ReadableState=H,Rf.EventEmitter;var e=function(m,y){return m.listeners(y).length},r=fF,n=la.Buffer,a=(typeof g<"u"?g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(P){return n.from(P)}function o(P){return n.isBuffer(P)||P instanceof a}var u=hF,c;u&&u.debuglog?c=u.debuglog("stream"):c=function(){};var l=cie(),d=pF,f=bF,h=f.getHighWaterMark,p=Tl.codes,b=p.ERR_INVALID_ARG_TYPE,_=p.ERR_STREAM_PUSH_AFTER_EOF,E=p.ERR_METHOD_NOT_IMPLEMENTED,w=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,O,A,T;Ef(N,r);var I=d.errorOrDestroy,D=["error","close","destroy","pause","resume"];function U(P,m,y){if(typeof P.prependListener=="function")return P.prependListener(m,y);!P._events||!P._events[m]?P.on(m,y):Array.isArray(P._events[m])?P._events[m].unshift(y):P._events[m]=[y,P._events[m]]}function H(P,m,y){t=t||tf(),P=P||{},typeof y!="boolean"&&(y=m instanceof t),this.objectMode=!!P.objectMode,y&&(this.objectMode=this.objectMode||!!P.readableObjectMode),this.highWaterMark=h(this,P,"readableHighWaterMark",y),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.destroyed=!1,this.defaultEncoding=P.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,P.encoding&&(O||(O=Fb.StringDecoder),this.decoder=new O(P.encoding),this.encoding=P.encoding)}function N(P){if(t=t||tf(),!(this instanceof N))return new N(P);var m=this instanceof t;this._readableState=new H(P,this,m),this.readable=!0,P&&(typeof P.read=="function"&&(this._read=P.read),typeof P.destroy=="function"&&(this._destroy=P.destroy)),r.call(this)}Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(m){this._readableState&&(this._readableState.destroyed=m)}}),N.prototype.destroy=d.destroy,N.prototype._undestroy=d.undestroy,N.prototype._destroy=function(P,m){m(P)},N.prototype.push=function(P,m){var y=this._readableState,v;return y.objectMode?v=!0:typeof P=="string"&&(m=m||y.defaultEncoding,m!==y.encoding&&(P=n.from(P,m),m=""),v=!0),R(this,P,m,!1,v)},N.prototype.unshift=function(P){return R(this,P,null,!0,!1)};function R(P,m,y,v,j){c("readableAddChunk",m);var V=P._readableState;if(m===null)V.reading=!1,Q(P,V);else{var q;if(j||(q=X(V,m)),q)I(P,q);else if(V.objectMode||m&&m.length>0)if(typeof m!="string"&&!V.objectMode&&Object.getPrototypeOf(m)!==n.prototype&&(m=s(m)),v)V.endEmitted?I(P,new w):F(P,V,m,!0);else if(V.ended)I(P,new _);else{if(V.destroyed)return!1;V.reading=!1,V.decoder&&!y?(m=V.decoder.write(m),V.objectMode||m.length!==0?F(P,V,m,!1):be(P,V)):F(P,V,m,!1)}else v||(V.reading=!1,be(P,V))}return!V.ended&&(V.length<V.highWaterMark||V.length===0)}function F(P,m,y,v){m.flowing&&m.length===0&&!m.sync?(m.awaitDrain=0,P.emit("data",y)):(m.length+=m.objectMode?1:y.length,v?m.buffer.unshift(y):m.buffer.push(y),m.needReadable&&se(P)),be(P,m)}function X(P,m){var y;return!o(m)&&typeof m!="string"&&m!==void 0&&!P.objectMode&&(y=new b("chunk",["string","Buffer","Uint8Array"],m)),y}N.prototype.isPaused=function(){return this._readableState.flowing===!1},N.prototype.setEncoding=function(P){O||(O=Fb.StringDecoder);var m=new O(P);this._readableState.decoder=m,this._readableState.encoding=this._readableState.decoder.encoding;for(var y=this._readableState.buffer.head,v="";y!==null;)v+=m.write(y.data),y=y.next;return this._readableState.buffer.clear(),v!==""&&this._readableState.buffer.push(v),this._readableState.length=v.length,this};var ne=1073741824;function $(P){return P>=ne?P=ne:(P--,P|=P>>>1,P|=P>>>2,P|=P>>>4,P|=P>>>8,P|=P>>>16,P++),P}function C(P,m){return P<=0||m.length===0&&m.ended?0:m.objectMode?1:P!==P?m.flowing&&m.length?m.buffer.head.data.length:m.length:(P>m.highWaterMark&&(m.highWaterMark=$(P)),P<=m.length?P:m.ended?m.length:(m.needReadable=!0,0))}N.prototype.read=function(P){c("read",P),P=parseInt(P,10);var m=this._readableState,y=P;if(P!==0&&(m.emittedReadable=!1),P===0&&m.needReadable&&((m.highWaterMark!==0?m.length>=m.highWaterMark:m.length>0)||m.ended))return c("read: emitReadable",m.length,m.ended),m.length===0&&m.ended?le(this):se(this),null;if(P=C(P,m),P===0&&m.ended)return m.length===0&&le(this),null;var v=m.needReadable;c("need readable",v),(m.length===0||m.length-P<m.highWaterMark)&&(v=!0,c("length less than watermark",v)),m.ended||m.reading?(v=!1,c("reading or ended",v)):v&&(c("do read"),m.reading=!0,m.sync=!0,m.length===0&&(m.needReadable=!0),this._read(m.highWaterMark),m.sync=!1,m.reading||(P=C(y,m)));var j;return P>0?j=J(P,m):j=null,j===null?(m.needReadable=m.length<=m.highWaterMark,P=0):(m.length-=P,m.awaitDrain=0),m.length===0&&(m.ended||(m.needReadable=!0),y!==P&&m.ended&&le(this)),j!==null&&this.emit("data",j),j};function Q(P,m){if(c("onEofChunk"),!m.ended){if(m.decoder){var y=m.decoder.end();y&&y.length&&(m.buffer.push(y),m.length+=m.objectMode?1:y.length)}m.ended=!0,m.sync?se(P):(m.needReadable=!1,m.emittedReadable||(m.emittedReadable=!0,ie(P)))}}function se(P){var m=P._readableState;c("emitReadable",m.needReadable,m.emittedReadable),m.needReadable=!1,m.emittedReadable||(c("emitReadable",m.flowing),m.emittedReadable=!0,process.nextTick(ie,P))}function ie(P){var m=P._readableState;c("emitReadable_",m.destroyed,m.length,m.ended),!m.destroyed&&(m.length||m.ended)&&(P.emit("readable"),m.emittedReadable=!1),m.needReadable=!m.flowing&&!m.ended&&m.length<=m.highWaterMark,oe(P)}function be(P,m){m.readingMore||(m.readingMore=!0,process.nextTick(he,P,m))}function he(P,m){for(;!m.reading&&!m.ended&&(m.length<m.highWaterMark||m.flowing&&m.length===0);){var y=m.length;if(c("maybeReadMore read 0"),P.read(0),y===m.length)break}m.readingMore=!1}N.prototype._read=function(P){I(this,new E("_read()"))},N.prototype.pipe=function(P,m){var y=this,v=this._readableState;switch(v.pipesCount){case 0:v.pipes=P;break;case 1:v.pipes=[v.pipes,P];break;default:v.pipes.push(P);break}v.pipesCount+=1,c("pipe count=%d opts=%j",v.pipesCount,m);var j=(!m||m.end!==!1)&&P!==process.stdout&&P!==process.stderr,V=j?G:W;v.endEmitted?process.nextTick(V):y.once("end",V),P.on("unpipe",q);function q(M,S){c("onunpipe"),M===y&&S&&S.hasUnpiped===!1&&(S.hasUnpiped=!0,ae())}function G(){c("onend"),P.end()}var Y=Te(y);P.on("drain",Y);var ee=!1;function ae(){c("cleanup"),P.removeListener("close",Ee),P.removeListener("finish",k),P.removeListener("drain",Y),P.removeListener("error",me),P.removeListener("unpipe",q),y.removeListener("end",G),y.removeListener("end",W),y.removeListener("data",ve),ee=!0,v.awaitDrain&&(!P._writableState||P._writableState.needDrain)&&Y()}y.on("data",ve);function ve(M){c("ondata");var S=P.write(M);c("dest.write",S),S===!1&&((v.pipesCount===1&&v.pipes===P||v.pipesCount>1&&L(v.pipes,P)!==-1)&&!ee&&(c("false write response, pause",v.awaitDrain),v.awaitDrain++),y.pause())}function me(M){c("onerror",M),W(),P.removeListener("error",me),e(P,"error")===0&&I(P,M)}U(P,"error",me);function Ee(){P.removeListener("finish",k),W()}P.once("close",Ee);function k(){c("onfinish"),P.removeListener("close",Ee),W()}P.once("finish",k);function W(){c("unpipe"),y.unpipe(P)}return P.emit("pipe",y),v.flowing||(c("pipe resume"),y.resume()),P};function Te(P){return function(){var y=P._readableState;c("pipeOnDrain",y.awaitDrain),y.awaitDrain&&y.awaitDrain--,y.awaitDrain===0&&e(P,"data")&&(y.flowing=!0,oe(P))}}N.prototype.unpipe=function(P){var m=this._readableState,y={hasUnpiped:!1};if(m.pipesCount===0)return this;if(m.pipesCount===1)return P&&P!==m.pipes?this:(P||(P=m.pipes),m.pipes=null,m.pipesCount=0,m.flowing=!1,P&&P.emit("unpipe",this,y),this);if(!P){var v=m.pipes,j=m.pipesCount;m.pipes=null,m.pipesCount=0,m.flowing=!1;for(var V=0;V<j;V++)v[V].emit("unpipe",this,{hasUnpiped:!1});return this}var q=L(m.pipes,P);return q===-1?this:(m.pipes.splice(q,1),m.pipesCount-=1,m.pipesCount===1&&(m.pipes=m.pipes[0]),P.emit("unpipe",this,y),this)},N.prototype.on=function(P,m){var y=r.prototype.on.call(this,P,m),v=this._readableState;return P==="data"?(v.readableListening=this.listenerCount("readable")>0,v.flowing!==!1&&this.resume()):P==="readable"&&!v.endEmitted&&!v.readableListening&&(v.readableListening=v.needReadable=!0,v.flowing=!1,v.emittedReadable=!1,c("on readable",v.length,v.reading),v.length?se(this):v.reading||process.nextTick(ye,this)),y},N.prototype.addListener=N.prototype.on,N.prototype.removeListener=function(P,m){var y=r.prototype.removeListener.call(this,P,m);return P==="readable"&&process.nextTick(Ne,this),y},N.prototype.removeAllListeners=function(P){var m=r.prototype.removeAllListeners.apply(this,arguments);return(P==="readable"||P===void 0)&&process.nextTick(Ne,this),m};function Ne(P){var m=P._readableState;m.readableListening=P.listenerCount("readable")>0,m.resumeScheduled&&!m.paused?m.flowing=!0:P.listenerCount("data")>0&&P.resume()}function ye(P){c("readable nexttick read 0"),P.read(0)}N.prototype.resume=function(){var P=this._readableState;return P.flowing||(c("resume"),P.flowing=!P.readableListening,ce(this,P)),P.paused=!1,this};function ce(P,m){m.resumeScheduled||(m.resumeScheduled=!0,process.nextTick(xe,P,m))}function xe(P,m){c("resume",m.reading),m.reading||P.read(0),m.resumeScheduled=!1,P.emit("resume"),oe(P),m.flowing&&!m.reading&&P.read(0)}N.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function oe(P){var m=P._readableState;for(c("flow",m.flowing);m.flowing&&P.read()!==null;);}N.prototype.wrap=function(P){var m=this,y=this._readableState,v=!1;P.on("end",function(){if(c("wrapped end"),y.decoder&&!y.ended){var q=y.decoder.end();q&&q.length&&m.push(q)}m.push(null)}),P.on("data",function(q){if(c("wrapped data"),y.decoder&&(q=y.decoder.write(q)),!(y.objectMode&&q==null)&&!(!y.objectMode&&(!q||!q.length))){var G=m.push(q);G||(v=!0,P.pause())}});for(var j in P)this[j]===void 0&&typeof P[j]=="function"&&(this[j]=function(G){return function(){return P[G].apply(P,arguments)}}(j));for(var V=0;V<D.length;V++)P.on(D[V],this.emit.bind(this,D[V]));return this._read=function(q){c("wrapped _read",q),v&&(v=!1,P.resume())},this},typeof Symbol=="function"&&(N.prototype[Symbol.asyncIterator]=function(){return A===void 0&&(A=Oie()),A(this)}),Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(N.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(N.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(m){this._readableState&&(this._readableState.flowing=m)}}),N._fromList=J,Object.defineProperty(N.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function J(P,m){if(m.length===0)return null;var y;return m.objectMode?y=m.buffer.shift():!P||P>=m.length?(m.decoder?y=m.buffer.join(""):m.buffer.length===1?y=m.buffer.first():y=m.buffer.concat(m.length),m.buffer.clear()):y=m.buffer.consume(P,m.decoder),y}function le(P){var m=P._readableState;c("endReadable",m.endEmitted),m.endEmitted||(m.ended=!0,process.nextTick(pe,m,P))}function pe(P,m){if(c("endReadableNT",P.endEmitted,P.length),!P.endEmitted&&P.length===0&&(P.endEmitted=!0,m.readable=!1,m.emit("end"),P.autoDestroy)){var y=m._writableState;(!y||y.autoDestroy&&y.finished)&&m.destroy()}}typeof Symbol=="function"&&(N.from=function(P,m){return T===void 0&&(T=Aie()),T(N,P,m)});function L(P,m){for(var y=0,v=P.length;y<v;y++)if(P[y]===m)return y;return-1}return mT}var vF=zo,Qm=Tl.codes,xie=Qm.ERR_METHOD_NOT_IMPLEMENTED,Rie=Qm.ERR_MULTIPLE_CALLBACK,Iie=Qm.ERR_TRANSFORM_ALREADY_TRANSFORMING,Pie=Qm.ERR_TRANSFORM_WITH_LENGTH_0,Gm=tf();Ef(zo,Gm);function Die(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Rie);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function zo(t){if(!(this instanceof zo))return new zo(t);Gm.call(this,t),this._transformState={afterTransform:Die.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Nie)}function Nie(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){AN(t,e,r)}):AN(this,null,null)}zo.prototype.push=function(t,e){return this._transformState.needTransform=!1,Gm.prototype.push.call(this,t,e)};zo.prototype._transform=function(t,e,r){r(new xie("_transform()"))};zo.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}};zo.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};zo.prototype._destroy=function(t,e){Gm.prototype._destroy.call(this,t,function(r){e(r)})};function AN(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Pie;if(t._transformState.transforming)throw new Iie;return t.push(null)}var jie=Dp,wF=vF;Ef(Dp,wF);function Dp(t){if(!(this instanceof Dp))return new Dp(t);wF.call(this,t)}Dp.prototype._transform=function(t,e,r){r(null,t)};var vT;function Cie(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var SF=Tl.codes,Mie=SF.ERR_MISSING_ARGS,Fie=SF.ERR_STREAM_DESTROYED;function xN(t){if(t)throw t}function Lie(t){return t.setHeader&&typeof t.abort=="function"}function Bie(t,e,r,n){n=Cie(n);var a=!1;t.on("close",function(){a=!0}),vT===void 0&&(vT=Xx),vT(t,{readable:e,writable:r},function(o){if(o)return n(o);a=!0,n()});var s=!1;return function(o){if(!a&&!s){if(s=!0,Lie(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new Fie("pipe"))}}}function RN(t){t()}function $ie(t,e){return t.pipe(e)}function Uie(t){return!t.length||typeof t[t.length-1]!="function"?xN:t.pop()}function qie(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=Uie(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Mie("streams");var a,s=e.map(function(o,u){var c=u<e.length-1,l=u>0;return Bie(o,c,l,function(d){a||(a=d),d&&s.forEach(RN),!c&&(s.forEach(RN),n(a))})});return e.reduce($ie)}var Vie=qie;(function(t,e){e=t.exports=mF(),e.Stream=e,e.Readable=e,e.Writable=_F(),e.Duplex=tf(),e.Transform=vF,e.PassThrough=jie,e.finished=Xx,e.pipeline=Vie})(EO,EO.exports);var Hie=EO.exports;Object.defineProperty(N0,"__esModule",{value:!0});N0.ReadableWebToNodeStream=void 0;const kie=Hie;class Qie extends kie.Readable{constructor(e){super(),this.bytesRead=0,this.released=!1,this.reader=e.getReader()}async _read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read();const e=await this.pendingRead;delete this.pendingRead,e.done||this.released?this.push(null):(this.bytesRead+=e.value.length,this.push(e.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}N0.ReadableWebToNodeStream=Qie;function i1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wT={exports:{}},IN;function Gie(){return IN||(IN=1,function(t,e){(function(r){t.exports=r()})(function(){return function r(n,a,s){function o(l,d){if(!a[l]){if(!n[l]){var f=typeof i1=="function"&&i1;if(!d&&f)return f(l,!0);if(u)return u(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var p=a[l]={exports:{}};n[l][0].call(p.exports,function(b){var _=n[l][1][b];return o(_||b)},p,p.exports,r,n,a,s)}return a[l].exports}for(var u=typeof i1=="function"&&i1,c=0;c<s.length;c++)o(s[c]);return o}({1:[function(r,n,a){Object.defineProperty(a,"__esModule",{value:!0});var s=r("./spec/reference-implementation/lib/readable-stream"),o=s.ReadableStream,u=r("./spec/reference-implementation/lib/writable-stream"),c=u.WritableStream,l=r("./spec/reference-implementation/lib/byte-length-queuing-strategy"),d=r("./spec/reference-implementation/lib/count-queuing-strategy"),f=r("./spec/reference-implementation/lib/transform-stream"),h=f.TransformStream;a.ByteLengthQueuingStrategy=l,a.CountQueuingStrategy=d,a.ReadableStream=o,a.WritableStream=c,a.TransformStream=h;var p={ReadableStream:o,WritableStream:c,ByteLengthQueuingStrategy:l,CountQueuingStrategy:d,TransformStream:h};a.default=p},{"./spec/reference-implementation/lib/byte-length-queuing-strategy":8,"./spec/reference-implementation/lib/count-queuing-strategy":9,"./spec/reference-implementation/lib/readable-stream":12,"./spec/reference-implementation/lib/transform-stream":13,"./spec/reference-implementation/lib/writable-stream":15}],2:[function(r,n,a){(function(s){function o($,C){if($===C)return 0;for(var Q=$.length,se=C.length,ie=0,be=Math.min(Q,se);ie<be;++ie)if($[ie]!==C[ie]){Q=$[ie],se=C[ie];break}return Q<se?-1:se<Q?1:0}function u($){return s.Buffer&&typeof s.Buffer.isBuffer=="function"?s.Buffer.isBuffer($):!($==null||!$._isBuffer)}function c($){return Object.prototype.toString.call($)}function l($){return!u($)&&typeof s.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView($):!!$&&($ instanceof DataView||!!($.buffer&&$.buffer instanceof ArrayBuffer)))}function d($){if(U.isFunction($)){if(R)return $.name;var C=$.toString().match(X);return C&&C[1]}}function f($,C){return typeof $=="string"?$.length<C?$:$.slice(0,C):$}function h($){if(R||!U.isFunction($))return U.inspect($);var C=d($);return"[Function"+(C?": "+C:"")+"]"}function p($){return f(h($.actual),128)+" "+$.operator+" "+f(h($.expected),128)}function b($,C,Q,se,ie){throw new F.AssertionError({message:Q,actual:$,expected:C,operator:se,stackStartFunction:ie})}function _($,C){$||b($,!0,C,"==",F.ok)}function E($,C,Q,se){if($===C)return!0;if(u($)&&u(C))return o($,C)===0;if(U.isDate($)&&U.isDate(C))return $.getTime()===C.getTime();if(U.isRegExp($)&&U.isRegExp(C))return $.source===C.source&&$.global===C.global&&$.multiline===C.multiline&&$.lastIndex===C.lastIndex&&$.ignoreCase===C.ignoreCase;if($!==null&&typeof $=="object"||C!==null&&typeof C=="object"){if(l($)&&l(C)&&c($)===c(C)&&!($ instanceof Float32Array||$ instanceof Float64Array))return o(new Uint8Array($.buffer),new Uint8Array(C.buffer))===0;if(u($)!==u(C))return!1;var ie=(se=se||{actual:[],expected:[]}).actual.indexOf($);return ie!==-1&&ie===se.expected.indexOf(C)||(se.actual.push($),se.expected.push(C),O($,C,Q,se))}return Q?$===C:$==C}function w($){return Object.prototype.toString.call($)=="[object Arguments]"}function O($,C,Q,se){if($==null||C===null||C===void 0)return!1;if(U.isPrimitive($)||U.isPrimitive(C))return $===C;if(Q&&Object.getPrototypeOf($)!==Object.getPrototypeOf(C))return!1;var ie=w($),be=w(C);if(ie&&!be||!ie&&be)return!1;if(ie)return $=N.call($),C=N.call(C),E($,C,Q);var he,Te,Ne=ne($),ye=ne(C);if(Ne.length!==ye.length)return!1;for(Ne.sort(),ye.sort(),Te=Ne.length-1;Te>=0;Te--)if(Ne[Te]!==ye[Te])return!1;for(Te=Ne.length-1;Te>=0;Te--)if(he=Ne[Te],!E($[he],C[he],Q,se))return!1;return!0}function A($,C,Q){E($,C,!0)&&b($,C,Q,"notDeepStrictEqual",A)}function T($,C){if(!$||!C)return!1;if(Object.prototype.toString.call(C)=="[object RegExp]")return C.test($);try{if($ instanceof C)return!0}catch{}return!Error.isPrototypeOf(C)&&C.call({},$)===!0}function I($){var C;try{$()}catch(Q){C=Q}return C}function D($,C,Q,se){var ie;if(typeof C!="function")throw new TypeError('"block" argument must be a function');typeof Q=="string"&&(se=Q,Q=null),ie=I(C),se=(Q&&Q.name?" ("+Q.name+").":".")+(se?" "+se:"."),$&&!ie&&b(ie,Q,"Missing expected exception"+se);var be=typeof se=="string",he=!$&&U.isError(ie),Te=!$&&ie&&!Q;if((he&&be&&T(ie,Q)||Te)&&b(ie,Q,"Got unwanted exception"+se),$&&ie&&Q&&!T(ie,Q)||!$&&ie)throw ie}var U=r("util/"),H=Object.prototype.hasOwnProperty,N=Array.prototype.slice,R=(function(){}).name==="foo",F=n.exports=_,X=/\s*function\s+([^\(\s]*)\s*/;F.AssertionError=function(C){this.name="AssertionError",this.actual=C.actual,this.expected=C.expected,this.operator=C.operator,C.message?(this.message=C.message,this.generatedMessage=!1):(this.message=p(this),this.generatedMessage=!0);var Q=C.stackStartFunction||b;if(Error.captureStackTrace)Error.captureStackTrace(this,Q);else{var se=new Error;if(se.stack){var ie=se.stack,be=d(Q),he=ie.indexOf(`
`+be);if(he>=0){var Te=ie.indexOf(`
`,he+1);ie=ie.substring(Te+1)}this.stack=ie}}},U.inherits(F.AssertionError,Error),F.fail=b,F.ok=_,F.equal=function(C,Q,se){C!=Q&&b(C,Q,se,"==",F.equal)},F.notEqual=function(C,Q,se){C==Q&&b(C,Q,se,"!=",F.notEqual)},F.deepEqual=function(C,Q,se){E(C,Q,!1)||b(C,Q,se,"deepEqual",F.deepEqual)},F.deepStrictEqual=function(C,Q,se){E(C,Q,!0)||b(C,Q,se,"deepStrictEqual",F.deepStrictEqual)},F.notDeepEqual=function(C,Q,se){E(C,Q,!1)&&b(C,Q,se,"notDeepEqual",F.notDeepEqual)},F.notDeepStrictEqual=A,F.strictEqual=function(C,Q,se){C!==Q&&b(C,Q,se,"===",F.strictEqual)},F.notStrictEqual=function(C,Q,se){C===Q&&b(C,Q,se,"!==",F.notStrictEqual)},F.throws=function($,C,Q){D(!0,$,C,Q)},F.doesNotThrow=function($,C,Q){D(!1,$,C,Q)},F.ifError=function($){if($)throw $};var ne=Object.keys||function($){var C=[];for(var Q in $)H.call($,Q)&&C.push(Q);return C}}).call(this,typeof g<"u"?g:typeof self<"u"?self:typeof window<"u"?window:{})},{"util/":7}],3:[function(r,n,a){},{}],4:[function(r,n,a){function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(T){if(p===setTimeout)return setTimeout(T,0);if((p===s||!p)&&setTimeout)return p=setTimeout,setTimeout(T,0);try{return p(T,0)}catch{try{return p.call(null,T,0)}catch{return p.call(this,T,0)}}}function c(T){if(b===clearTimeout)return clearTimeout(T);if((b===o||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(T);try{return b(T)}catch{try{return b.call(null,T)}catch{return b.call(this,T)}}}function l(){O&&E&&(O=!1,E.length?w=E.concat(w):A=-1,w.length&&d())}function d(){if(!O){var T=u(l);O=!0;for(var I=w.length;I;){for(E=w,w=[];++A<I;)E&&E[A].run();A=-1,I=w.length}E=null,O=!1,c(T)}}function f(T,I){this.fun=T,this.array=I}function h(){}var p,b,_=n.exports={};(function(){try{p=typeof setTimeout=="function"?setTimeout:s}catch{p=s}try{b=typeof clearTimeout=="function"?clearTimeout:o}catch{b=o}})();var E,w=[],O=!1,A=-1;_.nextTick=function(T){var I=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)I[D-1]=arguments[D];w.push(new f(T,I)),w.length!==1||O||u(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=h,_.addListener=h,_.once=h,_.off=h,_.removeListener=h,_.removeAllListeners=h,_.emit=h,_.prependListener=h,_.prependOnceListener=h,_.listeners=function(T){return[]},_.binding=function(T){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(T){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},{}],5:[function(r,n,a){typeof Object.create=="function"?n.exports=function(o,u){o.super_=u,o.prototype=Object.create(u.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(o,u){o.super_=u;var c=function(){};c.prototype=u.prototype,o.prototype=new c,o.prototype.constructor=o}},{}],6:[function(r,n,a){n.exports=function(o){return o&&typeof o=="object"&&typeof o.copy=="function"&&typeof o.fill=="function"&&typeof o.readUInt8=="function"}},{}],7:[function(r,n,a){(function(s,o){function u(ye,ce){var xe={seen:[],stylize:l};return arguments.length>=3&&(xe.depth=arguments[2]),arguments.length>=4&&(xe.colors=arguments[3]),O(ce)?xe.showHidden=ce:ce&&a._extend(xe,ce),H(xe.showHidden)&&(xe.showHidden=!1),H(xe.depth)&&(xe.depth=2),H(xe.colors)&&(xe.colors=!1),H(xe.customInspect)&&(xe.customInspect=!0),xe.colors&&(xe.stylize=c),f(xe,ye,xe.depth)}function c(ye,ce){var xe=u.styles[ce];return xe?"\x1B["+u.colors[xe][0]+"m"+ye+"\x1B["+u.colors[xe][1]+"m":ye}function l(ye,ce){return ye}function d(ye){var ce={};return ye.forEach(function(xe,oe){ce[xe]=!0}),ce}function f(ye,ce,xe){if(ye.customInspect&&ce&&ne(ce.inspect)&&ce.inspect!==a.inspect&&(!ce.constructor||ce.constructor.prototype!==ce)){var oe=ce.inspect(xe,ye);return D(oe)||(oe=f(ye,oe,xe)),oe}var J=h(ye,ce);if(J)return J;var le=Object.keys(ce),pe=d(le);if(ye.showHidden&&(le=Object.getOwnPropertyNames(ce)),X(ce)&&(le.indexOf("message")>=0||le.indexOf("description")>=0))return p(ce);if(le.length===0){if(ne(ce)){var L=ce.name?": "+ce.name:"";return ye.stylize("[Function"+L+"]","special")}if(N(ce))return ye.stylize(RegExp.prototype.toString.call(ce),"regexp");if(F(ce))return ye.stylize(Date.prototype.toString.call(ce),"date");if(X(ce))return p(ce)}var P="",m=!1,y=["{","}"];if(w(ce)&&(m=!0,y=["[","]"]),ne(ce)&&(P=" [Function"+(ce.name?": "+ce.name:"")+"]"),N(ce)&&(P=" "+RegExp.prototype.toString.call(ce)),F(ce)&&(P=" "+Date.prototype.toUTCString.call(ce)),X(ce)&&(P=" "+p(ce)),le.length===0&&(!m||ce.length==0))return y[0]+P+y[1];if(xe<0)return N(ce)?ye.stylize(RegExp.prototype.toString.call(ce),"regexp"):ye.stylize("[Object]","special");ye.seen.push(ce);var v;return v=m?b(ye,ce,xe,pe,le):le.map(function(j){return _(ye,ce,xe,pe,j,m)}),ye.seen.pop(),E(v,P,y)}function h(ye,ce){if(H(ce))return ye.stylize("undefined","undefined");if(D(ce)){var xe="'"+JSON.stringify(ce).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ye.stylize(xe,"string")}return I(ce)?ye.stylize(""+ce,"number"):O(ce)?ye.stylize(""+ce,"boolean"):A(ce)?ye.stylize("null","null"):void 0}function p(ye){return"["+Error.prototype.toString.call(ye)+"]"}function b(ye,ce,xe,oe,J){for(var le=[],pe=0,L=ce.length;pe<L;++pe)ie(ce,String(pe))?le.push(_(ye,ce,xe,oe,String(pe),!0)):le.push("");return J.forEach(function(P){P.match(/^\d+$/)||le.push(_(ye,ce,xe,oe,P,!0))}),le}function _(ye,ce,xe,oe,J,le){var pe,L,P;if((P=Object.getOwnPropertyDescriptor(ce,J)||{value:ce[J]}).get?L=P.set?ye.stylize("[Getter/Setter]","special"):ye.stylize("[Getter]","special"):P.set&&(L=ye.stylize("[Setter]","special")),ie(oe,J)||(pe="["+J+"]"),L||(ye.seen.indexOf(P.value)<0?(L=A(xe)?f(ye,P.value,null):f(ye,P.value,xe-1)).indexOf(`
`)>-1&&(L=le?L.split(`
`).map(function(m){return"  "+m}).join(`
`).substr(2):`
`+L.split(`
`).map(function(m){return"   "+m}).join(`
`)):L=ye.stylize("[Circular]","special")),H(pe)){if(le&&J.match(/^\d+$/))return L;(pe=JSON.stringify(""+J)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(pe=pe.substr(1,pe.length-2),pe=ye.stylize(pe,"name")):(pe=pe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),pe=ye.stylize(pe,"string"))}return pe+": "+L}function E(ye,ce,xe){var oe=0;return ye.reduce(function(J,le){return oe++,le.indexOf(`
`)>=0&&oe++,J+le.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?xe[0]+(ce===""?"":ce+`
 `)+" "+ye.join(`,
  `)+" "+xe[1]:xe[0]+ce+" "+ye.join(", ")+" "+xe[1]}function w(ye){return Array.isArray(ye)}function O(ye){return typeof ye=="boolean"}function A(ye){return ye===null}function T(ye){return ye==null}function I(ye){return typeof ye=="number"}function D(ye){return typeof ye=="string"}function U(ye){return typeof ye=="symbol"}function H(ye){return ye===void 0}function N(ye){return R(ye)&&C(ye)==="[object RegExp]"}function R(ye){return typeof ye=="object"&&ye!==null}function F(ye){return R(ye)&&C(ye)==="[object Date]"}function X(ye){return R(ye)&&(C(ye)==="[object Error]"||ye instanceof Error)}function ne(ye){return typeof ye=="function"}function $(ye){return ye===null||typeof ye=="boolean"||typeof ye=="number"||typeof ye=="string"||typeof ye=="symbol"||ye===void 0}function C(ye){return Object.prototype.toString.call(ye)}function Q(ye){return ye<10?"0"+ye.toString(10):ye.toString(10)}function se(){var ye=new Date,ce=[Q(ye.getHours()),Q(ye.getMinutes()),Q(ye.getSeconds())].join(":");return[ye.getDate(),Ne[ye.getMonth()],ce].join(" ")}function ie(ye,ce){return Object.prototype.hasOwnProperty.call(ye,ce)}var be=/%[sdj%]/g;a.format=function(ye){if(!D(ye)){for(var ce=[],xe=0;xe<arguments.length;xe++)ce.push(u(arguments[xe]));return ce.join(" ")}for(var xe=1,oe=arguments,J=oe.length,le=String(ye).replace(be,function(P){if(P==="%%")return"%";if(xe>=J)return P;switch(P){case"%s":return String(oe[xe++]);case"%d":return Number(oe[xe++]);case"%j":try{return JSON.stringify(oe[xe++])}catch{return"[Circular]"}default:return P}}),pe=oe[xe];xe<J;pe=oe[++xe])A(pe)||!R(pe)?le+=" "+pe:le+=" "+u(pe);return le},a.deprecate=function(ye,ce){if(H(o.process))return function(){return a.deprecate(ye,ce).apply(this,arguments)};if(s.noDeprecation===!0)return ye;var xe=!1;return function(){if(!xe){if(s.throwDeprecation)throw new Error(ce);s.traceDeprecation?console.trace(ce):console.error(ce),xe=!0}return ye.apply(this,arguments)}};var he,Te={};a.debuglog=function(ye){if(H(he)&&(he={}.NODE_DEBUG||""),ye=ye.toUpperCase(),!Te[ye])if(new RegExp("\\b"+ye+"\\b","i").test(he)){var ce=s.pid;Te[ye]=function(){var xe=a.format.apply(a,arguments);console.error("%s %d: %s",ye,ce,xe)}}else Te[ye]=function(){};return Te[ye]},a.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},a.isArray=w,a.isBoolean=O,a.isNull=A,a.isNullOrUndefined=T,a.isNumber=I,a.isString=D,a.isSymbol=U,a.isUndefined=H,a.isRegExp=N,a.isObject=R,a.isDate=F,a.isError=X,a.isFunction=ne,a.isPrimitive=$,a.isBuffer=r("./support/isBuffer");var Ne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.log=function(){console.log("%s - %s",se(),a.format.apply(a,arguments))},a.inherits=r("inherits"),a._extend=function(ye,ce){if(!ce||!R(ce))return ye;for(var xe=Object.keys(ce),oe=xe.length;oe--;)ye[xe[oe]]=ce[xe[oe]];return ye}}).call(this,r("_process"),typeof g<"u"?g:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":6,_process:4,inherits:5}],8:[function(r,n,a){function s(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(){function l(d,f){for(var h=0;h<f.length;h++){var p=f[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,f,h){return f&&l(d.prototype,f),h&&l(d,h),d}}(),u=r("./helpers.js"),c=u.createDataProperty;n.exports=function(){function l(d){var f=d.highWaterMark;s(this,l),c(this,"highWaterMark",f)}return o(l,[{key:"size",value:function(f){return f.byteLength}}]),l}()},{"./helpers.js":10}],9:[function(r,n,a){function s(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(){function l(d,f){for(var h=0;h<f.length;h++){var p=f[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,f,h){return f&&l(d.prototype,f),h&&l(d,h),d}}(),u=r("./helpers.js"),c=u.createDataProperty;n.exports=function(){function l(d){var f=d.highWaterMark;s(this,l),c(this,"highWaterMark",f)}return o(l,[{key:"size",value:function(){return 1}}]),l}()},{"./helpers.js":10}],10:[function(r,n,a){function s(l,d,f){if(typeof l!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(l,d,f)}function o(l,d,f){try{return Promise.resolve(s(l,d,f))}catch(h){return Promise.reject(h)}}var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l};r("better-assert");var c=Symbol('is "detached" for our purposes');a.typeIsObject=function(l){return(l===void 0?"undefined":u(l))==="object"&&l!==null||typeof l=="function"},a.createDataProperty=function(l,d,f){Object.defineProperty(l,d,{value:f,writable:!0,enumerable:!0,configurable:!0})},a.createArrayFromList=function(l){return l.slice()},a.ArrayBufferCopy=function(l,d,f,h,p){new Uint8Array(l).set(new Uint8Array(f,h,p),d)},a.CreateIterResultObject=function(l,d){var f={};return Object.defineProperty(f,"value",{value:l,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(f,"done",{value:d,enumerable:!0,writable:!0,configurable:!0}),f},a.IsFiniteNonNegativeNumber=function(l){return a.IsNonNegativeNumber(l)!==!1&&l!==1/0},a.IsNonNegativeNumber=function(l){return typeof l=="number"&&!Number.isNaN(l)&&!(l<0)},a.Call=s,a.CreateAlgorithmFromUnderlyingMethod=function(l,d,f,h){var p=l[d];if(p!==void 0){if(typeof p!="function")throw new TypeError(p+" is not a method");switch(f){case 0:return function(){return o(p,l,h)};case 1:return function(b){var _=[b].concat(h);return o(p,l,_)}}}return function(){return Promise.resolve()}},a.InvokeOrNoop=function(l,d,f){var h=l[d];if(h!==void 0)return s(h,l,f)},a.PromiseCall=o,a.TransferArrayBuffer=function(l){var d=l.slice();return Object.defineProperty(l,"byteLength",{get:function(){return 0}}),l[c]=!0,d},a.IsDetachedBuffer=function(l){return c in l},a.ValidateAndNormalizeHighWaterMark=function(l){if(l=Number(l),Number.isNaN(l)||l<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return l},a.MakeSizeAlgorithmFromSizeFunction=function(l){if(l===void 0)return function(){return 1};if(typeof l!="function")throw new TypeError("size property of a queuing strategy must be a function");return function(d){return l(d)}}},{"better-assert":16}],11:[function(r,n,a){r("better-assert");var s=r("./helpers.js"),o=s.IsFiniteNonNegativeNumber;a.DequeueValue=function(u){var c=u._queue.shift();return u._queueTotalSize-=c.size,u._queueTotalSize<0&&(u._queueTotalSize=0),c.value},a.EnqueueValueWithSize=function(u,c,l){if(l=Number(l),!o(l))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");u._queue.push({value:c,size:l}),u._queueTotalSize+=l},a.PeekQueueValue=function(u){return u._queue[0].value},a.ResetQueue=function(u){u._queue=[],u._queueTotalSize=0}},{"./helpers.js":10,"better-assert":16}],12:[function(r,n,a){function s(te,de){if(!(te instanceof de))throw new TypeError("Cannot call a class as a function")}function o(te){return new qn(te)}function u(te){return new ai(te)}function c(te,de,_e){var $e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,He=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return 1},Xe=Object.create(Da.prototype);return d(Xe),J(Xe,Object.create(su.prototype),te,de,_e,$e,He),Xe}function l(te,de,_e){var $e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,He=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,Xe=Object.create(Da.prototype);return d(Xe),we(Xe,Object.create(jl.prototype),te,de,_e,$e,He),Xe}function d(te){te._state="readable",te._reader=void 0,te._storedError=void 0,te._disturbed=!1}function f(te){return!!bn(te)&&!!Object.prototype.hasOwnProperty.call(te,"_readableStreamController")}function h(te){return te._disturbed}function p(te){return te._reader!==void 0}function b(te,de){function _e(){return Q(He).then(function(Rn){var oi=Rn.value;if(Rn.done===!0&&Xe===!1&&(mt===!1&&he(Kt._readableStreamController),Bt===!1&&he(vr._readableStreamController),Xe=!0),Xe!==!0){var ja=oi,_n=oi;mt===!1&&Te(Kt._readableStreamController,ja),Bt===!1&&Te(vr._readableStreamController,_n)}})}function $e(){}var He=u(te),Xe=!1,mt=!1,Bt=!1,er=void 0,Dr=void 0,Kt=void 0,vr=void 0,si=void 0,Vn=new Promise(function(Rn){si=Rn});return Kt=c($e,_e,function(oi){if(mt=!0,er=oi,Bt===!0){var ja=ke([er,Dr]),_n=w(te,ja);si(_n)}return Vn}),vr=c($e,_e,function(oi){if(Bt=!0,Dr=oi,mt===!0){var ja=ke([er,Dr]),_n=w(te,ja);si(_n)}return Vn}),He._closedPromise.catch(function(Rn){Xe!==!0&&(ye(Kt._readableStreamController,Rn),ye(vr._readableStreamController,Rn),Xe=!0)}),[Kt,vr]}function _(te){return new Promise(function(de,_e){var $e={_resolve:de,_reject:_e};te._reader._readIntoRequests.push($e)})}function E(te){return new Promise(function(de,_e){var $e={_resolve:de,_reject:_e};te._reader._readRequests.push($e)})}function w(te,de){return te._disturbed=!0,te._state==="closed"?Promise.resolve(void 0):te._state==="errored"?Promise.reject(te._storedError):(O(te),te._readableStreamController[Zr](de).then(function(){}))}function O(te){te._state="closed";var de=te._reader;if(de!==void 0){if(F(de)===!0){var _e=!0,$e=!1,He=void 0;try{for(var Xe,mt=de._readRequests[Symbol.iterator]();!(_e=(Xe=mt.next()).done);_e=!0)(0,Xe.value._resolve)(De(void 0,!0))}catch(Bt){$e=!0,He=Bt}finally{try{!_e&&mt.return&&mt.return()}finally{if($e)throw He}}de._readRequests=[]}Pr(de)}}function A(te,de){te._state="errored",te._storedError=de;var _e=te._reader;if(_e!==void 0){if(F(_e)===!0){var $e=!0,He=!1,Xe=void 0;try{for(var mt,Bt=_e._readRequests[Symbol.iterator]();!($e=(mt=Bt.next()).done);$e=!0)mt.value._reject(de)}catch(Vn){He=!0,Xe=Vn}finally{try{!$e&&Bt.return&&Bt.return()}finally{if(He)throw Xe}}_e._readRequests=[]}else{var er=!0,Dr=!1,Kt=void 0;try{for(var vr,si=_e._readIntoRequests[Symbol.iterator]();!(er=(vr=si.next()).done);er=!0)vr.value._reject(de)}catch(Vn){Dr=!0,Kt=Vn}finally{try{!er&&si.return&&si.return()}finally{if(Dr)throw Kt}}_e._readIntoRequests=[]}Qt(_e,de),_e._closedPromise.catch(function(){})}}function T(te,de,_e){te._reader._readIntoRequests.shift()._resolve(De(de,_e))}function I(te,de,_e){te._reader._readRequests.shift()._resolve(De(de,_e))}function D(te){return te._reader._readIntoRequests.length}function U(te){return te._reader._readRequests.length}function H(te){var de=te._reader;return de!==void 0&&R(de)!==!1}function N(te){var de=te._reader;return de!==void 0&&F(de)!==!1}function R(te){return!!bn(te)&&!!Object.prototype.hasOwnProperty.call(te,"_readIntoRequests")}function F(te){return!!bn(te)&&!!Object.prototype.hasOwnProperty.call(te,"_readRequests")}function X(te,de){te._ownerReadableStream=de,de._reader=te,de._state==="readable"?Wr(te):de._state==="closed"?Br(te):(br(te,de._storedError),te._closedPromise.catch(function(){}))}function ne(te,de){return w(te._ownerReadableStream,de)}function $(te){te._ownerReadableStream._state==="readable"?Qt(te,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):_r(te,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),te._closedPromise.catch(function(){}),te._ownerReadableStream._reader=void 0,te._ownerReadableStream=void 0}function C(te,de){var _e=te._ownerReadableStream;return _e._disturbed=!0,_e._state==="errored"?Promise.reject(_e._storedError):ae(_e._readableStreamController,de)}function Q(te){var de=te._ownerReadableStream;return de._disturbed=!0,de._state==="closed"?Promise.resolve(De(void 0,!0)):de._state==="errored"?Promise.reject(de._storedError):de._readableStreamController[bs]()}function se(te){return!!bn(te)&&!!Object.prototype.hasOwnProperty.call(te,"_controlledReadableStream")}function ie(te){be(te)!==!1&&(te._pulling!==!0?(te._pulling=!0,te._pullAlgorithm().then(function(){if(te._pulling=!1,te._pullAgain===!0)return te._pullAgain=!1,ie(te)},function(de){ye(te,de)}).catch(mr)):te._pullAgain=!0)}function be(te){var de=te._controlledReadableStream;return oe(te)!==!1&&te._started!==!1&&(p(de)===!0&&U(de)>0||ce(te)>0)}function he(te){var de=te._controlledReadableStream;te._closeRequested=!0,te._queue.length===0&&O(de)}function Te(te,de){var _e=te._controlledReadableStream;if(p(_e)===!0&&U(_e)>0)I(_e,de,!1);else{var $e=void 0;try{$e=te._strategySizeAlgorithm(de)}catch(He){throw ye(te,He),He}try{ha(te,de,$e)}catch(He){throw ye(te,He),He}}ie(te)}function Ne(te,de){var _e=te._controlledReadableStream;Hi(te),A(_e,de)}function ye(te,de){te._controlledReadableStream._state==="readable"&&Ne(te,de)}function ce(te){var de=te._controlledReadableStream._state;return de==="errored"?null:de==="closed"?0:te._strategyHWM-te._queueTotalSize}function xe(te){return be(te)!==!0}function oe(te){var de=te._controlledReadableStream._state;return te._closeRequested===!1&&de==="readable"}function J(te,de,_e,$e,He,Xe,mt){de._controlledReadableStream=te,de._queue=void 0,de._queueTotalSize=void 0,Hi(de),de._started=!1,de._closeRequested=!1,de._pullAgain=!1,de._pulling=!1,de._strategySizeAlgorithm=mt,de._strategyHWM=Xe,de._pullAlgorithm=$e,de._cancelAlgorithm=He,te._readableStreamController=de;var Bt=_e();Promise.resolve(Bt).then(function(){de._started=!0,ie(de)},function(er){ye(de,er)}).catch(mr)}function le(te,de,_e,$e){var He=Object.create(su.prototype),Xe=ze(de,"pull",0,[He]),mt=ze(de,"cancel",1,[]);J(te,He,function(){return Ye(de,"start",[He])},Xe,mt,_e,$e)}function pe(te){return!!bn(te)&&!!Object.prototype.hasOwnProperty.call(te,"_controlledReadableByteStream")}function L(te){return!!bn(te)&&!!Object.prototype.hasOwnProperty.call(te,"_associatedReadableByteStreamController")}function P(te){W(te)!==!1&&(te._pulling!==!0?(te._pulling=!0,te._pullAlgorithm().then(function(){te._pulling=!1,te._pullAgain===!0&&(te._pullAgain=!1,P(te))},function(de){te._controlledReadableByteStream._state==="readable"&&x(te,de)}).catch(mr)):te._pullAgain=!0)}function m(te){Y(te),te._pendingPullIntos=[]}function y(te,de){var _e=!1;te._state==="closed"&&(_e=!0);var $e=v(de);de.readerType==="default"?I(te,$e,_e):T(te,$e,_e)}function v(te){var de=te.bytesFilled,_e=te.elementSize;return new te.ctor(te.buffer,te.byteOffset,de/_e)}function j(te,de,_e,$e){te._queue.push({buffer:de,byteOffset:_e,byteLength:$e}),te._queueTotalSize+=$e}function V(te,de){var _e=de.elementSize,$e=de.bytesFilled-de.bytesFilled%_e,He=Math.min(te._queueTotalSize,de.byteLength-de.bytesFilled),Xe=de.bytesFilled+He,mt=Xe-Xe%_e,Bt=He,er=!1;mt>$e&&(Bt=mt-de.bytesFilled,er=!0);for(var Dr=te._queue;Bt>0;){var Kt=Dr[0],vr=Math.min(Bt,Kt.byteLength),si=de.byteOffset+de.bytesFilled;Ae(de.buffer,si,Kt.buffer,Kt.byteOffset,vr),Kt.byteLength===vr?Dr.shift():(Kt.byteOffset+=vr,Kt.byteLength-=vr),te._queueTotalSize-=vr,q(te,vr,de),Bt-=vr}return er}function q(te,de,_e){Y(te),_e.bytesFilled+=de}function G(te){te._queueTotalSize===0&&te._closeRequested===!0?O(te._controlledReadableByteStream):P(te)}function Y(te){te._byobRequest!==void 0&&(te._byobRequest._associatedReadableByteStreamController=void 0,te._byobRequest._view=void 0,te._byobRequest=void 0)}function ee(te){for(;te._pendingPullIntos.length>0;){if(te._queueTotalSize===0)return;var de=te._pendingPullIntos[0];V(te,de)===!0&&(k(te),y(te._controlledReadableByteStream,de))}}function ae(te,de){var _e=te._controlledReadableByteStream,$e=1;de.constructor!==DataView&&($e=de.constructor.BYTES_PER_ELEMENT);var He=de.constructor,Xe={buffer:at(de.buffer),byteOffset:de.byteOffset,byteLength:de.byteLength,bytesFilled:0,elementSize:$e,ctor:He,readerType:"byob"};if(te._pendingPullIntos.length>0)return te._pendingPullIntos.push(Xe),_(_e);if(_e._state==="closed"){var mt=new de.constructor(Xe.buffer,Xe.byteOffset,0);return Promise.resolve(De(mt,!0))}if(te._queueTotalSize>0){if(V(te,Xe)===!0){var Bt=v(Xe);return G(te),Promise.resolve(De(Bt,!1))}if(te._closeRequested===!0){var er=new TypeError("Insufficient bytes to fill elements in the given buffer");return x(te,er),Promise.reject(er)}}te._pendingPullIntos.push(Xe);var Dr=_(_e);return P(te),Dr}function ve(te,de){de.buffer=at(de.buffer);var _e=te._controlledReadableByteStream;if(H(_e)===!0)for(;D(_e)>0;)y(_e,k(te))}function me(te,de,_e){if(_e.bytesFilled+de>_e.byteLength)throw new RangeError("bytesWritten out of range");if(q(te,de,_e),!(_e.bytesFilled<_e.elementSize)){k(te);var $e=_e.bytesFilled%_e.elementSize;if($e>0){var He=_e.byteOffset+_e.bytesFilled,Xe=_e.buffer.slice(He-$e,He);j(te,Xe,0,Xe.byteLength)}_e.buffer=at(_e.buffer),_e.bytesFilled-=$e,y(te._controlledReadableByteStream,_e),ee(te)}}function Ee(te,de){var _e=te._pendingPullIntos[0];if(te._controlledReadableByteStream._state==="closed"){if(de!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");ve(te,_e)}else me(te,de,_e)}function k(te){var de=te._pendingPullIntos.shift();return Y(te),de}function W(te){var de=te._controlledReadableByteStream;return de._state==="readable"&&te._closeRequested!==!0&&te._started!==!1&&(N(de)===!0&&U(de)>0||H(de)===!0&&D(de)>0||z(te)>0)}function M(te){var de=te._controlledReadableByteStream;if(te._queueTotalSize>0)te._closeRequested=!0;else{if(te._pendingPullIntos.length>0&&te._pendingPullIntos[0].bytesFilled>0){var _e=new TypeError("Insufficient bytes to fill elements in the given buffer");throw x(te,_e),_e}O(de)}}function S(te,de){var _e=te._controlledReadableByteStream,$e=de.buffer,He=de.byteOffset,Xe=de.byteLength,mt=at($e);N(_e)===!0?U(_e)===0?j(te,mt,He,Xe):I(_e,new Uint8Array(mt,He,Xe),!1):H(_e)===!0?(j(te,mt,He,Xe),ee(te)):j(te,mt,He,Xe)}function x(te,de){var _e=te._controlledReadableByteStream;m(te),Hi(te),A(_e,de)}function z(te){var de=te._controlledReadableByteStream._state;return de==="errored"?null:de==="closed"?0:te._strategyHWM-te._queueTotalSize}function ue(te,de){if(de=Number(de),Be(de)===!1)throw new RangeError("bytesWritten must be a finite");Ee(te,de)}function ge(te,de){var _e=te._pendingPullIntos[0];if(_e.byteOffset+_e.bytesFilled!==de.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(_e.byteLength!==de.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");_e.buffer=de.buffer,Ee(te,de.byteLength)}function we(te,de,_e,$e,He,Xe,mt){de._controlledReadableByteStream=te,de._pullAgain=!1,de._pulling=!1,m(de),de._queue=de._queueTotalSize=void 0,Hi(de),de._closeRequested=!1,de._started=!1,de._strategyHWM=qe(Xe),de._pullAlgorithm=$e,de._cancelAlgorithm=He,de._autoAllocateChunkSize=mt,de._pendingPullIntos=[],te._readableStreamController=de;var Bt=_e();Promise.resolve(Bt).then(function(){de._started=!0,P(de)},function(er){te._state==="readable"&&x(de,er)}).catch(mr)}function Me(te,de,_e){var $e=Object.create(jl.prototype),He=ze(de,"pull",0,[$e]),Xe=ze(de,"cancel",1,[]),mt=de.autoAllocateChunkSize;if(mt!==void 0&&(Number.isInteger(mt)===!1||mt<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");we(te,$e,function(){return Ye(de,"start",[$e])},He,Xe,_e,mt)}function Ue(te,de,_e){te._associatedReadableByteStreamController=de,te._view=_e}function Ge(te){return new TypeError("ReadableStream.prototype."+te+" can only be used on a ReadableStream")}function We(te){return new TypeError("Cannot "+te+" a stream using a released reader")}function lt(te){return new TypeError("ReadableStreamDefaultReader.prototype."+te+" can only be used on a ReadableStreamDefaultReader")}function Wr(te){te._closedPromise=new Promise(function(de,_e){te._closedPromise_resolve=de,te._closedPromise_reject=_e})}function br(te,de){te._closedPromise=Promise.reject(de),te._closedPromise_resolve=void 0,te._closedPromise_reject=void 0}function Br(te){te._closedPromise=Promise.resolve(void 0),te._closedPromise_resolve=void 0,te._closedPromise_reject=void 0}function Qt(te,de){te._closedPromise_reject(de),te._closedPromise_resolve=void 0,te._closedPromise_reject=void 0}function _r(te,de){te._closedPromise=Promise.reject(de)}function Pr(te){te._closedPromise_resolve(void 0),te._closedPromise_resolve=void 0,te._closedPromise_reject=void 0}function kr(te){return new TypeError("ReadableStreamBYOBReader.prototype."+te+" can only be used on a ReadableStreamBYOBReader")}function xn(te){return new TypeError("ReadableStreamDefaultController.prototype."+te+" can only be used on a ReadableStreamDefaultController")}function Et(te){return new TypeError("ReadableStreamBYOBRequest.prototype."+te+" can only be used on a ReadableStreamBYOBRequest")}function B(te){return new TypeError("ReadableByteStreamController.prototype."+te+" can only be used on a ReadableByteStreamController")}function re(te){try{Promise.prototype.then.call(te,void 0,function(){})}catch{}}var Se=function(){function te(de,_e){for(var $e=0;$e<_e.length;$e++){var He=_e[$e];He.enumerable=He.enumerable||!1,He.configurable=!0,"value"in He&&(He.writable=!0),Object.defineProperty(de,He.key,He)}}return function(de,_e,$e){return _e&&te(de.prototype,_e),$e&&te(de,$e),de}}();r("better-assert");var Fe=r("./helpers.js"),Ae=Fe.ArrayBufferCopy,ze=Fe.CreateAlgorithmFromUnderlyingMethod,De=Fe.CreateIterResultObject,Be=Fe.IsFiniteNonNegativeNumber,Ye=Fe.InvokeOrNoop,Pt=Fe.IsDetachedBuffer,at=Fe.TransferArrayBuffer,qe=Fe.ValidateAndNormalizeHighWaterMark;Fe.IsNonNegativeNumber;var ys=Fe.MakeSizeAlgorithmFromSizeFunction,ke=Fe.createArrayFromList,bn=Fe.typeIsObject,gr=r("./utils.js"),mr=gr.rethrowAssertionErrorRejection,Pi=r("./queue-with-sizes.js"),wt=Pi.DequeueValue,ha=Pi.EnqueueValueWithSize,Hi=Pi.ResetQueue,ir=r("./writable-stream.js"),io=ir.AcquireWritableStreamDefaultWriter,au=ir.IsWritableStream,Xr=ir.IsWritableStreamLocked,Di=ir.WritableStreamAbort,sn=ir.WritableStreamDefaultWriterCloseWithErrorPropagation,ki=ir.WritableStreamDefaultWriterRelease,on=ir.WritableStreamDefaultWriterWrite,Pa=ir.WritableStreamCloseQueuedOrInFlight,Zr=Symbol("[[CancelSteps]]"),bs=Symbol("[[PullSteps]]"),Da=function(){function te(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$e=_e.size,He=_e.highWaterMark;s(this,te),d(this);var Xe=de.type;if(String(Xe)==="bytes"){if(He===void 0&&(He=0),He=qe(He),$e!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");Me(this,de,He)}else{if(Xe!==void 0)throw new RangeError("Invalid type is specified");He===void 0&&(He=1),le(this,de,He=qe(He),ys($e))}}return Se(te,[{key:"cancel",value:function(_e){return f(this)===!1?Promise.reject(Ge("cancel")):p(this)===!0?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):w(this,_e)}},{key:"getReader",value:function(){var _e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).mode;if(f(this)===!1)throw Ge("getReader");if(_e===void 0)return u(this);if((_e=String(_e))==="byob")return o(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(_e,$e){var He=_e.writable,Xe=_e.readable;if(He===void 0||Xe===void 0)throw new TypeError("readable and writable arguments must be defined");return re(this.pipeTo(He,$e)),Xe}},{key:"pipeTo",value:function(_e){var $e=this,He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Xe=He.preventClose,mt=He.preventAbort,Bt=He.preventCancel;if(f(this)===!1)return Promise.reject(Ge("pipeTo"));if(au(_e)===!1)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(Xe=!!Xe,mt=!!mt,Bt=!!Bt,p(this)===!0)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(Xr(_e)===!0)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var er=u(this),Dr=io(_e),Kt=!1,vr=Promise.resolve();return new Promise(function(si,Vn){function Rn(){return Kt===!0?Promise.resolve():Dr._readyPromise.then(function(){return Q(er).then(function(Gt){var gn=Gt.value;Gt.done!==!0&&(vr=on(Dr,gn).catch(function(){}))})}).then(Rn)}function oi(){var Gt=vr;return vr.then(function(){return Gt!==vr?oi():void 0})}function ja(Gt,gn,so){Gt._state==="errored"?so(Gt._storedError):gn.catch(so).catch(mr)}function _n(Gt,gn,so){function ou(){Gt().then(function(){return dc(gn,so)},function(gy){return dc(!0,gy)}).catch(mr)}Kt!==!0&&(Kt=!0,_e._state==="writable"&&Pa(_e)===!1?oi().then(ou):ou())}function ao(Gt,gn){Kt!==!0&&(Kt=!0,_e._state==="writable"&&Pa(_e)===!1?oi().then(function(){return dc(Gt,gn)}).catch(mr):dc(Gt,gn))}function dc(Gt,gn){ki(Dr),$(er),Gt?Vn(gn):si(void 0)}if(ja($e,er._closedPromise,function(Gt){mt===!1?_n(function(){return Di(_e,Gt)},!0,Gt):ao(!0,Gt)}),ja(_e,Dr._closedPromise,function(Gt){Bt===!1?_n(function(){return w($e,Gt)},!0,Gt):ao(!0,Gt)}),function(gn,so,ou){gn._state==="closed"?ou():so.then(ou).catch(mr)}($e,er._closedPromise,function(){Xe===!1?_n(function(){return sn(Dr)}):ao()}),Pa(_e)===!0||_e._state==="closed"){var fc=new TypeError("the destination writable stream closed before all data could be piped to it");Bt===!1?_n(function(){return w($e,fc)},!0,fc):ao(!0,fc)}Rn().catch(function(Gt){vr=Promise.resolve(),mr(Gt)})})}},{key:"tee",value:function(){if(f(this)===!1)throw Ge("tee");var _e=b(this);return ke(_e)}},{key:"locked",get:function(){if(f(this)===!1)throw Ge("locked");return p(this)}}]),te}();n.exports={CreateReadableByteStream:l,CreateReadableStream:c,ReadableStream:Da,IsReadableStreamDisturbed:h,ReadableStreamDefaultControllerClose:he,ReadableStreamDefaultControllerEnqueue:Te,ReadableStreamDefaultControllerError:Ne,ReadableStreamDefaultControllerGetDesiredSize:ce,ReadableStreamDefaultControllerHasBackpressure:xe,ReadableStreamDefaultControllerCanCloseOrEnqueue:oe};var ai=function(){function te(de){if(s(this,te),f(de)===!1)throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(p(de)===!0)throw new TypeError("This stream has already been locked for exclusive reading by another reader");X(this,de),this._readRequests=[]}return Se(te,[{key:"cancel",value:function(_e){return F(this)===!1?Promise.reject(lt("cancel")):this._ownerReadableStream===void 0?Promise.reject(We("cancel")):ne(this,_e)}},{key:"read",value:function(){return F(this)===!1?Promise.reject(lt("read")):this._ownerReadableStream===void 0?Promise.reject(We("read from")):Q(this)}},{key:"releaseLock",value:function(){if(F(this)===!1)throw lt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");$(this)}}},{key:"closed",get:function(){return F(this)===!1?Promise.reject(lt("closed")):this._closedPromise}}]),te}(),qn=function(){function te(de){if(s(this,te),!f(de))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(pe(de._readableStreamController)===!1)throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(p(de))throw new TypeError("This stream has already been locked for exclusive reading by another reader");X(this,de),this._readIntoRequests=[]}return Se(te,[{key:"cancel",value:function(_e){return R(this)?this._ownerReadableStream===void 0?Promise.reject(We("cancel")):ne(this,_e):Promise.reject(kr("cancel"))}},{key:"read",value:function(_e){return R(this)?this._ownerReadableStream===void 0?Promise.reject(We("read from")):ArrayBuffer.isView(_e)?Pt(_e.buffer)===!0?Promise.reject(new TypeError("Cannot read into a view onto a detached ArrayBuffer")):_e.byteLength===0?Promise.reject(new TypeError("view must have non-zero byteLength")):C(this,_e):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(kr("read"))}},{key:"releaseLock",value:function(){if(!R(this))throw kr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");$(this)}}},{key:"closed",get:function(){return R(this)?this._closedPromise:Promise.reject(kr("closed"))}}]),te}(),su=function(){function te(){throw s(this,te),new TypeError}return Se(te,[{key:"close",value:function(){if(se(this)===!1)throw xn("close");if(oe(this)===!1)throw new TypeError("The stream is not in a state that permits close");he(this)}},{key:"enqueue",value:function(_e){if(se(this)===!1)throw xn("enqueue");if(oe(this)===!1)throw new TypeError("The stream is not in a state that permits enqueue");return Te(this,_e)}},{key:"error",value:function(_e){if(se(this)===!1)throw xn("error");var $e=this._controlledReadableStream;if($e._state!=="readable")throw new TypeError("The stream is "+$e._state+" and so cannot be errored");Ne(this,_e)}},{key:Zr,value:function(_e){return Hi(this),this._cancelAlgorithm(_e)}},{key:bs,value:function(){var _e=this._controlledReadableStream;if(this._queue.length>0){var $e=wt(this);return this._closeRequested===!0&&this._queue.length===0?O(_e):ie(this),Promise.resolve(De($e,!1))}var He=E(_e);return ie(this),He}},{key:"desiredSize",get:function(){if(se(this)===!1)throw xn("desiredSize");return ce(this)}}]),te}(),Na=function(){function te(){throw s(this,te),new TypeError("ReadableStreamBYOBRequest cannot be used directly")}return Se(te,[{key:"respond",value:function(_e){if(L(this)===!1)throw Et("respond");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Pt(this._view.buffer)===!0)throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");ue(this._associatedReadableByteStreamController,_e)}},{key:"respondWithNewView",value:function(_e){if(L(this)===!1)throw Et("respond");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(_e))throw new TypeError("You can only respond with array buffer views");if(Pt(_e.buffer)===!0)throw new TypeError("The supplied view's buffer has been detached and so cannot be used as a response");ge(this._associatedReadableByteStreamController,_e)}},{key:"view",get:function(){if(L(this)===!1)throw Et("view");return this._view}}]),te}(),jl=function(){function te(){throw s(this,te),new TypeError("ReadableByteStreamController constructor cannot be used directly")}return Se(te,[{key:"close",value:function(){if(pe(this)===!1)throw B("close");if(this._closeRequested===!0)throw new TypeError("The stream has already been closed; do not close it again!");var _e=this._controlledReadableByteStream._state;if(_e!=="readable")throw new TypeError("The stream (in "+_e+" state) is not in the readable state and cannot be closed");M(this)}},{key:"enqueue",value:function(_e){if(pe(this)===!1)throw B("enqueue");if(this._closeRequested===!0)throw new TypeError("stream is closed or draining");var $e=this._controlledReadableByteStream._state;if($e!=="readable")throw new TypeError("The stream (in "+$e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(_e))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");if(Pt(_e.buffer)===!0)throw new TypeError("Cannot enqueue a view onto a detached ArrayBuffer");S(this,_e)}},{key:"error",value:function(_e){if(pe(this)===!1)throw B("error");var $e=this._controlledReadableByteStream;if($e._state!=="readable")throw new TypeError("The stream is "+$e._state+" and so cannot be errored");x(this,_e)}},{key:Zr,value:function(_e){return this._pendingPullIntos.length>0&&(this._pendingPullIntos[0].bytesFilled=0),Hi(this),this._cancelAlgorithm(_e)}},{key:bs,value:function(){var _e=this._controlledReadableByteStream;if(this._queueTotalSize>0){var $e=this._queue.shift();this._queueTotalSize-=$e.byteLength,G(this);var He=void 0;try{He=new Uint8Array($e.buffer,$e.byteOffset,$e.byteLength)}catch(Dr){return Promise.reject(Dr)}return Promise.resolve(De(He,!1))}var Xe=this._autoAllocateChunkSize;if(Xe!==void 0){var mt=void 0;try{mt=new ArrayBuffer(Xe)}catch(Dr){return Promise.reject(Dr)}var Bt={buffer:mt,byteOffset:0,byteLength:Xe,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(Bt)}var er=E(_e);return P(this),er}},{key:"byobRequest",get:function(){if(pe(this)===!1)throw B("byobRequest");if(this._byobRequest===void 0&&this._pendingPullIntos.length>0){var _e=this._pendingPullIntos[0],$e=new Uint8Array(_e.buffer,_e.byteOffset+_e.bytesFilled,_e.byteLength-_e.bytesFilled),He=Object.create(Na.prototype);Ue(He,this,$e),this._byobRequest=He}return this._byobRequest}},{key:"desiredSize",get:function(){if(pe(this)===!1)throw B("desiredSize");return z(this)}}]),te}()},{"./helpers.js":10,"./queue-with-sizes.js":11,"./utils.js":14,"./writable-stream.js":15,"better-assert":16}],13:[function(r,n,a){function s(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}function o(L,P,m){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return 1},j=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,V=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){return 1},q=Object.create(le.prototype),G=void 0;u(q,new Promise(function(ee){G=ee}),y,v,j,V),p(q,Object.create(pe.prototype),P,m);var Y=L();return G(Y),q}function u(L,P,m,y,v,j){function V(){return P}L._writable=oe(V,function(G){return O(L,G)},function(){return T(L)},function(){return A(L)},m,y),L._readable=ie(V,function(){return I(L)},function(G){return d(L,G),Promise.resolve()},v,j),L._backpressure=void 0,L._backpressureChangePromise=void 0,L._backpressureChangePromise_resolve=void 0,f(L,!0),L._transformStreamController=void 0}function c(L){return!!$(L)&&!!Object.prototype.hasOwnProperty.call(L,"_transformStreamController")}function l(L,P){N("TransformStreamError()"),L._readable._state==="readable"&&Te(L._readable._readableStreamController,P),d(L,P)}function d(L,P){J(L._writable._writableStreamController,P),L._backpressure===!0&&f(L,!1)}function f(L,P){N("TransformStreamSetBackpressure() [backpressure = "+P+"]"),L._backpressureChangePromise!==void 0&&L._backpressureChangePromise_resolve(),L._backpressureChangePromise=new Promise(function(m){L._backpressureChangePromise_resolve=m}),L._backpressure=P}function h(L){return!!$(L)&&!!Object.prototype.hasOwnProperty.call(L,"_controlledTransformStream")}function p(L,P,m,y){P._controlledTransformStream=L,L._transformStreamController=P,P._transformAlgorithm=m,P._flushAlgorithm=y}function b(L,P){var m=Object.create(pe.prototype),y=function(q){try{return _(m,q),Promise.resolve()}catch(G){return Promise.reject(G)}},v=P.transform;if(v!==void 0){if(typeof v!="function")throw new TypeError("transform is not a method");y=function(q){return ne(v,P,[q,m]).catch(function(G){throw l(L,G),G})}}var j=X(P,"flush",0,[m]);p(L,m,y,j)}function _(L,P){N("TransformStreamDefaultControllerEnqueue()");var m=L._controlledTransformStream,y=m._readable._readableStreamController;if(ce(y)===!1)throw new TypeError("Readable side is not in a state that permits enqueue");try{he(y,P)}catch(v){throw d(m,v),m._readable._storedError}ye(y)!==m._backpressure&&f(m,!0)}function E(L,P){l(L._controlledTransformStream,P)}function w(L){N("TransformStreamDefaultControllerTerminate()");var P=L._controlledTransformStream,m=P._readable._readableStreamController;ce(m)===!0&&be(m),d(P,new TypeError("TransformStream terminated"))}function O(L,P){N("TransformStreamDefaultSinkWriteAlgorithm()");var m=L._transformStreamController;return L._backpressure===!0?L._backpressureChangePromise.then(function(){var y=L._writable;if(y._state==="erroring")throw y._storedError;return m._transformAlgorithm(P)}):m._transformAlgorithm(P)}function A(L){return l(L,new TypeError("Writable side aborted")),Promise.resolve()}function T(L){N("TransformStreamDefaultSinkCloseAlgorithm()");var P=L._readable;return L._transformStreamController._flushAlgorithm().then(function(){if(P._state==="errored")throw P._storedError;var m=P._readableStreamController;ce(m)===!0&&be(m)}).catch(function(m){throw l(L,m),P._storedError})}function I(L){return N("TransformStreamDefaultSourcePullAlgorithm()"),f(L,!1),L._backpressureChangePromise}function D(L){return new TypeError("TransformStreamDefaultController.prototype."+L+" can only be used on a TransformStreamDefaultController")}function U(L){return new TypeError("TransformStream.prototype."+L+" can only be used on a TransformStream")}var H=function(){function L(P,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(P,v.key,v)}}return function(P,m,y){return m&&L(P.prototype,m),y&&L(P,y),P}}();r("better-assert");var N=r("debug")("streams:transform-stream:verbose"),R=r("./helpers.js"),F=R.InvokeOrNoop,X=R.CreateAlgorithmFromUnderlyingMethod,ne=R.PromiseCall,$=R.typeIsObject,C=R.ValidateAndNormalizeHighWaterMark;R.IsNonNegativeNumber;var Q=R.MakeSizeAlgorithmFromSizeFunction,se=r("./readable-stream.js"),ie=se.CreateReadableStream,be=se.ReadableStreamDefaultControllerClose,he=se.ReadableStreamDefaultControllerEnqueue,Te=se.ReadableStreamDefaultControllerError,Ne=se.ReadableStreamDefaultControllerGetDesiredSize,ye=se.ReadableStreamDefaultControllerHasBackpressure,ce=se.ReadableStreamDefaultControllerCanCloseOrEnqueue,xe=r("./writable-stream.js"),oe=xe.CreateWritableStream,J=xe.WritableStreamDefaultControllerErrorIfNeeded,le=function(){function L(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(s(this,L),P.readableType!==void 0)throw new RangeError("Invalid readable type specified");if(P.writableType!==void 0)throw new RangeError("Invalid writable type specified");var v=m.size,j=Q(v),V=m.highWaterMark;V===void 0&&(V=1),V=C(V);var q=y.size,G=Q(q),Y=y.highWaterMark;Y===void 0&&(Y=0),Y=C(Y);var ee=void 0;u(this,new Promise(function(ve){ee=ve}),V,j,Y,G),b(this,P);var ae=F(P,"start",[this._transformStreamController]);ee(ae)}return H(L,[{key:"readable",get:function(){if(c(this)===!1)throw U("readable");return this._readable}},{key:"writable",get:function(){if(c(this)===!1)throw U("writable");return this._writable}}]),L}(),pe=function(){function L(){throw s(this,L),new TypeError("TransformStreamDefaultController instances cannot be created directly")}return H(L,[{key:"enqueue",value:function(m){if(h(this)===!1)throw D("enqueue");_(this,m)}},{key:"error",value:function(m){if(h(this)===!1)throw D("error");E(this,m)}},{key:"terminate",value:function(){if(h(this)===!1)throw D("terminate");w(this)}},{key:"desiredSize",get:function(){if(h(this)===!1)throw D("desiredSize");var m=this._controlledTransformStream._readable._readableStreamController;return Ne(m)}}]),L}();n.exports={CreateTransformStream:o,TransformStream:le}},{"./helpers.js":10,"./readable-stream.js":12,"./writable-stream.js":15,"better-assert":16,debug:18}],14:[function(r,n,a){var s=r("better-assert");a.rethrowAssertionErrorRejection=function(o){o&&o.constructor===s.AssertionError&&setTimeout(function(){throw o},0)}},{"better-assert":16}],15:[function(r,n,a){function s(B,re){if(!(B instanceof re))throw new TypeError("Cannot call a class as a function")}function o(B){return new xn(B)}function u(B,re,Se,Fe){var Ae=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,ze=arguments.length>5&&arguments[5]!==void 0?arguments[5]:function(){return 1},De=Object.create(kr.prototype);return c(De),he(De,Object.create(Et.prototype),B,re,Se,Fe,Ae,ze),De}function c(B){B._state="writable",B._storedError=void 0,B._writer=void 0,B._writableStreamController=void 0,B._writeRequests=[],B._inFlightWriteRequest=void 0,B._closeRequest=void 0,B._inFlightCloseRequest=void 0,B._pendingAbortRequest=void 0,B._backpressure=!1}function l(B){return!!Ue(B)&&!!Object.prototype.hasOwnProperty.call(B,"_writableStreamController")}function d(B){return B._writer!==void 0}function f(B,re){var Se=B._state;if(Se==="closed")return Promise.resolve(void 0);if(Se==="errored")return Promise.reject(B._storedError);var Fe=new TypeError("Requested to abort");if(B._pendingAbortRequest!==void 0)return Promise.reject(Fe);var Ae=!1;Se==="erroring"&&(Ae=!0,re=void 0);var ze=new Promise(function(De,Be){B._pendingAbortRequest={_resolve:De,_reject:Be,_reason:re,_wasAlreadyErroring:Ae}});return Ae===!1&&b(B,Fe),ze}function h(B){return new Promise(function(re,Se){var Fe={_resolve:re,_reject:Se};B._writeRequests.push(Fe)})}function p(B,re){x("WritableStreamDealWithRejection(stream, %o)",re),B._state!=="writable"?_(B):b(B,re)}function b(B,re){x("WritableStreamStartErroring(stream, %o)",re);var Se=B._writableStreamController;B._state="erroring",B._storedError=re;var Fe=B._writer;Fe!==void 0&&C(Fe,re),I(B)===!1&&Se._started===!0&&_(B)}function _(B){x("WritableStreamFinishErroring()"),B._state="errored",B._writableStreamController[Pr]();var re=B._storedError,Se=!0,Fe=!1,Ae=void 0;try{for(var ze,De=B._writeRequests[Symbol.iterator]();!(Se=(ze=De.next()).done);Se=!0)ze.value._reject(re)}catch(Ye){Fe=!0,Ae=Ye}finally{try{!Se&&De.return&&De.return()}finally{if(Fe)throw Ae}}if(B._writeRequests=[],B._pendingAbortRequest!==void 0){var Be=B._pendingAbortRequest;if(B._pendingAbortRequest=void 0,Be._wasAlreadyErroring===!0)return Be._reject(re),void H(B);B._writableStreamController[_r](Be._reason).then(function(){Be._resolve(),H(B)},function(Ye){Be._reject(Ye),H(B)})}else H(B)}function E(B){B._inFlightWriteRequest._resolve(void 0),B._inFlightWriteRequest=void 0}function w(B,re){B._inFlightWriteRequest._reject(re),B._inFlightWriteRequest=void 0,p(B,re)}function O(B){B._inFlightCloseRequest._resolve(void 0),B._inFlightCloseRequest=void 0,B._state==="erroring"&&(B._storedError=void 0,B._pendingAbortRequest!==void 0&&(B._pendingAbortRequest._resolve(),B._pendingAbortRequest=void 0)),B._state="closed";var re=B._writer;re!==void 0&&ee(re)}function A(B,re){B._inFlightCloseRequest._reject(re),B._inFlightCloseRequest=void 0,B._pendingAbortRequest!==void 0&&(B._pendingAbortRequest._reject(re),B._pendingAbortRequest=void 0),p(B,re)}function T(B){return B._closeRequest!==void 0||B._inFlightCloseRequest!==void 0}function I(B){return B._inFlightWriteRequest===void 0&&B._inFlightCloseRequest===void 0?(x("WritableStreamHasOperationMarkedInFlight() is false"),!1):(x("WritableStreamHasOperationMarkedInFlight() is true"),!0)}function D(B){B._inFlightCloseRequest=B._closeRequest,B._closeRequest=void 0}function U(B){B._inFlightWriteRequest=B._writeRequests.shift()}function H(B){x("WritableStreamRejectCloseAndClosedPromiseIfNeeded()"),B._closeRequest!==void 0&&(B._closeRequest._reject(B._storedError),B._closeRequest=void 0);var re=B._writer;re!==void 0&&(G(re,B._storedError),re._closedPromise.catch(function(){}))}function N(B,re){var Se=B._writer;Se!==void 0&&re!==B._backpressure&&(re===!0?k(Se):M(Se)),B._backpressure=re}function R(B){return!!Ue(B)&&!!Object.prototype.hasOwnProperty.call(B,"_ownerWritableStream")}function F(B,re){return f(B._ownerWritableStream,re)}function X(B){var re=B._ownerWritableStream,Se=re._state;if(Se==="closed"||Se==="errored")return Promise.reject(new TypeError("The stream (in "+Se+" state) is not in the writable state and cannot be closed"));var Fe=new Promise(function(Ae,ze){var De={_resolve:Ae,_reject:ze};re._closeRequest=De});return re._backpressure===!0&&Se==="writable"&&M(B),Ne(re._writableStreamController),Fe}function ne(B){var re=B._ownerWritableStream,Se=re._state;return T(re)===!0||Se==="closed"?Promise.resolve():Se==="errored"?Promise.reject(re._storedError):X(B)}function $(B,re){B._closedPromiseState==="pending"?G(B,re):Y(B,re),B._closedPromise.catch(function(){})}function C(B,re){x("WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, %o)",re),B._readyPromiseState==="pending"?Ee(B,re):W(B,re),B._readyPromise.catch(function(){})}function Q(B){var re=B._ownerWritableStream,Se=re._state;return Se==="errored"||Se==="erroring"?null:Se==="closed"?0:ce(re._writableStreamController)}function se(B){var re=B._ownerWritableStream,Se=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");C(B,Se),$(B,Se),re._writer=void 0,B._ownerWritableStream=void 0}function ie(B,re){var Se=B._ownerWritableStream,Fe=Se._writableStreamController,Ae=ye(Fe,re);if(Se!==B._ownerWritableStream)return Promise.reject(v("write to"));var ze=Se._state;if(ze==="errored")return Promise.reject(Se._storedError);if(T(Se)===!0||ze==="closed")return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if(ze==="erroring")return Promise.reject(Se._storedError);var De=h(Se);return xe(Fe,re,Ae),De}function be(B){return!!Ue(B)&&!!Object.prototype.hasOwnProperty.call(B,"_controlledWritableStream")}function he(B,re,Se,Fe,Ae,ze,De,Be){re._controlledWritableStream=B,B._writableStreamController=re,re._queue=void 0,re._queueTotalSize=void 0,Qt(re),re._started=!1,re._strategySizeAlgorithm=Be,re._strategyHWM=De,re._writeAlgorithm=Fe,re._closeAlgorithm=Ae,re._abortAlgorithm=ze;var Ye=L(re);N(B,Ye);var Pt=Se();Promise.resolve(Pt).then(function(){re._started=!0,oe(re)},function(at){re._started=!0,p(B,at)}).catch(We)}function Te(B,re,Se,Fe){var Ae=Object.create(Et.prototype),ze=ue(re,"write",1,[Ae]),De=ue(re,"close",0,[]),Be=ue(re,"abort",1,[]);he(B,Ae,function(){return ge(re,"start",[Ae])},ze,De,Be,Se,Fe)}function Ne(B){br(B,"close",0),oe(B)}function ye(B,re){try{return B._strategySizeAlgorithm(re)}catch(Se){return J(B,Se),1}}function ce(B){return B._strategyHWM-B._queueTotalSize}function xe(B,re,Se){var Fe={chunk:re};try{br(B,Fe,Se)}catch(ze){return void J(B,ze)}var Ae=B._controlledWritableStream;T(Ae)===!1&&Ae._state==="writable"&&N(Ae,L(B)),oe(B)}function oe(B){x("WritableStreamDefaultControllerAdvanceQueueIfNeeded()");var re=B._controlledWritableStream;if(B._started!==!1&&re._inFlightWriteRequest===void 0){var Se=re._state;if(Se!=="closed"&&Se!=="errored")if(Se!=="erroring"){if(B._queue.length!==0){var Fe=Br(B);Fe==="close"?le(B):pe(B,Fe.chunk)}}else _(re)}}function J(B,re){B._controlledWritableStream._state==="writable"&&P(B,re)}function le(B){var re=B._controlledWritableStream;D(re),Wr(B),B._closeAlgorithm().then(function(){O(re)},function(Se){A(re,Se)}).catch(We)}function pe(B,re){var Se=B._controlledWritableStream;U(Se),B._writeAlgorithm(re).then(function(){E(Se);var Fe=Se._state;if(Wr(B),T(Se)===!1&&Fe==="writable"){var Ae=L(B);N(Se,Ae)}oe(B)},function(Fe){w(Se,Fe)}).catch(We)}function L(B){return ce(B)<=0}function P(B,re){b(B._controlledWritableStream,re)}function m(B){return new TypeError("WritableStream.prototype."+B+" can only be used on a WritableStream")}function y(B){return new TypeError("WritableStreamDefaultWriter.prototype."+B+" can only be used on a WritableStreamDefaultWriter")}function v(B){return new TypeError("Cannot "+B+" a stream using a released writer")}function j(B){B._closedPromise=new Promise(function(re,Se){B._closedPromise_resolve=re,B._closedPromise_reject=Se,B._closedPromiseState="pending"})}function V(B,re){B._closedPromise=Promise.reject(re),B._closedPromise_resolve=void 0,B._closedPromise_reject=void 0,B._closedPromiseState="rejected"}function q(B){B._closedPromise=Promise.resolve(void 0),B._closedPromise_resolve=void 0,B._closedPromise_reject=void 0,B._closedPromiseState="resolved"}function G(B,re){B._closedPromise_reject(re),B._closedPromise_resolve=void 0,B._closedPromise_reject=void 0,B._closedPromiseState="rejected"}function Y(B,re){B._closedPromise=Promise.reject(re),B._closedPromiseState="rejected"}function ee(B){B._closedPromise_resolve(void 0),B._closedPromise_resolve=void 0,B._closedPromise_reject=void 0,B._closedPromiseState="resolved"}function ae(B){x("defaultWriterReadyPromiseInitialize()"),B._readyPromise=new Promise(function(re,Se){B._readyPromise_resolve=re,B._readyPromise_reject=Se}),B._readyPromiseState="pending"}function ve(B,re){x("defaultWriterReadyPromiseInitializeAsRejected(writer, %o)",re),B._readyPromise=Promise.reject(re),B._readyPromise_resolve=void 0,B._readyPromise_reject=void 0,B._readyPromiseState="rejected"}function me(B){x("defaultWriterReadyPromiseInitializeAsResolved()"),B._readyPromise=Promise.resolve(void 0),B._readyPromise_resolve=void 0,B._readyPromise_reject=void 0,B._readyPromiseState="fulfilled"}function Ee(B,re){x("defaultWriterReadyPromiseReject(writer, %o)",re),B._readyPromise_reject(re),B._readyPromise_resolve=void 0,B._readyPromise_reject=void 0,B._readyPromiseState="rejected"}function k(B){x("defaultWriterReadyPromiseReset()"),B._readyPromise=new Promise(function(re,Se){B._readyPromise_resolve=re,B._readyPromise_reject=Se}),B._readyPromiseState="pending"}function W(B,re){x("defaultWriterReadyPromiseResetToRejected(writer, %o)",re),B._readyPromise=Promise.reject(re),B._readyPromiseState="rejected"}function M(B){x("defaultWriterReadyPromiseResolve()"),B._readyPromise_resolve(void 0),B._readyPromise_resolve=void 0,B._readyPromise_reject=void 0,B._readyPromiseState="fulfilled"}var S=function(){function B(re,Se){for(var Fe=0;Fe<Se.length;Fe++){var Ae=Se[Fe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(re,Ae.key,Ae)}}return function(re,Se,Fe){return Se&&B(re.prototype,Se),Fe&&B(re,Fe),re}}();r("better-assert");var x=r("debug")("streams:writable-stream:verbose"),z=r("./helpers.js"),ue=z.CreateAlgorithmFromUnderlyingMethod,ge=z.InvokeOrNoop,we=z.ValidateAndNormalizeHighWaterMark;z.IsNonNegativeNumber;var Me=z.MakeSizeAlgorithmFromSizeFunction,Ue=z.typeIsObject,Ge=r("./utils.js"),We=Ge.rethrowAssertionErrorRejection,lt=r("./queue-with-sizes.js"),Wr=lt.DequeueValue,br=lt.EnqueueValueWithSize,Br=lt.PeekQueueValue,Qt=lt.ResetQueue,_r=Symbol("[[AbortSteps]]"),Pr=Symbol("[[ErrorSteps]]"),kr=function(){function B(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Fe=Se.size,Ae=Se.highWaterMark,ze=Ae===void 0?1:Ae;if(s(this,B),c(this),re.type!==void 0)throw new RangeError("Invalid type is specified");var De=Me(Fe);Te(this,re,ze=we(ze),De)}return S(B,[{key:"abort",value:function(Se){return l(this)===!1?Promise.reject(m("abort")):d(this)===!0?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):f(this,Se)}},{key:"getWriter",value:function(){if(l(this)===!1)throw m("getWriter");return o(this)}},{key:"locked",get:function(){if(l(this)===!1)throw m("locked");return d(this)}}]),B}();n.exports={AcquireWritableStreamDefaultWriter:o,CreateWritableStream:u,IsWritableStream:l,IsWritableStreamLocked:d,WritableStream:kr,WritableStreamAbort:f,WritableStreamDefaultControllerErrorIfNeeded:J,WritableStreamDefaultWriterCloseWithErrorPropagation:ne,WritableStreamDefaultWriterRelease:se,WritableStreamDefaultWriterWrite:ie,WritableStreamCloseQueuedOrInFlight:T};var xn=function(){function B(re){if(s(this,B),l(re)===!1)throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(d(re)===!0)throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=re,re._writer=this;var Se=re._state;if(Se==="writable")T(re)===!1&&re._backpressure===!0?ae(this):me(this),j(this);else if(Se==="erroring")ve(this,re._storedError),this._readyPromise.catch(function(){}),j(this);else if(Se==="closed")me(this),q(this);else{var Fe=re._storedError;ve(this,Fe),this._readyPromise.catch(function(){}),V(this,Fe),this._closedPromise.catch(function(){})}}return S(B,[{key:"abort",value:function(Se){return R(this)===!1?Promise.reject(y("abort")):this._ownerWritableStream===void 0?Promise.reject(v("abort")):F(this,Se)}},{key:"close",value:function(){if(R(this)===!1)return Promise.reject(y("close"));var Se=this._ownerWritableStream;return Se===void 0?Promise.reject(v("close")):T(Se)===!0?Promise.reject(new TypeError("cannot close an already-closing stream")):X(this)}},{key:"releaseLock",value:function(){if(R(this)===!1)throw y("releaseLock");this._ownerWritableStream!==void 0&&se(this)}},{key:"write",value:function(Se){return R(this)===!1?Promise.reject(y("write")):this._ownerWritableStream===void 0?Promise.reject(v("write to")):ie(this,Se)}},{key:"closed",get:function(){return R(this)===!1?Promise.reject(y("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(R(this)===!1)throw y("desiredSize");if(this._ownerWritableStream===void 0)throw v("desiredSize");return Q(this)}},{key:"ready",get:function(){return R(this)===!1?Promise.reject(y("ready")):this._readyPromise}}]),B}(),Et=function(){function B(){throw s(this,B),new TypeError("WritableStreamDefaultController cannot be constructed explicitly")}return S(B,[{key:"error",value:function(Se){if(be(this)===!1)throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");this._controlledWritableStream._state==="writable"&&P(this,Se)}},{key:_r,value:function(Se){return this._abortAlgorithm(Se)}},{key:Pr,value:function(){Qt(this)}}]),B}()},{"./helpers.js":10,"./queue-with-sizes.js":11,"./utils.js":14,"better-assert":16,debug:18}],16:[function(r,n,a){(function(s){function o(d){if(!d){var f=c(),h=f[1],p=h.getFileName(),b=h.getLineNumber(),_=(_=l.readFileSync(p,"utf8")).split(`
`)[b-1].match(/assert\((.*)\)/)[1];throw new u({message:_,stackStartFunction:f[0].getFunction()})}}var u=r("assert").AssertionError,c=r("callsite"),l=r("fs");n.exports={}.NO_ASSERT?function(){}:o}).call(this,r("_process"))},{_process:4,assert:2,callsite:17,fs:3}],17:[function(r,n,a){n.exports=function(){var s=Error.prepareStackTrace;Error.prepareStackTrace=function(c,l){return l};var o=new Error;Error.captureStackTrace(o,arguments.callee);var u=o.stack;return Error.prepareStackTrace=s,u}},{}],18:[function(r,n,a){(function(s){function o(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function u(h){var p=this.useColors;if(h[0]=(p?"%c":"")+this.namespace+(p?" %c":" ")+h[0]+(p?"%c ":" ")+"+"+a.humanize(this.diff),p){var b="color: "+this.color;h.splice(1,0,b,"color: inherit");var _=0,E=0;h[0].replace(/%[a-zA-Z%]/g,function(w){w!=="%%"&&(_++,w==="%c"&&(E=_))}),h.splice(E,0,b)}}function c(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function l(h){try{h==null?a.storage.removeItem("debug"):a.storage.debug=h}catch{}}function d(){var h;try{h=a.storage.debug}catch{}return!h&&typeof s<"u"&&"env"in s&&(h={}.DEBUG),h}function f(){try{return window.localStorage}catch{}}a=n.exports=r("./debug"),a.log=c,a.formatArgs=u,a.save=l,a.load=d,a.useColors=o,a.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:f(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],a.formatters.j=function(h){try{return JSON.stringify(h)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}},a.enable(d())}).call(this,r("_process"))},{"./debug":19,_process:4}],19:[function(r,n,a){function s(h){var p,b=0;for(p in h)b=(b<<5)-b+h.charCodeAt(p),b|=0;return a.colors[Math.abs(b)%a.colors.length]}function o(h){function p(){if(p.enabled){var _=p,E=+new Date,w=E-(b||E);_.diff=w,_.prev=b,_.curr=E,b=E;for(var O=new Array(arguments.length),A=0;A<O.length;A++)O[A]=arguments[A];O[0]=a.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");var T=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,function(I,D){if(I==="%%")return I;T++;var U=a.formatters[D];if(typeof U=="function"){var H=O[T];I=U.call(_,H),O.splice(T,1),T--}return I}),a.formatArgs.call(_,O),(p.log||a.log||console.log.bind(console)).apply(_,O)}}var b;return p.namespace=h,p.enabled=a.enabled(h),p.useColors=a.useColors(),p.color=s(h),p.destroy=u,typeof a.init=="function"&&a.init(p),a.instances.push(p),p}function u(){var h=a.instances.indexOf(this);return h!==-1&&(a.instances.splice(h,1),!0)}function c(h){a.save(h),a.names=[],a.skips=[];var p,b=(typeof h=="string"?h:"").split(/[\s,]+/),_=b.length;for(p=0;p<_;p++)b[p]&&((h=b[p].replace(/\*/g,".*?"))[0]==="-"?a.skips.push(new RegExp("^"+h.substr(1)+"$")):a.names.push(new RegExp("^"+h+"$")));for(p=0;p<a.instances.length;p++){var E=a.instances[p];E.enabled=a.enabled(E.namespace)}}function l(){a.enable("")}function d(h){if(h[h.length-1]==="*")return!0;var p,b;for(p=0,b=a.skips.length;p<b;p++)if(a.skips[p].test(h))return!1;for(p=0,b=a.names.length;p<b;p++)if(a.names[p].test(h))return!0;return!1}function f(h){return h instanceof Error?h.stack||h.message:h}a=n.exports=o.debug=o.default=o,a.coerce=f,a.disable=l,a.enable=c,a.enabled=d,a.humanize=r("ms"),a.instances=[],a.names=[],a.skips=[],a.formatters={}},{ms:20}],20:[function(r,n,a){function s(b){if(!((b=String(b)).length>100)){var _=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(b);if(_){var E=parseFloat(_[1]);switch((_[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return E*p;case"days":case"day":case"d":return E*h;case"hours":case"hour":case"hrs":case"hr":case"h":return E*f;case"minutes":case"minute":case"mins":case"min":case"m":return E*d;case"seconds":case"second":case"secs":case"sec":case"s":return E*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return E;default:return}}}}function o(b){return b>=h?Math.round(b/h)+"d":b>=f?Math.round(b/f)+"h":b>=d?Math.round(b/d)+"m":b>=l?Math.round(b/l)+"s":b+"ms"}function u(b){return c(b,h,"day")||c(b,f,"hour")||c(b,d,"minute")||c(b,l,"second")||b+" ms"}function c(b,_,E){if(!(b<_))return b<1.5*_?Math.floor(b/_)+" "+E:Math.ceil(b/_)+" "+E+"s"}var l=1e3,d=60*l,f=60*d,h=24*f,p=365.25*h;n.exports=function(b,_){_=_||{};var E=typeof b;if(E==="string"&&b.length>0)return s(b);if(E==="number"&&isNaN(b)===!1)return _.long?u(b):o(b);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b))}},{}]},{},[1])(1)})}(wT)),wT.exports}const Us=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Us.writable=t=>Us(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Us.readable=t=>Us(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Us.duplex=t=>Us.writable(t)&&Us.readable(t);Us.transform=t=>Us.duplex(t)&&typeof t._transform=="function";var TF=Us,EF={exports:{}};(function(t){t.exports=e,t.exports.WEBSTREAM_SUPPORT=typeof ReadableStream<"u";function e(r){if(!t.exports.WEBSTREAM_SUPPORT)throw new Error("No web ReadableStream support");var n=!1,a={};function s(c){a.data=d,a.end=d,a.end=f,a.close=f,a.error=f;for(var l in a)r.on(l,a[l]);r.pause();function d(h){n||(c.enqueue(h),r.pause())}function f(h){if(!n){n=!0;for(var p in a)r.removeListener(p,a[p]);h?c.error(h):c.close()}}}function o(){n||r.resume()}function u(){n=!0;for(var c in a)r.removeListener(c,a[c]);r.push(null),r.pause(),r.destroy?r.destroy():r.close&&r.close()}return new ReadableStream({start:s,pull:o,cancel:u})}})(EF);var zie=EF.exports;Object.defineProperty(km,"__esModule",{value:!0});km.ActorHttp=void 0;const Wie=Je,Xie=N0;globalThis.ReadableStream||(globalThis.ReadableStream=Gie().ReadableStream);const Kie=TF,Jie=zie;class Yie extends Wie.Actor{constructor(e){super(e)}static toNodeReadable(e){return Kie(e)||e===null?e:new Xie.ReadableWebToNodeStream(e)}static toWebReadableStream(e){return Jie(e)}static headersToHash(e){const r={};return e.forEach((n,a)=>{r[a]=n}),r}}km.ActorHttp=Yie;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(km,t)})(ls);(function(t){(function(e){var r=typeof globalThis<"u"&&globalThis||typeof t<"u"&&t||typeof r<"u"&&r,n={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function a(R){return R&&DataView.prototype.isPrototypeOf(R)}if(n.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(R){return R&&s.indexOf(Object.prototype.toString.call(R))>-1};function u(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(R)||R==="")throw new TypeError('Invalid character in header field name: "'+R+'"');return R.toLowerCase()}function c(R){return typeof R!="string"&&(R=String(R)),R}function l(R){var F={next:function(){var X=R.shift();return{done:X===void 0,value:X}}};return n.iterable&&(F[Symbol.iterator]=function(){return F}),F}function d(R){this.map={},R instanceof d?R.forEach(function(F,X){this.append(X,F)},this):Array.isArray(R)?R.forEach(function(F){this.append(F[0],F[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(F){this.append(F,R[F])},this)}d.prototype.append=function(R,F){R=u(R),F=c(F);var X=this.map[R];this.map[R]=X?X+", "+F:F},d.prototype.delete=function(R){delete this.map[u(R)]},d.prototype.get=function(R){return R=u(R),this.has(R)?this.map[R]:null},d.prototype.has=function(R){return this.map.hasOwnProperty(u(R))},d.prototype.set=function(R,F){this.map[u(R)]=c(F)},d.prototype.forEach=function(R,F){for(var X in this.map)this.map.hasOwnProperty(X)&&R.call(F,this.map[X],X,this)},d.prototype.keys=function(){var R=[];return this.forEach(function(F,X){R.push(X)}),l(R)},d.prototype.values=function(){var R=[];return this.forEach(function(F){R.push(F)}),l(R)},d.prototype.entries=function(){var R=[];return this.forEach(function(F,X){R.push([X,F])}),l(R)},n.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function f(R){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}function h(R){return new Promise(function(F,X){R.onload=function(){F(R.result)},R.onerror=function(){X(R.error)}})}function p(R){var F=new FileReader,X=h(F);return F.readAsArrayBuffer(R),X}function b(R){var F=new FileReader,X=h(F);return F.readAsText(R),X}function _(R){for(var F=new Uint8Array(R),X=new Array(F.length),ne=0;ne<F.length;ne++)X[ne]=String.fromCharCode(F[ne]);return X.join("")}function E(R){if(R.slice)return R.slice(0);var F=new Uint8Array(R.byteLength);return F.set(new Uint8Array(R)),F.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(R){this.bodyUsed=this.bodyUsed,this._bodyInit=R,R?typeof R=="string"?this._bodyText=R:n.blob&&Blob.prototype.isPrototypeOf(R)?this._bodyBlob=R:n.formData&&FormData.prototype.isPrototypeOf(R)?this._bodyFormData=R:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)?this._bodyText=R.toString():n.arrayBuffer&&n.blob&&a(R)?(this._bodyArrayBuffer=E(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(R)||o(R))?this._bodyArrayBuffer=E(R):this._bodyText=R=Object.prototype.toString.call(R):this._bodyText="",this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var R=f(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var R=f(this);return R||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(p)}),this.text=function(){var R=f(this);if(R)return R;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}var O=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function A(R){var F=R.toUpperCase();return O.indexOf(F)>-1?F:R}function T(R,F){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');F=F||{};var X=F.body;if(R instanceof T){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,F.headers||(this.headers=new d(R.headers)),this.method=R.method,this.mode=R.mode,this.signal=R.signal,!X&&R._bodyInit!=null&&(X=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=F.credentials||this.credentials||"same-origin",(F.headers||!this.headers)&&(this.headers=new d(F.headers)),this.method=A(F.method||this.method||"GET"),this.mode=F.mode||this.mode||null,this.signal=F.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&X)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(X),(this.method==="GET"||this.method==="HEAD")&&(F.cache==="no-store"||F.cache==="no-cache")){var ne=/([?&])_=[^&]*/;if(ne.test(this.url))this.url=this.url.replace(ne,"$1_="+new Date().getTime());else{var $=/\?/;this.url+=($.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function I(R){var F=new FormData;return R.trim().split("&").forEach(function(X){if(X){var ne=X.split("="),$=ne.shift().replace(/\+/g," "),C=ne.join("=").replace(/\+/g," ");F.append(decodeURIComponent($),decodeURIComponent(C))}}),F}function D(R){var F=new d,X=R.replace(/\r?\n[\t ]+/g," ");return X.split("\r").map(function(ne){return ne.indexOf(`
`)===0?ne.substr(1,ne.length):ne}).forEach(function(ne){var $=ne.split(":"),C=$.shift().trim();if(C){var Q=$.join(":").trim();F.append(C,Q)}}),F}w.call(T.prototype);function U(R,F){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');F||(F={}),this.type="default",this.status=F.status===void 0?200:F.status,this.ok=this.status>=200&&this.status<300,this.statusText=F.statusText===void 0?"":""+F.statusText,this.headers=new d(F.headers),this.url=F.url||"",this._initBody(R)}w.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},U.error=function(){var R=new U(null,{status:0,statusText:""});return R.type="error",R};var H=[301,302,303,307,308];U.redirect=function(R,F){if(H.indexOf(F)===-1)throw new RangeError("Invalid status code");return new U(null,{status:F,headers:{location:R}})},e.DOMException=r.DOMException;try{new e.DOMException}catch{e.DOMException=function(F,X){this.message=F,this.name=X;var ne=Error(F);this.stack=ne.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function N(R,F){return new Promise(function(X,ne){var $=new T(R,F);if($.signal&&$.signal.aborted)return ne(new e.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function Q(){C.abort()}C.onload=function(){var ie={status:C.status,statusText:C.statusText,headers:D(C.getAllResponseHeaders()||"")};ie.url="responseURL"in C?C.responseURL:ie.headers.get("X-Request-URL");var be="response"in C?C.response:C.responseText;setTimeout(function(){X(new U(be,ie))},0)},C.onerror=function(){setTimeout(function(){ne(new TypeError("Network request failed"))},0)},C.ontimeout=function(){setTimeout(function(){ne(new TypeError("Network request failed"))},0)},C.onabort=function(){setTimeout(function(){ne(new e.DOMException("Aborted","AbortError"))},0)};function se(ie){try{return ie===""&&r.location.href?r.location.href:ie}catch{return ie}}C.open($.method,se($.url),!0),$.credentials==="include"?C.withCredentials=!0:$.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&(n.blob?C.responseType="blob":n.arrayBuffer&&$.headers.get("Content-Type")&&$.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(C.responseType="arraybuffer")),F&&typeof F.headers=="object"&&!(F.headers instanceof d)?Object.getOwnPropertyNames(F.headers).forEach(function(ie){C.setRequestHeader(ie,c(F.headers[ie]))}):$.headers.forEach(function(ie,be){C.setRequestHeader(be,ie)}),$.signal&&($.signal.addEventListener("abort",Q),C.onreadystatechange=function(){C.readyState===4&&$.signal.removeEventListener("abort",Q)}),C.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return N.polyfill=!0,r.fetch||(r.fetch=N,r.Headers=d,r.Request=T,r.Response=U),e.Headers=d,e.Request=T,e.Response=U,e.fetch=N,e})({})})(typeof self<"u"?self:g);var zm={};Object.defineProperty(zm,"__esModule",{value:!0});zm.FetchInitPreprocessor=void 0;const Zie=ls;class eae{async handle(e){if(e.headers){const r=new Headers(e.headers);r.has("user-agent")&&r.delete("user-agent"),e.headers=r}if(e!=null&&e.headers&&"append"in e.headers&&(e.headers=Zie.ActorHttp.headersToHash(e.headers)),e.body&&typeof e.body!="string"&&"getReader"in e.body){const r=e.body.getReader(),n=[];for(;;){const{done:a,value:s}=await r.read();if(a)break;n.push(s)}e.body=n.join("")}return{keepalive:!e.body,...e}}async createAbortController(){return new AbortController}}zm.FetchInitPreprocessor=eae;Object.defineProperty(Hm,"__esModule",{value:!0});Hm.ActorHttpFetch=void 0;const ST=ls,yo=Ut,tae=zm;class Vb extends ST.ActorHttp{constructor(e){super(e),this.userAgent=Vb.createUserAgent(),this.fetchInitPreprocessor=new tae.FetchInitPreprocessor(e.agentOptions)}static createUserAgent(){return`Comunica/actor-http-fetch (${typeof globalThis.navigator>"u"?`Node.js ${process.version}; ${process.platform}`:`Browser-${globalThis.navigator.userAgent}`})`}async test(e){return{time:Number.POSITIVE_INFINITY}}static async getResponse(e,r,n,a,s,o){var l;let u,c=a+1;for(;c-- >0;)try{const d=await e(r,n);if(o&&d.status>=500&&d.status<600)throw new Error(`Server replied with response code ${d.status}: ${d.statusText}`);return d}catch(d){if(u=d,(l=n.signal)!=null&&l.aborted)throw d;c>0&&await new Promise((f,h)=>{var p;setTimeout(f,s),(p=n.signal)==null||p.addEventListener("abort",()=>{h(new Error("Fetch aborted by timeout."))})})}throw a>0?new Error(`Number of fetch retries (${a}) exceeded. Last error: ${String(u)}`):u}async run(e){var c,l,d,f,h,p,b,_;const r=((c=e.init)==null?void 0:c.headers)??{};e.init=e.init??{},e.init.headers=new Headers(r),e.init.headers.has("user-agent")||e.init.headers.append("user-agent",this.userAgent);const n=e.context.get(yo.KeysHttp.auth);n&&e.init.headers.append("Authorization",`Basic ${Buffer.from(n).toString("base64")}`),this.logInfo(e.context,`Requesting ${typeof e.input=="string"?e.input:e.input.url}`,()=>({headers:ST.ActorHttp.headersToHash(new Headers(e.init.headers)),method:e.init.method||"GET"})),(l=e.init)!=null&&l.headers&&"append"in e.init.headers&&e.context.has(yo.KeysHttp.fetch)&&(e.init.headers=ST.ActorHttp.headersToHash(e.init.headers));let a={...e.init};e.context.get(yo.KeysHttp.includeCredentials)&&(a.credentials="include");const s=(d=e.context)==null?void 0:d.get(yo.KeysHttp.httpTimeout);let o,u;if(s!==void 0){const E=await this.fetchInitPreprocessor.createAbortController();a.signal=E.signal,u=()=>E.abort(),o=setTimeout(()=>u(),s)}try{a=await this.fetchInitPreprocessor.handle(a);const E=((f=e.context)==null?void 0:f.get(yo.KeysHttp.httpRetryCount))??0,w=((h=e.context)==null?void 0:h.get(yo.KeysHttp.httpRetryDelay))??0,O=((p=e.context)==null?void 0:p.get(yo.KeysHttp.httpRetryOnServerError))??!1,A=(b=e.context)==null?void 0:b.get(yo.KeysHttp.fetch),T=await Vb.getResponse(A||fetch,e.input,a,E,w,O);return o!==void 0&&((((_=e.context)==null?void 0:_.get(yo.KeysHttp.httpBodyTimeout))||!1)&&T.body?(u=()=>{var D;return(D=T.body)==null?void 0:D.cancel(new Error(`HTTP timeout when reading the body of ${T.url}.
This error can be disabled by modifying the 'httpBodyTimeout' and/or 'httpTimeout' options.`))},T.body.on("close",()=>{clearTimeout(o)})):clearTimeout(o)),T.body&&!T.body.cancel&&(T.body.cancel=async I=>{T.body.destroy(I),o!==void 0&&clearTimeout(o)}),T}catch(E){throw o!==void 0&&clearTimeout(o),E}}}Hm.ActorHttpFetch=Vb;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Hm,t)})(dF);var OF={},Wm={},Xm={},Km={},qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.ActorDereferenceBase=qs.isHardError=qs.emptyReadable=void 0;const rae=Ut,nae=Je,iae=Xt;function AF(){const t=new iae.Readable;return t.push(null),t}qs.emptyReadable=AF;function xF(t){return!t.get(rae.KeysInitQuery.lenient)}qs.isHardError=xF;class aae extends nae.Actor{constructor(e){super(e)}async dereferenceErrorHandler(e,r,n){if(xF(e.context))throw r;return this.logError(e.context,r.message),{...n,data:AF()}}}qs.ActorDereferenceBase=aae;Object.defineProperty(Km,"__esModule",{value:!0});Km.ActorDereference=void 0;const sae=qs;class oae extends sae.ActorDereferenceBase{constructor(e){super(e)}async handleDereferenceErrors(e,r,n,a=0){return this.dereferenceErrorHandler(e,r,{url:e.url,exists:!1,headers:n,requestTime:a})}}Km.ActorDereference=oae;var rf={};Object.defineProperty(rf,"__esModule",{value:!0});rf.ActorDereferenceParse=rf.getMediaTypeFromExtension=void 0;const uae=Xt,PN=qs;function RF(t,e){const r=t.lastIndexOf(".");return r>=0&&(e==null?void 0:e[t.slice(r+1)])||""}rf.getMediaTypeFromExtension=RF;class cae extends PN.ActorDereferenceBase{constructor(e){super(e)}async test(e){return!0}handleDereferenceStreamErrors(e,r){return(0,PN.isHardError)(e.context)||(r.on("error",n=>{this.logError(e.context,n.message,()=>({url:e.url})),r.push(null)}),r=r.pipe(new uae.PassThrough({objectMode:!0}))),r}async run(e){var s,o;const{context:r}=e,n=await this.mediatorDereference.mediate({...e,mediaTypes:async()=>{var u,c;return(c=await((u=this.mediatorParseMediatypes)==null?void 0:u.mediate({context:r,mediaTypes:!0})))==null?void 0:c.mediaTypes}});let a;try{a=(await this.mediatorParse.mediate({context:r,handle:{context:r,...n,metadata:await this.getMetadata(n)},handleMediaType:n.mediaType||RF(n.url,this.mediaMappings)||e.mediaType})).handle,a.data=this.handleDereferenceStreamErrors(e,a.data)}catch(u){await((o=(s=n.data).close)==null?void 0:o.call(s)),a=await this.dereferenceErrorHandler(e,u,{})}return{...n,...a}}}rf.ActorDereferenceParse=cae;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Km,t),r(rf,t),r(qs,t)})(Xm);Object.defineProperty(Wm,"__esModule",{value:!0});Wm.ActorDereferenceFallback=void 0;const lae=Xm;class dae extends lae.ActorDereference{constructor(e){super(e)}async test(e){return!0}async run(e){return this.handleDereferenceErrors(e,new Error(`Could not dereference '${e.url}'`))}}Wm.ActorDereferenceFallback=dae;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Wm,t)})(OF);var IF={},Jm={},El={},Ym={};Object.defineProperty(Ym,"__esModule",{value:!0});Ym.ActorRdfParse=void 0;const fae=vl;class hae extends fae.ActorAbstractMediaTyped{constructor(e){super(e)}}Ym.ActorRdfParse=hae;var Zm={};Object.defineProperty(Zm,"__esModule",{value:!0});Zm.ActorRdfParseFixedMediaTypes=void 0;const pae=vl;class yae extends pae.ActorAbstractMediaTypedFixed{constructor(e){super(e)}async testHandleChecked(e){return!0}}Zm.ActorRdfParseFixedMediaTypes=yae;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ym,t),r(Zm,t)})(El);Object.defineProperty(Jm,"__esModule",{value:!0});Jm.ActorRdfParseN3=void 0;const bae=El,_ae=tu;class gae extends bae.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){var s;e.data.on("error",o=>a.emit("error",o));const a=e.data.pipe(new _ae.StreamParser({baseIRI:(s=e.metadata)==null?void 0:s.baseIRI,format:r.endsWith("n3")?r:`${r}*`}));return{data:a,metadata:{triples:r==="text/turtle"||r==="application/n-triples"||r==="text/n3"}}}}Jm.ActorRdfParseN3=gae;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Jm,t)})(IF);var PF={},ev={},DF={},nf={},cl={},NF={};(function(t){/**
 * Character classes and associated utilities for the 5th edition of XML 1.0.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR=`	
\r ---`,t.S=` 	\r
`,t.NAME_START_CHAR=":A-Z_a-z-----------",t.NAME_CHAR="-"+t.NAME_START_CHAR+".0-9--",t.CHAR_RE=new RegExp("^["+t.CHAR+"]$","u"),t.S_RE=new RegExp("^["+t.S+"]+$","u"),t.NAME_START_CHAR_RE=new RegExp("^["+t.NAME_START_CHAR+"]$","u"),t.NAME_CHAR_RE=new RegExp("^["+t.NAME_CHAR+"]$","u"),t.NAME_RE=new RegExp("^["+t.NAME_START_CHAR+"]["+t.NAME_CHAR+"]*$","u"),t.NMTOKEN_RE=new RegExp("^["+t.NAME_CHAR+"]+$","u");var e=9,r=10,n=13,a=32;t.S_LIST=[a,r,n,e];function s(l){return l>=a&&l<=55295||l===r||l===n||l===e||l>=57344&&l<=65533||l>=65536&&l<=1114111}t.isChar=s;function o(l){return l===a||l===r||l===n||l===e}t.isS=o;function u(l){return l>=65&&l<=90||l>=97&&l<=122||l===58||l===95||l===8204||l===8205||l>=192&&l<=214||l>=216&&l<=246||l>=248&&l<=767||l>=880&&l<=893||l>=895&&l<=8191||l>=8304&&l<=8591||l>=11264&&l<=12271||l>=12289&&l<=55295||l>=63744&&l<=64975||l>=65008&&l<=65533||l>=65536&&l<=983039}t.isNameStartChar=u;function c(l){return u(l)||l>=48&&l<=57||l===45||l===46||l===183||l>=768&&l<=879||l>=8255&&l<=8256}t.isNameChar=c})(NF);var jF={};(function(t){/**
 * Character classes and associated utilities for the 2nd edition of XML 1.1.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR="---",t.RESTRICTED_CHAR="-\b\v\f---",t.S=` 	\r
`,t.NAME_START_CHAR=":A-Z_a-z-----------",t.NAME_CHAR="-"+t.NAME_START_CHAR+".0-9--",t.CHAR_RE=new RegExp("^["+t.CHAR+"]$","u"),t.RESTRICTED_CHAR_RE=new RegExp("^["+t.RESTRICTED_CHAR+"]$","u"),t.S_RE=new RegExp("^["+t.S+"]+$","u"),t.NAME_START_CHAR_RE=new RegExp("^["+t.NAME_START_CHAR+"]$","u"),t.NAME_CHAR_RE=new RegExp("^["+t.NAME_CHAR+"]$","u"),t.NAME_RE=new RegExp("^["+t.NAME_START_CHAR+"]["+t.NAME_CHAR+"]*$","u"),t.NMTOKEN_RE=new RegExp("^["+t.NAME_CHAR+"]+$","u");var e=9,r=10,n=13,a=32;t.S_LIST=[a,r,n,e];function s(f){return f>=1&&f<=55295||f>=57344&&f<=65533||f>=65536&&f<=1114111}t.isChar=s;function o(f){return f>=1&&f<=8||f===11||f===12||f>=14&&f<=31||f>=127&&f<=132||f>=134&&f<=159}t.isRestrictedChar=o;function u(f){return f===9||f===10||f===13||f>31&&f<127||f===133||f>159&&f<=55295||f>=57344&&f<=65533||f>=65536&&f<=1114111}t.isCharAndNotRestricted=u;function c(f){return f===a||f===r||f===n||f===e}t.isS=c;function l(f){return f>=65&&f<=90||f>=97&&f<=122||f===58||f===95||f===8204||f===8205||f>=192&&f<=214||f>=216&&f<=246||f>=248&&f<=767||f>=880&&f<=893||f>=895&&f<=8191||f>=8304&&f<=8591||f>=11264&&f<=12271||f>=12289&&f<=55295||f>=63744&&f<=64975||f>=65008&&f<=65533||f>=65536&&f<=983039}t.isNameStartChar=l;function d(f){return l(f)||f>=48&&f<=57||f===45||f===46||f===183||f>=768&&f<=879||f>=8255&&f<=8256}t.isNameChar=d})(jF);var CF={};(function(t){/**
 * Character class utilities for XML NS 1.0 edition 3.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(t,"__esModule",{value:!0}),t.NC_NAME_START_CHAR="A-Z_a-z------------",t.NC_NAME_CHAR="-"+t.NC_NAME_START_CHAR+".0-9--",t.NC_NAME_START_CHAR_RE=new RegExp("^["+t.NC_NAME_START_CHAR+"]$","u"),t.NC_NAME_CHAR_RE=new RegExp("^["+t.NC_NAME_CHAR+"]$","u"),t.NC_NAME_RE=new RegExp("^["+t.NC_NAME_START_CHAR+"]["+t.NC_NAME_CHAR+"]*$","u");function e(n){return n>=65&&n<=90||n===95||n>=97&&n<=122||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}t.isNCNameStartChar=e;function r(n){return e(n)||n===45||n===46||n>=48&&n<=57||n===183||n>=768&&n<=879||n>=8255&&n<=8256}t.isNCNameChar=r})(CF);Object.defineProperty(cl,"__esModule",{value:!0});cl.SaxesParser=cl.EVENTS=void 0;const Lf=NF,mae=jF,Kx=CF;var Ni=Lf.isS,vae=Lf.isChar,ih=Lf.isNameStartChar,DN=Lf.isNameChar,MF=Lf.S_LIST,wae=Lf.NAME_RE,Sae=mae.isChar,Tae=Kx.isNCNameStartChar,Eae=Kx.isNCNameChar,Oae=Kx.NC_NAME_RE;const lb="http://www.w3.org/XML/1998/namespace",gd="http://www.w3.org/2000/xmlns/",Aae={__proto__:null,xml:lb,xmlns:gd},xae={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},Nr=-1,ws=-2,NN=0,Rae=1,TT=2,Iae=3,Xl=4,Pae=5,Dae=6,Nae=7,ET=8,jae=9,Cae=10,Mae=11,Fae=12,li=13,a1=14,OT=15,Lae=16,AT=17,Bae=18,$ae=19,xT=20,Uae=21,qae=22,Vae=23,jN=24,RT=25,s1=26,CN=27,Hae=28,kae=29,MN=30,Qae=31,Gae=32,Sc=33,zae=34,IT=35,ah=36,PT=37,Wae=38,FN=39,LN=40,Xae=41,BN=42,Kae=43,Jae=44,DT=9,$a=10,NT=13,$N=32,UN=33,FF=34,Wh=38,LF=39,o1=45,u1=47,Yae=59,Ru=60,cd=61,un=62,Cn=63,BF=91,ld=93,qN=133,VN=8232,c1=t=>t===FF||t===LF,$F=[FF,LF],Zae=[...$F,BF,un],ese=[...$F,Ru,ld],tse=[cd,Cn,...MF],rse=[...MF,un,Wh,Ru];function AO(t,e,r){switch(e){case"xml":r!==lb&&t.fail(`xml prefix must be bound to ${lb}.`);break;case"xmlns":r!==gd&&t.fail(`xmlns prefix must be bound to ${gd}.`);break}switch(r){case gd:t.fail(e===""?`the default namespace may not be set to ${r}.`:`may not assign a prefix (even "xmlns") to the URI ${gd}.`);break;case lb:switch(e){case"xml":break;case"":t.fail(`the default namespace may not be set to ${r}.`);break;default:t.fail("may not assign the xml namespace to another prefix.")}break}}function nse(t,e){for(const r of Object.keys(e))AO(t,r,e[r])}const ise=t=>Oae.test(t),ase=t=>wae.test(t),Tc=0,HN=1,jT=2;cl.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const kN={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class sse{get closed(){return this._closed}constructor(e){this.opt=e??{},this.fragmentOpt=!!this.opt.fragment;const r=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,r){this.nameStartCheck=Tae,this.nameCheck=Eae,this.isName=ise,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},Aae);const n=this.opt.additionalNamespaces;n!=null&&(nse(this,n),Object.assign(this.ns,n))}else this.nameStartCheck=ih,this.nameCheck=DN,this.isName=ase,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var e;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=Tc,this.attribList=[];const{fragmentOpt:r}=this;this.state=r?li:NN,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=r,this.xmlDeclPossible=!r,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:n}=this.opt;if(n===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");n="1.0"}this.setXMLVersion(n),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(xae),(e=this.readyHandler)===null||e===void 0||e.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(e,r){this[kN[e]]=r}off(e){this[kN[e]]=void 0}makeError(e){var r;let n=(r=this.fileName)!==null&&r!==void 0?r:"";return this.trackPosition&&(n.length>0&&(n+=":"),n+=`${this.line}:${this.column}`),n.length>0&&(n+=": "),new Error(n+e)}fail(e){const r=this.makeError(e),n=this.errorHandler;if(n===void 0)throw r;return n(r),this}write(e){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let r=!1;e===null?(r=!0,e=""):typeof e=="object"&&(e=e.toString()),this.carriedFromPrevious!==void 0&&(e=`${this.carriedFromPrevious}${e}`,this.carriedFromPrevious=void 0);let n=e.length;const a=e.charCodeAt(n-1);!r&&(a===NT||a>=55296&&a<=56319)&&(this.carriedFromPrevious=e[n-1],n--,e=e.slice(0,n));const{stateTable:s}=this;for(this.chunk=e,this.i=0;this.i<n;)s[this.state].call(this);return this.chunkPosition+=n,r?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:e,i:r}=this;if(this.prevI=r,this.i=r+1,r>=e.length)return Nr;const n=e.charCodeAt(r);if(this.column++,n<55296){if(n>=$N||n===DT)return n;switch(n){case $a:return this.line++,this.column=0,this.positionAtNewLine=this.position,$a;case NT:return e.charCodeAt(r+1)===$a&&(this.i=r+2),this.line++,this.column=0,this.positionAtNewLine=this.position,ws;default:return this.fail("disallowed character."),n}}if(n>56319)return n>=57344&&n<=65533||this.fail("disallowed character."),n;const a=65536+(n-55296)*1024+(e.charCodeAt(r+1)-56320);return this.i=r+2,a>1114111&&this.fail("disallowed character."),a}getCode11(){const{chunk:e,i:r}=this;if(this.prevI=r,this.i=r+1,r>=e.length)return Nr;const n=e.charCodeAt(r);if(this.column++,n<55296){if(n>31&&n<127||n>159&&n!==VN||n===DT)return n;switch(n){case $a:return this.line++,this.column=0,this.positionAtNewLine=this.position,$a;case NT:{const s=e.charCodeAt(r+1);(s===$a||s===qN)&&(this.i=r+2)}case qN:case VN:return this.line++,this.column=0,this.positionAtNewLine=this.position,ws;default:return this.fail("disallowed character."),n}}if(n>56319)return n>=57344&&n<=65533||this.fail("disallowed character."),n;const a=65536+(n-55296)*1024+(e.charCodeAt(r+1)-56320);return this.i=r+2,a>1114111&&this.fail("disallowed character."),a}getCodeNorm(){const e=this.getCode();return e===ws?$a:e}unget(){this.i=this.prevI,this.column--}captureTo(e){let{i:r}=this;const{chunk:n}=this;for(;;){const a=this.getCode(),s=a===ws,o=s?$a:a;if(o===Nr||e.includes(o))return this.text+=n.slice(r,this.prevI),o;s&&(this.text+=`${n.slice(r,this.prevI)}
`,r=this.i)}}captureToChar(e){let{i:r}=this;const{chunk:n}=this;for(;;){let a=this.getCode();switch(a){case ws:this.text+=`${n.slice(r,this.prevI)}
`,r=this.i,a=$a;break;case Nr:return this.text+=n.slice(r),!1}if(a===e)return this.text+=n.slice(r,this.prevI),!0}}captureNameChars(){const{chunk:e,i:r}=this;for(;;){const n=this.getCode();if(n===Nr)return this.name+=e.slice(r),Nr;if(!DN(n))return this.name+=e.slice(r,this.prevI),n===ws?$a:n}}skipSpaces(){for(;;){const e=this.getCodeNorm();if(e===Nr||!Ni(e))return e}}setXMLVersion(e){this.currentXMLVersion=e,e==="1.0"?(this.isChar=vae,this.getCode=this.getCode10):(this.isChar=Sae,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=Rae}sBeginWhitespace(){const e=this.i,r=this.skipSpaces();switch(this.prevI!==e&&(this.xmlDeclPossible=!1),r){case Ru:if(this.state=OT,this.text.length!==0)throw new Error("no-empty text at start");break;case Nr:break;default:this.unget(),this.state=li,this.xmlDeclPossible=!1}}sDoctype(){var e;const r=this.captureTo(Zae);switch(r){case un:{(e=this.doctypeHandler)===null||e===void 0||e.call(this,this.text),this.text="",this.state=li,this.doctype=!0;break}case Nr:break;default:this.text+=String.fromCodePoint(r),r===BF?this.state=Xl:c1(r)&&(this.state=Iae,this.q=r)}}sDoctypeQuote(){const e=this.q;this.captureToChar(e)&&(this.text+=String.fromCodePoint(e),this.q=null,this.state=TT)}sDTD(){const e=this.captureTo(ese);e!==Nr&&(this.text+=String.fromCodePoint(e),e===ld?this.state=TT:e===Ru?this.state=Dae:c1(e)&&(this.state=Pae,this.q=e))}sDTDQuoted(){const e=this.q;this.captureToChar(e)&&(this.text+=String.fromCodePoint(e),this.state=Xl,this.q=null)}sDTDOpenWaka(){const e=this.getCodeNorm();switch(this.text+=String.fromCodePoint(e),e){case UN:this.state=Nae,this.openWakaBang="";break;case Cn:this.state=Mae;break;default:this.state=Xl}}sDTDOpenWakaBang(){const e=String.fromCodePoint(this.getCodeNorm()),r=this.openWakaBang+=e;this.text+=e,r!=="-"&&(this.state=r==="--"?ET:Xl,this.openWakaBang="")}sDTDComment(){this.captureToChar(o1)&&(this.text+="-",this.state=jae)}sDTDCommentEnding(){const e=this.getCodeNorm();this.text+=String.fromCodePoint(e),this.state=e===o1?Cae:ET}sDTDCommentEnded(){const e=this.getCodeNorm();this.text+=String.fromCodePoint(e),e===un?this.state=Xl:(this.fail("malformed comment."),this.state=ET)}sDTDPI(){this.captureToChar(Cn)&&(this.text+="?",this.state=Fae)}sDTDPIEnding(){const e=this.getCodeNorm();this.text+=String.fromCodePoint(e),e===un&&(this.state=Xl)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:e}=this;const{chunk:r}=this;e:for(;;)switch(this.getCode()){case ws:this.entity+=`${r.slice(e,this.prevI)}
`,e=this.i;break;case Yae:{const{entityReturnState:n}=this,a=this.entity+r.slice(e,this.prevI);this.state=n;let s;a===""?(this.fail("empty entity name."),s="&;"):(s=this.parseEntity(a),this.entity=""),(n!==li||this.textHandler!==void 0)&&(this.text+=s);break e}case Nr:this.entity+=r.slice(e);break e}}sOpenWaka(){const e=this.getCode();if(ih(e))this.state=zae,this.unget(),this.xmlDeclPossible=!1;else switch(e){case u1:this.state=Kae,this.xmlDeclPossible=!1;break;case UN:this.state=Lae,this.openWakaBang="",this.xmlDeclPossible=!1;break;case Cn:this.state=Vae;break;default:this.fail("disallowed character in tag name"),this.state=li,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=xT,this.openWakaBang="";break;case"--":this.state=AT,this.openWakaBang="";break;case"DOCTYPE":this.state=TT,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(o1)&&(this.state=Bae)}sCommentEnding(){var e;const r=this.getCodeNorm();r===o1?(this.state=$ae,(e=this.commentHandler)===null||e===void 0||e.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(r)}`,this.state=AT)}sCommentEnded(){const e=this.getCodeNorm();e!==un?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(e)}`,this.state=AT):this.state=li}sCData(){this.captureToChar(ld)&&(this.state=Uae)}sCDataEnding(){const e=this.getCodeNorm();e===ld?this.state=qae:(this.text+=`]${String.fromCodePoint(e)}`,this.state=xT)}sCDataEnding2(){var e;const r=this.getCodeNorm();switch(r){case un:{(e=this.cdataHandler)===null||e===void 0||e.call(this,this.text),this.text="",this.state=li;break}case ld:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(r)}`,this.state=xT}}sPIFirstChar(){const e=this.getCodeNorm();this.nameStartCheck(e)?(this.piTarget+=String.fromCodePoint(e),this.state=jN):e===Cn||Ni(e)?(this.fail("processing instruction without a target."),this.state=e===Cn?s1:RT):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(e),this.state=jN)}sPIRest(){const{chunk:e,i:r}=this;for(;;){const n=this.getCodeNorm();if(n===Nr){this.piTarget+=e.slice(r);return}if(!this.nameCheck(n)){this.piTarget+=e.slice(r,this.prevI);const a=n===Cn;a||Ni(n)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=a?Sc:CN):this.state=a?s1:RT:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(n));break}}}sPIBody(){if(this.text.length===0){const e=this.getCodeNorm();e===Cn?this.state=s1:Ni(e)||(this.text=String.fromCodePoint(e))}else this.captureToChar(Cn)&&(this.state=s1)}sPIEnding(){var e;const r=this.getCodeNorm();if(r===un){const{piTarget:n}=this;n.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(e=this.piHandler)===null||e===void 0||e.call(this,{target:n,body:this.text}),this.piTarget=this.text="",this.state=li}else r===Cn?this.text+="?":(this.text+=`?${String.fromCodePoint(r)}`,this.state=RT);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const e=this.skipSpaces();if(e===Cn){this.state=Sc;return}e!==Nr&&(this.state=Hae,this.name=String.fromCodePoint(e))}sXMLDeclName(){const e=this.captureTo(tse);if(e===Cn){this.state=Sc,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if(Ni(e)||e===cd){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=e===cd?MN:kae}}sXMLDeclEq(){const e=this.getCodeNorm();if(e===Cn){this.state=Sc,this.fail("XML declaration is incomplete.");return}Ni(e)||(e!==cd&&this.fail("value required."),this.state=MN)}sXMLDeclValueStart(){const e=this.getCodeNorm();if(e===Cn){this.state=Sc,this.fail("XML declaration is incomplete.");return}Ni(e)||(c1(e)?this.q=e:(this.fail("value must be quoted."),this.q=$N),this.state=Qae)}sXMLDeclValue(){const e=this.captureTo([this.q,Cn]);if(e===Cn){this.state=Sc,this.text="",this.fail("XML declaration is incomplete.");return}if(e===Nr)return;const r=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const n=r;this.xmlDecl.version=n,/^1\.[0-9]+$/.test(n)?this.opt.forceXMLVersion||this.setXMLVersion(n):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(r)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=r;break;case"standalone":r!=="yes"&&r!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=r;break}this.name="",this.state=Gae}sXMLDeclSeparator(){const e=this.getCodeNorm();if(e===Cn){this.state=Sc;return}Ni(e)||(this.fail("whitespace required."),this.unget()),this.state=CN}sXMLDeclEnding(){var e;this.getCodeNorm()===un?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(e=this.xmldeclHandler)===null||e===void 0||e.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=li):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var e;const r=this.captureNameChars();if(r===Nr)return;const n=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=n.ns=Object.create(null)),(e=this.openTagStartHandler)===null||e===void 0||e.call(this,n),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),r){case un:this.openTag();break;case u1:this.state=IT;break;default:Ni(r)||this.fail("disallowed character in tag name."),this.state=ah}}sOpenTagSlash(){this.getCode()===un?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=ah)}sAttrib(){const e=this.skipSpaces();e!==Nr&&(ih(e)?(this.unget(),this.state=PT):e===un?this.openTag():e===u1?this.state=IT:this.fail("disallowed character in attribute name."))}sAttribName(){const e=this.captureNameChars();e===cd?this.state=FN:Ni(e)?this.state=Wae:e===un?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):e!==Nr&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const e=this.skipSpaces();switch(e){case Nr:return;case cd:this.state=FN;break;default:this.fail("attribute without value."),this.text="",this.name="",e===un?this.openTag():ih(e)?(this.unget(),this.state=PT):(this.fail("disallowed character in attribute name."),this.state=ah)}}sAttribValue(){const e=this.getCodeNorm();c1(e)?(this.q=e,this.state=LN):Ni(e)||(this.fail("unquoted attribute value."),this.state=BN,this.unget())}sAttribValueQuoted(){const{q:e,chunk:r}=this;let{i:n}=this;for(;;)switch(this.getCode()){case e:this.pushAttrib(this.name,this.text+r.slice(n,this.prevI)),this.name=this.text="",this.q=null,this.state=Xae;return;case Wh:this.text+=r.slice(n,this.prevI),this.state=a1,this.entityReturnState=LN;return;case $a:case ws:case DT:this.text+=`${r.slice(n,this.prevI)} `,n=this.i;break;case Ru:this.text+=r.slice(n,this.prevI),this.fail("disallowed character.");return;case Nr:this.text+=r.slice(n);return}}sAttribValueClosed(){const e=this.getCodeNorm();Ni(e)?this.state=ah:e===un?this.openTag():e===u1?this.state=IT:ih(e)?(this.fail("no whitespace between attributes."),this.unget(),this.state=PT):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const e=this.captureTo(rse);switch(e){case Wh:this.state=a1,this.entityReturnState=BN;break;case Ru:this.fail("disallowed character.");break;case Nr:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",e===un?this.openTag():this.state=ah}}sCloseTag(){const e=this.captureNameChars();e===un?this.closeTag():Ni(e)?this.state=Jae:e!==Nr&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case un:this.closeTag();break;case Nr:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:e,forbiddenState:r}=this;const{chunk:n,textHandler:a}=this;e:for(;;)switch(this.getCode()){case Ru:{if(this.state=OT,a!==void 0){const{text:s}=this,o=n.slice(e,this.prevI);s.length!==0?(a(s+o),this.text=""):o.length!==0&&a(o)}r=Tc;break e}case Wh:this.state=a1,this.entityReturnState=li,a!==void 0&&(this.text+=n.slice(e,this.prevI)),r=Tc;break e;case ld:switch(r){case Tc:r=HN;break;case HN:r=jT;break;case jT:break;default:throw new Error("impossible state")}break;case un:r===jT&&this.fail('the string "]]>" is disallowed in char data.'),r=Tc;break;case ws:a!==void 0&&(this.text+=`${n.slice(e,this.prevI)}
`),e=this.i,r=Tc;break;case Nr:a!==void 0&&(this.text+=n.slice(e));break e;default:r=Tc}this.forbiddenState=r}handleTextOutsideRoot(){let{i:e}=this;const{chunk:r,textHandler:n}=this;let a=!1;e:for(;;){const s=this.getCode();switch(s){case Ru:{if(this.state=OT,n!==void 0){const{text:o}=this,u=r.slice(e,this.prevI);o.length!==0?(n(o+u),this.text=""):u.length!==0&&n(u)}break e}case Wh:this.state=a1,this.entityReturnState=li,n!==void 0&&(this.text+=r.slice(e,this.prevI)),a=!0;break e;case ws:n!==void 0&&(this.text+=`${r.slice(e,this.prevI)}
`),e=this.i;break;case Nr:n!==void 0&&(this.text+=r.slice(e));break e;default:Ni(s)||(a=!0)}}a&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(e,r){var n;const{prefix:a,local:s}=this.qname(e),o={name:e,prefix:a,local:s,value:r};if(this.attribList.push(o),(n=this.attributeHandler)===null||n===void 0||n.call(this,o),a==="xmlns"){const u=r.trim();this.currentXMLVersion==="1.0"&&u===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[s]=u,AO(this,s,u)}else if(e==="xmlns"){const u=r.trim();this.topNS[""]=u,AO(this,"",u)}}pushAttribPlain(e,r){var n;const a={name:e,value:r};this.attribList.push(a),(n=this.attributeHandler)===null||n===void 0||n.call(this,a)}end(){var e,r;this.sawRoot||this.fail("document must contain a root element.");const{tags:n}=this;for(;n.length>0;){const s=n.pop();this.fail(`unclosed tag: ${s.name}`)}this.state!==NN&&this.state!==li&&this.fail("unexpected end.");const{text:a}=this;return a.length!==0&&((e=this.textHandler)===null||e===void 0||e.call(this,a),this.text=""),this._closed=!0,(r=this.endHandler)===null||r===void 0||r.call(this),this._init(),this}resolve(e){var r,n;let a=this.topNS[e];if(a!==void 0)return a;const{tags:s}=this;for(let o=s.length-1;o>=0;o--)if(a=s[o].ns[e],a!==void 0)return a;return a=this.ns[e],a!==void 0?a:(n=(r=this.opt).resolvePrefix)===null||n===void 0?void 0:n.call(r,e)}qname(e){const r=e.indexOf(":");if(r===-1)return{prefix:"",local:e};const n=e.slice(r+1),a=e.slice(0,r);return(a===""||n===""||n.includes(":"))&&this.fail(`malformed name: ${e}.`),{prefix:a,local:n}}processAttribsNS(){var e;const{attribList:r}=this,n=this.tag;{const{prefix:o,local:u}=this.qname(n.name);n.prefix=o,n.local=u;const c=n.uri=(e=this.resolve(o))!==null&&e!==void 0?e:"";o!==""&&(o==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),c===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(o)}.`),n.uri=o))}if(r.length===0)return;const{attributes:a}=n,s=new Set;for(const o of r){const{name:u,prefix:c,local:l}=o;let d,f;c===""?(d=u==="xmlns"?gd:"",f=u):(d=this.resolve(c),d===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(c)}.`),d=c),f=`{${d}}${l}`),s.has(f)&&this.fail(`duplicate attribute: ${f}.`),s.add(f),o.uri=d,a[u]=o}this.attribList=[]}processAttribsPlain(){const{attribList:e}=this,r=this.tag.attributes;for(const{name:n,value:a}of e)r[n]!==void 0&&this.fail(`duplicate attribute: ${n}.`),r[n]=a;this.attribList=[]}openTag(){var e;this.processAttribs();const{tags:r}=this,n=this.tag;n.isSelfClosing=!1,(e=this.openTagHandler)===null||e===void 0||e.call(this,n),r.push(n),this.state=li,this.name=""}openSelfClosingTag(){var e,r,n;this.processAttribs();const{tags:a}=this,s=this.tag;s.isSelfClosing=!0,(e=this.openTagHandler)===null||e===void 0||e.call(this,s),(r=this.closeTagHandler)===null||r===void 0||r.call(this,s),(this.tag=(n=a[a.length-1])!==null&&n!==void 0?n:null)===null&&(this.closedRoot=!0),this.state=li,this.name=""}closeTag(){const{tags:e,name:r}=this;if(this.state=li,this.name="",r===""){this.fail("weird empty close tag."),this.text+="</>";return}const n=this.closeTagHandler;let a=e.length;for(;a-- >0;){const s=this.tag=e.pop();if(this.topNS=s.ns,n==null||n(s),s.name===r)break;this.fail("unexpected close tag.")}a===0?this.closedRoot=!0:a<0&&(this.fail(`unmatched closing tag: ${r}.`),this.text+=`</${r}>`)}parseEntity(e){if(e[0]!=="#"){const n=this.ENTITIES[e];return n!==void 0?n:(this.fail(this.isName(e)?"undefined entity.":"disallowed character in entity name."),`&${e};`)}let r=NaN;return e[1]==="x"&&/^#x[0-9a-f]+$/i.test(e)?r=parseInt(e.slice(2),16):/^#[0-9]+$/.test(e)&&(r=parseInt(e.slice(1),10)),this.isChar(r)?String.fromCodePoint(r):(this.fail("malformed character entity."),`&${e};`)}}cl.SaxesParser=sse;var tv={};Object.defineProperty(tv,"__esModule",{value:!0});tv.ParseError=void 0;let ose=class extends Error{constructor(e,r){const n=e.saxParser;super(e.trackPosition?`Line ${n.line} column ${n.column+1}: ${r}`:r)}};tv.ParseError=ose;var UF={},qF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateIri=t.IriValidationStrategy=void 0;function e(){const u="[!$&'()*+,;=]",c="%[a-fA-F0-9]{2}",l="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",d=`${l}\\.${l}\\.${l}\\.${l}`,f="[a-fA-F0-9]{1,4}",h=`(${f}:${f}|${d})`,p=`((${f}:){6}${h}|::(${f}:){5}${h}|(${f})?::(${f}:){4}${h}|((${f}:){0,1}${f})?::(${f}:){3}${h}|((${f}:){0,2}${f})?::(${f}:){2}${h}|((${f}:){0,3}${f})?::${f}:${h}|((${f}:){0,4}${f})?::${h}|((${f}:){0,5}${f})?::${f}|((${f}:){0,6}${f})?::)`,b=`v[a-fA-F0-9]+\\.(${u}|${u}|":)+`,_=`\\[(${p}|${b})\\]`,E="[0-9]*",w="[a-zA-Z][a-zA-Z0-9+\\-.]*",A="[---]",D="[a-zA-Z0-9\\-._~-----------------]",U=`(${D}|${c}|${u}|[:@])*`,H=`(${U}|[\\/?])*`,N=`(${U}|${A}|[\\/?])*`,R=`(${U})+`,F=`(${U})*`,X="",ne=`${R}(\\/${F})*`,$=`\\/(${R}(\\/${F})*)?`,C=`(\\/${F})*`,Q=`(${D}|${c}|${u})*`,se=`(${_}|${d}|${Q})`,he=`(\\/\\/${`(${`(${D}|${c}|${u}|:)*`}@)?${se}(:${E})?`}${C}|${$}|${ne}|${X})`,Te=`^${w}:${he}(\\?${N})?(#${H})?$`;return new RegExp(Te,"u")}const r=e(),n=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var a;(function(o){o.Strict="strict",o.Pragmatic="pragmatic",o.None="none"})(a=t.IriValidationStrategy||(t.IriValidationStrategy={}));function s(o,u=a.Strict){switch(u){case a.Strict:return r.test(o)?void 0:new Error(`Invalid IRI according to RFC 3987: '${o}'`);case a.Pragmatic:return n.test(o)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${o}'`);case a.None:return;default:return new Error(`Not supported validation strategy "${u}"`)}}t.validateIri=s})(qF);(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(qF,t)})(UF);Object.defineProperty(nf,"__esModule",{value:!0});nf.ParseType=nf.RdfXmlParser=void 0;const QN=Oa,use=cl,GN=Xt,cse=tv,lse=ft,CT=UF;class Yt extends GN.Transform{constructor(e){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},e&&(Object.assign(this,e),this.options=e),this.dataFactory||(this.dataFactory=new lse.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.validateUri!==!1&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?CT.IriValidationStrategy.Pragmatic:CT.IriValidationStrategy.None),this.saxParser=new use.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(e){const r=new GN.PassThrough({readableObjectMode:!0});e.on("error",a=>n.emit("error",a)),e.on("data",a=>r.push(a)),e.on("end",()=>r.push(null));const n=r.pipe(new Yt(this.options));return n}_transform(e,r,n){try{this.saxParser.write(e)}catch(a){return n(a)}n()}newParseError(e){return new cse.ParseError(this,e)}valueToUri(e,r){return this.uriToNamedNode((0,QN.resolve)(e,r.baseIRI))}uriToNamedNode(e){const r=(0,CT.validateIri)(e,this.iriValidationStrategy);if(r instanceof Error)throw this.newParseError(r.message);return this.dataFactory.namedNode(e)}validateNcname(e){if(!Yt.NCNAME_MATCHER.test(e))throw this.newParseError(`Not a valid NCName: ${e}`)}attachSaxListeners(){this.saxParser.on("error",e=>this.emit("error",e)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(e){const r=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let n=So.RESOURCE;if(r&&(r.hadChildren=!0,n=r.childrenParseType),r&&r.childrenStringTags){const s=e.name;let o="";for(const d in e.attributes)o+=` ${d}="${e.attributes[d].value}"`;const c=`<${`${s}${o}`}>`;r.childrenStringTags.push(c);const l={childrenStringTags:r.childrenStringTags};l.childrenStringEmitClosingTag=`</${s}>`,this.activeTagStack.push(l);return}const a={};r?(a.language=r.language,a.baseIRI=r.baseIRI):a.baseIRI=this.baseIRI,this.activeTagStack.push(a),n===So.RESOURCE?this.onTagResource(e,a,r,!r):this.onTagProperty(e,a,r)}onTagResource(e,r,n,a){r.childrenParseType=So.PROPERTY;let s=!0;if(e.uri===Yt.RDF){if(!a&&Yt.FORBIDDEN_NODE_ELEMENTS.indexOf(e.local)>=0)throw this.newParseError(`Illegal node element name: ${e.local}`);switch(e.local){case"RDF":r.childrenParseType=So.RESOURCE;case"Description":s=!1}}const o=[],u=[];let c=null,l=!1,d=!1,f=null;for(const h in e.attributes){const p=e.attributes[h];if(n&&p.uri===Yt.RDF)switch(p.local){case"about":if(c)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${p.value} and ${c} where found.`);c=p.value;continue;case"ID":if(c)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${p.value} and ${c} where found.`);this.validateNcname(p.value),c="#"+p.value,l=!0;continue;case"nodeID":if(c)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${p.value} and ${c} where found.`);this.validateNcname(p.value),c=p.value,d=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":f=p.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(p.uri===Yt.XML){if(p.local==="lang"){r.language=p.value===""?null:p.value.toLowerCase();continue}else if(p.local==="base"){r.baseIRI=(0,QN.resolve)(p.value,r.baseIRI);continue}}p.prefix!=="xml"&&p.uri&&(o.push(this.uriToNamedNode(p.uri+p.local)),u.push(p.value))}if(c!==null&&(r.subject=d?this.dataFactory.blankNode(c):this.valueToUri(c,r),l&&this.claimNodeId(r.subject)),r.subject||(r.subject=this.dataFactory.blankNode()),s){const h=this.uriToNamedNode(e.uri+e.local);this.emitTriple(r.subject,this.dataFactory.namedNode(Yt.RDF+"type"),h,n?n.reifiedStatementId:null)}if(n){if(n.predicate)if(n.childrenCollectionSubject){const h=this.dataFactory.blankNode();this.emitTriple(n.childrenCollectionSubject,n.childrenCollectionPredicate,h,n.reifiedStatementId),this.emitTriple(h,this.dataFactory.namedNode(Yt.RDF+"first"),r.subject,r.reifiedStatementId),n.childrenCollectionSubject=h,n.childrenCollectionPredicate=this.dataFactory.namedNode(Yt.RDF+"rest")}else{this.emitTriple(n.subject,n.predicate,r.subject,n.reifiedStatementId);for(let h=0;h<n.predicateSubPredicates.length;h++)this.emitTriple(r.subject,n.predicateSubPredicates[h],n.predicateSubObjects[h],null);n.predicateSubPredicates=[],n.predicateSubObjects=[],n.predicateEmitted=!0}for(let h=0;h<o.length;h++){const p=this.dataFactory.literal(u[h],r.datatype||r.language);this.emitTriple(r.subject,o[h],p,n.reifiedStatementId)}f&&this.emitTriple(r.subject,this.dataFactory.namedNode(Yt.RDF+"type"),this.uriToNamedNode(f),null)}}onTagProperty(e,r,n){if(r.childrenParseType=So.RESOURCE,r.subject=n.subject,e.uri===Yt.RDF&&e.local==="li"?(n.listItemCounter||(n.listItemCounter=1),r.predicate=this.uriToNamedNode(e.uri+"_"+n.listItemCounter++)):r.predicate=this.uriToNamedNode(e.uri+e.local),e.uri===Yt.RDF&&Yt.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(e.local)>=0)throw this.newParseError(`Illegal property element name: ${e.local}`);r.predicateSubPredicates=[],r.predicateSubObjects=[];let a=!1,s=!1,o=null,u=!0;const c=[],l=[];for(const d in e.attributes){const f=e.attributes[d];if(f.uri===Yt.RDF)switch(f.local){case"resource":if(o)throw this.newParseError(`Found both rdf:resource (${f.value}) and rdf:nodeID (${o}).`);if(a)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${f.value})`);r.hadChildren=!0,o=f.value,u=!1;continue;case"datatype":if(s)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${f.value}).`);if(a)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${f.value})`);r.datatype=this.valueToUri(f.value,r);continue;case"nodeID":if(s)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${f.value}).`);if(r.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${f.value}).`);if(a)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${f.value})`);this.validateNcname(f.value),r.hadChildren=!0,o=f.value,u=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(s)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(r.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${r.datatype.value})`);if(o)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${o})`);if(f.value==="Resource"){a=!0,r.childrenParseType=So.PROPERTY;const h=this.dataFactory.blankNode();this.emitTriple(r.subject,r.predicate,h,r.reifiedStatementId),r.subject=h,r.predicate=null}else f.value==="Collection"?(a=!0,r.hadChildren=!0,r.childrenCollectionSubject=r.subject,r.childrenCollectionPredicate=r.predicate,u=!1):f.value==="Literal"&&(a=!0,r.childrenTagsToString=!0,r.childrenStringTags=[]);continue;case"ID":this.validateNcname(f.value),r.reifiedStatementId=this.valueToUri("#"+f.value,r),this.claimNodeId(r.reifiedStatementId);continue}else if(f.uri===Yt.XML&&f.local==="lang"){r.language=f.value===""?null:f.value.toLowerCase();continue}if(f.prefix!=="xml"&&f.prefix!=="xmlns"&&(f.prefix!==""||f.local!=="xmlns")&&f.uri){if(a||r.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${f.value}`);r.hadChildren=!0,s=!0,c.push(this.uriToNamedNode(f.uri+f.local)),l.push(this.dataFactory.literal(f.value,r.datatype||r.language))}}if(o!==null){const d=r.subject;r.subject=u?this.dataFactory.blankNode(o):this.valueToUri(o,r),this.emitTriple(d,r.predicate,r.subject,r.reifiedStatementId);for(let f=0;f<c.length;f++)this.emitTriple(r.subject,c[f],l[f],null);r.predicateEmitted=!0}else u&&(r.predicateSubPredicates=c,r.predicateSubObjects=l,r.predicateEmitted=!1)}emitTriple(e,r,n,a){this.push(this.dataFactory.quad(e,r,n,this.defaultGraph)),a&&(this.push(this.dataFactory.quad(a,this.dataFactory.namedNode(Yt.RDF+"type"),this.dataFactory.namedNode(Yt.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(a,this.dataFactory.namedNode(Yt.RDF+"subject"),e,this.defaultGraph)),this.push(this.dataFactory.quad(a,this.dataFactory.namedNode(Yt.RDF+"predicate"),r,this.defaultGraph)),this.push(this.dataFactory.quad(a,this.dataFactory.namedNode(Yt.RDF+"object"),n,this.defaultGraph)))}claimNodeId(e){if(!this.allowDuplicateRdfIds){if(this.nodeIds[e.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${e.value}'.`);this.nodeIds[e.value]=!0}}onText(e){const r=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;r&&(r.childrenStringTags?r.childrenStringTags.push(e):r.predicate&&(r.text=e))}onCloseTag(){const e=this.activeTagStack.pop();if(e.childrenStringEmitClosingTag&&e.childrenStringTags.push(e.childrenStringEmitClosingTag),e.childrenTagsToString&&(e.datatype=this.dataFactory.namedNode(Yt.RDF+"XMLLiteral"),e.text=e.childrenStringTags.join(""),e.hadChildren=!1),e.childrenCollectionSubject)this.emitTriple(e.childrenCollectionSubject,e.childrenCollectionPredicate,this.dataFactory.namedNode(Yt.RDF+"nil"),e.reifiedStatementId);else if(e.predicate){if(!e.hadChildren&&e.childrenParseType!==So.PROPERTY)this.emitTriple(e.subject,e.predicate,this.dataFactory.literal(e.text||"",e.datatype||e.language),e.reifiedStatementId);else if(!e.predicateEmitted){const r=this.dataFactory.blankNode();this.emitTriple(e.subject,e.predicate,r,e.reifiedStatementId);for(let n=0;n<e.predicateSubPredicates.length;n++)this.emitTriple(r,e.predicateSubPredicates[n],e.predicateSubObjects[n],null)}}}onDoctype(e){e.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(r,n,a)=>(this.saxParser.ENTITIES[n]=a,""))}}nf.RdfXmlParser=Yt;Yt.MIME_TYPE="application/rdf+xml";Yt.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";Yt.XML="http://www.w3.org/XML/1998/namespace";Yt.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"];Yt.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"];Yt.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u;var So;(function(t){t[t.RESOURCE=0]="RESOURCE",t[t.PROPERTY=1]="PROPERTY"})(So||(nf.ParseType=So={}));(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(nf,t)})(DF);Object.defineProperty(ev,"__esModule",{value:!0});ev.ActorRdfParseRdfXml=void 0;const dse=El,fse=DF;class hse extends dse.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){var s;e.data.on("error",o=>a.emit("error",o));const a=e.data.pipe(new fse.RdfXmlParser({baseIRI:(s=e.metadata)==null?void 0:s.baseIRI}));return{data:a,metadata:{triples:!0}}}}ev.ActorRdfParseRdfXml=hse;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ev,t)})(PF);var VF={},rv={},Jx={},HF={};Object.defineProperty(HF,"__esModule",{value:!0});var kF={};Object.defineProperty(kF,"__esModule",{value:!0});var QF={};Object.defineProperty(QF,"__esModule",{value:!0});var nv={},GF={},Np={},Yx={},Wo={},Zx={};Object.defineProperty(Zx,"__esModule",{value:!0});Zx.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(t){return t.charCodeAt(0)}));var eR={};Object.defineProperty(eR,"__esModule",{value:!0});eR.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(t){return t.charCodeAt(0)}));var xO={};(function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCodePoint=t.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);t.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(s){var o="";return s>65535&&(s-=65536,o+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),o+=String.fromCharCode(s),o};function n(s){var o;return s>=55296&&s<=57343||s>1114111?65533:(o=r.get(s))!==null&&o!==void 0?o:s}t.replaceCodePoint=n;function a(s){return(0,t.fromCodePoint)(n(s))}t.default=a})(xO);(function(t){var e=g&&g.__createBinding||(Object.create?function(F,X,ne,$){$===void 0&&($=ne);var C=Object.getOwnPropertyDescriptor(X,ne);(!C||("get"in C?!X.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return X[ne]}}),Object.defineProperty(F,$,C)}:function(F,X,ne,$){$===void 0&&($=ne),F[$]=X[ne]}),r=g&&g.__setModuleDefault||(Object.create?function(F,X){Object.defineProperty(F,"default",{enumerable:!0,value:X})}:function(F,X){F.default=X}),n=g&&g.__importStar||function(F){if(F&&F.__esModule)return F;var X={};if(F!=null)for(var ne in F)ne!=="default"&&Object.prototype.hasOwnProperty.call(F,ne)&&e(X,F,ne);return r(X,F),X},a=g&&g.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXML=t.decodeHTMLStrict=t.decodeHTMLAttribute=t.decodeHTML=t.determineBranch=t.EntityDecoder=t.DecodingMode=t.BinTrieFlags=t.fromCodePoint=t.replaceCodePoint=t.decodeCodePoint=t.xmlDecodeTree=t.htmlDecodeTree=void 0;var s=a(Zx);t.htmlDecodeTree=s.default;var o=a(eR);t.xmlDecodeTree=o.default;var u=n(xO);t.decodeCodePoint=u.default;var c=xO;Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return c.replaceCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return c.fromCodePoint}});var l;(function(F){F[F.NUM=35]="NUM",F[F.SEMI=59]="SEMI",F[F.EQUALS=61]="EQUALS",F[F.ZERO=48]="ZERO",F[F.NINE=57]="NINE",F[F.LOWER_A=97]="LOWER_A",F[F.LOWER_F=102]="LOWER_F",F[F.LOWER_X=120]="LOWER_X",F[F.LOWER_Z=122]="LOWER_Z",F[F.UPPER_A=65]="UPPER_A",F[F.UPPER_F=70]="UPPER_F",F[F.UPPER_Z=90]="UPPER_Z"})(l||(l={}));var d=32,f;(function(F){F[F.VALUE_LENGTH=49152]="VALUE_LENGTH",F[F.BRANCH_LENGTH=16256]="BRANCH_LENGTH",F[F.JUMP_TABLE=127]="JUMP_TABLE"})(f=t.BinTrieFlags||(t.BinTrieFlags={}));function h(F){return F>=l.ZERO&&F<=l.NINE}function p(F){return F>=l.UPPER_A&&F<=l.UPPER_F||F>=l.LOWER_A&&F<=l.LOWER_F}function b(F){return F>=l.UPPER_A&&F<=l.UPPER_Z||F>=l.LOWER_A&&F<=l.LOWER_Z||h(F)}function _(F){return F===l.EQUALS||b(F)}var E;(function(F){F[F.EntityStart=0]="EntityStart",F[F.NumericStart=1]="NumericStart",F[F.NumericDecimal=2]="NumericDecimal",F[F.NumericHex=3]="NumericHex",F[F.NamedEntity=4]="NamedEntity"})(E||(E={}));var w;(function(F){F[F.Legacy=0]="Legacy",F[F.Strict=1]="Strict",F[F.Attribute=2]="Attribute"})(w=t.DecodingMode||(t.DecodingMode={}));var O=function(){function F(X,ne,$){this.decodeTree=X,this.emitCodePoint=ne,this.errors=$,this.state=E.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=w.Strict}return F.prototype.startEntity=function(X){this.decodeMode=X,this.state=E.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},F.prototype.write=function(X,ne){switch(this.state){case E.EntityStart:return X.charCodeAt(ne)===l.NUM?(this.state=E.NumericStart,this.consumed+=1,this.stateNumericStart(X,ne+1)):(this.state=E.NamedEntity,this.stateNamedEntity(X,ne));case E.NumericStart:return this.stateNumericStart(X,ne);case E.NumericDecimal:return this.stateNumericDecimal(X,ne);case E.NumericHex:return this.stateNumericHex(X,ne);case E.NamedEntity:return this.stateNamedEntity(X,ne)}},F.prototype.stateNumericStart=function(X,ne){return ne>=X.length?-1:(X.charCodeAt(ne)|d)===l.LOWER_X?(this.state=E.NumericHex,this.consumed+=1,this.stateNumericHex(X,ne+1)):(this.state=E.NumericDecimal,this.stateNumericDecimal(X,ne))},F.prototype.addToNumericResult=function(X,ne,$,C){if(ne!==$){var Q=$-ne;this.result=this.result*Math.pow(C,Q)+parseInt(X.substr(ne,Q),C),this.consumed+=Q}},F.prototype.stateNumericHex=function(X,ne){for(var $=ne;ne<X.length;){var C=X.charCodeAt(ne);if(h(C)||p(C))ne+=1;else return this.addToNumericResult(X,$,ne,16),this.emitNumericEntity(C,3)}return this.addToNumericResult(X,$,ne,16),-1},F.prototype.stateNumericDecimal=function(X,ne){for(var $=ne;ne<X.length;){var C=X.charCodeAt(ne);if(h(C))ne+=1;else return this.addToNumericResult(X,$,ne,10),this.emitNumericEntity(C,2)}return this.addToNumericResult(X,$,ne,10),-1},F.prototype.emitNumericEntity=function(X,ne){var $;if(this.consumed<=ne)return($=this.errors)===null||$===void 0||$.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(X===l.SEMI)this.consumed+=1;else if(this.decodeMode===w.Strict)return 0;return this.emitCodePoint((0,u.replaceCodePoint)(this.result),this.consumed),this.errors&&(X!==l.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},F.prototype.stateNamedEntity=function(X,ne){for(var $=this.decodeTree,C=$[this.treeIndex],Q=(C&f.VALUE_LENGTH)>>14;ne<X.length;ne++,this.excess++){var se=X.charCodeAt(ne);if(this.treeIndex=T($,C,this.treeIndex+Math.max(1,Q),se),this.treeIndex<0)return this.result===0||this.decodeMode===w.Attribute&&(Q===0||_(se))?0:this.emitNotTerminatedNamedEntity();if(C=$[this.treeIndex],Q=(C&f.VALUE_LENGTH)>>14,Q!==0){if(se===l.SEMI)return this.emitNamedEntityData(this.treeIndex,Q,this.consumed+this.excess);this.decodeMode!==w.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},F.prototype.emitNotTerminatedNamedEntity=function(){var X,ne=this,$=ne.result,C=ne.decodeTree,Q=(C[$]&f.VALUE_LENGTH)>>14;return this.emitNamedEntityData($,Q,this.consumed),(X=this.errors)===null||X===void 0||X.missingSemicolonAfterCharacterReference(),this.consumed},F.prototype.emitNamedEntityData=function(X,ne,$){var C=this.decodeTree;return this.emitCodePoint(ne===1?C[X]&~f.VALUE_LENGTH:C[X+1],$),ne===3&&this.emitCodePoint(C[X+2],$),$},F.prototype.end=function(){var X;switch(this.state){case E.NamedEntity:return this.result!==0&&(this.decodeMode!==w.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case E.NumericDecimal:return this.emitNumericEntity(0,2);case E.NumericHex:return this.emitNumericEntity(0,3);case E.NumericStart:return(X=this.errors)===null||X===void 0||X.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case E.EntityStart:return 0}},F}();t.EntityDecoder=O;function A(F){var X="",ne=new O(F,function($){return X+=(0,u.fromCodePoint)($)});return function(C,Q){for(var se=0,ie=0;(ie=C.indexOf("&",ie))>=0;){X+=C.slice(se,ie),ne.startEntity(Q);var be=ne.write(C,ie+1);if(be<0){se=ie+ne.end();break}se=ie+be,ie=be===0?se+1:se}var he=X+C.slice(se);return X="",he}}function T(F,X,ne,$){var C=(X&f.BRANCH_LENGTH)>>7,Q=X&f.JUMP_TABLE;if(C===0)return Q!==0&&$===Q?ne:-1;if(Q){var se=$-Q;return se<0||se>=C?-1:F[ne+se]-1}for(var ie=ne,be=ie+C-1;ie<=be;){var he=ie+be>>>1,Te=F[he];if(Te<$)ie=he+1;else if(Te>$)be=he-1;else return F[he+C]}return-1}t.determineBranch=T;var I=A(s.default),D=A(o.default);function U(F,X){return X===void 0&&(X=w.Legacy),I(F,X)}t.decodeHTML=U;function H(F){return I(F,w.Attribute)}t.decodeHTMLAttribute=H;function N(F){return I(F,w.Strict)}t.decodeHTMLStrict=N;function R(F){return D(F,w.Strict)}t.decodeXML=R})(Wo);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var e=Wo,r;(function(h){h[h.Tab=9]="Tab",h[h.NewLine=10]="NewLine",h[h.FormFeed=12]="FormFeed",h[h.CarriageReturn=13]="CarriageReturn",h[h.Space=32]="Space",h[h.ExclamationMark=33]="ExclamationMark",h[h.Number=35]="Number",h[h.Amp=38]="Amp",h[h.SingleQuote=39]="SingleQuote",h[h.DoubleQuote=34]="DoubleQuote",h[h.Dash=45]="Dash",h[h.Slash=47]="Slash",h[h.Zero=48]="Zero",h[h.Nine=57]="Nine",h[h.Semi=59]="Semi",h[h.Lt=60]="Lt",h[h.Eq=61]="Eq",h[h.Gt=62]="Gt",h[h.Questionmark=63]="Questionmark",h[h.UpperA=65]="UpperA",h[h.LowerA=97]="LowerA",h[h.UpperF=70]="UpperF",h[h.LowerF=102]="LowerF",h[h.UpperZ=90]="UpperZ",h[h.LowerZ=122]="LowerZ",h[h.LowerX=120]="LowerX",h[h.OpeningSquareBracket=91]="OpeningSquareBracket"})(r||(r={}));var n;(function(h){h[h.Text=1]="Text",h[h.BeforeTagName=2]="BeforeTagName",h[h.InTagName=3]="InTagName",h[h.InSelfClosingTag=4]="InSelfClosingTag",h[h.BeforeClosingTagName=5]="BeforeClosingTagName",h[h.InClosingTagName=6]="InClosingTagName",h[h.AfterClosingTagName=7]="AfterClosingTagName",h[h.BeforeAttributeName=8]="BeforeAttributeName",h[h.InAttributeName=9]="InAttributeName",h[h.AfterAttributeName=10]="AfterAttributeName",h[h.BeforeAttributeValue=11]="BeforeAttributeValue",h[h.InAttributeValueDq=12]="InAttributeValueDq",h[h.InAttributeValueSq=13]="InAttributeValueSq",h[h.InAttributeValueNq=14]="InAttributeValueNq",h[h.BeforeDeclaration=15]="BeforeDeclaration",h[h.InDeclaration=16]="InDeclaration",h[h.InProcessingInstruction=17]="InProcessingInstruction",h[h.BeforeComment=18]="BeforeComment",h[h.CDATASequence=19]="CDATASequence",h[h.InSpecialComment=20]="InSpecialComment",h[h.InCommentLike=21]="InCommentLike",h[h.BeforeSpecialS=22]="BeforeSpecialS",h[h.SpecialStartSequence=23]="SpecialStartSequence",h[h.InSpecialTag=24]="InSpecialTag",h[h.BeforeEntity=25]="BeforeEntity",h[h.BeforeNumericEntity=26]="BeforeNumericEntity",h[h.InNamedEntity=27]="InNamedEntity",h[h.InNumericEntity=28]="InNumericEntity",h[h.InHexEntity=29]="InHexEntity"})(n||(n={}));function a(h){return h===r.Space||h===r.NewLine||h===r.Tab||h===r.FormFeed||h===r.CarriageReturn}function s(h){return h===r.Slash||h===r.Gt||a(h)}function o(h){return h>=r.Zero&&h<=r.Nine}function u(h){return h>=r.LowerA&&h<=r.LowerZ||h>=r.UpperA&&h<=r.UpperZ}function c(h){return h>=r.UpperA&&h<=r.UpperF||h>=r.LowerA&&h<=r.LowerF}var l;(function(h){h[h.NoValue=0]="NoValue",h[h.Unquoted=1]="Unquoted",h[h.Single=2]="Single",h[h.Double=3]="Double"})(l=t.QuoteType||(t.QuoteType={}));var d={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},f=function(){function h(p,b){var _=p.xmlMode,E=_===void 0?!1:_,w=p.decodeEntities,O=w===void 0?!0:w;this.cbs=b,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=E,this.decodeEntities=O,this.entityTrie=E?e.xmlDecodeTree:e.htmlDecodeTree}return h.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},h.prototype.write=function(p){this.offset+=this.buffer.length,this.buffer=p,this.parse()},h.prototype.end=function(){this.running&&this.finish()},h.prototype.pause=function(){this.running=!1},h.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},h.prototype.getIndex=function(){return this.index},h.prototype.getSectionStart=function(){return this.sectionStart},h.prototype.stateText=function(p){p===r.Lt||!this.decodeEntities&&this.fastForwardTo(r.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&p===r.Amp&&(this.state=n.BeforeEntity)},h.prototype.stateSpecialStartSequence=function(p){var b=this.sequenceIndex===this.currentSequence.length,_=b?s(p):(p|32)===this.currentSequence[this.sequenceIndex];if(!_)this.isSpecial=!1;else if(!b){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(p)},h.prototype.stateInSpecialTag=function(p){if(this.sequenceIndex===this.currentSequence.length){if(p===r.Gt||a(p)){var b=this.index-this.currentSequence.length;if(this.sectionStart<b){var _=this.index;this.index=b,this.cbs.ontext(this.sectionStart,b),this.index=_}this.isSpecial=!1,this.sectionStart=b+2,this.stateInClosingTagName(p);return}this.sequenceIndex=0}(p|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===d.TitleEnd?this.decodeEntities&&p===r.Amp&&(this.state=n.BeforeEntity):this.fastForwardTo(r.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(p===r.Lt)},h.prototype.stateCDATASequence=function(p){p===d.Cdata[this.sequenceIndex]?++this.sequenceIndex===d.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=d.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(p))},h.prototype.fastForwardTo=function(p){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===p)return!0;return this.index=this.buffer.length+this.offset-1,!1},h.prototype.stateInCommentLike=function(p){p===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):p!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},h.prototype.isTagStartChar=function(p){return this.xmlMode?!s(p):u(p)},h.prototype.startSpecial=function(p,b){this.isSpecial=!0,this.currentSequence=p,this.sequenceIndex=b,this.state=n.SpecialStartSequence},h.prototype.stateBeforeTagName=function(p){if(p===r.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(p===r.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(p)){var b=p|32;this.sectionStart=this.index,!this.xmlMode&&b===d.TitleEnd[2]?this.startSpecial(d.TitleEnd,3):this.state=!this.xmlMode&&b===d.ScriptEnd[2]?n.BeforeSpecialS:n.InTagName}else p===r.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(p))},h.prototype.stateInTagName=function(p){s(p)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p))},h.prototype.stateBeforeClosingTagName=function(p){a(p)||(p===r.Gt?this.state=n.Text:(this.state=this.isTagStartChar(p)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},h.prototype.stateInClosingTagName=function(p){(p===r.Gt||a(p))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(p))},h.prototype.stateAfterClosingTagName=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeAttributeName=function(p){p===r.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.baseState=this.state,this.sectionStart=this.index+1):p===r.Slash?this.state=n.InSelfClosingTag:a(p)||(this.state=n.InAttributeName,this.sectionStart=this.index)},h.prototype.stateInSelfClosingTag=function(p){p===r.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):a(p)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p))},h.prototype.stateInAttributeName=function(p){(p===r.Eq||s(p))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(p))},h.prototype.stateAfterAttributeName=function(p){p===r.Eq?this.state=n.BeforeAttributeValue:p===r.Slash||p===r.Gt?(this.cbs.onattribend(l.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p)):a(p)||(this.cbs.onattribend(l.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},h.prototype.stateBeforeAttributeValue=function(p){p===r.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):p===r.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):a(p)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(p))},h.prototype.handleInAttributeValue=function(p,b){p===b||!this.decodeEntities&&this.fastForwardTo(b)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(b===r.DoubleQuote?l.Double:l.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&p===r.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},h.prototype.stateInAttributeValueDoubleQuotes=function(p){this.handleInAttributeValue(p,r.DoubleQuote)},h.prototype.stateInAttributeValueSingleQuotes=function(p){this.handleInAttributeValue(p,r.SingleQuote)},h.prototype.stateInAttributeValueNoQuotes=function(p){a(p)||p===r.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(l.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p)):this.decodeEntities&&p===r.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},h.prototype.stateBeforeDeclaration=function(p){p===r.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=p===r.Dash?n.BeforeComment:n.InDeclaration},h.prototype.stateInDeclaration=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},h.prototype.stateInProcessingInstruction=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeComment=function(p){p===r.Dash?(this.state=n.InCommentLike,this.currentSequence=d.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},h.prototype.stateInSpecialComment=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeSpecialS=function(p){var b=p|32;b===d.ScriptEnd[3]?this.startSpecial(d.ScriptEnd,4):b===d.StyleEnd[3]?this.startSpecial(d.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(p))},h.prototype.stateBeforeEntity=function(p){this.entityExcess=1,this.entityResult=0,p===r.Number?this.state=n.BeforeNumericEntity:p===r.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=n.InNamedEntity,this.stateInNamedEntity(p))},h.prototype.stateInNamedEntity=function(p){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,p),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var b=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(b){var _=(b>>14)-1;if(!this.allowLegacyEntity()&&p!==r.Semi)this.trieIndex+=_;else{var E=this.index-this.entityExcess+1;E>this.sectionStart&&this.emitPartial(this.sectionStart,E),this.entityResult=this.trieIndex,this.trieIndex+=_,this.entityExcess=0,this.sectionStart=this.index+1,_===0&&this.emitNamedEntity()}}},h.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var p=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(p){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},h.prototype.stateBeforeNumericEntity=function(p){(p|32)===r.LowerX?(this.entityExcess++,this.state=n.InHexEntity):(this.state=n.InNumericEntity,this.stateInNumericEntity(p))},h.prototype.emitNumericEntity=function(p){var b=this.index-this.entityExcess-1,_=b+2+ +(this.state===n.InHexEntity);_!==this.index&&(b>this.sectionStart&&this.emitPartial(this.sectionStart,b),this.sectionStart=this.index+Number(p),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},h.prototype.stateInNumericEntity=function(p){p===r.Semi?this.emitNumericEntity(!0):o(p)?(this.entityResult=this.entityResult*10+(p-r.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},h.prototype.stateInHexEntity=function(p){p===r.Semi?this.emitNumericEntity(!0):o(p)?(this.entityResult=this.entityResult*16+(p-r.Zero),this.entityExcess++):c(p)?(this.entityResult=this.entityResult*16+((p|32)-r.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},h.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===n.Text||this.baseState===n.InSpecialTag)},h.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===n.InAttributeValueDq||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},h.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},h.prototype.parse=function(){for(;this.shouldContinue();){var p=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:{this.stateText(p);break}case n.SpecialStartSequence:{this.stateSpecialStartSequence(p);break}case n.InSpecialTag:{this.stateInSpecialTag(p);break}case n.CDATASequence:{this.stateCDATASequence(p);break}case n.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(p);break}case n.InAttributeName:{this.stateInAttributeName(p);break}case n.InCommentLike:{this.stateInCommentLike(p);break}case n.InSpecialComment:{this.stateInSpecialComment(p);break}case n.BeforeAttributeName:{this.stateBeforeAttributeName(p);break}case n.InTagName:{this.stateInTagName(p);break}case n.InClosingTagName:{this.stateInClosingTagName(p);break}case n.BeforeTagName:{this.stateBeforeTagName(p);break}case n.AfterAttributeName:{this.stateAfterAttributeName(p);break}case n.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(p);break}case n.BeforeAttributeValue:{this.stateBeforeAttributeValue(p);break}case n.BeforeClosingTagName:{this.stateBeforeClosingTagName(p);break}case n.AfterClosingTagName:{this.stateAfterClosingTagName(p);break}case n.BeforeSpecialS:{this.stateBeforeSpecialS(p);break}case n.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(p);break}case n.InSelfClosingTag:{this.stateInSelfClosingTag(p);break}case n.InDeclaration:{this.stateInDeclaration(p);break}case n.BeforeDeclaration:{this.stateBeforeDeclaration(p);break}case n.BeforeComment:{this.stateBeforeComment(p);break}case n.InProcessingInstruction:{this.stateInProcessingInstruction(p);break}case n.InNamedEntity:{this.stateInNamedEntity(p);break}case n.BeforeEntity:{this.stateBeforeEntity(p);break}case n.InHexEntity:{this.stateInHexEntity(p);break}case n.InNumericEntity:{this.stateInNumericEntity(p);break}default:this.stateBeforeNumericEntity(p)}this.index++}this.cleanup()},h.prototype.finish=function(){this.state===n.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},h.prototype.handleTrailingData=function(){var p=this.buffer.length+this.offset;this.state===n.InCommentLike?this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,p,0):this.cbs.oncomment(this.sectionStart,p,0):this.state===n.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,p)},h.prototype.emitPartial=function(p,b){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribdata(p,b):this.cbs.ontext(p,b)},h.prototype.emitCodePoint=function(p){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribentity(p):this.cbs.ontextentity(p)},h}();t.default=f})(Yx);var pse=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yse=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bse=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pse(e,t,r);return yse(e,t),e};Object.defineProperty(Np,"__esModule",{value:!0});Np.Parser=void 0;var l1=bse(Yx),zN=Wo,Kl=new Set(["input","option","optgroup","select","button","datalist","textarea"]),ar=new Set(["p"]),WN=new Set(["thead","tbody"]),XN=new Set(["dd","dt"]),KN=new Set(["rt","rp"]),_se=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",ar],["h1",ar],["h2",ar],["h3",ar],["h4",ar],["h5",ar],["h6",ar],["select",Kl],["input",Kl],["output",Kl],["button",Kl],["datalist",Kl],["textarea",Kl],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",XN],["dt",XN],["address",ar],["article",ar],["aside",ar],["blockquote",ar],["details",ar],["div",ar],["dl",ar],["fieldset",ar],["figcaption",ar],["figure",ar],["footer",ar],["form",ar],["header",ar],["hr",ar],["main",ar],["nav",ar],["ol",ar],["pre",ar],["section",ar],["table",ar],["ul",ar],["rt",KN],["rp",KN],["tbody",WN],["tfoot",WN]]),gse=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),JN=new Set(["math","svg"]),YN=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),mse=/\s|\//,vse=function(){function t(e,r){r===void 0&&(r={});var n,a,s,o,u;this.options=r,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=(n=r.lowerCaseTags)!==null&&n!==void 0?n:!r.xmlMode,this.lowerCaseAttributeNames=(a=r.lowerCaseAttributeNames)!==null&&a!==void 0?a:!r.xmlMode,this.tokenizer=new((s=r.Tokenizer)!==null&&s!==void 0?s:l1.default)(this.options,this),(u=(o=this.cbs).onparserinit)===null||u===void 0||u.call(o,this)}return t.prototype.ontext=function(e,r){var n,a,s=this.getSlice(e,r);this.endIndex=r-1,(a=(n=this.cbs).ontext)===null||a===void 0||a.call(n,s),this.startIndex=r},t.prototype.ontextentity=function(e){var r,n,a=this.tokenizer.getSectionStart();this.endIndex=a-1,(n=(r=this.cbs).ontext)===null||n===void 0||n.call(r,(0,zN.fromCodePoint)(e)),this.startIndex=a},t.prototype.isVoidElement=function(e){return!this.options.xmlMode&&gse.has(e)},t.prototype.onopentagname=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)},t.prototype.emitOpenTag=function(e){var r,n,a,s;this.openTagStart=this.startIndex,this.tagname=e;var o=!this.options.xmlMode&&_se.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[this.stack.length-1]);){var u=this.stack.pop();(n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,u,!0)}this.isVoidElement(e)||(this.stack.push(e),JN.has(e)?this.foreignContext.push(!0):YN.has(e)&&this.foreignContext.push(!1)),(s=(a=this.cbs).onopentagname)===null||s===void 0||s.call(a,e),this.cbs.onopentag&&(this.attribs={})},t.prototype.endOpenTag=function(e){var r,n;this.startIndex=this.openTagStart,this.attribs&&((n=(r=this.cbs).onopentag)===null||n===void 0||n.call(r,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},t.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},t.prototype.onclosetag=function(e,r){var n,a,s,o,u,c;this.endIndex=r;var l=this.getSlice(e,r);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(JN.has(l)||YN.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))!this.options.xmlMode&&l==="br"&&((a=(n=this.cbs).onopentagname)===null||a===void 0||a.call(n,"br"),(o=(s=this.cbs).onopentag)===null||o===void 0||o.call(s,"br",{},!0),(c=(u=this.cbs).onclosetag)===null||c===void 0||c.call(u,"br",!1));else{var d=this.stack.lastIndexOf(l);if(d!==-1)if(this.cbs.onclosetag)for(var f=this.stack.length-d;f--;)this.cbs.onclosetag(this.stack.pop(),f!==0);else this.stack.length=d;else!this.options.xmlMode&&l==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=r+1},t.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},t.prototype.closeCurrentTag=function(e){var r,n,a=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===a&&((n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,a,!e),this.stack.pop())},t.prototype.onattribname=function(e,r){this.startIndex=e;var n=this.getSlice(e,r);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n},t.prototype.onattribdata=function(e,r){this.attribvalue+=this.getSlice(e,r)},t.prototype.onattribentity=function(e){this.attribvalue+=(0,zN.fromCodePoint)(e)},t.prototype.onattribend=function(e,r){var n,a;this.endIndex=r,(a=(n=this.cbs).onattribute)===null||a===void 0||a.call(n,this.attribname,this.attribvalue,e===l1.QuoteType.Double?'"':e===l1.QuoteType.Single?"'":e===l1.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},t.prototype.getInstructionName=function(e){var r=e.search(mse),n=r<0?e:e.substr(0,r);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},t.prototype.ondeclaration=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var a=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(a),"!".concat(n))}this.startIndex=r+1},t.prototype.onprocessinginstruction=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var a=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(a),"?".concat(n))}this.startIndex=r+1},t.prototype.oncomment=function(e,r,n){var a,s,o,u;this.endIndex=r,(s=(a=this.cbs).oncomment)===null||s===void 0||s.call(a,this.getSlice(e,r-n)),(u=(o=this.cbs).oncommentend)===null||u===void 0||u.call(o),this.startIndex=r+1},t.prototype.oncdata=function(e,r,n){var a,s,o,u,c,l,d,f,h,p;this.endIndex=r;var b=this.getSlice(e,r-n);this.options.xmlMode||this.options.recognizeCDATA?((s=(a=this.cbs).oncdatastart)===null||s===void 0||s.call(a),(u=(o=this.cbs).ontext)===null||u===void 0||u.call(o,b),(l=(c=this.cbs).oncdataend)===null||l===void 0||l.call(c)):((f=(d=this.cbs).oncomment)===null||f===void 0||f.call(d,"[CDATA[".concat(b,"]]")),(p=(h=this.cbs).oncommentend)===null||p===void 0||p.call(h)),this.startIndex=r+1},t.prototype.onend=function(){var e,r;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n],!0));}(r=(e=this.cbs).onend)===null||r===void 0||r.call(e)},t.prototype.reset=function(){var e,r,n,a;(r=(e=this.cbs).onreset)===null||r===void 0||r.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(a=(n=this.cbs).onparserinit)===null||a===void 0||a.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},t.prototype.parseComplete=function(e){this.reset(),this.end(e)},t.prototype.getSlice=function(e,r){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(e-this.bufferOffset,r-this.bufferOffset);r-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,r-this.bufferOffset);return n},t.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},t.prototype.write=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)},t.prototype.end=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()},t.prototype.pause=function(){this.tokenizer.pause()},t.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},t.prototype.parseChunk=function(e){this.write(e)},t.prototype.done=function(e){this.end(e)},t}();Np.Parser=vse;var na={},oc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0;var e;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(e=t.ElementType||(t.ElementType={}));function r(n){return n.type===e.Tag||n.type===e.Script||n.type===e.Style}t.isTag=r,t.Root=e.Root,t.Text=e.Text,t.Directive=e.Directive,t.Comment=e.Comment,t.Script=e.Script,t.Style=e.Style,t.Tag=e.Tag,t.CDATA=e.CDATA,t.Doctype=e.Doctype})(oc);var jt={},uc=g&&g.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),up=g&&g.__assign||function(){return up=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},up.apply(this,arguments)};Object.defineProperty(jt,"__esModule",{value:!0});jt.cloneNode=jt.hasChildren=jt.isDocument=jt.isDirective=jt.isComment=jt.isText=jt.isCDATA=jt.isTag=jt.Element=jt.Document=jt.CDATA=jt.NodeWithChildren=jt.ProcessingInstruction=jt.Comment=jt.Text=jt.DataNode=jt.Node=void 0;var $i=oc,tR=function(){function t(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(e){return e===void 0&&(e=!1),rR(this,e)},t}();jt.Node=tR;var iv=function(t){uc(e,t);function e(r){var n=t.call(this)||this;return n.data=r,n}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(r){this.data=r},enumerable:!1,configurable:!0}),e}(tR);jt.DataNode=iv;var zF=function(t){uc(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=$i.ElementType.Text,r}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),e}(iv);jt.Text=zF;var WF=function(t){uc(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=$i.ElementType.Comment,r}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),e}(iv);jt.Comment=WF;var XF=function(t){uc(e,t);function e(r,n){var a=t.call(this,n)||this;return a.name=r,a.type=$i.ElementType.Directive,a}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(iv);jt.ProcessingInstruction=XF;var av=function(t){uc(e,t);function e(r){var n=t.call(this)||this;return n.children=r,n}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var r;return(r=this.children[0])!==null&&r!==void 0?r:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(r){this.children=r},enumerable:!1,configurable:!0}),e}(tR);jt.NodeWithChildren=av;var KF=function(t){uc(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=$i.ElementType.CDATA,r}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),e}(av);jt.CDATA=KF;var JF=function(t){uc(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=$i.ElementType.Root,r}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),e}(av);jt.Document=JF;var YF=function(t){uc(e,t);function e(r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=r==="script"?$i.ElementType.Script:r==="style"?$i.ElementType.Style:$i.ElementType.Tag);var o=t.call(this,a)||this;return o.name=r,o.attribs=n,o.type=s,o}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(r){this.name=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var r=this;return Object.keys(this.attribs).map(function(n){var a,s;return{name:n,value:r.attribs[n],namespace:(a=r["x-attribsNamespace"])===null||a===void 0?void 0:a[n],prefix:(s=r["x-attribsPrefix"])===null||s===void 0?void 0:s[n]}})},enumerable:!1,configurable:!0}),e}(av);jt.Element=YF;function ZF(t){return(0,$i.isTag)(t)}jt.isTag=ZF;function eL(t){return t.type===$i.ElementType.CDATA}jt.isCDATA=eL;function tL(t){return t.type===$i.ElementType.Text}jt.isText=tL;function rL(t){return t.type===$i.ElementType.Comment}jt.isComment=rL;function nL(t){return t.type===$i.ElementType.Directive}jt.isDirective=nL;function iL(t){return t.type===$i.ElementType.Root}jt.isDocument=iL;function wse(t){return Object.prototype.hasOwnProperty.call(t,"children")}jt.hasChildren=wse;function rR(t,e){e===void 0&&(e=!1);var r;if(tL(t))r=new zF(t.data);else if(rL(t))r=new WF(t.data);else if(ZF(t)){var n=e?MT(t.children):[],a=new YF(t.name,up({},t.attribs),n);n.forEach(function(c){return c.parent=a}),t.namespace!=null&&(a.namespace=t.namespace),t["x-attribsNamespace"]&&(a["x-attribsNamespace"]=up({},t["x-attribsNamespace"])),t["x-attribsPrefix"]&&(a["x-attribsPrefix"]=up({},t["x-attribsPrefix"])),r=a}else if(eL(t)){var n=e?MT(t.children):[],s=new KF(n);n.forEach(function(l){return l.parent=s}),r=s}else if(iL(t)){var n=e?MT(t.children):[],o=new JF(n);n.forEach(function(l){return l.parent=o}),t["x-mode"]&&(o["x-mode"]=t["x-mode"]),r=o}else if(nL(t)){var u=new XF(t.name,t.data);t["x-name"]!=null&&(u["x-name"]=t["x-name"],u["x-publicId"]=t["x-publicId"],u["x-systemId"]=t["x-systemId"]),r=u}else throw new Error("Not implemented yet: ".concat(t.type));return r.startIndex=t.startIndex,r.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(r.sourceCodeLocation=t.sourceCodeLocation),r}jt.cloneNode=rR;function MT(t){for(var e=t.map(function(n){return rR(n,!0)}),r=1;r<e.length;r++)e[r].prev=e[r-1],e[r-1].next=e[r];return e}(function(t){var e=g&&g.__createBinding||(Object.create?function(u,c,l,d){d===void 0&&(d=l);var f=Object.getOwnPropertyDescriptor(c,l);(!f||("get"in f?!c.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return c[l]}}),Object.defineProperty(u,d,f)}:function(u,c,l,d){d===void 0&&(d=l),u[d]=c[l]}),r=g&&g.__exportStar||function(u,c){for(var l in u)l!=="default"&&!Object.prototype.hasOwnProperty.call(c,l)&&e(c,u,l)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var n=oc,a=jt;r(jt,t);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=function(){function u(c,l,d){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof l=="function"&&(d=l,l=s),typeof c=="object"&&(l=c,c=void 0),this.callback=c??null,this.options=l??s,this.elementCB=d??null}return u.prototype.onparserinit=function(c){this.parser=c},u.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},u.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},u.prototype.onerror=function(c){this.handleCallback(c)},u.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},u.prototype.onopentag=function(c,l){var d=this.options.xmlMode?n.ElementType.Tag:void 0,f=new a.Element(c,l,void 0,d);this.addNode(f),this.tagStack.push(f)},u.prototype.ontext=function(c){var l=this.lastNode;if(l&&l.type===n.ElementType.Text)l.data+=c,this.options.withEndIndices&&(l.endIndex=this.parser.endIndex);else{var d=new a.Text(c);this.addNode(d),this.lastNode=d}},u.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=c;return}var l=new a.Comment(c);this.addNode(l),this.lastNode=l},u.prototype.oncommentend=function(){this.lastNode=null},u.prototype.oncdatastart=function(){var c=new a.Text(""),l=new a.CDATA([c]);this.addNode(l),c.parent=l,this.lastNode=c},u.prototype.oncdataend=function(){this.lastNode=null},u.prototype.onprocessinginstruction=function(c,l){var d=new a.ProcessingInstruction(c,l);this.addNode(d)},u.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},u.prototype.addNode=function(c){var l=this.tagStack[this.tagStack.length-1],d=l.children[l.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),l.children.push(c),d&&(c.prev=d,d.next=c),c.parent=l,this.lastNode=null},u}();t.DomHandler=o,t.default=o})(na);var Vs={},Yi={},j0={},aL={},ll={},nR={};Object.defineProperty(nR,"__esModule",{value:!0});function d1(t){for(var e=1;e<t.length;e++)t[e][0]+=t[e-1][0]+1;return t}nR.default=new Map(d1([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(d1([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(d1([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(d1([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var Hb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.getCodePoint=t.xmlReplacer=void 0,t.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var e=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);t.getCodePoint=String.prototype.codePointAt!=null?function(a,s){return a.codePointAt(s)}:function(a,s){return(a.charCodeAt(s)&64512)===55296?(a.charCodeAt(s)-55296)*1024+a.charCodeAt(s+1)-56320+65536:a.charCodeAt(s)};function r(a){for(var s="",o=0,u;(u=t.xmlReplacer.exec(a))!==null;){var c=u.index,l=a.charCodeAt(c),d=e.get(l);d!==void 0?(s+=a.substring(o,c)+d,o=c+1):(s+="".concat(a.substring(o,c),"&#x").concat((0,t.getCodePoint)(a,c).toString(16),";"),o=t.xmlReplacer.lastIndex+=+((l&64512)===55296))}return s+a.substr(o)}t.encodeXML=r,t.escape=r;function n(a,s){return function(u){for(var c,l=0,d="";c=a.exec(u);)l!==c.index&&(d+=u.substring(l,c.index)),d+=s.get(c[0].charCodeAt(0)),l=c.index+1;return d+u.substring(l)}}t.escapeUTF8=n(/[&<>'"]/g,e),t.escapeAttribute=n(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),t.escapeText=n(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(Hb);var Sse=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ll,"__esModule",{value:!0});ll.encodeNonAsciiHTML=ll.encodeHTML=void 0;var Tse=Sse(nR),sL=Hb,Ese=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function Ose(t){return oL(Ese,t)}ll.encodeHTML=Ose;function Ase(t){return oL(sL.xmlReplacer,t)}ll.encodeNonAsciiHTML=Ase;function oL(t,e){for(var r="",n=0,a;(a=t.exec(e))!==null;){var s=a.index;r+=e.substring(n,s);var o=e.charCodeAt(s),u=Tse.default.get(o);if(typeof u=="object"){if(s+1<e.length){var c=e.charCodeAt(s+1),l=typeof u.n=="number"?u.n===c?u.o:void 0:u.n.get(c);if(l!==void 0){r+=l,n=t.lastIndex+=1;continue}}u=u.v}if(u!==void 0)r+=u,n=s+1;else{var d=(0,sL.getCodePoint)(e,s);r+="&#x".concat(d.toString(16),";"),n=t.lastIndex+=+(d!==o)}}return r+e.substr(n)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLAttribute=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.DecodingMode=t.EntityDecoder=t.encodeHTML5=t.encodeHTML4=t.encodeNonAsciiHTML=t.encodeHTML=t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.encode=t.decodeStrict=t.decode=t.EncodingMode=t.EntityLevel=void 0;var e=Wo,r=ll,n=Hb,a;(function(h){h[h.XML=0]="XML",h[h.HTML=1]="HTML"})(a=t.EntityLevel||(t.EntityLevel={}));var s;(function(h){h[h.UTF8=0]="UTF8",h[h.ASCII=1]="ASCII",h[h.Extensive=2]="Extensive",h[h.Attribute=3]="Attribute",h[h.Text=4]="Text"})(s=t.EncodingMode||(t.EncodingMode={}));function o(h,p){p===void 0&&(p=a.XML);var b=typeof p=="number"?p:p.level;if(b===a.HTML){var _=typeof p=="object"?p.mode:void 0;return(0,e.decodeHTML)(h,_)}return(0,e.decodeXML)(h)}t.decode=o;function u(h,p){var b;p===void 0&&(p=a.XML);var _=typeof p=="number"?{level:p}:p;return(b=_.mode)!==null&&b!==void 0||(_.mode=e.DecodingMode.Strict),o(h,_)}t.decodeStrict=u;function c(h,p){p===void 0&&(p=a.XML);var b=typeof p=="number"?{level:p}:p;return b.mode===s.UTF8?(0,n.escapeUTF8)(h):b.mode===s.Attribute?(0,n.escapeAttribute)(h):b.mode===s.Text?(0,n.escapeText)(h):b.level===a.HTML?b.mode===s.ASCII?(0,r.encodeNonAsciiHTML)(h):(0,r.encodeHTML)(h):(0,n.encodeXML)(h)}t.encode=c;var l=Hb;Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return l.encodeXML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return l.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return l.escapeUTF8}}),Object.defineProperty(t,"escapeAttribute",{enumerable:!0,get:function(){return l.escapeAttribute}}),Object.defineProperty(t,"escapeText",{enumerable:!0,get:function(){return l.escapeText}});var d=ll;Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return d.encodeNonAsciiHTML}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return d.encodeHTML}});var f=Wo;Object.defineProperty(t,"EntityDecoder",{enumerable:!0,get:function(){return f.EntityDecoder}}),Object.defineProperty(t,"DecodingMode",{enumerable:!0,get:function(){return f.DecodingMode}}),Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return f.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return f.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return f.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTMLAttribute",{enumerable:!0,get:function(){return f.decodeHTMLAttribute}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return f.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return f.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return f.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return f.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return f.decodeXML}})})(aL);var af={};Object.defineProperty(af,"__esModule",{value:!0});af.attributeNames=af.elementNames=void 0;af.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(t){return[t.toLowerCase(),t]}));af.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(t){return[t.toLowerCase(),t]}));var md=g&&g.__assign||function(){return md=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},md.apply(this,arguments)},xse=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Rse=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ise=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xse(e,t,r);return Rse(e,t),e};Object.defineProperty(j0,"__esModule",{value:!0});j0.render=void 0;var bo=Ise(oc),kb=aL,uL=af,Pse=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function Dse(t){return t.replace(/"/g,"&quot;")}function Nse(t,e){var r;if(t){var n=((r=e.encodeEntities)!==null&&r!==void 0?r:e.decodeEntities)===!1?Dse:e.xmlMode||e.encodeEntities!=="utf8"?kb.encodeXML:kb.escapeAttribute;return Object.keys(t).map(function(a){var s,o,u=(s=t[a])!==null&&s!==void 0?s:"";return e.xmlMode==="foreign"&&(a=(o=uL.attributeNames.get(a))!==null&&o!==void 0?o:a),!e.emptyAttrs&&!e.xmlMode&&u===""?a:"".concat(a,'="').concat(n(u),'"')}).join(" ")}}var ZN=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function sv(t,e){e===void 0&&(e={});for(var r=("length"in t)?t:[t],n="",a=0;a<r.length;a++)n+=jse(r[a],e);return n}j0.render=sv;j0.default=sv;function jse(t,e){switch(t.type){case bo.Root:return sv(t.children,e);case bo.Doctype:case bo.Directive:return Lse(t);case bo.Comment:return Use(t);case bo.CDATA:return $se(t);case bo.Script:case bo.Style:case bo.Tag:return Fse(t,e);case bo.Text:return Bse(t,e)}}var Cse=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),Mse=new Set(["svg","math"]);function Fse(t,e){var r;e.xmlMode==="foreign"&&(t.name=(r=uL.elementNames.get(t.name))!==null&&r!==void 0?r:t.name,t.parent&&Cse.has(t.parent.name)&&(e=md(md({},e),{xmlMode:!1}))),!e.xmlMode&&Mse.has(t.name)&&(e=md(md({},e),{xmlMode:"foreign"}));var n="<".concat(t.name),a=Nse(t.attribs,e);return a&&(n+=" ".concat(a)),t.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&ZN.has(t.name))?(e.xmlMode||(n+=" "),n+="/>"):(n+=">",t.children.length>0&&(n+=sv(t.children,e)),(e.xmlMode||!ZN.has(t.name))&&(n+="</".concat(t.name,">"))),n}function Lse(t){return"<".concat(t.data,">")}function Bse(t,e){var r,n=t.data||"";return((r=e.encodeEntities)!==null&&r!==void 0?r:e.decodeEntities)!==!1&&!(!e.xmlMode&&t.parent&&Pse.has(t.parent.name))&&(n=e.xmlMode||e.encodeEntities!=="utf8"?(0,kb.encodeXML)(n):(0,kb.escapeText)(n)),n}function $se(t){return"<![CDATA[".concat(t.children[0].data,"]]>")}function Use(t){return"<!--".concat(t.data,"-->")}var qse=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.innerText=Yi.textContent=Yi.getText=Yi.getInnerHTML=Yi.getOuterHTML=void 0;var Hs=na,Vse=qse(j0),Hse=oc;function cL(t,e){return(0,Vse.default)(t,e)}Yi.getOuterHTML=cL;function kse(t,e){return(0,Hs.hasChildren)(t)?t.children.map(function(r){return cL(r,e)}).join(""):""}Yi.getInnerHTML=kse;function db(t){return Array.isArray(t)?t.map(db).join(""):(0,Hs.isTag)(t)?t.name==="br"?`
`:db(t.children):(0,Hs.isCDATA)(t)?db(t.children):(0,Hs.isText)(t)?t.data:""}Yi.getText=db;function RO(t){return Array.isArray(t)?t.map(RO).join(""):(0,Hs.hasChildren)(t)&&!(0,Hs.isComment)(t)?RO(t.children):(0,Hs.isText)(t)?t.data:""}Yi.textContent=RO;function IO(t){return Array.isArray(t)?t.map(IO).join(""):(0,Hs.hasChildren)(t)&&(t.type===Hse.ElementType.Tag||(0,Hs.isCDATA)(t))?IO(t.children):(0,Hs.isText)(t)?t.data:""}Yi.innerText=IO;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.prevElementSibling=Tn.nextElementSibling=Tn.getName=Tn.hasAttrib=Tn.getAttributeValue=Tn.getSiblings=Tn.getParent=Tn.getChildren=void 0;var iR=na;function lL(t){return(0,iR.hasChildren)(t)?t.children:[]}Tn.getChildren=lL;function dL(t){return t.parent||null}Tn.getParent=dL;function Qse(t){var e,r,n=dL(t);if(n!=null)return lL(n);for(var a=[t],s=t.prev,o=t.next;s!=null;)a.unshift(s),e=s,s=e.prev;for(;o!=null;)a.push(o),r=o,o=r.next;return a}Tn.getSiblings=Qse;function Gse(t,e){var r;return(r=t.attribs)===null||r===void 0?void 0:r[e]}Tn.getAttributeValue=Gse;function zse(t,e){return t.attribs!=null&&Object.prototype.hasOwnProperty.call(t.attribs,e)&&t.attribs[e]!=null}Tn.hasAttrib=zse;function Wse(t){return t.name}Tn.getName=Wse;function Xse(t){for(var e,r=t.next;r!==null&&!(0,iR.isTag)(r);)e=r,r=e.next;return r}Tn.nextElementSibling=Xse;function Kse(t){for(var e,r=t.prev;r!==null&&!(0,iR.isTag)(r);)e=r,r=e.prev;return r}Tn.prevElementSibling=Kse;var Li={};Object.defineProperty(Li,"__esModule",{value:!0});Li.prepend=Li.prependChild=Li.append=Li.appendChild=Li.replaceElement=Li.removeElement=void 0;function C0(t){if(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent){var e=t.parent.children,r=e.lastIndexOf(t);r>=0&&e.splice(r,1)}t.next=null,t.prev=null,t.parent=null}Li.removeElement=C0;function Jse(t,e){var r=e.prev=t.prev;r&&(r.next=e);var n=e.next=t.next;n&&(n.prev=e);var a=e.parent=t.parent;if(a){var s=a.children;s[s.lastIndexOf(t)]=e,t.parent=null}}Li.replaceElement=Jse;function Yse(t,e){if(C0(e),e.next=null,e.parent=t,t.children.push(e)>1){var r=t.children[t.children.length-2];r.next=e,e.prev=r}else e.prev=null}Li.appendChild=Yse;function Zse(t,e){C0(e);var r=t.parent,n=t.next;if(e.next=n,e.prev=t,t.next=e,e.parent=r,n){if(n.prev=e,r){var a=r.children;a.splice(a.lastIndexOf(n),0,e)}}else r&&r.children.push(e)}Li.append=Zse;function eoe(t,e){if(C0(e),e.parent=t,e.prev=null,t.children.unshift(e)!==1){var r=t.children[1];r.prev=e,e.next=r}else e.next=null}Li.prependChild=eoe;function toe(t,e){C0(e);var r=t.parent;if(r){var n=r.children;n.splice(n.indexOf(t),0,e)}t.prev&&(t.prev.next=e),e.parent=r,e.prev=t.prev,e.next=t,t.prev=e}Li.prepend=toe;var mi={};Object.defineProperty(mi,"__esModule",{value:!0});mi.findAll=mi.existsOne=mi.findOne=mi.findOneChild=mi.find=mi.filter=void 0;var ov=na;function roe(t,e,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),fL(t,Array.isArray(e)?e:[e],r,n)}mi.filter=roe;function fL(t,e,r,n){for(var a=[],s=[e],o=[0];;){if(o[0]>=s[0].length){if(o.length===1)return a;s.shift(),o.shift();continue}var u=s[0][o[0]++];if(t(u)&&(a.push(u),--n<=0))return a;r&&(0,ov.hasChildren)(u)&&u.children.length>0&&(o.unshift(0),s.unshift(u.children))}}mi.find=fL;function noe(t,e){return e.find(t)}mi.findOneChild=noe;function hL(t,e,r){r===void 0&&(r=!0);for(var n=null,a=0;a<e.length&&!n;a++){var s=e[a];if((0,ov.isTag)(s))t(s)?n=s:r&&s.children.length>0&&(n=hL(t,s.children,!0));else continue}return n}mi.findOne=hL;function pL(t,e){return e.some(function(r){return(0,ov.isTag)(r)&&(t(r)||pL(t,r.children))})}mi.existsOne=pL;function ioe(t,e){for(var r=[],n=[e],a=[0];;){if(a[0]>=n[0].length){if(n.length===1)return r;n.shift(),a.shift();continue}var s=n[0][a[0]++];(0,ov.isTag)(s)&&(t(s)&&r.push(s),s.children.length>0&&(a.unshift(0),n.unshift(s.children)))}}mi.findAll=ioe;var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.getElementsByTagType=Zi.getElementsByTagName=Zi.getElementById=Zi.getElements=Zi.testElement=void 0;var Hc=na,uv=mi,Qb={tag_name:function(t){return typeof t=="function"?function(e){return(0,Hc.isTag)(e)&&t(e.name)}:t==="*"?Hc.isTag:function(e){return(0,Hc.isTag)(e)&&e.name===t}},tag_type:function(t){return typeof t=="function"?function(e){return t(e.type)}:function(e){return e.type===t}},tag_contains:function(t){return typeof t=="function"?function(e){return(0,Hc.isText)(e)&&t(e.data)}:function(e){return(0,Hc.isText)(e)&&e.data===t}}};function yL(t,e){return typeof e=="function"?function(r){return(0,Hc.isTag)(r)&&e(r.attribs[t])}:function(r){return(0,Hc.isTag)(r)&&r.attribs[t]===e}}function aoe(t,e){return function(r){return t(r)||e(r)}}function bL(t){var e=Object.keys(t).map(function(r){var n=t[r];return Object.prototype.hasOwnProperty.call(Qb,r)?Qb[r](n):yL(r,n)});return e.length===0?null:e.reduce(aoe)}function soe(t,e){var r=bL(t);return r?r(e):!0}Zi.testElement=soe;function ooe(t,e,r,n){n===void 0&&(n=1/0);var a=bL(t);return a?(0,uv.filter)(a,e,r,n):[]}Zi.getElements=ooe;function uoe(t,e,r){return r===void 0&&(r=!0),Array.isArray(e)||(e=[e]),(0,uv.findOne)(yL("id",t),e,r)}Zi.getElementById=uoe;function coe(t,e,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),(0,uv.filter)(Qb.tag_name(t),e,r,n)}Zi.getElementsByTagName=coe;function loe(t,e,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),(0,uv.filter)(Qb.tag_type(t),e,r,n)}Zi.getElementsByTagType=loe;var _L={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.DocumentPosition=t.removeSubsets=void 0;var e=na;function r(o){for(var u=o.length;--u>=0;){var c=o[u];if(u>0&&o.lastIndexOf(c,u-1)>=0){o.splice(u,1);continue}for(var l=c.parent;l;l=l.parent)if(o.includes(l)){o.splice(u,1);break}}return o}t.removeSubsets=r;var n;(function(o){o[o.DISCONNECTED=1]="DISCONNECTED",o[o.PRECEDING=2]="PRECEDING",o[o.FOLLOWING=4]="FOLLOWING",o[o.CONTAINS=8]="CONTAINS",o[o.CONTAINED_BY=16]="CONTAINED_BY"})(n=t.DocumentPosition||(t.DocumentPosition={}));function a(o,u){var c=[],l=[];if(o===u)return 0;for(var d=(0,e.hasChildren)(o)?o:o.parent;d;)c.unshift(d),d=d.parent;for(d=(0,e.hasChildren)(u)?u:u.parent;d;)l.unshift(d),d=d.parent;for(var f=Math.min(c.length,l.length),h=0;h<f&&c[h]===l[h];)h++;if(h===0)return n.DISCONNECTED;var p=c[h-1],b=p.children,_=c[h],E=l[h];return b.indexOf(_)>b.indexOf(E)?p===u?n.FOLLOWING|n.CONTAINED_BY:n.FOLLOWING:p===o?n.PRECEDING|n.CONTAINS:n.PRECEDING}t.compareDocumentPosition=a;function s(o){return o=o.filter(function(u,c,l){return!l.includes(u,c+1)}),o.sort(function(u,c){var l=a(u,c);return l&n.PRECEDING?-1:l&n.FOLLOWING?1:0}),o}t.uniqueSort=s})(_L);var cv={};Object.defineProperty(cv,"__esModule",{value:!0});cv.getFeed=void 0;var doe=Yi,M0=Zi;function foe(t){var e=Gb(_oe,t);return e?e.name==="feed"?hoe(e):poe(e):null}cv.getFeed=foe;function hoe(t){var e,r=t.children,n={type:"atom",items:(0,M0.getElementsByTagName)("entry",r).map(function(o){var u,c=o.children,l={media:gL(c)};Mi(l,"id","id",c),Mi(l,"title","title",c);var d=(u=Gb("link",c))===null||u===void 0?void 0:u.attribs.href;d&&(l.link=d);var f=Mu("summary",c)||Mu("content",c);f&&(l.description=f);var h=Mu("updated",c);return h&&(l.pubDate=new Date(h)),l})};Mi(n,"id","id",r),Mi(n,"title","title",r);var a=(e=Gb("link",r))===null||e===void 0?void 0:e.attribs.href;a&&(n.link=a),Mi(n,"description","subtitle",r);var s=Mu("updated",r);return s&&(n.updated=new Date(s)),Mi(n,"author","email",r,!0),n}function poe(t){var e,r,n=(r=(e=Gb("channel",t.children))===null||e===void 0?void 0:e.children)!==null&&r!==void 0?r:[],a={type:t.name.substr(0,3),id:"",items:(0,M0.getElementsByTagName)("item",t.children).map(function(o){var u=o.children,c={media:gL(u)};Mi(c,"id","guid",u),Mi(c,"title","title",u),Mi(c,"link","link",u),Mi(c,"description","description",u);var l=Mu("pubDate",u)||Mu("dc:date",u);return l&&(c.pubDate=new Date(l)),c})};Mi(a,"title","title",n),Mi(a,"link","link",n),Mi(a,"description","description",n);var s=Mu("lastBuildDate",n);return s&&(a.updated=new Date(s)),Mi(a,"author","managingEditor",n,!0),a}var yoe=["url","type","lang"],boe=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function gL(t){return(0,M0.getElementsByTagName)("media:content",t).map(function(e){for(var r=e.attribs,n={medium:r.medium,isDefault:!!r.isDefault},a=0,s=yoe;a<s.length;a++){var o=s[a];r[o]&&(n[o]=r[o])}for(var u=0,c=boe;u<c.length;u++){var o=c[u];r[o]&&(n[o]=parseInt(r[o],10))}return r.expression&&(n.expression=r.expression),n})}function Gb(t,e){return(0,M0.getElementsByTagName)(t,e,!0,1)[0]}function Mu(t,e,r){return r===void 0&&(r=!1),(0,doe.textContent)((0,M0.getElementsByTagName)(t,e,r,1)).trim()}function Mi(t,e,r,n,a){a===void 0&&(a=!1);var s=Mu(r,n,a);s&&(t[e]=s)}function _oe(t){return t==="rss"||t==="feed"||t==="rdf:RDF"}(function(t){var e=g&&g.__createBinding||(Object.create?function(a,s,o,u){u===void 0&&(u=o);var c=Object.getOwnPropertyDescriptor(s,o);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(a,u,c)}:function(a,s,o,u){u===void 0&&(u=o),a[u]=s[o]}),r=g&&g.__exportStar||function(a,s){for(var o in a)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,a,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,r(Yi,t),r(Tn,t),r(Li,t),r(mi,t),r(Zi,t),r(_L,t),r(cv,t);var n=na;Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})})(Vs);(function(t){var e=g&&g.__createBinding||(Object.create?function(w,O,A,T){T===void 0&&(T=A);var I=Object.getOwnPropertyDescriptor(O,A);(!I||("get"in I?!O.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return O[A]}}),Object.defineProperty(w,T,I)}:function(w,O,A,T){T===void 0&&(T=A),w[T]=O[A]}),r=g&&g.__setModuleDefault||(Object.create?function(w,O){Object.defineProperty(w,"default",{enumerable:!0,value:O})}:function(w,O){w.default=O}),n=g&&g.__importStar||function(w){if(w&&w.__esModule)return w;var O={};if(w!=null)for(var A in w)A!=="default"&&Object.prototype.hasOwnProperty.call(w,A)&&e(O,w,A);return r(O,w),O},a=g&&g.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var s=Np,o=Np;Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return o.Parser}});var u=na,c=na;Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function l(w,O){var A=new u.DomHandler(void 0,O);return new s.Parser(A,O).end(w),A.root}t.parseDocument=l;function d(w,O){return l(w,O).children}t.parseDOM=d;function f(w,O,A){var T=new u.DomHandler(w,O,A);return new s.Parser(T,O)}t.createDomStream=f;var h=Yx;Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return a(h).default}}),t.ElementType=n(oc);var p=Vs,b=Vs;Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return b.getFeed}});var _={xmlMode:!0};function E(w,O){return O===void 0&&(O=_),(0,p.getFeed)(d(w,O))}t.parseFeed=E,t.DomUtils=n(Vs)})(GF);const goe={"@context":{alternate:"http://www.w3.org/1999/xhtml/vocab#alternate",appendix:"http://www.w3.org/1999/xhtml/vocab#appendix",cite:"http://www.w3.org/1999/xhtml/vocab#cite",bookmark:"http://www.w3.org/1999/xhtml/vocab#bookmark",contents:"http://www.w3.org/1999/xhtml/vocab#contents",chapter:"http://www.w3.org/1999/xhtml/vocab#chapter",copyright:"http://www.w3.org/1999/xhtml/vocab#copyright",first:"http://www.w3.org/1999/xhtml/vocab#first",glossary:"http://www.w3.org/1999/xhtml/vocab#glossary",help:"http://www.w3.org/1999/xhtml/vocab#help",icon:"http://www.w3.org/1999/xhtml/vocab#icon",index:"http://www.w3.org/1999/xhtml/vocab#index",last:"http://www.w3.org/1999/xhtml/vocab#last",license:"http://www.w3.org/1999/xhtml/vocab#license",meta:"http://www.w3.org/1999/xhtml/vocab#meta",next:"http://www.w3.org/1999/xhtml/vocab#next",prev:"http://www.w3.org/1999/xhtml/vocab#prev",previous:"http://www.w3.org/1999/xhtml/vocab#previous",section:"http://www.w3.org/1999/xhtml/vocab#section",start:"http://www.w3.org/1999/xhtml/vocab#start",stylesheet:"http://www.w3.org/1999/xhtml/vocab#stylesheet",subsection:"http://www.w3.org/1999/xhtml/vocab#subsection",top:"http://www.w3.org/1999/xhtml/vocab#top",up:"http://www.w3.org/1999/xhtml/vocab#up",p3pv1:"http://www.w3.org/1999/xhtml/vocab#p3pv1"}},moe={"@context":{as:"https://www.w3.org/ns/activitystreams#",cat:"http://www.w3.org/ns/dcat#",cc:"http://creativecommons.org/ns#",cnt:"http://www.w3.org/2008/content#",csvw:"http://www.w3.org/ns/csvw#",ctag:"http://commontag.org/ns#",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcat:"http://www.w3.org/ns/dcat#",dcterms:"http://purl.org/dc/terms/",dqv:"http://www.w3.org/ns/dqv#",duv:"https://www.w3.org/TR/vocab-duv#",earl:"http://www.w3.org/ns/earl#",foaf:"http://xmlns.com/foaf/0.1/",gldp:"http://www.w3.org/ns/people#",gr:"http://purl.org/goodrelations/v1#",grddl:"http://www.w3.org/2003/g/data-view#",ht:"http://www.w3.org/2006/http#",ical:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",ma:"http://www.w3.org/ns/ma-ont#",oa:"http://www.w3.org/ns/oa#",odrl:"http://www.w3.org/ns/odrl/2/",og:"http://ogp.me/ns#",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",prov:"http://www.w3.org/ns/prov#",ptr:"http://www.w3.org/2009/pointers#",qb:"http://purl.org/linked-data/cube#",rev:"http://purl.org/stuff/rev#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfa:"http://www.w3.org/ns/rdfa#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rif:"http://www.w3.org/2007/rif#",rr:"http://www.w3.org/ns/r2rml#",schema:"http://schema.org/",sd:"http://www.w3.org/ns/sparql-service-description#",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",ssn:"http://www.w3.org/ns/ssn/",sosa:"http://www.w3.org/ns/sosa/",time:"http://www.w3.org/2006/time#",v:"http://rdf.data-vocabulary.org/#",vcard:"http://www.w3.org/2006/vcard/ns#",void:"http://rdfs.org/ns/void#",wdr:"http://www.w3.org/2007/05/powder#",wdrs:"http://www.w3.org/2007/05/powder-s#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",describedby:"http://www.w3.org/2007/05/powder-s#describedby",license:"http://www.w3.org/1999/xhtml/vocab#license",role:"http://www.w3.org/1999/xhtml/vocab#role"}};var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.RDFA_CONTENTTYPES=Yu.RDFA_FEATURES=void 0;Yu.RDFA_FEATURES={"":{baseTag:!0,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},core:{baseTag:!1,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!1,datetimeAttribute:!1,timeTag:!1,htmlDatatype:!1,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!1},html:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0},xhtml:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},xml:{baseTag:!1,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!1,inheritSubjectInHeadBody:!1,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!1,copyRdfaPatterns:!1,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0}};Yu.RDFA_CONTENTTYPES={"text/html":"html","application/xhtml+xml":"xhtml","application/xml":"xml","text/xml":"xml","image/svg+xml":"xml"};var F0={};Object.defineProperty(F0,"__esModule",{value:!0});F0.Util=void 0;const f1=Oa,voe=Yu,woe=ft;let Ol=class bu{constructor(e,r){this.dataFactory=e||new woe.DataFactory,this.baseIRI=this.dataFactory.namedNode(r||""),this.baseIRIDocument=this.baseIRI}static parsePrefixes(e,r,n){const a={};if(n)for(const s in e)s.startsWith("xmlns")&&(a[s.substr(6)]=e[s]);if(e.prefix||Object.keys(a).length>0){const s=Object.assign(Object.assign({},r),a);if(e.prefix){let o;for(;o=bu.PREFIX_REGEX.exec(e.prefix);)s[o[1]]=o[2]}return s}else return r}static expandPrefixedTerm(e,r){const n=e.indexOf(":");let a,s;if(n>=0&&(a=e.substr(0,n),s=e.substr(n+1)),a==="")return"http://www.w3.org/1999/xhtml/vocab#"+s;if(a){const o=r.prefixesAll[a];if(o)return o+s}if(e){const o=r.prefixesAll[e.toLocaleLowerCase()];if(o)return o}return e}static isValidIri(e){return bu.IRI_REGEX.test(e)}static contentTypeToProfile(e){return voe.RDFA_CONTENTTYPES[e]||""}getBaseIRI(e){let r=e;const n=r.indexOf("#");return n>=0&&(r=r.substr(0,n)),this.dataFactory.namedNode((0,f1.resolve)(r,this.baseIRI.value))}getResourceOrBaseIri(e,r){return e===!0?this.getBaseIriTerm(r):e}getBaseIriTerm(e){return e.localBaseIRI||this.baseIRI}createVocabIris(e,r,n,a){return e.split(/\s+/).filter(s=>s&&(n||s.indexOf(":")>=0)).map(s=>this.createIri(s,r,!0,!0,a)).filter(s=>s!=null)}createLiteral(e,r){if(r.interpretObjectAsTime&&!r.datatype){for(const n of bu.TIME_REGEXES)if(e.match(n.regex)){r.datatype=this.dataFactory.namedNode(bu.XSD+n.type);break}}return this.dataFactory.literal(e,r.datatype||r.language)}createBlankNode(){return this.blankNodeFactory?this.blankNodeFactory():this.dataFactory.blankNode()}createIri(e,r,n,a,s){if(e=e||"",!a)return n||(e=(0,f1.resolve)(e,this.getBaseIriTerm(r).value)),bu.isValidIri(e)?this.dataFactory.namedNode(e):null;if(e.length>0&&e[0]==="["&&e[e.length-1]==="]"&&(e=e.substr(1,e.length-2),e.indexOf(":")<0))return null;if(e.startsWith("_:"))return s?this.dataFactory.blankNode(e.substr(2)||"b_identity"):null;if(n&&r.vocab&&e.indexOf(":")<0)return this.dataFactory.namedNode(r.vocab+e);let o=bu.expandPrefixedTerm(e,r);return n?e!==o&&(o=(0,f1.resolve)(o,this.baseIRIDocument.value)):o=(0,f1.resolve)(o,this.getBaseIriTerm(r).value),bu.isValidIri(o)?this.dataFactory.namedNode(o):null}};F0.Util=Ol;Ol.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";Ol.XSD="http://www.w3.org/2001/XMLSchema#";Ol.RDFA="http://www.w3.org/ns/rdfa#";Ol.PREFIX_REGEX=/\s*([^:\s]*)*:\s*([^\s]*)*\s*/g;Ol.TIME_REGEXES=[{regex:/^-?P([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9])?S)?)?$/,type:"duration"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"dateTime"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,type:"date"},{regex:/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"time"},{regex:/^[0-9]+-[0-9][0-9]$/,type:"gYearMonth"},{regex:/^[0-9]+$/,type:"gYear"}];Ol.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`]*$/;Object.defineProperty(nv,"__esModule",{value:!0});nv.RdfaParser=void 0;const Soe=GF,e4=Xt,Toe=goe,Eoe=moe,Ooe=Yu,ji=F0;class aR extends e4.Transform{constructor(e){super({readableObjectMode:!0}),this.activeTagStack=[],e=e||{},this.options=e,this.util=new ji.Util(e.dataFactory,e.baseIRI),this.defaultGraph=e.defaultGraph||this.util.dataFactory.defaultGraph();const r=e.contentType?ji.Util.contentTypeToProfile(e.contentType):e.profile||"";this.features=e.features||Ooe.RDFA_FEATURES[r],this.htmlParseListener=e.htmlParseListener,this.rdfaPatterns=this.features.copyRdfaPatterns?{}:null,this.pendingRdfaPatternCopies=this.features.copyRdfaPatterns?{}:null,this.parser=this.initializeParser(r==="xml"),this.activeTagStack.push({incompleteTriples:[],inlist:!1,language:e.language,listMapping:{},listMappingLocal:{},name:"",prefixesAll:Object.assign(Object.assign({},Eoe["@context"]),this.features.xhtmlInitialContext?Toe["@context"]:{}),prefixesCustom:{},skipElement:!1,vocab:e.vocab})}import(e){const r=new e4.PassThrough({readableObjectMode:!0});e.on("error",a=>n.emit("error",a)),e.on("data",a=>r.push(a)),e.on("end",()=>r.push(null));const n=r.pipe(new aR(this.options));return n}_transform(e,r,n){this.parser.write(e.toString()),n()}_flush(e){this.parser.end(),e()}onTagOpen(e,r){let n=this.activeTagStack.length-1;for(;n>0&&this.activeTagStack[n].skipElement;)n--;let a=this.activeTagStack[n];n!==this.activeTagStack.length-1&&(a=Object.assign(Object.assign({},a),{language:this.activeTagStack[this.activeTagStack.length-1].language,prefixesAll:this.activeTagStack[this.activeTagStack.length-1].prefixesAll,prefixesCustom:this.activeTagStack[this.activeTagStack.length-1].prefixesCustom,vocab:this.activeTagStack[this.activeTagStack.length-1].vocab}));const s={collectChildTags:a.collectChildTags,incompleteTriples:[],inlist:"inlist"in r,listMapping:[],listMappingLocal:a.listMapping,localBaseIRI:a.localBaseIRI,name:e,prefixesAll:null,prefixesCustom:null,skipElement:!1};if(this.activeTagStack.push(s),s.collectChildTags){for(const b of Object.keys(a.prefixesCustom).sort()){const _=a.prefixesCustom[b],E=b===""?"xmlns":"xmlns:"+b;E in r||(r[E]=_)}const p=Object.keys(r).map(b=>`${b}="${r[b]}"`).join(" ");if(s.text=[`<${e}${p?" "+p:""}>`],this.features.skipHandlingXmlLiteralChildren)return}let o=!0,u=!0;if(this.features.onlyAllowUriRelRevIfProperty&&("property"in r&&"rel"in r&&(o=!1,r.rel.indexOf(":")<0&&delete r.rel),"property"in r&&"rev"in r&&(u=!1,r.rev.indexOf(":")<0&&delete r.rev)),this.features.copyRdfaPatterns){if(a.collectedPatternTag){const p={attributes:r,children:[],name:e,referenced:!1,rootPattern:!1,text:[]};a.collectedPatternTag.children.push(p),s.collectedPatternTag=p;return}if(r.typeof==="rdfa:Pattern"){s.collectedPatternTag={attributes:r,children:[],name:e,parentTag:a,referenced:!1,rootPattern:!0,text:[]};return}if(r.property==="rdfa:copy"){const p=r.resource||r.href||r.src;this.rdfaPatterns[p]?this.emitPatternCopy(a,this.rdfaPatterns[p],p):(this.pendingRdfaPatternCopies[p]||(this.pendingRdfaPatternCopies[p]=[]),this.pendingRdfaPatternCopies[p].push(a));return}}this.features.baseTag&&e==="base"&&r.href&&(this.util.baseIRI=this.util.getBaseIRI(r.href)),this.features.xmlBase&&r["xml:base"]&&(s.localBaseIRI=this.util.getBaseIRI(r["xml:base"])),this.features.timeTag&&e==="time"&&!r.datatype&&(s.interpretObjectAsTime=!0);let c,l,d;if("vocab"in r?r.vocab?(s.vocab=r.vocab,this.emitTriple(this.util.getBaseIriTerm(s),this.util.dataFactory.namedNode(ji.Util.RDFA+"usesVocabulary"),this.util.dataFactory.namedNode(s.vocab))):s.vocab=this.activeTagStack[0].vocab:s.vocab=a.vocab,s.prefixesCustom=ji.Util.parsePrefixes(r,a.prefixesCustom,this.features.xmlnsPrefixMappings),s.prefixesAll=Object.keys(s.prefixesCustom).length>0?Object.assign(Object.assign({},a.prefixesAll),s.prefixesCustom):a.prefixesAll,this.features.roleAttribute&&r.role){const p=r.id?this.util.createIri("#"+r.id,s,!1,!1,!1):this.util.createBlankNode(),b=s.vocab;s.vocab="http://www.w3.org/1999/xhtml/vocab#";for(const _ of this.util.createVocabIris(r.role,s,!0,!1))this.emitTriple(p,this.util.dataFactory.namedNode("http://www.w3.org/1999/xhtml/vocab#role"),_);s.vocab=b}"xml:lang"in r||this.features.langAttribute&&"lang"in r?s.language=r["xml:lang"]||r.lang:s.language=a.language;const f=this.activeTagStack.length===2;if(!("rel"in r)&&!("rev"in r)?"property"in r&&!("content"in r)&&!("datatype"in r)?("about"in r?(c=this.util.createIri(r.about,s,!1,!0,!0),s.explicitNewSubject=!!c):f?c=!0:a.object&&(c=a.object),"typeof"in r&&("about"in r&&(d=this.util.createIri(r.about,s,!1,!0,!0)),!d&&f&&(d=!0),!d&&"resource"in r&&(d=this.util.createIri(r.resource,s,!1,!0,!0)),!d&&("href"in r||"src"in r)&&(d=this.util.createIri(r.href||r.src,s,!1,!1,!0)),!d&&this.isInheritSubjectInHeadBody(e)&&(d=c),d||(d=this.util.createBlankNode()),l=d)):(("about"in r||"resource"in r)&&(c=this.util.createIri(r.about||r.resource,s,!1,!0,!0),s.explicitNewSubject=!!c),!c&&("href"in r||"src"in r)&&(c=this.util.createIri(r.href||r.src,s,!1,!1,!0),s.explicitNewSubject=!!c),c||(f?c=!0:this.isInheritSubjectInHeadBody(e)?c=a.object:"typeof"in r?(c=this.util.createBlankNode(),s.explicitNewSubject=!0):a.object&&(c=a.object,"property"in r||(s.skipElement=!0))),"typeof"in r&&(d=c)):("about"in r?(c=this.util.createIri(r.about,s,!1,!0,!0),s.explicitNewSubject=!!c,"typeof"in r&&(d=c)):f?c=!0:a.object&&(c=a.object),"resource"in r&&(l=this.util.createIri(r.resource,s,!1,!0,!0)),l||("href"in r||"src"in r?l=this.util.createIri(r.href||r.src,s,!1,!1,!0):"typeof"in r&&!("about"in r)&&!this.isInheritSubjectInHeadBody(e)&&(l=this.util.createBlankNode())),"typeof"in r&&!("about"in r)&&(this.isInheritSubjectInHeadBody(e)?d=c:d=l)),d)for(const p of this.util.createVocabIris(r.typeof,s,!0,!0))this.emitTriple(this.util.getResourceOrBaseIri(d,s),this.util.dataFactory.namedNode(ji.Util.RDF+"type"),p);if(c&&(s.listMapping={}),l){if("rel"in r&&"inlist"in r)for(const p of this.util.createVocabIris(r.rel,s,o,!1))this.addListMapping(s,c,p,l);if(!("rel"in r&&"inlist"in r)){if("rel"in r)for(const p of this.util.createVocabIris(r.rel,s,o,!1))this.emitTriple(this.util.getResourceOrBaseIri(c,s),p,this.util.getResourceOrBaseIri(l,s));if("rev"in r)for(const p of this.util.createVocabIris(r.rev,s,u,!1))this.emitTriple(this.util.getResourceOrBaseIri(l,s),p,this.util.getResourceOrBaseIri(c,s))}}if(!l){if("rel"in r)if("inlist"in r)for(const p of this.util.createVocabIris(r.rel,s,o,!1))this.addListMapping(s,c,p,null),s.incompleteTriples.push({predicate:p,reverse:!1,list:!0});else for(const p of this.util.createVocabIris(r.rel,s,o,!1))s.incompleteTriples.push({predicate:p,reverse:!1});if("rev"in r)for(const p of this.util.createVocabIris(r.rev,s,u,!1))s.incompleteTriples.push({predicate:p,reverse:!0});s.incompleteTriples.length>0&&(l=this.util.createBlankNode())}if("property"in r){s.predicates=this.util.createVocabIris(r.property,s,!0,!1);let p;if("datatype"in r?(s.datatype=this.util.createIri(r.datatype,s,!0,!0,!1),s.datatype&&(s.datatype.value===ji.Util.RDF+"XMLLiteral"||this.features.htmlDatatype&&s.datatype.value===ji.Util.RDF+"HTML")&&(s.collectChildTags=!0)):(!("rev"in r)&&!("rel"in r)&&!("content"in r)&&("resource"in r&&(p=this.util.createIri(r.resource,s,!1,!0,!0)),!p&&"href"in r&&(p=this.util.createIri(r.href,s,!1,!1,!0)),!p&&"src"in r&&(p=this.util.createIri(r.src,s,!1,!1,!0))),"typeof"in r&&!("about"in r)&&(p=d)),"content"in r){const b=this.util.createLiteral(r.content,s);if("inlist"in r)for(const _ of s.predicates)this.addListMapping(s,c,_,b);else{const _=this.util.getResourceOrBaseIri(c,s);for(const E of s.predicates)this.emitTriple(_,E,b)}s.predicates=null}else if(this.features.datetimeAttribute&&"datetime"in r){s.interpretObjectAsTime=!0;const b=this.util.createLiteral(r.datetime,s);if("inlist"in r)for(const _ of s.predicates)this.addListMapping(s,c,_,b);else{const _=this.util.getResourceOrBaseIri(c,s);for(const E of s.predicates)this.emitTriple(_,E,b)}s.predicates=null}else if(p){const b=this.util.getResourceOrBaseIri(p,s);if("inlist"in r)for(const _ of s.predicates)this.addListMapping(s,c,_,b);else{const _=this.util.getResourceOrBaseIri(c,s);for(const E of s.predicates)this.emitTriple(_,E,b)}s.predicates=null}}let h=!1;if(!s.skipElement&&c&&a.incompleteTriples.length>0){h=!0;const p=this.util.getResourceOrBaseIri(a.subject,s),b=this.util.getResourceOrBaseIri(c,s);for(const _ of a.incompleteTriples)if(_.reverse)this.emitTriple(b,_.predicate,p);else if(_.list){let E=null;for(let w=this.activeTagStack.length-1;w>=0;w--)if(this.activeTagStack[w].inlist){E=this.activeTagStack[w];break}this.addListMapping(E,c,_.predicate,b)}else this.emitTriple(p,_.predicate,b)}!h&&a.incompleteTriples.length>0&&(s.incompleteTriples=s.incompleteTriples.concat(a.incompleteTriples)),s.subject=c||a.subject,s.object=l||c}onText(e){const r=this.activeTagStack[this.activeTagStack.length-1];if(this.features.copyRdfaPatterns&&r.collectedPatternTag){r.collectedPatternTag.text.push(e);return}r.text||(r.text=[]),r.text.push(e)}onTagClose(){const e=this.activeTagStack[this.activeTagStack.length-1],r=this.activeTagStack[this.activeTagStack.length-2];if(!(e.collectChildTags&&r.collectChildTags&&this.features.skipHandlingXmlLiteralChildren)){if(this.features.copyRdfaPatterns&&e.collectedPatternTag&&e.collectedPatternTag.rootPattern){const n=e.collectedPatternTag.attributes.resource;if(delete e.collectedPatternTag.attributes.resource,delete e.collectedPatternTag.attributes.typeof,this.rdfaPatterns[n]=e.collectedPatternTag,this.pendingRdfaPatternCopies[n]){for(const a of this.pendingRdfaPatternCopies[n])this.emitPatternCopy(a,e.collectedPatternTag,n);delete this.pendingRdfaPatternCopies[n]}this.activeTagStack.pop();return}if(e.predicates){const n=this.util.getResourceOrBaseIri(e.subject,e);let a=e.text||[];e.collectChildTags&&r.collectChildTags&&(a=a.slice(1));const s=this.util.createLiteral(a.join(""),e);if(e.inlist)for(const o of e.predicates)this.addListMapping(e,n,o,s);else for(const o of e.predicates)this.emitTriple(n,o,s);r.predicates||(e.text=null)}if(e.object&&Object.keys(e.listMapping).length>0){const n=this.util.getResourceOrBaseIri(e.object,e);for(const a in e.listMapping){const s=this.util.dataFactory.namedNode(a),o=e.listMapping[a];if(o.length>0){const u=o.map(()=>this.util.createBlankNode());for(let c=0;c<o.length;c++){const l=this.util.getResourceOrBaseIri(o[c],e);this.emitTriple(u[c],this.util.dataFactory.namedNode(ji.Util.RDF+"first"),l),this.emitTriple(u[c],this.util.dataFactory.namedNode(ji.Util.RDF+"rest"),c<o.length-1?u[c+1]:this.util.dataFactory.namedNode(ji.Util.RDF+"nil"))}this.emitTriple(n,s,u[0])}else this.emitTriple(n,s,this.util.dataFactory.namedNode(ji.Util.RDF+"nil"))}}}this.activeTagStack.pop(),e.collectChildTags&&e.text&&e.text.push(`</${e.name}>`),e.text&&r&&(r.text?r.text=r.text.concat(e.text):r.text=e.text)}onEnd(){if(this.features.copyRdfaPatterns){this.features.copyRdfaPatterns=!1;for(const e in this.rdfaPatterns){const r=this.rdfaPatterns[e];r.referenced||(r.attributes.typeof="rdfa:Pattern",r.attributes.resource=e,this.emitPatternCopy(r.parentTag,r,e),r.referenced=!1,delete r.attributes.typeof,delete r.attributes.resource)}for(const e in this.pendingRdfaPatternCopies)for(const r of this.pendingRdfaPatternCopies[e])this.activeTagStack.push(r),this.onTagOpen("link",{property:"rdfa:copy",href:e}),this.onTagClose(),this.activeTagStack.pop();this.features.copyRdfaPatterns=!0}}isInheritSubjectInHeadBody(e){return this.features.inheritSubjectInHeadBody&&(e==="head"||e==="body")}addListMapping(e,r,n,a){if(e.explicitNewSubject){const s=this.util.createBlankNode();this.emitTriple(this.util.getResourceOrBaseIri(r,e),n,s),this.emitTriple(s,this.util.dataFactory.namedNode(ji.Util.RDF+"first"),this.util.getResourceOrBaseIri(a,e)),this.emitTriple(s,this.util.dataFactory.namedNode(ji.Util.RDF+"rest"),this.util.dataFactory.namedNode(ji.Util.RDF+"nil"))}else{let s=e.listMappingLocal[n.value];s||(e.listMappingLocal[n.value]=s=[]),a&&s.push(a)}}emitTriple(e,r,n){e.termType==="NamedNode"&&e.value.indexOf(":")<0||r.termType==="NamedNode"&&r.value.indexOf(":")<0||n.termType==="NamedNode"&&n.value.indexOf(":")<0||this.push(this.util.dataFactory.quad(e,r,n,this.defaultGraph))}emitPatternCopy(e,r,n){if(this.activeTagStack.push(e),r.referenced=!0,!r.constructedBlankNodes)r.constructedBlankNodes=[],this.util.blankNodeFactory=()=>{const a=this.util.dataFactory.blankNode();return r.constructedBlankNodes.push(a),a};else{let a=0;this.util.blankNodeFactory=()=>r.constructedBlankNodes[a++]}this.emitPatternCopyAbsolute(r,!0,n),this.util.blankNodeFactory=null,this.activeTagStack.pop()}emitPatternCopyAbsolute(e,r,n){if(!(!r&&e.attributes.property==="rdfa:copy"&&e.attributes.href===n)){this.onTagOpen(e.name,e.attributes);for(const a of e.text)this.onText(a);for(const a of e.children)this.emitPatternCopyAbsolute(a,!1,n);this.onTagClose()}}initializeParser(e){return new Soe.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(r){this.emit("error",r)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(r){this.emit("error",r)}},onopentag:(r,n)=>{try{this.onTagOpen(r,n),this.htmlParseListener&&this.htmlParseListener.onTagOpen(r,n)}catch(a){this.emit("error",a)}},ontext:r=>{try{this.onText(r),this.htmlParseListener&&this.htmlParseListener.onText(r)}catch(n){this.emit("error",n)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:e})}}nv.RdfaParser=aR;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(HF,t),r(kF,t),r(QF,t),r(nv,t),r(Yu,t),r(F0,t)})(Jx);Object.defineProperty(rv,"__esModule",{value:!0});rv.ActorRdfParseXmlRdfa=void 0;const Aoe=El,xoe=Jx;class Roe extends Aoe.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){var o;const a=(e.headers&&e.headers.get("content-language"))??void 0;e.data.on("error",u=>s.emit("error",u));const s=e.data.pipe(new xoe.RdfaParser({baseIRI:(o=e.metadata)==null?void 0:o.baseIRI,profile:"xml",language:a}));return{data:s,metadata:{triples:!0}}}}rv.ActorRdfParseXmlRdfa=Roe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(rv,t)})(VF);var mL={},lv={},sR={},Ioe=function(){var t=function(ze,De,Be,Ye){for(Be=Be||{},Ye=ze.length;Ye--;Be[ze[Ye]]=De);return Be},e=[7,12,13,14,15,16,20,25,115,130],r=[7,13,16,20,25,115,130],n=[7,13,16,115,130],a=[1,25],s=[1,29],o=[1,27],u=[1,28],c=[13,16,115,130],l=[13,16,28,38,40,42,44,46,48,53,56,61,67,85,87,92,93,95,96,102,110,111,115,119,120,126,128,129,130,131,132,133,134,135,136],d=[28,56],f=[1,42],h=[46,48,53,56],p=[1,54],b=[1,60],_=[1,56],E=[1,57],w=[1,58],O=[1,63],A=[1,64],T=[1,65],I=[1,66],D=[1,67],U=[1,68],H=[1,75],N=[28,46,48,53,56],R=[28,42,46,48,53,56],F=[13,16,28,38,40,42,44,46,48,53,56,92,115,119,120,130,131,132,133,134,135,136],X=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,119,120,126,128,129,130,131,132,133,134,135,136],ne=[13,16,38,40,44,92,115,119,120,130,131,132,133,134,135,136],$=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,117,118,119,120,126,128,129,130,131,132,133,134,135,136],C=[13,16,28,56,115,130],Q=[13,16,38,58,87,96,109,115,126,130],se=[1,116],ie=[1,112],be=[1,108],he=[1,114],Te=[1,111],Ne=[7,13,16,20,25,44,48,53,56,67,85,87,95,96,115,128,129,130],ye=[48,53],ce=[48,53,87,96,126],xe=[13,16,44,48,53,56,85,87,95,96,115,128,129,130],oe=[1,126],J=[13,16,40,44,48,53,56,85,87,95,96,115,128,129,130],le=[1,129],pe=[48,53,67,87,96,126],L=[13,16,40,44,48,53,56,67,85,87,95,96,115,128,129,130],P=[1,133],m=[13,16,40,44,48,53,56,67,85,87,95,96,102,115,128,129,130],y=[13,16,40,44,48,53,56,67,85,87,93,95,96,102,110,111,115,128,129,130],v=[1,151],j=[1,153],V=[1,156],q=[1,157],G=[1,158],Y=[1,167],ee=[1,175],ae=[13,16,44,48,53,56,67,85,87,95,96,115,128,129,130],ve=[13,16,44,48,53,56,67,85,87,95,96,115,126,128,129,130],me=[13,16,46,92,115,119,120,130,131,132,133,134,135,136],Ee={trace:function(){},yy:{},symbols_:{error:2,shaclDoc:3,shaclDoc_repetition0:4,shaclDoc_repetition1:5,ttlSection:6,EOF:7,directive:8,baseDecl:9,importsDecl:10,prefixDecl:11,KW_BASE:12,IRIREF:13,KW_IMPORTS:14,KW_PREFIX:15,PNAME_NS:16,nodeShapeIri:17,iri:18,nodeShape:19,KW_SHAPE:20,nodeShape_option0:21,nodeShape_option1:22,nodeShapeBody:23,shapeClass:24,KW_SHAPE_CLASS:25,shapeClass_option0:26,turtleAnnotation:27,";":28,turtleAnnotation2:29,predicate:30,turtleAnnotation2_option0:31,objectList:32,object:33,objectList_repetition0:34,iriOrLiteral:35,blankNodeSection:36,list:37,"(":38,list_repetition0:39,")":40,objectTail:41,",":42,LB:43,"[":44,RB:45,"]":46,LP:47,"%":48,RP:49,pcSection:50,iriHead:51,ttlStatement:52,".":53,ttlSection_repetition0:54,startNodeShape:55,"{":56,endNodeShape:57,"}":58,nodeShapeBody_repetition0:59,targetClass:60,"->":61,targetClass_repetition_plus0:62,constraint:63,constraint_group0:64,constraint_option0:65,orNotComponent:66,"|":67,nodeNot:68,nodeOrEmit:69,nodeOr:70,nodeOr_repetition_plus0:71,nodeValue:72,negation:73,nodeValue_group0:74,"=":75,iriOrLiteralOrArray:76,propertyShape:77,path:78,propertyShape_repetition0:79,propertyOrComponent:80,propertyNot:81,propertyOr:82,propertyOr_repetition_plus0:83,propertyAtom:84,NODEKIND:85,shapeRef:86,PARAM:87,propertyCount:88,propertyMinCount:89,"..":90,propertyMaxCount:91,INTEGER:92,"*":93,shapeRef_group0:94,"@":95,"!":96,pathAlternative:97,additionalAlternative:98,pathSequence:99,pathAlternative_repetition_plus0:100,additionalSequence:101,"/":102,pathEltOrInverse:103,pathSequence_repetition_plus0:104,pathElt:105,pathPrimary:106,pathMod:107,pathInverse:108,"^":109,"?":110,"+":111,iriOrLiteralOrArray_repetition0:112,literal:113,iri_group0:114,a:115,string:116,LANGTAG:117,"^^":118,DECIMAL:119,DOUBLE:120,literal_group0:121,string_group0:122,string_group1:123,shaclDoc_repetition1_group0:124,constraint_group0_repetition_plus0:125,TARGET:126,propertyShape_repetition0_group0:127,ATPNAME_LN:128,ATPNAME_NS:129,PNAME_LN:130,KW_TRUE:131,KW_FALSE:132,STRING_LITERAL1:133,STRING_LITERAL2:134,STRING_LITERAL_LONG1:135,STRING_LITERAL_LONG2:136,$accept:0,$end:1},terminals_:{2:"error",7:"EOF",12:"KW_BASE",13:"IRIREF",14:"KW_IMPORTS",15:"KW_PREFIX",16:"PNAME_NS",20:"KW_SHAPE",25:"KW_SHAPE_CLASS",28:";",38:"(",40:")",42:",",44:"[",46:"]",48:"%",53:".",56:"{",58:"}",61:"->",67:"|",75:"=",85:"NODEKIND",87:"PARAM",90:"..",92:"INTEGER",93:"*",95:"@",96:"!",102:"/",109:"^",110:"?",111:"+",115:"a",117:"LANGTAG",118:"^^",119:"DECIMAL",120:"DOUBLE",126:"TARGET",128:"ATPNAME_LN",129:"ATPNAME_NS",130:"PNAME_LN",131:"KW_TRUE",132:"KW_FALSE",133:"STRING_LITERAL1",134:"STRING_LITERAL2",135:"STRING_LITERAL_LONG1",136:"STRING_LITERAL_LONG2"},productions_:[0,[3,4],[8,1],[8,1],[8,1],[9,2],[10,2],[11,3],[17,1],[19,5],[24,4],[27,2],[29,2],[30,2],[32,2],[33,1],[33,1],[33,1],[37,3],[41,2],[43,1],[45,1],[36,3],[47,1],[49,1],[50,3],[51,1],[52,3],[6,1],[55,1],[57,1],[23,3],[60,2],[63,3],[66,2],[69,1],[70,1],[70,2],[68,1],[68,2],[72,3],[77,2],[80,2],[82,1],[82,2],[81,1],[81,2],[84,1],[84,1],[84,1],[84,3],[84,1],[88,5],[89,1],[91,1],[91,1],[86,1],[86,2],[73,1],[78,1],[98,2],[97,1],[97,2],[101,2],[99,1],[99,2],[105,1],[105,2],[103,1],[103,2],[108,1],[107,1],[107,1],[107,1],[106,1],[106,3],[76,1],[76,3],[35,1],[35,1],[18,1],[18,1],[18,1],[113,1],[113,2],[113,3],[113,1],[113,1],[113,1],[113,1],[116,1],[116,1],[4,0],[4,2],[124,1],[124,1],[5,0],[5,2],[21,0],[21,1],[22,0],[22,1],[26,0],[26,1],[31,0],[31,1],[34,0],[34,2],[39,0],[39,2],[54,0],[54,2],[59,0],[59,2],[62,1],[62,2],[125,1],[125,2],[64,1],[64,1],[65,0],[65,1],[71,1],[71,2],[74,1],[74,1],[127,1],[127,1],[79,0],[79,2],[83,1],[83,2],[94,1],[94,1],[100,1],[100,2],[104,1],[104,2],[112,0],[112,2],[114,1],[114,1],[121,1],[121,1],[122,1],[122,1],[123,1],[123,1]],performAction:function(De,Be,Ye,Pt,at,qe,ys){var ke=qe.length-1;switch(at){case 1:this.$=Et(Ae.factory.namedNode(br("")),Ae.factory.namedNode(W),Ae.factory.namedNode(Ge+"Ontology"));break;case 5:Ae.base=Ae.factory.namedNode(qe[ke].slice(1,-1)),Ae.n3Parser._setBase(Ae.base.value);break;case 6:this.$=Et(Ae.base,Ae.factory.namedNode(Ge+"imports"),Ae.factory.namedNode(qe[ke].slice(1,-1)));break;case 7:this.$=Ae.prefixes[qe[ke-1].substr(0,qe[ke-1].length-1)]=br(qe[ke]);break;case 8:Ae.nodeShapeStack=!1,Et(Ae.currentNodeShape=qe[ke],Ae.factory.namedNode(W),Ae.factory.namedNode(Ue+"NodeShape"));break;case 10:this.$=Et(Ae.currentNodeShape,Ae.factory.namedNode(W),Ae.factory.namedNode(We+"Class"));break;case 11:this.$=Se();break;case 13:this.$=qe[ke].forEach(mr=>Et(Ae.currentNodeShape,qe[ke-1],mr));break;case 14:this.$=[qe[ke-1],...qe[ke]];break;case 18:this.$=Wr(qe[ke-1],!0);break;case 19:case 34:case 42:case 60:case 63:this.$=qe[ke];break;case 20:Ae.tempCurrentNodeShape=Ae.currentNodeShape,this.$=Ae.currentNodeShape=Pr();break;case 21:Ae.currentNodeShape=Ae.tempCurrentNodeShape;break;case 22:case 31:this.$=qe[ke-2];break;case 23:Ae.tempCurrentNodeShape=Ae.currentNodeShape,Ae.currentNodeShape=Ae.currentPropertyNode;break;case 24:Ae.currentNodeShape=Ae.tempCurrentNodeShape;break;case 26:Ae.currentNodeShape=qe[ke];break;case 29:Ae.nodeShapeStack?(Ae.nodeShapeStack.push(Ae.currentNodeShape),Et(Ae.currentPropertyNode,Ae.factory.namedNode(Ue+"node"),Ae.currentNodeShape=Pr())):Ae.nodeShapeStack=[],this.$=Ae.currentNodeShape;break;case 30:Ae.nodeShapeStack.length>0&&(Ae.currentNodeShape=Ae.nodeShapeStack.pop());break;case 32:this.$=qe[ke].forEach(mr=>{Et(Ae.currentNodeShape,Ae.factory.namedNode(Ue+"targetClass"),mr)});break;case 35:this.$=Et(Ae.currentNodeShape,Ae.factory.namedNode(Ue+qe[ke][0]),qe[ke][1]);break;case 36:break;case 37:const bn=Wr([qe[ke-1],...qe[ke]].map(mr=>{const Pi=Pr();return Et(Pi,Ae.factory.namedNode(Ue+mr[0]),mr[1]),Pi}));this.$=["or",bn];break;case 39:case 46:this.$=re("not",...qe[ke]);break;case 40:case 50:this.$=[qe[ke-2],qe[ke]];break;case 43:this.$=qe[ke]&&B(...qe[ke]);break;case 44:this.$=B("or",Wr([qe[ke-1],...qe[ke]].map(mr=>{const Pi=Pr();return Et(Pi,Ae.factory.namedNode(Ue+mr[0]),mr[1]),Pi})));break;case 47:this.$=[lt[qe[ke].value]?"datatype":"class",qe[ke]];break;case 48:this.$=["nodeKind",Ae.factory.namedNode(Ue+qe[ke])];break;case 49:this.$=["node",Ae.factory.namedNode(qe[ke])];break;case 51:this.$=void 0;break;case 53:this.$=qe[ke]>0&&B("minCount",Qt(qe[ke],ue));break;case 54:this.$=B("maxCount",Qt(qe[ke],ue));break;case 56:this.$=Br(qe[ke].slice(1));break;case 57:this.$=br(qe[ke]);break;case 59:Et(Ae.currentNodeShape,Ae.factory.namedNode(Ue+"property"),Ae.currentPropertyNode=Pr()),B("path",qe[ke]);break;case 62:const gr=Pr();Et(gr,Ae.factory.namedNode(Ue+"alternativePath"),Wr([qe[ke-1],...qe[ke]])),this.$=gr;break;case 65:this.$=Wr([qe[ke-1],...qe[ke]]);break;case 67:Et(this.$=Pr(),Ae.factory.namedNode(Ue+qe[ke]),qe[ke-1]);break;case 69:Et(this.$=Pr(),Ae.factory.namedNode(Ue+"inversePath"),qe[ke]);break;case 71:this.$="zeroOrOnePath";break;case 72:this.$="zeroOrMorePath";break;case 73:this.$="oneOrMorePath";break;case 75:this.$=qe[ke-1];break;case 77:this.$=Wr(qe[ke-1]);break;case 80:this.$=Ae.factory.namedNode(br(qe[ke]));break;case 81:this.$=Ae.factory.namedNode(Br(qe[ke]));break;case 82:this.$=Se(Ae.factory.namedNode(W));break;case 83:this.$=Qt(qe[ke]);break;case 84:this.$=_r(qe[ke-1],lowercase(qe[ke].substr(1)));break;case 85:this.$=Qt(qe[ke-2],qe[ke]);break;case 86:this.$=Qt(qe[ke],ue);break;case 87:this.$=Qt(qe[ke],ge);break;case 88:this.$=Qt(qe[ke].toLowerCase(),we);break;case 89:this.$=Qt(qe[ke].toLowerCase(),Me);break;case 90:this.$=xn(qe[ke],1);break;case 91:this.$=xn(qe[ke],3);break;case 92:case 96:case 106:case 108:case 110:case 112:case 128:case 138:this.$=[];break;case 93:case 97:case 107:case 109:case 111:case 113:case 115:case 117:case 123:case 129:case 131:case 135:case 137:case 139:qe[ke-1].push(qe[ke]);break;case 114:case 116:case 122:case 130:case 134:case 136:this.$=[qe[ke]];break}},table:[t(e,[2,92],{3:1,4:2}),{1:[3]},t(r,[2,96],{5:3,8:4,9:5,10:6,11:7,12:[1,8],14:[1,9],15:[1,10]}),t(n,[2,110],{6:11,124:12,54:13,19:14,24:15,20:[1,16],25:[1,17]}),t(e,[2,93]),t(e,[2,2]),t(e,[2,3]),t(e,[2,4]),{13:[1,18]},{13:[1,19]},{16:[1,20]},{7:[1,21]},t(r,[2,97]),{7:[2,28],13:a,16:s,18:24,51:23,52:22,114:26,115:o,130:u},t(r,[2,94]),t(r,[2,95]),{13:a,16:s,17:30,18:31,114:26,115:o,130:u},{13:a,16:s,17:32,18:31,114:26,115:o,130:u},t(e,[2,5]),t(e,[2,6]),{13:[1,33]},{1:[2,1]},t(n,[2,111]),{13:a,16:s,18:36,29:34,30:35,114:26,115:o,130:u},t(c,[2,26]),t(l,[2,80]),t(l,[2,81]),t(l,[2,82]),t(l,[2,140]),t(l,[2,141]),t(d,[2,98],{21:37,60:38,61:[1,39]}),t([28,56,61],[2,8]),{26:40,27:41,28:f,56:[2,102]},t(e,[2,7]),{53:[1,43]},t(h,[2,104],{31:44,27:45,28:f}),{13:a,16:s,18:51,32:46,33:47,35:48,36:49,37:50,38:p,43:53,44:b,92:_,113:52,114:26,115:o,116:55,119:E,120:w,121:59,122:61,123:62,130:u,131:O,132:A,133:T,134:I,135:D,136:U},{22:69,27:70,28:f,56:[2,100]},t(d,[2,99]),{13:a,16:s,18:72,62:71,114:26,115:o,130:u},{23:73,55:74,56:H},{56:[2,103]},{13:a,16:s,18:36,29:76,30:35,114:26,115:o,130:u},t(n,[2,27]),t(h,[2,12]),t(h,[2,105]),t(N,[2,13]),t(R,[2,106],{34:77}),t(F,[2,15]),t(F,[2,16]),t(F,[2,17]),t(X,[2,78]),t(X,[2,79]),{13:a,16:s,18:36,29:78,30:35,114:26,115:o,130:u},t(ne,[2,108],{39:79}),t(X,[2,83],{117:[1,80],118:[1,81]}),t(X,[2,86]),t(X,[2,87]),t(X,[2,88]),t(X,[2,89]),t(c,[2,20]),t($,[2,90]),t($,[2,91]),t(X,[2,142]),t(X,[2,143]),t($,[2,144]),t($,[2,145]),t($,[2,146]),t($,[2,147]),{23:82,55:74,56:H},{56:[2,101]},t(d,[2,32],{114:26,18:83,13:a,16:s,115:o,130:u}),t(C,[2,114]),t(r,[2,10]),t(Q,[2,112],{59:84}),t(Q,[2,29]),t(h,[2,11]),t(N,[2,14],{41:85,42:[1,86]}),{45:87,46:[1,88]},{13:a,16:s,18:51,33:90,35:48,36:49,37:50,38:p,40:[1,89],43:53,44:b,92:_,113:52,114:26,115:o,116:55,119:E,120:w,121:59,122:61,123:62,130:u,131:O,132:A,133:T,134:I,135:D,136:U},t(X,[2,84]),{13:a,16:s,18:91,114:26,115:o,130:u},t(r,[2,9]),t(C,[2,115]),{13:a,16:s,18:115,38:se,57:92,58:[1,94],63:93,64:95,68:102,69:98,70:100,72:104,73:105,74:107,77:97,78:99,87:ie,96:be,97:101,99:103,103:106,105:109,106:113,108:110,109:he,114:26,115:o,125:96,126:Te,130:u},t(R,[2,107]),{13:a,16:s,18:51,33:117,35:48,36:49,37:50,38:p,43:53,44:b,92:_,113:52,114:26,115:o,116:55,119:E,120:w,121:59,122:61,123:62,130:u,131:O,132:A,133:T,134:I,135:D,136:U},t(F,[2,22]),t(F,[2,21]),t(F,[2,18]),t(ne,[2,109]),t(X,[2,85]),t(Ne,[2,31]),t(Q,[2,113]),t(Ne,[2,30]),{47:120,48:[1,121],50:119,53:[2,120],65:118},t(ye,[2,118],{70:100,68:102,72:104,73:105,74:107,69:122,87:ie,96:be,126:Te}),t(ye,[2,119]),t(ce,[2,116]),t(xe,[2,128],{79:123}),t(ce,[2,35]),t(xe,[2,59]),t(ce,[2,36],{71:124,66:125,67:oe}),t(J,[2,61],{100:127,98:128,67:le}),t(pe,[2,38]),{72:130,74:107,87:ie,126:Te},t(L,[2,64],{104:131,101:132,102:P}),{75:[1,134]},t([13,16,56,85,87,95,115,126,128,129,130],[2,58]),t(m,[2,68]),{13:a,16:s,18:115,38:se,105:135,106:113,114:26,115:o,130:u},{75:[2,124]},{75:[2,125]},t(m,[2,66],{107:136,93:[1,138],110:[1,137],111:[1,139]}),t([13,16,38,115,130],[2,70]),t(y,[2,74]),{13:a,16:s,18:115,38:se,97:140,99:103,103:106,105:109,106:113,108:110,109:he,114:26,115:o,130:u},t(R,[2,19]),{53:[1,141]},{53:[2,121]},{13:a,16:s,18:36,29:142,30:35,114:26,115:o,130:u},t(c,[2,23]),t(ce,[2,117]),t(ye,[2,41],{114:26,55:74,127:143,88:144,82:145,81:147,84:148,73:149,18:150,86:152,23:154,94:155,13:a,16:s,44:[1,146],56:H,85:v,87:j,95:V,96:be,115:o,128:q,129:G,130:u}),t(ce,[2,37],{66:159,67:oe}),t(pe,[2,122]),{68:160,72:104,73:105,74:107,87:ie,96:be,126:Te},t(J,[2,62],{98:161,67:le}),t(L,[2,134]),{13:a,16:s,18:115,38:se,99:162,103:106,105:109,106:113,108:110,109:he,114:26,115:o,130:u},t(pe,[2,39]),t(L,[2,65],{101:163,102:P}),t(m,[2,136]),{13:a,16:s,18:115,38:se,103:164,105:109,106:113,108:110,109:he,114:26,115:o,130:u},{13:a,16:s,18:51,35:166,44:Y,76:165,92:_,113:52,114:26,115:o,116:55,119:E,120:w,121:59,122:61,123:62,130:u,131:O,132:A,133:T,134:I,135:D,136:U},t(m,[2,69]),t(m,[2,67]),t(m,[2,71]),t(m,[2,72]),t(m,[2,73]),{40:[1,168]},t(Q,[2,33]),{48:[1,170],49:169},t(xe,[2,129]),t(xe,[2,126]),t(xe,[2,127]),{89:171,92:[1,172]},t(xe,[2,43],{83:173,80:174,67:ee}),t(ae,[2,45]),{13:a,16:s,18:150,23:154,55:74,56:H,84:176,85:v,86:152,87:j,94:155,95:V,114:26,115:o,128:q,129:G,130:u},t(ae,[2,47]),t(ae,[2,48]),t(ae,[2,49]),{75:[1,177]},t(ae,[2,51]),t(ae,[2,56]),{13:[1,178]},t(ae,[2,132]),t(ae,[2,133]),t(pe,[2,123]),t(pe,[2,34]),t(L,[2,135]),t(L,[2,60]),t(m,[2,137]),t(m,[2,63]),t(pe,[2,40]),t(ve,[2,76]),t(me,[2,138],{112:179}),t(y,[2,75]),{53:[2,25]},{53:[2,24]},{90:[1,180]},{90:[2,53]},t(xe,[2,44],{80:181,67:ee}),t(ae,[2,130]),{13:a,16:s,18:150,23:154,55:74,56:H,73:149,81:182,84:148,85:v,86:152,87:j,94:155,95:V,96:be,114:26,115:o,128:q,129:G,130:u},t(ae,[2,46]),{13:a,16:s,18:51,35:166,44:Y,76:183,92:_,113:52,114:26,115:o,116:55,119:E,120:w,121:59,122:61,123:62,130:u,131:O,132:A,133:T,134:I,135:D,136:U},t(ae,[2,57]),{13:a,16:s,18:51,35:185,46:[1,184],92:_,113:52,114:26,115:o,116:55,119:E,120:w,121:59,122:61,123:62,130:u,131:O,132:A,133:T,134:I,135:D,136:U},{91:186,92:[1,187],93:[1,188]},t(ae,[2,131]),t(ae,[2,42]),t(ae,[2,50]),t(ve,[2,77]),t(me,[2,139]),{46:[1,189]},{46:[2,54]},{46:[2,55]},t(xe,[2,52])],defaultActions:{21:[2,1],41:[2,103],70:[2,101],111:[2,124],112:[2,125],119:[2,121],169:[2,25],170:[2,24],172:[2,53],187:[2,54],188:[2,55]},parseError:function(De,Be){if(Be.recoverable)this.trace(De);else{var Ye=new Error(De);throw Ye.hash=Be,Ye}},parse:function(De){var Be=this,Ye=[0],Pt=[null],at=[],qe=this.table,ys="",ke=0,bn=0,gr=2,mr=1,Pi=at.slice.call(arguments,1),wt=Object.create(this.lexer),ha={yy:{}};for(var Hi in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Hi)&&(ha.yy[Hi]=this.yy[Hi]);wt.setInput(De,ha.yy),ha.yy.lexer=wt,ha.yy.parser=this,typeof wt.yylloc>"u"&&(wt.yylloc={});var ir=wt.yylloc;at.push(ir);var io=wt.options&&wt.options.ranges;typeof ha.yy.parseError=="function"?this.parseError=ha.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var au=function(){var qn;return qn=wt.lex()||mr,typeof qn!="number"&&(qn=Be.symbols_[qn]||qn),qn},Xr,Di,sn,ki,on={},Pa,Zr,bs,Da;;){if(Di=Ye[Ye.length-1],this.defaultActions[Di]?sn=this.defaultActions[Di]:((Xr===null||typeof Xr>"u")&&(Xr=au()),sn=qe[Di]&&qe[Di][Xr]),typeof sn>"u"||!sn.length||!sn[0]){var ai="";Da=[];for(Pa in qe[Di])this.terminals_[Pa]&&Pa>gr&&Da.push("'"+this.terminals_[Pa]+"'");wt.showPosition?ai="Parse error on line "+(ke+1)+`:
`+wt.showPosition()+`
Expecting `+Da.join(", ")+", got '"+(this.terminals_[Xr]||Xr)+"'":ai="Parse error on line "+(ke+1)+": Unexpected "+(Xr==mr?"end of input":"'"+(this.terminals_[Xr]||Xr)+"'"),this.parseError(ai,{text:wt.match,token:this.terminals_[Xr]||Xr,line:wt.yylineno,loc:ir,expected:Da})}if(sn[0]instanceof Array&&sn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Di+", token: "+Xr);switch(sn[0]){case 1:Ye.push(Xr),Pt.push(wt.yytext),at.push(wt.yylloc),Ye.push(sn[1]),Xr=null,bn=wt.yyleng,ys=wt.yytext,ke=wt.yylineno,ir=wt.yylloc;break;case 2:if(Zr=this.productions_[sn[1]][1],on.$=Pt[Pt.length-Zr],on._$={first_line:at[at.length-(Zr||1)].first_line,last_line:at[at.length-1].last_line,first_column:at[at.length-(Zr||1)].first_column,last_column:at[at.length-1].last_column},io&&(on._$.range=[at[at.length-(Zr||1)].range[0],at[at.length-1].range[1]]),ki=this.performAction.apply(on,[ys,bn,ke,ha.yy,sn[1],Pt,at].concat(Pi)),typeof ki<"u")return ki;Zr&&(Ye=Ye.slice(0,-1*Zr*2),Pt=Pt.slice(0,-1*Zr),at=at.slice(0,-1*Zr)),Ye.push(this.productions_[sn[1]][0]),Pt.push(on.$),at.push(on._$),bs=qe[Ye[Ye.length-2]][Ye[Ye.length-1]],Ye.push(bs);break;case 3:return!0}}return!0}};const k="http://www.w3.org/1999/02/22-rdf-syntax-ns#",W=k+"type",M=k+"first",S=k+"rest",x=k+"nil",z="http://www.w3.org/2001/XMLSchema#",ue=z+"integer",ge=z+"decimal",we=z+"double",Me=z+"boolean",Ue="http://www.w3.org/ns/shacl#",Ge="http://www.w3.org/2002/07/owl#",We="http://www.w3.org/2000/01/rdf-schema#",lt={[ue]:!0,[ge]:!0,[z+"float"]:!0,[we]:!0,[z+"string"]:!0,[Me]:!0,[z+"dateTime"]:!0,[z+"nonPositiveInteger"]:!0,[z+"negativeInteger"]:!0,[z+"long"]:!0,[z+"int"]:!0,[z+"short"]:!0,[z+"byte"]:!0,[z+"nonNegativeInteger"]:!0,[z+"unsignedLong"]:!0,[z+"unsignedShort"]:!0,[z+"unsignedByte"]:!0,[z+"positiveInteger"]:!0,[k+"langString"]:!0};function Wr(ze,De=!1){let Be=0,Ye=ze.length;if(De&&Ye===0)return Ae.factory.namedNode(x);const Pt=head=Pr();return Ye===0&&Et(head,Ae.factory.namedNode(S),Ae.factory.namedNode(x)),ze.forEach(at=>{if(at===void 0)throw new Error("b");Et(head,Ae.factory.namedNode(M),at),Et(head,Ae.factory.namedNode(S),head=++Be<Ye?Pr():Ae.factory.namedNode(x))}),Pt}function br(ze){return Ae.n3Parser._resolveIRI(ze[0]==="<"?ze.substring(1,ze.length-1):ze)}function Br(ze){const De=ze.indexOf(":"),Be=ze.substr(0,De),Ye=Ae.prefixes[Be];if(!Ye)throw new Error("Unknown prefix: "+Be);return br(Ye+ze.substr(De+1))}function Qt(ze,De){return De&&De.termType!=="NamedNode"&&(De=Ae.factory.namedNode(De)),Ae.factory.literal(ze,De)}function _r(ze,De){return Ae.factory.literal(ze,De)}function Pr(ze){return typeof ze=="string"?ze.startsWith("e_")?Ae.factory.blankNode(ze):Ae.factory.blankNode("e_"+ze):Ae.factory.blankNode("g_"+kr++)}var kr=0;Ae._resetBlanks=function(){kr=0};function xn(ze,De){return Ae.n3Parser._lexer._unescape(ze.substring(De,ze.length-De))}function Et(ze,De,Be){if(!ze.termType||!De.termType||De.value.includes(",")||!Be.termType)throw new Error(`boo ${ze.value} ${De.value} ${Be.value}`);Ae.onQuad(Ae.factory.quad(ze,De,Be))}function B(ze,De){Et(Ae.currentPropertyNode,Ae.factory.namedNode(Ue+ze),De)}function re(ze,De,Be){const Ye=Pr();return Et(Ye,Ae.factory.namedNode(Ue+De),Be),[ze,Ye]}function Se(ze){if(!Ae.extended)throw new Error("Encountered extended SHACLC syntax; but extended parsing is disabled");return ze}var Fe=function(){var ze={EOF:1,parseError:function(Be,Ye){if(this.yy.parser)this.yy.parser.parseError(Be,Ye);else throw new Error(Be)},setInput:function(De,Be){return this.yy=Be||this.yy||{},this._input=De,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var De=this._input[0];this.yytext+=De,this.yyleng++,this.offset++,this.match+=De,this.matched+=De;var Be=De.match(/(?:\r\n?|\n).*/g);return Be?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),De},unput:function(De){var Be=De.length,Ye=De.split(/(?:\r\n?|\n)/g);this._input=De+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Be),this.offset-=Be;var Pt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ye.length-1&&(this.yylineno-=Ye.length-1);var at=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ye?(Ye.length===Pt.length?this.yylloc.first_column:0)+Pt[Pt.length-Ye.length].length-Ye[0].length:this.yylloc.first_column-Be},this.options.ranges&&(this.yylloc.range=[at[0],at[0]+this.yyleng-Be]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(De){this.unput(this.match.slice(De))},pastInput:function(){var De=this.matched.substr(0,this.matched.length-this.match.length);return(De.length>20?"...":"")+De.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var De=this.match;return De.length<20&&(De+=this._input.substr(0,20-De.length)),(De.substr(0,20)+(De.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var De=this.pastInput(),Be=new Array(De.length+1).join("-");return De+this.upcomingInput()+`
`+Be+"^"},test_match:function(De,Be){var Ye,Pt,at;if(this.options.backtrack_lexer&&(at={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(at.yylloc.range=this.yylloc.range.slice(0))),Pt=De[0].match(/(?:\r\n?|\n).*/g),Pt&&(this.yylineno+=Pt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Pt?Pt[Pt.length-1].length-Pt[Pt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+De[0].length},this.yytext+=De[0],this.match+=De[0],this.matches=De,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(De[0].length),this.matched+=De[0],Ye=this.performAction.call(this,this.yy,this,Be,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ye)return Ye;if(this._backtrack){for(var qe in at)this[qe]=at[qe];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var De,Be,Ye,Pt;this._more||(this.yytext="",this.match="");for(var at=this._currentRules(),qe=0;qe<at.length;qe++)if(Ye=this._input.match(this.rules[at[qe]]),Ye&&(!Be||Ye[0].length>Be[0].length)){if(Be=Ye,Pt=qe,this.options.backtrack_lexer){if(De=this.test_match(Ye,at[qe]),De!==!1)return De;if(this._backtrack){Be=!1;continue}else return!1}else if(!this.options.flex)break}return Be?(De=this.test_match(Be,at[Pt]),De!==!1?De:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Be=this.next();return Be||this.lex()},begin:function(Be){this.conditionStack.push(Be)},popState:function(){var Be=this.conditionStack.length-1;return Be>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Be){return Be=this.conditionStack.length-1-Math.abs(Be||0),Be>=0?this.conditionStack[Be]:"INITIAL"},pushState:function(Be){this.begin(Be)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(Be,Ye,Pt,at){switch(Pt){case 0:break;case 1:return 12;case 2:return 14;case 3:return 15;case 4:return 25;case 5:return 20;case 6:return 131;case 7:return 132;case 8:return 85;case 9:return 126;case 10:return 87;case 11:return"PASS";case 12:return"COMMENT";case 13:return 13;case 14:return 16;case 15:return 130;case 16:return 129;case 17:return 128;case 18:return 117;case 19:return 92;case 20:return 119;case 21:return 120;case 22:return"EXPONENT";case 23:return 133;case 24:return 134;case 25:return 135;case 26:return 136;case 27:return 61;case 28:return 90;case 29:return 58;case 30:return 56;case 31:return 38;case 32:return 40;case 33:return 44;case 34:return 46;case 35:return 110;case 36:return 93;case 37:return 111;case 38:return 67;case 39:return 118;case 40:return 53;case 41:return 96;case 42:return 102;case 43:return 75;case 44:return 95;case 45:return 109;case 46:return 28;case 47:return 42;case 48:return 48;case 49:return 115;case 50:return 7;case 51:console.log(Ye.yytext);break}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:IMPORTS)/i,/^(?:PREFIX)/i,/^(?:shapeClass)/i,/^(?:shape)/i,/^(?:true)/i,/^(?:false)/i,/^(?:(BlankNode|IRI|Literal|BlankNodeOrIRI|BlankNodeOrLiteral|IRIOrLiteral\b))/i,/^(?:(targetNode|targetObjectsOf|targetSubjectsOf\b))/i,/^(?:(deactivated|severity|message|class|datatype|nodeKind|minExclusive|minInclusive|maxExclusive|maxInclusive|minLength|maxLength|pattern|flags|languageIn|uniqueLang|equals|disjoint|lessThan|lessThanOrEquals|qualifiedValueShape|qualifiedMinCount|qualifiedMaxCount|qualifiedValueShapesDisjoint|closed|ignoredProperties|hasValue|in))/i,/^(?:([ \t\r\n]+))/i,/^(?:(#[\r\n]*))/i,/^(?:(<([^=<>\"\{\}\|\^`\\\u0000-\u0020]|(\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*>))/i,/^(?:((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@(([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(@((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@[a-zA-Z]+(-[a-zA-Z0-9]+)*))/i,/^(?:([+-]?[0-9]+))/i,/^(?:([+-]?[0-9]*\.[0-9]+))/i,/^(?:([+-]?([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.?[0-9]+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"\'])))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"\'])))*"""))/i,/^(?:->)/i,/^(?:\.\.)/i,/^(?:\})/i,/^(?:\{)/i,/^(?:\()/i,/^(?:\))/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\?)/i,/^(?:\*)/i,/^(?:\+)/i,/^(?:\|)/i,/^(?:\^\^)/i,/^(?:\.)/i,/^(?:!)/i,/^(?:\/)/i,/^(?:=)/i,/^(?:@)/i,/^(?:\^)/i,/^(?:;)/i,/^(?:,)/i,/^(?:%)/i,/^(?:a)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return ze}();Ee.lexer=Fe;function Ae(){this.yy={}}return Ae.prototype=Ee,Ee.Parser=Ae,new Ae}(),Poe=Ioe;const Doe=Poe.Parser,FT=tu;let vL=class{constructor(){}parse(e,{extendedSyntax:r,baseIRI:n}={}){this._parser=new Doe,this._parser.Parser.factory=FT.DataFactory,this._parser.Parser.base=FT.DataFactory.namedNode(n||"urn:x-base:default"),this._parser.Parser.extended=r===!0,this._parser.Parser.prefixes={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"},this._parser.Parser.currentNodeShape=void 0,this._parser.Parser.currentPropertyNode=void 0,this._parser.Parser.nodeShapeStack=[],this._parser.Parser.tempCurrentNodeShape=void 0,this._parser.Parser.n3Parser=new FT.Parser({baseIRI:n||"urn:x-base:default"});const a=[];return this._parser.Parser.onQuad=s=>{a.push(s)},this._parser.parse(e),a.prefixes=this._parser.Parser.prefixes,a}};sR.Parser=vL;sR.parse=function(e,r){return new vL().parse(e,r)};var wL={exports:{}};(function(t){(function(){var e;typeof window=="object"&&window?e=window:e=g,t.exports?t.exports=e.Promise?e.Promise:s:e.Promise||(e.Promise=s);var r=e.setImmediate||function(h){setTimeout(h,1)};function n(h,p){return function(){h.apply(p,arguments)}}var a=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"};function s(h){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof h!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],f(h,n(u,this),n(c,this))}function o(h){var p=this;if(this._state===null){this._deferreds.push(h);return}r(function(){var b=p._state?h.onFulfilled:h.onRejected;if(b===null){(p._state?h.resolve:h.reject)(p._value);return}var _;try{_=b(p._value)}catch(E){h.reject(E);return}h.resolve(_)})}function u(h){try{if(h===this)throw new TypeError("A promise cannot be resolved with itself.");if(h&&(typeof h=="object"||typeof h=="function")){var p=h.then;if(typeof p=="function"){f(n(p,h),n(u,this),n(c,this));return}}this._state=!0,this._value=h,l.call(this)}catch(b){c.call(this,b)}}function c(h){this._state=!1,this._value=h,l.call(this)}function l(){for(var h=0,p=this._deferreds.length;h<p;h++)o.call(this,this._deferreds[h]);this._deferreds=null}function d(h,p,b,_){this.onFulfilled=typeof h=="function"?h:null,this.onRejected=typeof p=="function"?p:null,this.resolve=b,this.reject=_}function f(h,p,b){var _=!1;try{h(function(E){_||(_=!0,p(E))},function(E){_||(_=!0,b(E))})}catch(E){if(_)return;_=!0,b(E)}}s.prototype.catch=function(h){return this.then(null,h)},s.prototype.then=function(h,p){var b=this;return new s(function(_,E){o.call(b,new d(h,p,_,E))})},s.all=function(){var h=Array.prototype.slice.call(arguments.length===1&&a(arguments[0])?arguments[0]:arguments);return new s(function(p,b){if(h.length===0)return p([]);var _=h.length;function E(O,A){try{if(A&&(typeof A=="object"||typeof A=="function")){var T=A.then;if(typeof T=="function"){T.call(A,function(I){E(O,I)},b);return}}h[O]=A,--_===0&&p(h)}catch(I){b(I)}}for(var w=0;w<h.length;w++)E(w,h[w])})},s.resolve=function(h){return h&&typeof h=="object"&&h.constructor===s?h:new s(function(p){p(h)})},s.reject=function(h){return new s(function(p,b){b(h)})},s.race=function(h){return new s(function(p,b){for(var _=0,E=h.length;_<E;_++)h[_].then(p,b)})}})()})(wL);var Noe=wL.exports,joe=Noe,Al=function(t,e,r){typeof e=="function"&&(r=e,e=null);var n="",a=new joe(function(s,o){t.on("data",function(u){n+=typeof e=="string"?u.toString(e):u.toString()}),t.on("end",function(){s(n)}),t.on("error",o)});return r&&a.then(function(s){r(null,s)},r),a},dv={};Object.defineProperty(dv,"__esModule",{value:!0});dv.PrefixWrappingIterator=void 0;const Coe=Ht;class Moe extends Coe.WrappingIterator{constructor(e){super(e==null?void 0:e.then(r=>(this.prefixes=r.prefixes,r)))}read(){if(this.prefixes){for(const e of Object.entries(this.prefixes))this.emit("prefix",...e);delete this.prefixes}return super.read()}}dv.PrefixWrappingIterator=Moe;Object.defineProperty(lv,"__esModule",{value:!0});lv.ActorRdfParseShaclc=void 0;const Foe=El,Loe=Xt,Boe=sR,$oe=Al,Uoe=dv;class qoe extends Foe.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){const a=new Uoe.PrefixWrappingIterator($oe(e.data).then(o=>{var u;return(0,Boe.parse)(o,{extendedSyntax:r==="text/shaclc-ext",baseIRI:(u=e.metadata)==null?void 0:u.baseIRI})})),s=new Loe.Readable({objectMode:!0});return a.on("prefix",(...o)=>s.emit("prefix",...o)),{data:s.wrap(a),metadata:{triples:!0}}}}lv.ActorRdfParseShaclc=qoe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(lv,t)})(mL);var SL={},fv={},TL={},hv={};Object.defineProperty(hv,"__esModule",{value:!0});hv.ActorRdfJoinEntriesSort=void 0;const Voe=Je;class Hoe extends Voe.Actor{constructor(e){super(e)}}hv.ActorRdfJoinEntriesSort=Hoe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(hv,t)})(TL);var xl={},L0={};Object.defineProperty(L0,"__esModule",{value:!0});L0.ActorRdfResolveQuadPattern=void 0;const koe=Je;class Qoe extends koe.Actor{constructor(e){super(e)}}L0.ActorRdfResolveQuadPattern=Qoe;var pv={};Object.defineProperty(pv,"__esModule",{value:!0});pv.ActorRdfResolveQuadPatternSource=void 0;const Goe=L0;class zoe extends Goe.ActorRdfResolveQuadPattern{constructor(e){super(e)}async test(e){return!0}async run(e){const r=await this.getSource(e.context,e.pattern);return await this.getOutput(r,e.pattern,e.context)}async getOutput(e,r,n){return{data:e.match(r.subject,r.predicate,r.object,r.graph,n)}}}pv.ActorRdfResolveQuadPatternSource=zoe;var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.hasContextSingleSourceOfType=Gr.hasContextSingleSource=Gr.getContextSourceUrl=Gr.getContextSourceFirst=Gr.getContextSource=Gr.getContextSources=Gr.getDataSourceContext=Gr.getDataSourceValue=Gr.getDataSourceType=Gr.isDataSourceRawType=void 0;const cp=Ut,Woe=Je;function yv(t){return typeof t=="string"||"match"in t}Gr.isDataSourceRawType=yv;function EL(t){return typeof t=="string"?"":"match"in t?"rdfjsSource":t.type}Gr.getDataSourceType=EL;function oR(t){return yv(t)?t:t.value}Gr.getDataSourceValue=oR;function Xoe(t,e){return yv(t)||!t.context?e:e.merge(Woe.ActionContext.ensureActionContext(t.context))}Gr.getDataSourceContext=Xoe;function Koe(t){return t.get(cp.KeysRdfResolveQuadPattern.sources)}Gr.getContextSources=Koe;function uR(t){return t.get(cp.KeysRdfResolveQuadPattern.source)}Gr.getContextSource=uR;function Joe(t){if(t.has(cp.KeysRdfResolveQuadPattern.source))return t.get(cp.KeysRdfResolveQuadPattern.source);const e=t.get(cp.KeysRdfResolveQuadPattern.sources);if((e==null?void 0:e.length)===1)return e[0]}Gr.getContextSourceFirst=Joe;function Yoe(t){if(t){let e=oR(t);if(typeof e=="string"){const r=e.indexOf("#");return r>=0&&(e=e.slice(0,r)),e}}}Gr.getContextSourceUrl=Yoe;function Zoe(t){const e=uR(t);return!!(e&&(yv(e)||e.value))}Gr.hasContextSingleSource=Zoe;function eue(t,e){const r=uR(e);return!!(r&&EL(r)===t&&oR(r))}Gr.hasContextSingleSourceOfType=eue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(L0,t),r(pv,t),r(Gr,t)})(xl);Object.defineProperty(fv,"__esModule",{value:!0});fv.ActorRdfJoinEntriesSortTraversalZeroKnowledge=void 0;const tue=TL,rue=xl,nue=Ut,h1=an,Jl=gt;class To extends tue.ActorRdfJoinEntriesSort{constructor(e){super(e)}static getPatternNonVocabUris(e){let r;const n=[];return e.type==="pattern"?n.push(e.predicate):Jl.Util.recurseOperation(e,{link(a){return n.push(a.iri),!1},nps(a){for(const s of a.iris)n.push(s);return!1}}),n.some(a=>a.termType==="NamedNode"&&a.value==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type")?r=[e.subject,e.graph]:r=[e.subject,e.object,e.graph],(0,h1.getNamedNodes)(r)}static getSourceUri(e){const r=e.value,n=r.indexOf("#");return n>0?r.slice(0,n):r}static getScoreSeedNonVocab(e,r){return To.getPatternNonVocabUris(e).map(n=>To.getSourceUri(n)).filter(n=>r.includes(n)).length}static getScoreSelectivity(e){const r=e.type==="pattern"?(0,h1.getTerms)(e):[e.subject,e.object,e.graph];return h1.QUAD_TERM_NAMES.length-(0,h1.getVariables)(r).length}static sortJoinEntries(e,r){return[...e].sort((n,a)=>{if((n.operation.type===Jl.Algebra.types.PATTERN||n.operation.type===Jl.Algebra.types.PATH)&&(a.operation.type===Jl.Algebra.types.PATTERN||a.operation.type===Jl.Algebra.types.PATH)){const s=To.getScoreSeedNonVocab(a.operation,r)-To.getScoreSeedNonVocab(n.operation,r);return s===0?To.getScoreSelectivity(a.operation)-To.getScoreSelectivity(n.operation):s}return n.operation.type===Jl.Algebra.types.PATTERN?-1:1})}async test(e){return!0}async run(e){const r=[],n=e.context.get(nue.KeysRdfResolveQuadPattern.sources);if(n)for(const a of n){const s=(0,rue.getDataSourceValue)(a);typeof s=="string"&&r.push(s)}return{entries:To.sortJoinEntries(e.entries,r)}}}fv.ActorRdfJoinEntriesSortTraversalZeroKnowledge=To;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(fv,t)})(SL);var OL={},sf={},AL={},bv={};Object.defineProperty(bv,"__esModule",{value:!0});bv.ActorRdfJoinSelectivity=void 0;const iue=Je;class aue extends iue.Actor{constructor(e){super(e)}}bv.ActorRdfJoinSelectivity=aue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(bv,t)})(AL);Object.defineProperty(sf,"__esModule",{value:!0});sf.JoinTypes=sf.ActorRdfJoinSelectivityVariableCounting=void 0;const sue=AL,p1=gt;class Oo extends sue.ActorRdfJoinSelectivity{constructor(e){super(e)}async test(e){return{accuracy:.5}}static getPatternCost(e){let r=1;return e.subject.termType==="Variable"&&(r+=4),(e.predicate.termType==="Variable"||e.type===p1.Algebra.types.PATH)&&(r+=1),e.object.termType==="Variable"&&(r+=2),e.graph.termType==="Variable"&&(r+=1),r/9}static getJoinTypes(e,r){const n=[];return e.subject.termType==="Variable"?(e.subject.equals(r.subject)&&n.push(Ze.unboundSS),r.type==="pattern"&&e.subject.equals(r.predicate)&&n.push(Ze.unboundSP),e.subject.equals(r.object)&&n.push(Ze.unboundSO),e.subject.equals(r.graph)&&n.push(Ze.unboundSG)):(e.subject.equals(r.subject)&&n.push(Ze.boundSS),r.type==="pattern"&&e.subject.equals(r.predicate)&&n.push(Ze.boundSP),e.subject.equals(r.object)&&n.push(Ze.boundSO),e.subject.equals(r.graph)&&n.push(Ze.boundSG)),e.type==="pattern"&&(e.predicate.termType==="Variable"?(e.predicate.equals(r.subject)&&n.push(Ze.unboundPS),r.type==="pattern"&&e.predicate.equals(r.predicate)&&n.push(Ze.unboundPP),e.predicate.equals(r.object)&&n.push(Ze.unboundPO),e.predicate.equals(r.graph)&&n.push(Ze.unboundPG)):(e.predicate.equals(r.subject)&&n.push(Ze.boundPS),r.type==="pattern"&&e.predicate.equals(r.predicate)&&n.push(Ze.boundPP),e.predicate.equals(r.object)&&n.push(Ze.boundPO),e.predicate.equals(r.graph)&&n.push(Ze.boundPG))),e.object.termType==="Variable"?(e.object.equals(r.subject)&&n.push(Ze.unboundOS),r.type==="pattern"&&e.object.equals(r.predicate)&&n.push(Ze.unboundOP),e.object.equals(r.object)&&n.push(Ze.unboundOO),e.object.equals(r.graph)&&n.push(Ze.unboundOG)):(e.object.equals(r.subject)&&n.push(Ze.boundOS),r.type==="pattern"&&e.object.equals(r.predicate)&&n.push(Ze.boundOP),e.object.equals(r.object)&&n.push(Ze.boundOO),e.object.equals(r.graph)&&n.push(Ze.boundOG)),e.graph.termType==="Variable"?(e.graph.equals(r.subject)&&n.push(Ze.unboundGS),r.type==="pattern"&&e.graph.equals(r.predicate)&&n.push(Ze.unboundGP),e.graph.equals(r.object)&&n.push(Ze.unboundGO),e.graph.equals(r.graph)&&n.push(Ze.unboundGG)):(e.graph.equals(r.subject)&&n.push(Ze.boundGS),r.type==="pattern"&&e.graph.equals(r.predicate)&&n.push(Ze.boundGP),e.graph.equals(r.object)&&n.push(Ze.boundGO),e.graph.equals(r.graph)&&n.push(Ze.boundGG)),n}static getOperationsPairwiseJoinCost(e,r){let n=Oo.MAX_PAIRWISE_COST;for(const a of Oo.getJoinTypes(e,r))switch(a){case Ze.boundSS:n-=2*2;break;case Ze.boundSP:n-=3*2;break;case Ze.boundSO:n-=1*2;break;case Ze.boundSG:n-=3*2;break;case Ze.boundPS:n-=3*2;break;case Ze.boundPP:return 1;case Ze.boundPO:n-=3*2;break;case Ze.boundPG:n-=3*2;break;case Ze.boundOS:n-=1*2;break;case Ze.boundOP:n-=3*2;break;case Ze.boundOO:n-=1*2;break;case Ze.boundOG:n-=3*2;break;case Ze.boundGS:n-=3*2;break;case Ze.boundGP:n-=3*2;break;case Ze.boundGO:n-=3*2;break;case Ze.boundGG:n-=3*2;break;case Ze.unboundSS:n-=2;break;case Ze.unboundSP:n-=3;break;case Ze.unboundSO:n-=1;break;case Ze.unboundSG:n-=3;break;case Ze.unboundPS:n-=3;break;case Ze.unboundPP:n-=3;break;case Ze.unboundPO:n-=3;break;case Ze.unboundPG:n-=3;break;case Ze.unboundOS:n-=1;break;case Ze.unboundOP:n-=3;break;case Ze.unboundOO:n-=1;break;case Ze.unboundOG:n-=3;break;case Ze.unboundGS:n-=3;break;case Ze.unboundGP:n-=3;break;case Ze.unboundGO:n-=3;break;case Ze.unboundGG:n-=3;break}return n/Oo.MAX_PAIRWISE_COST}static getOperationsJoinCost(e){const r=[];for(const s of e)p1.Util.recurseOperation(s,{[p1.Algebra.types.PATTERN](o){return r.push(o),!1},[p1.Algebra.types.PATH](o){return r.push(o),!1}});let n=0,a=0;for(const s of r)for(const o of r)s!==o&&(n+=Oo.getOperationsPairwiseJoinCost(s,o),a++);return a===0?1:n/a*r.reduce((s,o)=>s*Oo.getPatternCost(o),1)}async run(e){return e.entries.length<=1?{selectivity:1}:{selectivity:Oo.getOperationsJoinCost(e.entries.map(r=>r.operation))}}}sf.ActorRdfJoinSelectivityVariableCounting=Oo;Oo.MAX_PAIRWISE_COST=41*2;var Ze;(function(t){t[t.boundSS=0]="boundSS",t[t.boundSP=1]="boundSP",t[t.boundSO=2]="boundSO",t[t.boundSG=3]="boundSG",t[t.boundPS=4]="boundPS",t[t.boundPP=5]="boundPP",t[t.boundPO=6]="boundPO",t[t.boundPG=7]="boundPG",t[t.boundOS=8]="boundOS",t[t.boundOP=9]="boundOP",t[t.boundOO=10]="boundOO",t[t.boundOG=11]="boundOG",t[t.boundGS=12]="boundGS",t[t.boundGP=13]="boundGP",t[t.boundGO=14]="boundGO",t[t.boundGG=15]="boundGG",t[t.unboundSS=16]="unboundSS",t[t.unboundSP=17]="unboundSP",t[t.unboundSO=18]="unboundSO",t[t.unboundSG=19]="unboundSG",t[t.unboundPS=20]="unboundPS",t[t.unboundPP=21]="unboundPP",t[t.unboundPO=22]="unboundPO",t[t.unboundPG=23]="unboundPG",t[t.unboundOS=24]="unboundOS",t[t.unboundOP=25]="unboundOP",t[t.unboundOO=26]="unboundOO",t[t.unboundOG=27]="unboundOG",t[t.unboundGS=28]="unboundGS",t[t.unboundGP=29]="unboundGP",t[t.unboundGO=30]="unboundGO",t[t.unboundGG=31]="unboundGG"})(Ze||(sf.JoinTypes=Ze={}));(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(sf,t)})(OL);var xL={},_v={},cR={},gv={};Object.defineProperty(gv,"__esModule",{value:!0});gv.ActorRdfMetadata=void 0;const oue=Je;class uue extends oue.Actor{constructor(e){super(e)}}gv.ActorRdfMetadata=uue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(gv,t)})(cR);Object.defineProperty(_v,"__esModule",{value:!0});_v.ActorRdfMetadataPrimaryTopic=void 0;const cue=cR,t4=Xt;class lue extends cue.ActorRdfMetadata{constructor(e){super(e)}async test(e){if(e.triples)throw new Error("This actor only supports non-triple quad streams.");return!0}async run(e){const r=new t4.Readable({objectMode:!0}),n=new t4.Readable({objectMode:!0}),a=()=>{r._read=n._read=()=>{},e.quads.on("error",c=>{r.emit("error",c),n.emit("error",c)});const s={};let o;const u={};e.quads.on("data",c=>{c.predicate.value==="http://rdfs.org/ns/void#subset"&&c.object.value===e.url?o=c.subject.value:c.predicate.value==="http://xmlns.com/foaf/0.1/primaryTopic"&&(u[c.object.value]=c.subject.value);let l=s[c.graph.value];l||(l=s[c.graph.value]=[]),l.push(c)}),e.quads.on("end",()=>{const c=o?u[o]:void 0;for(const l in s)if(l===c){for(const d of s[l])n.push(d);if(this.metadataToData)for(const d of s[l])r.push(d)}else{for(const d of s[l])r.push(d);if(!c&&this.dataToMetadataOnInvalidMetadataGraph)for(const d of s[l])n.push(d)}r.push(null),n.push(null)})};return r._read=n._read=()=>{a()},{data:r,metadata:n}}}_v.ActorRdfMetadataPrimaryTopic=lue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(_v,t)})(xL);var RL={},mv={};Object.defineProperty(mv,"__esModule",{value:!0});mv.ActorRdfMetadataAll=void 0;const due=cR,r4=Xt;class fue extends due.ActorRdfMetadata{constructor(e){super(e)}async test(e){return!0}async run(e){const r=new r4.Readable({objectMode:!0}),n=new r4.Readable({objectMode:!0});e.quads.on("error",s=>{r.emit("error",s),n.emit("error",s)});const a=()=>{r._read=n._read=()=>{},e.quads.on("data",s=>{r.push(s),n.push(s)}),e.quads.on("end",()=>{r.push(null),n.push(null)})};return r._read=n._read=()=>{a()},{data:r,metadata:n}}}mv.ActorRdfMetadataAll=fue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(mv,t)})(RL);var IL={},vv={},B0={},wv={};Object.defineProperty(wv,"__esModule",{value:!0});wv.ActorRdfMetadataAccumulate=void 0;const hue=Je;class pue extends hue.Actor{constructor(e){super(e)}}wv.ActorRdfMetadataAccumulate=pue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(wv,t)})(B0);Object.defineProperty(vv,"__esModule",{value:!0});vv.ActorRdfMetadataAccumulateCanContainUndefs=void 0;const yue=B0;class bue extends yue.ActorRdfMetadataAccumulate{constructor(e){super(e)}async test(e){return!0}async run(e){if(e.mode==="initialize")return{metadata:{canContainUndefs:!1}};let r=e.accumulatedMetadata.canContainUndefs;return e.appendingMetadata.canContainUndefs&&(r=!0),{metadata:{canContainUndefs:r}}}}vv.ActorRdfMetadataAccumulateCanContainUndefs=bue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(vv,t)})(IL);var PL={},Sv={};Object.defineProperty(Sv,"__esModule",{value:!0});Sv.ActorRdfMetadataAccumulateCardinality=void 0;const _ue=B0;class gue extends _ue.ActorRdfMetadataAccumulate{constructor(e){super(e)}async test(e){return!0}async run(e){if(e.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0}}};const r={...e.accumulatedMetadata.cardinality};if(r.dataset)if(e.appendingMetadata.cardinality.dataset){if(r.dataset!==e.appendingMetadata.cardinality.dataset&&e.appendingMetadata.subsetOf===r.dataset)return{metadata:{cardinality:e.appendingMetadata.cardinality}};if(r.dataset!==e.appendingMetadata.cardinality.dataset)delete r.dataset;else return{metadata:{cardinality:r}}}else return{metadata:{cardinality:r}};return!e.appendingMetadata.cardinality||!Number.isFinite(e.appendingMetadata.cardinality.value)?(r.type="estimate",r.value=Number.POSITIVE_INFINITY):(e.appendingMetadata.cardinality.type==="estimate"&&(r.type="estimate"),r.value+=e.appendingMetadata.cardinality.value),{metadata:{cardinality:r}}}}Sv.ActorRdfMetadataAccumulateCardinality=gue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Sv,t)})(PL);var DL={},Tv={};Object.defineProperty(Tv,"__esModule",{value:!0});Tv.ActorRdfMetadataAccumulatePageSize=void 0;const mue=B0;class vue extends mue.ActorRdfMetadataAccumulate{constructor(e){super(e)}async test(e){return!0}async run(e){return e.mode==="initialize"?{metadata:{}}:{metadata:{..."pageSize"in e.accumulatedMetadata||"pageSize"in e.appendingMetadata?{pageSize:(e.accumulatedMetadata.pageSize||0)+(e.appendingMetadata.pageSize||0)}:{}}}}}Tv.ActorRdfMetadataAccumulatePageSize=vue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tv,t)})(DL);var NL={},Ev={};Object.defineProperty(Ev,"__esModule",{value:!0});Ev.ActorRdfMetadataAccumulateRequestTime=void 0;const wue=B0;class Sue extends wue.ActorRdfMetadataAccumulate{constructor(e){super(e)}async test(e){return!0}async run(e){return e.mode==="initialize"?{metadata:{}}:{metadata:{..."requestTime"in e.accumulatedMetadata||"requestTime"in e.appendingMetadata?{requestTime:(e.accumulatedMetadata.requestTime||0)+(e.appendingMetadata.requestTime||0)}:{}}}}}Ev.ActorRdfMetadataAccumulateRequestTime=Sue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ev,t)})(NL);var jL={},Ov={},to={},Av={};Object.defineProperty(Av,"__esModule",{value:!0});Av.ActorRdfMetadataExtract=void 0;const Tue=Je;class Eue extends Tue.Actor{constructor(e){super(e)}}Av.ActorRdfMetadataExtract=Eue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Av,t)})(to);var CL={exports:{}};(function(t){(function(e){var r=function(){function b(_){this.options=_}return b.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},b}(),n=function(){function b(U){return Object.prototype.toString.apply(U)==="[object Array]"}function _(U){return Object.prototype.toString.apply(U)==="[object String]"}function E(U){return Object.prototype.toString.apply(U)==="[object Number]"}function w(U){return Object.prototype.toString.apply(U)==="[object Boolean]"}function O(U,H){var N="",R=!0,F;for(F=0;F<U.length;F+=1)R?R=!1:N+=H,N+=U[F];return N}function A(U,H){for(var N=[],R=0;R<U.length;R+=1)N.push(H(U[R]));return N}function T(U,H){for(var N=[],R=0;R<U.length;R+=1)H(U[R])&&N.push(U[R]);return N}function I(U){if(typeof U!="object"||U===null)return U;Object.freeze(U);var H,N;for(N in U)U.hasOwnProperty(N)&&(H=U[N],typeof H=="object"&&D(H));return U}function D(U){return typeof Object.freeze=="function"?I(U):U}return{isArray:b,isString:_,isNumber:E,isBoolean:w,join:O,map:A,filter:T,deepFreeze:D}}(),a=function(){function b(w){return w>="a"&&w<="z"||w>="A"&&w<="Z"}function _(w){return w>="0"&&w<="9"}function E(w){return _(w)||w>="a"&&w<="f"||w>="A"&&w<="F"}return{isAlpha:b,isDigit:_,isHexDigit:E}}(),s=function(){var b={encode:function(T){return unescape(encodeURIComponent(T))},numBytes:function(T){return T<=127?1:194<=T&&T<=223?2:224<=T&&T<=239?3:240<=T&&T<=244?4:0},isValidFollowingCharCode:function(T){return 128<=T&&T<=191}};function _(T){var I="",D=b.encode(T),U,H;for(H=0;H<D.length;H+=1)U=D.charCodeAt(H),I+="%"+(U<16?"0":"")+U.toString(16).toUpperCase();return I}function E(T,I){return T.charAt(I)==="%"&&a.isHexDigit(T.charAt(I+1))&&a.isHexDigit(T.charAt(I+2))}function w(T,I){return parseInt(T.substr(I,2),16)}function O(T){if(!E(T,0))return!1;var I=w(T,1),D=b.numBytes(I);if(D===0)return!1;for(var U=1;U<D;U+=1)if(!E(T,3*U)||!b.isValidFollowingCharCode(w(T,3*U+1)))return!1;return!0}function A(T,I){var D=T.charAt(I);if(!E(T,I))return D;var U=w(T,I+1),H=b.numBytes(U);if(H===0)return D;for(var N=1;N<H;N+=1)if(!E(T,I+3*N)||!b.isValidFollowingCharCode(w(T,I+3*N+1)))return D;return T.substr(I,3*H)}return{encodeCharacter:_,isPctEncoded:O,pctCharAt:A}}(),o=function(){function b(w){return a.isAlpha(w)||a.isDigit(w)||w==="_"||s.isPctEncoded(w)}function _(w){return a.isAlpha(w)||a.isDigit(w)||w==="-"||w==="."||w==="_"||w==="~"}function E(w){return w===":"||w==="/"||w==="?"||w==="#"||w==="["||w==="]"||w==="@"||w==="!"||w==="$"||w==="&"||w==="("||w===")"||w==="*"||w==="+"||w===","||w===";"||w==="="||w==="'"}return{isVarchar:b,isUnreserved:_,isReserved:E}}(),u=function(){function b(O,A){var T="",I,D="";for((typeof O=="number"||typeof O=="boolean")&&(O=O.toString()),I=0;I<O.length;I+=D.length)D=O.charAt(I),T+=o.isUnreserved(D)||A&&o.isReserved(D)?D:s.encodeCharacter(D);return T}function _(O){return b(O,!0)}function E(O,A){var T=s.pctCharAt(O,A);return T.length>1||o.isReserved(T)||o.isUnreserved(T)?T:s.encodeCharacter(T)}function w(O){var A="",T,I="";for(T=0;T<O.length;T+=I.length)I=s.pctCharAt(O,T),I.length>1?A+=I:A+=o.isReserved(I)||o.isUnreserved(I)?I:s.encodeCharacter(I);return A}return{encode:b,encodePassReserved:_,encodeLiteral:w,encodeLiteralCharacter:E}}(),c=function(){var b={};function _(E){b[E]={symbol:E,separator:E==="?"?"&":E===""||E==="+"||E==="#"?",":E,named:E===";"||E==="&"||E==="?",ifEmpty:E==="&"||E==="?"?"=":"",first:E==="+"?"":E,encode:E==="+"||E==="#"?u.encodePassReserved:u.encode,toString:function(){return this.symbol}}}return _(""),_("+"),_("#"),_("."),_("/"),_(";"),_("?"),_("&"),{valueOf:function(E){return b[E]?b[E]:"=,!@|".indexOf(E)>=0?null:b[""]}}}();function l(b){var _;if(b==null)return!1;if(n.isArray(b))return b.length>0;if(typeof b=="string"||typeof b=="number"||typeof b=="boolean")return!0;for(_ in b)if(b.hasOwnProperty(_)&&l(b[_]))return!0;return!1}var d=function(){function b(_){this.literal=u.encodeLiteral(_)}return b.prototype.expand=function(){return this.literal},b.prototype.toString=b.prototype.expand,b}(),f=function(){function b(E){var w,O=[],A=null,T=null,I=null,D,U="";function H(){var R=E.substring(T,D);if(R.length===0)throw new r({expressionText:E,message:"a varname must be specified",position:D});A={varname:R,exploded:!1,maxLength:null},T=null}function N(){if(I===D)throw new r({expressionText:E,message:"after a ':' you have to specify the length",position:D});A.maxLength=parseInt(E.substring(I,D),10),I=null}for(w=function(R){var F=c.valueOf(R);if(F===null)throw new r({expressionText:E,message:"illegal use of reserved operator",position:D,operator:R});return F}(E.charAt(0)),D=w.symbol.length,T=D;D<E.length;D+=U.length){if(U=s.pctCharAt(E,D),T!==null){if(U==="."){if(T===D)throw new r({expressionText:E,message:"a varname MUST NOT start with a dot",position:D});continue}if(o.isVarchar(U))continue;H()}if(I!==null){if(D===I&&U==="0")throw new r({expressionText:E,message:"A :prefix must not start with digit 0",position:D});if(a.isDigit(U)){if(D-I>=4)throw new r({expressionText:E,message:"A :prefix must have max 4 digits",position:D});continue}N()}if(U===":"){if(A.maxLength!==null)throw new r({expressionText:E,message:"only one :maxLength is allowed per varspec",position:D});if(A.exploded)throw new r({expressionText:E,message:"an exploeded varspec MUST NOT be varspeced",position:D});I=D+1;continue}if(U==="*"){if(A===null)throw new r({expressionText:E,message:"exploded without varspec",position:D});if(A.exploded)throw new r({expressionText:E,message:"exploded twice",position:D});if(A.maxLength)throw new r({expressionText:E,message:"an explode (*) MUST NOT follow to a prefix",position:D});A.exploded=!0;continue}if(U===","){O.push(A),A=null,T=D+1;continue}throw new r({expressionText:E,message:"illegal character",character:U,position:D})}return T!==null&&H(),I!==null&&N(),O.push(A),new h(E,w,O)}function _(E){var w,O,A=[],T=null,I=0;for(w=0;w<E.length;w+=1){if(O=E.charAt(w),I!==null){if(O==="}")throw new r({templateText:E,message:"unopened brace closed",position:w});O==="{"&&(I<w&&A.push(new d(E.substring(I,w))),I=null,T=w);continue}if(T!==null){if(O==="{")throw new r({templateText:E,message:"brace already opened",position:w});if(O==="}"){if(T+1===w)throw new r({templateText:E,message:"empty braces",position:T});try{A.push(b(E.substring(T+1,w)))}catch(D){throw D.prototype===r.prototype?new r({templateText:E,message:D.options.message,position:T+D.options.position,details:D.options}):D}T=null,I=w+1}continue}throw new Error("reached unreachable code")}if(T!==null)throw new r({templateText:E,message:"unclosed brace",position:T});return I<E.length&&A.push(new d(E.substr(I))),new p(E,A)}return _}(),h=function(){function b(U){return JSON&&JSON.stringify?JSON.stringify(U):U}function _(U){if(!l(U))return!0;if(n.isString(U))return U==="";if(n.isNumber(U)||n.isBoolean(U))return!1;if(n.isArray(U))return U.length===0;for(var H in U)if(U.hasOwnProperty(H))return!1;return!0}function E(U){var H=[],N;for(N in U)U.hasOwnProperty(N)&&H.push({name:N,value:U[N]});return H}function w(U,H,N){this.templateText=U,this.operator=H,this.varspecs=N}w.prototype.toString=function(){return this.templateText};function O(U,H,N){var R="";if(N=N.toString(),H.named){if(R+=u.encodeLiteral(U.varname),N==="")return R+=H.ifEmpty,R;R+="="}return U.maxLength!==null&&(N=N.substr(0,U.maxLength)),R+=H.encode(N),R}function A(U){return l(U.value)}function T(U,H,N){var R=[],F="";if(H.named){if(F+=u.encodeLiteral(U.varname),_(N))return F+=H.ifEmpty,F;F+="="}return n.isArray(N)?(R=N,R=n.filter(R,l),R=n.map(R,H.encode),F+=n.join(R,",")):(R=E(N),R=n.filter(R,A),R=n.map(R,function(X){return H.encode(X.name)+","+H.encode(X.value)}),F+=n.join(R,",")),F}function I(U,H,N){var R=n.isArray(N),F=[];return R?(F=N,F=n.filter(F,l),F=n.map(F,function(X){var ne=u.encodeLiteral(U.varname);return _(X)?ne+=H.ifEmpty:ne+="="+H.encode(X),ne})):(F=E(N),F=n.filter(F,A),F=n.map(F,function(X){var ne=u.encodeLiteral(X.name);return _(X.value)?ne+=H.ifEmpty:ne+="="+H.encode(X.value),ne})),n.join(F,H.separator)}function D(U,H){var N=[],R="";return n.isArray(H)?(N=H,N=n.filter(N,l),N=n.map(N,U.encode),R+=n.join(N,U.separator)):(N=E(H),N=n.filter(N,function(F){return l(F.value)}),N=n.map(N,function(F){return U.encode(F.name)+"="+U.encode(F.value)}),R+=n.join(N,U.separator)),R}return w.prototype.expand=function(U){var H=[],N,R,F,X=this.operator;for(N=0;N<this.varspecs.length;N+=1)if(R=this.varspecs[N],F=U[R.varname],F!=null)if(R.exploded,n.isArray(F),typeof F=="string"||typeof F=="number"||typeof F=="boolean")H.push(O(R,X,F));else{if(R.maxLength&&l(F))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+b(F));R.exploded?l(F)&&(X.named?H.push(I(R,X,F)):H.push(D(X,F))):(X.named||!_(F))&&H.push(T(R,X,F))}return H.length===0?"":X.first+n.join(H,X.separator)},w}(),p=function(){function b(_,E){this.templateText=_,this.expressions=E,n.deepFreeze(this)}return b.prototype.toString=function(){return this.templateText},b.prototype.expand=function(_){var E,w="";for(E=0;E<this.expressions.length;E+=1)w+=this.expressions[E].expand(_);return w},b.parse=f,b.UriTemplateError=r,b}();e(p)})(function(e){t.exports=e})})(CL);var Oue=CL.exports;Object.defineProperty(Ov,"__esModule",{value:!0});Ov.ActorRdfMetadataExtractHydraControls=void 0;const Aue=to,xue=Oue;class tl extends Aue.ActorRdfMetadataExtract{constructor(e){super(e),this.parsedUriTemplateCache={}}async test(e){return!0}getLinks(e,r){return Object.fromEntries(tl.LINK_TYPES.map(n=>{const a=r[n]||r[`${n}Page`],s=a&&a[e];return[n,s&&s.length>0?s[0]:null]}))}parseUriTemplateCached(e){const r=this.parsedUriTemplateCache[e];return r||(this.parsedUriTemplateCache[e]=(0,xue.parse)(e))}getSearchForms(e){const r=e.search,n=[];if(r)for(const a in r)for(const s of r[a]){const o=(e.template||{})[s]||[];if(o.length!==1)throw new Error(`Expected 1 hydra:template for ${s}`);const u=o[0],c=this.parseUriTemplateCached(u),l=Object.fromEntries(((e.mapping||{})[s]||[]).map(f=>{const h=((e.variable||{})[f]||[])[0],p=((e.property||{})[f]||[])[0];if(!h)throw new Error(`Expected a hydra:variable for ${f}`);if(!p)throw new Error(`Expected a hydra:property for ${f}`);return[p,h]})),d=f=>c.expand(Object.fromEntries(Object.keys(f).map(h=>[l[h],f[h]])));n.push({dataset:a,template:u,mappings:l,getUri:d})}return{values:n}}getHydraProperties(e){return new Promise((r,n)=>{e.on("error",n);const a={};e.on("data",s=>{if(s.predicate.value.startsWith(tl.HYDRA)){const o=s.predicate.value.slice(tl.HYDRA.length),u=a[o]||(a[o]={});(u[s.subject.value]||(u[s.subject.value]=[])).push(s.object.value)}}),e.on("end",()=>r(a))})}async run(e){const r={},n=await this.getHydraProperties(e.metadata);return Object.assign(r,this.getLinks(e.url,n)),r.searchForms=this.getSearchForms(n),{metadata:r}}}Ov.ActorRdfMetadataExtractHydraControls=tl;tl.HYDRA="http://www.w3.org/ns/hydra/core#";tl.LINK_TYPES=["first","next","previous","last"];(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ov,t)})(jL);var ML={},xv={};Object.defineProperty(xv,"__esModule",{value:!0});xv.ActorRdfMetadataExtractHydraCount=void 0;const Rue=to;class Iue extends Rue.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}run(e){return new Promise((r,n)=>{e.metadata.on("error",n),e.metadata.on("data",a=>{this.predicates.includes(a.predicate.value)&&r({metadata:{cardinality:{type:"estimate",value:Number.parseInt(a.object.value,10),dataset:a.subject.value}}})}),e.metadata.on("end",()=>{r({metadata:{cardinality:{type:"estimate",value:0}}})})})}}xv.ActorRdfMetadataExtractHydraCount=Iue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(xv,t)})(ML);var FL={},Rv={};Object.defineProperty(Rv,"__esModule",{value:!0});Rv.ActorRdfMetadataExtractHydraPagesize=void 0;const Pue=to;class Due extends Pue.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){return new Promise((r,n)=>{e.metadata.on("error",n),e.metadata.on("data",a=>{this.predicates.includes(a.predicate.value)&&r({metadata:{pageSize:Number.parseInt(a.object.value,10)}})}),e.metadata.on("end",()=>{r({metadata:{}})})})}}Rv.ActorRdfMetadataExtractHydraPagesize=Due;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Rv,t)})(FL);var LL={},Iv={};Object.defineProperty(Iv,"__esModule",{value:!0});Iv.ActorRdfMetadataExtractRequestTime=void 0;const Nue=to;class jue extends Nue.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){return{metadata:{requestTime:e.requestTime}}}}Iv.ActorRdfMetadataExtractRequestTime=jue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Iv,t)})(LL);var BL={},Pv={};Object.defineProperty(Pv,"__esModule",{value:!0});Pv.ActorRdfMetadataExtractAllowHttpMethods=void 0;const Cue=to;class Mue extends Cue.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){var n,a;const r={};return(n=e.headers)!=null&&n.get("allow")&&(r.allowHttpMethods=(a=e.headers.get("allow"))==null?void 0:a.split(/, */u)),{metadata:r}}}Pv.ActorRdfMetadataExtractAllowHttpMethods=Mue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Pv,t)})(BL);var $L={},Dv={};Object.defineProperty(Dv,"__esModule",{value:!0});Dv.ActorRdfMetadataExtractPutAccepted=void 0;const Fue=to;class Lue extends Fue.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){var n,a;const r={};return(n=e.headers)!=null&&n.get("accept-put")&&(r.putAccepted=(a=e.headers.get("accept-put"))==null?void 0:a.split(/, */u)),{metadata:r}}}Dv.ActorRdfMetadataExtractPutAccepted=Lue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Dv,t)})($L);var UL={},Nv={};Object.defineProperty(Nv,"__esModule",{value:!0});Nv.ActorRdfMetadataExtractPatchSparqlUpdate=void 0;const Bue=to;class $ue extends Bue.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){var n,a,s,o;const r={};return((a=(n=e.headers)==null?void 0:n.get("accept-patch"))!=null&&a.includes("application/sparql-update")||(o=(s=e.headers)==null?void 0:s.get("ms-author-via"))!=null&&o.includes("SPARQL"))&&(r.patchSparqlUpdate=!0),{metadata:r}}}Nv.ActorRdfMetadataExtractPatchSparqlUpdate=$ue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Nv,t)})(UL);var qL={},jv={};Object.defineProperty(jv,"__esModule",{value:!0});jv.ActorRdfMetadataExtractSparqlService=void 0;const Uue=to,que=Oa;class Vue extends Uue.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){return new Promise((r,n)=>{e.metadata.on("error",n);const a={};e.metadata.on("data",s=>{s.predicate.value==="http://www.w3.org/ns/sparql-service-description#endpoint"&&(s.subject.termType==="BlankNode"||s.subject.value===e.url)?(a.sparqlService=s.object.termType==="Literal"?(0,que.resolve)(s.object.value,e.url):s.object.value,this.inferHttpsEndpoint&&e.url.startsWith("https")&&!a.sparqlService.startsWith("https")&&(a.sparqlService=a.sparqlService.replace("http:","https:"))):s.predicate.value==="http://www.w3.org/ns/sparql-service-description#defaultGraph"&&(a.defaultGraph=s.object.value)}),e.metadata.on("end",()=>{r({metadata:a})})})}}jv.ActorRdfMetadataExtractSparqlService=Vue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(jv,t)})(qL);var VL={},Cv={},HL={},jp={},lR={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var e=Wo,r;(function(d){d[d.Tab=9]="Tab",d[d.NewLine=10]="NewLine",d[d.FormFeed=12]="FormFeed",d[d.CarriageReturn=13]="CarriageReturn",d[d.Space=32]="Space",d[d.ExclamationMark=33]="ExclamationMark",d[d.Number=35]="Number",d[d.Amp=38]="Amp",d[d.SingleQuote=39]="SingleQuote",d[d.DoubleQuote=34]="DoubleQuote",d[d.Dash=45]="Dash",d[d.Slash=47]="Slash",d[d.Zero=48]="Zero",d[d.Nine=57]="Nine",d[d.Semi=59]="Semi",d[d.Lt=60]="Lt",d[d.Eq=61]="Eq",d[d.Gt=62]="Gt",d[d.Questionmark=63]="Questionmark",d[d.UpperA=65]="UpperA",d[d.LowerA=97]="LowerA",d[d.UpperF=70]="UpperF",d[d.LowerF=102]="LowerF",d[d.UpperZ=90]="UpperZ",d[d.LowerZ=122]="LowerZ",d[d.LowerX=120]="LowerX",d[d.OpeningSquareBracket=91]="OpeningSquareBracket"})(r||(r={}));var n;(function(d){d[d.Text=1]="Text",d[d.BeforeTagName=2]="BeforeTagName",d[d.InTagName=3]="InTagName",d[d.InSelfClosingTag=4]="InSelfClosingTag",d[d.BeforeClosingTagName=5]="BeforeClosingTagName",d[d.InClosingTagName=6]="InClosingTagName",d[d.AfterClosingTagName=7]="AfterClosingTagName",d[d.BeforeAttributeName=8]="BeforeAttributeName",d[d.InAttributeName=9]="InAttributeName",d[d.AfterAttributeName=10]="AfterAttributeName",d[d.BeforeAttributeValue=11]="BeforeAttributeValue",d[d.InAttributeValueDq=12]="InAttributeValueDq",d[d.InAttributeValueSq=13]="InAttributeValueSq",d[d.InAttributeValueNq=14]="InAttributeValueNq",d[d.BeforeDeclaration=15]="BeforeDeclaration",d[d.InDeclaration=16]="InDeclaration",d[d.InProcessingInstruction=17]="InProcessingInstruction",d[d.BeforeComment=18]="BeforeComment",d[d.CDATASequence=19]="CDATASequence",d[d.InSpecialComment=20]="InSpecialComment",d[d.InCommentLike=21]="InCommentLike",d[d.BeforeSpecialS=22]="BeforeSpecialS",d[d.SpecialStartSequence=23]="SpecialStartSequence",d[d.InSpecialTag=24]="InSpecialTag",d[d.InEntity=25]="InEntity"})(n||(n={}));function a(d){return d===r.Space||d===r.NewLine||d===r.Tab||d===r.FormFeed||d===r.CarriageReturn}function s(d){return d===r.Slash||d===r.Gt||a(d)}function o(d){return d>=r.LowerA&&d<=r.LowerZ||d>=r.UpperA&&d<=r.UpperZ}var u;(function(d){d[d.NoValue=0]="NoValue",d[d.Unquoted=1]="Unquoted",d[d.Single=2]="Single",d[d.Double=3]="Double"})(u=t.QuoteType||(t.QuoteType={}));var c={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},l=function(){function d(f,h){var p=f.xmlMode,b=p===void 0?!1:p,_=f.decodeEntities,E=_===void 0?!0:_,w=this;this.cbs=h,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=b,this.decodeEntities=E,this.entityDecoder=new e.EntityDecoder(b?e.xmlDecodeTree:e.htmlDecodeTree,function(O,A){return w.emitCodePoint(O,A)})}return d.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},d.prototype.write=function(f){this.offset+=this.buffer.length,this.buffer=f,this.parse()},d.prototype.end=function(){this.running&&this.finish()},d.prototype.pause=function(){this.running=!1},d.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},d.prototype.stateText=function(f){f===r.Lt||!this.decodeEntities&&this.fastForwardTo(r.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&f===r.Amp&&this.startEntity()},d.prototype.stateSpecialStartSequence=function(f){var h=this.sequenceIndex===this.currentSequence.length,p=h?s(f):(f|32)===this.currentSequence[this.sequenceIndex];if(!p)this.isSpecial=!1;else if(!h){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(f)},d.prototype.stateInSpecialTag=function(f){if(this.sequenceIndex===this.currentSequence.length){if(f===r.Gt||a(f)){var h=this.index-this.currentSequence.length;if(this.sectionStart<h){var p=this.index;this.index=h,this.cbs.ontext(this.sectionStart,h),this.index=p}this.isSpecial=!1,this.sectionStart=h+2,this.stateInClosingTagName(f);return}this.sequenceIndex=0}(f|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===c.TitleEnd?this.decodeEntities&&f===r.Amp&&this.startEntity():this.fastForwardTo(r.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(f===r.Lt)},d.prototype.stateCDATASequence=function(f){f===c.Cdata[this.sequenceIndex]?++this.sequenceIndex===c.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=c.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(f))},d.prototype.fastForwardTo=function(f){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===f)return!0;return this.index=this.buffer.length+this.offset-1,!1},d.prototype.stateInCommentLike=function(f){f===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):f!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},d.prototype.isTagStartChar=function(f){return this.xmlMode?!s(f):o(f)},d.prototype.startSpecial=function(f,h){this.isSpecial=!0,this.currentSequence=f,this.sequenceIndex=h,this.state=n.SpecialStartSequence},d.prototype.stateBeforeTagName=function(f){if(f===r.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(f===r.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(f)){var h=f|32;this.sectionStart=this.index,!this.xmlMode&&h===c.TitleEnd[2]?this.startSpecial(c.TitleEnd,3):this.state=!this.xmlMode&&h===c.ScriptEnd[2]?n.BeforeSpecialS:n.InTagName}else f===r.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(f))},d.prototype.stateInTagName=function(f){s(f)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(f))},d.prototype.stateBeforeClosingTagName=function(f){a(f)||(f===r.Gt?this.state=n.Text:(this.state=this.isTagStartChar(f)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},d.prototype.stateInClosingTagName=function(f){(f===r.Gt||a(f))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(f))},d.prototype.stateAfterClosingTagName=function(f){(f===r.Gt||this.fastForwardTo(r.Gt))&&(this.state=n.Text,this.sectionStart=this.index+1)},d.prototype.stateBeforeAttributeName=function(f){f===r.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.sectionStart=this.index+1):f===r.Slash?this.state=n.InSelfClosingTag:a(f)||(this.state=n.InAttributeName,this.sectionStart=this.index)},d.prototype.stateInSelfClosingTag=function(f){f===r.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):a(f)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(f))},d.prototype.stateInAttributeName=function(f){(f===r.Eq||s(f))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(f))},d.prototype.stateAfterAttributeName=function(f){f===r.Eq?this.state=n.BeforeAttributeValue:f===r.Slash||f===r.Gt?(this.cbs.onattribend(u.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(f)):a(f)||(this.cbs.onattribend(u.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},d.prototype.stateBeforeAttributeValue=function(f){f===r.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):f===r.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):a(f)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(f))},d.prototype.handleInAttributeValue=function(f,h){f===h||!this.decodeEntities&&this.fastForwardTo(h)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(h===r.DoubleQuote?u.Double:u.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&f===r.Amp&&this.startEntity()},d.prototype.stateInAttributeValueDoubleQuotes=function(f){this.handleInAttributeValue(f,r.DoubleQuote)},d.prototype.stateInAttributeValueSingleQuotes=function(f){this.handleInAttributeValue(f,r.SingleQuote)},d.prototype.stateInAttributeValueNoQuotes=function(f){a(f)||f===r.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(u.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(f)):this.decodeEntities&&f===r.Amp&&this.startEntity()},d.prototype.stateBeforeDeclaration=function(f){f===r.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=f===r.Dash?n.BeforeComment:n.InDeclaration},d.prototype.stateInDeclaration=function(f){(f===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},d.prototype.stateInProcessingInstruction=function(f){(f===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},d.prototype.stateBeforeComment=function(f){f===r.Dash?(this.state=n.InCommentLike,this.currentSequence=c.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},d.prototype.stateInSpecialComment=function(f){(f===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},d.prototype.stateBeforeSpecialS=function(f){var h=f|32;h===c.ScriptEnd[3]?this.startSpecial(c.ScriptEnd,4):h===c.StyleEnd[3]?this.startSpecial(c.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(f))},d.prototype.startEntity=function(){this.baseState=this.state,this.state=n.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?e.DecodingMode.Strict:this.baseState===n.Text||this.baseState===n.InSpecialTag?e.DecodingMode.Legacy:e.DecodingMode.Attribute)},d.prototype.stateInEntity=function(){var f=this.entityDecoder.write(this.buffer,this.index-this.offset);f>=0?(this.state=this.baseState,f===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1},d.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===n.InAttributeValueDq||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},d.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},d.prototype.parse=function(){for(;this.shouldContinue();){var f=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:{this.stateText(f);break}case n.SpecialStartSequence:{this.stateSpecialStartSequence(f);break}case n.InSpecialTag:{this.stateInSpecialTag(f);break}case n.CDATASequence:{this.stateCDATASequence(f);break}case n.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(f);break}case n.InAttributeName:{this.stateInAttributeName(f);break}case n.InCommentLike:{this.stateInCommentLike(f);break}case n.InSpecialComment:{this.stateInSpecialComment(f);break}case n.BeforeAttributeName:{this.stateBeforeAttributeName(f);break}case n.InTagName:{this.stateInTagName(f);break}case n.InClosingTagName:{this.stateInClosingTagName(f);break}case n.BeforeTagName:{this.stateBeforeTagName(f);break}case n.AfterAttributeName:{this.stateAfterAttributeName(f);break}case n.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(f);break}case n.BeforeAttributeValue:{this.stateBeforeAttributeValue(f);break}case n.BeforeClosingTagName:{this.stateBeforeClosingTagName(f);break}case n.AfterClosingTagName:{this.stateAfterClosingTagName(f);break}case n.BeforeSpecialS:{this.stateBeforeSpecialS(f);break}case n.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(f);break}case n.InSelfClosingTag:{this.stateInSelfClosingTag(f);break}case n.InDeclaration:{this.stateInDeclaration(f);break}case n.BeforeDeclaration:{this.stateBeforeDeclaration(f);break}case n.BeforeComment:{this.stateBeforeComment(f);break}case n.InProcessingInstruction:{this.stateInProcessingInstruction(f);break}case n.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()},d.prototype.finish=function(){this.state===n.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()},d.prototype.handleTrailingData=function(){var f=this.buffer.length+this.offset;this.sectionStart>=f||(this.state===n.InCommentLike?this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,f,0):this.cbs.oncomment(this.sectionStart,f,0):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,f))},d.prototype.emitCodePoint=function(f,h){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+h,this.index=this.sectionStart-1,this.cbs.onattribentity(f)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+h,this.index=this.sectionStart-1,this.cbs.ontextentity(f,this.sectionStart))},d}();t.default=l})(lR);var Hue=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),kue=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Que=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Hue(e,t,r);return kue(e,t),e};Object.defineProperty(jp,"__esModule",{value:!0});jp.Parser=void 0;var y1=Que(lR),n4=Wo,Yl=new Set(["input","option","optgroup","select","button","datalist","textarea"]),sr=new Set(["p"]),i4=new Set(["thead","tbody"]),a4=new Set(["dd","dt"]),s4=new Set(["rt","rp"]),Gue=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",sr],["h1",sr],["h2",sr],["h3",sr],["h4",sr],["h5",sr],["h6",sr],["select",Yl],["input",Yl],["output",Yl],["button",Yl],["datalist",Yl],["textarea",Yl],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",a4],["dt",a4],["address",sr],["article",sr],["aside",sr],["blockquote",sr],["details",sr],["div",sr],["dl",sr],["fieldset",sr],["figcaption",sr],["figure",sr],["footer",sr],["form",sr],["header",sr],["hr",sr],["main",sr],["nav",sr],["ol",sr],["pre",sr],["section",sr],["table",sr],["ul",sr],["rt",s4],["rp",s4],["tbody",i4],["tfoot",i4]]),zue=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),o4=new Set(["math","svg"]),u4=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),Wue=/\s|\//,Xue=function(){function t(e,r){r===void 0&&(r={});var n,a,s,o,u;this.options=r,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(n=r.lowerCaseTags)!==null&&n!==void 0?n:this.htmlMode,this.lowerCaseAttributeNames=(a=r.lowerCaseAttributeNames)!==null&&a!==void 0?a:this.htmlMode,this.tokenizer=new((s=r.Tokenizer)!==null&&s!==void 0?s:y1.default)(this.options,this),this.foreignContext=[!this.htmlMode],(u=(o=this.cbs).onparserinit)===null||u===void 0||u.call(o,this)}return t.prototype.ontext=function(e,r){var n,a,s=this.getSlice(e,r);this.endIndex=r-1,(a=(n=this.cbs).ontext)===null||a===void 0||a.call(n,s),this.startIndex=r},t.prototype.ontextentity=function(e,r){var n,a;this.endIndex=r-1,(a=(n=this.cbs).ontext)===null||a===void 0||a.call(n,(0,n4.fromCodePoint)(e)),this.startIndex=r},t.prototype.isVoidElement=function(e){return this.htmlMode&&zue.has(e)},t.prototype.onopentagname=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)},t.prototype.emitOpenTag=function(e){var r,n,a,s;this.openTagStart=this.startIndex,this.tagname=e;var o=this.htmlMode&&Gue.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[0]);){var u=this.stack.shift();(n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,u,!0)}this.isVoidElement(e)||(this.stack.unshift(e),this.htmlMode&&(o4.has(e)?this.foreignContext.unshift(!0):u4.has(e)&&this.foreignContext.unshift(!1))),(s=(a=this.cbs).onopentagname)===null||s===void 0||s.call(a,e),this.cbs.onopentag&&(this.attribs={})},t.prototype.endOpenTag=function(e){var r,n;this.startIndex=this.openTagStart,this.attribs&&((n=(r=this.cbs).onopentag)===null||n===void 0||n.call(r,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},t.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},t.prototype.onclosetag=function(e,r){var n,a,s,o,u,c,l,d;this.endIndex=r;var f=this.getSlice(e,r);if(this.lowerCaseTagNames&&(f=f.toLowerCase()),this.htmlMode&&(o4.has(f)||u4.has(f))&&this.foreignContext.shift(),this.isVoidElement(f))this.htmlMode&&f==="br"&&((o=(s=this.cbs).onopentagname)===null||o===void 0||o.call(s,"br"),(c=(u=this.cbs).onopentag)===null||c===void 0||c.call(u,"br",{},!0),(d=(l=this.cbs).onclosetag)===null||d===void 0||d.call(l,"br",!1));else{var h=this.stack.indexOf(f);if(h!==-1)for(var p=0;p<=h;p++){var b=this.stack.shift();(a=(n=this.cbs).onclosetag)===null||a===void 0||a.call(n,b,p!==h)}else this.htmlMode&&f==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=r+1},t.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},t.prototype.closeCurrentTag=function(e){var r,n,a=this.tagname;this.endOpenTag(e),this.stack[0]===a&&((n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,a,!e),this.stack.shift())},t.prototype.onattribname=function(e,r){this.startIndex=e;var n=this.getSlice(e,r);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n},t.prototype.onattribdata=function(e,r){this.attribvalue+=this.getSlice(e,r)},t.prototype.onattribentity=function(e){this.attribvalue+=(0,n4.fromCodePoint)(e)},t.prototype.onattribend=function(e,r){var n,a;this.endIndex=r,(a=(n=this.cbs).onattribute)===null||a===void 0||a.call(n,this.attribname,this.attribvalue,e===y1.QuoteType.Double?'"':e===y1.QuoteType.Single?"'":e===y1.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},t.prototype.getInstructionName=function(e){var r=e.search(Wue),n=r<0?e:e.substr(0,r);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},t.prototype.ondeclaration=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var a=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(a),"!".concat(n))}this.startIndex=r+1},t.prototype.onprocessinginstruction=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var a=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(a),"?".concat(n))}this.startIndex=r+1},t.prototype.oncomment=function(e,r,n){var a,s,o,u;this.endIndex=r,(s=(a=this.cbs).oncomment)===null||s===void 0||s.call(a,this.getSlice(e,r-n)),(u=(o=this.cbs).oncommentend)===null||u===void 0||u.call(o),this.startIndex=r+1},t.prototype.oncdata=function(e,r,n){var a,s,o,u,c,l,d,f,h,p;this.endIndex=r;var b=this.getSlice(e,r-n);!this.htmlMode||this.options.recognizeCDATA?((s=(a=this.cbs).oncdatastart)===null||s===void 0||s.call(a),(u=(o=this.cbs).ontext)===null||u===void 0||u.call(o,b),(l=(c=this.cbs).oncdataend)===null||l===void 0||l.call(c)):((f=(d=this.cbs).oncomment)===null||f===void 0||f.call(d,"[CDATA[".concat(b,"]]")),(p=(h=this.cbs).oncommentend)===null||p===void 0||p.call(h)),this.startIndex=r+1},t.prototype.onend=function(){var e,r;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=0;n<this.stack.length;n++)this.cbs.onclosetag(this.stack[n],!0)}(r=(e=this.cbs).onend)===null||r===void 0||r.call(e)},t.prototype.reset=function(){var e,r,n,a;(r=(e=this.cbs).onreset)===null||r===void 0||r.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(a=(n=this.cbs).onparserinit)===null||a===void 0||a.call(n,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1},t.prototype.parseComplete=function(e){this.reset(),this.end(e)},t.prototype.getSlice=function(e,r){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(e-this.bufferOffset,r-this.bufferOffset);r-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,r-this.bufferOffset);return n},t.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},t.prototype.write=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)},t.prototype.end=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()},t.prototype.pause=function(){this.tokenizer.pause()},t.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},t.prototype.parseChunk=function(e){this.write(e)},t.prototype.done=function(e){this.end(e)},t}();jp.Parser=Xue;(function(t){var e=g&&g.__createBinding||(Object.create?function(O,A,T,I){I===void 0&&(I=T);var D=Object.getOwnPropertyDescriptor(A,T);(!D||("get"in D?!A.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return A[T]}}),Object.defineProperty(O,I,D)}:function(O,A,T,I){I===void 0&&(I=T),O[I]=A[T]}),r=g&&g.__setModuleDefault||(Object.create?function(O,A){Object.defineProperty(O,"default",{enumerable:!0,value:A})}:function(O,A){O.default=A}),n=g&&g.__importStar||function(O){if(O&&O.__esModule)return O;var A={};if(O!=null)for(var T in O)T!=="default"&&Object.prototype.hasOwnProperty.call(O,T)&&e(A,O,T);return r(A,O),A},a=g&&g.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.Tokenizer=t.createDomStream=t.createDocumentStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var s=jp,o=jp;Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return o.Parser}});var u=na,c=na;Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function l(O,A){var T=new u.DomHandler(void 0,A);return new s.Parser(T,A).end(O),T.root}t.parseDocument=l;function d(O,A){return l(O,A).children}t.parseDOM=d;function f(O,A,T){var I=new u.DomHandler(function(D){return O(D,I.root)},A,T);return new s.Parser(I,A)}t.createDocumentStream=f;function h(O,A,T){var I=new u.DomHandler(O,A,T);return new s.Parser(I,A)}t.createDomStream=h;var p=lR;Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return a(p).default}}),t.ElementType=n(oc);var b=Vs,_=Vs;Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return _.getFeed}});var E={xmlMode:!0};function w(O,A){return A===void 0&&(A=E),(0,b.getFeed)(d(O,A))}t.parseFeed=w,t.DomUtils=n(Vs)})(HL);Object.defineProperty(Cv,"__esModule",{value:!0});Cv.ActorRdfParseHtml=void 0;const Kue=El,Jue=HL,Yue=Xt;let Zue=class extends Kue.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){const a=new Yue.Readable({objectMode:!0});return a._read=async()=>{var d;a._read=()=>{};let s=1;function o(f){a.emit("data",f)}function u(f){a.emit("error",f)}function c(){--s===0&&a.push(null)}const l={baseIRI:((d=e.metadata)==null?void 0:d.baseIRI)??"",context:n,emit:o,end:c,error:u,headers:e.headers};Promise.all(this.busRdfParseHtml.publish(l)).then(async f=>{s+=f.length;const h=[];for(const b of f){const{htmlParseListener:_}=await b.actor.run(l);h.push(_)}const p=new Jue.Parser({onclosetag(){try{for(const b of h)b.onTagClose()}catch(b){u(b)}},onend(){try{for(const b of h)b.onEnd()}catch(b){u(b)}c()},onopentag(b,_){try{for(const E of h)E.onTagOpen(b,_)}catch(E){u(E)}},ontext(b){try{for(const _ of h)_.onText(b)}catch(_){u(_)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:!1});e.data.on("error",u).on("data",b=>p.write(b.toString())).on("end",()=>p.end())}).catch(u)},{data:a}}};Cv.ActorRdfParseHtml=Zue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Cv,t)})(VL);var kL={},Mv={},Fv={},Lv={};Object.defineProperty(Lv,"__esModule",{value:!0});Lv.ActorRdfParseHtml=void 0;const ece=Je;class tce extends ece.Actor{constructor(e){super(e)}}Lv.ActorRdfParseHtml=tce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Lv,t)})(Fv);var QL={},GL={};Object.defineProperty(GL,"__esModule",{value:!0});var $0={};Object.defineProperty($0,"__esModule",{value:!0});$0.ItemPropertyHandlerContent=void 0;class rce{canHandle(e,r){return"content"in r}getObject(e,r,n){return r.createLiteral(e.content,n)}}$0.ItemPropertyHandlerContent=rce;var U0={},Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});Rl.Util=void 0;const nce=ft,c4=Oa;let q0=class Xh{constructor(e,r){this.dataFactory=e||new nce.DataFactory,this.baseIRI=r||""}static isValidIri(e){return Xh.IRI_REGEX.test(e)}createVocabIris(e,r,n){return e.split(/\s+/u).filter(a=>!!a).map(a=>{if(!Xh.isValidIri(a)){if(!n)return;a=`${r.vocab||`${this.baseIRI}#`}${a}`}return this.dataFactory.namedNode(a)}).filter(a=>!!a)}getVocabularyExpansionType(e,r,n){const a=e.split(/\s+/u);if(a.includes("subPropertyOf")||a.includes("equivalentProperty"))return[this.dataFactory.namedNode(`${Xh.RDF}type`)];if(r.vocab&&r.vocab in n&&n[r.vocab].properties){let s=[];for(const[o,u]of Object.entries(n[r.vocab].properties))a.includes(o)&&(s=[...Object.values(u).map(c=>this.dataFactory.namedNode(c))]);return s}return[]}createSubject(e){if(!Xh.isValidIri(e))try{e=(0,c4.resolve)(e,this.baseIRI)}catch{return}return this.dataFactory.namedNode(e)}createLiteral(e,r){return this.dataFactory.literal(e,r.language)}deriveVocab(e,r){let n;for(const a in r)if(e.startsWith(a)){n=a,n.endsWith("/")||(n+="#");break}if(!n){const a=e.indexOf("#");a>0?n=e.slice(0,a+1):n=(0,c4.resolve)(".",e)}return n}};Rl.Util=q0;q0.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";q0.XSD="http://www.w3.org/2001/XMLSchema#";q0.RDFA="http://www.w3.org/ns/rdfa#";q0.IRI_REGEX=/^([A-Za-z][\d+-.A-Za-z]*|_):[^ "<>[\\\]`{|}]*$/u;Object.defineProperty(U0,"__esModule",{value:!0});U0.ItemPropertyHandlerNumber=void 0;const l4=Rl;class ice{constructor(e,r){this.tagName=e,this.attributeName=r}canHandle(e,r){return this.tagName===e&&this.attributeName in r}getObject(e,r,n){const a=e[this.attributeName];let s;return!Number.isNaN(Number.parseInt(a,10))&&!a.includes(".")?s=`${l4.Util.XSD}integer`:Number.isNaN(Number.parseFloat(a))||(s=`${l4.Util.XSD}double`),r.dataFactory.literal(a,s&&r.dataFactory.namedNode(s))}}U0.ItemPropertyHandlerNumber=ice;var V0={};Object.defineProperty(V0,"__esModule",{value:!0});V0.ItemPropertyHandlerTime=void 0;const ace=Rl;class Bv{canHandle(e,r){return e==="time"&&"datetime"in r}getObject(e,r,n){const a=e.datetime;let s;for(const o of Bv.TIME_REGEXES)if(o.regex.test(a)){s=r.dataFactory.namedNode(ace.Util.XSD+o.type);break}return r.dataFactory.literal(a,s)}}V0.ItemPropertyHandlerTime=Bv;Bv.TIME_REGEXES=[{regex:/^-?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d)?S)?)?$/u,type:"duration"},{regex:/^\d+-\d\d-\d\dT\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"dateTime"},{regex:/^\d+-\d\d-\d\dZ?$/u,type:"date"},{regex:/^\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"time"},{regex:/^\d+-\d\d$/u,type:"gYearMonth"},{regex:/^\d+$/u,type:"gYear"}];var H0={};Object.defineProperty(H0,"__esModule",{value:!0});H0.ItemPropertyHandlerUrl=void 0;const sce=Oa;class oce{constructor(e,r){this.tagName=e,this.attributeName=r}canHandle(e,r){return this.tagName===e&&this.attributeName in r}getObject(e,r,n){return r.dataFactory.namedNode((0,sce.resolve)(e[this.attributeName],r.baseIRI))}}H0.ItemPropertyHandlerUrl=oce;var zL={};Object.defineProperty(zL,"__esModule",{value:!0});var WL={};Object.defineProperty(WL,"__esModule",{value:!0});var XL={};Object.defineProperty(XL,"__esModule",{value:!0});var $v={},KL={},Cp={},dR={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var e=Wo,r;(function(h){h[h.Tab=9]="Tab",h[h.NewLine=10]="NewLine",h[h.FormFeed=12]="FormFeed",h[h.CarriageReturn=13]="CarriageReturn",h[h.Space=32]="Space",h[h.ExclamationMark=33]="ExclamationMark",h[h.Number=35]="Number",h[h.Amp=38]="Amp",h[h.SingleQuote=39]="SingleQuote",h[h.DoubleQuote=34]="DoubleQuote",h[h.Dash=45]="Dash",h[h.Slash=47]="Slash",h[h.Zero=48]="Zero",h[h.Nine=57]="Nine",h[h.Semi=59]="Semi",h[h.Lt=60]="Lt",h[h.Eq=61]="Eq",h[h.Gt=62]="Gt",h[h.Questionmark=63]="Questionmark",h[h.UpperA=65]="UpperA",h[h.LowerA=97]="LowerA",h[h.UpperF=70]="UpperF",h[h.LowerF=102]="LowerF",h[h.UpperZ=90]="UpperZ",h[h.LowerZ=122]="LowerZ",h[h.LowerX=120]="LowerX",h[h.OpeningSquareBracket=91]="OpeningSquareBracket"})(r||(r={}));var n;(function(h){h[h.Text=1]="Text",h[h.BeforeTagName=2]="BeforeTagName",h[h.InTagName=3]="InTagName",h[h.InSelfClosingTag=4]="InSelfClosingTag",h[h.BeforeClosingTagName=5]="BeforeClosingTagName",h[h.InClosingTagName=6]="InClosingTagName",h[h.AfterClosingTagName=7]="AfterClosingTagName",h[h.BeforeAttributeName=8]="BeforeAttributeName",h[h.InAttributeName=9]="InAttributeName",h[h.AfterAttributeName=10]="AfterAttributeName",h[h.BeforeAttributeValue=11]="BeforeAttributeValue",h[h.InAttributeValueDq=12]="InAttributeValueDq",h[h.InAttributeValueSq=13]="InAttributeValueSq",h[h.InAttributeValueNq=14]="InAttributeValueNq",h[h.BeforeDeclaration=15]="BeforeDeclaration",h[h.InDeclaration=16]="InDeclaration",h[h.InProcessingInstruction=17]="InProcessingInstruction",h[h.BeforeComment=18]="BeforeComment",h[h.CDATASequence=19]="CDATASequence",h[h.InSpecialComment=20]="InSpecialComment",h[h.InCommentLike=21]="InCommentLike",h[h.BeforeSpecialS=22]="BeforeSpecialS",h[h.SpecialStartSequence=23]="SpecialStartSequence",h[h.InSpecialTag=24]="InSpecialTag",h[h.BeforeEntity=25]="BeforeEntity",h[h.BeforeNumericEntity=26]="BeforeNumericEntity",h[h.InNamedEntity=27]="InNamedEntity",h[h.InNumericEntity=28]="InNumericEntity",h[h.InHexEntity=29]="InHexEntity"})(n||(n={}));function a(h){return h===r.Space||h===r.NewLine||h===r.Tab||h===r.FormFeed||h===r.CarriageReturn}function s(h){return h===r.Slash||h===r.Gt||a(h)}function o(h){return h>=r.Zero&&h<=r.Nine}function u(h){return h>=r.LowerA&&h<=r.LowerZ||h>=r.UpperA&&h<=r.UpperZ}function c(h){return h>=r.UpperA&&h<=r.UpperF||h>=r.LowerA&&h<=r.LowerF}var l;(function(h){h[h.NoValue=0]="NoValue",h[h.Unquoted=1]="Unquoted",h[h.Single=2]="Single",h[h.Double=3]="Double"})(l=t.QuoteType||(t.QuoteType={}));var d={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},f=function(){function h(p,b){var _=p.xmlMode,E=_===void 0?!1:_,w=p.decodeEntities,O=w===void 0?!0:w;this.cbs=b,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=E,this.decodeEntities=O,this.entityTrie=E?e.xmlDecodeTree:e.htmlDecodeTree}return h.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},h.prototype.write=function(p){this.offset+=this.buffer.length,this.buffer=p,this.parse()},h.prototype.end=function(){this.running&&this.finish()},h.prototype.pause=function(){this.running=!1},h.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},h.prototype.getIndex=function(){return this.index},h.prototype.getSectionStart=function(){return this.sectionStart},h.prototype.stateText=function(p){p===r.Lt||!this.decodeEntities&&this.fastForwardTo(r.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&p===r.Amp&&(this.state=n.BeforeEntity)},h.prototype.stateSpecialStartSequence=function(p){var b=this.sequenceIndex===this.currentSequence.length,_=b?s(p):(p|32)===this.currentSequence[this.sequenceIndex];if(!_)this.isSpecial=!1;else if(!b){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(p)},h.prototype.stateInSpecialTag=function(p){if(this.sequenceIndex===this.currentSequence.length){if(p===r.Gt||a(p)){var b=this.index-this.currentSequence.length;if(this.sectionStart<b){var _=this.index;this.index=b,this.cbs.ontext(this.sectionStart,b),this.index=_}this.isSpecial=!1,this.sectionStart=b+2,this.stateInClosingTagName(p);return}this.sequenceIndex=0}(p|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===d.TitleEnd?this.decodeEntities&&p===r.Amp&&(this.state=n.BeforeEntity):this.fastForwardTo(r.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(p===r.Lt)},h.prototype.stateCDATASequence=function(p){p===d.Cdata[this.sequenceIndex]?++this.sequenceIndex===d.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=d.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(p))},h.prototype.fastForwardTo=function(p){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===p)return!0;return this.index=this.buffer.length+this.offset-1,!1},h.prototype.stateInCommentLike=function(p){p===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):p!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},h.prototype.isTagStartChar=function(p){return this.xmlMode?!s(p):u(p)},h.prototype.startSpecial=function(p,b){this.isSpecial=!0,this.currentSequence=p,this.sequenceIndex=b,this.state=n.SpecialStartSequence},h.prototype.stateBeforeTagName=function(p){if(p===r.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(p===r.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(p)){var b=p|32;this.sectionStart=this.index,!this.xmlMode&&b===d.TitleEnd[2]?this.startSpecial(d.TitleEnd,3):this.state=!this.xmlMode&&b===d.ScriptEnd[2]?n.BeforeSpecialS:n.InTagName}else p===r.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(p))},h.prototype.stateInTagName=function(p){s(p)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p))},h.prototype.stateBeforeClosingTagName=function(p){a(p)||(p===r.Gt?this.state=n.Text:(this.state=this.isTagStartChar(p)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},h.prototype.stateInClosingTagName=function(p){(p===r.Gt||a(p))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(p))},h.prototype.stateAfterClosingTagName=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeAttributeName=function(p){p===r.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.baseState=this.state,this.sectionStart=this.index+1):p===r.Slash?this.state=n.InSelfClosingTag:a(p)||(this.state=n.InAttributeName,this.sectionStart=this.index)},h.prototype.stateInSelfClosingTag=function(p){p===r.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):a(p)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p))},h.prototype.stateInAttributeName=function(p){(p===r.Eq||s(p))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(p))},h.prototype.stateAfterAttributeName=function(p){p===r.Eq?this.state=n.BeforeAttributeValue:p===r.Slash||p===r.Gt?(this.cbs.onattribend(l.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p)):a(p)||(this.cbs.onattribend(l.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},h.prototype.stateBeforeAttributeValue=function(p){p===r.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):p===r.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):a(p)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(p))},h.prototype.handleInAttributeValue=function(p,b){p===b||!this.decodeEntities&&this.fastForwardTo(b)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(b===r.DoubleQuote?l.Double:l.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&p===r.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},h.prototype.stateInAttributeValueDoubleQuotes=function(p){this.handleInAttributeValue(p,r.DoubleQuote)},h.prototype.stateInAttributeValueSingleQuotes=function(p){this.handleInAttributeValue(p,r.SingleQuote)},h.prototype.stateInAttributeValueNoQuotes=function(p){a(p)||p===r.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(l.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p)):this.decodeEntities&&p===r.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},h.prototype.stateBeforeDeclaration=function(p){p===r.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=p===r.Dash?n.BeforeComment:n.InDeclaration},h.prototype.stateInDeclaration=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},h.prototype.stateInProcessingInstruction=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeComment=function(p){p===r.Dash?(this.state=n.InCommentLike,this.currentSequence=d.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},h.prototype.stateInSpecialComment=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeSpecialS=function(p){var b=p|32;b===d.ScriptEnd[3]?this.startSpecial(d.ScriptEnd,4):b===d.StyleEnd[3]?this.startSpecial(d.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(p))},h.prototype.stateBeforeEntity=function(p){this.entityExcess=1,this.entityResult=0,p===r.Number?this.state=n.BeforeNumericEntity:p===r.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=n.InNamedEntity,this.stateInNamedEntity(p))},h.prototype.stateInNamedEntity=function(p){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,p),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var b=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(b){var _=(b>>14)-1;if(!this.allowLegacyEntity()&&p!==r.Semi)this.trieIndex+=_;else{var E=this.index-this.entityExcess+1;E>this.sectionStart&&this.emitPartial(this.sectionStart,E),this.entityResult=this.trieIndex,this.trieIndex+=_,this.entityExcess=0,this.sectionStart=this.index+1,_===0&&this.emitNamedEntity()}}},h.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var p=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(p){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},h.prototype.stateBeforeNumericEntity=function(p){(p|32)===r.LowerX?(this.entityExcess++,this.state=n.InHexEntity):(this.state=n.InNumericEntity,this.stateInNumericEntity(p))},h.prototype.emitNumericEntity=function(p){var b=this.index-this.entityExcess-1,_=b+2+ +(this.state===n.InHexEntity);_!==this.index&&(b>this.sectionStart&&this.emitPartial(this.sectionStart,b),this.sectionStart=this.index+Number(p),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},h.prototype.stateInNumericEntity=function(p){p===r.Semi?this.emitNumericEntity(!0):o(p)?(this.entityResult=this.entityResult*10+(p-r.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},h.prototype.stateInHexEntity=function(p){p===r.Semi?this.emitNumericEntity(!0):o(p)?(this.entityResult=this.entityResult*16+(p-r.Zero),this.entityExcess++):c(p)?(this.entityResult=this.entityResult*16+((p|32)-r.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},h.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===n.Text||this.baseState===n.InSpecialTag)},h.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===n.InAttributeValueDq||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},h.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},h.prototype.parse=function(){for(;this.shouldContinue();){var p=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:{this.stateText(p);break}case n.SpecialStartSequence:{this.stateSpecialStartSequence(p);break}case n.InSpecialTag:{this.stateInSpecialTag(p);break}case n.CDATASequence:{this.stateCDATASequence(p);break}case n.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(p);break}case n.InAttributeName:{this.stateInAttributeName(p);break}case n.InCommentLike:{this.stateInCommentLike(p);break}case n.InSpecialComment:{this.stateInSpecialComment(p);break}case n.BeforeAttributeName:{this.stateBeforeAttributeName(p);break}case n.InTagName:{this.stateInTagName(p);break}case n.InClosingTagName:{this.stateInClosingTagName(p);break}case n.BeforeTagName:{this.stateBeforeTagName(p);break}case n.AfterAttributeName:{this.stateAfterAttributeName(p);break}case n.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(p);break}case n.BeforeAttributeValue:{this.stateBeforeAttributeValue(p);break}case n.BeforeClosingTagName:{this.stateBeforeClosingTagName(p);break}case n.AfterClosingTagName:{this.stateAfterClosingTagName(p);break}case n.BeforeSpecialS:{this.stateBeforeSpecialS(p);break}case n.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(p);break}case n.InSelfClosingTag:{this.stateInSelfClosingTag(p);break}case n.InDeclaration:{this.stateInDeclaration(p);break}case n.BeforeDeclaration:{this.stateBeforeDeclaration(p);break}case n.BeforeComment:{this.stateBeforeComment(p);break}case n.InProcessingInstruction:{this.stateInProcessingInstruction(p);break}case n.InNamedEntity:{this.stateInNamedEntity(p);break}case n.BeforeEntity:{this.stateBeforeEntity(p);break}case n.InHexEntity:{this.stateInHexEntity(p);break}case n.InNumericEntity:{this.stateInNumericEntity(p);break}default:this.stateBeforeNumericEntity(p)}this.index++}this.cleanup()},h.prototype.finish=function(){this.state===n.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},h.prototype.handleTrailingData=function(){var p=this.buffer.length+this.offset;this.state===n.InCommentLike?this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,p,0):this.cbs.oncomment(this.sectionStart,p,0):this.state===n.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,p)},h.prototype.emitPartial=function(p,b){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribdata(p,b):this.cbs.ontext(p,b)},h.prototype.emitCodePoint=function(p){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribentity(p):this.cbs.ontextentity(p)},h}();t.default=f})(dR);var uce=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cce=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lce=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&uce(e,t,r);return cce(e,t),e};Object.defineProperty(Cp,"__esModule",{value:!0});Cp.Parser=void 0;var b1=lce(dR),d4=Wo,Zl=new Set(["input","option","optgroup","select","button","datalist","textarea"]),or=new Set(["p"]),f4=new Set(["thead","tbody"]),h4=new Set(["dd","dt"]),p4=new Set(["rt","rp"]),dce=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",or],["h1",or],["h2",or],["h3",or],["h4",or],["h5",or],["h6",or],["select",Zl],["input",Zl],["output",Zl],["button",Zl],["datalist",Zl],["textarea",Zl],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",h4],["dt",h4],["address",or],["article",or],["aside",or],["blockquote",or],["details",or],["div",or],["dl",or],["fieldset",or],["figcaption",or],["figure",or],["footer",or],["form",or],["header",or],["hr",or],["main",or],["nav",or],["ol",or],["pre",or],["section",or],["table",or],["ul",or],["rt",p4],["rp",p4],["tbody",f4],["tfoot",f4]]),fce=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),y4=new Set(["math","svg"]),b4=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),hce=/\s|\//,pce=function(){function t(e,r){r===void 0&&(r={});var n,a,s,o,u;this.options=r,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=(n=r.lowerCaseTags)!==null&&n!==void 0?n:!r.xmlMode,this.lowerCaseAttributeNames=(a=r.lowerCaseAttributeNames)!==null&&a!==void 0?a:!r.xmlMode,this.tokenizer=new((s=r.Tokenizer)!==null&&s!==void 0?s:b1.default)(this.options,this),(u=(o=this.cbs).onparserinit)===null||u===void 0||u.call(o,this)}return t.prototype.ontext=function(e,r){var n,a,s=this.getSlice(e,r);this.endIndex=r-1,(a=(n=this.cbs).ontext)===null||a===void 0||a.call(n,s),this.startIndex=r},t.prototype.ontextentity=function(e){var r,n,a=this.tokenizer.getSectionStart();this.endIndex=a-1,(n=(r=this.cbs).ontext)===null||n===void 0||n.call(r,(0,d4.fromCodePoint)(e)),this.startIndex=a},t.prototype.isVoidElement=function(e){return!this.options.xmlMode&&fce.has(e)},t.prototype.onopentagname=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)},t.prototype.emitOpenTag=function(e){var r,n,a,s;this.openTagStart=this.startIndex,this.tagname=e;var o=!this.options.xmlMode&&dce.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[this.stack.length-1]);){var u=this.stack.pop();(n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,u,!0)}this.isVoidElement(e)||(this.stack.push(e),y4.has(e)?this.foreignContext.push(!0):b4.has(e)&&this.foreignContext.push(!1)),(s=(a=this.cbs).onopentagname)===null||s===void 0||s.call(a,e),this.cbs.onopentag&&(this.attribs={})},t.prototype.endOpenTag=function(e){var r,n;this.startIndex=this.openTagStart,this.attribs&&((n=(r=this.cbs).onopentag)===null||n===void 0||n.call(r,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},t.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},t.prototype.onclosetag=function(e,r){var n,a,s,o,u,c;this.endIndex=r;var l=this.getSlice(e,r);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(y4.has(l)||b4.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))!this.options.xmlMode&&l==="br"&&((a=(n=this.cbs).onopentagname)===null||a===void 0||a.call(n,"br"),(o=(s=this.cbs).onopentag)===null||o===void 0||o.call(s,"br",{},!0),(c=(u=this.cbs).onclosetag)===null||c===void 0||c.call(u,"br",!1));else{var d=this.stack.lastIndexOf(l);if(d!==-1)if(this.cbs.onclosetag)for(var f=this.stack.length-d;f--;)this.cbs.onclosetag(this.stack.pop(),f!==0);else this.stack.length=d;else!this.options.xmlMode&&l==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=r+1},t.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},t.prototype.closeCurrentTag=function(e){var r,n,a=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===a&&((n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,a,!e),this.stack.pop())},t.prototype.onattribname=function(e,r){this.startIndex=e;var n=this.getSlice(e,r);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n},t.prototype.onattribdata=function(e,r){this.attribvalue+=this.getSlice(e,r)},t.prototype.onattribentity=function(e){this.attribvalue+=(0,d4.fromCodePoint)(e)},t.prototype.onattribend=function(e,r){var n,a;this.endIndex=r,(a=(n=this.cbs).onattribute)===null||a===void 0||a.call(n,this.attribname,this.attribvalue,e===b1.QuoteType.Double?'"':e===b1.QuoteType.Single?"'":e===b1.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},t.prototype.getInstructionName=function(e){var r=e.search(hce),n=r<0?e:e.substr(0,r);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},t.prototype.ondeclaration=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var a=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(a),"!".concat(n))}this.startIndex=r+1},t.prototype.onprocessinginstruction=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var a=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(a),"?".concat(n))}this.startIndex=r+1},t.prototype.oncomment=function(e,r,n){var a,s,o,u;this.endIndex=r,(s=(a=this.cbs).oncomment)===null||s===void 0||s.call(a,this.getSlice(e,r-n)),(u=(o=this.cbs).oncommentend)===null||u===void 0||u.call(o),this.startIndex=r+1},t.prototype.oncdata=function(e,r,n){var a,s,o,u,c,l,d,f,h,p;this.endIndex=r;var b=this.getSlice(e,r-n);this.options.xmlMode||this.options.recognizeCDATA?((s=(a=this.cbs).oncdatastart)===null||s===void 0||s.call(a),(u=(o=this.cbs).ontext)===null||u===void 0||u.call(o,b),(l=(c=this.cbs).oncdataend)===null||l===void 0||l.call(c)):((f=(d=this.cbs).oncomment)===null||f===void 0||f.call(d,"[CDATA[".concat(b,"]]")),(p=(h=this.cbs).oncommentend)===null||p===void 0||p.call(h)),this.startIndex=r+1},t.prototype.onend=function(){var e,r;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n],!0));}(r=(e=this.cbs).onend)===null||r===void 0||r.call(e)},t.prototype.reset=function(){var e,r,n,a;(r=(e=this.cbs).onreset)===null||r===void 0||r.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(a=(n=this.cbs).onparserinit)===null||a===void 0||a.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},t.prototype.parseComplete=function(e){this.reset(),this.end(e)},t.prototype.getSlice=function(e,r){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(e-this.bufferOffset,r-this.bufferOffset);r-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,r-this.bufferOffset);return n},t.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},t.prototype.write=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)},t.prototype.end=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()},t.prototype.pause=function(){this.tokenizer.pause()},t.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},t.prototype.parseChunk=function(e){this.write(e)},t.prototype.done=function(e){this.end(e)},t}();Cp.Parser=pce;(function(t){var e=g&&g.__createBinding||(Object.create?function(w,O,A,T){T===void 0&&(T=A);var I=Object.getOwnPropertyDescriptor(O,A);(!I||("get"in I?!O.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return O[A]}}),Object.defineProperty(w,T,I)}:function(w,O,A,T){T===void 0&&(T=A),w[T]=O[A]}),r=g&&g.__setModuleDefault||(Object.create?function(w,O){Object.defineProperty(w,"default",{enumerable:!0,value:O})}:function(w,O){w.default=O}),n=g&&g.__importStar||function(w){if(w&&w.__esModule)return w;var O={};if(w!=null)for(var A in w)A!=="default"&&Object.prototype.hasOwnProperty.call(w,A)&&e(O,w,A);return r(O,w),O},a=g&&g.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var s=Cp,o=Cp;Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return o.Parser}});var u=na,c=na;Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function l(w,O){var A=new u.DomHandler(void 0,O);return new s.Parser(A,O).end(w),A.root}t.parseDocument=l;function d(w,O){return l(w,O).children}t.parseDOM=d;function f(w,O,A){var T=new u.DomHandler(w,O,A);return new s.Parser(T,O)}t.createDomStream=f;var h=dR;Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return a(h).default}}),t.ElementType=n(oc);var p=Vs,b=Vs;Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return b.getFeed}});var _={xmlMode:!0};function E(w,O){return O===void 0&&(O=_),(0,p.getFeed)(d(w,O))}t.parseFeed=E,t.DomUtils=n(Vs)})(KL);const yce={"http://schema.org/":{properties:{additionalType:{subPropertyOf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}}},"http://microformats.org/profile/hcard":{}};Object.defineProperty($v,"__esModule",{value:!0});$v.MicrodataRdfParser=void 0;const bce=KL,_4=Xt,_ce=$0,g4=U0,gce=V0,Ua=H0,m4=Rl,mce=yce;class Mp extends _4.Transform{constructor(e){super({readableObjectMode:!0}),this.itemScopeStack=[],this.textBufferStack=[],this.isEmittingReferences=!1,this.pendingItemRefsDomain={},this.pendingItemRefsRangeFinalized={},this.pendingItemRefsRangeCollecting={},e=e||{},this.options=e,this.util=new m4.Util(e.dataFactory,e.baseIRI),this.defaultGraph=e.defaultGraph||this.util.dataFactory.defaultGraph(),this.htmlParseListener=e.htmlParseListener,this.vocabRegistry=e.vocabRegistry||mce,this.parser=this.initializeParser(!!e.xmlMode)}import(e){const r=new _4.PassThrough({readableObjectMode:!0});e.on("error",a=>n.emit("error",a)),e.on("data",a=>r.push(a)),e.on("end",()=>r.push(null));const n=r.pipe(new Mp(this.options));return n}_transform(e,r,n){this.parser.write(e.toString()),n()}_flush(e){this.parser.end(),e()}getItemScope(e){let r=this.itemScopeStack.length-(e?2:1);for(;r>0&&!this.itemScopeStack[r];)r--;return this.itemScopeStack[r]}getDepth(){return this.itemScopeStack.length}onTagOpen(e,r){if(!this.isEmittingReferences){if("id"in r){const a=r.id;this.pendingItemRefsRangeCollecting[a]={events:[],counter:0,ids:[]}}for(const a of Object.values(this.pendingItemRefsRangeCollecting))a.counter++,a.events.push({type:"open",name:e,attributes:r})}this.textBufferStack.push(void 0);let n;if("itemscope"in r){let a;if(this.emittingReferencesItemScopeIdGenerator)a=this.emittingReferencesItemScopeIdGenerator();else{a="itemid"in r&&this.util.createSubject(r.itemid)||this.util.dataFactory.blankNode();for(const o of Object.values(this.pendingItemRefsRangeCollecting))o.ids.push(a)}n={subject:a},this.isEmittingReferences&&(n.blockEmission=!0);const s=this.getItemScope();s&&s.vocab&&(n.vocab=s.vocab),this.itemScopeStack.push(n)}else n=this.getItemScope(),this.itemScopeStack.push(void 0);if(n){if("itemtype"in r)for(const a of this.util.createVocabIris(r.itemtype,n,!1))n.vocab||(n.vocab=this.util.deriveVocab(a.value,this.vocabRegistry)),n.blockEmission||this.emitTriple(n.subject,this.util.dataFactory.namedNode(`${m4.Util.RDF}type`),a);if("lang"in r&&(n.language=r.lang),"xml:lang"in r&&(n.language=r["xml:lang"]),"itemscope"in r&&!this.isEmittingReferences&&"itemref"in r)for(const a of r.itemref.split(/\s+/u))a in this.pendingItemRefsDomain||(this.pendingItemRefsDomain[a]=[]),this.pendingItemRefsDomain[a].push(n),this.tryToEmitReferences(a,n)}"itemprop"in r&&this.handleItemProperties(r.itemprop,!1,n,e,r),"itemprop-reverse"in r&&this.handleItemProperties(r["itemprop-reverse"],!0,n,e,r)}onText(e){if(!this.isEmittingReferences)for(const r of Object.values(this.pendingItemRefsRangeCollecting))r.events.push({type:"text",data:e});for(const r of this.textBufferStack)r&&r.push(e)}onTagClose(){if(!this.isEmittingReferences)for(const[r,n]of Object.entries(this.pendingItemRefsRangeCollecting))n.counter--,n.events.push({type:"close"}),n.counter===0&&(this.pendingItemRefsRangeFinalized[r]=n,delete this.pendingItemRefsRangeCollecting[r],this.tryToEmitReferences(r));const e=this.getItemScope(!0);if(e){const r=this.getDepth();if(e.predicates&&r in e.predicates)for(const[n,a]of Object.entries(e.predicates[r])){const s=this.util.createLiteral(this.textBufferStack[r].join(""),e);this.emitPredicateTriples(e,a,s,n==="reverse"),delete e.predicates[r][n]}}this.itemScopeStack.pop(),this.textBufferStack.pop()}onEnd(){}initializeParser(e){return new bce.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(r){this.emit("error",r)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(r){this.emit("error",r)}},onopentag:(r,n)=>{try{this.onTagOpen(r,n),this.htmlParseListener&&this.htmlParseListener.onTagOpen(r,n)}catch(a){this.emit("error",a)}},ontext:r=>{try{this.onText(r),this.htmlParseListener&&this.htmlParseListener.onText(r)}catch(n){this.emit("error",n)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:e})}handleItemProperties(e,r,n,a,s){const o=this.getItemScope(!0);if(o){const u=this.getDepth(),c=this.util.createVocabIris(e,o,!0);o.predicates||(o.predicates={}),o.predicates[u]||(o.predicates[u]={});const l=r?"reverse":"forward";o.predicates[u][l]=c;for(const d of this.util.getVocabularyExpansionType(e,o,this.vocabRegistry))c.push(d);if(n&&"itemscope"in s)this.emitPredicateTriples(o,c,n.subject,r),delete o.predicates[u][l];else for(const d of Mp.ITEM_PROPERTY_HANDLERS)if(d.canHandle(a,s)){const f=d.getObject(s,this.util,o);this.emitPredicateTriples(o,c,f,r),delete o.predicates[u][l]}o.predicates[u][l]&&(this.textBufferStack[u]=[])}}emitPredicateTriples(e,r,n,a){if(!e.blockEmission)for(const s of r)a?n.termType!=="Literal"&&this.emitTriple(n,s,e.subject):this.emitTriple(e.subject,s,n)}emitTriple(e,r,n){this.push(this.util.dataFactory.quad(e,r,n,this.defaultGraph))}tryToEmitReferences(e,r){const n=this.pendingItemRefsRangeFinalized[e];if(n){let a;if(r){a=[r];const s=this.pendingItemRefsDomain[e].indexOf(r);this.pendingItemRefsDomain[e].splice(s,1)}else a=this.pendingItemRefsDomain[e],delete this.pendingItemRefsDomain[e];if(a){const s=this.itemScopeStack,o=this.textBufferStack;this.isEmittingReferences=!0;for(const u of a){this.itemScopeStack=[u],this.textBufferStack=[void 0];const c=[...n.ids];this.emittingReferencesItemScopeIdGenerator=()=>c.shift();for(const l of n.events)switch(l.type){case"open":this.onTagOpen(l.name,l.attributes);break;case"text":this.onText(l.data);break;case"close":this.onTagClose();break}}this.emittingReferencesItemScopeIdGenerator=void 0,this.itemScopeStack=s,this.textBufferStack=o,this.isEmittingReferences=!1}}}}$v.MicrodataRdfParser=Mp;Mp.ITEM_PROPERTY_HANDLERS=[new _ce.ItemPropertyHandlerContent,new Ua.ItemPropertyHandlerUrl("a","href"),new Ua.ItemPropertyHandlerUrl("area","href"),new Ua.ItemPropertyHandlerUrl("audio","src"),new Ua.ItemPropertyHandlerUrl("embed","src"),new Ua.ItemPropertyHandlerUrl("iframe","src"),new Ua.ItemPropertyHandlerUrl("img","src"),new Ua.ItemPropertyHandlerUrl("link","href"),new Ua.ItemPropertyHandlerUrl("object","data"),new Ua.ItemPropertyHandlerUrl("source","src"),new Ua.ItemPropertyHandlerUrl("track","src"),new Ua.ItemPropertyHandlerUrl("video","src"),new g4.ItemPropertyHandlerNumber("data","value"),new g4.ItemPropertyHandlerNumber("meter","value"),new gce.ItemPropertyHandlerTime];(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(GL,t),r($0,t),r(U0,t),r(V0,t),r(H0,t),r(zL,t),r(WL,t),r(XL,t),r($v,t),r(Rl,t)})(QL);Object.defineProperty(Mv,"__esModule",{value:!0});Mv.ActorRdfParseHtmlMicrodata=void 0;const vce=Fv,wce=QL;class Sce extends vce.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return!0}async run(e){const r=e.headers?e.headers.get("content-type"):null,n=r==null?void 0:r.includes("xml"),a=new wce.MicrodataRdfParser({baseIRI:e.baseIRI,xmlMode:n});a.on("error",e.error),a.on("data",e.emit);const s=a.onEnd;return a.onEnd=()=>{s.call(a),e.end()},{htmlParseListener:a}}}Mv.ActorRdfParseHtmlMicrodata=Sce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Mv,t)})(kL);var JL={},Uv={};Object.defineProperty(Uv,"__esModule",{value:!0});Uv.ActorRdfParseHtmlRdfa=void 0;const Tce=Fv,Ece=Jx;class Oce extends Tce.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return!0}async run(e){const r=e.headers?e.headers.get("content-type"):null,n=(e.headers&&e.headers.get("content-language"))??void 0,a=r&&r.includes("xml")?"xhtml":"html",s=new Ece.RdfaParser({baseIRI:e.baseIRI,profile:a,language:n});s.on("error",e.error),s.on("data",e.emit);const o=s.onEnd;return s.onEnd=()=>{o.call(s),e.end()},{htmlParseListener:s}}}Uv.ActorRdfParseHtmlRdfa=Oce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Uv,t)})(JL);var YL={},qv={},fR={},Vv={},k0={};Object.defineProperty(k0,"__esModule",{value:!0});k0.RdfJsQuadSource=void 0;const Ace=oa,xce=Ht,Rce=ft,ed=an,v4=new Rce.DataFactory;class hi{constructor(e){this.source=e}static nullifyVariables(e,r){return!e||e.termType==="Variable"||!r&&e.termType==="Quad"&&(0,ed.someTermsNested)(e,n=>n.termType==="Variable")?void 0:e}static hasDuplicateVariables(e){const r=(0,ed.filterTermsNested)(e,n=>n.termType==="Variable");return r.length>1&&(0,ed.uniqTerms)(r).length<r.length}match(e,r,n,a){var l;const s=!!((l=this.source.features)!=null&&l.quotedTripleFiltering),o=this.source.match(hi.nullifyVariables(e,s),hi.nullifyVariables(r,s),hi.nullifyVariables(n,s),hi.nullifyVariables(a,s));let u=(0,xce.wrap)(o,{autoStart:!1});const c=v4.quad(e,r,n,a);return!s&&(0,ed.someTerms)(c,d=>d.termType==="Quad")&&(u=u.filter(d=>(0,ed.matchPatternComplete)(d,c))),this.setMetadata(u,e,r,n,a).catch(d=>u.destroy(d)),u}async setMetadata(e,r,n,a,s){var d;const o=!!((d=this.source.features)!=null&&d.quotedTripleFiltering);let u;if(this.source.countQuads)u=await this.source.countQuads(hi.nullifyVariables(r,o),hi.nullifyVariables(n,o),hi.nullifyVariables(a,o),hi.nullifyVariables(s,o));else{let f=0;u=await new Promise((h,p)=>{const b=this.source.match(hi.nullifyVariables(r,o),hi.nullifyVariables(n,o),hi.nullifyVariables(a,o),hi.nullifyVariables(s,o));b.on("error",p),b.on("end",()=>h(f)),b.on("data",()=>f++)})}const c=v4.quad(r,n,a,s),l=!o&&(0,ed.someTerms)(c,f=>f.termType==="Quad")||hi.hasDuplicateVariables(c);e.setProperty("metadata",{state:new Ace.MetadataValidationState,cardinality:{type:l?"estimate":"exact",value:u},canContainUndefs:!1})}}k0.RdfJsQuadSource=hi;Object.defineProperty(Vv,"__esModule",{value:!0});Vv.ActorRdfResolveQuadPatternRdfJsSource=void 0;const _1=xl,Ice=k0;class Pce extends _1.ActorRdfResolveQuadPatternSource{constructor(e){super(e)}async test(e){if(!(0,_1.hasContextSingleSourceOfType)("rdfjsSource",e.context))throw new Error(`${this.name} requires a single source with an rdfjsSource to be present in the context.`);const r=(0,_1.getContextSource)(e.context);if(!r||typeof r=="string"||!("match"in r)&&!r.value.match)throw new Error(`${this.name} received an invalid rdfjsSource.`);return!0}async getSource(e){const r=(0,_1.getContextSource)(e);return new Ice.RdfJsQuadSource("match"in r?r:r.value)}}Vv.ActorRdfResolveQuadPatternRdfJsSource=Pce;var ZL={};Object.defineProperty(ZL,"__esModule",{value:!0});(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Vv,t),r(ZL,t),r(k0,t)})(fR);var Hv={},kv={};Object.defineProperty(kv,"__esModule",{value:!0});kv.ActorRdfResolveHypermedia=void 0;const Dce=Je;class Nce extends Dce.Actor{constructor(e,r){super(e),this.sourceType=r}async test(e){if(e.forceSourceType&&this.sourceType!==e.forceSourceType)throw new Error(`Actor ${this.name} is not able to handle source type ${e.forceSourceType}.`);return this.testMetadata(e)}}kv.ActorRdfResolveHypermedia=Nce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(kv,t)})(Hv);var Qv={},e7={},sh={},oh={},Q0={};Object.defineProperty(Q0,"__esModule",{value:!0});Q0.TermDictionaryNumberRecordFullTerms=void 0;const jce=ft,w4=Zt;class Cce{constructor(e=new jce.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=e}encode(e){const r=(0,w4.termToString)(e);let n=this.dictionary[r];return n===void 0&&(n=this.lastId++,this.dictionary[r]=n,this.reverseDictionary[n]=e),n}encodeOptional(e){const r=(0,w4.termToString)(e);return this.dictionary[r]}decode(e){const r=this.reverseDictionary[e];if(r===void 0)throw new Error(`The value ${e} is not present in this dictionary`);return r}*encodings(){for(const e of Object.keys(this.reverseDictionary))yield Number.parseInt(e,10)}findQuotedTriples(e){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(e){throw new Error("findQuotedTriplesEncoded is not supported")}}Q0.TermDictionaryNumberRecordFullTerms=Cce;var G0={},Bf={},ds={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.arePatternsQuoted=t.quadHasVariables=t.quadToPattern=t.encodeOptionalTerms=t.orderQuadComponents=t.getComponentOrderScore=t.getBestIndex=t.QUAD_TERM_NAMES_INVERSE=void 0;const e=an;t.QUAD_TERM_NAMES_INVERSE=Object.fromEntries(e.QUAD_TERM_NAMES.map((l,d)=>[l,d]));function r(l,d){if(l.length===1||d.every(p=>p!==void 0))return 0;const f=[];for(let p=0;p<e.QUAD_TERM_NAMES.length;p++)d[p]&&f.push(e.QUAD_TERM_NAMES[p]);return l.map((p,b)=>({score:n(p,f),index:b})).sort((p,b)=>b.score-p.score)[0].index}t.getBestIndex=r;function n(l,d){return l.map((f,h)=>d.includes(f)?l.length-h:0).reduce((f,h)=>f+h,0)}t.getComponentOrderScore=n;function a(l,d){return l.map(f=>{const h=t.QUAD_TERM_NAMES_INVERSE[f];return d[h]})}t.orderQuadComponents=a;function s(l,d){const f=l.map(h=>{if(h){if(h.termType==="Quad"&&u(h))return;const p=d.encodeOptional(h);return p===void 0?"none":p}return h});if(!f.includes("none"))return f}t.encodeOptionalTerms=s;function o(l,d,f,h,p){let b=!1;return[[l||void 0,d||void 0,f||void 0,h||void 0].map(E=>{if(E){if(E.termType==="Variable")return;if(E.termType==="Quad"){if(p)return E;b=!0;return}}return E}),b]}t.quadToPattern=o;function u(l){for(const d of e.QUAD_TERM_NAMES){const f=l[d];if(f.termType==="Variable"||f.termType==="Quad"&&u(f))return!0}return!1}t.quadHasVariables=u;function c(l){return l.map(d=>(d==null?void 0:d.termType)==="Quad"&&u(d))}t.arePatternsQuoted=c})(ds);Object.defineProperty(Bf,"__esModule",{value:!0});Bf.RdfStoreIndexNestedMap=void 0;const LT=ds;class Mce{constructor(e){this.features={quotedTripleFiltering:!1},this.dictionary=e.dictionary,this.nestedMap=new Map}set(e,r){const n=this.nestedMap;let a=n.get(e[0]);a||(a=new Map,n.set(e[0],a));let s=a.get(e[1]);s||(s=new Map,a.set(e[1],s));let o=s.get(e[2]);o||(o=new Map,s.set(e[2],o));const u=o.has(e[3]);return u||o.set(e[3],r),!u}remove(e){const r=this.nestedMap,n=r.get(e[0]);if(!n)return!1;const a=n.get(e[1]);if(!a)return!1;const s=a.get(e[2]);if(!s)return!1;const o=s.delete(e[3]);return o&&s.size===0&&(a.delete(e[2]),a.size===0&&(n.delete(e[1]),n.size===0&&r.delete(e[0]))),o}get(e){const r=(0,LT.encodeOptionalTerms)(e,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(e){const r=this.nestedMap.get(e[0]);if(!r)return;const n=r.get(e[1]);if(!n)return;const a=n.get(e[2]);if(a)return a.get(e[3])}*find(e){const r=(0,LT.encodeOptionalTerms)(e,this.dictionary);if(!r)return;const[n,a,s,o]=r,[u,c,l,d]=e;let f,h,p,b,_,E,w;const O=this.nestedMap,A=n!==void 0?O.has(n)?[n]:[]:O.keys();for(const T of A){_=O.get(T),f=u||this.dictionary.decode(T);const I=a!==void 0?_.has(a)?[a]:[]:_.keys();for(const D of I){E=_.get(D),h=c||this.dictionary.decode(D);const U=s!==void 0?E.has(s)?[s]:[]:E.keys();for(const H of U){w=E.get(H),p=l||this.dictionary.decode(H);const N=o!==void 0?w.has(o)?[o]:[]:w.keys();for(const R of N)b=d||this.dictionary.decode(R),yield[f,h,p,b]}}}}*findEncoded(e,r){const[n,a,s,o]=e;let u,c,l;const d=this.nestedMap,f=n!==void 0?d.has(n)?[n]:[]:d.keys();for(const h of f){u=d.get(h);const p=a!==void 0?u.has(a)?[a]:[]:u.keys();for(const b of p){c=u.get(b);const _=s!==void 0?c.has(s)?[s]:[]:c.keys();for(const E of _){l=c.get(E);const w=o!==void 0?l.has(o)?[o]:[]:l.keys();for(const O of w)yield[h,b,E,O]}}}}count(e){let r=0;const n=(0,LT.encodeOptionalTerms)(e,this.dictionary);if(!n)return 0;const a=n[0],s=n[1],o=n[2],u=n[3];let c,l,d;const f=this.nestedMap,h=a!==void 0?f.has(a)?[a]:[]:f.keys();for(const p of h){c=f.get(p);const b=s!==void 0?c.has(s)?[s]:[]:c.keys();for(const _ of b){l=c.get(_);const E=o!==void 0?l.has(o)?[o]:[]:l.keys();for(const w of E)d=l.get(w),u!==void 0?d.has(u)&&r++:r+=d.size}}return r}}Bf.RdfStoreIndexNestedMap=Mce;Object.defineProperty(G0,"__esModule",{value:!0});G0.TermDictionaryQuotedIndexed=void 0;const Fce=ft,BT=Bf,S4=ds;class Va{constructor(e,r=new Fce.DataFactory){this.quotedTriplesDictionary=[],this.features={quotedTriples:!0},this.plainTermDictionary=e;const n={indexCombinations:[],indexConstructor:void 0,dictionary:this,dataFactory:r};this.quotedTriplesReverseDictionaries=[new BT.RdfStoreIndexNestedMap(n),new BT.RdfStoreIndexNestedMap(n),new BT.RdfStoreIndexNestedMap(n)],this.dataFactory=r}encode(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!1):this.plainTermDictionary.encode(e)}encodeQuotedTriple(e,r){if(e.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const n=(0,S4.encodeOptionalTerms)([e.subject,e.predicate,e.object,e.graph],this),a=n&&n.every(c=>c!==void 0)?this.quotedTriplesReverseDictionaries[0].getEncoded(n):void 0;if(a!==void 0||r)return a===void 0?void 0:Va.BITMASK|a;const s=[this.encode(e.subject),this.encode(e.predicate),this.encode(e.object)],o=this.quotedTriplesDictionary.length+1;this.quotedTriplesDictionary.push(s);const u=this.encode(this.dataFactory.defaultGraph());return this.quotedTriplesReverseDictionaries[0].set([s[0],s[1],s[2],u],o),this.quotedTriplesReverseDictionaries[1].set([s[1],s[2],s[0],u],o),this.quotedTriplesReverseDictionaries[2].set([s[2],s[0],s[1],u],o),Va.BITMASK|o}encodeOptional(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!0):this.plainTermDictionary.encodeOptional(e)}decode(e){if(Va.BITMASK&e){const r=(~Va.BITMASK&e)-1;if(r>=this.quotedTriplesDictionary.length)throw new Error(`The value ${e} is not present in the quoted triples range of the dictionary`);const n=this.quotedTriplesDictionary[r];return this.dataFactory.quad(this.decode(n[0]),this.decode(n[1]),this.decode(n[2]))}return this.plainTermDictionary.decode(e)}*encodings(){for(const e of this.plainTermDictionary.encodings())yield e;for(const e of this.quotedTriplesDictionary.keys())yield Va.BITMASK|1+e}*findQuotedTriples(e){for(const r of this.findQuotedTriplesEncoded(e))yield this.decode(r)}*findQuotedTriplesEncoded(e){const[r,n]=(0,S4.quadToPattern)(e.subject,e.predicate,e.object,e.graph,!0);for(const a of this.patternToIterable(r[0]))for(const s of this.patternToIterable(r[1]))for(const o of this.patternToIterable(r[2]))for(const u of this.patternToIterable(r[3]))if(a&&s||!s&&!o){const c=[a,s,o,u];for(const l of this.quotedTriplesReverseDictionaries[0].findEncoded(c,r))yield Va.BITMASK|this.quotedTriplesReverseDictionaries[0].getEncoded(l)}else if(!a&&s){const c=[s,o,a,u];for(const l of this.quotedTriplesReverseDictionaries[1].findEncoded(c,r))yield Va.BITMASK|this.quotedTriplesReverseDictionaries[1].getEncoded(l)}else{const c=[o,a,s,u];for(const l of this.quotedTriplesReverseDictionaries[2].findEncoded(c,r))yield Va.BITMASK|this.quotedTriplesReverseDictionaries[2].getEncoded(l)}}*patternToIterable(e){if((e==null?void 0:e.termType)==="Quad"){yield*this.findQuotedTriplesEncoded(e);return}if(e===void 0){yield void 0;return}const r=this.encodeOptional(e);r!==void 0&&(yield r)}}Va.BITMASK=1<<31;G0.TermDictionaryQuotedIndexed=Va;var z0={};Object.defineProperty(z0,"__esModule",{value:!0});z0.RdfStoreIndexNestedMapQuoted=void 0;const uh=ds,Lce=Bf;class Bce extends Lce.RdfStoreIndexNestedMap{constructor(e){super(e),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(e,r){for(const n of this.dictionary.findQuotedTriplesEncoded(r))e.has(n)&&(yield n)}*find(e){const r=(0,uh.encodeOptionalTerms)(e,this.dictionary);if(!r)return;const[n,a,s,o]=r,[u,c,l,d]=e,[f,h,p,b]=(0,uh.arePatternsQuoted)(e);let _,E,w,O,A,T,I;const D=this.nestedMap,U=u!==void 0?f?this.getQuotedPatternKeys(D,u):D.has(n)?[n]:[]:D.keys();for(const H of U){A=D.get(H),_=!f&&u?u:this.dictionary.decode(H);const N=c!==void 0?h?this.getQuotedPatternKeys(A,c):A.has(a)?[a]:[]:A.keys();for(const R of N){T=A.get(R),E=!h&&c?c:this.dictionary.decode(R);const F=l!==void 0?p?this.getQuotedPatternKeys(T,l):T.has(s)?[s]:[]:T.keys();for(const X of F){I=T.get(X),w=!p&&l?l:this.dictionary.decode(X);const ne=d!==void 0?b?this.getQuotedPatternKeys(I,d):I.has(o)?[o]:[]:I.keys();for(const $ of ne)O=!b&&d?d:this.dictionary.decode($),yield[_,E,w,O]}}}}*findEncoded(e,r){const[n,a,s,o]=e,[u,c,l,d]=r,[f,h,p,b]=(0,uh.arePatternsQuoted)(r);let _,E,w;const O=this.nestedMap,A=u!==void 0?f?this.getQuotedPatternKeys(O,u):O.has(n)?[n]:[]:O.keys();for(const T of A){_=O.get(T);const I=c!==void 0?h?this.getQuotedPatternKeys(_,c):_.has(a)?[a]:[]:_.keys();for(const D of I){E=_.get(D);const U=l!==void 0?p?this.getQuotedPatternKeys(E,l):E.has(s)?[s]:[]:E.keys();for(const H of U){w=E.get(H);const N=d!==void 0?b?this.getQuotedPatternKeys(w,d):w.has(o)?[o]:[]:w.keys();for(const R of N)yield[Number.parseInt(T,10),Number.parseInt(D,10),Number.parseInt(H,10),Number.parseInt(R,10)]}}}}count(e){let r=0;const n=(0,uh.encodeOptionalTerms)(e,this.dictionary);if(!n)return 0;const[a,s,o,u]=n,[c,l,d,f]=e,[h,p,b,_]=(0,uh.arePatternsQuoted)(e);let E,w,O;const A=this.nestedMap,T=c!==void 0?h?this.getQuotedPatternKeys(A,c):A.has(a)?[a]:[]:A.keys();for(const I of T){E=A.get(I);const D=l!==void 0?p?this.getQuotedPatternKeys(E,l):E.has(s)?[s]:[]:E.keys();for(const U of D){w=E.get(U);const H=d!==void 0?b?this.getQuotedPatternKeys(w,d):w.has(o)?[o]:[]:w.keys();for(const N of H)O=w.get(N),f!==void 0?_?r+=[...this.getQuotedPatternKeys(O,f)].length:O.has(u)&&r++:r+=O.size}}return r}}z0.RdfStoreIndexNestedMapQuoted=Bce;var T4;function t7(){if(T4)return oh;T4=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.RdfStore=void 0;const t=Ht,e=ft,r=an,n=n7(),a=Q0,s=G0,o=z0,u=ds;let c=class Kh{constructor(d){this.features={quotedTripleFiltering:!0},this._size=0,this.options=d,this.dataFactory=d.dataFactory,this.dictionary=d.dictionary,this.indexesWrapped=Kh.constructIndexesWrapped(d),this.indexesWrappedComponentOrders=this.indexesWrapped.map(f=>f.componentOrder)}static createDefault(){return new Kh({indexCombinations:Kh.DEFAULT_INDEX_COMBINATIONS,indexConstructor:d=>new o.RdfStoreIndexNestedMapQuoted(d),dictionary:new s.TermDictionaryQuotedIndexed(new a.TermDictionaryNumberRecordFullTerms),dataFactory:new e.DataFactory})}static constructIndexesWrapped(d){const f=[];if(d.indexCombinations.length===0)throw new Error("At least one index combination is required");for(const h of d.indexCombinations){if(!Kh.isCombinationValid(h))throw new Error(`Invalid index combination: ${h}`);f.push({index:d.indexConstructor(d),componentOrder:h,componentOrderInverse:Object.fromEntries(h.map((p,b)=>[p,b]))})}return f}static isCombinationValid(d){for(const f of r.QUAD_TERM_NAMES)if(!d.includes(f))return!1;return d.length===4}get size(){return this._size}addQuad(d){const f=[this.dictionary.encode(d.subject),this.dictionary.encode(d.predicate),this.dictionary.encode(d.object),this.dictionary.encode(d.graph)];let h=!1;for(const p of this.indexesWrapped)h=p.index.set((0,u.orderQuadComponents)(p.componentOrder,f),!0);return h?(this._size++,!0):!1}removeQuad(d){const f=[this.dictionary.encodeOptional(d.subject),this.dictionary.encodeOptional(d.predicate),this.dictionary.encodeOptional(d.object),this.dictionary.encodeOptional(d.graph)];if(f.includes(void 0))return!1;let h=!1;for(const p of this.indexesWrapped)if(h=p.index.remove((0,u.orderQuadComponents)(p.componentOrder,f)),!h)break;return h?(this._size--,!0):!1}remove(d){return d.on("data",f=>this.removeQuad(f)),d}removeMatches(d,f,h,p){return this.remove(this.match(d,f,h,p))}deleteGraph(d){return typeof d=="string"&&(d=this.dataFactory.namedNode(d)),this.removeMatches(void 0,void 0,void 0,d)}import(d){return d.on("data",f=>this.addQuad(f)),d}*readQuads(d,f,h,p){const b=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(A=>A.index.features.quotedTripleFiltering),[_,E]=(0,u.quadToPattern)(d,f,h,p,b),w=this.indexesWrapped[(0,u.getBestIndex)(this.indexesWrappedComponentOrders,_)],O=(0,u.orderQuadComponents)(w.componentOrder,_);for(const A of w.index.find(O)){const T=this.dataFactory.quad(A[w.componentOrderInverse.subject],A[w.componentOrderInverse.predicate],A[w.componentOrderInverse.object],A[w.componentOrderInverse.graph]);E?(0,r.matchPattern)(T,d,f,h,p)&&(yield T):yield T}}getQuads(d,f,h,p){return[...this.readQuads(d,f,h,p)]}match(d,f,h,p){return(0,t.wrap)(this.readQuads(d,f,h,p))}countQuads(d,f,h,p){const b=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(O=>O.index.features.quotedTripleFiltering),[_]=(0,u.quadToPattern)(d,f,h,p,b);if(_.every(O=>O===void 0))return this.size;const E=this.indexesWrapped[(0,u.getBestIndex)(this.indexesWrappedComponentOrders,_)],w=(0,u.orderQuadComponents)(E.componentOrder,_);return E.index.count(w)}asDataset(){return new n.DatasetCoreWrapper(this)}};return c.DEFAULT_INDEX_COMBINATIONS=[["graph","subject","predicate","object"],["graph","predicate","object","subject"],["graph","object","subject","predicate"]],oh.RdfStore=c,oh}var E4;function n7(){if(E4)return sh;E4=1,Object.defineProperty(sh,"__esModule",{value:!0}),sh.DatasetCoreWrapper=void 0;const t=t7();let e=class r7{constructor(n){this.store=n}get size(){return this.store.size}add(n){return this.store.addQuad(n),this}delete(n){return this.store.removeQuad(n),this}has(n){for(const a of this.store.readQuads(n.subject,n.predicate,n.object,n.graph))return!0;return!1}match(n,a,s,o){const u=new t.RdfStore(this.store.options);for(const c of this.store.readQuads(n,a,s,o))u.addQuad(c);return new r7(u)}[Symbol.iterator](){return this.store.readQuads()}};return sh.DatasetCoreWrapper=e,sh}var i7={};Object.defineProperty(i7,"__esModule",{value:!0});var Gv={};Object.defineProperty(Gv,"__esModule",{value:!0});Gv.TermDictionaryNumberMap=void 0;const $ce=ft,$T=Zt;class Uce{constructor(e=new $ce.DataFactory){this.lastId=0,this.dictionary=new Map,this.reverseDictionary=new Map,this.features={quotedTriples:!1},this.dataFactory=e}encode(e){const r=(0,$T.termToString)(e);let n=this.dictionary.get(r);return n===void 0&&(n=this.lastId++,this.dictionary.set(r,n),this.reverseDictionary.set(n,r)),n}encodeOptional(e){const r=(0,$T.termToString)(e);return this.dictionary.get(r)}decode(e){const r=this.reverseDictionary.get(e);if(r===void 0)throw new Error(`The value ${e} is not present in this dictionary`);return(0,$T.stringToTerm)(r,this.dataFactory)}encodings(){return this.reverseDictionary.keys()}findQuotedTriples(e){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(e){throw new Error("findQuotedTriplesEncoded is not supported")}}Gv.TermDictionaryNumberMap=Uce;var zv={};Object.defineProperty(zv,"__esModule",{value:!0});zv.TermDictionaryNumberRecord=void 0;const qce=ft,UT=Zt;class Vce{constructor(e=new qce.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=e}encode(e){const r=(0,UT.termToString)(e);let n=this.dictionary[r];return n===void 0&&(n=this.lastId++,this.dictionary[r]=n,this.reverseDictionary[n]=r),n}encodeOptional(e){const r=(0,UT.termToString)(e);return this.dictionary[r]}decode(e){const r=this.reverseDictionary[e];if(r===void 0)throw new Error(`The value ${e} is not present in this dictionary`);return(0,UT.stringToTerm)(r,this.dataFactory)}*encodings(){for(const e of Object.keys(this.reverseDictionary))yield Number.parseInt(e,10)}findQuotedTriples(e){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(e){throw new Error("findQuotedTriplesEncoded is not supported")}}zv.TermDictionaryNumberRecord=Vce;var Wv={};Object.defineProperty(Wv,"__esModule",{value:!0});Wv.TermDictionaryQuoted=void 0;const Hce=ft,kce=an;class Ao{constructor(e,r,n=new Hce.DataFactory){this.features={quotedTriples:!0},this.plainTermDictionary=e,this.quotedTriplesDictionary=r,this.dataFactory=n}encode(e){return e.termType==="Quad"?Ao.BITMASK|1+this.quotedTriplesDictionary.encode(e):this.plainTermDictionary.encode(e)}encodeOptional(e){if(e.termType==="Quad"){const r=this.quotedTriplesDictionary.encodeOptional(e);return r===void 0?r:Ao.BITMASK|1+r}return this.plainTermDictionary.encodeOptional(e)}decode(e){if(Ao.BITMASK&e){const r=(~Ao.BITMASK&e)-1;return this.quotedTriplesDictionary.decode(r)}return this.plainTermDictionary.decode(e)}*encodings(){for(const e of this.plainTermDictionary.encodings())yield e;for(const e of this.quotedTriplesDictionary.encodings())yield Ao.BITMASK|1+e}*findQuotedTriples(e){for(const r of this.findQuotedTriplesEncoded(e))yield this.decode(r)}*findQuotedTriplesEncoded(e){for(let r of this.quotedTriplesDictionary.encodings()){r=Ao.BITMASK|1+r;const n=this.decode(r);(0,kce.matchPattern)(n,e.subject,e.predicate,e.object,e.graph)&&(yield r)}}}Ao.BITMASK=1<<31;Wv.TermDictionaryQuoted=Ao;var Xv={};Object.defineProperty(Xv,"__esModule",{value:!0});Xv.TermDictionaryQuotedReferential=void 0;const Qce=ft,Gce=an,zce=ds;class ya{constructor(e,r=new Qce.DataFactory){this.quotedTriplesDictionary=[],this.quotedTriplesReverseDictionary={},this.features={quotedTriples:!0},this.plainTermDictionary=e,this.dataFactory=r}encode(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!1):this.plainTermDictionary.encode(e)}encodeQuotedTriple(e,r){var n;if(e.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const a=(n=(0,zce.encodeOptionalTerms)([e.subject,e.predicate,e.object,void 0],this))===null||n===void 0?void 0:n.slice(0,3),s=a&&a.every(c=>c!==void 0)?this.quotedTriplesReverseDictionary[a.join(ya.SEPARATOR)]:void 0;if(s!==void 0||r)return s===void 0?void 0:ya.BITMASK|s;const o=[this.encode(e.subject),this.encode(e.predicate),this.encode(e.object)],u=this.quotedTriplesDictionary.length+1;return this.quotedTriplesDictionary.push(o),this.quotedTriplesReverseDictionary[o.join(ya.SEPARATOR)]=u,ya.BITMASK|u}encodeOptional(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!0):this.plainTermDictionary.encodeOptional(e)}decode(e){if(ya.BITMASK&e){const r=(~ya.BITMASK&e)-1;if(r>=this.quotedTriplesDictionary.length)throw new Error(`The value ${e} is not present in the quoted triples range of the dictionary`);const n=this.quotedTriplesDictionary[r];return this.dataFactory.quad(this.decode(n[0]),this.decode(n[1]),this.decode(n[2]))}return this.plainTermDictionary.decode(e)}*encodings(){for(const e of this.plainTermDictionary.encodings())yield e;for(const e of this.quotedTriplesDictionary.keys())yield ya.BITMASK|1+e}*findQuotedTriples(e){for(const r of this.findQuotedTriplesEncoded(e))yield this.decode(r)}*findQuotedTriplesEncoded(e){for(let r of this.quotedTriplesDictionary.keys()){r=ya.BITMASK|1+r;const n=this.decode(r);(0,Gce.matchPattern)(n,e.subject,e.predicate,e.object,e.graph)&&(yield r)}}}ya.BITMASK=1<<31;ya.SEPARATOR="_";Xv.TermDictionaryQuotedReferential=ya;var Kv={};Object.defineProperty(Kv,"__esModule",{value:!0});Kv.TermDictionarySymbol=void 0;const Wce=ft,O4=Zt;class Xce{constructor(e=new Wce.DataFactory){this.features={quotedTriples:!1},this.dataFactory=e}encode(e){return Symbol.for(`rdf::${(0,O4.termToString)(e)}`)}encodeOptional(e){return this.encode(e)}decode(e){const r=Symbol.keyFor(e);if(r===void 0)throw new Error(`The value ${String(e)} is not present in this dictionary`);return(0,O4.stringToTerm)(r.slice(5),this.dataFactory)}encodings(){throw new Error("encodings is not supported")}findQuotedTriples(e){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(e){throw new Error("findQuotedTriplesEncoded is not supported")}}Kv.TermDictionarySymbol=Xce;var a7={};Object.defineProperty(a7,"__esModule",{value:!0});var W0={};Object.defineProperty(W0,"__esModule",{value:!0});W0.RdfStoreIndexNestedMapRecursive=void 0;const A4=ds;class Kce{constructor(e){this.features={quotedTripleFiltering:!1},this.dictionary=e.dictionary,this.nestedMap=new Map}set(e,r){let n=this.nestedMap,a=!1;for(const[s,o]of e.entries()){const u=n;let c=u.get(o);c?s===e.length-1&&(a=!0):(c=s===e.length-1?r:new Map,u.set(o,c)),n=c}return!a}remove(e){const r=this.nestedMap,n=r.get(e[0]);if(!n)return!1;const a=n.get(e[1]);if(!a)return!1;const s=a.get(e[2]);if(!s)return!1;const o=s.delete(e[3]);return o&&s.size===0&&(a.delete(e[2]),a.size===0&&(n.delete(e[1]),n.size===0&&r.delete(e[0]))),o}get(e){const r=(0,A4.encodeOptionalTerms)(e,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(e){const r=this.nestedMap.get(e[0]);if(!r)return;const n=r.get(e[1]);if(!n)return;const a=n.get(e[2]);if(a)return a.get(e[3])}*find(e){const r=(0,A4.encodeOptionalTerms)(e,this.dictionary);if(r)for(const n of this.findEncoded(r,e))yield[r[0]!==void 0?e[0]:this.dictionary.decode(n[0]),r[1]!==void 0?e[1]:this.dictionary.decode(n[1]),r[2]!==void 0?e[2]:this.dictionary.decode(n[2]),r[3]!==void 0?e[3]:this.dictionary.decode(n[3])]}*findEncoded(e,r){return yield*this.findEncodedInner(0,e,r,this.nestedMap,[])}*findEncodedInner(e,r,n,a,s){if(e===r.length)yield[...s];else{const o=r[e];if(n[e]){const c=o;if(c!==void 0){const l=a.get(c);l&&(s[e]=o,yield*this.findEncodedInner(e+1,r,n,l,s))}}else for(const[c,l]of a.entries())s[e]=c,yield*this.findEncodedInner(e+1,r,n,l,s)}}count(e){return this.countInner(0,e,this.nestedMap)}countInner(e,r,n){const a=r[e];let s=0;if(a){const o=this.dictionary.encodeOptional(a);if(o!==void 0){if(e===r.length-1)return n.has(o)?1:0;const u=n.get(o);u&&(s+=this.countInner(e+1,r,u))}}else{if(e===r.length-1)return n.size;for(const o of n.values())s+=this.countInner(e+1,r,o)}return s}}W0.RdfStoreIndexNestedMapRecursive=Kce;var Jv={};Object.defineProperty(Jv,"__esModule",{value:!0});Jv.RdfStoreIndexNestedMapRecursiveQuoted=void 0;const x4=ds,Jce=W0;class Yce extends Jce.RdfStoreIndexNestedMapRecursive{constructor(e){super(e),this.features={quotedTripleFiltering:!0}}*findEncoded(e,r){return yield*this.findEncodedInnerQuoted(0,e,r,(0,x4.arePatternsQuoted)(r),this.nestedMap,[])}*findEncodedInnerQuoted(e,r,n,a,s,o){if(e===r.length)yield[...o];else{const u=r[e],c=n[e];if(c)if(a[e]){const l=this.dictionary.findQuotedTriplesEncoded(c);for(const d of l){const f=s.get(d);f&&(o[e]=d,yield*this.findEncodedInnerQuoted(e+1,r,n,a,f,o))}}else{const l=u;if(l!==void 0){const d=s.get(l);d&&(o[e]=u,yield*this.findEncodedInnerQuoted(e+1,r,n,a,d,o))}}else for(const[l,d]of s.entries())o[e]=l,yield*this.findEncodedInnerQuoted(e+1,r,n,a,d,o)}}countInner(e,r,n){const a=r[e];let s=0;if(a)if(a.termType==="Quad"&&(0,x4.quadHasVariables)(a)){const o=this.dictionary.findQuotedTriplesEncoded(a);for(const u of o)if(e===r.length-1)n.has(u)&&s++;else{const c=n.get(u);c&&(s+=this.countInner(e+1,r,c))}}else{const o=this.dictionary.encodeOptional(a);if(o!==void 0){if(e===r.length-1)return n.has(o)?1:0;const u=n.get(o);u&&(s+=this.countInner(e+1,r,u))}}else{if(e===r.length-1)return n.size;for(const o of n.values())s+=this.countInner(e+1,r,o)}return s}}Jv.RdfStoreIndexNestedMapRecursiveQuoted=Yce;var X0={};Object.defineProperty(X0,"__esModule",{value:!0});X0.RdfStoreIndexNestedRecord=void 0;const qT=ds;class Zce{constructor(e){this.features={quotedTripleFiltering:!1},this.dictionary=e.dictionary,this.nestedRecords={}}set(e,r){const n=this.nestedRecords,a=n[e[0]]||(n[e[0]]={}),s=a[e[1]]||(a[e[1]]={}),o=s[e[2]]||(s[e[2]]={});return o[e[3]]?!1:(o[e[3]]=r,!0)}remove(e){const r=this.nestedRecords,n=r[e[0]];if(!n)return!1;const a=n[e[1]];if(!a)return!1;const s=a[e[2]];return!s||!s[e[3]]?!1:(delete s[e[3]],Object.keys(s).length===0&&(delete a[e[2]],Object.keys(a).length===0&&(delete n[e[1]],Object.keys(n).length===0&&delete r[e[0]])),!0)}get(e){const r=(0,qT.encodeOptionalTerms)(e,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(e){var r,n,a;return(a=(n=(r=this.nestedRecords[e[0]])===null||r===void 0?void 0:r[e[1]])===null||n===void 0?void 0:n[e[2]])===null||a===void 0?void 0:a[e[3]]}*find(e){const r=(0,qT.encodeOptionalTerms)(e,this.dictionary);if(!r)return;const[n,a,s,o]=r,[u,c,l,d]=e;let f,h,p,b,_,E,w;const O=this.nestedRecords,A=n!==void 0?n in O?[n]:[]:Object.keys(O);for(const T of A){_=O[T],f=u||this.dictionary.decode(Number.parseInt(T,10));const I=a!==void 0?a in _?[a]:[]:Object.keys(_);for(const D of I){E=_[D],h=c||this.dictionary.decode(Number.parseInt(D,10));const U=s!==void 0?s in E?[s]:[]:Object.keys(E);for(const H of U){w=E[H],p=l||this.dictionary.decode(Number.parseInt(H,10));const N=o!==void 0?o in w?[o]:[]:Object.keys(w);for(const R of N)b=d||this.dictionary.decode(Number.parseInt(R,10)),yield[f,h,p,b]}}}}*findEncoded(e,r){const[n,a,s,o]=e;let u,c,l;const d=this.nestedRecords,f=n!==void 0?n in d?[n]:[]:Object.keys(d);for(const h of f){u=d[h];const p=a!==void 0?a in u?[a]:[]:Object.keys(u);for(const b of p){c=u[b];const _=s!==void 0?s in c?[s]:[]:Object.keys(c);for(const E of _){l=c[E];const w=o!==void 0?o in l?[o]:[]:Object.keys(l);for(const O of w)yield[Number.parseInt(h,10),Number.parseInt(b,10),Number.parseInt(E,10),Number.parseInt(O,10)]}}}}count(e){let r=0;const n=(0,qT.encodeOptionalTerms)(e,this.dictionary);if(!n)return 0;const a=n[0],s=n[1],o=n[2],u=n[3];let c,l,d;const f=this.nestedRecords,h=a!==void 0?a in f?[a]:[]:Object.keys(f);for(const p of h){c=f[p];const b=s!==void 0?s in c?[s]:[]:Object.keys(c);for(const _ of b){l=c[_];const E=o!==void 0?o in l?[o]:[]:Object.keys(l);for(const w of E)d=l[w],u!==void 0?u in d&&r++:r+=Object.keys(d).length}}return r}}X0.RdfStoreIndexNestedRecord=Zce;var Yv={};Object.defineProperty(Yv,"__esModule",{value:!0});Yv.RdfStoreIndexNestedRecordQuoted=void 0;const ch=ds,ele=X0;class tle extends ele.RdfStoreIndexNestedRecord{constructor(e){super(e),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(e,r){for(const n of this.dictionary.findQuotedTriplesEncoded(r))n in e&&(yield n)}*find(e){const r=(0,ch.encodeOptionalTerms)(e,this.dictionary);if(!r)return;const[n,a,s,o]=r,[u,c,l,d]=e,[f,h,p,b]=(0,ch.arePatternsQuoted)(e);let _,E,w,O,A,T,I;const D=this.nestedRecords,U=u!==void 0?f?this.getQuotedPatternKeys(D,u):n in D?[n]:[]:Object.keys(D);for(const H of U){A=D[H],_=!f&&u?u:this.dictionary.decode(Number.parseInt(H,10));const N=c!==void 0?h?this.getQuotedPatternKeys(A,c):a in A?[a]:[]:Object.keys(A);for(const R of N){T=A[R],E=!h&&c?c:this.dictionary.decode(Number.parseInt(R,10));const F=l!==void 0?p?this.getQuotedPatternKeys(T,l):s in T?[s]:[]:Object.keys(T);for(const X of F){I=T[X],w=!p&&l?l:this.dictionary.decode(Number.parseInt(X,10));const ne=d!==void 0?b?this.getQuotedPatternKeys(I,d):o in I?[o]:[]:Object.keys(I);for(const $ of ne)O=!b&&d?d:this.dictionary.decode(Number.parseInt($,10)),yield[_,E,w,O]}}}}*findEncoded(e,r){const[n,a,s,o]=e,[u,c,l,d]=r,[f,h,p,b]=(0,ch.arePatternsQuoted)(r);let _,E,w;const O=this.nestedRecords,A=u!==void 0?f?this.getQuotedPatternKeys(O,u):n in O?[n]:[]:Object.keys(O);for(const T of A){_=O[T];const I=c!==void 0?h?this.getQuotedPatternKeys(_,c):a in _?[a]:[]:Object.keys(_);for(const D of I){E=_[D];const U=l!==void 0?p?this.getQuotedPatternKeys(E,l):s in E?[s]:[]:Object.keys(E);for(const H of U){w=E[H];const N=d!==void 0?b?this.getQuotedPatternKeys(w,d):o in w?[o]:[]:Object.keys(w);for(const R of N)yield[Number.parseInt(T,10),Number.parseInt(D,10),Number.parseInt(H,10),Number.parseInt(R,10)]}}}}count(e){let r=0;const n=(0,ch.encodeOptionalTerms)(e,this.dictionary);if(!n)return 0;const[a,s,o,u]=n,[c,l,d,f]=e,[h,p,b,_]=(0,ch.arePatternsQuoted)(e);let E,w,O;const A=this.nestedRecords,T=c!==void 0?h?this.getQuotedPatternKeys(A,c):a in A?[a]:[]:Object.keys(A);for(const I of T){E=A[I];const D=l!==void 0?p?this.getQuotedPatternKeys(E,l):s in E?[s]:[]:Object.keys(E);for(const U of D){w=E[U];const H=d!==void 0?b?this.getQuotedPatternKeys(w,d):o in w?[o]:[]:Object.keys(w);for(const N of H)O=w[N],f!==void 0?_?r+=[...this.getQuotedPatternKeys(O,f)].length:u in O&&r++:r+=Object.keys(O).length}}return r}}Yv.RdfStoreIndexNestedRecordQuoted=tle;var s7={};Object.defineProperty(s7,"__esModule",{value:!0});var o7={};Object.defineProperty(o7,"__esModule",{value:!0});(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(n7(),t),r(i7,t),r(Gv,t),r(zv,t),r(Q0,t),r(Wv,t),r(G0,t),r(Xv,t),r(Kv,t),r(a7,t),r(Bf,t),r(z0,t),r(W0,t),r(Jv,t),r(X0,t),r(Yv,t),r(s7,t),r(ds,t),r(o7,t),r(t7(),t)})(e7);Object.defineProperty(Qv,"__esModule",{value:!0});Qv.storeStream=void 0;const rle=e7;function nle(t){const e=rle.RdfStore.createDefault();return new Promise((r,n)=>e.import(t).on("error",n).once("end",()=>r(e)))}Qv.storeStream=nle;Object.defineProperty(qv,"__esModule",{value:!0});qv.ActorRdfResolveHypermediaNone=void 0;const ile=fR,ale=Hv,sle=Qv;class ole extends ale.ActorRdfResolveHypermedia{constructor(e){super(e,"file")}async testMetadata(e){return{filterFactor:0}}async run(e){return this.logInfo(e.context,`Identified as file source: ${e.url}`),{source:new ile.RdfJsQuadSource(await(0,sle.storeStream)(e.quads))}}}qv.ActorRdfResolveHypermediaNone=ole;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(qv,t)})(YL);var u7={},Zv={},hR={},e2={};Object.defineProperty(e2,"__esModule",{value:!0});e2.ActorRdfResolveHypermediaLinks=void 0;const ule=Je;class cle extends ule.Actor{constructor(e){super(e)}}e2.ActorRdfResolveHypermediaLinks=cle;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(e2,t)})(hR);Object.defineProperty(Zv,"__esModule",{value:!0});Zv.ActorRdfResolveHypermediaLinksNext=void 0;const lle=hR;class dle extends lle.ActorRdfResolveHypermediaLinks{constructor(e){super(e)}async test(e){if(!e.metadata.next)throw new Error(`Actor ${this.name} requires a 'next' metadata entry.`);return!0}async run(e){return{links:[{url:e.metadata.next}]}}}Zv.ActorRdfResolveHypermediaLinksNext=dle;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Zv,t)})(u7);var c7={},t2={},pR={},Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.KeysRdfJoin=Hu.KeysExtractLinksTree=Hu.KeysRdfResolveHypermediaLinks=void 0;const zb=Je;Hu.KeysRdfResolveHypermediaLinks={traverse:new zb.ActionContextKey("@comunica/actor-rdf-resolve-hypermedia-links-traverse:traverse"),annotateSources:new zb.ActionContextKey("@comunica/bus-rdf-resolve-hypermedia-links:annotateSources")};Hu.KeysExtractLinksTree={strictTraversal:new zb.ActionContextKey("@comunica/actor-extract-links-tree:strictTraversal")};Hu.KeysRdfJoin={skipAdaptiveJoin:new zb.ActionContextKey("@comunica/bus-rdf-join:skipAdaptiveJoin")};(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Hu,t)})(pR);Object.defineProperty(t2,"__esModule",{value:!0});t2.ActorRdfResolveHypermediaLinksTraverse=void 0;const fle=hR,hle=Ut,R4=pR;class ple extends fle.ActorRdfResolveHypermediaLinks{constructor(e){super(e),this.upgradeInsecureRequests=e.upgradeInsecureRequests}async test(e){if(!e.metadata.traverse)throw new Error(`Actor ${this.name} requires a 'traverse' metadata entry.`);if(e.context.has(R4.KeysRdfResolveHypermediaLinks.traverse)&&!e.context.get(R4.KeysRdfResolveHypermediaLinks.traverse))throw new Error("Link traversal has been disabled via the context.");return!0}async run(e){return{links:e.metadata.traverse.map(r=>{const n=r.url.indexOf("#");return n>=0&&(r.url=r.url.slice(0,n)),r.url.startsWith("http:")&&(this.upgradeInsecureRequests??(g.window&&g.window.location.protocol==="https:"&&!e.context.get(hle.KeysHttpProxy.httpProxyHandler)))&&(r.url=r.url.replace("http:","https:")),r})}}}t2.ActorRdfResolveHypermediaLinksTraverse=ple;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(t2,t)})(c7);var l7={},r2={},d7={},n2={};Object.defineProperty(n2,"__esModule",{value:!0});n2.ActorRdfResolveHypermediaLinksQueue=void 0;const yle=Je;class ble extends yle.Actor{constructor(e){super(e)}}n2.ActorRdfResolveHypermediaLinksQueue=ble;var f7={};Object.defineProperty(f7,"__esModule",{value:!0});var i2={};Object.defineProperty(i2,"__esModule",{value:!0});i2.LinkQueueWrapper=void 0;class _le{constructor(e){this.linkQueue=e}push(e,r){return this.linkQueue.push(e,r)}getSize(){return this.linkQueue.getSize()}isEmpty(){return this.linkQueue.isEmpty()}pop(){return this.linkQueue.pop()}peek(){return this.linkQueue.peek()}}i2.LinkQueueWrapper=_le;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(n2,t),r(f7,t),r(i2,t)})(d7);var K0={};Object.defineProperty(K0,"__esModule",{value:!0});K0.LinkQueueFifo=void 0;class gle{constructor(){this.links=[]}push(e){return this.links.push(e),!0}getSize(){return this.links.length}isEmpty(){return this.links.length===0}pop(){return this.links.shift()}peek(){return this.links[0]}}K0.LinkQueueFifo=gle;Object.defineProperty(r2,"__esModule",{value:!0});r2.ActorRdfResolveHypermediaLinksQueueFifo=void 0;const mle=d7,vle=K0;class wle extends mle.ActorRdfResolveHypermediaLinksQueue{constructor(e){super(e)}async test(e){return!0}async run(e){return{linkQueue:new vle.LinkQueueFifo}}}r2.ActorRdfResolveHypermediaLinksQueueFifo=wle;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(r2,t),r(K0,t)})(l7);var h7={},a2={},$f={},J0={};Object.defineProperty(J0,"__esModule",{value:!0});J0.ActorRdfUpdateQuads=void 0;const Sle=Je;class Tle extends Sle.Actor{constructor(e){super(e)}}J0.ActorRdfUpdateQuads=Tle;var ku={},yR={},s2={},Y0={};Object.defineProperty(Y0,"__esModule",{value:!0});Y0.FederatedQuadSource=void 0;const Ele=ct,Ole=xl,g1=Ut,Ale=F_,VT=oa,I4=Ht,xle=ft,P4=an,Rle=gt,D4=new xle.DataFactory;class ln{constructor(e,r,n,a,s){if(this.mediatorResolveQuadPattern=e,this.mediatorRdfMetadataAccumulate=r,this.sources=n.get(g1.KeysRdfResolveQuadPattern.sources),this.contextDefault=n.delete(g1.KeysRdfResolveQuadPattern.sources),this.emptyPatterns=a,this.sourceIds=n.get(g1.KeysRdfResolveQuadPattern.sourceIds)??new Map,this.skipEmptyPatterns=s,this.algebraFactory=new Rle.Factory,this.skipEmptyPatterns)for(const o of this.sources)this.emptyPatterns.has(o)||this.emptyPatterns.set(o,[])}static isTermBound(e){return e.termType!=="Variable"}static isSubPatternOf(e,r){return(!ln.isTermBound(r.subject)||r.subject.equals(e.subject))&&(!ln.isTermBound(r.predicate)||r.predicate.equals(e.predicate))&&(!ln.isTermBound(r.object)||r.object.equals(e.object))&&(!ln.isTermBound(r.graph)||r.graph.equals(e.graph))}static skolemizeTerm(e,r){return e.termType==="BlankNode"?new Ale.BlankNodeScoped(`bc_${r}_${e.value}`,D4.namedNode(`${ln.SKOLEM_PREFIX}${r}:${e.value}`)):e}static skolemizeQuad(e,r){return(0,P4.mapTermsNested)(e,n=>ln.skolemizeTerm(n,r))}static deskolemizeTerm(e,r){if(e.termType==="BlankNode"&&"skolemized"in e&&(e=e.skolemized),e.termType==="NamedNode"&&e.value.startsWith(ln.SKOLEM_PREFIX)){const n=e.value.indexOf(":",ln.SKOLEM_PREFIX.length);if(e.value.slice(ln.SKOLEM_PREFIX.length,n)===r){const s=e.value.slice(n+1,e.value.length);return D4.blankNode(s)}return null}return e}static deskolemizeQuad(e,r){return(0,P4.mapTermsNested)(e,n=>{const a=ln.deskolemizeTerm(n,r);return a||n})}isSourceEmpty(e,r){if(!this.skipEmptyPatterns)return!1;const n=this.emptyPatterns.get(e);if(n){for(const a of n)if(ln.isSubPatternOf(r,a))return!0}return!1}getSourceId(e){let r=this.sourceIds.get(e);return r===void 0&&(r=`${this.sourceIds.size}`,this.sourceIds.set(e,r)),r}match(e,r,n,a){const s=async()=>{if(o.size===this.sources.length){let l=(await this.mediatorRdfMetadataAccumulate.mediate({mode:"initialize",context:this.contextDefault})).metadata;for(const f of o.values())l={...f,...(await this.mediatorRdfMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:l,appendingMetadata:f,context:this.contextDefault})).metadata};l.state=new VT.MetadataValidationState;const d=c.getProperty("metadata");c.setProperty("metadata",l),d==null||d.state.invalidate()}},o=new Map,u=Promise.all(this.sources.map(async(l,d)=>{const f=this.getSourceId(l),h=ln.deskolemizeTerm(e,f),p=ln.deskolemizeTerm(r,f),b=ln.deskolemizeTerm(n,f),_=ln.deskolemizeTerm(a,f);let E,w=(0,Ole.getDataSourceContext)(l,this.contextDefault);w=w.set(g1.KeysRdfResolveQuadPattern.source,l);let O;!h||!p||!b||!_||this.isSourceEmpty(l,E=this.algebraFactory.createPattern(h,p,b,_))?(O={data:new I4.ArrayIterator([],{autoStart:!1})},O.data.setProperty("metadata",{state:new VT.MetadataValidationState,...(await this.mediatorRdfMetadataAccumulate.mediate({mode:"initialize",context:this.contextDefault})).metadata})):O=await this.mediatorResolveQuadPattern.mediate({pattern:E,context:w});const A=()=>{O.data.getProperty("metadata",I=>{var D,U;o.set(`${d}`,I),this.skipEmptyPatterns&&!((D=I.cardinality)!=null&&D.value)&&E&&!this.isSourceEmpty(l,E)&&this.emptyPatterns.get(l).push(E),s().catch(H=>c.emit("error",H)),(U=I.state)==null||U.addInvalidateListener(()=>{o.delete(`${d}`),A()})})};A();const T=O.data.map(I=>ln.skolemizeQuad(I,f));return T.on("error",I=>c.emit("error",I)),T}));u.catch(l=>c.emit("error",l));const c=new Ele.ClosableTransformIterator(async()=>new I4.UnionIterator(await u),{autoStart:!1,onClose(){u.then(l=>{for(const d of l)d.destroy()},()=>{})}});return this.sources.length===0&&this.mediatorRdfMetadataAccumulate.mediate({mode:"initialize",context:this.contextDefault}).then(l=>c.setProperty("metadata",{state:new VT.MetadataValidationState,...l.metadata})).catch(l=>c.emit("error",l)),c}}Y0.FederatedQuadSource=ln;ln.SKOLEM_PREFIX="urn:comunica_skolem:source_";Object.defineProperty(s2,"__esModule",{value:!0});s2.ActorRdfResolveQuadPatternFederated=void 0;const N4=xl,Ile=Y0;class Ple extends N4.ActorRdfResolveQuadPatternSource{constructor(e){super(e),this.emptyPatterns=new Map,e.mediatorRdfMetadataAccumulate||(this.mediatorRdfMetadataAccumulate={async mediate(r){if(r.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0},canContainUndefs:!1}};const n={...r.accumulatedMetadata},a=r.appendingMetadata;return!a.cardinality||!Number.isFinite(a.cardinality.value)?(n.cardinality.type="estimate",n.cardinality.value=Number.POSITIVE_INFINITY):(a.cardinality.type==="estimate"&&(n.cardinality.type="estimate"),n.cardinality.value+=a.cardinality.value),(n.requestTime||a.requestTime)&&(n.requestTime=n.requestTime||0,a.requestTime=a.requestTime||0,n.requestTime+=a.requestTime),(n.pageSize||a.pageSize)&&(n.pageSize=n.pageSize||0,a.pageSize=a.pageSize||0,n.pageSize+=a.pageSize),a.canContainUndefs&&(n.canContainUndefs=!0),{metadata:n}}})}async test(e){if(!(0,N4.getContextSources)(e.context))throw new Error(`Actor ${this.name} can only resolve quad pattern queries against a sources array.`);return!0}async getSource(e){return new Ile.FederatedQuadSource(this.mediatorResolveQuadPattern,this.mediatorRdfMetadataAccumulate,e,this.emptyPatterns,this.skipEmptyPatterns)}}s2.ActorRdfResolveQuadPatternFederated=Ple;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(s2,t),r(Y0,t)})(yR);Object.defineProperty(ku,"__esModule",{value:!0});ku.ActorRdfUpdateQuadsDestination=ku.deskolemize=ku.deskolemizeStream=void 0;const Dle=yR,j4=Ut,Nle=J0;function PO(t,e){return t==null?void 0:t.map(r=>Dle.FederatedQuadSource.deskolemizeQuad(r,e))}ku.deskolemizeStream=PO;function p7(t){var n;const e=t.context.get(j4.KeysRdfUpdateQuads.destination),r=(n=t.context.get(j4.KeysRdfResolveQuadPattern.sourceIds))==null?void 0:n.get(e);return r?{...t,quadStreamInsert:PO(t.quadStreamInsert,r),quadStreamDelete:PO(t.quadStreamDelete,r)}:t}ku.deskolemize=p7;class jle extends Nle.ActorRdfUpdateQuads{async test(e){return!0}async run(e){const r=await this.getDestination(e.context);return await this.getOutput(r,p7(e),e.context)}async getOutput(e,r,n){return{execute:()=>Promise.all([r.quadStreamInsert?e.insert(r.quadStreamInsert):Promise.resolve(),r.quadStreamDelete?e.delete(r.quadStreamDelete):Promise.resolve(),r.deleteGraphs?e.deleteGraphs(r.deleteGraphs.graphs,r.deleteGraphs.requireExistence,r.deleteGraphs.dropGraphs):Promise.resolve(),r.createGraphs?e.createGraphs(r.createGraphs.graphs,r.createGraphs.requireNonExistence):Promise.resolve()]).then(()=>{})}}}ku.ActorRdfUpdateQuadsDestination=jle;var o2={};Object.defineProperty(o2,"__esModule",{value:!0});o2.validateHttpResponse=void 0;const Cle=ls,Mle=Al;async function Fle(t,e){var r;if(e.status>=400){let n="empty response";if(e.body){const a=Cle.ActorHttp.toNodeReadable(e.body);n=await Mle(a)}throw new Error(`Could not update ${t} (HTTP status ${e.status}):
${n}`)}await((r=e.body)==null?void 0:r.cancel())}o2.validateHttpResponse=Fle;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.getContextDestinationUrl=Jn.getContextDestinationFirst=Jn.getContextDestination=Jn.getDataDestinationContext=Jn.getDataDestinationValue=Jn.getDataDestinationType=Jn.isDataDestinationRawType=void 0;const DO=Ut;function y7(t){return typeof t=="string"||"remove"in t}Jn.isDataDestinationRawType=y7;function Lle(t){return typeof t=="string"?"":"remove"in t?"rdfjsStore":t.type}Jn.getDataDestinationType=Lle;function b7(t){return y7(t)?t:t.value}Jn.getDataDestinationValue=b7;function Ble(t,e){return typeof t=="string"||"remove"in t||!t.context?e:e.merge(t.context)}Jn.getDataDestinationContext=Ble;function $le(t){return t.get(DO.KeysRdfUpdateQuads.destination)}Jn.getContextDestination=$le;function Ule(t){if(t.has(DO.KeysRdfUpdateQuads.destination))return t.get(DO.KeysRdfUpdateQuads.destination)}Jn.getContextDestinationFirst=Ule;function qle(t){if(t){let e=b7(t);if(typeof e=="string"){const r=e.indexOf("#");return r>=0&&(e=e.slice(0,r)),e}}}Jn.getContextDestinationUrl=qle;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(J0,t),r(ku,t),r(o2,t),r(Jn,t)})($f);var u2={};Object.defineProperty(u2,"__esModule",{value:!0});u2.RdfJsQuadDestination=void 0;const Vle=ft,C4=Zt,Hle=new Vle.DataFactory;class kle{constructor(e){this.store=e}promisifyEventEmitter(e){return new Promise((r,n)=>{e.on("end",r),e.on("error",n)})}delete(e){return this.promisifyEventEmitter(this.store.remove(e))}insert(e){return this.promisifyEventEmitter(this.store.import(e))}async deleteGraphs(e,r,n){switch(e){case"ALL":await this.promisifyEventEmitter(this.store.deleteGraph(Hle.defaultGraph()));case"NAMED":const a=this.store.match(),s={};a.on("data",o=>{o.graph.termType!=="DefaultGraph"&&(s[(0,C4.termToString)(o.graph)]=!0)}),await this.promisifyEventEmitter(a),await Promise.all(Object.keys(s).map(o=>this.promisifyEventEmitter(this.store.deleteGraph((0,C4.stringToTerm)(o)))));break;default:for(const o of Array.isArray(e)?e:[e])await this.promisifyEventEmitter(this.store.deleteGraph(o))}}async createGraphs(e,r){if(r)for(const n of e){const a=this.store.match(void 0,void 0,void 0,n);await new Promise((s,o)=>{a.once("data",()=>{o(new Error(`Unable to create graph ${n.value} as it already exists`))}),a.on("end",s),a.on("error",o)})}}}u2.RdfJsQuadDestination=kle;Object.defineProperty(a2,"__esModule",{value:!0});a2.ActorRdfUpdateQuadsRdfJsStore=void 0;const HT=$f,Qle=u2;class Gle extends HT.ActorRdfUpdateQuadsDestination{constructor(e){super(e)}async test(e){const r=(0,HT.getContextDestination)(e.context);if(!r||typeof r=="string"||!("remove"in r)&&"value"in r&&!r.value.remove)throw new Error(`${this.name} received an invalid rdfjsStore.`);return!0}async getDestination(e){const r=(0,HT.getContextDestination)(e);return new Qle.RdfJsQuadDestination("remove"in r?r:r.value)}}a2.ActorRdfUpdateQuadsRdfJsStore=Gle;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(a2,t)})(h7);var _7={},c2={};Object.defineProperty(c2,"__esModule",{value:!0});c2.MediatorJoinCoefficientsFixed=void 0;const zle=Ut,M4=Je;class Wle extends M4.Mediator{constructor(e){super(e)}async mediateWith(e,r){var h;const n=[],a=r.map(({reply:p})=>p).map(p=>p.catch(b=>{n.push(b)})),s=await Promise.all(a);let o=s.map((p,b)=>{if(p)return p.iterations*this.cpuWeight+p.persistedItems*this.memoryWeight+p.blockingItems*this.timeWeight+p.requestTime*this.ioWeight});const u=Math.max(...o.filter(p=>p!==void 0)),c=e.context.get(zle.KeysQueryOperation.limitIndicator);c&&(o=o.map((p,b)=>p!==void 0&&s[b].persistedItems>0&&s[b].iterations>c?p+u:p));let l=-1,d=Number.POSITIVE_INFINITY;for(const[p,b]of o.entries())b!==void 0&&(l===-1||b<d)&&(l=p,d=b);if(l<0)throw new Error(`All actors rejected their test in ${this.name}
${n.map(p=>p.message).join(`
`)}`);const f=r[l].actor;return f.includeInLogs&&((h=M4.Actor.getContextLogger(e.context))==null||h.debug(`Determined physical join operator '${f.logicalType}-${f.physicalName}'`,{entries:e.entries.length,variables:await Promise.all(e.entries.map(async p=>(await p.output.metadata()).variables.map(b=>b.value))),costs:Object.fromEntries(o.map((p,b)=>[`${r[b].actor.logicalType}-${r[b].actor.physicalName}`,p])),coefficients:Object.fromEntries(s.map((p,b)=>[`${r[b].actor.logicalType}-${r[b].actor.physicalName}`,p]))})),f}}c2.MediatorJoinCoefficientsFixed=Wle;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(c2,t)})(_7);var g7={},l2={};Object.defineProperty(l2,"__esModule",{value:!0});l2.ActorRdfMetadataExtractTraverse=void 0;const Xle=to;class Kle extends Xle.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){const r=await this.mediatorExtractLinks.mediate(e);return{metadata:{traverse:r.links,traverseConditional:r.linksConditional}}}}l2.ActorRdfMetadataExtractTraverse=Kle;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(l2,t)})(g7);var m7={},d2={};Object.defineProperty(d2,"__esModule",{value:!0});d2.ActorQueryOperationAsk=void 0;const F4=ct;class Jle extends F4.ActorQueryOperationTypedMediated{constructor(e){super(e,"ask")}async testOperation(e,r){return!0}async runOperation(e,r){const n=await this.mediatorQueryOperation.mediate({operation:e.input,context:r}),{bindingsStream:a}=F4.ActorQueryOperation.getSafeBindings(n);return{type:"boolean",execute:async()=>(await a.take(1).toArray()).length===1}}}d2.ActorQueryOperationAsk=Jle;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(d2,t)})(m7);var v7={},f2={};Object.defineProperty(f2,"__esModule",{value:!0});f2.ActorQueryOperationBgpJoin=void 0;const Yle=ct,Zle=gt;class h2 extends Yle.ActorQueryOperationTypedMediated{constructor(e){super(e,"bgp")}async testOperation(e,r){return!0}async runOperation(e,r){return this.mediatorQueryOperation.mediate({operation:h2.FACTORY.createJoin(e.patterns),context:r})}}f2.ActorQueryOperationBgpJoin=h2;h2.FACTORY=new Zle.Factory;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(f2,t)})(v7);var w7={},p2={},y2={},b2={};Object.defineProperty(b2,"__esModule",{value:!0});b2.ActorQueryOperationUnion=void 0;const L4=ct,ede=oa,tde=Ht,rde=an;class Wb extends L4.ActorQueryOperationTypedMediated{constructor(e){super(e,"union")}static unionVariables(e){return(0,rde.uniqTerms)(e.flat())}static unionMetadata(e,r){const n={type:"exact",value:0};for(const o of e)if(o.cardinality.value&&Number.isFinite(o.cardinality.value)||o.cardinality.value===0)o.cardinality.type==="estimate"&&(n.type="estimate"),n.value+=o.cardinality.value;else{n.type="estimate",n.value=Number.POSITIVE_INFINITY;break}const a={state:new ede.MetadataValidationState,cardinality:n,canContainUndefs:e.some(o=>o.canContainUndefs)},s=()=>a.state.invalidate();for(const o of e)o.state.addInvalidateListener(s);return r&&(a.variables=Wb.unionVariables(e.map(o=>o.variables))),a}async testOperation(e,r){return!0}async runOperation(e,r){const n=(await Promise.all(e.input.map(o=>this.mediatorQueryOperation.mediate({operation:o,context:r})))).map(L4.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new tde.UnionIterator(n.map(o=>o.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(n.map(o=>o.metadata())).then(o=>Wb.unionMetadata(o,!0))}}}b2.ActorQueryOperationUnion=Wb;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(b2,t)})(y2);Object.defineProperty(p2,"__esModule",{value:!0});p2.ActorQueryOperationDescribeSubject=void 0;const nde=y2,B4=ct,ide=Ht,ade=ft,m1=gt,td=new ade.DataFactory;class sde extends B4.ActorQueryOperationTypedMediated{constructor(e){super(e,"describe")}async testOperation(e,r){return!0}async runOperation(e,r){const n=e.terms.filter(u=>u.termType!=="Variable").map(u=>{const c=[td.quad(u,td.variable("__predicate"),td.variable("__object"))];return c.forEach(d=>d.type="pattern"),{input:{type:m1.Algebra.types.BGP,patterns:c},template:c,type:"construct"}});if(n.length!==e.terms.length){let u=[];e.terms.filter(c=>c.termType==="Variable").forEach((c,l)=>{const d=[td.quad(c,td.variable(`__predicate${l}`),td.variable(`__object${l}`))];d.forEach(f=>f.type="pattern"),u=[...u,...d]}),n.push({input:{type:m1.Algebra.types.JOIN,input:[e.input,{type:m1.Algebra.types.BGP,patterns:u}]},template:u,type:m1.Algebra.types.CONSTRUCT})}const a=(await Promise.all(n.map(u=>this.mediatorQueryOperation.mediate({operation:u,context:r})))).map(B4.ActorQueryOperation.getSafeQuads);return{type:"quads",quadStream:new ide.UnionIterator(a.map(u=>u.quadStream),{autoStart:!1}),metadata:()=>Promise.all(a.map(u=>u.metadata())).then(u=>nde.ActorQueryOperationUnion.unionMetadata(u,!1))}}}p2.ActorQueryOperationDescribeSubject=sde;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(p2,t)})(w7);var bR={},_2={},Z0={};Object.defineProperty(Z0,"__esModule",{value:!0});Z0.BindingsToQuadsIterator=void 0;const $4=Ht,ode=ft,U4=an,ude=new ode.DataFactory;class vd extends $4.MultiTransformIterator{constructor(e,r){super(r,{autoStart:!1}),this.template=e,this.blankNodeCounter=0}static bindTerm(e,r){return r.termType==="Variable"?e.get(r):r}static bindQuad(e,r){try{return(0,U4.mapTermsNested)(r,n=>{const a=vd.bindTerm(e,n);if(!a)throw new Error("Unbound term");return a})}catch{}}static localizeBlankNode(e,r){return r.termType==="BlankNode"?ude.blankNode(`${r.value}${e}`):r}static localizeQuad(e,r){return(0,U4.mapTermsNested)(r,n=>vd.localizeBlankNode(e,n))}bindTemplate(e,r,n){return r.map(vd.localizeQuad.bind(null,n)).map(s=>vd.bindQuad.bind(null,e)(s)).filter(Boolean)}_createTransformer(e){return new $4.ArrayIterator(this.bindTemplate(e,this.template,this.blankNodeCounter++),{autoStart:!1})}}Z0.BindingsToQuadsIterator=vd;Object.defineProperty(_2,"__esModule",{value:!0});_2.ActorQueryOperationConstruct=void 0;const q4=ct,kT=an,cde=gt,lde=Z0;class _R extends q4.ActorQueryOperationTypedMediated{constructor(e){super(e,"construct")}static getVariables(e){return(0,kT.uniqTerms)([].concat.apply([],e.map(r=>(0,kT.getVariables)((0,kT.getTermsNested)(r)))))}async testOperation(e,r){return!0}async runOperation(e,r){const n=_R.getVariables(e.template),a={type:cde.Algebra.types.PROJECT,input:e.input,variables:n},s=q4.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:a,context:r})),o=new lde.BindingsToQuadsIterator(e.template,s.bindingsStream);return{metadata:()=>s.metadata().then(c=>({...c,order:void 0,cardinality:{type:c.cardinality.type,value:c.cardinality.value*e.template.length},canContainUndefs:!1,availableOrders:void 0})),quadStream:o,type:"quads"}}}_2.ActorQueryOperationConstruct=_R;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(_2,t),r(Z0,t)})(bR);var S7={},g2={},Il={},ey={},fs={};Object.defineProperty(fs,"__esModule",{value:!0});fs.LRUCache=void 0;const lh=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,T7=new Set,NO=typeof process=="object"&&process?process:{},E7=(t,e,r,n)=>{typeof NO.emitWarning=="function"?NO.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)};let Xb=globalThis.AbortController,V4=globalThis.AbortSignal;var B8;if(typeof Xb>"u"){V4=class{constructor(){$r(this,"onabort");$r(this,"_onabort",[]);$r(this,"reason");$r(this,"aborted",!1)}addEventListener(n,a){this._onabort.push(a)}},Xb=class{constructor(){$r(this,"signal",new V4);e()}abort(n){var a,s;if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(const o of this.signal._onabort)o(n);(s=(a=this.signal).onabort)==null||s.call(a,n)}}};let t=((B8=NO.env)==null?void 0:B8.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,E7("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const dde=t=>!T7.has(t),_u=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),O7=t=>_u(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?fb:null:null;class fb extends Array{constructor(e){super(e),this.fill(0)}}var Dd;const kc=class kc{constructor(e,r){$r(this,"heap");$r(this,"length");if(!fe(kc,Dd))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}static create(e){const r=O7(e);if(!r)return[];ut(kc,Dd,!0);const n=new kc(e,r);return ut(kc,Dd,!1),n}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};Dd=new WeakMap,St(kc,Dd,!1);let jO=kc;var Ha,Gi,ka,Qa,Nd,dn,Ga,fn,Sr,_t,yi,zi,zn,wn,za,Sn,xo,Ro,Wa,Xa,Cu,bi,qp,MO,Xc,Io,Vp,Wi,Zb,A7,Kc,jd,Hp,xs,gu,Rs,mu,kp,FO,Cd,hb,Md,pb,pr,jr,Qp,LO,Jc,Jh;const WR=class WR{constructor(e){St(this,qp);St(this,Zb);St(this,xs);St(this,Rs);St(this,kp);St(this,Cd);St(this,Md);St(this,pr);St(this,Qp);St(this,Jc);St(this,Ha,void 0);St(this,Gi,void 0);St(this,ka,void 0);St(this,Qa,void 0);St(this,Nd,void 0);$r(this,"ttl");$r(this,"ttlResolution");$r(this,"ttlAutopurge");$r(this,"updateAgeOnGet");$r(this,"updateAgeOnHas");$r(this,"allowStale");$r(this,"noDisposeOnSet");$r(this,"noUpdateTTL");$r(this,"maxEntrySize");$r(this,"sizeCalculation");$r(this,"noDeleteOnFetchRejection");$r(this,"noDeleteOnStaleGet");$r(this,"allowStaleOnFetchAbort");$r(this,"allowStaleOnFetchRejection");$r(this,"ignoreFetchAbort");St(this,dn,void 0);St(this,Ga,void 0);St(this,fn,void 0);St(this,Sr,void 0);St(this,_t,void 0);St(this,yi,void 0);St(this,zi,void 0);St(this,zn,void 0);St(this,wn,void 0);St(this,za,void 0);St(this,Sn,void 0);St(this,xo,void 0);St(this,Ro,void 0);St(this,Wa,void 0);St(this,Xa,void 0);St(this,Cu,void 0);St(this,bi,void 0);St(this,Xc,()=>{});St(this,Io,()=>{});St(this,Vp,()=>{});St(this,Wi,()=>!1);St(this,Kc,e=>{});St(this,jd,(e,r,n)=>{});St(this,Hp,(e,r,n,a)=>{if(n||a)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});const{max:r=0,ttl:n,ttlResolution:a=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:u,allowStale:c,dispose:l,disposeAfter:d,noDisposeOnSet:f,noUpdateTTL:h,maxSize:p=0,maxEntrySize:b=0,sizeCalculation:_,fetchMethod:E,noDeleteOnFetchRejection:w,noDeleteOnStaleGet:O,allowStaleOnFetchRejection:A,allowStaleOnFetchAbort:T,ignoreFetchAbort:I}=e;if(r!==0&&!_u(r))throw new TypeError("max option must be a nonnegative integer");const D=r?O7(r):Array;if(!D)throw new Error("invalid max value: "+r);if(ut(this,Ha,r),ut(this,Gi,p),this.maxEntrySize=b||fe(this,Gi),this.sizeCalculation=_,this.sizeCalculation){if(!fe(this,Gi)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(E!==void 0&&typeof E!="function")throw new TypeError("fetchMethod must be a function if specified");if(ut(this,Nd,E),ut(this,Cu,!!E),ut(this,fn,new Map),ut(this,Sr,new Array(r).fill(void 0)),ut(this,_t,new Array(r).fill(void 0)),ut(this,yi,new D(r)),ut(this,zi,new D(r)),ut(this,zn,0),ut(this,wn,0),ut(this,za,jO.create(r)),ut(this,dn,0),ut(this,Ga,0),typeof l=="function"&&ut(this,ka,l),typeof d=="function"?(ut(this,Qa,d),ut(this,Sn,[])):(ut(this,Qa,void 0),ut(this,Sn,void 0)),ut(this,Xa,!!fe(this,ka)),ut(this,bi,!!fe(this,Qa)),this.noDisposeOnSet=!!f,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!w,this.allowStaleOnFetchRejection=!!A,this.allowStaleOnFetchAbort=!!T,this.ignoreFetchAbort=!!I,this.maxEntrySize!==0){if(fe(this,Gi)!==0&&!_u(fe(this,Gi)))throw new TypeError("maxSize must be a positive integer if specified");if(!_u(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");it(this,Zb,A7).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!O,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!u,this.ttlResolution=_u(a)||a===0?a:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!_u(this.ttl))throw new TypeError("ttl must be a positive integer if specified");it(this,qp,MO).call(this)}if(fe(this,Ha)===0&&this.ttl===0&&fe(this,Gi)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!fe(this,Ha)&&!fe(this,Gi)){const U="LRU_CACHE_UNBOUNDED";dde(U)&&(T7.add(U),E7("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",U,WR))}}static unsafeExposeInternals(e){return{starts:fe(e,Ro),ttls:fe(e,Wa),sizes:fe(e,xo),keyMap:fe(e,fn),keyList:fe(e,Sr),valList:fe(e,_t),next:fe(e,yi),prev:fe(e,zi),get head(){return fe(e,zn)},get tail(){return fe(e,wn)},free:fe(e,za),isBackgroundFetch:r=>{var n;return it(n=e,pr,jr).call(n,r)},backgroundFetch:(r,n,a,s)=>{var o;return it(o=e,Md,pb).call(o,r,n,a,s)},moveToTail:r=>{var n;return it(n=e,Jc,Jh).call(n,r)},indexes:r=>{var n;return it(n=e,xs,gu).call(n,r)},rindexes:r=>{var n;return it(n=e,Rs,mu).call(n,r)},isStale:r=>{var n;return fe(n=e,Wi).call(n,r)}}}get max(){return fe(this,Ha)}get maxSize(){return fe(this,Gi)}get calculatedSize(){return fe(this,Ga)}get size(){return fe(this,dn)}get fetchMethod(){return fe(this,Nd)}get dispose(){return fe(this,ka)}get disposeAfter(){return fe(this,Qa)}getRemainingTTL(e){return fe(this,fn).has(e)?1/0:0}*entries(){for(const e of it(this,xs,gu).call(this))fe(this,_t)[e]!==void 0&&fe(this,Sr)[e]!==void 0&&!it(this,pr,jr).call(this,fe(this,_t)[e])&&(yield[fe(this,Sr)[e],fe(this,_t)[e]])}*rentries(){for(const e of it(this,Rs,mu).call(this))fe(this,_t)[e]!==void 0&&fe(this,Sr)[e]!==void 0&&!it(this,pr,jr).call(this,fe(this,_t)[e])&&(yield[fe(this,Sr)[e],fe(this,_t)[e]])}*keys(){for(const e of it(this,xs,gu).call(this)){const r=fe(this,Sr)[e];r!==void 0&&!it(this,pr,jr).call(this,fe(this,_t)[e])&&(yield r)}}*rkeys(){for(const e of it(this,Rs,mu).call(this)){const r=fe(this,Sr)[e];r!==void 0&&!it(this,pr,jr).call(this,fe(this,_t)[e])&&(yield r)}}*values(){for(const e of it(this,xs,gu).call(this))fe(this,_t)[e]!==void 0&&!it(this,pr,jr).call(this,fe(this,_t)[e])&&(yield fe(this,_t)[e])}*rvalues(){for(const e of it(this,Rs,mu).call(this))fe(this,_t)[e]!==void 0&&!it(this,pr,jr).call(this,fe(this,_t)[e])&&(yield fe(this,_t)[e])}[Symbol.iterator](){return this.entries()}find(e,r={}){for(const n of it(this,xs,gu).call(this)){const a=fe(this,_t)[n],s=it(this,pr,jr).call(this,a)?a.__staleWhileFetching:a;if(s!==void 0&&e(s,fe(this,Sr)[n],this))return this.get(fe(this,Sr)[n],r)}}forEach(e,r=this){for(const n of it(this,xs,gu).call(this)){const a=fe(this,_t)[n],s=it(this,pr,jr).call(this,a)?a.__staleWhileFetching:a;s!==void 0&&e.call(r,s,fe(this,Sr)[n],this)}}rforEach(e,r=this){for(const n of it(this,Rs,mu).call(this)){const a=fe(this,_t)[n],s=it(this,pr,jr).call(this,a)?a.__staleWhileFetching:a;s!==void 0&&e.call(r,s,fe(this,Sr)[n],this)}}purgeStale(){let e=!1;for(const r of it(this,Rs,mu).call(this,{allowStale:!0}))fe(this,Wi).call(this,r)&&(this.delete(fe(this,Sr)[r]),e=!0);return e}dump(){const e=[];for(const r of it(this,xs,gu).call(this,{allowStale:!0})){const n=fe(this,Sr)[r],a=fe(this,_t)[r],s=it(this,pr,jr).call(this,a)?a.__staleWhileFetching:a;if(s===void 0||n===void 0)continue;const o={value:s};if(fe(this,Wa)&&fe(this,Ro)){o.ttl=fe(this,Wa)[r];const u=lh.now()-fe(this,Ro)[r];o.start=Math.floor(Date.now()-u)}fe(this,xo)&&(o.size=fe(this,xo)[r]),e.unshift([n,o])}return e}load(e){this.clear();for(const[r,n]of e){if(n.start){const a=Date.now()-n.start;n.start=lh.now()-a}this.set(r,n.value,n)}}set(e,r,n={}){var h,p,b,_,E;if(r===void 0)return this.delete(e),this;const{ttl:a=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:u=this.sizeCalculation,status:c}=n;let{noUpdateTTL:l=this.noUpdateTTL}=n;const d=fe(this,Hp).call(this,e,r,n.size||0,u);if(this.maxEntrySize&&d>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(e),this;let f=fe(this,dn)===0?void 0:fe(this,fn).get(e);if(f===void 0)f=fe(this,dn)===0?fe(this,wn):fe(this,za).length!==0?fe(this,za).pop():fe(this,dn)===fe(this,Ha)?it(this,Cd,hb).call(this,!1):fe(this,dn),fe(this,Sr)[f]=e,fe(this,_t)[f]=r,fe(this,fn).set(e,f),fe(this,yi)[fe(this,wn)]=f,fe(this,zi)[f]=fe(this,wn),ut(this,wn,f),Dy(this,dn)._++,fe(this,jd).call(this,f,d,c),c&&(c.set="add"),l=!1;else{it(this,Jc,Jh).call(this,f);const w=fe(this,_t)[f];if(r!==w){if(fe(this,Cu)&&it(this,pr,jr).call(this,w)){w.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:O}=w;O!==void 0&&!o&&(fe(this,Xa)&&((h=fe(this,ka))==null||h.call(this,O,e,"set")),fe(this,bi)&&((p=fe(this,Sn))==null||p.push([O,e,"set"])))}else o||(fe(this,Xa)&&((b=fe(this,ka))==null||b.call(this,w,e,"set")),fe(this,bi)&&((_=fe(this,Sn))==null||_.push([w,e,"set"])));if(fe(this,Kc).call(this,f),fe(this,jd).call(this,f,d,c),fe(this,_t)[f]=r,c){c.set="replace";const O=w&&it(this,pr,jr).call(this,w)?w.__staleWhileFetching:w;O!==void 0&&(c.oldValue=O)}}else c&&(c.set="update")}if(a!==0&&!fe(this,Wa)&&it(this,qp,MO).call(this),fe(this,Wa)&&(l||fe(this,Vp).call(this,f,a,s),c&&fe(this,Io).call(this,c,f)),!o&&fe(this,bi)&&fe(this,Sn)){const w=fe(this,Sn);let O;for(;O=w==null?void 0:w.shift();)(E=fe(this,Qa))==null||E.call(this,...O)}return this}pop(){var e;try{for(;fe(this,dn);){const r=fe(this,_t)[fe(this,zn)];if(it(this,Cd,hb).call(this,!0),it(this,pr,jr).call(this,r)){if(r.__staleWhileFetching)return r.__staleWhileFetching}else if(r!==void 0)return r}}finally{if(fe(this,bi)&&fe(this,Sn)){const r=fe(this,Sn);let n;for(;n=r==null?void 0:r.shift();)(e=fe(this,Qa))==null||e.call(this,...n)}}}has(e,r={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:a}=r,s=fe(this,fn).get(e);if(s!==void 0){const o=fe(this,_t)[s];if(it(this,pr,jr).call(this,o)&&o.__staleWhileFetching===void 0)return!1;if(fe(this,Wi).call(this,s))a&&(a.has="stale",fe(this,Io).call(this,a,s));else return n&&fe(this,Xc).call(this,s),a&&(a.has="hit",fe(this,Io).call(this,a,s)),!0}else a&&(a.has="miss");return!1}peek(e,r={}){const{allowStale:n=this.allowStale}=r,a=fe(this,fn).get(e);if(a===void 0||!n&&fe(this,Wi).call(this,a))return;const s=fe(this,_t)[a];return it(this,pr,jr).call(this,s)?s.__staleWhileFetching:s}async fetch(e,r={}){const{allowStale:n=this.allowStale,updateAgeOnGet:a=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:u=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:_,forceRefresh:E=!1,status:w,signal:O}=r;if(!fe(this,Cu))return w&&(w.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:a,noDeleteOnStaleGet:s,status:w});const A={allowStale:n,updateAgeOnGet:a,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:u,size:c,sizeCalculation:l,noUpdateTTL:d,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:b,ignoreFetchAbort:p,status:w,signal:O};let T=fe(this,fn).get(e);if(T===void 0){w&&(w.fetch="miss");const I=it(this,Md,pb).call(this,e,T,A,_);return I.__returned=I}else{const I=fe(this,_t)[T];if(it(this,pr,jr).call(this,I)){const R=n&&I.__staleWhileFetching!==void 0;return w&&(w.fetch="inflight",R&&(w.returnedStale=!0)),R?I.__staleWhileFetching:I.__returned=I}const D=fe(this,Wi).call(this,T);if(!E&&!D)return w&&(w.fetch="hit"),it(this,Jc,Jh).call(this,T),a&&fe(this,Xc).call(this,T),w&&fe(this,Io).call(this,w,T),I;const U=it(this,Md,pb).call(this,e,T,A,_),N=U.__staleWhileFetching!==void 0&&n;return w&&(w.fetch=D?"stale":"refresh",N&&D&&(w.returnedStale=!0)),N?U.__staleWhileFetching:U.__returned=U}}get(e,r={}){const{allowStale:n=this.allowStale,updateAgeOnGet:a=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=r,u=fe(this,fn).get(e);if(u!==void 0){const c=fe(this,_t)[u],l=it(this,pr,jr).call(this,c);return o&&fe(this,Io).call(this,o,u),fe(this,Wi).call(this,u)?(o&&(o.get="stale"),l?(o&&n&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?c.__staleWhileFetching:void 0):(s||this.delete(e),o&&n&&(o.returnedStale=!0),n?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(it(this,Jc,Jh).call(this,u),a&&fe(this,Xc).call(this,u),c))}else o&&(o.get="miss")}delete(e){var n,a,s,o;let r=!1;if(fe(this,dn)!==0){const u=fe(this,fn).get(e);if(u!==void 0)if(r=!0,fe(this,dn)===1)this.clear();else{fe(this,Kc).call(this,u);const c=fe(this,_t)[u];if(it(this,pr,jr).call(this,c)?c.__abortController.abort(new Error("deleted")):(fe(this,Xa)||fe(this,bi))&&(fe(this,Xa)&&((n=fe(this,ka))==null||n.call(this,c,e,"delete")),fe(this,bi)&&((a=fe(this,Sn))==null||a.push([c,e,"delete"]))),fe(this,fn).delete(e),fe(this,Sr)[u]=void 0,fe(this,_t)[u]=void 0,u===fe(this,wn))ut(this,wn,fe(this,zi)[u]);else if(u===fe(this,zn))ut(this,zn,fe(this,yi)[u]);else{const l=fe(this,zi)[u];fe(this,yi)[l]=fe(this,yi)[u];const d=fe(this,yi)[u];fe(this,zi)[d]=fe(this,zi)[u]}Dy(this,dn)._--,fe(this,za).push(u)}}if(fe(this,bi)&&((s=fe(this,Sn))!=null&&s.length)){const u=fe(this,Sn);let c;for(;c=u==null?void 0:u.shift();)(o=fe(this,Qa))==null||o.call(this,...c)}return r}clear(){var e,r,n;for(const a of it(this,Rs,mu).call(this,{allowStale:!0})){const s=fe(this,_t)[a];if(it(this,pr,jr).call(this,s))s.__abortController.abort(new Error("deleted"));else{const o=fe(this,Sr)[a];fe(this,Xa)&&((e=fe(this,ka))==null||e.call(this,s,o,"delete")),fe(this,bi)&&((r=fe(this,Sn))==null||r.push([s,o,"delete"]))}}if(fe(this,fn).clear(),fe(this,_t).fill(void 0),fe(this,Sr).fill(void 0),fe(this,Wa)&&fe(this,Ro)&&(fe(this,Wa).fill(0),fe(this,Ro).fill(0)),fe(this,xo)&&fe(this,xo).fill(0),ut(this,zn,0),ut(this,wn,0),fe(this,za).length=0,ut(this,Ga,0),ut(this,dn,0),fe(this,bi)&&fe(this,Sn)){const a=fe(this,Sn);let s;for(;s=a==null?void 0:a.shift();)(n=fe(this,Qa))==null||n.call(this,...s)}}};Ha=new WeakMap,Gi=new WeakMap,ka=new WeakMap,Qa=new WeakMap,Nd=new WeakMap,dn=new WeakMap,Ga=new WeakMap,fn=new WeakMap,Sr=new WeakMap,_t=new WeakMap,yi=new WeakMap,zi=new WeakMap,zn=new WeakMap,wn=new WeakMap,za=new WeakMap,Sn=new WeakMap,xo=new WeakMap,Ro=new WeakMap,Wa=new WeakMap,Xa=new WeakMap,Cu=new WeakMap,bi=new WeakMap,qp=new WeakSet,MO=function(){const e=new fb(fe(this,Ha)),r=new fb(fe(this,Ha));ut(this,Wa,e),ut(this,Ro,r),ut(this,Vp,(s,o,u=lh.now())=>{if(r[s]=o!==0?u:0,e[s]=o,o!==0&&this.ttlAutopurge){const c=setTimeout(()=>{fe(this,Wi).call(this,s)&&this.delete(fe(this,Sr)[s])},o+1);c.unref&&c.unref()}}),ut(this,Xc,s=>{r[s]=e[s]!==0?lh.now():0}),ut(this,Io,(s,o)=>{if(e[o]){const u=e[o],c=r[o];if(!u||!c)return;s.ttl=u,s.start=c,s.now=n||a();const l=s.now-c;s.remainingTTL=u-l}});let n=0;const a=()=>{const s=lh.now();if(this.ttlResolution>0){n=s;const o=setTimeout(()=>n=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{const o=fe(this,fn).get(s);if(o===void 0)return 0;const u=e[o],c=r[o];if(!u||!c)return 1/0;const l=(n||a())-c;return u-l},ut(this,Wi,s=>{const o=r[s],u=e[s];return!!u&&!!o&&(n||a())-o>u})},Xc=new WeakMap,Io=new WeakMap,Vp=new WeakMap,Wi=new WeakMap,Zb=new WeakSet,A7=function(){const e=new fb(fe(this,Ha));ut(this,Ga,0),ut(this,xo,e),ut(this,Kc,r=>{ut(this,Ga,fe(this,Ga)-e[r]),e[r]=0}),ut(this,Hp,(r,n,a,s)=>{if(it(this,pr,jr).call(this,n))return 0;if(!_u(a))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(a=s(n,r),!_u(a))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return a}),ut(this,jd,(r,n,a)=>{if(e[r]=n,fe(this,Gi)){const s=fe(this,Gi)-e[r];for(;fe(this,Ga)>s;)it(this,Cd,hb).call(this,!0)}ut(this,Ga,fe(this,Ga)+e[r]),a&&(a.entrySize=n,a.totalCalculatedSize=fe(this,Ga))})},Kc=new WeakMap,jd=new WeakMap,Hp=new WeakMap,xs=new WeakSet,gu=function*({allowStale:e=this.allowStale}={}){if(fe(this,dn))for(let r=fe(this,wn);!(!it(this,kp,FO).call(this,r)||((e||!fe(this,Wi).call(this,r))&&(yield r),r===fe(this,zn)));)r=fe(this,zi)[r]},Rs=new WeakSet,mu=function*({allowStale:e=this.allowStale}={}){if(fe(this,dn))for(let r=fe(this,zn);!(!it(this,kp,FO).call(this,r)||((e||!fe(this,Wi).call(this,r))&&(yield r),r===fe(this,wn)));)r=fe(this,yi)[r]},kp=new WeakSet,FO=function(e){return e!==void 0&&fe(this,fn).get(fe(this,Sr)[e])===e},Cd=new WeakSet,hb=function(e){var s,o;const r=fe(this,zn),n=fe(this,Sr)[r],a=fe(this,_t)[r];return fe(this,Cu)&&it(this,pr,jr).call(this,a)?a.__abortController.abort(new Error("evicted")):(fe(this,Xa)||fe(this,bi))&&(fe(this,Xa)&&((s=fe(this,ka))==null||s.call(this,a,n,"evict")),fe(this,bi)&&((o=fe(this,Sn))==null||o.push([a,n,"evict"]))),fe(this,Kc).call(this,r),e&&(fe(this,Sr)[r]=void 0,fe(this,_t)[r]=void 0,fe(this,za).push(r)),fe(this,dn)===1?(ut(this,zn,ut(this,wn,0)),fe(this,za).length=0):ut(this,zn,fe(this,yi)[r]),fe(this,fn).delete(n),Dy(this,dn)._--,r},Md=new WeakSet,pb=function(e,r,n,a){const s=r===void 0?void 0:fe(this,_t)[r];if(it(this,pr,jr).call(this,s))return s;const o=new Xb,{signal:u}=n;u==null||u.addEventListener("abort",()=>o.abort(u.reason),{signal:o.signal});const c={signal:o.signal,options:n,context:a},l=(_,E=!1)=>{const{aborted:w}=o.signal,O=n.ignoreFetchAbort&&_!==void 0;if(n.status&&(w&&!E?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,O&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),w&&!O&&!E)return f(o.signal.reason);const A=p;return fe(this,_t)[r]===p&&(_===void 0?A.__staleWhileFetching?fe(this,_t)[r]=A.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,_,c.options))),_},d=_=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=_),f(_)),f=_=>{const{aborted:E}=o.signal,w=E&&n.allowStaleOnFetchAbort,O=w||n.allowStaleOnFetchRejection,A=O||n.noDeleteOnFetchRejection,T=p;if(fe(this,_t)[r]===p&&(!A||T.__staleWhileFetching===void 0?this.delete(e):w||(fe(this,_t)[r]=T.__staleWhileFetching)),O)return n.status&&T.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),T.__staleWhileFetching;if(T.__returned===T)throw _},h=(_,E)=>{var O;const w=(O=fe(this,Nd))==null?void 0:O.call(this,e,s,c);w&&w instanceof Promise&&w.then(A=>_(A===void 0?void 0:A),E),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(_(void 0),n.allowStaleOnFetchAbort&&(_=A=>l(A,!0)))})};n.status&&(n.status.fetchDispatched=!0);const p=new Promise(h).then(l,d),b=Object.assign(p,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(e,b,{...c.options,status:void 0}),r=fe(this,fn).get(e)):fe(this,_t)[r]=b,b},pr=new WeakSet,jr=function(e){if(!fe(this,Cu))return!1;const r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Xb},Qp=new WeakSet,LO=function(e,r){fe(this,zi)[r]=e,fe(this,yi)[e]=r},Jc=new WeakSet,Jh=function(e){e!==fe(this,wn)&&(e===fe(this,zn)?ut(this,zn,fe(this,yi)[e]):it(this,Qp,LO).call(this,fe(this,zi)[e],fe(this,yi)[e]),it(this,Qp,LO).call(this,fe(this,wn),e),ut(this,wn,e))};let CO=WR;fs.LRUCache=CO;var ty={},QT={},Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.asTermType=Ai.ExpressionType=void 0;var H4;(function(t){t.Aggregate="aggregate",t.Existence="existence",t.Named="named",t.Operator="operator",t.SpecialOperator="specialOperator",t.Term="term",t.Variable="variable",t.AsyncExtension="asyncExtension",t.SyncExtension="syncExtension"})(H4||(Ai.ExpressionType=H4={}));function fde(t){if(t==="namedNode"||t==="literal"||t==="blankNode"||t==="quad")return t}Ai.asTermType=fde;var m2={};Object.defineProperty(m2,"__esModule",{value:!0});m2.Variable=void 0;const hde=Ai;class pde{constructor(e){this.expressionType=hde.ExpressionType.Variable,this.name=e}}m2.Variable=pde;var ht={},dh={},ni={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NamedOperators=t.SetFunctions=t.SetFunction=t.Operators=t.SpecialOperators=t.RegularOperators=t.SpecialOperator=t.RegularOperator=t.TypeURL=t.TypeAlias=void 0;var e;(function(o){o.SPARQL_NUMERIC="SPARQL_NUMERIC",o.SPARQL_STRINGLY="SPARQL_STRINGLY"})(e||(t.TypeAlias=e={}));var r;(function(o){o.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",o.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",o.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",o.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",o.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",o.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",o.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",o.XSD_G_MONTH="http://www.w3.org/2001/XMLSchema#gMonth",o.XSD_G_MONTHDAY="http://www.w3.org/2001/XMLSchema#gMonthDay",o.XSD_G_YEAR="http://www.w3.org/2001/XMLSchema#gYear",o.XSD_G_YEAR_MONTH="http://www.w3.org/2001/XMLSchema#gYearMonth",o.XSD_TIME="http://www.w3.org/2001/XMLSchema#time",o.XSD_G_DAY="http://www.w3.org/2001/XMLSchema#gDay",o.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",o.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",o.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",o.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",o.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",o.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",o.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",o.XSD_INT="http://www.w3.org/2001/XMLSchema#int",o.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",o.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",o.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",o.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",o.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",o.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",o.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",o.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",o.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",o.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",o.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",o.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",o.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",o.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",o.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",o.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",o.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",o.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",o.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",o.XSD_DAY_TIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration"})(r||(t.TypeURL=r={}));var n;(function(o){o.NOT="!",o.UMINUS="uminus",o.UPLUS="uplus",o.EQUAL="=",o.NOT_EQUAL="!=",o.LT="<",o.GT=">",o.LTE="<=",o.GTE=">=",o.MULTIPLICATION="*",o.DIVISION="/",o.ADDITION="+",o.SUBTRACTION="-",o.IS_IRI="isiri",o.IS_URI="isuri",o.IS_BLANK="isblank",o.IS_LITERAL="isliteral",o.IS_NUMERIC="isnumeric",o.STR="str",o.LANG="lang",o.DATATYPE="datatype",o.IRI="iri",o.URI="uri",o.STRDT="strdt",o.STRLANG="strlang",o.UUID="uuid",o.STRUUID="struuid",o.STRLEN="strlen",o.SUBSTR="substr",o.UCASE="ucase",o.LCASE="lcase",o.STRSTARTS="strstarts",o.STRENDS="strends",o.CONTAINS="contains",o.STRBEFORE="strbefore",o.STRAFTER="strafter",o.ENCODE_FOR_URI="encode_for_uri",o.LANG_MATCHES="langmatches",o.REGEX="regex",o.REPLACE="replace",o.ABS="abs",o.ROUND="round",o.CEIL="ceil",o.FLOOR="floor",o.RAND="rand",o.NOW="now",o.YEAR="year",o.MONTH="month",o.DAY="day",o.HOURS="hours",o.MINUTES="minutes",o.SECONDS="seconds",o.TIMEZONE="timezone",o.TZ="tz",o.MD5="md5",o.SHA1="sha1",o.SHA256="sha256",o.SHA384="sha384",o.SHA512="sha512",o.TRIPLE="triple",o.SUBJECT="subject",o.PREDICATE="predicate",o.OBJECT="object",o.IS_TRIPLE="istriple"})(n||(t.RegularOperator=n={}));var a;(function(o){o.BOUND="bound",o.IF="if",o.COALESCE="coalesce",o.LOGICAL_OR="||",o.LOGICAL_AND="&&",o.SAME_TERM="sameterm",o.IN="in",o.NOT_IN="notin",o.CONCAT="concat",o.BNODE="bnode"})(a||(t.SpecialOperator=a={})),t.RegularOperators=new Set(Object.values(n)),t.SpecialOperators=new Set(Object.values(a)),t.Operators=new Set([...t.RegularOperators,...t.SpecialOperators]);var s;(function(o){o.COUNT="count",o.SUM="sum",o.MIN="min",o.MAX="max",o.AVG="avg",o.GROUP_CONCAT="group_concat",o.SAMPLE="sample"})(s||(t.SetFunction=s={})),t.SetFunctions=new Set(Object.values(s)),t.NamedOperators=new Set([r.XSD_STRING,r.XSD_FLOAT,r.XSD_DOUBLE,r.XSD_DECIMAL,r.XSD_INTEGER,r.XSD_DATE_TIME,r.XSD_DATE,r.XSD_BOOLEAN,r.XSD_TIME,r.XSD_DURATION,r.XSD_DAY_TIME_DURATION,r.XSD_YEAR_MONTH_DURATION])})(ni);var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.NoExistenceHook=Ke.NoAggregator=Ke.ExtensionFunctionError=Ke.UnknownNamedOperator=Ke.UnknownOperator=Ke.InvalidTermType=Ke.InvalidExpressionType=Ke.InvalidExpression=Ke.InvalidArity=Ke.UnexpectedError=Ke.ParseError=Ke.EmptyAggregateError=Ke.IncompatibleLanguageOperation=Ke.InvalidTimezoneCall=Ke.CastError=Ke.InvalidCompareArgumentTypes=Ke.InvalidArgumentTypes=Ke.InError=Ke.CoalesceError=Ke.RDFEqualTypeError=Ke.EBVCoercionError=Ke.UnboundVariableError=Ke.InvalidLexicalForm=Ke.isExpressionError=Ke.ExpressionError=void 0;class Ii extends Error{}Ke.ExpressionError=Ii;function yde(t){return t instanceof Ii}Ke.isExpressionError=yde;class bde extends Ii{constructor(e){super(`Invalid lexical form '${ii(e)}'`),this.arg=e}}Ke.InvalidLexicalForm=bde;class _de extends Ii{constructor(e,r){super(`Unbound variable '${ii(e)}'`),this.variable=e,this.bindings=r}}Ke.UnboundVariableError=_de;class gde extends Ii{constructor(e){super(`Cannot coerce term to EBV '${ii(e)}'`),this.arg=e}}Ke.EBVCoercionError=gde;class mde extends Ii{constructor(e){super("Equality test for literals with unsupported datatypes"),this.args=e}}Ke.RDFEqualTypeError=mde;class vde extends Ii{constructor(e){super("All COALESCE arguments threw errors"),this.errors=e}}Ke.CoalesceError=vde;class wde extends Ii{constructor(e){super(`Some argument to IN errorred and none where equal. ${e.map(r=>`(${r.toString()}) `).join("and ")}`),this.errors=e}}Ke.InError=wde;class Sde extends Ii{constructor(e,r){super(`Argument types not valid for operator: '${ii(r)}' with '${ii(e)}`),this.args=e,this.op=r}}Ke.InvalidArgumentTypes=Sde;class Tde extends Ii{constructor(e,r){super(`Compared argument types are supported: '${e.termType}' and '${r.termType}'`),this.arg0=e,this.arg1=r}}Ke.InvalidCompareArgumentTypes=Tde;class Ede extends Ii{constructor(e,r){super(`Invalid cast: '${ii(e)}' to '${ii(r)}'`),this.arg=e}}Ke.CastError=Ede;class Ode extends Ii{constructor(e){super(`TIMEZONE call on ${e} which has no timezone`),this.dateString=e}}Ke.InvalidTimezoneCall=Ode;class Ade extends Ii{constructor(e,r){super(`Operation on incompatible language literals '${ii(e)}' and '${ii(r)}'`),this.arg1=e,this.arg2=r}}Ke.IncompatibleLanguageOperation=Ade;class xde extends Ii{constructor(){super("Empty aggregate expression")}}Ke.EmptyAggregateError=xde;class Rde extends Ii{constructor(e,r){super(`Failed to parse ${e} as ${r}.`)}}Ke.ParseError=Rde;class Ide extends Error{constructor(e,r){super(`Programmer Error '${e}'`),this.payload=r}}Ke.UnexpectedError=Ide;class Pde extends Error{constructor(e,r){super(`The number of args does not match the arity of the operator '${ii(r)}'.`),this.args=e,this.op=r}}Ke.InvalidArity=Pde;class Dde extends Error{constructor(e){super(`Invalid SPARQL Expression '${ii(e)}'`)}}Ke.InvalidExpression=Dde;class Nde extends Error{constructor(e){super(`Invalid expression type for SPARQL Expression '${ii(e)}'`),this.expr=e}}Ke.InvalidExpressionType=Nde;class jde extends Error{constructor(e){super(`Invalid term type for term '${ii(e)}'`),this.term=e}}Ke.InvalidTermType=jde;class Cde extends Error{constructor(e){super(`Unknown operator: '${ii(e)}`)}}Ke.UnknownOperator=Cde;class Mde extends Error{constructor(e){super(`Unknown named operator: '${ii(e)}'`)}}Ke.UnknownNamedOperator=Mde;class Fde extends Error{constructor(e,r){r instanceof Error?super(`Error thrown in ${e}: ${r.message}${r.stack?`
${r.stack}`:""}`):super(`Error thrown in ${e}`)}}Ke.ExtensionFunctionError=Fde;class Lde extends Error{constructor(e){super(`Aggregate expression ${ii(e)} found, but no aggregate hook provided.`)}}Ke.NoAggregator=Lde;class Bde extends Error{constructor(){super("EXISTS found, but no existence hook provided.")}}Ke.NoExistenceHook=Bde;function ii(t){return JSON.stringify(t)}var zr={},Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.extractTimeZone=Ct.extractRawTimeZone=Ct.dayTimeDurationsToSeconds=Ct.yearMonthDurationsToMonths=Ct.trimToDayTimeDuration=Ct.trimToYearMonthDuration=Ct.toUTCDate=Ct.toJSDate=Ct.negateDuration=Ct.toDateTimeRepresentation=Ct.defaultedDateTimeRepresentation=Ct.simplifyDurationRepresentation=Ct.defaultedDurationRepresentation=Ct.defaultedYearMonthDurationRepresentation=Ct.defaultedDayTimeDurationRepresentation=void 0;function x7(t){return{day:t.day||0,hours:t.hours||0,minutes:t.minutes||0,seconds:t.seconds||0}}Ct.defaultedDayTimeDurationRepresentation=x7;function R7(t){return{year:t.year||0,month:t.month||0}}Ct.defaultedYearMonthDurationRepresentation=R7;function I7(t){return{...x7(t),...R7(t)}}Ct.defaultedDurationRepresentation=I7;function $de(t){const e=I7(t),r={},n=e.year+Math.trunc(e.month/12);n&&(r.year=n,e.month%=12),e.month&&(r.month=e.month);const a=e.day+Math.trunc(e.hours/24)+Math.trunc(e.minutes/(24*60))+Math.trunc(e.seconds/(24*60*60));a&&(r.day=a,e.hours%=24,e.minutes%=24*60,e.seconds%=24*60*60);const s=e.hours+Math.trunc(e.minutes/60)+Math.trunc(e.seconds/(60*60));s&&(r.hours=s,e.minutes%=60,e.seconds%=60*60);const o=e.minutes+Math.trunc(e.seconds/60);return o&&(r.minutes=o,e.seconds%=60),e.seconds&&(r.seconds=e.seconds),r}Ct.simplifyDurationRepresentation=$de;function P7(t){return{...t,day:t.day||1,hours:t.hours||0,month:t.month||1,year:t.year||0,seconds:t.seconds||0,minutes:t.minutes||0}}Ct.defaultedDateTimeRepresentation=P7;function Ude({date:t,timeZone:e}){return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hours:t.getHours(),minutes:t.getMinutes(),seconds:t.getSeconds(),zoneHours:e.zoneHours,zoneMinutes:e.zoneMinutes}}Ct.toDateTimeRepresentation=Ude;function qde(t){return{year:t.year!==void 0?-1*t.year:void 0,month:t.month!==void 0?-1*t.month:void 0,day:t.day!==void 0?-1*t.day:void 0,hours:t.hours!==void 0?-1*t.hours:void 0,minutes:t.minutes!==void 0?-1*t.minutes:void 0,seconds:t.seconds!==void 0?-1*t.seconds:void 0}}Ct.negateDuration=qde;function D7(t){const e=new Date(t.year,t.month-1,t.day,t.hours,t.minutes,Math.trunc(t.seconds),t.seconds%1*1e3);return 0<=t.year&&t.year<100&&e.setFullYear(e.getFullYear()-1900),e}Ct.toJSDate=D7;function Vde(t,e){const r=D7(P7(t)),n=r.getTimezoneOffset(),a=t.zoneHours===void 0?e.zoneHours:t.zoneHours,s=t.zoneMinutes===void 0?e.zoneMinutes:t.zoneMinutes;return new Date(r.getTime()-(n+a*60+s)*60*1e3)}Ct.toUTCDate=Vde;function Hde(t){return{year:t.year,month:t.month}}Ct.trimToYearMonthDuration=Hde;function kde(t){return{day:t.day,hours:t.hours,minutes:t.minutes,seconds:t.seconds}}Ct.trimToDayTimeDuration=kde;function Qde(t){return t.year*12+t.month}Ct.yearMonthDurationsToMonths=Qde;function Gde(t){return((t.day*24+t.hours)*60+t.minutes)*60+t.seconds}Ct.dayTimeDurationsToSeconds=Gde;function zde(t){return/(Z|([+-]\d\d:\d\d))?$/u.exec(t)[0]}Ct.extractRawTimeZone=zde;function Wde(t){return{zoneHours:t.getTimezoneOffset()/60,zoneMinutes:t.getTimezoneOffset()%60}}Ct.extractTimeZone=Wde;var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.elapsedDuration=Lo.addDurationToDateTime=Lo.maximumDayInMonthFor=void 0;const k4=Ct;function Po(t,e,r=0){const n=t-r,a=e-r,s=Math.floor(n/a);return{intDiv:s,remainder:t-s*a}}function yb(t,e){const{intDiv:r,remainder:n}=Po(e,13,1),a=t+r;return[1,3,5,7,8,10,12].includes(n)?31:[4,6,9,11].includes(n)?30:n===2&&(Po(a,400).remainder===0||Po(a,100).remainder!==0&&Po(a,4).remainder===0)?29:28}Lo.maximumDayInMonthFor=yb;function Xde(t,e){const r={...t};let n=Po(t.month+e.month,13,1);for(r.month=n.remainder,r.year=t.year+e.year+n.intDiv,n=Po(t.seconds+e.seconds,60),r.seconds=n.remainder,n=Po(t.minutes+e.minutes+n.intDiv,60),r.minutes=n.remainder,n=Po(t.hours+e.hours+n.intDiv,24),r.hours=n.remainder,r.day=t.day+e.day+n.intDiv;;){let a;if(r.day<1)r.day+=yb(r.year,r.month-1),a=-1;else if(r.day>yb(r.year,r.month))r.day-=yb(r.year,r.month),a=1;else break;n=Po(r.month+a,13,1),r.month=n.remainder,r.year+=n.intDiv}return r}Lo.addDurationToDateTime=Xde;function Kde(t,e,r){const n=(0,k4.toUTCDate)(t,r),a=(0,k4.toUTCDate)(e,r),s=n.getTime()-a.getTime();return{day:Math.floor(s/(1e3*60*60*24)),hours:Math.floor(s%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(s%(1e3*60*60)/(1e3*60)),seconds:s%(1e3*60)}}Lo.elapsedDuration=Kde;Object.defineProperty(zr,"__esModule",{value:!0});zr.parseDayTimeDuration=zr.parseYearMonthDuration=zr.parseDuration=zr.parseTime=zr.parseDate=zr.parseDateTime=zr.parseXSDInteger=zr.parseXSDDecimal=zr.parseXSDFloat=void 0;const Jde=Ct,Bo=Ke,Yde=Lo;function Zde(t){const e=Number(t);return Number.isNaN(e)?t==="NaN"?Number.NaN:t==="INF"||t==="+INF"?Number.POSITIVE_INFINITY:t==="-INF"?Number.NEGATIVE_INFINITY:void 0:e}zr.parseXSDFloat=Zde;function efe(t){const e=Number(t);return Number.isNaN(e)?void 0:e}zr.parseXSDDecimal=efe;function tfe(t){const e=Number.parseInt(t,10);return Number.isNaN(e)?void 0:e}zr.parseXSDInteger=tfe;function rfe(t){const[e,r]=t.split("T");return{...j7(e),...C7(r)}}zr.parseDateTime=rfe;function N7(t){if(t==="")return{zoneHours:void 0,zoneMinutes:void 0};if(t==="Z")return{zoneHours:0,zoneMinutes:0};const r=t.replace(/^([+|-])(\d\d):(\d\d)$/gu,"$11!$2!$3").split("!").map(n=>Number(n));return{zoneHours:r[0]*r[1],zoneMinutes:r[0]*r[2]}}function j7(t){const e=t.replace(/^(-)?([123456789]*\d{4})-(\d\d)-(\d\d)(Z|([+-]\d\d:\d\d))?$/gu,"$11!$2!$3!$4!$5");if(e===t)throw new Bo.ParseError(t,"date");const r=e.split("!"),n=r.slice(0,-1).map(s=>Number(s)),a={year:n[0]*n[1],month:n[2],day:n[3],...N7(r[4])};if(!(1<=a.month&&a.month<=12)||!(1<=a.day&&a.day<=(0,Yde.maximumDayInMonthFor)(a.year,a.month)))throw new Bo.ParseError(t,"date");return a}zr.parseDate=j7;function C7(t){const e=t.replace(/^(\d\d):(\d\d):(\d\d(\.\d+)?)(Z|([+-]\d\d:\d\d))?$/gu,"$1!$2!$3!$5");if(e===t)throw new Bo.ParseError(t,"time");const r=e.split("!"),n=r.slice(0,-1).map(s=>Number(s)),a={hours:n[0],minutes:n[1],seconds:n[2],...N7(r[3])};if(a.seconds>=60||a.minutes>=60||a.hours>24||a.hours===24&&(a.minutes!==0||a.seconds!==0))throw new Bo.ParseError(t,"time");return a}function nfe(t){const e=C7(t);return e.hours%=24,e}zr.parseTime=nfe;function gR(t){const[e,r]=t.split("T"),n=e.replace(/^(-)?P(\d+Y)?(\d+M)?(\d+D)?$/gu,"$11S!$2!$3!$4");if(n===e)throw new Bo.ParseError(t,"duration");const a=n.split("!");if(r!==void 0){const u=r.replace(/^(\d+H)?(\d+M)?(\d+(\.\d+)?S)?$/gu,"$1!$2!$3");if(r===""||r===u)throw new Bo.ParseError(t,"duration");a.push(...u.split("!"))}const s=a.map(u=>u.slice(0,-1));if(!s.slice(1).some(u=>u))throw new Bo.ParseError(t,"duration");const o=Number(s[0]);return(0,Jde.simplifyDurationRepresentation)({year:s[1]?o*Number(s[1]):void 0,month:s[2]?o*Number(s[2]):void 0,day:s[3]?o*Number(s[3]):void 0,hours:s[4]?o*Number(s[4]):void 0,minutes:s[5]?o*Number(s[5]):void 0,seconds:s[6]?o*Number(s[6]):void 0})}zr.parseDuration=gR;function ife(t){const e=gR(t);if(["hours","minutes","seconds","day"].some(r=>!!e[r]))throw new Bo.ParseError(t,"yearMonthDuration");return e}zr.parseYearMonthDuration=ife;function afe(t){const e=gR(t);if(["year","month"].some(r=>!!e[r]))throw new Bo.ParseError(t,"dayTimeDuration");return e}zr.parseDayTimeDuration=afe;var GT={},wr={},fh={},Q4;function M7(){if(Q4)return fh;Q4=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.OverloadTree=void 0;const t=ia(),e=v2();let r=class BO{constructor(a,s){this.identifier=a,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=s||0,this.promotionCount=void 0}getSubtree(a){const s=(0,e.asGeneralType)(a);if(s)return this.generalOverloads[s];for(const[o,u]of this.literalOverLoads)if(a===o)return u}getImplementationExact(a){let s=this;for(const o of a)if(s=s.getSubtree(o),!s)return;return s.implementation}search(a,s,o){let u=o[this.identifier],c=0;for(;c<a.length&&(u!=null&&u.cache);){const f=a[c],h=(0,t.isLiteralTermExpression)(f);u=u.cache[h?h.dataType:f.termType],c++}if(c===a.length&&(u!=null&&u.func))return u.func;const l=[],d=0;if(a.length===0)return this.implementation;for(l.push(...this.getSubTreeWithArg(a[d],s).map(f=>({node:f,index:d+1})));l.length>0;){const{index:f,node:h}=l.pop();if(f===a.length&&h.implementation)return this.addToCache(o,a,h.implementation),h.implementation;l.push(...h.getSubTreeWithArg(a[f],s).map(p=>({node:p,index:f+1})))}}addToCache(a,s,o){function u(l,d){return d in l||(l[d]={}),l[d]}let c=u(a,this.identifier);for(const l of s){const d=(0,t.isLiteralTermExpression)(l),f=d?d.dataType:l.termType;c.cache=c.cache||{},c=u(c.cache,f)}c.func=o}addOverload(a,s){this._addOverload([...a],s,0)}_addOverload(a,s,o){var d;const[u,...c]=a;if(!u){(this.promotionCount===void 0||o<=this.promotionCount)&&(this.promotionCount=o,this.implementation=s);return}let l=this.getSubtree(u);if(!l){const f=new BO(this.identifier,this.depth+1),h=(0,e.asGeneralType)(u);h&&(this.generalOverloads[h]=f);const p=(0,e.asOverrideType)(u);p&&this.literalOverLoads.push([p,f]),l=f}l._addOverload(c,s,o),(d=e.typePromotion[u])==null||d.forEach(f=>this.addPromotedOverload(f.typeToPromote,s,f.conversionFunction,c,o))}addPromotedOverload(a,s,o,u,c){let l=this.getSubtree(a);if(!l){const d=new BO(this.identifier,this.depth+1);this.literalOverLoads.push([a,d]),l=d}l._addOverload(u,d=>f=>s(d)([...f.slice(0,this.depth),o(f[this.depth]),...f.slice(this.depth+1,f.length)]),c+1)}getSubTreeWithArg(a,s){const o=[],u=(0,t.isLiteralTermExpression)(a);if(this.generalOverloads.term&&o.push(this.generalOverloads.term),this.generalOverloads[a.termType]&&o.push(this.generalOverloads[a.termType]),u){const c=(0,e.asKnownLiteralType)(u.dataType);let l;c?l=e.superTypeDictTable[c]:l=(0,e.getSuperTypes)(u.dataType,s);const d=this.literalOverLoads.filter(([f,h])=>f in l).map(([f,h])=>[l[f],h]);d.sort(([f,h],[p,b])=>f-p),o.push(...d.map(([f,h])=>h))}return o}};return fh.OverloadTree=r,fh}var G4;function ro(){if(G4)return wr;G4=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.expressionToVar=wr.dateTime=wr.langString=wr.string=wr.double=wr.float=wr.decimal=wr.integer=wr.bool=wr.Builder=wr.declare=void 0;const t=ft,e=ia(),r=ia(),n=ni,a=ni,s=Ke,o=M7(),u=new t.DataFactory;function c(A){return new l(A)}wr.declare=c;class l{constructor(T){this.overloadTree=new o.OverloadTree(T),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}static wrapInvalidLexicalProtected(T){return I=>D=>(D.forEach((U,H)=>{if(U instanceof r.NonLexicalLiteral)throw new s.InvalidLexicalForm(D[H].toRDF())}),T(I)(D))}set(T,I,D=!0){return this.overloadTree.addOverload(T,D?l.wrapInvalidLexicalProtected(I):I),this}copy({from:T,to:I}){const D=this.overloadTree.getImplementationExact(T);if(!D)throw new s.UnexpectedError("Tried to copy implementation, but types not found",{from:T,to:I});return this.set(I,D)}onUnary(T,I,D=!0){return this.set([T],U=>([H])=>I(U)(H),D)}onUnaryTyped(T,I,D=!0){return this.set([T],U=>([H])=>I(U)(H.typedValue),D)}onBinary(T,I,D=!0){return this.set(T,U=>([H,N])=>I(U)(H,N),D)}onBinaryTyped(T,I,D=!0){return this.set(T,U=>([H,N])=>I(U)(H.typedValue,N.typedValue),D)}onTernaryTyped(T,I,D=!0){return this.set(T,U=>([H,N,R])=>I(U)(H.typedValue,N.typedValue,R.typedValue),D)}onTernary(T,I,D=!0){return this.set(T,U=>([H,N,R])=>I(U)(H,N,R),D)}onQuaternaryTyped(T,I,D=!0){return this.set(T,U=>([H,N,R,F])=>I(U)(H.typedValue,N.typedValue,R.typedValue,F.typedValue),D)}onTerm1(T,I=!1){return this.set(["term"],D=>([U])=>T(D)(U),I)}onTerm3(T){return this.set(["term","term","term"],I=>([D,U,H])=>T(I)(D,U,H))}onQuad1(T){return this.set(["quad"],I=>([D])=>T(I)(D))}onLiteral1(T,I=!0){return this.set(["literal"],D=>([U])=>T(D)(U),I)}onBoolean1(T,I=!0){return this.set([n.TypeURL.XSD_BOOLEAN],D=>([U])=>T(D)(U),I)}onBoolean1Typed(T,I=!0){return this.set([n.TypeURL.XSD_BOOLEAN],D=>([U])=>T(D)(U.typedValue),I)}onString1(T,I=!0){return this.set([n.TypeURL.XSD_STRING],D=>([U])=>T(D)(U),I)}onString1Typed(T,I=!0){return this.set([n.TypeURL.XSD_STRING],D=>([U])=>T(D)(U.typedValue),I)}onLangString1(T,I=!0){return this.set([n.TypeURL.RDF_LANG_STRING],D=>([U])=>T(D)(U),I)}onStringly1(T,I=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],D=>([U])=>T(D)(U),I)}onStringly1Typed(T,I=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],D=>([U])=>T(D)(U.typedValue),I)}onNumeric1(T,I=!0){return this.set([n.TypeAlias.SPARQL_NUMERIC],D=>([U])=>T(D)(U),I)}onDateTime1(T,I=!0){return this.set([n.TypeURL.XSD_DATE_TIME],D=>([U])=>T(D)(U),I)}numericConverter(T,I=!0){const D=U=>H=>T(U)(H.typedValue);return this.onBinary([a.TypeURL.XSD_INTEGER],U=>H=>f(D(U)(H)),I).onBinary([a.TypeURL.XSD_DECIMAL],U=>H=>h(D(U)(H)),I).onBinary([a.TypeURL.XSD_FLOAT],U=>H=>p(D(U)(H)),I).onBinary([a.TypeURL.XSD_DOUBLE],U=>H=>b(D(U)(H)),I)}arithmetic(T,I=!0){const D=U=>(H,N)=>T(U)(H.typedValue,N.typedValue);return this.onBinary([a.TypeURL.XSD_INTEGER,a.TypeURL.XSD_INTEGER],U=>(H,N)=>f(D(U)(H,N)),I).onBinary([a.TypeURL.XSD_DECIMAL,a.TypeURL.XSD_DECIMAL],U=>(H,N)=>h(D(U)(H,N)),I).onBinary([a.TypeURL.XSD_FLOAT,a.TypeURL.XSD_FLOAT],U=>(H,N)=>p(D(U)(H,N)),I).onBinary([a.TypeURL.XSD_DOUBLE,a.TypeURL.XSD_DOUBLE],U=>(H,N)=>b(D(U)(H,N)),I)}numberTest(T){return this.numeric(I=>([D,U])=>{const H=T(I)(D.typedValue,U.typedValue);return d(H)})}stringTest(T,I=!0){return this.set([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],D=>([U,H])=>{const N=T(D)(U.typedValue,H.typedValue);return d(N)},I)}booleanTest(T,I=!0){return this.set([n.TypeURL.XSD_BOOLEAN,n.TypeURL.XSD_BOOLEAN],D=>([U,H])=>{const N=T(D)(U.typedValue,H.typedValue);return d(N)},I)}dateTimeTest(T,I=!0){return this.set([n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_DATE_TIME],D=>([U,H])=>{const N=T(D)(U.typedValue,H.typedValue);return d(N)},I)}numeric(T){return this.set([n.TypeAlias.SPARQL_NUMERIC,n.TypeAlias.SPARQL_NUMERIC],T)}}wr.Builder=l;function d(A){return new e.BooleanLiteral(A)}wr.bool=d;function f(A){return new e.IntegerLiteral(A)}wr.integer=f;function h(A){return new e.DecimalLiteral(A)}wr.decimal=h;function p(A){return new e.FloatLiteral(A)}wr.float=p;function b(A){return new e.DoubleLiteral(A)}wr.double=b;function _(A){return new e.StringLiteral(A)}wr.string=_;function E(A,T){return new e.LangStringLiteral(A,T)}wr.langString=E;function w(A,T){return new e.DateTimeLiteral(A,T)}wr.dateTime=w;function O(A){return u.variable(A.name.slice(1))}return wr.expressionToVar=O,wr}var z4;function v2(){return z4||(z4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.typePromotion=t.isSubTypeOf=t.getSuperTypeDict=t.isInternalSubType=t.asGeneralType=t.asOverrideType=t.asKnownLiteralType=t.asTypeAlias=t.typeAliasCheck=t.extensionTableInit=t.getSuperTypes=t.superTypeDictTable=t.extensionTableInput=void 0;const e=ia(),r=ro(),n=ni;t.extensionTableInput={[n.TypeURL.XSD_DATE_TIME_STAMP]:n.TypeURL.XSD_DATE_TIME,[n.TypeURL.XSD_DAY_TIME_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.XSD_YEAR_MONTH_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.RDF_LANG_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_NORMALIZED_STRING]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_TOKEN]:n.TypeURL.XSD_NORMALIZED_STRING,[n.TypeURL.XSD_LANGUAGE]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NM_TOKEN]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NAME]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NC_NAME]:n.TypeURL.XSD_NAME,[n.TypeURL.XSD_ENTITY]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID_REF]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_DOUBLE]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_FLOAT]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_DECIMAL]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_INTEGER]:n.TypeURL.XSD_DECIMAL,[n.TypeURL.XSD_NON_POSITIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_NEGATIVE_INTEGER]:n.TypeURL.XSD_NON_POSITIVE_INTEGER,[n.TypeURL.XSD_LONG]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_INT]:n.TypeURL.XSD_LONG,[n.TypeURL.XSD_SHORT]:n.TypeURL.XSD_INT,[n.TypeURL.XSD_BYTE]:n.TypeURL.XSD_SHORT,[n.TypeURL.XSD_NON_NEGATIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_POSITIVE_INTEGER]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_LONG]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_INT]:n.TypeURL.XSD_UNSIGNED_LONG,[n.TypeURL.XSD_UNSIGNED_SHORT]:n.TypeURL.XSD_UNSIGNED_INT,[n.TypeURL.XSD_UNSIGNED_BYTE]:n.TypeURL.XSD_UNSIGNED_SHORT,[n.TypeURL.XSD_DATE_TIME]:"term",[n.TypeURL.XSD_BOOLEAN]:"term",[n.TypeURL.XSD_DATE]:"term",[n.TypeURL.XSD_G_MONTH]:"term",[n.TypeURL.XSD_G_MONTHDAY]:"term",[n.TypeURL.XSD_G_YEAR]:"term",[n.TypeURL.XSD_G_YEAR_MONTH]:"term",[n.TypeURL.XSD_TIME]:"term",[n.TypeURL.XSD_G_DAY]:"term",[n.TypeURL.XSD_DURATION]:"term",[n.TypeAlias.SPARQL_NUMERIC]:"term",[n.TypeAlias.SPARQL_STRINGLY]:"term",[n.TypeURL.XSD_ANY_URI]:"term"},t.superTypeDictTable=Object.create(null);function a(_,E){const w=E.cache.get(_);if(w)return w;const O=E.discoverer(_);if(O==="term"){const I=Object.create(null);return I.__depth=0,I[_]=0,E.cache.set(_,I),I}let A;const T=l(O);return T?A={...t.superTypeDictTable[T]}:A={...a(O,E)},A.__depth++,A[_]=A.__depth,E.cache.set(_,A),A}t.getSuperTypes=a;function s(){for(const[_,E]of Object.entries(t.extensionTableInput)){const w=_;t.superTypeDictTable[w]||o(w,E,t.superTypeDictTable)}}t.extensionTableInit=s,s();function o(_,E,w){if(E==="term"||E===void 0){const O=Object.create(null);O.__depth=0,O[_]=0,w[_]=O;return}w[E]||o(E,t.extensionTableInput[E],w),w[_]={...w[E],[_]:w[E].__depth+1,__depth:w[E].__depth+1}}t.typeAliasCheck=Object.create(null);function u(){for(const _ of Object.values(n.TypeAlias))t.typeAliasCheck[_]=!0}u();function c(_){if(_ in t.typeAliasCheck)return _}t.asTypeAlias=c;function l(_){if(_ in t.superTypeDictTable)return _}t.asKnownLiteralType=l;function d(_){if(l(_)||_==="term")return _}t.asOverrideType=d;function f(_){if(_==="term"||(0,e.asTermType)(_))return _}t.asGeneralType=f;function h(_,E){return _!=="term"&&t.superTypeDictTable[_]&&t.superTypeDictTable[_][E]!==void 0}t.isInternalSubType=h;function p(_,E){const w=l(_);return w?t.superTypeDictTable[w]:a(_,E)}t.getSuperTypeDict=p;function b(_,E,w){return _==="term"?!1:p(_,w)[E]!==void 0}t.isSubTypeOf=b,t.typePromotion={[n.TypeURL.XSD_STRING]:[{typeToPromote:n.TypeURL.XSD_ANY_URI,conversionFunction:_=>(0,r.string)(_.str())}],[n.TypeURL.XSD_DOUBLE]:[{typeToPromote:n.TypeURL.XSD_FLOAT,conversionFunction:_=>(0,r.double)(_.typedValue)},{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:_=>(0,r.double)(_.typedValue)}],[n.TypeURL.XSD_FLOAT]:[{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:_=>(0,r.float)(_.typedValue)}]}}(GT)),GT}var W4;function Pl(){if(W4)return dh;W4=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.TermTransformer=void 0;const t=Zt,e=gt,r=ia(),n=ni,a=Ke,s=Ke,o=zr,u=zr,c=v2();let l=class{constructor(f){this.superTypeProvider=f}transformRDFTermUnsafe(f){return this.transformTerm({term:f,type:e.Algebra.types.EXPRESSION,expressionType:e.Algebra.expressionTypes.TERM})}transformTerm(f){if(!f.term)throw new a.InvalidExpression(f);switch(f.term.termType){case"Variable":return new r.Variable(t.termToString(f.term));case"Literal":return this.transformLiteral(f.term);case"NamedNode":return new r.NamedNode(f.term.value);case"BlankNode":return new r.BlankNode(f.term.value);case"Quad":return new r.Quad(f.term,this.superTypeProvider);default:throw new a.InvalidTermType(f)}}transformLiteral(f){if(!f.datatype||[null,void 0,""].includes(f.datatype.value))return f.language?new r.LangStringLiteral(f.value,f.language):new r.StringLiteral(f.value);const h=f.datatype.value,p=(0,c.getSuperTypeDict)(h,this.superTypeProvider);try{if(n.TypeURL.XSD_STRING in p)return new r.StringLiteral(f.value,h);if(n.TypeURL.RDF_LANG_STRING in p)return new r.LangStringLiteral(f.value,f.language);if(n.TypeURL.XSD_YEAR_MONTH_DURATION in p)return new r.YearMonthDurationLiteral((0,o.parseYearMonthDuration)(f.value),f.value,h);if(n.TypeURL.XSD_DAY_TIME_DURATION in p)return new r.DayTimeDurationLiteral((0,o.parseDayTimeDuration)(f.value),f.value,h);if(n.TypeURL.XSD_DURATION in p)return new r.DurationLiteral((0,o.parseDuration)(f.value),f.value,h);if(n.TypeURL.XSD_DATE_TIME in p){const E=new Date(f.value);return Number.isNaN(E.getTime())?new r.NonLexicalLiteral(void 0,h,this.superTypeProvider,f.value):new r.DateTimeLiteral((0,o.parseDateTime)(f.value),f.value,h)}if(n.TypeURL.XSD_DATE in p)return new r.DateLiteral((0,o.parseDate)(f.value),f.value,h);if(n.TypeURL.XSD_TIME in p)return new r.TimeLiteral((0,o.parseTime)(f.value),f.value,h);if(n.TypeURL.XSD_BOOLEAN in p)return f.value!=="true"&&f.value!=="false"&&f.value!=="1"&&f.value!=="0"?new r.NonLexicalLiteral(void 0,h,this.superTypeProvider,f.value):new r.BooleanLiteral(f.value==="true"||f.value==="1",f.value);if(n.TypeURL.XSD_DECIMAL in p){const E=u.parseXSDDecimal(f.value);return E===void 0?new r.NonLexicalLiteral(void 0,h,this.superTypeProvider,f.value):n.TypeURL.XSD_INTEGER in p?new r.IntegerLiteral(E,h,f.value):new r.DecimalLiteral(E,h,f.value)}const b=n.TypeURL.XSD_FLOAT in p,_=n.TypeURL.XSD_DOUBLE in p;if(b||_){const E=u.parseXSDFloat(f.value);return E===void 0?new r.NonLexicalLiteral(void 0,h,this.superTypeProvider,f.value):b?new r.FloatLiteral(E,h,f.value):new r.DoubleLiteral(E,h,f.value)}return new r.Literal(f.value,h,f.value)}catch(b){if(b instanceof Error&&(0,s.isExpressionError)(b))return new r.NonLexicalLiteral(void 0,h,this.superTypeProvider,f.value);throw b}}};return dh.TermTransformer=l,dh}var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.serializeDuration=Cs.serializeTime=Cs.serializeDate=Cs.serializeDateTime=void 0;function $o(t,e=2){return t.toLocaleString(void 0,{minimumIntegerDigits:e,useGrouping:!1})}function sfe(t){return`${L7({year:t.year,month:t.month,day:t.day})}T${B7(t)}`}Cs.serializeDateTime=sfe;function F7(t){return t.zoneHours===void 0||t.zoneMinutes===void 0?"":t.zoneHours===0&&t.zoneMinutes===0?"Z":`${t.zoneHours>=0?`+${$o(t.zoneHours)}`:$o(t.zoneHours)}:${$o(Math.abs(t.zoneMinutes))}`}function L7(t){return`${$o(t.year,4)}-${$o(t.month)}-${$o(t.day)}${F7(t)}`}Cs.serializeDate=L7;function B7(t){return`${$o(t.hours)}:${$o(t.minutes)}:${$o(t.seconds)}${F7(t)}`}Cs.serializeTime=B7;function ofe(t,e="PT0S"){if(!Object.values(t).some(d=>(d||0)!==0))return e;const r=Object.values(t).some(d=>(d||0)<0)?"-":"",n=t.year?`${Math.abs(t.year)}Y`:"",a=t.month?`${Math.abs(t.month)}M`:"",s=t.day?`${Math.abs(t.day)}D`:"",o=`${r}P${n}${a}${s}`;if(!(t.hours||t.minutes||t.seconds))return o;const u=t.hours?`${Math.abs(t.hours)}H`:"",c=t.minutes?`${Math.abs(t.minutes)}M`:"",l=t.seconds?`${Math.abs(t.seconds)}S`:"";return`${o}T${u}${c}${l}`}Cs.serializeDuration=ofe;var X4;function ufe(){if(X4)return ht;X4=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.isNonLexicalLiteral=ht.NonLexicalLiteral=ht.YearMonthDurationLiteral=ht.DayTimeDurationLiteral=ht.DurationLiteral=ht.DateLiteral=ht.TimeLiteral=ht.DateTimeLiteral=ht.StringLiteral=ht.LangStringLiteral=ht.BooleanLiteral=ht.DoubleLiteral=ht.FloatLiteral=ht.DecimalLiteral=ht.IntegerLiteral=ht.NumericLiteral=ht.Literal=ht.isLiteralTermExpression=ht.Quad=ht.BlankNode=ht.NamedNode=ht.Term=void 0;const t=ft,e=Pl(),r=ni,n=ni,a=Ke,s=Cs,o=v2(),u=Ai,c=new t.DataFactory;let l=class{constructor(){this.expressionType=u.ExpressionType.Term}str(){throw new a.InvalidArgumentTypes([this],r.RegularOperator.STR)}coerceEBV(){throw new a.EBVCoercionError(this)}};ht.Term=l;class d extends l{constructor(Q){super(),this.value=Q,this.termType="namedNode"}toRDF(){return c.namedNode(this.value)}str(){return this.value}}ht.NamedNode=d;class f extends l{constructor(Q){super(),this.termType="blankNode",this.value=typeof Q=="string"?c.blankNode(Q):Q}toRDF(){return this.value}}ht.BlankNode=f;class h extends l{constructor(Q,se){super(),this.termType="quad",this.transformer=new e.TermTransformer(se),this.valueTerm=Q}toRDF(){return this.valueTerm}get subject(){return this.transformer.transformRDFTermUnsafe(this.RDFsubject)}get predicate(){return this.transformer.transformRDFTermUnsafe(this.RDFpredicate)}get object(){return this.transformer.transformRDFTermUnsafe(this.RDFobject)}get RDFsubject(){return this.toRDF().subject}get RDFpredicate(){return this.toRDF().predicate}get RDFobject(){return this.toRDF().object}}ht.Quad=h;function p(C){if(C.termType==="literal")return C}ht.isLiteralTermExpression=p;class b extends l{constructor(Q,se,ie,be){super(),this.typedValue=Q,this.dataType=se,this.strValue=ie,this.language=be,this.termType="literal"}toRDF(){return c.literal(this.strValue||this.str(),this.language||c.namedNode(this.dataType))}str(){return this.strValue||this.typedValue.toString()}}ht.Literal=b;class _ extends b{constructor(Q,se,ie,be){super(Q,se,ie,be),this.typedValue=Q,this.strValue=ie,this.language=be}coerceEBV(){return!!this.typedValue}toRDF(){const Q=super.toRDF();return Number.isFinite(this.typedValue)||(Q.value=Q.value.replace("Infinity","INF")),Q}str(){return this.strValue||this.specificFormatter(this.typedValue)}}ht.NumericLiteral=_;class E extends _{constructor(Q,se,ie,be){super(Q,se||n.TypeURL.XSD_INTEGER,ie,be),this.typedValue=Q,this.strValue=ie,this.language=be}specificFormatter(Q){return Q.toFixed(0)}}ht.IntegerLiteral=E;class w extends _{constructor(Q,se,ie,be){super(Q,se||n.TypeURL.XSD_DECIMAL,ie,be),this.typedValue=Q,this.strValue=ie,this.language=be}specificFormatter(Q){return Q.toString()}}ht.DecimalLiteral=w;class O extends _{constructor(Q,se,ie,be){super(Q,se||n.TypeURL.XSD_FLOAT,ie,be),this.typedValue=Q,this.strValue=ie,this.language=be}specificFormatter(Q){return Q.toString()}}ht.FloatLiteral=O;class A extends _{constructor(Q,se,ie,be){super(Q,se||n.TypeURL.XSD_DOUBLE,ie,be),this.typedValue=Q,this.strValue=ie,this.language=be}specificFormatter(Q){if(!Number.isFinite(Q))return Q>0?"INF":Q<0?"-INF":"NaN";const se=Q.toExponential(),[ie,be]=se.split("e"),he=be.replace(/\+/u,"");return`${ie.includes(".")?ie:`${ie}.0`}E${he}`}}ht.DoubleLiteral=A;class T extends b{constructor(Q,se,ie){super(Q,ie||n.TypeURL.XSD_BOOLEAN,se),this.typedValue=Q,this.strValue=se}coerceEBV(){return this.typedValue}}ht.BooleanLiteral=T;class I extends b{constructor(Q,se,ie){super(Q,ie||n.TypeURL.RDF_LANG_STRING,Q,se),this.typedValue=Q,this.language=se}coerceEBV(){return this.str().length>0}}ht.LangStringLiteral=I;class D extends b{constructor(Q,se){super(Q,se||n.TypeURL.XSD_STRING,Q),this.typedValue=Q}coerceEBV(){return this.str().length>0}}ht.StringLiteral=D;class U extends b{constructor(Q,se,ie){super(Q,ie||n.TypeURL.XSD_DATE_TIME,se),this.typedValue=Q,this.strValue=se}str(){return(0,s.serializeDateTime)(this.typedValue)}}ht.DateTimeLiteral=U;class H extends b{constructor(Q,se,ie){super(Q,ie||n.TypeURL.XSD_TIME,se),this.typedValue=Q,this.strValue=se}str(){return(0,s.serializeTime)(this.typedValue)}}ht.TimeLiteral=H;class N extends b{constructor(Q,se,ie){super(Q,ie||n.TypeURL.XSD_DATE,se),this.typedValue=Q,this.strValue=se}str(){return(0,s.serializeDate)(this.typedValue)}}ht.DateLiteral=N;class R extends b{constructor(Q,se,ie){super(Q,ie||n.TypeURL.XSD_DURATION,se),this.typedValue=Q,this.strValue=se}str(){return(0,s.serializeDuration)(this.typedValue)}}ht.DurationLiteral=R;class F extends R{constructor(Q,se,ie){super(Q,se,ie||n.TypeURL.XSD_DAY_TIME_DURATION),this.typedValue=Q,this.strValue=se}}ht.DayTimeDurationLiteral=F;class X extends b{constructor(Q,se,ie){super(Q,ie||n.TypeURL.XSD_YEAR_MONTH_DURATION,se),this.typedValue=Q,this.strValue=se}str(){return(0,s.serializeDuration)(this.typedValue,"P0M")}}ht.YearMonthDurationLiteral=X;class ne extends b{constructor(Q,se,ie,be,he){super({toString:()=>"undefined"},se,be,he),this.openWorldType=ie}coerceEBV(){if((0,o.isSubTypeOf)(this.dataType,n.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,o.isSubTypeOf)(this.dataType,n.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new a.EBVCoercionError(this)}toRDF(){return c.literal(this.str(),this.language||c.namedNode(this.dataType))}str(){return this.strValue||""}}ht.NonLexicalLiteral=ne;function $(C){if(C instanceof ne)return C}return ht.isNonLexicalLiteral=$,ht}var w2={};Object.defineProperty(w2,"__esModule",{value:!0});w2.Operator=void 0;const cfe=Ai;class lfe{constructor(e,r){this.args=e,this.apply=r,this.expressionType=cfe.ExpressionType.Operator}}w2.Operator=lfe;var S2={};Object.defineProperty(S2,"__esModule",{value:!0});S2.SpecialOperator=void 0;const dfe=Ai;class ffe{constructor(e,r,n){this.args=e,this.applyAsync=r,this.applySynchronously=n,this.expressionType=dfe.ExpressionType.SpecialOperator}}S2.SpecialOperator=ffe;var T2={};Object.defineProperty(T2,"__esModule",{value:!0});T2.Named=void 0;const hfe=Ai;class pfe{constructor(e,r,n){this.name=e,this.args=r,this.apply=n,this.expressionType=hfe.ExpressionType.Named}}T2.Named=pfe;var E2={};Object.defineProperty(E2,"__esModule",{value:!0});E2.Aggregate=void 0;const yfe=Ai;class bfe{constructor(e,r){this.name=e,this.expression=r,this.expressionType=yfe.ExpressionType.Aggregate}}E2.Aggregate=bfe;var O2={};Object.defineProperty(O2,"__esModule",{value:!0});O2.Existence=void 0;const _fe=Ai;class gfe{constructor(e){this.expression=e,this.expressionType=_fe.ExpressionType.Existence}}O2.Existence=gfe;var A2={};Object.defineProperty(A2,"__esModule",{value:!0});A2.AsyncExtension=void 0;const mfe=Ai;class vfe{constructor(e,r,n){this.name=e,this.args=r,this.apply=n,this.expressionType=mfe.ExpressionType.AsyncExtension}}A2.AsyncExtension=vfe;var x2={};Object.defineProperty(x2,"__esModule",{value:!0});x2.SyncExtension=void 0;const wfe=Ai;class Sfe{constructor(e,r,n){this.name=e,this.args=r,this.apply=n,this.expressionType=wfe.ExpressionType.SyncExtension}}x2.SyncExtension=Sfe;var K4;function ia(){return K4||(K4=1,function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ai,t),r(m2,t),r(ufe(),t),r(w2,t),r(S2,t),r(T2,t),r(E2,t),r(O2,t),r(A2,t),r(x2,t)}(QT)),QT}var zT={},ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.SpecialFunction=ga.NamedFunction=ga.RegularFunction=ga.BaseFunction=void 0;const $7=Ke;class mR{constructor(e,r){this.operator=e,this.apply=(n,a)=>(this.monomorph(n,a.superTypeProvider,a.functionArgumentsCache)||this.handleInvalidTypes(n))(a)(n),this.arity=r.arity,this.overloads=r.overloads}monomorph(e,r,n){return this.overloads.search(e,r,n)}}ga.BaseFunction=mR;class Tfe extends mR{constructor(e,r){super(e,r),this.functionClass="regular"}handleInvalidTypes(e){throw new $7.InvalidArgumentTypes(e,this.operator)}}ga.RegularFunction=Tfe;class Efe extends mR{constructor(e,r){super(e,r),this.functionClass="named"}handleInvalidTypes(e){throw new $7.InvalidArgumentTypes(e,this.operator)}}ga.NamedFunction=Efe;class Ofe{constructor(e,r){this.operator=e,this.functionClass="special",this.arity=r.arity,this.applySynchronously=r.applySynchronously,this.applyAsync=r.applyAsync,this.checkArity=r.checkArity||Afe(this.arity)}}ga.SpecialFunction=Ofe;function Afe(t){return e=>t===Number.POSITIVE_INFINITY?!0:e.length===t}var R2={};Object.defineProperty(R2,"__esModule",{value:!0});R2.namedDefinitions=void 0;const ma=ia(),xfe=ia(),yt=ni,U7=Ct,dl=Ke,wa=zr,Ft=ro(),Rfe={arity:1,overloads:(0,Ft.declare)(yt.TypeURL.XSD_STRING).onNumeric1(()=>t=>(0,Ft.string)((0,Ft.float)(t.typedValue).str())).onBoolean1Typed(()=>t=>(0,Ft.string)((0,Ft.bool)(t).str())).onTerm1(()=>t=>(0,Ft.string)(t.str())).collect()},Ife={arity:1,overloads:(0,Ft.declare)(yt.TypeURL.XSD_FLOAT).onNumeric1(()=>t=>(0,Ft.float)(t.typedValue)).onBoolean1Typed(()=>t=>(0,Ft.float)(t?1:0)).onUnary(yt.TypeURL.XSD_STRING,()=>t=>{const e=(0,wa.parseXSDFloat)(t.str());if(e===void 0)throw new dl.CastError(t,yt.TypeURL.XSD_FLOAT);return(0,Ft.float)(e)},!1).collect()},Pfe={arity:1,overloads:(0,Ft.declare)(yt.TypeURL.XSD_DOUBLE).onNumeric1(()=>t=>(0,Ft.double)(t.typedValue)).onBoolean1Typed(()=>t=>(0,Ft.double)(t?1:0)).onUnary(yt.TypeURL.XSD_STRING,()=>t=>{const e=(0,wa.parseXSDFloat)(t.str());if(e===void 0)throw new dl.CastError(t,yt.TypeURL.XSD_DOUBLE);return(0,Ft.double)(e)},!1).collect()},Dfe={arity:1,overloads:(0,Ft.declare)(yt.TypeURL.XSD_DECIMAL).onNumeric1(()=>t=>{const e=(0,wa.parseXSDDecimal)(t.str());if(e===void 0)throw new dl.CastError(t,yt.TypeURL.XSD_DECIMAL);return(0,Ft.decimal)(e)}).onString1(()=>t=>{const e=t.str(),r=/^([+-])?(\d+(\.\d+)?)$/u.test(e)?(0,wa.parseXSDDecimal)(e):void 0;if(r===void 0)throw new dl.CastError(t,yt.TypeURL.XSD_DECIMAL);return(0,Ft.decimal)(r)},!1).onBoolean1Typed(()=>t=>(0,Ft.decimal)(t?1:0)).collect()},Nfe={arity:1,overloads:(0,Ft.declare)(yt.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>t=>(0,Ft.integer)(t?1:0)).onNumeric1(()=>t=>{const e=(0,wa.parseXSDInteger)(t.str());if(e===void 0)throw new dl.CastError(t,yt.TypeURL.XSD_INTEGER);return(0,Ft.integer)(e)},!1).onString1(()=>t=>{const e=t.str(),r=/^\d+$/u.test(e)?(0,wa.parseXSDInteger)(e):void 0;if(r===void 0)throw new dl.CastError(t,yt.TypeURL.XSD_INTEGER);return(0,Ft.integer)(r)}).collect()},jfe={arity:1,overloads:(0,Ft.declare)(yt.TypeURL.XSD_DATE_TIME).onUnary(yt.TypeURL.XSD_DATE_TIME,()=>t=>t).onUnary(yt.TypeURL.XSD_STRING,()=>t=>(0,Ft.dateTime)((0,wa.parseDateTime)(t.str()),t.str()),!1).onUnary(yt.TypeURL.XSD_DATE,()=>t=>new ma.DateTimeLiteral({...t.typedValue,hours:0,minutes:0,seconds:0})).collect()},Cfe={arity:1,overloads:(0,Ft.declare)(yt.TypeURL.XSD_BOOLEAN).onNumeric1(()=>t=>(0,Ft.bool)(t.coerceEBV()),!0).onUnary(yt.TypeURL.XSD_BOOLEAN,()=>t=>(0,Ft.bool)(t.coerceEBV()),!0).onUnary(yt.TypeURL.XSD_STRING,()=>t=>{switch(t.str()){case"true":return(0,Ft.bool)(!0);case"false":return(0,Ft.bool)(!1);case"1":return(0,Ft.bool)(!0);case"0":return(0,Ft.bool)(!1);default:throw new dl.CastError(t,yt.TypeURL.XSD_BOOLEAN)}},!1).collect()},Mfe={arity:1,overloads:(0,Ft.declare)(yt.TypeURL.XSD_TIME).onUnary(yt.TypeURL.XSD_TIME,()=>t=>new ma.TimeLiteral(t.typedValue,t.strValue)).onUnary(yt.TypeURL.XSD_DATE_TIME,()=>t=>new ma.TimeLiteral(t.typedValue)).onStringly1(()=>t=>new ma.TimeLiteral((0,wa.parseTime)(t.str()))).collect()},Ffe={arity:1,overloads:(0,Ft.declare)(yt.TypeURL.XSD_DATE).onUnary(yt.TypeURL.XSD_DATE,()=>t=>new ma.DateLiteral(t.typedValue,t.strValue)).onUnary(yt.TypeURL.XSD_DATE_TIME,()=>t=>new ma.DateLiteral(t.typedValue)).onStringly1(()=>t=>new ma.DateLiteral((0,wa.parseDate)(t.str()))).collect()},Lfe={arity:1,overloads:(0,Ft.declare)(yt.TypeURL.XSD_DURATION).onUnary(yt.TypeURL.XSD_DURATION,()=>t=>new ma.DurationLiteral(t.typedValue,t.strValue)).onStringly1(()=>t=>new xfe.DurationLiteral((0,wa.parseDuration)(t.str()))).collect()},Bfe={arity:1,overloads:(0,Ft.declare)(yt.TypeURL.XSD_DAY_TIME_DURATION).onUnary(yt.TypeURL.XSD_DURATION,()=>t=>new ma.DayTimeDurationLiteral((0,U7.trimToDayTimeDuration)(t.typedValue))).onStringly1(()=>t=>new ma.DayTimeDurationLiteral((0,wa.parseDayTimeDuration)(t.str()))).collect()},$fe={arity:1,overloads:(0,Ft.declare)(yt.TypeURL.XSD_YEAR_MONTH_DURATION).onUnary(yt.TypeURL.XSD_DURATION,()=>t=>new ma.YearMonthDurationLiteral((0,U7.trimToYearMonthDuration)(t.typedValue))).onStringly1(()=>t=>new ma.YearMonthDurationLiteral((0,wa.parseYearMonthDuration)(t.str()))).collect()};R2.namedDefinitions={[yt.TypeURL.XSD_STRING]:Rfe,[yt.TypeURL.XSD_FLOAT]:Ife,[yt.TypeURL.XSD_DOUBLE]:Pfe,[yt.TypeURL.XSD_DECIMAL]:Dfe,[yt.TypeURL.XSD_INTEGER]:Nfe,[yt.TypeURL.XSD_DATE_TIME]:jfe,[yt.TypeURL.XSD_DATE]:Ffe,[yt.TypeURL.XSD_BOOLEAN]:Cfe,[yt.TypeURL.XSD_TIME]:Mfe,[yt.TypeURL.XSD_DURATION]:Lfe,[yt.TypeURL.XSD_DAY_TIME_DURATION]:Bfe,[yt.TypeURL.XSD_YEAR_MONTH_DURATION]:$fe};var hh={},q7={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,s=Math.floor,o="[BigNumber Error] ",u=o+"Number primitive has more than 15 significant digits: ",c=1e14,l=14,d=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,p=1e9;function b(D){var U,H,N,R=ce.prototype={constructor:ce,toString:null,valueOf:null},F=new ce(1),X=20,ne=4,$=-7,C=21,Q=-1e7,se=1e7,ie=!1,be=1,he=0,Te={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ne="0123456789abcdefghijklmnopqrstuvwxyz",ye=!0;function ce(L,P){var m,y,v,j,V,q,G,Y,ee=this;if(!(ee instanceof ce))return new ce(L,P);if(P==null){if(L&&L._isBigNumber===!0){ee.s=L.s,!L.c||L.e>se?ee.c=ee.e=null:L.e<Q?ee.c=[ee.e=0]:(ee.e=L.e,ee.c=L.c.slice());return}if((q=typeof L=="number")&&L*0==0){if(ee.s=1/L<0?(L=-L,-1):1,L===~~L){for(j=0,V=L;V>=10;V/=10,j++);j>se?ee.c=ee.e=null:(ee.e=j,ee.c=[L]);return}Y=String(L)}else{if(!n.test(Y=String(L)))return N(ee,Y,q);ee.s=Y.charCodeAt(0)==45?(Y=Y.slice(1),-1):1}(j=Y.indexOf("."))>-1&&(Y=Y.replace(".","")),(V=Y.search(/e/i))>0?(j<0&&(j=V),j+=+Y.slice(V+1),Y=Y.substring(0,V)):j<0&&(j=Y.length)}else{if(O(P,2,Ne.length,"Base"),P==10&&ye)return ee=new ce(L),le(ee,X+ee.e+1,ne);if(Y=String(L),q=typeof L=="number"){if(L*0!=0)return N(ee,Y,q,P);if(ee.s=1/L<0?(Y=Y.slice(1),-1):1,ce.DEBUG&&Y.replace(/^0\.0*|\./,"").length>15)throw Error(u+L)}else ee.s=Y.charCodeAt(0)===45?(Y=Y.slice(1),-1):1;for(m=Ne.slice(0,P),j=V=0,G=Y.length;V<G;V++)if(m.indexOf(y=Y.charAt(V))<0){if(y=="."){if(V>j){j=G;continue}}else if(!v&&(Y==Y.toUpperCase()&&(Y=Y.toLowerCase())||Y==Y.toLowerCase()&&(Y=Y.toUpperCase()))){v=!0,V=-1,j=0;continue}return N(ee,String(L),q,P)}q=!1,Y=H(Y,P,10,ee.s),(j=Y.indexOf("."))>-1?Y=Y.replace(".",""):j=Y.length}for(V=0;Y.charCodeAt(V)===48;V++);for(G=Y.length;Y.charCodeAt(--G)===48;);if(Y=Y.slice(V,++G)){if(G-=V,q&&ce.DEBUG&&G>15&&(L>d||L!==s(L)))throw Error(u+ee.s*L);if((j=j-V-1)>se)ee.c=ee.e=null;else if(j<Q)ee.c=[ee.e=0];else{if(ee.e=j,ee.c=[],V=(j+1)%l,j<0&&(V+=l),V<G){for(V&&ee.c.push(+Y.slice(0,V)),G-=l;V<G;)ee.c.push(+Y.slice(V,V+=l));V=l-(Y=Y.slice(V)).length}else V-=G;for(;V--;Y+="0");ee.c.push(+Y)}}else ee.c=[ee.e=0]}ce.clone=b,ce.ROUND_UP=0,ce.ROUND_DOWN=1,ce.ROUND_CEIL=2,ce.ROUND_FLOOR=3,ce.ROUND_HALF_UP=4,ce.ROUND_HALF_DOWN=5,ce.ROUND_HALF_EVEN=6,ce.ROUND_HALF_CEIL=7,ce.ROUND_HALF_FLOOR=8,ce.EUCLID=9,ce.config=ce.set=function(L){var P,m;if(L!=null)if(typeof L=="object"){if(L.hasOwnProperty(P="DECIMAL_PLACES")&&(m=L[P],O(m,0,p,P),X=m),L.hasOwnProperty(P="ROUNDING_MODE")&&(m=L[P],O(m,0,8,P),ne=m),L.hasOwnProperty(P="EXPONENTIAL_AT")&&(m=L[P],m&&m.pop?(O(m[0],-p,0,P),O(m[1],0,p,P),$=m[0],C=m[1]):(O(m,-p,p,P),$=-(C=m<0?-m:m))),L.hasOwnProperty(P="RANGE"))if(m=L[P],m&&m.pop)O(m[0],-p,-1,P),O(m[1],1,p,P),Q=m[0],se=m[1];else if(O(m,-p,p,P),m)Q=-(se=m<0?-m:m);else throw Error(o+P+" cannot be zero: "+m);if(L.hasOwnProperty(P="CRYPTO"))if(m=L[P],m===!!m)if(m)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ie=m;else throw ie=!m,Error(o+"crypto unavailable");else ie=m;else throw Error(o+P+" not true or false: "+m);if(L.hasOwnProperty(P="MODULO_MODE")&&(m=L[P],O(m,0,9,P),be=m),L.hasOwnProperty(P="POW_PRECISION")&&(m=L[P],O(m,0,p,P),he=m),L.hasOwnProperty(P="FORMAT"))if(m=L[P],typeof m=="object")Te=m;else throw Error(o+P+" not an object: "+m);if(L.hasOwnProperty(P="ALPHABET"))if(m=L[P],typeof m=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(m))ye=m.slice(0,10)=="0123456789",Ne=m;else throw Error(o+P+" invalid: "+m)}else throw Error(o+"Object expected: "+L);return{DECIMAL_PLACES:X,ROUNDING_MODE:ne,EXPONENTIAL_AT:[$,C],RANGE:[Q,se],CRYPTO:ie,MODULO_MODE:be,POW_PRECISION:he,FORMAT:Te,ALPHABET:Ne}},ce.isBigNumber=function(L){if(!L||L._isBigNumber!==!0)return!1;if(!ce.DEBUG)return!0;var P,m,y=L.c,v=L.e,j=L.s;e:if({}.toString.call(y)=="[object Array]"){if((j===1||j===-1)&&v>=-p&&v<=p&&v===s(v)){if(y[0]===0){if(v===0&&y.length===1)return!0;break e}if(P=(v+1)%l,P<1&&(P+=l),String(y[0]).length==P){for(P=0;P<y.length;P++)if(m=y[P],m<0||m>=c||m!==s(m))break e;if(m!==0)return!0}}}else if(y===null&&v===null&&(j===null||j===1||j===-1))return!0;throw Error(o+"Invalid BigNumber: "+L)},ce.maximum=ce.max=function(){return oe(arguments,-1)},ce.minimum=ce.min=function(){return oe(arguments,1)},ce.random=function(){var L=9007199254740992,P=Math.random()*L&2097151?function(){return s(Math.random()*L)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(m){var y,v,j,V,q,G=0,Y=[],ee=new ce(F);if(m==null?m=X:O(m,0,p),V=a(m/l),ie)if(crypto.getRandomValues){for(y=crypto.getRandomValues(new Uint32Array(V*=2));G<V;)q=y[G]*131072+(y[G+1]>>>11),q>=9e15?(v=crypto.getRandomValues(new Uint32Array(2)),y[G]=v[0],y[G+1]=v[1]):(Y.push(q%1e14),G+=2);G=V/2}else if(crypto.randomBytes){for(y=crypto.randomBytes(V*=7);G<V;)q=(y[G]&31)*281474976710656+y[G+1]*1099511627776+y[G+2]*4294967296+y[G+3]*16777216+(y[G+4]<<16)+(y[G+5]<<8)+y[G+6],q>=9e15?crypto.randomBytes(7).copy(y,G):(Y.push(q%1e14),G+=7);G=V/7}else throw ie=!1,Error(o+"crypto unavailable");if(!ie)for(;G<V;)q=P(),q<9e15&&(Y[G++]=q%1e14);for(V=Y[--G],m%=l,V&&m&&(q=f[l-m],Y[G]=s(V/q)*q);Y[G]===0;Y.pop(),G--);if(G<0)Y=[j=0];else{for(j=-1;Y[0]===0;Y.splice(0,1),j-=l);for(G=1,q=Y[0];q>=10;q/=10,G++);G<l&&(j-=l-G)}return ee.e=j,ee.c=Y,ee}}(),ce.sum=function(){for(var L=1,P=arguments,m=new ce(P[0]);L<P.length;)m=m.plus(P[L++]);return m},H=function(){var L="0123456789";function P(m,y,v,j){for(var V,q=[0],G,Y=0,ee=m.length;Y<ee;){for(G=q.length;G--;q[G]*=y);for(q[0]+=j.indexOf(m.charAt(Y++)),V=0;V<q.length;V++)q[V]>v-1&&(q[V+1]==null&&(q[V+1]=0),q[V+1]+=q[V]/v|0,q[V]%=v)}return q.reverse()}return function(m,y,v,j,V){var q,G,Y,ee,ae,ve,me,Ee,k=m.indexOf("."),W=X,M=ne;for(k>=0&&(ee=he,he=0,m=m.replace(".",""),Ee=new ce(y),ve=Ee.pow(m.length-k),he=ee,Ee.c=P(I(E(ve.c),ve.e,"0"),10,v,L),Ee.e=Ee.c.length),me=P(m,y,v,V?(q=Ne,L):(q=L,Ne)),Y=ee=me.length;me[--ee]==0;me.pop());if(!me[0])return q.charAt(0);if(k<0?--Y:(ve.c=me,ve.e=Y,ve.s=j,ve=U(ve,Ee,W,M,v),me=ve.c,ae=ve.r,Y=ve.e),G=Y+W+1,k=me[G],ee=v/2,ae=ae||G<0||me[G+1]!=null,ae=M<4?(k!=null||ae)&&(M==0||M==(ve.s<0?3:2)):k>ee||k==ee&&(M==4||ae||M==6&&me[G-1]&1||M==(ve.s<0?8:7)),G<1||!me[0])m=ae?I(q.charAt(1),-W,q.charAt(0)):q.charAt(0);else{if(me.length=G,ae)for(--v;++me[--G]>v;)me[G]=0,G||(++Y,me=[1].concat(me));for(ee=me.length;!me[--ee];);for(k=0,m="";k<=ee;m+=q.charAt(me[k++]));m=I(m,Y,q.charAt(0))}return m}}(),U=function(){function L(y,v,j){var V,q,G,Y,ee=0,ae=y.length,ve=v%h,me=v/h|0;for(y=y.slice();ae--;)G=y[ae]%h,Y=y[ae]/h|0,V=me*G+Y*ve,q=ve*G+V%h*h+ee,ee=(q/j|0)+(V/h|0)+me*Y,y[ae]=q%j;return ee&&(y=[ee].concat(y)),y}function P(y,v,j,V){var q,G;if(j!=V)G=j>V?1:-1;else for(q=G=0;q<j;q++)if(y[q]!=v[q]){G=y[q]>v[q]?1:-1;break}return G}function m(y,v,j,V){for(var q=0;j--;)y[j]-=q,q=y[j]<v[j]?1:0,y[j]=q*V+y[j]-v[j];for(;!y[0]&&y.length>1;y.splice(0,1));}return function(y,v,j,V,q){var G,Y,ee,ae,ve,me,Ee,k,W,M,S,x,z,ue,ge,we,Me,Ue=y.s==v.s?1:-1,Ge=y.c,We=v.c;if(!Ge||!Ge[0]||!We||!We[0])return new ce(!y.s||!v.s||(Ge?We&&Ge[0]==We[0]:!We)?NaN:Ge&&Ge[0]==0||!We?Ue*0:Ue/0);for(k=new ce(Ue),W=k.c=[],Y=y.e-v.e,Ue=j+Y+1,q||(q=c,Y=_(y.e/l)-_(v.e/l),Ue=Ue/l|0),ee=0;We[ee]==(Ge[ee]||0);ee++);if(We[ee]>(Ge[ee]||0)&&Y--,Ue<0)W.push(1),ae=!0;else{for(ue=Ge.length,we=We.length,ee=0,Ue+=2,ve=s(q/(We[0]+1)),ve>1&&(We=L(We,ve,q),Ge=L(Ge,ve,q),we=We.length,ue=Ge.length),z=we,M=Ge.slice(0,we),S=M.length;S<we;M[S++]=0);Me=We.slice(),Me=[0].concat(Me),ge=We[0],We[1]>=q/2&&ge++;do{if(ve=0,G=P(We,M,we,S),G<0){if(x=M[0],we!=S&&(x=x*q+(M[1]||0)),ve=s(x/ge),ve>1)for(ve>=q&&(ve=q-1),me=L(We,ve,q),Ee=me.length,S=M.length;P(me,M,Ee,S)==1;)ve--,m(me,we<Ee?Me:We,Ee,q),Ee=me.length,G=1;else ve==0&&(G=ve=1),me=We.slice(),Ee=me.length;if(Ee<S&&(me=[0].concat(me)),m(M,me,S,q),S=M.length,G==-1)for(;P(We,M,we,S)<1;)ve++,m(M,we<S?Me:We,S,q),S=M.length}else G===0&&(ve++,M=[0]);W[ee++]=ve,M[0]?M[S++]=Ge[z]||0:(M=[Ge[z]],S=1)}while((z++<ue||M[0]!=null)&&Ue--);ae=M[0]!=null,W[0]||W.splice(0,1)}if(q==c){for(ee=1,Ue=W[0];Ue>=10;Ue/=10,ee++);le(k,j+(k.e=ee+Y*l-1)+1,V,ae)}else k.e=Y,k.r=+ae;return k}}();function xe(L,P,m,y){var v,j,V,q,G;if(m==null?m=ne:O(m,0,8),!L.c)return L.toString();if(v=L.c[0],V=L.e,P==null)G=E(L.c),G=y==1||y==2&&(V<=$||V>=C)?T(G,V):I(G,V,"0");else if(L=le(new ce(L),P,m),j=L.e,G=E(L.c),q=G.length,y==1||y==2&&(P<=j||j<=$)){for(;q<P;G+="0",q++);G=T(G,j)}else if(P-=V,G=I(G,j,"0"),j+1>q){if(--P>0)for(G+=".";P--;G+="0");}else if(P+=j-q,P>0)for(j+1==q&&(G+=".");P--;G+="0");return L.s<0&&v?"-"+G:G}function oe(L,P){for(var m,y,v=1,j=new ce(L[0]);v<L.length;v++)y=new ce(L[v]),(!y.s||(m=w(j,y))===P||m===0&&j.s===P)&&(j=y);return j}function J(L,P,m){for(var y=1,v=P.length;!P[--v];P.pop());for(v=P[0];v>=10;v/=10,y++);return(m=y+m*l-1)>se?L.c=L.e=null:m<Q?L.c=[L.e=0]:(L.e=m,L.c=P),L}N=function(){var L=/^(-?)0([xbo])(?=\w[\w.]*$)/i,P=/^([^.]+)\.$/,m=/^\.([^.]+)$/,y=/^-?(Infinity|NaN)$/,v=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(j,V,q,G){var Y,ee=q?V:V.replace(v,"");if(y.test(ee))j.s=isNaN(ee)?null:ee<0?-1:1;else{if(!q&&(ee=ee.replace(L,function(ae,ve,me){return Y=(me=me.toLowerCase())=="x"?16:me=="b"?2:8,!G||G==Y?ve:ae}),G&&(Y=G,ee=ee.replace(P,"$1").replace(m,"0.$1")),V!=ee))return new ce(ee,Y);if(ce.DEBUG)throw Error(o+"Not a"+(G?" base "+G:"")+" number: "+V);j.s=null}j.c=j.e=null}}();function le(L,P,m,y){var v,j,V,q,G,Y,ee,ae=L.c,ve=f;if(ae){e:{for(v=1,q=ae[0];q>=10;q/=10,v++);if(j=P-v,j<0)j+=l,V=P,G=ae[Y=0],ee=s(G/ve[v-V-1]%10);else if(Y=a((j+1)/l),Y>=ae.length)if(y){for(;ae.length<=Y;ae.push(0));G=ee=0,v=1,j%=l,V=j-l+1}else break e;else{for(G=q=ae[Y],v=1;q>=10;q/=10,v++);j%=l,V=j-l+v,ee=V<0?0:s(G/ve[v-V-1]%10)}if(y=y||P<0||ae[Y+1]!=null||(V<0?G:G%ve[v-V-1]),y=m<4?(ee||y)&&(m==0||m==(L.s<0?3:2)):ee>5||ee==5&&(m==4||y||m==6&&(j>0?V>0?G/ve[v-V]:0:ae[Y-1])%10&1||m==(L.s<0?8:7)),P<1||!ae[0])return ae.length=0,y?(P-=L.e+1,ae[0]=ve[(l-P%l)%l],L.e=-P||0):ae[0]=L.e=0,L;if(j==0?(ae.length=Y,q=1,Y--):(ae.length=Y+1,q=ve[l-j],ae[Y]=V>0?s(G/ve[v-V]%ve[V])*q:0),y)for(;;)if(Y==0){for(j=1,V=ae[0];V>=10;V/=10,j++);for(V=ae[0]+=q,q=1;V>=10;V/=10,q++);j!=q&&(L.e++,ae[0]==c&&(ae[0]=1));break}else{if(ae[Y]+=q,ae[Y]!=c)break;ae[Y--]=0,q=1}for(j=ae.length;ae[--j]===0;ae.pop());}L.e>se?L.c=L.e=null:L.e<Q&&(L.c=[L.e=0])}return L}function pe(L){var P,m=L.e;return m===null?L.toString():(P=E(L.c),P=m<=$||m>=C?T(P,m):I(P,m,"0"),L.s<0?"-"+P:P)}return R.absoluteValue=R.abs=function(){var L=new ce(this);return L.s<0&&(L.s=1),L},R.comparedTo=function(L,P){return w(this,new ce(L,P))},R.decimalPlaces=R.dp=function(L,P){var m,y,v,j=this;if(L!=null)return O(L,0,p),P==null?P=ne:O(P,0,8),le(new ce(j),L+j.e+1,P);if(!(m=j.c))return null;if(y=((v=m.length-1)-_(this.e/l))*l,v=m[v])for(;v%10==0;v/=10,y--);return y<0&&(y=0),y},R.dividedBy=R.div=function(L,P){return U(this,new ce(L,P),X,ne)},R.dividedToIntegerBy=R.idiv=function(L,P){return U(this,new ce(L,P),0,1)},R.exponentiatedBy=R.pow=function(L,P){var m,y,v,j,V,q,G,Y,ee,ae=this;if(L=new ce(L),L.c&&!L.isInteger())throw Error(o+"Exponent not an integer: "+pe(L));if(P!=null&&(P=new ce(P)),q=L.e>14,!ae.c||!ae.c[0]||ae.c[0]==1&&!ae.e&&ae.c.length==1||!L.c||!L.c[0])return ee=new ce(Math.pow(+pe(ae),q?L.s*(2-A(L)):+pe(L))),P?ee.mod(P):ee;if(G=L.s<0,P){if(P.c?!P.c[0]:!P.s)return new ce(NaN);y=!G&&ae.isInteger()&&P.isInteger(),y&&(ae=ae.mod(P))}else{if(L.e>9&&(ae.e>0||ae.e<-1||(ae.e==0?ae.c[0]>1||q&&ae.c[1]>=24e7:ae.c[0]<8e13||q&&ae.c[0]<=9999975e7)))return j=ae.s<0&&A(L)?-0:0,ae.e>-1&&(j=1/j),new ce(G?1/j:j);he&&(j=a(he/l+2))}for(q?(m=new ce(.5),G&&(L.s=1),Y=A(L)):(v=Math.abs(+pe(L)),Y=v%2),ee=new ce(F);;){if(Y){if(ee=ee.times(ae),!ee.c)break;j?ee.c.length>j&&(ee.c.length=j):y&&(ee=ee.mod(P))}if(v){if(v=s(v/2),v===0)break;Y=v%2}else if(L=L.times(m),le(L,L.e+1,1),L.e>14)Y=A(L);else{if(v=+pe(L),v===0)break;Y=v%2}ae=ae.times(ae),j?ae.c&&ae.c.length>j&&(ae.c.length=j):y&&(ae=ae.mod(P))}return y?ee:(G&&(ee=F.div(ee)),P?ee.mod(P):j?le(ee,he,ne,V):ee)},R.integerValue=function(L){var P=new ce(this);return L==null?L=ne:O(L,0,8),le(P,P.e+1,L)},R.isEqualTo=R.eq=function(L,P){return w(this,new ce(L,P))===0},R.isFinite=function(){return!!this.c},R.isGreaterThan=R.gt=function(L,P){return w(this,new ce(L,P))>0},R.isGreaterThanOrEqualTo=R.gte=function(L,P){return(P=w(this,new ce(L,P)))===1||P===0},R.isInteger=function(){return!!this.c&&_(this.e/l)>this.c.length-2},R.isLessThan=R.lt=function(L,P){return w(this,new ce(L,P))<0},R.isLessThanOrEqualTo=R.lte=function(L,P){return(P=w(this,new ce(L,P)))===-1||P===0},R.isNaN=function(){return!this.s},R.isNegative=function(){return this.s<0},R.isPositive=function(){return this.s>0},R.isZero=function(){return!!this.c&&this.c[0]==0},R.minus=function(L,P){var m,y,v,j,V=this,q=V.s;if(L=new ce(L,P),P=L.s,!q||!P)return new ce(NaN);if(q!=P)return L.s=-P,V.plus(L);var G=V.e/l,Y=L.e/l,ee=V.c,ae=L.c;if(!G||!Y){if(!ee||!ae)return ee?(L.s=-P,L):new ce(ae?V:NaN);if(!ee[0]||!ae[0])return ae[0]?(L.s=-P,L):new ce(ee[0]?V:ne==3?-0:0)}if(G=_(G),Y=_(Y),ee=ee.slice(),q=G-Y){for((j=q<0)?(q=-q,v=ee):(Y=G,v=ae),v.reverse(),P=q;P--;v.push(0));v.reverse()}else for(y=(j=(q=ee.length)<(P=ae.length))?q:P,q=P=0;P<y;P++)if(ee[P]!=ae[P]){j=ee[P]<ae[P];break}if(j&&(v=ee,ee=ae,ae=v,L.s=-L.s),P=(y=ae.length)-(m=ee.length),P>0)for(;P--;ee[m++]=0);for(P=c-1;y>q;){if(ee[--y]<ae[y]){for(m=y;m&&!ee[--m];ee[m]=P);--ee[m],ee[y]+=c}ee[y]-=ae[y]}for(;ee[0]==0;ee.splice(0,1),--Y);return ee[0]?J(L,ee,Y):(L.s=ne==3?-1:1,L.c=[L.e=0],L)},R.modulo=R.mod=function(L,P){var m,y,v=this;return L=new ce(L,P),!v.c||!L.s||L.c&&!L.c[0]?new ce(NaN):!L.c||v.c&&!v.c[0]?new ce(v):(be==9?(y=L.s,L.s=1,m=U(v,L,0,3),L.s=y,m.s*=y):m=U(v,L,0,be),L=v.minus(m.times(L)),!L.c[0]&&be==1&&(L.s=v.s),L)},R.multipliedBy=R.times=function(L,P){var m,y,v,j,V,q,G,Y,ee,ae,ve,me,Ee,k,W,M=this,S=M.c,x=(L=new ce(L,P)).c;if(!S||!x||!S[0]||!x[0])return!M.s||!L.s||S&&!S[0]&&!x||x&&!x[0]&&!S?L.c=L.e=L.s=null:(L.s*=M.s,!S||!x?L.c=L.e=null:(L.c=[0],L.e=0)),L;for(y=_(M.e/l)+_(L.e/l),L.s*=M.s,G=S.length,ae=x.length,G<ae&&(Ee=S,S=x,x=Ee,v=G,G=ae,ae=v),v=G+ae,Ee=[];v--;Ee.push(0));for(k=c,W=h,v=ae;--v>=0;){for(m=0,ve=x[v]%W,me=x[v]/W|0,V=G,j=v+V;j>v;)Y=S[--V]%W,ee=S[V]/W|0,q=me*Y+ee*ve,Y=ve*Y+q%W*W+Ee[j]+m,m=(Y/k|0)+(q/W|0)+me*ee,Ee[j--]=Y%k;Ee[j]=m}return m?++y:Ee.splice(0,1),J(L,Ee,y)},R.negated=function(){var L=new ce(this);return L.s=-L.s||null,L},R.plus=function(L,P){var m,y=this,v=y.s;if(L=new ce(L,P),P=L.s,!v||!P)return new ce(NaN);if(v!=P)return L.s=-P,y.minus(L);var j=y.e/l,V=L.e/l,q=y.c,G=L.c;if(!j||!V){if(!q||!G)return new ce(v/0);if(!q[0]||!G[0])return G[0]?L:new ce(q[0]?y:v*0)}if(j=_(j),V=_(V),q=q.slice(),v=j-V){for(v>0?(V=j,m=G):(v=-v,m=q),m.reverse();v--;m.push(0));m.reverse()}for(v=q.length,P=G.length,v-P<0&&(m=G,G=q,q=m,P=v),v=0;P;)v=(q[--P]=q[P]+G[P]+v)/c|0,q[P]=c===q[P]?0:q[P]%c;return v&&(q=[v].concat(q),++V),J(L,q,V)},R.precision=R.sd=function(L,P){var m,y,v,j=this;if(L!=null&&L!==!!L)return O(L,1,p),P==null?P=ne:O(P,0,8),le(new ce(j),L,P);if(!(m=j.c))return null;if(v=m.length-1,y=v*l+1,v=m[v]){for(;v%10==0;v/=10,y--);for(v=m[0];v>=10;v/=10,y++);}return L&&j.e+1>y&&(y=j.e+1),y},R.shiftedBy=function(L){return O(L,-d,d),this.times("1e"+L)},R.squareRoot=R.sqrt=function(){var L,P,m,y,v,j=this,V=j.c,q=j.s,G=j.e,Y=X+4,ee=new ce("0.5");if(q!==1||!V||!V[0])return new ce(!q||q<0&&(!V||V[0])?NaN:V?j:1/0);if(q=Math.sqrt(+pe(j)),q==0||q==1/0?(P=E(V),(P.length+G)%2==0&&(P+="0"),q=Math.sqrt(+P),G=_((G+1)/2)-(G<0||G%2),q==1/0?P="5e"+G:(P=q.toExponential(),P=P.slice(0,P.indexOf("e")+1)+G),m=new ce(P)):m=new ce(q+""),m.c[0]){for(G=m.e,q=G+Y,q<3&&(q=0);;)if(v=m,m=ee.times(v.plus(U(j,v,Y,1))),E(v.c).slice(0,q)===(P=E(m.c)).slice(0,q))if(m.e<G&&--q,P=P.slice(q-3,q+1),P=="9999"||!y&&P=="4999"){if(!y&&(le(v,v.e+X+2,0),v.times(v).eq(j))){m=v;break}Y+=4,q+=4,y=1}else{(!+P||!+P.slice(1)&&P.charAt(0)=="5")&&(le(m,m.e+X+2,1),L=!m.times(m).eq(j));break}}return le(m,m.e+X+1,ne,L)},R.toExponential=function(L,P){return L!=null&&(O(L,0,p),L++),xe(this,L,P,1)},R.toFixed=function(L,P){return L!=null&&(O(L,0,p),L=L+this.e+1),xe(this,L,P)},R.toFormat=function(L,P,m){var y,v=this;if(m==null)L!=null&&P&&typeof P=="object"?(m=P,P=null):L&&typeof L=="object"?(m=L,L=P=null):m=Te;else if(typeof m!="object")throw Error(o+"Argument not an object: "+m);if(y=v.toFixed(L,P),v.c){var j,V=y.split("."),q=+m.groupSize,G=+m.secondaryGroupSize,Y=m.groupSeparator||"",ee=V[0],ae=V[1],ve=v.s<0,me=ve?ee.slice(1):ee,Ee=me.length;if(G&&(j=q,q=G,G=j,Ee-=j),q>0&&Ee>0){for(j=Ee%q||q,ee=me.substr(0,j);j<Ee;j+=q)ee+=Y+me.substr(j,q);G>0&&(ee+=Y+me.slice(j)),ve&&(ee="-"+ee)}y=ae?ee+(m.decimalSeparator||"")+((G=+m.fractionGroupSize)?ae.replace(new RegExp("\\d{"+G+"}\\B","g"),"$&"+(m.fractionGroupSeparator||"")):ae):ee}return(m.prefix||"")+y+(m.suffix||"")},R.toFraction=function(L){var P,m,y,v,j,V,q,G,Y,ee,ae,ve,me=this,Ee=me.c;if(L!=null&&(q=new ce(L),!q.isInteger()&&(q.c||q.s!==1)||q.lt(F)))throw Error(o+"Argument "+(q.isInteger()?"out of range: ":"not an integer: ")+pe(q));if(!Ee)return new ce(me);for(P=new ce(F),Y=m=new ce(F),y=G=new ce(F),ve=E(Ee),j=P.e=ve.length-me.e-1,P.c[0]=f[(V=j%l)<0?l+V:V],L=!L||q.comparedTo(P)>0?j>0?P:Y:q,V=se,se=1/0,q=new ce(ve),G.c[0]=0;ee=U(q,P,0,1),v=m.plus(ee.times(y)),v.comparedTo(L)!=1;)m=y,y=v,Y=G.plus(ee.times(v=Y)),G=v,P=q.minus(ee.times(v=P)),q=v;return v=U(L.minus(m),y,0,1),G=G.plus(v.times(Y)),m=m.plus(v.times(y)),G.s=Y.s=me.s,j=j*2,ae=U(Y,y,j,ne).minus(me).abs().comparedTo(U(G,m,j,ne).minus(me).abs())<1?[Y,y]:[G,m],se=V,ae},R.toNumber=function(){return+pe(this)},R.toPrecision=function(L,P){return L!=null&&O(L,1,p),xe(this,L,P,2)},R.toString=function(L){var P,m=this,y=m.s,v=m.e;return v===null?y?(P="Infinity",y<0&&(P="-"+P)):P="NaN":(L==null?P=v<=$||v>=C?T(E(m.c),v):I(E(m.c),v,"0"):L===10&&ye?(m=le(new ce(m),X+v+1,ne),P=I(E(m.c),m.e,"0")):(O(L,2,Ne.length,"Base"),P=H(I(E(m.c),v,"0"),10,L,y,!0)),y<0&&m.c[0]&&(P="-"+P)),P},R.valueOf=R.toJSON=function(){return pe(this)},R._isBigNumber=!0,D!=null&&ce.set(D),ce}function _(D){var U=D|0;return D>0||D===U?U:U-1}function E(D){for(var U,H,N=1,R=D.length,F=D[0]+"";N<R;){for(U=D[N++]+"",H=l-U.length;H--;U="0"+U);F+=U}for(R=F.length;F.charCodeAt(--R)===48;);return F.slice(0,R+1||1)}function w(D,U){var H,N,R=D.c,F=U.c,X=D.s,ne=U.s,$=D.e,C=U.e;if(!X||!ne)return null;if(H=R&&!R[0],N=F&&!F[0],H||N)return H?N?0:-ne:X;if(X!=ne)return X;if(H=X<0,N=$==C,!R||!F)return N?0:!R^H?1:-1;if(!N)return $>C^H?1:-1;for(ne=($=R.length)<(C=F.length)?$:C,X=0;X<ne;X++)if(R[X]!=F[X])return R[X]>F[X]^H?1:-1;return $==C?0:$>C^H?1:-1}function O(D,U,H,N){if(D<U||D>H||D!==s(D))throw Error(o+(N||"Argument")+(typeof D=="number"?D<U||D>H?" out of range: ":" not an integer: ":" not a primitive number: ")+String(D))}function A(D){var U=D.c.length-1;return _(D.e/l)==U&&D.c[U]%2!=0}function T(D,U){return(D.length>1?D.charAt(0)+"."+D.slice(1):D)+(U<0?"e":"e+")+U}function I(D,U,H){var N,R;if(U<0){for(R=H+".";++U;R+=H);D=R+D}else if(N=D.length,++U>N){for(R=H,U-=N;--U;R+=H);D+=R}else U<N&&(D=D.slice(0,U)+"."+D.slice(U));return D}r=b(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(g)})(q7);var Ufe=q7.exports,V7={exports:{}};(function(t,e){(function(r){t.exports=r()})(function(r){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(w,O){var A=w[0],T=w[1],I=w[2],D=w[3];A+=(T&I|~T&D)+O[0]-680876936|0,A=(A<<7|A>>>25)+T|0,D+=(A&T|~A&I)+O[1]-389564586|0,D=(D<<12|D>>>20)+A|0,I+=(D&A|~D&T)+O[2]+606105819|0,I=(I<<17|I>>>15)+D|0,T+=(I&D|~I&A)+O[3]-1044525330|0,T=(T<<22|T>>>10)+I|0,A+=(T&I|~T&D)+O[4]-176418897|0,A=(A<<7|A>>>25)+T|0,D+=(A&T|~A&I)+O[5]+1200080426|0,D=(D<<12|D>>>20)+A|0,I+=(D&A|~D&T)+O[6]-1473231341|0,I=(I<<17|I>>>15)+D|0,T+=(I&D|~I&A)+O[7]-45705983|0,T=(T<<22|T>>>10)+I|0,A+=(T&I|~T&D)+O[8]+1770035416|0,A=(A<<7|A>>>25)+T|0,D+=(A&T|~A&I)+O[9]-1958414417|0,D=(D<<12|D>>>20)+A|0,I+=(D&A|~D&T)+O[10]-42063|0,I=(I<<17|I>>>15)+D|0,T+=(I&D|~I&A)+O[11]-1990404162|0,T=(T<<22|T>>>10)+I|0,A+=(T&I|~T&D)+O[12]+1804603682|0,A=(A<<7|A>>>25)+T|0,D+=(A&T|~A&I)+O[13]-40341101|0,D=(D<<12|D>>>20)+A|0,I+=(D&A|~D&T)+O[14]-1502002290|0,I=(I<<17|I>>>15)+D|0,T+=(I&D|~I&A)+O[15]+1236535329|0,T=(T<<22|T>>>10)+I|0,A+=(T&D|I&~D)+O[1]-165796510|0,A=(A<<5|A>>>27)+T|0,D+=(A&I|T&~I)+O[6]-1069501632|0,D=(D<<9|D>>>23)+A|0,I+=(D&T|A&~T)+O[11]+643717713|0,I=(I<<14|I>>>18)+D|0,T+=(I&A|D&~A)+O[0]-373897302|0,T=(T<<20|T>>>12)+I|0,A+=(T&D|I&~D)+O[5]-701558691|0,A=(A<<5|A>>>27)+T|0,D+=(A&I|T&~I)+O[10]+38016083|0,D=(D<<9|D>>>23)+A|0,I+=(D&T|A&~T)+O[15]-660478335|0,I=(I<<14|I>>>18)+D|0,T+=(I&A|D&~A)+O[4]-405537848|0,T=(T<<20|T>>>12)+I|0,A+=(T&D|I&~D)+O[9]+568446438|0,A=(A<<5|A>>>27)+T|0,D+=(A&I|T&~I)+O[14]-1019803690|0,D=(D<<9|D>>>23)+A|0,I+=(D&T|A&~T)+O[3]-187363961|0,I=(I<<14|I>>>18)+D|0,T+=(I&A|D&~A)+O[8]+1163531501|0,T=(T<<20|T>>>12)+I|0,A+=(T&D|I&~D)+O[13]-1444681467|0,A=(A<<5|A>>>27)+T|0,D+=(A&I|T&~I)+O[2]-51403784|0,D=(D<<9|D>>>23)+A|0,I+=(D&T|A&~T)+O[7]+1735328473|0,I=(I<<14|I>>>18)+D|0,T+=(I&A|D&~A)+O[12]-1926607734|0,T=(T<<20|T>>>12)+I|0,A+=(T^I^D)+O[5]-378558|0,A=(A<<4|A>>>28)+T|0,D+=(A^T^I)+O[8]-2022574463|0,D=(D<<11|D>>>21)+A|0,I+=(D^A^T)+O[11]+1839030562|0,I=(I<<16|I>>>16)+D|0,T+=(I^D^A)+O[14]-35309556|0,T=(T<<23|T>>>9)+I|0,A+=(T^I^D)+O[1]-1530992060|0,A=(A<<4|A>>>28)+T|0,D+=(A^T^I)+O[4]+1272893353|0,D=(D<<11|D>>>21)+A|0,I+=(D^A^T)+O[7]-155497632|0,I=(I<<16|I>>>16)+D|0,T+=(I^D^A)+O[10]-1094730640|0,T=(T<<23|T>>>9)+I|0,A+=(T^I^D)+O[13]+681279174|0,A=(A<<4|A>>>28)+T|0,D+=(A^T^I)+O[0]-358537222|0,D=(D<<11|D>>>21)+A|0,I+=(D^A^T)+O[3]-722521979|0,I=(I<<16|I>>>16)+D|0,T+=(I^D^A)+O[6]+76029189|0,T=(T<<23|T>>>9)+I|0,A+=(T^I^D)+O[9]-640364487|0,A=(A<<4|A>>>28)+T|0,D+=(A^T^I)+O[12]-421815835|0,D=(D<<11|D>>>21)+A|0,I+=(D^A^T)+O[15]+530742520|0,I=(I<<16|I>>>16)+D|0,T+=(I^D^A)+O[2]-995338651|0,T=(T<<23|T>>>9)+I|0,A+=(I^(T|~D))+O[0]-198630844|0,A=(A<<6|A>>>26)+T|0,D+=(T^(A|~I))+O[7]+1126891415|0,D=(D<<10|D>>>22)+A|0,I+=(A^(D|~T))+O[14]-1416354905|0,I=(I<<15|I>>>17)+D|0,T+=(D^(I|~A))+O[5]-57434055|0,T=(T<<21|T>>>11)+I|0,A+=(I^(T|~D))+O[12]+1700485571|0,A=(A<<6|A>>>26)+T|0,D+=(T^(A|~I))+O[3]-1894986606|0,D=(D<<10|D>>>22)+A|0,I+=(A^(D|~T))+O[10]-1051523|0,I=(I<<15|I>>>17)+D|0,T+=(D^(I|~A))+O[1]-2054922799|0,T=(T<<21|T>>>11)+I|0,A+=(I^(T|~D))+O[8]+1873313359|0,A=(A<<6|A>>>26)+T|0,D+=(T^(A|~I))+O[15]-30611744|0,D=(D<<10|D>>>22)+A|0,I+=(A^(D|~T))+O[6]-1560198380|0,I=(I<<15|I>>>17)+D|0,T+=(D^(I|~A))+O[13]+1309151649|0,T=(T<<21|T>>>11)+I|0,A+=(I^(T|~D))+O[4]-145523070|0,A=(A<<6|A>>>26)+T|0,D+=(T^(A|~I))+O[11]-1120210379|0,D=(D<<10|D>>>22)+A|0,I+=(A^(D|~T))+O[2]+718787259|0,I=(I<<15|I>>>17)+D|0,T+=(D^(I|~A))+O[9]-343485551|0,T=(T<<21|T>>>11)+I|0,w[0]=A+w[0]|0,w[1]=T+w[1]|0,w[2]=I+w[2]|0,w[3]=D+w[3]|0}function s(w){var O=[],A;for(A=0;A<64;A+=4)O[A>>2]=w.charCodeAt(A)+(w.charCodeAt(A+1)<<8)+(w.charCodeAt(A+2)<<16)+(w.charCodeAt(A+3)<<24);return O}function o(w){var O=[],A;for(A=0;A<64;A+=4)O[A>>2]=w[A]+(w[A+1]<<8)+(w[A+2]<<16)+(w[A+3]<<24);return O}function u(w){var O=w.length,A=[1732584193,-271733879,-1732584194,271733878],T,I,D,U,H,N;for(T=64;T<=O;T+=64)a(A,s(w.substring(T-64,T)));for(w=w.substring(T-64),I=w.length,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=0;T<I;T+=1)D[T>>2]|=w.charCodeAt(T)<<(T%4<<3);if(D[T>>2]|=128<<(T%4<<3),T>55)for(a(A,D),T=0;T<16;T+=1)D[T]=0;return U=O*8,U=U.toString(16).match(/(.*?)(.{0,8})$/),H=parseInt(U[2],16),N=parseInt(U[1],16)||0,D[14]=H,D[15]=N,a(A,D),A}function c(w){var O=w.length,A=[1732584193,-271733879,-1732584194,271733878],T,I,D,U,H,N;for(T=64;T<=O;T+=64)a(A,o(w.subarray(T-64,T)));for(w=T-64<O?w.subarray(T-64):new Uint8Array(0),I=w.length,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=0;T<I;T+=1)D[T>>2]|=w[T]<<(T%4<<3);if(D[T>>2]|=128<<(T%4<<3),T>55)for(a(A,D),T=0;T<16;T+=1)D[T]=0;return U=O*8,U=U.toString(16).match(/(.*?)(.{0,8})$/),H=parseInt(U[2],16),N=parseInt(U[1],16)||0,D[14]=H,D[15]=N,a(A,D),A}function l(w){var O="",A;for(A=0;A<4;A+=1)O+=n[w>>A*8+4&15]+n[w>>A*8&15];return O}function d(w){var O;for(O=0;O<w.length;O+=1)w[O]=l(w[O]);return w.join("")}d(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function w(O,A){return O=O|0||0,O<0?Math.max(O+A,0):Math.min(O,A)}ArrayBuffer.prototype.slice=function(O,A){var T=this.byteLength,I=w(O,T),D=T,U,H,N,R;return A!==r&&(D=w(A,T)),I>D?new ArrayBuffer(0):(U=D-I,H=new ArrayBuffer(U),N=new Uint8Array(H),R=new Uint8Array(this,I,U),N.set(R),H)}}();function f(w){return/[\u0080-\uFFFF]/.test(w)&&(w=unescape(encodeURIComponent(w))),w}function h(w,O){var A=w.length,T=new ArrayBuffer(A),I=new Uint8Array(T),D;for(D=0;D<A;D+=1)I[D]=w.charCodeAt(D);return O?I:T}function p(w){return String.fromCharCode.apply(null,new Uint8Array(w))}function b(w,O,A){var T=new Uint8Array(w.byteLength+O.byteLength);return T.set(new Uint8Array(w)),T.set(new Uint8Array(O),w.byteLength),A?T:T.buffer}function _(w){var O=[],A=w.length,T;for(T=0;T<A-1;T+=2)O.push(parseInt(w.substr(T,2),16));return String.fromCharCode.apply(String,O)}function E(){this.reset()}return E.prototype.append=function(w){return this.appendBinary(f(w)),this},E.prototype.appendBinary=function(w){this._buff+=w,this._length+=w.length;var O=this._buff.length,A;for(A=64;A<=O;A+=64)a(this._hash,s(this._buff.substring(A-64,A)));return this._buff=this._buff.substring(A-64),this},E.prototype.end=function(w){var O=this._buff,A=O.length,T,I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D;for(T=0;T<A;T+=1)I[T>>2]|=O.charCodeAt(T)<<(T%4<<3);return this._finish(I,A),D=d(this._hash),w&&(D=_(D)),this.reset(),D},E.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},E.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},E.prototype.setState=function(w){return this._buff=w.buff,this._length=w.length,this._hash=w.hash,this},E.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},E.prototype._finish=function(w,O){var A=O,T,I,D;if(w[A>>2]|=128<<(A%4<<3),A>55)for(a(this._hash,w),A=0;A<16;A+=1)w[A]=0;T=this._length*8,T=T.toString(16).match(/(.*?)(.{0,8})$/),I=parseInt(T[2],16),D=parseInt(T[1],16)||0,w[14]=I,w[15]=D,a(this._hash,w)},E.hash=function(w,O){return E.hashBinary(f(w),O)},E.hashBinary=function(w,O){var A=u(w),T=d(A);return O?_(T):T},E.ArrayBuffer=function(){this.reset()},E.ArrayBuffer.prototype.append=function(w){var O=b(this._buff.buffer,w,!0),A=O.length,T;for(this._length+=w.byteLength,T=64;T<=A;T+=64)a(this._hash,o(O.subarray(T-64,T)));return this._buff=T-64<A?new Uint8Array(O.buffer.slice(T-64)):new Uint8Array(0),this},E.ArrayBuffer.prototype.end=function(w){var O=this._buff,A=O.length,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I,D;for(I=0;I<A;I+=1)T[I>>2]|=O[I]<<(I%4<<3);return this._finish(T,A),D=d(this._hash),w&&(D=_(D)),this.reset(),D},E.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},E.ArrayBuffer.prototype.getState=function(){var w=E.prototype.getState.call(this);return w.buff=p(w.buff),w},E.ArrayBuffer.prototype.setState=function(w){return w.buff=h(w.buff,!0),E.prototype.setState.call(this,w)},E.ArrayBuffer.prototype.destroy=E.prototype.destroy,E.ArrayBuffer.prototype._finish=E.prototype._finish,E.ArrayBuffer.hash=function(w,O){var A=c(new Uint8Array(w)),T=d(A);return O?_(T):T},E})})(V7);var qfe=V7.exports,vR={},I2={},P2={};Object.defineProperty(P2,"__esModule",{value:!0});P2.default=Hfe;let v1;const Vfe=new Uint8Array(16);function Hfe(){if(!v1&&(v1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!v1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v1(Vfe)}var cc={},Dl={},D2={};Object.defineProperty(D2,"__esModule",{value:!0});D2.default=void 0;var kfe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;D2.default=kfe;Object.defineProperty(Dl,"__esModule",{value:!0});Dl.default=void 0;var Qfe=Gfe(D2);function Gfe(t){return t&&t.__esModule?t:{default:t}}function zfe(t){return typeof t=="string"&&Qfe.default.test(t)}var Wfe=zfe;Dl.default=Wfe;Object.defineProperty(cc,"__esModule",{value:!0});cc.default=void 0;cc.unsafeStringify=H7;var Xfe=Kfe(Dl);function Kfe(t){return t&&t.__esModule?t:{default:t}}const Mn=[];for(let t=0;t<256;++t)Mn.push((t+256).toString(16).slice(1));function H7(t,e=0){return Mn[t[e+0]]+Mn[t[e+1]]+Mn[t[e+2]]+Mn[t[e+3]]+"-"+Mn[t[e+4]]+Mn[t[e+5]]+"-"+Mn[t[e+6]]+Mn[t[e+7]]+"-"+Mn[t[e+8]]+Mn[t[e+9]]+"-"+Mn[t[e+10]]+Mn[t[e+11]]+Mn[t[e+12]]+Mn[t[e+13]]+Mn[t[e+14]]+Mn[t[e+15]]}function Jfe(t,e=0){const r=H7(t,e);if(!(0,Xfe.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Yfe=Jfe;cc.default=Yfe;Object.defineProperty(I2,"__esModule",{value:!0});I2.default=void 0;var Zfe=the(P2),ehe=cc;function the(t){return t&&t.__esModule?t:{default:t}}let J4,WT,XT=0,KT=0;function rhe(t,e,r){let n=e&&r||0;const a=e||new Array(16);t=t||{};let s=t.node||J4,o=t.clockseq!==void 0?t.clockseq:WT;if(s==null||o==null){const h=t.random||(t.rng||Zfe.default)();s==null&&(s=J4=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),o==null&&(o=WT=(h[6]<<8|h[7])&16383)}let u=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:KT+1;const l=u-XT+(c-KT)/1e4;if(l<0&&t.clockseq===void 0&&(o=o+1&16383),(l<0||u>XT)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");XT=u,KT=c,WT=o,u+=122192928e5;const d=((u&268435455)*1e4+c)%4294967296;a[n++]=d>>>24&255,a[n++]=d>>>16&255,a[n++]=d>>>8&255,a[n++]=d&255;const f=u/4294967296*1e4&268435455;a[n++]=f>>>8&255,a[n++]=f&255,a[n++]=f>>>24&15|16,a[n++]=f>>>16&255,a[n++]=o>>>8|128,a[n++]=o&255;for(let h=0;h<6;++h)a[n+h]=s[h];return e||(0,ehe.unsafeStringify)(a)}var nhe=rhe;I2.default=nhe;var N2={},Zu={},ry={};Object.defineProperty(ry,"__esModule",{value:!0});ry.default=void 0;var ihe=ahe(Dl);function ahe(t){return t&&t.__esModule?t:{default:t}}function she(t){if(!(0,ihe.default)(t))throw TypeError("Invalid UUID");let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var ohe=she;ry.default=ohe;Object.defineProperty(Zu,"__esModule",{value:!0});Zu.URL=Zu.DNS=void 0;Zu.default=fhe;var uhe=cc,che=lhe(ry);function lhe(t){return t&&t.__esModule?t:{default:t}}function dhe(t){t=unescape(encodeURIComponent(t));const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}const k7="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Zu.DNS=k7;const Q7="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Zu.URL=Q7;function fhe(t,e,r){function n(a,s,o,u){var c;if(typeof a=="string"&&(a=dhe(a)),typeof s=="string"&&(s=(0,che.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+a.length);if(l.set(s),l.set(a,s.length),l=r(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){u=u||0;for(let d=0;d<16;++d)o[u+d]=l[d];return o}return(0,uhe.unsafeStringify)(l)}try{n.name=t}catch{}return n.DNS=k7,n.URL=Q7,n}var j2={};Object.defineProperty(j2,"__esModule",{value:!0});j2.default=void 0;function hhe(t){if(typeof t=="string"){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return phe(yhe(bhe(t),t.length*8))}function phe(t){const e=[],r=t.length*32,n="0123456789abcdef";for(let a=0;a<r;a+=8){const s=t[a>>5]>>>a%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function G7(t){return(t+64>>>9<<4)+14+1}function yhe(t,e){t[e>>5]|=128<<e%32,t[G7(e)-1]=e;let r=1732584193,n=-271733879,a=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const u=r,c=n,l=a,d=s;r=Hn(r,n,a,s,t[o],7,-680876936),s=Hn(s,r,n,a,t[o+1],12,-389564586),a=Hn(a,s,r,n,t[o+2],17,606105819),n=Hn(n,a,s,r,t[o+3],22,-1044525330),r=Hn(r,n,a,s,t[o+4],7,-176418897),s=Hn(s,r,n,a,t[o+5],12,1200080426),a=Hn(a,s,r,n,t[o+6],17,-1473231341),n=Hn(n,a,s,r,t[o+7],22,-45705983),r=Hn(r,n,a,s,t[o+8],7,1770035416),s=Hn(s,r,n,a,t[o+9],12,-1958414417),a=Hn(a,s,r,n,t[o+10],17,-42063),n=Hn(n,a,s,r,t[o+11],22,-1990404162),r=Hn(r,n,a,s,t[o+12],7,1804603682),s=Hn(s,r,n,a,t[o+13],12,-40341101),a=Hn(a,s,r,n,t[o+14],17,-1502002290),n=Hn(n,a,s,r,t[o+15],22,1236535329),r=kn(r,n,a,s,t[o+1],5,-165796510),s=kn(s,r,n,a,t[o+6],9,-1069501632),a=kn(a,s,r,n,t[o+11],14,643717713),n=kn(n,a,s,r,t[o],20,-373897302),r=kn(r,n,a,s,t[o+5],5,-701558691),s=kn(s,r,n,a,t[o+10],9,38016083),a=kn(a,s,r,n,t[o+15],14,-660478335),n=kn(n,a,s,r,t[o+4],20,-405537848),r=kn(r,n,a,s,t[o+9],5,568446438),s=kn(s,r,n,a,t[o+14],9,-1019803690),a=kn(a,s,r,n,t[o+3],14,-187363961),n=kn(n,a,s,r,t[o+8],20,1163531501),r=kn(r,n,a,s,t[o+13],5,-1444681467),s=kn(s,r,n,a,t[o+2],9,-51403784),a=kn(a,s,r,n,t[o+7],14,1735328473),n=kn(n,a,s,r,t[o+12],20,-1926607734),r=Qn(r,n,a,s,t[o+5],4,-378558),s=Qn(s,r,n,a,t[o+8],11,-2022574463),a=Qn(a,s,r,n,t[o+11],16,1839030562),n=Qn(n,a,s,r,t[o+14],23,-35309556),r=Qn(r,n,a,s,t[o+1],4,-1530992060),s=Qn(s,r,n,a,t[o+4],11,1272893353),a=Qn(a,s,r,n,t[o+7],16,-155497632),n=Qn(n,a,s,r,t[o+10],23,-1094730640),r=Qn(r,n,a,s,t[o+13],4,681279174),s=Qn(s,r,n,a,t[o],11,-358537222),a=Qn(a,s,r,n,t[o+3],16,-722521979),n=Qn(n,a,s,r,t[o+6],23,76029189),r=Qn(r,n,a,s,t[o+9],4,-640364487),s=Qn(s,r,n,a,t[o+12],11,-421815835),a=Qn(a,s,r,n,t[o+15],16,530742520),n=Qn(n,a,s,r,t[o+2],23,-995338651),r=Gn(r,n,a,s,t[o],6,-198630844),s=Gn(s,r,n,a,t[o+7],10,1126891415),a=Gn(a,s,r,n,t[o+14],15,-1416354905),n=Gn(n,a,s,r,t[o+5],21,-57434055),r=Gn(r,n,a,s,t[o+12],6,1700485571),s=Gn(s,r,n,a,t[o+3],10,-1894986606),a=Gn(a,s,r,n,t[o+10],15,-1051523),n=Gn(n,a,s,r,t[o+1],21,-2054922799),r=Gn(r,n,a,s,t[o+8],6,1873313359),s=Gn(s,r,n,a,t[o+15],10,-30611744),a=Gn(a,s,r,n,t[o+6],15,-1560198380),n=Gn(n,a,s,r,t[o+13],21,1309151649),r=Gn(r,n,a,s,t[o+4],6,-145523070),s=Gn(s,r,n,a,t[o+11],10,-1120210379),a=Gn(a,s,r,n,t[o+2],15,718787259),n=Gn(n,a,s,r,t[o+9],21,-343485551),r=Fu(r,u),n=Fu(n,c),a=Fu(a,l),s=Fu(s,d)}return[r,n,a,s]}function bhe(t){if(t.length===0)return[];const e=t.length*8,r=new Uint32Array(G7(e));for(let n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function Fu(t,e){const r=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(r>>16)<<16|r&65535}function _he(t,e){return t<<e|t>>>32-e}function C2(t,e,r,n,a,s){return Fu(_he(Fu(Fu(e,t),Fu(n,s)),a),r)}function Hn(t,e,r,n,a,s,o){return C2(e&r|~e&n,t,e,a,s,o)}function kn(t,e,r,n,a,s,o){return C2(e&n|r&~n,t,e,a,s,o)}function Qn(t,e,r,n,a,s,o){return C2(e^r^n,t,e,a,s,o)}function Gn(t,e,r,n,a,s,o){return C2(r^(e|~n),t,e,a,s,o)}var ghe=hhe;j2.default=ghe;Object.defineProperty(N2,"__esModule",{value:!0});N2.default=void 0;var mhe=z7(Zu),vhe=z7(j2);function z7(t){return t&&t.__esModule?t:{default:t}}const whe=(0,mhe.default)("v3",48,vhe.default);var She=whe;N2.default=She;var M2={},F2={};Object.defineProperty(F2,"__esModule",{value:!0});F2.default=void 0;const The=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Ehe={randomUUID:The};F2.default=Ehe;Object.defineProperty(M2,"__esModule",{value:!0});M2.default=void 0;var Y4=W7(F2),Ohe=W7(P2),Ahe=cc;function W7(t){return t&&t.__esModule?t:{default:t}}function xhe(t,e,r){if(Y4.default.randomUUID&&!e&&!t)return Y4.default.randomUUID();t=t||{};const n=t.random||(t.rng||Ohe.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let a=0;a<16;++a)e[r+a]=n[a];return e}return(0,Ahe.unsafeStringify)(n)}var Rhe=xhe;M2.default=Rhe;var L2={},B2={};Object.defineProperty(B2,"__esModule",{value:!0});B2.default=void 0;function Ihe(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function JT(t,e){return t<<e|t>>>32-e}function Phe(t){const e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){const o=unescape(encodeURIComponent(t));t=[];for(let u=0;u<o.length;++u)t.push(o.charCodeAt(u))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const n=t.length/4+2,a=Math.ceil(n/16),s=new Array(a);for(let o=0;o<a;++o){const u=new Uint32Array(16);for(let c=0;c<16;++c)u[c]=t[o*64+c*4]<<24|t[o*64+c*4+1]<<16|t[o*64+c*4+2]<<8|t[o*64+c*4+3];s[o]=u}s[a-1][14]=(t.length-1)*8/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(t.length-1)*8&4294967295;for(let o=0;o<a;++o){const u=new Uint32Array(80);for(let p=0;p<16;++p)u[p]=s[o][p];for(let p=16;p<80;++p)u[p]=JT(u[p-3]^u[p-8]^u[p-14]^u[p-16],1);let c=r[0],l=r[1],d=r[2],f=r[3],h=r[4];for(let p=0;p<80;++p){const b=Math.floor(p/20),_=JT(c,5)+Ihe(b,l,d,f)+h+e[b]+u[p]>>>0;h=f,f=d,d=JT(l,30)>>>0,l=c,c=_}r[0]=r[0]+c>>>0,r[1]=r[1]+l>>>0,r[2]=r[2]+d>>>0,r[3]=r[3]+f>>>0,r[4]=r[4]+h>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Dhe=Phe;B2.default=Dhe;Object.defineProperty(L2,"__esModule",{value:!0});L2.default=void 0;var Nhe=X7(Zu),jhe=X7(B2);function X7(t){return t&&t.__esModule?t:{default:t}}const Che=(0,Nhe.default)("v5",80,jhe.default);var Mhe=Che;L2.default=Mhe;var $2={};Object.defineProperty($2,"__esModule",{value:!0});$2.default=void 0;var Fhe="00000000-0000-0000-0000-000000000000";$2.default=Fhe;var U2={};Object.defineProperty(U2,"__esModule",{value:!0});U2.default=void 0;var Lhe=Bhe(Dl);function Bhe(t){return t&&t.__esModule?t:{default:t}}function $he(t){if(!(0,Lhe.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var Uhe=$he;U2.default=Uhe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return o.default}});var e=d(I2),r=d(N2),n=d(M2),a=d(L2),s=d($2),o=d(U2),u=d(Dl),c=d(cc),l=d(ry);function d(f){return f&&f.__esModule?f:{default:f}}})(vR);var ph={},Z4;function q2(){if(Z4)return ph;Z4=1,Object.defineProperty(ph,"__esModule",{value:!0}),ph.orderTypes=void 0;const t=fs,e=Uf(),r=Pl(),n=ni,a=Ke;function s(l,d,f=!1,h,p){if(l===d)return 0;if(l===void 0)return-1;if(d===void 0)return 1;if(l.termType!==d.termType)return c[l.termType]<c[d.termType]?-1:1;if(l.equals(d))return 0;if(l.termType==="Quad"&&d.termType==="Quad"){const b=s(l.subject,d.subject,f,h,p);if(b!==0)return b;const _=s(l.predicate,d.predicate,f,h,p);if(_!==0)return _;const E=s(l.object,d.object,f,h,p);return E!==0?E:s(l.graph,d.graph,f,h,p)}if(l.termType==="Literal")return o(l,d,h,p);if(f)throw new a.InvalidCompareArgumentTypes(l,d);return u(l.value,d.value)}ph.orderTypes=s;function o(l,d,f,h){const p=e.regularFunctions[n.RegularOperator.GT],b=e.regularFunctions[n.RegularOperator.EQUAL],_={now:new Date,functionArgumentsCache:{},superTypeProvider:{discoverer:f||(()=>"term"),cache:h||new t.LRUCache({max:1e3})},defaultTimeZone:{zoneHours:0,zoneMinutes:0}},E=new r.TermTransformer(_.superTypeProvider),w=E.transformLiteral(l),O=E.transformLiteral(d);try{return b.apply([w,O],_).typedValue?0:p.apply([w,O],_).typedValue?1:-1}catch{const A=u(w.dataType,O.dataType);return A!==0?A:u(w.str(),O.str())}}function u(l,d){return l===d?0:l<d?-1:1}const c={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5};return ph}var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.langMatches=Qu.replace=Qu.matches=void 0;function qhe(t,e,r){return new RegExp(e,r).test(t)}Qu.matches=qhe;function Vhe(t,e,r,n){let a=new RegExp(e,n);if(!a.global){const s=n||"";a=new RegExp(e,`${s}g`)}return t.replace(a,r)}Qu.replace=Vhe;function Hhe(t,e){const r=t.split("-"),n=e.split("-");if(!t6(n[0],r[0])&&!e6(r[0]))return!1;let a=1,s=1;for(;s<n.length;){if(e6(n[s])){s++;continue}if(a===r.length)return!1;if(t6(n[s],r[a])){a++,s++;continue}if(r[a].length===1)return!1;a++}return!0}Qu.langMatches=Hhe;function e6(t){return t==="*"}function t6(t,e){return new RegExp(`/${t}/`,"iu").test(`/${e}/`)}var r6;function khe(){if(r6)return hh;r6=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.definitions=void 0;const t=Ufe,e=H_,r=ft,n=Oa,a=qfe,s=vR,o=ia(),u=Pl(),c=ni,l=ni,d=Ct,f=Ke,h=q2(),p=Lo,b=ga,_=ro(),E=Qu,w=Uf(),O=new r.DataFactory,A={arity:1,overloads:(0,_.declare)(c.RegularOperator.NOT).onTerm1(()=>B=>(0,_.bool)(!B.coerceEBV())).collect()},T={arity:1,overloads:(0,_.declare)(c.RegularOperator.UPLUS).numericConverter(()=>B=>B).collect()},I={arity:1,overloads:(0,_.declare)(c.RegularOperator.UMINUS).numericConverter(()=>B=>-B).collect()},D={arity:2,overloads:(0,_.declare)(c.RegularOperator.MULTIPLICATION).arithmetic(()=>(B,re)=>new t.BigNumber(B).times(re).toNumber()).collect()},U={arity:2,overloads:(0,_.declare)(c.RegularOperator.DIVISION).arithmetic(()=>(B,re)=>new t.BigNumber(B).div(re).toNumber()).onBinaryTyped([l.TypeURL.XSD_INTEGER,l.TypeURL.XSD_INTEGER],()=>(B,re)=>{if(re===0)throw new f.ExpressionError("Integer division by 0");return(0,_.decimal)(new t.BigNumber(B).div(re).toNumber())}).collect()},H={arity:2,overloads:(0,_.declare)(c.RegularOperator.ADDITION).arithmetic(()=>(B,re)=>new t.BigNumber(B).plus(re).toNumber()).set([l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([B,re])=>new o.DateTimeLiteral((0,p.addDurationToDateTime)(B.typedValue,(0,d.defaultedDurationRepresentation)(re.typedValue)))).copy({from:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],to:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([l.TypeURL.XSD_DATE,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([B,re])=>new o.DateLiteral((0,p.addDurationToDateTime)((0,d.defaultedDateTimeRepresentation)(B.typedValue),(0,d.defaultedDurationRepresentation)(re.typedValue)))).copy({from:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_DAY_TIME_DURATION],to:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([l.TypeURL.XSD_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([B,re])=>new o.TimeLiteral((0,p.addDurationToDateTime)((0,d.defaultedDateTimeRepresentation)(B.typedValue),(0,d.defaultedDurationRepresentation)(re.typedValue)))).copy({from:[l.TypeURL.XSD_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],to:[l.TypeURL.XSD_TIME,l.TypeURL.XSD_YEAR_MONTH_DURATION]}).collect()},N={arity:2,overloads:(0,_.declare)(c.RegularOperator.SUBTRACTION).arithmetic(()=>(B,re)=>new t.BigNumber(B).minus(re).toNumber()).set([l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DATE_TIME],({defaultTimeZone:B})=>([re,Se])=>new o.DayTimeDurationLiteral((0,p.elapsedDuration)(re.typedValue,Se.typedValue,B))).copy({from:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_DATE]}).copy({from:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_TIME,l.TypeURL.XSD_TIME]}).set([l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([B,re])=>new o.DateTimeLiteral((0,p.addDurationToDateTime)(B.typedValue,(0,d.defaultedDurationRepresentation)((0,d.negateDuration)(re.typedValue))))).copy({from:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],to:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([l.TypeURL.XSD_DATE,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([B,re])=>new o.DateLiteral((0,p.addDurationToDateTime)((0,d.defaultedDateTimeRepresentation)(B.typedValue),(0,d.defaultedDurationRepresentation)((0,d.negateDuration)(re.typedValue))))).copy({from:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_DAY_TIME_DURATION],to:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([l.TypeURL.XSD_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([B,re])=>new o.TimeLiteral((0,p.addDurationToDateTime)((0,d.defaultedDateTimeRepresentation)(B.typedValue),(0,d.defaultedDurationRepresentation)((0,d.negateDuration)(re.typedValue))))).collect()},R={arity:2,overloads:(0,_.declare)(c.RegularOperator.EQUAL).numberTest(()=>(B,re)=>B===re).stringTest(()=>(B,re)=>B.localeCompare(re)===0).set([l.TypeURL.RDF_LANG_STRING,l.TypeURL.RDF_LANG_STRING],()=>([B,re])=>(0,_.bool)(B.str()===re.str()&&B.language===re.language)).set([l.TypeAlias.SPARQL_STRINGLY,l.TypeAlias.SPARQL_STRINGLY],()=>()=>(0,_.bool)(!1)).booleanTest(()=>(B,re)=>B===re).dateTimeTest(({defaultTimeZone:B})=>(re,Se)=>(0,d.toUTCDate)(re,B).getTime()===(0,d.toUTCDate)(Se,B).getTime()).copy({from:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_DATE]}).set(["quad","quad"],B=>([re,Se])=>{const Fe=new b.RegularFunction(l.RegularOperator.EQUAL,R);return(0,_.bool)(Fe.apply([re.subject,Se.subject],B).coerceEBV()&&Fe.apply([re.predicate,Se.predicate],B).coerceEBV()&&Fe.apply([re.object,Se.object],B).coerceEBV())},!1).set(["term","term"],()=>([B,re])=>(0,_.bool)(F(B,re)),!1).set([l.TypeURL.XSD_DURATION,l.TypeURL.XSD_DURATION],()=>([B,re])=>(0,_.bool)((0,d.yearMonthDurationsToMonths)((0,d.defaultedYearMonthDurationRepresentation)(B.typedValue))===(0,d.yearMonthDurationsToMonths)((0,d.defaultedYearMonthDurationRepresentation)(re.typedValue))&&(0,d.dayTimeDurationsToSeconds)((0,d.defaultedDayTimeDurationRepresentation)(B.typedValue))===(0,d.dayTimeDurationsToSeconds)((0,d.defaultedDayTimeDurationRepresentation)(re.typedValue)))).set([l.TypeURL.XSD_TIME,l.TypeURL.XSD_TIME],({defaultTimeZone:B})=>([re,Se])=>(0,_.bool)((0,d.toUTCDate)((0,d.defaultedDateTimeRepresentation)(re.typedValue),B).getTime()===(0,d.toUTCDate)((0,d.defaultedDateTimeRepresentation)(Se.typedValue),B).getTime())).collect()};function F(B,re){const Se=B.toRDF(),Fe=re.toRDF(),Ae=Se.equals(Fe);if(!Ae&&Se.termType==="Literal"&&Fe.termType==="Literal")throw new f.RDFEqualTypeError([B,re]);return Ae}const X={arity:2,overloads:(0,_.declare)(c.RegularOperator.NOT_EQUAL).set(["term","term"],B=>([re,Se])=>(0,_.bool)(!w.regularFunctions[c.RegularOperator.EQUAL].apply([re,Se],B).typedValue)).collect()},ne={arity:2,overloads:(0,_.declare)(c.RegularOperator.LT).numberTest(()=>(B,re)=>B<re).stringTest(()=>(B,re)=>B.localeCompare(re)===-1).booleanTest(()=>(B,re)=>B<re).set(["quad","quad"],()=>([B,re])=>(0,_.bool)((0,h.orderTypes)(B.toRDF(),re.toRDF(),!0)===-1),!1).dateTimeTest(({defaultTimeZone:B})=>(re,Se)=>(0,d.toUTCDate)(re,B).getTime()<(0,d.toUTCDate)(Se,B).getTime()).copy({from:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_DATE]}).set([l.TypeURL.XSD_YEAR_MONTH_DURATION,l.TypeURL.XSD_YEAR_MONTH_DURATION],()=>([B,re])=>(0,_.bool)((0,d.yearMonthDurationsToMonths)((0,d.defaultedYearMonthDurationRepresentation)(B.typedValue))<(0,d.yearMonthDurationsToMonths)((0,d.defaultedYearMonthDurationRepresentation)(re.typedValue)))).set([l.TypeURL.XSD_DAY_TIME_DURATION,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([B,re])=>(0,_.bool)((0,d.dayTimeDurationsToSeconds)((0,d.defaultedDayTimeDurationRepresentation)(B.typedValue))<(0,d.dayTimeDurationsToSeconds)((0,d.defaultedDayTimeDurationRepresentation)(re.typedValue)))).set([l.TypeURL.XSD_TIME,l.TypeURL.XSD_TIME],({defaultTimeZone:B})=>([re,Se])=>(0,_.bool)((0,d.toUTCDate)((0,d.defaultedDateTimeRepresentation)(re.typedValue),B).getTime()<(0,d.toUTCDate)((0,d.defaultedDateTimeRepresentation)(Se.typedValue),B).getTime())).collect()},$={arity:2,overloads:(0,_.declare)(c.RegularOperator.GT).set(["term","term"],B=>([re,Se])=>w.regularFunctions[c.RegularOperator.LT].apply([Se,re],B)).collect()},C={arity:2,overloads:(0,_.declare)(c.RegularOperator.LTE).set(["term","term"],B=>([re,Se])=>(0,_.bool)(w.regularFunctions[c.RegularOperator.LT].apply([re,Se],B).typedValue||w.regularFunctions[c.RegularOperator.EQUAL].apply([re,Se],B).typedValue)).collect()},Q={arity:2,overloads:(0,_.declare)(c.RegularOperator.GTE).set(["term","term"],B=>([re,Se])=>w.regularFunctions[c.RegularOperator.LTE].apply([Se,re],B)).collect()},se={arity:1,overloads:(0,_.declare)(c.RegularOperator.IS_IRI).onTerm1(()=>B=>(0,_.bool)(B.termType==="namedNode")).collect()},ie={arity:1,overloads:(0,_.declare)(c.RegularOperator.IS_BLANK).onTerm1(()=>B=>(0,_.bool)(B.termType==="blankNode")).collect()},be={arity:1,overloads:(0,_.declare)(c.RegularOperator.IS_LITERAL).onTerm1(()=>B=>(0,_.bool)(B.termType==="literal")).collect()},he={arity:1,overloads:(0,_.declare)(c.RegularOperator.IS_NUMERIC).onNumeric1(()=>()=>(0,_.bool)(!0)).onTerm1(()=>()=>(0,_.bool)(!1)).collect()},Te={arity:1,overloads:(0,_.declare)(c.RegularOperator.STR).onTerm1(()=>B=>(0,_.string)(B.str())).collect()},Ne={arity:1,overloads:(0,_.declare)(c.RegularOperator.LANG).onLiteral1(()=>B=>(0,_.string)(B.language||"")).collect()},ye={arity:1,overloads:(0,_.declare)(c.RegularOperator.DATATYPE).onLiteral1(()=>B=>new o.NamedNode(B.dataType)).collect()},ce={arity:1,overloads:(0,_.declare)(c.RegularOperator.IRI).set(["namedNode"],B=>re=>{const Se=re[0],Fe=(0,n.resolve)(Se.str(),B.baseIRI||"");return new o.NamedNode(Fe)}).onString1(B=>re=>{const Se=(0,n.resolve)(re.str(),B.baseIRI||"");return new o.NamedNode(Se)}).collect()},xe={arity:2,overloads:(0,_.declare)(c.RegularOperator.STRDT).set([l.TypeURL.XSD_STRING,"namedNode"],({superTypeProvider:B})=>([re,Se])=>{const Fe=O.literal(re.typedValue,O.namedNode(Se.value));return new u.TermTransformer(B).transformLiteral(Fe)}).collect()},oe={arity:2,overloads:(0,_.declare)(c.RegularOperator.STRLANG).onBinaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>(B,re)=>new o.LangStringLiteral(B,re.toLowerCase())).collect()},J={arity:0,overloads:(0,_.declare)(c.RegularOperator.UUID).set([],()=>()=>new o.NamedNode(`urn:uuid:${s.v4()}`)).collect()},le={arity:0,overloads:(0,_.declare)(c.RegularOperator.STRUUID).set([],()=>()=>(0,_.string)(s.v4())).collect()},pe={arity:1,overloads:(0,_.declare)(c.RegularOperator.STRLEN).onStringly1(()=>B=>(0,_.integer)([...B.typedValue].length)).collect()},L={arity:[2,3],overloads:(0,_.declare)(c.RegularOperator.SUBSTR).onBinaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_INTEGER],()=>(B,re)=>(0,_.string)([...B].slice(re-1).join(""))).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.XSD_INTEGER],()=>(B,re)=>{const Se=[...B.typedValue].slice(re.typedValue-1).join("");return(0,_.langString)(Se,B.language)}).onTernaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_INTEGER,l.TypeURL.XSD_INTEGER],()=>(B,re,Se)=>(0,_.string)([...B].slice(re-1,Se+re-1).join(""))).onTernary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.XSD_INTEGER,l.TypeURL.XSD_INTEGER],()=>(B,re,Se)=>{const Fe=[...B.typedValue].slice(re.typedValue-1,Se.typedValue+re.typedValue-1).join("");return(0,_.langString)(Fe,B.language)}).collect()},P={arity:1,overloads:(0,_.declare)(c.RegularOperator.UCASE).onString1Typed(()=>B=>(0,_.string)(B.toUpperCase())).onLangString1(()=>B=>(0,_.langString)(B.typedValue.toUpperCase(),B.language)).collect()},m={arity:1,overloads:(0,_.declare)(c.RegularOperator.LCASE).onString1Typed(()=>B=>(0,_.string)(B.toLowerCase())).onLangString1(()=>B=>(0,_.langString)(B.typedValue.toLowerCase(),B.language)).collect()},y={arity:2,overloads:(0,_.declare)(c.RegularOperator.STRSTARTS).onBinaryTyped([l.TypeAlias.SPARQL_STRINGLY,l.TypeURL.XSD_STRING],()=>(B,re)=>(0,_.bool)(B.startsWith(re))).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.RDF_LANG_STRING],()=>(B,re)=>{if(B.language!==re.language)throw new f.IncompatibleLanguageOperation(B,re);return(0,_.bool)(B.typedValue.startsWith(re.typedValue))}).collect()},v={arity:2,overloads:(0,_.declare)(c.RegularOperator.STRENDS).onBinaryTyped([l.TypeAlias.SPARQL_STRINGLY,l.TypeURL.XSD_STRING],()=>(B,re)=>(0,_.bool)(B.endsWith(re))).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.RDF_LANG_STRING],()=>(B,re)=>{if(B.language!==re.language)throw new f.IncompatibleLanguageOperation(B,re);return(0,_.bool)(B.typedValue.endsWith(re.typedValue))}).collect()},j={arity:2,overloads:(0,_.declare)(c.RegularOperator.CONTAINS).onBinaryTyped([l.TypeAlias.SPARQL_STRINGLY,l.TypeURL.XSD_STRING],()=>(B,re)=>(0,_.bool)(B.includes(re))).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.RDF_LANG_STRING],()=>(B,re)=>{if(B.language!==re.language)throw new f.IncompatibleLanguageOperation(B,re);return(0,_.bool)(B.typedValue.includes(re.typedValue))}).collect()},V={arity:2,overloads:(0,_.declare)(c.RegularOperator.STRBEFORE).onBinaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>(B,re)=>(0,_.string)(B.slice(0,Math.max(0,B.indexOf(re))))).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.XSD_STRING],()=>(B,re)=>{const[Se,Fe]=[B.typedValue,re.typedValue],Ae=B.typedValue.slice(0,Math.max(0,Se.indexOf(Fe)));return Ae||!Fe?(0,_.langString)(Ae,B.language):(0,_.string)(Ae)}).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.RDF_LANG_STRING],()=>(B,re)=>{if(B.language!==re.language)throw new f.IncompatibleLanguageOperation(B,re);const[Se,Fe]=[B.typedValue,re.typedValue],Ae=B.typedValue.slice(0,Math.max(0,Se.indexOf(Fe)));return Ae||!Fe?(0,_.langString)(Ae,B.language):(0,_.string)(Ae)}).collect()},q={arity:2,overloads:(0,_.declare)(c.RegularOperator.STRAFTER).onBinaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>(B,re)=>(0,_.string)(B.slice(B.indexOf(re)).slice(re.length))).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.XSD_STRING],()=>(B,re)=>{const[Se,Fe]=[B.typedValue,re.typedValue],Ae=Se.slice(Se.indexOf(Fe)).slice(Fe.length);return Ae||!Fe?(0,_.langString)(Ae,B.language):(0,_.string)(Ae)}).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.RDF_LANG_STRING],()=>(B,re)=>{if(B.language!==re.language)throw new f.IncompatibleLanguageOperation(B,re);const[Se,Fe]=[B.typedValue,re.typedValue],Ae=Se.slice(Se.indexOf(Fe)).slice(Fe.length);return Ae||!Fe?(0,_.langString)(Ae,B.language):(0,_.string)(Ae)}).collect()},G={arity:1,overloads:(0,_.declare)(c.RegularOperator.ENCODE_FOR_URI).onStringly1Typed(()=>B=>(0,_.string)(encodeURI(B))).collect()},Y={arity:2,overloads:(0,_.declare)(c.RegularOperator.LANG_MATCHES).onBinaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>(B,re)=>(0,_.bool)(E.langMatches(B,re))).collect()},ee=()=>(B,re)=>(0,_.bool)(E.matches(B,re)),ae=()=>(B,re,Se)=>(0,_.bool)(E.matches(B,re,Se)),ve={arity:[2,3],overloads:(0,_.declare)(c.RegularOperator.REGEX).onBinaryTyped([l.TypeAlias.SPARQL_STRINGLY,l.TypeURL.XSD_STRING],ee).onTernaryTyped([l.TypeAlias.SPARQL_STRINGLY,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],ae).collect()},me={arity:[3,4],overloads:(0,_.declare)(c.RegularOperator.REPLACE).onTernaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>(B,re,Se)=>(0,_.string)(E.replace(B,re,Se))).set([l.TypeURL.RDF_LANG_STRING,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>([B,re,Se])=>{const Fe=E.replace(B.typedValue,re.typedValue,Se.typedValue);return(0,_.langString)(Fe,B.language)}).onQuaternaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>(B,re,Se,Fe)=>(0,_.string)(E.replace(B,re,Se,Fe))).set([l.TypeURL.RDF_LANG_STRING,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>([B,re,Se,Fe])=>{const Ae=E.replace(B.typedValue,re.typedValue,Se.typedValue,Fe.typedValue);return(0,_.langString)(Ae,B.language)}).collect()},Ee={arity:1,overloads:(0,_.declare)(c.RegularOperator.ABS).numericConverter(()=>B=>Math.abs(B)).collect()},k={arity:1,overloads:(0,_.declare)(c.RegularOperator.ROUND).numericConverter(()=>B=>Math.round(B)).collect()},W={arity:1,overloads:(0,_.declare)(c.RegularOperator.CEIL).numericConverter(()=>B=>Math.ceil(B)).collect()},M={arity:1,overloads:(0,_.declare)(c.RegularOperator.FLOOR).numericConverter(()=>B=>Math.floor(B)).collect()},S={arity:0,overloads:(0,_.declare)(c.RegularOperator.RAND).set([],()=>()=>(0,_.double)(Math.random())).collect()},x={arity:0,overloads:(0,_.declare)(c.RegularOperator.NOW).set([],B=>()=>new o.DateTimeLiteral((0,d.toDateTimeRepresentation)({date:B.now,timeZone:B.defaultTimeZone}))).collect()},z={arity:1,overloads:(0,_.declare)(c.RegularOperator.YEAR).onDateTime1(()=>B=>(0,_.integer)(B.typedValue.year)).set([l.TypeURL.XSD_DATE],()=>([B])=>(0,_.integer)(B.typedValue.year)).collect()},ue={arity:1,overloads:(0,_.declare)(c.RegularOperator.MONTH).onDateTime1(()=>B=>(0,_.integer)(B.typedValue.month)).set([l.TypeURL.XSD_DATE],()=>([B])=>(0,_.integer)(B.typedValue.month)).collect()},ge={arity:1,overloads:(0,_.declare)(c.RegularOperator.DAY).onDateTime1(()=>B=>(0,_.integer)(B.typedValue.day)).set([l.TypeURL.XSD_DATE],()=>([B])=>(0,_.integer)(B.typedValue.day)).collect()},we={arity:1,overloads:(0,_.declare)(c.RegularOperator.HOURS).onDateTime1(()=>B=>(0,_.integer)(B.typedValue.hours)).set([l.TypeURL.XSD_TIME],()=>([B])=>(0,_.integer)(B.typedValue.hours)).collect()},Me={arity:1,overloads:(0,_.declare)(c.RegularOperator.MINUTES).onDateTime1(()=>B=>(0,_.integer)(B.typedValue.minutes)).set([l.TypeURL.XSD_TIME],()=>([B])=>(0,_.integer)(B.typedValue.minutes)).collect()},Ue={arity:1,overloads:(0,_.declare)(c.RegularOperator.SECONDS).onDateTime1(()=>B=>(0,_.decimal)(B.typedValue.seconds)).set([l.TypeURL.XSD_TIME],()=>([B])=>(0,_.integer)(B.typedValue.seconds)).collect()},Ge={arity:1,overloads:(0,_.declare)(c.RegularOperator.TIMEZONE).onDateTime1(()=>B=>{const re={hours:B.typedValue.zoneHours,minutes:B.typedValue.zoneMinutes};if(re.hours===void 0&&re.minutes===void 0)throw new f.InvalidTimezoneCall(B.str());return new o.DayTimeDurationLiteral(re)}).copy({from:[l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_DATE]}).copy({from:[l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_TIME]}).collect()},We={arity:1,overloads:(0,_.declare)(c.RegularOperator.TZ).onDateTime1(()=>B=>(0,_.string)((0,d.extractRawTimeZone)(B.str()))).copy({from:[l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_DATE]}).copy({from:[l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_TIME]}).collect()},lt={arity:1,overloads:(0,_.declare)(c.RegularOperator.MD5).onString1Typed(()=>B=>(0,_.string)((0,a.hash)(B))).collect()},Wr={arity:1,overloads:(0,_.declare)(c.RegularOperator.SHA1).onString1Typed(()=>B=>(0,_.string)((0,e.sha1)().update(B).digest("hex"))).collect()},br={arity:1,overloads:(0,_.declare)(c.RegularOperator.SHA256).onString1Typed(()=>B=>(0,_.string)((0,e.sha256)().update(B).digest("hex"))).collect()},Br={arity:1,overloads:(0,_.declare)(c.RegularOperator.SHA384).onString1Typed(()=>B=>(0,_.string)((0,e.sha384)().update(B).digest("hex"))).collect()},Qt={arity:1,overloads:(0,_.declare)(c.RegularOperator.SHA512).onString1Typed(()=>B=>(0,_.string)((0,e.sha512)().update(B).digest("hex"))).collect()},_r={arity:3,overloads:(0,_.declare)(c.RegularOperator.TRIPLE).onTerm3(B=>(...re)=>new o.Quad(O.quad(re[0].toRDF(),re[1].toRDF(),re[2].toRDF()),B.superTypeProvider)).collect()},Pr={arity:1,overloads:(0,_.declare)(c.RegularOperator.SUBJECT).onQuad1(()=>B=>B.subject).collect()},kr={arity:1,overloads:(0,_.declare)(c.RegularOperator.PREDICATE).onQuad1(()=>B=>B.predicate).collect()},xn={arity:1,overloads:(0,_.declare)(c.RegularOperator.OBJECT).onQuad1(()=>B=>B.object).collect()},Et={arity:1,overloads:(0,_.declare)(c.RegularOperator.IS_TRIPLE).onTerm1(()=>B=>(0,_.bool)(B.termType==="quad")).collect()};return hh.definitions={"!":A,uplus:T,uminus:I,"*":D,"/":U,"+":H,"-":N,"=":R,"!=":X,"<":ne,">":$,"<=":C,">=":Q,isiri:se,isuri:se,isblank:ie,isliteral:be,isnumeric:he,str:Te,lang:Ne,datatype:ye,iri:ce,uri:ce,strdt:xe,strlang:oe,uuid:J,struuid:le,strlen:pe,substr:L,ucase:P,lcase:m,strstarts:y,strends:v,contains:j,strbefore:V,strafter:q,encode_for_uri:G,langmatches:Y,regex:ve,replace:me,abs:Ee,round:k,ceil:W,floor:M,rand:S,now:x,year:z,month:ue,day:ge,hours:we,minutes:Me,seconds:Ue,timezone:Ge,tz:We,md5:lt,sha1:Wr,sha256:br,sha384:Br,sha512:Qt,triple:_r,subject:Pr,predicate:kr,object:xn,istriple:Et},hh}var yh={},n6;function Qhe(){if(n6)return yh;n6=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.specialDefinitions=void 0;const t=vR,e=ia(),r=ni,n=Ke,a=ro(),s=Uf(),o={arity:1,async applyAsync({args:U,mapping:H}){return u({args:U,mapping:H})},applySynchronously({args:U,mapping:H}){return u({args:U,mapping:H})}};function u({args:U,mapping:H}){const N=U[0];if(N.expressionType!==e.ExpressionType.Variable)throw new n.InvalidArgumentTypes(U,r.SpecialOperator.BOUND);const R=H.has((0,a.expressionToVar)(N));return(0,a.bool)(R)}const c={arity:3,async applyAsync({args:U,mapping:H,evaluate:N}){const F=(await N(U[0],H)).coerceEBV();return N(F?U[1]:U[2],H)},applySynchronously({args:U,mapping:H,evaluate:N}){const F=N(U[0],H).coerceEBV();return N(F?U[1]:U[2],H)}},l={arity:Number.POSITIVE_INFINITY,async applyAsync({args:U,mapping:H,evaluate:N}){const R=[];for(const F of U)try{return await N(F,H)}catch(X){R.push(X)}throw new n.CoalesceError(R)},applySynchronously({args:U,mapping:H,evaluate:N}){const R=[];for(const F of U)try{return N(F,H)}catch(X){R.push(X)}throw new n.CoalesceError(R)}},d={arity:2,async applyAsync({args:U,mapping:H,evaluate:N}){const[R,F]=U;try{if((await N(R,H)).coerceEBV())return(0,a.bool)(!0);const C=(await N(F,H)).coerceEBV();return(0,a.bool)(C)}catch(X){if(!(await N(F,H)).coerceEBV())throw X;return(0,a.bool)(!0)}},applySynchronously({args:U,mapping:H,evaluate:N}){const[R,F]=U;try{if(N(R,H).coerceEBV())return(0,a.bool)(!0);const C=N(F,H).coerceEBV();return(0,a.bool)(C)}catch(X){if(!N(F,H).coerceEBV())throw X;return(0,a.bool)(!0)}}},f={arity:2,async applyAsync({args:U,mapping:H,evaluate:N}){const[R,F]=U;try{if(!(await N(R,H)).coerceEBV())return(0,a.bool)(!1);const C=(await N(F,H)).coerceEBV();return(0,a.bool)(C)}catch(X){if((await N(F,H)).coerceEBV())throw X;return(0,a.bool)(!1)}},applySynchronously({args:U,mapping:H,evaluate:N}){const[R,F]=U;try{if(!N(R,H).coerceEBV())return(0,a.bool)(!1);const C=N(F,H).coerceEBV();return(0,a.bool)(C)}catch(X){if(N(F,H).coerceEBV())throw X;return(0,a.bool)(!1)}}},h={arity:2,async applyAsync({args:U,mapping:H,evaluate:N}){const[R,F]=U.map($=>N($,H)),[X,ne]=await Promise.all([R,F]);return(0,a.bool)(X.toRDF().equals(ne.toRDF()))},applySynchronously({args:U,mapping:H,evaluate:N}){const[R,F]=U.map(X=>N(X,H));return(0,a.bool)(R.toRDF().equals(F.toRDF()))}},p={arity:Number.POSITIVE_INFINITY,checkArity(U){return U.length>0},async applyAsync(U){const{args:H,mapping:N,evaluate:R}=U,[F,...X]=H,ne=await R(F,N);return b(ne,{...U,args:X},[])},applySynchronously(U){const{args:H,mapping:N,evaluate:R}=U,[F,...X]=H,ne=R(F,N);return _(ne,{...U,args:X},[])}};async function b(U,H,N){const{args:R,mapping:F,evaluate:X}=H;if(R.length===0)return N.every($=>!$)?(0,a.bool)(!1):Promise.reject(new n.InError(N));try{const ne=R.shift(),$=await X(ne,F);return s.regularFunctions[r.RegularOperator.EQUAL].apply([U,$],H).typedValue?(0,a.bool)(!0):b(U,H,[...N,!1])}catch(ne){return b(U,H,[...N,ne])}}function _(U,H,N){const{args:R,mapping:F,evaluate:X}=H;if(R.length===0){if(N.every($=>!$))return(0,a.bool)(!1);throw new n.InError(N)}try{const ne=R.shift(),$=X(ne,F);return s.regularFunctions[r.RegularOperator.EQUAL].apply([U,$],H).typedValue?(0,a.bool)(!0):_(U,H,[...N,!1])}catch(ne){return _(U,H,[...N,ne])}}const E={arity:Number.POSITIVE_INFINITY,checkArity(U){return U.length>0},async applyAsync(U){const N=await s.specialFunctions[r.SpecialOperator.IN].applyAsync(U);return(0,a.bool)(!N.typedValue)},applySynchronously(U){const N=s.specialFunctions[r.SpecialOperator.IN].applySynchronously(U);return(0,a.bool)(!N.typedValue)}},w=(0,a.declare)(r.SpecialOperator.CONCAT).onStringly1(()=>U=>U).collect(),O={arity:Number.POSITIVE_INFINITY,async applyAsync(U){const{args:H,mapping:N,evaluate:R,functionArgumentsCache:F,superTypeProvider:X}=U,ne=H.map(async ie=>R(ie,N)).map(async ie=>{const be=w.search([await ie],X,F);if(!be)throw new n.InvalidArgumentTypes(H,r.SpecialOperator.CONCAT);return be(U)([await ie])}),$=await Promise.all(ne),Q=$.map(ie=>ie.typedValue).join(""),se=A($)?$[0].language:void 0;return se?(0,a.langString)(Q,se):(0,a.string)(Q)},applySynchronously(U){const{args:H,mapping:N,evaluate:R,superTypeProvider:F,functionArgumentsCache:X}=U,ne=H.map(se=>R(se,N)).map(se=>{const ie=w.search([se],F,X);if(!ie)throw new n.InvalidArgumentTypes(H,r.SpecialOperator.CONCAT);return ie(U)([se])}),C=ne.map(se=>se.typedValue).join(""),Q=A(ne)?ne[0].language:void 0;return Q?(0,a.langString)(C,Q):(0,a.string)(C)}};function A(U){return U.length>0&&U.every(H=>H.language===U[0].language)}const T=(0,a.declare)(r.SpecialOperator.BNODE).onString1(()=>U=>U).collect(),I={arity:Number.POSITIVE_INFINITY,checkArity(U){return U.length===0||U.length===1},async applyAsync(U){const{args:H,mapping:N,evaluate:R,superTypeProvider:F,functionArgumentsCache:X}=U,ne=H.length===1?await R(H[0],N):void 0;let $;if(ne){const C=T.search([ne],F,X);if(!C)throw new n.InvalidArgumentTypes(H,r.SpecialOperator.BNODE);$=C(U)([ne]).str()}if(U.bnode){const C=await U.bnode($);return new e.BlankNode(C)}return D($)},applySynchronously(U){const{args:H,mapping:N,evaluate:R,superTypeProvider:F,functionArgumentsCache:X}=U,ne=H.length===1?R(H[0],N):void 0;let $;if(ne){const C=T.search([ne],F,X);if(!C)throw new n.InvalidArgumentTypes(H,r.SpecialOperator.BNODE);$=C(U)([ne]).str()}if(U.bnode){const C=U.bnode($);return new e.BlankNode(C)}return D($)}};function D(U){return new e.BlankNode(U||t.v4())}return yh.specialDefinitions={bound:o,if:c,coalesce:l,"&&":f,"||":d,sameterm:h,in:p,notin:E,concat:O,bnode:I},yh}var i6;function Uf(){return i6||(i6=1,function(t){var e=g&&g.__createBinding||(Object.create?function(c,l,d,f){f===void 0&&(f=d);var h=Object.getOwnPropertyDescriptor(l,d);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(c,f,h)}:function(c,l,d,f){f===void 0&&(f=d),c[f]=l[d]}),r=g&&g.__exportStar||function(c,l){for(var d in c)d!=="default"&&!Object.prototype.hasOwnProperty.call(l,d)&&e(l,c,d)};Object.defineProperty(t,"__esModule",{value:!0}),t.OverloadTree=t.namedFunctions=t.specialFunctions=t.regularFunctions=void 0;const n=ga,a=R2,s=khe(),o=Qhe();r(ga,t),t.regularFunctions=Object.fromEntries(Object.entries(s.definitions).map(([c,l])=>[c,new n.RegularFunction(c,l)])),t.specialFunctions=Object.fromEntries(Object.entries(o.specialDefinitions).map(([c,l])=>[c,new n.SpecialFunction(c,l)])),t.namedFunctions=Object.fromEntries(Object.entries(a.namedDefinitions).map(([c,l])=>[c,new n.NamedFunction(c,l)]));var u=M7();Object.defineProperty(t,"OverloadTree",{enumerable:!0,get:function(){return u.OverloadTree}})}(zT)),zT}Object.defineProperty(ty,"__esModule",{value:!0});ty.AlgebraTransformer=void 0;const Ghe=gt,fu=ia(),YT=Uf(),ZT=ni,w1=Ke,a6=Ke,zhe=Pl();class wd extends zhe.TermTransformer{constructor(e){super(e.superTypeProvider),this.algebraConfig=e,this.creatorConfig={type:e.type,creator:e.creator}}transformAlgebra(e){const r=Ghe.Algebra.expressionTypes;switch(e.expressionType){case r.TERM:return this.transformTerm(e);case r.OPERATOR:return this.transformOperator(e);case r.NAMED:return this.transformNamed(e);case r.EXISTENCE:return wd.transformExistence(e);case r.AGGREGATE:return wd.transformAggregate(e);case r.WILDCARD:return wd.transformWildcard(e)}}static transformWildcard(e){return new fu.NamedNode(e.wildcard.value)}transformOperator(e){const r=e.operator.toLowerCase();if(ZT.SpecialOperators.has(r)){const o=r,u=e.args.map(l=>this.transformAlgebra(l)),c=YT.specialFunctions[o];if(!c.checkArity(u))throw new w1.InvalidArity(u,o);return new fu.SpecialOperator(u,c.applyAsync,c.applySynchronously)}if(!ZT.Operators.has(r))throw new w1.UnknownOperator(e.operator);const n=r,a=e.args.map(o=>this.transformAlgebra(o)),s=YT.regularFunctions[n];if(!wd.hasCorrectArity(a,s.arity))throw new w1.InvalidArity(a,n);return new fu.Operator(a,o=>s.apply(o,this.algebraConfig))}wrapSyncFunction(e,r){return n=>{try{const a=e(n.map(s=>s.toRDF()));return this.transformRDFTermUnsafe(a)}catch(a){throw new a6.ExtensionFunctionError(r,a)}}}wrapAsyncFunction(e,r){return async n=>{try{const a=await e(n.map(s=>s.toRDF()));return this.transformRDFTermUnsafe(a)}catch(a){throw new a6.ExtensionFunctionError(r,a)}}}transformNamed(e){const r=e.name.value,n=e.args.map(a=>this.transformAlgebra(a));if(ZT.NamedOperators.has(r)){const a=e.name.value,s=YT.namedFunctions[a];return new fu.Named(e.name,n,o=>s.apply(o,this.algebraConfig))}if(this.creatorConfig.type==="sync"){const a=this.creatorConfig.creator(e.name);if(a){const s=this.wrapSyncFunction(a,e.name.value);return new fu.SyncExtension(e.name,n,s)}}else{const a=this.creatorConfig.creator(e.name);if(a){const s=this.wrapAsyncFunction(a,e.name.value);return new fu.AsyncExtension(e.name,n,s)}}throw new w1.UnknownNamedOperator(e.name.value)}static hasCorrectArity(e,r){return Array.isArray(r)?r.includes(e.length):e.length===r}static transformAggregate(e){const r=e.aggregator;return new fu.Aggregate(r,e)}static transformExistence(e){return new fu.Existence(e)}}ty.AlgebraTransformer=wd;var V2={},ny={};Object.defineProperty(ny,"__esModule",{value:!0});ny.BaseExpressionEvaluator=void 0;const Whe=ro(),Xhe=Ke;class Khe{constructor(e){this.termTransformer=e}term(e,r){return e}variable(e,r){const n=r.get((0,Whe.expressionToVar)(e));if(!n)throw new Xhe.UnboundVariableError(e.name,r);return this.termTransformer.transformRDFTermUnsafe(n)}}ny.BaseExpressionEvaluator=Khe;Object.defineProperty(V2,"__esModule",{value:!0});V2.AsyncRecursiveEvaluator=void 0;const _o=ia(),Jhe=Pl(),eE=Ke,Yhe=ny;class Zhe extends Yhe.BaseExpressionEvaluator{constructor(e,r){super(r||new Jhe.TermTransformer(e.superTypeProvider)),this.context=e,this.subEvaluators={[_o.ExpressionType.Term]:this.term.bind(this),[_o.ExpressionType.Variable]:this.variable.bind(this),[_o.ExpressionType.Operator]:this.evalOperator.bind(this),[_o.ExpressionType.SpecialOperator]:this.evalSpecialOperator.bind(this),[_o.ExpressionType.Named]:this.evalNamed.bind(this),[_o.ExpressionType.Existence]:this.evalExistence.bind(this),[_o.ExpressionType.Aggregate]:this.evalAggregate.bind(this),[_o.ExpressionType.AsyncExtension]:this.evalAsyncExtension.bind(this)}}async evaluate(e,r){const n=this.subEvaluators[e.expressionType];if(!n)throw new eE.InvalidExpressionType(e);return n.bind(this)(e,r)}async evalOperator(e,r){const n=e.args.map(s=>this.evaluate(s,r)),a=await Promise.all(n);return e.apply(a)}async evalSpecialOperator(e,r){const n=this.evaluate.bind(this),a={args:e.args,mapping:r,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,functionArgumentsCache:this.context.functionArgumentsCache,evaluate:n,bnode:this.context.bnode,defaultTimeZone:this.context.defaultTimeZone};return e.applyAsync(a)}async _evalAsyncArgs(e,r){const n=e.map(a=>this.evaluate(a,r));return await Promise.all(n)}async evalNamed(e,r){return e.apply(await this._evalAsyncArgs(e.args,r))}async evalAsyncExtension(e,r){return await e.apply(await this._evalAsyncArgs(e.args,r))}async evalExistence(e,r){if(!this.context.exists)throw new eE.NoExistenceHook;return new _o.BooleanLiteral(await this.context.exists(e.expression,r))}async evalAggregate(e,r){if(!this.context.aggregate)throw new eE.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(await this.context.aggregate(e.expression))}}V2.AsyncRecursiveEvaluator=Zhe;Object.defineProperty(ey,"__esModule",{value:!0});ey.AsyncEvaluator=void 0;const epe=fs,tpe=ty,rpe=Ct,npe=V2;class wR{static completeContext(e){const r=e.now||new Date(Date.now());return{now:r,baseIRI:e.baseIRI||void 0,functionArgumentsCache:e.functionArgumentsCache||{},superTypeProvider:{cache:e.typeCache||new epe.LRUCache({max:1e3}),discoverer:e.getSuperType||(()=>"term")},extensionFunctionCreator:e.extensionFunctionCreator,exists:e.exists,aggregate:e.aggregate,bnode:e.bnode,defaultTimeZone:e.defaultTimeZone||(0,rpe.extractTimeZone)(r)}}constructor(e,r={}){this.algExpr=e;const n=r.extensionFunctionCreator||(()=>{}),a=wR.completeContext(r),s=new tpe.AlgebraTransformer({type:"async",creator:n,...a});this.expr=s.transformAlgebra(e),this.evaluator=new npe.AsyncRecursiveEvaluator(a,s)}async evaluate(e){return(await this.evaluator.evaluate(this.expr,e)).toRDF()}async evaluateAsEBV(e){return(await this.evaluator.evaluate(this.expr,e)).coerceEBV()}async evaluateAsInternal(e){return await this.evaluator.evaluate(this.expr,e)}}ey.AsyncEvaluator=wR;var iy={},H2={};Object.defineProperty(H2,"__esModule",{value:!0});H2.SyncRecursiveEvaluator=void 0;const go=ia(),ipe=Pl(),tE=Ke,ape=ny;class spe extends ape.BaseExpressionEvaluator{constructor(e,r){super(r||new ipe.TermTransformer(e.superTypeProvider)),this.context=e,this.subEvaluators={[go.ExpressionType.Term]:this.term.bind(this),[go.ExpressionType.Variable]:this.variable.bind(this),[go.ExpressionType.Operator]:this.evalOperator.bind(this),[go.ExpressionType.SpecialOperator]:this.evalSpecialOperator.bind(this),[go.ExpressionType.Named]:this.evalNamed.bind(this),[go.ExpressionType.Existence]:this.evalExistence.bind(this),[go.ExpressionType.Aggregate]:this.evalAggregate.bind(this),[go.ExpressionType.SyncExtension]:this.evalSyncExtension.bind(this)}}evaluate(e,r){const n=this.subEvaluators[e.expressionType];if(!n)throw new tE.InvalidExpressionType(e);return n.bind(this)(e,r)}evalOperator(e,r){const n=e.args.map(a=>this.evaluate(a,r));return e.apply(n)}evalSpecialOperator(e,r){const n=this.evaluate.bind(this),a={args:e.args,mapping:r,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,functionArgumentsCache:this.context.functionArgumentsCache,evaluate:n,bnode:this.context.bnode,defaultTimeZone:this.context.defaultTimeZone};return e.applySynchronously(a)}evalNamed(e,r){const n=e.args.map(a=>this.evaluate(a,r));return e.apply(n)}evalSyncExtension(e,r){const n=e.args.map(a=>this.evaluate(a,r));return e.apply(n)}evalExistence(e,r){if(!this.context.exists)throw new tE.NoExistenceHook;return new go.BooleanLiteral(this.context.exists(e.expression,r))}evalAggregate(e,r){if(!this.context.aggregate)throw new tE.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(this.context.aggregate(e.expression))}}H2.SyncRecursiveEvaluator=spe;Object.defineProperty(iy,"__esModule",{value:!0});iy.SyncEvaluator=void 0;const ope=fs,upe=ty,cpe=Ct,lpe=H2;class SR{static completeContext(e){const r=e.now||new Date(Date.now());return{now:r,baseIRI:e.baseIRI||void 0,functionArgumentsCache:e.functionArgumentsCache||{},superTypeProvider:{cache:e.typeCache||new ope.LRUCache({max:1e3}),discoverer:e.getSuperType||(()=>"term")},extensionFunctionCreator:e.extensionFunctionCreator,exists:e.exists,aggregate:e.aggregate,bnode:e.bnode,defaultTimeZone:e.defaultTimeZone||(0,cpe.extractTimeZone)(r)}}constructor(e,r={}){this.algExpr=e,this.context=r;const n=r.extensionFunctionCreator||(()=>{}),a=SR.completeContext(r),s=new upe.AlgebraTransformer({type:"sync",creator:n,...a});this.expr=s.transformAlgebra(e),this.evaluator=new lpe.SyncRecursiveEvaluator(a,s)}evaluate(e){return this.evaluator.evaluate(this.expr,e).toRDF()}evaluateAsEBV(e){return this.evaluator.evaluate(this.expr,e).coerceEBV()}evaluateAsInternal(e){return this.evaluator.evaluate(this.expr,e)}}iy.SyncEvaluator=SR;var k2={},ay={},Q2={},G2={},aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.Aggregator=aa.AggregatorComponent=void 0;const s6=Zt,dpe=Pl(),fpe=ni,hpe=v2();class ppe{static emptyValue(){}constructor(e,r){this.sharedContext=r,this.separator=e.separator||" ",this.termTransformer=new dpe.TermTransformer(r.superTypeProvider)}termToNumericOrError(e){if(e.termType!=="Literal")throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a numeric literal`);if(!(0,hpe.isSubTypeOf)(e.datatype.value,fpe.TypeAlias.SPARQL_NUMERIC,this.sharedContext.superTypeProvider))throw new Error(`Term datatype ${e.datatype.value} with value ${e.value} has type ${e.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(e)}}aa.AggregatorComponent=ppe;class ype{constructor(e,r){this.aggregatorComponent=r,this.variableValues=new Map,this.distinct=e.distinct}static emptyValue(e){return e.emptyValue()}result(){return this.aggregatorComponent.result()}put(e,r=""){this.canSkip(e,r)||(this.aggregatorComponent.put(e),this.addSeen(e,r))}canSkip(e,r){const n=this.variableValues.get(r);return this.distinct&&n!==void 0&&n.has(s6.termToString(e))}addSeen(e,r){this.distinct&&(this.variableValues.has(r)||this.variableValues.set(r,new Set),this.variableValues.get(r).add(s6.termToString(e)))}}aa.Aggregator=ype;Object.defineProperty(G2,"__esModule",{value:!0});G2.Average=void 0;const bpe=ia(),o6=Uf(),_pe=ro(),u6=ni,gpe=aa;class TR extends gpe.AggregatorComponent{constructor(){super(...arguments),this.summer=o6.regularFunctions[u6.RegularOperator.ADDITION],this.divider=o6.regularFunctions[u6.RegularOperator.DIVISION],this.state=void 0}static emptyValue(){return(0,_pe.integer)(0).toRDF()}put(e){if(this.state===void 0){const r=this.termToNumericOrError(e);this.state={sum:r,count:1}}else{const r=this.termToNumericOrError(e);this.state.sum=this.summer.apply([this.state.sum,r],this.sharedContext),this.state.count++}}result(){if(this.state===void 0)return TR.emptyValue();const e=new bpe.IntegerLiteral(this.state.count);return this.divider.apply([this.state.sum,e],this.sharedContext).toRDF()}}G2.Average=TR;var z2={};Object.defineProperty(z2,"__esModule",{value:!0});z2.Count=void 0;const c6=ro(),mpe=aa;class ER extends mpe.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}static emptyValue(){return(0,c6.integer)(0).toRDF()}put(e){this.state===void 0&&(this.state=0),this.state++}result(){return this.state===void 0?ER.emptyValue():(0,c6.integer)(this.state).toRDF()}}z2.Count=ER;var W2={};Object.defineProperty(W2,"__esModule",{value:!0});W2.GroupConcat=void 0;const l6=ro(),vpe=aa;class OR extends vpe.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}static emptyValue(){return(0,l6.string)("").toRDF()}put(e){this.state===void 0?this.state=e.value:this.state+=this.separator+e.value}result(){return this.state===void 0?OR.emptyValue():(0,l6.string)(this.state).toRDF()}}W2.GroupConcat=OR;var X2={};Object.defineProperty(X2,"__esModule",{value:!0});X2.Max=void 0;const wpe=q2(),Spe=aa;class AR extends Spe.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}put(e){if(e.termType!=="Literal")throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a literal`);this.state===void 0?this.state=e:(0,wpe.orderTypes)(this.state,e)===-1&&(this.state=e)}result(){return this.state===void 0?AR.emptyValue():this.state}}X2.Max=AR;var K2={};Object.defineProperty(K2,"__esModule",{value:!0});K2.Min=void 0;const Tpe=q2(),Epe=aa;class xR extends Epe.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}put(e){if(e.termType!=="Literal")throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a literal`);this.state===void 0?this.state=e:(0,Tpe.orderTypes)(this.state,e)===1&&(this.state=e)}result(){return this.state===void 0?xR.emptyValue():this.state}}K2.Min=xR;var J2={};Object.defineProperty(J2,"__esModule",{value:!0});J2.Sample=void 0;const Ope=aa;class RR extends Ope.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}put(e){this.state===void 0&&(this.state=e)}result(){return this.state===void 0?RR.emptyValue():this.state}}J2.Sample=RR;var Y2={};Object.defineProperty(Y2,"__esModule",{value:!0});Y2.Sum=void 0;const Ape=Uf(),xpe=ro(),Rpe=ni,Ipe=aa;class IR extends Ipe.AggregatorComponent{constructor(){super(...arguments),this.state=void 0,this.summer=Ape.regularFunctions[Rpe.RegularOperator.ADDITION]}static emptyValue(){return(0,xpe.integer)(0).toRDF()}put(e){if(this.state===void 0)this.state=this.termToNumericOrError(e);else{const r=this.termToNumericOrError(e);this.state=this.summer.apply([this.state,r],this.sharedContext)}}result(){return this.state===void 0?IR.emptyValue():this.state.toRDF()}}Y2.Sum=IR;Object.defineProperty(Q2,"__esModule",{value:!0});Q2.aggregators=void 0;const Ppe=G2,Dpe=z2,Npe=W2,jpe=X2,Cpe=K2,Mpe=J2,Fpe=Y2;Q2.aggregators={count:Dpe.Count,sum:Fpe.Sum,min:Cpe.Min,max:jpe.Max,avg:Ppe.Average,group_concat:Npe.GroupConcat,sample:Mpe.Sample};var Z2={};Object.defineProperty(Z2,"__esModule",{value:!0});Z2.WildcardCountAggregator=void 0;const Lpe=Zt,d6=ro();class Bpe{constructor(e){this.bindingValues=new Map,this.counter=0,this.distinct=e.distinct}putBindings(e){this.handleDistinct(e)||(this.counter+=1)}static emptyValue(){return(0,d6.integer)(0).toRDF()}result(){return(0,d6.integer)(this.counter).toRDF()}handleDistinct(e){if(this.distinct){const r=[...e];r.sort((u,c)=>u[0].value.localeCompare(c[0].value));const n=r.map(([u])=>u.value).join(","),a=r.map(([,u])=>Lpe.termToString(u)).join(","),s=this.bindingValues.get(n),o=s!==void 0&&s.has(a);return s||this.bindingValues.set(n,new Set),this.bindingValues.get(n).add(a),o}return!1}}Z2.WildcardCountAggregator=Bpe;Object.defineProperty(ay,"__esModule",{value:!0});ay.BaseAggregateEvaluator=void 0;const f6=gt,h6=Q2,p6=aa,y6=Z2,$pe=Ke;class Upe{constructor(e,r,n){this.throwError=!1,this.isWildcard=!1,this.errorOccurred=!1,this.expression=e,this.aggregator=new p6.Aggregator(e,new h6.aggregators[e.aggregator](e,r)),this.throwError=n||!1,this.isWildcard=e.expression.expressionType===f6.Algebra.expressionTypes.WILDCARD,this.isWildcard&&(this.wildcardAggregator=new y6.WildcardCountAggregator(e))}static emptyValue(e,r=!1){let n;if(e.expression.expressionType===f6.Algebra.expressionTypes.WILDCARD?n=y6.WildcardCountAggregator.emptyValue():n=p6.Aggregator.emptyValue(h6.aggregators[e.aggregator]),n===void 0&&r)throw new $pe.EmptyAggregateError;return n}result(){if(!this.errorOccurred)return this.isWildcard?this.wildcardAggregator.result():this.aggregator.result()}}ay.BaseAggregateEvaluator=Upe;Object.defineProperty(k2,"__esModule",{value:!0});k2.AggregateEvaluator=void 0;const qpe=ay,b6=iy;class Vpe extends qpe.BaseAggregateEvaluator{constructor(e,r,n){super(e,b6.SyncEvaluator.completeContext(r||{}),n),this.evaluator=new b6.SyncEvaluator(e.expression,r)}put(e){if(!this.errorOccurred)if(this.isWildcard)this.wildcardAggregator.putBindings(e);else try{const r=this.evaluator.evaluate(e);this.aggregator.put(r)}catch(r){this.safeThrow(r)}}safeThrow(e){if(this.throwError)throw e;this.errorOccurred=!0}}k2.AggregateEvaluator=Vpe;var ew={};Object.defineProperty(ew,"__esModule",{value:!0});ew.AsyncAggregateEvaluator=void 0;const _6=ey,Hpe=ay;class kpe extends Hpe.BaseAggregateEvaluator{constructor(e,r,n){super(e,_6.AsyncEvaluator.completeContext(r||{}),n),this.evaluator=new _6.AsyncEvaluator(e.expression,r),this.errorOccurred=!1}async put(e){if(!this.errorOccurred)if(this.isWildcard)this.wildcardAggregator.putBindings(e);else try{const r=await this.evaluator.evaluate(e);if(!r||this.errorOccurred)return;this.aggregator.put(r)}catch(r){this.safeThrow(r)}}safeThrow(e){if(this.throwError)throw e;this.errorOccurred=!0}}ew.AsyncAggregateEvaluator=kpe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncAggregateEvaluator=t.orderTypes=t.isExpressionError=t.ExpressionError=t.AggregateEvaluator=t.SyncEvaluator=t.AsyncEvaluator=void 0;var e=ey;Object.defineProperty(t,"AsyncEvaluator",{enumerable:!0,get:function(){return e.AsyncEvaluator}});var r=iy;Object.defineProperty(t,"SyncEvaluator",{enumerable:!0,get:function(){return r.SyncEvaluator}});var n=k2;Object.defineProperty(t,"AggregateEvaluator",{enumerable:!0,get:function(){return n.AggregateEvaluator}});var a=Ke;Object.defineProperty(t,"ExpressionError",{enumerable:!0,get:function(){return a.ExpressionError}}),Object.defineProperty(t,"isExpressionError",{enumerable:!0,get:function(){return a.isExpressionError}});var s=q2();Object.defineProperty(t,"orderTypes",{enumerable:!0,get:function(){return s.orderTypes}});var o=ew;Object.defineProperty(t,"AsyncAggregateEvaluator",{enumerable:!0,get:function(){return o.AsyncAggregateEvaluator}})})(Il);Object.defineProperty(g2,"__esModule",{value:!0});g2.ActorQueryOperationExtend=void 0;const Qpe=$n,S1=ct,rE=Il;class Gpe extends S1.ActorQueryOperationTypedMediated{constructor(e){super(e,"extend")}async testOperation(e,r){return new rE.AsyncEvaluator(e.expression,S1.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation)),!0}async runOperation(e,r){const{expression:n,input:a,variable:s}=e,o=S1.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:a,context:r}));if((await o.metadata()).variables.some(f=>f.equals(s)))throw new Error(`Illegal binding to variable '${s.value}' that has already been bound`);const u={...S1.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation)},c=new rE.AsyncEvaluator(n,u),l=async(f,h,p)=>{try{const b=await c.evaluate(f),_=f.set(s,b);p(_)}catch(b){(0,rE.isExpressionError)(b)?(p(f),this.logWarn(r,`Expression error for extend operation (${b.message})with bindings '${(0,Qpe.bindingsToString)(f)}'`)):d.emit("error",b)}h()},d=o.bindingsStream.transform({autoStart:!1,transform:l});return{type:"bindings",bindingsStream:d,async metadata(){const f=await o.metadata();return{...f,variables:[...f.variables,s]}}}}}g2.ActorQueryOperationExtend=Gpe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(g2,t)})(S7);var K7={},tw={};Object.defineProperty(tw,"__esModule",{value:!0});tw.ActorQueryOperationFilterSparqlee=void 0;const zpe=$n,bh=ct,nE=Il;class Wpe extends bh.ActorQueryOperationTypedMediated{constructor(e){super(e,"filter")}async testOperation(e,r){const n={...bh.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation)};return new nE.AsyncEvaluator(e.expression,n),!0}async runOperation(e,r){const n=await this.mediatorQueryOperation.mediate({operation:e.input,context:r}),a=bh.ActorQueryOperation.getSafeBindings(n);bh.ActorQueryOperation.validateQueryOutput(a,"bindings");const s={...bh.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation)},o=new nE.AsyncEvaluator(e.expression,s),u=async(l,d,f)=>{try{await o.evaluateAsEBV(l)&&f(l)}catch(h){(0,nE.isExpressionError)(h)?this.logWarn(r,"Error occurred while filtering.",()=>({error:h,bindings:(0,zpe.bindingsToString)(l)})):c.emit("error",h)}d()},c=a.bindingsStream.transform({transform:u,autoStart:!1});return{type:"bindings",bindingsStream:c,metadata:a.metadata}}}tw.ActorQueryOperationFilterSparqlee=Wpe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(tw,t)})(K7);var J7={},rw={};Object.defineProperty(rw,"__esModule",{value:!0});rw.ActorQueryOperationFromQuad=void 0;const Xpe=ct,Fp=gt;class ur extends Xpe.ActorQueryOperationTypedMediated{constructor(e){super(e,"from")}static copyOperation(e,r){const n={};for(const a of Object.keys(e))Array.isArray(e[a])&&a!=="template"?a==="variables"?n[a]=e[a]:n[a]=e[a].map(r):ur.ALGEBRA_TYPES.includes(e[a].type)?n[a]=r(e[a]):n[a]=e[a];return n}static applyOperationDefaultGraph(e,r){if(e.type==="bgp"&&e.patterns.length>0||e.type==="path"||e.type==="pattern"){if(e.type==="bgp")return ur.joinOperations(e.patterns.map(a=>{if(a.graph.termType!=="DefaultGraph")return ur.FACTORY.createBgp([a]);const s=r.map(o=>ur.FACTORY.createBgp([ur.FACTORY.createPattern(a.subject,a.predicate,a.object,o)]));return ur.unionOperations(s)}));if(e.graph.termType!=="DefaultGraph")return e;const n=r.map(a=>e.type==="path"?ur.FACTORY.createPath(e.subject,e.predicate,e.object,a):ur.FACTORY.createPattern(e.subject,e.predicate,e.object,a));return ur.unionOperations(n)}return ur.copyOperation(e,n=>this.applyOperationDefaultGraph(n,r))}static applyOperationNamedGraph(e,r,n){if(e.type==="bgp"&&e.patterns.length>0||e.type==="path"||e.type==="pattern"){const a=e.type==="bgp"?e.patterns[0].graph:e.graph;if(a.termType==="DefaultGraph")return{type:Fp.Algebra.types.BGP,patterns:[]};if(a.termType==="Variable"){if(r.length===1){const o=r[0],u={};u[`?${a.value}`]=o;const c=ur.FACTORY.createValues([a],[u]);let l;return e.type==="bgp"?l=ur.FACTORY.createBgp(e.patterns.map(d=>ur.FACTORY.createPattern(d.subject,d.predicate,d.object,o))):e.type==="path"?l=ur.FACTORY.createPath(e.subject,e.predicate,e.object,o):l=ur.FACTORY.createPattern(e.subject,e.predicate,e.object,o),ur.FACTORY.createJoin([c,l])}return ur.unionOperations(r.map(o=>ur.applyOperationNamedGraph(e,[o],n)))}return[...r,...n].some(o=>o.equals(a))?e:{type:Fp.Algebra.types.BGP,patterns:[]}}return ur.copyOperation(e,a=>this.applyOperationNamedGraph(a,r,n))}static joinOperations(e){if(e.length===1)return e[0];if(e.length>1)return ur.FACTORY.createJoin(e);throw new Error("A join can only be applied on at least one operation")}static unionOperations(e){if(e.length===1)return e[0];if(e.length>1)return ur.FACTORY.createUnion(e);throw new Error("A union can only be applied on at least one operation")}static createOperation(e){let r=e.input;return e.default.length>0&&(r=ur.applyOperationDefaultGraph(r,e.default)),(e.named.length>0||e.default.length>0)&&(r=ur.applyOperationNamedGraph(r,e.named,e.default)),r}async testOperation(e,r){return!0}async runOperation(e,r){const n=ur.createOperation(e);return this.mediatorQueryOperation.mediate({operation:n,context:r})}}rw.ActorQueryOperationFromQuad=ur;ur.FACTORY=new Fp.Factory;ur.ALGEBRA_TYPES=Object.keys(Fp.Algebra.types).map(t=>Fp.Algebra.types[t]);(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(rw,t)})(J7);var Y7={},nw={};Object.defineProperty(nw,"__esModule",{value:!0});nw.ActorQueryOperationNop=void 0;const Kpe=$n,Jpe=ct,Ype=oa,Zpe=Ht,e0e=new Kpe.BindingsFactory;class t0e extends Jpe.ActorQueryOperationTypedMediated{constructor(e){super(e,"nop")}async testOperation(e,r){return!0}async runOperation(e,r){return{bindingsStream:new Zpe.SingletonIterator(e0e.bindings()),metadata:()=>Promise.resolve({state:new Ype.MetadataValidationState,cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}nw.ActorQueryOperationNop=t0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(nw,t)})(Y7);var Z7={},iw={},aw={};Object.defineProperty(aw,"__esModule",{value:!0});aw.SortIterator=void 0;const r0e=Ht;class n0e extends r0e.TransformIterator{constructor(e,r,n){super(e,n);const a=n&&n.window;this.windowLength=Number.isFinite(a)&&a>0?a:Number.POSITIVE_INFINITY,this.sort=r,this.sorted=[]}_read(e,r){let n,{length:a}=this.sorted;for(;a!==this.windowLength&&(n=this.source.read(),n!==null);){let s=0,o=a-1,u,c;for(;s<=o;)u=Math.trunc((s+o)/2),c=this.sort(n,this.sorted[u]),c<0?s=u+1:c>0?o=u-1:(s=u,o=-1);this.sorted.splice(s,0,n),a++}a===this.windowLength&&this._push(this.sorted.pop()),r()}_flush(e){let{length:r}=this.sorted;for(;r--;)this._push(this.sorted.pop());e()}}aw.SortIterator=n0e;Object.defineProperty(iw,"__esModule",{value:!0});iw.ActorQueryOperationOrderBySparqlee=void 0;const T1=ct,E1=Il,g6=gt,i0e=aw;class a0e extends T1.ActorQueryOperationTypedMediated{constructor(e){super(e,"orderby"),this.window=e.window??Number.POSITIVE_INFINITY}async testOperation(e,r){for(let n of e.expressions)n=this.extractSortExpression(n),new E1.AsyncEvaluator(n,T1.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation));return!0}async runOperation(e,r){const n=await this.mediatorQueryOperation.mediate({operation:e.input,context:r}),a=T1.ActorQueryOperation.getSafeBindings(n),s={window:this.window},o={...T1.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation)};let{bindingsStream:u}=a;for(let c=e.expressions.length-1;c>=0;c--){let l=e.expressions[c];const d=this.isAscending(l);l=this.extractSortExpression(l);const f=new E1.AsyncEvaluator(l,o),h=async(_,E,w)=>{try{const O=await f.evaluate(_);w({bindings:_,result:O})}catch(O){(0,E1.isExpressionError)(O)||u.emit("error",O),w({bindings:_,result:void 0})}E()},p=u.transform({transform:h});u=new i0e.SortIterator(p,(_,E)=>{let w=(0,E1.orderTypes)(_.result,E.result);return d||(w*=-1),w},s).map(({bindings:_,result:E})=>_)}return{type:"bindings",bindingsStream:u,metadata:a.metadata}}extractSortExpression(e){const{expressionType:r,operator:n}=e;return r!==g6.Algebra.expressionTypes.OPERATOR?e:n==="desc"?e.args[0]:e}isAscending(e){const{expressionType:r,operator:n}=e;return r!==g6.Algebra.expressionTypes.OPERATOR?!0:n!=="desc"}}iw.ActorQueryOperationOrderBySparqlee=a0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(iw,t)})(Z7);var eB={},sw={};Object.defineProperty(sw,"__esModule",{value:!0});sw.ActorQueryOperationProject=void 0;const m6=ct,s0e=F_,o0e=ft,u0e=new o0e.DataFactory;class c0e extends m6.ActorQueryOperationTypedMediated{constructor(e){super(e,"project")}async testOperation(e,r){return!0}async runOperation(e,r){const n=m6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:r})),a=await n.metadata(),s=e.variables,o=a.variables.filter(d=>!s.some(f=>d.value===f.value)),u=s.filter(d=>!a.variables.some(f=>d.value===f.value));if(u.length>0)throw new Error(`Variables '${u.map(d=>`?${d.value}`)}' are used in the projection result, but are not assigned.`);let c=o.length===0?n.bindingsStream:n.bindingsStream.transform({map(d){for(const f of o)d=d.delete(f);return d},autoStart:!1}),l=0;return c=c.transform({map(d){l++;const f=new Map;return d.map(h=>{if(h instanceof s0e.BlankNodeBindingsScoped){let p=f.get(h.value);return p||(p=u0e.blankNode(`${h.value}${l}`),f.set(h.value,p)),p}return h})},autoStart:!1}),{type:"bindings",bindingsStream:c,metadata:async()=>({...a,variables:s})}}}sw.ActorQueryOperationProject=c0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(sw,t)})(eB);var tB={},ow={};Object.defineProperty(ow,"__esModule",{value:!0});ow.ActorQueryOperationService=void 0;const l0e=$n,v6=ct,O1=Ut,d0e=oa,f0e=Ht,h0e=new l0e.BindingsFactory;class p0e extends v6.ActorQueryOperationTypedMediated{constructor(e){super(e,"service")}async testOperation(e,r){if(e.name.termType!=="NamedNode")throw new Error(`${this.name} can only query services by IRI, while a ${e.name.termType} was given.`);return!0}async runOperation(e,r){const n=e.name.value;let a=r.delete(O1.KeysRdfResolveQuadPattern.source).delete(O1.KeysRdfResolveQuadPattern.sources).delete(O1.KeysInitQuery.queryString);const s=this.forceSparqlEndpoint?"sparql":void 0;a=a.set(O1.KeysRdfResolveQuadPattern.sources,[{type:s,value:n}]);let o;try{o=v6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:a}))}catch(u){if(e.silent)o={bindingsStream:new f0e.SingletonIterator(h0e.bindings()),type:"bindings",metadata:async()=>({state:new d0e.MetadataValidationState,cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};else throw u}return o}}ow.ActorQueryOperationService=p0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ow,t)})(tB);var rB={},uw={};Object.defineProperty(uw,"__esModule",{value:!0});uw.ActorQueryOperationSlice=void 0;const y0e=ct,b0e=Ut;class _0e extends y0e.ActorQueryOperationTypedMediated{constructor(e){super(e,"slice")}async testOperation(e,r){return!0}async runOperation(e,r){e.length&&(r=r.set(b0e.KeysQueryOperation.limitIndicator,e.length));const n=await this.mediatorQueryOperation.mediate({operation:e.input,context:r});if(n.type==="bindings")return{type:"bindings",bindingsStream:this.sliceStream(n.bindingsStream,e),metadata:this.sliceMetadata(n,e)};if(n.type==="quads")return{type:"quads",quadStream:this.sliceStream(n.quadStream,e),metadata:this.sliceMetadata(n,e)};throw new Error(`Invalid query output type: Expected 'bindings' or 'quads' but got '${n.type}'`)}sliceStream(e,r){const n=!!r.length||r.length===0,{start:a}=r,s=n?r.start+r.length-1:Number.POSITIVE_INFINITY;return e.transform({offset:a,limit:Math.max(s-a+1,0),autoStart:!1})}sliceMetadata(e,r){const n=!!r.length||r.length===0;return()=>e.metadata().then(a=>{const s={...a.cardinality};return Number.isFinite(s.value)&&(s.value=Math.max(0,s.value-r.start),n&&(s.value=Math.min(s.value,r.length))),{...a,cardinality:s}})}}uw.ActorQueryOperationSlice=_0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(uw,t)})(rB);var nB={},cw={},ru={},lw={},sy={};Object.defineProperty(sy,"__esModule",{value:!0});sy.PathVariableObjectIterator=void 0;const g0e=ct,m0e=Ht,v0e=ft,w0e=Zt,S0e=gt,T0e=new v0e.DataFactory,E0e=new S0e.Factory;class O0e extends m0e.BufferedIterator{constructor(e,r,n,a,s,o,u=16){super({autoStart:!0}),this.subject=e,this.predicate=r,this.graph=n,this.context=a,this.mediatorQueryOperation=s,this.maxRunningOperations=u,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this._push(this.subject,o)}_end(e){for(const r of this.runningOperations)r.destroy();super._end(e)}_push(e,r=!0){let n;if(r&&(n=(0,w0e.termToString)(e),this.termHashes.has(n)))return;const a=T0e.variable("b");this.pendingOperations.push({variable:a,operation:E0e.createPath(e,this.predicate,a,this.graph)}),n&&(this.termHashes.set(n,e),super._push(e))}_read(e,r){const n=this;(async function(){for(;n.runningOperations.length<n.maxRunningOperations&&n.pendingOperations.length!==0;){const o=n.pendingOperations.pop(),u=g0e.ActorQueryOperation.getSafeBindings(await n.mediatorQueryOperation.mediate({operation:o.operation,context:n.context})),c=u.bindingsStream.transform({autoStart:!1,transform(l,d,f){const h=l.get(o.variable);f(h),d()}});c.done||(n.runningOperations.push(c),c.on("error",l=>n.destroy(l)),c.on("readable",()=>{n.readable=!0,n._fillBufferAsync()}),c.on("end",()=>{n.runningOperations.splice(n.runningOperations.indexOf(c),1),n.readable=!0,n._fillBufferAsync()})),n.setProperty("metadata",u.metadata)}let a=0,s;for(;a!==(a=e);)for(let o=0;o<n.runningOperations.length&&e>0;o++)(s=n.runningOperations[o].read())!==null&&(e--,n._push(s));n.runningOperations.length===0&&n.pendingOperations.length===0&&n.close()})().then(()=>{r()},a=>this.destroy(a))}}sy.PathVariableObjectIterator=O0e;Object.defineProperty(lw,"__esModule",{value:!0});lw.ActorAbstractPath=void 0;const A0e=$n,_h=ct,iE=Ut,A1=Ht,x0e=ft,aE=Zt,R0e=gt,I0e=sy,P0e=new x0e.DataFactory,sE=new A0e.BindingsFactory;class As extends _h.ActorQueryOperationTypedMediated{constructor(e,r){super(e,"path"),this.predicateType=r}async testOperation(e,r){if(e.predicate.type!==this.predicateType)throw new Error(`This Actor only supports ${this.predicateType} Path operations.`);return!0}generateVariable(e,r){return r?e&&(e.subject.value===r||e.object.value===r)?this.generateVariable(e,`${r}b`):P0e.variable(r):this.generateVariable(e,"b")}async isPathArbitraryLengthDistinct(e,r){return e.get(iE.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(e=e.set(iE.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:e,operation:void 0}):(e=e.set(iE.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:e,operation:_h.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:As.FACTORY.createDistinct(r),context:e}))})}async predicateStarGraphVariable(e,r,n,a,s){const o=this.generateVariable(As.FACTORY.createPath(e,n,r,a)),u=As.FACTORY.createUnion([As.FACTORY.createPattern(e,o,r,a),As.FACTORY.createPattern(r,o,e,a)]),c=_h.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:s,operation:u})),l=new Set;return{bindingsStream:new A1.MultiTransformIterator(c.bindingsStream,{multiTransform:f=>{const h=f.get(a);return l.has(h.value)?new A1.EmptyIterator:(l.add(h.value),new A1.TransformIterator(async()=>{const p=new A1.BufferedIterator;return await this.getObjectsPredicateStar(e,n,h,s,{},p,{count:0}),p.transform({transform(b,_,E){E(sE.bindings([[r,b],[a,h]])),_()}})},{maxBufferSize:128}))},autoStart:!1}),metadata:c.metadata}}async getObjectsPredicateStarEval(e,r,n,a,s,o){if(a.termType==="Variable")return this.predicateStarGraphVariable(e,n,r,a,s);const u=new I0e.PathVariableObjectIterator(e,r,a,s,this.mediatorQueryOperation,o);return{bindingsStream:u.transform({autoStart:!1,transform(l,d,f){f(sE.bindings([[n,l]])),d()}}),async metadata(){const l=await new Promise(d=>{u.getProperty("metadata",f=>d(f()))});return l.cardinality.value++,l}}}async getObjectsPredicateStar(e,r,n,a,s,o,u){const c=(0,aE.termToString)(e);if(s[c])return;o._push(e),s[c]=e,u.count++;const l=this.generateVariable(),d=As.FACTORY.createPath(e,r,l,n),f=_h.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:d,context:a}));return f.bindingsStream.on("data",async h=>{const p=h.get(l);await this.getObjectsPredicateStar(p,r,n,a,s,o,u)}),f.bindingsStream.on("end",()=>{--u.count===0&&o.close()}),f.metadata}async getSubjectAndObjectBindingsPredicateStar(e,r,n,a,s,o,u,c,l,d,f){const h=(0,aE.termToString)(a)+(0,aE.termToString)(o);if(l[h])return;if(f.count++,l[h]=!0,d._push(sE.bindings([[e,n],[r,a]])),h in c){const b=await c[h];for(const _ of b)await this.getSubjectAndObjectBindingsPredicateStar(e,r,n,_,s,o,u,c,l,d,f);--f.count===0&&d.close();return}const p=new Promise(async(b,_)=>{const E=[],w=this.generateVariable(),O=As.FACTORY.createPath(a,s,w,o),A=_h.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:O,context:u}));A.bindingsStream.on("data",async T=>{const I=T.get(w);E.push(I),await this.getSubjectAndObjectBindingsPredicateStar(e,r,n,I,s,o,u,c,l,d,f)}),A.bindingsStream.on("error",_),A.bindingsStream.on("end",()=>{--f.count===0&&d.close(),b(E)})});c[h]=p}}lw.ActorAbstractPath=As;As.FACTORY=new R0e.Factory;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(lw,t),r(sy,t)})(ru);Object.defineProperty(cw,"__esModule",{value:!0});cw.ActorQueryOperationPathAlt=void 0;const w6=ru,D0e=y2,N0e=ct,j0e=Ht,C0e=gt;class M0e extends w6.ActorAbstractPath{constructor(e){super(e,C0e.Algebra.types.ALT)}async runOperation(e,r){const n=e.predicate,a=(await Promise.all(n.input.map(u=>this.mediatorQueryOperation.mediate({context:r,operation:w6.ActorAbstractPath.FACTORY.createPath(e.subject,u,e.object,e.graph)})))).map(N0e.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new j0e.UnionIterator(a.map(u=>u.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(a.map(u=>u.metadata())).then(u=>D0e.ActorQueryOperationUnion.unionMetadata(u,!0))}}}cw.ActorQueryOperationPathAlt=M0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(cw,t)})(nB);var iB={},dw={};Object.defineProperty(dw,"__esModule",{value:!0});dw.ActorQueryOperationPathInv=void 0;const S6=ru,F0e=gt;class L0e extends S6.ActorAbstractPath{constructor(e){super(e,F0e.Algebra.types.INV)}async runOperation(e,r){const n=e.predicate,a=S6.ActorAbstractPath.FACTORY.createPath(e.object,n.path,e.subject,e.graph);return this.mediatorQueryOperation.mediate({operation:a,context:r})}}dw.ActorQueryOperationPathInv=L0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(dw,t)})(iB);var aB={},fw={};Object.defineProperty(fw,"__esModule",{value:!0});fw.ActorQueryOperationPathLink=void 0;const T6=ru,B0e=gt;class $0e extends T6.ActorAbstractPath{constructor(e){super(e,B0e.Algebra.types.LINK)}async runOperation(e,r){const n=e.predicate,a=T6.ActorAbstractPath.FACTORY.createPattern(e.subject,n.iri,e.object,e.graph);return this.mediatorQueryOperation.mediate({operation:a,context:r})}}fw.ActorQueryOperationPathLink=$0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(fw,t)})(aB);var sB={},hw={};Object.defineProperty(hw,"__esModule",{value:!0});hw.ActorQueryOperationPathNps=void 0;const E6=ru,U0e=ct,q0e=gt;class V0e extends E6.ActorAbstractPath{constructor(e){super(e,q0e.Algebra.types.NPS)}async runOperation(e,r){const n=e.predicate,a=this.generateVariable(e),s=E6.ActorAbstractPath.FACTORY.createPattern(e.subject,a,e.object,e.graph),o=U0e.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:s,context:r}));return{type:"bindings",bindingsStream:o.bindingsStream.transform({filter(c){return!n.iris.some(l=>l.equals(c.get(a)))},transform(c,l,d){d(c.delete(a)),l()}}),metadata:o.metadata}}}hw.ActorQueryOperationPathNps=V0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(hw,t)})(sB);var oB={},pw={};Object.defineProperty(pw,"__esModule",{value:!0});pw.ActorQueryOperationPathOneOrMore=void 0;const Ec=ru,H0e=$n,O6=ct,oE=Ht,k0e=gt,A6=new H0e.BindingsFactory;class Q0e extends Ec.ActorAbstractPath{constructor(e){super(e,k0e.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(e,r){const n=await this.isPathArbitraryLengthDistinct(r,e);if(n.operation)return n.operation;r=n.context;const a=e.predicate;if(e.subject.termType!=="Variable"&&e.object.termType==="Variable"){const c=e.object,l=await this.getObjectsPredicateStarEval(e.subject,a.path,c,e.graph,r,!1),d=e.graph.termType==="Variable"?[c,e.graph]:[c];return{type:"bindings",bindingsStream:l.bindingsStream,metadata:async()=>({...await l.metadata(),variables:d})}}if(e.subject.termType==="Variable"&&e.object.termType==="Variable"){const c=Ec.ActorAbstractPath.FACTORY.createDistinct(Ec.ActorAbstractPath.FACTORY.createPath(e.subject,e.predicate.path,e.object,e.graph)),l=O6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:r,operation:c})),d=e.subject,f=e.object,h={},p=new oE.MultiTransformIterator(l.bindingsStream,{multiTransform:_=>{const E=_.get(d),w=_.get(f),O=e.graph.termType==="Variable"?_.get(e.graph):e.graph;return new oE.TransformIterator(async()=>{const A=new oE.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(d,f,E,w,a.path,O,r,h,{},A,{count:0}),A.transform({transform(T,I,D){e.graph.termType==="Variable"&&(T=T.set(e.graph,O)),D(T),I()}})},{maxBufferSize:128})},autoStart:!1}),b=e.graph.termType==="Variable"?[d,f,e.graph]:[d,f];return{type:"bindings",bindingsStream:p,metadata:async()=>({...await l.metadata(),variables:b})}}if(e.subject.termType==="Variable"&&e.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:r,operation:Ec.ActorAbstractPath.FACTORY.createPath(e.object,Ec.ActorAbstractPath.FACTORY.createOneOrMorePath(Ec.ActorAbstractPath.FACTORY.createInv(a.path)),e.subject,e.graph)});const s=this.generateVariable(),o=O6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:r,operation:Ec.ActorAbstractPath.FACTORY.createPath(e.subject,a,s,e.graph)}));return{type:"bindings",bindingsStream:o.bindingsStream.transform({filter:c=>e.object.equals(c.get(s)),transform(c,l,d){const f=e.graph.termType==="Variable"?A6.bindings([[e.graph,c.get(e.graph)]]):A6.bindings();d(f),l()}}),metadata:async()=>({...await o.metadata(),variables:e.graph.termType==="Variable"?[e.graph]:[]})}}}pw.ActorQueryOperationPathOneOrMore=Q0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(pw,t)})(oB);var uB={},yw={};Object.defineProperty(yw,"__esModule",{value:!0});yw.ActorQueryOperationPathZeroOrMore=void 0;const uE=ru,G0e=$n,z0e=ct,x1=Ht,R1=Zt,W0e=gt,x6=new G0e.BindingsFactory;class X0e extends uE.ActorAbstractPath{constructor(e){super(e,W0e.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(e,r){const n=await this.isPathArbitraryLengthDistinct(r,e);if(n.operation)return n.operation;r=n.context;const a=e.predicate,s=e.subject.termType==="Variable",o=e.object.termType==="Variable";if(e.subject.termType==="Variable"&&e.object.termType==="Variable"){const h=this.generateVariable(e),p=uE.ActorAbstractPath.FACTORY.createPattern(e.subject,h,e.object,e.graph),b=z0e.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:r,operation:p})),_=e.subject,E=e.object,w=new Set,O={},A=new x1.MultiTransformIterator(b.bindingsStream,{multiTransform:I=>{const D=I.get(_),U=I.get(E),H=e.graph.termType==="Variable"?I.get(e.graph):e.graph,N=(0,R1.termToString)(D)+(0,R1.termToString)(H),R=(0,R1.termToString)(U)+(0,R1.termToString)(H);return new x1.TransformIterator(async()=>{if(w.has(N)&&w.has(R))return new x1.EmptyIterator;const F=new x1.BufferedIterator,X={count:0};return w.has(N)||(w.add(N),await this.getSubjectAndObjectBindingsPredicateStar(_,E,D,D,a.path,H,r,O,{},F,X)),w.has(R)||(w.add(R),await this.getSubjectAndObjectBindingsPredicateStar(_,E,U,U,a.path,H,r,O,{},F,X)),F.transform({transform(ne,$,C){e.graph.termType==="Variable"&&(ne=ne.set(e.graph,H)),C(ne),$()}})})}}),T=e.graph.termType==="Variable"?[_,e.object,e.graph]:[_,e.object];return{type:"bindings",bindingsStream:A,metadata:async()=>({...await b.metadata(),variables:T})}}if(!s&&!o){const h=this.generateVariable(),p=await this.getObjectsPredicateStarEval(e.subject,a.path,h,e.graph,r,!0);return{type:"bindings",bindingsStream:p.bindingsStream.transform({filter:_=>e.object.equals(_.get(h)),transform(_,E,w){const O=e.graph.termType==="Variable"?x6.bindings([[e.graph,_.get(e.graph)]]):x6.bindings();w(O),E()}}),metadata:async()=>({...await p.metadata(),variables:e.graph.termType==="Variable"?[e.graph]:[]})}}const u=s?e.object:e.subject,c=s?e.subject:e.object,l=s?uE.ActorAbstractPath.FACTORY.createInv(a.path):a.path,d=await this.getObjectsPredicateStarEval(u,l,c,e.graph,r,!0),f=e.graph.termType==="Variable"?[c,e.graph]:[c];return{type:"bindings",bindingsStream:d.bindingsStream,metadata:async()=>({...await d.metadata(),variables:f})}}}yw.ActorQueryOperationPathZeroOrMore=X0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(yw,t)})(uB);var cB={},bw={};Object.defineProperty(bw,"__esModule",{value:!0});bw.ActorQueryOperationPathZeroOrOne=void 0;const Oc=ru,K0e=$n,R6=ct,J0e=oa,I6=Ht,Y0e=gt,cE=new K0e.BindingsFactory;class Z0e extends Oc.ActorAbstractPath{constructor(e){super(e,Y0e.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(e,r){const n=e.predicate,a=[];if(e.subject.termType!=="Variable"&&e.object.termType!=="Variable"&&e.subject.equals(e.object))return{type:"bindings",bindingsStream:new I6.SingletonIterator(cE.bindings()),metadata:()=>Promise.resolve({state:new J0e.MetadataValidationState,cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};const s=await this.isPathArbitraryLengthDistinct(r,e);if(s.operation)return s.operation;r=s.context;const o=R6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:r,operation:Oc.ActorAbstractPath.FACTORY.createPath(e.subject,n.path,e.object,e.graph)}));let u;if(e.subject.termType==="Variable"&&e.object.termType==="Variable"){const c=this.generateVariable(e),l=R6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:r,operation:Oc.ActorAbstractPath.FACTORY.createFilter(Oc.ActorAbstractPath.FACTORY.createPattern(e.subject,c,e.object,e.graph),Oc.ActorAbstractPath.FACTORY.createOperatorExpression("=",[Oc.ActorAbstractPath.FACTORY.createTermExpression(e.subject),Oc.ActorAbstractPath.FACTORY.createTermExpression(e.object)]))})).bindingsStream.transform({map(d){return d.delete(c)},autoStart:!1});u=new I6.UnionIterator([l,o.bindingsStream],{autoStart:!1})}else e.subject.termType==="Variable"&&a.push(cE.bindings([[e.subject,e.object]])),e.object.termType==="Variable"&&a.push(cE.bindings([[e.object,e.subject]])),u=o.bindingsStream.prepend(a);return{type:"bindings",bindingsStream:u,metadata:o.metadata}}}bw.ActorQueryOperationPathZeroOrOne=Z0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(bw,t)})(cB);var lB={},_w={};Object.defineProperty(_w,"__esModule",{value:!0});_w.ActorQueryOperationAddRewrite=void 0;const P6=ct,eye=ft,tye=gt,hu=new eye.DataFactory;class rye extends P6.ActorQueryOperationTypedMediated{constructor(e){super(e,"add"),this.factory=new tye.Factory}async testOperation(e,r){return P6.ActorQueryOperation.throwOnReadOnly(r),!0}runOperation(e,r){const n=e.destination==="DEFAULT"?hu.defaultGraph():e.destination,a=e.source==="DEFAULT"?hu.defaultGraph():e.source,s=this.factory.createDeleteInsert(void 0,[this.factory.createPattern(hu.variable("s"),hu.variable("p"),hu.variable("o"),n)],this.factory.createPattern(hu.variable("s"),hu.variable("p"),hu.variable("o"),a));return this.mediatorQueryOperation.mediate({operation:s,context:r})}}_w.ActorQueryOperationAddRewrite=rye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(_w,t)})(lB);var dB={},gw={};Object.defineProperty(gw,"__esModule",{value:!0});gw.ActorQueryOperationUpdateCompositeUpdate=void 0;const lE=ct;class nye extends lE.ActorQueryOperationTypedMediated{constructor(e){super(e,"compositeupdate")}async testOperation(e,r){return lE.ActorQueryOperation.throwOnReadOnly(r),!0}async runOperation(e,r){return{type:"void",execute:()=>(async()=>{for(const a of e.updates)await lE.ActorQueryOperation.getSafeVoid(await this.mediatorQueryOperation.mediate({operation:a,context:r})).execute()})()}}}gw.ActorQueryOperationUpdateCompositeUpdate=nye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(gw,t)})(dB);var fB={},mw={};Object.defineProperty(mw,"__esModule",{value:!0});mw.ActorQueryOperationCopyRewrite=void 0;const D6=ct,iye=gt;class aye extends D6.ActorQueryOperationTypedMediated{constructor(e){super(e,"copy"),this.factory=new iye.Factory}async testOperation(e,r){return D6.ActorQueryOperation.throwOnReadOnly(r),!0}runOperation(e,r){if(typeof e.destination=="string"&&typeof e.source=="string"&&e.destination===e.source||typeof e.destination!="string"&&typeof e.source!="string"&&e.destination.equals(e.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const n=this.factory.createCompositeUpdate([this.factory.createDrop(e.destination,!0),this.factory.createAdd(e.source,e.destination,e.silent)]);return this.mediatorQueryOperation.mediate({operation:n,context:r})}}mw.ActorQueryOperationCopyRewrite=aye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(mw,t)})(fB);var hB={},vw={};Object.defineProperty(vw,"__esModule",{value:!0});vw.ActorQueryOperationMoveRewrite=void 0;const N6=ct,sye=gt;class oye extends N6.ActorQueryOperationTypedMediated{constructor(e){super(e,"move"),this.factory=new sye.Factory}async testOperation(e,r){return N6.ActorQueryOperation.throwOnReadOnly(r),!0}runOperation(e,r){if(typeof e.destination=="string"&&typeof e.source=="string"&&e.destination===e.source||typeof e.destination!="string"&&typeof e.source!="string"&&e.destination.equals(e.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const n=[this.factory.createDrop(e.destination,!0),this.factory.createAdd(e.source,e.destination,e.silent),this.factory.createDrop(e.source)],a=this.factory.createCompositeUpdate(n);return this.mediatorQueryOperation.mediate({operation:a,context:r})}}vw.ActorQueryOperationMoveRewrite=oye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(vw,t)})(hB);var PR={},ww={};Object.defineProperty(ww,"__esModule",{value:!0});ww.ActionObserverHttp=void 0;const uye=Je;let cye=class extends uye.ActionObserver{constructor(e){super(e),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(e,r,n){this.requests++}};ww.ActionObserverHttp=cye;var Sw={};Object.defineProperty(Sw,"__esModule",{value:!0});Sw.ActorQueryResultSerializeSparqlJson=void 0;const lye=cs,dye=Xt;class Sd extends lye.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToJsonBindings(e){if(e.termType==="Literal"){const r=e,n={value:r.value,type:"literal"},{language:a}=r,{datatype:s}=r;return a?n["xml:lang"]=a:s&&s.value!=="http://www.w3.org/2001/XMLSchema#string"&&(n.datatype=s.value),n}return e.termType==="BlankNode"?{value:e.value,type:"bnode"}:e.termType==="Quad"?{value:{subject:Sd.bindingToJsonBindings(e.subject),predicate:Sd.bindingToJsonBindings(e.predicate),object:Sd.bindingToJsonBindings(e.object)},type:"triple"}:{value:e.value,type:"uri"}}async testHandleChecked(e,r){if(!["bindings","boolean"].includes(e.type))throw new Error("This actor can only handle bindings streams or booleans.");return!0}async runHandle(e,r,n){const a=new dye.Readable;a._read=()=>{};const s={};if(e.type==="bindings"){const u=await e.metadata();u.variables.length>0&&(s.vars=u.variables.map(c=>c.value))}a.push(`{"head": ${JSON.stringify(s)},
`);let o=!0;if(e.type==="bindings"){const u=e.bindingsStream;u.on("error",c=>{a.emit("error",c)}),u.on("data",c=>{o?a.push(`"results": { "bindings": [
`):a.push(`,
`);const l=Object.fromEntries([...c].map(([d,f])=>[d.value,Sd.bindingToJsonBindings(f)]));a.push(JSON.stringify(l)),o=!1}),u.on("end",()=>{o&&a.push(`"results": { "bindings": [
`),a.push(`
]}`),this.emitMetadata&&a.push(`,
"metadata": { "httpRequests": ${this.httpObserver.requests} }`),a.push(`}
`),a.push(null)})}else try{a.push(`"boolean":${await e.execute()}
}
`),a.push(null)}catch(u){a.once("newListener",()=>a.emit("error",u))}return{data:a}}}Sw.ActorQueryResultSerializeSparqlJson=Sd;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ww,t),r(Sw,t)})(PR);var DR={},Tw={};Object.defineProperty(Tw,"__esModule",{value:!0});Tw.ActionObserverHttp=void 0;const fye=Je;class hye extends fye.ActionObserver{constructor(e){super(e),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(e,r,n){this.requests++}}Tw.ActionObserverHttp=hye;var Ew={};Object.defineProperty(Ew,"__esModule",{value:!0});Ew.ActorQueryResultSerializeStats=void 0;const pye=cs,yye=Xt,bye=Jo();class _ye extends pye.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}async testHandleChecked(e,r){if(!["bindings","quads"].includes(e.type))throw new Error("This actor can only handle bindings streams or quad streams.");return!0}pushHeader(e){const r=["Result","Delay (ms)","HTTP requests"].join(",");e.push(`${r}
`)}pushStat(e,r,n){const a=[n,this.delay(r),this.httpObserver.requests].join(",");e.push(`${a}
`)}pushFooter(e,r){const n=["TOTAL",this.delay(r),this.httpObserver.requests].join(",");e.push(`${n}
`),e.push(null)}async runHandle(e,r,n){const a=new yye.Readable;a._read=()=>{};const s=e.type==="bindings"?e.bindingsStream:e.quadStream,o=this.now();let u=1;return this.pushHeader(a),s.on("error",c=>a.emit("error",c)),s.on("data",()=>this.pushStat(a,o,u++)),s.on("end",()=>this.pushFooter(a,o)),{data:a}}now(){if(typeof performance>"u"){const e=bye.hrtime();return e[0]*1e3+e[1]/1e6}return performance.now()}delay(e){return this.now()-e}}Ew.ActorQueryResultSerializeStats=_ye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tw,t),r(Ew,t)})(DR);var pB={},Ow={};Object.defineProperty(Ow,"__esModule",{value:!0});Ow.ActorQueryOperationDistinctHash=void 0;const j6=ct;class gye extends j6.ActorQueryOperationTypedMediated{constructor(e){super(e,"distinct")}async testOperation(e,r){return!0}async runOperation(e,r){const n=j6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:r}));return{type:"bindings",bindingsStream:n.bindingsStream.filter(await this.newHashFilter(r)),metadata:n.metadata}}async newHashFilter(e){const{hashFunction:r}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:e}),n={};return a=>{const s=r(a);return!(s in n)&&(n[s]=!0)}}}Ow.ActorQueryOperationDistinctHash=gye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ow,t)})(pB);var yB={},Aw={},xw={};Object.defineProperty(xw,"__esModule",{value:!0});xw.GroupsState=void 0;const mye=$n,C6=Il,vye=ft,wye=new vye.DataFactory,Sye=new mye.BindingsFactory;class Tye{constructor(e,r,n){this.hashFunction=e,this.pattern=r,this.sparqleeConfig=n,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(a=>a.value)),this.distinctHashes=r.aggregates.some(({distinct:a})=>a)?new Map:null,this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(e){const r=this.resultCheck();if(r)return r;this.waitCounter++;const n=e.filter((u,c)=>this.groupVariables.has(c.value)),a=this.hashBindings(n);let s=this.groupsInitializer.get(a),o;if(!s)s=(async()=>{const u={};if(await Promise.all(this.pattern.aggregates.map(async l=>{const d=l.variable.value;u[d]=new C6.AsyncAggregateEvaluator(l,this.sparqleeConfig),await u[d].put(e)})),this.distinctHashes){const l=this.hashBindings(e);this.distinctHashes.set(a,new Set([l]))}const c={aggregators:u,bindings:n};return this.groups.set(a,c),this.subtractWaitCounterAndCollect(),c})(),this.groupsInitializer.set(a,s),o=s;else{const u=s;o=(async()=>{const c=await u;await Promise.all(this.pattern.aggregates.map(async l=>{if(l.distinct){const f=this.hashBindings(e);if(this.distinctHashes.get(a).has(f))return;this.distinctHashes.get(a).add(f)}const d=l.variable.value;await c.aggregators[d].put(e)}))})().then(()=>{this.subtractWaitCounterAndCollect()})}return o}subtractWaitCounterAndCollect(){--this.waitCounter===0&&this.handleResultCollection()}handleResultCollection(){let e=[...this.groups].map(([r,n])=>{const{bindings:a,aggregators:s}=n;let o=a;for(const u in s){const c=s[u].result();c&&(o=o.set(wye.variable(u),c))}return o});if(e.length===0&&this.groupVariables.size===0){const r=[];for(const n of this.pattern.aggregates){const a=n.variable,s=C6.AsyncAggregateEvaluator.emptyValue(n);s!==void 0&&r.push([a,s])}e=[Sye.bindings(r)]}this.waitResolver(e)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}collectResults(){const e=this.resultCheck();if(e)return e;this.resultHasBeenCalled=!0;const r=new Promise(n=>{this.waitResolver=n});return this.subtractWaitCounterAndCollect(),r}hashBindings(e){return this.hashFunction(e)}}xw.GroupsState=Tye;Object.defineProperty(Aw,"__esModule",{value:!0});Aw.ActorQueryOperationGroup=void 0;const I1=ct,Eye=Il,M6=Ht,Oye=xw;class Aye extends I1.ActorQueryOperationTypedMediated{constructor(e){super(e,"group")}async testOperation(e,r){for(const n of e.aggregates)new Eye.AsyncEvaluator(n.expression,I1.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation));return!0}async runOperation(e,r){const{hashFunction:n}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:r}),{input:a,aggregates:s}=e,o=await this.mediatorQueryOperation.mediate({operation:a,context:r}),u=I1.ActorQueryOperation.getSafeBindings(o),c=[...e.variables,...s.map(f=>f.variable)],l=I1.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation);return{type:"bindings",bindingsStream:new M6.TransformIterator(()=>new Promise((f,h)=>{const p=new Oye.GroupsState(n,e,l);u.bindingsStream.on("end",async()=>{try{const b=new M6.ArrayIterator(await p.collectResults(),{autoStart:!1});f(b)}catch(b){h(b)}}),u.bindingsStream.on("error",h),u.bindingsStream.on("data",b=>{p.consumeBindings(b).catch(h)})}),{autoStart:!1}),metadata:async()=>({...await u.metadata(),variables:c})}}}Aw.ActorQueryOperationGroup=Aye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Aw,t)})(yB);var bB={},Rw={};Object.defineProperty(Rw,"__esModule",{value:!0});Rw.ActorQueryOperationReducedHash=void 0;const F6=ct,xye=fs;class Rye extends F6.ActorQueryOperationTypedMediated{constructor(e){super(e,"reduced")}async testOperation(e,r){return!0}async runOperation(e,r){const n=F6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:r}));return{type:"bindings",bindingsStream:n.bindingsStream.filter(await this.newHashFilter(r)),metadata:n.metadata}}async newHashFilter(e){const{hashFunction:r}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:e}),n=new xye.LRUCache({max:this.cacheSize});return a=>{const s=r(a);return n.has(s)?!1:(n.set(s,!0),!0)}}}Rw.ActorQueryOperationReducedHash=Rye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Rw,t)})(bB);var _B={},Iw={};Object.defineProperty(Iw,"__esModule",{value:!0});Iw.ActorQueryResultSerializeRdf=void 0;const Iye=cs;class Pye extends Iye.ActorQueryResultSerialize{constructor(e){super(e)}async testHandle(e,r,n){if(e.type!=="quads")throw new Error(`Actor ${this.name} can only handle quad streams`);const{mediaTypes:a}=await this.mediatorMediaTypeCombiner.mediate({context:n,mediaTypes:!0});if(!(r in a))throw new Error(`Actor ${this.name} can not handle media type ${r}. All available types: ${Object.keys(a)}`);return!0}async runHandle(e,r,n){return(await this.mediatorRdfSerialize.mediate({context:n,handle:{context:n,quadStream:e.quadStream},handleMediaType:r})).handle}async testMediaType(e){return!0}async getMediaTypes(e){return(await this.mediatorMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes}async testMediaTypeFormats(e){return!0}async getMediaTypeFormats(e){return(await this.mediatorMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats}}Iw.ActorQueryResultSerializeRdf=Pye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Iw,t)})(_B);var gB={},Pw={};Object.defineProperty(Pw,"__esModule",{value:!0});Pw.ActorHttpWayback=void 0;const L6=ls,bb=Ut,Dye=Al,Nye="http://wayback.archive-it.org/";function B6(t){const e=new Request(t.input,t.init);return{input:new Request(new URL(`/${e.url}`,Nye),e)}}function jye(t){const e=t.get(bb.KeysHttpProxy.httpProxyHandler);return e?r=>e.getProxy(B6(r)):r=>Promise.resolve(B6(r))}class Cye extends L6.ActorHttp{constructor(e){super(e)}async test(e){return!0}async run(e){let r=await this.mediatorHttp.mediate(e);if(r.status===404&&e.context.get(bb.KeysHttpWayback.recoverBrokenLinks)){let n=await this.mediatorHttp.mediate({...e,context:e.context.set(bb.KeysHttpWayback.recoverBrokenLinks,!1).set(bb.KeysHttpProxy.httpProxyHandler,{getProxy:jye(e.context)})});n.status===200&&([r,n]=[n,r]);const{body:a}=n;a&&("destroy"in a&&typeof a.destroy=="function"?a.destroy():await Dye(L6.ActorHttp.toNodeReadable(n.body)))}return r}}Pw.ActorHttpWayback=Cye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Pw,t)})(gB);var mB={},Dw={},vB={},gh={},Nw={},mh={},vh={},jw={};Object.defineProperty(jw,"__esModule",{value:!0});jw.ContainerHandlerIdentifier=void 0;class Mye{canCombineWithGraph(){return!0}async handle(e,r,n,a,s,o){let u;if(r.emittedStack[o+1]&&r.idStack[o+1])u=r.idStack[o+1][0];else{const d=await n.getContainerKey(a[o],a,o)!==null?await n.resourceToTerm(await r.getContext(a),a[o]):n.dataFactory.blankNode();if(!d){r.emittedStack[o]=!1;return}u=d,r.idStack[o+1]=[u]}let c=r.idStack[o];c||(c=r.idStack[o]=[]),c.some(l=>l.equals(u))||c.push(u),await r.handlePendingContainerFlushBuffers()||(r.emittedStack[o]=!1)}}jw.ContainerHandlerIdentifier=Mye;var wh={},Sh={},$6;function Cw(){if($6)return Sh;$6=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.EntryHandlerPredicate=void 0;const t=pn,e=Nl();let r=class wB{static async handlePredicateObject(a,s,o,u,c,l,d,f,h){const p=await s.getPropertiesDepth(o,u),b=await s.getDepthOffsetGraph(u,o),_=u-b,E=a.idStack[p];if(E&&!h)for(const w of E)if(b>=0){const A=a.idStack[_-1];if(A)for(const T of A)s.emitQuadChecked(u,w,c,l,T,d,f);else d?(s.validateReverseSubject(l),a.getUnidentifiedGraphBufferSafe(_-1).push({subject:l,predicate:c,object:w,isEmbedded:f})):a.getUnidentifiedGraphBufferSafe(_-1).push({subject:w,predicate:c,object:l,isEmbedded:f})}else{const A=await s.getGraphContainerValue(o,p);s.emitQuadChecked(u,w,c,l,A,d,f)}else if(d&&s.validateReverseSubject(l),h){if(a.rdfstar){a.idStack[u]&&a.emitError(new t.ErrorCoded(`Found an illegal @id inside an annotation: ${a.idStack[u][0].value}`,t.ERROR_CODES.INVALID_ANNOTATION));for(let A=0;A<u;A++)await s.unaliasKeyword(o[A],o,A)==="@id"&&a.emitError(new t.ErrorCoded("Found an illegal annotation inside an embedded node",t.ERROR_CODES.INVALID_ANNOTATION));const w=a.getAnnotationsBufferSafe(p),O={predicate:c,object:l,reverse:d,nestedAnnotations:[],depth:p};w.push(O);for(let A=w.length-2;A>=0;A--){const T=w[A];T.depth>p&&(O.nestedAnnotations.push(T),w.splice(A,1))}}}else a.getUnidentifiedValueBufferSafe(p).push({predicate:c,object:l,reverse:d,isEmbedded:f})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(a,s,o,u,c){const l=o[u];if(l){const d=await a.getContext(o);if(!a.jsonLiteralStack[u]&&await s.predicateToTerm(d,o[u]))return e.Util.getContextValueType(d,l)==="@json"&&(a.jsonLiteralStack[u+1]=!0),!0}return!1}async test(a,s,o,u,c){return u[c]}async handle(a,s,o,u,c,l,d){const f=u[l],h=await a.getContext(u),p=await s.predicateToTerm(h,o);if(p){const b=await s.valueToTerm(h,o,c,l,u);if(b.length)for(let _ of b){let E=await s.unaliasKeywordParent(u,l);const w=e.Util.isPropertyReverse(h,f,E);let O=0;for(;E==="@reverse"||typeof E=="number";)typeof E=="number"?O++:l--,E=await s.unaliasKeywordParent(u,l-O);const A=e.Util.isPropertyInEmbeddedNode(E);s.validateReverseInEmbeddedNode(o,w,A);const T=e.Util.isPropertyInAnnotationObject(E);if(c){const I="@list"in e.Util.getContextValueContainer(h,o);if(I||c["@list"]){if((I&&!Array.isArray(c)&&!c["@list"]||c["@list"]&&!Array.isArray(c["@list"]))&&_!==s.rdfNil){const D=s.dataFactory.blankNode();a.emitQuad(l,s.dataFactory.quad(D,s.rdfRest,s.rdfNil,s.getDefaultGraph())),a.emitQuad(l,s.dataFactory.quad(D,s.rdfFirst,_,s.getDefaultGraph())),_=D}if(w&&!a.allowSubjectList)throw new t.ErrorCoded(`Found illegal list value in subject position at ${o}`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await wB.handlePredicateObject(a,s,u,l,p,_,w,A,T)}}}};return Sh.EntryHandlerPredicate=r,Sh}var U6;function Fye(){if(U6)return wh;U6=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.ContainerHandlerIndex=void 0;const t=pn,e=Cw(),r=Nl();let n=class{canCombineWithGraph(){return!0}async handle(s,o,u,c,l,d){if(!Array.isArray(l)){const f="@graph"in s,h=await o.getContext(c),p=c[d-1],b=r.Util.getContextValueIndex(h,p);if(b){if(t.Util.isPotentialKeyword(b))throw new t.ErrorCoded(`Keywords can not be used as @index value, got: ${b}`,t.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof b!="string")throw new t.ErrorCoded(`@index values must be strings, got: ${b}`,t.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof l!="object"){if(r.Util.getContextValueType(h,p)!=="@id")throw new t.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${l}`,t.ERROR_CODES.INVALID_VALUE_OBJECT);const w=u.resourceToTerm(h,l);w&&(o.idStack[d+1]=[w])}const E=u.createVocabOrBaseTerm(h,b);if(E){const w=await u.valueToTerm(h,b,await u.getContainerKey(c[d],c,d),d,c);if(f){const O=await u.getGraphContainerValue(c,d+1);for(const A of w)o.emitQuad(d,u.dataFactory.quad(O,E,A,u.getDefaultGraph()))}else for(const O of w)await e.EntryHandlerPredicate.handlePredicateObject(o,u,c,d+1,E,O,!1,!1,!1)}}const _=f?2:1;await o.newOnValueJob(c.slice(0,c.length-_),l,d-_,!0),await o.handlePendingContainerFlushBuffers()}o.emittedStack[d]=!1}};return wh.ContainerHandlerIndex=n,wh}var Mw={};Object.defineProperty(Mw,"__esModule",{value:!0});Mw.ContainerHandlerLanguage=void 0;const q6=pn;class Lye{canCombineWithGraph(){return!1}async handle(e,r,n,a,s,o){const u=await n.getContainerKey(a[o],a,o);if(Array.isArray(s))s=s.map(c=>({"@value":c,"@language":u}));else{if(typeof s!="string")throw new q6.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(s)}', but expected string`,q6.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);s={"@value":s,"@language":u}}await r.newOnValueJob(a.slice(0,a.length-1),s,o-1,!0),r.emittedStack[o]=!1}}Mw.ContainerHandlerLanguage=Lye;var Th={},V6;function Bye(){if(V6)return Th;V6=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.ContainerHandlerType=void 0;const t=Cw(),e=Nl();let r=class{canCombineWithGraph(){return!1}async handle(a,s,o,u,c,l){if(!Array.isArray(c)){if(typeof c=="string"){const h=await s.getContext(u),b=e.Util.getContextValueType(h,u[l-1])==="@vocab"?await o.createVocabOrBaseTerm(h,c):await o.resourceToTerm(h,c);if(b){const _={"@id":b.termType==="NamedNode"?b.value:c};await s.newOnValueJob(u.slice(0,u.length-1),_,l-1,!0),s.idStack[l+1]=[b]}}else{const h=!!s.idStack[l+1];h||delete s.idStack[l],await s.newOnValueJob(u.slice(0,u.length-1),c,l-1,!0),h||(s.idStack[l+1]=s.idStack[l])}const d=await o.getContainerKey(u[l],u,l),f=d!==null?o.createVocabOrBaseTerm(await s.getContext(u),d):null;f&&await t.EntryHandlerPredicate.handlePredicateObject(s,o,u,l+1,o.rdfType,f,!1,!1,!1),await s.handlePendingContainerFlushBuffers()}s.emittedStack[l]=!1}};return Th.ContainerHandlerType=r,Th}var H6;function SB(){if(H6)return vh;H6=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.EntryHandlerContainer=void 0;const t=jw,e=Fye(),r=Mw,n=Bye(),a=Nl();let s=class vu{static isSimpleGraphContainer(u){return"@graph"in u&&("@set"in u&&Object.keys(u).length===2||Object.keys(u).length===1)}static isComplexGraphContainer(u){return"@graph"in u&&("@set"in u&&Object.keys(u).length>2||!("@set"in u)&&Object.keys(u).length>1)}static getContainerGraphIndex(u,c,l){let d=vu.isSimpleGraphContainer(u),f="";for(let h=c;h<l.length;h++)(!d||typeof l[h]=="number")&&(f+=":"+l[h]),!d&&typeof l[h]!="number"&&(d=!0);return f}static async getContainerHandler(u,c,l){const d={containers:{"@set":!0},depth:l,fallback:!0};let f=!1;const h=await u.getContext(c,2);for(let p=l-1;p>=0;p--)if(typeof c[p]!="number"){const b=a.Util.getContextValue(h,"@container",c[p],!1);if(b&&vu.isSimpleGraphContainer(b))return{containers:b,depth:p+1,fallback:!1};const _=a.Util.getContextValue(h,"@container",c[p-1],!1);if(_){const E="@graph"in _;for(const w in vu.CONTAINER_HANDLERS)if(_[w])return E?vu.CONTAINER_HANDLERS[w].canCombineWithGraph()?{containers:_,depth:p,fallback:!1}:d:f?d:{containers:_,depth:p,fallback:!1};return d}else{if(f)return d;f=!0}}return d}static async isBufferableContainerHandler(u,c,l){const d=await vu.getContainerHandler(u,c,l);return!d.fallback&&!("@graph"in d.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(u,c,l,d,f){return!!await this.test(u,c,null,l,d)}async test(u,c,l,d,f){const h=a.Util.getContextValueContainer(await u.getContext(d,2),d[f-1]);for(const p in vu.CONTAINER_HANDLERS)if(h[p])return{containers:h,handler:vu.CONTAINER_HANDLERS[p]};return null}async handle(u,c,l,d,f,h,p){return p.handler.handle(p.containers,u,c,d,f,h)}};return s.CONTAINER_HANDLERS={"@id":new t.ContainerHandlerIdentifier,"@index":new e.ContainerHandlerIndex,"@language":new r.ContainerHandlerLanguage,"@type":new n.ContainerHandlerType},vh.EntryHandlerContainer=s,vh}var $ye=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((r,n,a)=>{const s=a===0?"":",",o=n===void 0||typeof n=="symbol"?null:n;return r+s+t(o)},"")+"]":"{"+Object.keys(e).sort().reduce((r,n,a)=>{if(e[n]===void 0||typeof e[n]=="symbol")return r;const s=r.length===0?"":",";return r+s+t(n)+":"+t(e[n])},"")+"}"},k6;function Nl(){if(k6)return mh;k6=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.Util=void 0;const t=pn,e=ft,r=SB(),n=$ye;let a=class tr{constructor(o){this.parsingContext=o.parsingContext,this.dataFactory=o.dataFactory||new e.DataFactory,this.rdfFirst=this.dataFactory.namedNode(tr.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(tr.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(tr.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(tr.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(tr.RDF+"JSON")}static getContextValue(o,u,c,l){const d=o.getContextRaw()[c];if(!d)return l;const f=d[u];return f===void 0?l:f}static getContextValueContainer(o,u){return tr.getContextValue(o,"@container",u,{"@set":!0})}static getContextValueType(o,u){const c=tr.getContextValue(o,"@type",u,null);return c==="@none"?null:c}static getContextValueLanguage(o,u){return tr.getContextValue(o,"@language",u,o.getContextRaw()["@language"]||null)}static getContextValueDirection(o,u){return tr.getContextValue(o,"@direction",u,o.getContextRaw()["@direction"]||null)}static isContextValueReverse(o,u){return!!tr.getContextValue(o,"@reverse",u,null)}static getContextValueIndex(o,u){return tr.getContextValue(o,"@index",u,o.getContextRaw()["@index"]||null)}static isPropertyReverse(o,u,c){return c==="@reverse"!==tr.isContextValueReverse(o,u)}static isPropertyInEmbeddedNode(o){return o==="@id"}static isPropertyInAnnotationObject(o){return o==="@annotation"}static isValidIri(o){return o!==null&&t.Util.isValidIri(o)}static isPrefixArray(o,u){if(o.length>u.length)return!1;for(let c=0;c<o.length;c++)if(o[c]!==u[c])return!1;return!0}async validateValueIndexes(o){if(this.parsingContext.validateValueIndexes){const u={};for(const c of o)if(c&&typeof c=="object"){const l=c["@id"],d=c["@index"];if(l&&d){const f=u[l];if(f&&f!==d)throw new t.ErrorCoded(`Conflicting @index value for ${l}`,t.ERROR_CODES.CONFLICTING_INDEXES);u[l]=d}}}}async valueToTerm(o,u,c,l,d){if(tr.getContextValueType(o,u)==="@json")return[this.dataFactory.literal(this.valueToJsonString(c),this.rdfJson)];const f=typeof c;switch(f){case"object":if(c==null)return[];if(Array.isArray(c))return"@list"in tr.getContextValueContainer(o,u)?c.length===0?[this.rdfNil]:this.parsingContext.idStack[l+1]||[]:(await this.validateValueIndexes(c),[]);if(o=await this.getContextSelfOrPropertyScoped(o,u),"@context"in c&&(o=await this.parsingContext.parseContext(c["@context"],(await this.parsingContext.getContext(d,0)).getContextRaw())),c=await this.unaliasKeywords(c,d,l,o),"@value"in c){let h,p,b,_,E;for(u in c){const w=c[u];switch(u){case"@value":h=w;break;case"@language":p=w;break;case"@direction":b=w;break;case"@type":_=w;break;case"@index":E=w;break;case"@annotation":break;default:throw new t.ErrorCoded(`Unknown value entry '${u}' in @value: ${JSON.stringify(c)}`,t.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(_,d,l,!0,o)==="@json")return[this.dataFactory.literal(this.valueToJsonString(h),this.rdfJson)];if(h===null)return[];if(typeof h=="object")throw new t.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(h)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&E&&typeof E!="string")throw new t.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(E)}'`,t.ERROR_CODES.INVALID_INDEX_VALUE);if(p){if(typeof h!="string")throw new t.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(h)}'`,t.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!t.ContextParser.validateLanguage(p,this.parsingContext.strictValues,t.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(p=p.toLowerCase())}if(b){if(typeof h!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(h)}'`);if(!t.ContextParser.validateDirection(b,this.parsingContext.strictValues))return[]}if(p&&b&&this.parsingContext.rdfDirection){if(_)throw new t.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(c)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(l,h,p,b))}else if(p){if(_)throw new t.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(c)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(h,p)]}else if(b&&this.parsingContext.rdfDirection){if(_)throw new t.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(c)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(l,h,p,b))}else if(_){if(typeof _!="string")throw new t.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(_)}'`,t.ERROR_CODES.INVALID_TYPED_VALUE);const w=this.createVocabOrBaseTerm(o,_);if(!w)throw new t.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(_)}'`,t.ERROR_CODES.INVALID_TYPED_VALUE);if(w.termType!=="NamedNode")throw new t.ErrorCoded(`Illegal value type (${w.termType}): ${_}`,t.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(h,w)]}return await this.valueToTerm(new t.JsonLdContextNormalized({}),u,h,l,d)}else if("@set"in c){if(Object.keys(c).length>1)throw new t.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${u}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in c){if(Object.keys(c).length>1)throw new t.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${u}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const h=c["@list"];return Array.isArray(h)?h.length===0?[this.rdfNil]:this.parsingContext.idStack[l+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(d),u,h,l-1,d.slice(0,-1))}else{if("@reverse"in c&&typeof c["@reverse"]=="boolean")return[];if("@graph"in tr.getContextValueContainer(await this.parsingContext.getContext(d),u)){const h=this.parsingContext.graphContainerTermStack[l+1];return h?Object.values(h):[this.dataFactory.blankNode()]}else if("@id"in c){if(Object.keys(c).length>1&&(o=await this.parsingContext.getContext(d,0)),"@context"in c&&(o=await this.parsingContext.parseContext(c["@context"],o.getContextRaw())),c["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(o,c["@id"]));{const h=c["@id"];let p;if(typeof h=="object")if(this.parsingContext.rdfstar)p=this.parsingContext.idStack[l+1][0];else throw new t.ErrorCoded(`Found illegal @id '${c}'`,t.ERROR_CODES.INVALID_ID_VALUE);else p=this.resourceToTerm(o,h);return this.nullableTermToArray(p)}}else return this.parsingContext.emittedStack[l+1]||c&&typeof c=="object"&&Object.keys(c).length===0?this.parsingContext.idStack[l+1]||(this.parsingContext.idStack[l+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(l,await this.getContextSelfOrPropertyScoped(o,u),u,c,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(l,await this.getContextSelfOrPropertyScoped(o,u),u,(!!c).toString(),this.dataFactory.namedNode(tr.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(l,await this.getContextSelfOrPropertyScoped(o,u),u,c,this.dataFactory.namedNode(c%1===0&&c<1e21?tr.XSD_INTEGER:tr.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${f}`)),[]}}async getContextSelfOrPropertyScoped(o,u){const c=o.getContextRaw()[u];return c&&typeof c=="object"&&"@context"in c&&(o=await this.parsingContext.parseContext(c,o.getContextRaw(),!0)),o}nullableTermToArray(o){return o?[o]:[]}predicateToTerm(o,u){const c=o.expandTerm(u,!0,this.parsingContext.getExpandOptions());if(!c)return null;if(c[0]==="_"&&c[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(c.substr(2)):null;if(tr.isValidIri(c))return this.dataFactory.namedNode(c);if(c&&this.parsingContext.strictValues)this.parsingContext.emitError(new t.ErrorCoded(`Invalid predicate IRI: ${c}`,t.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(o,u){if(u.startsWith("_:"))return this.dataFactory.blankNode(u.substr(2));const c=o.expandTerm(u,!1,this.parsingContext.getExpandOptions());if(!tr.isValidIri(c))if(c&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${c}`));else return null;return this.dataFactory.namedNode(c)}createVocabOrBaseTerm(o,u){if(u.startsWith("_:"))return this.dataFactory.blankNode(u.substr(2));const c=this.parsingContext.getExpandOptions();let l=o.expandTerm(u,!0,c);if(l===u&&(l=o.expandTerm(u,!1,c)),!tr.isValidIri(l))if(l&&this.parsingContext.strictValues&&!l.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${l}`));else return null;return this.dataFactory.namedNode(l)}intToString(o,u){return typeof o=="number"?Number.isFinite(o)?o%1===0&&(!u||u.value!==tr.XSD_DOUBLE)?Number(o).toString():o.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):o>0?"INF":"-INF":o}stringValueToTerm(o,u,c,l,d){const f=tr.getContextValueType(u,c);if(f)if(f==="@id"){if(!d)return this.resourceToTerm(u,this.intToString(l,d))}else if(f==="@vocab"){if(!d)return this.createVocabOrBaseTerm(u,this.intToString(l,d))}else d=this.dataFactory.namedNode(f);if(!d){const h=tr.getContextValueLanguage(u,c),p=tr.getContextValueDirection(u,c);return p&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(o,this.intToString(l,d),h,p):this.dataFactory.literal(this.intToString(l,d),h)}return this.dataFactory.literal(this.intToString(l,d),d)}createLanguageDirectionLiteral(o,u,c,l){if(this.parsingContext.rdfDirection==="i18n-datatype")return c||(c=""),this.dataFactory.literal(u,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${c}_${l}`));{const d=this.dataFactory.blankNode(),f=this.getDefaultGraph();return this.parsingContext.emitQuad(o,this.dataFactory.quad(d,this.dataFactory.namedNode(tr.RDF+"value"),this.dataFactory.literal(u),f)),c&&this.parsingContext.emitQuad(o,this.dataFactory.quad(d,this.dataFactory.namedNode(tr.RDF+"language"),this.dataFactory.literal(c),f)),this.parsingContext.emitQuad(o,this.dataFactory.quad(d,this.dataFactory.namedNode(tr.RDF+"direction"),this.dataFactory.literal(l),f)),d}}valueToJsonString(o){return n(o)}async unaliasKeyword(o,u,c,l,d){if(Number.isInteger(o))return o;if(!l){const f=this.parsingContext.unaliasedKeywordCacheStack[c];if(f)return f}if(!t.Util.isPotentialKeyword(o)){d=d||await this.parsingContext.getContext(u);let f=d.getContextRaw()[o];f&&typeof f=="object"&&(f=f["@id"]),t.Util.isValidKeyword(f)&&(o=f)}return l?o:this.parsingContext.unaliasedKeywordCacheStack[c]=o}async unaliasKeywordParent(o,u){return await this.unaliasKeyword(u>0&&o[u-1],o,u-1)}async unaliasKeywords(o,u,c,l){const d={};for(const f in o)d[await this.unaliasKeyword(f,u,c+1,!0,l)]=o[f];return d}async isLiteral(o,u){for(let c=u;c>=0;c--){if(await this.unaliasKeyword(o[c],o,c)==="@annotation")return!1;if(this.parsingContext.literalStack[c]||this.parsingContext.jsonLiteralStack[c])return!0}return!1}async getDepthOffsetGraph(o,u){for(let c=o-1;c>0;c--)if(await this.unaliasKeyword(u[c],u,c)==="@graph"){const l=(await r.EntryHandlerContainer.getContainerHandler(this.parsingContext,u,c)).containers;return r.EntryHandlerContainer.isComplexGraphContainer(l)?-1:o-c-1}return-1}validateReverseSubject(o){if(o.termType==="Literal")throw new t.ErrorCoded(`Found illegal literal in subject position: ${o.value}`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(o,u){let c=this.getDefaultGraph();const{containers:l,depth:d}=await r.EntryHandlerContainer.getContainerHandler(this.parsingContext,o,u);if("@graph"in l){const f=r.EntryHandlerContainer.getContainerGraphIndex(l,d,o),h=this.parsingContext.graphContainerTermStack[d];if(c=h?h[f]:null,!c){let p=null;if("@id"in l){const b=await this.getContainerKey(o[d],o,d);b!==null&&(p=await this.resourceToTerm(await this.parsingContext.getContext(o),b))}p||(p=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[d]||(this.parsingContext.graphContainerTermStack[d]={}),c=this.parsingContext.graphContainerTermStack[d][f]=p}}return c}async getPropertiesDepth(o,u){let c=u;for(let l=u-1;l>0;l--)if(typeof o[l]!="number"){const d=await this.unaliasKeyword(o[l],o,l);if(d==="@reverse")return l;if(d==="@nest")c=l;else return c}return c}async getContainerKey(o,u,c){const l=await this.unaliasKeyword(o,u,c);return l==="@none"?null:l}validateReverseInEmbeddedNode(o,u,c){if(c&&u&&!this.parsingContext.rdfstarReverseInEmbedded)throw new t.ErrorCoded(`Illegal reverse property in embedded node in ${o}`,t.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(o,u,c,l,d,f,h){let p;if(f?(this.validateReverseSubject(l),p=this.dataFactory.quad(l,c,u,d)):p=this.dataFactory.quad(u,c,l,d),h){if(p.graph.termType!=="DefaultGraph"&&(p=this.dataFactory.quad(p.subject,p.predicate,p.object)),this.parsingContext.idStack[o-1])throw new t.ErrorCoded("Illegal multiple properties in an embedded node",t.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[o-1]=[p]}else this.parsingContext.emitQuad(o,p);const b=this.parsingContext.annotationsBuffer[o];if(b){for(const _ of b)this.emitAnnotation(o,p,_);delete this.parsingContext.annotationsBuffer[o]}}emitAnnotation(o,u,c){let l;c.reverse?(this.validateReverseSubject(c.object),l=this.dataFactory.quad(c.object,c.predicate,u)):l=this.dataFactory.quad(u,c.predicate,c.object),this.parsingContext.emitQuad(o,l);for(const d of c.nestedAnnotations)this.emitAnnotation(o,l,d)}};return a.XSD="http://www.w3.org/2001/XMLSchema#",a.XSD_BOOLEAN=a.XSD+"boolean",a.XSD_INTEGER=a.XSD+"integer",a.XSD_DOUBLE=a.XSD+"double",a.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",mh.Util=a,mh}Object.defineProperty(Nw,"__esModule",{value:!0});Nw.EntryHandlerArrayValue=void 0;const Uye=Nl(),Q6=pn;class qye{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,r,n,a,s){return this.test(e,r,null,n,a)}async test(e,r,n,a,s){return typeof a[s]=="number"}async handle(e,r,n,a,s,o){let u=await r.unaliasKeywordParent(a,o);if(u==="@list"){let c=null,l=0;for(let d=o-2;d>0;d--){const f=a[d];if(typeof f=="string"||typeof f=="number"){l=d,c=f;break}}if(c!==null){const d=await r.valueToTerm(await e.getContext(a),c,s,o,a);for(const f of d)await this.handleListElement(e,r,f,s,o,a.slice(0,l),l);d.length===0&&await this.handleListElement(e,r,null,s,o,a.slice(0,l),l)}}else if(u==="@set")await e.newOnValueJob(a.slice(0,-2),s,o-2,!1);else if(u!==void 0&&u!=="@type"){for(let l=o-1;l>0;l--)if(typeof a[l]!="number"){u=await r.unaliasKeyword(a[l],a,l);break}const c=await e.getContext(a.slice(0,-1));if("@list"in Uye.Util.getContextValueContainer(c,u)){e.emittedStack[o+1]=!0;const l=await r.valueToTerm(await e.getContext(a),u,s,o,a);for(const d of l)await this.handleListElement(e,r,d,s,o,a.slice(0,-1),o-1);l.length===0&&await this.handleListElement(e,r,null,s,o,a.slice(0,-1),o-1)}else e.shiftStack(o,1),await e.newOnValueJob(a.slice(0,-1),s,o-1,!1),e.contextTree.removeContext(a.slice(0,-1))}}async handleListElement(e,r,n,a,s,o,u){let c=e.listPointerStack[s];if(a!==null&&(await r.unaliasKeywords(a,o,s))["@value"]!==null){if(!c||!c.value){const l=r.dataFactory.blankNode();c={value:l,listRootDepth:u,listId:l}}else{const l=r.dataFactory.blankNode();e.emitQuad(s,r.dataFactory.quad(c.value,r.rdfRest,l,r.getDefaultGraph())),c.value=l}n&&e.emitQuad(s,r.dataFactory.quad(c.value,r.rdfFirst,n,r.getDefaultGraph()))}else c||(c={listRootDepth:u,listId:r.rdfNil});e.listPointerStack[s]=c,e.rdfstar&&e.annotationsBuffer[s]&&e.emitError(new Q6.ErrorCoded("Found an illegal annotation inside a list",Q6.ERROR_CODES.INVALID_ANNOTATION))}}Nw.EntryHandlerArrayValue=qye;var Fw={};Object.defineProperty(Fw,"__esModule",{value:!0});Fw.EntryHandlerInvalidFallback=void 0;class Vye{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,r,n,a,s){return!1}async test(e,r,n,a,s){return!0}async handle(e,r,n,a,s,o){e.emittedStack[o]=!1}}Fw.EntryHandlerInvalidFallback=Vye;var Lw={},hs={};Object.defineProperty(hs,"__esModule",{value:!0});hs.EntryHandlerKeyword=void 0;class Hye{constructor(e){this.keyword=e}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,r,n,a,s){return!1}async test(e,r,n,a,s){return n===this.keyword}}hs.EntryHandlerKeyword=Hye;Object.defineProperty(Lw,"__esModule",{value:!0});Lw.EntryHandlerKeywordContext=void 0;const G6=pn,kye=hs;class Qye extends kye.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(e,r,n,a,s,o){e.streamingProfile&&(e.processingStack[o]||e.processingType[o]||e.idStack[o]!==void 0)&&e.emitError(new G6.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",G6.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const u=e.getContext(a),c=e.parseContext(s,(await u).getContextRaw());e.contextTree.setContext(a.slice(0,-1),c),e.emitContext(s),await e.validateContext(await c)}}Lw.EntryHandlerKeywordContext=Qye;var Bw={};Object.defineProperty(Bw,"__esModule",{value:!0});Bw.EntryHandlerKeywordGraph=void 0;const Gye=hs;class zye extends Gye.EntryHandlerKeyword{constructor(){super("@graph")}async handle(e,r,n,a,s,o){e.graphStack[o+1]=!0}}Bw.EntryHandlerKeywordGraph=zye;var $w={};Object.defineProperty($w,"__esModule",{value:!0});$w.EntryHandlerKeywordId=void 0;const Ss=pn,Wye=hs;class Xye extends Wye.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(e,r,n,a,s,o){if(typeof s!="string"){if(e.rdfstar&&typeof s=="object"){const c=Object.keys(s);c.length===1&&c[0]==="@id"&&e.emitError(new Ss.ErrorCoded(`Invalid embedded node without property with @id ${s["@id"]}`,Ss.ERROR_CODES.INVALID_EMBEDDED_NODE))}else e.emitError(new Ss.ErrorCoded(`Found illegal @id '${s}'`,Ss.ERROR_CODES.INVALID_ID_VALUE));return}const u=await r.getPropertiesDepth(a,o);if(e.idStack[u]!==void 0&&(e.idStack[u][0].listHead?e.emitError(new Ss.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${a[o-1]}'`,Ss.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):e.emitError(new Ss.ErrorCoded(`Found duplicate @ids '${e.idStack[u][0].value}' and '${s}'`,Ss.ERROR_CODES.COLLIDING_KEYWORDS))),e.rdfstar&&e.annotationsBuffer[o])for(const c of e.annotationsBuffer[o])c.depth===o&&e.emitError(new Ss.ErrorCoded(`Found an illegal @id inside an annotation: ${s}`,Ss.ERROR_CODES.INVALID_ANNOTATION));e.idStack[u]=r.nullableTermToArray(await r.resourceToTerm(await e.getContext(a),s))}}$w.EntryHandlerKeywordId=Xye;var Uw={};Object.defineProperty(Uw,"__esModule",{value:!0});Uw.EntryHandlerKeywordIncluded=void 0;const rd=pn,Kye=hs;class Jye extends Kye.EntryHandlerKeyword{constructor(){super("@included")}async handle(e,r,n,a,s,o){typeof s!="object"&&e.emitError(new rd.ErrorCoded(`Found illegal @included '${s}'`,rd.ERROR_CODES.INVALID_INCLUDED_VALUE));const u=await r.unaliasKeywords(s,a,o,await e.getContext(a));"@value"in u&&e.emitError(new rd.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(s)}'`,rd.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in u&&e.emitError(new rd.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(s)}'`,rd.ERROR_CODES.INVALID_INCLUDED_VALUE)),e.emittedStack[o]=!1}}Uw.EntryHandlerKeywordIncluded=Jye;var qw={};Object.defineProperty(qw,"__esModule",{value:!0});qw.EntryHandlerKeywordNest=void 0;const P1=pn,Yye=hs;class Zye extends Yye.EntryHandlerKeyword{constructor(){super("@nest")}async handle(e,r,n,a,s,o){typeof s!="object"&&e.emitError(new P1.ErrorCoded(`Found invalid @nest entry for '${n}': '${s}'`,P1.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await r.unaliasKeywords(s,a,o,await e.getContext(a))&&e.emitError(new P1.ErrorCoded(`Found an invalid @value node for '${n}'`,P1.ERROR_CODES.INVALID_NEST_VALUE)),e.emittedStack[o]=!1}}qw.EntryHandlerKeywordNest=Zye;var Vw={};Object.defineProperty(Vw,"__esModule",{value:!0});Vw.EntryHandlerKeywordType=void 0;const Eh=pn,D1=Nl(),e1e=Cw(),t1e=hs;class r1e extends t1e.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(e,r,n,a,s,o){const u=a[o],c=await e.getContext(a),l=r.rdfType,d=await r.unaliasKeywordParent(a,o),f=D1.Util.isPropertyReverse(c,u,d),h=D1.Util.isPropertyInEmbeddedNode(d);r.validateReverseInEmbeddedNode(n,f,h);const p=D1.Util.isPropertyInAnnotationObject(d),b=Array.isArray(s)?s:[s];for(const w of b){typeof w!="string"&&e.emitError(new Eh.ErrorCoded(`Found illegal @type '${w}'`,Eh.ERROR_CODES.INVALID_TYPE_VALUE));const O=r.createVocabOrBaseTerm(c,w);O&&await e1e.EntryHandlerPredicate.handlePredicateObject(e,r,a,o,l,O,f,h,p)}let _=Promise.resolve(c),E=!1;for(const w of b.sort()){const O=D1.Util.getContextValue(c,"@context",w,null);O&&(E=!0,_=_.then(A=>e.parseContext(O,A.getContextRaw())))}e.streamingProfile&&(E||!e.streamingProfileAllowOutOfOrderPlainType)&&(e.processingStack[o]||e.idStack[o])&&e.emitError(new Eh.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",Eh.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),E&&(_=_.then(w=>w.getContextRaw()["@propagate"]!==!0?new Eh.JsonLdContextNormalized(Object.assign(Object.assign({},w.getContextRaw()),{"@propagate":!1,"@__propagateFallback":c.getContextRaw()})):w),e.contextTree.setContext(a.slice(0,a.length-1),_)),e.processingType[o]=!0}}Vw.EntryHandlerKeywordType=r1e;var Hw={};Object.defineProperty(Hw,"__esModule",{value:!0});Hw.EntryHandlerKeywordUnknownFallback=void 0;const lp=pn;class kw{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,r,n,a,s){const o=await r.unaliasKeyword(n[a],n,a);return lp.Util.isPotentialKeyword(o)?!(!s&&o==="@list"):!1}async test(e,r,n,a,s){return lp.Util.isPotentialKeyword(n)}async handle(e,r,n,a,s,o){const u=kw.VALID_KEYWORDS_TYPES[n];u!==void 0?u&&typeof s!==u.type&&e.emitError(new lp.ErrorCoded(`Invalid value type for '${n}' with value '${s}'`,u.errorCode)):e.strictValues&&e.emitError(new Error(`Unknown keyword '${n}' with value '${s}'`)),e.emittedStack[o]=!1}}kw.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:lp.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:lp.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null};Hw.EntryHandlerKeywordUnknownFallback=kw;var Qw={};Object.defineProperty(Qw,"__esModule",{value:!0});Qw.EntryHandlerKeywordValue=void 0;const n1e=hs;class i1e extends n1e.EntryHandlerKeyword{constructor(){super("@value")}async validate(e,r,n,a,s){const o=n[a];return o&&!e.literalStack[a]&&await this.test(e,r,o,n,a)&&(e.literalStack[a]=!0),super.validate(e,r,n,a,s)}async test(e,r,n,a,s){return await r.unaliasKeyword(a[s],a.slice(0,a.length-1),s-1,!0)==="@value"}async handle(e,r,n,a,s,o){e.literalStack[o]=!0,delete e.unidentifiedValuesBuffer[o],delete e.unidentifiedGraphsBuffer[o],e.emittedStack[o]=!1}}Qw.EntryHandlerKeywordValue=i1e;var Oh={},Gw={};Object.defineProperty(Gw,"__esModule",{value:!0});Gw.ContextTree=void 0;class NR{constructor(){this.subTrees={}}getContext(e){if(e.length>0){const[r,...n]=e,a=this.subTrees[r];if(a){const s=a.getContext(n);if(s)return s.then(({context:o,depth:u})=>({context:o,depth:u+1}))}}return this.context?this.context.then(r=>({context:r,depth:0})):null}setContext(e,r){if(e.length===0)this.context=r;else{const[n,...a]=e;let s=this.subTrees[n];s||(s=this.subTrees[n]=new NR),s.setContext(a,r)}}removeContext(e){this.setContext(e,null)}}Gw.ContextTree=NR;var z6;function a1e(){if(z6)return Oh;z6=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.ParsingContext=void 0;const t=pn,e=Nf,r=Gw,n=EB();let a=class TB{constructor(o){this.contextParser=new t.ContextParser({documentLoader:o.documentLoader,skipValidation:o.skipContextValidation}),this.streamingProfile=!!o.streamingProfile,this.baseIRI=o.baseIRI,this.produceGeneralizedRdf=!!o.produceGeneralizedRdf,this.allowSubjectList=!!o.allowSubjectList,this.processingMode=o.processingMode||n.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!o.strictValues,this.validateValueIndexes=!!o.validateValueIndexes,this.defaultGraph=o.defaultGraph,this.rdfDirection=o.rdfDirection,this.normalizeLanguageTags=o.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=o.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=o.rdfstar!==!1,this.rdfstarReverseInEmbedded=o.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new r.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=o.parser,o.context?(this.rootContext=this.parseContext(o.context),this.rootContext.then(u=>this.validateContext(u))):this.rootContext=Promise.resolve(new t.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(o,u,c){return this.contextParser.parse(o,{baseIRI:this.baseIRI,ignoreProtection:c,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:u,processingMode:this.activeProcessingMode})}validateContext(o){const u=o.getContextRaw()["@version"];if(u){if(this.activeProcessingMode&&u>this.activeProcessingMode)throw new e.ErrorCoded(`Unsupported JSON-LD version '${u}' under active processing mode ${this.activeProcessingMode}.`,e.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&u<this.activeProcessingMode)throw new e.ErrorCoded(`Invalid JSON-LD version ${u} under active processing mode ${this.activeProcessingMode}.`,e.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=u}}async getContext(o,u=1){const c=o;for(;typeof o[o.length-1]=="number";)o=o.slice(0,o.length-1);u&&(o=o.slice(0,-u));const l=await this.getContextPropagationAware(o);let f=l.context.getContextRaw();for(let h=l.depth;h<c.length-u;h++){const p=c[h],b=f[p];if(b&&typeof b=="object"&&"@context"in b){const _=(await this.parseContext(b,f,!0)).getContextRaw(),E=!(p in _)||_[p]["@context"]["@propagate"];(E!==!1||h===c.length-1-u)&&(f=Object.assign({},_),delete f["@propagate"],f[p]=Object.assign({},f[p]),"@id"in b&&(f[p]["@id"]=b["@id"]),delete f[p]["@context"],E!==!1&&this.contextTree.setContext(c.slice(0,h+u),Promise.resolve(new t.JsonLdContextNormalized(f))))}}return new t.JsonLdContextNormalized(f)}async getContextPropagationAware(o){const u=o.length;let c=null,l;do{l=!1,c&&"@__propagateFallback"in c.context.getContextRaw()?c.context=new t.JsonLdContextNormalized(c.context.getContextRaw()["@__propagateFallback"]):(c&&(o=o.slice(0,c.depth-1)),c=await this.contextTree.getContext(o)||{context:await this.rootContext,depth:0});const d=o[o.length-1];if(d in c.context.getContextRaw()){const f=c.context.getContextRaw()[d];f&&typeof f=="object"&&"@context"in f&&(l=!0)}}while(c.depth>0&&c.context.getContextRaw()["@propagate"]===!1&&c.depth!==u&&!l);return c.depth===0&&c.context.getContextRaw()["@propagate"]===!1&&c.depth!==u&&(c.context=new t.JsonLdContextNormalized({})),c}async newOnValueJob(o,u,c,l){await this.parser.newOnValueJob(o,u,c,l)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const o of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(o.depth,o.keys),this.parser.flushStacks(o.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(o,u){o===1&&(this.topLevelProperties=!0),this.parser.push(u)}emitError(o){this.parser.emit("error",o)}emitContext(o){this.parser.emit("context",o)}getUnidentifiedValueBufferSafe(o){let u=this.unidentifiedValuesBuffer[o];return u||(u=[],this.unidentifiedValuesBuffer[o]=u),u}getUnidentifiedGraphBufferSafe(o){let u=this.unidentifiedGraphsBuffer[o];return u||(u=[],this.unidentifiedGraphsBuffer[o]=u),u}getAnnotationsBufferSafe(o){let u=this.annotationsBuffer[o];return u||(u=[],this.annotationsBuffer[o]=u),u}getExpandOptions(){return TB.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(o,u){const c=this.idStack[o+u];if(c&&(this.idStack[o]=c,this.emittedStack[o]=!0,delete this.idStack[o+u]),this.pendingContainerFlushBuffers.length)for(const l of this.pendingContainerFlushBuffers)l.depth>=o+u&&(l.depth-=u,l.keys.splice(o,u));this.unidentifiedValuesBuffer[o+u]&&(this.unidentifiedValuesBuffer[o]=this.unidentifiedValuesBuffer[o+u],delete this.unidentifiedValuesBuffer[o+u]),this.annotationsBuffer[o+u-1]&&(this.annotationsBuffer[o-1]||(this.annotationsBuffer[o-1]=[]),this.annotationsBuffer[o-1]=[...this.annotationsBuffer[o-1],...this.annotationsBuffer[o+u-1]],delete this.annotationsBuffer[o+u-1])}};return a.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},Oh.ParsingContext=a,Oh}var zw={};Object.defineProperty(zw,"__esModule",{value:!0});zw.EntryHandlerKeywordAnnotation=void 0;const s1e=hs,W6=pn;class o1e extends s1e.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(e,r,n,a,s,o){(typeof s=="string"||typeof s=="object"&&s["@value"])&&e.emitError(new W6.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(s)}`,W6.ERROR_CODES.INVALID_ANNOTATION))}}zw.EntryHandlerKeywordAnnotation=o1e;var X6;function EB(){if(X6)return gh;X6=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.JsonLdParser=void 0;const t=GM,e=pn,r=Xt,n=Nw,a=SB(),s=Fw,o=Cw(),u=Lw,c=Bw,l=$w,d=Uw,f=qw,h=Vw,p=Hw,b=Qw,_=a1e(),E=Nl(),w=A9,O=zw;let A=class dd extends r.Transform{constructor(I){super({readableObjectMode:!0}),I=I||{},this.options=I,this.parsingContext=new _.ParsingContext(Object.assign({parser:this},I)),this.util=new E.Util({dataFactory:I.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new t,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(I,D,U,H){let N;if(D!=="application/ld+json"){if(D!=="application/json"&&!D.endsWith("+json"))throw new e.ErrorCoded(`Unsupported JSON-LD media type ${D}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(U&&U.has("Link")&&U.forEach((F,X)=>{if(X==="link"){const ne=(0,w.parse)(F);for(const $ of ne.get("rel","http://www.w3.org/ns/json-ld#context")){if(N)throw new e.ErrorCoded("Multiple JSON-LD context link headers were found on "+I,e.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);N=$.uri}}}),!N&&!(H!=null&&H.ignoreMissingContextLinkHeader))throw new e.ErrorCoded(`Missing context link header for media type ${D} on ${I}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let R;if(U&&U.has("Content-Type")){const F=U.get("Content-Type"),X=/; *profile=([^"]*)/.exec(F);X&&X[1]==="http://www.w3.org/ns/json-ld#streaming"&&(R=!0)}return new dd(Object.assign({baseIRI:I,context:N,streamingProfile:R},H||{}))}import(I){if("pipe"in I){I.on("error",U=>D.emit("error",U));const D=I.pipe(new dd(this.options));return D}else{const D=new r.PassThrough({readableObjectMode:!0});I.on("error",H=>U.emit("error",H)),I.on("data",H=>D.push(H)),I.on("end",()=>D.push(null));const U=D.pipe(new dd(this.options));return U}}_transform(I,D,U){this.jsonParser.write(I),this.lastOnValueJob.then(()=>U(),H=>U(H))}async newOnValueJob(I,D,U,H){let N=!0;if(H&&U<this.lastDepth){const $=this.parsingContext.listPointerStack[this.lastDepth];$&&($.value&&this.push(this.util.dataFactory.quad($.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),$.listId.listHead=!0,this.parsingContext.idStack[$.listRootDepth+1]=[$.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await a.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),N=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const R=await this.util.unaliasKeyword(I[U],I,U),F=await this.util.unaliasKeywordParent(I,U);this.parsingContext.emittedStack[U]=!0;let X=!0;e.Util.isValidKeyword(R)&&F==="@reverse"&&R!=="@context"&&this.emit("error",new e.ErrorCoded(`Found the @id '${D}' inside an @reverse property`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let ne=!1;this.parsingContext.validationStack.length>1&&(ne=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let $=Math.max(1,this.parsingContext.validationStack.length-1);$<I.length-1;$++){const C=this.parsingContext.validationStack[$]||(this.parsingContext.validationStack[$]=await this.validateKey(I.slice(0,$+1),$,ne));if(C.valid)!ne&&C.property&&(ne=!0);else{this.parsingContext.emittedStack[U]=!1,X=!1;break}}if(await this.util.isLiteral(I,U)&&(X=!1),X)for(const $ of dd.ENTRY_HANDLERS){const C=await $.test(this.parsingContext,this.util,R,I,U);if(C){await $.handle(this.parsingContext,this.util,R,I,D,U,C),$.isStackProcessor()&&(this.parsingContext.processingStack[U]=!0);break}}U===0&&Array.isArray(D)&&await this.util.validateValueIndexes(D),N&&U<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=U,this.lastKeys=I,this.parsingContext.unaliasedKeywordCacheStack.splice(U-1)}flushStacks(I){this.parsingContext.processingStack.splice(I,1),this.parsingContext.processingType.splice(I,1),this.parsingContext.emittedStack.splice(I,1),this.parsingContext.idStack.splice(I,1),this.parsingContext.graphStack.splice(I+1,1),this.parsingContext.graphContainerTermStack.splice(I,1),this.parsingContext.jsonLiteralStack.splice(I,1),this.parsingContext.validationStack.splice(I-1,2),this.parsingContext.literalStack.splice(I,this.parsingContext.literalStack.length-I),this.parsingContext.annotationsBuffer.splice(I,1)}async flushBuffer(I,D){let U=this.parsingContext.idStack[I];!!U||(U=this.parsingContext.idStack[I]=[this.util.dataFactory.blankNode()]);const N=this.parsingContext.unidentifiedValuesBuffer[I];if(N){for(const X of U){const ne=await this.util.getDepthOffsetGraph(I,D),$=this.parsingContext.graphStack[I]||ne>=0?this.parsingContext.idStack[I-ne-1]:[await this.util.getGraphContainerValue(D,I)];if($)for(const C of $){this.parsingContext.emittedStack[I]=!0;for(const Q of N)this.util.emitQuadChecked(I,X,Q.predicate,Q.object,C,Q.reverse,Q.isEmbedded)}else{const C=this.parsingContext.getUnidentifiedGraphBufferSafe(I-await this.util.getDepthOffsetGraph(I,D)-1);for(const Q of N)Q.reverse?C.push({object:X,predicate:Q.predicate,subject:Q.object,isEmbedded:Q.isEmbedded}):C.push({object:Q.object,predicate:Q.predicate,subject:X,isEmbedded:Q.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(I,1),this.parsingContext.literalStack.splice(I,1),this.parsingContext.jsonLiteralStack.splice(I,1)}const R=this.parsingContext.unidentifiedGraphsBuffer[I];if(R){for(const X of U){const ne=I===1&&X.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():X;this.parsingContext.emittedStack[I]=!0;for(const $ of R)this.parsingContext.emitQuad(I,this.util.dataFactory.quad($.subject,$.predicate,$.object,ne))}this.parsingContext.unidentifiedGraphsBuffer.splice(I,1)}const F=this.parsingContext.annotationsBuffer[I];if(F){F.length>0&&I===1&&this.parsingContext.emitError(new e.ErrorCoded("Annotations can not be made on top-level nodes",e.ERROR_CODES.INVALID_ANNOTATION));const X=this.parsingContext.getAnnotationsBufferSafe(I-1);for(const ne of F)X.push(ne);delete this.parsingContext.annotationsBuffer[I]}}async validateKey(I,D,U){for(const H of dd.ENTRY_HANDLERS)if(await H.validate(this.parsingContext,this.util,I,D,U))return{valid:!0,property:U||H.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=I=>{const D=this.jsonParser.stack.length,U=new Array(D+1).fill(0).map((H,N)=>N===D?this.jsonParser.key:this.jsonParser.stack[N].key);if(!this.isParsingContextInner(D)){const H=()=>this.newOnValueJob(U,I,D,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(U.slice(0,-1)))if(U[D]==="@context"){let N=this.contextJobs[D];N||(N=this.contextJobs[D]=[]),N.push(H)}else this.contextAwaitingJobs.push({job:H,keys:U,depth:D});else this.lastOnValueJob=this.lastOnValueJob.then(H);!this.parsingContext.streamingProfile&&D===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=I=>{this.emit("error",I)}}isParsingContextInner(I){for(let D=I;D>0;D--)if(this.jsonParser.stack[D-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const D of this.contextJobs)if(D)for(const U of D)await U();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const I=[];for(const D of this.contextAwaitingJobs)await this.util.unaliasKeyword(D.keys[D.depth],D.keys,D.depth,!0)==="@type"||typeof D.keys[D.depth]=="number"&&await this.util.unaliasKeyword(D.keys[D.depth-1],D.keys,D.depth-1,!0)==="@type"?this.typeJobs.push({job:D.job,keys:D.keys.slice(0,D.keys.length-1)}):I.push(D);for(const D of I){if(this.typeJobs.length>0){const U=[],H=[];for(let F=0;F<this.typeJobs.length;F++){const X=this.typeJobs[F];E.Util.isPrefixArray(X.keys,D.keys)&&(U.push(X),H.push(F))}const N=U.sort((F,X)=>F.keys.length-X.keys.length);for(const F of N)await F.job();const R=H.sort().reverse();for(const F of R)this.typeJobs.splice(F,1)}await D.job()}}};return A.DEFAULT_PROCESSING_MODE="1.1",A.ENTRY_HANDLERS=[new n.EntryHandlerArrayValue,new u.EntryHandlerKeywordContext,new l.EntryHandlerKeywordId,new d.EntryHandlerKeywordIncluded,new c.EntryHandlerKeywordGraph,new f.EntryHandlerKeywordNest,new h.EntryHandlerKeywordType,new b.EntryHandlerKeywordValue,new O.EntryHandlerKeywordAnnotation,new a.EntryHandlerContainer,new p.EntryHandlerKeywordUnknownFallback,new o.EntryHandlerPredicate,new s.EntryHandlerInvalidFallback],gh.JsonLdParser=A,gh}(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(EB(),t)})(vB);var oy={};Object.defineProperty(oy,"__esModule",{value:!0});oy.DocumentLoaderMediated=void 0;const u1e=ls,c1e=pn,l1e=Al;class jR extends c1e.FetchDocumentLoader{constructor(e,r){super(jR.createFetcher(e,r)),this.mediatorHttp=e,this.context=r}static createFetcher(e,r){return async(n,a)=>{const s=await e.mediate({input:n,init:a,context:r});return s.json=async()=>JSON.parse(await l1e(u1e.ActorHttp.toNodeReadable(s.body))),s}}}oy.DocumentLoaderMediated=jR;Object.defineProperty(Dw,"__esModule",{value:!0});Dw.ActorRdfParseJsonLd=void 0;const d1e=El,N1=Ut,f1e=vB,h1e=oy;class p1e extends d1e.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async testHandle(e,r,n){if(n.has(N1.KeysRdfParseHtmlScript.processingHtmlScript)&&r!=="application/ld+json")throw new Error("JSON-LD in script tags can only have media type 'application/ld+json'");if(!r||!(r in this.mediaTypePriorities||r.endsWith("+json")))throw new Error(`Unrecognized media type: ${r}`);return await this.testHandleChecked(e)}async runHandle(e,r,n){var o;return{data:f1e.JsonLdParser.fromHttpResponse(((o=e.metadata)==null?void 0:o.baseIRI)??"",r,e.headers,{documentLoader:n.get(N1.KeysRdfParseJsonLd.documentLoader)||new h1e.DocumentLoaderMediated(this.mediatorHttp,n),strictValues:n.get(N1.KeysRdfParseJsonLd.strictValues),...n.get(N1.KeysRdfParseJsonLd.parserOptions)}).import(e.data)}}}Dw.ActorRdfParseJsonLd=p1e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Dw,t),r(oy,t)})(mB);var OB={},Ww={},Xw={},Kw={},Jw={};(function(){(function(t){(function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(N){return N&&DataView.prototype.isPrototypeOf(N)}if(r.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(N){return N&&a.indexOf(Object.prototype.toString.call(N))>-1};function o(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(N))throw new TypeError("Invalid character in header field name");return N.toLowerCase()}function u(N){return typeof N!="string"&&(N=String(N)),N}function c(N){var R={next:function(){var F=N.shift();return{done:F===void 0,value:F}}};return r.iterable&&(R[Symbol.iterator]=function(){return R}),R}function l(N){this.map={},N instanceof l?N.forEach(function(R,F){this.append(F,R)},this):Array.isArray(N)?N.forEach(function(R){this.append(R[0],R[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(R){this.append(R,N[R])},this)}l.prototype.append=function(N,R){N=o(N),R=u(R);var F=this.map[N];this.map[N]=F?F+", "+R:R},l.prototype.delete=function(N){delete this.map[o(N)]},l.prototype.get=function(N){return N=o(N),this.has(N)?this.map[N]:null},l.prototype.has=function(N){return this.map.hasOwnProperty(o(N))},l.prototype.set=function(N,R){this.map[o(N)]=u(R)},l.prototype.forEach=function(N,R){for(var F in this.map)this.map.hasOwnProperty(F)&&N.call(R,this.map[F],F,this)},l.prototype.keys=function(){var N=[];return this.forEach(function(R,F){N.push(F)}),c(N)},l.prototype.values=function(){var N=[];return this.forEach(function(R){N.push(R)}),c(N)},l.prototype.entries=function(){var N=[];return this.forEach(function(R,F){N.push([F,R])}),c(N)},r.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);function d(N){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}function f(N){return new Promise(function(R,F){N.onload=function(){R(N.result)},N.onerror=function(){F(N.error)}})}function h(N){var R=new FileReader,F=f(R);return R.readAsArrayBuffer(N),F}function p(N){var R=new FileReader,F=f(R);return R.readAsText(N),F}function b(N){for(var R=new Uint8Array(N),F=new Array(R.length),X=0;X<R.length;X++)F[X]=String.fromCharCode(R[X]);return F.join("")}function _(N){if(N.slice)return N.slice(0);var R=new Uint8Array(N.byteLength);return R.set(new Uint8Array(N)),R.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(N){this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:r.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:r.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():r.arrayBuffer&&r.blob&&n(N)?(this._bodyArrayBuffer=_(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||s(N))?this._bodyArrayBuffer=_(N):this._bodyText=N=Object.prototype.toString.call(N):this._bodyText="",this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var N=d(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var N=d(this);if(N)return N;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(b(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function O(N){var R=N.toUpperCase();return w.indexOf(R)>-1?R:N}function A(N,R){R=R||{};var F=R.body;if(N instanceof A){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,R.headers||(this.headers=new l(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!F&&N._bodyInit!=null&&(F=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new l(R.headers)),this.method=O(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&F)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(F)}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})};function T(N){var R=new FormData;return N.trim().split("&").forEach(function(F){if(F){var X=F.split("="),ne=X.shift().replace(/\+/g," "),$=X.join("=").replace(/\+/g," ");R.append(decodeURIComponent(ne),decodeURIComponent($))}}),R}function I(N){var R=new l,F=N.replace(/\r?\n[\t ]+/g," ");return F.split(/\r?\n/).forEach(function(X){var ne=X.split(":"),$=ne.shift().trim();if($){var C=ne.join(":").trim();R.append($,C)}}),R}E.call(A.prototype);function D(N,R){R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in R?R.statusText:"OK",this.headers=new l(R.headers),this.url=R.url||"",this._initBody(N)}E.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},D.error=function(){var N=new D(null,{status:0,statusText:""});return N.type="error",N};var U=[301,302,303,307,308];D.redirect=function(N,R){if(U.indexOf(R)===-1)throw new RangeError("Invalid status code");return new D(null,{status:R,headers:{location:N}})},e.DOMException=t.DOMException;try{new e.DOMException}catch{e.DOMException=function(R,F){this.message=R,this.name=F;var X=Error(R);this.stack=X.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function H(N,R){return new Promise(function(F,X){var ne=new A(N,R);if(ne.signal&&ne.signal.aborted)return X(new e.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function C(){$.abort()}$.onload=function(){var Q={status:$.status,statusText:$.statusText,headers:I($.getAllResponseHeaders()||"")};Q.url="responseURL"in $?$.responseURL:Q.headers.get("X-Request-URL");var se="response"in $?$.response:$.responseText;F(new D(se,Q))},$.onerror=function(){X(new TypeError("Network request failed"))},$.ontimeout=function(){X(new TypeError("Network request failed"))},$.onabort=function(){X(new e.DOMException("Aborted","AbortError"))},$.open(ne.method,ne.url,!0),ne.credentials==="include"?$.withCredentials=!0:ne.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&r.blob&&($.responseType="blob"),ne.headers.forEach(function(Q,se){$.setRequestHeader(se,Q)}),ne.signal&&(ne.signal.addEventListener("abort",C),$.onreadystatechange=function(){$.readyState===4&&ne.signal.removeEventListener("abort",C)}),$.send(typeof ne._bodyInit>"u"?null:ne._bodyInit)})}return H.polyfill=!0,t.fetch||(t.fetch=H,t.Headers=l,t.Request=A,t.Response=D),e.Headers=l,e.Request=A,e.Response=D,e.fetch=H,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:g)})();var AB={},Yw={};Object.defineProperty(Yw,"__esModule",{value:!0});Yw.SparqlXmlParser=void 0;const y1e=ft,K6=cl,b1e=Xt;class _1e{constructor(e){e=e||{},this.dataFactory=e.dataFactory||new y1e.DataFactory,this.prefixVariableQuestionMark=!!e.prefixVariableQuestionMark}parseXmlResultsStream(e){const r=_=>b.emit("error",_);e.on("error",r);const n=new K6.SaxesParser,a=[];let s=!1,o=!1;const u=[];let c={},l="",d="",f,h="",p=[];n.on("error",r),n.on("opentag",_=>{_.name==="variable"&&this.stackEquals(a,["sparql","head"])?u.push(this.dataFactory.variable(_.attributes.name)):_.name==="results"&&this.stackEquals(a,["sparql"])?o=!0:_.name==="result"&&this.stackEquals(a,["sparql","results"])?c={}:_.name==="binding"&&this.stackEquals(a,["sparql","results","result"])?(l=_.attributes.name||"",d="",f="",h="",p=[]):_.name==="triple"&&this.stackBeginsWith(a,["sparql","results","result"])?p.push({components:{}}):a[a.length-1]==="triple"&&this.stackBeginsWith(a,["sparql","results","result","binding"])?(d="",f="",h="",["subject","predicate","object"].includes(_.name)?p[p.length-1].currentComponent=_.name:r(new Error(`Illegal quoted triple component '${_.name}' found on line ${n.line+1}`))):this.stackBeginsWith(a,["sparql","results","result","binding"])&&(d=_.name,"xml:lang"in _.attributes?f=_.attributes["xml:lang"]:"datatype"in _.attributes?f=this.dataFactory.namedNode(_.attributes.datatype):f=void 0),a.push(_.name)}),n.on("closetag",_=>{if(this.stackEquals(a,["sparql","head"])&&(b.emit("variables",u),s=!0),this.stackEquals(a,["sparql","results","result"])&&b.push(c),this.stackBeginsWith(a,["sparql","results","result","binding"])){let E;if(!l&&d)r(new Error(`Terms should have a name on line ${n.line+1}`));else if(d==="uri")E=this.dataFactory.namedNode(h);else if(d==="bnode")E=this.dataFactory.blankNode(h);else if(d==="literal")E=this.dataFactory.literal(h,f);else if(a[a.length-1]==="triple"){const w=p.pop();w&&w.components.subject&&w.components.predicate&&w.components.object?E=this.dataFactory.quad(w.components.subject,w.components.predicate,w.components.object):r(new Error(`Incomplete quoted triple on line ${n.line+1}`))}else d&&r(new Error(`Invalid term type '${d}' on line ${n.line+1}`));if(E)if(p.length>0){const w=p[p.length-1];w.components[w.currentComponent]&&r(new Error(`The ${w.currentComponent} in a quoted triple on line ${n.line+1} was already defined before`)),w.components[w.currentComponent]=E}else{const w=this.prefixVariableQuestionMark?"?"+l:l;c[w]=E}d=void 0}a.pop()}),n.on("text",_=>{this.stackBeginsWith(a,["sparql","results","result","binding"])&&a[a.length-1]===d&&(h=_)});const b=e.on("end",_=>{o?s||b.emit("variables",[]):b.emit("error",new Error("No valid SPARQL query results were found."))}).pipe(new b1e.Transform({objectMode:!0,transform(_,E,w){n.write(_),w()}}));return b}parseXmlBooleanStream(e){return new Promise((r,n)=>{const a=new K6.SaxesParser,s=[];a.on("error",n),a.on("opentag",o=>{s.push(o.name)}),a.on("closetag",o=>{s.pop()}),a.on("text",o=>{this.stackEquals(s,["sparql","boolean"])&&r(o==="true")}),e.on("error",n).on("data",o=>a.write(o)).on("end",()=>n(new Error("No valid ASK response was found.")))})}stackEquals(e,r){return e.length===r.length&&e.every((n,a)=>r[a]===n)}stackBeginsWith(e,r){return e.length>=r.length&&r.every((n,a)=>e[a]===n)}}Yw.SparqlXmlParser=_1e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Yw,t)})(AB);Object.defineProperty(Jw,"__esModule",{value:!0});Jw.SparqlEndpointFetcher=void 0;const J6=Wg,Y6=_0,g1e=Ix,m1e=AB,v1e=Al,w1e=N0,S1e=tu,T1e=TF;class Bi{constructor(e){e=e||{},this.method=e.method||"POST",this.additionalUrlParams=e.additionalUrlParams||new URLSearchParams,this.defaultHeaders=e.defaultHeaders||new Headers,this.fetchCb=e.fetch,this.sparqlJsonParser=new g1e.SparqlJsonParser(e),this.sparqlXmlParser=new m1e.SparqlXmlParser(e),this.sparqlParsers={[Bi.CONTENTTYPE_SPARQL_JSON]:{parseBooleanStream:r=>this.sparqlJsonParser.parseJsonBooleanStream(r),parseResultsStream:r=>this.sparqlJsonParser.parseJsonResultsStream(r)},[Bi.CONTENTTYPE_SPARQL_XML]:{parseBooleanStream:r=>this.sparqlXmlParser.parseXmlBooleanStream(r),parseResultsStream:r=>this.sparqlXmlParser.parseXmlResultsStream(r)}},this.timeout=e.timeout}getQueryType(e){const r=new Y6.Parser({sparqlStar:!0}).parse(e);return r.type==="query"?r.queryType==="DESCRIBE"?"CONSTRUCT":r.queryType:"UNKNOWN"}getUpdateTypes(e){const r=new Y6.Parser({sparqlStar:!0}).parse(e);if(r.type==="update"){const n={};for(const a of r.updates)"type"in a?n[a.type]=!0:n[a.updateType]=!0;return n}else return"UNKNOWN"}async fetchBindings(e,r){const[n,a]=await this.fetchRawStream(e,r,Bi.CONTENTTYPE_SPARQL),s=this.sparqlParsers[n];if(!s)throw new Error("Unknown SPARQL results content type: "+n);return s.parseResultsStream(a)}async fetchAsk(e,r){const[n,a]=await this.fetchRawStream(e,r,Bi.CONTENTTYPE_SPARQL),s=this.sparqlParsers[n];if(!s)throw new Error("Unknown SPARQL results content type: "+n);return s.parseBooleanStream(a)}async fetchTriples(e,r){return(await this.fetchRawStream(e,r,Bi.CONTENTTYPE_TURTLE))[1].pipe(new S1e.StreamParser({format:Bi.CONTENTTYPE_TURTLE}))}async fetchUpdate(e,r){const n=new J6.default,a={};this.defaultHeaders.forEach((o,u)=>{a[u]=o});const s={method:"POST",headers:Object.assign(Object.assign({},a),{"content-type":"application/sparql-update"}),body:r,signal:n.signal};await this.handleFetchCall(e,s,{ignoreBody:!0}),n.abort()}async fetchRawStream(e,r,n){let a=this.method==="POST"?e:e+"?query="+encodeURIComponent(r);const s=new Headers(this.defaultHeaders);let o;return s.append("Accept",n),this.method==="POST"?(s.append("Content-Type","application/x-www-form-urlencoded"),o=new URLSearchParams,o.set("query",r),this.additionalUrlParams.forEach((u,c)=>{o.set(c,u)}),s.append("Content-Length",o.toString().length.toString())):this.additionalUrlParams.toString()!==""&&(a+=`&${this.additionalUrlParams.toString()}`),this.handleFetchCall(a,{headers:s,method:this.method,body:o})}async handleFetchCall(e,r,n={}){let a;if(this.timeout){const c=new J6.default;r.signal=c.signal,a=setTimeout(()=>c.abort(),this.timeout)}const s=await(this.fetchCb||fetch)(e,r);clearTimeout(a);let o;n.ignoreBody||(o=T1e(s.body)?s.body:new w1e.ReadableWebToNodeStream(s.body));let u=s.headers.get("Content-Type")||"";if(u.indexOf(";")>0&&(u=u.substr(0,u.indexOf(";"))),!s.ok){const c=/^[^?]*/u.exec(e)[0];let l="empty response";throw o&&(l=await v1e(o)),new Error(`Invalid SPARQL endpoint response from ${c} (HTTP status ${s.status}):
${l}`)}return[u,o]}}Bi.CONTENTTYPE_SPARQL_JSON="application/sparql-results+json";Bi.CONTENTTYPE_SPARQL_XML="application/sparql-results+xml";Bi.CONTENTTYPE_SPARQL=`${Bi.CONTENTTYPE_SPARQL_JSON};q=1.0,${Bi.CONTENTTYPE_SPARQL_XML};q=0.7`;Bi.CONTENTTYPE_TURTLE="text/turtle";Jw.SparqlEndpointFetcher=Bi;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Jw,t)})(Kw);Object.defineProperty(Xw,"__esModule",{value:!0});Xw.RdfSourceSparql=void 0;const E1e=$n,Z6=Ht,O1e=Kw,A1e=fs,x1e=ft,nd=an,$O=gt,Mc=new x1e.DataFactory,R1e=new E1e.BindingsFactory,I1e=Mc.variable("count");class vn{constructor(e,r,n,a,s){this.url=e,this.context=r,this.mediatorHttp=n,this.endpointFetcher=new O1e.SparqlEndpointFetcher({method:a?"GET":"POST",fetch:(o,u)=>this.mediatorHttp.mediate({input:o,init:u,context:this.context}),prefixVariableQuestionMark:!0}),this.cache=s>0?new A1e.LRUCache({max:s}):void 0}static replaceBlankNodes(e){const r=(0,nd.getVariables)((0,nd.getTerms)(e)).map(o=>o.value),n={};let a=!1;const s=(0,nd.mapTermsNested)(e,o=>{if(o.termType==="BlankNode"){let u=o.value;if(n[u])u=n[u];else{if(r.includes(u)){let c=0;for(;r.includes(`${u}${c}`);)++c;u+=c}n[o.value]=u,r.push(u)}return a=!0,Mc.variable(u)}return o});return a?s:e}static patternToBgp(e){return vn.FACTORY.createBgp([vn.FACTORY.createPattern(e.subject,e.predicate,e.object,e.graph)])}static patternToSelectQuery(e){const r=(0,nd.getVariables)((0,nd.getTerms)(e));return(0,$O.toSparql)(vn.FACTORY.createProject(vn.patternToBgp(e),r),{sparqlStar:!0})}static patternToCountQuery(e){return(0,$O.toSparql)(vn.FACTORY.createProject(vn.FACTORY.createExtend(vn.FACTORY.createGroup(vn.patternToBgp(e),[],[vn.FACTORY.createBoundAggregate(Mc.variable("var0"),"count",vn.FACTORY.createWildcardExpression(),!1)]),Mc.variable("count"),vn.FACTORY.createTermExpression(Mc.variable("var0"))),[Mc.variable("count")]),{sparqlStar:!0})}async queryBindings(e,r){const n=await this.endpointFetcher.fetchBindings(e,r);return(0,Z6.wrap)(n,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY}).map(a=>R1e.bindings(Object.entries(a).map(([s,o])=>[Mc.variable(s.slice(1)),o])))}match(e,r,n,a){const s=vn.replaceBlankNodes(vn.FACTORY.createPattern(e,r,n,a)),o=vn.patternToCountQuery(s),u=vn.patternToSelectQuery(s);new Promise(async(l,d)=>{var f;try{const h=(f=this.cache)==null?void 0:f.get(o);if(h!==void 0)return l(h);const p=await this.queryBindings(this.url,o);p.on("data",b=>{var w;const _=b.get(I1e),E={type:"estimate",value:Number.POSITIVE_INFINITY};if(_){const O=Number.parseInt(_.value,10);Number.isNaN(O)||(E.type="exact",E.value=O,(w=this.cache)==null||w.set(o,E))}return l(E)}),p.on("error",()=>l({type:"estimate",value:Number.POSITIVE_INFINITY})),p.on("end",()=>l({type:"estimate",value:Number.POSITIVE_INFINITY}))}catch(h){d(h)}}).then(l=>c.setProperty("metadata",{cardinality:l,canContainUndefs:!1})).catch(()=>c.setProperty("metadata",{cardinality:{type:"estimate",value:Number.POSITIVE_INFINITY},canContainUndefs:!1}));const c=new Z6.TransformIterator(async()=>this.queryBindings(this.url,u),{autoStart:!1}).transform({map:l=>(0,nd.mapTermsNested)(s,d=>{if(d.termType==="Variable"){const f=l.get(d);return f||c.destroy(new Error(`The endpoint ${this.url} failed to provide a binding for ${d.value}.`)),f}return d}),autoStart:!1});return c}}Xw.RdfSourceSparql=vn;vn.FACTORY=new $O.Factory;Object.defineProperty(Ww,"__esModule",{value:!0});Ww.ActorRdfResolveHypermediaSparql=void 0;const P1e=Hv,D1e=Xw;class N1e extends P1e.ActorRdfResolveHypermedia{constructor(e){super(e,"sparql")}async testMetadata(e){if(!e.forceSourceType&&!e.metadata.sparqlService&&!(this.checkUrlSuffix&&e.url.endsWith("/sparql")))throw new Error(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql.`);return{filterFactor:1}}async run(e){return this.logInfo(e.context,`Identified ${e.url} as sparql source with service URL: ${e.metadata.sparqlService||e.url}`),{source:new D1e.RdfSourceSparql(e.metadata.sparqlService||e.url,e.context,this.mediatorHttp,this.forceHttpGet,this.cacheSize)}}}Ww.ActorRdfResolveHypermediaSparql=N1e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ww,t)})(OB);var xB={},Zw={},eS={},tS={};Object.defineProperty(tS,"__esModule",{value:!0});tS.ActorRdfUpdateHypermedia=void 0;const j1e=Je;class C1e extends j1e.Actor{constructor(e,r){super(e),this.destinationType=r}async test(e){if(e.forceDestinationType&&this.destinationType!==e.forceDestinationType)throw new Error(`Actor ${this.name} is not able to handle destination type ${e.forceDestinationType}.`);return this.testMetadata(e)}}tS.ActorRdfUpdateHypermedia=C1e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(tS,t)})(eS);var uy={},UO={exports:{}};(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof g<"u"&&g,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var u=typeof s<"u"&&s||typeof self<"u"&&self||typeof u<"u"&&u,c={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function l(C){return C&&DataView.prototype.isPrototypeOf(C)}if(c.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(C){return C&&d.indexOf(Object.prototype.toString.call(C))>-1};function h(C){if(typeof C!="string"&&(C=String(C)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(C)||C==="")throw new TypeError('Invalid character in header field name: "'+C+'"');return C.toLowerCase()}function p(C){return typeof C!="string"&&(C=String(C)),C}function b(C){var Q={next:function(){var se=C.shift();return{done:se===void 0,value:se}}};return c.iterable&&(Q[Symbol.iterator]=function(){return Q}),Q}function _(C){this.map={},C instanceof _?C.forEach(function(Q,se){this.append(se,Q)},this):Array.isArray(C)?C.forEach(function(Q){this.append(Q[0],Q[1])},this):C&&Object.getOwnPropertyNames(C).forEach(function(Q){this.append(Q,C[Q])},this)}_.prototype.append=function(C,Q){C=h(C),Q=p(Q);var se=this.map[C];this.map[C]=se?se+", "+Q:Q},_.prototype.delete=function(C){delete this.map[h(C)]},_.prototype.get=function(C){return C=h(C),this.has(C)?this.map[C]:null},_.prototype.has=function(C){return this.map.hasOwnProperty(h(C))},_.prototype.set=function(C,Q){this.map[h(C)]=p(Q)},_.prototype.forEach=function(C,Q){for(var se in this.map)this.map.hasOwnProperty(se)&&C.call(Q,this.map[se],se,this)},_.prototype.keys=function(){var C=[];return this.forEach(function(Q,se){C.push(se)}),b(C)},_.prototype.values=function(){var C=[];return this.forEach(function(Q){C.push(Q)}),b(C)},_.prototype.entries=function(){var C=[];return this.forEach(function(Q,se){C.push([se,Q])}),b(C)},c.iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);function E(C){if(C.bodyUsed)return Promise.reject(new TypeError("Already read"));C.bodyUsed=!0}function w(C){return new Promise(function(Q,se){C.onload=function(){Q(C.result)},C.onerror=function(){se(C.error)}})}function O(C){var Q=new FileReader,se=w(Q);return Q.readAsArrayBuffer(C),se}function A(C){var Q=new FileReader,se=w(Q);return Q.readAsText(C),se}function T(C){for(var Q=new Uint8Array(C),se=new Array(Q.length),ie=0;ie<Q.length;ie++)se[ie]=String.fromCharCode(Q[ie]);return se.join("")}function I(C){if(C.slice)return C.slice(0);var Q=new Uint8Array(C.byteLength);return Q.set(new Uint8Array(C)),Q.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(C){this.bodyUsed=this.bodyUsed,this._bodyInit=C,C?typeof C=="string"?this._bodyText=C:c.blob&&Blob.prototype.isPrototypeOf(C)?this._bodyBlob=C:c.formData&&FormData.prototype.isPrototypeOf(C)?this._bodyFormData=C:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)?this._bodyText=C.toString():c.arrayBuffer&&c.blob&&l(C)?(this._bodyArrayBuffer=I(C.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(C)||f(C))?this._bodyArrayBuffer=I(C):this._bodyText=C=Object.prototype.toString.call(C):this._bodyText="",this.headers.get("content-type")||(typeof C=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var C=E(this);if(C)return C;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var C=E(this);return C||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(O)}),this.text=function(){var C=E(this);if(C)return C;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}var U=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function H(C){var Q=C.toUpperCase();return U.indexOf(Q)>-1?Q:C}function N(C,Q){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');Q=Q||{};var se=Q.body;if(C instanceof N){if(C.bodyUsed)throw new TypeError("Already read");this.url=C.url,this.credentials=C.credentials,Q.headers||(this.headers=new _(C.headers)),this.method=C.method,this.mode=C.mode,this.signal=C.signal,!se&&C._bodyInit!=null&&(se=C._bodyInit,C.bodyUsed=!0)}else this.url=String(C);if(this.credentials=Q.credentials||this.credentials||"same-origin",(Q.headers||!this.headers)&&(this.headers=new _(Q.headers)),this.method=H(Q.method||this.method||"GET"),this.mode=Q.mode||this.mode||null,this.signal=Q.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&se)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(se),(this.method==="GET"||this.method==="HEAD")&&(Q.cache==="no-store"||Q.cache==="no-cache")){var ie=/([?&])_=[^&]*/;if(ie.test(this.url))this.url=this.url.replace(ie,"$1_="+new Date().getTime());else{var be=/\?/;this.url+=(be.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}N.prototype.clone=function(){return new N(this,{body:this._bodyInit})};function R(C){var Q=new FormData;return C.trim().split("&").forEach(function(se){if(se){var ie=se.split("="),be=ie.shift().replace(/\+/g," "),he=ie.join("=").replace(/\+/g," ");Q.append(decodeURIComponent(be),decodeURIComponent(he))}}),Q}function F(C){var Q=new _,se=C.replace(/\r?\n[\t ]+/g," ");return se.split("\r").map(function(ie){return ie.indexOf(`
`)===0?ie.substr(1,ie.length):ie}).forEach(function(ie){var be=ie.split(":"),he=be.shift().trim();if(he){var Te=be.join(":").trim();Q.append(he,Te)}}),Q}D.call(N.prototype);function X(C,Q){if(!(this instanceof X))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');Q||(Q={}),this.type="default",this.status=Q.status===void 0?200:Q.status,this.ok=this.status>=200&&this.status<300,this.statusText=Q.statusText===void 0?"":""+Q.statusText,this.headers=new _(Q.headers),this.url=Q.url||"",this._initBody(C)}D.call(X.prototype),X.prototype.clone=function(){return new X(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},X.error=function(){var C=new X(null,{status:0,statusText:""});return C.type="error",C};var ne=[301,302,303,307,308];X.redirect=function(C,Q){if(ne.indexOf(Q)===-1)throw new RangeError("Invalid status code");return new X(null,{status:Q,headers:{location:C}})},o.DOMException=u.DOMException;try{new o.DOMException}catch{o.DOMException=function(Q,se){this.message=Q,this.name=se;var ie=Error(Q);this.stack=ie.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function $(C,Q){return new Promise(function(se,ie){var be=new N(C,Q);if(be.signal&&be.signal.aborted)return ie(new o.DOMException("Aborted","AbortError"));var he=new XMLHttpRequest;function Te(){he.abort()}he.onload=function(){var ye={status:he.status,statusText:he.statusText,headers:F(he.getAllResponseHeaders()||"")};ye.url="responseURL"in he?he.responseURL:ye.headers.get("X-Request-URL");var ce="response"in he?he.response:he.responseText;setTimeout(function(){se(new X(ce,ye))},0)},he.onerror=function(){setTimeout(function(){ie(new TypeError("Network request failed"))},0)},he.ontimeout=function(){setTimeout(function(){ie(new TypeError("Network request failed"))},0)},he.onabort=function(){setTimeout(function(){ie(new o.DOMException("Aborted","AbortError"))},0)};function Ne(ye){try{return ye===""&&u.location.href?u.location.href:ye}catch{return ye}}he.open(be.method,Ne(be.url),!0),be.credentials==="include"?he.withCredentials=!0:be.credentials==="omit"&&(he.withCredentials=!1),"responseType"in he&&(c.blob?he.responseType="blob":c.arrayBuffer&&be.headers.get("Content-Type")&&be.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(he.responseType="arraybuffer")),Q&&typeof Q.headers=="object"&&!(Q.headers instanceof _)?Object.getOwnPropertyNames(Q.headers).forEach(function(ye){he.setRequestHeader(ye,p(Q.headers[ye]))}):be.headers.forEach(function(ye,ce){he.setRequestHeader(ce,ye)}),be.signal&&(be.signal.addEventListener("abort",Te),he.onreadystatechange=function(){he.readyState===4&&be.signal.removeEventListener("abort",Te)}),he.send(typeof be._bodyInit>"u"?null:be._bodyInit)})}return $.polyfill=!0,u.fetch||(u.fetch=$,u.Headers=_,u.Request=N,u.Response=X),o.Headers=_,o.Request=N,o.Response=X,o.fetch=$,o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var a=r.fetch?r:n;e=a.fetch,e.default=a.fetch,e.fetch=a.fetch,e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response,t.exports=e})(UO,UO.exports);var CR=UO.exports;Object.defineProperty(uy,"__esModule",{value:!0});uy.QuadDestinationPatchSparqlUpdate=void 0;const M1e=ls,F1e=$f,L1e=CR,j1=x0,B1e=Xt;class $1e{constructor(e,r,n){this.url=e,this.context=r,this.mediatorHttp=n}insert(e){return this.wrapSparqlUpdateRequest("INSERT",e)}async delete(e){return this.wrapSparqlUpdateRequest("DELETE",e)}async wrapSparqlUpdateRequest(e,r){const n=r.map(u=>{let c=`${(0,j1.termToString)(u.subject)} ${(0,j1.termToString)(u.predicate)} ${(0,j1.termToString)(u.object)} .`;return u.graph.termType!=="DefaultGraph"?c=`  GRAPH ${(0,j1.termToString)(u.graph)} { ${c} }
`:c=`  ${c}
`,c}).prepend([`${e} DATA {
`]).append(["}"]),a=new B1e.Readable;a._read=()=>!0,n.on("data",u=>a.push(u)),n.on("end",()=>a.push(null));const s=new L1e.Headers({"content-type":"application/sparql-update"}),o=await this.mediatorHttp.mediate({context:this.context,init:{headers:s,method:"PATCH",body:M1e.ActorHttp.toWebReadableStream(a)},input:this.url});await(0,F1e.validateHttpResponse)(this.url,o)}async deleteGraphs(e,r,n){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}async createGraphs(e,r){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}}uy.QuadDestinationPatchSparqlUpdate=$1e;Object.defineProperty(Zw,"__esModule",{value:!0});Zw.ActorRdfUpdateHypermediaPatchSparqlUpdate=void 0;const U1e=eS,q1e=uy;class V1e extends U1e.ActorRdfUpdateHypermedia{constructor(e){super(e,"patchSparqlUpdate")}async testMetadata(e){if(!e.forceDestinationType&&!e.metadata.patchSparqlUpdate)throw new Error(`Actor ${this.name} could not detect a destination with 'application/sparql-update' as 'Accept-Patch' header.`);if(!e.forceDestinationType&&!e.exists)throw new Error(`Actor ${this.name} can only patch a destination that already exists.`);return!0}async run(e){return this.logInfo(e.context,`Identified as patchSparqlUpdate destination: ${e.url}`),{destination:new q1e.QuadDestinationPatchSparqlUpdate(e.url,e.context,this.mediatorHttp)}}}Zw.ActorRdfUpdateHypermediaPatchSparqlUpdate=V1e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Zw,t),r(uy,t)})(xB);var RB={},rS={},cy={};Object.defineProperty(cy,"__esModule",{value:!0});cy.QuadDestinationPutLdp=void 0;const H1e=ls,k1e=$f,Q1e=CR;class G1e{constructor(e,r,n,a,s,o){this.url=e,this.context=r,this.mediaTypes=n,this.mediatorHttp=a,this.mediatorRdfSerializeMediatypes=s,this.mediatorRdfSerialize=o}insert(e){return this.wrapRdfUpdateRequest("INSERT",e)}async delete(e){throw new Error("Put-based LDP destinations don't support deletions")}async wrapRdfUpdateRequest(e,r){const{mediaTypes:n}=await this.mediatorRdfSerializeMediatypes.mediate({context:this.context,mediaTypes:!0}),a=this.mediaTypes.filter(l=>l in n),s=a.length>0?a[0]:Object.keys(n).sort((l,d)=>n[d]-n[l])[0],{handle:{data:o}}=await this.mediatorRdfSerialize.mediate({context:this.context,handle:{quadStream:r,context:this.context},handleMediaType:s}),u=new Q1e.Headers({"content-type":s}),c=await this.mediatorHttp.mediate({context:this.context,init:{headers:u,method:"PUT",body:H1e.ActorHttp.toWebReadableStream(o)},input:this.url});await(0,k1e.validateHttpResponse)(this.url,c)}async deleteGraphs(e,r,n){throw new Error("Put-based LDP destinations don't support named graphs")}async createGraphs(e,r){throw new Error("Put-based LDP destinations don't support named graphs")}}cy.QuadDestinationPutLdp=G1e;Object.defineProperty(rS,"__esModule",{value:!0});rS.ActorRdfUpdateHypermediaPutLdp=void 0;const z1e=eS,W1e=cy;class X1e extends z1e.ActorRdfUpdateHypermedia{constructor(e){super(e,"putLdp")}async testMetadata(e){if(!e.forceDestinationType){if(!e.metadata.allowHttpMethods||!e.metadata.allowHttpMethods.includes("PUT"))throw new Error(`Actor ${this.name} could not detect a destination with 'Allow: PUT' header.`);if(e.exists)throw new Error(`Actor ${this.name} can only put on a destination that does not already exists.`)}return!0}async run(e){return this.logInfo(e.context,`Identified as putLdp destination: ${e.url}`),{destination:new W1e.QuadDestinationPutLdp(e.url,e.context,e.metadata.putAccepted||[],this.mediatorHttp,this.mediatorRdfSerializeMediatypes,this.mediatorRdfSerialize)}}}rS.ActorRdfUpdateHypermediaPutLdp=X1e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(rS,t),r(cy,t)})(RB);var IB={},nS={},ly={};Object.defineProperty(ly,"__esModule",{value:!0});ly.QuadDestinationSparql=void 0;const K1e=Kw,C1=x0,J1e=Al;class Y1e{constructor(e,r,n){this.url=e,this.context=r,this.mediatorHttp=n,this.endpointFetcher=new K1e.SparqlEndpointFetcher({fetch:(a,s)=>this.mediatorHttp.mediate({input:a,init:s,context:this.context}),prefixVariableQuestionMark:!0})}insert(e){return this.wrapSparqlUpdateRequest("INSERT",e)}async delete(e){return this.wrapSparqlUpdateRequest("DELETE",e)}async wrapSparqlUpdateRequest(e,r){const n=r.map(s=>{let o=`${(0,C1.termToString)(s.subject)} ${(0,C1.termToString)(s.predicate)} ${(0,C1.termToString)(s.object)} .`;return s.graph.termType!=="DefaultGraph"?o=`  GRAPH ${(0,C1.termToString)(s.graph)} { ${o} }
`:o=`  ${o}
`,o}).prepend([`${e} DATA {
`]).append(["}"]),a=await J1e(n);await this.endpointFetcher.fetchUpdate(this.url,a)}async deleteGraphs(e,r,n){const a=Array.isArray(e)?e:[e],s=[];for(const o of a){let u;typeof o=="string"?u=o:o.termType==="DefaultGraph"?u="DEFAULT":u=`GRAPH <${o.value}>`,s.push(`${n?"DROP":"CLEAR"} ${r?"":"SILENT "}${u}`)}await this.endpointFetcher.fetchUpdate(this.url,s.join("; "))}async createGraphs(e,r){const n=[];for(const a of e)n.push(`CREATE${r?"":" SILENT"} GRAPH <${a.value}>`);await this.endpointFetcher.fetchUpdate(this.url,n.join("; "))}}ly.QuadDestinationSparql=Y1e;Object.defineProperty(nS,"__esModule",{value:!0});nS.ActorRdfUpdateHypermediaSparql=void 0;const Z1e=eS,ebe=ly;class tbe extends Z1e.ActorRdfUpdateHypermedia{constructor(e){super(e,"sparql")}async testMetadata(e){if(!e.forceDestinationType&&!e.metadata.sparqlService&&!(this.checkUrlSuffixSparql&&e.url.endsWith("/sparql"))&&!(this.checkUrlSuffixUpdate&&e.url.endsWith("/update")))throw new Error(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql or /update.`);return!0}async run(e){return this.logInfo(e.context,`Identified as sparql destination: ${e.url}`),{destination:new ebe.QuadDestinationSparql(e.metadata.sparqlService||e.url,e.context,this.mediatorHttp)}}}nS.ActorRdfUpdateHypermediaSparql=tbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(nS,t),r(ly,t)})(IB);var PB={},iS={},aS={};Object.defineProperty(aS,"__esModule",{value:!0});aS.LazyCardinalityIterator=void 0;const Wc=Ht;class rbe extends Wc.AsyncIterator{constructor(e){super(),this._source=e,this._count=0,this._buffering=!0,e[Wc.DESTINATION]=this,e.on("readable",id),e.on("end",id),e.on("error",e8),this.readable=e.readable}read(){if(this._buffer)return this._buffer.empty?(this._buffering||this.close(),this.readable=!1,null):this._buffer.shift();let e=null;return this._source.readable&&(e=this._source.read())!==null?this._count+=1:(this.readable=!1,this._source.done&&this.close()),e}getCardinality(){return this._cardinality?this._cardinality:this._error?Promise.reject(this._error):(this._source.done&&this.close(),this.done?this._cardinality=Promise.resolve(this._count):(this._buffer=new Wc.LinkedList,this._cardinality=new Promise((e,r)=>{this._source.removeListener("readable",id),this._source.removeListener("end",id);const n=()=>{this._source.removeListener("data",a),this._source.removeListener("end",s),this._source.removeListener("error",o)},a=u=>{this._buffer.push(u),this._count+=1,this.readable=!0},s=()=>{this._buffering=!1,n(),e(this._count)},o=u=>{this._buffering=!1,n(),r(u)};this._source.on("data",a),this._source.on("end",s),this._source.on("error",o)})),this._cardinality)}close(){this._source.removeListener("readable",id),this._source.removeListener("end",id),this._source.removeListener("error",e8),delete this._source[Wc.DESTINATION],this._source.destroy(),super.close()}}aS.LazyCardinalityIterator=rbe;function id(){this[Wc.DESTINATION].readable=!0}function e8(t){this[Wc.DESTINATION]._error=t,this[Wc.DESTINATION].emit("error",t)}Object.defineProperty(iS,"__esModule",{value:!0});iS.ActorQueryOperationSparqlEndpoint=void 0;const nbe=$n,ibe=ct,Ah=xl,dE=$f,abe=Ut,sbe=oa,obe=Ht,ube=Kw,cbe=ft,wu=gt,lbe=aS,dbe=new nbe.BindingsFactory,fbe=new cbe.DataFactory;class Lp extends ibe.ActorQueryOperation{constructor(e){super(e),this.endpointFetcher=new ube.SparqlEndpointFetcher({method:e.forceHttpGet?"GET":"POST",fetch:(r,n)=>this.mediatorHttp.mediate({input:r,init:n,context:this.lastContext}),prefixVariableQuestionMark:!0})}async test(e){if(!e.operation)throw new Error("Missing field 'operation' in a query operation action.");const r=(0,Ah.getContextSourceFirst)(e.context),n=(0,dE.getContextDestinationFirst)(e.context),a=r?(0,Ah.getDataSourceType)(r):void 0,s=n?(0,dE.getDataDestinationType)(n):void 0,o=r?(0,Ah.getDataSourceValue)(r):void 0,u=n?(0,dE.getDataDestinationValue)(n):void 0;if(r&&a==="sparql"&&(!n||s==="sparql"&&u===o)||r&&!a&&(!n||!s&&u===o)&&typeof o=="string"&&(this.checkUrlSuffixSparql&&o.endsWith("/sparql")||this.checkUrlSuffixUpdate&&o.endsWith("/update")))return{httpRequests:1};throw new Error(`${this.name} requires a single source with a 'sparql' endpoint to be present in the context or URL ending on /sparql or /update.`)}async run(e){const r=(0,Ah.getContextSourceFirst)(e.context);if(!r)throw new Error("Illegal state: undefined sparql endpoint source.");const n=(0,Ah.getDataSourceValue)(r);this.lastContext=e.context;let a,s,o;try{a=e.context.get(abe.KeysInitQuery.queryString)??(0,wu.toSparql)(e.operation,{sparqlStar:!0}),s=this.endpointFetcher.getQueryType(a),s==="UNKNOWN"&&(s=this.endpointFetcher.getUpdateTypes(a))}catch{}(!s||s==="UNKNOWN")&&(o=wu.Util.inScopeVariables(e.operation),a=(0,wu.toSparql)(Lp.FACTORY.createProject(e.operation,o)),s="SELECT");const u=this.canOperationContainUndefs(e.operation);switch(s){case"SELECT":return o||(o=wu.Util.inScopeVariables(e.operation)),this.executeQuery(n,a,!1,o,u);case"CONSTRUCT":return this.executeQuery(n,a,!0,void 0,!1);case"ASK":return{type:"boolean",execute:()=>this.endpointFetcher.fetchAsk(n,a)};default:return{type:"void",execute:()=>this.endpointFetcher.fetchUpdate(n,a)}}}executeQuery(e,r,n,a,s){const o=n?this.endpointFetcher.fetchTriples(e,r):this.endpointFetcher.fetchBindings(e,r),u=(0,obe.wrap)(o,{autoStart:!1}).map(d=>n?d:dbe.bindings(Object.entries(d).map(([f,h])=>[fbe.variable(f.slice(1)),h]))),c=new lbe.LazyCardinalityIterator(u),l=Lp.cachifyMetadata(async()=>({state:new sbe.MetadataValidationState,cardinality:{type:"exact",value:await c.getCardinality()},canContainUndefs:s,variables:a}));return n?{type:"quads",quadStream:c,metadata:l}:{type:"bindings",bindingsStream:c,metadata:l}}canOperationContainUndefs(e){let r=!1;return wu.Util.recurseOperation(e,{[wu.Algebra.types.LEFT_JOIN](){return r=!0,!1},[wu.Algebra.types.VALUES](n){for(const a of n.bindings){const s=Object.keys(a);n.variables.every(o=>s.includes(`?${o.value}`))||(r=!0)}return!1}}),r}}iS.ActorQueryOperationSparqlEndpoint=Lp;Lp.FACTORY=new wu.Factory;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(iS,t)})(PB);var DB={},sS={},NB={},oS={};Object.defineProperty(oS,"__esModule",{value:!0});oS.ActorDereferenceRdf=void 0;const hbe=Xm;class pbe extends hbe.ActorDereferenceParse{constructor(e){super(e)}}oS.ActorDereferenceRdf=pbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(oS,t)})(NB);Object.defineProperty(sS,"__esModule",{value:!0});sS.ActorDereferenceRdfParse=void 0;const ybe=NB;class bbe extends ybe.ActorDereferenceRdf{constructor(e){super(e)}async getMetadata(e){return{baseIRI:e.url}}}sS.ActorDereferenceRdfParse=bbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(sS,t)})(DB);var jB={},uS={},cS={};Object.defineProperty(cS,"__esModule",{value:!0});cS.HtmlScriptListener=void 0;const t8=Ut,_be=Xt,gbe=Oa;class Td{constructor(e,r,n,a,s,o,u,c){this.textChunksJsonLd=[],this.endBarrier=1,this.passedScripts=0,this.isFinalJsonLdProcessing=!1,this.mediatorRdfParseHandle=e,this.cbQuad=r,this.cbError=n,this.cbEnd=a,this.supportedTypes=s,this.context=o.set(t8.KeysRdfParseHtmlScript.processingHtmlScript,!0),this.baseIRI=u,this.headers=c,this.onlyFirstScript=o.get(t8.KeysRdfParseHtmlScript.extractAllScripts)===!1;const l=this.baseIRI.indexOf("#");this.targetScriptId=l>0?this.baseIRI.slice(l+1,this.baseIRI.length):null}static newErrorCoded(e,r){const n=new Error(e);return n.code=r,n}onEnd(){--this.endBarrier===0&&(this.textChunksJsonLd.length>0?(this.handleMediaType="application/ld+json",this.textChunks=this.textChunksJsonLd,this.textChunks.push("]"),this.textChunksJsonLd=[],this.isFinalJsonLdProcessing=!0,this.endBarrier++,this.onTagClose()):(this.passedScripts===0&&this.targetScriptId&&this.cbError(Td.newErrorCoded(`Failed to find targeted script id "${this.targetScriptId}"`,"loading document failed")),this.cbEnd()),this.isFinalJsonLdProcessing=!1)}onTagClose(){if(this.handleMediaType)if(this.requiresCustomJsonLdHandling(this.handleMediaType)&&!this.isFinalJsonLdProcessing)this.handleMediaType=void 0,this.textChunks=void 0,this.onEnd();else{const e=new _be.Readable({objectMode:!0});e._read=()=>{};const r=this.textChunks,n={context:this.context,handle:{metadata:{baseIRI:this.baseIRI},data:e,headers:this.headers,context:this.context},handleMediaType:this.handleMediaType};this.mediatorRdfParseHandle.mediate(n).then(({handle:a})=>{a.data.on("error",s=>this.cbError(Td.newErrorCoded(s.message,"invalid script element"))).on("data",this.cbQuad).on("end",()=>this.onEnd());for(const s of r)e.push(s);e.push(null)}).catch(a=>{this.targetScriptId?this.cbError(Td.newErrorCoded(a.message,"loading document failed")):this.onEnd()}),this.handleMediaType=void 0,this.textChunks=void 0}}onTagOpen(e,r){e==="base"&&r.href&&(this.baseIRI=(0,gbe.resolve)(r.href,this.baseIRI)),e==="script"&&(!this.targetScriptId||r.id===this.targetScriptId)?this.supportedTypes[r.type]?this.onlyFirstScript&&this.passedScripts>0?this.handleMediaType=void 0:(this.passedScripts++,this.handleMediaType=r.type,this.endBarrier++,this.requiresCustomJsonLdHandling(this.handleMediaType)?(this.textChunks=this.textChunksJsonLd,this.textChunks.push(this.textChunks.length===0?"[":",")):this.textChunks=[]):this.targetScriptId&&this.cbError(Td.newErrorCoded(`Targeted script "${this.targetScriptId}" does not have a supported type`,"loading document failed")):this.handleMediaType=void 0}onText(e){this.handleMediaType&&this.textChunks.push(e)}requiresCustomJsonLdHandling(e){return!this.onlyFirstScript&&!this.targetScriptId&&e==="application/ld+json"}}cS.HtmlScriptListener=Td;Object.defineProperty(uS,"__esModule",{value:!0});uS.ActorRdfParseHtmlScript=void 0;const mbe=Fv,vbe=cS;class wbe extends mbe.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return!0}async run(e){const r=(await this.mediatorRdfParseMediatypes.mediate({context:e.context,mediaTypes:!0})).mediaTypes;return{htmlParseListener:new vbe.HtmlScriptListener(this.mediatorRdfParseHandle,e.emit,e.error,e.end,r,e.context,e.baseIRI,e.headers)}}}uS.ActorRdfParseHtmlScript=wbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(uS,t)})(jB);var CB={},lS={},Ra={},dS={};Object.defineProperty(dS,"__esModule",{value:!0});dS.ActorRdfJoin=void 0;const Sbe=ct,M1=Ut,Tbe=Je,Ebe=oa,Obe=ft,Abe=Zt,xbe=new Obe.DataFactory;class Iu extends Tbe.Actor{constructor(e,r){super(e),this.includeInLogs=!0,this.logicalType=r.logicalType,this.physicalName=r.physicalName,this.limitEntries=r.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=r.limitEntriesMin??!1,this.canHandleUndefs=r.canHandleUndefs??!1}static hash(e,r){return r.filter(n=>e.has(n)).map(n=>(0,Abe.termToString)(e.get(n))).join("")}static overlappingVariables(e){const r=e.map(a=>a.variables);let n=r[0];for(const a of r.slice(1))n=n.filter(s=>a.some(o=>o.value===s.value));return n}static joinVariables(e){return[...new Set(e.flatMap(r=>r.variables.map(n=>n.value)))].map(r=>xbe.variable(r))}static joinBindings(...e){if(e.length===0)return null;if(e.length===1)return e[0];let r=e[0];for(const n of e.slice(1)){const a=r.merge(n);if(!a)return null;r=a}return r}static getCardinality(e){return e.cardinality}static async getMetadatas(e){return await Promise.all(e.map(r=>r.output.metadata()))}static async getEntriesWithMetadatas(e){const r=await Iu.getMetadatas(e);return e.map((n,a)=>({...n,metadata:r[a]}))}static getRequestInitialTimes(e){return e.map(r=>r.pageSize?0:r.requestTime||0)}static getRequestItemTimes(e){return e.map(r=>r.pageSize?(r.requestTime||0)/r.pageSize:0)}async constructResultMetadata(e,r,n,a={}){let s;a.cardinality?s=a.cardinality:(s=r.reduce((c,l)=>{const d=Iu.getCardinality(l);return{type:d.type==="estimate"?"estimate":c.type,value:c.value*d.value}},{type:"exact",value:1}),s.value*=(await this.mediatorJoinSelectivity.mediate({entries:e,context:n})).selectivity);const o=new Ebe.MetadataValidationState,u=()=>o.invalidate();for(const c of r)c.state.addInvalidateListener(u);return{state:o,...a,cardinality:{type:s.type,value:s.value},canContainUndefs:a.canContainUndefs??r.some(c=>c.canContainUndefs),variables:Iu.joinVariables(r)}}async test(e){if(e.type!==this.logicalType)throw new Error(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${e.type}' was given.`);if(e.entries.length<=1)throw new Error(`${this.name} requires at least two join entries.`);if(this.limitEntriesMin?e.entries.length<this.limitEntries:e.entries.length>this.limitEntries)throw new Error(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${e.entries.length}.`);for(const n of e.entries)if(n.output.type!=="bindings")throw new Error(`Invalid type of a join entry: Expected 'bindings' but got '${n.output.type}'`);const r=await Iu.getMetadatas(e.entries);if(!this.canHandleUndefs){for(const n of r)if(n.canContainUndefs)throw new Error(`Actor ${this.name} can not join streams containing undefs`)}return await this.getJoinCoefficients(e,r)}async run(e){let r;e.context.has(M1.KeysInitQuery.physicalQueryPlanLogger)&&(r=e.context.get(M1.KeysInitQuery.physicalQueryPlanNode),e.context=e.context.set(M1.KeysInitQuery.physicalQueryPlanNode,e));const n=e.context.get(M1.KeysInitQuery.physicalQueryPlanLogger);let a;this.includeInLogs&&n&&(a={},n.logOperation(`join-${this.logicalType}`,this.physicalName,e,r,this.name,a));const{result:s,physicalPlanMetadata:o}=await this.getOutput(e),u=await Iu.getMetadatas(e.entries);return a&&(Object.assign(a,o),a.cardinalities=u.map(Iu.getCardinality),a.joinCoefficients=await this.getJoinCoefficients(e,u)),s.metadata=Sbe.ActorQueryOperation.cachifyMetadata(s.metadata),s}}dS.ActorRdfJoin=Iu;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(dS,t)})(Ra);Object.defineProperty(lS,"__esModule",{value:!0});lS.ActorRdfJoinNone=void 0;const Rbe=$n,Ibe=Ra,Pbe=oa,Dbe=Ht,Nbe=new Rbe.BindingsFactory;class jbe extends Ibe.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(e){if(e.entries.length>0)throw new Error(`Actor ${this.name} can only join zero entries`);return await this.getJoinCoefficients()}async getOutput(e){return{result:{bindingsStream:new Dbe.ArrayIterator([Nbe.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({state:new Pbe.MetadataValidationState,cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}lS.ActorRdfJoinNone=jbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(lS,t)})(CB);var MB={},fS={};Object.defineProperty(fS,"__esModule",{value:!0});fS.ActorRdfJoinSingle=void 0;const Cbe=Ra;class Mbe extends Cbe.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(e){if(e.entries.length!==1)throw new Error(`Actor ${this.name} can only join a single entry`);return await this.getJoinCoefficients()}async getOutput(e){return{result:e.entries[0].output}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}fS.ActorRdfJoinSingle=Mbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(fS,t)})(MB);var MR={},hS={};Object.defineProperty(hS,"__esModule",{value:!0});hS.ActorRdfJoinMultiBind=void 0;const r8=ct,F1=Ra,fE=Ut,hE=Ht,Yh=gt;class Bp extends F1.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0})}static createBindStream(e,r,n,a,s){const o=u=>{const c=n.map(d=>(0,r8.materializeOperation)(d,u,{bindFilter:!1})),l=d=>d.merge(u);return new hE.TransformIterator(async()=>(await a(c,u)).transform({map:l}),{maxBufferSize:128,autoStart:!1})};switch(e){case"depth-first":return new hE.MultiTransformIterator(r,{autoStart:!1,multiTransform:o,optional:s});case"breadth-first":return new hE.UnionIterator(r.transform({map:o,optional:s}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${e}`)}}async sortJoinEntries(e,r){if(e.some(u=>u.metadata.canContainUndefs))return e;const a={};for(const u of e)for(const c of u.metadata.variables){let l=a[c.value];l||(l=0),a[c.value]=++l}const s=[];for(const[u,c]of Object.entries(a))c>=2&&s.push(u);if(s.length===0)throw new Error("Bind join can only join entries with at least one common variable");const o=[];for(const u of e){let c=!1;for(const l of u.metadata.variables)if(s.includes(l.value)){c=!0;break}c||o.push(u)}return(await this.mediatorJoinEntriesSort.mediate({entries:e,context:r})).entries.sort((u,c)=>{const l=o.includes(u),d=o.includes(c);return l===d?0:l?1:-1})}async getOutput(e){const r=await F1.ActorRdfJoin.getEntriesWithMetadatas(e.entries),n=await this.sortJoinEntries(r,e.context);this.logDebug(e.context,"First entry for Bind Join: ",()=>({entry:n[0].operation,metadata:n[0].metadata}));for(const[c,l]of n.entries())c!==0&&l.output.bindingsStream.close();const a=n[0].output,s=[...n];s.splice(0,1);const o=e.context.set(fE.KeysQueryOperation.joinLeftMetadata,n[0].metadata).set(fE.KeysQueryOperation.joinRightMetadatas,s.map(c=>c.metadata));return{result:{type:"bindings",bindingsStream:Bp.createBindStream(this.bindOrder,a.bindingsStream,s.map(c=>c.operation),async(c,l)=>{const d=c.length===1?c[0]:Bp.FACTORY.createJoin(c);return r8.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:d,context:o==null?void 0:o.set(fE.KeysQueryOperation.joinBindings,l)})).bindingsStream},!1),metadata:()=>this.constructResultMetadata(n,n.map(c=>c.metadata),e.context)},physicalPlanMetadata:{bindIndex:r.indexOf(n[0]),bindOrder:this.bindOrder}}}canBindWithOperation(e){let r=!0;return Yh.Util.recurseOperation(e,{[Yh.Algebra.types.EXTEND](){return r=!1,!1},[Yh.Algebra.types.GROUP](){return r=!1,!1},[Yh.Algebra.types.FILTER](){return r=!1,!1}}),r}async getJoinCoefficients(e,r){const n=await this.sortJoinEntries(e.entries.map((p,b)=>({...p,metadata:r[b]})),e.context);r=n.map(p=>p.metadata);const a=F1.ActorRdfJoin.getRequestInitialTimes(r),s=F1.ActorRdfJoin.getRequestItemTimes(r),o=[...n],u=[...a],c=[...s];if(o.splice(0,1),u.splice(0,1),c.splice(0,1),o.some(p=>!this.canBindWithOperation(p.operation)))throw new Error(`Actor ${this.name} can not bind on Extend, Group, and Filter operations`);const l=await Promise.all(o.map(async p=>(await this.mediatorJoinSelectivity.mediate({entries:[n[0],p],context:e.context})).selectivity*this.selectivityModifier)),d=o.map((p,b)=>p.metadata.cardinality.value*l[b]).reduce((p,b)=>p+b,0),f=u.reduce((p,b,_)=>p+b*l[_],0),h=c.reduce((p,b,_)=>p+b*l[_],0);return{iterations:r[0].cardinality.value*d,persistedItems:0,blockingItems:0,requestTime:a[0]+r[0].cardinality.value*(s[0]+f+d*h)}}}hS.ActorRdfJoinMultiBind=Bp;Bp.FACTORY=new Yh.Factory;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(hS,t)})(MR);var FB={},pS={};let LB=Ht,Fbe=LB.MultiTransformIterator,Lbe=LB.SimpleTransformIterator,Bbe=class extends Fbe{constructor(e,r,n,a){super(e,a),this.funRight=r,this.funJoin=n}_createTransformer(e){return new Lbe(this.funRight(e),{transform:(r,n,a)=>{let s=this.funJoin(e,r);s!==null&&a(s),n()}})}};var $be=Bbe;let Ube=Ht.AsyncIterator,qbe=class extends Ube{constructor(e,r,n,a){super(),this.addedDataListener=!1,this.left=e,this.right=r,this.funHash=n,this.funJoin=a,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",o=>this.destroy(o)),this.right.on("error",o=>this.destroy(o)),this.readable=!1,this.left.on("end",s.bind(this));function s(){if(this.leftMap.size<=0)return this.close();this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",o=>{o==="data"&&!this.addedDataListener&&(this.addedDataListener=!0,this._addDataListener())})}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this.addedDataListener||(this.addedDataListener=!0,this._addDataListener());;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let r=this.matches[this.matchIdx++],n=this.funJoin(r,this.match);if(n!==null)return n}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let e=this.funHash(this.match);this.matches=this.leftMap.get(e)||[],this.matchIdx=0}}_addDataListener(){this.left.on("data",e.bind(this));function e(r){let n=this.funHash(r);this.leftMap.has(n)||this.leftMap.set(n,[]),this.leftMap.get(n).push(r)}}};var Vbe=qbe;const{MultiTransformIterator:Hbe,SimpleTransformIterator:kbe,scheduleTask:Qbe}=Ht;let Gbe=class extends Hbe{constructor(e,r,n,a){super(e,a),this.right=r,this.funJoin=n,this.on("end",()=>this.right.close())}_end(){super._end(),Qbe(()=>this.right.destroy())}_createTransformer(e){return new kbe(this.right.clone(),{transform:(r,n,a)=>{let s=this.funJoin(e,r);s!==null&&a(s),n()}})}};var zbe=Gbe;let Wbe=Ht.AsyncIterator,Xbe=class extends Wbe{constructor(e,r,n,a){super(),this.left=e,this.right=r,this.funHash=n,this.funJoin=a,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",s=>this.destroy(s)),this.right.on("error",s=>this.destroy(s)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(;;){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let s=this.matches[this.matchIdx++],o=this.usedLeft?this.funJoin(this.match,s):this.funJoin(s,this.match);if(o!==null)return o}this.hasResults()||this._end();let e=null;for(let s=0;s<2&&(e=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,e===null);++s);if(this.done||e===null)return this.readable=!1,null;let r=this.funHash(e),n=this.usedLeft?this.leftMap:this.rightMap;n.has(r)||n.set(r,[]),n.get(r).push(e),this.match=e,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(r)||[],this.matchIdx=0}}};var Kbe=Xbe;let Jbe=Ht.AsyncIterator;class Ybe extends Jbe{constructor(e){super(),Array.isArray(e)||(e=Array.prototype.slice.call(arguments)),this.streams=e;for(let r of e)r.on("readable",()=>this.emit("readable")),r.on("end",()=>this._removeStream(r));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(e){let r=this.streams.indexOf(e);r<0||(this.streams.splice(r,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let e of this.streams)e.close()}read(){for(let e=0;e<this.streams.length;++e){this.idx=(this.idx+1)%this.streams.length;let r=this.streams[this.idx].read();if(r!==null)return r}return null}}var Zbe=Ybe;const e_e=$be,t_e=Vbe,r_e=zbe,n_e=Kbe,i_e=Zbe;var yS={DynamicNestedLoopJoin:e_e,HashJoin:t_e,NestedLoopJoin:r_e,SymmetricHashJoin:n_e,MergeStream:i_e};Object.defineProperty(pS,"__esModule",{value:!0});pS.ActorRdfJoinHash=void 0;const Ac=Ra,a_e=yS;class s_e extends Ac.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"hash",limitEntries:2})}async getOutput(e){const r=await Ac.ActorRdfJoin.getMetadatas(e.entries),n=Ac.ActorRdfJoin.overlappingVariables(r);return{result:{type:"bindings",bindingsStream:new a_e.HashJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,s=>Ac.ActorRdfJoin.hash(s,n),Ac.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(e.entries,r,e.context)}}}async getJoinCoefficients(e,r){const n=Ac.ActorRdfJoin.getRequestInitialTimes(r),a=Ac.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value+r[1].cardinality.value,persistedItems:r[0].cardinality.value,blockingItems:r[0].cardinality.value,requestTime:n[0]+r[0].cardinality.value*a[0]+n[1]+r[1].cardinality.value*a[1]}}}pS.ActorRdfJoinHash=s_e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(pS,t)})(FB);var BB={},bS={};Object.defineProperty(bS,"__esModule",{value:!0});bS.ActorRdfJoinSymmetricHash=void 0;const ad=Ra,o_e=yS;class FR extends ad.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2})}async getOutput(e){const r=await ad.ActorRdfJoin.getMetadatas(e.entries),n=ad.ActorRdfJoin.overlappingVariables(r);return{result:{type:"bindings",bindingsStream:new o_e.SymmetricHashJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,s=>FR.hash(s,n),ad.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(e.entries,r,e.context)}}}async getJoinCoefficients(e,r){const n=ad.ActorRdfJoin.getRequestInitialTimes(r),a=ad.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value+r[1].cardinality.value,persistedItems:r[0].cardinality.value+r[1].cardinality.value,blockingItems:0,requestTime:n[0]+r[0].cardinality.value*a[0]+n[1]+r[1].cardinality.value*a[1]}}}bS.ActorRdfJoinSymmetricHash=FR;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(bS,t)})(BB);var $B={},_S={};Object.defineProperty(_S,"__esModule",{value:!0});_S.ActorRdfJoinNestedLoop=void 0;const xh=Ra,u_e=yS;class c_e extends xh.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new u_e.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,xh.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await xh.ActorRdfJoin.getMetadatas(e.entries),e.context)}}}async getJoinCoefficients(e,r){const n=xh.ActorRdfJoin.getRequestInitialTimes(r),a=xh.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value*r[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:n[0]+r[0].cardinality.value*a[0]+n[1]+r[1].cardinality.value*a[1]}}}_S.ActorRdfJoinNestedLoop=c_e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(_S,t)})($B);var UB={},gS={};Object.defineProperty(gS,"__esModule",{value:!0});gS.ActorRdfJoinMinusHash=void 0;const l_e=ct,xc=Ra;class d_e extends xc.ActorRdfJoin{constructor(e){super(e,{logicalType:"minus",physicalName:"hash",limitEntries:2})}async getOutput(e){const r=e.entries[1].output,n=e.entries[0].output,a=await xc.ActorRdfJoin.getMetadatas(e.entries),s=xc.ActorRdfJoin.overlappingVariables(a);if(s.length>0){const o={};return{result:{type:"bindings",bindingsStream:new l_e.ClosableTransformIterator(async()=>(await new Promise(c=>{r.bindingsStream.on("data",l=>{o[xc.ActorRdfJoin.hash(l,s)]=!0}),r.bindingsStream.on("end",c)}),n.bindingsStream.filter(c=>!o[xc.ActorRdfJoin.hash(c,s)])),{autoStart:!1,onClose(){r.bindingsStream.destroy(),n.bindingsStream.destroy()}}),metadata:n.metadata}}}return r.bindingsStream.destroy(),{result:n}}async getJoinCoefficients(e,r){const n=xc.ActorRdfJoin.getRequestInitialTimes(r),a=xc.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value+r[1].cardinality.value,persistedItems:r[0].cardinality.value,blockingItems:r[0].cardinality.value,requestTime:n[0]+r[0].cardinality.value*a[0]+n[1]+r[1].cardinality.value*a[1]}}}gS.ActorRdfJoinMinusHash=d_e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(gS,t)})(UB);var qB={},mS={},vS={};Object.defineProperty(vS,"__esModule",{value:!0});vS.BindingsIndex=void 0;const f_e=Zt;class Kb{constructor(e){this.data={},this.keys=e}static hashTerm(e){return e&&e.termType!=="Variable"?(0,f_e.termToString)(e):""}add(e){if(this.isBindingsValid(e)){let r=this.data;for(const n of this.keys){const a=Kb.hashTerm(e.get(n));let s=r[a];s||(s=r[a]={}),r=s}}}contains(e){return this.isBindingsValid(e)?this.containsRecursive(e,this.keys,[this.data]):!1}isBindingsValid(e){let r=!1;for(const n of this.keys)if(e.get(n)){r=!0;break}return r}containsRecursive(e,r,n){if(r.length===0)return!0;let a;[a,...r]=r;for(const s of n){const o=Kb.hashTerm(e.get(a));if(o){const u=[s[o],s[""]].filter(Boolean);if(u.length===0)continue;if(this.containsRecursive(e,r,u))return!0}else{let u=Object.keys(s).map(c=>s[c]);if(u.length===0&&(u=[{}]),this.containsRecursive(e,r,u))return!0}}return!1}}vS.BindingsIndex=Kb;Object.defineProperty(mS,"__esModule",{value:!0});mS.ActorRdfJoinMinusHashUndef=void 0;const h_e=ct,Rh=Ra,p_e=vS;class y_e extends Rh.ActorRdfJoin{constructor(e){super(e,{logicalType:"minus",physicalName:"hash-undef",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){const r=e.entries[1].output,n=e.entries[0].output,a=await Rh.ActorRdfJoin.getMetadatas(e.entries),s=Rh.ActorRdfJoin.overlappingVariables(a);if(s.length>0){const o=new p_e.BindingsIndex(s);return{result:{type:"bindings",bindingsStream:new h_e.ClosableTransformIterator(async()=>(await new Promise(c=>{r.bindingsStream.on("data",l=>o.add(l)),r.bindingsStream.on("end",c)}),n.bindingsStream.filter(c=>!o.contains(c))),{autoStart:!1,onClose(){r.bindingsStream.destroy(),n.bindingsStream.destroy()}}),async metadata(){const c=await n.metadata(),l=await n.metadata();return{...l,canContainUndefs:c.canContainUndefs||l.canContainUndefs}}}}}return r.bindingsStream.destroy(),{result:n}}async getJoinCoefficients(e,r){const n=Rh.ActorRdfJoin.getRequestInitialTimes(r),a=Rh.ActorRdfJoin.getRequestItemTimes(r);return{iterations:(r[0].cardinality.value+r[1].cardinality.value)*1.01,persistedItems:r[0].cardinality.value,blockingItems:r[0].cardinality.value,requestTime:n[0]+r[0].cardinality.value*a[0]+n[1]+r[1].cardinality.value*a[1]}}}mS.ActorRdfJoinMinusHashUndef=y_e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(mS,t)})(qB);var VB={},wS={};Object.defineProperty(wS,"__esModule",{value:!0});wS.ActorRdfJoinOptionalBind=void 0;const b_e=MR,__e=ct,L1=Ra,pE=Ut,n8=gt;class g_e extends L1.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){e.entries[1].output.bindingsStream.close();const r=e.context.set(pE.KeysQueryOperation.joinLeftMetadata,await e.entries[0].output.metadata()).set(pE.KeysQueryOperation.joinRightMetadatas,[await e.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:b_e.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,e.entries[0].output.bindingsStream,[e.entries[1].operation],async(a,s)=>{const o=a[0];return __e.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:o,context:r==null?void 0:r.set(pE.KeysQueryOperation.joinBindings,s)})).bindingsStream},!0),metadata:async()=>await this.constructResultMetadata(e.entries,await L1.ActorRdfJoin.getMetadatas(e.entries),e.context,{canContainUndefs:!0})}}}async getJoinCoefficients(e,r){const n=L1.ActorRdfJoin.getRequestInitialTimes(r),a=L1.ActorRdfJoin.getRequestItemTimes(r);if(e.entries[1].operation.type===n8.Algebra.types.EXTEND||e.entries[1].operation.type===n8.Algebra.types.GROUP)throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const s=(await this.mediatorJoinSelectivity.mediate({entries:e.entries,context:e.context})).selectivity*this.selectivityModifier;return{iterations:r[0].cardinality.value*r[1].cardinality.value*s,persistedItems:0,blockingItems:0,requestTime:n[0]+r[0].cardinality.value*s*(a[0]+n[1]+r[1].cardinality.value*a[1])}}}wS.ActorRdfJoinOptionalBind=g_e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(wS,t)})(VB);var HB={},SS={};Object.defineProperty(SS,"__esModule",{value:!0});SS.ActorRdfJoinOptionalNestedLoop=void 0;const Ih=Ra,m_e=yS;class v_e extends Ih.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new m_e.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,Ih.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await Ih.ActorRdfJoin.getMetadatas(e.entries),e.context,{canContainUndefs:!0})}}}async getJoinCoefficients(e,r){const n=Ih.ActorRdfJoin.getRequestInitialTimes(r),a=Ih.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value*r[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:n[0]+r[0].cardinality.value*a[0]+n[1]+r[1].cardinality.value*a[1]}}}SS.ActorRdfJoinOptionalNestedLoop=v_e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(SS,t)})(HB);var kB={},TS={},ES={};Object.defineProperty(ES,"__esModule",{value:!0});ES.RdfSourceQpf=void 0;const B1=Ht,w_e=ft,QB=Zt,$1=an,Rc=new w_e.DataFactory;class S_e{constructor(e,r,n,a,s,o,u,c,l,d,f){this.mediatorMetadata=e,this.mediatorMetadataExtract=r,this.mediatorDereferenceRdf=n,this.subjectUri=a,this.predicateUri=s,this.objectUri=o,this.graphUri=u,this.url=c,this.context=d,this.cachedQuads={};const h=this.getSearchForm(l);if(!h)throw new Error("Illegal state: found no TPF/QPF search form anymore in metadata.");if(this.searchForm=h,this.defaultGraph=l.defaultGraph?Rc.namedNode(l.defaultGraph):void 0,f){let p=(0,B1.wrap)(f);this.defaultGraph&&(p=this.reverseMapQuadsToDefaultGraph(p)),p.setProperty("metadata",l),this.cacheQuads(p,Rc.variable(""),Rc.variable(""),Rc.variable(""),Rc.variable(""))}}getSearchForm(e){if(!e.searchForms||!e.searchForms.values)return;const{searchForms:r}=e;for(const n of r.values)if(this.graphUri&&this.subjectUri in n.mappings&&this.predicateUri in n.mappings&&this.objectUri in n.mappings&&this.graphUri in n.mappings&&Object.keys(n.mappings).length===4||this.subjectUri in n.mappings&&this.predicateUri in n.mappings&&this.objectUri in n.mappings&&Object.keys(n.mappings).length===3)return n}createFragmentUri(e,r,n,a,s){const o={},u=[{uri:this.subjectUri,term:r},{uri:this.predicateUri,term:n},{uri:this.objectUri,term:a},{uri:this.graphUri,term:s}];for(const c of u)c.uri&&c.term.termType!=="Variable"&&(c.term.termType!=="Quad"||(0,$1.everyTermsNested)(c.term,l=>l.termType!=="Variable"))&&(o[c.uri]=(0,QB.termToString)(c.term));return e.getUri(o)}match(e,r,n,a){let s=!1;if(a.termType==="DefaultGraph"){if(this.defaultGraph)s=!0,a=this.defaultGraph;else if(Object.keys(this.searchForm.mappings).length===4&&!this.defaultGraph){const c=new B1.ArrayIterator([],{autoStart:!1});return c.setProperty("metadata",{requestTime:0,cardinality:{type:"exact",value:0},first:null,next:null,last:null,canContainUndefs:!1}),c}}const o=this.getCachedQuads(e,r,n,a);if(o)return o;const u=new B1.TransformIterator(async()=>{var b;let c=this.createFragmentUri(this.searchForm,e,r,n,a);const l=await this.mediatorDereferenceRdf.mediate({context:this.context,url:c});c=l.url;const d=await this.mediatorMetadata.mediate({context:this.context,url:c,quads:l.data,triples:(b=l.metadata)==null?void 0:b.triples}),f=this.mediatorMetadataExtract.mediate({context:this.context,url:c,metadata:d.metadata,requestTime:l.requestTime}).then(({metadata:_})=>u.setProperty("metadata",{..._,canContainUndefs:!1,subsetOf:this.url})),h=Rc.defaultGraph();let p=(0,B1.wrap)(d.data).transform({filter(_){return(0,$1.matchPattern)(_,e,r,n,a)?!0:s&&(0,$1.matchPattern)(_,e,r,n,h)}});return(s||a.termType==="Variable")&&(p=this.reverseMapQuadsToDefaultGraph(p)),p.on("error",()=>{}),await f,p},{autoStart:!1});return this.cacheQuads(u,e,r,n,a),this.getCachedQuads(e,r,n,a)}reverseMapQuadsToDefaultGraph(e){const r=Rc.defaultGraph();return e.map(n=>(0,$1.mapTerms)(n,(a,s)=>s==="graph"&&a.equals(this.defaultGraph)?r:a))}getPatternId(e,r,n,a){return JSON.stringify({s:e.termType==="Variable"?"":U1(e),p:r.termType==="Variable"?"":U1(r),o:n.termType==="Variable"?"":U1(n),g:a.termType==="Variable"?"":U1(a)})}cacheQuads(e,r,n,a,s){const o=this.getPatternId(r,n,a,s);this.cachedQuads[o]=e.clone()}getCachedQuads(e,r,n,a){const s=this.getPatternId(e,r,n,a),o=this.cachedQuads[s];if(o)return o.clone()}}ES.RdfSourceQpf=S_e;function U1(t){return t.termType==="DefaultGraph"?"|":(0,QB.termToString)(t)}Object.defineProperty(TS,"__esModule",{value:!0});TS.ActorRdfResolveHypermediaQpf=void 0;const T_e=Hv,E_e=ES;class O_e extends T_e.ActorRdfResolveHypermedia{constructor(e){super(e,"qpf")}async testMetadata(e){const{searchForm:r}=this.createSource(e.url,e.metadata,e.context);if(e.handledDatasets&&e.handledDatasets[r.dataset])throw new Error(`Actor ${this.name} can only be applied for the first page of a QPF dataset.`);return{filterFactor:1}}async run(e){this.logInfo(e.context,`Identified as qpf source: ${e.url}`);const r=this.createSource(e.url,e.metadata,e.context,e.quads);return{source:r,dataset:r.searchForm.dataset}}createSource(e,r,n,a){return new E_e.RdfSourceQpf(this.mediatorMetadata,this.mediatorMetadataExtract,this.mediatorDereferenceRdf,this.subjectUri,this.predicateUri,this.objectUri,this.graphUri,e,r,n,a)}}TS.ActorRdfResolveHypermediaQpf=O_e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(TS,t)})(kB);var GB={},OS={},dy={},AS={},xS={};Object.defineProperty(xS,"__esModule",{value:!0});xS.LinkedRdfSourcesAsyncRdfIterator=void 0;const A_e=oa,x_e=Ht,R_e=fs;class I_e extends x_e.BufferedIterator{constructor(e,r,n,a,s,o,u,c){if(super({autoStart:!0,...c}),this.started=!1,this.currentIterators=[],this.iteratorsPendingCreation=0,this.accumulatedMetadata=Promise.resolve(void 0),this.cacheSize=e,this.subject=r,this.predicate=n,this.object=a,this.graph=s,this.firstUrl=o,this.maxIterators=u,this.maxIterators<=0)throw new Error(`LinkedRdfSourcesAsyncRdfIterator.maxIterators must be larger than zero, but got ${this.maxIterators}`)}_end(e){for(const r of this.currentIterators)r.destroy();super._end(e)}setSourcesState(e){e?this.sourcesState=e:(this.sourcesState={sources:new R_e.LRUCache({max:this.cacheSize})},this.getSourceCached({url:this.firstUrl},{}).catch(r=>this.destroy(r)))}getSourceCached(e,r){let n=this.sourcesState.sources.get(e.url);return n||(n=this.getSource(e,r),(e.url===this.firstUrl||this.shouldStoreSourcesStates())&&this.sourcesState.sources.set(e.url,n),n)}shouldStoreSourcesStates(){return!0}_read(e,r){if(!this.started)this.started=!0,this.sourcesState||this.setSourcesState(),this.getSourceCached({url:this.firstUrl},{}).then(n=>{this.startIterator(n,!0),r()}).catch(n=>setTimeout(()=>this.destroy(n)));else{for(const n of this.currentIterators){for(;e>0;){const a=n.read();if(a!==null)e--,this._push(a);else break}if(e<=0)break}e>=0&&this.canStartNewIterator()?this.getSourceCached({url:this.firstUrl},{}).then(n=>{this.startIteratorsForNextUrls(n.handledDatasets,!1),r()}).catch(n=>this.destroy(n)):r()}}canStartNewIterator(){return this.currentIterators.length+this.iteratorsPendingCreation<this.maxIterators&&!this.readable}areIteratorsRunning(){return this.currentIterators.length+this.iteratorsPendingCreation>0}startIterator(e,r){const n=e.source.match(this.subject,this.predicate,this.object,this.graph);this.currentIterators.push(n);let a=!1;n._destination=this,n.on("error",s=>this.destroy(s)),n.on("readable",()=>this._fillBuffer()),n.on("end",()=>{this.currentIterators.splice(this.currentIterators.indexOf(n),1),a&&this.startIteratorsForNextUrls(e.handledDatasets,!0)}),n.getProperty("metadata",s=>{this.accumulatedMetadata=this.accumulatedMetadata.then(o=>(async()=>(o||(o=e.metadata),this.accumulateMetadata(o,s)))().then(u=>{const c={...e.metadata,...s,...u};return c.state=new A_e.MetadataValidationState,this.updateMetadata(c),this.getSourceLinks(c).then(l=>Promise.all(l)).then(async l=>{const d=await this.getLinkQueue();for(const f of l)d.push(f,e.link);a=!0,this.startIteratorsForNextUrls(e.handledDatasets,!0)}).catch(l=>this.destroy(l)),c})).catch(o=>(this.destroy(o),{}))})}updateMetadata(e){const r=this.getProperty("metadata");this.setProperty("metadata",e),r==null||r.state.invalidate()}isRunning(){return!this.done}startIteratorsForNextUrls(e,r){this.getLinkQueue().then(n=>{for(;this.canStartNewIterator()&&this.isRunning();){const a=n.pop();if(a)this.iteratorsPendingCreation++,this.getSourceCached(a,e).then(s=>{this.iteratorsPendingCreation--,this.startIterator(s,!1)}).catch(s=>this.destroy(s));else break}r&&this.isCloseable(n)&&this.close()}).catch(n=>this.destroy(n))}isCloseable(e){return e.isEmpty()&&!this.areIteratorsRunning()}}xS.LinkedRdfSourcesAsyncRdfIterator=I_e;Object.defineProperty(AS,"__esModule",{value:!0});AS.MediatedLinkedRdfSourcesAsyncRdfIterator=void 0;const P_e=ft,D_e=Xt,N_e=xS,q1=new P_e.DataFactory;class j_e extends N_e.LinkedRdfSourcesAsyncRdfIterator{constructor(e,r,n,a,s,o,u,c,l,d,f){super(e,a,s,o,u,c,l,d?{maxBufferSize:Number.POSITIVE_INFINITY}:void 0),this.wasForcefullyClosed=!1,this.context=r,this.forceSourceType=n,this.mediatorDereferenceRdf=f.mediatorDereferenceRdf,this.mediatorMetadata=f.mediatorMetadata,this.mediatorMetadataExtract=f.mediatorMetadataExtract,this.mediatorMetadataAccumulate=f.mediatorMetadataAccumulate,this.mediatorRdfResolveHypermedia=f.mediatorRdfResolveHypermedia,this.mediatorRdfResolveHypermediaLinks=f.mediatorRdfResolveHypermediaLinks,this.mediatorRdfResolveHypermediaLinksQueue=f.mediatorRdfResolveHypermediaLinksQueue,this.handledUrls={[c]:!0},this.aggregatedStore=d}close(){if(!this.aggregatedStore){super.close();return}this.getLinkQueue().then(e=>{var r;this.isCloseable(e)?((r=this.aggregatedStore)==null||r.end(),super.close()):this.wasForcefullyClosed=!0}).catch(e=>super.destroy(e))}destroy(e){if(!this.aggregatedStore){super.destroy(e);return}this.getLinkQueue().then(r=>{var n;e||this.isCloseable(r)?((n=this.aggregatedStore)==null||n.end(),super.destroy(e)):this.wasForcefullyClosed=!0}).catch(r=>super.destroy(r))}isCloseable(e){return(this.wasForcefullyClosed||e.isEmpty())&&!this.areIteratorsRunning()}canStartNewIterator(){return!this.wasForcefullyClosed&&this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||super.canStartNewIterator()}isRunning(){return this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||!this.done}shouldStoreSourcesStates(){return this.aggregatedStore===void 0}getLinkQueue(){return this.linkQueue||(this.linkQueue=this.mediatorRdfResolveHypermediaLinksQueue.mediate({firstUrl:this.firstUrl,context:this.context}).then(e=>e.linkQueue)),this.linkQueue}async getSourceLinks(e){try{const{links:r}=await this.mediatorRdfResolveHypermediaLinks.mediate({context:this.context,metadata:e});return r.filter(n=>this.handledUrls[n.url]?!1:(this.handledUrls[n.url]=!0,!0))}catch{return[]}}async getSource(e,r){var l,d,f,h;let n=this.context;e.context&&(n=n.merge(e.context));let a=e.url,s,o;try{const p=await this.mediatorDereferenceRdf.mediate({context:n,url:a});a=p.url;const b=await this.mediatorMetadata.mediate({context:n,url:a,quads:p.data,triples:(l=p.metadata)==null?void 0:l.triples});b.data.on("error",()=>{}),o=(await this.mediatorMetadataExtract.mediate({context:n,url:a,metadata:b.metadata,headers:p.headers,requestTime:p.requestTime})).metadata,s=b.data,e.transform&&(s=await e.transform(s))}catch(p){s=new D_e.Readable,s.read=()=>(setTimeout(()=>s.emit("error",p)),null),o={}}(d=this.aggregatedStore)==null||d.setBaseMetadata(o,!1),(f=this.aggregatedStore)==null||f.containedSources.add(e.url),(h=this.aggregatedStore)==null||h.import(s);const{source:u,dataset:c}=await this.mediatorRdfResolveHypermedia.mediate({context:n,forceSourceType:this.forceSourceType,handledDatasets:r,metadata:o,quads:s,url:a});return c&&(r[c]=!0),{link:e,source:u,metadata:o,handledDatasets:r}}startIterator(e,r){var n;if(this.aggregatedStore&&!this.aggregatedStore.containedSources.has(e.link.url)){(n=this.aggregatedStore)==null||n.containedSources.add(e.link.url);const a=e.source.match(q1.variable("s"),q1.variable("p"),q1.variable("o"),q1.variable("g"),this.context);this.aggregatedStore.import(a).on("end",()=>{super.startIterator(e,r)})}else super.startIterator(e,r)}async accumulateMetadata(e,r){return(await this.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:e,appendingMetadata:r,context:this.context})).metadata}updateMetadata(e){var r;super.updateMetadata(e),(r=this.aggregatedStore)==null||r.setBaseMetadata(e,!0)}}AS.MediatedLinkedRdfSourcesAsyncRdfIterator=j_e;var RS={},zB={},fy={};Object.defineProperty(fy,"__esModule",{value:!0});fy.PendingStreamsIndex=void 0;const i8=Zt,a8=an;class Ps{constructor(){this.indexedStreams=new Map,this.allStreams=[]}termToString(e){return e&&e.termType!=="Variable"?(0,i8.termToString)(e):Ps.ID_VARIABLE}addPatternListener(e,r,n,a,s){this.allStreams.push(e);const o=`${this.termToString(r)}${Ps.ID_SEPARATOR}${this.termToString(n)}${Ps.ID_SEPARATOR}${this.termToString(a)}${Ps.ID_SEPARATOR}${this.termToString(s)}`;let u=this.indexedStreams.get(o);u||(u=[],this.indexedStreams.set(o,u)),u.push(e)}getPendingStreamsForQuad(e){let r=[(0,a8.getTerms)(e).map(a=>(0,i8.termToString)(a))];for(let a=0;a<a8.QUAD_TERM_NAMES.length;a++){const s=r;r=[];for(const o of s){r.push(o);const u=[...o];u[a]=Ps.ID_VARIABLE,r.push(u)}}const n=[];for(const a of r){const s=this.indexedStreams.get(a.join(Ps.ID_SEPARATOR));s&&n.push(...s)}return n}}fy.PendingStreamsIndex=Ps;Ps.ID_VARIABLE="?";Ps.ID_SEPARATOR=":";var IS={};Object.defineProperty(IS,"__esModule",{value:!0});IS.StreamingStore=void 0;const C_e=tu,M_e=Xt,F_e=fy;class L_e{constructor(e=new C_e.Store){this.pendingStreams=new F_e.PendingStreamsIndex,this.ended=!1,this.store=e}end(){this.ended=!0;for(const e of this.pendingStreams.allStreams)e.push(null),e._pipeSource.unpipe()}importToListeners(e){e.on("data",r=>{for(const n of this.pendingStreams.getPendingStreamsForQuad(r))this.ended||(n.push(r),n.emit("quad",r))})}import(e){if(this.ended)throw new Error("Attempted to import into an ended StreamingStore");return this.importToListeners(e),this.store.import(e)}match(e,r,n,a){const s=this.store.match(e,r,n,a);let o=s;if(!this.ended){const u=new M_e.PassThrough({objectMode:!0});this.pendingStreams.addPatternListener(u,e,r,n,a),o=s.pipe(u,{end:!1}),o._pipeSource=s}return o}getStore(){return this.store}}IS.StreamingStore=L_e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(fy,t),r(IS,t)})(zB);Object.defineProperty(RS,"__esModule",{value:!0});RS.StreamingStoreMetadata=void 0;const B_e=ct,V1=oa,$_e=zB;class U_e extends $_e.StreamingStore{constructor(e,r){super(e),this.started=!1,this.containedSources=new Set,this.runningIterators=new Set,this.baseMetadata={state:new V1.MetadataValidationState,cardinality:{type:"exact",value:0},canContainUndefs:!1},this.metadataAccumulator=r}import(e){return this.ended||super.import(e),e}hasRunningIterators(){return this.runningIterators.size>0}match(e,r,n,a){const s=super.match(e,r,n,a),o=new B_e.ClosableTransformIterator(s,{autoStart:!1,onClose:()=>{this.runningIterators.delete(o)}});let u=this.getStore().countQuads(e,r,n,a);const c={state:new V1.MetadataValidationState,cardinality:{type:"estimate",value:u},canContainUndefs:!1};return o.setProperty("metadata",c),o.setProperty("lastCount",u),s.on("quad",()=>{o.setProperty("lastCount",++u),this.updateMetadataState(o,u)}),this.runningIterators.add(o),o}setBaseMetadata(e,r){if(this.baseMetadata={...e},this.baseMetadata.cardinality={type:"exact",value:0},r)for(const n of this.runningIterators){const a=n.getProperty("lastCount");this.updateMetadataState(n,a)}}updateMetadataState(e,r){const n={state:new V1.MetadataValidationState,cardinality:{type:"estimate",value:r},canContainUndefs:!1};this.metadataAccumulator(this.baseMetadata,n).then(a=>{a.state=new V1.MetadataValidationState;const s=e.getProperty("metadata");e.setProperty("metadata",a),s==null||s.state.invalidate()}).catch(()=>{})}}RS.StreamingStoreMetadata=U_e;Object.defineProperty(dy,"__esModule",{value:!0});dy.MediatedQuadSource=void 0;const q_e=Ut,V_e=AS,H_e=RS;class Ed{constructor(e,r,n,a,s,o){this.cacheSize=e,this.firstUrl=r,this.forceSourceType=n,this.maxIterators=a,this.aggregateStore=s,this.mediators=o}static nullifyVariables(e){return!e||e.termType==="Variable"?void 0:e}match(e,r,n,a,s){let o;if(this.aggregateStore){const c=s.get(q_e.KeysRdfResolveQuadPattern.hypermediaSourcesAggregatedStores);if(c&&(o=c.get(this.firstUrl),o||(o=new H_e.StreamingStoreMetadata(void 0,(l,d)=>u.accumulateMetadata(l,d)),c.set(this.firstUrl,o)),o.started))return o.match(Ed.nullifyVariables(e),Ed.nullifyVariables(r),Ed.nullifyVariables(n),Ed.nullifyVariables(a))}const u=new V_e.MediatedLinkedRdfSourcesAsyncRdfIterator(this.cacheSize,s,this.forceSourceType,e,r,n,a,this.firstUrl,this.maxIterators,o,this.mediators);return this.sourcesState?u.setSourcesState(this.sourcesState):(u.setSourcesState(),this.sourcesState=u.sourcesState),o&&(o.started=!0),u}}dy.MediatedQuadSource=Ed;Object.defineProperty(OS,"__esModule",{value:!0});OS.ActorRdfResolveQuadPatternHypermedia=void 0;const Ph=xl,k_e=fs,Q_e=dy;class G_e extends Ph.ActorRdfResolveQuadPatternSource{constructor(e){super(e),this.cache=this.cacheSize?new k_e.LRUCache({max:this.cacheSize}):void 0;const r=this.cache;r&&this.httpInvalidator.addInvalidateListener(({url:n})=>n?r.delete(n):r.clear()),e.mediatorMetadataAccumulate||(this.mediatorMetadataAccumulate={async mediate(n){return{metadata:{...n.accumulatedMetadata,...n.appendingMetadata}}}})}async test(e){if(!(0,Ph.hasContextSingleSource)(e.context))throw new Error(`Actor ${this.name} can only resolve quad pattern queries against a single source.`);return!0}getSource(e,r){const n=(0,Ph.getContextSource)(e),a=(0,Ph.getContextSourceUrl)(n);let s;return this.cache&&this.cache.has(a)?s=this.cache.get(a):(s=new Q_e.MediatedQuadSource(this.cacheSize,a,(0,Ph.getDataSourceType)(n),this.maxIterators,this.aggregateStore,{mediatorMetadata:this.mediatorMetadata,mediatorMetadataExtract:this.mediatorMetadataExtract,mediatorMetadataAccumulate:this.mediatorMetadataAccumulate,mediatorDereferenceRdf:this.mediatorDereferenceRdf,mediatorRdfResolveHypermedia:this.mediatorRdfResolveHypermedia,mediatorRdfResolveHypermediaLinks:this.mediatorRdfResolveHypermediaLinks,mediatorRdfResolveHypermediaLinksQueue:this.mediatorRdfResolveHypermediaLinksQueue}),this.cache&&this.cache.set(a,s)),Promise.resolve(s)}}OS.ActorRdfResolveQuadPatternHypermedia=G_e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(OS,t),r(dy,t)})(GB);var WB={},PS={};Object.defineProperty(PS,"__esModule",{value:!0});PS.ActorRdfUpdateQuadsHypermedia=void 0;const sd=$f,z_e=fs;class W_e extends sd.ActorRdfUpdateQuadsDestination{constructor(e){super(e),this.cache=this.cacheSize?new z_e.LRUCache({max:this.cacheSize}):void 0;const r=this.cache;r&&this.httpInvalidator.addInvalidateListener(({url:n})=>n?r.delete(n):r.clear())}async test(e){if(!(0,sd.getContextDestinationUrl)((0,sd.getContextDestination)(e.context)))throw new Error(`Actor ${this.name} can only update quads against a single destination URL.`);return!0}getDestination(e){const r=(0,sd.getContextDestination)(e);let n=(0,sd.getContextDestinationUrl)(r);if(this.cache&&this.cache.has(n))return this.cache.get(n);const a=(async()=>{var c;let s,o;try{const l=await this.mediatorDereferenceRdf.mediate({context:e,url:n,acceptErrors:!0});o=l.exists,n=l.url;const d=await this.mediatorMetadata.mediate({context:e,url:n,quads:l.data,triples:(c=l.metadata)==null?void 0:c.triples});s=(await this.mediatorMetadataExtract.mediate({context:e,url:n,metadata:d.metadata,headers:l.headers,requestTime:l.requestTime})).metadata}catch{s={},o=!1}const{destination:u}=await this.mediatorRdfUpdateHypermedia.mediate({context:e,url:n,metadata:s,exists:o,forceDestinationType:(0,sd.getDataDestinationType)(r)});return u})();return this.cache&&this.cache.set(n,a),a}}PS.ActorRdfUpdateQuadsHypermedia=W_e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(PS,t)})(WB);var XB={},DS={};Object.defineProperty(DS,"__esModule",{value:!0});DS.ActorQueryOperationClear=void 0;const s8=ct,X_e=ft,K_e=new X_e.DataFactory;class J_e extends s8.ActorQueryOperationTypedMediated{constructor(e){super(e,"clear")}async testOperation(e,r){return s8.ActorQueryOperation.throwOnReadOnly(r),!0}async runOperation(e,r){let n;e.source==="DEFAULT"?n=K_e.defaultGraph():typeof e.source=="string"?n=e.source:n=[e.source];const{execute:a}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:n,requireExistence:!e.silent,dropGraphs:!1},context:r});return{type:"void",execute:a}}}DS.ActorQueryOperationClear=J_e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(DS,t)})(XB);var KB={},NS={};Object.defineProperty(NS,"__esModule",{value:!0});NS.ActorQueryOperationCreate=void 0;const o8=ct;class Y_e extends o8.ActorQueryOperationTypedMediated{constructor(e){super(e,"create")}async testOperation(e,r){return o8.ActorQueryOperation.throwOnReadOnly(r),!0}async runOperation(e,r){const{execute:n}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[e.source],requireNonExistence:!e.silent},context:r});return{type:"void",execute:n}}}NS.ActorQueryOperationCreate=Y_e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(NS,t)})(KB);var JB={},jS={};Object.defineProperty(jS,"__esModule",{value:!0});jS.ActorQueryOperationUpdateDeleteInsert=void 0;const H1=bR,Z_e=$n,yE=ct,ege=Ht,tge=new Z_e.BindingsFactory;class rge extends yE.ActorQueryOperationTypedMediated{constructor(e){super(e,"deleteinsert"),this.blankNodeCounter=0}async testOperation(e,r){return yE.ActorQueryOperation.throwOnReadOnly(r),!0}async runOperation(e,r){const n=e.where?yE.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.where,context:r})).bindingsStream:new ege.ArrayIterator([tge.bindings()],{autoStart:!1});let a,s;e.insert&&(a=new H1.BindingsToQuadsIterator(e.insert.map(H1.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),n.clone()),this.blankNodeCounter++),e.delete&&(s=new H1.BindingsToQuadsIterator(e.delete.map(H1.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),n.clone()),this.blankNodeCounter++);const{execute:o}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:a,quadStreamDelete:s,context:r});return{type:"void",execute:o}}}jS.ActorQueryOperationUpdateDeleteInsert=rge;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(jS,t)})(JB);var YB={},CS={};Object.defineProperty(CS,"__esModule",{value:!0});CS.ActorQueryOperationDrop=void 0;const u8=ct,nge=ft,ige=new nge.DataFactory;class age extends u8.ActorQueryOperationTypedMediated{constructor(e){super(e,"drop")}async testOperation(e,r){return u8.ActorQueryOperation.throwOnReadOnly(r),!0}async runOperation(e,r){let n;e.source==="DEFAULT"?n=ige.defaultGraph():typeof e.source=="string"?n=e.source:n=[e.source];const{execute:a}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:n,requireExistence:!e.silent,dropGraphs:!0},context:r});return{type:"void",execute:a}}}CS.ActorQueryOperationDrop=age;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(CS,t)})(YB);var ZB={},MS={};Object.defineProperty(MS,"__esModule",{value:!0});MS.ActorQueryOperationLoad=void 0;const c8=ct,l8=Ut,sge=ft,oge=gt,Ic=new sge.DataFactory;class LR extends c8.ActorQueryOperationTypedMediated{constructor(e){super(e,"load"),this.factory=new oge.Factory,this.constructOperation=this.factory.createConstruct(this.factory.createPattern(Ic.variable("s"),Ic.variable("p"),Ic.variable("o")),[this.factory.createPattern(Ic.variable("s"),Ic.variable("p"),Ic.variable("o"))])}async testOperation(e,r){return c8.ActorQueryOperation.throwOnReadOnly(r),!0}async runOperation(e,r){let n=r.set(l8.KeysRdfResolveQuadPattern.sources,[e.source.value]);e.silent&&(n=n.set(l8.KeysInitQuery.lenient,!0));let s=LR.getSafeQuads(await this.mediatorQueryOperation.mediate({operation:this.constructOperation,context:n})).quadStream;e.destination&&(s=s.map(u=>Ic.quad(u.subject,u.predicate,u.object,e.destination)));const{execute:o}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:s,context:r});return{type:"void",execute:o}}}MS.ActorQueryOperationLoad=LR;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(MS,t)})(ZB);var e$={},FS={};Object.defineProperty(FS,"__esModule",{value:!0});FS.ActorQueryOperationJoin=void 0;const d8=ct;class uge extends d8.ActorQueryOperationTypedMediated{constructor(e){super(e,"join")}async testOperation(e,r){return!0}async runOperation(e,r){const n=(await Promise.all(e.input.map(async a=>({output:await this.mediatorQueryOperation.mediate({operation:a,context:r}),operation:a})))).map(({output:a,operation:s})=>({output:d8.ActorQueryOperation.getSafeBindings(a),operation:s}));return this.mediatorJoin.mediate({type:"inner",entries:n,context:r})}}FS.ActorQueryOperationJoin=uge;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(FS,t)})(e$);var t$={},LS={};Object.defineProperty(LS,"__esModule",{value:!0});LS.ActorQueryOperationLeftJoin=void 0;const bE=ct,f8=Il;class cge extends bE.ActorQueryOperationTypedMediated{constructor(e){super(e,"leftjoin")}async testOperation(e,r){return!0}async runOperation(e,r){const n=(await Promise.all(e.input.map(async s=>({output:await this.mediatorQueryOperation.mediate({operation:s,context:r}),operation:s})))).map(({output:s,operation:o})=>({output:bE.ActorQueryOperation.getSafeBindings(s),operation:o})),a=await this.mediatorJoin.mediate({type:"optional",entries:n,context:r});if(e.expression){const o=(await n[1].output.metadata()).variables,u={...bE.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation)},c=new f8.AsyncEvaluator(e.expression,u),l=a.bindingsStream.transform({autoStart:!1,transform:async(d,f,h)=>{if(!o.every(p=>d.has(p.value)))return h(d),f();try{await c.evaluateAsEBV(d)&&h(d)}catch(p){(0,f8.isExpressionError)(p)?this.logWarn(r,"Error occurred while filtering.",()=>({error:p,bindings:d})):l.emit("error",p)}f()}});a.bindingsStream=l}return a}}LS.ActorQueryOperationLeftJoin=cge;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(LS,t)})(t$);var r$={},BS={};Object.defineProperty(BS,"__esModule",{value:!0});BS.ActorQueryOperationMinus=void 0;const h8=ct;class lge extends h8.ActorQueryOperationTypedMediated{constructor(e){super(e,"minus")}async testOperation(e,r){return!0}async runOperation(e,r){const n=(await Promise.all(e.input.map(async a=>({output:await this.mediatorQueryOperation.mediate({operation:a,context:r}),operation:a})))).map(({output:a,operation:s})=>({output:h8.ActorQueryOperation.getSafeBindings(a),operation:s}));return this.mediatorJoin.mediate({type:"minus",entries:n,context:r})}}BS.ActorQueryOperationMinus=lge;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(BS,t)})(r$);var n$={},$S={};Object.defineProperty($S,"__esModule",{value:!0});$S.ActorQueryOperationPathSeq=void 0;const p8=ru,y8=ct,dge=gt;class fge extends p8.ActorAbstractPath{constructor(e){super(e,dge.Algebra.types.SEQ)}async runOperation(e,r){const n=e.predicate;let a=e.subject;const s=[],o=await Promise.all(n.input.map((l,d)=>{const f=d===n.input.length-1?e.object:this.generateVariable(e,`b${d}`),h=p8.ActorAbstractPath.FACTORY.createPath(a,l,f,e.graph),p=this.mediatorQueryOperation.mediate({context:r,operation:h});return a=f,d<n.input.length-1&&s.push(f),{output:p,operation:h}}).map(async({output:l,operation:d})=>({output:y8.ActorQueryOperation.getSafeBindings(await l),operation:d}))),u=y8.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:"inner",entries:o,context:r}));return{type:"bindings",bindingsStream:u.bindingsStream.transform({transform(l,d,f){for(const h of s)l=l.delete(h);f(l),d()}}),async metadata(){const l=await u.metadata(),d=l.variables.filter(f=>!s.some(h=>h.value===f.value));return{...l,variables:d}}}}}$S.ActorQueryOperationPathSeq=fge;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r($S,t)})(n$);var i$={},US={};Object.defineProperty(US,"__esModule",{value:!0});US.ActorRdfJoinMultiSmallest=void 0;const hge=ct,k1=Ra,pge=gt;class qS extends k1.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0,canHandleUndefs:!0})}async sortJoinEntries(e,r){return(await this.mediatorJoinEntriesSort.mediate({entries:e,context:r})).entries}async getOutput(e){const r=await this.sortJoinEntries(await k1.ActorRdfJoin.getEntriesWithMetadatas([...e.entries]),e.context),n=r[0],a=r[1];r.splice(0,2);const s={output:hge.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:e.type,entries:[n,a],context:e.context})),operation:qS.FACTORY.createJoin([n.operation,a.operation],!1)};return r.push(s),{result:await this.mediatorJoin.mediate({type:e.type,entries:r,context:e.context})}}async getJoinCoefficients(e,r){r=[...r],r=(await this.sortJoinEntries(e.entries.map((o,u)=>({...o,metadata:r[u]})),e.context)).map(o=>o.metadata);const a=k1.ActorRdfJoin.getRequestInitialTimes(r),s=k1.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value*r[1].cardinality.value*r.slice(2).reduce((o,u)=>o*u.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:a[0]+r[0].cardinality.value*s[0]+a[1]+r[1].cardinality.value*s[1]+r.slice(2).reduce((o,u,c)=>o+a.slice(2)[c]+u.cardinality.value*s.slice(2)[c],0)}}}US.ActorRdfJoinMultiSmallest=qS;qS.FACTORY=new pge.Factory;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(US,t)})(i$);var a$={},VS={};Object.defineProperty(VS,"__esModule",{value:!0});VS.ActorQueryOperationQuadpattern=void 0;const yge=$n,b8=ct,bge=Ut,_ge=ft,gge=Zt,Pc=an,mge=gt,vge=new yge.BindingsFactory,_E=new _ge.DataFactory,wge=new mge.Factory;class Os extends b8.ActorQueryOperationTyped{constructor(e){super(e,"pattern")}static isTermVariable(e){return e.termType==="Variable"}static getVariables(e){return(0,Pc.uniqTerms)((0,Pc.getTermsNested)(e).filter(Os.isTermVariable))}static getDuplicateElementLinks(e){const r={};let n=!1;if((0,Pc.forEachTermsNested)(e,(s,o)=>{if(s.termType==="Variable"){const u=(0,gge.termToString)(s),c=(r[u]||(r[u]=[])).push(o);n=n||c>1}}),!n)return;const a={};for(const s in r){const o=r[s],u=o.slice(1);u.length>0&&(a[o[0].join("_")]=u)}return a}static validateMetadata(e){for(const r of["cardinality","canContainUndefs"])if(!(r in e))throw new Error(`Invalid metadata: missing ${r} in ${JSON.stringify(e)}`);return e}static getMetadata(e,r,n){return()=>new Promise((a,s)=>{e.getProperty("metadata",o=>a(o)),e.on("error",s)}).then(a=>("canContainUndefs"in a||(a.canContainUndefs=!1),Os.quadsMetadataToBindingsMetadata(Os.validateMetadata(a),r,n)))}static quadsMetadataToBindingsMetadata(e,r,n){return{...e,order:e.order?Os.quadsOrderToBindingsOrder(e.order,r):void 0,availableOrders:e.availableOrders?e.availableOrders.map(a=>({cost:a.cost,terms:Os.quadsOrderToBindingsOrder(a.terms,r)})):void 0,variables:n}}static quadsOrderToBindingsOrder(e,r){const n={};return e.map(a=>{const s=r[a.term];if(s&&!n[s])return n[s]=!0,{term:_E.variable(s),direction:a.direction}}).filter(a=>!!a)}async testOperation(e,r){return!0}async runOperation(e,r){e.context&&(r=r.merge(e.context));let n=e;const a=this.unionDefaultGraph||r.get(bge.KeysQueryOperation.unionDefaultGraph);e.graph.termType==="DefaultGraph"&&a&&(n=wge.createPattern(e.subject,e.predicate,e.object,_E.variable("__comunica:defaultGraph")));const s=await this.mediatorResolveQuadPattern.mediate({pattern:n,context:r}),o=Os.getVariables(e),u=(0,Pc.reduceTermsNested)(e,(d,f,h)=>(f.termType==="Variable"&&(d[h.join("_")]=f.value),d),{}),c=Os.getMetadata(s.data,u,o);return{type:"bindings",bindingsStream:new b8.ClosableTransformIterator(async()=>{let d=s.data;const f=Os.getDuplicateElementLinks(e);return e.graph.termType==="Variable"&&!a&&(d=d.filter(h=>h.graph.termType!=="DefaultGraph")),f&&(d=d.filter(h=>{for(const p in f){const b=p.split("_"),_=(0,Pc.getValueNestedPath)(h,b);for(const E of f[p])if(!_.equals((0,Pc.getValueNestedPath)(h,E)))return!1}return!0})),d.map(h=>vge.bindings(Object.keys(u).map(p=>{const b=p.split("_"),_=u[p],E=(0,Pc.getValueNestedPath)(h,b);return[_E.variable(_),E]})))},{autoStart:!1,onClose:()=>s.data.destroy()}),metadata:c}}}VS.ActorQueryOperationQuadpattern=Os;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(VS,t)})(a$);var s$={},HS={};Object.defineProperty(HS,"__esModule",{value:!0});HS.ActorHttpInruptSolidClientAuthn=void 0;const Sge=ls,_8=Ut,Tge=Je;class ju extends Sge.ActorHttp{constructor(e){super(e)}async test(e){if(!e.context||!e.context.has(ju.CONTEXT_KEY_SESSION))throw new Error(`Unable to find Solid authn session in context with key '${ju.CONTEXT_KEY_SESSION.name}'`);if(e.context.has(_8.KeysHttp.fetch))throw new Error("Unable to run when a custom fetch function has been configured");if(!e.context.get(ju.CONTEXT_KEY_SESSION).info.isLoggedIn)throw new Error("The provided Solid authn session is not in a logged in state, make sure to call session.login() first");return!0}async run(e){const r=e.context.get(ju.CONTEXT_KEY_SESSION);return this.logInfo(e.context,`Handling request to ${typeof e.input=="string"?e.input:e.input.url} as authenticated request for ${r.info.webId}`),this.mediatorHttp.mediate({...e,context:e.context.delete(ju.CONTEXT_KEY_SESSION).set(_8.KeysHttp.fetch,r.fetch)})}}HS.ActorHttpInruptSolidClientAuthn=ju;ju.CONTEXT_KEY_SESSION=new Tge.ActionContextKey("@comunica/actor-http-inrupt-solid-client-authn:session");(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(HS,t)})(s$);var o$={},kS={},fl={};Object.defineProperty(fl,"__esModule",{value:!0});fl.ActorDereferenceHttpBase=fl.mediaTypesToAcceptString=void 0;const g8=Xm,m8=ls,Ege=CR,Oge=Oa,Age=Al,xge=/^[^ ;]*/u;function u$(t,e){const r="*/*;q=0.1",n=[],a=Object.entries(t).map(([o,u])=>({mediaType:o,priority:u})).sort((o,u)=>u.priority===o.priority?o.mediaType.localeCompare(u.mediaType):u.priority-o.priority);let s=a.length-1;for(const{mediaType:o,priority:u}of a){const c=o+(u!==1?`;q=${u.toFixed(3).replace(/0*$/u,"")}`:"");if(s+c.length>e){for(;s+r.length>e;){const l=n.pop()||"";s-=l.length+1}n.push(r);break}n.push(c),s+=c.length}return n.length===0?"*/*":n.join(",")}fl.mediaTypesToAcceptString=u$;class Rge extends g8.ActorDereference{constructor(e){super(e)}async test({url:e}){if(!/^https?:/u.test(e))throw new Error(`Cannot retrieve ${e} because it is not an HTTP(S) URL.`);return!0}async run(e){var l,d;let r=!0;const n=new Ege.Headers(e.headers);n.append("Accept",u$(await((l=e.mediaTypes)==null?void 0:l.call(e))??{},this.getMaxAcceptHeaderLength()));let a;const s=Date.now();try{a=await this.mediatorHttp.mediate({context:e.context,init:{headers:n,method:e.method},input:e.url})}catch(f){return this.handleDereferenceErrors(e,f)}const o=(0,Oge.resolve)(a.url,e.url),u=Date.now()-s;if(a.status!==200){r=!1;const f=a.body?await Age(m8.ActorHttp.toNodeReadable(a.body)):"empty response";if(!e.acceptErrors){const h=new Error(`Could not retrieve ${e.url} (HTTP status ${a.status}):
${f}`);return this.handleDereferenceErrors(e,h,a.headers,u)}}const c=(d=xge.exec(a.headers.get("content-type")??""))==null?void 0:d[0];return{url:o,data:r?m8.ActorHttp.toNodeReadable(a.body):(0,g8.emptyReadable)(),exists:r,requestTime:u,headers:a.headers,mediaType:c!=="text/plain"?c:void 0}}}fl.ActorDereferenceHttpBase=Rge;Object.defineProperty(kS,"__esModule",{value:!0});kS.ActorDereferenceHttp=void 0;const Ige=fl;class Pge extends Ige.ActorDereferenceHttpBase{getMaxAcceptHeaderLength(){return this.maxAcceptHeaderLengthBrowser}}kS.ActorDereferenceHttp=Pge;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(kS,t),r(fl,t)})(o$);var c$={},QS={},GS={};Object.defineProperty(GS,"__esModule",{value:!0});GS.storeStream=void 0;const Dge=tu;function Nge(t){const e=new Dge.Store;return new Promise((r,n)=>e.import(t).on("error",n).once("end",()=>r(e)))}GS.storeStream=Nge;Object.defineProperty(QS,"__esModule",{value:!0});QS.ActorExtractLinksSolidTypeIndex=void 0;const jge=y_,Cge=tg,Q1=Ut,G1=pR,Mge=GS,v8=Zt,w8=gt;class $p extends Cge.ActorExtractLinks{constructor(e){super(e),this.queryEngine=new jge.QueryEngineBase(e.actorInitQuery)}async test(e){if(!e.context.get(Q1.KeysInitQuery.query))throw new Error(`Actor ${this.name} can only work in the context of a query.`);if(!e.context.get(Q1.KeysQueryOperation.operation))throw new Error(`Actor ${this.name} can only work in the context of a query operation.`);return!0}async run(e){const r=[...await this.extractTypeIndexLinks(e.metadata)],n=(await Promise.all(r.map(s=>this.dereferenceTypeIndex(s,e.context)))).reduce((s,o)=>{for(const[u,c]of Object.entries(o))s[u]||(s[u]=[]),s[u].push(...c);return s},{});if(Object.keys(n).length===0)return{links:[]};if(this.onlyMatchingTypes)return{links:await this.getLinksMatchingQuery(n,e.context.get(Q1.KeysInitQuery.query),e.context.get(Q1.KeysQueryOperation.operation))};const a=[];for(const s of Object.values(n))a.push(...s);return{links:a}}extractTypeIndexLinks(e){return new Promise((r,n)=>{const a=new Set;e.on("error",n),e.on("data",s=>{this.typeIndexPredicates.includes(s.predicate.value)&&a.add(s.object.value)}),e.on("end",()=>{r(a)})})}async dereferenceTypeIndex(e,r){const n=await this.mediatorDereferenceRdf.mediate({url:e,context:r}),a=await(0,Mge.storeStream)(n.data),s=await(await this.queryEngine.queryBindings(`
        PREFIX solid: <http://www.w3.org/ns/solid/terms#>
        SELECT ?class ?instance WHERE {
          _:registration a solid:TypeRegistration;
            solid:forClass ?class;
            (solid:instance|solid:instanceContainer) ?instance.
        }`,{sources:[a],[G1.KeysRdfResolveHypermediaLinks.traverse.name]:!1,[G1.KeysRdfJoin.skipAdaptiveJoin.name]:!0,lenient:!0})).toArray(),o={};for(const u of s){const c=u.get("class").value;o[c]||(o[c]=[]),o[c].push({url:u.get("instance").value})}return o}async linkPredicateDomains(e,r){if(Object.keys(e).length>0){const n=await Promise.all(Object.keys(e).map(async s=>[s,await this.fetchPredicateDomains(s)])),a=Object.fromEntries(n);for(const[s,o]of Object.entries(e)){const u=a[s];if(u)for(const c of u)r[c]||(r[c]=[]),r[c].push(o)}}}async fetchPredicateDomains(e){const n=await(await this.queryEngine.queryBindings(`
        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
        SELECT * WHERE {
          <${e}> rdfs:domain ?domain.
        }`,{sources:[e],[G1.KeysRdfResolveHypermediaLinks.traverse.name]:!1,[G1.KeysRdfJoin.skipAdaptiveJoin.name]:!0,lenient:!0})).toArray(),a=[];for(const s of n)a.push(s.get("domain").value);return a}async getLinksMatchingQuery(e,r,n){const a=new Set,s={},o={};function u(l,d,f){if(a.add((0,v8.termToString)(l)),d.value===$p.RDF_TYPE&&f.termType==="NamedNode"){const h=f.value;s[h]||(s[h]=[]),s[h].push(l)}d.value!==$p.RDF_TYPE&&(o[d.value]=l)}w8.Util.recurseOperation(r,{pattern(l){return u(l.subject,l.predicate,l.object),!1},path(l){return w8.Util.recurseOperation(l,{link(d){return u(l.subject,d.iri,l.object),!1},nps(d){for(const f of d.iris)u(l.subject,f,l.object);return!1}}),!1}}),this.inference&&await this.linkPredicateDomains(o,s);const c=[];for(const[l,d]of Object.entries(s)){const f=e[l];f&&d.some(h=>h.equals(n.subject))&&c.push(...f);for(const h of d)a.delete((0,v8.termToString)(h))}return a.size>0?Object.values(e).flat():c}}QS.ActorExtractLinksSolidTypeIndex=$p;$p.RDF_TYPE="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(QS,t)})(c$);var l$={},zS={};Object.defineProperty(zS,"__esModule",{value:!0});zS.ActorHttpProxy=void 0;const Fge=ls,gE=Ut;class Lge extends Fge.ActorHttp{constructor(e){super(e)}async test(e){const r=e.context.get(gE.KeysHttpProxy.httpProxyHandler);if(!r)throw new Error(`Actor ${this.name} could not find a proxy handler in the context.`);if(!await r.getProxy(e))throw new Error(`Actor ${this.name} could not determine a proxy for the given request.`);return{time:Number.POSITIVE_INFINITY}}async run(e){const r=typeof e.input=="string"?e.input:e.input.url,n=e.context.get(gE.KeysHttpProxy.httpProxyHandler),a=await this.mediatorHttp.mediate({...await n.getProxy(e),context:e.context.delete(gE.KeysHttpProxy.httpProxyHandler)});return Object.defineProperty(a,"url",{configurable:!0,enumerable:!0,get:()=>a.headers.get("x-final-url")??r}),a}}zS.ActorHttpProxy=Lge;var WS={};Object.defineProperty(WS,"__esModule",{value:!0});WS.ProxyHandlerStatic=void 0;class Bge{constructor(e){this.prefixUrl=e}async getProxy(e){return{init:e.init,input:this.modifyInput(e.input)}}modifyInput(e){return typeof e=="string"?this.prefixUrl+e:new Request(this.prefixUrl+e.url,e)}}WS.ProxyHandlerStatic=Bge;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(zS,t),r(WS,t)})(l$);const $ge=new YC.LoggerVoid,Uge=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^2.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),qf=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-extract-links/^0.0.0/components/ActorExtractLinks.jsonld#ActorExtractLinks_default_bus"}),hy=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^2.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),xt=new ct.BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^2.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),BR=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^2.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),fa=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^2.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),d$=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^2.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),py=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^2.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),f$=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference-rdf/^2.0.0/components/ActorDereferenceRdf.jsonld#ActorDereferenceRdf_default_bus"}),h$=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^2.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),Vf=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/^2.0.0/components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus"}),Hf=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^2.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),p$=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^2.0.0/components/ActorHttp.jsonld#ActorHttp_fallback_bus"}),$R=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference/^2.0.0/components/ActorDereference.jsonld#ActorDereference_default_bus"}),lc=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/^2.0.0/components/ActorRdfParse.jsonld#ActorRdfParse_default_bus"}),y$=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^2.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),b$=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^2.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),UR=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/^2.0.0/components/ActorRdfMetadata.jsonld#ActorRdfMetadata_default_bus"}),yy=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^2.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),no=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/^2.0.0/components/ActorRdfMetadataExtract.jsonld#ActorRdfMetadataExtract_default_bus"}),XS=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/^2.0.0/components/ActorRdfParseHtml.jsonld#ActorRdfParseHtml_default_bus"}),KS=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia/^2.0.0/components/ActorRdfResolveHypermedia.jsonld#ActorRdfResolveHypermedia_default_bus"}),qR=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/^2.0.0/components/ActorRdfResolveHypermediaLinks.jsonld#ActorRdfResolveHypermediaLinks_default_bus"}),_$=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links-queue/^2.0.0/components/ActorRdfResolveHypermediaLinksQueue.jsonld#ActorRdfResolveHypermediaLinksQueue_default_bus"}),JS=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-hypermedia/^2.0.0/components/ActorRdfUpdateHypermedia.jsonld#ActorRdfUpdateHypermedia_default_bus"}),VR=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^2.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),Ia=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^2.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),YS=new Je.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-quad-pattern/^2.0.0/components/ActorRdfResolveQuadPattern.jsonld#ActorRdfResolveQuadPattern_default_bus"});new Z_.ActorExtractLinksPredicates({checkSubject:!1,predicateRegexes:["http://www.w3.org/2000/01/rdf-schema#seeAlso","http://www.w3.org/2002/07/owl##sameAs","http://xmlns.com/foaf/0.1/isPrimaryTopicOf"],name:"urn:comunica:default:extract-links/actors#predicates-common",bus:qf});new Z_.ActorExtractLinksPredicates({checkSubject:!0,predicateRegexes:["http://www.w3.org/ns/ldp#contains"],name:"urn:comunica:default:extract-links/actors#predicates-ldp",bus:qf});new Z_.ActorExtractLinksPredicates({checkSubject:!0,predicateRegexes:["http://www.w3.org/ns/pim/space#storage"],name:"urn:comunica:default:extract-links/actors#predicates-solid",bus:qf});new ZC.ActorExtractLinksQuadPatternQuery({onlyVariables:!0,name:"urn:comunica:default:extract-links/actors#quad-pattern-query",bus:qf});const qge=new e9.MediatorCombineArray({fields:["links","linksConditional"],name:"urn:comunica:default:extract-links/mediators#main",bus:qf}),Vge=new ix.MediatorCombinePipeline({name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:hy});new t9.ActorOptimizeQueryOperationSetSeedSourcesQuadpatternIris({extractSubjects:!0,extractPredicates:!1,extractObjects:!0,extractGraphs:!0,extractVocabIris:!1,name:"urn:comunica:default:optimize-query-operation/actors#set-seed-sources-quadpattern-iris",bus:hy});new r9.ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:hy});new n9.ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:hy});new i9.ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:hy});const It=new If.MediatorNumber({field:"httpRequests",type:"min",ignoreErrors:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:xt});new a9.ActorQueryOperationValues({name:"urn:comunica:default:query-operation/actors#values",bus:xt});const Hge=new xi.MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:BR});new s9.ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:BR});new o9.ActorQueryParseGraphql({name:"urn:comunica:default:query-parse/actors#graphql",bus:BR});const kge=new xi.MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:fa}),Qge=new ac.MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:fa}),Gge=new ac.MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:fa});new P9.ActorQueryResultSerializeJson({mediaTypePriorities:{"application/json":1},mediaTypeFormats:{"application/json":"https://comunica.linkeddatafragments.org/#results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#json",bus:fa});new TM.ActorQueryResultSerializeSimple({mediaTypePriorities:{simple:.9},mediaTypeFormats:{simple:"https://comunica.linkeddatafragments.org/#results_simple"},name:"urn:comunica:default:query-result-serialize/actors#simple",bus:fa});new EM.ActorQueryResultSerializeSparqlCsv({mediaTypePriorities:{"text/csv":.75},mediaTypeFormats:{"text/csv":"http://www.w3.org/ns/formats/SPARQL_Results_CSV"},name:"urn:comunica:default:query-result-serialize/actors#csv",bus:fa});new OM.ActorQueryResultSerializeSparqlTsv({mediaTypePriorities:{"text/tab-separated-values":.75},mediaTypeFormats:{"text/tab-separated-values":"http://www.w3.org/ns/formats/SPARQL_Results_TSV"},name:"urn:comunica:default:query-result-serialize/actors#sparql-tsv",bus:fa});new DM.ActorQueryResultSerializeSparqlXml({mediaTypePriorities:{"application/sparql-results+xml":.8},mediaTypeFormats:{"application/sparql-results+xml":"http://www.w3.org/ns/formats/SPARQL_Results_XML"},name:"urn:comunica:default:query-result-serialize/actors#sparql-xml",bus:fa});new NM.ActorQueryResultSerializeTable({columnWidth:50,mediaTypePriorities:{table:.6},mediaTypeFormats:{table:"https://comunica.linkeddatafragments.org/#results_table"},name:"urn:comunica:default:query-result-serialize/actors#table",bus:fa});new CM.ActorQueryResultSerializeTree({mediaTypePriorities:{tree:.5},mediaTypeFormats:{tree:"https://comunica.linkeddatafragments.org/#results_tree"},name:"urn:comunica:default:query-result-serialize/actors#tree",bus:fa});const zge=new ix.MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:d$});new zM.ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:d$});const Wge=new XM.MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:py}),Xge=new R0.ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^2.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:py}),Kge=new R0.ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^2.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:py}),Jge=new R0.ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-update-quads-hypermedia/^2.0.0/components/ActorRdfUpdateQuadsHypermedia.jsonld#IActorRdfUpdateQuadsHypermediaArgs_default_invalidator",bus:py}),Yge=new R0.ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-resolve-quad-pattern-hypermedia/^2.0.0/components/ActorRdfResolveQuadPatternHypermedia.jsonld#IActorRdfResolveQuadPatternHypermediaArgs_default_invalidator",bus:py}),ZS=new xi.MediatorRace({name:"urn:comunica:default:dereference-rdf/mediators#main",bus:f$});new KM.ActorHashBindingsSha1({name:"urn:comunica:default:hash-bindings/actors#sha1",bus:h$});const HR=new xi.MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:h$}),g$=new xi.MediatorRace({name:"urn:comunica:default:rdf-serialize/mediators#serialize",bus:Vf}),m$=new ac.MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-serialize/mediators#mediaType",bus:Vf}),Zge=new ac.MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:rdf-serialize/mediators#mediaTypeFormat",bus:Vf});new YM.ActorRdfSerializeN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},name:"urn:comunica:default:rdf-serialize/actors#n3",bus:Vf});new aF.ActorRdfSerializeJsonLd({jsonStringifyIndentSpaces:2,mediaTypePriorities:{"application/ld+json":1},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-serialize/actors#jsonld",bus:Vf});new oF.ActorRdfSerializeShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-serialize/actors#shaclc",bus:Vf});const eme=new If.MediatorNumber({field:"time",type:"min",ignoreErrors:!0,name:"urn:comunica:default:http/mediators#no-fallback",bus:Hf}),v$=new dF.ActorHttpFetch({agentOptions:{keepAlive:!0,maxSockets:5},name:"urn:comunica:default:http/actors#fetch",bus:Hf}),nu=new If.MediatorNumber({field:"time",type:"min",ignoreErrors:!0,name:"urn:comunica:default:http/mediators#main",bus:p$}),tme=new OF.ActorDereferenceFallback({name:"urn:comunica:default:dereference/actors#fallback",bus:$R}),rme=new xi.MediatorRace({name:"urn:comunica:default:dereference/mediators#main",bus:$R}),w$=new xi.MediatorRace({name:"urn:comunica:default:rdf-parse/mediators#parse",bus:lc}),S$=new ac.MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-parse/mediators#mediaType",bus:lc});new IF.ActorRdfParseN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},priorityScale:1,name:"urn:comunica:default:rdf-parse/actors#n3",bus:lc});new PF.ActorRdfParseRdfXml({mediaTypePriorities:{"application/rdf+xml":1},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:.5,name:"urn:comunica:default:rdf-parse/actors#rdfxml",bus:lc});new VF.ActorRdfParseXmlRdfa({mediaTypePriorities:{"application/xml":1,"image/svg+xml":1,"text/xml":1},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:.3,name:"urn:comunica:default:rdf-parse/actors#xmlrdfa",bus:lc});new mL.ActorRdfParseShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-parse/actors#shaclc",bus:lc});new SL.ActorRdfJoinEntriesSortTraversalZeroKnowledge({name:"urn:comunica:default:rdf-join-entries-sort/actors#traversal-zero-knowledge",bus:y$});const T$=new xi.MediatorRace({name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:y$});new OL.ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:b$});const ps=new If.MediatorNumber({field:"accuracy",type:"max",ignoreErrors:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:b$});new xL.ActorRdfMetadataPrimaryTopic({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:"urn:comunica:default:rdf-metadata/actors#primary-topic",bus:UR});new RL.ActorRdfMetadataAll({name:"urn:comunica:default:rdf-metadata/actors#all",bus:UR});const kR=new xi.MediatorRace({name:"urn:comunica:default:rdf-metadata/mediators#main",bus:UR});new IL.ActorRdfMetadataAccumulateCanContainUndefs({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cancontainundefs",bus:yy});new PL.ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:yy});new DL.ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:yy});new NL.ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:yy});const E$=new ac.MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:yy});new jL.ActorRdfMetadataExtractHydraControls({name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-controls",bus:no});new ML.ActorRdfMetadataExtractHydraCount({predicates:["http://www.w3.org/ns/hydra/core#totalItems","http://rdfs.org/ns/void#triples"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-count",bus:no});new FL.ActorRdfMetadataExtractHydraPagesize({predicates:["http://www.w3.org/ns/hydra/core#itemsPerPage"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-pagesize",bus:no});new LL.ActorRdfMetadataExtractRequestTime({name:"urn:comunica:default:rdf-metadata-extract/actors#request-time",bus:no});new BL.ActorRdfMetadataExtractAllowHttpMethods({name:"urn:comunica:default:rdf-metadata-extract/actors#allow-http-methods",bus:no});new $L.ActorRdfMetadataExtractPutAccepted({name:"urn:comunica:default:rdf-metadata-extract/actors#put-accepted",bus:no});new UL.ActorRdfMetadataExtractPatchSparqlUpdate({name:"urn:comunica:default:rdf-metadata-extract/actors#patch-sparql-update",bus:no});new qL.ActorRdfMetadataExtractSparqlService({inferHttpsEndpoint:!0,name:"urn:comunica:default:rdf-metadata-extract/actors#sparql-service",bus:no});const QR=new ac.MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-extract/mediators#main",bus:no});new VL.ActorRdfParseHtml({busRdfParseHtml:XS,mediaTypePriorities:{"application/xhtml+xml":.9,"text/html":1},mediaTypeFormats:{"application/xhtml+xml":"http://www.w3.org/ns/formats/HTML","text/html":"http://www.w3.org/ns/formats/HTML"},priorityScale:.2,name:"urn:comunica:default:rdf-parse/actors#html",bus:lc});new kL.ActorRdfParseHtmlMicrodata({name:"urn:comunica:default:rdf-parse-html/actors#microdata",bus:XS});new JL.ActorRdfParseHtmlRdfa({name:"urn:comunica:default:rdf-parse-html/actors#rdfa",bus:XS});new YL.ActorRdfResolveHypermediaNone({name:"urn:comunica:default:rdf-resolve-hypermedia/actors#none",bus:KS});const nme=new If.MediatorNumber({field:"filterFactor",type:"max",ignoreErrors:!0,name:"urn:comunica:default:rdf-resolve-hypermedia/mediators#main",bus:KS});new u7.ActorRdfResolveHypermediaLinksNext({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#next",bus:qR});new c7.ActorRdfResolveHypermediaLinksTraverse({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#traverse",bus:qR});const ime=new xi.MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links/mediators#main",bus:qR});new l7.ActorRdfResolveHypermediaLinksQueueFifo({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/actors#fifo",bus:_$});const ame=new xi.MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/mediators#main",bus:_$}),sme=new xi.MediatorRace({name:"urn:comunica:default:rdf-update-hypermedia/mediators#main",bus:JS});new h7.ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:VR});const by=new xi.MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:VR}),_y=new _7.MediatorJoinCoefficientsFixed({cpuWeight:1,memoryWeight:1,timeWeight:10,ioWeight:100,name:"urn:comunica:default:rdf-join/mediators#main",bus:Ia}),O$=new xi.MediatorRace({name:"urn:comunica:default:rdf-resolve-quad-pattern/mediators#main",bus:YS});new fR.ActorRdfResolveQuadPatternRdfJsSource({name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#rdfjs-source",bus:YS});new g7.ActorRdfMetadataExtractTraverse({mediatorExtractLinks:qge,name:"urn:comunica:default:rdf-metadata-extract/actors#traverse",bus:no});new m7.ActorQueryOperationAsk({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#ask",bus:xt});new v7.ActorQueryOperationBgpJoin({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#bgp",bus:xt});new w7.ActorQueryOperationDescribeSubject({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#describe",bus:xt});new bR.ActorQueryOperationConstruct({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#construct",bus:xt});new S7.ActorQueryOperationExtend({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#extend",bus:xt});new K7.ActorQueryOperationFilterSparqlee({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#filter",bus:xt});new J7.ActorQueryOperationFromQuad({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#from",bus:xt});new Y7.ActorQueryOperationNop({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#nop",bus:xt});new Z7.ActorQueryOperationOrderBySparqlee({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#orderby",bus:xt});new eB.ActorQueryOperationProject({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#project",bus:xt});new tB.ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#service",bus:xt});new rB.ActorQueryOperationSlice({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#slice",bus:xt});new y2.ActorQueryOperationUnion({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#union",bus:xt});new nB.ActorQueryOperationPathAlt({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#path-alt",bus:xt});new iB.ActorQueryOperationPathInv({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#path-inv",bus:xt});new aB.ActorQueryOperationPathLink({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#path-link",bus:xt});new sB.ActorQueryOperationPathNps({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#path-nps",bus:xt});new oB.ActorQueryOperationPathOneOrMore({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:xt});new uB.ActorQueryOperationPathZeroOrMore({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:xt});new cB.ActorQueryOperationPathZeroOrOne({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:xt});new lB.ActorQueryOperationAddRewrite({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#update-add",bus:xt});new dB.ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#update-composite",bus:xt});new fB.ActorQueryOperationCopyRewrite({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#update-copy",bus:xt});new hB.ActorQueryOperationMoveRewrite({mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#update-move",bus:xt});const A$=new y_.ActorInitQuery({mediatorOptimizeQueryOperation:Vge,mediatorQueryOperation:It,mediatorQueryParse:Hge,mediatorQueryResultSerialize:kge,mediatorQueryResultSerializeMediaTypeCombiner:Qge,mediatorQueryResultSerializeMediaTypeFormatCombiner:Gge,mediatorContextPreprocess:zge,mediatorHttpInvalidate:Wge,logger:$ge,defaultQueryInputFormat:"sparql",allowNoSources:!0,contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelay:"@comunica/bus-http:http-retry-delay",httpRetryOnServerError:"@comunica/bus-http:http-retry-on-server-error",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",source:"@comunica/bus-rdf-resolve-quad-pattern:source",sources:"@comunica/bus-rdf-resolve-quad-pattern:sources",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:init/actors#query",bus:Uge}),ome=new PR.ActionObserverHttp({httpInvalidator:Xge,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^2.0.0/components/ActorQueryResultSerializeSparqlJson.jsonld#ActorQueryResultSerializeSparqlJson_default_observer",bus:Hf}),ume=new DR.ActionObserverHttp({httpInvalidator:Kge,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^2.0.0/components/ActorQueryResultSerializeStats.jsonld#ActorQueryResultSerializeStats_default_observer",bus:Hf});new pB.ActorQueryOperationDistinctHash({mediatorHashBindings:HR,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#distinct",bus:xt});new yB.ActorQueryOperationGroup({mediatorHashBindings:HR,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#group",bus:xt});new bB.ActorQueryOperationReducedHash({mediatorHashBindings:HR,cacheSize:100,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#reduced",bus:xt});new _B.ActorQueryResultSerializeRdf({mediatorRdfSerialize:g$,mediatorMediaTypeCombiner:m$,mediatorMediaTypeFormatCombiner:Zge,name:"urn:comunica:default:query-result-serialize/actors#rdf",bus:fa});new gB.ActorHttpWayback({mediatorHttp:eme,name:"urn:comunica:default:http/actors#wayback",bus:p$});new mB.ActorRdfParseJsonLd({mediatorHttp:nu,mediaTypePriorities:{"application/json":.5,"application/ld+json":1},mediaTypeFormats:{"application/json":"http://www.w3.org/ns/formats/JSON-LD","application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-parse/actors#jsonld",bus:lc});new OB.ActorRdfResolveHypermediaSparql({mediatorHttp:nu,checkUrlSuffix:!0,forceHttpGet:!1,cacheSize:1024,name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#sparql",bus:KS});new xB.ActorRdfUpdateHypermediaPatchSparqlUpdate({mediatorHttp:nu,name:"urn:comunica:default:rdf-update-hypermedia/actors#patch-sparql-update",bus:JS});new RB.ActorRdfUpdateHypermediaPutLdp({mediatorHttp:nu,mediatorRdfSerializeMediatypes:m$,mediatorRdfSerialize:g$,name:"urn:comunica:default:rdf-update-hypermedia/actors#put-ldp",bus:JS});new IB.ActorRdfUpdateHypermediaSparql({mediatorHttp:nu,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,name:"urn:comunica:default:rdf-update-hypermedia/actors#sparql",bus:JS});new PB.ActorQueryOperationSparqlEndpoint({mediatorHttp:nu,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,forceHttpGet:!1,name:"urn:comunica:default:query-operation/actors#sparql-endpoint",bus:xt});new DB.ActorDereferenceRdfParse({mediatorDereference:rme,mediatorParse:w$,mediatorParseMediatypes:S$,mediaMappings:{htm:"text/html",html:"text/html",json:"application/json",jsonld:"application/ld+json",n3:"text/n3",nq:"application/n-quads",nquads:"application/n-quads",nt:"application/n-triples",ntriples:"application/n-triples",owl:"application/rdf+xml",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",shaclc:"text/shaclc",shaclce:"text/shaclc-ext",shc:"text/shaclc",shce:"text/shaclc-ext",svg:"image/svg+xml",svgz:"image/svg+xml",trig:"application/trig",ttl:"text/turtle",turtle:"text/turtle",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"application/xml"},name:"urn:comunica:default:dereference-rdf/actors#parse",bus:f$});new jB.ActorRdfParseHtmlScript({mediatorRdfParseMediatypes:S$,mediatorRdfParseHandle:w$,name:"urn:comunica:default:rdf-parse-html/actors#script",bus:XS});new CB.ActorRdfJoinNone({mediatorJoinSelectivity:ps,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:Ia});new MB.ActorRdfJoinSingle({mediatorJoinSelectivity:ps,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:Ia});new MR.ActorRdfJoinMultiBind({bindOrder:"breadth-first",selectivityModifier:1e-4,mediatorJoinEntriesSort:T$,mediatorQueryOperation:It,mediatorJoinSelectivity:ps,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:Ia});new FB.ActorRdfJoinHash({mediatorJoinSelectivity:ps,name:"urn:comunica:default:rdf-join/actors#inner-hash",bus:Ia});new BB.ActorRdfJoinSymmetricHash({mediatorJoinSelectivity:ps,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:Ia});new $B.ActorRdfJoinNestedLoop({mediatorJoinSelectivity:ps,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:Ia});new UB.ActorRdfJoinMinusHash({mediatorJoinSelectivity:ps,name:"urn:comunica:default:rdf-join/actors#minus-hash",bus:Ia});new qB.ActorRdfJoinMinusHashUndef({mediatorJoinSelectivity:ps,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:Ia});new VB.ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-4,mediatorQueryOperation:It,mediatorJoinSelectivity:ps,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:Ia});new HB.ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:ps,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:Ia});new kB.ActorRdfResolveHypermediaQpf({mediatorMetadata:kR,mediatorMetadataExtract:QR,mediatorDereferenceRdf:ZS,subjectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject",predicateUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate",objectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",graphUri:"http://www.w3.org/ns/sparql-service-description#graph",name:"urn:comunica:default:rdf-resolve-hypermedia/actors#qpf",bus:KS});new GB.ActorRdfResolveQuadPatternHypermedia({cacheSize:2048,httpInvalidator:Yge,maxIterators:64,aggregateStore:!0,mediatorDereferenceRdf:ZS,mediatorMetadata:kR,mediatorMetadataExtract:QR,mediatorMetadataAccumulate:E$,mediatorRdfResolveHypermedia:nme,mediatorRdfResolveHypermediaLinks:ime,mediatorRdfResolveHypermediaLinksQueue:ame,name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#hypermedia",bus:YS});new WB.ActorRdfUpdateQuadsHypermedia({cacheSize:100,httpInvalidator:Jge,mediatorDereferenceRdf:ZS,mediatorMetadata:kR,mediatorMetadataExtract:QR,mediatorRdfUpdateHypermedia:sme,name:"urn:comunica:default:rdf-update-quads/actors#hypermedia",bus:VR});new XB.ActorQueryOperationClear({mediatorUpdateQuads:by,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#update-clear",bus:xt});new KB.ActorQueryOperationCreate({mediatorUpdateQuads:by,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#update-create",bus:xt});new JB.ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:by,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:xt});new YB.ActorQueryOperationDrop({mediatorUpdateQuads:by,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#update-drop",bus:xt});new ZB.ActorQueryOperationLoad({mediatorUpdateQuads:by,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#update-load",bus:xt});new e$.ActorQueryOperationJoin({mediatorJoin:_y,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#join",bus:xt});new t$.ActorQueryOperationLeftJoin({mediatorJoin:_y,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:xt});new r$.ActorQueryOperationMinus({mediatorJoin:_y,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#minus",bus:xt});new n$.ActorQueryOperationPathSeq({mediatorJoin:_y,mediatorQueryOperation:It,name:"urn:comunica:default:query-operation/actors#path-seq",bus:xt});new i$.ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:T$,mediatorJoin:_y,mediatorJoinSelectivity:ps,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:Ia});new a$.ActorQueryOperationQuadpattern({mediatorResolveQuadPattern:O$,unionDefaultGraph:!1,name:"urn:comunica:default:query-operation/actors#quadpattern",bus:xt});new yR.ActorRdfResolveQuadPatternFederated({mediatorResolveQuadPattern:O$,mediatorRdfMetadataAccumulate:E$,skipEmptyPatterns:!1,name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#federated",bus:YS});const cme=new s$.ActorHttpInruptSolidClientAuthn({mediatorHttp:nu,name:"urn:comunica:default:http/actors#inrupt-solid-client-authn",bus:Hf,beforeActors:[v$]});new o$.ActorDereferenceHttp({mediatorHttp:nu,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,name:"urn:comunica:default:dereference/actors#http",bus:$R,beforeActors:[tme]});new c$.ActorExtractLinksSolidTypeIndex({typeIndexPredicates:["http://www.w3.org/ns/solid/terms#publicTypeIndex","http://www.w3.org/ns/solid/terms#privateTypeIndex"],onlyMatchingTypes:!0,inference:!0,actorInitQuery:A$,mediatorDereferenceRdf:ZS,name:"urn:comunica:default:extract-links/actors#solid-type-index",bus:qf});new PR.ActorQueryResultSerializeSparqlJson({emitMetadata:!0,httpObserver:ome,mediaTypePriorities:{"application/sparql-results+json":.8},mediaTypeFormats:{"application/sparql-results+json":"http://www.w3.org/ns/formats/SPARQL_Results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#sparql-json",bus:fa});new DR.ActorQueryResultSerializeStats({httpObserver:ume,mediaTypePriorities:{stats:.5},mediaTypeFormats:{stats:"https://comunica.linkeddatafragments.org/#results_stats"},name:"urn:comunica:default:query-result-serialize/actors#stats",bus:fa});new l$.ActorHttpProxy({mediatorHttp:nu,name:"urn:comunica:default:http/actors#proxy",bus:Hf,beforeActors:[v$,cme]});var lme=A$;Object.defineProperty(p_,"__esModule",{value:!0});p_.QueryEngine=void 0;const dme=y_,fme=lme;class hme extends dme.QueryEngineBase{constructor(e=fme){super(e)}}p_.QueryEngine=hme;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(p_,t)})(U5);var is=globalThis&&globalThis.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(f){o(f)}}function c(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})};const ec=new U5.QueryEngine;function pme(t){return is(this,void 0,void 0,function*(){const e=yield yme(t),r=yield bme(e);if(r==="LDESinLDP"){console.log("LDES in LDP");const n=yield _me(e);return console.log(n),{pages:n.transform({map:a=>({uri:a.node,sort:a.value})}),url:e,type:"LDESinLDP"}}else{if(r==="LDES")return console.log("LDES"),{pages:(yield gme(e)).transform({map:a=>({uri:a.view,sort:a.view})}),url:e,type:"LDES"};throw new Error("Only LDESinLDP and LDES are supported at the moment")}})}function yme(t){var e,r;return is(this,void 0,void 0,function*(){const a=(e=(yield fetch(t,{method:"HEAD"})).headers.get("Link"))===null||e===void 0?void 0:e.split(",").map(o=>{const u=o.trim().split(";"),c=u[0].slice(1,-1),l=u[1].trim().split("=")[1].slice(1,-1);return{url:c,rel:l}}),s=(r=a==null?void 0:a.find(o=>o.rel==="https://w3id.org/ldes#EventStream"))===null||r===void 0?void 0:r.url;if(!s)throw new Error("No LDES found");return console.log("Found LDES: "+s),s})}function bme(t){var e,r;return is(this,void 0,void 0,function*(){if(!t)return!1;const n=`
    PREFIX ldes: <https://w3id.org/ldes#>
    PREFIX tree: <https://w3id.org/tree#>
    
    SELECT * WHERE {
      {
        SELECT ("LDES" AS ?type) WHERE {
          <${t}> a ldes:EventStream;
                       tree:view ?view.
          <${t}> tree:member ?member.
        }
      }
      UNION
      {
        SELECT ("LDESinLDP" AS ?type) WHERE {
          <${t}> a ldes:EventStream;
                       tree:view ?view.
          ?view a tree:Node;
                tree:viewDescription ?viewDescription.
          ?viewDescription a tree:ViewDescription;
                ldes:managedBy ?ldesInLdp.
          ?ldesInLdp a ldes:LDESinLDPClient.
        }
      }
    } LIMIT 1`;return(r=(e=(yield(yield ec.queryBindings(n,{sources:[t],lenient:!0})).toArray())[0])===null||e===void 0?void 0:e.get("type"))===null||r===void 0?void 0:r.value})}function _me(t){return is(this,void 0,void 0,function*(){const e=`
    PREFIX ldes: <https://w3id.org/ldes#>
    PREFIX tree: <https://w3id.org/tree#>
    
    SELECT ?relation ?relationType ?node ?value ?path
    WHERE {
        <${t}> a ldes:EventStream;
                   tree:view ?view.
        ?view a tree:Node;
              tree:relation ?relation.
        ?relation a ?relationType;
                  tree:node ?node.
        OPTIONAL { ?relation tree:value ?value. }
        OPTIONAL { ?relation tree:path ?path. }
    }`;return(yield ec.queryBindings(e,{sources:[t],lenient:!0})).transform({map:n=>{var a,s;return{relation:n.get("relation").value,relationType:n.get("relationType").value,node:n.get("node").value,value:(a=n.get("value"))===null||a===void 0?void 0:a.value,path:(s=n.get("path"))===null||s===void 0?void 0:s.value}}})})}function gme(t){return is(this,void 0,void 0,function*(){const e=`
    PREFIX ldes: <https://w3id.org/ldes#>
    PREFIX tree: <https://w3id.org/tree#>
    
    SELECT ?view
    WHERE {
        <${t}> a ldes:EventStream;
                     tree:view ?view.
    }`;return(yield ec.queryBindings(e,{sources:[t],lenient:!0,"@comunica/actor-rdf-resolve-hypermedia-links-traverse:traverse":!1})).transform({map:n=>({view:n.get("view").value})})})}function mme(t,e,r){return is(this,void 0,void 0,function*(){if(r==="LDESinLDP"){const n=`
    PREFIX ldes: <https://w3id.org/ldes#>
    PREFIX tree: <https://w3id.org/tree#>
    PREFIX ldp: <http://www.w3.org/ns/ldp#>
    PREFIX dc: <http://purl.org/dc/terms/>
    
    SELECT ?member ?dateTime
    WHERE {
      <${t}> a ldes:EventStream;
                   tree:view ?view.
      ?view a tree:Node;
            tree:relation ?relation.
      ?relation a ?relationType;
                tree:node ?node.
      ?node a ldp:BasicContainer;
            ldp:contains ?member.
      ?member a ldp:Resource;
              dc:modified ?dateTime.
      FILTER (?node = <${e}>).
    }`,a=(o,u)=>fetch(o,Object.assign(Object.assign({},u),{headers:Object.assign(Object.assign({},u==null?void 0:u.headers),{"Cache-Control":"no-cache"})}));return(yield ec.queryBindings(n,{sources:[t],fetch:a,lenient:!1})).transform({map:o=>is(this,void 0,void 0,function*(){return{content:yield vme(o.get("member").value),metadata:{dateTime:o.get("dateTime").value}}})})}else if(r==="LDES"){const n=`
    PREFIX ldes: <https://w3id.org/ldes#>
    PREFIX tree: <https://w3id.org/tree#>
    PREFIX as: <https://www.w3.org/ns/activitystreams#>
    
    SELECT ?member ?actorUrl ?actorName ?object ?targetUrl ?targetName ?context
    WHERE {
      <${t}> a ldes:EventStream;
                    tree:view <${e}>;
                    tree:member ?member.
      ?member as:actor ?actorUrl;
        as:object ?object.
      OPTIONAL { ?id as:target ?targetUrl. }
      OPTIONAL { ?actorUrl as:name ?actorName. }
      OPTIONAL { ?targetUrl as:name ?targetName. }
      OPTIONAL { ?id as:context ?context. }
    }`;return(yield ec.queryBindings(n,{sources:[t],lenient:!0})).transform({map:s=>is(this,void 0,void 0,function*(){var o,u,c,l;const d=yield Jb(s.get("object").value,e);let f={};return d.includes("https://www.w3.org/ns/activitystreams#Relationship")&&(f=yield x$(s.get("object").value,e)),{content:{id:s.get("member").value,actorUrl:s.get("actorUrl").value,actorName:(o=s.get("actorName"))===null||o===void 0?void 0:o.value,object:s.get("object").value,targetUrl:(u=s.get("targetUrl"))===null||u===void 0?void 0:u.value,targetName:(c=s.get("targetName"))===null||c===void 0?void 0:c.value,context:(l=s.get("context"))===null||l===void 0?void 0:l.value,types:yield Jb(s.get("member").value,e),objectTypes:d,objectRelationship:f},metadata:{}}})})}else throw new Error("Only LDESinLDP and LDES are supported at the moment")})}function vme(t){return is(this,void 0,void 0,function*(){const e=`
  PREFIX as: <https://www.w3.org/ns/activitystreams#>
  
  SELECT ?id ?actorUrl ?actorName ?object ?targetUrl ?targetName ?context
  WHERE {
    ?id as:actor ?actorUrl;
        as:object ?object.
    OPTIONAL { ?id as:target ?targetUrl. }
    OPTIONAL { ?actorUrl as:name ?actorName. }
    OPTIONAL { ?targetUrl as:name ?targetName. }
    OPTIONAL { ?id as:context ?context. }
  } LIMIT 1`,r=yield(yield ec.queryBindings(e,{sources:[t],lenient:!0,"@comunica/actor-rdf-resolve-hypermedia-links-traverse:traverse":!1})).toArray();r.length!==1&&console.warn(`Found ${r.length} results for content, expected 1.`);const n=r.map(a=>{var s,o,u,c;return{id:a.get("id").value,actorUrl:a.get("actorUrl").value,actorName:(s=a.get("actorName"))===null||s===void 0?void 0:s.value,object:a.get("object").value,targetUrl:(o=a.get("targetUrl"))===null||o===void 0?void 0:o.value,targetName:(u=a.get("targetName"))===null||u===void 0?void 0:u.value,context:(c=a.get("context"))===null||c===void 0?void 0:c.value,types:[],objectTypes:[],objectRelationship:{}}})[0];return n.types=yield Jb(n.id,t),n.objectTypes=yield Jb(n.object,t),n.objectTypes.includes("https://www.w3.org/ns/activitystreams#Relationship")&&(n.objectRelationship=yield x$(n.object,t)),n})}function Jb(t,e){return is(this,void 0,void 0,function*(){const r=`    
    SELECT ?type
    WHERE {
      <${t}> a ?type.
    }`;return(yield(yield ec.queryBindings(r,{sources:[e],lenient:!0,"@comunica/actor-rdf-resolve-hypermedia-links-traverse:traverse":!1})).toArray()).map(a=>a.get("type").value)})}function x$(t,e){return is(this,void 0,void 0,function*(){const r=`
    PREFIX as: <https://www.w3.org/ns/activitystreams#>
    
    SELECT ?subject ?relationship ?object
    WHERE {
        <${t}> as:subject ?subject;
                 as:relationship ?relationship;
                 as:object ?object.
    } LIMIT 1`;return(yield(yield ec.queryBindings(r,{sources:[e],lenient:!0,"@comunica/actor-rdf-resolve-hypermedia-links-traverse:traverse":!1})).toArray()).map(a=>({subject:a.get("subject").value,relationship:a.get("relationship").value,object:a.get("object").value}))[0]||{}})}const wme={name:"ScholarlyBrowser",components:{MDBContainer:eH,MDBCard:jV,MDBCardBody:MV,MDBCardText:$V,MDBInput:yH,MDBCardFooter:qV,MDBCardTitle:LV},data(){return{url:"",members:[],pages:[],loading:!1,noEventLog:!1}},created(){this.$watch("$route.query.url",()=>{this.url=this.$route.query.url||"",this.urlUpdated()})},methods:{async urlUpdated(){if(this.noEventLog=!1,this.loading=!1,this.members=[],this.$router.push({query:{url:this.url}}),!this.url)return;this.loading=!0;let t;try{t=await pme(this.url)}catch{this.noEventLog=!0,this.loading=!1;return}let e=!0;t.pages.on("data",async r=>{if(this.pages.push(r),e){e=!1;const n=await mme(t.url,r.uri,t.type);n.on("data",async a=>{var s;if(a=await a,a.content.mainTypes=await this.getMainTypes(a.content.types),a.content.secondaryTypes=await this.getSecondaryTypes(a.content.types),a.content.objectTypes=await Promise.all(await((s=a.content)==null?void 0:s.objectTypes.map(async o=>await this.getPrefixedProperty(o))))??[],a.metadata.dateTime){const o=a.metadata.dateTime.split(/\D+/);a.metadata.dateTime=new Date(Date.UTC(o[0],--o[1],o[2],o[3],o[4],o[5],o[6])).toLocaleString()}this.members.push(a),this.loading=!1}),n.on("end",()=>{this.loading=!1})}})},async getMainTypes(t){return await Promise.all(t.filter(e=>e.startsWith("https://www.w3.org/ns/activitystreams#")).map(async e=>await this.getPrefixedProperty(e)))},async getSecondaryTypes(t){return await Promise.all(t.filter(e=>!e.startsWith("https://www.w3.org/ns/activitystreams#")).map(async e=>await this.getPrefixedProperty(e)))},async getPrefixedProperty(t){const e=await fetch(`https://prefixcc-proxy.smessie.com/?q=${encodeURIComponent(t)}`,{method:"HEAD"});return e.url.includes(`/?q=${encodeURIComponent(t)}`)?t:e.url.split("prefixcc-proxy.smessie.com/")[1]},getStyleByMainType(t){switch(t){case"as:Create":return"success";case"as:Remove":return"dark";case"as:Announce":return"warning";case"as:Offer":return"primary";case"as:Accept":return"info";case"as:Reject":return"danger";case"as:Undo":return"secondary";case"as:Update":default:return"light"}}}};const Sme=(t,e)=>{const r=t.__vccOpts||t;for(const[n,a]of e)r[n]=a;return r},iu=t=>(tq("data-v-e51962d1"),t=t(),rq(),t),Tme=iu(()=>Vt("h1",null,"Scholarly Browser",-1)),Eme={key:0,class:"status-message"},Ome={key:1,class:"status-message"},Ame=iu(()=>Vt("b",null,"No event log found.",-1)),xme=iu(()=>Vt("b",null,"Actor: ",-1)),Rme=["href"],Ime=iu(()=>Vt("b",null,"Target: ",-1)),Pme=["href"],Dme={key:1},Nme=iu(()=>Vt("b",null,"Context: ",-1)),jme=["href"],Cme={key:1},Mme=iu(()=>Vt("b",null,"Object: ",-1)),Fme=["href"],Lme={key:0},Bme=iu(()=>Vt("b",null,"Subject: ",-1)),$me=["href"],Ume=iu(()=>Vt("b",null,"Relationship: ",-1)),qme=["href"],Vme=iu(()=>Vt("b",null,"Object: ",-1)),Hme=["href"];function kme(t,e,r,n,a,s){const o=mc("MDBInput"),u=mc("MDBCardText"),c=mc("MDBCardBody"),l=mc("MDBCard"),d=mc("MDBCardTitle"),f=mc("MDBCardFooter"),h=mc("MDBContainer");return At(),ra(h,null,{default:Hr(()=>[Tme,dr(l,null,{default:Hr(()=>[dr(c,{class:"w-100"},{default:Hr(()=>[dr(u,null,{default:Hr(()=>[dr(o,{label:"URL",modelValue:a.url,"onUpdate:modelValue":e[0]||(e[0]=p=>a.url=p),onChange:s.urlUpdated},null,8,["modelValue","onChange"])]),_:1})]),_:1})]),_:1}),dr(l,null,{default:Hr(()=>[dr(c,{class:"w-100"},{default:Hr(()=>[dr(u,null,{default:Hr(()=>[a.loading?(At(),lr("p",Eme,"Loading notifications...")):cn("",!0),a.noEventLog?(At(),lr("p",Ome,[Ame,od(" Make sure the provided URL contains a ldes:EventStream Link header.")])):cn("",!0),(At(!0),lr(Fi,null,AI(a.members,(p,b)=>(At(),ra(l,{key:b,border:s.getStyleByMainType(p.content.mainTypes[0])},{default:Hr(()=>[dr(c,{class:"w-100",style:{"padding-bottom":"0"}},{default:Hr(()=>[dr(d,null,{default:Hr(()=>[od(Cr(p.content.mainTypes.join(", ")),1)]),_:2},1024),dr(d,{subtitle:"",class:"mb-2 text-muted"},{default:Hr(()=>[od(Cr(p.content.secondaryTypes.join(", ")),1)]),_:2},1024),dr(u,null,{default:Hr(()=>[Vt("p",null,[xme,Vt("a",{href:p.content.actorUrl},Cr(p.content.actorName??p.content.actorUrl),9,Rme)]),Vt("p",null,[Ime,p.content.targetUrl?(At(),lr("a",{key:0,href:p.content.targetUrl},Cr(p.content.targetName??p.content.targetUrl),9,Pme)):(At(),lr("i",Dme,"<not provided>"))]),Vt("p",null,[Nme,p.content.context?(At(),lr("a",{key:0,href:"?url="+p.content.context},Cr(p.content.context),9,jme)):(At(),lr("i",Cme,"<not provided>"))]),Vt("p",null,[Mme,Vt("a",{href:"?url="+p.content.object},Cr(p.content.object),9,Fme)]),Vt("ul",null,[(At(!0),lr(Fi,null,AI(p.content.objectTypes,(_,E)=>(At(),lr("li",{key:E},[od(Cr(_)+" ",1),_==="as:Relationship"?(At(),lr("ul",Lme,[Vt("li",null,[Bme,Vt("a",{href:p.content.objectRelationship.subject},Cr(p.content.objectRelationship.subject),9,$me)]),Vt("li",null,[Ume,Vt("a",{href:p.content.objectRelationship.relationship},Cr(p.content.objectRelationship.relationship),9,qme)]),Vt("li",null,[Vme,Vt("a",{href:p.content.objectRelationship.object},Cr(p.content.objectRelationship.object),9,Hme)])])):cn("",!0)]))),128))])]),_:2},1024)]),_:2},1024),dr(f,{class:"text-muted"},{default:Hr(()=>[od(Cr(p.metadata.dateTime),1)]),_:2},1024)]),_:2},1032,["border"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}const Qme=Sme(wme,[["render",kme],["__scopeId","data-v-e51962d1"]]),R$=Sa({__name:"App",setup(t){return(e,r)=>(At(),lr("main",null,[dr(Qme)]))}});/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const fd=typeof window<"u";function Gme(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const rr=Object.assign;function mE(t,e){const r={};for(const n in e){const a=e[n];r[n]=us(a)?a.map(t):t(a)}return r}const dp=()=>{},us=Array.isArray,zme=/\/$/,Wme=t=>t.replace(zme,"");function vE(t,e,r="/"){let n,a={},s="",o="";const u=e.indexOf("#");let c=e.indexOf("?");return u<c&&u>=0&&(c=-1),c>-1&&(n=e.slice(0,c),s=e.slice(c+1,u>-1?u:e.length),a=t(s)),u>-1&&(n=n||e.slice(0,u),o=e.slice(u,e.length)),n=Yme(n??e,r),{fullPath:n+(s&&"?")+s+o,path:n,query:a,hash:o}}function Xme(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function S8(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Kme(t,e,r){const n=e.matched.length-1,a=r.matched.length-1;return n>-1&&n===a&&of(e.matched[n],r.matched[a])&&I$(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function of(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function I$(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!Jme(t[r],e[r]))return!1;return!0}function Jme(t,e){return us(t)?T8(t,e):us(e)?T8(e,t):t===e}function T8(t,e){return us(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function Yme(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),a=n[n.length-1];(a===".."||a===".")&&n.push("");let s=r.length-1,o,u;for(o=0;o<n.length;o++)if(u=n[o],u!==".")if(u==="..")s>1&&s--;else break;return r.slice(0,s).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var Up;(function(t){t.pop="pop",t.push="push"})(Up||(Up={}));var fp;(function(t){t.back="back",t.forward="forward",t.unknown=""})(fp||(fp={}));function Zme(t){if(!t)if(fd){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Wme(t)}const eve=/^[^#]+#/;function tve(t,e){return t.replace(eve,"#")+e}function rve(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const e3=()=>({left:window.pageXOffset,top:window.pageYOffset});function nve(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),a=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!a)return;e=rve(a,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function E8(t,e){return(history.state?history.state.position-e:-1)+t}const qO=new Map;function ive(t,e){qO.set(t,e)}function ave(t){const e=qO.get(t);return qO.delete(t),e}let sve=()=>location.protocol+"//"+location.host;function P$(t,e){const{pathname:r,search:n,hash:a}=e,s=t.indexOf("#");if(s>-1){let u=a.includes(t.slice(s))?t.slice(s).length:1,c=a.slice(u);return c[0]!=="/"&&(c="/"+c),S8(c,"")}return S8(r,t)+n+a}function ove(t,e,r,n){let a=[],s=[],o=null;const u=({state:h})=>{const p=P$(t,location),b=r.value,_=e.value;let E=0;if(h){if(r.value=p,e.value=h,o&&o===b){o=null;return}E=_?h.position-_.position:0}else n(p);a.forEach(w=>{w(r.value,b,{delta:E,type:Up.pop,direction:E?E>0?fp.forward:fp.back:fp.unknown})})};function c(){o=r.value}function l(h){a.push(h);const p=()=>{const b=a.indexOf(h);b>-1&&a.splice(b,1)};return s.push(p),p}function d(){const{history:h}=window;h.state&&h.replaceState(rr({},h.state,{scroll:e3()}),"")}function f(){for(const h of s)h();s=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:l,destroy:f}}function O8(t,e,r,n=!1,a=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:a?e3():null}}function uve(t){const{history:e,location:r}=window,n={value:P$(t,r)},a={value:e.state};a.value||s(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(c,l,d){const f=t.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?t:t.slice(f))+c:sve()+t+c;try{e[d?"replaceState":"pushState"](l,"",h),a.value=l}catch(p){console.error(p),r[d?"replace":"assign"](h)}}function o(c,l){const d=rr({},e.state,O8(a.value.back,c,a.value.forward,!0),l,{position:a.value.position});s(c,d,!0),n.value=c}function u(c,l){const d=rr({},a.value,e.state,{forward:c,scroll:e3()});s(d.current,d,!0);const f=rr({},O8(n.value,c,null),{position:d.position+1},l);s(c,f,!1),n.value=c}return{location:n,state:a,push:u,replace:o}}function cve(t){t=Zme(t);const e=uve(t),r=ove(t,e.state,e.location,e.replace);function n(s,o=!0){o||r.pauseListeners(),history.go(s)}const a=rr({location:"",base:t,go:n,createHref:tve.bind(null,t)},e,r);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>e.state.value}),a}function lve(t){return typeof t=="string"||t&&typeof t=="object"}function D$(t){return typeof t=="string"||typeof t=="symbol"}const pu={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},N$=Symbol("");var A8;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(A8||(A8={}));function uf(t,e){return rr(new Error,{type:t,[N$]:!0},e)}function mo(t,e){return t instanceof Error&&N$ in t&&(e==null||!!(t.type&e))}const x8="[^/]+?",dve={sensitive:!1,strict:!1,start:!0,end:!0},fve=/[.+*?^${}()[\]/\\]/g;function hve(t,e){const r=rr({},dve,e),n=[];let a=r.start?"^":"";const s=[];for(const l of t){const d=l.length?[]:[90];r.strict&&!l.length&&(a+="/");for(let f=0;f<l.length;f++){const h=l[f];let p=40+(r.sensitive?.25:0);if(h.type===0)f||(a+="/"),a+=h.value.replace(fve,"\\$&"),p+=40;else if(h.type===1){const{value:b,repeatable:_,optional:E,regexp:w}=h;s.push({name:b,repeatable:_,optional:E});const O=w||x8;if(O!==x8){p+=10;try{new RegExp(`(${O})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${b}" (${O}): `+T.message)}}let A=_?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;f||(A=E&&l.length<2?`(?:/${A})`:"/"+A),E&&(A+="?"),a+=A,p+=20,E&&(p+=-8),_&&(p+=-20),O===".*"&&(p+=-50)}d.push(p)}n.push(d)}if(r.strict&&r.end){const l=n.length-1;n[l][n[l].length-1]+=.7000000000000001}r.strict||(a+="/?"),r.end?a+="$":r.strict&&(a+="(?:/|$)");const o=new RegExp(a,r.sensitive?"":"i");function u(l){const d=l.match(o),f={};if(!d)return null;for(let h=1;h<d.length;h++){const p=d[h]||"",b=s[h-1];f[b.name]=p&&b.repeatable?p.split("/"):p}return f}function c(l){let d="",f=!1;for(const h of t){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const p of h)if(p.type===0)d+=p.value;else if(p.type===1){const{value:b,repeatable:_,optional:E}=p,w=b in l?l[b]:"";if(us(w)&&!_)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const O=us(w)?w.join("/"):w;if(!O)if(E)h.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${b}"`);d+=O}}return d||"/"}return{re:o,score:n,keys:s,parse:u,stringify:c}}function pve(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function yve(t,e){let r=0;const n=t.score,a=e.score;for(;r<n.length&&r<a.length;){const s=pve(n[r],a[r]);if(s)return s;r++}if(Math.abs(a.length-n.length)===1){if(R8(n))return 1;if(R8(a))return-1}return a.length-n.length}function R8(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const bve={type:0,value:""},_ve=/[a-zA-Z0-9_]/;function gve(t){if(!t)return[[]];if(t==="/")return[[bve]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${r})/"${l}": ${p}`)}let r=0,n=r;const a=[];let s;function o(){s&&a.push(s),s=[]}let u=0,c,l="",d="";function f(){l&&(r===0?s.push({type:0,value:l}):r===1||r===2||r===3?(s.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function h(){l+=c}for(;u<t.length;){if(c=t[u++],c==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:c==="/"?(l&&f(),o()):c===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:c==="("?r=2:_ve.test(c)?h():(f(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&u--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:r=3:d+=c;break;case 3:f(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&u--,d="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${l}"`),f(),o(),a}function mve(t,e,r){const n=hve(gve(t.path),r),a=rr(n,{record:t,parent:e,children:[],alias:[]});return e&&!a.record.aliasOf==!e.record.aliasOf&&e.children.push(a),a}function vve(t,e){const r=[],n=new Map;e=D8({strict:!1,end:!0,sensitive:!1},e);function a(d){return n.get(d)}function s(d,f,h){const p=!h,b=wve(d);b.aliasOf=h&&h.record;const _=D8(e,d),E=[b];if("alias"in d){const A=typeof d.alias=="string"?[d.alias]:d.alias;for(const T of A)E.push(rr({},b,{components:h?h.record.components:b.components,path:T,aliasOf:h?h.record:b}))}let w,O;for(const A of E){const{path:T}=A;if(f&&T[0]!=="/"){const I=f.record.path,D=I[I.length-1]==="/"?"":"/";A.path=f.record.path+(T&&D+T)}if(w=mve(A,f,_),h?h.alias.push(w):(O=O||w,O!==w&&O.alias.push(w),p&&d.name&&!P8(w)&&o(d.name)),b.children){const I=b.children;for(let D=0;D<I.length;D++)s(I[D],w,h&&h.children[D])}h=h||w,(w.record.components&&Object.keys(w.record.components).length||w.record.name||w.record.redirect)&&c(w)}return O?()=>{o(O)}:dp}function o(d){if(D$(d)){const f=n.get(d);f&&(n.delete(d),r.splice(r.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=r.indexOf(d);f>-1&&(r.splice(f,1),d.record.name&&n.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function u(){return r}function c(d){let f=0;for(;f<r.length&&yve(d,r[f])>=0&&(d.record.path!==r[f].record.path||!j$(d,r[f]));)f++;r.splice(f,0,d),d.record.name&&!P8(d)&&n.set(d.record.name,d)}function l(d,f){let h,p={},b,_;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw uf(1,{location:d});_=h.record.name,p=rr(I8(f.params,h.keys.filter(O=>!O.optional).map(O=>O.name)),d.params&&I8(d.params,h.keys.map(O=>O.name))),b=h.stringify(p)}else if("path"in d)b=d.path,h=r.find(O=>O.re.test(b)),h&&(p=h.parse(b),_=h.record.name);else{if(h=f.name?n.get(f.name):r.find(O=>O.re.test(f.path)),!h)throw uf(1,{location:d,currentLocation:f});_=h.record.name,p=rr({},f.params,d.params),b=h.stringify(p)}const E=[];let w=h;for(;w;)E.unshift(w.record),w=w.parent;return{name:_,path:b,params:p,matched:E,meta:Tve(E)}}return t.forEach(d=>s(d)),{addRoute:s,resolve:l,removeRoute:o,getRoutes:u,getRecordMatcher:a}}function I8(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function wve(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Sve(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Sve(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function P8(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Tve(t){return t.reduce((e,r)=>rr(e,r.meta),{})}function D8(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function j$(t,e){return e.children.some(r=>r===t||j$(t,r))}const C$=/#/g,Eve=/&/g,Ove=/\//g,Ave=/=/g,xve=/\?/g,M$=/\+/g,Rve=/%5B/g,Ive=/%5D/g,F$=/%5E/g,Pve=/%60/g,L$=/%7B/g,Dve=/%7C/g,B$=/%7D/g,Nve=/%20/g;function GR(t){return encodeURI(""+t).replace(Dve,"|").replace(Rve,"[").replace(Ive,"]")}function jve(t){return GR(t).replace(L$,"{").replace(B$,"}").replace(F$,"^")}function VO(t){return GR(t).replace(M$,"%2B").replace(Nve,"+").replace(C$,"%23").replace(Eve,"%26").replace(Pve,"`").replace(L$,"{").replace(B$,"}").replace(F$,"^")}function Cve(t){return VO(t).replace(Ave,"%3D")}function Mve(t){return GR(t).replace(C$,"%23").replace(xve,"%3F")}function Fve(t){return t==null?"":Mve(t).replace(Ove,"%2F")}function Yb(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Lve(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let a=0;a<n.length;++a){const s=n[a].replace(M$," "),o=s.indexOf("="),u=Yb(o<0?s:s.slice(0,o)),c=o<0?null:Yb(s.slice(o+1));if(u in e){let l=e[u];us(l)||(l=e[u]=[l]),l.push(c)}else e[u]=c}return e}function N8(t){let e="";for(let r in t){const n=t[r];if(r=Cve(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(us(n)?n.map(s=>s&&VO(s)):[n&&VO(n)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+r,s!=null&&(e+="="+s))})}return e}function Bve(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=us(n)?n.map(a=>a==null?null:""+a):n==null?n:""+n)}return e}const $ve=Symbol(""),j8=Symbol(""),zR=Symbol(""),$$=Symbol(""),HO=Symbol("");function Dh(){let t=[];function e(n){return t.push(n),()=>{const a=t.indexOf(n);a>-1&&t.splice(a,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Pu(t,e,r,n,a){const s=n&&(n.enterCallbacks[a]=n.enterCallbacks[a]||[]);return()=>new Promise((o,u)=>{const c=f=>{f===!1?u(uf(4,{from:r,to:e})):f instanceof Error?u(f):lve(f)?u(uf(2,{from:e,to:f})):(s&&n.enterCallbacks[a]===s&&typeof f=="function"&&s.push(f),o())},l=t.call(n&&n.instances[a],e,r,c);let d=Promise.resolve(l);t.length<3&&(d=d.then(c)),d.catch(f=>u(f))})}function wE(t,e,r,n){const a=[];for(const s of t)for(const o in s.components){let u=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(Uve(u)){const l=(u.__vccOpts||u)[e];l&&a.push(Pu(l,r,n,s,o))}else{let c=u();a.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const d=Gme(l)?l.default:l;s.components[o]=d;const h=(d.__vccOpts||d)[e];return h&&Pu(h,r,n,s,o)()}))}}return a}function Uve(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function C8(t){const e=ns(zR),r=ns($$),n=nr(()=>e.resolve(Dt(t.to))),a=nr(()=>{const{matched:c}=n.value,{length:l}=c,d=c[l-1],f=r.matched;if(!d||!f.length)return-1;const h=f.findIndex(of.bind(null,d));if(h>-1)return h;const p=M8(c[l-2]);return l>1&&M8(d)===p&&f[f.length-1].path!==p?f.findIndex(of.bind(null,c[l-2])):h}),s=nr(()=>a.value>-1&&kve(r.params,n.value.params)),o=nr(()=>a.value>-1&&a.value===r.matched.length-1&&I$(r.params,n.value.params));function u(c={}){return Hve(c)?e[Dt(t.replace)?"replace":"push"](Dt(t.to)).catch(dp):Promise.resolve()}return{route:n,href:nr(()=>n.value.href),isActive:s,isExactActive:o,navigate:u}}const qve=Sa({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:C8,setup(t,{slots:e}){const r=a_(C8(t)),{options:n}=ns(zR),a=nr(()=>({[F8(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[F8(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const s=e.default&&e.default(r);return t.custom?s:L5("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:a.value},s)}}}),Vve=qve;function Hve(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function kve(t,e){for(const r in e){const n=e[r],a=t[r];if(typeof n=="string"){if(n!==a)return!1}else if(!us(a)||a.length!==n.length||n.some((s,o)=>s!==a[o]))return!1}return!0}function M8(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const F8=(t,e,r)=>t??e??r,Qve=Sa({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=ns(HO),a=nr(()=>t.route||n.value),s=ns(j8,0),o=nr(()=>{let l=Dt(s);const{matched:d}=a.value;let f;for(;(f=d[l])&&!f.components;)l++;return l}),u=nr(()=>a.value.matched[o.value]);W1(j8,nr(()=>o.value+1)),W1($ve,u),W1(HO,a);const c=pi();return Id(()=>[c.value,u.value,t.name],([l,d,f],[h,p,b])=>{d&&(d.instances[f]=l,p&&p!==d&&l&&l===h&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),l&&d&&(!p||!of(d,p)||!h)&&(d.enterCallbacks[f]||[]).forEach(_=>_(l))},{flush:"post"}),()=>{const l=a.value,d=t.name,f=u.value,h=f&&f.components[d];if(!h)return L8(r.default,{Component:h,route:l});const p=f.props[d],b=p?p===!0?l.params:typeof p=="function"?p(l):p:null,E=L5(h,rr({},b,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return L8(r.default,{Component:E,route:l})||E}}});function L8(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const Gve=Qve;function zve(t){const e=vve(t.routes,t),r=t.parseQuery||Lve,n=t.stringifyQuery||N8,a=t.history,s=Dh(),o=Dh(),u=Dh(),c=kU(pu);let l=pu;fd&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=mE.bind(null,J=>""+J),f=mE.bind(null,Fve),h=mE.bind(null,Yb);function p(J,le){let pe,L;return D$(J)?(pe=e.getRecordMatcher(J),L=le):L=J,e.addRoute(L,pe)}function b(J){const le=e.getRecordMatcher(J);le&&e.removeRoute(le)}function _(){return e.getRoutes().map(J=>J.record)}function E(J){return!!e.getRecordMatcher(J)}function w(J,le){if(le=rr({},le||c.value),typeof J=="string"){const v=vE(r,J,le.path),j=e.resolve({path:v.path},le),V=a.createHref(v.fullPath);return rr(v,j,{params:h(j.params),hash:Yb(v.hash),redirectedFrom:void 0,href:V})}let pe;if("path"in J)pe=rr({},J,{path:vE(r,J.path,le.path).path});else{const v=rr({},J.params);for(const j in v)v[j]==null&&delete v[j];pe=rr({},J,{params:f(v)}),le.params=f(le.params)}const L=e.resolve(pe,le),P=J.hash||"";L.params=d(h(L.params));const m=Xme(n,rr({},J,{hash:jve(P),path:L.path})),y=a.createHref(m);return rr({fullPath:m,hash:P,query:n===N8?Bve(J.query):J.query||{}},L,{redirectedFrom:void 0,href:y})}function O(J){return typeof J=="string"?vE(r,J,c.value.path):rr({},J)}function A(J,le){if(l!==J)return uf(8,{from:le,to:J})}function T(J){return U(J)}function I(J){return T(rr(O(J),{replace:!0}))}function D(J){const le=J.matched[J.matched.length-1];if(le&&le.redirect){const{redirect:pe}=le;let L=typeof pe=="function"?pe(J):pe;return typeof L=="string"&&(L=L.includes("?")||L.includes("#")?L=O(L):{path:L},L.params={}),rr({query:J.query,hash:J.hash,params:"path"in L?{}:J.params},L)}}function U(J,le){const pe=l=w(J),L=c.value,P=J.state,m=J.force,y=J.replace===!0,v=D(pe);if(v)return U(rr(O(v),{state:typeof v=="object"?rr({},P,v.state):P,force:m,replace:y}),le||pe);const j=pe;j.redirectedFrom=le;let V;return!m&&Kme(n,L,pe)&&(V=uf(16,{to:j,from:L}),Te(L,L,!0,!1)),(V?Promise.resolve(V):R(j,L)).catch(q=>mo(q)?mo(q,2)?q:he(q):ie(q,j,L)).then(q=>{if(q){if(mo(q,2))return U(rr({replace:y},O(q.to),{state:typeof q.to=="object"?rr({},P,q.to.state):P,force:m}),le||j)}else q=X(j,L,!0,y,P);return F(j,L,q),q})}function H(J,le){const pe=A(J,le);return pe?Promise.reject(pe):Promise.resolve()}function N(J){const le=ce.values().next().value;return le&&typeof le.runWithContext=="function"?le.runWithContext(J):J()}function R(J,le){let pe;const[L,P,m]=Wve(J,le);pe=wE(L.reverse(),"beforeRouteLeave",J,le);for(const v of L)v.leaveGuards.forEach(j=>{pe.push(Pu(j,J,le))});const y=H.bind(null,J,le);return pe.push(y),oe(pe).then(()=>{pe=[];for(const v of s.list())pe.push(Pu(v,J,le));return pe.push(y),oe(pe)}).then(()=>{pe=wE(P,"beforeRouteUpdate",J,le);for(const v of P)v.updateGuards.forEach(j=>{pe.push(Pu(j,J,le))});return pe.push(y),oe(pe)}).then(()=>{pe=[];for(const v of m)if(v.beforeEnter)if(us(v.beforeEnter))for(const j of v.beforeEnter)pe.push(Pu(j,J,le));else pe.push(Pu(v.beforeEnter,J,le));return pe.push(y),oe(pe)}).then(()=>(J.matched.forEach(v=>v.enterCallbacks={}),pe=wE(m,"beforeRouteEnter",J,le),pe.push(y),oe(pe))).then(()=>{pe=[];for(const v of o.list())pe.push(Pu(v,J,le));return pe.push(y),oe(pe)}).catch(v=>mo(v,8)?v:Promise.reject(v))}function F(J,le,pe){u.list().forEach(L=>N(()=>L(J,le,pe)))}function X(J,le,pe,L,P){const m=A(J,le);if(m)return m;const y=le===pu,v=fd?history.state:{};pe&&(L||y?a.replace(J.fullPath,rr({scroll:y&&v&&v.scroll},P)):a.push(J.fullPath,P)),c.value=J,Te(J,le,pe,y),he()}let ne;function $(){ne||(ne=a.listen((J,le,pe)=>{if(!xe.listening)return;const L=w(J),P=D(L);if(P){U(rr(P,{replace:!0}),L).catch(dp);return}l=L;const m=c.value;fd&&ive(E8(m.fullPath,pe.delta),e3()),R(L,m).catch(y=>mo(y,12)?y:mo(y,2)?(U(y.to,L).then(v=>{mo(v,20)&&!pe.delta&&pe.type===Up.pop&&a.go(-1,!1)}).catch(dp),Promise.reject()):(pe.delta&&a.go(-pe.delta,!1),ie(y,L,m))).then(y=>{y=y||X(L,m,!1),y&&(pe.delta&&!mo(y,8)?a.go(-pe.delta,!1):pe.type===Up.pop&&mo(y,20)&&a.go(-1,!1)),F(L,m,y)}).catch(dp)}))}let C=Dh(),Q=Dh(),se;function ie(J,le,pe){he(J);const L=Q.list();return L.length?L.forEach(P=>P(J,le,pe)):console.error(J),Promise.reject(J)}function be(){return se&&c.value!==pu?Promise.resolve():new Promise((J,le)=>{C.add([J,le])})}function he(J){return se||(se=!J,$(),C.list().forEach(([le,pe])=>J?pe(J):le()),C.reset()),J}function Te(J,le,pe,L){const{scrollBehavior:P}=t;if(!fd||!P)return Promise.resolve();const m=!pe&&ave(E8(J.fullPath,0))||(L||!pe)&&history.state&&history.state.scroll||null;return l5().then(()=>P(J,le,m)).then(y=>y&&nve(y)).catch(y=>ie(y,J,le))}const Ne=J=>a.go(J);let ye;const ce=new Set,xe={currentRoute:c,listening:!0,addRoute:p,removeRoute:b,hasRoute:E,getRoutes:_,resolve:w,options:t,push:T,replace:I,go:Ne,back:()=>Ne(-1),forward:()=>Ne(1),beforeEach:s.add,beforeResolve:o.add,afterEach:u.add,onError:Q.add,isReady:be,install(J){const le=this;J.component("RouterLink",Vve),J.component("RouterView",Gve),J.config.globalProperties.$router=le,Object.defineProperty(J.config.globalProperties,"$route",{enumerable:!0,get:()=>Dt(c)}),fd&&!ye&&c.value===pu&&(ye=!0,T(a.location).catch(P=>{}));const pe={};for(const P in pu)Object.defineProperty(pe,P,{get:()=>c.value[P],enumerable:!0});J.provide(zR,le),J.provide($$,t5(pe)),J.provide(HO,c);const L=J.unmount;ce.add(J),J.unmount=function(){ce.delete(J),ce.size<1&&(l=pu,ne&&ne(),ne=null,c.value=pu,ye=!1,se=!1),L()}}};function oe(J){return J.reduce((le,pe)=>le.then(()=>N(pe)),Promise.resolve())}return xe}function Wve(t,e){const r=[],n=[],a=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const u=e.matched[o];u&&(t.matched.find(l=>of(l,u))?n.push(u):r.push(u));const c=t.matched[o];c&&(e.matched.find(l=>of(l,c))||a.push(c))}return[r,n,a]}const Xve=zve({history:cve("/scholarly-browser/"),routes:[{path:"/",component:R$,props:!0}]}),U$=mV(R$);U$.use(Xve);U$.mount("#app");
