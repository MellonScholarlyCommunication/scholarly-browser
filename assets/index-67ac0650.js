var hU=Object.defineProperty;var pU=(t,e,u)=>e in t?hU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[e]=u;var wr=(t,e,u)=>(pU(t,typeof e!="symbol"?e+"":e,u),u),Rm=(t,e,u)=>{if(!e.has(t))throw TypeError("Cannot "+u)};var _e=(t,e,u)=>(Rm(t,e,"read from private field"),u?u.call(t):e.get(t)),xt=(t,e,u)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,u)},_t=(t,e,u,s)=>(Rm(t,e,"write to private field"),s?s.call(t,u):e.set(t,u),u);var Jy=(t,e,u,s)=>({set _(n){_t(t,e,n,u)},get _(){return _e(t,e,s)}}),ct=(t,e,u)=>(Rm(t,e,"access private method"),u);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function u(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=u(n);fetch(n.href,r)}})();function F3(t,e){const u=Object.create(null),s=t.split(",");for(let n=0;n<s.length;n++)u[s[n]]=!0;return e?n=>!!u[n.toLowerCase()]:n=>!!u[n]}const yr={},Oo=[],Si=()=>{},yU=()=>!1,bU=/^on[^a-z]/,fb=t=>bU.test(t),q3=t=>t.startsWith("onUpdate:"),Wr=Object.assign,B3=(t,e)=>{const u=t.indexOf(e);u>-1&&t.splice(u,1)},mU=Object.prototype.hasOwnProperty,$t=(t,e)=>mU.call(t,e),Rt=Array.isArray,Ro=t=>hb(t)==="[object Map]",YM=t=>hb(t)==="[object Set]",Pt=t=>typeof t=="function",qr=t=>typeof t=="string",U3=t=>typeof t=="symbol",Sr=t=>t!==null&&typeof t=="object",ZM=t=>Sr(t)&&Pt(t.then)&&Pt(t.catch),e9=Object.prototype.toString,hb=t=>e9.call(t),gU=t=>hb(t).slice(8,-1),t9=t=>hb(t)==="[object Object]",Q3=t=>qr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,M1=F3(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pb=t=>{const e=Object.create(null);return u=>e[u]||(e[u]=t(u))},_U=/-(\w)/g,$i=pb(t=>t.replace(_U,(e,u)=>u?u.toUpperCase():"")),vU=/\B([A-Z])/g,ko=pb(t=>t.replace(vU,"-$1").toLowerCase()),yb=pb(t=>t.charAt(0).toUpperCase()+t.slice(1)),xm=pb(t=>t?`on${yb(t)}`:""),$0=(t,e)=>!Object.is(t,e),Im=(t,e)=>{for(let u=0;u<t.length;u++)t[u](e)},Y1=(t,e,u)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:u})},wU=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let UA;const GS=()=>UA||(UA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ua(t){if(Rt(t)){const e={};for(let u=0;u<t.length;u++){const s=t[u],n=qr(s)?EU(s):Ua(s);if(n)for(const r in n)e[r]=n[r]}return e}else{if(qr(t))return t;if(Sr(t))return t}}const SU=/;(?![^(]*\))/g,TU=/:([^]+)/,AU=/\/\*[^]*?\*\//g;function EU(t){const e={};return t.replace(AU,"").split(SU).forEach(u=>{if(u){const s=u.split(TU);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function rn(t){let e="";if(qr(t))e=t;else if(Rt(t))for(let u=0;u<t.length;u++){const s=rn(t[u]);s&&(e+=s+" ")}else if(Sr(t))for(const u in t)t[u]&&(e+=u+" ");return e.trim()}const OU="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",RU=F3(OU);function r9(t){return!!t||t===""}const Or=t=>qr(t)?t:t==null?"":Rt(t)||Sr(t)&&(t.toString===e9||!Pt(t.toString))?JSON.stringify(t,n9,2):String(t),n9=(t,e)=>e&&e.__v_isRef?n9(t,e.value):Ro(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((u,[s,n])=>(u[`${s} =>`]=n,u),{})}:YM(e)?{[`Set(${e.size})`]:[...e.values()]}:Sr(e)&&!Rt(e)&&!t9(e)?String(e):e;let gi;class xU{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=gi,!e&&gi&&(this.index=(gi.scopes||(gi.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const u=gi;try{return gi=this,e()}finally{gi=u}}}on(){gi=this}off(){gi=this.parent}stop(e){if(this._active){let u,s;for(u=0,s=this.effects.length;u<s;u++)this.effects[u].stop();for(u=0,s=this.cleanups.length;u<s;u++)this.cleanups[u]();if(this.scopes)for(u=0,s=this.scopes.length;u<s;u++)this.scopes[u].stop(!0);if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function IU(t,e=gi){e&&e.active&&e.effects.push(t)}function PU(){return gi}const H3=t=>{const e=new Set(t);return e.w=0,e.n=0,e},i9=t=>(t.w&za)>0,a9=t=>(t.n&za)>0,DU=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=za},NU=t=>{const{deps:e}=t;if(e.length){let u=0;for(let s=0;s<e.length;s++){const n=e[s];i9(n)&&!a9(n)?n.delete(t):e[u++]=n,n.w&=~za,n.n&=~za}e.length=u}},WS=new WeakMap;let w0=0,za=1;const JS=30;let _i;const ks=Symbol(""),XS=Symbol("");class $3{constructor(e,u=null,s){this.fn=e,this.scheduler=u,this.active=!0,this.deps=[],this.parent=void 0,IU(this,s)}run(){if(!this.active)return this.fn();let e=_i,u=Ha;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=_i,_i=this,Ha=!0,za=1<<++w0,w0<=JS?DU(this):QA(this),this.fn()}finally{w0<=JS&&NU(this),za=1<<--w0,_i=this.parent,Ha=u,this.parent=void 0,this.deferStop&&this.stop()}}stop(){_i===this?this.deferStop=!0:this.active&&(QA(this),this.onStop&&this.onStop(),this.active=!1)}}function QA(t){const{deps:e}=t;if(e.length){for(let u=0;u<e.length;u++)e[u].delete(t);e.length=0}}let Ha=!0;const s9=[];function zo(){s9.push(Ha),Ha=!1}function Go(){const t=s9.pop();Ha=t===void 0?!0:t}function Bn(t,e,u){if(Ha&&_i){let s=WS.get(t);s||WS.set(t,s=new Map);let n=s.get(u);n||s.set(u,n=H3()),o9(n)}}function o9(t,e){let u=!1;w0<=JS?a9(t)||(t.n|=za,u=!i9(t)):u=!t.has(_i),u&&(t.add(_i),_i.deps.push(t))}function ga(t,e,u,s,n,r){const a=WS.get(t);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(u==="length"&&Rt(t)){const l=Number(s);a.forEach((c,d)=>{(d==="length"||d>=l)&&o.push(c)})}else switch(u!==void 0&&o.push(a.get(u)),e){case"add":Rt(t)?Q3(u)&&o.push(a.get("length")):(o.push(a.get(ks)),Ro(t)&&o.push(a.get(XS)));break;case"delete":Rt(t)||(o.push(a.get(ks)),Ro(t)&&o.push(a.get(XS)));break;case"set":Ro(t)&&o.push(a.get(ks));break}if(o.length===1)o[0]&&KS(o[0]);else{const l=[];for(const c of o)c&&l.push(...c);KS(H3(l))}}function KS(t,e){const u=Rt(t)?t:[...t];for(const s of u)s.computed&&HA(s);for(const s of u)s.computed||HA(s)}function HA(t,e){(t!==_i||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const CU=F3("__proto__,__v_isRef,__isVue"),u9=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(U3)),jU=V3(),LU=V3(!1,!0),MU=V3(!0),$A=FU();function FU(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...u){const s=Gt(this);for(let r=0,a=this.length;r<a;r++)Bn(s,"get",r+"");const n=s[e](...u);return n===-1||n===!1?s[e](...u.map(Gt)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...u){zo();const s=Gt(this)[e].apply(this,u);return Go(),s}}),t}function qU(t){const e=Gt(this);return Bn(e,"has",t),e.hasOwnProperty(t)}function V3(t=!1,e=!1){return function(s,n,r){if(n==="__v_isReactive")return!t;if(n==="__v_isReadonly")return t;if(n==="__v_isShallow")return e;if(n==="__v_raw"&&r===(t?e?eQ:h9:e?f9:d9).get(s))return s;const a=Rt(s);if(!t){if(a&&$t($A,n))return Reflect.get($A,n,r);if(n==="hasOwnProperty")return qU}const o=Reflect.get(s,n,r);return(U3(n)?u9.has(n):CU(n))||(t||Bn(s,"get",n),e)?o:fn(o)?a&&Q3(n)?o:o.value:Sr(o)?t?y9(o):mb(o):o}}const BU=c9(),UU=c9(!0);function c9(t=!1){return function(u,s,n,r){let a=u[s];if(Do(a)&&fn(a)&&!fn(n))return!1;if(!t&&(!Z1(n)&&!Do(n)&&(a=Gt(a),n=Gt(n)),!Rt(u)&&fn(a)&&!fn(n)))return a.value=n,!0;const o=Rt(u)&&Q3(s)?Number(s)<u.length:$t(u,s),l=Reflect.set(u,s,n,r);return u===Gt(r)&&(o?$0(n,a)&&ga(u,"set",s,n):ga(u,"add",s,n)),l}}function QU(t,e){const u=$t(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&u&&ga(t,"delete",e,void 0),s}function HU(t,e){const u=Reflect.has(t,e);return(!U3(e)||!u9.has(e))&&Bn(t,"has",e),u}function $U(t){return Bn(t,"iterate",Rt(t)?"length":ks),Reflect.ownKeys(t)}const l9={get:jU,set:BU,deleteProperty:QU,has:HU,ownKeys:$U},VU={get:MU,set(t,e){return!0},deleteProperty(t,e){return!0}},kU=Wr({},l9,{get:LU,set:UU}),k3=t=>t,bb=t=>Reflect.getPrototypeOf(t);function Xy(t,e,u=!1,s=!1){t=t.__v_raw;const n=Gt(t),r=Gt(e);u||(e!==r&&Bn(n,"get",e),Bn(n,"get",r));const{has:a}=bb(n),o=s?k3:u?W3:V0;if(a.call(n,e))return o(t.get(e));if(a.call(n,r))return o(t.get(r));t!==n&&t.get(e)}function Ky(t,e=!1){const u=this.__v_raw,s=Gt(u),n=Gt(t);return e||(t!==n&&Bn(s,"has",t),Bn(s,"has",n)),t===n?u.has(t):u.has(t)||u.has(n)}function Yy(t,e=!1){return t=t.__v_raw,!e&&Bn(Gt(t),"iterate",ks),Reflect.get(t,"size",t)}function VA(t){t=Gt(t);const e=Gt(this);return bb(e).has.call(e,t)||(e.add(t),ga(e,"add",t,t)),this}function kA(t,e){e=Gt(e);const u=Gt(this),{has:s,get:n}=bb(u);let r=s.call(u,t);r||(t=Gt(t),r=s.call(u,t));const a=n.call(u,t);return u.set(t,e),r?$0(e,a)&&ga(u,"set",t,e):ga(u,"add",t,e),this}function zA(t){const e=Gt(this),{has:u,get:s}=bb(e);let n=u.call(e,t);n||(t=Gt(t),n=u.call(e,t)),s&&s.call(e,t);const r=e.delete(t);return n&&ga(e,"delete",t,void 0),r}function GA(){const t=Gt(this),e=t.size!==0,u=t.clear();return e&&ga(t,"clear",void 0,void 0),u}function Zy(t,e){return function(s,n){const r=this,a=r.__v_raw,o=Gt(a),l=e?k3:t?W3:V0;return!t&&Bn(o,"iterate",ks),a.forEach((c,d)=>s.call(n,l(c),l(d),r))}}function e1(t,e,u){return function(...s){const n=this.__v_raw,r=Gt(n),a=Ro(r),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,c=n[t](...s),d=u?k3:e?W3:V0;return!e&&Bn(r,"iterate",l?XS:ks),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:o?[d(h[0]),d(h[1])]:d(h),done:f}},[Symbol.iterator](){return this}}}}function Ra(t){return function(...e){return t==="delete"?!1:this}}function zU(){const t={get(r){return Xy(this,r)},get size(){return Yy(this)},has:Ky,add:VA,set:kA,delete:zA,clear:GA,forEach:Zy(!1,!1)},e={get(r){return Xy(this,r,!1,!0)},get size(){return Yy(this)},has:Ky,add:VA,set:kA,delete:zA,clear:GA,forEach:Zy(!1,!0)},u={get(r){return Xy(this,r,!0)},get size(){return Yy(this,!0)},has(r){return Ky.call(this,r,!0)},add:Ra("add"),set:Ra("set"),delete:Ra("delete"),clear:Ra("clear"),forEach:Zy(!0,!1)},s={get(r){return Xy(this,r,!0,!0)},get size(){return Yy(this,!0)},has(r){return Ky.call(this,r,!0)},add:Ra("add"),set:Ra("set"),delete:Ra("delete"),clear:Ra("clear"),forEach:Zy(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=e1(r,!1,!1),u[r]=e1(r,!0,!1),e[r]=e1(r,!1,!0),s[r]=e1(r,!0,!0)}),[t,u,e,s]}const[GU,WU,JU,XU]=zU();function z3(t,e){const u=e?t?XU:JU:t?WU:GU;return(s,n,r)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?s:Reflect.get($t(u,n)&&n in s?u:s,n,r)}const KU={get:z3(!1,!1)},YU={get:z3(!1,!0)},ZU={get:z3(!0,!1)},d9=new WeakMap,f9=new WeakMap,h9=new WeakMap,eQ=new WeakMap;function tQ(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rQ(t){return t.__v_skip||!Object.isExtensible(t)?0:tQ(gU(t))}function mb(t){return Do(t)?t:G3(t,!1,l9,KU,d9)}function p9(t){return G3(t,!1,kU,YU,f9)}function y9(t){return G3(t,!0,VU,ZU,h9)}function G3(t,e,u,s,n){if(!Sr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=n.get(t);if(r)return r;const a=rQ(t);if(a===0)return t;const o=new Proxy(t,a===2?s:u);return n.set(t,o),o}function xo(t){return Do(t)?xo(t.__v_raw):!!(t&&t.__v_isReactive)}function Do(t){return!!(t&&t.__v_isReadonly)}function Z1(t){return!!(t&&t.__v_isShallow)}function b9(t){return xo(t)||Do(t)}function Gt(t){const e=t&&t.__v_raw;return e?Gt(e):t}function m9(t){return Y1(t,"__v_skip",!0),t}const V0=t=>Sr(t)?mb(t):t,W3=t=>Sr(t)?y9(t):t;function g9(t){Ha&&_i&&(t=Gt(t),o9(t.dep||(t.dep=H3())))}function _9(t,e){t=Gt(t);const u=t.dep;u&&KS(u)}function fn(t){return!!(t&&t.__v_isRef===!0)}function En(t){return v9(t,!1)}function nQ(t){return v9(t,!0)}function v9(t,e){return fn(t)?t:new iQ(t,e)}class iQ{constructor(e,u){this.__v_isShallow=u,this.dep=void 0,this.__v_isRef=!0,this._rawValue=u?e:Gt(e),this._value=u?e:V0(e)}get value(){return g9(this),this._value}set value(e){const u=this.__v_isShallow||Z1(e)||Do(e);e=u?e:Gt(e),$0(e,this._rawValue)&&(this._rawValue=e,this._value=u?e:V0(e),_9(this))}}function qt(t){return fn(t)?t.value:t}const aQ={get:(t,e,u)=>qt(Reflect.get(t,e,u)),set:(t,e,u,s)=>{const n=t[e];return fn(n)&&!fn(u)?(n.value=u,!0):Reflect.set(t,e,u,s)}};function w9(t){return xo(t)?t:new Proxy(t,aQ)}class sQ{constructor(e,u,s,n){this._setter=u,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new $3(e,()=>{this._dirty||(this._dirty=!0,_9(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=s}get value(){const e=Gt(this);return g9(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function oQ(t,e,u=!1){let s,n;const r=Pt(t);return r?(s=t,n=Si):(s=t.get,n=t.set),new sQ(s,n,r||!n,u)}function $a(t,e,u,s){let n;try{n=s?t(...s):t()}catch(r){gb(r,e,u)}return n}function Ti(t,e,u,s){if(Pt(t)){const r=$a(t,e,u,s);return r&&ZM(r)&&r.catch(a=>{gb(a,e,u)}),r}const n=[];for(let r=0;r<t.length;r++)n.push(Ti(t[r],e,u,s));return n}function gb(t,e,u,s=!0){const n=e?e.vnode:null;if(e){let r=e.parent;const a=e.proxy,o=u;for(;r;){const c=r.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,a,o)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){$a(l,null,10,[t,a,o]);return}}uQ(t,u,n,s)}function uQ(t,e,u,s=!0){console.error(t)}let k0=!1,YS=!1;const dn=[];let Ui=0;const Io=[];let ba=null,Bs=0;const S9=Promise.resolve();let J3=null;function T9(t){const e=J3||S9;return t?e.then(this?t.bind(this):t):e}function cQ(t){let e=Ui+1,u=dn.length;for(;e<u;){const s=e+u>>>1;z0(dn[s])<t?e=s+1:u=s}return e}function X3(t){(!dn.length||!dn.includes(t,k0&&t.allowRecurse?Ui+1:Ui))&&(t.id==null?dn.push(t):dn.splice(cQ(t.id),0,t),A9())}function A9(){!k0&&!YS&&(YS=!0,J3=S9.then(O9))}function lQ(t){const e=dn.indexOf(t);e>Ui&&dn.splice(e,1)}function dQ(t){Rt(t)?Io.push(...t):(!ba||!ba.includes(t,t.allowRecurse?Bs+1:Bs))&&Io.push(t),A9()}function WA(t,e=k0?Ui+1:0){for(;e<dn.length;e++){const u=dn[e];u&&u.pre&&(dn.splice(e,1),e--,u())}}function E9(t){if(Io.length){const e=[...new Set(Io)];if(Io.length=0,ba){ba.push(...e);return}for(ba=e,ba.sort((u,s)=>z0(u)-z0(s)),Bs=0;Bs<ba.length;Bs++)ba[Bs]();ba=null,Bs=0}}const z0=t=>t.id==null?1/0:t.id,fQ=(t,e)=>{const u=z0(t)-z0(e);if(u===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return u};function O9(t){YS=!1,k0=!0,dn.sort(fQ);const e=Si;try{for(Ui=0;Ui<dn.length;Ui++){const u=dn[Ui];u&&u.active!==!1&&$a(u,null,14)}}finally{Ui=0,dn.length=0,E9(),k0=!1,J3=null,(dn.length||Io.length)&&O9()}}function hQ(t,e,...u){if(t.isUnmounted)return;const s=t.vnode.props||yr;let n=u;const r=e.startsWith("update:"),a=r&&e.slice(7);if(a&&a in s){const d=`${a==="modelValue"?"model":a}Modifiers`,{number:h,trim:f}=s[d]||yr;f&&(n=u.map(p=>qr(p)?p.trim():p)),h&&(n=u.map(wU))}let o,l=s[o=xm(e)]||s[o=xm($i(e))];!l&&r&&(l=s[o=xm(ko(e))]),l&&Ti(l,t,6,n);const c=s[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Ti(c,t,6,n)}}function R9(t,e,u=!1){const s=e.emitsCache,n=s.get(t);if(n!==void 0)return n;const r=t.emits;let a={},o=!1;if(!Pt(t)){const l=c=>{const d=R9(c,e,!0);d&&(o=!0,Wr(a,d))};!u&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!o?(Sr(t)&&s.set(t,null),null):(Rt(r)?r.forEach(l=>a[l]=null):Wr(a,r),Sr(t)&&s.set(t,a),a)}function _b(t,e){return!t||!fb(e)?!1:(e=e.slice(2).replace(/Once$/,""),$t(t,e[0].toLowerCase()+e.slice(1))||$t(t,ko(e))||$t(t,e))}let nn=null,vb=null;function eb(t){const e=nn;return nn=t,vb=t&&t.type.__scopeId||null,e}function pQ(t){vb=t}function yQ(){vb=null}function Lr(t,e=nn,u){if(!e||t._n)return t;const s=(...n)=>{s._d&&sE(-1);const r=eb(e);let a;try{a=t(...n)}finally{eb(r),s._d&&sE(1)}return a};return s._n=!0,s._c=!0,s._d=!0,s}function Pm(t){const{type:e,vnode:u,proxy:s,withProxy:n,props:r,propsOptions:[a],slots:o,attrs:l,emit:c,render:d,renderCache:h,data:f,setupState:p,ctx:y,inheritAttrs:b}=t;let g,m;const v=eb(t);try{if(u.shapeFlag&4){const w=n||s;g=Bi(d.call(w,w,h,r,p,f,y)),m=l}else{const w=e;g=Bi(w.length>1?w(r,{attrs:l,slots:o,emit:c}):w(r,null)),m=e.props?l:bQ(l)}}catch(w){B0.length=0,gb(w,t,1),g=ar(Ga)}let _=g;if(m&&b!==!1){const w=Object.keys(m),{shapeFlag:S}=_;w.length&&S&7&&(a&&w.some(q3)&&(m=mQ(m,a)),_=No(_,m))}return u.dirs&&(_=No(_),_.dirs=_.dirs?_.dirs.concat(u.dirs):u.dirs),u.transition&&(_.transition=u.transition),g=_,eb(v),g}const bQ=t=>{let e;for(const u in t)(u==="class"||u==="style"||fb(u))&&((e||(e={}))[u]=t[u]);return e},mQ=(t,e)=>{const u={};for(const s in t)(!q3(s)||!(s.slice(9)in e))&&(u[s]=t[s]);return u};function gQ(t,e,u){const{props:s,children:n,component:r}=t,{props:a,children:o,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(u&&l>=0){if(l&1024)return!0;if(l&16)return s?JA(s,a,c):!!a;if(l&8){const d=e.dynamicProps;for(let h=0;h<d.length;h++){const f=d[h];if(a[f]!==s[f]&&!_b(c,f))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:s===a?!1:s?a?JA(s,a,c):!0:!!a;return!1}function JA(t,e,u){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(e[r]!==t[r]&&!_b(u,r))return!0}return!1}function _Q({vnode:t,parent:e},u){for(;e&&e.subTree===t;)(t=e.vnode).el=u,e=e.parent}const vQ=t=>t.__isSuspense;function wQ(t,e){e&&e.pendingBranch?Rt(t)?e.effects.push(...t):e.effects.push(t):dQ(t)}function x9(t,e){return K3(t,null,e)}const t1={};function Po(t,e,u){return K3(t,e,u)}function K3(t,e,{immediate:u,deep:s,flush:n,onTrack:r,onTrigger:a}=yr){var o;const l=PU()===((o=Gr)==null?void 0:o.scope)?Gr:null;let c,d=!1,h=!1;if(fn(t)?(c=()=>t.value,d=Z1(t)):xo(t)?(c=()=>t,s=!0):Rt(t)?(h=!0,d=t.some(w=>xo(w)||Z1(w)),c=()=>t.map(w=>{if(fn(w))return w.value;if(xo(w))return $s(w);if(Pt(w))return $a(w,l,2)})):Pt(t)?e?c=()=>$a(t,l,2):c=()=>{if(!(l&&l.isUnmounted))return f&&f(),Ti(t,l,3,[p])}:c=Si,e&&s){const w=c;c=()=>$s(w())}let f,p=w=>{f=v.onStop=()=>{$a(w,l,4)}},y;if(W0)if(p=Si,e?u&&Ti(e,l,3,[c(),h?[]:void 0,p]):c(),n==="sync"){const w=dH();y=w.__watcherHandles||(w.__watcherHandles=[])}else return Si;let b=h?new Array(t.length).fill(t1):t1;const g=()=>{if(v.active)if(e){const w=v.run();(s||d||(h?w.some((S,A)=>$0(S,b[A])):$0(w,b)))&&(f&&f(),Ti(e,l,3,[w,b===t1?void 0:h&&b[0]===t1?[]:b,p]),b=w)}else v.run()};g.allowRecurse=!!e;let m;n==="sync"?m=g:n==="post"?m=()=>Fn(g,l&&l.suspense):(g.pre=!0,l&&(g.id=l.uid),m=()=>X3(g));const v=new $3(c,m);e?u?g():b=v.run():n==="post"?Fn(v.run.bind(v),l&&l.suspense):v.run();const _=()=>{v.stop(),l&&l.scope&&B3(l.scope.effects,v)};return y&&y.push(_),_}function SQ(t,e,u){const s=this.proxy,n=qr(t)?t.includes(".")?I9(s,t):()=>s[t]:t.bind(s,s);let r;Pt(e)?r=e:(r=e.handler,u=e);const a=Gr;Co(this);const o=K3(n,r.bind(s),u);return a?Co(a):zs(),o}function I9(t,e){const u=e.split(".");return()=>{let s=t;for(let n=0;n<u.length&&s;n++)s=s[u[n]];return s}}function $s(t,e){if(!Sr(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),fn(t))$s(t.value,e);else if(Rt(t))for(let u=0;u<t.length;u++)$s(t[u],e);else if(YM(t)||Ro(t))t.forEach(u=>{$s(u,e)});else if(t9(t))for(const u in t)$s(t[u],e);return t}function tb(t,e){const u=nn;if(u===null)return t;const s=Ab(u)||u.proxy,n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[a,o,l,c=yr]=e[r];a&&(Pt(a)&&(a={mounted:a,updated:a}),a.deep&&$s(o),n.push({dir:a,instance:s,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function bs(t,e,u,s){const n=t.dirs,r=e&&e.dirs;for(let a=0;a<n.length;a++){const o=n[a];r&&(o.oldValue=r[a].value);let l=o.dir[s];l&&(zo(),Ti(l,u,8,[t.el,o,t,e]),Go())}}function xi(t,e){return Pt(t)?(()=>Wr({name:t.name},e,{setup:t}))():t}const F0=t=>!!t.type.__asyncLoader,P9=t=>t.type.__isKeepAlive;function TQ(t,e){D9(t,"a",e)}function AQ(t,e){D9(t,"da",e)}function D9(t,e,u=Gr){const s=t.__wdc||(t.__wdc=()=>{let n=u;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(wb(e,s,u),u){let n=u.parent;for(;n&&n.parent;)P9(n.parent.vnode)&&EQ(s,e,u,n),n=n.parent}}function EQ(t,e,u,s){const n=wb(e,t,s,!0);Y3(()=>{B3(s[e],n)},u)}function wb(t,e,u=Gr,s=!1){if(u){const n=u[t]||(u[t]=[]),r=e.__weh||(e.__weh=(...a)=>{if(u.isUnmounted)return;zo(),Co(u);const o=Ti(e,u,t,a);return zs(),Go(),o});return s?n.unshift(r):n.push(r),r}}const Sa=t=>(e,u=Gr)=>(!W0||t==="sp")&&wb(t,(...s)=>e(...s),u),OQ=Sa("bm"),N9=Sa("m"),RQ=Sa("bu"),C9=Sa("u"),xQ=Sa("bum"),Y3=Sa("um"),IQ=Sa("sp"),PQ=Sa("rtg"),DQ=Sa("rtc");function NQ(t,e=Gr){wb("ec",t,e)}const Z3="components";function yo(t,e){return L9(Z3,t,!0,e)||t}const j9=Symbol.for("v-ndc");function Ka(t){return qr(t)?L9(Z3,t,!1)||t:t||j9}function L9(t,e,u=!0,s=!1){const n=nn||Gr;if(n){const r=n.type;if(t===Z3){const o=uH(r,!1);if(o&&(o===e||o===$i(e)||o===yb($i(e))))return r}const a=XA(n[t]||r[t],e)||XA(n.appContext[t],e);return!a&&s?r:a}}function XA(t,e){return t&&(t[e]||t[$i(e)]||t[yb($i(e))])}function KA(t,e,u,s){let n;const r=u&&u[s];if(Rt(t)||qr(t)){n=new Array(t.length);for(let a=0,o=t.length;a<o;a++)n[a]=e(t[a],a,void 0,r&&r[a])}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,r&&r[a])}else if(Sr(t))if(t[Symbol.iterator])n=Array.from(t,(a,o)=>e(a,o,void 0,r&&r[o]));else{const a=Object.keys(t);n=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const c=a[o];n[o]=e(t[c],c,o,r&&r[o])}}else n=[];return u&&(u[s]=n),n}function Hi(t,e,u={},s,n){if(nn.isCE||nn.parent&&F0(nn.parent)&&nn.parent.isCE)return e!=="default"&&(u.name=e),ar("slot",u,s&&s());let r=t[e];r&&r._c&&(r._d=!1),jt();const a=r&&M9(r(u)),o=Ii(On,{key:u.key||a&&a.key||`_${e}`},a||(s?s():[]),a&&t._===1?64:-2);return!n&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),r&&r._c&&(r._d=!0),o}function M9(t){return t.some(e=>ib(e)?!(e.type===Ga||e.type===On&&!M9(e.children)):!0)?t:null}const ZS=t=>t?G9(t)?Ab(t)||t.proxy:ZS(t.parent):null,q0=Wr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ZS(t.parent),$root:t=>ZS(t.root),$emit:t=>t.emit,$options:t=>eT(t),$forceUpdate:t=>t.f||(t.f=()=>X3(t.update)),$nextTick:t=>t.n||(t.n=T9.bind(t.proxy)),$watch:t=>SQ.bind(t)}),Dm=(t,e)=>t!==yr&&!t.__isScriptSetup&&$t(t,e),CQ={get({_:t},e){const{ctx:u,setupState:s,data:n,props:r,accessCache:a,type:o,appContext:l}=t;let c;if(e[0]!=="$"){const p=a[e];if(p!==void 0)switch(p){case 1:return s[e];case 2:return n[e];case 4:return u[e];case 3:return r[e]}else{if(Dm(s,e))return a[e]=1,s[e];if(n!==yr&&$t(n,e))return a[e]=2,n[e];if((c=t.propsOptions[0])&&$t(c,e))return a[e]=3,r[e];if(u!==yr&&$t(u,e))return a[e]=4,u[e];e3&&(a[e]=0)}}const d=q0[e];let h,f;if(d)return e==="$attrs"&&Bn(t,"get",e),d(t);if((h=o.__cssModules)&&(h=h[e]))return h;if(u!==yr&&$t(u,e))return a[e]=4,u[e];if(f=l.config.globalProperties,$t(f,e))return f[e]},set({_:t},e,u){const{data:s,setupState:n,ctx:r}=t;return Dm(n,e)?(n[e]=u,!0):s!==yr&&$t(s,e)?(s[e]=u,!0):$t(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=u,!0)},has({_:{data:t,setupState:e,accessCache:u,ctx:s,appContext:n,propsOptions:r}},a){let o;return!!u[a]||t!==yr&&$t(t,a)||Dm(e,a)||(o=r[0])&&$t(o,a)||$t(s,a)||$t(q0,a)||$t(n.config.globalProperties,a)},defineProperty(t,e,u){return u.get!=null?t._.accessCache[e]=0:$t(u,"value")&&this.set(t,e,u.value,null),Reflect.defineProperty(t,e,u)}};function jQ(){return LQ().attrs}function LQ(){const t=iH();return t.setupContext||(t.setupContext=J9(t))}function YA(t){return Rt(t)?t.reduce((e,u)=>(e[u]=null,e),{}):t}let e3=!0;function MQ(t){const e=eT(t),u=t.proxy,s=t.ctx;e3=!1,e.beforeCreate&&ZA(e.beforeCreate,t,"bc");const{data:n,computed:r,methods:a,watch:o,provide:l,inject:c,created:d,beforeMount:h,mounted:f,beforeUpdate:p,updated:y,activated:b,deactivated:g,beforeDestroy:m,beforeUnmount:v,destroyed:_,unmounted:w,render:S,renderTracked:A,renderTriggered:D,errorCaptured:L,serverPrefetch:O,expose:E,inheritAttrs:P,components:M,directives:U,filters:j}=e;if(c&&FQ(c,s,null),a)for(const Z in a){const X=a[Z];Pt(X)&&(s[Z]=X.bind(u))}if(n){const Z=n.call(u,u);Sr(Z)&&(t.data=mb(Z))}if(e3=!0,r)for(const Z in r){const X=r[Z],le=Pt(X)?X.bind(u,u):Pt(X.get)?X.get.bind(u,u):Si,K=!Pt(X)&&Pt(X.set)?X.set.bind(u):Si,he=sr({get:le,set:K});Object.defineProperty(s,Z,{enumerable:!0,configurable:!0,get:()=>he.value,set:Re=>he.value=Re})}if(o)for(const Z in o)F9(o[Z],s,u,Z);if(l){const Z=Pt(l)?l.call(u):l;Reflect.ownKeys(Z).forEach(X=>{F1(X,Z[X])})}d&&ZA(d,t,"c");function $(Z,X){Rt(X)?X.forEach(le=>Z(le.bind(u))):X&&Z(X.bind(u))}if($(OQ,h),$(N9,f),$(RQ,p),$(C9,y),$(TQ,b),$(AQ,g),$(NQ,L),$(DQ,A),$(PQ,D),$(xQ,v),$(Y3,w),$(IQ,O),Rt(E))if(E.length){const Z=t.exposed||(t.exposed={});E.forEach(X=>{Object.defineProperty(Z,X,{get:()=>u[X],set:le=>u[X]=le})})}else t.exposed||(t.exposed={});S&&t.render===Si&&(t.render=S),P!=null&&(t.inheritAttrs=P),M&&(t.components=M),U&&(t.directives=U)}function FQ(t,e,u=Si){Rt(t)&&(t=t3(t));for(const s in t){const n=t[s];let r;Sr(n)?"default"in n?r=Ai(n.from||s,n.default,!0):r=Ai(n.from||s):r=Ai(n),fn(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):e[s]=r}}function ZA(t,e,u){Ti(Rt(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,u)}function F9(t,e,u,s){const n=s.includes(".")?I9(u,s):()=>u[s];if(qr(t)){const r=e[t];Pt(r)&&Po(n,r)}else if(Pt(t))Po(n,t.bind(u));else if(Sr(t))if(Rt(t))t.forEach(r=>F9(r,e,u,s));else{const r=Pt(t.handler)?t.handler.bind(u):e[t.handler];Pt(r)&&Po(n,r,t)}}function eT(t){const e=t.type,{mixins:u,extends:s}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:a}}=t.appContext,o=r.get(e);let l;return o?l=o:!n.length&&!u&&!s?l=e:(l={},n.length&&n.forEach(c=>rb(l,c,a,!0)),rb(l,e,a)),Sr(e)&&r.set(e,l),l}function rb(t,e,u,s=!1){const{mixins:n,extends:r}=e;r&&rb(t,r,u,!0),n&&n.forEach(a=>rb(t,a,u,!0));for(const a in e)if(!(s&&a==="expose")){const o=qQ[a]||u&&u[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const qQ={data:eE,props:tE,emits:tE,methods:S0,computed:S0,beforeCreate:Tn,created:Tn,beforeMount:Tn,mounted:Tn,beforeUpdate:Tn,updated:Tn,beforeDestroy:Tn,beforeUnmount:Tn,destroyed:Tn,unmounted:Tn,activated:Tn,deactivated:Tn,errorCaptured:Tn,serverPrefetch:Tn,components:S0,directives:S0,watch:UQ,provide:eE,inject:BQ};function eE(t,e){return e?t?function(){return Wr(Pt(t)?t.call(this,this):t,Pt(e)?e.call(this,this):e)}:e:t}function BQ(t,e){return S0(t3(t),t3(e))}function t3(t){if(Rt(t)){const e={};for(let u=0;u<t.length;u++)e[t[u]]=t[u];return e}return t}function Tn(t,e){return t?[...new Set([].concat(t,e))]:e}function S0(t,e){return t?Wr(Object.create(null),t,e):e}function tE(t,e){return t?Rt(t)&&Rt(e)?[...new Set([...t,...e])]:Wr(Object.create(null),YA(t),YA(e??{})):e}function UQ(t,e){if(!t)return e;if(!e)return t;const u=Wr(Object.create(null),t);for(const s in e)u[s]=Tn(t[s],e[s]);return u}function q9(){return{app:null,config:{isNativeTag:yU,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let QQ=0;function HQ(t,e){return function(s,n=null){Pt(s)||(s=Wr({},s)),n!=null&&!Sr(n)&&(n=null);const r=q9(),a=new Set;let o=!1;const l=r.app={_uid:QQ++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:fH,get config(){return r.config},set config(c){},use(c,...d){return a.has(c)||(c&&Pt(c.install)?(a.add(c),c.install(l,...d)):Pt(c)&&(a.add(c),c(l,...d))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,d){return d?(r.components[c]=d,l):r.components[c]},directive(c,d){return d?(r.directives[c]=d,l):r.directives[c]},mount(c,d,h){if(!o){const f=ar(s,n);return f.appContext=r,d&&e?e(f,c):t(f,c,h),o=!0,l._container=c,c.__vue_app__=l,Ab(f.component)||f.component.proxy}},unmount(){o&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,d){return r.provides[c]=d,l},runWithContext(c){nb=l;try{return c()}finally{nb=null}}};return l}}let nb=null;function F1(t,e){if(Gr){let u=Gr.provides;const s=Gr.parent&&Gr.parent.provides;s===u&&(u=Gr.provides=Object.create(s)),u[t]=e}}function Ai(t,e,u=!1){const s=Gr||nn;if(s||nb){const n=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:nb._context.provides;if(n&&t in n)return n[t];if(arguments.length>1)return u&&Pt(e)?e.call(s&&s.proxy):e}}function $Q(t,e,u,s=!1){const n={},r={};Y1(r,Tb,1),t.propsDefaults=Object.create(null),B9(t,e,n,r);for(const a in t.propsOptions[0])a in n||(n[a]=void 0);u?t.props=s?n:p9(n):t.type.props?t.props=n:t.props=r,t.attrs=r}function VQ(t,e,u,s){const{props:n,attrs:r,vnode:{patchFlag:a}}=t,o=Gt(n),[l]=t.propsOptions;let c=!1;if((s||a>0)&&!(a&16)){if(a&8){const d=t.vnode.dynamicProps;for(let h=0;h<d.length;h++){let f=d[h];if(_b(t.emitsOptions,f))continue;const p=e[f];if(l)if($t(r,f))p!==r[f]&&(r[f]=p,c=!0);else{const y=$i(f);n[y]=r3(l,o,y,p,t,!1)}else p!==r[f]&&(r[f]=p,c=!0)}}}else{B9(t,e,n,r)&&(c=!0);let d;for(const h in o)(!e||!$t(e,h)&&((d=ko(h))===h||!$t(e,d)))&&(l?u&&(u[h]!==void 0||u[d]!==void 0)&&(n[h]=r3(l,o,h,void 0,t,!0)):delete n[h]);if(r!==o)for(const h in r)(!e||!$t(e,h))&&(delete r[h],c=!0)}c&&ga(t,"set","$attrs")}function B9(t,e,u,s){const[n,r]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(M1(l))continue;const c=e[l];let d;n&&$t(n,d=$i(l))?!r||!r.includes(d)?u[d]=c:(o||(o={}))[d]=c:_b(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,a=!0)}if(r){const l=Gt(u),c=o||yr;for(let d=0;d<r.length;d++){const h=r[d];u[h]=r3(n,l,h,c[h],t,!$t(c,h))}}return a}function r3(t,e,u,s,n,r){const a=t[u];if(a!=null){const o=$t(a,"default");if(o&&s===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Pt(l)){const{propsDefaults:c}=n;u in c?s=c[u]:(Co(n),s=c[u]=l.call(null,e),zs())}else s=l}a[0]&&(r&&!o?s=!1:a[1]&&(s===""||s===ko(u))&&(s=!0))}return s}function U9(t,e,u=!1){const s=e.propsCache,n=s.get(t);if(n)return n;const r=t.props,a={},o=[];let l=!1;if(!Pt(t)){const d=h=>{l=!0;const[f,p]=U9(h,e,!0);Wr(a,f),p&&o.push(...p)};!u&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!r&&!l)return Sr(t)&&s.set(t,Oo),Oo;if(Rt(r))for(let d=0;d<r.length;d++){const h=$i(r[d]);rE(h)&&(a[h]=yr)}else if(r)for(const d in r){const h=$i(d);if(rE(h)){const f=r[d],p=a[h]=Rt(f)||Pt(f)?{type:f}:Wr({},f);if(p){const y=aE(Boolean,p.type),b=aE(String,p.type);p[0]=y>-1,p[1]=b<0||y<b,(y>-1||$t(p,"default"))&&o.push(h)}}}const c=[a,o];return Sr(t)&&s.set(t,c),c}function rE(t){return t[0]!=="$"}function nE(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function iE(t,e){return nE(t)===nE(e)}function aE(t,e){return Rt(e)?e.findIndex(u=>iE(u,t)):Pt(e)&&iE(e,t)?0:-1}const Q9=t=>t[0]==="_"||t==="$stable",tT=t=>Rt(t)?t.map(Bi):[Bi(t)],kQ=(t,e,u)=>{if(e._n)return e;const s=Lr((...n)=>tT(e(...n)),u);return s._c=!1,s},H9=(t,e,u)=>{const s=t._ctx;for(const n in t){if(Q9(n))continue;const r=t[n];if(Pt(r))e[n]=kQ(n,r,s);else if(r!=null){const a=tT(r);e[n]=()=>a}}},$9=(t,e)=>{const u=tT(e);t.slots.default=()=>u},zQ=(t,e)=>{if(t.vnode.shapeFlag&32){const u=e._;u?(t.slots=Gt(e),Y1(e,"_",u)):H9(e,t.slots={})}else t.slots={},e&&$9(t,e);Y1(t.slots,Tb,1)},GQ=(t,e,u)=>{const{vnode:s,slots:n}=t;let r=!0,a=yr;if(s.shapeFlag&32){const o=e._;o?u&&o===1?r=!1:(Wr(n,e),!u&&o===1&&delete n._):(r=!e.$stable,H9(e,n)),a=e}else e&&($9(t,e),a={default:1});if(r)for(const o in n)!Q9(o)&&!(o in a)&&delete n[o]};function n3(t,e,u,s,n=!1){if(Rt(t)){t.forEach((f,p)=>n3(f,e&&(Rt(e)?e[p]:e),u,s,n));return}if(F0(s)&&!n)return;const r=s.shapeFlag&4?Ab(s.component)||s.component.proxy:s.el,a=n?null:r,{i:o,r:l}=t,c=e&&e.r,d=o.refs===yr?o.refs={}:o.refs,h=o.setupState;if(c!=null&&c!==l&&(qr(c)?(d[c]=null,$t(h,c)&&(h[c]=null)):fn(c)&&(c.value=null)),Pt(l))$a(l,o,12,[a,d]);else{const f=qr(l),p=fn(l);if(f||p){const y=()=>{if(t.f){const b=f?$t(h,l)?h[l]:d[l]:l.value;n?Rt(b)&&B3(b,r):Rt(b)?b.includes(r)||b.push(r):f?(d[l]=[r],$t(h,l)&&(h[l]=d[l])):(l.value=[r],t.k&&(d[t.k]=l.value))}else f?(d[l]=a,$t(h,l)&&(h[l]=a)):p&&(l.value=a,t.k&&(d[t.k]=a))};a?(y.id=-1,Fn(y,u)):y()}}}const Fn=wQ;function WQ(t){return JQ(t)}function JQ(t,e){const u=GS();u.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:a,createText:o,createComment:l,setText:c,setElementText:d,parentNode:h,nextSibling:f,setScopeId:p=Si,insertStaticContent:y}=t,b=(R,T,x,B=null,k=null,V=null,J=!1,z=null,Y=!!T.dynamicChildren)=>{if(R===T)return;R&&!pu(R,T)&&(B=ge(R),Re(R,k,V,!0),R=null),T.patchFlag===-2&&(Y=!1,T.dynamicChildren=null);const{type:re,ref:ce,shapeFlag:Te}=T;switch(re){case Sb:g(R,T,x,B);break;case Ga:m(R,T,x,B);break;case Nm:R==null&&v(T,x,B,J);break;case On:M(R,T,x,B,k,V,J,z,Y);break;default:Te&1?S(R,T,x,B,k,V,J,z,Y):Te&6?U(R,T,x,B,k,V,J,z,Y):(Te&64||Te&128)&&re.process(R,T,x,B,k,V,J,z,Y,fe)}ce!=null&&k&&n3(ce,R&&R.ref,V,T||R,!T)},g=(R,T,x,B)=>{if(R==null)s(T.el=o(T.children),x,B);else{const k=T.el=R.el;T.children!==R.children&&c(k,T.children)}},m=(R,T,x,B)=>{R==null?s(T.el=l(T.children||""),x,B):T.el=R.el},v=(R,T,x,B)=>{[R.el,R.anchor]=y(R.children,T,x,B,R.el,R.anchor)},_=({el:R,anchor:T},x,B)=>{let k;for(;R&&R!==T;)k=f(R),s(R,x,B),R=k;s(T,x,B)},w=({el:R,anchor:T})=>{let x;for(;R&&R!==T;)x=f(R),n(R),R=x;n(T)},S=(R,T,x,B,k,V,J,z,Y)=>{J=J||T.type==="svg",R==null?A(T,x,B,k,V,J,z,Y):O(R,T,k,V,J,z,Y)},A=(R,T,x,B,k,V,J,z)=>{let Y,re;const{type:ce,props:Te,shapeFlag:xe,transition:Le,dirs:qe}=R;if(Y=R.el=a(R.type,V,Te&&Te.is,Te),xe&8?d(Y,R.children):xe&16&&L(R.children,Y,null,B,k,V&&ce!=="foreignObject",J,z),qe&&bs(R,null,B,"created"),D(Y,R,R.scopeId,J,B),Te){for(const F in Te)F!=="value"&&!M1(F)&&r(Y,F,null,Te[F],V,R.children,B,k,De);"value"in Te&&r(Y,"value",null,Te.value),(re=Te.onVnodeBeforeMount)&&Mi(re,B,R)}qe&&bs(R,null,B,"beforeMount");const G=(!k||k&&!k.pendingBranch)&&Le&&!Le.persisted;G&&Le.beforeEnter(Y),s(Y,T,x),((re=Te&&Te.onVnodeMounted)||G||qe)&&Fn(()=>{re&&Mi(re,B,R),G&&Le.enter(Y),qe&&bs(R,null,B,"mounted")},k)},D=(R,T,x,B,k)=>{if(x&&p(R,x),B)for(let V=0;V<B.length;V++)p(R,B[V]);if(k){let V=k.subTree;if(T===V){const J=k.vnode;D(R,J,J.scopeId,J.slotScopeIds,k.parent)}}},L=(R,T,x,B,k,V,J,z,Y=0)=>{for(let re=Y;re<R.length;re++){const ce=R[re]=z?Ma(R[re]):Bi(R[re]);b(null,ce,T,x,B,k,V,J,z)}},O=(R,T,x,B,k,V,J)=>{const z=T.el=R.el;let{patchFlag:Y,dynamicChildren:re,dirs:ce}=T;Y|=R.patchFlag&16;const Te=R.props||yr,xe=T.props||yr;let Le;x&&ms(x,!1),(Le=xe.onVnodeBeforeUpdate)&&Mi(Le,x,T,R),ce&&bs(T,R,x,"beforeUpdate"),x&&ms(x,!0);const qe=k&&T.type!=="foreignObject";if(re?E(R.dynamicChildren,re,z,x,B,qe,V):J||X(R,T,z,null,x,B,qe,V,!1),Y>0){if(Y&16)P(z,T,Te,xe,x,B,k);else if(Y&2&&Te.class!==xe.class&&r(z,"class",null,xe.class,k),Y&4&&r(z,"style",Te.style,xe.style,k),Y&8){const G=T.dynamicProps;for(let F=0;F<G.length;F++){const Q=G[F],te=Te[Q],me=xe[Q];(me!==te||Q==="value")&&r(z,Q,te,me,k,R.children,x,B,De)}}Y&1&&R.children!==T.children&&d(z,T.children)}else!J&&re==null&&P(z,T,Te,xe,x,B,k);((Le=xe.onVnodeUpdated)||ce)&&Fn(()=>{Le&&Mi(Le,x,T,R),ce&&bs(T,R,x,"updated")},B)},E=(R,T,x,B,k,V,J)=>{for(let z=0;z<T.length;z++){const Y=R[z],re=T[z],ce=Y.el&&(Y.type===On||!pu(Y,re)||Y.shapeFlag&70)?h(Y.el):x;b(Y,re,ce,null,B,k,V,J,!0)}},P=(R,T,x,B,k,V,J)=>{if(x!==B){if(x!==yr)for(const z in x)!M1(z)&&!(z in B)&&r(R,z,x[z],null,J,T.children,k,V,De);for(const z in B){if(M1(z))continue;const Y=B[z],re=x[z];Y!==re&&z!=="value"&&r(R,z,re,Y,J,T.children,k,V,De)}"value"in B&&r(R,"value",x.value,B.value)}},M=(R,T,x,B,k,V,J,z,Y)=>{const re=T.el=R?R.el:o(""),ce=T.anchor=R?R.anchor:o("");let{patchFlag:Te,dynamicChildren:xe,slotScopeIds:Le}=T;Le&&(z=z?z.concat(Le):Le),R==null?(s(re,x,B),s(ce,x,B),L(T.children,x,ce,k,V,J,z,Y)):Te>0&&Te&64&&xe&&R.dynamicChildren?(E(R.dynamicChildren,xe,x,k,V,J,z),(T.key!=null||k&&T===k.subTree)&&V9(R,T,!0)):X(R,T,x,ce,k,V,J,z,Y)},U=(R,T,x,B,k,V,J,z,Y)=>{T.slotScopeIds=z,R==null?T.shapeFlag&512?k.ctx.activate(T,x,B,J,Y):j(T,x,B,k,V,J,Y):q(R,T,Y)},j=(R,T,x,B,k,V,J)=>{const z=R.component=nH(R,B,k);if(P9(R)&&(z.ctx.renderer=fe),aH(z),z.asyncDep){if(k&&k.registerDep(z,$),!R.el){const Y=z.subTree=ar(Ga);m(null,Y,T,x)}return}$(z,R,T,x,k,V,J)},q=(R,T,x)=>{const B=T.component=R.component;if(gQ(R,T,x))if(B.asyncDep&&!B.asyncResolved){Z(B,T,x);return}else B.next=T,lQ(B.update),B.update();else T.el=R.el,B.vnode=T},$=(R,T,x,B,k,V,J)=>{const z=()=>{if(R.isMounted){let{next:ce,bu:Te,u:xe,parent:Le,vnode:qe}=R,G=ce,F;ms(R,!1),ce?(ce.el=qe.el,Z(R,ce,J)):ce=qe,Te&&Im(Te),(F=ce.props&&ce.props.onVnodeBeforeUpdate)&&Mi(F,Le,ce,qe),ms(R,!0);const Q=Pm(R),te=R.subTree;R.subTree=Q,b(te,Q,h(te.el),ge(te),R,k,V),ce.el=Q.el,G===null&&_Q(R,Q.el),xe&&Fn(xe,k),(F=ce.props&&ce.props.onVnodeUpdated)&&Fn(()=>Mi(F,Le,ce,qe),k)}else{let ce;const{el:Te,props:xe}=T,{bm:Le,m:qe,parent:G}=R,F=F0(T);if(ms(R,!1),Le&&Im(Le),!F&&(ce=xe&&xe.onVnodeBeforeMount)&&Mi(ce,G,T),ms(R,!0),Te&&N){const Q=()=>{R.subTree=Pm(R),N(Te,R.subTree,R,k,null)};F?T.type.__asyncLoader().then(()=>!R.isUnmounted&&Q()):Q()}else{const Q=R.subTree=Pm(R);b(null,Q,x,B,R,k,V),T.el=Q.el}if(qe&&Fn(qe,k),!F&&(ce=xe&&xe.onVnodeMounted)){const Q=T;Fn(()=>Mi(ce,G,Q),k)}(T.shapeFlag&256||G&&F0(G.vnode)&&G.vnode.shapeFlag&256)&&R.a&&Fn(R.a,k),R.isMounted=!0,T=x=B=null}},Y=R.effect=new $3(z,()=>X3(re),R.scope),re=R.update=()=>Y.run();re.id=R.uid,ms(R,!0),re()},Z=(R,T,x)=>{T.component=R;const B=R.vnode.props;R.vnode=T,R.next=null,VQ(R,T.props,B,x),GQ(R,T.children,x),zo(),WA(),Go()},X=(R,T,x,B,k,V,J,z,Y=!1)=>{const re=R&&R.children,ce=R?R.shapeFlag:0,Te=T.children,{patchFlag:xe,shapeFlag:Le}=T;if(xe>0){if(xe&128){K(re,Te,x,B,k,V,J,z,Y);return}else if(xe&256){le(re,Te,x,B,k,V,J,z,Y);return}}Le&8?(ce&16&&De(re,k,V),Te!==re&&d(x,Te)):ce&16?Le&16?K(re,Te,x,B,k,V,J,z,Y):De(re,k,V,!0):(ce&8&&d(x,""),Le&16&&L(Te,x,B,k,V,J,z,Y))},le=(R,T,x,B,k,V,J,z,Y)=>{R=R||Oo,T=T||Oo;const re=R.length,ce=T.length,Te=Math.min(re,ce);let xe;for(xe=0;xe<Te;xe++){const Le=T[xe]=Y?Ma(T[xe]):Bi(T[xe]);b(R[xe],Le,x,null,k,V,J,z,Y)}re>ce?De(R,k,V,!0,!1,Te):L(T,x,B,k,V,J,z,Y,Te)},K=(R,T,x,B,k,V,J,z,Y)=>{let re=0;const ce=T.length;let Te=R.length-1,xe=ce-1;for(;re<=Te&&re<=xe;){const Le=R[re],qe=T[re]=Y?Ma(T[re]):Bi(T[re]);if(pu(Le,qe))b(Le,qe,x,null,k,V,J,z,Y);else break;re++}for(;re<=Te&&re<=xe;){const Le=R[Te],qe=T[xe]=Y?Ma(T[xe]):Bi(T[xe]);if(pu(Le,qe))b(Le,qe,x,null,k,V,J,z,Y);else break;Te--,xe--}if(re>Te){if(re<=xe){const Le=xe+1,qe=Le<ce?T[Le].el:B;for(;re<=xe;)b(null,T[re]=Y?Ma(T[re]):Bi(T[re]),x,qe,k,V,J,z,Y),re++}}else if(re>xe)for(;re<=Te;)Re(R[re],k,V,!0),re++;else{const Le=re,qe=re,G=new Map;for(re=qe;re<=xe;re++){const Ve=T[re]=Y?Ma(T[re]):Bi(T[re]);Ve.key!=null&&G.set(Ve.key,re)}let F,Q=0;const te=xe-qe+1;let me=!1,Oe=0;const Ne=new Array(te);for(re=0;re<te;re++)Ne[re]=0;for(re=Le;re<=Te;re++){const Ve=R[re];if(Q>=te){Re(Ve,k,V,!0);continue}let pe;if(Ve.key!=null)pe=G.get(Ve.key);else for(F=qe;F<=xe;F++)if(Ne[F-qe]===0&&pu(Ve,T[F])){pe=F;break}pe===void 0?Re(Ve,k,V,!0):(Ne[pe-qe]=re+1,pe>=Oe?Oe=pe:me=!0,b(Ve,T[pe],x,null,k,V,J,z,Y),Q++)}const We=me?XQ(Ne):Oo;for(F=We.length-1,re=te-1;re>=0;re--){const Ve=qe+re,pe=T[Ve],we=Ve+1<ce?T[Ve+1].el:B;Ne[re]===0?b(null,pe,x,we,k,V,J,z,Y):me&&(F<0||re!==We[F]?he(pe,x,we,2):F--)}}},he=(R,T,x,B,k=null)=>{const{el:V,type:J,transition:z,children:Y,shapeFlag:re}=R;if(re&6){he(R.component.subTree,T,x,B);return}if(re&128){R.suspense.move(T,x,B);return}if(re&64){J.move(R,T,x,fe);return}if(J===On){s(V,T,x);for(let Te=0;Te<Y.length;Te++)he(Y[Te],T,x,B);s(R.anchor,T,x);return}if(J===Nm){_(R,T,x);return}if(B!==2&&re&1&&z)if(B===0)z.beforeEnter(V),s(V,T,x),Fn(()=>z.enter(V),k);else{const{leave:Te,delayLeave:xe,afterLeave:Le}=z,qe=()=>s(V,T,x),G=()=>{Te(V,()=>{qe(),Le&&Le()})};xe?xe(V,qe,G):G()}else s(V,T,x)},Re=(R,T,x,B=!1,k=!1)=>{const{type:V,props:J,ref:z,children:Y,dynamicChildren:re,shapeFlag:ce,patchFlag:Te,dirs:xe}=R;if(z!=null&&n3(z,null,x,R,!0),ce&256){T.ctx.deactivate(R);return}const Le=ce&1&&xe,qe=!F0(R);let G;if(qe&&(G=J&&J.onVnodeBeforeUnmount)&&Mi(G,T,R),ce&6)Ee(R.component,x,B);else{if(ce&128){R.suspense.unmount(x,B);return}Le&&bs(R,null,T,"beforeUnmount"),ce&64?R.type.remove(R,T,x,k,fe,B):re&&(V!==On||Te>0&&Te&64)?De(re,T,x,!1,!0):(V===On&&Te&384||!k&&ce&16)&&De(Y,T,x),B&&ie(R)}(qe&&(G=J&&J.onVnodeUnmounted)||Le)&&Fn(()=>{G&&Mi(G,T,R),Le&&bs(R,null,T,"unmounted")},x)},ie=R=>{const{type:T,el:x,anchor:B,transition:k}=R;if(T===On){ae(x,B);return}if(T===Nm){w(R);return}const V=()=>{n(x),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(R.shapeFlag&1&&k&&!k.persisted){const{leave:J,delayLeave:z}=k,Y=()=>J(x,V);z?z(R.el,V,Y):Y()}else V()},ae=(R,T)=>{let x;for(;R!==T;)x=f(R),n(R),R=x;n(T)},Ee=(R,T,x)=>{const{bum:B,scope:k,update:V,subTree:J,um:z}=R;B&&Im(B),k.stop(),V&&(V.active=!1,Re(J,R,T,x)),z&&Fn(z,T),Fn(()=>{R.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},De=(R,T,x,B=!1,k=!1,V=0)=>{for(let J=V;J<R.length;J++)Re(R[J],T,x,B,k)},ge=R=>R.shapeFlag&6?ge(R.component.subTree):R.shapeFlag&128?R.suspense.next():f(R.anchor||R.el),de=(R,T,x)=>{R==null?T._vnode&&Re(T._vnode,null,null,!0):b(T._vnode||null,R,T,null,null,null,x),WA(),E9(),T._vnode=R},fe={p:b,um:Re,m:he,r:ie,mt:j,mc:L,pc:X,pbc:E,n:ge,o:t};let H,N;return e&&([H,N]=e(fe)),{render:de,hydrate:H,createApp:HQ(de,H)}}function ms({effect:t,update:e},u){t.allowRecurse=e.allowRecurse=u}function V9(t,e,u=!1){const s=t.children,n=e.children;if(Rt(s)&&Rt(n))for(let r=0;r<s.length;r++){const a=s[r];let o=n[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[r]=Ma(n[r]),o.el=a.el),u||V9(a,o)),o.type===Sb&&(o.el=a.el)}}function XQ(t){const e=t.slice(),u=[0];let s,n,r,a,o;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(n=u[u.length-1],t[n]<c){e[s]=n,u.push(s);continue}for(r=0,a=u.length-1;r<a;)o=r+a>>1,t[u[o]]<c?r=o+1:a=o;c<t[u[r]]&&(r>0&&(e[s]=u[r-1]),u[r]=s)}}for(r=u.length,a=u[r-1];r-- >0;)u[r]=a,a=e[a];return u}const KQ=t=>t.__isTeleport,On=Symbol.for("v-fgt"),Sb=Symbol.for("v-txt"),Ga=Symbol.for("v-cmt"),Nm=Symbol.for("v-stc"),B0=[];let wi=null;function jt(t=!1){B0.push(wi=t?null:[])}function YQ(){B0.pop(),wi=B0[B0.length-1]||null}let G0=1;function sE(t){G0+=t}function k9(t){return t.dynamicChildren=G0>0?wi||Oo:null,YQ(),G0>0&&wi&&wi.push(t),t}function ir(t,e,u,s,n,r){return k9(Bt(t,e,u,s,n,r,!0))}function Ii(t,e,u,s,n){return k9(ar(t,e,u,s,n,!0))}function ib(t){return t?t.__v_isVNode===!0:!1}function pu(t,e){return t.type===e.type&&t.key===e.key}const Tb="__vInternal",z9=({key:t})=>t??null,q1=({ref:t,ref_key:e,ref_for:u})=>(typeof t=="number"&&(t=""+t),t!=null?qr(t)||fn(t)||Pt(t)?{i:nn,r:t,k:e,f:!!u}:t:null);function Bt(t,e=null,u=null,s=0,n=null,r=t===On?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&z9(e),ref:e&&q1(e),scopeId:vb,slotScopeIds:null,children:u,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:nn};return o?(rT(l,u),r&128&&t.normalize(l)):u&&(l.shapeFlag|=qr(u)?8:16),G0>0&&!a&&wi&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&wi.push(l),l}const ar=ZQ;function ZQ(t,e=null,u=null,s=0,n=null,r=!1){if((!t||t===j9)&&(t=Ga),ib(t)){const o=No(t,e,!0);return u&&rT(o,u),G0>0&&!r&&wi&&(o.shapeFlag&6?wi[wi.indexOf(t)]=o:wi.push(o)),o.patchFlag|=-2,o}if(cH(t)&&(t=t.__vccOpts),e){e=eH(e);let{class:o,style:l}=e;o&&!qr(o)&&(e.class=rn(o)),Sr(l)&&(b9(l)&&!Rt(l)&&(l=Wr({},l)),e.style=Ua(l))}const a=qr(t)?1:vQ(t)?128:KQ(t)?64:Sr(t)?4:Pt(t)?2:0;return Bt(t,e,u,s,n,a,r,!0)}function eH(t){return t?b9(t)||Tb in t?Wr({},t):t:null}function No(t,e,u=!1){const{props:s,ref:n,patchFlag:r,children:a}=t,o=e?i3(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&z9(o),ref:e&&e.ref?u&&n?Rt(n)?n.concat(q1(e)):[n,q1(e)]:q1(e):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==On?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&No(t.ssContent),ssFallback:t.ssFallback&&No(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function T0(t=" ",e=0){return ar(Sb,null,t,e)}function Vr(t="",e=!1){return e?(jt(),Ii(Ga,null,t)):ar(Ga,null,t)}function Bi(t){return t==null||typeof t=="boolean"?ar(Ga):Rt(t)?ar(On,null,t.slice()):typeof t=="object"?Ma(t):ar(Sb,null,String(t))}function Ma(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:No(t)}function rT(t,e){let u=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Rt(e))u=16;else if(typeof e=="object")if(s&65){const n=e.default;n&&(n._c&&(n._d=!1),rT(t,n()),n._c&&(n._d=!0));return}else{u=32;const n=e._;!n&&!(Tb in e)?e._ctx=nn:n===3&&nn&&(nn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Pt(e)?(e={default:e,_ctx:nn},u=32):(e=String(e),s&64?(u=16,e=[T0(e)]):u=8);t.children=e,t.shapeFlag|=u}function i3(...t){const e={};for(let u=0;u<t.length;u++){const s=t[u];for(const n in s)if(n==="class")e.class!==s.class&&(e.class=rn([e.class,s.class]));else if(n==="style")e.style=Ua([e.style,s.style]);else if(fb(n)){const r=e[n],a=s[n];a&&r!==a&&!(Rt(r)&&r.includes(a))&&(e[n]=r?[].concat(r,a):a)}else n!==""&&(e[n]=s[n])}return e}function Mi(t,e,u,s=null){Ti(t,e,7,[u,s])}const tH=q9();let rH=0;function nH(t,e,u){const s=t.type,n=(e?e.appContext:t.appContext)||tH,r={uid:rH++,vnode:t,type:s,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new xU(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:U9(s,n),emitsOptions:R9(s,n),emit:null,emitted:null,propsDefaults:yr,inheritAttrs:s.inheritAttrs,ctx:yr,data:yr,props:yr,attrs:yr,slots:yr,refs:yr,setupState:yr,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:u,suspenseId:u?u.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=hQ.bind(null,r),t.ce&&t.ce(r),r}let Gr=null;const iH=()=>Gr||nn;let nT,bo,oE="__VUE_INSTANCE_SETTERS__";(bo=GS()[oE])||(bo=GS()[oE]=[]),bo.push(t=>Gr=t),nT=t=>{bo.length>1?bo.forEach(e=>e(t)):bo[0](t)};const Co=t=>{nT(t),t.scope.on()},zs=()=>{Gr&&Gr.scope.off(),nT(null)};function G9(t){return t.vnode.shapeFlag&4}let W0=!1;function aH(t,e=!1){W0=e;const{props:u,children:s}=t.vnode,n=G9(t);$Q(t,u,n,e),zQ(t,s);const r=n?sH(t,e):void 0;return W0=!1,r}function sH(t,e){const u=t.type;t.accessCache=Object.create(null),t.proxy=m9(new Proxy(t.ctx,CQ));const{setup:s}=u;if(s){const n=t.setupContext=s.length>1?J9(t):null;Co(t),zo();const r=$a(s,t,0,[t.props,n]);if(Go(),zs(),ZM(r)){if(r.then(zs,zs),e)return r.then(a=>{uE(t,a,e)}).catch(a=>{gb(a,t,0)});t.asyncDep=r}else uE(t,r,e)}else W9(t,e)}function uE(t,e,u){Pt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Sr(e)&&(t.setupState=w9(e)),W9(t,u)}let cE;function W9(t,e,u){const s=t.type;if(!t.render){if(!e&&cE&&!s.render){const n=s.template||eT(t).template;if(n){const{isCustomElement:r,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=s,c=Wr(Wr({isCustomElement:r,delimiters:o},a),l);s.render=cE(n,c)}}t.render=s.render||Si}Co(t),zo(),MQ(t),Go(),zs()}function oH(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,u){return Bn(t,"get","$attrs"),e[u]}}))}function J9(t){const e=u=>{t.exposed=u||{}};return{get attrs(){return oH(t)},slots:t.slots,emit:t.emit,expose:e}}function Ab(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(w9(m9(t.exposed)),{get(e,u){if(u in e)return e[u];if(u in q0)return q0[u](t)},has(e,u){return u in e||u in q0}}))}function uH(t,e=!0){return Pt(t)?t.displayName||t.name:t.name||e&&t.__name}function cH(t){return Pt(t)&&"__vccOpts"in t}const sr=(t,e)=>oQ(t,e,W0);function X9(t,e,u){const s=arguments.length;return s===2?Sr(e)&&!Rt(e)?ib(e)?ar(t,null,[e]):ar(t,e):ar(t,null,e):(s>3?u=Array.prototype.slice.call(arguments,2):s===3&&ib(u)&&(u=[u]),ar(t,e,u))}const lH=Symbol.for("v-scx"),dH=()=>Ai(lH),fH="3.3.4",hH="http://www.w3.org/2000/svg",Us=typeof document<"u"?document:null,lE=Us&&Us.createElement("template"),pH={insert:(t,e,u)=>{e.insertBefore(t,u||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,u,s)=>{const n=e?Us.createElementNS(hH,t):Us.createElement(t,u?{is:u}:void 0);return t==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:t=>Us.createTextNode(t),createComment:t=>Us.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Us.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,u,s,n,r){const a=u?u.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),u),!(n===r||!(n=n.nextSibling)););else{lE.innerHTML=s?`<svg>${t}</svg>`:t;const o=lE.content;if(s){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,u)}return[a?a.nextSibling:e.firstChild,u?u.previousSibling:e.lastChild]}};function yH(t,e,u){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):u?t.setAttribute("class",e):t.className=e}function bH(t,e,u){const s=t.style,n=qr(u);if(u&&!n){if(e&&!qr(e))for(const r in e)u[r]==null&&a3(s,r,"");for(const r in u)a3(s,r,u[r])}else{const r=s.display;n?e!==u&&(s.cssText=u):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=r)}}const dE=/\s*!important$/;function a3(t,e,u){if(Rt(u))u.forEach(s=>a3(t,e,s));else if(u==null&&(u=""),e.startsWith("--"))t.setProperty(e,u);else{const s=mH(t,e);dE.test(u)?t.setProperty(ko(s),u.replace(dE,""),"important"):t[s]=u}}const fE=["Webkit","Moz","ms"],Cm={};function mH(t,e){const u=Cm[e];if(u)return u;let s=$i(e);if(s!=="filter"&&s in t)return Cm[e]=s;s=yb(s);for(let n=0;n<fE.length;n++){const r=fE[n]+s;if(r in t)return Cm[e]=r}return e}const hE="http://www.w3.org/1999/xlink";function gH(t,e,u,s,n){if(s&&e.startsWith("xlink:"))u==null?t.removeAttributeNS(hE,e.slice(6,e.length)):t.setAttributeNS(hE,e,u);else{const r=RU(e);u==null||r&&!r9(u)?t.removeAttribute(e):t.setAttribute(e,r?"":u)}}function _H(t,e,u,s,n,r,a){if(e==="innerHTML"||e==="textContent"){s&&a(s,n,r),t[e]=u??"";return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){t._value=u;const c=o==="OPTION"?t.getAttribute("value"):t.value,d=u??"";c!==d&&(t.value=d),u==null&&t.removeAttribute(e);return}let l=!1;if(u===""||u==null){const c=typeof t[e];c==="boolean"?u=r9(u):u==null&&c==="string"?(u="",l=!0):c==="number"&&(u=0,l=!0)}try{t[e]=u}catch{}l&&t.removeAttribute(e)}function vH(t,e,u,s){t.addEventListener(e,u,s)}function wH(t,e,u,s){t.removeEventListener(e,u,s)}function SH(t,e,u,s,n=null){const r=t._vei||(t._vei={}),a=r[e];if(s&&a)a.value=s;else{const[o,l]=TH(e);if(s){const c=r[e]=OH(s,n);vH(t,o,c,l)}else a&&(wH(t,o,a,l),r[e]=void 0)}}const pE=/(?:Once|Passive|Capture)$/;function TH(t){let e;if(pE.test(t)){e={};let s;for(;s=t.match(pE);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ko(t.slice(2)),e]}let jm=0;const AH=Promise.resolve(),EH=()=>jm||(AH.then(()=>jm=0),jm=Date.now());function OH(t,e){const u=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=u.attached)return;Ti(RH(s,u.value),e,5,[s])};return u.value=t,u.attached=EH(),u}function RH(t,e){if(Rt(e)){const u=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{u.call(t),t._stopped=!0},e.map(s=>n=>!n._stopped&&s&&s(n))}else return e}const yE=/^on[a-z]/,xH=(t,e,u,s,n=!1,r,a,o,l)=>{e==="class"?yH(t,s,n):e==="style"?bH(t,u,s):fb(e)?q3(e)||SH(t,e,u,s,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):IH(t,e,s,n))?_H(t,e,s,r,a,o,l):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),gH(t,e,s,n))};function IH(t,e,u,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&yE.test(e)&&Pt(u)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||yE.test(e)&&qr(u)?!1:e in t}const PH=Wr({patchProp:xH},pH);let bE;function DH(){return bE||(bE=WQ(PH))}const NH=(...t)=>{const e=DH().createApp(...t),{mount:u}=e;return e.mount=s=>{const n=CH(s);if(!n)return;const r=e._component;!Pt(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.innerHTML="";const a=u(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},e};function CH(t){return qr(t)?document.querySelector(t):t}const jH=["primary","secondary","success","danger","warning","info","light","dark"],LH="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%",MH=[0,0,0],mE=.5,FH=t=>t&&jH.includes(t.toLowerCase()),qH=(t,e)=>{const u=r=>(r.length<7&&(r=`#${r[1]}${r[1]}${r[2]}${r[2]}${r[3]}${r[3]}`),[parseInt(r.substr(1,2),16),parseInt(r.substr(3,2),16),parseInt(r.substr(5,2),16)]),s=r=>{const a=document.body.appendChild(document.createElement("fictum")),o="rgb(1, 2, 3)";return a.style.color=o,a.style.color!==o||(a.style.color=r,a.style.color===o||a.style.color==="")?e:(r=getComputedStyle(a).color,document.body.removeChild(a),r)},n=r=>{const a=r.match(/[.\d]+/g);if(a===null)return;const o=a.map(l=>+Number(l));return o.length=3,o};return typeof t=="string"&&t.toLowerCase()==="transparent"?e:typeof t=="string"&&t[0]==="#"?u(t):(typeof t=="string"&&t.indexOf("rgb")===-1&&(t=s(t)),typeof t=="string"&&t.indexOf("rgb")===0?n(t):e)},BH=({offsetX:t,offsetY:e,height:u,width:s})=>{const n=e<=u/2,r=t<=s/2,a=(h,f)=>Math.sqrt(h**2+f**2),o=e===u/2&&t===s/2,l={first:n===!0&&r===!1,second:n===!0&&r===!0,third:n===!1&&r===!0,fourth:n===!1&&r===!1},c={topLeft:a(t,e),topRight:a(s-t,e),bottomLeft:a(t,u-e),bottomRight:a(s-t,u-e)};let d=0;return o||l.fourth?d=c.topLeft:l.third?d=c.topRight:l.second?d=c.bottomRight:l.first&&(d=c.bottomLeft),d*2},UH=(t,e)=>{for(const u in e)t.style[u]=e[u]},QH=t=>{const e=qH(t,MH);if(t!==""&&e){const u=e.join(",");return`radial-gradient(circle, ${LH.split("{{color}}").join(`${u}`)})`}},HH=(t,e,u)=>{const s=document.createElement("div");s.classList.add("ripple-wave");const n={offsetX:u.centered?e.height/2:e.left,offsetY:u.centered?e.width/2:e.top,height:e.height,width:e.width},r=BH(n),a=u.radius||r/2,o={delay:u.duration&&u.duration*mE,duration:u.duration&&u.duration-u.duration*mE},l={left:u.centered?`${Math.round(e.width/2-a)}px`:`${Math.round(e.left-a)}px`,top:u.centered?`${Math.round(e.height/2-a)}px`:`${Math.round(e.top-a)}px`,height:`${Math.round(u.radius&&u.radius*2||r)}px`,width:`${Math.round(u.radius&&u.radius*2||r)}px`,transitionDelay:`0s, ${o.delay}ms`,transitionDuration:`${u.duration}ms, ${o.duration}ms`};u.unbound&&t.classList.add("ripple-surface-unbound"),FH(u.color)?t.classList.add(`ripple-surface-${u.color}`):l.backgroundImage=QH(u.color),UH(s,l),t.appendChild(s),setTimeout(()=>{s.classList.add("active")},50),setTimeout(()=>{t.removeChild(s)},u.duration?u.duration+1e3:1e3)},K9={mounted(t,e){if(e.value===!1)return;const u={centered:e.value&&e.value.centered||!1,color:e.value&&e.value.color||"",duration:e.value&&e.value.duration||500,radius:e.value&&e.value.radius||0,unbound:e.value&&e.value.unbound||!1};t.classList.add("ripple-surface"),t.waves=s=>{const n={top:s.layerY,left:s.layerX,height:t.offsetHeight,width:t.offsetWidth};HH(t,n,u)},t.addEventListener("click",s=>t.waves(s))},updated(t){t.classList.contains("ripple-surface")||t.classList.add("ripple-surface")},unmounted(t){t.removeEventListener("click",e=>t.waves(e))}},$H={name:"MDBBtn"},VH=xi({...$H,props:{color:String,size:String,outline:String,rounded:Boolean,floating:Boolean,toggler:Boolean,toggle:Boolean,role:{type:String,default:"button"},type:{type:String,default:"button"},tag:{type:String,default:"button"},block:{type:Boolean,default:!1},ripple:{type:[Object,Boolean],default:t=>t.outline||t.color==="light"||t.color==="link"?{color:"dark"}:!0},picker:Boolean},emits:["update:toggle"],setup(t,{emit:e}){const u=t,s=En(u.toggle),n=sr(()=>[!u.picker&&"btn",u.color&&`btn-${u.color}`,u.size&&`btn-${u.size}`,u.outline&&`btn-outline-${u.outline}`,u.rounded&&"btn-rounded",u.floating&&"btn-floating",u.block&&"btn-block",s.value&&"active"]),r=()=>{u.toggler&&(s.value=!s.value,e("update:toggle",s.value))};return(a,o)=>tb((jt(),Ii(Ka(t.tag),{type:t.type,role:t.role,class:rn(qt(n)),onClick:r},{default:Lr(()=>[Hi(a.$slots,"default")]),_:3},8,["type","role","class"])),[[qt(K9),t.ripple]])}}),kH={name:"MDBCard"},zH=xi({...kH,props:{tag:{type:String,default:"div"},border:String,bg:String,text:[String,Array],shadow:String},setup(t){const e=t,u=sr(()=>{const n=e.text;return["card",e.border&&`border border-${e.border}`,e.bg&&`bg-${e.bg}`,e.shadow&&`shadow-${e.shadow}`,e.text&&s(n)]}),s=n=>typeof n=="string"?`text-${n}`:n.map(r=>`text-${r}`.trim()).join(" ");return(n,r)=>(jt(),Ii(Ka(t.tag),{class:rn(qt(u))},{default:Lr(()=>[Hi(n.$slots,"default")]),_:3},8,["class"]))}}),GH={name:"MDBCardBody"},WH=xi({...GH,props:{tag:{type:String,default:"div"},text:{type:[String,Array]}},setup(t){const e=t,u=sr(()=>{const n=e.text;return["card-body",e.text&&s(n)]}),s=n=>typeof n=="string"?`text-${n}`:n.map(r=>`text-${r}`.trim()).join(" ");return(n,r)=>(jt(),Ii(Ka(t.tag),{class:rn(qt(u))},{default:Lr(()=>[Hi(n.$slots,"default")]),_:3},8,["class"]))}}),JH={name:"MDBCardTitle"},XH=xi({...JH,props:{tag:{type:String,default:"h5"},subtitle:{type:Boolean,default:!1}},setup(t){const e=t,u=sr(()=>e.subtitle?e.tag!=="h5"?e.tag:"h6":e.tag),s=sr(()=>[e.subtitle?"card-subtitle":"card-title"]);return(n,r)=>(jt(),Ii(Ka(qt(u)),{class:rn(qt(s))},{default:Lr(()=>[Hi(n.$slots,"default")]),_:3},8,["class"]))}}),KH={name:"MDBCardText"},YH=xi({...KH,props:{tag:{type:String,default:"p"}},setup(t){const e=sr(()=>["card-text"]);return(u,s)=>(jt(),Ii(Ka(t.tag),{class:rn(qt(e))},{default:Lr(()=>[Hi(u.$slots,"default")]),_:3},8,["class"]))}}),ZH=1e6,e$=t=>{do t+=Math.floor(Math.random()*ZH);while(document.getElementById(t));return t},t$=/\..*/,r$={mouseenter:"mouseover",mouseleave:"mouseout"},n$=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function Y9(t,e,u){const s=typeof e=="string",n=s?u:e;let r=t.replace(t$,"");const a=r$[r];return a&&(r=a),n$.indexOf(r)>-1||(r=t),[s,n,r]}function i$(t,e,u,s){if(typeof e!="string"||!t)return;u||(u=s,s=null);const[n,r,a]=Y9(e,u,s);t.addEventListener(a,r,n)}function a$(t,e,u,s){t.removeEventListener(e,u,!!s)}const s$=function(t,e,u,s=void 0){i$(t,e,u,s)},o$=function(t,e,u,s=void 0){if(typeof e!="string"||!t)return;const[n,r,a]=Y9(e,u,s);a$(t,a,r,n?u:null)};var s3={stopProp(t){t.stopPropagation()},mounted(t,e){const u=n=>{const r=n.target;!t.contains(r)&&t!==r&&e.value(n)};t.clickOutside=u;const s=e.modifiers.mousedown?"mousedown":"click";document.addEventListener(s,n=>{var r;return(r=t.clickOutside)==null?void 0:r.call(t,n)}),document.addEventListener("touchstart",n=>{var r;return(r=t.clickOutside)==null?void 0:r.call(t,n)})},unmounted(t,e){if(!t.clickOutside)return;const u=e.modifiers.mousedown?"mousedown":"click";document.removeEventListener(u,s=>{var n;return(n=t.clickOutside)==null?void 0:n.call(t,s)}),document.removeEventListener("touchstart",s=>{var n;return(n=t.clickOutside)==null?void 0:n.call(t,s)}),delete t.clickOutside}};const u$={key:1,class:"visually-hidden"},c$={name:"MDBDropdownToggle"};({...c$,props:{...VH.props}});const l$={name:"MDBContainer"},d$=xi({...l$,props:{tag:{type:String,default:"div"},sm:{type:Boolean,default:!1},md:{type:Boolean,default:!1},lg:{type:Boolean,default:!1},xl:{type:Boolean,default:!1},xxl:{type:Boolean,default:!1},fluid:{type:Boolean,default:!1}},setup(t){const e=t,u=sr(()=>[e.fluid?"container-fluid":"",e.sm?"container-sm":"",e.md?"container-md":"",e.lg?"container-lg":"",e.xl?"container-xl":"",e.xxl?"container-xxl":"",!e.fluid&&!e.sm&&!e.md&&!e.lg&&!e.xl&&!e.xxl?"container":""]);return(s,n)=>(jt(),Ii(Ka(t.tag),{class:rn(qt(u))},{default:Lr(()=>[Hi(s.$slots,"default")]),_:3},8,["class"]))}}),f$=["id","value"],h$=["for"],p$={key:2,class:"form-helper"},y$={key:3,class:"form-helper"},b$={class:"form-counter"},m$=Bt("div",{class:"form-notch-trailing"},null,-1),g$=["id","value"],_$=["for"],v$={key:1,class:"form-helper"},w$={key:2,class:"form-helper"},S$={class:"form-counter"},T$=Bt("div",{class:"form-notch-trailing"},null,-1),A$={key:9,class:"form-text"},E$={name:"MDBInput",inheritAttrs:!1},O$=xi({...E$,props:{id:String,label:String,labelClass:String,modelValue:[String,Number,Date],size:String,formOutline:{type:Boolean,default:!0},wrapperClass:String,inputGroup:{type:[Boolean,String],default:!1},wrap:{type:Boolean,default:!0},formText:String,white:Boolean,validationEvent:String,isValidated:Boolean,isValid:Boolean,validFeedback:String,invalidFeedback:String,tooltipFeedback:{type:Boolean,default:!1},tag:{type:String,default:"div"},helper:String,counter:Boolean,maxlength:{type:Number,default:0}},emits:["update:modelValue","click-outside","on-validate"],setup(t,{expose:e,emit:u}){const s=t,n=jQ(),r=En(null),a=En(s.modelValue),o=En(null),l=En(!1),c=En(9),d=En(0),h=s.id||e$("MDBInput-"),f=sr(()=>[s.formOutline&&"form-outline",b.value,s.white&&"form-white",s.wrapperClass]),p=sr(()=>["form-control",s.size?`form-control-${s.size}`:s.inputGroup&&s.inputGroup!==!0&&`form-control-${s.inputGroup}`,(a.value||a.value===0)&&"active",l.value&&"placeholder-active",_.value&&w.value&&"is-valid",_.value&&!w.value&&"is-invalid"]),y=sr(()=>["form-label",s.labelClass]),b=sr(()=>{if(s.inputGroup)return s.inputGroup!==!0?`input-group input-group-${s.inputGroup}`:"input-group"}),g=sr(()=>s.inputGroup&&_.value?{marginBottom:"1rem"}:""),m=sr(()=>s.tooltipFeedback?"valid-tooltip":"valid-feedback"),v=sr(()=>s.tooltipFeedback?"invalid-tooltip":"invalid-feedback"),_=En(s.isValidated),w=En(s.isValid),S=En(""),A=sr(()=>_.value&&!w.value&&s.validationEvent?S.value:s.invalidFeedback),D=K=>{const he=K.target;w.value=he.checkValidity(),w.value||(S.value=he.validationMessage),_.value=!0,u("on-validate",w.value)},L=()=>{s.validationEvent!=="submit"&&typeof r.value!="string"&&s$(r.value,s.validationEvent,D)};function O(){o.value&&(d.value=o.value.clientWidth*.8+8)}function E(){n.placeholder&&!o.value?l.value=!0:l.value=!1}const P=En(null);P.value=typeof a.value=="string"&&a.value?a.value.length:0;function M(K){const he=K.target;if(s.counter){if(he.value.length>s.maxlength){typeof a.value=="string"&&(he.value=a.value);return}P.value=he.value.length}a.value=he.value,u("update:modelValue",a.value)}function U(){u("click-outside")}const j=En(null),q=En(),$=K=>{q.value.forEach(he=>he.style.opacity=K?"0":"1"),K&&(j.value.style.opacity="1")},Z=n.type&&n.type==="date",X=(K=!1)=>{var he;s.label&&s.formOutline&&((he=q.value)==null?void 0:he.length)>1&&$(K),Z&&typeof r.value!="string"&&(r.value.type=K?"date":"text")},le=K=>![...K.parentNode.children].findIndex(he=>he===K);return N9(()=>{if(O(),E(),X(),s.label&&s.formOutline&&(q.value=r.value.parentNode.querySelectorAll(".form-notch")),s.label&&s.formOutline&&!le(r.value)){const K=parseFloat(getComputedStyle(o.value).left);o.value.style.left=`${K+r.value.offsetLeft}px`,c.value+=r.value.offsetLeft}s.validationEvent&&L()}),C9(()=>{O(),E()}),Y3(()=>{typeof r.value!="string"&&o$(r.value,s.validationEvent,D)}),x9(()=>{var K,he;if(s.counter&&typeof s.modelValue=="string"){if(((K=s.modelValue)==null?void 0:K.length)>s.maxlength){a.value=s.modelValue.slice(0,s.maxlength),P.value=s.maxlength;return}P.value=((he=s.modelValue)==null?void 0:he.length)||0}a.value=s.modelValue}),Po(()=>s.isValidated,K=>_.value=K),Po(()=>s.isValid,K=>w.value=K),e({inputRef:r}),(K,he)=>(jt(),ir(On,null,[t.wrap?Vr("",!0):tb((jt(),ir("input",i3({key:0,class:qt(p),id:qt(h),value:a.value},K.$attrs,{onInput:M,ref_key:"inputRef",ref:r,onFocus:he[0]||(he[0]=Re=>X(!0)),onBlur:he[1]||(he[1]=Re=>X())}),null,16,f$)),[[qt(s3),U]]),t.label&&!t.wrap?(jt(),ir("label",{key:1,ref_key:"labelRef",ref:o,class:rn(qt(y)),for:qt(h)},Or(t.label),11,h$)):Vr("",!0),!t.wrap&&t.helper?(jt(),ir("div",p$,Or(t.helper),1)):Vr("",!0),!t.wrap&&t.counter?(jt(),ir("div",y$,[Bt("div",b$,Or(P.value)+" / "+Or(t.maxlength),1)])):Vr("",!0),t.wrap?Vr("",!0):Hi(K.$slots,"default",{key:4}),!t.wrap&&t.validFeedback?(jt(),ir("div",{key:5,class:rn(qt(m))},Or(t.validFeedback),3)):Vr("",!0),!t.wrap&&qt(A)?(jt(),ir("div",{key:6,class:rn(qt(v))},Or(qt(A)),3)):Vr("",!0),!t.wrap&&t.formOutline?(jt(),ir("div",{key:7,class:"form-notch",ref_key:"notchRef",ref:j},[Bt("div",{class:"form-notch-leading",style:Ua({width:`${c.value}px`})},null,4),Bt("div",{class:"form-notch-middle",style:Ua({width:`${d.value}px`})},null,4),m$],512)):Vr("",!0),t.wrap?tb((jt(),Ii(Ka(t.tag),{key:8,class:rn(qt(f)),style:Ua(qt(g))},{default:Lr(()=>[Hi(K.$slots,"prepend"),Bt("input",i3({class:qt(p)},K.$attrs,{id:qt(h),value:a.value,onInput:M,ref_key:"inputRef",ref:r,onFocus:he[2]||(he[2]=Re=>X(!0)),onBlur:he[3]||(he[3]=Re=>X())}),null,16,g$),t.label?(jt(),ir("label",{key:0,ref_key:"labelRef",ref:o,class:rn(qt(y)),for:qt(h)},Or(t.label),11,_$)):Vr("",!0),t.helper?(jt(),ir("div",v$,Or(t.helper),1)):Vr("",!0),t.counter?(jt(),ir("div",w$,[Bt("div",S$,Or(P.value)+" / "+Or(t.maxlength),1)])):Vr("",!0),Hi(K.$slots,"default"),t.validFeedback?(jt(),ir("div",{key:3,class:rn(qt(m))},Or(t.validFeedback),3)):Vr("",!0),qt(A)?(jt(),ir("div",{key:4,class:rn(qt(v))},Or(qt(A)),3)):Vr("",!0),t.formOutline?(jt(),ir("div",{key:5,class:"form-notch",ref_key:"notchRef",ref:j},[Bt("div",{class:"form-notch-leading",style:Ua({width:`${c.value}px`})},null,4),Bt("div",{class:"form-notch-middle",style:Ua({width:`${d.value}px`})},null,4),T$],512)):Vr("",!0)]),_:3},8,["class","style"])),[[qt(s3),U]]):Vr("",!0),t.formText?(jt(),ir("div",A$,Or(t.formText),1)):Vr("",!0)],64))}});var I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function R$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function iT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var u=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};u.prototype=e.prototype}else u={};return Object.defineProperty(u,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var n=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(u,s,n.get?n:{enumerable:!0,get:function(){return t[s]}})}),u}var Z9={},Eb={},aT={},sy={},eF={},Ob={},ot={},Gs={},oy="delete",br=5,ai=1<<br,xn=ai-1,Ut={};function o3(){return{value:!1}}function si(t){t&&(t.value=!0)}function sT(){}function jo(t){return t.size===void 0&&(t.size=t.__iterate(tF)),t.size}function Wa(t,e){if(typeof e!="number"){var u=e>>>0;if(""+u!==e||u===4294967295)return NaN;e=u}return e<0?jo(t)+e:e}function tF(){return!0}function uy(t,e,u){return(t===0&&!nF(t)||u!==void 0&&t<=-u)&&(e===void 0||u!==void 0&&e>=u)}function Wo(t,e){return rF(t,e,0)}function cy(t,e){return rF(t,e,e)}function rF(t,e,u){return t===void 0?u:nF(t)?e===1/0?e:Math.max(0,e+t)|0:e===void 0||e===t?t:Math.min(e,t)|0}function nF(t){return t<0||t===0&&1/t===-1/0}var iF="@@__IMMUTABLE_ITERABLE__@@";function hn(t){return!!(t&&t[iF])}var aF="@@__IMMUTABLE_KEYED__@@";function cr(t){return!!(t&&t[aF])}var sF="@@__IMMUTABLE_INDEXED__@@";function an(t){return!!(t&&t[sF])}function Jo(t){return cr(t)||an(t)}var mr=function(e){return hn(e)?e:pn(e)},ci=function(t){function e(u){return cr(u)?u:Za(u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(mr),Ys=function(t){function e(u){return an(u)?u:li(u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(mr),Xo=function(t){function e(u){return hn(u)&&!Jo(u)?u:Zo(u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(mr);mr.Keyed=ci;mr.Indexed=Ys;mr.Set=Xo;var oF="@@__IMMUTABLE_SEQ__@@";function ly(t){return!!(t&&t[oF])}var uF="@@__IMMUTABLE_RECORD__@@";function Ya(t){return!!(t&&t[uF])}function Yn(t){return hn(t)||Ya(t)}var Ko="@@__IMMUTABLE_ORDERED__@@";function Xn(t){return!!(t&&t[Ko])}var dy=0,Ei=1,oi=2,u3=typeof Symbol=="function"&&Symbol.iterator,cF="@@iterator",Rb=u3||cF,kt=function(e){this.next=e};kt.prototype.toString=function(){return"[Iterator]"};kt.KEYS=dy;kt.VALUES=Ei;kt.ENTRIES=oi;kt.prototype.inspect=kt.prototype.toSource=function(){return this.toString()};kt.prototype[Rb]=function(){return this};function gr(t,e,u,s){var n=t===0?e:t===1?u:[e,u];return s?s.value=n:s={value:n,done:!1},s}function Pn(){return{value:void 0,done:!0}}function oT(t){return Array.isArray(t)?!0:!!xb(t)}function gE(t){return t&&typeof t.next=="function"}function c3(t){var e=xb(t);return e&&e.call(t)}function xb(t){var e=t&&(u3&&t[u3]||t[cF]);if(typeof e=="function")return e}function x$(t){var e=xb(t);return e&&e===t.entries}function I$(t){var e=xb(t);return e&&e===t.keys}var Yo=Object.prototype.hasOwnProperty;function uT(t){return Array.isArray(t)||typeof t=="string"?!0:t&&typeof t=="object"&&Number.isInteger(t.length)&&t.length>=0&&(t.length===0?Object.keys(t).length===1:t.hasOwnProperty(t.length-1))}var pn=function(t){function e(u){return u==null?lT():Yn(u)?u.toSeq():D$(u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(s,n){var r=this._cache;if(r){for(var a=r.length,o=0;o!==a;){var l=r[n?a-++o:o++];if(s(l[1],l[0],this)===!1)break}return o}return this.__iterateUncached(s,n)},e.prototype.__iterator=function(s,n){var r=this._cache;if(r){var a=r.length,o=0;return new kt(function(){if(o===a)return Pn();var l=r[n?a-++o:o++];return gr(s,l[0],l[1])})}return this.__iteratorUncached(s,n)},e}(mr),Za=function(t){function e(u){return u==null?lT().toKeyedSeq():hn(u)?cr(u)?u.toSeq():u.fromEntrySeq():Ya(u)?u.toSeq():dT(u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(pn),li=function(t){function e(u){return u==null?lT():hn(u)?cr(u)?u.entrySeq():u.toIndexedSeq():Ya(u)?u.toSeq().entrySeq():lF(u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(pn),Zo=function(t){function e(u){return(hn(u)&&!Jo(u)?u:li(u)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(pn);pn.isSeq=ly;pn.Keyed=Za;pn.Set=Zo;pn.Indexed=li;pn.prototype[oF]=!0;var Ws=function(t){function e(u){this._array=u,this.size=u.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(s,n){return this.has(s)?this._array[Wa(this,s)]:n},e.prototype.__iterate=function(s,n){for(var r=this._array,a=r.length,o=0;o!==a;){var l=n?a-++o:o++;if(s(r[l],l,this)===!1)break}return o},e.prototype.__iterator=function(s,n){var r=this._array,a=r.length,o=0;return new kt(function(){if(o===a)return Pn();var l=n?a-++o:o++;return gr(s,l,r[l])})},e}(li),cT=function(t){function e(u){var s=Object.keys(u).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(u):[]);this._object=u,this._keys=s,this.size=s.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(s,n){return n!==void 0&&!this.has(s)?n:this._object[s]},e.prototype.has=function(s){return Yo.call(this._object,s)},e.prototype.__iterate=function(s,n){for(var r=this._object,a=this._keys,o=a.length,l=0;l!==o;){var c=a[n?o-++l:l++];if(s(r[c],c,this)===!1)break}return l},e.prototype.__iterator=function(s,n){var r=this._object,a=this._keys,o=a.length,l=0;return new kt(function(){if(l===o)return Pn();var c=a[n?o-++l:l++];return gr(s,c,r[c])})},e}(Za);cT.prototype[Ko]=!0;var P$=function(t){function e(u){this._collection=u,this.size=u.length||u.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(s,n){if(n)return this.cacheResult().__iterate(s,n);var r=this._collection,a=c3(r),o=0;if(gE(a))for(var l;!(l=a.next()).done&&s(l.value,o++,this)!==!1;);return o},e.prototype.__iteratorUncached=function(s,n){if(n)return this.cacheResult().__iterator(s,n);var r=this._collection,a=c3(r);if(!gE(a))return new kt(Pn);var o=0;return new kt(function(){var l=a.next();return l.done?l:gr(s,o++,l.value)})},e}(li),_E;function lT(){return _E||(_E=new Ws([]))}function dT(t){var e=fT(t);if(e)return e.fromEntrySeq();if(typeof t=="object")return new cT(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function lF(t){var e=fT(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function D$(t){var e=fT(t);if(e)return x$(t)?e.fromEntrySeq():I$(t)?e.toSetSeq():e;if(typeof t=="object")return new cT(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function fT(t){return uT(t)?new Ws(t):oT(t)?new P$(t):void 0}var dF="@@__IMMUTABLE_MAP__@@";function fy(t){return!!(t&&t[dF])}function Ib(t){return fy(t)&&Xn(t)}function ab(t){return!!(t&&typeof t.equals=="function"&&typeof t.hashCode=="function")}function kr(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if(typeof t.valueOf=="function"&&typeof e.valueOf=="function"){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(ab(t)&&ab(e)&&t.equals(e))}var yu=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,u){e|=0,u|=0;var s=e&65535,n=u&65535;return s*n+((e>>>16)*n+s*(u>>>16)<<16>>>0)|0};function Pb(t){return t>>>1&1073741824|t&3221225471}var N$=Object.prototype.valueOf;function Rn(t){if(t==null)return vE(t);if(typeof t.hashCode=="function")return Pb(t.hashCode(t));var e=q$(t);if(e==null)return vE(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return C$(e);case"string":return e.length>B$?j$(e):l3(e);case"object":case"function":return M$(e);case"symbol":return L$(e);default:if(typeof e.toString=="function")return l3(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function vE(t){return t===null?1108378658:1108378659}function C$(t){if(t!==t||t===1/0)return 0;var e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return Pb(e)}function j$(t){var e=Fm[t];return e===void 0&&(e=l3(t),Mm===U$&&(Mm=0,Fm={}),Mm++,Fm[t]=e),e}function l3(t){for(var e=0,u=0;u<t.length;u++)e=31*e+t.charCodeAt(u)|0;return Pb(e)}function L$(t){var e=TE[t];return e!==void 0||(e=fF(),TE[t]=e),e}function M$(t){var e;if(d3&&(e=f3.get(t),e!==void 0)||(e=t[Qs],e!==void 0)||!SE&&(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Qs],e!==void 0||(e=F$(t),e!==void 0)))return e;if(e=fF(),d3)f3.set(t,e);else{if(wE!==void 0&&wE(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(SE)Object.defineProperty(t,Qs,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Qs]=e;else if(t.nodeType!==void 0)t[Qs]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var wE=Object.isExtensible,SE=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function F$(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function q$(t){return t.valueOf!==N$&&typeof t.valueOf=="function"?t.valueOf(t):t}function fF(){var t=++Lm;return Lm&1073741824&&(Lm=0),t}var d3=typeof WeakMap=="function",f3;d3&&(f3=new WeakMap);var TE=Object.create(null),Lm=0,Qs="__immutablehash__";typeof Symbol=="function"&&(Qs=Symbol(Qs));var B$=16,U$=255,Mm=0,Fm={},Db=function(t){function e(u,s){this._iter=u,this._useKeys=s,this.size=u.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(s,n){return this._iter.get(s,n)},e.prototype.has=function(s){return this._iter.has(s)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var s=this,n=hT(this,!0);return this._useKeys||(n.valueSeq=function(){return s._iter.toSeq().reverse()}),n},e.prototype.map=function(s,n){var r=this,a=mF(this,s,n);return this._useKeys||(a.valueSeq=function(){return r._iter.toSeq().map(s,n)}),a},e.prototype.__iterate=function(s,n){var r=this;return this._iter.__iterate(function(a,o){return s(a,o,r)},n)},e.prototype.__iterator=function(s,n){return this._iter.__iterator(s,n)},e}(Za);Db.prototype[Ko]=!0;var hF=function(t){function e(u){this._iter=u,this.size=u.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(s){return this._iter.includes(s)},e.prototype.__iterate=function(s,n){var r=this,a=0;return n&&jo(this),this._iter.__iterate(function(o){return s(o,n?r.size-++a:a++,r)},n)},e.prototype.__iterator=function(s,n){var r=this,a=this._iter.__iterator(Ei,n),o=0;return n&&jo(this),new kt(function(){var l=a.next();return l.done?l:gr(s,n?r.size-++o:o++,l.value,l)})},e}(li),pF=function(t){function e(u){this._iter=u,this.size=u.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(s){return this._iter.includes(s)},e.prototype.__iterate=function(s,n){var r=this;return this._iter.__iterate(function(a){return s(a,a,r)},n)},e.prototype.__iterator=function(s,n){var r=this._iter.__iterator(Ei,n);return new kt(function(){var a=r.next();return a.done?a:gr(s,a.value,a.value,a)})},e}(Zo),yF=function(t){function e(u){this._iter=u,this.size=u.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(s,n){var r=this;return this._iter.__iterate(function(a){if(a){EE(a);var o=hn(a);return s(o?a.get(1):a[1],o?a.get(0):a[0],r)}},n)},e.prototype.__iterator=function(s,n){var r=this._iter.__iterator(Ei,n);return new kt(function(){for(;;){var a=r.next();if(a.done)return a;var o=a.value;if(o){EE(o);var l=hn(o);return gr(s,l?o.get(0):o[0],l?o.get(1):o[1],a)}}})},e}(Za);hF.prototype.cacheResult=Db.prototype.cacheResult=pF.prototype.cacheResult=yF.prototype.cacheResult=bT;function bF(t){var e=Vi(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var u=t.reverse.apply(this);return u.flip=function(){return t.reverse()},u},e.has=function(u){return t.includes(u)},e.includes=function(u){return t.has(u)},e.cacheResult=bT,e.__iterateUncached=function(u,s){var n=this;return t.__iterate(function(r,a){return u(a,r,n)!==!1},s)},e.__iteratorUncached=function(u,s){if(u===oi){var n=t.__iterator(u,s);return new kt(function(){var r=n.next();if(!r.done){var a=r.value[0];r.value[0]=r.value[1],r.value[1]=a}return r})}return t.__iterator(u===Ei?dy:Ei,s)},e}function mF(t,e,u){var s=Vi(t);return s.size=t.size,s.has=function(n){return t.has(n)},s.get=function(n,r){var a=t.get(n,Ut);return a===Ut?r:e.call(u,a,n,t)},s.__iterateUncached=function(n,r){var a=this;return t.__iterate(function(o,l,c){return n(e.call(u,o,l,c),l,a)!==!1},r)},s.__iteratorUncached=function(n,r){var a=t.__iterator(oi,r);return new kt(function(){var o=a.next();if(o.done)return o;var l=o.value,c=l[0];return gr(n,c,e.call(u,l[1],c,t),o)})},s}function hT(t,e){var u=this,s=Vi(t);return s._iter=t,s.size=t.size,s.reverse=function(){return t},t.flip&&(s.flip=function(){var n=bF(t);return n.reverse=function(){return t.flip()},n}),s.get=function(n,r){return t.get(e?n:-1-n,r)},s.has=function(n){return t.has(e?n:-1-n)},s.includes=function(n){return t.includes(n)},s.cacheResult=bT,s.__iterate=function(n,r){var a=this,o=0;return r&&jo(t),t.__iterate(function(l,c){return n(l,e?c:r?a.size-++o:o++,a)},!r)},s.__iterator=function(n,r){var a=0;r&&jo(t);var o=t.__iterator(oi,!r);return new kt(function(){var l=o.next();if(l.done)return l;var c=l.value;return gr(n,e?c[0]:r?u.size-++a:a++,c[1],l)})},s}function gF(t,e,u,s){var n=Vi(t);return s&&(n.has=function(r){var a=t.get(r,Ut);return a!==Ut&&!!e.call(u,a,r,t)},n.get=function(r,a){var o=t.get(r,Ut);return o!==Ut&&e.call(u,o,r,t)?o:a}),n.__iterateUncached=function(r,a){var o=this,l=0;return t.__iterate(function(c,d,h){if(e.call(u,c,d,h))return l++,r(c,s?d:l-1,o)},a),l},n.__iteratorUncached=function(r,a){var o=t.__iterator(oi,a),l=0;return new kt(function(){for(;;){var c=o.next();if(c.done)return c;var d=c.value,h=d[0],f=d[1];if(e.call(u,f,h,t))return gr(r,s?h:l++,f,c)}})},n}function Q$(t,e,u){var s=ts().asMutable();return t.__iterate(function(n,r){s.update(e.call(u,n,r,t),0,function(a){return a+1})}),s.asImmutable()}function H$(t,e,u){var s=cr(t),n=(Xn(t)?Oi():ts()).asMutable();t.__iterate(function(a,o){n.update(e.call(u,a,o,t),function(l){return l=l||[],l.push(s?[o,a]:a),l})});var r=yT(t);return n.map(function(a){return ur(t,r(a))}).asImmutable()}function $$(t,e,u){var s=cr(t),n=[[],[]];t.__iterate(function(a,o){n[e.call(u,a,o,t)?1:0].push(s?[o,a]:a)});var r=yT(t);return n.map(function(a){return ur(t,r(a))})}function pT(t,e,u,s){var n=t.size;if(uy(e,u,n))return t;if(typeof n>"u"&&(e<0||u<0))return pT(t.toSeq().cacheResult(),e,u,s);var r=Wo(e,n),a=cy(u,n),o=a-r,l;o===o&&(l=o<0?0:o);var c=Vi(t);return c.size=l===0?l:t.size&&l||void 0,!s&&ly(t)&&l>=0&&(c.get=function(d,h){return d=Wa(this,d),d>=0&&d<l?t.get(d+r,h):h}),c.__iterateUncached=function(d,h){var f=this;if(l===0)return 0;if(h)return this.cacheResult().__iterate(d,h);var p=0,y=!0,b=0;return t.__iterate(function(g,m){if(!(y&&(y=p++<r)))return b++,d(g,s?m:b-1,f)!==!1&&b!==l}),b},c.__iteratorUncached=function(d,h){if(l!==0&&h)return this.cacheResult().__iterator(d,h);if(l===0)return new kt(Pn);var f=t.__iterator(d,h),p=0,y=0;return new kt(function(){for(;p++<r;)f.next();if(++y>l)return Pn();var b=f.next();return s||d===Ei||b.done?b:d===dy?gr(d,y-1,void 0,b):gr(d,y-1,b.value[1],b)})},c}function V$(t,e,u){var s=Vi(t);return s.__iterateUncached=function(n,r){var a=this;if(r)return this.cacheResult().__iterate(n,r);var o=0;return t.__iterate(function(l,c,d){return e.call(u,l,c,d)&&++o&&n(l,c,a)}),o},s.__iteratorUncached=function(n,r){var a=this;if(r)return this.cacheResult().__iterator(n,r);var o=t.__iterator(oi,r),l=!0;return new kt(function(){if(!l)return Pn();var c=o.next();if(c.done)return c;var d=c.value,h=d[0],f=d[1];return e.call(u,f,h,a)?n===oi?c:gr(n,h,f,c):(l=!1,Pn())})},s}function _F(t,e,u,s){var n=Vi(t);return n.__iterateUncached=function(r,a){var o=this;if(a)return this.cacheResult().__iterate(r,a);var l=!0,c=0;return t.__iterate(function(d,h,f){if(!(l&&(l=e.call(u,d,h,f))))return c++,r(d,s?h:c-1,o)}),c},n.__iteratorUncached=function(r,a){var o=this;if(a)return this.cacheResult().__iterator(r,a);var l=t.__iterator(oi,a),c=!0,d=0;return new kt(function(){var h,f,p;do{if(h=l.next(),h.done)return s||r===Ei?h:r===dy?gr(r,d++,void 0,h):gr(r,d++,h.value[1],h);var y=h.value;f=y[0],p=y[1],c&&(c=e.call(u,p,f,o))}while(c);return r===oi?h:gr(r,f,p,h)})},n}function k$(t,e){var u=cr(t),s=[t].concat(e).map(function(a){return hn(a)?u&&(a=ci(a)):a=u?dT(a):lF(Array.isArray(a)?a:[a]),a}).filter(function(a){return a.size!==0});if(s.length===0)return t;if(s.length===1){var n=s[0];if(n===t||u&&cr(n)||an(t)&&an(n))return n}var r=new Ws(s);return u?r=r.toKeyedSeq():an(t)||(r=r.toSetSeq()),r=r.flatten(!0),r.size=s.reduce(function(a,o){if(a!==void 0){var l=o.size;if(l!==void 0)return a+l}},0),r}function vF(t,e,u){var s=Vi(t);return s.__iterateUncached=function(n,r){if(r)return this.cacheResult().__iterate(n,r);var a=0,o=!1;function l(c,d){c.__iterate(function(h,f){return(!e||d<e)&&hn(h)?l(h,d+1):(a++,n(h,u?f:a-1,s)===!1&&(o=!0)),!o},r)}return l(t,0),a},s.__iteratorUncached=function(n,r){if(r)return this.cacheResult().__iterator(n,r);var a=t.__iterator(n,r),o=[],l=0;return new kt(function(){for(;a;){var c=a.next();if(c.done!==!1){a=o.pop();continue}var d=c.value;if(n===oi&&(d=d[1]),(!e||o.length<e)&&hn(d))o.push(a),a=d.__iterator(n,r);else return u?c:gr(n,l++,d,c)}return Pn()})},s}function z$(t,e,u){var s=yT(t);return t.toSeq().map(function(n,r){return s(e.call(u,n,r,t))}).flatten(!0)}function G$(t,e){var u=Vi(t);return u.size=t.size&&t.size*2-1,u.__iterateUncached=function(s,n){var r=this,a=0;return t.__iterate(function(o){return(!a||s(e,a++,r)!==!1)&&s(o,a++,r)!==!1},n),a},u.__iteratorUncached=function(s,n){var r=t.__iterator(Ei,n),a=0,o;return new kt(function(){return(!o||a%2)&&(o=r.next(),o.done)?o:a%2?gr(s,a++,e):gr(s,a++,o.value,o)})},u}function Lo(t,e,u){e||(e=wF);var s=cr(t),n=0,r=t.toSeq().map(function(a,o){return[o,a,n++,u?u(a,o,t):a]}).valueSeq().toArray();return r.sort(function(a,o){return e(a[3],o[3])||a[2]-o[2]}).forEach(s?function(a,o){r[o].length=2}:function(a,o){r[o]=a[1]}),s?Za(r):an(t)?li(r):Zo(r)}function r1(t,e,u){if(e||(e=wF),u){var s=t.toSeq().map(function(n,r){return[n,u(n,r,t)]}).reduce(function(n,r){return AE(e,n[1],r[1])?r:n});return s&&s[0]}return t.reduce(function(n,r){return AE(e,n,r)?r:n})}function AE(t,e,u){var s=t(u,e);return s===0&&u!==e&&(u==null||u!==u)||s>0}function n1(t,e,u,s){var n=Vi(t),r=new Ws(u).map(function(a){return a.size});return n.size=s?r.max():r.min(),n.__iterate=function(a,o){for(var l=this.__iterator(Ei,o),c,d=0;!(c=l.next()).done&&a(c.value,d++,this)!==!1;);return d},n.__iteratorUncached=function(a,o){var l=u.map(function(h){return h=mr(h),c3(o?h.reverse():h)}),c=0,d=!1;return new kt(function(){var h;return d||(h=l.map(function(f){return f.next()}),d=s?h.every(function(f){return f.done}):h.some(function(f){return f.done})),d?Pn():gr(a,c++,e.apply(null,h.map(function(f){return f.value})))})},n}function ur(t,e){return t===e?t:ly(t)?e:t.constructor(e)}function EE(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function yT(t){return cr(t)?ci:an(t)?Ys:Xo}function Vi(t){return Object.create((cr(t)?Za:an(t)?li:Zo).prototype)}function bT(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):pn.prototype.cacheResult.call(this)}function wF(t,e){return t===void 0&&e===void 0?0:t===void 0?1:e===void 0?-1:t>e?1:t<e?-1:0}function Qi(t,e){e=e||0;for(var u=Math.max(0,t.length-e),s=new Array(u),n=0;n<u;n++)s[n]=t[n+e];return s}function mT(t,e){if(!t)throw new Error(e)}function Wn(t){mT(t!==1/0,"Cannot perform this action with an infinite size.")}function SF(t){if(uT(t)&&typeof t!="string")return t;if(Xn(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}var W$=Object.prototype.toString;function Nb(t){if(!t||typeof t!="object"||W$.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var u=e,s=Object.getPrototypeOf(e);s!==null;)u=s,s=Object.getPrototypeOf(u);return u===e}function Ja(t){return typeof t=="object"&&(Yn(t)||Array.isArray(t)||Nb(t))}function J0(t){try{return typeof t=="string"?JSON.stringify(t):String(t)}catch{return JSON.stringify(t)}}function gT(t,e){return Yn(t)?t.has(e):Ja(t)&&Yo.call(t,e)}function Cb(t,e,u){return Yn(t)?t.get(e,u):gT(t,e)?typeof t.get=="function"?t.get(e):t[e]:u}function sb(t){if(Array.isArray(t))return Qi(t);var e={};for(var u in t)Yo.call(t,u)&&(e[u]=t[u]);return e}function _T(t,e){if(!Ja(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(Yn(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!Yo.call(t,e))return t;var u=sb(t);return Array.isArray(u)?u.splice(e,1):delete u[e],u}function vT(t,e,u){if(!Ja(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(Yn(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,u)}if(Yo.call(t,e)&&u===t[e])return t;var s=sb(t);return s[e]=u,s}function es(t,e,u,s){s||(s=u,u=void 0);var n=TF(Yn(t),t,SF(e),0,u,s);return n===Ut?u:n}function TF(t,e,u,s,n,r){var a=e===Ut;if(s===u.length){var o=a?n:e,l=r(o);return l===o?e:l}if(!a&&!Ja(e))throw new TypeError("Cannot update within non-data-structure value in path ["+u.slice(0,s).map(J0)+"]: "+e);var c=u[s],d=a?Ut:Cb(e,c,Ut),h=TF(d===Ut?t:Yn(d),d,u,s+1,n,r);return h===d?e:h===Ut?_T(e,c):vT(a?t?vi():{}:e,c,h)}function wT(t,e,u){return es(t,e,Ut,function(){return u})}function ST(t,e){return wT(this,t,e)}function TT(t,e){return es(t,e,function(){return Ut})}function AT(t){return TT(this,t)}function jb(t,e,u,s){return es(t,[e],u,s)}function ET(t,e,u){return arguments.length===1?t(this):jb(this,t,e,u)}function OT(t,e,u){return es(this,t,e,u)}function AF(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return OF(this,t)}function EF(t){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];if(typeof t!="function")throw new TypeError("Invalid merger function: "+t);return OF(this,e,t)}function OF(t,e,u){for(var s=[],n=0;n<e.length;n++){var r=ci(e[n]);r.size!==0&&s.push(r)}return s.length===0?t:t.toSeq().size===0&&!t.__ownerID&&s.length===1?t.constructor(s[0]):t.withMutations(function(a){for(var o=u?function(c,d){jb(a,d,Ut,function(h){return h===Ut?c:u(h,c,d)})}:function(c,d){a.set(d,c)},l=0;l<s.length;l++)s[l].forEach(o)})}function RF(t){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];return py(t,e)}function xF(t,e){for(var u=[],s=arguments.length-2;s-- >0;)u[s]=arguments[s+2];return py(e,u,t)}function IF(t){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];return hy(t,e)}function PF(t,e){for(var u=[],s=arguments.length-2;s-- >0;)u[s]=arguments[s+2];return hy(e,u,t)}function hy(t,e,u){return py(t,e,J$(u))}function py(t,e,u){if(!Ja(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(Yn(t))return typeof u=="function"&&t.mergeWith?t.mergeWith.apply(t,[u].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var s=Array.isArray(t),n=t,r=s?Ys:ci,a=s?function(l){n===t&&(n=sb(n)),n.push(l)}:function(l,c){var d=Yo.call(n,c),h=d&&u?u(n[c],l,c):l;(!d||h!==n[c])&&(n===t&&(n=sb(n)),n[c]=h)},o=0;o<e.length;o++)r(e[o]).forEach(a);return n}function J$(t){function e(u,s,n){return Ja(u)&&Ja(s)&&X$(u,s)?py(u,[s],e):t?t(u,s,n):s}return e}function X$(t,e){var u=pn(t),s=pn(e);return an(u)===an(s)&&cr(u)===cr(s)}function DF(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return hy(this,t)}function NF(t){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];return hy(this,e,t)}function RT(t){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];return es(this,t,vi(),function(s){return py(s,e)})}function xT(t){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];return es(this,t,vi(),function(s){return hy(s,e)})}function yy(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function by(){return this.__ownerID?this:this.__ensureOwner(new sT)}function my(){return this.__ensureOwner()}function IT(){return this.__altered}var ts=function(t){function e(u){return u==null?vi():fy(u)&&!Xn(u)?u:vi().withMutations(function(s){var n=t(u);Wn(n.size),n.forEach(function(r,a){return s.set(a,r)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var s=[],n=arguments.length;n--;)s[n]=arguments[n];return vi().withMutations(function(r){for(var a=0;a<s.length;a+=2){if(a+1>=s.length)throw new Error("Missing value for key: "+s[a]);r.set(s[a],s[a+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(s,n){return this._root?this._root.get(0,void 0,s,n):n},e.prototype.set=function(s,n){return xE(this,s,n)},e.prototype.remove=function(s){return xE(this,s,Ut)},e.prototype.deleteAll=function(s){var n=mr(s);return n.size===0?this:this.withMutations(function(r){n.forEach(function(a){return r.remove(a)})})},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):vi()},e.prototype.sort=function(s){return Oi(Lo(this,s))},e.prototype.sortBy=function(s,n){return Oi(Lo(this,n,s))},e.prototype.map=function(s,n){var r=this;return this.withMutations(function(a){a.forEach(function(o,l){a.set(l,s.call(n,o,l,r))})})},e.prototype.__iterator=function(s,n){return new K$(this,s,n)},e.prototype.__iterate=function(s,n){var r=this,a=0;return this._root&&this._root.iterate(function(o){return a++,s(o[1],o[0],r)},n),a},e.prototype.__ensureOwner=function(s){return s===this.__ownerID?this:s?PT(this.size,this._root,s,this.__hash):this.size===0?vi():(this.__ownerID=s,this.__altered=!1,this)},e}(ci);ts.isMap=fy;var _r=ts.prototype;_r[dF]=!0;_r[oy]=_r.remove;_r.removeAll=_r.deleteAll;_r.setIn=ST;_r.removeIn=_r.deleteIn=AT;_r.update=ET;_r.updateIn=OT;_r.merge=_r.concat=AF;_r.mergeWith=EF;_r.mergeDeep=DF;_r.mergeDeepWith=NF;_r.mergeIn=RT;_r.mergeDeepIn=xT;_r.withMutations=yy;_r.wasAltered=IT;_r.asImmutable=my;_r["@@transducer/init"]=_r.asMutable=by;_r["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])};_r["@@transducer/result"]=function(t){return t.asImmutable()};var X0=function(e,u){this.ownerID=e,this.entries=u};X0.prototype.get=function(e,u,s,n){for(var r=this.entries,a=0,o=r.length;a<o;a++)if(kr(s,r[a][0]))return r[a][1];return n};X0.prototype.update=function(e,u,s,n,r,a,o){for(var l=r===Ut,c=this.entries,d=0,h=c.length;d<h&&!kr(n,c[d][0]);d++);var f=d<h;if(f?c[d][1]===r:l)return this;if(si(o),(l||!f)&&si(a),!(l&&c.length===1)){if(!f&&!l&&c.length>=nV)return Y$(e,c,n,r);var p=e&&e===this.ownerID,y=p?c:Qi(c);return f?l?d===h-1?y.pop():y[d]=y.pop():y[d]=[n,r]:y.push([n,r]),p?(this.entries=y,this):new X0(e,y)}};var Mo=function(e,u,s){this.ownerID=e,this.bitmap=u,this.nodes=s};Mo.prototype.get=function(e,u,s,n){u===void 0&&(u=Rn(s));var r=1<<((e===0?u:u>>>e)&xn),a=this.bitmap;return a&r?this.nodes[CF(a&r-1)].get(e+br,u,s,n):n};Mo.prototype.update=function(e,u,s,n,r,a,o){s===void 0&&(s=Rn(n));var l=(u===0?s:s>>>u)&xn,c=1<<l,d=this.bitmap,h=(d&c)!==0;if(!h&&r===Ut)return this;var f=CF(d&c-1),p=this.nodes,y=h?p[f]:void 0,b=DT(y,e,u+br,s,n,r,a,o);if(b===y)return this;if(!h&&b&&p.length>=iV)return eV(e,p,d,l,b);if(h&&!b&&p.length===2&&IE(p[f^1]))return p[f^1];if(h&&b&&p.length===1&&IE(b))return b;var g=e&&e===this.ownerID,m=h?b?d:d^c:d|c,v=h?b?jF(p,f,b,g):rV(p,f,g):tV(p,f,b,g);return g?(this.bitmap=m,this.nodes=v,this):new Mo(e,m,v)};var K0=function(e,u,s){this.ownerID=e,this.count=u,this.nodes=s};K0.prototype.get=function(e,u,s,n){u===void 0&&(u=Rn(s));var r=(e===0?u:u>>>e)&xn,a=this.nodes[r];return a?a.get(e+br,u,s,n):n};K0.prototype.update=function(e,u,s,n,r,a,o){s===void 0&&(s=Rn(n));var l=(u===0?s:s>>>u)&xn,c=r===Ut,d=this.nodes,h=d[l];if(c&&!h)return this;var f=DT(h,e,u+br,s,n,r,a,o);if(f===h)return this;var p=this.count;if(!h)p++;else if(!f&&(p--,p<aV))return Z$(e,d,p,l);var y=e&&e===this.ownerID,b=jF(d,l,f,y);return y?(this.count=p,this.nodes=b,this):new K0(e,p,b)};var Fo=function(e,u,s){this.ownerID=e,this.keyHash=u,this.entries=s};Fo.prototype.get=function(e,u,s,n){for(var r=this.entries,a=0,o=r.length;a<o;a++)if(kr(s,r[a][0]))return r[a][1];return n};Fo.prototype.update=function(e,u,s,n,r,a,o){s===void 0&&(s=Rn(n));var l=r===Ut;if(s!==this.keyHash)return l?this:(si(o),si(a),NT(this,e,u,s,[n,r]));for(var c=this.entries,d=0,h=c.length;d<h&&!kr(n,c[d][0]);d++);var f=d<h;if(f?c[d][1]===r:l)return this;if(si(o),(l||!f)&&si(a),l&&h===2)return new _a(e,this.keyHash,c[d^1]);var p=e&&e===this.ownerID,y=p?c:Qi(c);return f?l?d===h-1?y.pop():y[d]=y.pop():y[d]=[n,r]:y.push([n,r]),p?(this.entries=y,this):new Fo(e,this.keyHash,y)};var _a=function(e,u,s){this.ownerID=e,this.keyHash=u,this.entry=s};_a.prototype.get=function(e,u,s,n){return kr(s,this.entry[0])?this.entry[1]:n};_a.prototype.update=function(e,u,s,n,r,a,o){var l=r===Ut,c=kr(n,this.entry[0]);if(c?r===this.entry[1]:l)return this;if(si(o),l){si(a);return}return c?e&&e===this.ownerID?(this.entry[1]=r,this):new _a(e,this.keyHash,[n,r]):(si(a),NT(this,e,u,Rn(n),[n,r]))};X0.prototype.iterate=Fo.prototype.iterate=function(t,e){for(var u=this.entries,s=0,n=u.length-1;s<=n;s++)if(t(u[e?n-s:s])===!1)return!1};Mo.prototype.iterate=K0.prototype.iterate=function(t,e){for(var u=this.nodes,s=0,n=u.length-1;s<=n;s++){var r=u[e?n-s:s];if(r&&r.iterate(t,e)===!1)return!1}};_a.prototype.iterate=function(t,e){return t(this.entry)};var K$=function(t){function e(u,s,n){this._type=s,this._reverse=n,this._stack=u._root&&OE(u._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var s=this._type,n=this._stack;n;){var r=n.node,a=n.index++,o=void 0;if(r.entry){if(a===0)return qm(s,r.entry)}else if(r.entries){if(o=r.entries.length-1,a<=o)return qm(s,r.entries[this._reverse?o-a:a])}else if(o=r.nodes.length-1,a<=o){var l=r.nodes[this._reverse?o-a:a];if(l){if(l.entry)return qm(s,l.entry);n=this._stack=OE(l,n)}continue}n=this._stack=this._stack.__prev}return Pn()},e}(kt);function qm(t,e){return gr(t,e[0],e[1])}function OE(t,e){return{node:t,index:0,__prev:e}}function PT(t,e,u,s){var n=Object.create(_r);return n.size=t,n._root=e,n.__ownerID=u,n.__hash=s,n.__altered=!1,n}var RE;function vi(){return RE||(RE=PT(0))}function xE(t,e,u){var s,n;if(t._root){var r=o3(),a=o3();if(s=DT(t._root,t.__ownerID,0,void 0,e,u,r,a),!a.value)return t;n=t.size+(r.value?u===Ut?-1:1:0)}else{if(u===Ut)return t;n=1,s=new X0(t.__ownerID,[[e,u]])}return t.__ownerID?(t.size=n,t._root=s,t.__hash=void 0,t.__altered=!0,t):s?PT(n,s):vi()}function DT(t,e,u,s,n,r,a,o){return t?t.update(e,u,s,n,r,a,o):r===Ut?t:(si(o),si(a),new _a(e,s,[n,r]))}function IE(t){return t.constructor===_a||t.constructor===Fo}function NT(t,e,u,s,n){if(t.keyHash===s)return new Fo(e,s,[t.entry,n]);var r=(u===0?t.keyHash:t.keyHash>>>u)&xn,a=(u===0?s:s>>>u)&xn,o,l=r===a?[NT(t,e,u+br,s,n)]:(o=new _a(e,s,n),r<a?[t,o]:[o,t]);return new Mo(e,1<<r|1<<a,l)}function Y$(t,e,u,s){t||(t=new sT);for(var n=new _a(t,Rn(u),[u,s]),r=0;r<e.length;r++){var a=e[r];n=n.update(t,0,void 0,a[0],a[1])}return n}function Z$(t,e,u,s){for(var n=0,r=0,a=new Array(u),o=0,l=1,c=e.length;o<c;o++,l<<=1){var d=e[o];d!==void 0&&o!==s&&(n|=l,a[r++]=d)}return new Mo(t,n,a)}function eV(t,e,u,s,n){for(var r=0,a=new Array(ai),o=0;u!==0;o++,u>>>=1)a[o]=u&1?e[r++]:void 0;return a[s]=n,new K0(t,r+1,a)}function CF(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function jF(t,e,u,s){var n=s?t:Qi(t);return n[e]=u,n}function tV(t,e,u,s){var n=t.length+1;if(s&&e+1===n)return t[e]=u,t;for(var r=new Array(n),a=0,o=0;o<n;o++)o===e?(r[o]=u,a=-1):r[o]=t[o+a];return r}function rV(t,e,u){var s=t.length-1;if(u&&e===s)return t.pop(),t;for(var n=new Array(s),r=0,a=0;a<s;a++)a===e&&(r=1),n[a]=t[a+r];return n}var nV=ai/4,iV=ai/2,aV=ai/4,LF="@@__IMMUTABLE_LIST__@@";function Lb(t){return!!(t&&t[LF])}var eu=function(t){function e(u){var s=B1();if(u==null)return s;if(Lb(u))return u;var n=t(u),r=n.size;return r===0?s:(Wn(r),r>0&&r<ai?Y0(0,r,br,null,new Va(n.toArray())):s.withMutations(function(a){a.setSize(r),n.forEach(function(o,l){return a.set(l,o)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(s,n){if(s=Wa(this,s),s>=0&&s<this.size){s+=this._origin;var r=MF(this,s);return r&&r.array[s&xn]}return n},e.prototype.set=function(s,n){return sV(this,s,n)},e.prototype.remove=function(s){return this.has(s)?s===0?this.shift():s===this.size-1?this.pop():this.splice(s,1):this},e.prototype.insert=function(s,n){return this.splice(s,0,n)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=br,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):B1()},e.prototype.push=function(){var s=arguments,n=this.size;return this.withMutations(function(r){Fa(r,0,n+s.length);for(var a=0;a<s.length;a++)r.set(n+a,s[a])})},e.prototype.pop=function(){return Fa(this,0,-1)},e.prototype.unshift=function(){var s=arguments;return this.withMutations(function(n){Fa(n,-s.length);for(var r=0;r<s.length;r++)n.set(r,s[r])})},e.prototype.shift=function(){return Fa(this,1)},e.prototype.concat=function(){for(var s=arguments,n=[],r=0;r<arguments.length;r++){var a=s[r],o=t(typeof a!="string"&&oT(a)?a:[a]);o.size!==0&&n.push(o)}return n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(l){n.forEach(function(c){return c.forEach(function(d){return l.push(d)})})})},e.prototype.setSize=function(s){return Fa(this,0,s)},e.prototype.map=function(s,n){var r=this;return this.withMutations(function(a){for(var o=0;o<r.size;o++)a.set(o,s.call(n,a.get(o),o,r))})},e.prototype.slice=function(s,n){var r=this.size;return uy(s,n,r)?this:Fa(this,Wo(s,r),cy(n,r))},e.prototype.__iterator=function(s,n){var r=n?this.size:0,a=PE(this,n);return new kt(function(){var o=a();return o===U0?Pn():gr(s,n?--r:r++,o)})},e.prototype.__iterate=function(s,n){for(var r=n?this.size:0,a=PE(this,n),o;(o=a())!==U0&&s(o,n?--r:r++,this)!==!1;);return r},e.prototype.__ensureOwner=function(s){return s===this.__ownerID?this:s?Y0(this._origin,this._capacity,this._level,this._root,this._tail,s,this.__hash):this.size===0?B1():(this.__ownerID=s,this.__altered=!1,this)},e}(Ys);eu.isList=Lb;var Br=eu.prototype;Br[LF]=!0;Br[oy]=Br.remove;Br.merge=Br.concat;Br.setIn=ST;Br.deleteIn=Br.removeIn=AT;Br.update=ET;Br.updateIn=OT;Br.mergeIn=RT;Br.mergeDeepIn=xT;Br.withMutations=yy;Br.wasAltered=IT;Br.asImmutable=my;Br["@@transducer/init"]=Br.asMutable=by;Br["@@transducer/step"]=function(t,e){return t.push(e)};Br["@@transducer/result"]=function(t){return t.asImmutable()};var Va=function(e,u){this.array=e,this.ownerID=u};Va.prototype.removeBefore=function(e,u,s){if(s===u?1<<u:this.array.length===0)return this;var n=s>>>u&xn;if(n>=this.array.length)return new Va([],e);var r=n===0,a;if(u>0){var o=this.array[n];if(a=o&&o.removeBefore(e,u-br,s),a===o&&r)return this}if(r&&!a)return this;var l=qo(this,e);if(!r)for(var c=0;c<n;c++)l.array[c]=void 0;return a&&(l.array[n]=a),l};Va.prototype.removeAfter=function(e,u,s){if(s===(u?1<<u:0)||this.array.length===0)return this;var n=s-1>>>u&xn;if(n>=this.array.length)return this;var r;if(u>0){var a=this.array[n];if(r=a&&a.removeAfter(e,u-br,s),r===a&&n===this.array.length-1)return this}var o=qo(this,e);return o.array.splice(n+1),r&&(o.array[n]=r),o};var U0={};function PE(t,e){var u=t._origin,s=t._capacity,n=Z0(s),r=t._tail;return a(t._root,t._level,0);function a(c,d,h){return d===0?o(c,h):l(c,d,h)}function o(c,d){var h=d===n?r&&r.array:c&&c.array,f=d>u?0:u-d,p=s-d;return p>ai&&(p=ai),function(){if(f===p)return U0;var y=e?--p:f++;return h&&h[y]}}function l(c,d,h){var f,p=c&&c.array,y=h>u?0:u-h>>d,b=(s-h>>d)+1;return b>ai&&(b=ai),function(){for(;;){if(f){var g=f();if(g!==U0)return g;f=null}if(y===b)return U0;var m=e?--b:y++;f=a(p&&p[m],d-br,h+(m<<d))}}}}function Y0(t,e,u,s,n,r,a){var o=Object.create(Br);return o.size=e-t,o._origin=t,o._capacity=e,o._level=u,o._root=s,o._tail=n,o.__ownerID=r,o.__hash=a,o.__altered=!1,o}var DE;function B1(){return DE||(DE=Y0(0,0,br))}function sV(t,e,u){if(e=Wa(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(a){e<0?Fa(a,e).set(0,u):Fa(a,0,e+1).set(e,u)});e+=t._origin;var s=t._tail,n=t._root,r=o3();return e>=Z0(t._capacity)?s=h3(s,t.__ownerID,0,e,u,r):n=h3(n,t.__ownerID,t._level,e,u,r),r.value?t.__ownerID?(t._root=n,t._tail=s,t.__hash=void 0,t.__altered=!0,t):Y0(t._origin,t._capacity,t._level,n,s):t}function h3(t,e,u,s,n,r){var a=s>>>u&xn,o=t&&a<t.array.length;if(!o&&n===void 0)return t;var l;if(u>0){var c=t&&t.array[a],d=h3(c,e,u-br,s,n,r);return d===c?t:(l=qo(t,e),l.array[a]=d,l)}return o&&t.array[a]===n?t:(r&&si(r),l=qo(t,e),n===void 0&&a===l.array.length-1?l.array.pop():l.array[a]=n,l)}function qo(t,e){return e&&t&&e===t.ownerID?t:new Va(t?t.array.slice():[],e)}function MF(t,e){if(e>=Z0(t._capacity))return t._tail;if(e<1<<t._level+br){for(var u=t._root,s=t._level;u&&s>0;)u=u.array[e>>>s&xn],s-=br;return u}}function Fa(t,e,u){e!==void 0&&(e|=0),u!==void 0&&(u|=0);var s=t.__ownerID||new sT,n=t._origin,r=t._capacity,a=n+e,o=u===void 0?r:u<0?r+u:n+u;if(a===n&&o===r)return t;if(a>=o)return t.clear();for(var l=t._level,c=t._root,d=0;a+d<0;)c=new Va(c&&c.array.length?[void 0,c]:[],s),l+=br,d+=1<<l;d&&(a+=d,n+=d,o+=d,r+=d);for(var h=Z0(r),f=Z0(o);f>=1<<l+br;)c=new Va(c&&c.array.length?[c]:[],s),l+=br;var p=t._tail,y=f<h?MF(t,o-1):f>h?new Va([],s):p;if(p&&f>h&&a<r&&p.array.length){c=qo(c,s);for(var b=c,g=l;g>br;g-=br){var m=h>>>g&xn;b=b.array[m]=qo(b.array[m],s)}b.array[h>>>br&xn]=p}if(o<r&&(y=y&&y.removeAfter(s,0,o)),a>=f)a-=f,o-=f,l=br,c=null,y=y&&y.removeBefore(s,0,a);else if(a>n||f<h){for(d=0;c;){var v=a>>>l&xn;if(v!==f>>>l&xn)break;v&&(d+=(1<<l)*v),l-=br,c=c.array[v]}c&&a>n&&(c=c.removeBefore(s,l,a-d)),c&&f<h&&(c=c.removeAfter(s,l,f-d)),d&&(a-=d,o-=d)}return t.__ownerID?(t.size=o-a,t._origin=a,t._capacity=o,t._level=l,t._root=c,t._tail=y,t.__hash=void 0,t.__altered=!0,t):Y0(a,o,l,c,y)}function Z0(t){return t<ai?0:t-1>>>br<<br}var Oi=function(t){function e(u){return u==null?A0():Ib(u)?u:A0().withMutations(function(s){var n=ci(u);Wn(n.size),n.forEach(function(r,a){return s.set(a,r)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(s,n){var r=this._map.get(s);return r!==void 0?this._list.get(r)[1]:n},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):A0()},e.prototype.set=function(s,n){return CE(this,s,n)},e.prototype.remove=function(s){return CE(this,s,Ut)},e.prototype.__iterate=function(s,n){var r=this;return this._list.__iterate(function(a){return a&&s(a[1],a[0],r)},n)},e.prototype.__iterator=function(s,n){return this._list.fromEntrySeq().__iterator(s,n)},e.prototype.__ensureOwner=function(s){if(s===this.__ownerID)return this;var n=this._map.__ensureOwner(s),r=this._list.__ensureOwner(s);return s?CT(n,r,s,this.__hash):this.size===0?A0():(this.__ownerID=s,this.__altered=!1,this._map=n,this._list=r,this)},e}(ts);Oi.isOrderedMap=Ib;Oi.prototype[Ko]=!0;Oi.prototype[oy]=Oi.prototype.remove;function CT(t,e,u,s){var n=Object.create(Oi.prototype);return n.size=t?t.size:0,n._map=t,n._list=e,n.__ownerID=u,n.__hash=s,n.__altered=!1,n}var NE;function A0(){return NE||(NE=CT(vi(),B1()))}function CE(t,e,u){var s=t._map,n=t._list,r=s.get(e),a=r!==void 0,o,l;if(u===Ut){if(!a)return t;n.size>=ai&&n.size>=s.size*2?(l=n.filter(function(c,d){return c!==void 0&&r!==d}),o=l.toKeyedSeq().map(function(c){return c[0]}).flip().toMap(),t.__ownerID&&(o.__ownerID=l.__ownerID=t.__ownerID)):(o=s.remove(e),l=r===n.size-1?n.pop():n.set(r,void 0))}else if(a){if(u===n.get(r)[1])return t;o=s,l=n.set(r,[e,u])}else o=s.set(e,n.size),l=n.set(n.size,[e,u]);return t.__ownerID?(t.size=o.size,t._map=o,t._list=l,t.__hash=void 0,t.__altered=!0,t):CT(o,l)}var FF="@@__IMMUTABLE_STACK__@@";function ey(t){return!!(t&&t[FF])}var gy=function(t){function e(u){return u==null?i1():ey(u)?u:i1().pushAll(u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(s,n){var r=this._head;for(s=Wa(this,s);r&&s--;)r=r.next;return r?r.value:n},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var s=arguments;if(arguments.length===0)return this;for(var n=this.size+arguments.length,r=this._head,a=arguments.length-1;a>=0;a--)r={value:s[a],next:r};return this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):E0(n,r)},e.prototype.pushAll=function(s){if(s=t(s),s.size===0)return this;if(this.size===0&&ey(s))return s;Wn(s.size);var n=this.size,r=this._head;return s.__iterate(function(a){n++,r={value:a,next:r}},!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):E0(n,r)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):i1()},e.prototype.slice=function(s,n){if(uy(s,n,this.size))return this;var r=Wo(s,this.size),a=cy(n,this.size);if(a!==this.size)return t.prototype.slice.call(this,s,n);for(var o=this.size-r,l=this._head;r--;)l=l.next;return this.__ownerID?(this.size=o,this._head=l,this.__hash=void 0,this.__altered=!0,this):E0(o,l)},e.prototype.__ensureOwner=function(s){return s===this.__ownerID?this:s?E0(this.size,this._head,s,this.__hash):this.size===0?i1():(this.__ownerID=s,this.__altered=!1,this)},e.prototype.__iterate=function(s,n){var r=this;if(n)return new Ws(this.toArray()).__iterate(function(l,c){return s(l,c,r)},n);for(var a=0,o=this._head;o&&s(o.value,a++,this)!==!1;)o=o.next;return a},e.prototype.__iterator=function(s,n){if(n)return new Ws(this.toArray()).__iterator(s,n);var r=0,a=this._head;return new kt(function(){if(a){var o=a.value;return a=a.next,gr(s,r++,o)}return Pn()})},e}(Ys);gy.isStack=ey;var Dn=gy.prototype;Dn[FF]=!0;Dn.shift=Dn.pop;Dn.unshift=Dn.push;Dn.unshiftAll=Dn.pushAll;Dn.withMutations=yy;Dn.wasAltered=IT;Dn.asImmutable=my;Dn["@@transducer/init"]=Dn.asMutable=by;Dn["@@transducer/step"]=function(t,e){return t.unshift(e)};Dn["@@transducer/result"]=function(t){return t.asImmutable()};function E0(t,e,u,s){var n=Object.create(Dn);return n.size=t,n._head=e,n.__ownerID=u,n.__hash=s,n.__altered=!1,n}var jE;function i1(){return jE||(jE=E0(0))}var qF="@@__IMMUTABLE_SET__@@";function _y(t){return!!(t&&t[qF])}function Mb(t){return _y(t)&&Xn(t)}function jT(t,e){if(t===e)return!0;if(!hn(e)||t.size!==void 0&&e.size!==void 0&&t.size!==e.size||t.__hash!==void 0&&e.__hash!==void 0&&t.__hash!==e.__hash||cr(t)!==cr(e)||an(t)!==an(e)||Xn(t)!==Xn(e))return!1;if(t.size===0&&e.size===0)return!0;var u=!Jo(t);if(Xn(t)){var s=t.entries();return e.every(function(l,c){var d=s.next().value;return d&&kr(d[1],l)&&(u||kr(d[0],c))})&&s.next().done}var n=!1;if(t.size===void 0)if(e.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{n=!0;var r=t;t=e,e=r}var a=!0,o=e.__iterate(function(l,c){if(u?!t.has(l):n?!kr(l,t.get(c,Ut)):!kr(t.get(c,Ut),l))return a=!1,!1});return a&&t.size===o}function Zs(t,e){var u=function(s){t.prototype[s]=e[s]};return Object.keys(e).forEach(u),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(u),t}function ob(t){if(!t||typeof t!="object")return t;if(!hn(t)){if(!Ja(t))return t;t=pn(t)}if(cr(t)){var e={};return t.__iterate(function(s,n){e[n]=ob(s)}),e}var u=[];return t.__iterate(function(s){u.push(ob(s))}),u}var tu=function(t){function e(u){return u==null?O0():_y(u)&&!Xn(u)?u:O0().withMutations(function(s){var n=t(u);Wn(n.size),n.forEach(function(r){return s.add(r)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(s){return this(ci(s).keySeq())},e.intersect=function(s){return s=mr(s).toArray(),s.length?sn.intersect.apply(e(s.pop()),s):O0()},e.union=function(s){return s=mr(s).toArray(),s.length?sn.union.apply(e(s.pop()),s):O0()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(s){return this._map.has(s)},e.prototype.add=function(s){return a1(this,this._map.set(s,s))},e.prototype.remove=function(s){return a1(this,this._map.remove(s))},e.prototype.clear=function(){return a1(this,this._map.clear())},e.prototype.map=function(s,n){var r=this,a=!1,o=a1(this,this._map.mapEntries(function(l){var c=l[1],d=s.call(n,c,c,r);return d!==c&&(a=!0),[d,d]},n));return a?o:this},e.prototype.union=function(){for(var s=[],n=arguments.length;n--;)s[n]=arguments[n];return s=s.filter(function(r){return r.size!==0}),s.length===0?this:this.size===0&&!this.__ownerID&&s.length===1?this.constructor(s[0]):this.withMutations(function(r){for(var a=0;a<s.length;a++)typeof s[a]=="string"?r.add(s[a]):t(s[a]).forEach(function(o){return r.add(o)})})},e.prototype.intersect=function(){for(var s=[],n=arguments.length;n--;)s[n]=arguments[n];if(s.length===0)return this;s=s.map(function(a){return t(a)});var r=[];return this.forEach(function(a){s.every(function(o){return o.includes(a)})||r.push(a)}),this.withMutations(function(a){r.forEach(function(o){a.remove(o)})})},e.prototype.subtract=function(){for(var s=[],n=arguments.length;n--;)s[n]=arguments[n];if(s.length===0)return this;s=s.map(function(a){return t(a)});var r=[];return this.forEach(function(a){s.some(function(o){return o.includes(a)})&&r.push(a)}),this.withMutations(function(a){r.forEach(function(o){a.remove(o)})})},e.prototype.sort=function(s){return Js(Lo(this,s))},e.prototype.sortBy=function(s,n){return Js(Lo(this,n,s))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(s,n){var r=this;return this._map.__iterate(function(a){return s(a,a,r)},n)},e.prototype.__iterator=function(s,n){return this._map.__iterator(s,n)},e.prototype.__ensureOwner=function(s){if(s===this.__ownerID)return this;var n=this._map.__ensureOwner(s);return s?this.__make(n,s):this.size===0?this.__empty():(this.__ownerID=s,this._map=n,this)},e}(Xo);tu.isSet=_y;var sn=tu.prototype;sn[qF]=!0;sn[oy]=sn.remove;sn.merge=sn.concat=sn.union;sn.withMutations=yy;sn.asImmutable=my;sn["@@transducer/init"]=sn.asMutable=by;sn["@@transducer/step"]=function(t,e){return t.add(e)};sn["@@transducer/result"]=function(t){return t.asImmutable()};sn.__empty=O0;sn.__make=BF;function a1(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:e.size===0?t.__empty():t.__make(e)}function BF(t,e){var u=Object.create(sn);return u.size=t?t.size:0,u._map=t,u.__ownerID=e,u}var LE;function O0(){return LE||(LE=BF(vi()))}var LT=function(t){function e(u,s,n){if(!(this instanceof e))return new e(u,s,n);if(mT(n!==0,"Cannot step a Range by 0"),u=u||0,s===void 0&&(s=1/0),n=n===void 0?1:Math.abs(n),s<u&&(n=-n),this._start=u,this._end=s,this._step=n,this.size=Math.max(0,Math.ceil((s-u)/n-1)+1),this.size===0){if(Bm)return Bm;Bm=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},e.prototype.get=function(s,n){return this.has(s)?this._start+Wa(this,s)*this._step:n},e.prototype.includes=function(s){var n=(s-this._start)/this._step;return n>=0&&n<this.size&&n===Math.floor(n)},e.prototype.slice=function(s,n){return uy(s,n,this.size)?this:(s=Wo(s,this.size),n=cy(n,this.size),n<=s?new e(0,0):new e(this.get(s,this._end),this.get(n,this._end),this._step))},e.prototype.indexOf=function(s){var n=s-this._start;if(n%this._step===0){var r=n/this._step;if(r>=0&&r<this.size)return r}return-1},e.prototype.lastIndexOf=function(s){return this.indexOf(s)},e.prototype.__iterate=function(s,n){for(var r=this.size,a=this._step,o=n?this._start+(r-1)*a:this._start,l=0;l!==r&&s(o,n?r-++l:l++,this)!==!1;)o+=n?-a:a;return l},e.prototype.__iterator=function(s,n){var r=this.size,a=this._step,o=n?this._start+(r-1)*a:this._start,l=0;return new kt(function(){if(l===r)return Pn();var c=o;return o+=n?-a:a,gr(s,n?r-++l:l++,c)})},e.prototype.equals=function(s){return s instanceof e?this._start===s._start&&this._end===s._end&&this._step===s._step:jT(this,s)},e}(li),Bm;function Fb(t,e,u){for(var s=SF(e),n=0;n!==s.length;)if(t=Cb(t,s[n++],Ut),t===Ut)return u;return t}function UF(t,e){return Fb(this,t,e)}function MT(t,e){return Fb(t,e,Ut)!==Ut}function oV(t){return MT(this,t)}function QF(){Wn(this.size);var t={};return this.__iterate(function(e,u){t[u]=e}),t}mr.isIterable=hn;mr.isKeyed=cr;mr.isIndexed=an;mr.isAssociative=Jo;mr.isOrdered=Xn;mr.Iterator=kt;Zs(mr,{toArray:function(){Wn(this.size);var e=new Array(this.size||0),u=cr(this),s=0;return this.__iterate(function(n,r){e[s++]=u?[r,n]:n}),e},toIndexedSeq:function(){return new hF(this)},toJS:function(){return ob(this)},toKeyedSeq:function(){return new Db(this,!0)},toMap:function(){return ts(this.toKeyedSeq())},toObject:QF,toOrderedMap:function(){return Oi(this.toKeyedSeq())},toOrderedSet:function(){return Js(cr(this)?this.valueSeq():this)},toSet:function(){return tu(cr(this)?this.valueSeq():this)},toSetSeq:function(){return new pF(this)},toSeq:function(){return an(this)?this.toIndexedSeq():cr(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return gy(cr(this)?this.valueSeq():this)},toList:function(){return eu(cr(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,u){return this.size===0?e+u:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+u},concat:function(){for(var e=[],u=arguments.length;u--;)e[u]=arguments[u];return ur(this,k$(this,e))},includes:function(e){return this.some(function(u){return kr(u,e)})},entries:function(){return this.__iterator(oi)},every:function(e,u){Wn(this.size);var s=!0;return this.__iterate(function(n,r,a){if(!e.call(u,n,r,a))return s=!1,!1}),s},filter:function(e,u){return ur(this,gF(this,e,u,!0))},partition:function(e,u){return $$(this,e,u)},find:function(e,u,s){var n=this.findEntry(e,u);return n?n[1]:s},forEach:function(e,u){return Wn(this.size),this.__iterate(u?e.bind(u):e)},join:function(e){Wn(this.size),e=e!==void 0?""+e:",";var u="",s=!0;return this.__iterate(function(n){s?s=!1:u+=e,u+=n!=null?n.toString():""}),u},keys:function(){return this.__iterator(dy)},map:function(e,u){return ur(this,mF(this,e,u))},reduce:function(e,u,s){return ME(this,e,u,s,arguments.length<2,!1)},reduceRight:function(e,u,s){return ME(this,e,u,s,arguments.length<2,!0)},reverse:function(){return ur(this,hT(this,!0))},slice:function(e,u){return ur(this,pT(this,e,u,!0))},some:function(e,u){Wn(this.size);var s=!1;return this.__iterate(function(n,r,a){if(e.call(u,n,r,a))return s=!0,!1}),s},sort:function(e){return ur(this,Lo(this,e))},values:function(){return this.__iterator(Ei)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(e,u){return jo(e?this.toSeq().filter(e,u):this)},countBy:function(e,u){return Q$(this,e,u)},equals:function(e){return jT(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Ws(e._cache);var u=e.toSeq().map(cV).toIndexedSeq();return u.fromEntrySeq=function(){return e.toSeq()},u},filterNot:function(e,u){return this.filter(Um(e),u)},findEntry:function(e,u,s){var n=s;return this.__iterate(function(r,a,o){if(e.call(u,r,a,o))return n=[a,r],!1}),n},findKey:function(e,u){var s=this.findEntry(e,u);return s&&s[0]},findLast:function(e,u,s){return this.toKeyedSeq().reverse().find(e,u,s)},findLastEntry:function(e,u,s){return this.toKeyedSeq().reverse().findEntry(e,u,s)},findLastKey:function(e,u){return this.toKeyedSeq().reverse().findKey(e,u)},first:function(e){return this.find(tF,null,e)},flatMap:function(e,u){return ur(this,z$(this,e,u))},flatten:function(e){return ur(this,vF(this,e,!0))},fromEntrySeq:function(){return new yF(this)},get:function(e,u){return this.find(function(s,n){return kr(n,e)},void 0,u)},getIn:UF,groupBy:function(e,u){return H$(this,e,u)},has:function(e){return this.get(e,Ut)!==Ut},hasIn:oV,isSubset:function(e){return e=typeof e.includes=="function"?e:mr(e),this.every(function(u){return e.includes(u)})},isSuperset:function(e){return e=typeof e.isSubset=="function"?e:mr(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(u){return kr(u,e)})},keySeq:function(){return this.toSeq().map(uV).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return r1(this,e)},maxBy:function(e,u){return r1(this,u,e)},min:function(e){return r1(this,e?FE(e):BE)},minBy:function(e,u){return r1(this,u?FE(u):BE,e)},rest:function(){return this.slice(1)},skip:function(e){return e===0?this:this.slice(Math.max(0,e))},skipLast:function(e){return e===0?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,u){return ur(this,_F(this,e,u,!0))},skipUntil:function(e,u){return this.skipWhile(Um(e),u)},sortBy:function(e,u){return ur(this,Lo(this,u,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,u){return ur(this,V$(this,e,u))},takeUntil:function(e,u){return this.takeWhile(Um(e),u)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=lV(this))}});var yn=mr.prototype;yn[iF]=!0;yn[Rb]=yn.values;yn.toJSON=yn.toArray;yn.__toStringMapper=J0;yn.inspect=yn.toSource=function(){return this.toString()};yn.chain=yn.flatMap;yn.contains=yn.includes;Zs(ci,{flip:function(){return ur(this,bF(this))},mapEntries:function(e,u){var s=this,n=0;return ur(this,this.toSeq().map(function(r,a){return e.call(u,[a,r],n++,s)}).fromEntrySeq())},mapKeys:function(e,u){var s=this;return ur(this,this.toSeq().flip().map(function(n,r){return e.call(u,n,r,s)}).flip())}});var vy=ci.prototype;vy[aF]=!0;vy[Rb]=yn.entries;vy.toJSON=QF;vy.__toStringMapper=function(t,e){return J0(e)+": "+J0(t)};Zs(Ys,{toKeyedSeq:function(){return new Db(this,!1)},filter:function(e,u){return ur(this,gF(this,e,u,!1))},findIndex:function(e,u){var s=this.findEntry(e,u);return s?s[0]:-1},indexOf:function(e){var u=this.keyOf(e);return u===void 0?-1:u},lastIndexOf:function(e){var u=this.lastKeyOf(e);return u===void 0?-1:u},reverse:function(){return ur(this,hT(this,!1))},slice:function(e,u){return ur(this,pT(this,e,u,!1))},splice:function(e,u){var s=arguments.length;if(u=Math.max(u||0,0),s===0||s===2&&!u)return this;e=Wo(e,e<0?this.count():this.size);var n=this.slice(0,e);return ur(this,s===1?n:n.concat(Qi(arguments,2),this.slice(e+u)))},findLastIndex:function(e,u){var s=this.findLastEntry(e,u);return s?s[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return ur(this,vF(this,e,!1))},get:function(e,u){return e=Wa(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?u:this.find(function(s,n){return n===e},void 0,u)},has:function(e){return e=Wa(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return ur(this,G$(this,e))},interleave:function(){var e=[this].concat(Qi(arguments)),u=n1(this.toSeq(),li.of,e),s=u.flatten(!0);return u.size&&(s.size=u.size*e.length),ur(this,s)},keySeq:function(){return LT(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,u){return ur(this,_F(this,e,u,!1))},zip:function(){var e=[this].concat(Qi(arguments));return ur(this,n1(this,qE,e))},zipAll:function(){var e=[this].concat(Qi(arguments));return ur(this,n1(this,qE,e,!0))},zipWith:function(e){var u=Qi(arguments);return u[0]=this,ur(this,n1(this,e,u))}});var ru=Ys.prototype;ru[sF]=!0;ru[Ko]=!0;Zs(Xo,{get:function(e,u){return this.has(e)?e:u},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var Bo=Xo.prototype;Bo.has=yn.includes;Bo.contains=Bo.includes;Bo.keys=Bo.values;Zs(Za,vy);Zs(li,ru);Zs(Zo,Bo);function ME(t,e,u,s,n,r){return Wn(t.size),t.__iterate(function(a,o,l){n?(n=!1,u=a):u=e.call(s,u,a,o,l)},r),u}function uV(t,e){return e}function cV(t,e){return[e,t]}function Um(t){return function(){return!t.apply(this,arguments)}}function FE(t){return function(){return-t.apply(this,arguments)}}function qE(){return Qi(arguments)}function BE(t,e){return t<e?1:t>e?-1:0}function lV(t){if(t.size===1/0)return 0;var e=Xn(t),u=cr(t),s=e?1:0,n=t.__iterate(u?e?function(r,a){s=31*s+UE(Rn(r),Rn(a))|0}:function(r,a){s=s+UE(Rn(r),Rn(a))|0}:e?function(r){s=31*s+Rn(r)|0}:function(r){s=s+Rn(r)|0});return dV(n,s)}function dV(t,e){return e=yu(e,3432918353),e=yu(e<<15|e>>>-15,461845907),e=yu(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=yu(e^e>>>16,2246822507),e=yu(e^e>>>13,3266489909),e=Pb(e^e>>>16),e}function UE(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var Js=function(t){function e(u){return u==null?p3():Mb(u)?u:p3().withMutations(function(s){var n=Xo(u);Wn(n.size),n.forEach(function(r){return s.add(r)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(s){return this(ci(s).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(tu);Js.isOrderedSet=Mb;var eo=Js.prototype;eo[Ko]=!0;eo.zip=ru.zip;eo.zipWith=ru.zipWith;eo.zipAll=ru.zipAll;eo.__empty=p3;eo.__make=HF;function HF(t,e){var u=Object.create(eo);return u.size=t?t.size:0,u._map=t,u.__ownerID=e,u}var QE;function p3(){return QE||(QE=HF(A0()))}var $F={LeftThenRight:-1,RightThenLeft:1};function fV(t){if(Ya(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(Yn(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(t===null||typeof t!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var Ur=function(e,u){var s;fV(e);var n=function(o){var l=this;if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!s){s=!0;var c=Object.keys(e),d=r._indices={};r._name=u,r._keys=c,r._defaultValues=e;for(var h=0;h<c.length;h++){var f=c[h];d[f]=h,r[f]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+qT(this)+' with property "'+f+'" since that property name is part of the Record API.'):hV(r,f)}}return this.__ownerID=void 0,this._values=eu().withMutations(function(p){p.setSize(l._keys.length),ci(o).forEach(function(y,b){p.set(l._indices[b],y===l._defaultValues[b]?void 0:y)})}),this},r=n.prototype=Object.create(dr);return r.constructor=n,u&&(n.displayName=u),n};Ur.prototype.toString=function(){for(var e=qT(this)+" { ",u=this._keys,s,n=0,r=u.length;n!==r;n++)s=u[n],e+=(n?", ":"")+s+": "+J0(this.get(s));return e+" }"};Ur.prototype.equals=function(e){return this===e||Ya(e)&&Uo(this).equals(Uo(e))};Ur.prototype.hashCode=function(){return Uo(this).hashCode()};Ur.prototype.has=function(e){return this._indices.hasOwnProperty(e)};Ur.prototype.get=function(e,u){if(!this.has(e))return u;var s=this._indices[e],n=this._values.get(s);return n===void 0?this._defaultValues[e]:n};Ur.prototype.set=function(e,u){if(this.has(e)){var s=this._values.set(this._indices[e],u===this._defaultValues[e]?void 0:u);if(s!==this._values&&!this.__ownerID)return FT(this,s)}return this};Ur.prototype.remove=function(e){return this.set(e)};Ur.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:FT(this,e)};Ur.prototype.wasAltered=function(){return this._values.wasAltered()};Ur.prototype.toSeq=function(){return Uo(this)};Ur.prototype.toJS=function(){return ob(this)};Ur.prototype.entries=function(){return this.__iterator(oi)};Ur.prototype.__iterator=function(e,u){return Uo(this).__iterator(e,u)};Ur.prototype.__iterate=function(e,u){return Uo(this).__iterate(e,u)};Ur.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var u=this._values.__ensureOwner(e);return e?FT(this,u,e):(this.__ownerID=e,this._values=u,this)};Ur.isRecord=Ya;Ur.getDescriptiveName=qT;var dr=Ur.prototype;dr[uF]=!0;dr[oy]=dr.remove;dr.deleteIn=dr.removeIn=AT;dr.getIn=UF;dr.hasIn=yn.hasIn;dr.merge=AF;dr.mergeWith=EF;dr.mergeIn=RT;dr.mergeDeep=DF;dr.mergeDeepWith=NF;dr.mergeDeepIn=xT;dr.setIn=ST;dr.update=ET;dr.updateIn=OT;dr.withMutations=yy;dr.asMutable=by;dr.asImmutable=my;dr[Rb]=dr.entries;dr.toJSON=dr.toObject=yn.toObject;dr.inspect=dr.toSource=function(){return this.toString()};function FT(t,e,u){var s=Object.create(Object.getPrototypeOf(t));return s._values=e,s.__ownerID=u,s}function qT(t){return t.constructor.displayName||t.constructor.name||"Record"}function Uo(t){return dT(t._keys.map(function(e){return[e,t.get(e)]}))}function hV(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(u){mT(this.__ownerID,"Cannot set on an immutable record."),this.set(e,u)}})}catch{}}var VF=function(t){function e(u,s){if(!(this instanceof e))return new e(u,s);if(this._value=u,this.size=s===void 0?1/0:Math.max(0,s),this.size===0){if(Qm)return Qm;Qm=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(s,n){return this.has(s)?this._value:n},e.prototype.includes=function(s){return kr(this._value,s)},e.prototype.slice=function(s,n){var r=this.size;return uy(s,n,r)?this:new e(this._value,cy(n,r)-Wo(s,r))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(s){return kr(this._value,s)?0:-1},e.prototype.lastIndexOf=function(s){return kr(this._value,s)?this.size:-1},e.prototype.__iterate=function(s,n){for(var r=this.size,a=0;a!==r&&s(this._value,n?r-++a:a++,this)!==!1;);return a},e.prototype.__iterator=function(s,n){var r=this,a=this.size,o=0;return new kt(function(){return o===a?Pn():gr(s,n?a-++o:o++,r._value)})},e.prototype.equals=function(s){return s instanceof e?kr(this._value,s._value):jT(this,s)},e}(li),Qm;function kF(t,e){return zF([],e||pV,t,"",e&&e.length>2?[]:void 0,{"":t})}function zF(t,e,u,s,n,r){if(typeof u!="string"&&!Yn(u)&&(uT(u)||oT(u)||Nb(u))){if(~t.indexOf(u))throw new TypeError("Cannot convert circular structure to Immutable");t.push(u),n&&s!==""&&n.push(s);var a=e.call(r,s,pn(u).map(function(o,l){return zF(t,e,o,l,n,u)}),n&&n.slice());return t.pop(),n&&n.pop(),a}return u}function pV(t,e){return an(e)?e.toList():cr(e)?e.toMap():e.toSet()}var GF="4.3.7",yV={version:GF,Collection:mr,Iterable:mr,Seq:pn,Map:ts,OrderedMap:Oi,List:eu,Stack:gy,Set:tu,OrderedSet:Js,PairSorting:$F,Record:Ur,Range:LT,Repeat:VF,is:kr,fromJS:kF,hash:Rn,isImmutable:Yn,isCollection:hn,isKeyed:cr,isIndexed:an,isAssociative:Jo,isOrdered:Xn,isValueObject:ab,isPlainObject:Nb,isSeq:ly,isList:Lb,isMap:fy,isOrderedMap:Ib,isStack:ey,isSet:_y,isOrderedSet:Mb,isRecord:Ya,get:Cb,getIn:Fb,has:gT,hasIn:MT,merge:RF,mergeDeep:IF,mergeWith:xF,mergeDeepWith:PF,remove:_T,removeIn:TT,set:vT,setIn:wT,update:jb,updateIn:es},bV=mr;const mV=Object.freeze(Object.defineProperty({__proto__:null,Collection:mr,Iterable:bV,List:eu,Map:ts,OrderedMap:Oi,OrderedSet:Js,PairSorting:$F,Range:LT,Record:Ur,Repeat:VF,Seq:pn,Set:tu,Stack:gy,default:yV,fromJS:kF,get:Cb,getIn:Fb,has:gT,hasIn:MT,hash:Rn,is:kr,isAssociative:Jo,isCollection:hn,isImmutable:Yn,isIndexed:an,isKeyed:cr,isList:Lb,isMap:fy,isOrdered:Xn,isOrderedMap:Ib,isOrderedSet:Mb,isPlainObject:Nb,isRecord:Ya,isSeq:ly,isSet:_y,isStack:ey,isValueObject:ab,merge:RF,mergeDeep:IF,mergeDeepWith:PF,mergeWith:xF,remove:_T,removeIn:TT,set:vT,setIn:wT,update:jb,updateIn:es,version:GF},Symbol.toStringTag,{value:"Module"})),BT=iT(mV);Object.defineProperty(Gs,"__esModule",{value:!0});Gs.ActionContextKey=Gs.ActionContext=void 0;const HE=BT;class Ao{constructor(e={}){this.map=(0,HE.Map)(e)}setDefault(e,u){return this.has(e)?this:this.set(e,u)}set(e,u){return this.setRaw(e.name,u)}setRaw(e,u){return new Ao(this.map.set(e,u))}delete(e){return new Ao(this.map.delete(e.name))}get(e){return this.getRaw(e.name)}getRaw(e){return this.map.get(e)}getSafe(e){if(!this.has(e))throw new Error(`Context entry ${e.name} is required but not available`);return this.get(e)}has(e){return this.hasRaw(e.name)}hasRaw(e){return this.map.has(e)}merge(...e){let u=this;for(const s of e)for(const n of s.keys())u=u.set(n,s.get(n));return u}keys(){return[...this.map.keys()].map(e=>new WF(e))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(e){return e instanceof Ao?e:new Ao((0,HE.Map)(e??{}))}}Gs.ActionContext=Ao;class WF{constructor(e){this.name=e}}Gs.ActionContextKey=WF;var wy={};Object.defineProperty(wy,"__esModule",{value:!0});wy.Bus=void 0;class gV{constructor(e){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,e)}subscribe(e){this.actors.push(e),this.reorderForDependencies()}subscribeObserver(e){this.observers.push(e)}unsubscribe(e){const u=this.actors.indexOf(e);return u>=0?(this.actors.splice(u,1),!0):!1}unsubscribeObserver(e){const u=this.observers.indexOf(e);return u>=0?(this.observers.splice(u,1),!0):!1}publish(e){return this.actors.map(u=>({actor:u,reply:u.test(e)}))}onRun(e,u,s){for(const n of this.observers)n.onRun(e,u,s)}addDependencies(e,u){for(const s of u){let n=this.dependencyLinks.get(s);n||(n=[],this.dependencyLinks.set(s,n)),n.push(e)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const e=[];for(const u of this.dependencyLinks.keys()){const s=this.actors.indexOf(u);s>=0&&(this.actors.splice(s,1),e.push(u))}for(;e.length>0;){let u=-1;for(let n=0;n<e.length;n++){let r=!0;for(const a of this.dependencyLinks.get(e[n]))if(!this.actors.includes(a)&&e.includes(a)){r=!1;break}if(r){u=n;break}}if(u<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const s=e.splice(u,1)[0];this.actors.push(s)}}}}wy.Bus=gV;var qb={};Object.defineProperty(qb,"__esModule",{value:!0});qb.BusIndexed=void 0;const _V=wy;class vV extends _V.Bus{constructor(e){super(e),this.actorsIndex={}}subscribe(e){const u=this.getActorIdentifier(e)||"_undefined_";let s=this.actorsIndex[u];s||(s=this.actorsIndex[u]=[]),s.push(e),super.subscribe(e)}unsubscribe(e){const u=this.getActorIdentifier(e)||"_undefined_",s=this.actorsIndex[u];if(s){const n=s.indexOf(e);n>=0&&s.splice(n,1),s.length===0&&delete this.actorsIndex[u]}return super.unsubscribe(e)}publish(e){const u=this.getActionIdentifier(e);return u?[...this.actorsIndex[u]||[],...this.actorsIndex._undefined_||[]].map(n=>({actor:n,reply:n.test(e)})):super.publish(e)}getActorIdentifier(e){return this.actorIdentifierFields.reduce((u,s)=>u[s],e)}getActionIdentifier(e){return this.actionIdentifierFields.reduce((u,s)=>u[s],e)}}qb.BusIndexed=vV;var Sy={};Object.defineProperty(Sy,"__esModule",{value:!0});Sy.CONTEXT_KEY_LOGGER=void 0;const wV=Gs;Sy.CONTEXT_KEY_LOGGER=new wV.ActionContextKey("@comunica/core:log");var Bb={};Object.defineProperty(Bb,"__esModule",{value:!0});Bb.ActionObserver=void 0;class SV{constructor(e){Object.assign(this,e)}}Bb.ActionObserver=SV;var Ub={};Object.defineProperty(Ub,"__esModule",{value:!0});Ub.Actor=void 0;const TV=Sy;class qa{constructor(e){this.beforeActors=[],Object.assign(this,e),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors)}static getContextLogger(e){return e.get(TV.CONTEXT_KEY_LOGGER)}runObservable(e){const u=this.run(e);return this.bus.onRun(this,e,u),u}async initialize(){return!0}async deinitialize(){return!0}getDefaultLogData(e,u){const s=u?u():{};return s.actor=this.name,s}logTrace(e,u,s){const n=qa.getContextLogger(e);n&&n.trace(u,this.getDefaultLogData(e,s))}logDebug(e,u,s){const n=qa.getContextLogger(e);n&&n.debug(u,this.getDefaultLogData(e,s))}logInfo(e,u,s){const n=qa.getContextLogger(e);n&&n.info(u,this.getDefaultLogData(e,s))}logWarn(e,u,s){const n=qa.getContextLogger(e);n&&n.warn(u,this.getDefaultLogData(e,s))}logError(e,u,s){const n=qa.getContextLogger(e);n&&n.error(u,this.getDefaultLogData(e,s))}logFatal(e,u,s){const n=qa.getContextLogger(e);n&&n.fatal(u,this.getDefaultLogData(e,s))}}Ub.Actor=qa;var Qb={};Object.defineProperty(Qb,"__esModule",{value:!0});Qb.Mediator=void 0;class AV{constructor(e){Object.assign(this,e)}publish(e){const u=this.bus.publish(e);if(u.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return u}async mediateActor(e){return await this.mediateWith(e,this.publish(e))}async mediate(e){return(await this.mediateActor(e)).runObservable(e)}}Qb.Mediator=AV;(function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Gs,t),u(wy,t),u(qb,t),u(Sy,t),u(Bb,t),u(Ub,t),u(Qb,t)})(ot);Object.defineProperty(Ob,"__esModule",{value:!0});Ob.ActorInit=void 0;const EV=ot;class OV extends EV.Actor{constructor(e){super(e)}}Ob.ActorInit=OV;(function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Ob,t)})(eF);Object.defineProperty(sy,"__esModule",{value:!0});sy.ActorInitQueryBase=void 0;const RV=eF;class xV extends RV.ActorInit{async test(e){return!0}async run(e){throw new Error("ActorInitSparql#run is not supported in the browser.")}}sy.ActorInitQueryBase=xV;var Hb={},Hm={exports:{}},$E;function Ta(){if($E)return Hm.exports;$E=1;var t=Hm.exports={},e,u;function s(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=s}catch{e=s}try{typeof clearTimeout=="function"?u=clearTimeout:u=n}catch{u=n}})();function r(b){if(e===setTimeout)return setTimeout(b,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(b,0);try{return e(b,0)}catch{try{return e.call(null,b,0)}catch{return e.call(this,b,0)}}}function a(b){if(u===clearTimeout)return clearTimeout(b);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(b);try{return u(b)}catch{try{return u.call(null,b)}catch{return u.call(this,b)}}}var o=[],l=!1,c,d=-1;function h(){!l||!c||(l=!1,c.length?o=c.concat(o):d=-1,o.length&&f())}function f(){if(!l){var b=r(h);l=!0;for(var g=o.length;g;){for(c=o,o=[];++d<g;)c&&c[d].run();d=-1,g=o.length}c=null,l=!1,a(b)}}t.nextTick=function(b){var g=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)g[m-1]=arguments[m];o.push(new p(b,g)),o.length===1&&!l&&r(f)};function p(b,g){this.fun=b,this.array=g}p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function y(){}return t.on=y,t.addListener=y,t.once=y,t.off=y,t.removeListener=y,t.removeAllListeners=y,t.emit=y,t.prependListener=y,t.prependOnceListener=y,t.listeners=function(b){return[]},t.binding=function(b){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(b){throw new Error("process.chdir is not supported")},t.umask=function(){return 0},Hm.exports}Object.defineProperty(Hb,"__esModule",{value:!0});Hb.ActorInitQuery=void 0;const IV=sy;typeof process>"u"&&(globalThis.process=Ta());class PV extends IV.ActorInitQueryBase{}Hb.ActorInitQuery=PV;var $b={},Lt={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.KeysRdfJoin=tr.KeysMergeBindingsContext=tr.KeysRdfUpdateQuads=tr.KeysQuerySourceIdentify=tr.KeysRdfParseHtmlScript=tr.KeysRdfParseJsonLd=tr.KeysQueryOperation=tr.KeysInitQuery=tr.KeysHttpProxy=tr.KeysHttpMemento=tr.KeysHttpWayback=tr.KeysHttp=tr.KeysCore=void 0;const vt=ot;tr.KeysCore={log:vt.CONTEXT_KEY_LOGGER};tr.KeysHttp={includeCredentials:new vt.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new vt.ActionContextKey("@comunica/bus-http:auth"),fetch:new vt.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new vt.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new vt.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new vt.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelay:new vt.ActionContextKey("@comunica/bus-http:http-retry-delay"),httpRetryOnServerError:new vt.ActionContextKey("@comunica/bus-http:http-retry-on-server-error")};tr.KeysHttpWayback={recoverBrokenLinks:new vt.ActionContextKey("@comunica/bus-http:recover-broken-links")};tr.KeysHttpMemento={datetime:new vt.ActionContextKey("@comunica/actor-http-memento:datetime")};tr.KeysHttpProxy={httpProxyHandler:new vt.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")};tr.KeysInitQuery={querySourcesUnidentified:new vt.ActionContextKey("@comunica/actor-init-query:querySourcesUnidentified"),initialBindings:new vt.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new vt.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new vt.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new vt.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new vt.ActionContextKey("@comunica/actor-init-query:queryString"),query:new vt.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new vt.ActionContextKey("@comunica/actor-init-query:baseIRI"),functionArgumentsCache:new vt.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new vt.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),extensionFunctionCreator:new vt.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new vt.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),cliArgsHandlers:new vt.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new vt.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new vt.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new vt.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new vt.ActionContextKey("@context"),noCache:new vt.ActionContextKey("@comunica/actor-init-query:noCache"),distinctConstruct:new vt.ActionContextKey("@comunica/actor-init-query:distinctConstruct")};tr.KeysQueryOperation={operation:new vt.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new vt.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new vt.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new vt.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new vt.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new vt.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new vt.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new vt.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),querySources:new vt.ActionContextKey("@comunica/bus-query-operation:querySources")};tr.KeysRdfParseJsonLd={documentLoader:new vt.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new vt.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new vt.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")};tr.KeysRdfParseHtmlScript={processingHtmlScript:new vt.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new vt.ActionContextKey("extractAllScripts")};tr.KeysQuerySourceIdentify={sourceIds:new vt.ActionContextKey("@comunica/bus-query-source-identify:sourceIds"),hypermediaSourcesAggregatedStores:new vt.ActionContextKey("@comunica/bus-query-source-identify:hypermediaSourcesAggregatedStores"),traverse:new vt.ActionContextKey("@comunica/bus-query-source-identify:traverse")};tr.KeysRdfUpdateQuads={destination:new vt.ActionContextKey("@comunica/bus-rdf-update-quads:destination")};tr.KeysMergeBindingsContext={sourcesBinding:new vt.ActionContextKey("@comunica/bus-merge-bindings-context:sourcesBinding")};tr.KeysRdfJoin={lastPhysicalJoin:new vt.ActionContextKey("@comunica/bus-rdf-join:lastPhysicalJoin")};(function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(tr,t)})(Lt);Object.defineProperty($b,"__esModule",{value:!0});$b.QueryEngineBase=void 0;const DV=Lt,bu=ot;class ub{constructor(e){this.actorInitQuery=e}async queryBindings(e,u){return this.queryOfType(e,u,"bindings")}async queryQuads(e,u){return this.queryOfType(e,u,"quads")}async queryBoolean(e,u){return this.queryOfType(e,u,"boolean")}async queryVoid(e,u){return this.queryOfType(e,u,"void")}async queryOfType(e,u,s){const n=await this.query(e,u);if(n.resultType===s)return await n.execute();throw new Error(`Query result type '${s}' was expected, while '${n.resultType}' was found.`)}async query(e,u){const s=await this.queryOrExplain(e,u);if("explain"in s)throw new Error("Tried to explain a query when in query-only mode");return s}async explain(e,u,s){return u.explain=s,await this.queryOrExplain(e,u)}async queryOrExplain(e,u){const s=bu.ActionContext.ensureActionContext(u);s.get(DV.KeysInitQuery.noCache)&&await this.invalidateHttpCache();const{result:n}=await this.actorInitQuery.mediatorQueryProcess.mediate({query:e,context:s});return"explain"in n?n:ub.internalToFinalResult(n)}async getResultMediaTypes(e){return e=bu.ActionContext.ensureActionContext(e),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(e){return e=bu.ActionContext.ensureActionContext(e),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(e,u,s){if(s=bu.ActionContext.ensureActionContext(s),!u)switch(e.resultType){case"bindings":u="application/json";break;case"quads":u="application/trig";break;default:u="simple";break}const n={...await ub.finalToInternalResult(e),context:s};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:s,handle:n,handleMediaType:u})).handle}invalidateHttpCache(e,u){return u=bu.ActionContext.ensureActionContext(u),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:e,context:u})}static internalToFinalResult(e){switch(e.type){case"bindings":return{resultType:"bindings",execute:async()=>e.bindingsStream,metadata:async()=>await e.metadata(),context:e.context};case"quads":return{resultType:"quads",execute:async()=>e.quadStream,metadata:async()=>await e.metadata(),context:e.context};case"boolean":return{resultType:"boolean",execute:async()=>e.execute(),context:e.context};case"void":return{resultType:"void",execute:async()=>e.execute(),context:e.context}}}static async finalToInternalResult(e){switch(e.resultType){case"bindings":return{type:"bindings",bindingsStream:await e.execute(),metadata:async()=>await e.metadata()};case"quads":return{type:"quads",quadStream:await e.execute(),metadata:async()=>await e.metadata()};case"boolean":return{type:"boolean",execute:()=>e.execute()};case"void":return{type:"void",execute:()=>e.execute()}}}}$b.QueryEngineBase=ub;(function(t){var e=I&&I.__createBinding||(Object.create?function(n,r,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(r,a);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[a]}}),Object.defineProperty(n,o,l)}:function(n,r,a,o){o===void 0&&(o=a),n[o]=r[a]}),u=I&&I.__exportStar||function(n,r){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(r,a)&&e(r,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryEngineBase=void 0,u(sy,t),u(Hb,t);var s=$b;Object.defineProperty(t,"QueryEngineBase",{enumerable:!0,get:function(){return s.QueryEngineBase}})})(aT);var $m={},mu={},Vm={},km={},VE;function NV(){return VE||(VE=1,Object.defineProperty(km,"__esModule",{value:!0})),km}var zm={},kE;function CV(){return kE||(kE=1,Object.defineProperty(zm,"__esModule",{value:!0})),zm}var Gm={},zE;function jV(){return zE||(zE=1,Object.defineProperty(Gm,"__esModule",{value:!0})),Gm}var Wm={},GE;function LV(){return GE||(GE=1,Object.defineProperty(Wm,"__esModule",{value:!0})),Wm}var Jm={},WE;function MV(){return WE||(WE=1,Object.defineProperty(Jm,"__esModule",{value:!0})),Jm}var Xm={},JE;function FV(){return JE||(JE=1,Object.defineProperty(Xm,"__esModule",{value:!0})),Xm}var Km={},XE;function qV(){return XE||(XE=1,Object.defineProperty(Km,"__esModule",{value:!0})),Km}var Ym={},KE;function BV(){return KE||(KE=1,Object.defineProperty(Ym,"__esModule",{value:!0})),Ym}var Zm={},YE;function UV(){return YE||(YE=1,Object.defineProperty(Zm,"__esModule",{value:!0})),Zm}var eg={},ZE;function QV(){return ZE||(ZE=1,Object.defineProperty(eg,"__esModule",{value:!0})),eg}var tg={},eO;function HV(){return eO||(eO=1,Object.defineProperty(tg,"__esModule",{value:!0})),tg}var rg={},tO;function $V(){return tO||(tO=1,Object.defineProperty(rg,"__esModule",{value:!0})),rg}var ng={},rO;function VV(){return rO||(rO=1,Object.defineProperty(ng,"__esModule",{value:!0})),ng}var gu={},nO;function kV(){if(nO)return gu;nO=1,Object.defineProperty(gu,"__esModule",{value:!0}),gu.Logger=void 0;let t=class JF{static getLevelOrdinal(u){return JF.LEVELS[u]}};return gu.Logger=t,t.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},gu}var iO;function zV(){return iO||(iO=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(NV(),t),u(CV(),t),u(jV(),t),u(LV(),t),u(MV(),t),u(FV(),t),u(qV(),t),u(BV(),t),u(UV(),t),u(QV(),t),u(HV(),t),u($V(),t),u(VV(),t),u(kV(),t)}(Vm)),Vm}var aO;function GV(){if(aO)return mu;aO=1,Object.defineProperty(mu,"__esModule",{value:!0}),mu.LoggerVoid=void 0;const t=zV();let e=class extends t.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}};return mu.LoggerVoid=e,mu}var sO;function WV(){return sO||(sO=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(GV(),t)}($m)),$m}var ig={},_u={},ag={},vu={},oO;function JV(){if(oO)return vu;oO=1,Object.defineProperty(vu,"__esModule",{value:!0}),vu.BlankNodeScoped=void 0;let t=class{constructor(u,s){this.termType="BlankNode",this.value=u,this.skolemized=s}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}};return vu.BlankNodeScoped=t,vu}var wu={},uO;function XV(){if(uO)return wu;uO=1,Object.defineProperty(wu,"__esModule",{value:!0}),wu.BlankNodeBindingsScoped=void 0;let t=class{constructor(u){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}};return wu.BlankNodeBindingsScoped=t,wu}var cO;function UT(){return cO||(cO=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(JV(),t),u(XV(),t)}(ag)),ag}var gs={},sg={},Su={},lO;function XF(){if(lO)return Su;lO=1,Object.defineProperty(Su,"__esModule",{value:!0}),Su.BlankNode=void 0;class t{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return Su.BlankNode=t,Su}var Tu={},Au={},dO;function KF(){if(dO)return Au;dO=1,Object.defineProperty(Au,"__esModule",{value:!0}),Au.DefaultGraph=void 0;class t{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return Au.DefaultGraph=t,t.INSTANCE=new t,Au}var Eu={},Ou={},fO;function QT(){if(fO)return Ou;fO=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.NamedNode=void 0;class t{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return Ou.NamedNode=t,Ou}var hO;function YF(){if(hO)return Eu;hO=1,Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.Literal=void 0;const t=QT();class e{constructor(s,n){this.termType="Literal",this.value=s,typeof n=="string"?(this.language=n,this.datatype=e.RDF_LANGUAGE_STRING):n?(this.language="",this.datatype=n):(this.language="",this.datatype=e.XSD_STRING)}equals(s){return!!s&&s.termType==="Literal"&&s.value===this.value&&s.language===this.language&&this.datatype.equals(s.datatype)}}return Eu.Literal=e,e.RDF_LANGUAGE_STRING=new t.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),e.XSD_STRING=new t.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Eu}var Ru={},pO;function ZF(){if(pO)return Ru;pO=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.Quad=void 0;class t{constructor(u,s,n,r){this.termType="Quad",this.value="",this.subject=u,this.predicate=s,this.object=n,this.graph=r}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return Ru.Quad=t,Ru}var xu={},yO;function eq(){if(yO)return xu;yO=1,Object.defineProperty(xu,"__esModule",{value:!0}),xu.Variable=void 0;class t{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return xu.Variable=t,xu}var bO;function KV(){if(bO)return Tu;bO=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.DataFactory=void 0;const t=XF(),e=KF(),u=YF(),s=QT(),n=ZF(),r=eq();let a=0;class o{constructor(c){this.blankNodeCounter=0,c=c||{},this.blankNodePrefix=c.blankNodePrefix||`df_${a++}_`}namedNode(c){return new s.NamedNode(c)}blankNode(c){return new t.BlankNode(c||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(c,d){return new u.Literal(c,d)}variable(c){return new r.Variable(c)}defaultGraph(){return e.DefaultGraph.INSTANCE}quad(c,d,h,f){return new n.Quad(c,d,h,f||this.defaultGraph())}fromTerm(c){switch(c.termType){case"NamedNode":return this.namedNode(c.value);case"BlankNode":return this.blankNode(c.value);case"Literal":return c.language?this.literal(c.value,c.language):c.datatype.equals(u.Literal.XSD_STRING)?this.literal(c.value):this.literal(c.value,this.fromTerm(c.datatype));case"Variable":return this.variable(c.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(c.subject),this.fromTerm(c.predicate),this.fromTerm(c.object),this.fromTerm(c.graph))}}fromQuad(c){return this.fromTerm(c)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Tu.DataFactory=o,Tu}var mO;function Et(){return mO||(mO=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r),Object.defineProperty(s,a,{enumerable:!0,get:function(){return n[r]}})}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(XF(),t),u(KV(),t),u(KF(),t),u(YF(),t),u(QT(),t),u(ZF(),t),u(eq(),t)}(sg)),sg}var og={},en={},gO;function YV(){if(gO)return en;gO=1,Object.defineProperty(en,"__esModule",{value:!0}),en.stringQuadToQuad=en.quadToStringQuad=en.stringToTerm=en.getLiteralLanguage=en.getLiteralType=en.getLiteralValue=en.termToString=void 0;const t=Et(),e=new t.DataFactory;function u(c){if(c)switch(c.termType){case"NamedNode":return c.value;case"BlankNode":return"_:"+c.value;case"Literal":const d=c;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"");case"Quad":return`<<${u(c.subject)} ${u(c.predicate)} ${u(c.object)}${c.graph.termType==="DefaultGraph"?"":" "+u(c.graph)}>>`;case"Variable":return"?"+c.value;case"DefaultGraph":return c.value}}en.termToString=u;function s(c){const d=/^"([^]*)"/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]}en.getLiteralValue=s;function n(c){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}en.getLiteralType=n;function r(c){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]?d[1].toLowerCase():""}en.getLiteralLanguage=r;function a(c,d){if(d=d||e,!c||!c.length)return d.defaultGraph();switch(c[0]){case"_":return d.blankNode(c.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(c.substr(1));case'"':const h=r(c),f=d.namedNode(n(c));return d.literal(s(c),h||f);case"<":default:if(c[0]==="<"&&c.length>4&&c[1]==="<"&&c[c.length-1]===">"&&c[c.length-2]===">"){const p=c.slice(2,-2).trim();let y=[],b=0,g=0,m=!1;for(let v=0;v<p.length;v++){const _=p[v];if(_==="<"&&b++,_===">"){if(b===0)throw new Error("Found closing tag without opening tag in "+c);b--}if(_==='"'){let w=!1,S=v;for(;S-- >0&&p[S]==="\\";)w=!w;w||(m=!m)}if(_===" "&&!m&&b===0){for(y.push(p.slice(g,v));p[v+1]===" ";)v+=1;g=v+1}}if(b!==0)throw new Error("Found opening tag without closing tag in "+c);if(y.push(p.slice(g,p.length)),y.length!==3&&y.length!==4)throw new Error("Nested quad syntax error "+c);return y=y.map(v=>v.startsWith("<")&&!v.includes(" ")?v.slice(1,-1):v),d.quad(a(y[0]),a(y[1]),a(y[2]),y[3]?a(y[3]):void 0)}return d.namedNode(c)}}en.stringToTerm=a;function o(c){return{subject:u(c.subject),predicate:u(c.predicate),object:u(c.object),graph:u(c.graph)}}en.quadToStringQuad=o;function l(c,d){return d=d||e,d.quad(a(c.subject,d),a(c.predicate,d),a(c.object,d),a(c.graph,d))}return en.stringQuadToQuad=l,en}var _O;function Xt(){return _O||(_O=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.termToString=t.stringToTerm=t.stringQuadToQuad=t.quadToStringQuad=t.getLiteralValue=t.getLiteralType=t.getLiteralLanguage=void 0;const e=YV();Object.defineProperty(t,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(t,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(t,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(t,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(t,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(t,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(t,"termToString",{enumerable:!0,get:function(){return e.termToString}})}(og)),og}var ug={},bt={},vO;function tq(){if(vO)return bt;vO=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.matchPatternMappings=bt.matchPatternComplete=bt.matchPattern=bt.matchTerm=bt.getValueNestedPath=bt.someTermsNested=bt.someTerms=bt.everyTermsNested=bt.everyTerms=bt.reduceTermsNested=bt.reduceTerms=bt.mapTermsNested=bt.mapTerms=bt.filterQuadTermNamesNested=bt.filterQuadTermNames=bt.filterTermsNested=bt.filterTerms=bt.forEachTermsNested=bt.forEachTerms=bt.collectNamedTerms=bt.getNamedTerms=bt.getTermsNested=bt.getTerms=bt.TRIPLE_TERM_NAMES=bt.QUAD_TERM_NAMES=void 0;const t=Et(),e=new t.DataFactory;bt.QUAD_TERM_NAMES=["subject","predicate","object","graph"],bt.TRIPLE_TERM_NAMES=["subject","predicate","object"];function u(O,E){return E&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}bt.getTerms=u;function s(O,E){const P=[];for(const M of u(O,E))M.termType==="Quad"?s(M,E).forEach(U=>P.push(U)):P.push(M);return P}bt.getTermsNested=s;function n(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}bt.getNamedTerms=n;function r(O,E,P){const M={};return O.forEach(U=>M[U.key]=U.value),E&&(M.subject=M.subject||E("subject"),M.predicate=M.predicate||E("predicate"),M.object=M.object||E("object"),M.graph=M.graph||E("graph")),(P||e).quad(M.subject,M.predicate,M.object,M.graph)}bt.collectNamedTerms=r;function a(O,E){E(O.subject,"subject"),E(O.predicate,"predicate"),E(O.object,"object"),E(O.graph,"graph")}bt.forEachTerms=a;function o(O,E,P=[]){O.subject.termType==="Quad"?o(O.subject,E,[...P,"subject"]):E(O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?o(O.predicate,E,[...P,"predicate"]):E(O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?o(O.object,E,[...P,"object"]):E(O.object,[...P,"object"]),O.graph.termType==="Quad"?o(O.graph,E,[...P,"graph"]):E(O.graph,[...P,"graph"])}bt.forEachTermsNested=o;function l(O,E){const P=[];return E(O.subject,"subject")&&P.push(O.subject),E(O.predicate,"predicate")&&P.push(O.predicate),E(O.object,"object")&&P.push(O.object),E(O.graph,"graph")&&P.push(O.graph),P}bt.filterTerms=l;function c(O,E,P=[]){let M=[];return O.subject.termType==="Quad"?M=[...M,...c(O.subject,E,[...P,"subject"])]:E(O.subject,[...P,"subject"])&&M.push(O.subject),O.predicate.termType==="Quad"?M=[...M,...c(O.predicate,E,[...P,"predicate"])]:E(O.predicate,[...P,"predicate"])&&M.push(O.predicate),O.object.termType==="Quad"?M=[...M,...c(O.object,E,[...P,"object"])]:E(O.object,[...P,"object"])&&M.push(O.object),O.graph.termType==="Quad"?M=[...M,...c(O.graph,E,[...P,"graph"])]:E(O.graph,[...P,"graph"])&&M.push(O.graph),M}bt.filterTermsNested=c;function d(O,E){const P=[];return E(O.subject,"subject")&&P.push("subject"),E(O.predicate,"predicate")&&P.push("predicate"),E(O.object,"object")&&P.push("object"),E(O.graph,"graph")&&P.push("graph"),P}bt.filterQuadTermNames=d;function h(O,E,P=[]){let M=[];const U=[...P,"subject"];O.subject.termType==="Quad"?M=[...M,...h(O.subject,E,U)]:E(O.subject,U)&&M.push(U);const j=[...P,"predicate"];O.predicate.termType==="Quad"?M=[...M,...h(O.predicate,E,j)]:E(O.predicate,j)&&M.push(j);const q=[...P,"object"];O.object.termType==="Quad"?M=[...M,...h(O.object,E,q)]:E(O.object,q)&&M.push(q);const $=[...P,"graph"];return O.graph.termType==="Quad"?M=[...M,...h(O.graph,E,$)]:E(O.graph,$)&&M.push($),M}bt.filterQuadTermNamesNested=h;function f(O,E,P){return(P||e).quad(E(O.subject,"subject"),E(O.predicate,"predicate"),E(O.object,"object"),E(O.graph,"graph"))}bt.mapTerms=f;function p(O,E,P,M=[]){return(P||e).quad(O.subject.termType==="Quad"?p(O.subject,E,P,[...M,"subject"]):E(O.subject,[...M,"subject"]),O.predicate.termType==="Quad"?p(O.predicate,E,P,[...M,"predicate"]):E(O.predicate,[...M,"predicate"]),O.object.termType==="Quad"?p(O.object,E,P,[...M,"object"]):E(O.object,[...M,"object"]),O.graph.termType==="Quad"?p(O.graph,E,P,[...M,"graph"]):E(O.graph,[...M,"graph"]))}bt.mapTermsNested=p;function y(O,E,P){let M=P;return M=E(M,O.subject,"subject"),M=E(M,O.predicate,"predicate"),M=E(M,O.object,"object"),E(M,O.graph,"graph")}bt.reduceTerms=y;function b(O,E,P,M=[]){let U=P;return O.subject.termType==="Quad"?U=b(O.subject,E,U,[...M,"subject"]):U=E(U,O.subject,[...M,"subject"]),O.predicate.termType==="Quad"?U=b(O.predicate,E,U,[...M,"predicate"]):U=E(U,O.predicate,[...M,"predicate"]),O.object.termType==="Quad"?U=b(O.object,E,U,[...M,"object"]):U=E(U,O.object,[...M,"object"]),O.graph.termType==="Quad"?U=b(O.graph,E,U,[...M,"graph"]):U=E(U,O.graph,[...M,"graph"]),U}bt.reduceTermsNested=b;function g(O,E){return E(O.subject,"subject")&&E(O.predicate,"predicate")&&E(O.object,"object")&&E(O.graph,"graph")}bt.everyTerms=g;function m(O,E,P=[]){return(O.subject.termType==="Quad"?m(O.subject,E,[...P,"subject"]):E(O.subject,[...P,"subject"]))&&(O.predicate.termType==="Quad"?m(O.predicate,E,[...P,"predicate"]):E(O.predicate,[...P,"predicate"]))&&(O.object.termType==="Quad"?m(O.object,E,[...P,"object"]):E(O.object,[...P,"object"]))&&(O.graph.termType==="Quad"?m(O.graph,E,[...P,"graph"]):E(O.graph,[...P,"graph"]))}bt.everyTermsNested=m;function v(O,E){return E(O.subject,"subject")||E(O.predicate,"predicate")||E(O.object,"object")||E(O.graph,"graph")}bt.someTerms=v;function _(O,E,P=[]){return(O.subject.termType==="Quad"?_(O.subject,E,[...P,"subject"]):E(O.subject,[...P,"subject"]))||(O.predicate.termType==="Quad"?_(O.predicate,E,[...P,"predicate"]):E(O.predicate,[...P,"predicate"]))||(O.object.termType==="Quad"?_(O.object,E,[...P,"object"]):E(O.object,[...P,"object"]))||(O.graph.termType==="Quad"?_(O.graph,E,[...P,"graph"]):E(O.graph,[...P,"graph"]))}bt.someTermsNested=_;function w(O,E){if(E.length===0)return O;if(O.termType==="Quad")return w(O[E[0]],E.slice(1));throw new Error(`Tried to get ${E[0]} from term of type ${O.termType}`)}bt.getValueNestedPath=w;function S(O,E){return!E||E.termType==="Variable"||E.termType==="Quad"&&O.termType==="Quad"&&D(O,E)||E.equals(O)}bt.matchTerm=S;function A(O,E,P,M,U){return S(O.subject,E)&&S(O.predicate,P)&&S(O.object,M)&&S(O.graph,U)}bt.matchPattern=A;function D(O,E){return A(O,E.subject,E.predicate,E.object,E.graph)}bt.matchPatternComplete=D;function L(O,E,P={}){const M={};function U(j,q){return g(j,($,Z)=>{var X,le;const K=q[Z];switch($.termType){case"Variable":return P.skipVarMapping&&K.termType==="Variable"||((le=(X=M[$.value])===null||X===void 0?void 0:X.equals(K))!==null&&le!==void 0?le:(M[$.value]=K,!0));case"Quad":return K.termType==="Quad"&&U($,K);default:return $.equals(K)}})}return U(E,O)&&(P.returnMappings?M:!0)}return bt.matchPatternMappings=L,bt}var Cr={},wO;function ZV(){if(wO)return Cr;wO=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.getQuads=Cr.getDefaultGraphs=Cr.getVariables=Cr.getLiterals=Cr.getBlankNodes=Cr.getNamedNodes=Cr.getTermsOfType=Cr.uniqTerms=Cr.TERM_TYPES=void 0;const t=Xt();Cr.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function e(c){const d={};return c.filter(h=>{const f=(0,t.termToString)(h);return!(f in d)&&(d[f]=!0)})}Cr.uniqTerms=e;function u(c,d){return c.filter(h=>h.termType===d)}Cr.getTermsOfType=u;function s(c){return u(c,"NamedNode")}Cr.getNamedNodes=s;function n(c){return u(c,"BlankNode")}Cr.getBlankNodes=n;function r(c){return u(c,"Literal")}Cr.getLiterals=r;function a(c){return u(c,"Variable")}Cr.getVariables=a;function o(c){return u(c,"DefaultGraph")}Cr.getDefaultGraphs=o;function l(c){return u(c,"Quad")}return Cr.getQuads=l,Cr}var SO;function un(){return SO||(SO=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(tq(),t),u(ZV(),t)}(ug)),ug}var cg={},s1={},lg,TO;function ek(){return TO||(TO=1,lg=function t(e,u){if(e===u)return!0;if(e&&u&&typeof e=="object"&&typeof u=="object"){if(e.constructor!==u.constructor)return!1;var s,n,r;if(Array.isArray(e)){if(s=e.length,s!=u.length)return!1;for(n=s;n--!==0;)if(!t(e[n],u[n]))return!1;return!0}if(e instanceof Map&&u instanceof Map){if(e.size!==u.size)return!1;for(n of e.entries())if(!u.has(n[0]))return!1;for(n of e.entries())if(!t(n[1],u.get(n[0])))return!1;return!0}if(e instanceof Set&&u instanceof Set){if(e.size!==u.size)return!1;for(n of e.entries())if(!u.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(u)){if(s=e.length,s!=u.length)return!1;for(n=s;n--!==0;)if(e[n]!==u[n])return!1;return!0}if(e.constructor===RegExp)return e.source===u.source&&e.flags===u.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===u.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===u.toString();if(r=Object.keys(e),s=r.length,s!==Object.keys(u).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(u,r[n]))return!1;for(n=s;n--!==0;){var a=r[n];if(!t(e[a],u[a]))return!1}return!0}return e!==e&&u!==u}),lg}var dg={},AO;function Ty(){return AO||(AO=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.expressionTypes=t.types=void 0,function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"}(t.types||(t.types={})),function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"}(t.expressionTypes||(t.expressionTypes={}))}(dg)),dg}var o1={},fg={},EO;function rq(){if(EO)return fg;EO=1;let t=class{constructor(){return e||this}equals(s){return s&&this.termType===s.termType}};Object.defineProperty(t.prototype,"value",{enumerable:!0,value:"*"}),Object.defineProperty(t.prototype,"termType",{enumerable:!0,value:"Wildcard"});var e=new t;return fg.Wildcard=t,fg}var hg,OO;function tk(){if(OO)return hg;OO=1;var t=function(){var e=function(Qe,Be,ze,Ze){for(ze=ze||{},Ze=Qe.length;Ze--;ze[Qe[Ze]]=Be);return ze},u=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],s=[2,247],n=[100,110,113,115,116,123,126,131,329,330,331,332,333],r=[2,409],a=[1,18],o=[1,27],l=[13,16,45,197,224,229,308],c=[28,29,53],d=[28,53],h=[1,42],f=[1,45],p=[1,41],y=[1,44],b=[123,126],g=[1,67],m=[39,45,87],v=[13,16,45,197,224,308],_=[1,87],w=[2,281],S=[1,86],A=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],D=[6,28,29,53,63,70,73,81,83,85],L=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],O=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],E=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],P=[13,16,308],M=[112,132,327,334],U=[13,16,112,132,308],j=[1,111],q=[1,117],$=[112,132,327,328,334],Z=[13,16,112,132,308,328],X=[28,29,45,53,87],le=[1,138],K=[1,151],he=[1,128],Re=[1,127],ie=[1,129],ae=[1,140],Ee=[1,141],De=[1,142],ge=[1,143],de=[1,144],fe=[1,145],H=[1,147],N=[1,148],R=[2,457],T=[1,158],x=[1,159],B=[1,160],k=[1,152],V=[1,153],J=[1,156],z=[1,171],Y=[1,172],re=[1,173],ce=[1,174],Te=[1,175],xe=[1,176],Le=[1,167],qe=[1,168],G=[1,169],F=[1,170],Q=[1,157],te=[1,166],me=[1,161],Oe=[1,162],Ne=[1,163],We=[1,164],Ve=[1,165],pe=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],we=[1,195],W=[6,31,73,81,83,85],Se=[2,285],Ae=[1,199],je=[1,201],He=[6,31,70,73,81,83,85],Ge=[2,283],tt=[1,207],lt=[1,218],ut=[1,223],oe=[1,219],C=[1,225],ee=[1,226],ye=[1,224],Pe=[6,63,70,73,81,83,85],Ue=[1,236],Fe=[2,334],Ye=[1,243],$e=[1,241],Je=[6,193],nt=[2,349],yt=[2,339],ft=[28,128],et=[47,48,193,272],Ir=[47,48,193,242,272],Ke=[47,48,193,242,246,272],be=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],Ie=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],Me=[1,271],it=[1,270],at=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],Tt=[1,281],Vt=[1,280],rr=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],fi=[45,89],bn=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],or=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Ln=[31,89],Qr=[48,87],Qn=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],Pr=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],hi=[1,313],Mr=[6,85],Ni=[6,31,81,83,85],Zi=[2,361],mn=[2,353],Xr=[1,343],ls=[31,112,335],Zn=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],ue=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],ve=[6,109,193],Ce=[31,112],Xe=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],st=[1,390],ht=[1,391],St=[13,16,87,197,308,314],Qt=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],Kt=[1,417],lr=[1,418],vr=[13,16,48,197,229,308],zt=[6,31,85],Mn=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],ei=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],Fr=[29,31,85,112,159,160,161,163,164],gn=[1,443],Hn=[1,444],$n=[1,449],ti=[31,112,193,232,318,335],ea=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],io=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Yt=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],zr=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],ri=[31,45],Ea=[1,507],My=[1,508],_A=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],Fy=[29,31,85,112,159,160,161,163,164,335],ds=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],vA=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],wA=[2,352],fm=[13,16,197,308,314],SA=[1,565],ao=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],TA=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],ta=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],AA=[13,16,87,308],ra=[2,364],so=[29,31,85,112,159,160,161,163,164,193,232,318,335],qy=[31,112,193,232,272,318,335],na=[2,359],EA=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],By=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],OA=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],RA=[2,347],hm={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:function(Be,ze,Ze,pt,gt,ne,Vn){var se=ne.length-1;switch(gt){case 1:if(ne[se-1]=ne[se-1]||{},Ct.base&&(ne[se-1].base=Ct.base),Ct.base="",ne[se-1].prefixes=Ct.prefixes,Ct.prefixes=null,Ct.pathOnly){if(ne[se-1].type==="path"||"termType"in ne[se-1])return ne[se-1];throw new Error("Received full SPARQL query in path only mode")}else if(ne[se-1].type==="path"||"termType"in ne[se-1])throw new Error("Received only path in full SPARQL mode");if(ne[se-1].type==="update"){const Nt={};for(const Jt of ne[se-1].updates)if(Jt.updateType==="insert"){const It={};for(const Yr of Jt.insert)if(Yr.type==="bgp"||Yr.type==="graph")for(const Zr of Yr.triples)Zr.subject.termType==="BlankNode"&&(It[Zr.subject.value]=!0),Zr.predicate.termType==="BlankNode"&&(It[Zr.predicate.value]=!0),Zr.object.termType==="BlankNode"&&(It[Zr.object.value]=!0);for(const Yr of Object.keys(It)){if(Nt[Yr])throw new Error("Detected reuse blank node across different INSERT DATA clauses");Nt[Yr]=!0}}}return ne[se-1];case 2:this.$={...ne[se-1],...ne[se],type:"query"};break;case 4:Ct.base=du(ne[se]);break;case 5:Ct.prefixes||(Ct.prefixes={}),ne[se-1]=ne[se-1].substr(0,ne[se-1].length-1),ne[se]=du(ne[se]),Ct.prefixes[ne[se-1]]=ne[se];break;case 6:this.$={...ne[se-3],...ps(ne[se-2]),...ne[se-1],...ne[se]};break;case 7:if(!Ct.skipValidation&&(wm(ne[se-3].variables.map(Jt=>vm(Jt.expression))).some(Jt=>Jt.aggregation==="count"&&!(Jt.expression instanceof Uy))||ne[se].group)){for(const Jt of ne[se-3].variables)if(Jt.termType==="Variable"){if(!ne[se].group||!ne[se].group.map(It=>fo(It)).includes(fo(Jt)))throw Error("Projection of ungrouped variable (?"+fo(Jt)+")")}else if(vm(Jt.expression).length===0){const It=lU(Jt.expression);for(const Yr of It)if(!ne[se].group||!ne[se].group.map||!ne[se].group.map(Zr=>fo(Zr)).includes(fo(Yr)))throw Error("Use of ungrouped variable in projection of operation (?"+fo(Yr)+")")}}const ho=ne[se-1].where.filter(Nt=>Nt.type==="query");if(ho.length>0){const Nt=ne[se-3].variables.filter(It=>It.variable&&It.variable.value).map(It=>It.variable.value),Jt=wm(ho.map(It=>It.variables)).map(It=>It.value||It.variable.value);for(const It of Nt)if(Jt.indexOf(It)>=0)throw Error("Target id of 'AS' (?"+It+") already used in subquery")}this.$=Dr(ne[se-3],ps(ne[se-2]),ne[se-1],ne[se]);break;case 8:this.$=Dr({queryType:"CONSTRUCT",template:ne[se-3]},ps(ne[se-2]),ne[se-1],ne[se]);break;case 9:this.$=Dr({queryType:"CONSTRUCT",template:ne[se-2]=ne[se-2]?ne[se-2].triples:[]},ps(ne[se-5]),{where:[{type:"bgp",triples:oo([],ne[se-2])}]},ne[se]);break;case 10:this.$=Dr({queryType:"DESCRIBE",variables:ne[se-3]==="*"?[new Uy]:ne[se-3]},ps(ne[se-2]),ne[se-1],ne[se]);break;case 11:this.$=Dr({queryType:"ASK"},ps(ne[se-2]),ne[se-1],ne[se]);break;case 12:this.$=Dr(ne[se-1],{variables:[new Uy]});break;case 13:const Em=ne[se].map(Nt=>Nt.value||Nt.variable.value),zy=dU(Em);if(zy.length>0)throw Error("Two or more of the resulting columns have the same name (?"+zy[0]+")");this.$=Dr(ne[se-1],{variables:ne[se]});break;case 14:this.$=Dr({queryType:"SELECT"},ne[se]&&(ne[se-1]=_n(ne[se]),ne[se]={},ne[se][ne[se-1]]=!0,ne[se]));break;case 16:case 27:this.$=uo(ne[se-3],{variable:ne[se-1]});break;case 17:case 18:this.$=Dr(ne[se-3],ne[se-2],ne[se-1],ne[se],{type:"query"});break;case 19:case 58:this.$={iri:ne[se],named:!!ne[se-1]};break;case 20:this.$={where:ne[se].patterns};break;case 21:this.$=Dr(ne[se-1],ne[se]);break;case 22:this.$=Dr(ne[se-2],ne[se-1],ne[se]);break;case 23:this.$={group:ne[se]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=uo(ne[se]);break;case 26:this.$=uo(ne[se-1]);break;case 29:this.$={having:ne[se]};break;case 30:this.$={order:ne[se]};break;case 32:this.$=uo(ne[se],{descending:!0});break;case 35:this.$={limit:lo(ne[se])};break;case 36:this.$={offset:lo(ne[se])};break;case 37:this.$={limit:lo(ne[se-2]),offset:lo(ne[se])};break;case 38:this.$={limit:lo(ne[se]),offset:lo(ne[se-2])};break;case 39:case 43:this.$={type:"values",values:ne[se]};break;case 40:case 84:this.$=ne[se-1].map(Nt=>({[ne[se-3]]:Nt}));break;case 41:case 85:this.$=ne[se-1].map(()=>({}));break;case 42:case 86:var Oa=ne[se-4].length;ne[se-4]=ne[se-4].map(pm),this.$=ne[se-1].map(function(Nt){if(Nt.length!==Oa)throw Error("Inconsistent VALUES length");for(var Jt={},It=0;It<Oa;It++)Jt["?"+ne[se-4][It].value]=Nt[It];return Jt});break;case 44:case 65:case 100:case 126:case 175:this.$=ne[se-1];break;case 45:this.$={type:"update",updates:hs(ne[se-2],ne[se-1])};break;case 46:this.$=Dr({type:"load",silent:!!ne[se-2],source:ne[se-1]},ne[se]&&{destination:ne[se]});break;case 47:this.$={type:_n(ne[se-2]),silent:!!ne[se-1],graph:ne[se]};break;case 48:this.$={type:_n(ne[se-4]),silent:!!ne[se-3],source:ne[se-2],destination:ne[se]};break;case 49:this.$={type:"create",silent:!!ne[se-2],graph:{type:"graph",name:ne[se]}};break;case 50:this.$={updateType:"insert",insert:qA(ne[se])};break;case 51:this.$={updateType:"delete",delete:Am(qA(ne[se]))};break;case 52:this.$={updateType:"deletewhere",delete:Am(ne[se])};break;case 53:this.$={updateType:"insertdelete",...ne[se-4],...ne[se-3],...ps(ne[se-2],"using"),where:ne[se].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=ne[se];break;case 55:this.$={delete:Am(ne[se-1]),insert:ne[se]||[]};break;case 56:this.$={delete:[],insert:ne[se]};break;case 59:this.$={graph:ne[se]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:ne[se]};break;case 64:this.$={[_n(ne[se])]:!0};break;case 66:this.$=ne[se-1]?Ci(ne[se],[ne[se-1]]):Ci(ne[se]);break;case 67:var $y=Dr(ne[se-3]||{triples:[]},{type:"graph",name:ne[se-5]});this.$=ne[se]?[$y,ne[se]]:[$y];break;case 68:case 73:this.$={type:"bgp",triples:Ci(ne[se-2],[ne[se-1]])};break;case 69:this.$={type:"group",patterns:[ne[se-1]]};break;case 70:for(const Nt of ne[se-1].filter(Jt=>Jt.type==="bind")){const Jt=ne[se-1].indexOf(Nt),It=new Set;for(const Yr of ne[se-1].slice(0,Jt))(Yr.type==="group"||Yr.type==="bgp")&&MA(Yr).forEach(Zr=>It.add(Zr));if(It.has(Nt.variable.value))throw Error("Variable used to bind is already bound (?"+Nt.variable.value+")")}this.$={type:"group",patterns:ne[se-1]};break;case 71:this.$=ne[se-1]?Ci([ne[se-1]],ne[se]):Ci(ne[se]);break;case 72:this.$=ne[se]?[ne[se-2],ne[se]]:ne[se-2];break;case 75:this.$=Dr(ne[se],{type:"optional"});break;case 76:this.$=Dr(ne[se],{type:"minus"});break;case 77:this.$=Dr(ne[se],{type:"graph",name:ne[se-1]});break;case 78:this.$=Dr(ne[se],{type:"service",name:ne[se-1],silent:!!ne[se-2]});break;case 79:this.$={type:"filter",expression:ne[se]};break;case 80:this.$={type:"bind",variable:ne[se-1],expression:ne[se-3]};break;case 89:this.$=hu(ne[se]);break;case 90:this.$=void 0;break;case 91:this.$=ne[se-1].length?{type:"union",patterns:Ci(ne[se-1].map(bm),[bm(ne[se])])}:ne[se];break;case 95:this.$={...ne[se],function:ne[se-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:hs(ne[se-2],ne[se-1]),distinct:!!ne[se-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=hs(ne[se-2],ne[se-1]);break;case 101:this.$=Ci(ne[se-2],[ne[se-1]]);break;case 102:case 112:this.$=Tm(ne[se].map(Nt=>Dr(ia(ne[se-1]),Nt)));break;case 103:this.$=Tm(oo(ne[se].map(Nt=>Dr(ia(ne[se-1].entity),Nt)),ne[se-1].triples));break;case 105:this.$=Ci([ne[se-1]],ne[se]);break;case 106:this.$=Ci(ne[se]);break;case 107:this.$=_m(ne[se-1],ne[se]);break;case 109:case 237:this.$=Ct.factory.namedNode(eU);break;case 110:case 118:this.$=hs(ne[se-1],ne[se]);break;case 111:this.$=ne[se]?{annotation:ne[se],object:ne[se-1]}:ne[se-1];break;case 113:this.$=ne[se]?Tm(oo(ne[se].map(Nt=>Dr(ia(ne[se-1].entity),Nt)),ne[se-1].triples)):ne[se-1].triples;break;case 114:this.$=_m(...ne[se-1],ne[se]);break;case 116:this.$=_m(...ne[se]);break;case 117:case 159:case 163:this.$=[ne[se-1],ne[se]];break;case 119:this.$=ne[se]?{object:ne[se-1],annotation:ne[se]}:ne[se-1];break;case 120:this.$=ne[se-1].length?co("|",hs(ne[se-1],ne[se])):ne[se];break;case 121:this.$=ne[se-1].length?co("/",hs(ne[se-1],ne[se])):ne[se];break;case 122:this.$=ne[se]?co(ne[se],[ne[se-1]]):ne[se-1];break;case 123:this.$=ne[se-1]?co(ne[se-1],[ne[se]]):ne[se];break;case 125:case 131:this.$=co(ne[se-1],[ne[se]]);break;case 129:this.$=co("|",hs(ne[se-2],ne[se-1]));break;case 132:case 134:this.$=uU(ne[se-1]);break;case 133:case 135:this.$=cU(ne[se-1]);break;case 140:this.$={entity:ne[se],triples:[]};break;case 145:this.$=pm(ne[se]);break;case 149:this.$=Ct.factory.namedNode(xA);break;case 151:case 153:case 158:case 162:this.$=ym(ne[se-1],ne[se]);break;case 152:this.$=["||",ne[se]];break;case 154:this.$=["&&",ne[se]];break;case 156:this.$=Kr(ne[se-1],[ne[se-2],ne[se]]);break;case 157:this.$=Kr(ne[se-2]?"notin":"in",[ne[se-3],ne[se]]);break;case 160:this.$=["+",ym(ne[se-1],ne[se])];break;case 161:var Vy=ji(ne[se-1].value.replace("-",""),ne[se-1].datatype);this.$=["-",ym(Vy,ne[se])];break;case 164:this.$=Kr("UPLUS",[ne[se]]);break;case 165:this.$=Kr(ne[se-1],[ne[se]]);break;case 166:this.$=Kr("UMINUS",[ne[se]]);break;case 177:this.$=Kr(_n(ne[se-1]));break;case 178:this.$=Kr(_n(ne[se-3]),[ne[se-1]]);break;case 179:this.$=hu(Kr(_n(ne[se-3]),[ne[se-1]]));break;case 180:this.$=Kr(_n(ne[se-5]),[ne[se-3],ne[se-1]]);break;case 181:this.$=Kr(_n(ne[se-7]),[ne[se-5],ne[se-3],ne[se-1]]);break;case 182:this.$=hu(Kr(_n(ne[se-7]),[ne[se-5],ne[se-3],ne[se-1]]));break;case 183:this.$=Kr(_n(ne[se-1]),ne[se]);break;case 184:this.$=Kr("bound",[pm(ne[se-1])]);break;case 185:this.$=Kr(ne[se-1],[]);break;case 186:this.$=Kr(ne[se-3],[ne[se-1]]);break;case 187:this.$=Kr(ne[se-2]?"notexists":"exists",[bm(ne[se])]);break;case 188:case 189:this.$=uo(ne[se-1],{type:"aggregate",aggregation:_n(ne[se-4]),distinct:!!ne[se-2]});break;case 190:this.$=uo(ne[se-2],{type:"aggregate",aggregation:_n(ne[se-5]),distinct:!!ne[se-3],separator:typeof ne[se-1]=="string"?ne[se-1]:" "});break;case 192:this.$=ji(ne[se]);break;case 193:this.$=iU(ne[se-1],_n(ne[se].substr(1)));break;case 194:this.$=ji(ne[se-2],ne[se]);break;case 195:case 204:this.$=ji(ne[se],IA);break;case 196:case 205:this.$=ji(ne[se],PA);break;case 197:case 206:this.$=ji(_n(ne[se]),DA);break;case 200:this.$=ji(ne[se].toLowerCase(),nU);break;case 201:this.$=ji(ne[se].substr(1),IA);break;case 202:this.$=ji(ne[se].substr(1),PA);break;case 203:this.$=ji(ne[se].substr(1).toLowerCase(),DA);break;case 207:case 208:this.$=LA(ne[se],1);break;case 209:case 210:this.$=LA(ne[se],3);break;case 211:this.$=Ct.factory.namedNode(du(ne[se]));break;case 213:var ky=ne[se].indexOf(":"),Nr=ne[se].substr(0,ky),Li=Ct.prefixes[Nr];if(!Li)throw new Error("Unknown prefix: "+Nr);var ys=du(Li+ne[se].substr(ky+1));this.$=Ct.factory.namedNode(ys);break;case 214:if(ne[se]=ne[se].substr(0,ne[se].length-1),!(ne[se]in Ct.prefixes))throw new Error("Unknown prefix: "+ne[se]);var ys=du(Ct.prefixes[ne[se]]);this.$=Ct.factory.namedNode(ys);break;case 215:this.$=fu(ne[se].replace(/^(_:)/,""));break;case 216:this.$=fu();break;case 217:case 218:case 232:this.$=hu(mm(ne[se-3],ne[se-2],ne[se-1]));break;case 230:case 231:this.$=hu(ne[se-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:ne[se-1].push(ne[se]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[ne[se]];break;case 308:ne[se-3].push(ne[se-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:ne[se-2].push(ne[se-1]);break}},table:[e(u,s,{3:1,4:2,10:3}),{1:[3]},e(n,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:r,16:r,45:r,197:r,224:r,229:r,308:r,24:[1,13],32:[1,14],36:[1,15],41:a}),e([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:o},{6:[2,239]},e(l,[2,411],{216:28,217:29}),e(c,[2,249],{18:30}),e(c,[2,251],{22:31}),e(d,[2,255],{25:32,27:33,29:[1,34]}),{13:h,16:f,33:35,39:[1,37],44:39,55:40,87:p,139:38,307:43,308:y,323:36},e(c,[2,267],{37:46}),e(b,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:g,87:p},e(m,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),e(u,[2,248]),e(u,[2,245]),e(u,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},e([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),e(v,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:_,29:w,52:84,53:S,56:85},{19:88,28:_,29:w,52:89,53:S,56:85},e(c,[2,253],{26:90}),{28:[1,91],52:92,53:S},e(A,[2,385],{181:93,182:94,183:95,31:[2,383]}),e(D,[2,263],{34:96}),e(D,[2,261],{44:39,55:40,307:43,139:97,13:h,16:f,87:p,308:y}),e(D,[2,262]),e(L,[2,259]),e(O,[2,143]),e(O,[2,144]),e([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),e(E,[2,211]),e(E,[2,212]),e(E,[2,213]),e(E,[2,214]),{19:98,28:_,29:w,52:99,53:S,56:85},{6:[2,309],99:100,193:[1,101]},e(P,[2,311],{101:102,328:[1,103]}),e(M,[2,317],{104:104,328:[1,105]}),e(U,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:j,114:110},{29:j,114:112},{29:j,114:113},{118:114,123:[1,115],125:116,126:q},e($,[2,315]),e($,[2,316]),e(Z,[2,319]),e(Z,[2,320]),e(Z,[2,321]),e(b,[2,327]),{13:h,16:f,55:118,307:43,308:y},e(c,[2,12]),e(c,[2,13],{44:66,43:119,45:g,87:p}),e(X,[2,269]),e(X,[2,15]),{13:h,16:f,44:136,45:le,46:120,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(m,[2,14]),e(m,[2,274]),e(m,[2,271]),e(m,[2,272]),e(u,[2,4]),{13:[1,177]},e(pe,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},e(l,[2,410]),e([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:h,16:f,45:[1,193],55:194,197:we,219:189,220:190,223:191,224:[1,192],307:43,308:y},e(v,[2,419]),e(W,Se,{20:196,59:197,69:198,70:Ae}),e(c,[2,250]),{29:je,57:200},e(P,[2,279],{54:202,327:[1,203]}),{29:[2,282]},e(He,Ge,{23:204,58:205,62:206,63:tt}),e(c,[2,252]),{19:208,28:_,29:w,52:209,53:S,56:85},{29:[1,210]},e(d,[2,256]),{31:[1,211]},{31:[2,384]},{13:h,16:f,44:215,45:lt,55:220,82:K,87:p,89:ut,145:212,172:221,185:213,187:214,231:oe,236:216,237:222,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,309:C,310:ee,311:217,312:ye},e(Pe,[2,265],{56:85,35:227,52:228,19:229,28:_,29:w,53:S}),e(L,[2,260]),e(He,Ge,{58:205,62:206,23:230,63:tt}),e(c,[2,268]),{6:[2,45]},e(u,s,{10:3,4:231}),{13:h,16:f,55:232,307:43,308:y},e(P,[2,312]),{105:233,112:Ue,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},e(M,[2,318]),e(P,Fe,{108:240,133:242,112:Ye,132:$e}),e(U,[2,323]),{112:[1,244]},{112:[2,325]},e(Je,[2,50]),e(A,nt,{135:245,136:246,143:247,144:248,31:yt,112:yt}),e(Je,[2,51]),e(Je,[2,52]),e(ft,[2,328],{119:249}),{29:j,114:250},e(ft,[2,56]),{29:j,114:251},e(b,[2,59]),e(X,[2,270]),{47:[1,252]},e(et,[2,150]),e(Ir,[2,428],{240:253}),e(Ke,[2,430],{244:254}),e(Ke,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),e(be,[2,440],{252:264}),e(Ie,[2,448],{260:265}),{13:h,16:f,44:136,45:le,55:133,67:132,68:134,77:131,82:K,87:p,172:135,255:154,257:155,264:266,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{13:h,16:f,44:136,45:le,55:133,67:132,68:134,77:131,82:K,87:p,172:135,255:154,257:155,264:267,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{13:h,16:f,44:136,45:le,55:133,67:132,68:134,77:131,82:K,87:p,172:135,255:154,257:155,264:268,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(Ie,[2,167]),e(Ie,[2,168]),e(Ie,[2,169]),e(Ie,[2,170],{176:269,45:Me,89:it}),e(Ie,[2,171]),e(Ie,[2,172]),e(Ie,[2,173]),e(Ie,[2,174]),{13:h,16:f,44:136,45:le,46:272,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(at,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:Tt,89:Vt,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},e(rr,[2,192],{292:[1,286],293:[1,287]}),e(rr,[2,195]),e(rr,[2,196]),e(rr,[2,197]),e(rr,[2,198]),e(rr,[2,199]),e(rr,[2,200]),{13:h,16:f,44:39,55:40,82:K,87:p,139:289,172:291,255:154,257:155,266:290,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},e(fi,[2,452]),e(fi,[2,453]),e(fi,[2,454]),e(fi,[2,455]),e(fi,[2,456]),{279:[2,458]},e(bn,[2,207]),e(bn,[2,208]),e(bn,[2,209]),e(bn,[2,210]),e(rr,[2,201]),e(rr,[2,202]),e(rr,[2,203]),e(rr,[2,204]),e(rr,[2,205]),e(rr,[2,206]),e(u,[2,5]),e(or,[2,297],{88:295}),e(Ln,[2,299],{90:296}),{48:[1,297],87:[1,298]},e(Qr,[2,301]),e(pe,[2,43]),e(pe,[2,82]),e(pe,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},e(l,[2,412]),e(Qn,[2,123]),e(Qn,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),e(Pr,[2,124]),{13:h,16:f,45:[1,311],55:194,89:[1,310],197:we,223:312,225:308,226:309,229:hi,307:43,308:y},e(l,r,{215:10,214:314}),e(Pr,[2,236]),e(Pr,[2,237]),e(Mr,[2,6]),e(Ni,[2,287],{60:315,72:316,73:[1,317]}),e(W,[2,286]),{13:h,16:f,45:le,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,307:43,308:y,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e([6,31,63,70,73,81,83,85],[2,20]),e(A,Zi,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:mn,31:mn,85:mn,112:mn,159:mn,160:mn,161:mn,163:mn,164:mn,41:a}),{13:h,16:f,55:331,307:43,308:y},e(P,[2,280]),e(Mr,[2,7]),e(W,Se,{59:197,69:198,20:332,70:Ae}),e(He,[2,284]),{64:[1,333]},e(He,Ge,{58:205,62:206,23:334,63:tt}),e(c,[2,254]),e(A,nt,{144:248,30:335,143:336,31:[2,257]}),e(c,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:h,16:f,44:39,55:40,87:p,139:342,186:339,190:340,195:341,197:Xr,307:43,308:y},e(ls,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:h,16:f,87:p,197:Xr,308:y}),e(Zn,[2,227]),e(Zn,[2,228]),e(Zn,[2,229]),{13:h,16:f,44:215,45:lt,55:220,82:K,87:p,89:ut,172:221,185:351,187:350,200:348,230:347,231:oe,234:349,236:216,237:222,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,309:C,310:ee,311:217,312:ye},{13:h,16:f,44:39,55:40,87:p,139:342,186:352,190:340,195:341,197:Xr,307:43,308:y},e(Zn,[2,146]),e(Zn,[2,147]),e(Zn,[2,148]),e(Zn,[2,149]),{13:h,16:f,44:354,55:355,82:K,87:p,172:357,237:356,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,309:C,310:ee,311:358,312:ye,313:353},e(ue,[2,215]),e(ue,[2,216]),e(He,Ge,{58:205,62:206,23:359,63:tt}),e(D,[2,264]),e(Pe,[2,266]),e(Mr,[2,11]),e(n,[2,308],{6:[2,310]}),e(Je,[2,313],{102:360,120:361,121:[1,362]}),e(Je,[2,47]),e(Je,[2,63]),e(Je,[2,64]),{13:h,16:f,55:363,307:43,308:y},e(Je,[2,336]),e(Je,[2,337]),e(Je,[2,338]),{109:[1,364]},e(ve,[2,60]),{13:h,16:f,55:365,307:43,308:y},e(P,[2,335]),{13:h,16:f,55:366,307:43,308:y},{31:[1,367]},e(Ce,[2,341],{137:368}),e(Ce,[2,340]),{13:h,16:f,44:215,45:lt,55:220,82:K,87:p,89:ut,145:369,172:221,185:213,187:214,231:oe,236:216,237:222,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,309:C,310:ee,311:217,312:ye},{28:[1,370],127:371,128:[1,372]},e(ft,[2,330],{124:373,125:374,126:q}),e(ft,[2,57]),{44:375,87:p},e(et,[2,151],{241:376,242:[1,377]}),e(Ir,[2,153],{245:378,246:[1,379]}),{13:h,16:f,44:136,45:le,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,247:380,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{250:[1,381]},e(Xe,[2,432]),e(Xe,[2,433]),e(Xe,[2,434]),e(Xe,[2,435]),e(Xe,[2,436]),e(Xe,[2,437]),{250:[2,439]},e([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:z,298:Y,299:re,300:ce,301:Te,302:xe}),e(be,[2,162],{261:388,262:389,39:st,338:ht}),e(Ie,[2,164]),e(Ie,[2,165]),e(Ie,[2,166]),e(at,[2,95]),e(at,[2,96]),e(Xe,[2,377],{177:392,325:[1,393]}),{48:[1,394]},e(at,[2,177]),{13:h,16:f,44:136,45:le,46:395,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{13:h,16:f,44:136,45:le,46:396,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{13:h,16:f,44:136,45:le,46:397,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{13:h,16:f,44:136,45:le,46:398,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{13:h,16:f,44:136,45:le,46:399,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(at,[2,183]),e(at,[2,98]),e(Xe,[2,381],{180:400}),{87:[1,401]},e(at,[2,185]),{13:h,16:f,44:136,45:le,46:402,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{29:je,57:403},e(rr,[2,193]),{13:h,16:f,55:404,307:43,308:y},{13:h,16:f,44:39,55:40,87:p,139:342,195:405,197:Xr,307:43,308:y},e(St,[2,233]),e(St,[2,234]),e(St,[2,235]),e(Qt,[2,459],{281:406,325:[1,407]}),e(Xe,[2,463],{284:408,325:[1,409]}),e(Xe,[2,465],{286:410,325:[1,411]}),{13:h,16:f,31:[1,412],55:414,82:K,171:413,172:415,173:416,174:Kt,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:lr},{31:[1,419],89:[1,420]},{29:[1,421]},e(Qr,[2,302]),e(or,[2,367],{167:422}),e(Ln,[2,369],{168:423}),{48:[1,424],87:[1,425]},e(Qr,[2,371]),e(Qn,[2,122]),e(Qn,[2,417]),e(Qn,[2,413]),e(Qn,[2,414]),e(Qn,[2,415]),e(Pr,[2,125]),e(Pr,[2,127]),e(Pr,[2,128]),e(vr,[2,420],{227:426}),e(Pr,[2,130]),{13:h,16:f,55:194,197:we,223:427,307:43,308:y},{48:[1,428]},e(zt,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),e(Ni,[2,288]),{64:[1,433]},e(W,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:h,16:f,45:le,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,276:H,277:N,279:R,280:T,283:x,285:B,308:y,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve}),e(Mn,[2,293]),e(ei,[2,92]),e(ei,[2,93]),e(ei,[2,94]),{45:Me,89:it,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:_,29:w,56:85},{19:438,28:_,29:w,56:85},e(Fr,[2,355],{149:439}),e(Fr,[2,354]),{13:h,16:f,44:215,45:gn,55:220,82:K,87:p,89:ut,156:440,172:221,185:441,203:442,231:Hn,236:216,237:222,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,309:C,310:ee,311:217,312:ye},e(D,[2,19]),e(zt,[2,21]),{13:h,16:f,44:450,45:$n,55:323,65:445,66:446,67:447,68:448,87:p,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,307:43,308:y,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(Mr,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},e(A,[2,386],{31:[2,388]}),e(ls,[2,102]),e(ti,[2,391],{191:452}),e(A,[2,395],{196:453,198:454}),e(A,[2,108]),e(A,[2,109]),e(ls,[2,103]),e(ls,[2,104]),e(ls,[2,390]),{13:h,16:f,44:215,45:lt,48:[1,455],55:220,82:K,87:p,89:ut,172:221,185:351,187:350,200:456,231:oe,234:349,236:216,237:222,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,309:C,310:ee,311:217,312:ye},e(ea,[2,424]),e(io,[2,136]),e(io,[2,137]),e(Yt,[2,140]),{232:[1,457]},{13:h,16:f,44:39,55:40,87:p,139:342,195:458,197:Xr,307:43,308:y},e(St,[2,219]),e(St,[2,220]),e(St,[2,221]),e(St,[2,222]),e(St,[2,223]),e(Mr,[2,10]),e(Je,[2,46]),e(Je,[2,314]),{112:Ue,122:459},e(Je,[2,62]),e(P,Fe,{133:242,108:460,112:Ye,132:$e}),e(ve,[2,61]),e(Je,[2,49]),e([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},e(Ce,[2,351],{146:463,335:[1,464]}),{29:je,57:465},e(ft,[2,329]),e(P,[2,332],{129:466,327:[1,467]}),e(ft,[2,55]),e(ft,[2,331]),{48:[1,468]},e(Ir,[2,429]),{13:h,16:f,44:136,45:le,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(Ke,[2,431]),{13:h,16:f,44:136,45:le,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,243:470,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(Ke,[2,156]),{45:Tt,89:Vt,179:471},e(be,[2,441]),{13:h,16:f,44:136,45:le,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,251:472,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(Ie,[2,444],{256:473}),e(Ie,[2,446],{258:474}),e(Xe,[2,442]),e(Xe,[2,443]),e(Ie,[2,449]),{13:h,16:f,44:136,45:le,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,255:154,257:155,259:475,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(Xe,[2,450]),e(Xe,[2,451]),e(Xe,[2,379],{178:476}),e(Xe,[2,378]),e([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:h,16:f,44:136,45:le,46:482,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{48:[1,483]},{48:[1,484]},e(at,[2,187]),e(rr,[2,194]),{13:h,16:f,44:39,55:40,82:K,87:p,139:289,172:291,255:154,257:155,266:290,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,320:485},{13:h,16:f,39:[1,487],44:136,45:le,46:488,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,282:486,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(Qt,[2,460]),{13:h,16:f,44:136,45:le,46:489,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(Xe,[2,464]),{13:h,16:f,44:136,45:le,46:490,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(Xe,[2,466]),e(pe,[2,40]),e(or,[2,298]),e(zr,[2,87]),e(zr,[2,88]),e(zr,[2,89]),e(zr,[2,90]),{13:h,16:f,55:492,82:K,172:493,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,311:494,312:ye,315:491},e(pe,[2,41]),e(Ln,[2,300]),e(ri,[2,303],{92:495}),{13:h,16:f,31:[1,496],55:414,82:K,171:497,172:415,173:416,174:Kt,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:lr},{31:[1,498],89:[1,499]},{29:[1,500]},e(Qr,[2,372]),{13:h,16:f,48:[2,422],55:194,197:we,223:312,226:502,228:501,229:hi,307:43,308:y},e(Pr,[2,131]),e(Pr,[2,126]),e(zt,[2,22]),e(zt,[2,290]),{82:[1,503]},{82:[1,504]},{13:h,16:f,44:510,45:le,55:323,67:321,68:322,74:505,75:506,76:Ea,77:320,78:My,79:509,87:p,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,307:43,308:y,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(Mn,[2,294]),e(_A,[2,69]),e(_A,[2,70]),e(W,Se,{59:197,69:198,20:511,70:Ae}),e(He,Ge,{58:205,62:206,23:512,63:tt}),{29:[2,375],31:[2,71],84:522,85:o,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},e(Fr,[2,363],{157:524,335:[1,525]}),e(l,r,{215:10,202:526,205:527,208:528,214:529,44:530,87:p}),e(Fy,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:r,16:r,45:r,197:r,224:r,229:r,308:r,87:p}),{13:h,16:f,44:215,45:gn,55:220,82:K,87:p,89:ut,172:221,185:351,203:536,212:534,231:Hn,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,309:C,310:ee,311:217,312:ye},e(l,r,{215:10,205:527,208:528,214:529,44:530,202:537,87:p}),e(He,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:h,16:f,45:$n,87:p,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,276:H,277:N,279:R,280:T,283:x,285:B,308:y,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve}),e(ds,[2,291]),e(ds,[2,24]),e(ds,[2,25]),{13:h,16:f,44:136,45:le,46:539,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(ds,[2,28]),e(He,Ge,{58:205,62:206,23:540,63:tt}),e([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),e(ti,[2,107]),{13:h,16:f,44:215,45:lt,55:220,82:K,87:p,89:ut,172:221,185:351,187:350,199:543,200:544,231:oe,234:349,236:216,237:222,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,309:C,310:ee,311:217,312:ye},e(vA,[2,132]),e(ea,[2,425]),e(vA,[2,133]),{13:h,16:f,44:354,55:355,82:K,87:p,172:357,237:356,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,309:C,310:ee,311:358,312:ye,313:545},e(Je,[2,54]),e(Je,[2,48]),e(Ce,[2,342]),{13:h,16:f,44:39,55:40,87:p,139:546,307:43,308:y},e(Ce,[2,68]),e(A,[2,350],{31:wA,112:wA}),e(Je,[2,53]),{13:h,16:f,55:547,307:43,308:y},e(P,[2,333]),e(X,[2,16]),e(Ir,[2,152]),e(Ke,[2,154]),e(Ke,[2,157]),e(be,[2,159]),e(be,[2,160],{262:389,261:548,39:st,338:ht}),e(be,[2,161],{262:389,261:549,39:st,338:ht}),e(Ie,[2,163]),{13:h,16:f,44:136,45:le,46:550,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(at,[2,178]),e(at,[2,179]),{13:h,16:f,44:136,45:le,46:551,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{13:h,16:f,44:136,45:le,46:552,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{13:h,16:f,44:136,45:le,46:553,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{48:[1,554],272:[1,555]},e(at,[2,184]),e(at,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:h,16:f,55:194,197:we,223:562,307:43,308:y},e(fm,[2,224]),e(fm,[2,225]),e(fm,[2,226]),{31:[1,563],45:SA,94:564},e(pe,[2,84]),e(or,[2,368]),e(pe,[2,85]),e(Ln,[2,370]),e(ri,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},e(zt,[2,35],{83:[1,569]}),e(zt,[2,36],{81:[1,570]}),e(Ni,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:h,16:f,45:le,76:Ea,78:My,87:p,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,276:H,277:N,279:R,280:T,283:x,285:B,308:y,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve}),e(ao,[2,295]),{45:le,77:572},{45:le,77:573},e(ao,[2,33]),e(ao,[2,34]),{31:[2,275],50:574,84:575,85:o},{31:[2,277],51:576,84:577,85:o},e(Fr,[2,356]),e(TA,[2,357],{152:578,335:[1,579]}),e(ta,[2,74]),{29:je,57:580},{29:je,57:581},{13:h,16:f,44:39,55:40,87:p,139:582,307:43,308:y},e(AA,[2,365],{162:583,328:[1,584]}),{13:h,16:f,45:le,55:323,67:321,68:322,77:320,79:585,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,307:43,308:y,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{45:[1,586]},e(ta,[2,81]),{29:je,57:587},e(Fr,[2,73]),e(A,[2,362],{29:ra,31:ra,85:ra,112:ra,159:ra,160:ra,161:ra,163:ra,164:ra}),e(Fy,[2,112]),e(so,[2,401],{206:588}),e(A,[2,405],{209:589,210:590}),e(A,[2,403]),e(A,[2,404]),e(Fy,[2,113]),e(Fy,[2,400]),{13:h,16:f,44:215,45:gn,48:[1,591],55:220,82:K,87:p,89:ut,172:221,185:351,203:536,212:592,231:Hn,234:535,236:216,237:222,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,309:C,310:ee,311:217,312:ye},e(ea,[2,426]),e(Yt,[2,138]),e(Yt,[2,139]),{232:[1,593]},e(ds,[2,292]),{47:[1,595],48:[1,594]},e(Mr,[2,9]),e(ti,[2,392]),e(ti,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:h,16:f,87:p,197:Xr,308:y}),e(ti,[2,110],{272:[1,598]}),e(qy,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},e(ft,[2,58]),e(Ie,[2,445]),e(Ie,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},e(at,[2,99]),e(Xe,[2,382]),e([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),e(at,[2,188]),e(at,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:h,16:f,55:492,82:K,172:493,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,311:494,312:ye,315:611},e(pe,[2,42]),e(ri,[2,304]),{13:h,16:f,55:414,82:K,95:612,171:613,172:415,173:416,174:Kt,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:lr},{31:[1,614],45:SA,94:615},e(Pr,[2,129]),e(vr,[2,421]),{82:[1,616]},{82:[1,617]},e(ao,[2,296]),e(ao,[2,31]),e(ao,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},e(A,Zi,{155:330,153:618,154:619,29:na,31:na,85:na,112:na,159:na,160:na,161:na,163:na,164:na}),e(TA,[2,358]),e(ta,[2,75]),e(ta,[2,76]),{29:je,57:620},{13:h,16:f,44:39,55:40,87:p,139:621,307:43,308:y},e(AA,[2,366]),e(ta,[2,79]),{13:h,16:f,44:136,45:le,46:622,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(ta,[2,91],{336:[1,623]}),e([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),e(so,[2,117]),{13:h,16:f,44:215,45:gn,55:220,82:K,87:p,89:ut,172:221,185:351,203:536,211:626,212:627,231:Hn,234:535,236:216,237:222,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,309:C,310:ee,311:217,312:ye},e(Zn,[2,134]),e(ea,[2,427]),e(Zn,[2,135]),e(ds,[2,26]),{44:628,87:p},e(ti,[2,106]),e(ti,[2,394]),e(A,[2,396]),e(qy,[2,111]),e(qy,[2,398]),{13:h,16:f,44:39,55:40,87:p,139:342,186:629,190:340,195:341,197:Xr,307:43,308:y},e(ue,[2,217]),e(A,nt,{144:248,140:630,143:631,31:[2,343]}),e(at,[2,97]),e(Xe,[2,380]),e(at,[2,180]),{13:h,16:f,44:136,45:le,46:632,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},{13:h,16:f,44:136,45:le,46:633,55:133,67:132,68:134,77:131,82:K,87:p,172:135,224:he,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Re,264:130,265:ie,266:137,267:139,268:ae,269:Ee,270:De,271:ge,273:de,274:fe,275:146,276:H,277:N,278:149,279:R,280:T,283:x,285:B,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:Q,346:te,347:me,348:Oe,349:Ne,350:We,351:Ve},e(at,[2,190]),{290:[1,634]},{314:[1,635]},{13:h,16:f,48:[1,636],55:414,82:K,171:637,172:415,173:416,174:Kt,255:154,257:155,291:150,294:k,295:V,296:J,297:z,298:Y,299:re,300:ce,301:Te,302:xe,303:Le,304:qe,305:G,306:F,307:43,308:y,312:lr},e(EA,[2,305]),e(pe,[2,86]),e(ri,[2,374]),e(zt,[2,37]),e(zt,[2,38]),e(Fr,[2,72]),e(Fr,[2,360]),e(ta,[2,77]),{29:je,57:638},{47:[1,639]},{29:[2,376]},e(so,[2,402]),e(so,[2,115],{215:10,208:528,214:529,44:530,205:640,13:r,16:r,45:r,197:r,224:r,229:r,308:r,87:p}),e(so,[2,118],{272:[1,641]}),e(By,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:Le,304:qe,305:G,306:F},e(zr,[2,218]),e(ri,[2,44]),e(EA,[2,306]),e(ta,[2,78]),{44:651,87:p},e(so,[2,116]),e(A,[2,406]),e(By,[2,119]),e(By,[2,408]),e(l,r,{215:10,205:527,208:528,214:529,44:530,202:652,87:p}),e(ds,[2,27]),e(qy,[2,230]),e(OA,[2,345],{141:653,335:[1,654]}),e(at,[2,181]),e(at,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},e(A,nt,{144:248,142:657,143:658,31:RA,112:RA}),e(OA,[2,346]),e(ta,[2,80]),e(By,[2,231]),e(Ce,[2,67]),e(Ce,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:function(Be,ze){if(ze.recoverable)this.trace(Be);else{var Ze=new Error(Be);throw Ze.hash=ze,Ze}},parse:function(Be){var ze=this,Ze=[0],pt=[null],gt=[],ne=this.table,Vn="",se=0,Oa=0,$y=2,Vy=1,ky=gt.slice.call(arguments,1),Nr=Object.create(this.lexer),Li={yy:{}};for(var ys in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ys)&&(Li.yy[ys]=this.yy[ys]);Nr.setInput(Be,Li.yy),Li.yy.lexer=Nr,Li.yy.parser=this,typeof Nr.yylloc>"u"&&(Nr.yylloc={});var ho=Nr.yylloc;gt.push(ho);var Em=Nr.options&&Nr.options.ranges;typeof Li.yy.parseError=="function"?this.parseError=Li.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var zy=function(){var po;return po=Nr.lex()||Vy,typeof po!="number"&&(po=ze.symbols_[po]||po),po},Nt,Jt,It,Yr,Zr={},Gy,aa,BA,Wy;;){if(Jt=Ze[Ze.length-1],this.defaultActions[Jt]?It=this.defaultActions[Jt]:((Nt===null||typeof Nt>"u")&&(Nt=zy()),It=ne[Jt]&&ne[Jt][Nt]),typeof It>"u"||!It.length||!It[0]){var Om="";Wy=[];for(Gy in ne[Jt])this.terminals_[Gy]&&Gy>$y&&Wy.push("'"+this.terminals_[Gy]+"'");Nr.showPosition?Om="Parse error on line "+(se+1)+`:
`+Nr.showPosition()+`
Expecting `+Wy.join(", ")+", got '"+(this.terminals_[Nt]||Nt)+"'":Om="Parse error on line "+(se+1)+": Unexpected "+(Nt==Vy?"end of input":"'"+(this.terminals_[Nt]||Nt)+"'"),this.parseError(Om,{text:Nr.match,token:this.terminals_[Nt]||Nt,line:Nr.yylineno,loc:ho,expected:Wy})}if(It[0]instanceof Array&&It.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Jt+", token: "+Nt);switch(It[0]){case 1:Ze.push(Nt),pt.push(Nr.yytext),gt.push(Nr.yylloc),Ze.push(It[1]),Nt=null,Oa=Nr.yyleng,Vn=Nr.yytext,se=Nr.yylineno,ho=Nr.yylloc;break;case 2:if(aa=this.productions_[It[1]][1],Zr.$=pt[pt.length-aa],Zr._$={first_line:gt[gt.length-(aa||1)].first_line,last_line:gt[gt.length-1].last_line,first_column:gt[gt.length-(aa||1)].first_column,last_column:gt[gt.length-1].last_column},Em&&(Zr._$.range=[gt[gt.length-(aa||1)].range[0],gt[gt.length-1].range[1]]),Yr=this.performAction.apply(Zr,[Vn,Oa,se,Li.yy,It[1],pt,gt].concat(ky)),typeof Yr<"u")return Yr;aa&&(Ze=Ze.slice(0,-1*aa*2),pt=pt.slice(0,-1*aa),gt=gt.slice(0,-1*aa)),Ze.push(this.productions_[It[1]][0]),pt.push(Zr.$),gt.push(Zr._$),BA=ne[Ze[Ze.length-2]][Ze[Ze.length-1]],Ze.push(BA);break;case 3:return!0}}return!0}},Uy=rq().Wildcard,Qy="http://www.w3.org/1999/02/22-rdf-syntax-ns#",eU=Qy+"type",tU=Qy+"first",rU=Qy+"rest",xA=Qy+"nil",Hy="http://www.w3.org/2001/XMLSchema#",IA=Hy+"integer",PA=Hy+"decimal",DA=Hy+"double",nU=Hy+"boolean",fs="",NA="",CA="";function _n(Qe){return Qe.toLowerCase()}function hs(Qe,Be){return Qe.push(Be),Qe}function oo(Qe,Be){return Qe.push.apply(Qe,Be),Qe}function Dr(Qe){Qe||(Qe={});for(var Be=1,ze=arguments.length,Ze;Be<ze&&(Ze=arguments[Be]||{});Be++)for(var pt in Ze)Qe[pt]=Ze[pt];return Qe}function Ci(){for(var Qe=[],Be=0,ze=arguments.length;Be<ze;Be++)Qe=Qe.concat.apply(Qe,arguments[Be]);return Qe}function du(Qe){if(Qe[0]==="<"&&(Qe=Qe.substring(1,Qe.length-1)),/^[a-z][a-z0-9.+-]*:/i.test(Qe))return Qe;if(!Ct.base)throw new Error("Cannot resolve relative IRI "+Qe+" because no base IRI was set.");switch(fs!==Ct.base&&(fs=Ct.base,NA=fs.replace(/[^\/:]*$/,""),CA=fs.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),Qe[0]){case void 0:return fs;case"#":return fs+Qe;case"?":return fs.replace(/(?:\?.*)?$/,Qe);case"/":return CA+Qe;default:return NA+Qe}}function pm(Qe){if(Qe){var Be=Qe[0];if(Be==="?"||Be==="$")return Ct.factory.variable(Qe.substr(1))}return Qe}function Kr(Qe,Be){return{type:"operation",operator:Qe,args:Be||[]}}function uo(Qe,Be){var ze={expression:Qe==="*"?new Uy:Qe};if(Be)for(var Ze in Be)ze[Ze]=Be[Ze];return ze}function co(Qe,Be){return{type:"path",pathType:Qe,items:Be}}function ym(Qe,Be){for(var ze=0,Ze=Be.length,pt;ze<Ze&&(pt=Be[ze]);ze++)Qe=Kr(pt[0],[Qe,pt[1]]);return Qe}function ps(Qe,Be){var ze=[],Ze=[],pt=Qe.length,gt,ne={};if(!pt)return null;for(var Vn=0;Vn<pt&&(gt=Qe[Vn]);Vn++)(gt.named?Ze:ze).push(gt.iri);return ne[Be||"from"]={default:ze,named:Ze},ne}function lo(Qe){return parseInt(Qe,10)}function bm(Qe){return Qe.type==="group"&&Qe.patterns.length===1?Qe.patterns[0]:Qe}function ji(Qe,Be){return Be&&Be.termType!=="NamedNode"&&(Be=Ct.factory.namedNode(Be)),Ct.factory.literal(Qe,Be)}function iU(Qe,Be){return Ct.factory.literal(Qe,Be)}function mm(Qe,Be,ze){if(!("termType"in Be))throw new Error("Nested triples cannot contain paths");return Ct.factory.quad(Qe,Be,ze)}function ia(Qe,Be,ze,Ze){var pt={};return Qe!=null&&(pt.subject=Qe),Be!=null&&(pt.predicate=Be),ze!=null&&(pt.object=ze),Ze!=null&&(pt.annotations=Ze),pt}function fu(Qe){return typeof Qe=="string"?Qe.startsWith("e_")?Ct.factory.blankNode(Qe):Ct.factory.blankNode("e_"+Qe):Ct.factory.blankNode("g_"+jA++)}var jA=0;Ct._resetBlanks=function(){jA=0};var aU=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,sU={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},oU=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,gm=String.fromCharCode;function LA(Qe,Be){Qe=Qe.substring(Be,Qe.length-Be);try{Qe=Qe.replace(aU,function(ze,Ze,pt,gt){var ne;if(Ze){if(ne=parseInt(Ze,16),isNaN(ne))throw new Error;return gm(ne)}else if(pt){if(ne=parseInt(pt,16),isNaN(ne))throw new Error;return ne<65535?gm(ne):gm(55296+((ne-=65536)>>10),56320+(ne&1023))}else{var Vn=sU[gt];if(!Vn)throw new Error;return Vn}})}catch{return""}if(oU.exec(Qe))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+Qe);return Qe}function uU(Qe){var Be=fu(),ze=Be,Ze=[],pt,gt=[];Qe.forEach(function(Oa){Ze.push(Oa.entity),oo(gt,Oa.triples)});for(var ne=0,Vn=0,se=Ze.length,pt=Array(se*2);ne<se;)pt[Vn++]=ia(ze,Ct.factory.namedNode(tU),Ze[ne]),pt[Vn++]=ia(ze,Ct.factory.namedNode(rU),ze=++ne<se?fu():Ct.factory.namedNode(xA));return{entity:Be,triples:oo(pt,gt)}}function cU(Qe){var Be=fu();return{entity:Be,triples:Qe.map(function(ze){return Dr(ia(Be),ze)})}}function _m(Qe,Be,ze){var Ze=[],pt=[];return Be.forEach(function(gt){let ne=null;gt.annotation&&(ne=gt.annotation,gt=gt.object),Ze.push(ia(null,Qe,gt.entity,ne)),oo(pt,gt.triples)}),Ci(Ze,ze||[],pt)}function fo(Qe){return Qe.variable?Qe.variable.value:Qe.value||Qe.expression.value}function vm(Qe){if(!Qe)return[];if(Qe.type==="aggregate")return[Qe];if(Qe.type==="operation"){const Be=[];for(const ze of Qe.args)Be.push(...vm(ze));return Be}return[]}function lU(Qe){const Be=new Set,ze=function(Ze){Ze&&(Ze.termType==="Variable"?Be.add(Ze):Ze.type==="operation"&&Ze.args.forEach(ze))};return ze(Qe),Be}function wm(Qe,Be=1,ze=[]){for(const Ze of Qe)Be>0&&Ze instanceof Array?wm(Ze,Be-1,ze):ze.push(Ze);return ze}function Sm(Qe){return Qe.termType==="Variable"}function MA(Qe){if(Qe.triples){const Be=[];for(const ze of Qe.triples)Sm(ze.subject)&&Be.push(ze.subject.value),Sm(ze.predicate)&&Be.push(ze.predicate.value),Sm(ze.object)&&Be.push(ze.object.value);return Be}else if(Qe.patterns){const Be=[];for(const ze of Qe.patterns)Be.push(...MA(ze));return Be}return[]}function dU(Qe){const Be=Qe.slice().sort(),ze=[];for(let Ze=0;Ze<Be.length-1;Ze++)Be[Ze+1]==Be[Ze]&&ze.push(Be[Ze]);return ze}function hu(Qe){if(!Ct.sparqlStar)throw new Error("SPARQL-star support is not enabled");return Qe}function FA(Qe,Be,ze){for(const Ze of Be){const pt=ia("subject"in Ze?Ze.subject:Qe,Ze.predicate,Ze.object);ze.push(pt),Ze.annotations&&FA(mm(Qe,Ze.predicate,Ze.object),Ze.annotations,ze)}}function Tm(Qe){if(Ct.sparqlStar){const Be=[];return Qe.forEach(ze=>{const Ze=ia(ze.subject,ze.predicate,ze.object);Be.push(Ze),ze.annotations&&FA(mm(ze.subject,ze.predicate,ze.object),ze.annotations,Be)}),Be}return Qe}function qA(Qe){for(const Be of Qe){if(Be.type==="graph"&&Be.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(Be.type==="bgp"||Be.type==="graph"){for(const ze of Be.triples)if(ze.subject.termType==="Variable"||ze.predicate.termType==="Variable"||ze.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return Qe}function Am(Qe){for(const Be of Qe)if(Be.type==="bgp"){for(const ze of Be.triples)if(ze.subject.termType==="BlankNode"||ze.predicate.termType==="BlankNode"||ze.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return Qe}var fU=function(){var Qe={EOF:1,parseError:function(ze,Ze){if(this.yy.parser)this.yy.parser.parseError(ze,Ze);else throw new Error(ze)},setInput:function(Be,ze){return this.yy=ze||this.yy||{},this._input=Be,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Be=this._input[0];this.yytext+=Be,this.yyleng++,this.offset++,this.match+=Be,this.matched+=Be;var ze=Be.match(/(?:\r\n?|\n).*/g);return ze?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Be},unput:function(Be){var ze=Be.length,Ze=Be.split(/(?:\r\n?|\n)/g);this._input=Be+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ze),this.offset-=ze;var pt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ze.length-1&&(this.yylineno-=Ze.length-1);var gt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ze?(Ze.length===pt.length?this.yylloc.first_column:0)+pt[pt.length-Ze.length].length-Ze[0].length:this.yylloc.first_column-ze},this.options.ranges&&(this.yylloc.range=[gt[0],gt[0]+this.yyleng-ze]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Be){this.unput(this.match.slice(Be))},pastInput:function(){var Be=this.matched.substr(0,this.matched.length-this.match.length);return(Be.length>20?"...":"")+Be.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Be=this.match;return Be.length<20&&(Be+=this._input.substr(0,20-Be.length)),(Be.substr(0,20)+(Be.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Be=this.pastInput(),ze=new Array(Be.length+1).join("-");return Be+this.upcomingInput()+`
`+ze+"^"},test_match:function(Be,ze){var Ze,pt,gt;if(this.options.backtrack_lexer&&(gt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(gt.yylloc.range=this.yylloc.range.slice(0))),pt=Be[0].match(/(?:\r\n?|\n).*/g),pt&&(this.yylineno+=pt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:pt?pt[pt.length-1].length-pt[pt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Be[0].length},this.yytext+=Be[0],this.match+=Be[0],this.matches=Be,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Be[0].length),this.matched+=Be[0],Ze=this.performAction.call(this,this.yy,this,ze,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ze)return Ze;if(this._backtrack){for(var ne in gt)this[ne]=gt[ne];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Be,ze,Ze,pt;this._more||(this.yytext="",this.match="");for(var gt=this._currentRules(),ne=0;ne<gt.length;ne++)if(Ze=this._input.match(this.rules[gt[ne]]),Ze&&(!ze||Ze[0].length>ze[0].length)){if(ze=Ze,pt=ne,this.options.backtrack_lexer){if(Be=this.test_match(Ze,gt[ne]),Be!==!1)return Be;if(this._backtrack){ze=!1;continue}else return!1}else if(!this.options.flex)break}return ze?(Be=this.test_match(ze,gt[pt]),Be!==!1?Be:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ze=this.next();return ze||this.lex()},begin:function(ze){this.conditionStack.push(ze)},popState:function(){var ze=this.conditionStack.length-1;return ze>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ze){return ze=this.conditionStack.length-1-Math.abs(ze||0),ze>=0?this.conditionStack[ze]:"INITIAL"},pushState:function(ze){this.begin(ze)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(ze,Ze,pt,gt){switch(pt){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(Ze.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return Qe}();hm.lexer=fU;function Ct(){this.yy={}}return Ct.prototype=hm,hm.Parser=Ct,new Ct}();return hg=t,hg}var pg,RO;function rk(){if(RO)return pg;RO=1;var t="http://www.w3.org/2001/XMLSchema#integer",e="http://www.w3.org/2001/XMLSchema#string";function u(f){this._options=f=f||{};var p=f.prefixes||{};this._prefixByIri={};var y=[];for(var b in p){var g=p[b];o(g)&&(this._prefixByIri[g]=b,y.push(g))}var m=y.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+m+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=f.sparqlStar,this._indent=o(f.indent)?f.indent:"  ",this._newline=o(f.newline)?f.newline:`
`,this._explicitDatatype=!!f.explicitDatatype}u.prototype.toQuery=function(f){var p="";return f.queryType&&(p+=f.queryType.toUpperCase()+" "),f.reduced&&(p+="REDUCED "),f.distinct&&(p+="DISTINCT "),f.variables?p+=d(f.variables,void 0,function(y){return/^[?$]/.test(y)?y:l(y)?this.toEntity(y):"("+this.toExpression(y.expression)+" AS "+a(y.variable)+")"},this)+" ":f.template&&(p+=this.group(f.template,!0)+this._newline),f.from&&(p+=this.graphs("FROM ",f.from.default)+this.graphs("FROM NAMED ",f.from.named)),f.where&&(p+="WHERE "+this.group(f.where,!0)+this._newline),f.updates&&(p+=d(f.updates,";"+this._newline,this.toUpdate,this)),f.group&&(p+="GROUP BY "+d(f.group,void 0,function(y){var b=l(y.expression)?this.toEntity(y.expression):"("+this.toExpression(y.expression)+")";return y.variable?"("+b+" AS "+a(y.variable)+")":b},this)+this._newline),f.having&&(p+="HAVING ("+d(f.having,void 0,this.toExpression,this)+")"+this._newline),f.order&&(p+="ORDER BY "+d(f.order,void 0,function(y){var b="("+this.toExpression(y.expression)+")";return y.descending?"DESC "+b:b},this)+this._newline),f.offset&&(p+="OFFSET "+f.offset+this._newline),f.limit&&(p+="LIMIT "+f.limit+this._newline),f.values&&(p+=this.values(f)),p=this.baseAndPrefixes(f)+p,p.trim()},u.prototype.baseAndPrefixes=function(f){var p=f.base?"BASE <"+f.base+">"+this._newline:"",y="";for(var b in f.prefixes)(this._options.allPrefixes||this._usedPrefixes[b])&&(y+="PREFIX "+b+": <"+f.prefixes[b]+">"+this._newline);return p+y},u.prototype.toPattern=function(f){var p=f.type||f instanceof Array&&"array"||(f.subject&&f.predicate&&f.object?"triple":"");if(!(p in this))throw new Error("Unknown entry type: "+p);return this[p](f)},u.prototype.triple=function(f){return this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+"."},u.prototype.array=function(f){return d(f,this._newline,this.toPattern,this)},u.prototype.bgp=function(f){return this.encodeTriples(f.triples)},u.prototype.encodeTriples=function(f){if(!f.length)return"";for(var p=[],y=void 0,b=void 0,g=0;g<f.length;g++){var m=f[g];c(m.subject,y)?c(m.predicate,b)?p.push(","):(b=m.predicate,p.push(";"+this._newline,this._indent,this.toEntity(b))):(y&&p.push("."+this._newline),y=m.subject,b=m.predicate,p.push(this.toEntity(y)," ",this.toEntity(b))),p.push(" ",this.toEntity(m.object))}return p.push("."),p.join("")},u.prototype.graph=function(f){return"GRAPH "+this.toEntity(f.name)+" "+this.group(f)},u.prototype.graphs=function(f,p){return!p||p.length===0?"":d(p,"",function(y){return f+this.toEntity(y)+this._newline},this)},u.prototype.group=function(f,p){return f=p!==!0?this.array(f.patterns||f.triples):this.toPattern(f.type!=="group"?f:f.patterns),f.indexOf(this._newline)===-1?"{ "+f+" }":"{"+this._newline+this.indent(f)+this._newline+"}"},u.prototype.query=function(f){return this.toQuery(f)},u.prototype.filter=function(f){return"FILTER("+this.toExpression(f.expression)+")"},u.prototype.bind=function(f){return"BIND("+this.toExpression(f.expression)+" AS "+a(f.variable)+")"},u.prototype.optional=function(f){return"OPTIONAL "+this.group(f)},u.prototype.union=function(f){return d(f.patterns,this._newline+"UNION"+this._newline,function(p){return this.group(p,!0)},this)},u.prototype.minus=function(f){return"MINUS "+this.group(f)},u.prototype.values=function(f){var p=Object.keys(f.values.reduce(function(g,m){for(var v in m)g[v]=!0;return g},{})),y,b;return p.length===1?y=b="":(y="(",b=")"),"VALUES "+y+p.join(" ")+b+" {"+this._newline+d(f.values,this._newline,function(g){return"  "+y+d(p,void 0,function(m){return g[m]?this.toEntity(g[m]):"UNDEF"},this)+b},this)+this._newline+"}"},u.prototype.service=function(f){return"SERVICE "+(f.silent?"SILENT ":"")+this.toEntity(f.name)+" "+this.group(f)},u.prototype.toExpression=function(f){if(l(f))return this.toEntity(f);switch(f.type.toLowerCase()){case"aggregate":return f.aggregation.toUpperCase()+"("+(f.distinct?"DISTINCT ":"")+this.toExpression(f.expression)+(typeof f.separator=="string"?'; SEPARATOR = "'+f.separator.replace(s,n)+'"':"")+")";case"functioncall":return this.toEntity(f.function)+"("+d(f.args,", ",this.toExpression,this)+")";case"operation":var p=f.operator.toUpperCase(),y=f.args||[];switch(f.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(l(y[0])?this.toEntity(y[0]):"("+this.toExpression(y[0])+")")+" "+p+" "+(l(y[1])?this.toEntity(y[1]):"("+this.toExpression(y[1])+")");case"!":return"!("+this.toExpression(y[0])+")";case"uplus":return"+("+this.toExpression(y[0])+")";case"uminus":return"-("+this.toExpression(y[0])+")";case"notin":p="NOT IN";case"in":return this.toExpression(y[0])+" "+p+"("+(o(y[1])?y[1]:d(y[1],", ",this.toExpression,this))+")";case"notexists":p="NOT EXISTS";case"exists":return p+" "+this.group(y[0],!0);default:return p+"("+d(y,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+f.type)}},u.prototype.toEntity=function(f){if(l(f))switch(f.termType){case"Wildcard":return"*";case"Variable":return a(f);case"BlankNode":return"_:"+f.value;case"Literal":var p=f.value||"",y=f.language||"",b=f.datatype;if(f='"'+p.replace(s,n)+'"',y)f+="@"+y;else if(b){if(!this._explicitDatatype)switch(b.value){case e:return f;case t:if(/^\d+$/.test(p))return p+" "}f+="^^"+this.encodeIRI(b.value)}return f;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return f.graph&&f.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(f.graph)+" { "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" }  >>":"<< "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" >>";default:return this.encodeIRI(f.value)}else{var g=f.items.map(this.toEntity,this),m=f.pathType;switch(m){case"^":case"!":return m+g[0];case"*":case"+":case"?":return"("+g[0]+m+")";default:return"("+g.join(m)+")"}}};var s=/["\\\t\n\r\b\f]/g,n=function(f){return r[f]},r={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};u.prototype.encodeIRI=function(f){var p=this._prefixRegex.exec(f);if(p){var y=this._prefixByIri[p[1]];return this._usedPrefixes[y]=!0,y+":"+p[2]}return"<"+f+">"},u.prototype.toUpdate=function(f){switch(f.type||f.updateType){case"load":return"LOAD"+(f.source?" "+this.toEntity(f.source):"")+(f.destination?" INTO GRAPH "+this.toEntity(f.destination):"");case"insert":return"INSERT DATA "+this.group(f.insert,!0);case"delete":return"DELETE DATA "+this.group(f.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(f.delete,!0);case"insertdelete":return(f.graph?"WITH "+this.toEntity(f.graph)+this._newline:"")+(f.delete.length?"DELETE "+this.group(f.delete,!0)+this._newline:"")+(f.insert.length?"INSERT "+this.group(f.insert,!0)+this._newline:"")+(f.using?this.graphs("USING ",f.using.default):"")+(f.using?this.graphs("USING NAMED ",f.using.named):"")+"WHERE "+this.group(f.where,!0);case"add":case"copy":case"move":return f.type.toUpperCase()+" "+(f.silent?"SILENT ":"")+(f.source.default?"DEFAULT":this.toEntity(f.source.name))+" TO "+this.toEntity(f.destination.name);case"create":case"clear":case"drop":return f.type.toUpperCase()+(f.silent?" SILENT ":" ")+(f.graph.default?"DEFAULT":f.graph.named?"NAMED":f.graph.all?"ALL":"GRAPH "+this.toEntity(f.graph.name));default:throw new Error("Unknown update query type: "+f.type)}},u.prototype.indent=function(f){return f.replace(/^/gm,this._indent)};function a(f){return"?"+f.value}function o(f){return typeof f=="string"}function l(f){return typeof f.termType=="string"}function c(f,p){if(!f||!l(f)||!p||!l(p)||f.termType!==p.termType)return!1;switch(f.termType){case"Literal":return f.value===p.value&&f.language===p.language&&c(f.datatype,p.datatype);case"Quad":return c(f.subject,p.subject)&&c(f.predicate,p.predicate)&&c(f.object,p.object)&&c(f.graph,p.graph);default:return f.value===p.value}}function d(f,p,y,b){return f.map(y,b).join(o(p)?p:" ")}function h(f={}){return{stringify:function(p){var y=Object.create(f);return y.prefixes=p.prefixes,new u(y).toQuery(p)},createGenerator:function(){return new u(f)}}}return pg={Generator:h},pg}var yg,xO;function Ay(){if(xO)return yg;xO=1;const{Parser:t}=tk(),{Generator:e}=rk(),{Wildcard:u}=rq(),{DataFactory:s}=Et();function n({prefixes:r,baseIRI:a,factory:o,pathOnly:l,sparqlStar:c,skipValidation:d,skipUngroupedVariableCheck:h}={}){const f={};for(const y in r??{})f[y]=r[y];const p=new t;return p.parse=function(){return t.base=a||"",t.prefixes=Object.create(f),t.factory=o||new s,t.sparqlStar=!!c,t.pathOnly=!!l,t.skipValidation=!!d||!!h,t.prototype.parse.apply(p,arguments)},p._resetBlanks=t._resetBlanks,p}return yg={Parser:n,Generator:e,Wildcard:u},yg}var IO;function Vb(){if(IO)return o1;IO=1;var t=I&&I.__createBinding||(Object.create?function(l,c,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(c,d);(!f||("get"in f?!c.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return c[d]}}),Object.defineProperty(l,h,f)}:function(l,c,d,h){h===void 0&&(h=d),l[h]=c[d]}),e=I&&I.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),u=I&&I.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var d in l)d!=="default"&&Object.prototype.hasOwnProperty.call(l,d)&&t(c,l,d);return e(c,l),c};Object.defineProperty(o1,"__esModule",{value:!0});const s=u(Ty()),n=Et(),r=Xt(),a=Ay();class o{constructor(c){this.dataFactory=c||new n.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(c,d=!0){return this.flattenMulti({type:s.types.ALT,input:c},d)}createAsk(c){return{type:s.types.ASK,input:c}}createBoundAggregate(c,d,h,f,p){const y=this.createAggregateExpression(d,h,f,p);return y.variable=c,y}createBgp(c){return{type:s.types.BGP,patterns:c}}createConstruct(c,d){return{type:s.types.CONSTRUCT,input:c,template:d}}createDescribe(c,d){return{type:s.types.DESCRIBE,input:c,terms:d}}createDistinct(c){return{type:s.types.DISTINCT,input:c}}createExtend(c,d,h){return{type:s.types.EXTEND,input:c,variable:d,expression:h}}createFrom(c,d,h){return{type:s.types.FROM,input:c,default:d,named:h}}createFilter(c,d){return{type:s.types.FILTER,input:c,expression:d}}createGraph(c,d){return{type:s.types.GRAPH,input:c,name:d}}createGroup(c,d,h){return{type:s.types.GROUP,input:c,variables:d,aggregates:h}}createInv(c){return{type:s.types.INV,path:c}}createJoin(c,d=!0){return this.flattenMulti({type:s.types.JOIN,input:c},d)}createLeftJoin(c,d,h){return h?{type:s.types.LEFT_JOIN,input:[c,d],expression:h}:{type:s.types.LEFT_JOIN,input:[c,d]}}createLink(c){return{type:s.types.LINK,iri:c}}createMinus(c,d){return{type:s.types.MINUS,input:[c,d]}}createNop(){return{type:s.types.NOP}}createNps(c){return{type:s.types.NPS,iris:c}}createOneOrMorePath(c){return{type:s.types.ONE_OR_MORE_PATH,path:c}}createOrderBy(c,d){return{type:s.types.ORDER_BY,input:c,expressions:d}}createPath(c,d,h,f){return f?{type:s.types.PATH,subject:c,predicate:d,object:h,graph:f}:{type:s.types.PATH,subject:c,predicate:d,object:h,graph:this.dataFactory.defaultGraph()}}createPattern(c,d,h,f){const p=this.dataFactory.quad(c,d,h,f);return p.type=s.types.PATTERN,p}createProject(c,d){return{type:s.types.PROJECT,input:c,variables:d}}createReduced(c){return{type:s.types.REDUCED,input:c}}createSeq(c,d=!0){return this.flattenMulti({type:s.types.SEQ,input:c},d)}createService(c,d,h){return{type:s.types.SERVICE,input:c,name:d,silent:!!h}}createSlice(c,d,h){return d=d||0,h!==void 0?{type:s.types.SLICE,input:c,start:d,length:h}:{type:s.types.SLICE,input:c,start:d}}createUnion(c,d=!0){return this.flattenMulti({type:s.types.UNION,input:c},d)}createValues(c,d){return{type:s.types.VALUES,variables:c,bindings:d}}createZeroOrMorePath(c){return{type:s.types.ZERO_OR_MORE_PATH,path:c}}createZeroOrOnePath(c){return{type:s.types.ZERO_OR_ONE_PATH,path:c}}createAggregateExpression(c,d,h,f){return f?{type:s.types.EXPRESSION,expressionType:s.expressionTypes.AGGREGATE,aggregator:c,expression:d,separator:f,distinct:h}:{type:s.types.EXPRESSION,expressionType:s.expressionTypes.AGGREGATE,aggregator:c,expression:d,distinct:h}}createExistenceExpression(c,d){return{type:s.types.EXPRESSION,expressionType:s.expressionTypes.EXISTENCE,not:c,input:d}}createNamedExpression(c,d){return{type:s.types.EXPRESSION,expressionType:s.expressionTypes.NAMED,name:c,args:d}}createOperatorExpression(c,d){return{type:s.types.EXPRESSION,expressionType:s.expressionTypes.OPERATOR,operator:c,args:d}}createTermExpression(c){return{type:s.types.EXPRESSION,expressionType:s.expressionTypes.TERM,term:c}}createWildcardExpression(){return{type:s.types.EXPRESSION,expressionType:s.expressionTypes.WILDCARD,wildcard:new a.Wildcard}}createTerm(c){return c[0]==="$"&&(c=c.replace("$","?")),(0,r.stringToTerm)(c,this.dataFactory)}createCompositeUpdate(c){return{type:s.types.COMPOSITE_UPDATE,updates:c}}createDeleteInsert(c,d,h){const f={type:s.types.DELETE_INSERT};return c&&(f.delete=c),d&&(f.insert=d),h&&(f.where=h),f}createLoad(c,d,h){const f={type:s.types.LOAD,source:c};return d&&(f.destination=d),this.addSilent(f,!!h)}createClear(c,d){return this.addSilent({type:s.types.CLEAR,source:c},!!d)}createCreate(c,d){return this.addSilent({type:s.types.CREATE,source:c},!!d)}createDrop(c,d){return this.addSilent({type:s.types.DROP,source:c},!!d)}createAdd(c,d,h){return this.addSilent({type:s.types.ADD,source:c,destination:d},!!h)}createMove(c,d,h){return this.addSilent({type:s.types.MOVE,source:c,destination:d},!!h)}createCopy(c,d,h){return this.addSilent({type:s.types.COPY,source:c,destination:d},!!h)}addSilent(c,d){return d&&(c.silent=d),c}flattenMulti(c,d){if(!d)return c;const h=c.type,f=c.input;let p=[];for(const y of f)y.type===h?p.push(...y.input):p.push(y);return c.input=p,c}}return o1.default=o,o1}var u1={},PO;function HT(){if(PO)return u1;PO=1;var t=I&&I.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(u1,"__esModule",{value:!0});const e=Ty(),u=t(Vb()),s=un();class n{static flatten(a){return Array.prototype.concat(...a).filter(o=>o)}static objectify(a){if(a.termType){if(a.termType==="Quad")return{type:"pattern",termType:"Quad",subject:n.objectify(a.subject),predicate:n.objectify(a.predicate),object:n.objectify(a.object),graph:n.objectify(a.graph)};{let o={termType:a.termType,value:a.value};return a.language&&(o.language=a.language),a.datatype&&(o.datatype=n.objectify(a.datatype)),o}}if(Array.isArray(a))return a.map(o=>n.objectify(o));if(a===Object(a)){let o={};for(let l of Object.keys(a))o[l]=n.objectify(a[l]);return o}return a}static inScopeVariables(a){const o=[];function l(d){o.find(h=>d.value===h.value)||o.push(d)}function c(d){d.subject.termType==="Variable"&&l(d.subject),d.predicate.termType==="Variable"&&l(d.predicate),d.object.termType==="Variable"&&l(d.object),d.graph.termType==="Variable"&&l(d.graph),d.subject.termType==="Quad"&&c(d.subject),d.predicate.termType==="Quad"&&c(d.predicate),d.object.termType==="Quad"&&c(d.object),d.graph.termType==="Quad"&&c(d.graph)}return n.recurseOperation(a,{[e.types.EXPRESSION]:d=>(d.expressionType===e.expressionTypes.AGGREGATE&&d.variable&&l(d.variable),!0),[e.types.EXTEND]:d=>(l(d.variable),!0),[e.types.GRAPH]:d=>(d.name.termType==="Variable"&&l(d.name),!0),[e.types.GROUP]:d=>(d.variables.forEach(l),!0),[e.types.PATH]:d=>(d.subject.termType==="Variable"&&l(d.subject),d.object.termType==="Variable"&&l(d.object),d.graph.termType==="Variable"&&l(d.graph),d.subject.termType==="Quad"&&c(d.subject),d.object.termType==="Quad"&&c(d.object),d.graph.termType==="Quad"&&c(d.graph),!0),[e.types.PATTERN]:d=>(c(d),!0),[e.types.PROJECT]:d=>(d.variables.forEach(l),!1),[e.types.SERVICE]:d=>(d.name.termType==="Variable"&&l(d.name),!0),[e.types.VALUES]:d=>(d.variables.forEach(l),!0)}),o}static recurseOperation(a,o){let l=a,c=!0;const d=o[a.type];if(d&&(c=d(a)),!c)return;let h=f=>n.recurseOperation(f,o);switch(l.type){case e.types.ALT:l.input.map(h);break;case e.types.ASK:h(l.input);break;case e.types.BGP:l.patterns.forEach(h);break;case e.types.CONSTRUCT:h(l.input),l.template.map(h);break;case e.types.DESCRIBE:h(l.input);break;case e.types.DISTINCT:h(l.input);break;case e.types.EXPRESSION:l.expressionType===e.expressionTypes.EXISTENCE&&h(l.input);break;case e.types.EXTEND:h(l.input),h(l.expression);break;case e.types.FILTER:h(l.input),h(l.expression);break;case e.types.FROM:h(l.input);break;case e.types.GRAPH:h(l.input);break;case e.types.GROUP:h(l.input),l.aggregates.forEach(h);break;case e.types.INV:h(l.path);break;case e.types.JOIN:l.input.map(h);break;case e.types.LEFT_JOIN:l.input.map(h),l.expression&&h(l.expression);break;case e.types.LINK:break;case e.types.MINUS:l.input.map(h);break;case e.types.NOP:break;case e.types.NPS:break;case e.types.ONE_OR_MORE_PATH:h(l.path);break;case e.types.ORDER_BY:h(l.input),l.expressions.forEach(h);break;case e.types.PATH:h(l.predicate);break;case e.types.PATTERN:break;case e.types.PROJECT:h(l.input);break;case e.types.REDUCED:h(l.input);break;case e.types.SEQ:l.input.map(h);break;case e.types.SERVICE:h(l.input);break;case e.types.SLICE:h(l.input);break;case e.types.UNION:l.input.map(h);break;case e.types.VALUES:break;case e.types.ZERO_OR_MORE_PATH:h(l.path);break;case e.types.ZERO_OR_ONE_PATH:h(l.path);break;case e.types.COMPOSITE_UPDATE:l.updates.forEach(f=>h(f));break;case e.types.DELETE_INSERT:l.delete&&l.delete.forEach(f=>h(f)),l.insert&&l.insert.forEach(f=>h(f)),l.where&&h(l.where);break;case e.types.LOAD:break;case e.types.CLEAR:break;case e.types.CREATE:break;case e.types.DROP:break;case e.types.ADD:break;case e.types.MOVE:break;case e.types.COPY:break;default:throw new Error(`Unknown Operation type ${l.type}`)}}static mapOperation(a,o,l){let c=a,d=!0,h=!0;l=l||new u.default;const f=o[a.type];if(f){const b=f(a,l);c=b.result,d=b.recurse,h=b.copyMetadata!==!1}let p;if(h&&(c.metadata||a.metadata)&&(p={...c.metadata,...a.metadata}),!d)return p&&(c.metadata=p),c;let y=b=>n.mapOperation(b,o,l);switch(c.type){case e.types.ALT:c=l.createAlt(c.input.map(y));break;case e.types.ASK:c=l.createAsk(y(c.input));break;case e.types.BGP:c=l.createBgp(c.patterns.map(y));break;case e.types.CONSTRUCT:c=l.createConstruct(y(c.input),c.template.map(y));break;case e.types.DESCRIBE:c=l.createDescribe(y(c.input),c.terms);break;case e.types.DISTINCT:c=l.createDistinct(y(c.input));break;case e.types.EXPRESSION:c=n.mapExpression(c,o,l);break;case e.types.EXTEND:c=l.createExtend(y(c.input),c.variable,y(c.expression));break;case e.types.FILTER:c=l.createFilter(y(c.input),y(c.expression));break;case e.types.FROM:c=l.createFrom(y(c.input),[...c.default],[...c.named]);break;case e.types.GRAPH:c=l.createGraph(y(c.input),c.name);break;case e.types.GROUP:c=l.createGroup(y(c.input),[].concat(c.variables),c.aggregates.map(y));break;case e.types.INV:c=l.createInv(y(c.path));break;case e.types.JOIN:c=l.createJoin(c.input.map(y));break;case e.types.LEFT_JOIN:c=l.createLeftJoin(y(c.input[0]),y(c.input[1]),c.expression?y(c.expression):void 0);break;case e.types.LINK:c=l.createLink(c.iri);break;case e.types.MINUS:c=l.createMinus(y(c.input[0]),y(c.input[1]));break;case e.types.NOP:c=l.createNop();break;case e.types.NPS:c=l.createNps([].concat(c.iris));break;case e.types.ONE_OR_MORE_PATH:c=l.createOneOrMorePath(y(c.path));break;case e.types.ORDER_BY:c=l.createOrderBy(y(c.input),c.expressions.map(y));break;case e.types.PATH:c=l.createPath(c.subject,y(c.predicate),c.object,c.graph);break;case e.types.PATTERN:c=l.createPattern(c.subject,c.predicate,c.object,c.graph);break;case e.types.PROJECT:c=l.createProject(y(c.input),[...c.variables]);break;case e.types.REDUCED:c=l.createReduced(y(c.input));break;case e.types.SEQ:c=l.createSeq(c.input.map(y));break;case e.types.SERVICE:c=l.createService(y(c.input),c.name,c.silent);break;case e.types.SLICE:c=l.createSlice(y(c.input),c.start,c.length);break;case e.types.UNION:c=l.createUnion(c.input.map(y));break;case e.types.VALUES:c=l.createValues([].concat(c.variables),c.bindings.map(b=>Object.assign({},b)));break;case e.types.ZERO_OR_MORE_PATH:c=l.createZeroOrMorePath(y(c.path));break;case e.types.ZERO_OR_ONE_PATH:c=l.createZeroOrOnePath(y(c.path));break;case e.types.COMPOSITE_UPDATE:c=l.createCompositeUpdate(c.updates.map(y));break;case e.types.DELETE_INSERT:c=l.createDeleteInsert(c.delete?c.delete.map(y):void 0,c.insert?c.insert.map(y):void 0,c.where?y(c.where):void 0);break;case e.types.LOAD:c=l.createLoad(c.source,c.destination,c.silent);break;case e.types.CLEAR:c=l.createClear(c.source,c.silent);break;case e.types.CREATE:c=l.createCreate(c.source,c.silent);break;case e.types.DROP:c=l.createDrop(c.source,c.silent);break;case e.types.ADD:c=l.createAdd(c.source,c.destination);break;case e.types.MOVE:c=l.createMove(c.source,c.destination);break;case e.types.COPY:c=l.createCopy(c.source,c.destination);break;default:throw new Error(`Unknown Operation type ${c.type}`)}return p&&(c.metadata=p),c}static mapExpression(a,o,l){let c=a,d=!0;l=l||new u.default;const h=o[a.expressionType];if(h&&({result:c,recurse:d}=h(a,l)),!d)return c;let f=p=>n.mapOperation(p,o,l);switch(a.expressionType){case e.expressionTypes.AGGREGATE:return a.variable?l.createBoundAggregate(a.variable,a.aggregator,f(a.expression),a.distinct,a.separator):l.createAggregateExpression(a.aggregator,f(a.expression),a.distinct,a.separator);case e.expressionTypes.EXISTENCE:return l.createExistenceExpression(a.not,f(a.input));case e.expressionTypes.NAMED:return l.createNamedExpression(a.name,a.args.map(f));case e.expressionTypes.OPERATOR:return l.createOperatorExpression(a.operator,a.args.map(f));case e.expressionTypes.TERM:return l.createTermExpression(a.term);case e.expressionTypes.WILDCARD:return l.createWildcardExpression();default:throw new Error(`Unknown Expression type ${a.expressionType}`)}}static cloneOperation(a){return n.mapOperation(a,{})}static cloneExpression(a){return n.mapExpression(a,{})}static createUniqueVariable(a,o,l){let c=0,d=a;for(;o[d];)d=`${a}${c++}`;return l.variable(d)}static isSimpleTerm(a){return a.termType!==void 0&&a.termType!=="Quad"&&a.termType!=="Wildcard"}static isQuad(a){return a.termType==="Quad"}static hasQuadVariables(a){return(0,s.someTermsNested)(a,o=>o.termType==="Variable")}static isWildcard(a){return a.termType==="Wildcard"}}return u1.default=n,u1}var DO;function nk(){if(DO)return s1;DO=1;var t=I&&I.__createBinding||(Object.create?function(N,R,T,x){x===void 0&&(x=T);var B=Object.getOwnPropertyDescriptor(R,T);(!B||("get"in B?!R.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return R[T]}}),Object.defineProperty(N,x,B)}:function(N,R,T,x){x===void 0&&(x=T),N[x]=R[T]}),e=I&&I.__setModuleDefault||(Object.create?function(N,R){Object.defineProperty(N,"default",{enumerable:!0,value:R})}:function(N,R){N.default=R}),u=I&&I.__importStar||function(N){if(N&&N.__esModule)return N;var R={};if(N!=null)for(var T in N)T!=="default"&&Object.prototype.hasOwnProperty.call(N,T)&&t(R,N,T);return e(R,N),R},s=I&&I.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(s1,"__esModule",{value:!0});const n=ek(),r=Xt(),a=u(Ty()),o=s(Vb()),l=s(HT()),c=Ay().Parser,d=a.types;let h=new Set,f=0,p=!1,y;function b(N,R){R=R||{},y=new o.default(R.dataFactory);let T;if(m(N)){let x=new c(R);x._resetBlanks(),T=x.parse(N)}else T=N;return g(T,R.quads,R.blankToVariable)}s1.default=b;function g(N,R,T){if(h=new Set,f=0,p=!!R,!N.type)return y.createNop();if(N.type!=="query"&&N.type!=="update")throw new Error("Translate only works on complete query or update objects.");let x;if(S(N),N.type==="query"){const B={type:"group",patterns:N.where||[]};x=D(B),x=K(N,x)}else N.type==="update"&&(x=ie(N));return T&&(x=H(x)),x}function m(N){return typeof N=="string"}function v(N){return!!(N!=null&&N.termType)}function _(N){return N.subject&&N.predicate&&N.object}function w(N){return(N==null?void 0:N.termType)==="Variable"}function S(N){if(v(N))w(N)&&h.add(`?${N.value}`);else if(Array.isArray(N))for(const R of N)S(R);else if(N&&typeof N=="object")for(let R of Object.keys(N))R.startsWith("?")?h.add(R):R.startsWith("$")&&h.add(`?${R.slice(1)}`),S(N[R])}function A(N){let R={};if(_(N)){const T=[A(N.subject),A(N.predicate),A(N.object),N.graph?A(N.graph):{}];Object.assign(R,...T)}else if(v(N))w(N)&&(R[N.value]=N);else if(N.type==="bgp"){const T=N.triples;Object.assign(R,...T.map(A))}else if(N.type==="path")Object.assign(R,...N.items.map(A));else if(N.type==="group"||N.type==="union"||N.type==="optional")Object.assign(R,...N.patterns.map(A));else if(N.type==="service"||N.type==="graph")Object.assign(R,A(N.name)),Object.assign(R,...N.patterns.map(A));else if(N.type==="bind")Object.assign(R,A(N.variable));else if(N.type==="values"){if(N.values.length>0){const T=Object.keys(N.values[0]).map(x=>y.createTerm(x));Object.assign(R,...T.map(A))}}else if(N.type==="query"&&(N.queryType==="SELECT"||N.queryType==="DESCRIBE")){N.where&&N.variables.some(l.default.isWildcard)&&Object.assign(R,...N.where.map(A));for(const T of N.variables)w(T)?Object.assign(R,A(T)):T.variable&&Object.assign(R,A(T.variable));if(N.queryType==="SELECT"){if(N.group)for(const T of N.group)T.variable&&Object.assign(R,A(T.variable));if(N.values){const T={type:"values",values:N.values};Object.assign(R,A(T))}}}return R}function D(N){if(N.type==="bgp")return O(N);if(N.type==="union")return y.createUnion(N.patterns.map(R=>(R.type!=="group"&&(R={type:"group",patterns:[R]}),D(R))));if(N.type==="graph"){const R={type:"group",patterns:N.patterns};let T=D(R);return p?T=$(T,N.name):T=y.createGraph(T,N.name),T}if(N.type==="values")return le(N);if(N.type==="query")return g(N,p,!1);if(N.type==="group"){let R=[],T=[];for(let k of N.patterns)(k.type==="filter"?R:T).push(k);let x=T.reduce(Z,y.createBgp([])),B=R.map(k=>L(k.expression));return B.length>0&&(x=y.createFilter(x,B.reduce((k,V)=>y.createOperatorExpression("&&",[k,V])))),x}throw new Error(`Unexpected type: ${N.type}`)}function L(N){if(l.default.isSimpleTerm(N))return y.createTermExpression(N);if(l.default.isQuad(N))return l.default.hasQuadVariables(N)?y.createOperatorExpression("triple",[L(N.subject),L(N.predicate),L(N.object)]):y.createTermExpression(N);if(l.default.isWildcard(N))return y.createWildcardExpression();if("aggregation"in N)return y.createAggregateExpression(N.aggregation,L(N.expression),!!N.distinct,N.separator);if("function"in N)return y.createNamedExpression(N.function,N.args.map(L));if("operator"in N)return N.operator==="exists"||N.operator==="notexists"?y.createExistenceExpression(N.operator==="notexists",D(N.args[0])):((N.operator==="in"||N.operator==="notin")&&(N.args=[N.args[0]].concat(N.args[1])),y.createOperatorExpression(N.operator,N.args.map(L)));throw new Error(`Unknown expression: ${JSON.stringify(N)}`)}function O(N){let R=[],T=[];for(let x of N.triples)if("pathType"in x.predicate){let B=E(x);for(let k of B)k.type===d.PATH?(R.length>0&&T.push(y.createBgp(R)),R=[],T.push(k)):R.push(k)}else R.push(j(x));return R.length>0&&T.push(y.createBgp(R)),T.length===1?T[0]:y.createJoin(T)}function E(N){let R=N.subject,T=P(N.predicate),x=N.object;return M(R,T,x)}function P(N){if(l.default.isSimpleTerm(N)){if(N.termType==="NamedNode")return y.createLink(N);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(N)}`)}if(N.pathType==="^")return y.createInv(P(N.items[0]));if(N.pathType==="!"){let R=[],T=[],x;"pathType"in N.items[0]&&N.items[0].pathType==="|"?x=N.items[0].items:x=N.items;for(let V of x)if(l.default.isSimpleTerm(V))R.push(V);else if(V.pathType==="^")T.push(V.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(V)}`);let B=y.createNps(R),k=y.createInv(y.createNps(T));return T.length===0?B:R.length===0?k:y.createAlt([B,k])}if(N.pathType==="/")return y.createSeq(N.items.map(P));if(N.pathType==="|")return y.createAlt(N.items.map(P));if(N.pathType==="*")return y.createZeroOrMorePath(P(N.items[0]));if(N.pathType==="+")return y.createOneOrMorePath(P(N.items[0]));if(N.pathType==="?")return y.createZeroOrOnePath(P(N.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(N)}`)}function M(N,R,T){if(R.type===d.LINK)return[y.createPattern(N,R.iri,T)];if(R.type===d.INV)return M(T,R.path,N);if(R.type===d.SEQ){let x=N;return l.default.flatten(R.input.map((B,k)=>{const V=k===R.input.length-1?T:U(),J=M(x,B,V);return V.termType==="Variable"&&(x=V),J}))}return[y.createPath(N,R,T)]}function U(){let N=`?var${f++}`;return h.has(N)?U():(h.add(N),y.createTerm(N))}function j(N){if("pathType"in N.predicate)throw new Error("Trying to translate property path to quad.");return y.createPattern(N.subject,N.predicate,N.object,N.graph)}let q=Object.values(d);function $(N,R,T){if(N.type===d.GRAPH){if(T)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");N=$(N.input,N.name)}else if(N.type!==d.SERVICE)if(N.type===d.BGP)N.patterns=N.patterns.map(x=>(T&&(x.subject.equals(R)&&(x.subject=T),x.predicate.equals(R)&&(x.predicate=T),x.object.equals(R)&&(x.object=T)),x.graph.termType==="DefaultGraph"&&(x.graph=R),x));else if(N.type===d.PATH)T&&(N.subject.equals(R)&&(N.subject=T),N.object.equals(R)&&(N.object=T)),N.graph.termType==="DefaultGraph"&&(N.graph=R);else if(N.type===d.PROJECT&&!T)N.variables.some(x=>x.equals(R))||(T=U()),N.input=$(N.input,R,T);else if(N.type===d.EXTEND&&!T)N.variable.equals(R)&&(T=U()),N.input=$(N.input,R,T);else for(let x of Object.keys(N))Array.isArray(N[x])?N[x]=N[x].map(B=>$(B,R,T)):q.indexOf(N[x].type)>=0?N[x]=$(N[x],R,T):T&&w(N[x])&&N[x].equals(R)&&(N[x]=T);return N}function Z(N,R){if(R.type==="optional"){const T=D({type:"group",patterns:R.patterns});T.type===d.FILTER?N=y.createLeftJoin(N,T.input,T.expression):N=y.createLeftJoin(N,T)}else if(R.type==="minus"){const T=D({type:"group",patterns:R.patterns});N=y.createMinus(N,T)}else if(R.type==="bind")N=y.createExtend(N,R.variable,L(R.expression));else if(R.type==="service"){const T={type:"group",patterns:R.patterns},x=y.createService(D(T),R.name,R.silent);N=X(N,x)}else{const T=D(R);N=X(N,T)}return N}function X(N,R){return N.type===d.BGP&&R.type===d.BGP?N=y.createBgp([...N.patterns,...R.patterns]):N.type===d.BGP&&N.patterns.length===0?N=R:R.type===d.BGP&&R.patterns.length===0||(N=y.createJoin([N,R])),N}function le(N){let R=(N.values.length===0?[]:Object.keys(N.values[0])).map(y.createTerm.bind(y)),T=N.values.map(x=>{let B=Object.keys(x);B=B.filter(V=>x[V]!==void 0);let k={};for(let V of B)k[V]=x[V];return k});return y.createValues(R,T)}function K(N,R){const T=N,x=[],B={};if(T.variables=T.variables&&T.variables.map(V=>he(V,B)),T.having=T.having&&T.having.map(V=>he(V,B)),T.order=T.order&&T.order.map(V=>he(V,B)),T.group||Object.keys(B).length>0){const V=Object.keys(B).map(z=>Re(B[z],y.createTerm(z))),J=[];if(T.group)for(const z of T.group)if(l.default.isSimpleTerm(z.expression))J.push(z.expression);else{const Y="variable"in z?z.variable:U();R=y.createExtend(R,Y,L(z.expression)),J.push(Y)}R=y.createGroup(R,J,V)}if(T.having)for(let V of T.having)R=y.createFilter(R,L(V));N.values&&(R=y.createJoin([R,le(N)]));let k=[];if(N.queryType==="SELECT"||N.queryType==="DESCRIBE")if(N.variables.some(V=>V&&l.default.isWildcard(V)))k=Object.values(A(N)).sort((V,J)=>V.value.localeCompare(J.value));else for(let V of N.variables)w(V)||!("variable"in V)?k.push(V):V.variable&&(k.push(V.variable),x.push(V));for(let V of x)R=y.createExtend(R,V.variable,L(V.expression));return T.order&&(R=y.createOrderBy(R,T.order.map(V=>{let J=L(V.expression);return V.descending&&(J=y.createOperatorExpression("desc",[J])),J}))),N.queryType==="SELECT"&&(R=y.createProject(R,k)),T.distinct&&(R=y.createDistinct(R)),T.reduced&&(R=y.createReduced(R)),N.queryType==="CONSTRUCT"?R=y.createConstruct(R,(N.template||[]).map(j)):N.queryType==="ASK"?R=y.createAsk(R):N.queryType==="DESCRIBE"&&(R=y.createDescribe(R,k)),(T.offset||T.limit)&&(R=y.createSlice(R,T.offset||0,T.limit)),T.from&&(R=y.createFrom(R,T.from.default,T.from.named)),R}function he(N,R){if("type"in N&&N.type==="aggregate"){let T=!1,x;for(let B of Object.keys(R))if(n(R[B],N)){x=y.createTerm(B),T=!0;break}return T||(x=U(),R[(0,r.termToString)(x)]=N),x}return"expression"in N&&N.expression?{...N,expression:he(N.expression,R)}:"args"in N&&N.args?{...N,args:N.args.map(T=>he(T,R))}:N}function Re(N,R){if(N.type!=="aggregate"||!N.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(N)}`);const T=L(N);return T.variable=R,T}function ie(N){return N.updates.length===1?ae(N.updates[0]):y.createCompositeUpdate(N.updates.map(ae))}function ae(N){if("type"in N){if(N.type==="load")return de(N);if(N.type==="clear"||N.type==="create"||N.type==="drop")return ge(N);if(N.type==="add"||N.type==="copy"||N.type==="move")return fe(N)}else if(N.updateType==="insertdelete"||N.updateType==="deletewhere"||N.updateType==="delete"||N.updateType==="insert")return Ee(N);throw new Error(`Unknown update type ${JSON.stringify(N)}`)}function Ee(N){if(!p)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let R=[],T=[],x;if(N.delete&&(R=l.default.flatten(N.delete.map(B=>De(B,N.graph)))),N.insert&&(T=l.default.flatten(N.insert.map(B=>De(B,N.graph)))),N.where&&N.where.length>0){x=D({type:"group",patterns:N.where});const B=N.using;B?x=y.createFrom(x,B.default,B.named):N.graph&&(x=$(x,N.graph))}else N.updateType==="deletewhere"&&R.length>0&&(x=y.createBgp(R));return y.createDeleteInsert(R.length>0?R:void 0,T.length>0?T:void 0,x)}function De(N,R){let T=R;N.type==="graph"&&(T=N.name);let x=N.triples;return T&&(x=x.map(B=>Object.assign(B,{graph:T}))),x.map(j)}function ge(N){let R;switch(l.default.isSimpleTerm(N.graph)?R=N.graph:N.graph.all?R="ALL":N.graph.default?R="DEFAULT":N.graph.named?R="NAMED":R=N.graph.name,N.type){case"clear":return y.createClear(R,N.silent);case"create":return y.createCreate(R,N.silent);case"drop":return y.createDrop(R,N.silent)}}function de(N){return y.createLoad(N.source,N.destination,N.silent)}function fe(N){const R=N.source.default?"DEFAULT":N.source.name,T=N.destination.default?"DEFAULT":N.destination.name;switch(N.type){case"copy":return y.createCopy(R,T,N.silent);case"move":return y.createMove(R,T,N.silent);case"add":return y.createAdd(R,T,N.silent)}}function H(N){const R={},T=Array.from(h).reduce((B,k)=>(B[k]=!0,B),{});return l.default.mapOperation(N,{[a.types.DELETE_INSERT]:B=>({result:y.createDeleteInsert(B.delete,B.insert,B.where&&H(B.where)),recurse:!1}),[a.types.PATH]:(B,k)=>({result:k.createPath(x(B.subject),B.predicate,x(B.object),x(B.graph)),recurse:!1}),[a.types.PATTERN]:(B,k)=>({result:k.createPattern(x(B.subject),x(B.predicate),x(B.object),x(B.graph)),recurse:!1}),[a.types.CONSTRUCT]:B=>({result:y.createConstruct(H(B.input),B.template),recurse:!1})});function x(B){if(B.termType==="BlankNode"){let k=R[B.value];return k||(k=l.default.createUniqueVariable(B.value,T,y.dataFactory),T[k.value]=!0,R[B.value]=k),k}return B}}return s1}var _s={},bg={},Mt={},mg={},nr={},gg,NO;function Ey(){if(NO)return gg;NO=1,gg=t;function t(e,u){if(!e)throw new Error(u||"Assertion failed")}return t.equal=function(u,s,n){if(u!=s)throw new Error(n||"Assertion failed: "+u+" != "+s)},gg}var c1={exports:{}},CO;function ik(){return CO||(CO=1,typeof Object.create=="function"?c1.exports=function(e,u){u&&(e.super_=u,e.prototype=Object.create(u.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:c1.exports=function(e,u){if(u){e.super_=u;var s=function(){};s.prototype=u.prototype,e.prototype=new s,e.prototype.constructor=e}}),c1.exports}var jO;function ki(){if(jO)return nr;jO=1;var t=Ey(),e=ik();nr.inherits=e;function u(M,U){return(M.charCodeAt(U)&64512)!==55296||U<0||U+1>=M.length?!1:(M.charCodeAt(U+1)&64512)===56320}function s(M,U){if(Array.isArray(M))return M.slice();if(!M)return[];var j=[];if(typeof M=="string")if(U){if(U==="hex")for(M=M.replace(/[^a-z0-9]+/ig,""),M.length%2!==0&&(M="0"+M),$=0;$<M.length;$+=2)j.push(parseInt(M[$]+M[$+1],16))}else for(var q=0,$=0;$<M.length;$++){var Z=M.charCodeAt($);Z<128?j[q++]=Z:Z<2048?(j[q++]=Z>>6|192,j[q++]=Z&63|128):u(M,$)?(Z=65536+((Z&1023)<<10)+(M.charCodeAt(++$)&1023),j[q++]=Z>>18|240,j[q++]=Z>>12&63|128,j[q++]=Z>>6&63|128,j[q++]=Z&63|128):(j[q++]=Z>>12|224,j[q++]=Z>>6&63|128,j[q++]=Z&63|128)}else for($=0;$<M.length;$++)j[$]=M[$]|0;return j}nr.toArray=s;function n(M){for(var U="",j=0;j<M.length;j++)U+=o(M[j].toString(16));return U}nr.toHex=n;function r(M){var U=M>>>24|M>>>8&65280|M<<8&16711680|(M&255)<<24;return U>>>0}nr.htonl=r;function a(M,U){for(var j="",q=0;q<M.length;q++){var $=M[q];U==="little"&&($=r($)),j+=l($.toString(16))}return j}nr.toHex32=a;function o(M){return M.length===1?"0"+M:M}nr.zero2=o;function l(M){return M.length===7?"0"+M:M.length===6?"00"+M:M.length===5?"000"+M:M.length===4?"0000"+M:M.length===3?"00000"+M:M.length===2?"000000"+M:M.length===1?"0000000"+M:M}nr.zero8=l;function c(M,U,j,q){var $=j-U;t($%4===0);for(var Z=new Array($/4),X=0,le=U;X<Z.length;X++,le+=4){var K;q==="big"?K=M[le]<<24|M[le+1]<<16|M[le+2]<<8|M[le+3]:K=M[le+3]<<24|M[le+2]<<16|M[le+1]<<8|M[le],Z[X]=K>>>0}return Z}nr.join32=c;function d(M,U){for(var j=new Array(M.length*4),q=0,$=0;q<M.length;q++,$+=4){var Z=M[q];U==="big"?(j[$]=Z>>>24,j[$+1]=Z>>>16&255,j[$+2]=Z>>>8&255,j[$+3]=Z&255):(j[$+3]=Z>>>24,j[$+2]=Z>>>16&255,j[$+1]=Z>>>8&255,j[$]=Z&255)}return j}nr.split32=d;function h(M,U){return M>>>U|M<<32-U}nr.rotr32=h;function f(M,U){return M<<U|M>>>32-U}nr.rotl32=f;function p(M,U){return M+U>>>0}nr.sum32=p;function y(M,U,j){return M+U+j>>>0}nr.sum32_3=y;function b(M,U,j,q){return M+U+j+q>>>0}nr.sum32_4=b;function g(M,U,j,q,$){return M+U+j+q+$>>>0}nr.sum32_5=g;function m(M,U,j,q){var $=M[U],Z=M[U+1],X=q+Z>>>0,le=(X<q?1:0)+j+$;M[U]=le>>>0,M[U+1]=X}nr.sum64=m;function v(M,U,j,q){var $=U+q>>>0,Z=($<U?1:0)+M+j;return Z>>>0}nr.sum64_hi=v;function _(M,U,j,q){var $=U+q;return $>>>0}nr.sum64_lo=_;function w(M,U,j,q,$,Z,X,le){var K=0,he=U;he=he+q>>>0,K+=he<U?1:0,he=he+Z>>>0,K+=he<Z?1:0,he=he+le>>>0,K+=he<le?1:0;var Re=M+j+$+X+K;return Re>>>0}nr.sum64_4_hi=w;function S(M,U,j,q,$,Z,X,le){var K=U+q+Z+le;return K>>>0}nr.sum64_4_lo=S;function A(M,U,j,q,$,Z,X,le,K,he){var Re=0,ie=U;ie=ie+q>>>0,Re+=ie<U?1:0,ie=ie+Z>>>0,Re+=ie<Z?1:0,ie=ie+le>>>0,Re+=ie<le?1:0,ie=ie+he>>>0,Re+=ie<he?1:0;var ae=M+j+$+X+K+Re;return ae>>>0}nr.sum64_5_hi=A;function D(M,U,j,q,$,Z,X,le,K,he){var Re=U+q+Z+le+he;return Re>>>0}nr.sum64_5_lo=D;function L(M,U,j){var q=U<<32-j|M>>>j;return q>>>0}nr.rotr64_hi=L;function O(M,U,j){var q=M<<32-j|U>>>j;return q>>>0}nr.rotr64_lo=O;function E(M,U,j){return M>>>j}nr.shr64_hi=E;function P(M,U,j){var q=M<<32-j|U>>>j;return q>>>0}return nr.shr64_lo=P,nr}var _g={},LO;function Oy(){if(LO)return _g;LO=1;var t=ki(),e=Ey();function u(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return _g.BlockHash=u,u.prototype.update=function(n,r){if(n=t.toArray(n,r),this.pending?this.pending=this.pending.concat(n):this.pending=n,this.pendingTotal+=n.length,this.pending.length>=this._delta8){n=this.pending;var a=n.length%this._delta8;this.pending=n.slice(n.length-a,n.length),this.pending.length===0&&(this.pending=null),n=t.join32(n,0,n.length-a,this.endian);for(var o=0;o<n.length;o+=this._delta32)this._update(n,o,o+this._delta32)}return this},u.prototype.digest=function(n){return this.update(this._pad()),e(this.pending===null),this._digest(n)},u.prototype._pad=function(){var n=this.pendingTotal,r=this._delta8,a=r-(n+this.padLength)%r,o=new Array(a+this.padLength);o[0]=128;for(var l=1;l<a;l++)o[l]=0;if(n<<=3,this.endian==="big"){for(var c=8;c<this.padLength;c++)o[l++]=0;o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=n>>>24&255,o[l++]=n>>>16&255,o[l++]=n>>>8&255,o[l++]=n&255}else for(o[l++]=n&255,o[l++]=n>>>8&255,o[l++]=n>>>16&255,o[l++]=n>>>24&255,o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=0,c=8;c<this.padLength;c++)o[l++]=0;return o},_g}var vs={},Fi={},MO;function nq(){if(MO)return Fi;MO=1;var t=ki(),e=t.rotr32;function u(d,h,f,p){if(d===0)return s(h,f,p);if(d===1||d===3)return r(h,f,p);if(d===2)return n(h,f,p)}Fi.ft_1=u;function s(d,h,f){return d&h^~d&f}Fi.ch32=s;function n(d,h,f){return d&h^d&f^h&f}Fi.maj32=n;function r(d,h,f){return d^h^f}Fi.p32=r;function a(d){return e(d,2)^e(d,13)^e(d,22)}Fi.s0_256=a;function o(d){return e(d,6)^e(d,11)^e(d,25)}Fi.s1_256=o;function l(d){return e(d,7)^e(d,18)^d>>>3}Fi.g0_256=l;function c(d){return e(d,17)^e(d,19)^d>>>10}return Fi.g1_256=c,Fi}var vg,FO;function ak(){if(FO)return vg;FO=1;var t=ki(),e=Oy(),u=nq(),s=t.rotl32,n=t.sum32,r=t.sum32_5,a=u.ft_1,o=e.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function c(){if(!(this instanceof c))return new c;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(c,o),vg=c,c.blockSize=512,c.outSize=160,c.hmacStrength=80,c.padLength=64,c.prototype._update=function(h,f){for(var p=this.W,y=0;y<16;y++)p[y]=h[f+y];for(;y<p.length;y++)p[y]=s(p[y-3]^p[y-8]^p[y-14]^p[y-16],1);var b=this.h[0],g=this.h[1],m=this.h[2],v=this.h[3],_=this.h[4];for(y=0;y<p.length;y++){var w=~~(y/20),S=r(s(b,5),a(w,g,m,v),_,p[y],l[w]);_=v,v=m,m=s(g,30),g=b,b=S}this.h[0]=n(this.h[0],b),this.h[1]=n(this.h[1],g),this.h[2]=n(this.h[2],m),this.h[3]=n(this.h[3],v),this.h[4]=n(this.h[4],_)},c.prototype._digest=function(h){return h==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},vg}var wg,qO;function iq(){if(qO)return wg;qO=1;var t=ki(),e=Oy(),u=nq(),s=Ey(),n=t.sum32,r=t.sum32_4,a=t.sum32_5,o=u.ch32,l=u.maj32,c=u.s0_256,d=u.s1_256,h=u.g0_256,f=u.g1_256,p=e.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;p.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}return t.inherits(b,p),wg=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(m,v){for(var _=this.W,w=0;w<16;w++)_[w]=m[v+w];for(;w<_.length;w++)_[w]=r(f(_[w-2]),_[w-7],h(_[w-15]),_[w-16]);var S=this.h[0],A=this.h[1],D=this.h[2],L=this.h[3],O=this.h[4],E=this.h[5],P=this.h[6],M=this.h[7];for(s(this.k.length===_.length),w=0;w<_.length;w++){var U=a(M,d(O),o(O,E,P),this.k[w],_[w]),j=n(c(S),l(S,A,D));M=P,P=E,E=O,O=n(L,U),L=D,D=A,A=S,S=n(U,j)}this.h[0]=n(this.h[0],S),this.h[1]=n(this.h[1],A),this.h[2]=n(this.h[2],D),this.h[3]=n(this.h[3],L),this.h[4]=n(this.h[4],O),this.h[5]=n(this.h[5],E),this.h[6]=n(this.h[6],P),this.h[7]=n(this.h[7],M)},b.prototype._digest=function(m){return m==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},wg}var Sg,BO;function sk(){if(BO)return Sg;BO=1;var t=ki(),e=iq();function u(){if(!(this instanceof u))return new u;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(u,e),Sg=u,u.blockSize=512,u.outSize=224,u.hmacStrength=192,u.padLength=64,u.prototype._digest=function(n){return n==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},Sg}var Tg,UO;function aq(){if(UO)return Tg;UO=1;var t=ki(),e=Oy(),u=Ey(),s=t.rotr64_hi,n=t.rotr64_lo,r=t.shr64_hi,a=t.shr64_lo,o=t.sum64,l=t.sum64_hi,c=t.sum64_lo,d=t.sum64_4_hi,h=t.sum64_4_lo,f=t.sum64_5_hi,p=t.sum64_5_lo,y=e.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function g(){if(!(this instanceof g))return new g;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}t.inherits(g,y),Tg=g,g.blockSize=1024,g.outSize=512,g.hmacStrength=192,g.padLength=128,g.prototype._prepareBlock=function(j,q){for(var $=this.W,Z=0;Z<32;Z++)$[Z]=j[q+Z];for(;Z<$.length;Z+=2){var X=P($[Z-4],$[Z-3]),le=M($[Z-4],$[Z-3]),K=$[Z-14],he=$[Z-13],Re=O($[Z-30],$[Z-29]),ie=E($[Z-30],$[Z-29]),ae=$[Z-32],Ee=$[Z-31];$[Z]=d(X,le,K,he,Re,ie,ae,Ee),$[Z+1]=h(X,le,K,he,Re,ie,ae,Ee)}},g.prototype._update=function(j,q){this._prepareBlock(j,q);var $=this.W,Z=this.h[0],X=this.h[1],le=this.h[2],K=this.h[3],he=this.h[4],Re=this.h[5],ie=this.h[6],ae=this.h[7],Ee=this.h[8],De=this.h[9],ge=this.h[10],de=this.h[11],fe=this.h[12],H=this.h[13],N=this.h[14],R=this.h[15];u(this.k.length===$.length);for(var T=0;T<$.length;T+=2){var x=N,B=R,k=D(Ee,De),V=L(Ee,De),J=m(Ee,De,ge,de,fe),z=v(Ee,De,ge,de,fe,H),Y=this.k[T],re=this.k[T+1],ce=$[T],Te=$[T+1],xe=f(x,B,k,V,J,z,Y,re,ce,Te),Le=p(x,B,k,V,J,z,Y,re,ce,Te);x=S(Z,X),B=A(Z,X),k=_(Z,X,le,K,he),V=w(Z,X,le,K,he,Re);var qe=l(x,B,k,V),G=c(x,B,k,V);N=fe,R=H,fe=ge,H=de,ge=Ee,de=De,Ee=l(ie,ae,xe,Le),De=c(ae,ae,xe,Le),ie=he,ae=Re,he=le,Re=K,le=Z,K=X,Z=l(xe,Le,qe,G),X=c(xe,Le,qe,G)}o(this.h,0,Z,X),o(this.h,2,le,K),o(this.h,4,he,Re),o(this.h,6,ie,ae),o(this.h,8,Ee,De),o(this.h,10,ge,de),o(this.h,12,fe,H),o(this.h,14,N,R)},g.prototype._digest=function(j){return j==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function m(U,j,q,$,Z){var X=U&q^~U&Z;return X<0&&(X+=4294967296),X}function v(U,j,q,$,Z,X){var le=j&$^~j&X;return le<0&&(le+=4294967296),le}function _(U,j,q,$,Z){var X=U&q^U&Z^q&Z;return X<0&&(X+=4294967296),X}function w(U,j,q,$,Z,X){var le=j&$^j&X^$&X;return le<0&&(le+=4294967296),le}function S(U,j){var q=s(U,j,28),$=s(j,U,2),Z=s(j,U,7),X=q^$^Z;return X<0&&(X+=4294967296),X}function A(U,j){var q=n(U,j,28),$=n(j,U,2),Z=n(j,U,7),X=q^$^Z;return X<0&&(X+=4294967296),X}function D(U,j){var q=s(U,j,14),$=s(U,j,18),Z=s(j,U,9),X=q^$^Z;return X<0&&(X+=4294967296),X}function L(U,j){var q=n(U,j,14),$=n(U,j,18),Z=n(j,U,9),X=q^$^Z;return X<0&&(X+=4294967296),X}function O(U,j){var q=s(U,j,1),$=s(U,j,8),Z=r(U,j,7),X=q^$^Z;return X<0&&(X+=4294967296),X}function E(U,j){var q=n(U,j,1),$=n(U,j,8),Z=a(U,j,7),X=q^$^Z;return X<0&&(X+=4294967296),X}function P(U,j){var q=s(U,j,19),$=s(j,U,29),Z=r(U,j,6),X=q^$^Z;return X<0&&(X+=4294967296),X}function M(U,j){var q=n(U,j,19),$=n(j,U,29),Z=a(U,j,6),X=q^$^Z;return X<0&&(X+=4294967296),X}return Tg}var Ag,QO;function ok(){if(QO)return Ag;QO=1;var t=ki(),e=aq();function u(){if(!(this instanceof u))return new u;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(u,e),Ag=u,u.blockSize=1024,u.outSize=384,u.hmacStrength=192,u.padLength=128,u.prototype._digest=function(n){return n==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},Ag}var HO;function uk(){return HO||(HO=1,vs.sha1=ak(),vs.sha224=sk(),vs.sha256=iq(),vs.sha384=ok(),vs.sha512=aq()),vs}var Eg={},$O;function ck(){if($O)return Eg;$O=1;var t=ki(),e=Oy(),u=t.rotl32,s=t.sum32,n=t.sum32_3,r=t.sum32_4,a=e.BlockHash;function o(){if(!(this instanceof o))return new o;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(o,a),Eg.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(g,m){for(var v=this.h[0],_=this.h[1],w=this.h[2],S=this.h[3],A=this.h[4],D=v,L=_,O=w,E=S,P=A,M=0;M<80;M++){var U=s(u(r(v,l(M,_,w,S),g[h[M]+m],c(M)),p[M]),A);v=A,A=S,S=u(w,10),w=_,_=U,U=s(u(r(D,l(79-M,L,O,E),g[f[M]+m],d(M)),y[M]),P),D=P,P=E,E=u(O,10),O=L,L=U}U=n(this.h[1],w,E),this.h[1]=n(this.h[2],S,P),this.h[2]=n(this.h[3],A,D),this.h[3]=n(this.h[4],v,L),this.h[4]=n(this.h[0],_,O),this.h[0]=U},o.prototype._digest=function(g){return g==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function l(b,g,m,v){return b<=15?g^m^v:b<=31?g&m|~g&v:b<=47?(g|~m)^v:b<=63?g&v|m&~v:g^(m|~v)}function c(b){return b<=15?0:b<=31?1518500249:b<=47?1859775393:b<=63?2400959708:2840853838}function d(b){return b<=15?1352829926:b<=31?1548603684:b<=47?1836072691:b<=63?2053994217:0}var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Eg}var Og,VO;function lk(){if(VO)return Og;VO=1;var t=ki(),e=Ey();function u(s,n,r){if(!(this instanceof u))return new u(s,n,r);this.Hash=s,this.blockSize=s.blockSize/8,this.outSize=s.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(n,r))}return Og=u,u.prototype._init=function(n){n.length>this.blockSize&&(n=new this.Hash().update(n).digest()),e(n.length<=this.blockSize);for(var r=n.length;r<this.blockSize;r++)n.push(0);for(r=0;r<n.length;r++)n[r]^=54;for(this.inner=new this.Hash().update(n),r=0;r<n.length;r++)n[r]^=106;this.outer=new this.Hash().update(n)},u.prototype.update=function(n,r){return this.inner.update(n,r),this},u.prototype.digest=function(n){return this.outer.update(this.inner.digest()),this.outer.digest(n)},Og}var kO;function kb(){return kO||(kO=1,function(t){var e=t;e.utils=ki(),e.common=Oy(),e.sha=uk(),e.ripemd=ck(),e.hmac=lk(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(mg)),mg}var zO;function dk(){if(zO)return Mt;zO=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.isTermGrounded=Mt.termToSignature=Mt.quadToSignature=Mt.sha1hex=Mt.hashTerm=Mt.hashTerms=Mt.getGraphBlankNodes=Mt.uniqGraph=Mt.deindexGraph=Mt.indexGraph=Mt.getQuadsWithoutBlankNodes=Mt.getQuadsWithBlankNodes=Mt.hasValue=Mt.hashValues=Mt.getBijectionInner=Mt.getBijection=Mt.isomorphic=void 0;const t=kb(),e=Xt(),u=un();function s(S,A){return!!n(S,A)}Mt.isomorphic=s;function n(S,A){const D=h(d(S)),L=h(d(A));if(Object.keys(D).length!==Object.keys(L).length)return null;for(const U in D)if(D[U]!==L[U])return null;const O=p(c(S)),E=p(c(A)),P=y(S),M=y(A);return r(O,E,P,M)}Mt.getBijection=n;function r(S,A,D,L,O,E){O||(O={}),E||(E={});const[P,M]=b(S,D,O),[U,j]=b(A,L,E);if(Object.keys(P).length!==Object.keys(U).length)return null;for(const $ in P)if(!l(U,P[$]))return null;let q={};for(const $ of D){const Z=e.termToString($),X=M[Z];for(const le in j)if(j[le]===X){q[Z]=le,delete j[le];break}}if(!a(Object.keys(q).sort(),D.map(e.termToString).sort())||!a(o(q).sort(),L.map(e.termToString).sort())){q=null;for(const $ of D){const Z=e.termToString($);if(!P[Z])for(const X of L){const le=e.termToString(X);if(!U[le]&&M[Z]===j[le]){const K=m(Z);q=r(S,A,D,L,Object.assign(Object.assign({},P),{[Z]:K}),Object.assign(Object.assign({},U),{[le]:K}))}}}}return q}Mt.getBijectionInner=r;function a(S,A){if(S.length!==A.length)return!1;for(let D=S.length;D--;)if(S[D]!==A[D])return!1;return!0}function o(S){const A=[];for(const D in S)A.push(S[D]);return A}Mt.hashValues=o;function l(S,A){for(const D in S)if(S[D]===A)return!0;return!1}Mt.hasValue=l;function c(S){return S.filter(A=>u.someTerms(A,D=>D.termType==="BlankNode"||D.termType==="Quad"&&u.getTermsNested(D).some(L=>L.termType==="BlankNode")))}Mt.getQuadsWithBlankNodes=c;function d(S){return S.filter(A=>u.everyTerms(A,D=>D.termType!=="BlankNode"&&!(D.termType==="Quad"&&u.getTermsNested(D).some(L=>L.termType==="BlankNode"))))}Mt.getQuadsWithoutBlankNodes=d;function h(S){const A={};for(const D of S)A[JSON.stringify(e.quadToStringQuad(D))]=!0;return A}Mt.indexGraph=h;function f(S){return Object.keys(S).map(A=>e.stringQuadToQuad(JSON.parse(A)))}Mt.deindexGraph=f;function p(S){return f(h(S))}Mt.uniqGraph=p;function y(S){return u.uniqTerms(S.map(A=>u.getBlankNodes(u.getTermsNested(A))).reduce((A,D)=>A.concat(D),[]))}Mt.getGraphBlankNodes=y;function b(S,A,D){const L=Object.assign({},D),O={};let E=!0;for(;E;){const P=Object.keys(L).length;for(const U of A){const j=e.termToString(U);if(!L[j]){const[q,$]=g(U,S,L);q&&(L[j]=$),O[j]=$}}const M={};for(const U in O){const j=O[U];M[j]===void 0?M[j]=U:M[j]=!1}for(const U in M){const j=M[U];j&&(L[j]=U)}E=P!==Object.keys(L).length}return[L,O]}Mt.hashTerms=b;function g(S,A,D){const L=[];let O=!0;for(const P of A){const M=u.getTermsNested(P);if(M.some(U=>U.equals(S))){L.push(v(P,D,S));for(const U of M)!w(U,D)&&!U.equals(S)&&(O=!1)}}const E=m(L.sort().join(""));return[O,E]}Mt.hashTerm=g;function m(S){return t.sha1().update(S).digest("hex")}Mt.sha1hex=m;function v(S,A,D){return u.getTerms(S).map(L=>_(L,A,D)).join("|")}Mt.quadToSignature=v;function _(S,A,D){return S.equals(D)?"@self":S.termType==="BlankNode"?A[e.termToString(S)]||"@blank":S.termType==="Quad"?`<${v(S,A,D)}>`:e.termToString(S)}Mt.termToSignature=_;function w(S,A){return S.termType!=="BlankNode"&&!(S.termType==="Quad"&&u.getTermsNested(S).some(D=>!w(D,A)))||!!A[e.termToString(S)]}return Mt.isTermGrounded=w,Mt}var GO;function fk(){return GO||(GO=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r),Object.defineProperty(s,a,{enumerable:!0,get:function(){return n[r]}})}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(dk(),t)}(bg)),bg}var WO;function hk(){if(WO)return _s;WO=1;var t=I&&I.__createBinding||(Object.create?function(W,Se,Ae,je){je===void 0&&(je=Ae);var He=Object.getOwnPropertyDescriptor(Se,Ae);(!He||("get"in He?!Se.__esModule:He.writable||He.configurable))&&(He={enumerable:!0,get:function(){return Se[Ae]}}),Object.defineProperty(W,je,He)}:function(W,Se,Ae,je){je===void 0&&(je=Ae),W[je]=Se[Ae]}),e=I&&I.__setModuleDefault||(Object.create?function(W,Se){Object.defineProperty(W,"default",{enumerable:!0,value:Se})}:function(W,Se){W.default=Se}),u=I&&I.__importStar||function(W){if(W&&W.__esModule)return W;var Se={};if(W!=null)for(var Ae in W)Ae!=="default"&&Object.prototype.hasOwnProperty.call(W,Ae)&&t(Se,W,Ae);return e(Se,W),Se},s=I&&I.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};Object.defineProperty(_s,"__esModule",{value:!0}),_s.toSparqlJs=_s.toSparql=void 0;const n=fk(),r=Xt(),a=Ay(),o=u(Ty()),l=s(Vb()),c=s(HT()),d=o.types,h=o.expressionTypes;let f;const p=new l.default;function y(W,Se={}){return new a.Generator(Se).stringify(b(W))}_s.toSparql=y;function b(W){g(),W=Ve(W);let Se=m(W);return Se.type==="group"?Se.patterns[0]:Se}_s.toSparqlJs=b;function g(){f={project:!1,extend:[],group:[],aggregates:[],order:[]}}function m(W){switch(W.type!==d.EXTEND&&W.type!==d.ORDER_BY&&W.type!==d.GRAPH&&(f.project=!1),W.type){case d.EXPRESSION:return v(W);case d.ASK:return de(W,d.ASK);case d.BGP:return U(W);case d.CONSTRUCT:return j(W);case d.DESCRIBE:return de(W,d.DESCRIBE);case d.DISTINCT:return q(W);case d.EXTEND:return $(W);case d.FROM:return Z(W);case d.FILTER:return X(W);case d.GRAPH:return le(W);case d.GROUP:return K(W);case d.JOIN:return he(W);case d.LEFT_JOIN:return Re(W);case d.MINUS:return ie(W);case d.NOP:return{};case d.ORDER_BY:return ae(W);case d.PATH:return Ee(W);case d.PATTERN:return De(W);case d.PROJECT:return de(W,d.PROJECT);case d.REDUCED:return H(W);case d.SERVICE:return N(W);case d.SLICE:return R(W);case d.UNION:return T(W);case d.VALUES:return x(W);case d.COMPOSITE_UPDATE:return Te(W);case d.DELETE_INSERT:return xe(W);case d.LOAD:return Le(W);case d.CLEAR:return qe(W);case d.CREATE:return G(W);case d.DROP:return F(W);case d.ADD:return te(W);case d.MOVE:return me(W);case d.COPY:return Oe(W)}throw new Error(`Unknown Operation type ${W.type}`)}function v(W){switch(W.expressionType){case h.AGGREGATE:return S(W);case h.EXISTENCE:return A(W);case h.NAMED:return D(W);case h.OPERATOR:return L(W);case h.TERM:return O(W);case h.WILDCARD:return E(W)}throw new Error(`Unknown Expression Operation type ${W.expressionType}`)}function _(W){switch(W.type){case d.ALT:return B(W);case d.INV:return k(W);case d.LINK:return V(W);case d.NPS:return J(W);case d.ONE_OR_MORE_PATH:return z(W);case d.SEQ:return Y(W);case d.ZERO_OR_MORE_PATH:return re(W);case d.ZERO_OR_ONE_PATH:return ce(W)}throw new Error(`Unknown Path type ${W.type}`)}function w(W){return(0,r.termToString)(W)}function S(W){const Se={expression:v(W.expression),type:"aggregate",aggregation:W.aggregator,distinct:W.distinct};return W.separator&&(Se.separator=W.separator),Se}function A(W){return{type:"operation",operator:W.not?"notexists":"exists",args:[{type:"group",patterns:c.default.flatten([m(W.input)])}]}}function D(W){return{type:"functionCall",function:W.name,args:W.args.map(v)}}function L(W){if(W.operator==="desc"){const Ae={expression:v(W.args[0])};return Ae.descending=!0,Ae}const Se={type:"operation",operator:W.operator,args:W.args.map(v)};return(Se.operator==="in"||Se.operator==="notin")&&(Se.args=[Se.args[0]].concat([Se.args.slice(1)])),Se}function O(W){return W.term}function E(W){return W.wildcard}function P(W){return Array.isArray(W)?W.length===1?W[0]:{type:"group",patterns:W}:W}function M(W){return W}function U(W){let Se=W.patterns.map(De);return Se.length===0?null:{type:"bgp",triples:Se}}function j(W){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:W.template.map(De),where:c.default.flatten([m(W.input)])}}function q(W){let Se=m(W.input);return Se.patterns[0].distinct=!0,Se}function $(W){return f.project?(f.extend.push(W),m(W.input)):c.default.flatten([m(W.input),{type:"bind",variable:W.variable,expression:v(W.expression)}])}function Z(W){const Se=m(W.input);let Ae=Se;return Se.type==="group"&&(Ae=Se.patterns[0]),Ae.from={default:W.default,named:W.named},Se}function X(W){return{type:"group",patterns:c.default.flatten([m(W.input),{type:"filter",expression:v(W.expression)}])}}function le(W){return{type:"graph",patterns:c.default.flatten([m(W.input)]),name:W.name}}function K(W){const Se=m(W.input),Ae=W.aggregates.map(M);return f.aggregates.push(...Ae),f.group.push(...W.variables),Se}function he(W){return c.default.flatten(W.input.map(m)).reduce((Ae,je)=>(je.type!=="bgp"||Ae.length==0||Ae[Ae.length-1].type!=="bgp"?Ae.push(je):Ae[Ae.length-1].triples.push(...je.triples),Ae),[])}function Re(W){const Se={type:"optional",patterns:[m(W.input[1])]};return W.expression&&Se.patterns.push({type:"filter",expression:v(W.expression)}),Se.patterns=c.default.flatten(Se.patterns),c.default.flatten([m(W.input[0]),Se])}function ie(W){let Se=m(W.input[1]);return Se.type==="group"&&(Se=Se.patterns),Array.isArray(Se)||(Se=[Se]),c.default.flatten([m(W.input[0]),{type:"minus",patterns:Se}])}function ae(W){return f.order.push(...W.expressions),m(W.input)}function Ee(W){return{type:"bgp",triples:[{subject:W.subject,predicate:_(W.predicate),object:W.object}]}}function De(W){return{subject:W.subject,predicate:W.predicate,object:W.object}}function ge(W,Se){let Ae=c.default.isSimpleTerm(W)?w(W):W;if(typeof Ae=="string"){if(Se[Ae])return Se[Ae]}else if(Array.isArray(W))W=W.map(je=>ge(je,Se));else for(let je of Object.keys(W))W[je]=ge(W[je],Se);return W}function de(W,Se){const Ae={type:"query",prefixes:{}},je=Ae;let He;Se===d.PROJECT?(Ae.queryType="SELECT",He=W.variables):Se===d.ASK?Ae.queryType="ASK":Se===d.DESCRIBE&&(Ae.queryType="DESCRIBE",He=W.terms);const Ge=f.extend,tt=f.group,lt=f.aggregates,ut=f.order;g(),f.project=!0;let oe=c.default.flatten([m(W.input)]);oe.length===1&&oe[0].type==="group"&&(oe=oe[0].patterns),Ae.where=oe;let C={};for(let Pe of f.aggregates)C[w(Pe.variable)]=v(Pe);let ee={};for(let Pe=f.extend.length-1;Pe>=0;--Pe){let Ue=f.extend[Pe];ee[w(Ue.variable)]=ge(v(Ue.expression),C)}f.group.length>0&&(je.group=f.group.map(Pe=>{let Ue=w(Pe);if(ee[Ue]){let Fe=ee[Ue];return delete ee[Ue],{variable:Pe,expression:Fe}}return{expression:Pe}})),f.order.length>0&&(je.order=f.order.map(m).map(Pe=>Pe.descending?Pe:{expression:Pe})),He&&(je.variables=He.map(Pe=>{let Ue=w(Pe);if(ee[Ue]){let Fe=ee[Ue];return delete ee[Ue],{variable:Pe,expression:Fe}}return Pe}),je.variables.length===0&&(je.variables=[new a.Wildcard]));const ye=Object.entries(ee);if(ye.length>0){je.where=je.where||[];for(const[Pe,Ue]of ye)je.where.push({type:"bind",variable:(0,r.stringToTerm)(Pe),expression:Ue})}if(Ae.where.length>0&&Ae.where[Ae.where.length-1].type==="filter"){const Pe=Ae.where[Ae.where.length-1];fe(Pe,Object.keys(C))&&(je.having=c.default.flatten([ge(Pe.expression,C)]),Ae.where.splice(-1))}return f.extend=Ge,f.group=tt,f.aggregates=lt,f.order=ut,{type:"group",patterns:[je]}}function fe(W,Se){return c.default.isSimpleTerm(W)?Se.indexOf(w(W))>=0:Array.isArray(W)?W.some(Ae=>fe(Ae,Se)):W===Object(W)?Object.keys(W).some(Ae=>fe(W[Ae],Se)):Se.indexOf(W)>=0}function H(W){let Se=m(W.input);return Se.patterns[0].reduced=!0,Se}function N(W){let Se=m(W.input);return Se.type==="group"&&(Se=Se.patterns),Array.isArray(Se)||(Se=[Se]),{type:"service",name:W.name,silent:W.silent,patterns:Se}}function R(W){let Se=m(W.input),Ae=Se;return Se.type&&Se.type==="group"&&(Ae=Se.patterns[0]),W.start!==0&&(Ae.offset=W.start),W.length!==void 0&&(Ae.limit=W.length),Se}function T(W){return{type:"union",patterns:W.input.map(m).map(P)}}function x(W){return{type:"values",values:W.bindings.map(Se=>{let Ae={};for(let je of W.variables){let He=`?${je.value}`;Se[He]?Ae[He]=Se[He]:Ae[He]=void 0}return Ae})}}function B(W){const Se=W.input.map(_);return Se.every(Ae=>"pathType"in Ae&&Ae.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:c.default.flatten(Se.map(Ae=>Ae.items))}]}:{type:"path",pathType:"|",items:Se}}function k(W){if(W.path.type===d.NPS){const Se=W.path.iris.map(Ae=>({type:"path",pathType:"^",items:[Ae]}));return Se.length<=1?{type:"path",pathType:"!",items:Se}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:Se}]}}return{type:"path",pathType:"^",items:[_(W.path)]}}function V(W){return W.iri}function J(W){return W.iris.length<=1?{type:"path",pathType:"!",items:W.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:W.iris}]}}function z(W){return{type:"path",pathType:"+",items:[_(W.path)]}}function Y(W){return{type:"path",pathType:"/",items:W.input.map(_)}}function re(W){return{type:"path",pathType:"*",items:[_(W.path)]}}function ce(W){return{type:"path",pathType:"?",items:[_(W.path)]}}function Te(W){const Se=W.updates.map(Ae=>m(Ae).updates[0]);return{prefixes:{},type:"update",updates:Se}}function xe(W){var Se;let Ae=W.where,je;if(Ae&&Ae.type===d.FROM){let Ge=Ae;Ae=Ge.input,je={default:Ge.default,named:Ge.named}}const He=[{updateType:"insertdelete",delete:We(W.delete||[]),insert:We(W.insert||[])}];if(je&&(He[0].using=je),!Ae||Ae.type===d.BGP&&Ae.patterns.length===0)He[0].where=[];else{const Ge=[];let tt=m(pe(Ae,Ge));if(tt.type==="group"?He[0].where=tt.patterns:He[0].where=[tt],Ge.length>0){if(Ge.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((Se=Ge[0])===null||Se===void 0?void 0:Se.value)!==""&&(He[0].where=[{type:"graph",patterns:He[0].where,name:Ge[0]}])}}return!W.delete&&!W.where?(He[0].updateType="insert",delete He[0].delete,delete He[0].where):!W.insert&&!W.where?(delete He[0].insert,delete He[0].where,W.delete.some(Ge=>Ge.subject.termType==="Variable"||Ge.predicate.termType==="Variable"||Ge.object.termType==="Variable")?He[0].updateType="deletewhere":He[0].updateType="delete"):!W.insert&&W.where&&W.where.type==="bgp"&&(0,n.isomorphic)(W.delete,W.where.patterns)&&(delete He[0].where,He[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:He}}function Le(W){const Se=[{type:"load",silent:!!W.silent,source:W.source}];return W.destination&&(Se[0].destination=W.destination),{prefixes:{},type:"update",updates:Se}}function qe(W){return Q(W,"clear")}function G(W){return Q(W,"create")}function F(W){return Q(W,"drop")}function Q(W,Se){const Ae=[{type:Se,silent:!!W.silent}];return W.source==="DEFAULT"?Ae[0].graph={default:!0}:W.source==="NAMED"?Ae[0].graph={named:!0}:W.source==="ALL"?Ae[0].graph={all:!0}:Ae[0].graph={type:"graph",name:W.source},{prefixes:{},type:"update",updates:Ae}}function te(W){return Ne(W,"add")}function me(W){return Ne(W,"move")}function Oe(W){return Ne(W,"copy")}function Ne(W,Se){const Ae=[{type:Se,silent:!!W.silent}];return Ae[0].source=W.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:W.source},Ae[0].destination=W.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:W.destination},{prefixes:{},type:"update",updates:Ae}}function We(W){if(!W)return[];const Se={};return W.forEach(Ae=>{const je=Ae.graph.value;Se[je]||(Se[je]=[]),Se[je].push(Ae)}),Object.keys(Se).map(Ae=>Ae===""?{type:"bgp",triples:Se[Ae].map(De)}:{type:"graph",triples:Se[Ae].map(De),name:Se[Ae][0].graph})}function Ve(W){return pe(W,[])}function pe(W,Se){if(Array.isArray(W))return W.map(tt=>pe(tt,Se));if(!W.type||W.type===d.DELETE_INSERT)return W;if((W.type===d.PATTERN||W.type===d.PATH)&&W.graph)return Se.push(W.graph),W.graph.name!==""?W.type===d.PATTERN?p.createPattern(W.subject,W.predicate,W.object):p.createPath(W.subject,W.predicate,W.object):W;const Ae={},je={},He={};for(let tt of Object.keys(W)){const lt=[];if(Ae[tt]=pe(W[tt],lt),lt.length>0){je[tt]=lt;for(const ut of lt)He[ut.value]=ut}}const Ge=Object.keys(He);if(Ge.length>0)if(Ge.length===1&&![d.PROJECT,d.SERVICE].includes(W.type))Se.push(He[Ge[0]]);else{if(W.type===d.BGP)return we(W,je.patterns);for(let tt of Object.keys(je)){const lt=Ae[tt];Array.isArray(lt)?Ae[tt]=lt.map((ut,oe)=>je[tt][0].value===""?ut:p.createGraph(ut,je[tt][oe])):je[tt][0].value!==""&&(Ae[tt]=p.createGraph(lt,je[tt][0]))}}return Ae}function we(W,Se){var Ae;const je={};for(let tt=0;tt<W.patterns.length;++tt){const lt=W.patterns[tt],ut=Se[tt].value;je[ut]=(Ae=je[ut])!==null&&Ae!==void 0?Ae:{patterns:[],graph:Se[tt]},je[ut].patterns.push(lt)}let He=[];for(const[tt,{patterns:lt,graph:ut}]of Object.entries(je)){const oe=p.createBgp(lt);He.push(tt===""?oe:p.createGraph(oe,ut))}let Ge=He[0];for(let tt=1;tt<He.length;++tt)Ge=p.createJoin([Ge,He[tt]]);return Ge}return _s}var JO;function Ot(){return JO||(JO=1,function(t){var e=I&&I.__createBinding||(Object.create?function(d,h,f,p){p===void 0&&(p=f);var y=Object.getOwnPropertyDescriptor(h,f);(!y||("get"in y?!h.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(d,p,y)}:function(d,h,f,p){p===void 0&&(p=f),d[p]=h[f]}),u=I&&I.__setModuleDefault||(Object.create?function(d,h){Object.defineProperty(d,"default",{enumerable:!0,value:h})}:function(d,h){d.default=h}),s=I&&I.__importStar||function(d){if(d&&d.__esModule)return d;var h={};if(d!=null)for(var f in d)f!=="default"&&Object.prototype.hasOwnProperty.call(d,f)&&e(h,d,f);return u(h,d),h},n=I&&I.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.toSparqlJs=t.toSparql=t.Factory=t.Algebra=t.translate=void 0;const r=n(nk());t.translate=r.default;const a=s(Ty());t.Algebra=a;const o=n(Vb());t.Factory=o.default;const l=hk();Object.defineProperty(t,"toSparql",{enumerable:!0,get:function(){return l.toSparql}}),Object.defineProperty(t,"toSparqlJs",{enumerable:!0,get:function(){return l.toSparqlJs}});const c=n(HT());t.Util=c.default}(cg)),cg}var XO;function sq(){if(XO)return gs;XO=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.materializeOperation=gs.materializeTerm=void 0;const t=Et(),e=Xt(),u=un(),s=Ot(),n=new t.DataFactory,r=n.literal("true",n.namedNode("http://www.w3.org/2001/XMLSchema#boolean"));function a(c,d){if(c.termType==="Variable"){const h=d.get(c);if(h)return h}return c.termType==="Quad"&&(0,u.someTermsNested)(c,h=>h.termType==="Variable")?(0,u.mapTermsNested)(c,h=>a(h,d)):c}gs.materializeTerm=a;function o(c,d,h,f={}){return f={strictTargetVariables:"strictTargetVariables"in f?f.strictTargetVariables:!1,bindFilter:"bindFilter"in f?f.bindFilter:!0,originalBindings:"originalBindings"in f?f.originalBindings:d},s.Util.mapOperation(c,{path(p,y){return{recurse:!1,result:Object.assign(y.createPath(a(p.subject,d),p.predicate,a(p.object,d),a(p.graph,d)),{metadata:p.metadata})}},pattern(p,y){return{recurse:!1,result:Object.assign(y.createPattern(a(p.subject,d),a(p.predicate,d),a(p.object,d),a(p.graph,d)),{metadata:p.metadata})}},extend(p){if(d.has(p.variable)){if(f.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,e.termToString)(p.variable)} in a BIND operator.`);return{recurse:!0,result:o(p.input,d,h,f)}}return{recurse:!0,result:p}},group(p,y){if(f.strictTargetVariables){for(const g of p.variables)if(d.has(g))throw new Error(`Tried to bind variable ${(0,e.termToString)(g)} in a GROUP BY operator.`);return{recurse:!0,result:p}}const b=p.variables.filter(g=>!d.has(g));return{recurse:!0,result:y.createGroup(p.input,b,p.aggregates)}},project(p,y){if(f.strictTargetVariables){for(const m of p.variables)if(d.has(m))throw new Error(`Tried to bind variable ${(0,e.termToString)(m)} in a SELECT operator.`);return{recurse:!0,result:p}}for(const m of d.keys())for(const v of p.variables)if(v.equals(m)){d=d.delete(m);break}const b=l(y,f.originalBindings,p.variables);let g=o(p.input,d,h,f);return b.length>0&&(g=y.createJoin([...b,g])),{recurse:!1,result:y.createProject(g,p.variables)}},filter(p,y){const b=f.originalBindings;if(p.expression.expressionType!=="operator"||b.size===0)return{recurse:!1,result:p};const g=l(y,b),m=o(p.expression,d,h,f);let v=o(p.input,d,h,f);return g.length>0&&(v=y.createJoin([...g,v])),{recurse:!1,result:y.createFilter(v,m)}},values(p,y){if(f.strictTargetVariables){for(const b of p.variables)if(d.has(b))throw new Error(`Tried to bind variable ${(0,e.termToString)(b)} in a VALUES operator.`)}else{const b=p.variables.filter(m=>!d.has(m)),g=p.bindings.map(m=>{const v={...m};let _=!0;return d.forEach((w,S)=>{const A=(0,e.termToString)(S);A in v&&(w.equals(v[A])||(_=!1),delete v[A])}),_?v:void 0}).filter(Boolean);return{recurse:!0,result:y.createValues(b,g)}}return{recurse:!1,result:p}},expression(p,y){if(!f.bindFilter)return{recurse:!1,result:p};if(p.expressionType==="term")return{recurse:!1,result:y.createTermExpression(a(p.term,d))};if(p.expressionType==="operator")return p.operator==="bound"&&p.args.length===1&&p.args[0].expressionType==="term"&&[...d.keys()].some(b=>p.args[0].term.equals(b))?{recurse:!1,result:y.createTermExpression(r)}:{recurse:!0,result:p};if(p.expressionType==="aggregate"&&"variable"in p&&d.has(p.variable)){if(f.strictTargetVariables)throw new Error(`Tried to bind ${(0,e.termToString)(p.variable)} in a ${p.aggregator} aggregate.`);return{recurse:!0,result:p}}return{recurse:!0,result:p}}})}gs.materializeOperation=o;function l(c,d,h){const f=[];for(const[p,y]of d)if(!h||h.some(b=>b.equals(p))){const b={[(0,e.termToString)(p)]:y};f.push(c.createValues([p],[b]))}return f}return gs}var KO;function oq(){if(KO)return _u;KO=1,Object.defineProperty(_u,"__esModule",{value:!0}),_u.ActorQueryOperation=void 0;const t=Lt,e=ot,u=UT(),s=sq();let n=0,r=class qi extends e.Actor{constructor(o){super(o)}static getSafeBindings(o){return qi.validateQueryOutput(o,"bindings"),o}static getSafeQuads(o){return qi.validateQueryOutput(o,"quads"),o}static getSafeBoolean(o){return qi.validateQueryOutput(o,"boolean"),o}static getSafeVoid(o){return qi.validateQueryOutput(o,"void"),o}static validateQueryOutput(o,l){if(o.type!==l)throw new Error(`Invalid query output type: Expected '${l}' but got '${o.type}'`)}static getBaseExpressionContext(o){const l=o.get(t.KeysInitQuery.queryTimestamp),c=o.get(t.KeysInitQuery.baseIRI),d=o.get(t.KeysInitQuery.functionArgumentsCache)??{};if(o.has(t.KeysInitQuery.extensionFunctionCreator)&&o.has(t.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");let h=o.get(t.KeysInitQuery.extensionFunctionCreator);const f=o.get(t.KeysInitQuery.extensionFunctions);return f&&(h=p=>f[p.value]),{now:l,baseIRI:c,extensionFunctionCreator:h,functionArgumentsCache:d}}static getExpressionContext(o,l){return{...this.getBaseExpressionContext(o),bnode:c=>new u.BlankNodeBindingsScoped(c??`BNODE_${n++}`)}}static getAsyncExpressionContext(o,l,c){return{...this.getBaseExpressionContext(o),bnode:d=>Promise.resolve(new u.BlankNodeBindingsScoped(d??`BNODE_${n++}`)),exists:qi.createExistenceResolver(o,l,c)}}static createExistenceResolver(o,l,c){return async(d,h)=>{const f=(0,s.materializeOperation)(d.input,h,c),p=await l.mediate({operation:f,context:o}),y=qi.getSafeBindings(p);return d.not!==((await y.bindingsStream.take(1).toArray()).length===1)}}static throwOnReadOnly(o){if(o.get(t.KeysQueryOperation.readOnly))throw new Error("Attempted a write operation in read-only mode")}static getOperationSource(o){var l;return(l=o.metadata)==null?void 0:l.scopedSource}static assignOperationSource(o,l){return o={...o},o.metadata=o.metadata?{...o.metadata}:{},o.metadata.scopedSource=l,o}static removeOperationSource(o){var l;(l=o.metadata)==null||delete l.scopedSource,o.metadata&&Object.keys(o.metadata).length===0&&delete o.metadata}static doesShapeAcceptOperation(o,l,c){return o.type==="conjunction"?o.children.every(d=>qi.doesShapeAcceptOperation(d,l,c)):o.type==="disjunction"?o.children.some(d=>qi.doesShapeAcceptOperation(d,l,c)):o.type==="arity"?qi.doesShapeAcceptOperation(o.child,l,c):((c==null?void 0:c.joinBindings)&&!o.joinBindings)??((c==null?void 0:c.filterBindings)&&!o.filterBindings)?!1:o.operation.operationType==="type"?o.operation.type==="project"||o.operation.type===l.type:o.operation.pattern.type===l.type}};return _u.ActorQueryOperation=r,_u}var Iu={},Rg={},Pu={},YO;function pk(){if(YO)return Pu;YO=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.MetadataValidationState=void 0;let t=class{constructor(){this.invalidateListeners=[],this.valid=!0}addInvalidateListener(u){this.invalidateListeners.push(u)}invalidate(){if(this.valid){this.valid=!1;for(const u of this.invalidateListeners)u()}}};return Pu.MetadataValidationState=t,Pu}var kn={},ZO;function yk(){if(ZO)return kn;ZO=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.cachifyMetadata=kn.validateMetadataBindings=kn.validateMetadataQuads=kn.getMetadataBindings=kn.getMetadataQuads=void 0;function t(r){return n(()=>new Promise((a,o)=>{r.getProperty("metadata",l=>a(l)),r.on("error",o)}).then(a=>u(a)))}kn.getMetadataQuads=t;function e(r){return n(()=>new Promise((a,o)=>{r.getProperty("metadata",l=>a(l)),r.on("error",o)}).then(a=>("canContainUndefs"in a||(a.canContainUndefs=!1),s(a))))}kn.getMetadataBindings=e;function u(r){for(const a of["cardinality"])if(!(a in r))throw new Error(`Invalid metadata: missing ${a} in ${JSON.stringify(r)}`);return r}kn.validateMetadataQuads=u;function s(r){for(const a of["cardinality","canContainUndefs","variables"])if(!(a in r))throw new Error(`Invalid metadata: missing ${a} in ${JSON.stringify(r)}`);return r}kn.validateMetadataBindings=s;function n(r){let a;return()=>(a||(a=r(),a.then(o=>o.state.addInvalidateListener(()=>{a=void 0})).catch(()=>{})),a)}return kn.cachifyMetadata=n,kn}var eR;function Cn(){return eR||(eR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(pk(),t),u(yk(),t)}(Rg)),Rg}var tR;function uq(){if(tR)return Iu;tR=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.ActorQueryOperationTyped=void 0;const t=Lt,e=Cn(),u=oq();let s=class extends u.ActorQueryOperation{constructor(r,a){if(super({...r,operationName:a}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(r){if(!r.operation)throw new Error("Missing field 'operation' in a query operation action.");if(r.operation.type!==this.operationName)throw new Error(`Actor ${this.name} only supports ${this.operationName} operations, but got ${r.operation.type}`);const a=r.operation;return this.testOperation(a,r.context)}async run(r){const a=r.context.get(t.KeysInitQuery.physicalQueryPlanLogger);a&&(a.logOperation(r.operation.type,void 0,r.operation,r.context.get(t.KeysInitQuery.physicalQueryPlanNode),this.name,{}),r.context=r.context.set(t.KeysInitQuery.physicalQueryPlanNode,r.operation));const o=r.operation,l=r.context.set(t.KeysQueryOperation.operation,o),c=await this.runOperation(o,l);return"metadata"in c&&(c.metadata=(0,e.cachifyMetadata)(c.metadata)),c}};return Iu.ActorQueryOperationTyped=s,Iu}var Du={},rR;function bk(){if(rR)return Du;rR=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.ActorQueryOperationTypedMediated=void 0;const t=uq();let e=class extends t.ActorQueryOperationTyped{constructor(s,n){super(s,n)}};return Du.ActorQueryOperationTypedMediated=e,Du}var Nu={},nR;function mk(){if(nR)return Nu;nR=1,Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.BusQueryOperation=void 0;const t=ot;let e=class extends t.BusIndexed{constructor(s){super({...s,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}};return Nu.BusQueryOperation=e,Nu}var Cu={},xg={},l1={exports:{}},iR;function Ry(){if(iR)return l1.exports;iR=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(S,A,D){return Function.prototype.apply.call(S,A,D)},u;t&&typeof t.ownKeys=="function"?u=t.ownKeys:Object.getOwnPropertySymbols?u=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:u=function(S){return Object.getOwnPropertyNames(S)};function s(w){console&&console.warn&&console.warn(w)}var n=Number.isNaN||function(S){return S!==S};function r(){r.init.call(this)}l1.exports=r,l1.exports.once=m,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var a=10;function o(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(w){if(typeof w!="number"||w<0||n(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");a=w}}),r.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||n(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function l(w){return w._maxListeners===void 0?r.defaultMaxListeners:w._maxListeners}r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(S){for(var A=[],D=1;D<arguments.length;D++)A.push(arguments[D]);var L=S==="error",O=this._events;if(O!==void 0)L=L&&O.error===void 0;else if(!L)return!1;if(L){var E;if(A.length>0&&(E=A[0]),E instanceof Error)throw E;var P=new Error("Unhandled error."+(E?" ("+E.message+")":""));throw P.context=E,P}var M=O[S];if(M===void 0)return!1;if(typeof M=="function")e(M,this,A);else for(var U=M.length,j=y(M,U),D=0;D<U;++D)e(j[D],this,A);return!0};function c(w,S,A,D){var L,O,E;if(o(A),O=w._events,O===void 0?(O=w._events=Object.create(null),w._eventsCount=0):(O.newListener!==void 0&&(w.emit("newListener",S,A.listener?A.listener:A),O=w._events),E=O[S]),E===void 0)E=O[S]=A,++w._eventsCount;else if(typeof E=="function"?E=O[S]=D?[A,E]:[E,A]:D?E.unshift(A):E.push(A),L=l(w),L>0&&E.length>L&&!E.warned){E.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+E.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=w,P.type=S,P.count=E.length,s(P)}return w}r.prototype.addListener=function(S,A){return c(this,S,A,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(S,A){return c(this,S,A,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(w,S,A){var D={fired:!1,wrapFn:void 0,target:w,type:S,listener:A},L=d.bind(D);return L.listener=A,D.wrapFn=L,L}r.prototype.once=function(S,A){return o(A),this.on(S,h(this,S,A)),this},r.prototype.prependOnceListener=function(S,A){return o(A),this.prependListener(S,h(this,S,A)),this},r.prototype.removeListener=function(S,A){var D,L,O,E,P;if(o(A),L=this._events,L===void 0)return this;if(D=L[S],D===void 0)return this;if(D===A||D.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete L[S],L.removeListener&&this.emit("removeListener",S,D.listener||A));else if(typeof D!="function"){for(O=-1,E=D.length-1;E>=0;E--)if(D[E]===A||D[E].listener===A){P=D[E].listener,O=E;break}if(O<0)return this;O===0?D.shift():b(D,O),D.length===1&&(L[S]=D[0]),L.removeListener!==void 0&&this.emit("removeListener",S,P||A)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(S){var A,D,L;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[S]),this;if(arguments.length===0){var O=Object.keys(D),E;for(L=0;L<O.length;++L)E=O[L],E!=="removeListener"&&this.removeAllListeners(E);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=D[S],typeof A=="function")this.removeListener(S,A);else if(A!==void 0)for(L=A.length-1;L>=0;L--)this.removeListener(S,A[L]);return this};function f(w,S,A){var D=w._events;if(D===void 0)return[];var L=D[S];return L===void 0?[]:typeof L=="function"?A?[L.listener||L]:[L]:A?g(L):y(L,L.length)}r.prototype.listeners=function(S){return f(this,S,!0)},r.prototype.rawListeners=function(S){return f(this,S,!1)},r.listenerCount=function(w,S){return typeof w.listenerCount=="function"?w.listenerCount(S):p.call(w,S)},r.prototype.listenerCount=p;function p(w){var S=this._events;if(S!==void 0){var A=S[w];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}r.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function y(w,S){for(var A=new Array(S),D=0;D<S;++D)A[D]=w[D];return A}function b(w,S){for(;S+1<w.length;S++)w[S]=w[S+1];w.pop()}function g(w){for(var S=new Array(w.length),A=0;A<S.length;++A)S[A]=w[A].listener||w[A];return S}function m(w,S){return new Promise(function(A,D){function L(E){w.removeListener(S,O),D(E)}function O(){typeof w.removeListener=="function"&&w.removeListener("error",L),A([].slice.call(arguments))}_(w,S,O,{once:!0}),S!=="error"&&v(w,L,{once:!0})})}function v(w,S,A){typeof w.on=="function"&&_(w,"error",S,A)}function _(w,S,A,D){if(typeof w.on=="function")D.once?w.once(S,A):w.on(S,A);else if(typeof w.addEventListener=="function")w.addEventListener(S,function L(O){D.once&&w.removeEventListener(S,L),A(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return l1.exports}var ju={},aR;function gk(){if(aR)return ju;aR=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.LinkedList=void 0;class t{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var u;return(u=this._head)===null||u===void 0?void 0:u.value}get last(){var u;return(u=this._tail)===null||u===void 0?void 0:u.value}get empty(){return this._head===null}push(u){const s={value:u,next:null};this._tail===null?this._head=this._tail=s:this._tail.next=this._tail=s,this._length++}shift(){if(this._head===null)return;const{value:u,next:s}=this._head;return this._head=s,s===null&&(this._tail=null),this._length--,u}clear(){this._length=0,this._head=this._tail=null}}return ju.LinkedList=t,ju}var Lu={},sR;function _k(){if(sR)return Lu;sR=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.createTaskScheduler=void 0;const t=Promise.resolve(void 0);function e(){const u=typeof queueMicrotask=="function"?queueMicrotask:a=>t.then(a),s=typeof setImmediate=="function"?setImmediate:a=>setTimeout(a,0);let n=0,r=null;return a=>{r!==null?r.push(a):++n<100?u(a):(r=[a],s(()=>{for(const o of r)u(o);r=null,n=0}))}}return Lu.createTaskScheduler=e,Lu}var oR;function Dt(){return oR||(oR=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isIterator=t.isIterable=t.isSourceExpression=t.isPromise=t.isEventEmitter=t.isFunction=t.range=t.union=t.fromIterable=t.fromIterator=t.fromArray=t.single=t.empty=t.wrap=t.WrappingIterator=t.ClonedIterator=t.UnionIterator=t.MultiTransformIterator=t.SimpleTransformIterator=t.TransformIterator=t.BufferedIterator=t.MappingIterator=t.DESTINATION=t.identity=t.IntegerIterator=t.ArrayIterator=t.SingletonIterator=t.EmptyIterator=t.AsyncIterator=t.DESTROYED=t.ENDED=t.CLOSED=t.CLOSING=t.OPEN=t.INIT=t.setTaskScheduler=t.getTaskScheduler=t.scheduleTask=t.LinkedList=void 0;const e=Ry(),u=gk();Object.defineProperty(t,"LinkedList",{enumerable:!0,get:function(){return u.LinkedList}});let n=_k().createTaskScheduler();function r(R){n(R)}t.scheduleTask=r;function a(){return n}t.getTaskScheduler=a;function o(R){n=R}t.setTaskScheduler=o,t.INIT=1,t.OPEN=2,t.CLOSING=4,t.CLOSED=8,t.ENDED=16,t.DESTROYED=32;class l extends e.EventEmitter{constructor(T=t.OPEN){super(),this._readable=!1,this._state=T,this.on("newListener",c)}_changeState(T,x=!1){const B=T>this._state&&this._state<t.ENDED;return B&&(this._state=T,T===t.ENDED&&(x?n(()=>this.emit("end")):this.emit("end"))),B}read(){return null}forEach(T,x){this.on("data",Ee(T,x))}close(){this._changeState(t.CLOSED)&&this._endAsync()}destroy(T){this.done||this._destroy(T,x=>{T=T||x,T&&this.emit("error",T),this._end(!0)})}_destroy(T,x){x()}_end(T=!1){this._changeState(T?t.DESTROYED:t.ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){n(()=>this._end())}get readable(){return this._readable}set readable(T){T=!!T&&!this.done,this._readable!==T&&(this._readable=T,T&&n(()=>this.emit("readable")))}get closed(){return this._state>=t.CLOSING}get ended(){return this._state===t.ENDED}get destroyed(){return this._state===t.DESTROYED}get done(){return this._state>=t.ENDED}toString(){const T=this._toStringDetails();return`[${this.constructor.name}${T?` ${T}`:""}]`}_toStringDetails(){return""}toArray(T){const x=[],B=typeof(T==null?void 0:T.limit)=="number"?T.limit:1/0;return this.ended||B<=0?Promise.resolve(x):new Promise((k,V)=>{const J=()=>k(x),z=Y=>{x.push(Y),x.length>=B&&(this.removeListener("error",V),this.removeListener("data",z),this.removeListener("end",J),k(x))};this.on("error",V),this.on("data",z),this.on("end",J)})}getProperty(T,x){const B=this._properties;if(!x)return B&&B[T];if(B&&T in B)n(()=>x(B[T]));else{let k;(k=this._propertyCallbacks)||(this._propertyCallbacks=k=Object.create(null)),T in k?k[T].push(x):k[T]=[x]}}setProperty(T,x){const B=this._properties||(this._properties=Object.create(null));B[T]=x;const k=this._propertyCallbacks||{},V=k[T];if(V){delete k[T],n(()=>{for(const J of V)J(x)});for(T in k)return;delete this._propertyCallbacks}}getProperties(){const T=this._properties,x={};for(const B in T)x[B]=T[B];return x}setProperties(T){for(const x in T)this.setProperty(x,T[x])}copyProperties(T,x){for(const B of x)T.getProperty(B,k=>this.setProperty(B,k))}transform(T){return new E(this,T)}map(T,x){return new m(this,Ee(T,x))}filter(T,x){return this.map(function(B){return T.call(x||this,B)?B:null})}uniq(T=g){const x=new Set;return this.filter(function(B){const k=T.call(this,B);return x.has(k)?!1:(x.add(k),!0)})}prepend(T){return this.transform({prepend:T})}append(T){return this.transform({append:T})}surround(T,x){return this.transform({prepend:T,append:x})}skip(T){return this.map(x=>T-- >0?null:x)}take(T){return this.transform({limit:T})}range(T,x){return this.transform({offset:T,limit:Math.max(x-T+1,0)})}clone(){return new j(this)}[Symbol.asyncIterator](){const T=this;let x=null,B=null,k=null;T.addListener("readable",V),T.addListener("end",V),T.addListener("error",J);function V(){if(x!==null)if(k!==null)J(k);else if(T.done)x({done:!0,value:void 0}),x=B=null,z();else{const Y=T.read();Y!==null&&(x({done:!1,value:Y}),x=B=null)}}function J(Y){B!==null?(B(Y),x=B=k=null,z()):k===null&&(k=Y)}function z(){T.removeListener("readable",V),T.removeListener("end",V),T.removeListener("error",J)}return{next(){return new Promise((Y,re)=>{x=Y,B=re,V()})}}}}t.AsyncIterator=l;function c(R){R==="data"&&(this.removeListener("newListener",c),h(this,"readable",d),this.readable&&n(()=>d.call(this)))}function d(){let R;for(;this.listenerCount("data")!==0&&(R=this.read())!==null;)this.emit("data",R);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",d),h(this,"newListener",c))}function h(R,T,x){R.listeners(T).includes(x)||R.on(T,x)}class f extends l{constructor(){super(),this._changeState(t.ENDED,!0)}}t.EmptyIterator=f;class p extends l{constructor(T){super(),this._item=T,T===null?this.close():this.readable=!0}read(){const T=this._item;return this._item=null,this.close(),T}_toStringDetails(){return this._item===null?"":`(${this._item})`}}t.SingletonIterator=p;class y extends l{constructor(T=[],{autoStart:x=!0,preserve:B=!0}={}){super();const k=B||!Array.isArray(T)?[...T]:T;this._index=0,this._sourceStarted=x!==!1,this._truncateThreshold=B?-1:64,this._sourceStarted&&k.length===0?this.close():this._buffer=k,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let T=null;return this._buffer&&(this._index<this._buffer.length&&(T=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),T}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(T,x){delete this._buffer,x()}toArray(T={}){if(!this._buffer)return Promise.resolve([]);const{length:x}=this._buffer,B=this._index,k=typeof T.limit!="number"?x:B+T.limit,V=this._buffer.slice(B,k);return this._index=k,k>=x&&this.close(),Promise.resolve(V)}}t.ArrayIterator=y;class b extends l{constructor({start:T=0,step:x=1,end:B}={}){super(),Number.isFinite(T)&&(T=Math.trunc(T)),this._next=T,Number.isFinite(x)&&(x=Math.trunc(x)),this._step=x;const k=x>=0,V=k?1/0:-1/0;Number.isFinite(B)?B=Math.trunc(B):B!==-V&&(B=V),this._last=B,!Number.isFinite(T)||(k?T>B:T<B)?this.close():this.readable=!0}read(){if(this.closed)return null;const T=this._next,x=this._step,B=this._last,k=this._next+=x;return(x>=0?k>B:k<B)&&this.close(),T}_toStringDetails(){return`(${this._next}...${this._last})`}}t.IntegerIterator=b;function g(R){return R}t.identity=g,t.DESTINATION=Symbol("destination");class m extends l{constructor(T,x=g,B={}){super(),this._map=x,this._source=v(T),this._destroySource=B.destroySource!==!1,T.done?this.close():(this._source[t.DESTINATION]=this,this._source.on("end",D),this._source.on("error",A),this._source.on("readable",S),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let T,x;for(;(T=this._source.read())!==null;)if((x=this._map(T))!==null)return x}this.readable=!1,this._source.done&&this.close()}return null}_end(T){this._source.removeListener("end",D),this._source.removeListener("error",A),this._source.removeListener("readable",S),delete this._source[t.DESTINATION],this._destroySource&&this._source.destroy(),super._end(T)}}t.MappingIterator=m;function v(R,T=!1){if(!R||!De(R.read)||!De(R.on))throw new TypeError(`Invalid source: ${R}`);if(!T&&R[t.DESTINATION])throw new Error("The source already has a destination");return R}class _ extends l{constructor({maxBufferSize:T=4,autoStart:x=!0}={}){super(t.INIT),this._buffer=new u.LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=T,n(()=>this._init(x)),this._sourceStarted=x!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(T){T!==1/0&&(T=Number.isFinite(T)?Math.max(Math.trunc(T),1):4),this._maxBufferSize!==T&&(this._maxBufferSize=T,this._state===t.OPEN&&this._fillBuffer())}_init(T){let x=!1;this._reading=!0,this._begin(()=>{if(x)throw new Error("done callback called multiple times");x=!0,this._reading=!1,this._changeState(t.OPEN),T?this._fillBufferAsync():this.readable=!0})}_begin(T){T()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const T=this._buffer;let x;return T.empty?(x=null,this.readable=!1):x=T.shift(),!this._reading&&T.length<this._maxBufferSize&&(this.closed?T.empty&&this._endAsync():this._fillBufferAsync()),x}_read(T,x){x()}_push(T){this.done||(this._pushedCount++,this._buffer.push(T),this.readable=!0)}_fillBuffer(){let T;this._reading||(this.closed?this._completeClose():(T=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(T,()=>{if(!T)throw new Error("done callback called multiple times");T=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,n(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(t.CLOSING):this._completeClose()}_completeClose(){this._changeState(t.CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(T,x){this._buffer.clear(),x()}_flush(T){T()}_toStringDetails(){const T=this._buffer;return`{${T.empty?"":`next: ${T.first}, `}buffer: ${T.length}}`}}t.BufferedIterator=_;class w extends _{constructor(T,x=T||{}){super(x),this._boundPush=B=>this._push(B),fe(T)||(T=x.source),ge(T)?this.source=T:T&&(this._createSource=de(T)?()=>T:T,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!x.optional,this._destroySource=x.destroySource!==!1}get source(){return De(this._createSource)&&this._loadSourceAsync(),this._source}set source(T){const x=this._source=this._validateSource(T);x[t.DESTINATION]=this,this.done?this._destroySource&&x.destroy():x.done?this.close():(x.on("end",L),x.on("readable",O),x.on("error",A))}_loadSourceAsync(){De(this._createSource)&&(Promise.resolve(this._createSource()).then(T=>{delete this._createSource,this.source=T,this._fillBuffer()},T=>this.emit("error",T)),this._createSource=null)}_validateSource(T,x=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return v(T,x)}_read(T,x){const B=()=>{this._pushedCount<T&&!this.closed?n(()=>this._readAndTransform(B,x)):x()};this._readAndTransform(B,x)}_readAndTransform(T,x){let B;const k=this.source;!k||k.done||(B=k.read())===null?x():this._optional?this._optionalTransform(B,T):this._transform(B,T,this._boundPush)}_optionalTransform(T,x){const B=this._pushedCount;this._transform(T,()=>{B===this._pushedCount&&this._push(T),x()},this._boundPush)}_transform(T,x,B){B(T),x()}_closeWhenDone(){this.close()}_end(T){const x=this._source;x&&(x.removeListener("end",L),x.removeListener("error",A),x.removeListener("readable",O),delete x[t.DESTINATION],this._destroySource&&x.destroy()),super._end(T)}}t.TransformIterator=w;function S(){this[t.DESTINATION].readable=!0}function A(R){this[t.DESTINATION].emit("error",R)}function D(){this[t.DESTINATION].close()}function L(){this[t.DESTINATION]._closeWhenDone()}function O(){this[t.DESTINATION]._sourceStarted!==!1&&this[t.DESTINATION]._fillBuffer()}class E extends w{constructor(T,x){if(super(T,x),this._offset=0,this._limit=1/0,this._filter=B=>!0,x=x||(fe(T)?null:T),x){const B=De(x)?x:x.transform,{limit:k,offset:V,filter:J,map:z,prepend:Y,append:re}=x;V===1/0||k===-1/0?this._limit=0:(Number.isFinite(V)&&(this._offset=Math.max(Math.trunc(V),0)),Number.isFinite(k)&&(this._limit=Math.max(Math.trunc(k),0)),De(J)&&(this._filter=J),De(z)&&(this._map=z),this._transform=De(B)?B:null),Y&&(this._prepender=ge(Y)?Y:K(Y)),re&&(this._appender=ge(re)?re:K(re))}}_read(T,x){const B=()=>this._readAndTransformSimple(T,k,x);this._readAndTransformSimple(T,k,x);function k(){n(B)}}_readAndTransformSimple(T,x,B){let k;const{source:V}=this;if(!V||V.done){B();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<T&&(k=V.read())!==null;){if(!this._filter(k)||this._offset!==0&&this._offset--)continue;const J=typeof this._map>"u"?k:this._map(k);if(J===null)this._optional&&this._push(k);else if(!De(this._transform))this._push(J);else{this._optional?this._optionalTransform(J,x):this._transform(J,x,this._boundPush);return}--this._limit===0&&this.close()}B()}_begin(T){this._insert(this._prepender,T),delete this._prepender}_flush(T){this._insert(this._appender,T),delete this._appender}_insert(T,x){const B=V=>this._push(V);!T||T.done?x():(T.on("data",B),T.on("end",k));function k(){T.removeListener("data",B),T.removeListener("end",k),x()}}}t.SimpleTransformIterator=E;class P extends w{constructor(T,x){if(super(T,x),this._transformerQueue=[],x){const B=De(x)?x:x.multiTransform;B&&(this._createTransformer=B)}}_read(T,x){const B=this._transformerQueue,k=this._optional;let V,J;for(;(V=B[0])&&V.transformer.done;){k&&V.item!==null&&(T--,this._push(V.item)),B.shift();const{transformer:Y}=V;Y.removeListener("end",O),Y.removeListener("readable",O),Y.removeListener("error",A)}const{source:z}=this;for(;z&&!z.done&&B.length<this.maxBufferSize&&(J=z.read(),J!==null);){const Y=this._createTransformer(J)||new f;Y[t.DESTINATION]=this,Y.on("end",O),Y.on("readable",O),Y.on("error",A),B.push({transformer:Y,item:J})}if(V=B[0],V){const{transformer:Y}=V;for(;T-- >0&&(J=Y.read())!==null;)this._push(J),k&&(V.item=null)}else z&&z.done&&this.close();x()}_createTransformer(T){return new p(T)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(T){if(super._end(T),this._destroySource)for(const x of this._transformerQueue)x.transformer.destroy()}}t.MultiTransformIterator=P;class M extends _{constructor(T,x={}){super(x),this._sources=[],this._currentSource=-1;const B=x.autoStart!==!1;if(ge(T))T.on("error",k=>this.emit("error",k)),this._pending={loading:!1,sources:T},B&&this._loadSources();else if(Array.isArray(T)&&T.length>0)for(const k of T)this._addSource(k);else B&&this.close();this._destroySources=x.destroySources!==!1}_loadSources(){const T=this._pending.sources;this._pending.loading=!0,T.done?(delete this._pending,this.close()):(T.on("data",x=>{this._addSource(x),this._fillBufferAsync()}),T.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(T){de(T)&&(T=Z(T)),T.done||(this._sources.push(T),T[t.DESTINATION]=this,T.on("error",A),T.on("readable",O),T.on("end",U))}_removeEmptySources(){this._sources=this._sources.filter((T,x)=>(T.done&&x<=this._currentSource&&this._currentSource--,!T.done)),this._fillBuffer()}_read(T,x){var B;((B=this._pending)===null||B===void 0?void 0:B.loading)===!1&&this._loadSources();let k=0,V;for(;k!==(k=T);)for(let J=0;J<this._sources.length&&T>0;J++)this._currentSource=(this._currentSource+1)%this._sources.length,(V=this._sources[this._currentSource].read())!==null&&(T--,this._push(V));!this._pending&&this._sources.length===0&&this.close(),x()}_end(T=!1){if(super._end(T),this._destroySources){for(const x of this._sources)x.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}t.UnionIterator=M;function U(){this[t.DESTINATION]._removeEmptySources()}class j extends w{constructor(T){super(T,{autoStart:!1}),this._readPosition=0,this._reading=!1,T&&(this.readable=!0)}_init(){}close(){l.prototype.close.call(this)}get source(){return super.source}set source(T){const x=this._source=this._validateSource(T),B=x&&x[t.DESTINATION]||(x[t.DESTINATION]=new q(x));this.done?this._destroySource&&x.destroy():B.endsAt(0)?this.close():(B.register(this),(x._sourceStarted===!1||B.readAt(0)!==null)&&(this.readable=!0));const k=this._propertyCallbacks;for(const V in k){const J=k[V];for(const z of J)this._getSourceProperty(V,z)}}_validateSource(T,x=!1){const B=T&&T[t.DESTINATION];return super._validateSource(T,!B||B instanceof q)}getProperty(T,x){const{source:B}=this,k=this._properties,V=k&&T in k;if(!x)return V?k&&k[T]:B&&B.getProperty(T);super.getProperty(T,x),B&&!V&&this._getSourceProperty(T,x)}_getSourceProperty(T,x){this.source.getProperty(T,B=>{(!this._properties||!(T in this._properties))&&x(B)})}getProperties(){const T=this.source?this.source.getProperties():{},x=this._properties;for(const B in x)T[B]=x[B];return T}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const T=this.source;let x=null;if(!this.done&&T){const B=T[t.DESTINATION];(x=B.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,B.endsAt(this._readPosition)&&this.close()}return x}_end(T){const x=this.source,B=x==null?void 0:x[t.DESTINATION];B&&B.unregister(this),_.prototype._end.call(this,T)}}t.ClonedIterator=j;class q{constructor(T){if(this._history=[],this._trackers=new Set,this._source=T,!T.done){const x=()=>{for(const V of this._trackers)V.readable=!0},B=V=>{for(const J of this._trackers)J.emit("error",V)},k=()=>{for(const V of this._trackers)V._sourceStarted!==!1&&V._readPosition===this._history.length&&V.close();this._trackers.clear(),T.removeListener("end",k),T.removeListener("error",B),T.removeListener("readable",x)};T.on("end",k),T.on("error",B),T.on("readable",x)}}register(T){this._source.done||this._trackers.add(T)}unregister(T){this._trackers.delete(T)}readAt(T){let x=null;return T<this._history.length?x=this._history[T]:!this._source.done&&(x=this._source.read())!==null&&(this._history[T]=x),x}endsAt(T){return this._source.done&&this._history.length===T}}class $ extends l{constructor(T,x){super(),this._source=null,this._destroySource=(x==null?void 0:x.destroySource)!==!1,de(T)?(this._source=new l,T.then(B=>{this._source=null,this.source=B}).catch(B=>this.emit("error",B))):T&&(this.source=T)}set source(T){let x=T;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(H(x)&&(x=x[Symbol.iterator]()),N(x)){let B=x;x=new e.EventEmitter,x.read=()=>{if(B!==null){let k;for(;!(k=B.next()).done;)if(k.value!==null)return k.value;B=null,this.close()}return null}}else x=v(x);if(this.done){this._destroySource&&De(x.destroy)&&x.destroy();return}x[t.DESTINATION]=this,x.on("end",D),x.on("error",A),x.on("readable",S),this._source=x,this.readable=x.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const T=this._source.read();if(T!==null)return T;this.readable=!1}return null}_end(T=!1){this._source!==null&&(this._source.removeListener("end",D),this._source.removeListener("error",A),this._source.removeListener("readable",S),delete this._source[t.DESTINATION],this._destroySource&&De(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(T)}}t.WrappingIterator=$;function Z(R,T){if(T&&("autoStart"in T||"optional"in T||"source"in T||"maxBufferSize"in T))return R&&!ge(R)&&(R=new $(R)),new w(R,T);if(!R)return X();if(de(R))return new $(R,T);if(R instanceof l)return R;if(Array.isArray(R))return K(R);if(H(R)||N(R)||ge(R))return new $(R,T);throw new TypeError(`Invalid source: ${R}`)}t.wrap=Z;function X(){return new f}t.empty=X;function le(R){return new p(R)}t.single=le;function K(R){return new y(R)}t.fromArray=K;function he(R){return new $(R)}t.fromIterator=he;function Re(R){return new $(R)}t.fromIterable=Re;function ie(R){return new M(R)}t.union=ie;function ae(R,T,x){return new b({start:R,end:T,step:x})}t.range=ae;function Ee(R,T){return T?R.bind(T):R}function De(R){return typeof R=="function"}t.isFunction=De;function ge(R){return De(R==null?void 0:R.on)}t.isEventEmitter=ge;function de(R){return De(R==null?void 0:R.then)}t.isPromise=de;function fe(R){return R&&(ge(R)||de(R)||De(R))}t.isSourceExpression=fe;function H(R){return R&&Symbol.iterator in R}t.isIterable=H;function N(R){return De(R==null?void 0:R.next)}t.isIterator=N}(xg)),xg}var uR;function vk(){if(uR)return Cu;uR=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.ClosableIterator=void 0;const t=Dt();let e=class extends t.AsyncIterator{constructor(a,o){super(),this.onClose=o.onClose,this._source=a,this._source[t.DESTINATION]=this,this._source.on("end",n),this._source.on("error",s),this._source.on("readable",u),this.readable=this._source.readable}read(){const a=this._source.read();return a||(this.readable=!1,this._source.done&&this.close()),a}_end(a){this.onClose(),this._source.removeListener("end",n),this._source.removeListener("error",s),this._source.removeListener("readable",u),delete this._source[t.DESTINATION],this._source.destroy(),super._end(a)}};Cu.ClosableIterator=e;function u(){this[t.DESTINATION].readable=!0}function s(r){this[t.DESTINATION].emit("error",r)}function n(){this[t.DESTINATION].close()}return Cu}var Mu={},cR;function wk(){if(cR)return Mu;cR=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.ClosableTransformIterator=void 0;const t=Dt();let e=class extends t.TransformIterator{constructor(s,n){super(s,n),this.onClose=n.onClose}_end(s){this.onClose(),super._end(s)}};return Mu.ClosableTransformIterator=e,Mu}var lR;function wt(){return lR||(lR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(oq(),t),u(uq(),t),u(bk(),t),u(sq(),t),u(mk(),t),u(vk(),t),u(wk(),t)}(ig)),ig}var Ig={},Fu={},Pg={},qu={},dR;function Sk(){if(dR)return qu;dR=1,Object.defineProperty(qu,"__esModule",{value:!0}),qu.ActorContextPreprocess=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return qu.ActorContextPreprocess=e,qu}var fR;function xy(){return fR||(fR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Sk(),t)}(Pg)),Pg}var hR;function Tk(){if(hR)return Fu;hR=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.ActorContextPreprocessConvertShortcuts=void 0;const t=xy(),e=ot;let u=class cq extends t.ActorContextPreprocess{constructor(n){super(n)}async test(n){return!0}async run(n){return{context:cq.expandShortcuts(n.context,this.contextKeyShortcuts)}}static expandShortcuts(n,r){for(const a of n.keys())r[a.name]&&(n=n.set(new e.ActionContextKey(r[a.name]),n.get(a)).delete(a));return n}};return Fu.ActorContextPreprocessConvertShortcuts=u,Fu}var pR;function Ak(){return pR||(pR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Tk(),t)}(Ig)),Ig}var Dg={},Bu={},yR;function Ek(){if(yR)return Bu;yR=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.ActorContextPreprocessSetDefaults=void 0;const t=xy(),e=Lt;let u=class extends t.ActorContextPreprocess{constructor(n){super(n),this.defaultFunctionArgumentsCache={}}async test(n){return!0}async run(n){let r=n.context;if(n.initialize){r=r.setDefault(e.KeysInitQuery.queryTimestamp,new Date).setDefault(e.KeysQuerySourceIdentify.sourceIds,new Map).setDefault(e.KeysCore.log,this.logger).setDefault(e.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(e.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores,new Map);let a={language:"sparql",version:"1.1"};r.has(e.KeysInitQuery.queryFormat)?(a=r.get(e.KeysInitQuery.queryFormat),a.language==="graphql"&&(r=r.setDefault(e.KeysInitQuery.graphqlSingularizeVariables,{}))):r=r.set(e.KeysInitQuery.queryFormat,a)}return{context:r}}};return Bu.ActorContextPreprocessSetDefaults=u,Bu}var bR;function Ok(){return bR||(bR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Ek(),t)}(Dg)),Dg}var Ng={},Uu={},mR;function Rk(){if(mR)return Uu;mR=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.ActorContextPreprocessSourceToDestination=void 0;const t=xy(),e=Lt;let u=class extends t.ActorContextPreprocess{constructor(n){super(n)}async test(n){return!0}async run(n){if(n.context.get(e.KeysInitQuery.querySourcesUnidentified)&&!n.context.get(e.KeysRdfUpdateQuads.destination)){const r=n.context.get(e.KeysInitQuery.querySourcesUnidentified);if(r.length===1)return{context:n.context.set(e.KeysRdfUpdateQuads.destination,r[0])}}return n}};return Uu.ActorContextPreprocessSourceToDestination=u,Uu}var gR;function xk(){return gR||(gR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Rk(),t)}(Ng)),Ng}var Cg={},Qu={},Hu={},jg={},_R;function $T(){return _R||(_R=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.deskolemizeOperation=t.deskolemizeQuad=t.deskolemizeTermNestedThrowing=t.deskolemizeTerm=t.skolemizeBindingsStream=t.skolemizeQuadStream=t.skolemizeBindings=t.skolemizeQuad=t.skolemizeTerm=t.getSourceId=t.SKOLEM_PREFIX=void 0;const e=UT(),u=Et(),s=un(),n=Ot(),r=new u.DataFactory;t.SKOLEM_PREFIX="urn:comunica_skolem:source_";function a(g,m){let v=g.get(m.referenceValue);return v===void 0&&(v=`${g.size}`,g.set(m.referenceValue,v)),v}t.getSourceId=a;function o(g,m){return g.termType==="BlankNode"?new e.BlankNodeScoped(`bc_${m}_${g.value}`,r.namedNode(`${t.SKOLEM_PREFIX}${m}:${g.value}`)):g}t.skolemizeTerm=o;function l(g,m){return(0,s.mapTermsNested)(g,v=>o(v,m))}t.skolemizeQuad=l;function c(g,m){return g.map(v=>v.termType==="Quad"?l(v,m):o(v,m))}t.skolemizeBindings=c;function d(g,m){const v=g.map(w=>l(w,m));function _(){g.getProperty("metadata",w=>{v.setProperty("metadata",w),w.state.addInvalidateListener(_)})}return _(),v}t.skolemizeQuadStream=d;function h(g,m){const v=g.map(w=>c(w,m));function _(){g.getProperty("metadata",w=>{v.setProperty("metadata",w),w.state.addInvalidateListener(_)})}return _(),v}t.skolemizeBindingsStream=h;function f(g,m){if(g.termType==="BlankNode"&&"skolemized"in g&&(g=g.skolemized),g.termType==="NamedNode"&&g.value.startsWith(t.SKOLEM_PREFIX)){const v=g.value.indexOf(":",t.SKOLEM_PREFIX.length);if(g.value.slice(t.SKOLEM_PREFIX.length,v)===m){const w=g.value.slice(v+1,g.value.length);return r.blankNode(w)}return null}return g}t.deskolemizeTerm=f;function p(g,m){if(g.termType==="Quad")return(0,s.mapTermsNested)(g,_=>{const w=f(_,m);if(!w)throw new Error("Skolemized term is not in scope for this source");return w});const v=f(g,m);if(v===null)throw new Error("Skolemized term is not in scope for this source");return v}t.deskolemizeTermNestedThrowing=p;function y(g,m){return(0,s.mapTermsNested)(g,v=>f(v,m)??v)}t.deskolemizeQuad=y;function b(g,m){try{return n.Util.mapOperation(g,{[n.Algebra.types.PATTERN](v,_){return{result:Object.assign(_.createPattern(p(v.subject,m),p(v.predicate,m),p(v.object,m),p(v.graph,m)),{metadata:v.metadata}),recurse:!1}},[n.Algebra.types.PATH](v,_){return{result:Object.assign(_.createPath(p(v.subject,m),v.predicate,p(v.object,m),p(v.graph,m)),{metadata:v.metadata}),recurse:!1}}})}catch{}}t.deskolemizeOperation=b}(jg)),jg}var vR;function lq(){if(vR)return Hu;vR=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.QuerySourceSkolemized=void 0;const t=Cn(),e=Dt(),u=$T();let s=class{constructor(r,a){this.innerSource=r,this.sourceId=a}async getSelectorShape(r){return this.innerSource.getSelectorShape(r)}queryBindings(r,a,o){const l=(0,u.deskolemizeOperation)(r,this.sourceId);if(!l){const c=new e.ArrayIterator([],{autoStart:!1});return c.setProperty("metadata",{state:new t.MetadataValidationState,cardinality:{type:"exact",value:0},canContainUndefs:!1,variables:[]}),c}return(0,u.skolemizeBindingsStream)(this.innerSource.queryBindings(l,a,o),this.sourceId)}queryBoolean(r,a){return this.innerSource.queryBoolean(r,a)}queryQuads(r,a){const o=(0,u.deskolemizeOperation)(r,this.sourceId);if(!o){const l=new e.ArrayIterator([],{autoStart:!1});return l.setProperty("metadata",{state:new t.MetadataValidationState,cardinality:{type:"exact",value:0}}),l}return(0,u.skolemizeQuadStream)(this.innerSource.queryQuads(o,a),this.sourceId)}queryVoid(r,a){return this.innerSource.queryVoid(r,a)}get referenceValue(){return this.innerSource.referenceValue}toString(){return`${this.innerSource.toString()}(SkolemID:${this.sourceId})`}};return Hu.QuerySourceSkolemized=s,Hu}var wR;function Ik(){if(wR)return Qu;wR=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.ActorContextPreprocessQuerySourceSkolemize=void 0;const t=xy(),e=Lt,u=lq(),s=$T();let n=class extends t.ActorContextPreprocess{constructor(a){super(a)}async test(a){return!0}async run(a){let o=a.context;if(o.has(e.KeysQueryOperation.querySources)){o.has(e.KeysQuerySourceIdentify.sourceIds)||(o=o.set(e.KeysQuerySourceIdentify.sourceIds,new Map));const l=o.getSafe(e.KeysQuerySourceIdentify.sourceIds);let c=o.getSafe(e.KeysQueryOperation.querySources);c=c.map(d=>({source:new u.QuerySourceSkolemized(d.source,(0,s.getSourceId)(l,d.source)),context:d.context})),o=o.set(e.KeysQueryOperation.querySources,c)}return{context:o}}};return Qu.ActorContextPreprocessQuerySourceSkolemize=n,Qu}var SR;function dq(){return SR||(SR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Ik(),t),u(lq(),t),u($T(),t)}(Cg)),Cg}var Lg={},$u={},TR;function Pk(){if(TR)return $u;TR=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.MediatorCombinePipeline=void 0;const t=ot;let e=class extends t.Mediator{constructor(s){super(s)}async mediate(s){let n;try{n=this.publish(s)}catch{return s}if(this.filterErrors){const a=[];for(const o of n)try{await o.reply,a.push(o)}catch{}n=a}if(n=await Promise.all(n.map(async({actor:a,reply:o})=>({actor:a,reply:await o}))),this.order){const a=o=>{const l=this.field?o[this.field]:o;if(typeof l!="number")throw new TypeError("Cannot order elements that are not numbers.");return l};n=n.sort((o,l)=>(this.order==="increasing"?1:-1)*(a(o.reply)-a(l.reply)))}let r=s;for(const{actor:a}of n)r={...r,...await a.runObservable(r)};return r}mediateWith(){throw new Error("Method not supported.")}};return $u.MediatorCombinePipeline=e,$u}var AR;function ER(){return AR||(AR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Pk(),t)}(Lg)),Lg}var Mg={},Vu={},Fg={},ku={},OR;function Dk(){if(OR)return ku;OR=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.ActorHashBindings=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return ku.ActorHashBindings=e,ku}var RR;function Nk(){return RR||(RR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Dk(),t)}(Fg)),Fg}var qg,xR;function Ck(){return xR||(xR=1,qg=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((n,r,a)=>`${n}${a===0?"":","}${t(r===void 0||typeof r=="symbol"?null:r)}`,"")}]`:`{${Object.keys(e).sort().reduce((s,n)=>{if(e[n]===void 0||typeof e[n]=="symbol")return s;const r=s.length===0?"":",";return`${s}${r}${t(n)}:${t(e[n])}`},"")}}`}),qg}var IR;function jk(){if(IR)return Vu;IR=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.ActorHashBindingsSha1=void 0;const t=Nk(),e=kb(),u=Xt(),s=Ck();let n=class extends t.ActorHashBindings{async test(a){if(!a.allowHashCollisions)throw new Error(`Actor ${this.name} can not provide hash functions without hash collisions`);return!0}async run(a){return{hashFunction:o=>(0,e.sha1)().update(s(Object.fromEntries([...o].map(([l,c])=>[(0,u.termToString)(l),(0,u.termToString)(c)])))).digest("hex"),hashCollisions:!0}}};return Vu.ActorHashBindingsSha1=n,Vu}var PR;function Lk(){return PR||(PR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(jk(),t)}(Mg)),Mg}var Bg={},zu={},DR;function Mk(){if(DR)return zu;DR=1,Object.defineProperty(zu,"__esModule",{value:!0}),zu.MediatorRace=void 0;const t=ot;let e=class extends t.Mediator{constructor(s){super(s)}mediateWith(s,n){return new Promise((r,a)=>{const o=[];for(const l of n)l.reply.then(()=>{r(l.actor)}).catch(c=>{o.push(c),o.length===n.length&&a(new Error(`${this.name} mediated over all rejecting actors:
${o.map(d=>d.message).join(`
`)}`))})})}};return zu.MediatorRace=e,zu}var NR;function cn(){return NR||(NR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Mk(),t)}(Bg)),Bg}var Ug={},Gu={},Qg={},Wu={},CR;function Fk(){if(CR)return Wu;CR=1,Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.ActorHashQuads=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return Wu.ActorHashQuads=e,Wu}var jR;function qk(){return jR||(jR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Fk(),t)}(Qg)),Qg}var LR;function Bk(){if(LR)return Gu;LR=1,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.ActorHashQuadsSha1=void 0;const t=qk(),e=kb(),u=Xt();let s=class extends t.ActorHashQuads{async test(r){if(!r.allowHashCollisions)throw new Error(`Actor ${this.name} can not provide hash functions without hash collisions`);return!0}async run(r){return{hashFunction:a=>(0,e.sha1)().update(JSON.stringify((0,u.quadToStringQuad)(a))).digest("hex"),hashCollisions:!0}}};return Gu.ActorHashQuadsSha1=s,Gu}var MR;function Uk(){return MR||(MR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Bk(),t)}(Ug)),Ug}var Hg={},Ju={},$g={},Xu={},FR;function Qk(){if(FR)return Xu;FR=1,Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.ActorOptimizeQueryOperation=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return Xu.ActorOptimizeQueryOperation=e,Xu}var qR;function di(){return qR||(qR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Qk(),t)}($g)),$g}var BR;function Hk(){if(BR)return Ju;BR=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.ActorOptimizeQueryOperationRewriteCopy=void 0;const t=di(),e=Ot();let u=class extends t.ActorOptimizeQueryOperation{constructor(n){super(n)}async test(n){return!0}async run(n){return{operation:e.Util.mapOperation(n.operation,{[e.Algebra.types.COPY](a,o){let l;return typeof a.destination=="string"&&typeof a.source=="string"&&a.destination===a.source||typeof a.destination!="string"&&typeof a.source!="string"&&a.destination.equals(a.source)?l=o.createCompositeUpdate([]):l=o.createCompositeUpdate([o.createDrop(a.destination,!0),o.createAdd(a.source,a.destination,a.silent)]),{result:l,recurse:!1}}}),context:n.context}}};return Ju.ActorOptimizeQueryOperationRewriteCopy=u,Ju}var UR;function $k(){return UR||(UR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Hk(),t)}(Hg)),Hg}var Vg={},Ku={},QR;function Vk(){if(QR)return Ku;QR=1,Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.ActorOptimizeQueryOperationRewriteMove=void 0;const t=di(),e=Ot();let u=class extends t.ActorOptimizeQueryOperation{constructor(n){super(n)}async test(n){return!0}async run(n){return{operation:e.Util.mapOperation(n.operation,{[e.Algebra.types.MOVE](a,o){let l;if(typeof a.destination=="string"&&typeof a.source=="string"&&a.destination===a.source||typeof a.destination!="string"&&typeof a.source!="string"&&a.destination.equals(a.source))l=o.createCompositeUpdate([]);else{const c=[o.createDrop(a.destination,!0),o.createAdd(a.source,a.destination,a.silent),o.createDrop(a.source)];l=o.createCompositeUpdate(c)}return{result:l,recurse:!1}}}),context:n.context}}};return Ku.ActorOptimizeQueryOperationRewriteMove=u,Ku}var HR;function kk(){return HR||(HR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Vk(),t)}(Vg)),Vg}var kg={},Yu={},$R;function zk(){if($R)return Yu;$R=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.ActorOptimizeQueryOperationRewriteAdd=void 0;const t=di(),e=Et(),u=Ot(),s=new e.DataFactory;let n=class extends t.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return!0}async run(a){return{operation:u.Util.mapOperation(a.operation,{[u.Algebra.types.ADD](l,c){const d=l.destination==="DEFAULT"?s.defaultGraph():l.destination,h=l.source==="DEFAULT"?s.defaultGraph():l.source;return{result:c.createDeleteInsert(void 0,[c.createPattern(s.variable("s"),s.variable("p"),s.variable("o"),d)],c.createPattern(s.variable("s"),s.variable("p"),s.variable("o"),h)),recurse:!1}}}),context:a.context}}};return Yu.ActorOptimizeQueryOperationRewriteAdd=n,Yu}var VR;function Gk(){return VR||(VR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(zk(),t)}(kg)),kg}var zg={},Zu={},kR;function Wk(){if(kR)return Zu;kR=1,Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.ActorOptimizeQueryOperationGroupSources=void 0;const t=di(),e=wt(),u=Ot(),s=new u.Factory;let n=class extends t.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){if(e.ActorQueryOperation.getOperationSource(a.operation))throw new Error(`Actor ${this.name} does not work with top-level operation sources.`);return!0}async run(a){return{operation:await this.groupOperation(a.operation,a.context),context:a.context}}async groupOperation(a,o){var h;if(e.ActorQueryOperation.getOperationSource(a)??!("input"in a))return a;if(!Array.isArray(a.input)){const f=await this.groupOperation(a.input,o);if((h=f.metadata)!=null&&h.scopedSource){const p=e.ActorQueryOperation.getOperationSource(f);e.ActorQueryOperation.doesShapeAcceptOperation(await p.source.getSelectorShape(o),a)&&(this.logDebug(o,`Hoist 1 source-specific operation into a single ${a.type} operation for ${p.source.toString()}`),e.ActorQueryOperation.removeOperationSource(f),a=e.ActorQueryOperation.assignOperationSource(a,p))}return{...a,input:f}}const l=await Promise.all(a.input.map(f=>this.groupOperation(f,o))),c=this.clusterOperationsWithEqualSources(l);if(c.length===1){const f=c[0],p=e.ActorQueryOperation.getOperationSource(c[0][0]);return{...await this.moveSourceAnnotationUpwardsIfPossible(a,f,p,o),input:f}}if(c.length===l.length)return{...a,input:l};let d;switch(a.type){case u.Algebra.types.JOIN:d=s.createJoin.bind(s);break;case u.Algebra.types.UNION:d=s.createUnion.bind(s);break;case u.Algebra.types.ALT:d=s.createAlt.bind(s);break;case u.Algebra.types.SEQ:d=s.createSeq.bind(s);break;default:throw new Error(`Unsupported operation '${a.type}' detected while grouping sources`)}return await this.groupOperationMulti(c,d,o)}async groupOperationMulti(a,o,l){let c=!0;const d=await Promise.all(a.map(async h=>{const f=e.ActorQueryOperation.getOperationSource(h[0]),p=await this.moveSourceAnnotationUpwardsIfPossible(o(h,!0),h,f,l);return e.ActorQueryOperation.getOperationSource(p)&&(c=!1),p}));return o(d,c)}clusterOperationsWithEqualSources(a){const o=new Map,l=[];for(const d of a){const h=e.ActorQueryOperation.getOperationSource(d);h?(o.has(h)||o.set(h,[]),o.get(h).push(d)):l.push(d)}const c=[];l.length>0&&c.push(l);for(const[d,h]of o.entries())c.push(h.map(f=>e.ActorQueryOperation.assignOperationSource(f,d)));return c}async moveSourceAnnotationUpwardsIfPossible(a,o,l,c){if(l&&e.ActorQueryOperation.doesShapeAcceptOperation(await l.source.getSelectorShape(c),a)){this.logDebug(c,`Hoist ${o.length} source-specific operations into a single ${a.type} operation for ${l.source.toString()}`),a=e.ActorQueryOperation.assignOperationSource(a,l);for(const d of o)e.ActorQueryOperation.removeOperationSource(d)}return a}};return Zu.ActorOptimizeQueryOperationGroupSources=n,Zu}var zR;function Jk(){return zR||(zR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Wk(),t)}(zg)),zg}var Gg={},ec={},GR;function Xk(){if(GR)return ec;GR=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.ActorOptimizeQueryOperationConstructDistinct=void 0;const t=di(),e=tr,u=Ot();let s=class extends t.ActorOptimizeQueryOperation{constructor(r){super(r)}async test(r){if(!r.context.has(e.KeysInitQuery.distinctConstruct))throw new Error(`${this.name} was not enabled by the query.`);return!0}async run(r){return{operation:u.Util.mapOperation(r.operation,{construct(o,l){return{recurse:!1,result:l.createDistinct(l.createConstruct(o.input,o.template))}}}),context:r.context.delete(e.KeysInitQuery.distinctConstruct)}}};return ec.ActorOptimizeQueryOperationConstructDistinct=s,ec}var WR;function Kk(){return WR||(WR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Xk(),t)}(Gg)),Gg}var Wg={},tc={},Jg={},rc={},JR;function Yk(){if(JR)return rc;JR=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.ActorQueryParse=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return rc.ActorQueryParse=e,rc}var XR;function fq(){return XR||(XR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Yk(),t)}(Jg)),Jg}var KR;function Zk(){if(KR)return tc;KR=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.ActorQueryParseSparql=void 0;const t=fq(),e=Ot(),u=Ay();let s=class extends t.ActorQueryParse{constructor(r){super(r),this.prefixes=Object.freeze(this.prefixes)}async test(r){if(r.queryFormat&&r.queryFormat.language!=="sparql")throw new Error("This actor can only parse SPARQL queries");return!0}async run(r){const o=new u.Parser({prefixes:this.prefixes,baseIRI:r.baseIRI,sparqlStar:!0}).parse(r.query);return{baseIRI:o.type==="query"?o.base:void 0,operation:(0,e.translate)(o,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:r.baseIRI})}}};return tc.ActorQueryParseSparql=s,tc}var YR;function ez(){return YR||(YR=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Zk(),t)}(Wg)),Wg}var Xg={},nc={},Kg={},Yg={},Zg={},ic={},ZR;function nu(){if(ZR)return ic;ZR=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.DirectiveNodeHandlerAdapter=void 0;let t=class{constructor(u,s,n){this.targetKind=u,this.util=s,this.settings=n}getDirectiveConditionalValue(u,s){const n=this.util.getArgument(u.arguments,"if");if(!n)throw new Error(`The directive ${u.name.value} is missing an if-argument.`);const r=this.util.handleNodeValue(n.value,n.name.value,s);if(r.terms.length!==1)throw new Error(`Can not apply the directive ${u.name.value} with a list.`);return r.terms[0]}isDirectiveScopeAll(u){const s=this.util.getArgument(u.arguments,"scope");return s&&s.value.kind==="EnumValue"&&s.value.value==="all"}};return ic.DirectiveNodeHandlerAdapter=t,ic}var ac={},ex;function tz(){if(ex)return ac;ex=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.DirectiveNodeHandlerInclude=void 0;const t=nu();let e=class extends t.DirectiveNodeHandlerAdapter{constructor(s,n){super("include",s,n)}handle(s,n){const r=this.getDirectiveConditionalValue(s.directive,n);return r.termType==="Literal"&&r.value==="false"?{ignore:!0}:{}}};return ac.DirectiveNodeHandlerInclude=e,ac}var sc={},tx;function rz(){if(tx)return sc;tx=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.DirectiveNodeHandlerOptional=void 0;const t=nu();let e=class extends t.DirectiveNodeHandlerAdapter{constructor(s,n){super("optional",s,n)}handle(s,n){return{operationOverrider:r=>this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),r)}}};return sc.DirectiveNodeHandlerOptional=e,sc}var oc={},e_={},rx;function Iy(){return rx||(rx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SingularizeState=void 0,function(e){e[e.SINGLE=0]="SINGLE",e[e.PLURAL=1]="PLURAL"}(t.SingularizeState||(t.SingularizeState={}))}(e_)),e_}var nx;function nz(){if(nx)return oc;nx=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.DirectiveNodeHandlerPlural=void 0;const t=Iy(),e=nu();let u=class extends e.DirectiveNodeHandlerAdapter{constructor(n,r){super("plural",n,r)}handle(n,r){return this.isDirectiveScopeAll(n.directive)&&(r.singularizeState=t.SingularizeState.PLURAL),delete r.singularizeVariables[this.util.nameToVariable(n.fieldLabel,r).value],{}}};return oc.DirectiveNodeHandlerPlural=u,oc}var uc={},ix;function iz(){if(ix)return uc;ix=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.DirectiveNodeHandlerSingle=void 0;const t=Iy(),e=nu();let u=class extends e.DirectiveNodeHandlerAdapter{constructor(n,r){super("single",n,r)}handle(n,r){return this.isDirectiveScopeAll(n.directive)&&(r.singularizeState=t.SingularizeState.SINGLE),r.singularizeVariables[this.util.nameToVariable(n.fieldLabel,r).value]=!0,{}}};return uc.DirectiveNodeHandlerSingle=u,uc}var cc={},ax;function az(){if(ax)return cc;ax=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.DirectiveNodeHandlerSkip=void 0;const t=nu();let e=class extends t.DirectiveNodeHandlerAdapter{constructor(s,n){super("skip",s,n)}handle(s,n){const r=this.getDirectiveConditionalValue(s.directive,n);return r.termType==="Literal"&&r.value==="true"?{ignore:!0}:{}}};return cc.DirectiveNodeHandlerSkip=e,cc}var sx;function hq(){return sx||(sx=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r),Object.defineProperty(s,a,{enumerable:!0,get:function(){return n[r]}})}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(nu(),t),u(tz(),t),u(rz(),t),u(nz(),t),u(iz(),t),u(az(),t)}(Zg)),Zg}var t_={},lc={},ox;function zi(){if(ox)return lc;ox=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.NodeValueHandlerAdapter=void 0;let t=class{constructor(u,s,n){this.targetKind=u,this.util=s,this.settings=n}};return lc.NodeValueHandlerAdapter=t,lc}var dc={},ux;function sz(){if(ux)return dc;ux=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.NodeValueHandlerBoolean=void 0;const t=zi();let e=class extends t.NodeValueHandlerAdapter{constructor(s,n){super("BooleanValue",s,n),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")}handle(s,n,r){return{terms:[this.util.dataFactory.literal(s.value?"true":"false",this.datatype)]}}};return dc.NodeValueHandlerBoolean=e,dc}var fc={},cx;function oz(){if(cx)return fc;cx=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.NodeValueHandlerEnum=void 0;const t=zi();let e=class extends t.NodeValueHandlerAdapter{constructor(s,n){super("EnumValue",s,n)}handle(s,n,r){return{terms:[this.util.valueToNamedNode(s.value,r.context)]}}};return fc.NodeValueHandlerEnum=e,fc}var hc={},lx;function uz(){if(lx)return hc;lx=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.NodeValueHandlerFloat=void 0;const t=zi();let e=class extends t.NodeValueHandlerAdapter{constructor(s,n){super("FloatValue",s,n),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#float")}handle(s,n,r){return{terms:[this.util.dataFactory.literal(s.value,this.datatype)]}}};return hc.NodeValueHandlerFloat=e,hc}var pc={},dx;function cz(){if(dx)return pc;dx=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.NodeValueHandlerInt=void 0;const t=zi();let e=class extends t.NodeValueHandlerAdapter{constructor(s,n){super("IntValue",s,n),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#integer")}handle(s,n,r){return{terms:[this.util.dataFactory.literal(s.value,this.datatype)]}}};return pc.NodeValueHandlerInt=e,pc}var yc={},fx;function lz(){if(fx)return yc;fx=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.NodeValueHandlerList=void 0;const t=zi();let e=class extends t.NodeValueHandlerAdapter{constructor(s,n){super("ListValue",s,n),this.nodeFirst=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),this.nodeRest=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),this.nodeNil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(s,n,r){const a=[];let o=[];for(const l of s.values){const c=this.util.handleNodeValue(l,n,r);for(const d of c.terms)a.push(d);c.auxiliaryPatterns&&(o=o.concat(c.auxiliaryPatterns))}if(this.settings.arraysToRdfLists){const l=this.util.dataFactory.blankNode();let c=l,d=a.length;for(const h of a){o.push(this.util.operationFactory.createPattern(c,this.nodeFirst,h,r.graph));const f=--d===0?this.nodeNil:this.util.dataFactory.blankNode();o.push(this.util.operationFactory.createPattern(c,this.nodeRest,f,r.graph)),c=f}return{terms:[l],auxiliaryPatterns:o}}else return{terms:a,auxiliaryPatterns:o}}};return yc.NodeValueHandlerList=e,yc}var bc={},hx;function dz(){if(hx)return bc;hx=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.NodeValueHandlerNull=void 0;const t=zi();let e=class extends t.NodeValueHandlerAdapter{constructor(s,n){super("NullValue",s,n),this.nil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(s,n,r){return{terms:[this.nil]}}};return bc.NodeValueHandlerNull=e,bc}var mc={},px;function fz(){if(px)return mc;px=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.NodeValueHandlerObject=void 0;const t=zi();let e=class extends t.NodeValueHandlerAdapter{constructor(s,n){super("ObjectValue",s,n)}handle(s,n,r){const a=this.util.dataFactory.blankNode();let o=[];for(const l of s.fields){const c=this.util.handleNodeValue(l.value,n,r);for(const d of c.terms)o.push(this.util.createQuadPattern(a,l.name,d,r.graph,r.context));c.auxiliaryPatterns&&(o=o.concat(c.auxiliaryPatterns))}return{terms:[a],auxiliaryPatterns:o}}};return mc.NodeValueHandlerObject=e,mc}var gc={},yx;function hz(){if(yx)return gc;yx=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.NodeValueHandlerString=void 0;const t=zi();let e=class extends t.NodeValueHandlerAdapter{constructor(s,n){super("StringValue",s,n)}handle(s,n,r){const a=r.context.getContextRaw()[n];let o,l;return a&&typeof a!="string"&&(a["@language"]?o=a["@language"]:a["@type"]&&(l=this.util.dataFactory.namedNode(a["@type"]))),{terms:[this.util.dataFactory.literal(s.value,o||l)]}}};return gc.NodeValueHandlerString=e,gc}var _c={},bx;function pz(){if(bx)return _c;bx=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.NodeValueHandlerVariable=void 0;const t=zi();let e=class extends t.NodeValueHandlerAdapter{constructor(s,n){super("Variable",s,n)}handle(s,n,r){const a=s.name.value,o=r.variablesDict[a],l=r.variablesMetaDict[a];if(!o){if(!r.ignoreUnknownVariables&&(!l||l.mandatory))throw new Error(`Undefined variable: ${a}`);{const c=this.util.dataFactory.variable(a);return r.terminalVariables.map(d=>d.value).indexOf(a)<0&&r.terminalVariables.push(c),{terms:[c]}}}if(o.kind==="Variable")throw new Error(`Variable refers to another variable: ${a}`);if(l)if(l.list){if(o.kind!=="ListValue")throw new Error(`Expected a list, but got ${o.kind} for ${a}`);if(l.type){const c=o;for(const d of c.values)if(d.kind!==l.type)throw new Error(`Expected ${l.type}, but got ${d.kind} for ${a}`)}}else l.type;return this.util.handleNodeValue(o,n,r)}};return _c.NodeValueHandlerVariable=e,_c}var mx;function yz(){return mx||(mx=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r),Object.defineProperty(s,a,{enumerable:!0,get:function(){return n[r]}})}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(zi(),t),u(sz(),t),u(oz(),t),u(uz(),t),u(cz(),t),u(lz(),t),u(dz(),t),u(fz(),t),u(hz(),t),u(pz(),t)}(t_)),t_}var vc={},gx;function zb(){if(gx)return vc;gx=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.NodeHandlerAdapter=void 0;let t=class{constructor(u,s,n){this.targetKind=u,this.util=s,this.settings=n}getNodeQuadContextSelectionSet(u,s,n){const r={};if(u){for(const a of u.selections)if(a.kind==="Field"){const o=a;this.handleNodeQuadContextField(o,n,r,"id","subject"),this.handleNodeQuadContextField(o,n,r,"graph","graph")}}return r}handleNodeQuadContextField(u,s,n,r,a){if(!n[a]&&u.name.value===r){if(!n[a]){const o=this.util.getArgument(u.arguments,"_");if(o){const l=this.util.handleNodeValue(o.value,u.name.value,s);if(l.terms.length!==1)throw new Error(`Only single values can be set as ${r}, but got ${l.terms.length} at ${u.name.value}`);n[a]=l.terms[0],l.auxiliaryPatterns&&(n.auxiliaryPatterns||(n.auxiliaryPatterns=[]),n.auxiliaryPatterns.concat(l.auxiliaryPatterns))}}if(!n[a]){const o=this.util.nameToVariable(this.util.getFieldLabel(u),s);s.terminalVariables.push(o),n[a]=o}}}getDirectiveOutputs(u,s,n){const r=[];if(u)for(const a of u){const o=this.util.handleDirectiveNode({directive:a,fieldLabel:s},n);if(o){if(o.ignore)return null;r.push(o)}}return r}handleDirectiveOutputs(u,s){for(const n of u){if(n.ignore)return this.util.operationFactory.createBgp([]);n.operationOverrider&&(s=n.operationOverrider(s))}return s}};return vc.NodeHandlerAdapter=t,vc}var wc={},_x;function VT(){if(_x)return wc;_x=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.NodeHandlerDefinitionAdapter=void 0;const t=zb();let e=class extends t.NodeHandlerAdapter{constructor(s,n,r){super(s,n,r)}};return wc.NodeHandlerDefinitionAdapter=e,wc}var Sc={},vx;function bz(){if(vx)return Sc;vx=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.NodeHandlerDefinitionFragment=void 0;const t=VT();let e=class extends t.NodeHandlerDefinitionAdapter{constructor(s,n){super("FragmentDefinition",s,n)}handle(s,n){throw new Error("Illegal state: fragment definitions must be indexed and removed before processing")}};return Sc.NodeHandlerDefinitionFragment=e,Sc}var Tc={},wx;function mz(){if(wx)return Tc;wx=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.NodeHandlerDefinitionOperation=void 0;const t=VT();let e=class extends t.NodeHandlerDefinitionAdapter{constructor(s,n){super("OperationDefinition",s,n)}handle(s,n){if(s.operation!=="query")throw new Error("Unsupported definition operation: "+s.operation);if(s.variableDefinitions)for(const o of s.variableDefinitions){const l=o.variable.name.value;o.defaultValue&&(n.variablesDict[l]||(n.variablesDict[l]=o.defaultValue));let c=o.type;const d=c.kind==="NonNullType";d&&(c=c.type);const h=c.kind==="ListType";h&&(c=c.type);const f=c.name.value;n.variablesMetaDict[l]={mandatory:d,list:h,type:f}}const r=this.getDirectiveOutputs(s.directives,s.name?s.name.value:"",n);if(!r)return this.util.operationFactory.createBgp([]);const a=this.util.joinOperations(s.selectionSet.selections.map(o=>this.util.handleNode(o,n)));return this.handleDirectiveOutputs(r,a)}};return Tc.NodeHandlerDefinitionOperation=e,Tc}var Ac={},Sx;function gz(){if(Sx)return Ac;Sx=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.NodeHandlerDocument=void 0;const t=Ot(),e=zb();let u=class extends e.NodeHandlerAdapter{constructor(n,r){super("Document",n,r)}handle(n,r){const a=n.definitions.map(l=>{const c=this.getNodeQuadContextDefinitionNode(l,Object.assign(Object.assign({},r),{ignoreUnknownVariables:!0})),d=Object.assign(Object.assign({},r),{graph:c.graph||r.graph,subject:c.subject||this.util.dataFactory.blankNode()});let h=this.util.handleNode(l,d);return c&&c.auxiliaryPatterns&&(h=this.util.joinOperations([h,this.util.operationFactory.createBgp(c.auxiliaryPatterns)])),h}),o=this.util.operationFactory.createProject(a.length===1?a[0]:this.util.operationFactory.createUnion(a),r.terminalVariables);return this.translateBlankNodesToVariables(o)}getNodeQuadContextDefinitionNode(n,r){if(n.kind==="OperationDefinition")return this.getNodeQuadContextSelectionSet(n.selectionSet,n.name?n.name.value:"",r);throw new Error(`Unsupported definition: ${n.kind}`)}translateBlankNodesToVariables(n){const r=this,a={},o=Array.from(n.variables).reduce((c,d)=>(c[d.value]=!0,c),{});return t.Util.mapOperation(n,{path:(c,d)=>({recurse:!1,result:d.createPath(l(c.subject),c.predicate,l(c.object),l(c.graph))}),pattern:(c,d)=>({recurse:!1,result:d.createPattern(l(c.subject),l(c.predicate),l(c.object),l(c.graph))})});function l(c){if(c.termType==="BlankNode"){let d=a[c.value];return d||(d=t.Util.createUniqueVariable(c.value,o,r.util.dataFactory),o[d.value]=!0,a[c.value]=d),d}return c}}};return Ac.NodeHandlerDocument=u,Ac}var Ec={},Tx;function Gb(){if(Tx)return Ec;Tx=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.NodeHandlerSelectionAdapter=void 0;const t=Ot(),e=Iy(),u=zb();let s=class extends u.NodeHandlerAdapter{constructor(r,a,o){super(r,a,o)}getNodeQuadContextFieldNode(r,a,o){return this.getNodeQuadContextSelectionSet(r.selectionSet,a,Object.assign(Object.assign({},o),{path:this.util.appendFieldToPath(o.path,a)}))}fieldToOperation(r,a,o,l){const c=o;let d=0,h;if((a.name.value==="id"||a.name.value==="graph")&&(o=!1,a.arguments))for(const S of a.arguments)S.name.value==="_"&&this.util.handleNodeValue(S.value,a.name.value,r);const f=this.util.getFieldLabel(a);if(r.singularizeState===e.SingularizeState.SINGLE&&(r.singularizeVariables[this.util.nameToVariable(f,r).value]=!0),o){const S=this.handleMetaField(r,f,l);if(S)return S}const p=l?[this.util.operationFactory.createBgp(l)]:[],y=this.getNodeQuadContextFieldNode(a,f,r);let b=y.subject||this.util.nameToVariable(f,r),g=y.graph||r.graph;y.auxiliaryPatterns&&p.push(this.util.operationFactory.createBgp(y.auxiliaryPatterns));let m=!0,v=null;if(o&&a.arguments&&a.arguments.length){for(const S of a.arguments)if(S.name.value==="_"){const A=this.util.handleNodeValue(S.value,a.name.value,r);v=A.terms,p.push(this.util.operationFactory.createBgp(A.terms.map(D=>this.util.createQuadPattern(r.subject,a.name,D,r.graph,r.context)))),A.auxiliaryPatterns&&p.push(this.util.operationFactory.createBgp(A.auxiliaryPatterns)),o=!1;break}else if(S.name.value==="graph"){const A=this.util.handleNodeValue(S.value,a.name.value,r);if(A.terms.length!==1)throw new Error(`Only single values can be set as graph, but got ${A.terms.length} at ${a.name.value}`);g=A.terms[0],r=Object.assign(Object.assign({},r),{graph:g}),A.auxiliaryPatterns&&p.push(this.util.operationFactory.createBgp(A.auxiliaryPatterns));break}else if(S.name.value==="alt"){let A=S.value;A.kind!=="ListValue"&&(A={kind:"ListValue",values:[A]}),p.push(this.util.createQuadPath(r.subject,a.name,A,b,r.graph,r.context)),m=!1;break}}if(o&&m&&p.push(this.util.operationFactory.createBgp([this.util.createQuadPattern(r.subject,a.name,b,r.graph,r.context)])),a.arguments&&a.arguments.length){for(const S of a.arguments)if(!(S.name.value==="_"||S.name.value==="graph"||S.name.value==="alt"))if(S.name.value==="first"){if(S.value.kind!=="IntValue")throw new Error("Invalid value type for 'first' argument: "+S.value.kind);h=parseInt(S.value.value,10)}else if(S.name.value==="offset"){if(S.value.kind!=="IntValue")throw new Error("Invalid value type for 'offset' argument: "+S.value.kind);d=parseInt(S.value.value,10)}else{const A=this.util.handleNodeValue(S.value,S.name.value,r);p.push(this.util.operationFactory.createBgp(A.terms.map(D=>this.util.createQuadPattern(b,S.name,D,r.graph,r.context)))),A.auxiliaryPatterns&&p.push(this.util.operationFactory.createBgp(A.auxiliaryPatterns))}}const _=this.getDirectiveOutputs(a.directives,f,r);if(!_)return this.util.operationFactory.createBgp([]);let w=this.util.joinOperations(p);if(a.selectionSet&&a.selectionSet.selections.length){if(v){if(v.length!==1)throw new Error(`Only single values can be set as id, but got ${v.length} at ${a.name.value}`);b=v[0]}const S=Object.assign(Object.assign(Object.assign({},r),c?{path:this.util.appendFieldToPath(r.path,f)}:{}),{graph:g,subject:c?b:r.subject});let A=!1;const D=a.selectionSet.selections.filter(O=>O.kind==="Field"&&O.name.value==="totalCount"?(A=!0,!1):!0);let L=this.util.joinOperations(p.concat(D.map(O=>this.util.handleNode(O,S))));if(A){const O=this.util.dataFactory.variable("var"+this.settings.expressionVariableCounter++),E=this.util.dataFactory.variable(b.value+this.settings.variableDelimiter+"totalCount"),P=this.util.operationFactory.createBoundAggregate(O,"count",this.util.operationFactory.createTermExpression(b),!1),M=this.util.operationFactory.createProject(this.util.operationFactory.createExtend(this.util.operationFactory.createGroup(w,[],[P]),E,this.util.operationFactory.createTermExpression(O)),[E]);r.terminalVariables.push(E),D.length?L=this.util.operationFactory.createJoin([this.util.operationFactory.createProject(L,[]),M]):L=M}w=L}else o&&b.termType==="Variable"&&r.terminalVariables.push(b);return(d||h)&&(w=this.util.operationFactory.createSlice(this.util.operationFactory.createProject(w,t.Util.inScopeVariables(w)),d,h)),this.handleDirectiveOutputs(_,w)}handleMetaField(r,a,o){if(a==="__typename"){const l=this.util.nameToVariable(a,r);return r.terminalVariables.push(l),this.util.operationFactory.createBgp([this.util.operationFactory.createPattern(r.subject,this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.util.nameToVariable(a,r),r.graph)].concat(o||[]))}}};return Ec.NodeHandlerSelectionAdapter=s,Ec}var Oc={},Ax;function _z(){if(Ax)return Oc;Ax=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.NodeHandlerSelectionField=void 0;const t=Gb();let e=class extends t.NodeHandlerSelectionAdapter{constructor(s,n){super("Field",s,n)}handle(s,n){return this.fieldToOperation(n,s,!0)}};return Oc.NodeHandlerSelectionField=e,Oc}var Rc={},Ex;function vz(){if(Ex)return Rc;Ex=1,Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.NodeHandlerSelectionFragmentSpread=void 0;const t=Gb();let e=class extends t.NodeHandlerSelectionAdapter{constructor(s,n){super("FragmentSpread",s,n)}handle(s,n){const r=n.fragmentDefinitions[s.name.value];if(!r)throw new Error("Undefined fragment definition: "+s.name.value);const a={alias:void 0,arguments:void 0,directives:r.directives,kind:"Field",name:s.name,selectionSet:r.selectionSet},o=[this.util.newTypePattern(n.subject,r.typeCondition,n)];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(n,a,!1,o))}};return Rc.NodeHandlerSelectionFragmentSpread=e,Rc}var xc={},Ox;function wz(){if(Ox)return xc;Ox=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.NodeHandlerSelectionInlineFragment=void 0;const t=Gb();let e=class extends t.NodeHandlerSelectionAdapter{constructor(s,n){super("InlineFragment",s,n)}handle(s,n){const r={alias:void 0,arguments:void 0,directives:s.directives,kind:"Field",name:{kind:"Name",value:n.subject.value},selectionSet:s.selectionSet},a=s.typeCondition?[this.util.newTypePattern(n.subject,s.typeCondition,n)]:[];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(n,r,!1,a))}};return xc.NodeHandlerSelectionInlineFragment=e,xc}var Rx;function pq(){return Rx||(Rx=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r),Object.defineProperty(s,a,{enumerable:!0,get:function(){return n[r]}})}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(hq(),t),u(yz(),t),u(zb(),t),u(VT(),t),u(bz(),t),u(mz(),t),u(gz(),t),u(Gb(),t),u(_z(),t),u(vz(),t),u(wz(),t)}(Yg)),Yg}var Ic={},yq=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag",Sz=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;const y3=Sz;function U1(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?U1=function(u){return typeof u}:U1=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},U1(t)}var Tz=10,bq=2;function mq(t){return Wb(t,[])}function Wb(t,e){switch(U1(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return t===null?"null":Az(t,e);default:return String(t)}}function Az(t,e){if(e.indexOf(t)!==-1)return"[Circular]";var u=[].concat(e,[t]),s=Rz(t);if(s!==void 0){var n=s.call(t);if(n!==t)return typeof n=="string"?n:Wb(n,u)}else if(Array.isArray(t))return Oz(t,u);return Ez(t,u)}function Ez(t,e){var u=Object.keys(t);if(u.length===0)return"{}";if(e.length>bq)return"["+xz(t)+"]";var s=u.map(function(n){var r=Wb(t[n],e);return n+": "+r});return"{ "+s.join(", ")+" }"}function Oz(t,e){if(t.length===0)return"[]";if(e.length>bq)return"[Array]";for(var u=Math.min(Tz,t.length),s=t.length-u,n=[],r=0;r<u;++r)n.push(Wb(t[r],e));return s===1?n.push("... 1 more item"):s>1&&n.push("... ".concat(s," more items")),"["+n.join(", ")+"]"}function Rz(t){var e=t[String(y3)];if(typeof e=="function")return e;if(typeof t.inspect=="function")return t.inspect}function xz(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){var u=t.constructor.name;if(typeof u=="string"&&u!=="")return u}return e}function r_(t,e){var u=!!t;if(!u)throw new Error(e)}const Iz=function(e,u){return e instanceof u};function xx(t,e){for(var u=0;u<e.length;u++){var s=e[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Pz(t,e,u){return e&&xx(t.prototype,e),u&&xx(t,u),t}var kT=function(){function t(e){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof e=="string"||r_(0,"Body must be a string. Received: ".concat(mq(e),".")),this.body=e,this.name=u,this.locationOffset=s,this.locationOffset.line>0||r_(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||r_(0,"column in locationOffset is 1-indexed and must be positive.")}return Pz(t,[{key:yq,get:function(){return"Source"}}]),t}();function Dz(t){return Iz(t,kT)}function cb(t,e){for(var u=/\r\n|[\n\r]/g,s=1,n=e+1,r;(r=u.exec(t.body))&&r.index<e;)s+=1,n=e+1-(r.index+r[0].length);return{line:s,column:n}}function gq(t){return zT(t.source,cb(t.source,t.start))}function zT(t,e){var u=t.locationOffset.column-1,s=Q1(u)+t.body,n=e.line-1,r=t.locationOffset.line-1,a=e.line+r,o=e.line===1?u:0,l=e.column+o,c="".concat(t.name,":").concat(a,":").concat(l,`
`),d=s.split(/\r\n|[\n\r]/g),h=d[n];if(h.length>120){for(var f=Math.floor(l/80),p=l%80,y=[],b=0;b<h.length;b+=80)y.push(h.slice(b,b+80));return c+Ix([["".concat(a),y[0]]].concat(y.slice(1,f+1).map(function(g){return["",g]}),[[" ",Q1(p-1)+"^"],["",y[f+1]]]))}return c+Ix([["".concat(a-1),d[n-1]],["".concat(a),h],["",Q1(l-1)+"^"],["".concat(a+1),d[n+1]]])}function Ix(t){var e=t.filter(function(s){s[0];var n=s[1];return n!==void 0}),u=Math.max.apply(Math,e.map(function(s){var n=s[0];return n.length}));return e.map(function(s){var n=s[0],r=s[1];return Nz(u,n)+(r?" | "+r:" |")}).join(`
`)}function Q1(t){return Array(t+1).join(" ")}function Nz(t,e){return Q1(t-e.length)+e}var rt=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),ke=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function H1(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?H1=function(u){return typeof u}:H1=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},H1(t)}function Cz(t){return H1(t)=="object"&&t!==null}function $1(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$1=function(u){return typeof u}:$1=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},$1(t)}function Px(t,e){var u=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),u.push.apply(u,s)}return u}function jz(t){for(var e=1;e<arguments.length;e++){var u=arguments[e]!=null?arguments[e]:{};e%2?Px(Object(u),!0).forEach(function(s){Lz(t,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(u)):Px(Object(u)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(u,s))})}return t}function Lz(t,e,u){return e in t?Object.defineProperty(t,e,{value:u,enumerable:!0,configurable:!0,writable:!0}):t[e]=u,t}function Mz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dx(t,e){for(var u=0;u<e.length;u++){var s=e[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Fz(t,e,u){return e&&Dx(t.prototype,e),u&&Dx(t,u),t}function qz(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ty(t,e)}function Bz(t){var e=vq();return function(){var s=ry(t),n;if(e){var r=ry(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return _q(this,n)}}function _q(t,e){return e&&($1(e)==="object"||typeof e=="function")?e:R0(t)}function R0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b3(t){var e=typeof Map=="function"?new Map:void 0;return b3=function(s){if(s===null||!Uz(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(s))return e.get(s);e.set(s,n)}function n(){return V1(s,arguments,ry(this).constructor)}return n.prototype=Object.create(s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ty(n,s)},b3(t)}function V1(t,e,u){return vq()?V1=Reflect.construct:V1=function(n,r,a){var o=[null];o.push.apply(o,r);var l=Function.bind.apply(n,o),c=new l;return a&&ty(c,a.prototype),c},V1.apply(null,arguments)}function vq(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Uz(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function ty(t,e){return ty=Object.setPrototypeOf||function(s,n){return s.__proto__=n,s},ty(t,e)}function ry(t){return ry=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},ry(t)}var Qz=function(t){qz(u,t);var e=Bz(u);function u(s,n,r,a,o,l,c){var d,h,f,p;Mz(this,u),p=e.call(this,s),p.name="GraphQLError",p.originalError=l??void 0,p.nodes=Nx(Array.isArray(n)?n:n?[n]:void 0);for(var y=[],b=0,g=(m=p.nodes)!==null&&m!==void 0?m:[];b<g.length;b++){var m,v=g[b],_=v.loc;_!=null&&y.push(_)}y=Nx(y),p.source=r??((d=y)===null||d===void 0?void 0:d[0].source),p.positions=a??((h=y)===null||h===void 0?void 0:h.map(function(S){return S.start})),p.locations=a&&r?a.map(function(S){return cb(r,S)}):(f=y)===null||f===void 0?void 0:f.map(function(S){return cb(S.source,S.start)}),p.path=o??void 0;var w=l==null?void 0:l.extensions;return c==null&&Cz(w)?p.extensions=jz({},w):p.extensions=c??{},Object.defineProperties(R0(p),{message:{enumerable:!0},locations:{enumerable:p.locations!=null},path:{enumerable:p.path!=null},extensions:{enumerable:p.extensions!=null&&Object.keys(p.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),l!=null&&l.stack?(Object.defineProperty(R0(p),"stack",{value:l.stack,writable:!0,configurable:!0}),_q(p)):(Error.captureStackTrace?Error.captureStackTrace(R0(p),u):Object.defineProperty(R0(p),"stack",{value:Error().stack,writable:!0,configurable:!0}),p)}return Fz(u,[{key:"toString",value:function(){return Hz(this)}},{key:yq,get:function(){return"Object"}}]),u}(b3(Error));function Nx(t){return t===void 0||t.length===0?void 0:t}function Hz(t){var e=t.message;if(t.nodes)for(var u=0,s=t.nodes;u<s.length;u++){var n=s[u];n.loc&&(e+=`

`+gq(n.loc))}else if(t.source&&t.locations)for(var r=0,a=t.locations;r<a.length;r++){var o=a[r];e+=`

`+zT(t.source,o)}return e}function Jn(t,e,u){return new Qz("Syntax Error: ".concat(u),void 0,t,[e])}function $z(t,e){var u=!!t;if(!u)throw new Error(e??"Unexpected invariant triggered.")}function wq(t){var e=t.prototype.toJSON;typeof e=="function"||$z(0),t.prototype.inspect=e,y3&&(t.prototype[y3]=e)}var GT=function(){function t(u,s,n){this.start=u.start,this.end=s.end,this.startToken=u,this.endToken=s,this.source=n}var e=t.prototype;return e.toJSON=function(){return{start:this.start,end:this.end}},t}();wq(GT);var Er=function(){function t(u,s,n,r,a,o,l){this.kind=u,this.start=s,this.end=n,this.line=r,this.column=a,this.value=l,this.prev=o,this.next=null}var e=t.prototype;return e.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t}();wq(Er);function Cx(t){return t!=null&&typeof t.kind=="string"}function Vz(t){var e=t.split(/\r\n|[\n\r]/g),u=kz(t);if(u!==0)for(var s=1;s<e.length;s++)e[s]=e[s].slice(u);for(var n=0;n<e.length&&jx(e[n]);)++n;for(var r=e.length;r>n&&jx(e[r-1]);)--r;return e.slice(n,r).join(`
`)}function jx(t){for(var e=0;e<t.length;++e)if(t[e]!==" "&&t[e]!=="	")return!1;return!0}function kz(t){for(var e,u=!0,s=!0,n=0,r=null,a=0;a<t.length;++a)switch(t.charCodeAt(a)){case 13:t.charCodeAt(a+1)===10&&++a;case 10:u=!1,s=!0,n=0;break;case 9:case 32:++n;break;default:s&&!u&&(r===null||n<r)&&(r=n),s=!1}return(e=r)!==null&&e!==void 0?e:0}function zz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=t.indexOf(`
`)===-1,n=t[0]===" "||t[0]==="	",r=t[t.length-1]==='"',a=t[t.length-1]==="\\",o=!s||r||a||u,l="";return o&&!(s&&n)&&(l+=`
`+e),l+=e?t.replace(/\n/g,`
`+e):t,o&&(l+=`
`),'"""'+l.replace(/"""/g,'\\"""')+'"""'}var Sq=function(){function t(u){var s=new Er(ke.SOF,0,0,0,0,null);this.source=u,this.lastToken=s,this.token=s,this.line=1,this.lineStart=0}var e=t.prototype;return e.advance=function(){this.lastToken=this.token;var s=this.token=this.lookahead();return s},e.lookahead=function(){var s=this.token;if(s.kind!==ke.EOF)do{var n;s=(n=s.next)!==null&&n!==void 0?n:s.next=Wz(this,s)}while(s.kind===ke.COMMENT);return s},t}();function Gz(t){return t===ke.BANG||t===ke.DOLLAR||t===ke.AMP||t===ke.PAREN_L||t===ke.PAREN_R||t===ke.SPREAD||t===ke.COLON||t===ke.EQUALS||t===ke.AT||t===ke.BRACKET_L||t===ke.BRACKET_R||t===ke.BRACE_L||t===ke.PIPE||t===ke.BRACE_R}function Xs(t){return isNaN(t)?ke.EOF:t<127?JSON.stringify(String.fromCharCode(t)):'"\\u'.concat(("00"+t.toString(16).toUpperCase()).slice(-4),'"')}function Wz(t,e){for(var u=t.source,s=u.body,n=s.length,r=e.end;r<n;){var a=s.charCodeAt(r),o=t.line,l=1+r-t.lineStart;switch(a){case 65279:case 9:case 32:case 44:++r;continue;case 10:++r,++t.line,t.lineStart=r;continue;case 13:s.charCodeAt(r+1)===10?r+=2:++r,++t.line,t.lineStart=r;continue;case 33:return new Er(ke.BANG,r,r+1,o,l,e);case 35:return Xz(u,r,o,l,e);case 36:return new Er(ke.DOLLAR,r,r+1,o,l,e);case 38:return new Er(ke.AMP,r,r+1,o,l,e);case 40:return new Er(ke.PAREN_L,r,r+1,o,l,e);case 41:return new Er(ke.PAREN_R,r,r+1,o,l,e);case 46:if(s.charCodeAt(r+1)===46&&s.charCodeAt(r+2)===46)return new Er(ke.SPREAD,r,r+3,o,l,e);break;case 58:return new Er(ke.COLON,r,r+1,o,l,e);case 61:return new Er(ke.EQUALS,r,r+1,o,l,e);case 64:return new Er(ke.AT,r,r+1,o,l,e);case 91:return new Er(ke.BRACKET_L,r,r+1,o,l,e);case 93:return new Er(ke.BRACKET_R,r,r+1,o,l,e);case 123:return new Er(ke.BRACE_L,r,r+1,o,l,e);case 124:return new Er(ke.PIPE,r,r+1,o,l,e);case 125:return new Er(ke.BRACE_R,r,r+1,o,l,e);case 34:return s.charCodeAt(r+1)===34&&s.charCodeAt(r+2)===34?Zz(u,r,o,l,e,t):Yz(u,r,o,l,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Kz(u,r,a,o,l,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return tG(u,r,o,l,e)}throw Jn(u,r,Jz(a))}var c=t.line,d=1+r-t.lineStart;return new Er(ke.EOF,n,n,c,d,e)}function Jz(t){return t<32&&t!==9&&t!==10&&t!==13?"Cannot contain the invalid character ".concat(Xs(t),"."):t===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(Xs(t),".")}function Xz(t,e,u,s,n){var r=t.body,a,o=e;do a=r.charCodeAt(++o);while(!isNaN(a)&&(a>31||a===9));return new Er(ke.COMMENT,e,o,u,s,n,r.slice(e+1,o))}function Kz(t,e,u,s,n,r){var a=t.body,o=u,l=e,c=!1;if(o===45&&(o=a.charCodeAt(++l)),o===48){if(o=a.charCodeAt(++l),o>=48&&o<=57)throw Jn(t,l,"Invalid number, unexpected digit after 0: ".concat(Xs(o),"."))}else l=n_(t,l,o),o=a.charCodeAt(l);if(o===46&&(c=!0,o=a.charCodeAt(++l),l=n_(t,l,o),o=a.charCodeAt(l)),(o===69||o===101)&&(c=!0,o=a.charCodeAt(++l),(o===43||o===45)&&(o=a.charCodeAt(++l)),l=n_(t,l,o),o=a.charCodeAt(l)),o===46||rG(o))throw Jn(t,l,"Invalid number, expected digit but got: ".concat(Xs(o),"."));return new Er(c?ke.FLOAT:ke.INT,e,l,s,n,r,a.slice(e,l))}function n_(t,e,u){var s=t.body,n=e,r=u;if(r>=48&&r<=57){do r=s.charCodeAt(++n);while(r>=48&&r<=57);return n}throw Jn(t,n,"Invalid number, expected digit but got: ".concat(Xs(r),"."))}function Yz(t,e,u,s,n){for(var r=t.body,a=e+1,o=a,l=0,c="";a<r.length&&!isNaN(l=r.charCodeAt(a))&&l!==10&&l!==13;){if(l===34)return c+=r.slice(o,a),new Er(ke.STRING,e,a+1,u,s,n,c);if(l<32&&l!==9)throw Jn(t,a,"Invalid character within String: ".concat(Xs(l),"."));if(++a,l===92){switch(c+=r.slice(o,a-1),l=r.charCodeAt(a),l){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+=`
`;break;case 114:c+="\r";break;case 116:c+="	";break;case 117:{var d=eG(r.charCodeAt(a+1),r.charCodeAt(a+2),r.charCodeAt(a+3),r.charCodeAt(a+4));if(d<0){var h=r.slice(a+1,a+5);throw Jn(t,a,"Invalid character escape sequence: \\u".concat(h,"."))}c+=String.fromCharCode(d),a+=4;break}default:throw Jn(t,a,"Invalid character escape sequence: \\".concat(String.fromCharCode(l),"."))}++a,o=a}}throw Jn(t,a,"Unterminated string.")}function Zz(t,e,u,s,n,r){for(var a=t.body,o=e+3,l=o,c=0,d="";o<a.length&&!isNaN(c=a.charCodeAt(o));){if(c===34&&a.charCodeAt(o+1)===34&&a.charCodeAt(o+2)===34)return d+=a.slice(l,o),new Er(ke.BLOCK_STRING,e,o+3,u,s,n,Vz(d));if(c<32&&c!==9&&c!==10&&c!==13)throw Jn(t,o,"Invalid character within String: ".concat(Xs(c),"."));c===10?(++o,++r.line,r.lineStart=o):c===13?(a.charCodeAt(o+1)===10?o+=2:++o,++r.line,r.lineStart=o):c===92&&a.charCodeAt(o+1)===34&&a.charCodeAt(o+2)===34&&a.charCodeAt(o+3)===34?(d+=a.slice(l,o)+'"""',o+=4,l=o):++o}throw Jn(t,o,"Unterminated string.")}function eG(t,e,u,s){return d1(t)<<12|d1(e)<<8|d1(u)<<4|d1(s)}function d1(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function tG(t,e,u,s,n){for(var r=t.body,a=r.length,o=e+1,l=0;o!==a&&!isNaN(l=r.charCodeAt(o))&&(l===95||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122);)++o;return new Er(ke.NAME,e,o,u,s,n,r.slice(e,o))}function rG(t){return t===95||t>=65&&t<=90||t>=97&&t<=122}var Tq=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function nG(t,e){var u=new WT(t,e);return u.parseDocument()}function iG(t,e){var u=new WT(t,e);u.expectToken(ke.SOF);var s=u.parseValueLiteral(!1);return u.expectToken(ke.EOF),s}function aG(t,e){var u=new WT(t,e);u.expectToken(ke.SOF);var s=u.parseTypeReference();return u.expectToken(ke.EOF),s}var WT=function(){function t(u,s){var n=Dz(u)?u:new kT(u);this._lexer=new Sq(n),this._options=s}var e=t.prototype;return e.parseName=function(){var s=this.expectToken(ke.NAME);return{kind:rt.NAME,value:s.value,loc:this.loc(s)}},e.parseDocument=function(){var s=this._lexer.token;return{kind:rt.DOCUMENT,definitions:this.many(ke.SOF,this.parseDefinition,ke.EOF),loc:this.loc(s)}},e.parseDefinition=function(){if(this.peek(ke.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(ke.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},e.parseOperationDefinition=function(){var s=this._lexer.token;if(this.peek(ke.BRACE_L))return{kind:rt.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(s)};var n=this.parseOperationType(),r;return this.peek(ke.NAME)&&(r=this.parseName()),{kind:rt.OPERATION_DEFINITION,operation:n,name:r,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(s)}},e.parseOperationType=function(){var s=this.expectToken(ke.NAME);switch(s.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(s)},e.parseVariableDefinitions=function(){return this.optionalMany(ke.PAREN_L,this.parseVariableDefinition,ke.PAREN_R)},e.parseVariableDefinition=function(){var s=this._lexer.token;return{kind:rt.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(ke.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(ke.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(s)}},e.parseVariable=function(){var s=this._lexer.token;return this.expectToken(ke.DOLLAR),{kind:rt.VARIABLE,name:this.parseName(),loc:this.loc(s)}},e.parseSelectionSet=function(){var s=this._lexer.token;return{kind:rt.SELECTION_SET,selections:this.many(ke.BRACE_L,this.parseSelection,ke.BRACE_R),loc:this.loc(s)}},e.parseSelection=function(){return this.peek(ke.SPREAD)?this.parseFragment():this.parseField()},e.parseField=function(){var s=this._lexer.token,n=this.parseName(),r,a;return this.expectOptionalToken(ke.COLON)?(r=n,a=this.parseName()):a=n,{kind:rt.FIELD,alias:r,name:a,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(ke.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(s)}},e.parseArguments=function(s){var n=s?this.parseConstArgument:this.parseArgument;return this.optionalMany(ke.PAREN_L,n,ke.PAREN_R)},e.parseArgument=function(){var s=this._lexer.token,n=this.parseName();return this.expectToken(ke.COLON),{kind:rt.ARGUMENT,name:n,value:this.parseValueLiteral(!1),loc:this.loc(s)}},e.parseConstArgument=function(){var s=this._lexer.token;return{kind:rt.ARGUMENT,name:this.parseName(),value:(this.expectToken(ke.COLON),this.parseValueLiteral(!0)),loc:this.loc(s)}},e.parseFragment=function(){var s=this._lexer.token;this.expectToken(ke.SPREAD);var n=this.expectOptionalKeyword("on");return!n&&this.peek(ke.NAME)?{kind:rt.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(s)}:{kind:rt.INLINE_FRAGMENT,typeCondition:n?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(s)}},e.parseFragmentDefinition=function(){var s,n=this._lexer.token;return this.expectKeyword("fragment"),((s=this._options)===null||s===void 0?void 0:s.experimentalFragmentVariables)===!0?{kind:rt.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}:{kind:rt.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},e.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},e.parseValueLiteral=function(s){var n=this._lexer.token;switch(n.kind){case ke.BRACKET_L:return this.parseList(s);case ke.BRACE_L:return this.parseObject(s);case ke.INT:return this._lexer.advance(),{kind:rt.INT,value:n.value,loc:this.loc(n)};case ke.FLOAT:return this._lexer.advance(),{kind:rt.FLOAT,value:n.value,loc:this.loc(n)};case ke.STRING:case ke.BLOCK_STRING:return this.parseStringLiteral();case ke.NAME:switch(this._lexer.advance(),n.value){case"true":return{kind:rt.BOOLEAN,value:!0,loc:this.loc(n)};case"false":return{kind:rt.BOOLEAN,value:!1,loc:this.loc(n)};case"null":return{kind:rt.NULL,loc:this.loc(n)};default:return{kind:rt.ENUM,value:n.value,loc:this.loc(n)}}case ke.DOLLAR:if(!s)return this.parseVariable();break}throw this.unexpected()},e.parseStringLiteral=function(){var s=this._lexer.token;return this._lexer.advance(),{kind:rt.STRING,value:s.value,block:s.kind===ke.BLOCK_STRING,loc:this.loc(s)}},e.parseList=function(s){var n=this,r=this._lexer.token,a=function(){return n.parseValueLiteral(s)};return{kind:rt.LIST,values:this.any(ke.BRACKET_L,a,ke.BRACKET_R),loc:this.loc(r)}},e.parseObject=function(s){var n=this,r=this._lexer.token,a=function(){return n.parseObjectField(s)};return{kind:rt.OBJECT,fields:this.any(ke.BRACE_L,a,ke.BRACE_R),loc:this.loc(r)}},e.parseObjectField=function(s){var n=this._lexer.token,r=this.parseName();return this.expectToken(ke.COLON),{kind:rt.OBJECT_FIELD,name:r,value:this.parseValueLiteral(s),loc:this.loc(n)}},e.parseDirectives=function(s){for(var n=[];this.peek(ke.AT);)n.push(this.parseDirective(s));return n},e.parseDirective=function(s){var n=this._lexer.token;return this.expectToken(ke.AT),{kind:rt.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(s),loc:this.loc(n)}},e.parseTypeReference=function(){var s=this._lexer.token,n;return this.expectOptionalToken(ke.BRACKET_L)?(n=this.parseTypeReference(),this.expectToken(ke.BRACKET_R),n={kind:rt.LIST_TYPE,type:n,loc:this.loc(s)}):n=this.parseNamedType(),this.expectOptionalToken(ke.BANG)?{kind:rt.NON_NULL_TYPE,type:n,loc:this.loc(s)}:n},e.parseNamedType=function(){var s=this._lexer.token;return{kind:rt.NAMED_TYPE,name:this.parseName(),loc:this.loc(s)}},e.parseTypeSystemDefinition=function(){var s=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(s.kind===ke.NAME)switch(s.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(s)},e.peekDescription=function(){return this.peek(ke.STRING)||this.peek(ke.BLOCK_STRING)},e.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},e.parseSchemaDefinition=function(){var s=this._lexer.token,n=this.parseDescription();this.expectKeyword("schema");var r=this.parseDirectives(!0),a=this.many(ke.BRACE_L,this.parseOperationTypeDefinition,ke.BRACE_R);return{kind:rt.SCHEMA_DEFINITION,description:n,directives:r,operationTypes:a,loc:this.loc(s)}},e.parseOperationTypeDefinition=function(){var s=this._lexer.token,n=this.parseOperationType();this.expectToken(ke.COLON);var r=this.parseNamedType();return{kind:rt.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:this.loc(s)}},e.parseScalarTypeDefinition=function(){var s=this._lexer.token,n=this.parseDescription();this.expectKeyword("scalar");var r=this.parseName(),a=this.parseDirectives(!0);return{kind:rt.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:a,loc:this.loc(s)}},e.parseObjectTypeDefinition=function(){var s=this._lexer.token,n=this.parseDescription();this.expectKeyword("type");var r=this.parseName(),a=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),l=this.parseFieldsDefinition();return{kind:rt.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:a,directives:o,fields:l,loc:this.loc(s)}},e.parseImplementsInterfaces=function(){var s;if(!this.expectOptionalKeyword("implements"))return[];if(((s=this._options)===null||s===void 0?void 0:s.allowLegacySDLImplementsInterfaces)===!0){var n=[];this.expectOptionalToken(ke.AMP);do n.push(this.parseNamedType());while(this.expectOptionalToken(ke.AMP)||this.peek(ke.NAME));return n}return this.delimitedMany(ke.AMP,this.parseNamedType)},e.parseFieldsDefinition=function(){var s;return((s=this._options)===null||s===void 0?void 0:s.allowLegacySDLEmptyFields)===!0&&this.peek(ke.BRACE_L)&&this._lexer.lookahead().kind===ke.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(ke.BRACE_L,this.parseFieldDefinition,ke.BRACE_R)},e.parseFieldDefinition=function(){var s=this._lexer.token,n=this.parseDescription(),r=this.parseName(),a=this.parseArgumentDefs();this.expectToken(ke.COLON);var o=this.parseTypeReference(),l=this.parseDirectives(!0);return{kind:rt.FIELD_DEFINITION,description:n,name:r,arguments:a,type:o,directives:l,loc:this.loc(s)}},e.parseArgumentDefs=function(){return this.optionalMany(ke.PAREN_L,this.parseInputValueDef,ke.PAREN_R)},e.parseInputValueDef=function(){var s=this._lexer.token,n=this.parseDescription(),r=this.parseName();this.expectToken(ke.COLON);var a=this.parseTypeReference(),o;this.expectOptionalToken(ke.EQUALS)&&(o=this.parseValueLiteral(!0));var l=this.parseDirectives(!0);return{kind:rt.INPUT_VALUE_DEFINITION,description:n,name:r,type:a,defaultValue:o,directives:l,loc:this.loc(s)}},e.parseInterfaceTypeDefinition=function(){var s=this._lexer.token,n=this.parseDescription();this.expectKeyword("interface");var r=this.parseName(),a=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),l=this.parseFieldsDefinition();return{kind:rt.INTERFACE_TYPE_DEFINITION,description:n,name:r,interfaces:a,directives:o,fields:l,loc:this.loc(s)}},e.parseUnionTypeDefinition=function(){var s=this._lexer.token,n=this.parseDescription();this.expectKeyword("union");var r=this.parseName(),a=this.parseDirectives(!0),o=this.parseUnionMemberTypes();return{kind:rt.UNION_TYPE_DEFINITION,description:n,name:r,directives:a,types:o,loc:this.loc(s)}},e.parseUnionMemberTypes=function(){return this.expectOptionalToken(ke.EQUALS)?this.delimitedMany(ke.PIPE,this.parseNamedType):[]},e.parseEnumTypeDefinition=function(){var s=this._lexer.token,n=this.parseDescription();this.expectKeyword("enum");var r=this.parseName(),a=this.parseDirectives(!0),o=this.parseEnumValuesDefinition();return{kind:rt.ENUM_TYPE_DEFINITION,description:n,name:r,directives:a,values:o,loc:this.loc(s)}},e.parseEnumValuesDefinition=function(){return this.optionalMany(ke.BRACE_L,this.parseEnumValueDefinition,ke.BRACE_R)},e.parseEnumValueDefinition=function(){var s=this._lexer.token,n=this.parseDescription(),r=this.parseName(),a=this.parseDirectives(!0);return{kind:rt.ENUM_VALUE_DEFINITION,description:n,name:r,directives:a,loc:this.loc(s)}},e.parseInputObjectTypeDefinition=function(){var s=this._lexer.token,n=this.parseDescription();this.expectKeyword("input");var r=this.parseName(),a=this.parseDirectives(!0),o=this.parseInputFieldsDefinition();return{kind:rt.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:a,fields:o,loc:this.loc(s)}},e.parseInputFieldsDefinition=function(){return this.optionalMany(ke.BRACE_L,this.parseInputValueDef,ke.BRACE_R)},e.parseTypeSystemExtension=function(){var s=this._lexer.lookahead();if(s.kind===ke.NAME)switch(s.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(s)},e.parseSchemaExtension=function(){var s=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.optionalMany(ke.BRACE_L,this.parseOperationTypeDefinition,ke.BRACE_R);if(n.length===0&&r.length===0)throw this.unexpected();return{kind:rt.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:this.loc(s)}},e.parseScalarTypeExtension=function(){var s=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);if(r.length===0)throw this.unexpected();return{kind:rt.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:this.loc(s)}},e.parseObjectTypeExtension=function(){var s=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(r.length===0&&a.length===0&&o.length===0)throw this.unexpected();return{kind:rt.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:a,fields:o,loc:this.loc(s)}},e.parseInterfaceTypeExtension=function(){var s=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(r.length===0&&a.length===0&&o.length===0)throw this.unexpected();return{kind:rt.INTERFACE_TYPE_EXTENSION,name:n,interfaces:r,directives:a,fields:o,loc:this.loc(s)}},e.parseUnionTypeExtension=function(){var s=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),a=this.parseUnionMemberTypes();if(r.length===0&&a.length===0)throw this.unexpected();return{kind:rt.UNION_TYPE_EXTENSION,name:n,directives:r,types:a,loc:this.loc(s)}},e.parseEnumTypeExtension=function(){var s=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),a=this.parseEnumValuesDefinition();if(r.length===0&&a.length===0)throw this.unexpected();return{kind:rt.ENUM_TYPE_EXTENSION,name:n,directives:r,values:a,loc:this.loc(s)}},e.parseInputObjectTypeExtension=function(){var s=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),a=this.parseInputFieldsDefinition();if(r.length===0&&a.length===0)throw this.unexpected();return{kind:rt.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:a,loc:this.loc(s)}},e.parseDirectiveDefinition=function(){var s=this._lexer.token,n=this.parseDescription();this.expectKeyword("directive"),this.expectToken(ke.AT);var r=this.parseName(),a=this.parseArgumentDefs(),o=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var l=this.parseDirectiveLocations();return{kind:rt.DIRECTIVE_DEFINITION,description:n,name:r,arguments:a,repeatable:o,locations:l,loc:this.loc(s)}},e.parseDirectiveLocations=function(){return this.delimitedMany(ke.PIPE,this.parseDirectiveLocation)},e.parseDirectiveLocation=function(){var s=this._lexer.token,n=this.parseName();if(Tq[n.value]!==void 0)return n;throw this.unexpected(s)},e.loc=function(s){var n;if(((n=this._options)===null||n===void 0?void 0:n.noLocation)!==!0)return new GT(s,this._lexer.lastToken,this._lexer.source)},e.peek=function(s){return this._lexer.token.kind===s},e.expectToken=function(s){var n=this._lexer.token;if(n.kind===s)return this._lexer.advance(),n;throw Jn(this._lexer.source,n.start,"Expected ".concat(Aq(s),", found ").concat(i_(n),"."))},e.expectOptionalToken=function(s){var n=this._lexer.token;if(n.kind===s)return this._lexer.advance(),n},e.expectKeyword=function(s){var n=this._lexer.token;if(n.kind===ke.NAME&&n.value===s)this._lexer.advance();else throw Jn(this._lexer.source,n.start,'Expected "'.concat(s,'", found ').concat(i_(n),"."))},e.expectOptionalKeyword=function(s){var n=this._lexer.token;return n.kind===ke.NAME&&n.value===s?(this._lexer.advance(),!0):!1},e.unexpected=function(s){var n=s??this._lexer.token;return Jn(this._lexer.source,n.start,"Unexpected ".concat(i_(n),"."))},e.any=function(s,n,r){this.expectToken(s);for(var a=[];!this.expectOptionalToken(r);)a.push(n.call(this));return a},e.optionalMany=function(s,n,r){if(this.expectOptionalToken(s)){var a=[];do a.push(n.call(this));while(!this.expectOptionalToken(r));return a}return[]},e.many=function(s,n,r){this.expectToken(s);var a=[];do a.push(n.call(this));while(!this.expectOptionalToken(r));return a},e.delimitedMany=function(s,n){this.expectOptionalToken(s);var r=[];do r.push(n.call(this));while(this.expectOptionalToken(s));return r},t}();function i_(t){var e=t.value;return Aq(t.kind)+(e!=null?' "'.concat(e,'"'):"")}function Aq(t){return Gz(t)?'"'.concat(t,'"'):t}var sG={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Eo=Object.freeze({});function Eq(t,e){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sG,s=void 0,n=Array.isArray(t),r=[t],a=-1,o=[],l=void 0,c=void 0,d=void 0,h=[],f=[],p=t;do{a++;var y=a===r.length,b=y&&o.length!==0;if(y){if(c=f.length===0?void 0:h[h.length-1],l=d,d=f.pop(),b){if(n)l=l.slice();else{for(var g={},m=0,v=Object.keys(l);m<v.length;m++){var _=v[m];g[_]=l[_]}l=g}for(var w=0,S=0;S<o.length;S++){var A=o[S][0],D=o[S][1];n&&(A-=w),n&&D===null?(l.splice(A,1),w++):l[A]=D}}a=s.index,r=s.keys,o=s.edits,n=s.inArray,s=s.prev}else{if(c=d?n?a:r[a]:void 0,l=d?d[c]:p,l==null)continue;d&&h.push(c)}var L=void 0;if(!Array.isArray(l)){if(!Cx(l))throw new Error("Invalid AST Node: ".concat(mq(l),"."));var O=lb(e,l.kind,y);if(O){if(L=O.call(e,l,c,d,h,f),L===Eo)break;if(L===!1){if(!y){h.pop();continue}}else if(L!==void 0&&(o.push([c,L]),!y))if(Cx(L))l=L;else{h.pop();continue}}}if(L===void 0&&b&&o.push([c,l]),y)h.pop();else{var E;s={inArray:n,index:a,keys:r,edits:o,prev:s},n=Array.isArray(l),r=n?l:(E=u[l.kind])!==null&&E!==void 0?E:[],a=-1,o=[],d&&f.push(d),d=l}}while(s!==void 0);return o.length!==0&&(p=o[o.length-1][1]),p}function oG(t){var e=new Array(t.length);return{enter:function(s){for(var n=0;n<t.length;n++)if(e[n]==null){var r=lb(t[n],s.kind,!1);if(r){var a=r.apply(t[n],arguments);if(a===!1)e[n]=s;else if(a===Eo)e[n]=Eo;else if(a!==void 0)return a}}},leave:function(s){for(var n=0;n<t.length;n++)if(e[n]==null){var r=lb(t[n],s.kind,!0);if(r){var a=r.apply(t[n],arguments);if(a===Eo)e[n]=Eo;else if(a!==void 0&&a!==!1)return a}}else e[n]===s&&(e[n]=null)}}}function lb(t,e,u){var s=t[e];if(s){if(!u&&typeof s=="function")return s;var n=u?s.leave:s.enter;if(typeof n=="function")return n}else{var r=u?t.leave:t.enter;if(r){if(typeof r=="function")return r;var a=r[e];if(typeof a=="function")return a}}}function uG(t){return Eq(t,{leave:lG})}var cG=80,lG={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return dt(e.definitions,`

`)+`
`},OperationDefinition:function(e){var u=e.operation,s=e.name,n=Ar("(",dt(e.variableDefinitions,", "),")"),r=dt(e.directives," "),a=e.selectionSet;return!s&&!r&&!n&&u==="query"?a:dt([u,dt([s,n]),r,a]," ")},VariableDefinition:function(e){var u=e.variable,s=e.type,n=e.defaultValue,r=e.directives;return u+": "+s+Ar(" = ",n)+Ar(" ",dt(r," "))},SelectionSet:function(e){var u=e.selections;return yi(u)},Field:function(e){var u=e.alias,s=e.name,n=e.arguments,r=e.directives,a=e.selectionSet,o=Ar("",u,": ")+s,l=o+Ar("(",dt(n,", "),")");return l.length>cG&&(l=o+Ar(`(
`,k1(dt(n,`
`)),`
)`)),dt([l,dt(r," "),a]," ")},Argument:function(e){var u=e.name,s=e.value;return u+": "+s},FragmentSpread:function(e){var u=e.name,s=e.directives;return"..."+u+Ar(" ",dt(s," "))},InlineFragment:function(e){var u=e.typeCondition,s=e.directives,n=e.selectionSet;return dt(["...",Ar("on ",u),dt(s," "),n]," ")},FragmentDefinition:function(e){var u=e.name,s=e.typeCondition,n=e.variableDefinitions,r=e.directives,a=e.selectionSet;return"fragment ".concat(u).concat(Ar("(",dt(n,", "),")")," ")+"on ".concat(s," ").concat(Ar("",dt(r," ")," "))+a},IntValue:function(e){var u=e.value;return u},FloatValue:function(e){var u=e.value;return u},StringValue:function(e,u){var s=e.value,n=e.block;return n?zz(s,u==="description"?"":"  "):JSON.stringify(s)},BooleanValue:function(e){var u=e.value;return u?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var u=e.value;return u},ListValue:function(e){var u=e.values;return"["+dt(u,", ")+"]"},ObjectValue:function(e){var u=e.fields;return"{"+dt(u,", ")+"}"},ObjectField:function(e){var u=e.name,s=e.value;return u+": "+s},Directive:function(e){var u=e.name,s=e.arguments;return"@"+u+Ar("(",dt(s,", "),")")},NamedType:function(e){var u=e.name;return u},ListType:function(e){var u=e.type;return"["+u+"]"},NonNullType:function(e){var u=e.type;return u+"!"},SchemaDefinition:pi(function(t){var e=t.directives,u=t.operationTypes;return dt(["schema",dt(e," "),yi(u)]," ")}),OperationTypeDefinition:function(e){var u=e.operation,s=e.type;return u+": "+s},ScalarTypeDefinition:pi(function(t){var e=t.name,u=t.directives;return dt(["scalar",e,dt(u," ")]," ")}),ObjectTypeDefinition:pi(function(t){var e=t.name,u=t.interfaces,s=t.directives,n=t.fields;return dt(["type",e,Ar("implements ",dt(u," & ")),dt(s," "),yi(n)]," ")}),FieldDefinition:pi(function(t){var e=t.name,u=t.arguments,s=t.type,n=t.directives;return e+(Lx(u)?Ar(`(
`,k1(dt(u,`
`)),`
)`):Ar("(",dt(u,", "),")"))+": "+s+Ar(" ",dt(n," "))}),InputValueDefinition:pi(function(t){var e=t.name,u=t.type,s=t.defaultValue,n=t.directives;return dt([e+": "+u,Ar("= ",s),dt(n," ")]," ")}),InterfaceTypeDefinition:pi(function(t){var e=t.name,u=t.interfaces,s=t.directives,n=t.fields;return dt(["interface",e,Ar("implements ",dt(u," & ")),dt(s," "),yi(n)]," ")}),UnionTypeDefinition:pi(function(t){var e=t.name,u=t.directives,s=t.types;return dt(["union",e,dt(u," "),s&&s.length!==0?"= "+dt(s," | "):""]," ")}),EnumTypeDefinition:pi(function(t){var e=t.name,u=t.directives,s=t.values;return dt(["enum",e,dt(u," "),yi(s)]," ")}),EnumValueDefinition:pi(function(t){var e=t.name,u=t.directives;return dt([e,dt(u," ")]," ")}),InputObjectTypeDefinition:pi(function(t){var e=t.name,u=t.directives,s=t.fields;return dt(["input",e,dt(u," "),yi(s)]," ")}),DirectiveDefinition:pi(function(t){var e=t.name,u=t.arguments,s=t.repeatable,n=t.locations;return"directive @"+e+(Lx(u)?Ar(`(
`,k1(dt(u,`
`)),`
)`):Ar("(",dt(u,", "),")"))+(s?" repeatable":"")+" on "+dt(n," | ")}),SchemaExtension:function(e){var u=e.directives,s=e.operationTypes;return dt(["extend schema",dt(u," "),yi(s)]," ")},ScalarTypeExtension:function(e){var u=e.name,s=e.directives;return dt(["extend scalar",u,dt(s," ")]," ")},ObjectTypeExtension:function(e){var u=e.name,s=e.interfaces,n=e.directives,r=e.fields;return dt(["extend type",u,Ar("implements ",dt(s," & ")),dt(n," "),yi(r)]," ")},InterfaceTypeExtension:function(e){var u=e.name,s=e.interfaces,n=e.directives,r=e.fields;return dt(["extend interface",u,Ar("implements ",dt(s," & ")),dt(n," "),yi(r)]," ")},UnionTypeExtension:function(e){var u=e.name,s=e.directives,n=e.types;return dt(["extend union",u,dt(s," "),n&&n.length!==0?"= "+dt(n," | "):""]," ")},EnumTypeExtension:function(e){var u=e.name,s=e.directives,n=e.values;return dt(["extend enum",u,dt(s," "),yi(n)]," ")},InputObjectTypeExtension:function(e){var u=e.name,s=e.directives,n=e.fields;return dt(["extend input",u,dt(s," "),yi(n)]," ")}};function pi(t){return function(e){return dt([e.description,t(e)],`
`)}}function dt(t){var e,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(e=t==null?void 0:t.filter(function(s){return s}).join(u))!==null&&e!==void 0?e:""}function yi(t){return Ar(`{
`,k1(dt(t,`
`)),`
}`)}function Ar(t,e){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return e!=null&&e!==""?t+e+u:""}function k1(t){return Ar("  ",t.replace(/\n/g,`
  `))}function dG(t){return t.indexOf(`
`)!==-1}function Lx(t){return t!=null&&t.some(dG)}function fG(t){return Oq(t)||Rq(t)||Iq(t)}function Oq(t){return t.kind===rt.OPERATION_DEFINITION||t.kind===rt.FRAGMENT_DEFINITION}function hG(t){return t.kind===rt.FIELD||t.kind===rt.FRAGMENT_SPREAD||t.kind===rt.INLINE_FRAGMENT}function pG(t){return t.kind===rt.VARIABLE||t.kind===rt.INT||t.kind===rt.FLOAT||t.kind===rt.STRING||t.kind===rt.BOOLEAN||t.kind===rt.NULL||t.kind===rt.ENUM||t.kind===rt.LIST||t.kind===rt.OBJECT}function yG(t){return t.kind===rt.NAMED_TYPE||t.kind===rt.LIST_TYPE||t.kind===rt.NON_NULL_TYPE}function Rq(t){return t.kind===rt.SCHEMA_DEFINITION||xq(t)||t.kind===rt.DIRECTIVE_DEFINITION}function xq(t){return t.kind===rt.SCALAR_TYPE_DEFINITION||t.kind===rt.OBJECT_TYPE_DEFINITION||t.kind===rt.INTERFACE_TYPE_DEFINITION||t.kind===rt.UNION_TYPE_DEFINITION||t.kind===rt.ENUM_TYPE_DEFINITION||t.kind===rt.INPUT_OBJECT_TYPE_DEFINITION}function Iq(t){return t.kind===rt.SCHEMA_EXTENSION||Pq(t)}function Pq(t){return t.kind===rt.SCALAR_TYPE_EXTENSION||t.kind===rt.OBJECT_TYPE_EXTENSION||t.kind===rt.INTERFACE_TYPE_EXTENSION||t.kind===rt.UNION_TYPE_EXTENSION||t.kind===rt.ENUM_TYPE_EXTENSION||t.kind===rt.INPUT_OBJECT_TYPE_EXTENSION}const bG=Object.freeze(Object.defineProperty({__proto__:null,BREAK:Eo,DirectiveLocation:Tq,Kind:rt,Lexer:Sq,Location:GT,Source:kT,Token:Er,TokenKind:ke,getLocation:cb,getVisitFn:lb,isDefinitionNode:fG,isExecutableDefinitionNode:Oq,isSelectionNode:hG,isTypeDefinitionNode:xq,isTypeExtensionNode:Pq,isTypeNode:yG,isTypeSystemDefinitionNode:Rq,isTypeSystemExtensionNode:Iq,isValueNode:pG,parse:nG,parseType:aG,parseValue:iG,print:uG,printLocation:gq,printSourceLocation:zT,visit:Eq,visitInParallel:oG},Symbol.toStringTag,{value:"Module"})),mG=iT(bG);var Pc={},a_={},Dc={},Mx={},Fx;function Dq(){return Fx||(Fx=1,function(){(function(t){(function(e){var u={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function s(O){return O&&DataView.prototype.isPrototypeOf(O)}if(u.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(O){return O&&n.indexOf(Object.prototype.toString.call(O))>-1};function a(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(O))throw new TypeError("Invalid character in header field name");return O.toLowerCase()}function o(O){return typeof O!="string"&&(O=String(O)),O}function l(O){var E={next:function(){var P=O.shift();return{done:P===void 0,value:P}}};return u.iterable&&(E[Symbol.iterator]=function(){return E}),E}function c(O){this.map={},O instanceof c?O.forEach(function(E,P){this.append(P,E)},this):Array.isArray(O)?O.forEach(function(E){this.append(E[0],E[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(E){this.append(E,O[E])},this)}c.prototype.append=function(O,E){O=a(O),E=o(E);var P=this.map[O];this.map[O]=P?P+", "+E:E},c.prototype.delete=function(O){delete this.map[a(O)]},c.prototype.get=function(O){return O=a(O),this.has(O)?this.map[O]:null},c.prototype.has=function(O){return this.map.hasOwnProperty(a(O))},c.prototype.set=function(O,E){this.map[a(O)]=o(E)},c.prototype.forEach=function(O,E){for(var P in this.map)this.map.hasOwnProperty(P)&&O.call(E,this.map[P],P,this)},c.prototype.keys=function(){var O=[];return this.forEach(function(E,P){O.push(P)}),l(O)},c.prototype.values=function(){var O=[];return this.forEach(function(E){O.push(E)}),l(O)},c.prototype.entries=function(){var O=[];return this.forEach(function(E,P){O.push([P,E])}),l(O)},u.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);function d(O){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}function h(O){return new Promise(function(E,P){O.onload=function(){E(O.result)},O.onerror=function(){P(O.error)}})}function f(O){var E=new FileReader,P=h(E);return E.readAsArrayBuffer(O),P}function p(O){var E=new FileReader,P=h(E);return E.readAsText(O),P}function y(O){for(var E=new Uint8Array(O),P=new Array(E.length),M=0;M<E.length;M++)P[M]=String.fromCharCode(E[M]);return P.join("")}function b(O){if(O.slice)return O.slice(0);var E=new Uint8Array(O.byteLength);return E.set(new Uint8Array(O)),E.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(O){this._bodyInit=O,O?typeof O=="string"?this._bodyText=O:u.blob&&Blob.prototype.isPrototypeOf(O)?this._bodyBlob=O:u.formData&&FormData.prototype.isPrototypeOf(O)?this._bodyFormData=O:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)?this._bodyText=O.toString():u.arrayBuffer&&u.blob&&s(O)?(this._bodyArrayBuffer=b(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(O)||r(O))?this._bodyArrayBuffer=b(O):this._bodyText=O=Object.prototype.toString.call(O):this._bodyText="",this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var O=d(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var O=d(this);if(O)return O;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(O){var E=O.toUpperCase();return m.indexOf(E)>-1?E:O}function _(O,E){E=E||{};var P=E.body;if(O instanceof _){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,E.headers||(this.headers=new c(O.headers)),this.method=O.method,this.mode=O.mode,this.signal=O.signal,!P&&O._bodyInit!=null&&(P=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=E.credentials||this.credentials||"same-origin",(E.headers||!this.headers)&&(this.headers=new c(E.headers)),this.method=v(E.method||this.method||"GET"),this.mode=E.mode||this.mode||null,this.signal=E.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&P)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(P)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})};function w(O){var E=new FormData;return O.trim().split("&").forEach(function(P){if(P){var M=P.split("="),U=M.shift().replace(/\+/g," "),j=M.join("=").replace(/\+/g," ");E.append(decodeURIComponent(U),decodeURIComponent(j))}}),E}function S(O){var E=new c,P=O.replace(/\r?\n[\t ]+/g," ");return P.split(/\r?\n/).forEach(function(M){var U=M.split(":"),j=U.shift().trim();if(j){var q=U.join(":").trim();E.append(j,q)}}),E}g.call(_.prototype);function A(O,E){E||(E={}),this.type="default",this.status=E.status===void 0?200:E.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in E?E.statusText:"OK",this.headers=new c(E.headers),this.url=E.url||"",this._initBody(O)}g.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},A.error=function(){var O=new A(null,{status:0,statusText:""});return O.type="error",O};var D=[301,302,303,307,308];A.redirect=function(O,E){if(D.indexOf(E)===-1)throw new RangeError("Invalid status code");return new A(null,{status:E,headers:{location:O}})},e.DOMException=t.DOMException;try{new e.DOMException}catch{e.DOMException=function(E,P){this.message=E,this.name=P;var M=Error(E);this.stack=M.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function L(O,E){return new Promise(function(P,M){var U=new _(O,E);if(U.signal&&U.signal.aborted)return M(new e.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function q(){j.abort()}j.onload=function(){var $={status:j.status,statusText:j.statusText,headers:S(j.getAllResponseHeaders()||"")};$.url="responseURL"in j?j.responseURL:$.headers.get("X-Request-URL");var Z="response"in j?j.response:j.responseText;P(new A(Z,$))},j.onerror=function(){M(new TypeError("Network request failed"))},j.ontimeout=function(){M(new TypeError("Network request failed"))},j.onabort=function(){M(new e.DOMException("Aborted","AbortError"))},j.open(U.method,U.url,!0),U.credentials==="include"?j.withCredentials=!0:U.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&u.blob&&(j.responseType="blob"),U.headers.forEach(function($,Z){j.setRequestHeader(Z,$)}),U.signal&&(U.signal.addEventListener("abort",q),j.onreadystatechange=function(){j.readyState===4&&U.signal.removeEventListener("abort",q)}),j.send(typeof U._bodyInit>"u"?null:U._bodyInit)})}return L.polyfill=!0,t.fetch||(t.fetch=L,t.Headers=c,t.Request=_,t.Response=A),e.Headers=c,e.Request=_,e.Response=A,e.fetch=L,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:I)}()),Mx}var s_={},sa={},qx;function gG(){if(qx)return sa;qx=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.removeDotSegmentsOfPath=sa.removeDotSegments=sa.resolve=void 0;function t(n,r){r=r||"";const a=r.indexOf("#");if(a>0&&(r=r.substr(0,a)),!n.length){if(r.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${r}' for value '${n}'`);return r}if(n.startsWith("?")){const p=r.indexOf("?");return p>0&&(r=r.substr(0,p)),r+n}if(n.startsWith("#"))return r+n;if(!r.length){const p=n.indexOf(":");if(p<0)throw new Error(`Found invalid relative IRI '${n}' for a missing baseIRI`);return u(n,p)}const o=n.indexOf(":");if(o>=0)return u(n,o);const l=r.indexOf(":");if(l<0)throw new Error(`Found invalid baseIRI '${r}' for value '${n}'`);const c=r.substr(0,l+1);if(n.indexOf("//")===0)return c+u(n,o);let d;if(r.indexOf("//",l)===l+1){if(d=r.indexOf("/",l+3),d<0)return r.length>l+3?r+"/"+u(n,o):c+u(n,o)}else if(d=r.indexOf("/",l+1),d<0)return c+u(n,o);if(n.indexOf("/")===0)return r.substr(0,d)+e(n);let h=r.substr(d);const f=h.lastIndexOf("/");return f>=0&&f<h.length-1&&(h=h.substr(0,f+1),n[0]==="."&&n[1]!=="."&&n[1]!=="/"&&n[2]&&(n=n.substr(1))),n=h+n,n=e(n),r.substr(0,d)+n}sa.resolve=t;function e(n){const r=[];let a=0;for(;a<n.length;)switch(n[a]){case"/":if(n[a+1]===".")if(n[a+2]==="."){if(!s(n[a+3])){r.push([]),a++;break}r.pop(),n[a+3]||r.push([]),a+=3}else{if(!s(n[a+2])){r.push([]),a++;break}n[a+2]||r.push([]),a+=2}else r.push([]),a++;break;case"#":case"?":r.length||r.push([]),r[r.length-1].push(n.substr(a)),a=n.length;break;default:r.length||r.push([]),r[r.length-1].push(n[a]),a++;break}return"/"+r.map(o=>o.join("")).join("/")}sa.removeDotSegments=e;function u(n,r){let a=r+1;r>=0?n[r+1]==="/"&&n[r+2]==="/"&&(a=r+3):n[0]==="/"&&n[1]==="/"&&(a=2);const o=n.indexOf("/",a);if(o<0)return n;const l=n.substr(0,o),c=n.substr(o);return l+e(c)}sa.removeDotSegmentsOfPath=u;function s(n){return!n||n==="#"||n==="?"||n==="/"}return sa}var Bx;function Pi(){return Bx||(Bx=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r),Object.defineProperty(s,a,{enumerable:!0,get:function(){return n[r]}})}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(gG(),t)}(s_)),s_}var o_={},Ux;function Py(){return Ux||(Ux=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=t.ErrorCoded=void 0;class e extends Error{constructor(s,n){super(s),this.code=n}}t.ErrorCoded=e,function(u){u.COLLIDING_KEYWORDS="colliding keywords",u.CONFLICTING_INDEXES="conflicting indexes",u.CYCLIC_IRI_MAPPING="cyclic IRI mapping",u.INVALID_ID_VALUE="invalid @id value",u.INVALID_INDEX_VALUE="invalid @index value",u.INVALID_NEST_VALUE="invalid @nest value",u.INVALID_PREFIX_VALUE="invalid @prefix value",u.INVALID_PROPAGATE_VALUE="invalid @propagate value",u.INVALID_REVERSE_VALUE="invalid @reverse value",u.INVALID_IMPORT_VALUE="invalid @import value",u.INVALID_VERSION_VALUE="invalid @version value",u.INVALID_BASE_IRI="invalid base IRI",u.INVALID_CONTAINER_MAPPING="invalid container mapping",u.INVALID_CONTEXT_ENTRY="invalid context entry",u.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",u.INVALID_DEFAULT_LANGUAGE="invalid default language",u.INVALID_INCLUDED_VALUE="invalid @included value",u.INVALID_IRI_MAPPING="invalid IRI mapping",u.INVALID_JSON_LITERAL="invalid JSON literal",u.INVALID_KEYWORD_ALIAS="invalid keyword alias",u.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",u.INVALID_LANGUAGE_MAPPING="invalid language mapping",u.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",u.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",u.INVALID_LOCAL_CONTEXT="invalid local context",u.INVALID_REMOTE_CONTEXT="invalid remote context",u.INVALID_REVERSE_PROPERTY="invalid reverse property",u.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",u.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",u.INVALID_SCOPED_CONTEXT="invalid scoped context",u.INVALID_SCRIPT_ELEMENT="invalid script element",u.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",u.INVALID_TERM_DEFINITION="invalid term definition",u.INVALID_TYPE_MAPPING="invalid type mapping",u.INVALID_TYPE_VALUE="invalid type value",u.INVALID_TYPED_VALUE="invalid typed value",u.INVALID_VALUE_OBJECT="invalid value object",u.INVALID_VALUE_OBJECT_VALUE="invalid value object value",u.INVALID_VOCAB_MAPPING="invalid vocab mapping",u.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",u.KEYWORD_REDEFINITION="keyword redefinition",u.LOADING_DOCUMENT_FAILED="loading document failed",u.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",u.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",u.PROCESSING_MODE_CONFLICT="processing mode conflict",u.PROTECTED_TERM_REDEFINITION="protected term redefinition",u.CONTEXT_OVERFLOW="context overflow",u.INVALID_BASE_DIRECTION="invalid base direction",u.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",u.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",u.INVALID_EMBEDDED_NODE="invalid embedded node",u.INVALID_ANNOTATION="invalid annotation"}(t.ERROR_CODES||(t.ERROR_CODES={}))}(o_)),o_}var Nc={},u_,Qx;function Nq(){if(Qx)return u_;Qx=1;var t=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/\s|\uFEFF|\xA0/,s=/\r?\n[\x20\x09]+/g,n=/[;,"]/,r=/[;,"]|\s/,a=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,o={IDLE:1,URI:2,ATTR:4};function l(y){return y.replace(e,"")}function c(y){return u.test(y)}function d(y,b){for(;c(y[b]);)b++;return b}function h(y){return r.test(y)||!a.test(y)}function f(y,b){return Object.keys(y).length===Object.keys(b).length&&Object.keys(y).every(g=>g in b&&y[g]===b[g])}class p{constructor(b){this.refs=[],b&&this.parse(b)}rel(b){for(var g=[],m=b.toLowerCase(),v=0;v<this.refs.length;v++)typeof this.refs[v].rel=="string"&&this.refs[v].rel.toLowerCase()===m&&g.push(this.refs[v]);return g}get(b,g){b=b.toLowerCase(),g=g.toLowerCase();for(var m=[],v=0;v<this.refs.length;v++)typeof this.refs[v][b]=="string"&&this.refs[v][b].toLowerCase()===g&&m.push(this.refs[v]);return m}set(b){return this.refs.push(b),this}setUnique(b){return this.refs.some(g=>f(g,b))||this.refs.push(b),this}has(b,g){b=b.toLowerCase(),g=g.toLowerCase();for(var m=0;m<this.refs.length;m++)if(typeof this.refs[m][b]=="string"&&this.refs[m][b].toLowerCase()===g)return!0;return!1}parse(b,_){_=_||0,b=_?b.slice(_):b,b=l(b).replace(s,"");for(var m=o.IDLE,v=b.length,_=0,w=null;_<v;)if(m===o.IDLE){if(c(b[_])){_++;continue}else if(b[_]==="<"){w!=null&&(w.rel!=null?this.refs.push(...p.expandRelations(w)):this.refs.push(w));var S=b.indexOf(">",_);if(S===-1)throw new Error("Expected end of URI delimiter at offset "+_);w={uri:b.slice(_+1,S)},_=S,m=o.URI}else throw new Error('Unexpected character "'+b[_]+'" at offset '+_);_++}else if(m===o.URI)if(c(b[_])){_++;continue}else if(b[_]===";")m=o.ATTR,_++;else if(b[_]===",")m=o.IDLE,_++;else throw new Error('Unexpected character "'+b[_]+'" at offset '+_);else if(m===o.ATTR){if(b[_]===";"||c(b[_])){_++;continue}var S=b.indexOf("=",_);S===-1&&(S=b.indexOf(";",_)),S===-1&&(S=b.length);var A=l(b.slice(_,S)).toLowerCase(),D="";if(_=S+1,_=d(b,_),b[_]==='"')for(_++;_<v;){if(b[_]==='"'){_++;break}b[_]==="\\"&&_++,D+=b[_],_++}else{for(var S=_+1;!n.test(b[S])&&S<v;)S++;D=b.slice(_,S),_=S}switch(w[A]&&p.isSingleOccurenceAttr(A)||(A[A.length-1]==="*"?w[A]=p.parseExtendedValue(D):(D=A==="type"?D.toLowerCase():D,w[A]!=null?Array.isArray(w[A])?w[A].push(D):w[A]=[w[A],D]:w[A]=D)),b[_]){case",":m=o.IDLE;break;case";":m=o.ATTR;break}_++}else throw new Error('Unknown parser state "'+m+'"');return w!=null&&(w.rel!=null?this.refs.push(...p.expandRelations(w)):this.refs.push(w)),w=null,this}toString(){for(var b=[],g="",m=null,v=0;v<this.refs.length;v++)m=this.refs[v],g=Object.keys(this.refs[v]).reduce(function(_,w){return w==="uri"?_:_+"; "+p.formatAttribute(w,m[w])},"<"+m.uri+">"),b.push(g);return b.join(", ")}}return p.isCompatibleEncoding=function(y){return t.test(y)},p.parse=function(y,b){return new p().parse(y,b)},p.isSingleOccurenceAttr=function(y){return y==="rel"||y==="type"||y==="media"||y==="title"||y==="title*"},p.isTokenAttr=function(y){return y==="rel"||y==="type"||y==="anchor"},p.escapeQuotes=function(y){return y.replace(/"/g,'\\"')},p.expandRelations=function(y){var b=y.rel.split(" ");return b.map(function(g){var m=Object.assign({},y);return m.rel=g,m})},p.parseExtendedValue=function(y){var b=/([^']+)?(?:'([^']*)')?(.+)/.exec(y);return{language:b[2].toLowerCase(),encoding:p.isCompatibleEncoding(b[1])?null:b[1].toLowerCase(),value:p.isCompatibleEncoding(b[1])?decodeURIComponent(b[3]):b[3]}},p.formatExtendedAttribute=function(y,b){var g=(b.encoding||"utf-8").toUpperCase(),m=b.language||"en",v="";return Buffer.isBuffer(b.value)&&p.isCompatibleEncoding(g)?v=b.value.toString(g):Buffer.isBuffer(b.value)?v=b.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):v=encodeURIComponent(b.value),y+"="+g+"'"+m+"'"+v},p.formatAttribute=function(y,b){return Array.isArray(b)?b.map(g=>p.formatAttribute(y,g)).join("; "):y[y.length-1]==="*"||typeof b!="string"?p.formatExtendedAttribute(y,b):(p.isTokenAttr(y)?b=h(b)?'"'+p.escapeQuotes(b)+'"':p.escapeQuotes(b):h(b)&&(b=encodeURIComponent(b),b=b.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),b='"'+b+'"'),y+"="+b)},u_=p,u_}var Hx;function Cq(){if(Hx)return Nc;Hx=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.FetchDocumentLoader=void 0,Dq();const t=Py(),e=Nq(),u=Pi();let s=class{constructor(r){this.fetcher=r}async load(r){const a=await(this.fetcher||fetch)(r,{headers:new Headers({accept:"application/ld+json"})});if(a.ok&&a.headers){let o=a.headers.get("Content-Type");if(o){const l=o.indexOf(";");l>0&&(o=o.substr(0,l))}if(o==="application/ld+json")return await a.json();if(a.headers.has("Link")){let l;if(a.headers.forEach((c,d)=>{if(d==="link"){const h=(0,e.parse)(c);for(const f of h.get("type","application/ld+json"))if(f.rel==="alternate"){if(l)throw new Error("Multiple JSON-LD alternate links were found on "+r);l=(0,u.resolve)(f.uri,r)}}}),l)return this.load(l)}throw new t.ErrorCoded(`Unsupported JSON-LD media type ${o}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(a.statusText||`Status code: ${a.status}`)}};return Nc.FetchDocumentLoader=s,Nc}var c_={},Cc={},$x;function JT(){if($x)return Cc;$x=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.Util=void 0;class t{static isCompactIri(u){return u.indexOf(":")>0&&!(u&&u[0]==="#")}static getPrefix(u,s){if(u&&u[0]==="#")return null;const n=u.indexOf(":");if(n>=0){if(u.length>n+1&&u.charAt(n+1)==="/"&&u.charAt(n+2)==="/")return null;const r=u.substr(0,n);if(r==="_")return null;if(s[r])return r}return null}static getContextValueId(u){if(u===null||typeof u=="string")return u;const s=u["@id"];return s||null}static isSimpleTermDefinitionPrefix(u,s){return!t.isPotentialKeyword(u)&&(s.allowPrefixNonGenDelims||typeof u=="string"&&(u[0]==="_"||t.isPrefixIriEndingWithGenDelim(u)))}static isPotentialKeyword(u){return typeof u=="string"&&t.KEYWORD_REGEX.test(u)}static isPrefixIriEndingWithGenDelim(u){return t.ENDS_WITH_GEN_DELIM.test(u)}static isPrefixValue(u){return u&&(typeof u=="string"||u&&typeof u=="object")}static isValidIri(u){return!!(u&&t.IRI_REGEX.test(u))}static isValidIriWeak(u){return!!u&&u[0]!==":"&&t.IRI_REGEX_WEAK.test(u)}static isValidKeyword(u){return t.VALID_KEYWORDS[u]}static isTermProtected(u,s){const n=u[s];return typeof n!="string"&&n&&n["@protected"]}static hasProtectedTerms(u){for(const s of Object.keys(u))if(t.isTermProtected(u,s))return!0;return!1}static isReservedInternalKeyword(u){return u.startsWith("@__")}static deepEqual(u,s){const n=Object.keys(u),r=Object.keys(s);return n.length!==r.length?!1:n.every(a=>{const o=u[a],l=s[a];return o===l||o!==null&&l!==null&&typeof o=="object"&&typeof l=="object"&&this.deepEqual(o,l)})}}return t.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,t.IRI_REGEX_WEAK=/(?::[^:])|\//,t.KEYWORD_REGEX=/^@[a-z]+$/i,t.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,t.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,t.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,t.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},t.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],t.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],t.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],t.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],t.CONTAINERS_1_0=["@list","@set","@index"],Cc.Util=t,Cc}var Vx;function jq(){return Vx||(Vx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpandOptions=t.JsonLdContextNormalized=void 0;const e=Pi(),u=Py(),s=JT();class n{constructor(a){this.contextRaw=a}getContextRaw(){return this.contextRaw}expandTerm(a,o,l=t.defaultExpandOptions){const c=this.contextRaw[a];if(c===null||c&&c["@id"]===null)return null;let d=!0;if(c&&o){const g=s.Util.getContextValueId(c);if(g&&g!==a)if(typeof g!="string"||!s.Util.isValidIri(g)&&!s.Util.isValidKeyword(g))s.Util.isPotentialKeyword(g)||(d=!1);else return g}const h=s.Util.getPrefix(a,this.contextRaw),f=this.contextRaw["@vocab"],p=(!!f||f==="")&&f.indexOf(":")<0,y=this.contextRaw["@base"],b=s.Util.isPotentialKeyword(a);if(h){const g=this.contextRaw[h],m=s.Util.getContextValueId(g);if(m){if(typeof g=="string"||!l.allowPrefixForcing){if(!s.Util.isSimpleTermDefinitionPrefix(m,l))return a}else if(m[0]!=="_"&&!b&&!g["@prefix"]&&!(a in this.contextRaw))return a;return m+a.substr(h.length+1)}}else if(o&&(f||f===""||l.allowVocabRelativeToBase&&y&&p)&&!b&&!s.Util.isCompactIri(a))if(p){if(l.allowVocabRelativeToBase)return(f||y?(0,e.resolve)(f,y):"")+a;throw new u.ErrorCoded(`Relative vocab expansion for term '${a}' with vocab '${f}' is not allowed.`,u.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+a;else if(!o&&y&&!b&&!s.Util.isCompactIri(a))return(0,e.resolve)(a,y);if(d)return a;throw new u.ErrorCoded(`Invalid IRI mapping found for context entry '${a}': '${JSON.stringify(c)}'`,u.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(a,o){if(o&&this.contextRaw["@vocab"]&&a.startsWith(this.contextRaw["@vocab"]))return a.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&a.startsWith(this.contextRaw["@base"]))return a.substr(this.contextRaw["@base"].length);const l={prefix:"",suffix:a};for(const c in this.contextRaw){const d=this.contextRaw[c];if(d&&!s.Util.isPotentialKeyword(c)){const h=s.Util.getContextValueId(d);if(a.startsWith(h)){const f=a.substr(h.length);if(f)f.length<l.suffix.length&&(l.prefix=c,l.suffix=f);else if(o)return c}}}return l.prefix?l.prefix+":"+l.suffix:a}}t.JsonLdContextNormalized=n,t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(c_)),c_}var kx;function _G(){if(kx)return Dc;kx=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.ContextParser=void 0,Dq();const t=Pi(),e=Py(),u=Cq(),s=jq(),n=JT();let r=class js{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new u.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,l,c){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,c);if(!n.Util.REGEX_LANGUAGE_TAG.test(o)){if(l)throw new e.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,c);return!1}return!0}static validateDirection(o,l){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);if(!n.Util.REGEX_DIRECTION_TAG.test(o)){if(l)throw new e.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const l of Object.keys(o)){let c=o[l];if(c&&typeof c=="object"&&c["@reverse"]&&!c["@id"]){if(typeof c["@reverse"]!="string"||n.Util.isValidKeyword(c["@reverse"]))throw new e.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${c["@reverse"]}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);c=o[l]=Object.assign(Object.assign({},c),{"@id":c["@reverse"]}),c["@id"]=c["@reverse"],n.Util.isPotentialKeyword(c["@reverse"])?delete c["@reverse"]:c["@reverse"]=!0}}return o}expandPrefixedTerms(o,l,c){const d=o.getContextRaw();for(const h of c||Object.keys(d))if(n.Util.EXPAND_KEYS_BLACKLIST.indexOf(h)<0&&!n.Util.isReservedInternalKeyword(h)){const f=d[h];if(n.Util.isPotentialKeyword(h)&&n.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(h)>=0&&(h!=="@type"||typeof d[h]=="object"&&!(d[h]["@protected"]||d[h]["@container"]==="@set")))throw new e.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${h} to ${JSON.stringify(f)}`,e.ERROR_CODES.KEYWORD_REDEFINITION);if(n.Util.ALIAS_RANGE_BLACKLIST.indexOf(n.Util.getContextValueId(f))>=0)throw new e.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${h} to ${JSON.stringify(f)}`,e.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&n.Util.isPotentialKeyword(n.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new e.ErrorCoded(`Tried to use keyword aliases as prefix: '${h}': '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);for(;n.Util.isPrefixValue(d[h]);){const p=d[h];let y=!1;if(typeof p=="string")d[h]=o.expandTerm(p,!0),y=y||p!==d[h];else{const b=p["@id"],g=p["@type"],m=!("@prefix"in p)||n.Util.isValidIri(h);if("@id"in p)b!=null&&typeof b=="string"&&(d[h]=Object.assign(Object.assign({},d[h]),{"@id":o.expandTerm(b,!0)}),y=y||b!==d[h]["@id"]);else if(!n.Util.isPotentialKeyword(h)&&m){const v=o.expandTerm(h,!0);v!==h&&(d[h]=Object.assign(Object.assign({},d[h]),{"@id":v}),y=!0)}if(g&&typeof g=="string"&&g!=="@vocab"&&(!p["@container"]||!p["@container"]["@type"])&&m){let v=o.expandTerm(g,!0);l&&g===v&&(v=o.expandTerm(g,!1)),v!==g&&(y=!0,d[h]=Object.assign(Object.assign({},d[h]),{"@type":v}))}}if(!y)break}}}normalize(o,{processingMode:l,normalizeLanguageTags:c}){if(c||l===1)for(const d of Object.keys(o))if(d==="@language"&&typeof o[d]=="string")o[d]=o[d].toLowerCase();else{const h=o[d];if(h&&typeof h=="object"&&typeof h["@language"]=="string"){const f=h["@language"].toLowerCase();f!==h["@language"]&&(o[d]=Object.assign(Object.assign({},h),{"@language":f}))}}}containersToHash(o){for(const l of Object.keys(o)){const c=o[l];if(c&&typeof c=="object"){if(typeof c["@container"]=="string")o[l]=Object.assign(Object.assign({},c),{"@container":{[c["@container"]]:!0}});else if(Array.isArray(c["@container"])){const d={};for(const h of c["@container"])d[h]=!0;o[l]=Object.assign(Object.assign({},c),{"@container":d})}}}}applyScopedProtected(o,{processingMode:l},c){if(l&&l>=1.1&&o["@protected"]){for(const d of Object.keys(o))if(!n.Util.isReservedInternalKeyword(d)&&!n.Util.isPotentialKeyword(d)&&!n.Util.isTermProtected(o,d)){const h=o[d];h&&typeof h=="object"?"@protected"in o[d]||(o[d]=Object.assign(Object.assign({},o[d]),{"@protected":!0})):(o[d]={"@id":h,"@protected":!0},n.Util.isSimpleTermDefinitionPrefix(h,c)&&(o[d]=Object.assign(Object.assign({},o[d]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,l,c,d){for(const h of d??Object.keys(l))if(n.Util.isTermProtected(o,h)&&(typeof l[h]=="string"?l[h]={"@id":l[h],"@protected":!0}:l[h]=Object.assign(Object.assign({},l[h]),{"@protected":!0}),!n.Util.deepEqual(o[h],l[h])))throw new e.ErrorCoded(`Attempted to override the protected keyword ${h} from ${JSON.stringify(n.Util.getContextValueId(o[h]))} to ${JSON.stringify(n.Util.getContextValueId(l[h]))}`,e.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:l}){for(const c of Object.keys(o)){if(n.Util.isReservedInternalKeyword(c))continue;if(c==="")throw new e.ErrorCoded(`The empty term is not allowed, got: '${c}': '${JSON.stringify(o[c])}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);const d=o[c],h=typeof d;if(n.Util.isPotentialKeyword(c)){switch(c.substr(1)){case"vocab":if(d!==null&&h!=="string")throw new e.ErrorCoded(`Found an invalid @vocab IRI: ${d}`,e.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(d!==null&&h!=="string")throw new e.ErrorCoded(`Found an invalid @base IRI: ${o[c]}`,e.ERROR_CODES.INVALID_BASE_IRI);break;case"language":d!==null&&js.validateLanguage(d,!0,e.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(d!==null&&h!=="number")throw new e.ErrorCoded(`Found an invalid @version number: ${d}`,e.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":d!==null&&js.validateDirection(d,!0);break;case"propagate":if(l===1)throw new e.ErrorCoded(`Found an illegal @propagate keyword: ${d}`,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(d!==null&&h!=="boolean")throw new e.ErrorCoded(`Found an invalid @propagate value: ${d}`,e.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(n.Util.isValidKeyword(c)&&n.Util.isValidKeyword(n.Util.getContextValueId(d)))throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${c}': '${n.Util.getContextValueId(d)}'`,e.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(d!==null)switch(h){case"string":if(n.Util.getPrefix(d,o)===c)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${c}': '${JSON.stringify(d)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);if(n.Util.isValidIriWeak(c)){if(d==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${c}': '${d}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(n.Util.isValidIri(d)&&d!==new s.JsonLdContextNormalized(o).expandTerm(c))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${c}': '${d}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!n.Util.isCompactIri(c)&&!("@id"in d)&&(d["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new e.ErrorCoded(`Missing @id in context entry: '${c}': '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(d)){const p=d[f];if(p)switch(f){case"@id":if(n.Util.isValidKeyword(p)&&p!=="@type"&&p!=="@id"&&p!=="@graph"&&p!=="@nest")throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${c}': '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(n.Util.isValidIriWeak(c)){if(p==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${c}': '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(n.Util.isValidIri(p)&&p!==new s.JsonLdContextNormalized(o).expandTerm(c))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${c}': '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof p!="string")throw new e.ErrorCoded(`Detected non-string @id in context entry: '${c}': '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(n.Util.getPrefix(p,o)===c)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${c}': '${JSON.stringify(d)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(d["@container"]==="@type"&&p!=="@id"&&p!=="@vocab")throw new e.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${c}': '${p}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof p!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(h)}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(p!=="@id"&&p!=="@vocab"&&(l===1||p!=="@json")&&(l===1||p!=="@none")&&(p[0]==="_"||!n.Util.isValidIri(p)))throw new e.ErrorCoded(`A context @type must be an absolute IRI, found: '${c}': '${p}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof p=="string"&&d["@id"]&&d["@id"]!==p)throw new e.ErrorCoded(`Found non-matching @id and @reverse term values in '${c}':'${p}' and '${d["@id"]}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in d)throw new e.ErrorCoded(`@nest is not allowed in the reverse property '${c}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(l===1&&(Object.keys(p).length>1||n.Util.CONTAINERS_1_0.indexOf(Object.keys(p)[0])<0))throw new e.ErrorCoded(`Invalid term @container for '${c}' ('${Object.keys(p)}') in 1.0, must be only one of ${n.Util.CONTAINERS_1_0.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const y of Object.keys(p)){if(y==="@list"&&d["@reverse"])throw new e.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${c}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(n.Util.CONTAINERS.indexOf(y)<0)throw new e.ErrorCoded(`Invalid term @container for '${c}' ('${y}'), must be one of ${n.Util.CONTAINERS.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":js.validateLanguage(p,!0,e.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":js.validateDirection(p,!0);break;case"@prefix":if(p!==null&&typeof p!="boolean")throw new e.ErrorCoded(`Found an invalid term @prefix boolean in: '${c}': '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in d)&&!n.Util.isValidIri(c))throw new e.ErrorCoded(`Invalid @prefix definition for '${c}' ('${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(l===1||!d["@container"]||!d["@container"]["@index"])throw new e.ErrorCoded(`Attempt to add illegal key to value object: '${c}': '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(n.Util.isPotentialKeyword(p)&&p!=="@nest")throw new e.ErrorCoded(`Found an invalid term @nest value in: '${c}': '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new e.ErrorCoded(`Found an invalid term value: '${c}': '${d}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,l,c){return typeof o=="string"||(c&&!("@base"in o)&&l.parentContext&&typeof l.parentContext=="object"&&"@base"in l.parentContext&&(o["@base"]=l.parentContext["@base"],l.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),l.baseIRI&&!l.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!n.Util.isValidIri(o["@base"])&&(o["@base"]=(0,t.resolve)(o["@base"],l.parentContext&&l.parentContext["@base"]||l.baseIRI)):(o["@base"]=l.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,l){if(!n.Util.isValidIri(o))try{o=(0,t.resolve)(o,l)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,l,c){for(const d of c??Object.keys(o)){const h=o[d];if(h&&typeof h=="object"&&"@context"in h&&h["@context"]!==null&&!l.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[d]:Object.assign({},o[d])});delete f[d]["@context"],await this.parse(h["@context"],Object.assign(Object.assign({},l),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new e.ErrorCoded(f.message,e.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[d]=Object.assign(Object.assign({},h),{"@context":(await this.parse(h["@context"],Object.assign(Object.assign({},l),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,l={},c={}){const{baseIRI:d,parentContext:h,external:f,processingMode:p=js.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:y,ignoreProtection:b,minimalProcessing:g}=l,m=l.remoteContexts||{};if(Object.keys(m).length>=this.remoteContextsDepthLimit)throw new e.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(m),e.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!b&&h&&n.Util.hasProtectedTerms(h))throw new e.ErrorCoded("Illegal context nullification when terms are protected",e.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new s.JsonLdContextNormalized(this.applyBaseEntry({},l,!1))}else if(typeof o=="string"){const v=this.normalizeContextIri(o,d),_=this.getOverriddenLoad(v,l);if(_)return new s.JsonLdContextNormalized(_);const w=await this.parse(await this.load(v),Object.assign(Object.assign({},l),{baseIRI:v,external:!0,remoteContexts:Object.assign(Object.assign({},m),{[v]:!0})}));return this.applyBaseEntry(w.getContextRaw(),l,!0),w}else if(Array.isArray(o)){const v=[],_=await Promise.all(o.map((S,A)=>{if(typeof S=="string"){const D=this.normalizeContextIri(S,d);v[A]=D;const L=this.getOverriddenLoad(D,l);return L||this.load(D)}else return S}));if(g)return new s.JsonLdContextNormalized(_);const w=await _.reduce((S,A,D)=>S.then(L=>this.parse(A,Object.assign(Object.assign({},l),{baseIRI:v[D]||l.baseIRI,external:!!v[D]||l.external,parentContext:L.getContextRaw(),remoteContexts:v[D]?Object.assign(Object.assign({},m),{[v[D]]:!0}):m}),{skipValidation:D<_.length-1})),Promise.resolve(new s.JsonLdContextNormalized(h||{})));return this.applyBaseEntry(w.getContextRaw(),l,!0),w}else if(typeof o=="object"){if("@context"in o)return await this.parse(o["@context"],l);if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,l,!0),this.containersToHash(o),g)return new s.JsonLdContextNormalized(o);let v={};if("@import"in o)if(p>=1.1){if(typeof o["@import"]!="string")throw new e.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],e.ERROR_CODES.INVALID_IMPORT_VALUE);v=await this.loadImportContext(this.normalizeContextIri(o["@import"],d)),delete o["@import"]}else throw new e.ErrorCoded("Context importing is not supported in JSON-LD 1.0",e.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(v,{processingMode:p},s.defaultExpandOptions);const _=Object.assign(v,o);this.idifyReverseTerms(_),this.normalize(_,{processingMode:p,normalizeLanguageTags:y}),this.applyScopedProtected(_,{processingMode:p},s.defaultExpandOptions);const w=Object.keys(_),S=[];if(typeof h=="object")for(const D in h)D in _?S.push(D):_[D]=h[D];await this.parseInnerContexts(_,l,w);const A=new s.JsonLdContextNormalized(_);return(_&&_["@version"]||js.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(h&&"@vocab"in h&&o["@vocab"].indexOf(":")<0?_["@vocab"]=h["@vocab"]+o["@vocab"]:(n.Util.isCompactIri(o["@vocab"])||o["@vocab"]in _)&&(_["@vocab"]=A.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(A,this.expandContentTypeToBase,w),!b&&h&&p>=1.1&&this.validateKeywordRedefinitions(h,_,s.defaultExpandOptions,S),this.validateContext&&!c.skipValidation&&this.validate(_,{processingMode:p}),A}else throw new e.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,e.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const l=this.documentCache[o];if(l)return l;let c;try{c=await this.documentLoader.load(o)}catch(d){throw new e.ErrorCoded(`Failed to load remote context ${o}: ${d.message}`,e.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in c))throw new e.ErrorCoded(`Missing @context in remote context at ${o}`,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=c["@context"]}getOverriddenLoad(o,l){if(o in(l.remoteContexts||{})){if(l.ignoreRemoteScopedContexts)return o;throw new e.ErrorCoded("Detected a cyclic context inclusion of "+o,e.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let l=await this.load(o);if(typeof l!="object"||Array.isArray(l))throw new e.ErrorCoded("An imported context must be a single object: "+o,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in l)throw new e.ErrorCoded("An imported context can not import another context: "+o,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);return l=Object.assign({},l),this.containersToHash(l),l}};return r.DEFAULT_PROCESSING_MODE=1.1,Dc.ContextParser=r,Dc}var l_={},zx;function vG(){return zx||(zx=1,Object.defineProperty(l_,"__esModule",{value:!0})),l_}var d_={},Gx;function wG(){return Gx||(Gx=1,Object.defineProperty(d_,"__esModule",{value:!0})),d_}var Wx;function Jr(){return Wx||(Wx=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(_G(),t),u(Py(),t),u(Cq(),t),u(vG(),t),u(wG(),t),u(jq(),t),u(JT(),t)}(a_)),a_}var Jx;function Lq(){if(Jx)return Pc;Jx=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.Util=void 0;const t=Et(),e=Jr(),u=Ot();class s{constructor(r){this.nodeHandlers={},this.nodeValueHandlers={},this.directiveNodeHandlers={},this.settings=r,this.dataFactory=r.dataFactory||new t.DataFactory,this.operationFactory=new u.Factory(this.dataFactory),this.contextParser=new e.ContextParser}registerNodeHandler(r){this.nodeHandlers[r.targetKind]=r}registerNodeValueHandler(r){this.nodeValueHandlers[r.targetKind]=r}registerDirectiveNodeHandler(r){this.directiveNodeHandlers[r.targetKind]=r}handleNode(r,a){const o=this.nodeHandlers[r.kind];if(!o)throw new Error(`Unsupported GraphQL node '${r.kind}'`);return o.handle(r,a)}handleNodeValue(r,a,o){const l=this.nodeValueHandlers[r.kind];if(!l)throw new Error(`Unsupported GraphQL value node '${r.kind}'`);return l.handle(r,a,o)}handleDirectiveNode(r,a){const o=this.directiveNodeHandlers[r.directive.name.value];return o?o.handle(r,a):null}joinOperations(r){if(r.length===1)return r[0];const a=[],o=[];for(const l of r)l.type==="bgp"?a.push(l):o.push(l);if(a.length===r.length)return this.joinOperationsAsBgp(a);if(a.length===r.length-1&&o[0].type==="leftjoin"&&o[0].input[0].type==="bgp"){const l=o[0];return a.push(l.input[0]),this.operationFactory.createLeftJoin(this.joinOperationsAsBgp(a),l.input[1])}else return o.length===r.length?this.joinOperationsAsNestedJoin(o):this.joinOperationsAsNestedJoin([this.joinOperationsAsBgp(a),this.joinOperationsAsNestedJoin(o)])}joinOperationsAsBgp(r){return this.operationFactory.createBgp([].concat.apply([],r.map(a=>a.patterns)))}joinOperationsAsNestedJoin(r){return this.operationFactory.createJoin(r)}appendFieldToPath(r,a){return r.concat([a])}getFieldLabel(r){return(r.alias?r.alias:r.name).value}nameToVariable(r,a){return this.dataFactory.variable((a.path.length?a.path.join(this.settings.variableDelimiter)+this.settings.variableDelimiter:"")+r)}valueToNamedNode(r,a){const o=a.expandTerm(r,!0);if(this.settings.requireContext&&!o)throw new Error("No context entry was found for "+r);return this.dataFactory.namedNode(o||r)}getArgument(r,a){if(r){for(const o of r)if(o.name.value===a)return o}}newTypePattern(r,a,o){return this.operationFactory.createPattern(r,this.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.valueToNamedNode(a.name.value,o.context),o.graph)}createQuadPattern(r,a,o,l,c){const d=this.valueToNamedNode(a.value,c);return c&&c.getContextRaw()[a.value]&&c.getContextRaw()[a.value]["@reverse"]?this.operationFactory.createPattern(o,d,r,l):this.operationFactory.createPattern(r,d,o,l)}createQuadPath(r,a,o,l,c,d){const h=this.valueToNamedNode(a.value,d);let f=this.operationFactory.createLink(h);for(const p of o.values){if(p.kind!=="EnumValue")throw new Error("Invalid value type for 'alt' argument, must be EnumValue, but got "+p.kind);f=this.operationFactory.createAlt([f,this.operationFactory.createLink(this.valueToNamedNode(p.value,d))])}return d&&d.getContextRaw()[a.value]&&d.getContextRaw()[a.value]["@reverse"]?this.operationFactory.createPath(l,f,r,c):this.operationFactory.createPath(r,f,l,c)}}return Pc.Util=s,Pc}var Xx;function SG(){if(Xx)return Ic;Xx=1;var t=I&&I.__awaiter||function(o,l,c,d){function h(f){return f instanceof c?f:new c(function(p){p(f)})}return new(c||(c=Promise))(function(f,p){function y(m){try{g(d.next(m))}catch(v){p(v)}}function b(m){try{g(d.throw(m))}catch(v){p(v)}}function g(m){m.done?f(m.value):h(m.value).then(y,b)}g((d=d.apply(o,l||[])).next())})};Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.Converter=void 0;const e=mG,u=pq(),s=hq(),n=Iy(),r=Lq();class a{constructor(l){l=l||{},l.variableDelimiter=l.variableDelimiter||"_",l.expressionVariableCounter=l.expressionVariableCounter||0,this.util=new r.Util(l),this.initializeNodeHandlers(l)}static registerNodeHandlers(l,c){l.registerNodeHandler(new u.NodeHandlerDocument(l,c)),l.registerNodeHandler(new u.NodeHandlerDefinitionOperation(l,c)),l.registerNodeHandler(new u.NodeHandlerDefinitionFragment(l,c)),l.registerNodeHandler(new u.NodeHandlerSelectionFragmentSpread(l,c)),l.registerNodeHandler(new u.NodeHandlerSelectionInlineFragment(l,c)),l.registerNodeHandler(new u.NodeHandlerSelectionField(l,c))}static registerNodeValueHandlers(l,c){l.registerNodeValueHandler(new u.NodeValueHandlerVariable(l,c)),l.registerNodeValueHandler(new u.NodeValueHandlerInt(l,c)),l.registerNodeValueHandler(new u.NodeValueHandlerFloat(l,c)),l.registerNodeValueHandler(new u.NodeValueHandlerString(l,c)),l.registerNodeValueHandler(new u.NodeValueHandlerBoolean(l,c)),l.registerNodeValueHandler(new u.NodeValueHandlerNull(l,c)),l.registerNodeValueHandler(new u.NodeValueHandlerEnum(l,c)),l.registerNodeValueHandler(new u.NodeValueHandlerList(l,c)),l.registerNodeValueHandler(new u.NodeValueHandlerObject(l,c))}static registerDirectiveNodeHandlers(l,c){l.registerDirectiveNodeHandler(new s.DirectiveNodeHandlerInclude(l,c)),l.registerDirectiveNodeHandler(new s.DirectiveNodeHandlerOptional(l,c)),l.registerDirectiveNodeHandler(new s.DirectiveNodeHandlerPlural(l,c)),l.registerDirectiveNodeHandler(new s.DirectiveNodeHandlerSingle(l,c)),l.registerDirectiveNodeHandler(new s.DirectiveNodeHandlerSkip(l,c))}graphqlToSparqlAlgebra(l,c,d){return t(this,void 0,void 0,function*(){return this.graphqlToSparqlAlgebraRawContext(l,yield this.util.contextParser.parse(c),d)})}graphqlToSparqlAlgebraRawContext(l,c,d){d=d||{};const h=typeof l=="string"?(0,e.parse)(l):l,f=this.indexFragments(h),p={context:c,fragmentDefinitions:f,graph:this.util.dataFactory.defaultGraph(),path:[],singularizeState:n.SingularizeState.PLURAL,singularizeVariables:d.singularizeVariables||{},subject:null,terminalVariables:[],variablesDict:d.variablesDict||{},variablesMetaDict:{}};return this.util.handleNode(h,p)}indexFragments(l){const c={},d=[];for(const h of l.definitions)h.kind==="FragmentDefinition"?c[h.name.value]=h:d.push(h);return l.definitions=d,c}initializeNodeHandlers(l){a.registerNodeHandlers(this.util,l),a.registerNodeValueHandlers(this.util,l),a.registerDirectiveNodeHandlers(this.util,l)}}return Ic.Converter=a,Ic}var f_={},Kx;function TG(){return Kx||(Kx=1,Object.defineProperty(f_,"__esModule",{value:!0})),f_}var Yx;function AG(){return Yx||(Yx=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r),Object.defineProperty(s,a,{enumerable:!0,get:function(){return n[r]}})}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(pq(),t),u(SG(),t),u(Iy(),t),u(TG(),t),u(Lq(),t)}(Kg)),Kg}var Zx;function EG(){if(Zx)return nc;Zx=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.ActorQueryParseGraphql=void 0;const t=fq(),e=Lt,u=AG();let s=class extends t.ActorQueryParse{constructor(r){super(r),this.graphqlToSparql=new u.Converter({requireContext:!0})}async test(r){var a;if(((a=r.queryFormat)==null?void 0:a.language)!=="graphql")throw new Error("This actor can only parse GraphQL queries");return!0}async run(r){const a=r.context.get(e.KeysInitQuery.jsonLdContext)||{},o={singularizeVariables:r.context.get(e.KeysInitQuery.graphqlSingularizeVariables)};return{operation:await this.graphqlToSparql.graphqlToSparqlAlgebra(r.query,a,o)}}};return nc.ActorQueryParseGraphql=s,nc}var eI;function OG(){return eI||(eI=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(EG(),t)}(Xg)),Xg}var h_={},jc={},p_={},Lc={},y_={},Mc={},tI;function Mq(){if(tI)return Mc;tI=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.ActorAbstractMediaTyped=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}async run(s){if("handle"in s){const n=s;return{handle:await this.runHandle(n.handle,n.handleMediaType,s.context)}}if("mediaTypes"in s)return{mediaTypes:await this.getMediaTypes(s.context)};if("mediaTypeFormats"in s)return{mediaTypeFormats:await this.getMediaTypeFormats(s.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}async test(s){if("handle"in s){const n=s;return{handle:await this.testHandle(n.handle,n.handleMediaType,s.context)}}if("mediaTypes"in s)return{mediaTypes:await this.testMediaType(s.context)};if("mediaTypeFormats"in s)return{mediaTypeFormats:await this.testMediaTypeFormats(s.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}};return Mc.ActorAbstractMediaTyped=e,Mc}var Fc={},rI;function RG(){if(rI)return Fc;rI=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.ActorAbstractMediaTypedFixed=void 0;const t=Mq();let e=class extends t.ActorAbstractMediaTyped{constructor(s){super(s);const n=this.priorityScale||this.priorityScale===0?this.priorityScale:1;if(this.mediaTypePriorities)for(const[r,[a,o]]of Object.entries(this.mediaTypePriorities).entries())this.mediaTypePriorities[a]=n*o;this.mediaTypePriorities=Object.freeze(this.mediaTypePriorities),this.mediaTypeFormats=Object.freeze(this.mediaTypeFormats)}async testHandle(s,n,r){if(!n||!(n in this.mediaTypePriorities))throw new Error(`Unrecognized media type: ${n}`);return await this.testHandleChecked(s,r)}async testMediaType(s){return!0}async getMediaTypes(s){return this.mediaTypePriorities}async testMediaTypeFormats(s){return!0}async getMediaTypeFormats(s){return this.mediaTypeFormats}};return Fc.ActorAbstractMediaTypedFixed=e,Fc}var nI;function iu(){return nI||(nI=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Mq(),t),u(RG(),t)}(y_)),y_}var iI;function xG(){if(iI)return Lc;iI=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.ActorQueryResultSerialize=void 0;const t=iu();let e=class extends t.ActorAbstractMediaTyped{constructor(s){super(s)}};return Lc.ActorQueryResultSerialize=e,Lc}var qc={},aI;function IG(){if(aI)return qc;aI=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.ActorQueryResultSerializeFixedMediaTypes=void 0;const t=iu();let e=class extends t.ActorAbstractMediaTypedFixed{constructor(s){super(s)}async testHandleChecked(s,n){return!0}};return qc.ActorQueryResultSerializeFixedMediaTypes=e,qc}var sI;function Gi(){return sI||(sI=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(xG(),t),u(IG(),t)}(p_)),p_}var b_={exports:{}},m_={exports:{}},g_={},Bc={},oI;function PG(){if(oI)return Bc;oI=1,Bc.byteLength=o,Bc.toByteArray=c,Bc.fromByteArray=f;for(var t=[],e=[],u=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,r=s.length;n<r;++n)t[n]=s[n],e[s.charCodeAt(n)]=n;e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63;function a(p){var y=p.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=p.indexOf("=");b===-1&&(b=y);var g=b===y?0:4-b%4;return[b,g]}function o(p){var y=a(p),b=y[0],g=y[1];return(b+g)*3/4-g}function l(p,y,b){return(y+b)*3/4-b}function c(p){var y,b=a(p),g=b[0],m=b[1],v=new u(l(p,g,m)),_=0,w=m>0?g-4:g,S;for(S=0;S<w;S+=4)y=e[p.charCodeAt(S)]<<18|e[p.charCodeAt(S+1)]<<12|e[p.charCodeAt(S+2)]<<6|e[p.charCodeAt(S+3)],v[_++]=y>>16&255,v[_++]=y>>8&255,v[_++]=y&255;return m===2&&(y=e[p.charCodeAt(S)]<<2|e[p.charCodeAt(S+1)]>>4,v[_++]=y&255),m===1&&(y=e[p.charCodeAt(S)]<<10|e[p.charCodeAt(S+1)]<<4|e[p.charCodeAt(S+2)]>>2,v[_++]=y>>8&255,v[_++]=y&255),v}function d(p){return t[p>>18&63]+t[p>>12&63]+t[p>>6&63]+t[p&63]}function h(p,y,b){for(var g,m=[],v=y;v<b;v+=3)g=(p[v]<<16&16711680)+(p[v+1]<<8&65280)+(p[v+2]&255),m.push(d(g));return m.join("")}function f(p){for(var y,b=p.length,g=b%3,m=[],v=16383,_=0,w=b-g;_<w;_+=v)m.push(h(p,_,_+v>w?w:_+v));return g===1?(y=p[b-1],m.push(t[y>>2]+t[y<<4&63]+"==")):g===2&&(y=(p[b-2]<<8)+p[b-1],m.push(t[y>>10]+t[y>>4&63]+t[y<<2&63]+"=")),m.join("")}return Bc}var f1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var uI;function DG(){return uI||(uI=1,f1.read=function(t,e,u,s,n){var r,a,o=n*8-s-1,l=(1<<o)-1,c=l>>1,d=-7,h=u?n-1:0,f=u?-1:1,p=t[e+h];for(h+=f,r=p&(1<<-d)-1,p>>=-d,d+=o;d>0;r=r*256+t[e+h],h+=f,d-=8);for(a=r&(1<<-d)-1,r>>=-d,d+=s;d>0;a=a*256+t[e+h],h+=f,d-=8);if(r===0)r=1-c;else{if(r===l)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,s),r=r-c}return(p?-1:1)*a*Math.pow(2,r-s)},f1.write=function(t,e,u,s,n,r){var a,o,l,c=r*8-n-1,d=(1<<c)-1,h=d>>1,f=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=s?0:r-1,y=s?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+h>=1?e+=f/l:e+=f*Math.pow(2,1-h),e*l>=2&&(a++,l/=2),a+h>=d?(o=0,a=d):a+h>=1?(o=(e*l-1)*Math.pow(2,n),a=a+h):(o=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;t[u+p]=o&255,p+=y,o/=256,n-=8);for(a=a<<n|o,c+=n;c>0;t[u+p]=a&255,p+=y,a/=256,c-=8);t[u+p-y]|=b*128}),f1}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var cI;function Wi(){return cI||(cI=1,function(t){const e=PG(),u=DG(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const n=2147483647;t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=r(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{const G=new Uint8Array(1),F={foo:function(){return 42}};return Object.setPrototypeOf(F,Uint8Array.prototype),Object.setPrototypeOf(G,F),G.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(G){if(G>n)throw new RangeError('The value "'+G+'" is invalid for option "size"');const F=new Uint8Array(G);return Object.setPrototypeOf(F,o.prototype),F}function o(G,F,Q){if(typeof G=="number"){if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(G)}return l(G,F,Q)}o.poolSize=8192;function l(G,F,Q){if(typeof G=="string")return f(G,F);if(ArrayBuffer.isView(G))return y(G);if(G==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(ce(G,ArrayBuffer)||G&&ce(G.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ce(G,SharedArrayBuffer)||G&&ce(G.buffer,SharedArrayBuffer)))return b(G,F,Q);if(typeof G=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const te=G.valueOf&&G.valueOf();if(te!=null&&te!==G)return o.from(te,F,Q);const me=g(G);if(me)return me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof G[Symbol.toPrimitive]=="function")return o.from(G[Symbol.toPrimitive]("string"),F,Q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}o.from=function(G,F,Q){return l(G,F,Q)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function c(G){if(typeof G!="number")throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function d(G,F,Q){return c(G),G<=0?a(G):F!==void 0?typeof Q=="string"?a(G).fill(F,Q):a(G).fill(F):a(G)}o.alloc=function(G,F,Q){return d(G,F,Q)};function h(G){return c(G),a(G<0?0:m(G)|0)}o.allocUnsafe=function(G){return h(G)},o.allocUnsafeSlow=function(G){return h(G)};function f(G,F){if((typeof F!="string"||F==="")&&(F="utf8"),!o.isEncoding(F))throw new TypeError("Unknown encoding: "+F);const Q=_(G,F)|0;let te=a(Q);const me=te.write(G,F);return me!==Q&&(te=te.slice(0,me)),te}function p(G){const F=G.length<0?0:m(G.length)|0,Q=a(F);for(let te=0;te<F;te+=1)Q[te]=G[te]&255;return Q}function y(G){if(ce(G,Uint8Array)){const F=new Uint8Array(G);return b(F.buffer,F.byteOffset,F.byteLength)}return p(G)}function b(G,F,Q){if(F<0||G.byteLength<F)throw new RangeError('"offset" is outside of buffer bounds');if(G.byteLength<F+(Q||0))throw new RangeError('"length" is outside of buffer bounds');let te;return F===void 0&&Q===void 0?te=new Uint8Array(G):Q===void 0?te=new Uint8Array(G,F):te=new Uint8Array(G,F,Q),Object.setPrototypeOf(te,o.prototype),te}function g(G){if(o.isBuffer(G)){const F=m(G.length)|0,Q=a(F);return Q.length===0||G.copy(Q,0,0,F),Q}if(G.length!==void 0)return typeof G.length!="number"||Te(G.length)?a(0):p(G);if(G.type==="Buffer"&&Array.isArray(G.data))return p(G.data)}function m(G){if(G>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return G|0}function v(G){return+G!=G&&(G=0),o.alloc(+G)}o.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==o.prototype},o.compare=function(F,Q){if(ce(F,Uint8Array)&&(F=o.from(F,F.offset,F.byteLength)),ce(Q,Uint8Array)&&(Q=o.from(Q,Q.offset,Q.byteLength)),!o.isBuffer(F)||!o.isBuffer(Q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===Q)return 0;let te=F.length,me=Q.length;for(let Oe=0,Ne=Math.min(te,me);Oe<Ne;++Oe)if(F[Oe]!==Q[Oe]){te=F[Oe],me=Q[Oe];break}return te<me?-1:me<te?1:0},o.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(F,Q){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return o.alloc(0);let te;if(Q===void 0)for(Q=0,te=0;te<F.length;++te)Q+=F[te].length;const me=o.allocUnsafe(Q);let Oe=0;for(te=0;te<F.length;++te){let Ne=F[te];if(ce(Ne,Uint8Array))Oe+Ne.length>me.length?(o.isBuffer(Ne)||(Ne=o.from(Ne)),Ne.copy(me,Oe)):Uint8Array.prototype.set.call(me,Ne,Oe);else if(o.isBuffer(Ne))Ne.copy(me,Oe);else throw new TypeError('"list" argument must be an Array of Buffers');Oe+=Ne.length}return me};function _(G,F){if(o.isBuffer(G))return G.length;if(ArrayBuffer.isView(G)||ce(G,ArrayBuffer))return G.byteLength;if(typeof G!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);const Q=G.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&Q===0)return 0;let me=!1;for(;;)switch(F){case"ascii":case"latin1":case"binary":return Q;case"utf8":case"utf-8":return V(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q*2;case"hex":return Q>>>1;case"base64":return Y(G).length;default:if(me)return te?-1:V(G).length;F=(""+F).toLowerCase(),me=!0}}o.byteLength=_;function w(G,F,Q){let te=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((Q===void 0||Q>this.length)&&(Q=this.length),Q<=0)||(Q>>>=0,F>>>=0,Q<=F))return"";for(G||(G="utf8");;)switch(G){case"hex":return le(this,F,Q);case"utf8":case"utf-8":return j(this,F,Q);case"ascii":return Z(this,F,Q);case"latin1":case"binary":return X(this,F,Q);case"base64":return U(this,F,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,F,Q);default:if(te)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),te=!0}}o.prototype._isBuffer=!0;function S(G,F,Q){const te=G[F];G[F]=G[Q],G[Q]=te}o.prototype.swap16=function(){const F=this.length;if(F%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Q=0;Q<F;Q+=2)S(this,Q,Q+1);return this},o.prototype.swap32=function(){const F=this.length;if(F%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Q=0;Q<F;Q+=4)S(this,Q,Q+3),S(this,Q+1,Q+2);return this},o.prototype.swap64=function(){const F=this.length;if(F%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Q=0;Q<F;Q+=8)S(this,Q,Q+7),S(this,Q+1,Q+6),S(this,Q+2,Q+5),S(this,Q+3,Q+4);return this},o.prototype.toString=function(){const F=this.length;return F===0?"":arguments.length===0?j(this,0,F):w.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(F){if(!o.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F?!0:o.compare(this,F)===0},o.prototype.inspect=function(){let F="";const Q=t.INSPECT_MAX_BYTES;return F=this.toString("hex",0,Q).replace(/(.{2})/g,"$1 ").trim(),this.length>Q&&(F+=" ... "),"<Buffer "+F+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(F,Q,te,me,Oe){if(ce(F,Uint8Array)&&(F=o.from(F,F.offset,F.byteLength)),!o.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if(Q===void 0&&(Q=0),te===void 0&&(te=F?F.length:0),me===void 0&&(me=0),Oe===void 0&&(Oe=this.length),Q<0||te>F.length||me<0||Oe>this.length)throw new RangeError("out of range index");if(me>=Oe&&Q>=te)return 0;if(me>=Oe)return-1;if(Q>=te)return 1;if(Q>>>=0,te>>>=0,me>>>=0,Oe>>>=0,this===F)return 0;let Ne=Oe-me,We=te-Q;const Ve=Math.min(Ne,We),pe=this.slice(me,Oe),we=F.slice(Q,te);for(let W=0;W<Ve;++W)if(pe[W]!==we[W]){Ne=pe[W],We=we[W];break}return Ne<We?-1:We<Ne?1:0};function A(G,F,Q,te,me){if(G.length===0)return-1;if(typeof Q=="string"?(te=Q,Q=0):Q>2147483647?Q=2147483647:Q<-2147483648&&(Q=-2147483648),Q=+Q,Te(Q)&&(Q=me?0:G.length-1),Q<0&&(Q=G.length+Q),Q>=G.length){if(me)return-1;Q=G.length-1}else if(Q<0)if(me)Q=0;else return-1;if(typeof F=="string"&&(F=o.from(F,te)),o.isBuffer(F))return F.length===0?-1:D(G,F,Q,te,me);if(typeof F=="number")return F=F&255,typeof Uint8Array.prototype.indexOf=="function"?me?Uint8Array.prototype.indexOf.call(G,F,Q):Uint8Array.prototype.lastIndexOf.call(G,F,Q):D(G,[F],Q,te,me);throw new TypeError("val must be string, number or Buffer")}function D(G,F,Q,te,me){let Oe=1,Ne=G.length,We=F.length;if(te!==void 0&&(te=String(te).toLowerCase(),te==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(G.length<2||F.length<2)return-1;Oe=2,Ne/=2,We/=2,Q/=2}function Ve(we,W){return Oe===1?we[W]:we.readUInt16BE(W*Oe)}let pe;if(me){let we=-1;for(pe=Q;pe<Ne;pe++)if(Ve(G,pe)===Ve(F,we===-1?0:pe-we)){if(we===-1&&(we=pe),pe-we+1===We)return we*Oe}else we!==-1&&(pe-=pe-we),we=-1}else for(Q+We>Ne&&(Q=Ne-We),pe=Q;pe>=0;pe--){let we=!0;for(let W=0;W<We;W++)if(Ve(G,pe+W)!==Ve(F,W)){we=!1;break}if(we)return pe}return-1}o.prototype.includes=function(F,Q,te){return this.indexOf(F,Q,te)!==-1},o.prototype.indexOf=function(F,Q,te){return A(this,F,Q,te,!0)},o.prototype.lastIndexOf=function(F,Q,te){return A(this,F,Q,te,!1)};function L(G,F,Q,te){Q=Number(Q)||0;const me=G.length-Q;te?(te=Number(te),te>me&&(te=me)):te=me;const Oe=F.length;te>Oe/2&&(te=Oe/2);let Ne;for(Ne=0;Ne<te;++Ne){const We=parseInt(F.substr(Ne*2,2),16);if(Te(We))return Ne;G[Q+Ne]=We}return Ne}function O(G,F,Q,te){return re(V(F,G.length-Q),G,Q,te)}function E(G,F,Q,te){return re(J(F),G,Q,te)}function P(G,F,Q,te){return re(Y(F),G,Q,te)}function M(G,F,Q,te){return re(z(F,G.length-Q),G,Q,te)}o.prototype.write=function(F,Q,te,me){if(Q===void 0)me="utf8",te=this.length,Q=0;else if(te===void 0&&typeof Q=="string")me=Q,te=this.length,Q=0;else if(isFinite(Q))Q=Q>>>0,isFinite(te)?(te=te>>>0,me===void 0&&(me="utf8")):(me=te,te=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Oe=this.length-Q;if((te===void 0||te>Oe)&&(te=Oe),F.length>0&&(te<0||Q<0)||Q>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");let Ne=!1;for(;;)switch(me){case"hex":return L(this,F,Q,te);case"utf8":case"utf-8":return O(this,F,Q,te);case"ascii":case"latin1":case"binary":return E(this,F,Q,te);case"base64":return P(this,F,Q,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,F,Q,te);default:if(Ne)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),Ne=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(G,F,Q){return F===0&&Q===G.length?e.fromByteArray(G):e.fromByteArray(G.slice(F,Q))}function j(G,F,Q){Q=Math.min(G.length,Q);const te=[];let me=F;for(;me<Q;){const Oe=G[me];let Ne=null,We=Oe>239?4:Oe>223?3:Oe>191?2:1;if(me+We<=Q){let Ve,pe,we,W;switch(We){case 1:Oe<128&&(Ne=Oe);break;case 2:Ve=G[me+1],(Ve&192)===128&&(W=(Oe&31)<<6|Ve&63,W>127&&(Ne=W));break;case 3:Ve=G[me+1],pe=G[me+2],(Ve&192)===128&&(pe&192)===128&&(W=(Oe&15)<<12|(Ve&63)<<6|pe&63,W>2047&&(W<55296||W>57343)&&(Ne=W));break;case 4:Ve=G[me+1],pe=G[me+2],we=G[me+3],(Ve&192)===128&&(pe&192)===128&&(we&192)===128&&(W=(Oe&15)<<18|(Ve&63)<<12|(pe&63)<<6|we&63,W>65535&&W<1114112&&(Ne=W))}}Ne===null?(Ne=65533,We=1):Ne>65535&&(Ne-=65536,te.push(Ne>>>10&1023|55296),Ne=56320|Ne&1023),te.push(Ne),me+=We}return $(te)}const q=4096;function $(G){const F=G.length;if(F<=q)return String.fromCharCode.apply(String,G);let Q="",te=0;for(;te<F;)Q+=String.fromCharCode.apply(String,G.slice(te,te+=q));return Q}function Z(G,F,Q){let te="";Q=Math.min(G.length,Q);for(let me=F;me<Q;++me)te+=String.fromCharCode(G[me]&127);return te}function X(G,F,Q){let te="";Q=Math.min(G.length,Q);for(let me=F;me<Q;++me)te+=String.fromCharCode(G[me]);return te}function le(G,F,Q){const te=G.length;(!F||F<0)&&(F=0),(!Q||Q<0||Q>te)&&(Q=te);let me="";for(let Oe=F;Oe<Q;++Oe)me+=xe[G[Oe]];return me}function K(G,F,Q){const te=G.slice(F,Q);let me="";for(let Oe=0;Oe<te.length-1;Oe+=2)me+=String.fromCharCode(te[Oe]+te[Oe+1]*256);return me}o.prototype.slice=function(F,Q){const te=this.length;F=~~F,Q=Q===void 0?te:~~Q,F<0?(F+=te,F<0&&(F=0)):F>te&&(F=te),Q<0?(Q+=te,Q<0&&(Q=0)):Q>te&&(Q=te),Q<F&&(Q=F);const me=this.subarray(F,Q);return Object.setPrototypeOf(me,o.prototype),me};function he(G,F,Q){if(G%1!==0||G<0)throw new RangeError("offset is not uint");if(G+F>Q)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(F,Q,te){F=F>>>0,Q=Q>>>0,te||he(F,Q,this.length);let me=this[F],Oe=1,Ne=0;for(;++Ne<Q&&(Oe*=256);)me+=this[F+Ne]*Oe;return me},o.prototype.readUintBE=o.prototype.readUIntBE=function(F,Q,te){F=F>>>0,Q=Q>>>0,te||he(F,Q,this.length);let me=this[F+--Q],Oe=1;for(;Q>0&&(Oe*=256);)me+=this[F+--Q]*Oe;return me},o.prototype.readUint8=o.prototype.readUInt8=function(F,Q){return F=F>>>0,Q||he(F,1,this.length),this[F]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(F,Q){return F=F>>>0,Q||he(F,2,this.length),this[F]|this[F+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(F,Q){return F=F>>>0,Q||he(F,2,this.length),this[F]<<8|this[F+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(F,Q){return F=F>>>0,Q||he(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+this[F+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(F,Q){return F=F>>>0,Q||he(F,4,this.length),this[F]*16777216+(this[F+1]<<16|this[F+2]<<8|this[F+3])},o.prototype.readBigUInt64LE=Le(function(F){F=F>>>0,T(F,"offset");const Q=this[F],te=this[F+7];(Q===void 0||te===void 0)&&x(F,this.length-8);const me=Q+this[++F]*2**8+this[++F]*2**16+this[++F]*2**24,Oe=this[++F]+this[++F]*2**8+this[++F]*2**16+te*2**24;return BigInt(me)+(BigInt(Oe)<<BigInt(32))}),o.prototype.readBigUInt64BE=Le(function(F){F=F>>>0,T(F,"offset");const Q=this[F],te=this[F+7];(Q===void 0||te===void 0)&&x(F,this.length-8);const me=Q*2**24+this[++F]*2**16+this[++F]*2**8+this[++F],Oe=this[++F]*2**24+this[++F]*2**16+this[++F]*2**8+te;return(BigInt(me)<<BigInt(32))+BigInt(Oe)}),o.prototype.readIntLE=function(F,Q,te){F=F>>>0,Q=Q>>>0,te||he(F,Q,this.length);let me=this[F],Oe=1,Ne=0;for(;++Ne<Q&&(Oe*=256);)me+=this[F+Ne]*Oe;return Oe*=128,me>=Oe&&(me-=Math.pow(2,8*Q)),me},o.prototype.readIntBE=function(F,Q,te){F=F>>>0,Q=Q>>>0,te||he(F,Q,this.length);let me=Q,Oe=1,Ne=this[F+--me];for(;me>0&&(Oe*=256);)Ne+=this[F+--me]*Oe;return Oe*=128,Ne>=Oe&&(Ne-=Math.pow(2,8*Q)),Ne},o.prototype.readInt8=function(F,Q){return F=F>>>0,Q||he(F,1,this.length),this[F]&128?(255-this[F]+1)*-1:this[F]},o.prototype.readInt16LE=function(F,Q){F=F>>>0,Q||he(F,2,this.length);const te=this[F]|this[F+1]<<8;return te&32768?te|4294901760:te},o.prototype.readInt16BE=function(F,Q){F=F>>>0,Q||he(F,2,this.length);const te=this[F+1]|this[F]<<8;return te&32768?te|4294901760:te},o.prototype.readInt32LE=function(F,Q){return F=F>>>0,Q||he(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},o.prototype.readInt32BE=function(F,Q){return F=F>>>0,Q||he(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},o.prototype.readBigInt64LE=Le(function(F){F=F>>>0,T(F,"offset");const Q=this[F],te=this[F+7];(Q===void 0||te===void 0)&&x(F,this.length-8);const me=this[F+4]+this[F+5]*2**8+this[F+6]*2**16+(te<<24);return(BigInt(me)<<BigInt(32))+BigInt(Q+this[++F]*2**8+this[++F]*2**16+this[++F]*2**24)}),o.prototype.readBigInt64BE=Le(function(F){F=F>>>0,T(F,"offset");const Q=this[F],te=this[F+7];(Q===void 0||te===void 0)&&x(F,this.length-8);const me=(Q<<24)+this[++F]*2**16+this[++F]*2**8+this[++F];return(BigInt(me)<<BigInt(32))+BigInt(this[++F]*2**24+this[++F]*2**16+this[++F]*2**8+te)}),o.prototype.readFloatLE=function(F,Q){return F=F>>>0,Q||he(F,4,this.length),u.read(this,F,!0,23,4)},o.prototype.readFloatBE=function(F,Q){return F=F>>>0,Q||he(F,4,this.length),u.read(this,F,!1,23,4)},o.prototype.readDoubleLE=function(F,Q){return F=F>>>0,Q||he(F,8,this.length),u.read(this,F,!0,52,8)},o.prototype.readDoubleBE=function(F,Q){return F=F>>>0,Q||he(F,8,this.length),u.read(this,F,!1,52,8)};function Re(G,F,Q,te,me,Oe){if(!o.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>me||F<Oe)throw new RangeError('"value" argument is out of bounds');if(Q+te>G.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(F,Q,te,me){if(F=+F,Q=Q>>>0,te=te>>>0,!me){const We=Math.pow(2,8*te)-1;Re(this,F,Q,te,We,0)}let Oe=1,Ne=0;for(this[Q]=F&255;++Ne<te&&(Oe*=256);)this[Q+Ne]=F/Oe&255;return Q+te},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(F,Q,te,me){if(F=+F,Q=Q>>>0,te=te>>>0,!me){const We=Math.pow(2,8*te)-1;Re(this,F,Q,te,We,0)}let Oe=te-1,Ne=1;for(this[Q+Oe]=F&255;--Oe>=0&&(Ne*=256);)this[Q+Oe]=F/Ne&255;return Q+te},o.prototype.writeUint8=o.prototype.writeUInt8=function(F,Q,te){return F=+F,Q=Q>>>0,te||Re(this,F,Q,1,255,0),this[Q]=F&255,Q+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(F,Q,te){return F=+F,Q=Q>>>0,te||Re(this,F,Q,2,65535,0),this[Q]=F&255,this[Q+1]=F>>>8,Q+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(F,Q,te){return F=+F,Q=Q>>>0,te||Re(this,F,Q,2,65535,0),this[Q]=F>>>8,this[Q+1]=F&255,Q+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(F,Q,te){return F=+F,Q=Q>>>0,te||Re(this,F,Q,4,4294967295,0),this[Q+3]=F>>>24,this[Q+2]=F>>>16,this[Q+1]=F>>>8,this[Q]=F&255,Q+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(F,Q,te){return F=+F,Q=Q>>>0,te||Re(this,F,Q,4,4294967295,0),this[Q]=F>>>24,this[Q+1]=F>>>16,this[Q+2]=F>>>8,this[Q+3]=F&255,Q+4};function ie(G,F,Q,te,me){R(F,te,me,G,Q,7);let Oe=Number(F&BigInt(4294967295));G[Q++]=Oe,Oe=Oe>>8,G[Q++]=Oe,Oe=Oe>>8,G[Q++]=Oe,Oe=Oe>>8,G[Q++]=Oe;let Ne=Number(F>>BigInt(32)&BigInt(4294967295));return G[Q++]=Ne,Ne=Ne>>8,G[Q++]=Ne,Ne=Ne>>8,G[Q++]=Ne,Ne=Ne>>8,G[Q++]=Ne,Q}function ae(G,F,Q,te,me){R(F,te,me,G,Q,7);let Oe=Number(F&BigInt(4294967295));G[Q+7]=Oe,Oe=Oe>>8,G[Q+6]=Oe,Oe=Oe>>8,G[Q+5]=Oe,Oe=Oe>>8,G[Q+4]=Oe;let Ne=Number(F>>BigInt(32)&BigInt(4294967295));return G[Q+3]=Ne,Ne=Ne>>8,G[Q+2]=Ne,Ne=Ne>>8,G[Q+1]=Ne,Ne=Ne>>8,G[Q]=Ne,Q+8}o.prototype.writeBigUInt64LE=Le(function(F,Q=0){return ie(this,F,Q,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Le(function(F,Q=0){return ae(this,F,Q,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(F,Q,te,me){if(F=+F,Q=Q>>>0,!me){const Ve=Math.pow(2,8*te-1);Re(this,F,Q,te,Ve-1,-Ve)}let Oe=0,Ne=1,We=0;for(this[Q]=F&255;++Oe<te&&(Ne*=256);)F<0&&We===0&&this[Q+Oe-1]!==0&&(We=1),this[Q+Oe]=(F/Ne>>0)-We&255;return Q+te},o.prototype.writeIntBE=function(F,Q,te,me){if(F=+F,Q=Q>>>0,!me){const Ve=Math.pow(2,8*te-1);Re(this,F,Q,te,Ve-1,-Ve)}let Oe=te-1,Ne=1,We=0;for(this[Q+Oe]=F&255;--Oe>=0&&(Ne*=256);)F<0&&We===0&&this[Q+Oe+1]!==0&&(We=1),this[Q+Oe]=(F/Ne>>0)-We&255;return Q+te},o.prototype.writeInt8=function(F,Q,te){return F=+F,Q=Q>>>0,te||Re(this,F,Q,1,127,-128),F<0&&(F=255+F+1),this[Q]=F&255,Q+1},o.prototype.writeInt16LE=function(F,Q,te){return F=+F,Q=Q>>>0,te||Re(this,F,Q,2,32767,-32768),this[Q]=F&255,this[Q+1]=F>>>8,Q+2},o.prototype.writeInt16BE=function(F,Q,te){return F=+F,Q=Q>>>0,te||Re(this,F,Q,2,32767,-32768),this[Q]=F>>>8,this[Q+1]=F&255,Q+2},o.prototype.writeInt32LE=function(F,Q,te){return F=+F,Q=Q>>>0,te||Re(this,F,Q,4,2147483647,-2147483648),this[Q]=F&255,this[Q+1]=F>>>8,this[Q+2]=F>>>16,this[Q+3]=F>>>24,Q+4},o.prototype.writeInt32BE=function(F,Q,te){return F=+F,Q=Q>>>0,te||Re(this,F,Q,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[Q]=F>>>24,this[Q+1]=F>>>16,this[Q+2]=F>>>8,this[Q+3]=F&255,Q+4},o.prototype.writeBigInt64LE=Le(function(F,Q=0){return ie(this,F,Q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Le(function(F,Q=0){return ae(this,F,Q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ee(G,F,Q,te,me,Oe){if(Q+te>G.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("Index out of range")}function De(G,F,Q,te,me){return F=+F,Q=Q>>>0,me||Ee(G,F,Q,4),u.write(G,F,Q,te,23,4),Q+4}o.prototype.writeFloatLE=function(F,Q,te){return De(this,F,Q,!0,te)},o.prototype.writeFloatBE=function(F,Q,te){return De(this,F,Q,!1,te)};function ge(G,F,Q,te,me){return F=+F,Q=Q>>>0,me||Ee(G,F,Q,8),u.write(G,F,Q,te,52,8),Q+8}o.prototype.writeDoubleLE=function(F,Q,te){return ge(this,F,Q,!0,te)},o.prototype.writeDoubleBE=function(F,Q,te){return ge(this,F,Q,!1,te)},o.prototype.copy=function(F,Q,te,me){if(!o.isBuffer(F))throw new TypeError("argument should be a Buffer");if(te||(te=0),!me&&me!==0&&(me=this.length),Q>=F.length&&(Q=F.length),Q||(Q=0),me>0&&me<te&&(me=te),me===te||F.length===0||this.length===0)return 0;if(Q<0)throw new RangeError("targetStart out of bounds");if(te<0||te>=this.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),F.length-Q<me-te&&(me=F.length-Q+te);const Oe=me-te;return this===F&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Q,te,me):Uint8Array.prototype.set.call(F,this.subarray(te,me),Q),Oe},o.prototype.fill=function(F,Q,te,me){if(typeof F=="string"){if(typeof Q=="string"?(me=Q,Q=0,te=this.length):typeof te=="string"&&(me=te,te=this.length),me!==void 0&&typeof me!="string")throw new TypeError("encoding must be a string");if(typeof me=="string"&&!o.isEncoding(me))throw new TypeError("Unknown encoding: "+me);if(F.length===1){const Ne=F.charCodeAt(0);(me==="utf8"&&Ne<128||me==="latin1")&&(F=Ne)}}else typeof F=="number"?F=F&255:typeof F=="boolean"&&(F=Number(F));if(Q<0||this.length<Q||this.length<te)throw new RangeError("Out of range index");if(te<=Q)return this;Q=Q>>>0,te=te===void 0?this.length:te>>>0,F||(F=0);let Oe;if(typeof F=="number")for(Oe=Q;Oe<te;++Oe)this[Oe]=F;else{const Ne=o.isBuffer(F)?F:o.from(F,me),We=Ne.length;if(We===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(Oe=0;Oe<te-Q;++Oe)this[Oe+Q]=Ne[Oe%We]}return this};const de={};function fe(G,F,Q){de[G]=class extends Q{constructor(){super(),Object.defineProperty(this,"message",{value:F.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${G}]`,this.stack,delete this.name}get code(){return G}set code(me){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:me,writable:!0})}toString(){return`${this.name} [${G}]: ${this.message}`}}}fe("ERR_BUFFER_OUT_OF_BOUNDS",function(G){return G?`${G} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),fe("ERR_INVALID_ARG_TYPE",function(G,F){return`The "${G}" argument must be of type number. Received type ${typeof F}`},TypeError),fe("ERR_OUT_OF_RANGE",function(G,F,Q){let te=`The value of "${G}" is out of range.`,me=Q;return Number.isInteger(Q)&&Math.abs(Q)>2**32?me=H(String(Q)):typeof Q=="bigint"&&(me=String(Q),(Q>BigInt(2)**BigInt(32)||Q<-(BigInt(2)**BigInt(32)))&&(me=H(me)),me+="n"),te+=` It must be ${F}. Received ${me}`,te},RangeError);function H(G){let F="",Q=G.length;const te=G[0]==="-"?1:0;for(;Q>=te+4;Q-=3)F=`_${G.slice(Q-3,Q)}${F}`;return`${G.slice(0,Q)}${F}`}function N(G,F,Q){T(F,"offset"),(G[F]===void 0||G[F+Q]===void 0)&&x(F,G.length-(Q+1))}function R(G,F,Q,te,me,Oe){if(G>Q||G<F){const Ne=typeof F=="bigint"?"n":"";let We;throw Oe>3?F===0||F===BigInt(0)?We=`>= 0${Ne} and < 2${Ne} ** ${(Oe+1)*8}${Ne}`:We=`>= -(2${Ne} ** ${(Oe+1)*8-1}${Ne}) and < 2 ** ${(Oe+1)*8-1}${Ne}`:We=`>= ${F}${Ne} and <= ${Q}${Ne}`,new de.ERR_OUT_OF_RANGE("value",We,G)}N(te,me,Oe)}function T(G,F){if(typeof G!="number")throw new de.ERR_INVALID_ARG_TYPE(F,"number",G)}function x(G,F,Q){throw Math.floor(G)!==G?(T(G,Q),new de.ERR_OUT_OF_RANGE(Q||"offset","an integer",G)):F<0?new de.ERR_BUFFER_OUT_OF_BOUNDS:new de.ERR_OUT_OF_RANGE(Q||"offset",`>= ${Q?1:0} and <= ${F}`,G)}const B=/[^+/0-9A-Za-z-_]/g;function k(G){if(G=G.split("=")[0],G=G.trim().replace(B,""),G.length<2)return"";for(;G.length%4!==0;)G=G+"=";return G}function V(G,F){F=F||1/0;let Q;const te=G.length;let me=null;const Oe=[];for(let Ne=0;Ne<te;++Ne){if(Q=G.charCodeAt(Ne),Q>55295&&Q<57344){if(!me){if(Q>56319){(F-=3)>-1&&Oe.push(239,191,189);continue}else if(Ne+1===te){(F-=3)>-1&&Oe.push(239,191,189);continue}me=Q;continue}if(Q<56320){(F-=3)>-1&&Oe.push(239,191,189),me=Q;continue}Q=(me-55296<<10|Q-56320)+65536}else me&&(F-=3)>-1&&Oe.push(239,191,189);if(me=null,Q<128){if((F-=1)<0)break;Oe.push(Q)}else if(Q<2048){if((F-=2)<0)break;Oe.push(Q>>6|192,Q&63|128)}else if(Q<65536){if((F-=3)<0)break;Oe.push(Q>>12|224,Q>>6&63|128,Q&63|128)}else if(Q<1114112){if((F-=4)<0)break;Oe.push(Q>>18|240,Q>>12&63|128,Q>>6&63|128,Q&63|128)}else throw new Error("Invalid code point")}return Oe}function J(G){const F=[];for(let Q=0;Q<G.length;++Q)F.push(G.charCodeAt(Q)&255);return F}function z(G,F){let Q,te,me;const Oe=[];for(let Ne=0;Ne<G.length&&!((F-=2)<0);++Ne)Q=G.charCodeAt(Ne),te=Q>>8,me=Q%256,Oe.push(me),Oe.push(te);return Oe}function Y(G){return e.toByteArray(k(G))}function re(G,F,Q,te){let me;for(me=0;me<te&&!(me+Q>=F.length||me>=G.length);++me)F[me+Q]=G[me];return me}function ce(G,F){return G instanceof F||G!=null&&G.constructor!=null&&G.constructor.name!=null&&G.constructor.name===F.name}function Te(G){return G!==G}const xe=function(){const G="0123456789abcdef",F=new Array(256);for(let Q=0;Q<16;++Q){const te=Q*16;for(let me=0;me<16;++me)F[te+me]=G[Q]+G[me]}return F}();function Le(G){return typeof BigInt>"u"?qe:G}function qe(){throw new Error("BigInt not supported")}}(g_)),g_}var __,lI;function Rr(){return lI||(lI=1,__={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,u){return t.slice(e,u)},Error,FunctionPrototypeCall(t,e,...u){return t.call(e,...u)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,u){return Object.defineProperty(t,e,u)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,u){return t.then(e,u)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,u){return t.slice(e,u)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,u){return t.set(e,u)},Boolean,Uint8Array}),__}var v_={exports:{}},Uc={exports:{}},dI;function Qo(){if(dI)return Uc.exports;dI=1;const{AbortController:t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Uc.exports=t,Uc.exports.AbortSignal=e,Uc.exports.default=t,Uc.exports}var fI;function In(){return fI||(fI=1,function(t){const e=Wi(),{kResistStopPropagation:u,SymbolDispose:s}=Rr(),n=globalThis.AbortSignal||Qo().AbortSignal,r=globalThis.AbortController||Qo().AbortController,a=Object.getPrototypeOf(async function(){}).constructor,o=globalThis.Blob||e.Blob,l=typeof o<"u"?function(p){return p instanceof o}:function(p){return!1},c=(f,p)=>{if(f!==void 0&&(f===null||typeof f!="object"||!("aborted"in f)))throw new ERR_INVALID_ARG_TYPE(p,"AbortSignal",f)},d=(f,p)=>{if(typeof f!="function")throw new ERR_INVALID_ARG_TYPE(p,"Function",f)};class h extends Error{constructor(p){if(!Array.isArray(p))throw new TypeError(`Expected input to be an Array, got ${typeof p}`);let y="";for(let b=0;b<p.length;b++)y+=`    ${p[b].stack}
`;super(y),this.name="AggregateError",this.errors=p}}t.exports={AggregateError:h,kEmptyObject:Object.freeze({}),once(f){let p=!1;return function(...y){p||(p=!0,f.apply(this,y))}},createDeferredPromise:function(){let f,p;return{promise:new Promise((b,g)=>{f=b,p=g}),resolve:f,reject:p}},promisify(f){return new Promise((p,y)=>{f((b,...g)=>b?y(b):p(...g))})},debuglog(){return function(){}},format(f,...p){return f.replace(/%([sdifj])/g,function(...[y,b]){const g=p.shift();return b==="f"?g.toFixed(6):b==="j"?JSON.stringify(g):b==="s"&&typeof g=="object"?`${g.constructor!==Object?g.constructor.name:""} {}`.trim():g.toString()})},inspect(f){switch(typeof f){case"string":if(f.includes("'"))if(f.includes('"')){if(!f.includes("`")&&!f.includes("${"))return`\`${f}\``}else return`"${f}"`;return`'${f}'`;case"number":return isNaN(f)?"NaN":Object.is(f,-0)?String(f):f;case"bigint":return`${String(f)}n`;case"boolean":case"undefined":return String(f);case"object":return"{}"}},types:{isAsyncFunction(f){return f instanceof a},isArrayBufferView(f){return ArrayBuffer.isView(f)}},isBlob:l,deprecate(f,p){return f},addAbortListener:Ry().addAbortListener||function(p,y){if(p===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",p);c(p,"signal"),d(y,"listener");let b;return p.aborted?queueMicrotask(()=>y()):(p.addEventListener("abort",y,{__proto__:null,once:!0,[u]:!0}),b=()=>{p.removeEventListener("abort",y)}),{__proto__:null,[s](){var g;(g=b)===null||g===void 0||g()}}},AbortSignalAny:n.any||function(p){if(p.length===1)return p[0];const y=new r,b=()=>y.abort();return p.forEach(g=>{c(g,"signals"),g.addEventListener("abort",b,{once:!0})}),y.signal.addEventListener("abort",()=>{p.forEach(g=>g.removeEventListener("abort",b))},{once:!0}),y.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(v_)),v_.exports}var h1={},w_,hI;function Un(){if(hI)return w_;hI=1;const{format:t,inspect:e,AggregateError:u}=In(),s=globalThis.AggregateError||u,n=Symbol("kIsNodeError"),r=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",l={};function c(g,m){if(!g)throw new l.ERR_INTERNAL_ASSERTION(m)}function d(g){let m="",v=g.length;const _=g[0]==="-"?1:0;for(;v>=_+4;v-=3)m=`_${g.slice(v-3,v)}${m}`;return`${g.slice(0,v)}${m}`}function h(g,m,v){if(typeof m=="function")return c(m.length<=v.length,`Code: ${g}; The provided arguments length (${v.length}) does not match the required ones (${m.length}).`),m(...v);const _=(m.match(/%[dfijoOs]/g)||[]).length;return c(_===v.length,`Code: ${g}; The provided arguments length (${v.length}) does not match the required ones (${_}).`),v.length===0?m:t(m,...v)}function f(g,m,v){v||(v=Error);class _ extends v{constructor(...S){super(h(g,m,S))}toString(){return`${this.name} [${g}]: ${this.message}`}}Object.defineProperties(_.prototype,{name:{value:v.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${g}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),_.prototype.code=g,_.prototype[n]=!0,l[g]=_}function p(g){const m=o+g.name;return Object.defineProperty(g,"name",{value:m}),g}function y(g,m){if(g&&m&&g!==m){if(Array.isArray(m.errors))return m.errors.push(g),m;const v=new s([m,g],m.message);return v.code=m.code,v}return g||m}class b extends Error{constructor(m="The operation was aborted",v=void 0){if(v!==void 0&&typeof v!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",v);super(m,v),this.code="ABORT_ERR",this.name="AbortError"}}return f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(g,m,v)=>{c(typeof g=="string","'name' must be a string"),Array.isArray(m)||(m=[m]);let _="The ";g.endsWith(" argument")?_+=`${g} `:_+=`"${g}" ${g.includes(".")?"property":"argument"} `,_+="must be ";const w=[],S=[],A=[];for(const L of m)c(typeof L=="string","All expected entries have to be of type string"),r.includes(L)?w.push(L.toLowerCase()):a.test(L)?S.push(L):(c(L!=="object",'The value "object" should be written as "Object"'),A.push(L));if(S.length>0){const L=w.indexOf("object");L!==-1&&(w.splice(w,L,1),S.push("Object"))}if(w.length>0){switch(w.length){case 1:_+=`of type ${w[0]}`;break;case 2:_+=`one of type ${w[0]} or ${w[1]}`;break;default:{const L=w.pop();_+=`one of type ${w.join(", ")}, or ${L}`}}(S.length>0||A.length>0)&&(_+=" or ")}if(S.length>0){switch(S.length){case 1:_+=`an instance of ${S[0]}`;break;case 2:_+=`an instance of ${S[0]} or ${S[1]}`;break;default:{const L=S.pop();_+=`an instance of ${S.join(", ")}, or ${L}`}}A.length>0&&(_+=" or ")}switch(A.length){case 0:break;case 1:A[0].toLowerCase()!==A[0]&&(_+="an "),_+=`${A[0]}`;break;case 2:_+=`one of ${A[0]} or ${A[1]}`;break;default:{const L=A.pop();_+=`one of ${A.join(", ")}, or ${L}`}}if(v==null)_+=`. Received ${v}`;else if(typeof v=="function"&&v.name)_+=`. Received function ${v.name}`;else if(typeof v=="object"){var D;if((D=v.constructor)!==null&&D!==void 0&&D.name)_+=`. Received an instance of ${v.constructor.name}`;else{const L=e(v,{depth:-1});_+=`. Received ${L}`}}else{let L=e(v,{colors:!1});L.length>25&&(L=`${L.slice(0,25)}...`),_+=`. Received type ${typeof v} (${L})`}return _},TypeError),f("ERR_INVALID_ARG_VALUE",(g,m,v="is invalid")=>{let _=e(m);return _.length>128&&(_=_.slice(0,128)+"..."),`The ${g.includes(".")?"property":"argument"} '${g}' ${v}. Received ${_}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(g,m,v)=>{var _;const w=v!=null&&(_=v.constructor)!==null&&_!==void 0&&_.name?`instance of ${v.constructor.name}`:`type ${typeof v}`;return`Expected ${g} to be returned from the "${m}" function but got ${w}.`},TypeError),f("ERR_MISSING_ARGS",(...g)=>{c(g.length>0,"At least one arg needs to be specified");let m;const v=g.length;switch(g=(Array.isArray(g)?g:[g]).map(_=>`"${_}"`).join(" or "),v){case 1:m+=`The ${g[0]} argument`;break;case 2:m+=`The ${g[0]} and ${g[1]} arguments`;break;default:{const _=g.pop();m+=`The ${g.join(", ")}, and ${_} arguments`}break}return`${m} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(g,m,v)=>{c(m,'Missing "range" argument');let _;return Number.isInteger(v)&&Math.abs(v)>2**32?_=d(String(v)):typeof v=="bigint"?(_=String(v),(v>2n**32n||v<-(2n**32n))&&(_=d(_)),_+="n"):_=e(v),`The value of "${g}" is out of range. It must be ${m}. Received ${_}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),w_={AbortError:b,aggregateTwoErrors:p(y),hideStackFrames:p,codes:l},w_}var S_,pI;function Dy(){if(pI)return S_;pI=1;const{ArrayIsArray:t,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:u,ArrayPrototypeMap:s,NumberIsInteger:n,NumberIsNaN:r,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:o,NumberParseInt:l,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:f,StringPrototypeTrim:p}=Rr(),{hideStackFrames:y,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:g,ERR_INVALID_ARG_VALUE:m,ERR_OUT_OF_RANGE:v,ERR_UNKNOWN_SIGNAL:_}}=Un(),{normalizeEncoding:w}=In(),{isAsyncFunction:S,isArrayBufferView:A}=In().types,D={};function L(z){return z===(z|0)}function O(z){return z===z>>>0}const E=/^[0-7]+$/,P="must be a 32-bit unsigned integer or an octal string";function M(z,Y,re){if(typeof z>"u"&&(z=re),typeof z=="string"){if(d(E,z)===null)throw new m(Y,z,P);z=l(z,8)}return q(z,Y),z}const U=y((z,Y,re=o,ce=a)=>{if(typeof z!="number")throw new g(Y,"number",z);if(!n(z))throw new v(Y,"an integer",z);if(z<re||z>ce)throw new v(Y,`>= ${re} && <= ${ce}`,z)}),j=y((z,Y,re=-2147483648,ce=2147483647)=>{if(typeof z!="number")throw new g(Y,"number",z);if(!n(z))throw new v(Y,"an integer",z);if(z<re||z>ce)throw new v(Y,`>= ${re} && <= ${ce}`,z)}),q=y((z,Y,re=!1)=>{if(typeof z!="number")throw new g(Y,"number",z);if(!n(z))throw new v(Y,"an integer",z);const ce=re?1:0,Te=4294967295;if(z<ce||z>Te)throw new v(Y,`>= ${ce} && <= ${Te}`,z)});function $(z,Y){if(typeof z!="string")throw new g(Y,"string",z)}function Z(z,Y,re=void 0,ce){if(typeof z!="number")throw new g(Y,"number",z);if(re!=null&&z<re||ce!=null&&z>ce||(re!=null||ce!=null)&&r(z))throw new v(Y,`${re!=null?`>= ${re}`:""}${re!=null&&ce!=null?" && ":""}${ce!=null?`<= ${ce}`:""}`,z)}const X=y((z,Y,re)=>{if(!e(re,z)){const Te="must be one of: "+u(s(re,xe=>typeof xe=="string"?`'${xe}'`:h(xe)),", ");throw new m(Y,z,Te)}});function le(z,Y){if(typeof z!="boolean")throw new g(Y,"boolean",z)}function K(z,Y,re){return z==null||!c(z,Y)?re:z[Y]}const he=y((z,Y,re=null)=>{const ce=K(re,"allowArray",!1),Te=K(re,"allowFunction",!1);if(!K(re,"nullable",!1)&&z===null||!ce&&t(z)||typeof z!="object"&&(!Te||typeof z!="function"))throw new g(Y,"Object",z)}),Re=y((z,Y)=>{if(z!=null&&typeof z!="object"&&typeof z!="function")throw new g(Y,"a dictionary",z)}),ie=y((z,Y,re=0)=>{if(!t(z))throw new g(Y,"Array",z);if(z.length<re){const ce=`must be longer than ${re}`;throw new m(Y,z,ce)}});function ae(z,Y){ie(z,Y);for(let re=0;re<z.length;re++)$(z[re],`${Y}[${re}]`)}function Ee(z,Y){ie(z,Y);for(let re=0;re<z.length;re++)le(z[re],`${Y}[${re}]`)}function De(z,Y){ie(z,Y);for(let re=0;re<z.length;re++){const ce=z[re],Te=`${Y}[${re}]`;if(ce==null)throw new g(Te,"AbortSignal",ce);N(ce,Te)}}function ge(z,Y="signal"){if($(z,Y),D[z]===void 0)throw D[f(z)]!==void 0?new _(z+" (signals must use all capital letters)"):new _(z)}const de=y((z,Y="buffer")=>{if(!A(z))throw new g(Y,["Buffer","TypedArray","DataView"],z)});function fe(z,Y){const re=w(Y),ce=z.length;if(re==="hex"&&ce%2!==0)throw new m("encoding",Y,`is invalid for data of length ${ce}`)}function H(z,Y="Port",re=!0){if(typeof z!="number"&&typeof z!="string"||typeof z=="string"&&p(z).length===0||+z!==+z>>>0||z>65535||z===0&&!re)throw new b(Y,z,re);return z|0}const N=y((z,Y)=>{if(z!==void 0&&(z===null||typeof z!="object"||!("aborted"in z)))throw new g(Y,"AbortSignal",z)}),R=y((z,Y)=>{if(typeof z!="function")throw new g(Y,"Function",z)}),T=y((z,Y)=>{if(typeof z!="function"||S(z))throw new g(Y,"Function",z)}),x=y((z,Y)=>{if(z!==void 0)throw new g(Y,"undefined",z)});function B(z,Y,re){if(!e(re,z))throw new g(Y,`('${u(re,"|")}')`,z)}const k=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function V(z,Y){if(typeof z>"u"||!d(k,z))throw new m(Y,z,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function J(z){if(typeof z=="string")return V(z,"hints"),z;if(t(z)){const Y=z.length;let re="";if(Y===0)return re;for(let ce=0;ce<Y;ce++){const Te=z[ce];V(Te,"hints"),re+=Te,ce!==Y-1&&(re+=", ")}return re}throw new m("hints",z,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return S_={isInt32:L,isUint32:O,parseFileMode:M,validateArray:ie,validateStringArray:ae,validateBooleanArray:Ee,validateAbortSignalArray:De,validateBoolean:le,validateBuffer:de,validateDictionary:Re,validateEncoding:fe,validateFunction:R,validateInt32:j,validateInteger:U,validateNumber:Z,validateObject:he,validateOneOf:X,validatePlainFunction:T,validatePort:H,validateSignalName:ge,validateString:$,validateUint32:q,validateUndefined:x,validateUnion:B,validateAbortSignal:N,validateLinkHeaderValue:J},S_}var p1={exports:{}},T_,yI;function Aa(){if(yI)return T_;yI=1;const{SymbolAsyncIterator:t,SymbolIterator:e,SymbolFor:u}=Rr(),s=u("nodejs.stream.destroyed"),n=u("nodejs.stream.errored"),r=u("nodejs.stream.readable"),a=u("nodejs.stream.writable"),o=u("nodejs.stream.disturbed"),l=u("nodejs.webstream.isClosedPromise"),c=u("nodejs.webstream.controllerErrorFunction");function d(K,he=!1){var Re;return!!(K&&typeof K.pipe=="function"&&typeof K.on=="function"&&(!he||typeof K.pause=="function"&&typeof K.resume=="function")&&(!K._writableState||((Re=K._readableState)===null||Re===void 0?void 0:Re.readable)!==!1)&&(!K._writableState||K._readableState))}function h(K){var he;return!!(K&&typeof K.write=="function"&&typeof K.on=="function"&&(!K._readableState||((he=K._writableState)===null||he===void 0?void 0:he.writable)!==!1))}function f(K){return!!(K&&typeof K.pipe=="function"&&K._readableState&&typeof K.on=="function"&&typeof K.write=="function")}function p(K){return K&&(K._readableState||K._writableState||typeof K.write=="function"&&typeof K.on=="function"||typeof K.pipe=="function"&&typeof K.on=="function")}function y(K){return!!(K&&!p(K)&&typeof K.pipeThrough=="function"&&typeof K.getReader=="function"&&typeof K.cancel=="function")}function b(K){return!!(K&&!p(K)&&typeof K.getWriter=="function"&&typeof K.abort=="function")}function g(K){return!!(K&&!p(K)&&typeof K.readable=="object"&&typeof K.writable=="object")}function m(K){return y(K)||b(K)||g(K)}function v(K,he){return K==null?!1:he===!0?typeof K[t]=="function":he===!1?typeof K[e]=="function":typeof K[t]=="function"||typeof K[e]=="function"}function _(K){if(!p(K))return null;const he=K._writableState,Re=K._readableState,ie=he||Re;return!!(K.destroyed||K[s]||ie!=null&&ie.destroyed)}function w(K){if(!h(K))return null;if(K.writableEnded===!0)return!0;const he=K._writableState;return he!=null&&he.errored?!1:typeof(he==null?void 0:he.ended)!="boolean"?null:he.ended}function S(K,he){if(!h(K))return null;if(K.writableFinished===!0)return!0;const Re=K._writableState;return Re!=null&&Re.errored?!1:typeof(Re==null?void 0:Re.finished)!="boolean"?null:!!(Re.finished||he===!1&&Re.ended===!0&&Re.length===0)}function A(K){if(!d(K))return null;if(K.readableEnded===!0)return!0;const he=K._readableState;return!he||he.errored?!1:typeof(he==null?void 0:he.ended)!="boolean"?null:he.ended}function D(K,he){if(!d(K))return null;const Re=K._readableState;return Re!=null&&Re.errored?!1:typeof(Re==null?void 0:Re.endEmitted)!="boolean"?null:!!(Re.endEmitted||he===!1&&Re.ended===!0&&Re.length===0)}function L(K){return K&&K[r]!=null?K[r]:typeof(K==null?void 0:K.readable)!="boolean"?null:_(K)?!1:d(K)&&K.readable&&!D(K)}function O(K){return K&&K[a]!=null?K[a]:typeof(K==null?void 0:K.writable)!="boolean"?null:_(K)?!1:h(K)&&K.writable&&!w(K)}function E(K,he){return p(K)?_(K)?!0:!((he==null?void 0:he.readable)!==!1&&L(K)||(he==null?void 0:he.writable)!==!1&&O(K)):null}function P(K){var he,Re;return p(K)?K.writableErrored?K.writableErrored:(he=(Re=K._writableState)===null||Re===void 0?void 0:Re.errored)!==null&&he!==void 0?he:null:null}function M(K){var he,Re;return p(K)?K.readableErrored?K.readableErrored:(he=(Re=K._readableState)===null||Re===void 0?void 0:Re.errored)!==null&&he!==void 0?he:null:null}function U(K){if(!p(K))return null;if(typeof K.closed=="boolean")return K.closed;const he=K._writableState,Re=K._readableState;return typeof(he==null?void 0:he.closed)=="boolean"||typeof(Re==null?void 0:Re.closed)=="boolean"?(he==null?void 0:he.closed)||(Re==null?void 0:Re.closed):typeof K._closed=="boolean"&&j(K)?K._closed:null}function j(K){return typeof K._closed=="boolean"&&typeof K._defaultKeepAlive=="boolean"&&typeof K._removedConnection=="boolean"&&typeof K._removedContLen=="boolean"}function q(K){return typeof K._sent100=="boolean"&&j(K)}function $(K){var he;return typeof K._consuming=="boolean"&&typeof K._dumped=="boolean"&&((he=K.req)===null||he===void 0?void 0:he.upgradeOrConnect)===void 0}function Z(K){if(!p(K))return null;const he=K._writableState,Re=K._readableState,ie=he||Re;return!ie&&q(K)||!!(ie&&ie.autoDestroy&&ie.emitClose&&ie.closed===!1)}function X(K){var he;return!!(K&&((he=K[o])!==null&&he!==void 0?he:K.readableDidRead||K.readableAborted))}function le(K){var he,Re,ie,ae,Ee,De,ge,de,fe,H;return!!(K&&((he=(Re=(ie=(ae=(Ee=(De=K[n])!==null&&De!==void 0?De:K.readableErrored)!==null&&Ee!==void 0?Ee:K.writableErrored)!==null&&ae!==void 0?ae:(ge=K._readableState)===null||ge===void 0?void 0:ge.errorEmitted)!==null&&ie!==void 0?ie:(de=K._writableState)===null||de===void 0?void 0:de.errorEmitted)!==null&&Re!==void 0?Re:(fe=K._readableState)===null||fe===void 0?void 0:fe.errored)!==null&&he!==void 0?he:!((H=K._writableState)===null||H===void 0)&&H.errored))}return T_={isDestroyed:_,kIsDestroyed:s,isDisturbed:X,kIsDisturbed:o,isErrored:le,kIsErrored:n,isReadable:L,kIsReadable:r,kIsClosedPromise:l,kControllerErrorFunction:c,kIsWritable:a,isClosed:U,isDuplexNodeStream:f,isFinished:E,isIterable:v,isReadableNodeStream:d,isReadableStream:y,isReadableEnded:A,isReadableFinished:D,isReadableErrored:M,isNodeStream:p,isWebStream:m,isWritable:O,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:w,isWritableFinished:S,isWritableErrored:P,isServerRequest:$,isServerResponse:q,willEmitClose:Z,isTransformStream:g},T_}var bI;function rs(){if(bI)return p1.exports;bI=1;const t=Ta(),{AbortError:e,codes:u}=Un(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:n}=u,{kEmptyObject:r,once:a}=In(),{validateAbortSignal:o,validateFunction:l,validateObject:c,validateBoolean:d}=Dy(),{Promise:h,PromisePrototypeThen:f,SymbolDispose:p}=Rr(),{isClosed:y,isReadable:b,isReadableNodeStream:g,isReadableStream:m,isReadableFinished:v,isReadableErrored:_,isWritable:w,isWritableNodeStream:S,isWritableStream:A,isWritableFinished:D,isWritableErrored:L,isNodeStream:O,willEmitClose:E,kIsClosedPromise:P}=Aa();let M;function U(X){return X.setHeader&&typeof X.abort=="function"}const j=()=>{};function q(X,le,K){var he,Re;if(arguments.length===2?(K=le,le=r):le==null?le=r:c(le,"options"),l(K,"callback"),o(le.signal,"options.signal"),K=a(K),m(X)||A(X))return $(X,le,K);if(!O(X))throw new s("stream",["ReadableStream","WritableStream","Stream"],X);const ie=(he=le.readable)!==null&&he!==void 0?he:g(X),ae=(Re=le.writable)!==null&&Re!==void 0?Re:S(X),Ee=X._writableState,De=X._readableState,ge=()=>{X.writable||H()};let de=E(X)&&g(X)===ie&&S(X)===ae,fe=D(X,!1);const H=()=>{fe=!0,X.destroyed&&(de=!1),!(de&&(!X.readable||ie))&&(!ie||N)&&K.call(X)};let N=v(X,!1);const R=()=>{N=!0,X.destroyed&&(de=!1),!(de&&(!X.writable||ae))&&(!ae||fe)&&K.call(X)},T=z=>{K.call(X,z)};let x=y(X);const B=()=>{x=!0;const z=L(X)||_(X);if(z&&typeof z!="boolean")return K.call(X,z);if(ie&&!N&&g(X,!0)&&!v(X,!1))return K.call(X,new n);if(ae&&!fe&&!D(X,!1))return K.call(X,new n);K.call(X)},k=()=>{x=!0;const z=L(X)||_(X);if(z&&typeof z!="boolean")return K.call(X,z);K.call(X)},V=()=>{X.req.on("finish",H)};U(X)?(X.on("complete",H),de||X.on("abort",B),X.req?V():X.on("request",V)):ae&&!Ee&&(X.on("end",ge),X.on("close",ge)),!de&&typeof X.aborted=="boolean"&&X.on("aborted",B),X.on("end",R),X.on("finish",H),le.error!==!1&&X.on("error",T),X.on("close",B),x?t.nextTick(B):Ee!=null&&Ee.errorEmitted||De!=null&&De.errorEmitted?de||t.nextTick(k):(!ie&&(!de||b(X))&&(fe||w(X)===!1)||!ae&&(!de||w(X))&&(N||b(X)===!1)||De&&X.req&&X.aborted)&&t.nextTick(k);const J=()=>{K=j,X.removeListener("aborted",B),X.removeListener("complete",H),X.removeListener("abort",B),X.removeListener("request",V),X.req&&X.req.removeListener("finish",H),X.removeListener("end",ge),X.removeListener("close",ge),X.removeListener("finish",H),X.removeListener("end",R),X.removeListener("error",T),X.removeListener("close",B)};if(le.signal&&!x){const z=()=>{const Y=K;J(),Y.call(X,new e(void 0,{cause:le.signal.reason}))};if(le.signal.aborted)t.nextTick(z);else{M=M||In().addAbortListener;const Y=M(le.signal,z),re=K;K=a((...ce)=>{Y[p](),re.apply(X,ce)})}}return J}function $(X,le,K){let he=!1,Re=j;if(le.signal)if(Re=()=>{he=!0,K.call(X,new e(void 0,{cause:le.signal.reason}))},le.signal.aborted)t.nextTick(Re);else{M=M||In().addAbortListener;const ae=M(le.signal,Re),Ee=K;K=a((...De)=>{ae[p](),Ee.apply(X,De)})}const ie=(...ae)=>{he||t.nextTick(()=>K.apply(X,ae))};return f(X[P].promise,ie,ie),j}function Z(X,le){var K;let he=!1;return le===null&&(le=r),(K=le)!==null&&K!==void 0&&K.cleanup&&(d(le.cleanup,"cleanup"),he=le.cleanup),new h((Re,ie)=>{const ae=q(X,le,Ee=>{he&&ae(),Ee?ie(Ee):Re()})})}return p1.exports=q,p1.exports.finished=Z,p1.exports}var A_,mI;function au(){if(mI)return A_;mI=1;const t=Ta(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:u},AbortError:s}=Un(),{Symbol:n}=Rr(),{kIsDestroyed:r,isDestroyed:a,isFinished:o,isServerRequest:l}=Aa(),c=n("kDestroy"),d=n("kConstruct");function h(E,P,M){E&&(E.stack,P&&!P.errored&&(P.errored=E),M&&!M.errored&&(M.errored=E))}function f(E,P){const M=this._readableState,U=this._writableState,j=U||M;return U!=null&&U.destroyed||M!=null&&M.destroyed?(typeof P=="function"&&P(),this):(h(E,U,M),U&&(U.destroyed=!0),M&&(M.destroyed=!0),j.constructed?p(this,E,P):this.once(c,function(q){p(this,e(q,E),P)}),this)}function p(E,P,M){let U=!1;function j(q){if(U)return;U=!0;const $=E._readableState,Z=E._writableState;h(q,Z,$),Z&&(Z.closed=!0),$&&($.closed=!0),typeof M=="function"&&M(q),q?t.nextTick(y,E,q):t.nextTick(b,E)}try{E._destroy(P||null,j)}catch(q){j(q)}}function y(E,P){g(E,P),b(E)}function b(E){const P=E._readableState,M=E._writableState;M&&(M.closeEmitted=!0),P&&(P.closeEmitted=!0),(M!=null&&M.emitClose||P!=null&&P.emitClose)&&E.emit("close")}function g(E,P){const M=E._readableState,U=E._writableState;U!=null&&U.errorEmitted||M!=null&&M.errorEmitted||(U&&(U.errorEmitted=!0),M&&(M.errorEmitted=!0),E.emit("error",P))}function m(){const E=this._readableState,P=this._writableState;E&&(E.constructed=!0,E.closed=!1,E.closeEmitted=!1,E.destroyed=!1,E.errored=null,E.errorEmitted=!1,E.reading=!1,E.ended=E.readable===!1,E.endEmitted=E.readable===!1),P&&(P.constructed=!0,P.destroyed=!1,P.closed=!1,P.closeEmitted=!1,P.errored=null,P.errorEmitted=!1,P.finalCalled=!1,P.prefinished=!1,P.ended=P.writable===!1,P.ending=P.writable===!1,P.finished=P.writable===!1)}function v(E,P,M){const U=E._readableState,j=E._writableState;if(j!=null&&j.destroyed||U!=null&&U.destroyed)return this;U!=null&&U.autoDestroy||j!=null&&j.autoDestroy?E.destroy(P):P&&(P.stack,j&&!j.errored&&(j.errored=P),U&&!U.errored&&(U.errored=P),M?t.nextTick(g,E,P):g(E,P))}function _(E,P){if(typeof E._construct!="function")return;const M=E._readableState,U=E._writableState;M&&(M.constructed=!1),U&&(U.constructed=!1),E.once(d,P),!(E.listenerCount(d)>1)&&t.nextTick(w,E)}function w(E){let P=!1;function M(U){if(P){v(E,U??new u);return}P=!0;const j=E._readableState,q=E._writableState,$=q||j;j&&(j.constructed=!0),q&&(q.constructed=!0),$.destroyed?E.emit(c,U):U?v(E,U,!0):t.nextTick(S,E)}try{E._construct(U=>{t.nextTick(M,U)})}catch(U){t.nextTick(M,U)}}function S(E){E.emit(d)}function A(E){return(E==null?void 0:E.setHeader)&&typeof E.abort=="function"}function D(E){E.emit("close")}function L(E,P){E.emit("error",P),t.nextTick(D,E)}function O(E,P){!E||a(E)||(!P&&!o(E)&&(P=new s),l(E)?(E.socket=null,E.destroy(P)):A(E)?E.abort():A(E.req)?E.req.abort():typeof E.destroy=="function"?E.destroy(P):typeof E.close=="function"?E.close():P?t.nextTick(L,E,P):t.nextTick(D,E),E.destroyed||(E[r]=!0))}return A_={construct:_,destroyer:O,destroy:f,undestroy:m,errorOrDestroy:v},A_}var E_,gI;function XT(){if(gI)return E_;gI=1;const{ArrayIsArray:t,ObjectSetPrototypeOf:e}=Rr(),{EventEmitter:u}=Ry();function s(r){u.call(this,r)}e(s.prototype,u.prototype),e(s,u),s.prototype.pipe=function(r,a){const o=this;function l(b){r.writable&&r.write(b)===!1&&o.pause&&o.pause()}o.on("data",l);function c(){o.readable&&o.resume&&o.resume()}r.on("drain",c),!r._isStdio&&(!a||a.end!==!1)&&(o.on("end",h),o.on("close",f));let d=!1;function h(){d||(d=!0,r.end())}function f(){d||(d=!0,typeof r.destroy=="function"&&r.destroy())}function p(b){y(),u.listenerCount(this,"error")===0&&this.emit("error",b)}n(o,"error",p),n(r,"error",p);function y(){o.removeListener("data",l),r.removeListener("drain",c),o.removeListener("end",h),o.removeListener("close",f),o.removeListener("error",p),r.removeListener("error",p),o.removeListener("end",y),o.removeListener("close",y),r.removeListener("close",y)}return o.on("end",y),o.on("close",y),r.on("close",y),r.emit("pipe",o),r};function n(r,a,o){if(typeof r.prependListener=="function")return r.prependListener(a,o);!r._events||!r._events[a]?r.on(a,o):t(r._events[a])?r._events[a].unshift(o):r._events[a]=[o,r._events[a]]}return E_={Stream:s,prependListener:n},E_}var O_={exports:{}},_I;function Jb(){return _I||(_I=1,function(t){const{SymbolDispose:e}=Rr(),{AbortError:u,codes:s}=Un(),{isNodeStream:n,isWebStream:r,kControllerErrorFunction:a}=Aa(),o=rs(),{ERR_INVALID_ARG_TYPE:l}=s;let c;const d=(h,f)=>{if(typeof h!="object"||!("aborted"in h))throw new l(f,"AbortSignal",h)};t.exports.addAbortSignal=function(f,p){if(d(f,"signal"),!n(p)&&!r(p))throw new l("stream",["ReadableStream","WritableStream","Stream"],p);return t.exports.addAbortSignalNoValidate(f,p)},t.exports.addAbortSignalNoValidate=function(h,f){if(typeof h!="object"||!("aborted"in h))return f;const p=n(f)?()=>{f.destroy(new u(void 0,{cause:h.reason}))}:()=>{f[a](new u(void 0,{cause:h.reason}))};if(h.aborted)p();else{c=c||In().addAbortListener;const y=c(h,p);o(f,y[e])}return f}}(O_)),O_.exports}var R_,vI;function NG(){if(vI)return R_;vI=1;const{StringPrototypeSlice:t,SymbolIterator:e,TypedArrayPrototypeSet:u,Uint8Array:s}=Rr(),{Buffer:n}=Wi(),{inspect:r}=In();return R_=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){const l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,c=""+l.data;for(;(l=l.next)!==null;)c+=o+l.data;return c}concat(o){if(this.length===0)return n.alloc(0);const l=n.allocUnsafe(o>>>0);let c=this.head,d=0;for(;c;)u(l,c.data,d),d+=c.data.length,c=c.next;return l}consume(o,l){const c=this.head.data;if(o<c.length){const d=c.slice(0,o);return this.head.data=c.slice(o),d}return o===c.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[e](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",c=this.head,d=0;do{const h=c.data;if(o>h.length)l+=h,o-=h.length;else{o===h.length?(l+=h,++d,c.next?this.head=c.next:this.head=this.tail=null):(l+=t(h,0,o),this.head=c,c.data=t(h,o));break}++d}while((c=c.next)!==null);return this.length-=d,l}_getBuffer(o){const l=n.allocUnsafe(o),c=o;let d=this.head,h=0;do{const f=d.data;if(o>f.length)u(l,f,c-o),o-=f.length;else{o===f.length?(u(l,f,c-o),++h,d.next?this.head=d.next:this.head=this.tail=null):(u(l,new s(f.buffer,f.byteOffset,o),c-o),this.head=d,d.data=f.slice(o));break}++h}while((d=d.next)!==null);return this.length-=h,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return r(this,{...l,depth:0,customInspect:!1})}},R_}var x_,wI;function Xb(){if(wI)return x_;wI=1;const{MathFloor:t,NumberIsInteger:e}=Rr(),{validateInteger:u}=Dy(),{ERR_INVALID_ARG_VALUE:s}=Un().codes;let n=16*1024,r=16;function a(d,h,f){return d.highWaterMark!=null?d.highWaterMark:h?d[f]:null}function o(d){return d?r:n}function l(d,h){u(h,"value",0),d?r=h:n=h}function c(d,h,f,p){const y=a(h,p,f);if(y!=null){if(!e(y)||y<0){const b=p?`options.${f}`:"options.highWaterMark";throw new s(b,y)}return t(y)}return o(d.objectMode)}return x_={getHighWaterMark:c,getDefaultHighWaterMark:o,setDefaultHighWaterMark:l},x_}var I_={},y1={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var SI;function CG(){return SI||(SI=1,function(t,e){var u=Wi(),s=u.Buffer;function n(a,o){for(var l in a)o[l]=a[l]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=u:(n(u,e),e.Buffer=r);function r(a,o,l){return s(a,o,l)}r.prototype=Object.create(s.prototype),n(s,r),r.from=function(a,o,l){if(typeof a=="number")throw new TypeError("Argument must not be a number");return s(a,o,l)},r.alloc=function(a,o,l){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=s(a);return o!==void 0?typeof l=="string"?c.fill(o,l):c.fill(o):c.fill(0),c},r.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return s(a)},r.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return u.SlowBuffer(a)}}(y1,y1.exports)),y1.exports}var TI;function jG(){if(TI)return I_;TI=1;var t=CG().Buffer,e=t.isEncoding||function(m){switch(m=""+m,m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u(m){if(!m)return"utf8";for(var v;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(v)return;m=(""+m).toLowerCase(),v=!0}}function s(m){var v=u(m);if(typeof v!="string"&&(t.isEncoding===e||!e(m)))throw new Error("Unknown encoding: "+m);return v||m}I_.StringDecoder=n;function n(m){this.encoding=s(m);var v;switch(this.encoding){case"utf16le":this.text=h,this.end=f,v=4;break;case"utf8":this.fillLast=l,v=4;break;case"base64":this.text=p,this.end=y,v=3;break;default:this.write=b,this.end=g;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(v)}n.prototype.write=function(m){if(m.length===0)return"";var v,_;if(this.lastNeed){if(v=this.fillLast(m),v===void 0)return"";_=this.lastNeed,this.lastNeed=0}else _=0;return _<m.length?v?v+this.text(m,_):this.text(m,_):v||""},n.prototype.end=d,n.prototype.text=c,n.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length};function r(m){return m<=127?0:m>>5===6?2:m>>4===14?3:m>>3===30?4:m>>6===2?-1:-2}function a(m,v,_){var w=v.length-1;if(w<_)return 0;var S=r(v[w]);return S>=0?(S>0&&(m.lastNeed=S-1),S):--w<_||S===-2?0:(S=r(v[w]),S>=0?(S>0&&(m.lastNeed=S-2),S):--w<_||S===-2?0:(S=r(v[w]),S>=0?(S>0&&(S===2?S=0:m.lastNeed=S-3),S):0))}function o(m,v,_){if((v[0]&192)!==128)return m.lastNeed=0,"";if(m.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return m.lastNeed=1,"";if(m.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return m.lastNeed=2,""}}function l(m){var v=this.lastTotal-this.lastNeed,_=o(this,m);if(_!==void 0)return _;if(this.lastNeed<=m.length)return m.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,v,0,m.length),this.lastNeed-=m.length}function c(m,v){var _=a(this,m,v);if(!this.lastNeed)return m.toString("utf8",v);this.lastTotal=_;var w=m.length-(_-this.lastNeed);return m.copy(this.lastChar,0,w),m.toString("utf8",v,w)}function d(m){var v=m&&m.length?this.write(m):"";return this.lastNeed?v+"":v}function h(m,v){if((m.length-v)%2===0){var _=m.toString("utf16le",v);if(_){var w=_.charCodeAt(_.length-1);if(w>=55296&&w<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],_.slice(0,-1)}return _}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",v,m.length-1)}function f(m){var v=m&&m.length?this.write(m):"";if(this.lastNeed){var _=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,_)}return v}function p(m,v){var _=(m.length-v)%3;return _===0?m.toString("base64",v):(this.lastNeed=3-_,this.lastTotal=3,_===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",v,m.length-_))}function y(m){var v=m&&m.length?this.write(m):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function b(m){return m.toString(this.encoding)}function g(m){return m&&m.length?this.write(m):""}return I_}var P_,AI;function Fq(){if(AI)return P_;AI=1;const t=Ta(),{PromisePrototypeThen:e,SymbolAsyncIterator:u,SymbolIterator:s}=Rr(),{Buffer:n}=Wi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_NULL_VALUES:a}=Un().codes;function o(l,c,d){let h;if(typeof c=="string"||c instanceof n)return new l({objectMode:!0,...d,read(){this.push(c),this.push(null)}});let f;if(c&&c[u])f=!0,h=c[u]();else if(c&&c[s])f=!1,h=c[s]();else throw new r("iterable",["Iterable"],c);const p=new l({objectMode:!0,highWaterMark:1,...d});let y=!1;p._read=function(){y||(y=!0,g())},p._destroy=function(m,v){e(b(m),()=>t.nextTick(v,m),_=>t.nextTick(v,_||m))};async function b(m){const v=m!=null,_=typeof h.throw=="function";if(v&&_){const{value:w,done:S}=await h.throw(m);if(await w,S)return}if(typeof h.return=="function"){const{value:w}=await h.return();await w}}async function g(){for(;;){try{const{value:m,done:v}=f?await h.next():h.next();if(v)p.push(null);else{const _=m&&typeof m.then=="function"?await m:m;if(_===null)throw y=!1,new a;if(p.push(_))continue;y=!1}}catch(m){p.destroy(m)}break}}return p}return P_=o,P_}var D_,EI;function Kb(){if(EI)return D_;EI=1;const t=Ta(),{ArrayPrototypeIndexOf:e,NumberIsInteger:u,NumberIsNaN:s,NumberParseInt:n,ObjectDefineProperties:r,ObjectKeys:a,ObjectSetPrototypeOf:o,Promise:l,SafeSet:c,SymbolAsyncDispose:d,SymbolAsyncIterator:h,Symbol:f}=Rr();D_=ce,ce.ReadableState=re;const{EventEmitter:p}=Ry(),{Stream:y,prependListener:b}=XT(),{Buffer:g}=Wi(),{addAbortSignal:m}=Jb(),v=rs();let _=In().debuglog("stream",oe=>{_=oe});const w=NG(),S=au(),{getHighWaterMark:A,getDefaultHighWaterMark:D}=Xb(),{aggregateTwoErrors:L,codes:{ERR_INVALID_ARG_TYPE:O,ERR_METHOD_NOT_IMPLEMENTED:E,ERR_OUT_OF_RANGE:P,ERR_STREAM_PUSH_AFTER_EOF:M,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:U},AbortError:j}=Un(),{validateObject:q}=Dy(),$=f("kPaused"),{StringDecoder:Z}=jG(),X=Fq();o(ce.prototype,y.prototype),o(ce,y);const le=()=>{},{errorOrDestroy:K}=S,he=1,Re=2,ie=4,ae=8,Ee=16,De=32,ge=64,de=128,fe=256,H=512,N=1024,R=2048,T=4096,x=8192,B=16384,k=32768,V=65536,J=1<<17,z=1<<18;function Y(oe){return{enumerable:!1,get(){return(this.state&oe)!==0},set(C){C?this.state|=oe:this.state&=~oe}}}r(re.prototype,{objectMode:Y(he),ended:Y(Re),endEmitted:Y(ie),reading:Y(ae),constructed:Y(Ee),sync:Y(De),needReadable:Y(ge),emittedReadable:Y(de),readableListening:Y(fe),resumeScheduled:Y(H),errorEmitted:Y(N),emitClose:Y(R),autoDestroy:Y(T),destroyed:Y(x),closed:Y(B),closeEmitted:Y(k),multiAwaitDrain:Y(V),readingMore:Y(J),dataEmitted:Y(z)});function re(oe,C,ee){typeof ee!="boolean"&&(ee=C instanceof va()),this.state=R|T|Ee|De,oe&&oe.objectMode&&(this.state|=he),ee&&oe&&oe.readableObjectMode&&(this.state|=he),this.highWaterMark=oe?A(this,oe,"readableHighWaterMark",ee):D(!1),this.buffer=new w,this.length=0,this.pipes=[],this.flowing=null,this[$]=null,oe&&oe.emitClose===!1&&(this.state&=~R),oe&&oe.autoDestroy===!1&&(this.state&=~T),this.errored=null,this.defaultEncoding=oe&&oe.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,oe&&oe.encoding&&(this.decoder=new Z(oe.encoding),this.encoding=oe.encoding)}function ce(oe){if(!(this instanceof ce))return new ce(oe);const C=this instanceof va();this._readableState=new re(oe,this,C),oe&&(typeof oe.read=="function"&&(this._read=oe.read),typeof oe.destroy=="function"&&(this._destroy=oe.destroy),typeof oe.construct=="function"&&(this._construct=oe.construct),oe.signal&&!C&&m(oe.signal,this)),y.call(this,oe),S.construct(this,()=>{this._readableState.needReadable&&me(this,this._readableState)})}ce.prototype.destroy=S.destroy,ce.prototype._undestroy=S.undestroy,ce.prototype._destroy=function(oe,C){C(oe)},ce.prototype[p.captureRejectionSymbol]=function(oe){this.destroy(oe)},ce.prototype[d]=function(){let oe;return this.destroyed||(oe=this.readableEnded?null:new j,this.destroy(oe)),new l((C,ee)=>v(this,ye=>ye&&ye!==oe?ee(ye):C(null)))},ce.prototype.push=function(oe,C){return Te(this,oe,C,!1)},ce.prototype.unshift=function(oe,C){return Te(this,oe,C,!0)};function Te(oe,C,ee,ye){_("readableAddChunk",C);const Pe=oe._readableState;let Ue;if(Pe.state&he||(typeof C=="string"?(ee=ee||Pe.defaultEncoding,Pe.encoding!==ee&&(ye&&Pe.encoding?C=g.from(C,ee).toString(Pe.encoding):(C=g.from(C,ee),ee=""))):C instanceof g?ee="":y._isUint8Array(C)?(C=y._uint8ArrayToBuffer(C),ee=""):C!=null&&(Ue=new O("chunk",["string","Buffer","Uint8Array"],C))),Ue)K(oe,Ue);else if(C===null)Pe.state&=~ae,F(oe,Pe);else if(Pe.state&he||C&&C.length>0)if(ye)if(Pe.state&ie)K(oe,new U);else{if(Pe.destroyed||Pe.errored)return!1;xe(oe,Pe,C,!0)}else if(Pe.ended)K(oe,new M);else{if(Pe.destroyed||Pe.errored)return!1;Pe.state&=~ae,Pe.decoder&&!ee?(C=Pe.decoder.write(C),Pe.objectMode||C.length!==0?xe(oe,Pe,C,!1):me(oe,Pe)):xe(oe,Pe,C,!1)}else ye||(Pe.state&=~ae,me(oe,Pe));return!Pe.ended&&(Pe.length<Pe.highWaterMark||Pe.length===0)}function xe(oe,C,ee,ye){C.flowing&&C.length===0&&!C.sync&&oe.listenerCount("data")>0?(C.state&V?C.awaitDrainWriters.clear():C.awaitDrainWriters=null,C.dataEmitted=!0,oe.emit("data",ee)):(C.length+=C.objectMode?1:ee.length,ye?C.buffer.unshift(ee):C.buffer.push(ee),C.state&ge&&Q(oe)),me(oe,C)}ce.prototype.isPaused=function(){const oe=this._readableState;return oe[$]===!0||oe.flowing===!1},ce.prototype.setEncoding=function(oe){const C=new Z(oe);this._readableState.decoder=C,this._readableState.encoding=this._readableState.decoder.encoding;const ee=this._readableState.buffer;let ye="";for(const Pe of ee)ye+=C.write(Pe);return ee.clear(),ye!==""&&ee.push(ye),this._readableState.length=ye.length,this};const Le=1073741824;function qe(oe){if(oe>Le)throw new P("size","<= 1GiB",oe);return oe--,oe|=oe>>>1,oe|=oe>>>2,oe|=oe>>>4,oe|=oe>>>8,oe|=oe>>>16,oe++,oe}function G(oe,C){return oe<=0||C.length===0&&C.ended?0:C.state&he?1:s(oe)?C.flowing&&C.length?C.buffer.first().length:C.length:oe<=C.length?oe:C.ended?C.length:0}ce.prototype.read=function(oe){_("read",oe),oe===void 0?oe=NaN:u(oe)||(oe=n(oe,10));const C=this._readableState,ee=oe;if(oe>C.highWaterMark&&(C.highWaterMark=qe(oe)),oe!==0&&(C.state&=~de),oe===0&&C.needReadable&&((C.highWaterMark!==0?C.length>=C.highWaterMark:C.length>0)||C.ended))return _("read: emitReadable",C.length,C.ended),C.length===0&&C.ended?He(this):Q(this),null;if(oe=G(oe,C),oe===0&&C.ended)return C.length===0&&He(this),null;let ye=(C.state&ge)!==0;if(_("need readable",ye),(C.length===0||C.length-oe<C.highWaterMark)&&(ye=!0,_("length less than watermark",ye)),C.ended||C.reading||C.destroyed||C.errored||!C.constructed)ye=!1,_("reading, ended or constructing",ye);else if(ye){_("do read"),C.state|=ae|De,C.length===0&&(C.state|=ge);try{this._read(C.highWaterMark)}catch(Ue){K(this,Ue)}C.state&=~De,C.reading||(oe=G(ee,C))}let Pe;return oe>0?Pe=je(oe,C):Pe=null,Pe===null?(C.needReadable=C.length<=C.highWaterMark,oe=0):(C.length-=oe,C.multiAwaitDrain?C.awaitDrainWriters.clear():C.awaitDrainWriters=null),C.length===0&&(C.ended||(C.needReadable=!0),ee!==oe&&C.ended&&He(this)),Pe!==null&&!C.errorEmitted&&!C.closeEmitted&&(C.dataEmitted=!0,this.emit("data",Pe)),Pe};function F(oe,C){if(_("onEofChunk"),!C.ended){if(C.decoder){const ee=C.decoder.end();ee&&ee.length&&(C.buffer.push(ee),C.length+=C.objectMode?1:ee.length)}C.ended=!0,C.sync?Q(oe):(C.needReadable=!1,C.emittedReadable=!0,te(oe))}}function Q(oe){const C=oe._readableState;_("emitReadable",C.needReadable,C.emittedReadable),C.needReadable=!1,C.emittedReadable||(_("emitReadable",C.flowing),C.emittedReadable=!0,t.nextTick(te,oe))}function te(oe){const C=oe._readableState;_("emitReadable_",C.destroyed,C.length,C.ended),!C.destroyed&&!C.errored&&(C.length||C.ended)&&(oe.emit("readable"),C.emittedReadable=!1),C.needReadable=!C.flowing&&!C.ended&&C.length<=C.highWaterMark,W(oe)}function me(oe,C){!C.readingMore&&C.constructed&&(C.readingMore=!0,t.nextTick(Oe,oe,C))}function Oe(oe,C){for(;!C.reading&&!C.ended&&(C.length<C.highWaterMark||C.flowing&&C.length===0);){const ee=C.length;if(_("maybeReadMore read 0"),oe.read(0),ee===C.length)break}C.readingMore=!1}ce.prototype._read=function(oe){throw new E("_read()")},ce.prototype.pipe=function(oe,C){const ee=this,ye=this._readableState;ye.pipes.length===1&&(ye.multiAwaitDrain||(ye.multiAwaitDrain=!0,ye.awaitDrainWriters=new c(ye.awaitDrainWriters?[ye.awaitDrainWriters]:[]))),ye.pipes.push(oe),_("pipe count=%d opts=%j",ye.pipes.length,C);const Ue=(!C||C.end!==!1)&&oe!==t.stdout&&oe!==t.stderr?Ye:be;ye.endEmitted?t.nextTick(Ue):ee.once("end",Ue),oe.on("unpipe",Fe);function Fe(Ie,Me){_("onunpipe"),Ie===ee&&Me&&Me.hasUnpiped===!1&&(Me.hasUnpiped=!0,nt())}function Ye(){_("onend"),oe.end()}let $e,Je=!1;function nt(){_("cleanup"),oe.removeListener("close",Ir),oe.removeListener("finish",Ke),$e&&oe.removeListener("drain",$e),oe.removeListener("error",et),oe.removeListener("unpipe",Fe),ee.removeListener("end",Ye),ee.removeListener("end",be),ee.removeListener("data",ft),Je=!0,$e&&ye.awaitDrainWriters&&(!oe._writableState||oe._writableState.needDrain)&&$e()}function yt(){Je||(ye.pipes.length===1&&ye.pipes[0]===oe?(_("false write response, pause",0),ye.awaitDrainWriters=oe,ye.multiAwaitDrain=!1):ye.pipes.length>1&&ye.pipes.includes(oe)&&(_("false write response, pause",ye.awaitDrainWriters.size),ye.awaitDrainWriters.add(oe)),ee.pause()),$e||($e=Ne(ee,oe),oe.on("drain",$e))}ee.on("data",ft);function ft(Ie){_("ondata");const Me=oe.write(Ie);_("dest.write",Me),Me===!1&&yt()}function et(Ie){if(_("onerror",Ie),be(),oe.removeListener("error",et),oe.listenerCount("error")===0){const Me=oe._writableState||oe._readableState;Me&&!Me.errorEmitted?K(oe,Ie):oe.emit("error",Ie)}}b(oe,"error",et);function Ir(){oe.removeListener("finish",Ke),be()}oe.once("close",Ir);function Ke(){_("onfinish"),oe.removeListener("close",Ir),be()}oe.once("finish",Ke);function be(){_("unpipe"),ee.unpipe(oe)}return oe.emit("pipe",ee),oe.writableNeedDrain===!0?yt():ye.flowing||(_("pipe resume"),ee.resume()),oe};function Ne(oe,C){return function(){const ye=oe._readableState;ye.awaitDrainWriters===C?(_("pipeOnDrain",1),ye.awaitDrainWriters=null):ye.multiAwaitDrain&&(_("pipeOnDrain",ye.awaitDrainWriters.size),ye.awaitDrainWriters.delete(C)),(!ye.awaitDrainWriters||ye.awaitDrainWriters.size===0)&&oe.listenerCount("data")&&oe.resume()}}ce.prototype.unpipe=function(oe){const C=this._readableState,ee={hasUnpiped:!1};if(C.pipes.length===0)return this;if(!oe){const Pe=C.pipes;C.pipes=[],this.pause();for(let Ue=0;Ue<Pe.length;Ue++)Pe[Ue].emit("unpipe",this,{hasUnpiped:!1});return this}const ye=e(C.pipes,oe);return ye===-1?this:(C.pipes.splice(ye,1),C.pipes.length===0&&this.pause(),oe.emit("unpipe",this,ee),this)},ce.prototype.on=function(oe,C){const ee=y.prototype.on.call(this,oe,C),ye=this._readableState;return oe==="data"?(ye.readableListening=this.listenerCount("readable")>0,ye.flowing!==!1&&this.resume()):oe==="readable"&&!ye.endEmitted&&!ye.readableListening&&(ye.readableListening=ye.needReadable=!0,ye.flowing=!1,ye.emittedReadable=!1,_("on readable",ye.length,ye.reading),ye.length?Q(this):ye.reading||t.nextTick(Ve,this)),ee},ce.prototype.addListener=ce.prototype.on,ce.prototype.removeListener=function(oe,C){const ee=y.prototype.removeListener.call(this,oe,C);return oe==="readable"&&t.nextTick(We,this),ee},ce.prototype.off=ce.prototype.removeListener,ce.prototype.removeAllListeners=function(oe){const C=y.prototype.removeAllListeners.apply(this,arguments);return(oe==="readable"||oe===void 0)&&t.nextTick(We,this),C};function We(oe){const C=oe._readableState;C.readableListening=oe.listenerCount("readable")>0,C.resumeScheduled&&C[$]===!1?C.flowing=!0:oe.listenerCount("data")>0?oe.resume():C.readableListening||(C.flowing=null)}function Ve(oe){_("readable nexttick read 0"),oe.read(0)}ce.prototype.resume=function(){const oe=this._readableState;return oe.flowing||(_("resume"),oe.flowing=!oe.readableListening,pe(this,oe)),oe[$]=!1,this};function pe(oe,C){C.resumeScheduled||(C.resumeScheduled=!0,t.nextTick(we,oe,C))}function we(oe,C){_("resume",C.reading),C.reading||oe.read(0),C.resumeScheduled=!1,oe.emit("resume"),W(oe),C.flowing&&!C.reading&&oe.read(0)}ce.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[$]=!0,this};function W(oe){const C=oe._readableState;for(_("flow",C.flowing);C.flowing&&oe.read()!==null;);}ce.prototype.wrap=function(oe){let C=!1;oe.on("data",ye=>{!this.push(ye)&&oe.pause&&(C=!0,oe.pause())}),oe.on("end",()=>{this.push(null)}),oe.on("error",ye=>{K(this,ye)}),oe.on("close",()=>{this.destroy()}),oe.on("destroy",()=>{this.destroy()}),this._read=()=>{C&&oe.resume&&(C=!1,oe.resume())};const ee=a(oe);for(let ye=1;ye<ee.length;ye++){const Pe=ee[ye];this[Pe]===void 0&&typeof oe[Pe]=="function"&&(this[Pe]=oe[Pe].bind(oe))}return this},ce.prototype[h]=function(){return Se(this)},ce.prototype.iterator=function(oe){return oe!==void 0&&q(oe,"options"),Se(this,oe)};function Se(oe,C){typeof oe.read!="function"&&(oe=ce.wrap(oe,{objectMode:!0}));const ee=Ae(oe,C);return ee.stream=oe,ee}async function*Ae(oe,C){let ee=le;function ye(Fe){this===oe?(ee(),ee=le):ee=Fe}oe.on("readable",ye);let Pe;const Ue=v(oe,{writable:!1},Fe=>{Pe=Fe?L(Pe,Fe):null,ee(),ee=le});try{for(;;){const Fe=oe.destroyed?null:oe.read();if(Fe!==null)yield Fe;else{if(Pe)throw Pe;if(Pe===null)return;await new l(ye)}}}catch(Fe){throw Pe=L(Pe,Fe),Pe}finally{(Pe||(C==null?void 0:C.destroyOnReturn)!==!1)&&(Pe===void 0||oe._readableState.autoDestroy)?S.destroyer(oe,null):(oe.off("readable",ye),Ue())}}r(ce.prototype,{readable:{__proto__:null,get(){const oe=this._readableState;return!!oe&&oe.readable!==!1&&!oe.destroyed&&!oe.errorEmitted&&!oe.endEmitted},set(oe){this._readableState&&(this._readableState.readable=!!oe)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(oe){this._readableState&&(this._readableState.flowing=oe)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(oe){this._readableState&&(this._readableState.destroyed=oe)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),r(re.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[$]!==!1},set(oe){this[$]=!!oe}}}),ce._fromList=je;function je(oe,C){if(C.length===0)return null;let ee;return C.objectMode?ee=C.buffer.shift():!oe||oe>=C.length?(C.decoder?ee=C.buffer.join(""):C.buffer.length===1?ee=C.buffer.first():ee=C.buffer.concat(C.length),C.buffer.clear()):ee=C.buffer.consume(oe,C.decoder),ee}function He(oe){const C=oe._readableState;_("endReadable",C.endEmitted),C.endEmitted||(C.ended=!0,t.nextTick(Ge,C,oe))}function Ge(oe,C){if(_("endReadableNT",oe.endEmitted,oe.length),!oe.errored&&!oe.closeEmitted&&!oe.endEmitted&&oe.length===0){if(oe.endEmitted=!0,C.emit("end"),C.writable&&C.allowHalfOpen===!1)t.nextTick(tt,C);else if(oe.autoDestroy){const ee=C._writableState;(!ee||ee.autoDestroy&&(ee.finished||ee.writable===!1))&&C.destroy()}}}function tt(oe){oe.writable&&!oe.writableEnded&&!oe.destroyed&&oe.end()}ce.from=function(oe,C){return X(ce,oe,C)};let lt;function ut(){return lt===void 0&&(lt={}),lt}return ce.fromWeb=function(oe,C){return ut().newStreamReadableFromReadableStream(oe,C)},ce.toWeb=function(oe,C){return ut().newReadableStreamFromStreamReadable(oe,C)},ce.wrap=function(oe,C){var ee,ye;return new ce({objectMode:(ee=(ye=oe.readableObjectMode)!==null&&ye!==void 0?ye:oe.objectMode)!==null&&ee!==void 0?ee:!0,...C,destroy(Pe,Ue){S.destroyer(oe,Pe),Ue(Pe)}}).wrap(oe)},D_}var N_,OI;function KT(){if(OI)return N_;OI=1;const t=Ta(),{ArrayPrototypeSlice:e,Error:u,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:n,ObjectDefineProperties:r,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:c}=Rr();N_=q,q.WritableState=U;const{EventEmitter:d}=Ry(),h=XT().Stream,{Buffer:f}=Wi(),p=au(),{addAbortSignal:y}=Jb(),{getHighWaterMark:b,getDefaultHighWaterMark:g}=Xb(),{ERR_INVALID_ARG_TYPE:m,ERR_METHOD_NOT_IMPLEMENTED:v,ERR_MULTIPLE_CALLBACK:_,ERR_STREAM_CANNOT_PIPE:w,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:D,ERR_STREAM_WRITE_AFTER_END:L,ERR_UNKNOWN_ENCODING:O}=Un().codes,{errorOrDestroy:E}=p;a(q.prototype,h.prototype),a(q,h);function P(){}const M=l("kOnFinished");function U(T,x,B){typeof B!="boolean"&&(B=x instanceof va()),this.objectMode=!!(T&&T.objectMode),B&&(this.objectMode=this.objectMode||!!(T&&T.writableObjectMode)),this.highWaterMark=T?b(this,T,"writableHighWaterMark",B):g(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const k=!!(T&&T.decodeStrings===!1);this.decodeStrings=!k,this.defaultEncoding=T&&T.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=K.bind(void 0,x),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,j(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!T||T.emitClose!==!1,this.autoDestroy=!T||T.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[M]=[]}function j(T){T.buffered=[],T.bufferedIndex=0,T.allBuffers=!0,T.allNoop=!0}U.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},n(U.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function q(T){const x=this instanceof va();if(!x&&!s(q,this))return new q(T);this._writableState=new U(T,this,x),T&&(typeof T.write=="function"&&(this._write=T.write),typeof T.writev=="function"&&(this._writev=T.writev),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.final=="function"&&(this._final=T.final),typeof T.construct=="function"&&(this._construct=T.construct),T.signal&&y(T.signal,this)),h.call(this,T),p.construct(this,()=>{const B=this._writableState;B.writing||ae(this,B),de(this,B)})}n(q,c,{__proto__:null,value:function(T){return s(this,T)?!0:this!==q?!1:T&&T._writableState instanceof U}}),q.prototype.pipe=function(){E(this,new w)};function $(T,x,B,k){const V=T._writableState;if(typeof B=="function")k=B,B=V.defaultEncoding;else{if(!B)B=V.defaultEncoding;else if(B!=="buffer"&&!f.isEncoding(B))throw new O(B);typeof k!="function"&&(k=P)}if(x===null)throw new D;if(!V.objectMode)if(typeof x=="string")V.decodeStrings!==!1&&(x=f.from(x,B),B="buffer");else if(x instanceof f)B="buffer";else if(h._isUint8Array(x))x=h._uint8ArrayToBuffer(x),B="buffer";else throw new m("chunk",["string","Buffer","Uint8Array"],x);let J;return V.ending?J=new L:V.destroyed&&(J=new S("write")),J?(t.nextTick(k,J),E(T,J,!0),J):(V.pendingcb++,Z(T,V,x,B,k))}q.prototype.write=function(T,x,B){return $(this,T,x,B)===!0},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){const T=this._writableState;T.corked&&(T.corked--,T.writing||ae(this,T))},q.prototype.setDefaultEncoding=function(x){if(typeof x=="string"&&(x=o(x)),!f.isEncoding(x))throw new O(x);return this._writableState.defaultEncoding=x,this};function Z(T,x,B,k,V){const J=x.objectMode?1:B.length;x.length+=J;const z=x.length<x.highWaterMark;return z||(x.needDrain=!0),x.writing||x.corked||x.errored||!x.constructed?(x.buffered.push({chunk:B,encoding:k,callback:V}),x.allBuffers&&k!=="buffer"&&(x.allBuffers=!1),x.allNoop&&V!==P&&(x.allNoop=!1)):(x.writelen=J,x.writecb=V,x.writing=!0,x.sync=!0,T._write(B,k,x.onwrite),x.sync=!1),z&&!x.errored&&!x.destroyed}function X(T,x,B,k,V,J,z){x.writelen=k,x.writecb=z,x.writing=!0,x.sync=!0,x.destroyed?x.onwrite(new S("write")):B?T._writev(V,x.onwrite):T._write(V,J,x.onwrite),x.sync=!1}function le(T,x,B,k){--x.pendingcb,k(B),ie(x),E(T,B)}function K(T,x){const B=T._writableState,k=B.sync,V=B.writecb;if(typeof V!="function"){E(T,new _);return}B.writing=!1,B.writecb=null,B.length-=B.writelen,B.writelen=0,x?(x.stack,B.errored||(B.errored=x),T._readableState&&!T._readableState.errored&&(T._readableState.errored=x),k?t.nextTick(le,T,B,x,V):le(T,B,x,V)):(B.buffered.length>B.bufferedIndex&&ae(T,B),k?B.afterWriteTickInfo!==null&&B.afterWriteTickInfo.cb===V?B.afterWriteTickInfo.count++:(B.afterWriteTickInfo={count:1,cb:V,stream:T,state:B},t.nextTick(he,B.afterWriteTickInfo)):Re(T,B,1,V))}function he({stream:T,state:x,count:B,cb:k}){return x.afterWriteTickInfo=null,Re(T,x,B,k)}function Re(T,x,B,k){for(!x.ending&&!T.destroyed&&x.length===0&&x.needDrain&&(x.needDrain=!1,T.emit("drain"));B-- >0;)x.pendingcb--,k();x.destroyed&&ie(x),de(T,x)}function ie(T){if(T.writing)return;for(let V=T.bufferedIndex;V<T.buffered.length;++V){var x;const{chunk:J,callback:z}=T.buffered[V],Y=T.objectMode?1:J.length;T.length-=Y,z((x=T.errored)!==null&&x!==void 0?x:new S("write"))}const B=T[M].splice(0);for(let V=0;V<B.length;V++){var k;B[V]((k=T.errored)!==null&&k!==void 0?k:new S("end"))}j(T)}function ae(T,x){if(x.corked||x.bufferProcessing||x.destroyed||!x.constructed)return;const{buffered:B,bufferedIndex:k,objectMode:V}=x,J=B.length-k;if(!J)return;let z=k;if(x.bufferProcessing=!0,J>1&&T._writev){x.pendingcb-=J-1;const Y=x.allNoop?P:ce=>{for(let Te=z;Te<B.length;++Te)B[Te].callback(ce)},re=x.allNoop&&z===0?B:e(B,z);re.allBuffers=x.allBuffers,X(T,x,!0,x.length,re,"",Y),j(x)}else{do{const{chunk:Y,encoding:re,callback:ce}=B[z];B[z++]=null;const Te=V?1:Y.length;X(T,x,!1,Te,Y,re,ce)}while(z<B.length&&!x.writing);z===B.length?j(x):z>256?(B.splice(0,z),x.bufferedIndex=0):x.bufferedIndex=z}x.bufferProcessing=!1}q.prototype._write=function(T,x,B){if(this._writev)this._writev([{chunk:T,encoding:x}],B);else throw new v("_write()")},q.prototype._writev=null,q.prototype.end=function(T,x,B){const k=this._writableState;typeof T=="function"?(B=T,T=null,x=null):typeof x=="function"&&(B=x,x=null);let V;if(T!=null){const J=$(this,T,x);J instanceof u&&(V=J)}return k.corked&&(k.corked=1,this.uncork()),V||(!k.errored&&!k.ending?(k.ending=!0,de(this,k,!0),k.ended=!0):k.finished?V=new A("end"):k.destroyed&&(V=new S("end"))),typeof B=="function"&&(V||k.finished?t.nextTick(B,V):k[M].push(B)),this};function Ee(T){return T.ending&&!T.destroyed&&T.constructed&&T.length===0&&!T.errored&&T.buffered.length===0&&!T.finished&&!T.writing&&!T.errorEmitted&&!T.closeEmitted}function De(T,x){let B=!1;function k(V){if(B){E(T,V??_());return}if(B=!0,x.pendingcb--,V){const J=x[M].splice(0);for(let z=0;z<J.length;z++)J[z](V);E(T,V,x.sync)}else Ee(x)&&(x.prefinished=!0,T.emit("prefinish"),x.pendingcb++,t.nextTick(fe,T,x))}x.sync=!0,x.pendingcb++;try{T._final(k)}catch(V){k(V)}x.sync=!1}function ge(T,x){!x.prefinished&&!x.finalCalled&&(typeof T._final=="function"&&!x.destroyed?(x.finalCalled=!0,De(T,x)):(x.prefinished=!0,T.emit("prefinish")))}function de(T,x,B){Ee(x)&&(ge(T,x),x.pendingcb===0&&(B?(x.pendingcb++,t.nextTick((k,V)=>{Ee(V)?fe(k,V):V.pendingcb--},T,x)):Ee(x)&&(x.pendingcb++,fe(T,x))))}function fe(T,x){x.pendingcb--,x.finished=!0;const B=x[M].splice(0);for(let k=0;k<B.length;k++)B[k]();if(T.emit("finish"),x.autoDestroy){const k=T._readableState;(!k||k.autoDestroy&&(k.endEmitted||k.readable===!1))&&T.destroy()}}r(q.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(T){this._writableState&&(this._writableState.destroyed=T)}},writable:{__proto__:null,get(){const T=this._writableState;return!!T&&T.writable!==!1&&!T.destroyed&&!T.errored&&!T.ending&&!T.ended},set(T){this._writableState&&(this._writableState.writable=!!T)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const T=this._writableState;return T?!T.destroyed&&!T.ending&&T.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const H=p.destroy;q.prototype.destroy=function(T,x){const B=this._writableState;return!B.destroyed&&(B.bufferedIndex<B.buffered.length||B[M].length)&&t.nextTick(ie,B),H.call(this,T,x),this},q.prototype._undestroy=p.undestroy,q.prototype._destroy=function(T,x){x(T)},q.prototype[d.captureRejectionSymbol]=function(T){this.destroy(T)};let N;function R(){return N===void 0&&(N={}),N}return q.fromWeb=function(T,x){return R().newStreamWritableFromWritableStream(T,x)},q.toWeb=function(T){return R().newWritableStreamFromStreamWritable(T)},N_}var C_,RI;function LG(){if(RI)return C_;RI=1;const t=Ta(),e=Wi(),{isReadable:u,isWritable:s,isIterable:n,isNodeStream:r,isReadableNodeStream:a,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:c,isWritableStream:d}=Aa(),h=rs(),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:y}}=Un(),{destroyer:b}=au(),g=va(),m=Kb(),v=KT(),{createDeferredPromise:_}=In(),w=Fq(),S=globalThis.Blob||e.Blob,A=typeof S<"u"?function(U){return U instanceof S}:function(U){return!1},D=globalThis.AbortController||Qo().AbortController,{FunctionPrototypeCall:L}=Rr();class O extends g{constructor(U){super(U),(U==null?void 0:U.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(U==null?void 0:U.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}C_=function M(U,j){if(l(U))return U;if(a(U))return P({readable:U});if(o(U))return P({writable:U});if(r(U))return P({writable:!1,readable:!1});if(c(U))return P({readable:m.fromWeb(U)});if(d(U))return P({writable:v.fromWeb(U)});if(typeof U=="function"){const{value:$,write:Z,final:X,destroy:le}=E(U);if(n($))return w(O,$,{objectMode:!0,write:Z,final:X,destroy:le});const K=$==null?void 0:$.then;if(typeof K=="function"){let he;const Re=L(K,$,ie=>{if(ie!=null)throw new y("nully","body",ie)},ie=>{b(he,ie)});return he=new O({objectMode:!0,readable:!1,write:Z,final(ie){X(async()=>{try{await Re,t.nextTick(ie,null)}catch(ae){t.nextTick(ie,ae)}})},destroy:le})}throw new y("Iterable, AsyncIterable or AsyncFunction",j,$)}if(A(U))return M(U.arrayBuffer());if(n(U))return w(O,U,{objectMode:!0,writable:!1});if(c(U==null?void 0:U.readable)&&d(U==null?void 0:U.writable))return O.fromWeb(U);if(typeof(U==null?void 0:U.writable)=="object"||typeof(U==null?void 0:U.readable)=="object"){const $=U!=null&&U.readable?a(U==null?void 0:U.readable)?U==null?void 0:U.readable:M(U.readable):void 0,Z=U!=null&&U.writable?o(U==null?void 0:U.writable)?U==null?void 0:U.writable:M(U.writable):void 0;return P({readable:$,writable:Z})}const q=U==null?void 0:U.then;if(typeof q=="function"){let $;return L(q,U,Z=>{Z!=null&&$.push(Z),$.push(null)},Z=>{b($,Z)}),$=new O({objectMode:!0,writable:!1,read(){}})}throw new p(j,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],U)};function E(M){let{promise:U,resolve:j}=_();const q=new D,$=q.signal;return{value:M(async function*(){for(;;){const X=U;U=null;const{chunk:le,done:K,cb:he}=await X;if(t.nextTick(he),K)return;if($.aborted)throw new f(void 0,{cause:$.reason});({promise:U,resolve:j}=_()),yield le}}(),{signal:$}),write(X,le,K){const he=j;j=null,he({chunk:X,done:!1,cb:K})},final(X){const le=j;j=null,le({done:!0,cb:X})},destroy(X,le){q.abort(),le(X)}}}function P(M){const U=M.readable&&typeof M.readable.read!="function"?m.wrap(M.readable):M.readable,j=M.writable;let q=!!u(U),$=!!s(j),Z,X,le,K,he;function Re(ie){const ae=K;K=null,ae?ae(ie):ie&&he.destroy(ie)}return he=new O({readableObjectMode:!!(U!=null&&U.readableObjectMode),writableObjectMode:!!(j!=null&&j.writableObjectMode),readable:q,writable:$}),$&&(h(j,ie=>{$=!1,ie&&b(U,ie),Re(ie)}),he._write=function(ie,ae,Ee){j.write(ie,ae)?Ee():Z=Ee},he._final=function(ie){j.end(),X=ie},j.on("drain",function(){if(Z){const ie=Z;Z=null,ie()}}),j.on("finish",function(){if(X){const ie=X;X=null,ie()}})),q&&(h(U,ie=>{q=!1,ie&&b(U,ie),Re(ie)}),U.on("readable",function(){if(le){const ie=le;le=null,ie()}}),U.on("end",function(){he.push(null)}),he._read=function(){for(;;){const ie=U.read();if(ie===null){le=he._read;return}if(!he.push(ie))return}}),he._destroy=function(ie,ae){!ie&&K!==null&&(ie=new f),le=null,Z=null,X=null,K===null?ae(ie):(K=ae,b(j,ie),b(U,ie))},he}return C_}var j_,xI;function va(){if(xI)return j_;xI=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:u,ObjectSetPrototypeOf:s}=Rr();j_=a;const n=Kb(),r=KT();s(a.prototype,n.prototype),s(a,n);{const d=u(r.prototype);for(let h=0;h<d.length;h++){const f=d[h];a.prototype[f]||(a.prototype[f]=r.prototype[f])}}function a(d){if(!(this instanceof a))return new a(d);n.call(this,d),r.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(a.prototype,{writable:{__proto__:null,...e(r.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(r.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(r.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(r.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(r.prototype,"writableLength")},writableFinished:{__proto__:null,...e(r.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(r.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(r.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(r.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let o;function l(){return o===void 0&&(o={}),o}a.fromWeb=function(d,h){return l().newStreamDuplexFromReadableWritablePair(d,h)},a.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let c;return a.from=function(d){return c||(c=LG()),c(d,"body")},j_}var L_,II;function qq(){if(II)return L_;II=1;const{ObjectSetPrototypeOf:t,Symbol:e}=Rr();L_=a;const{ERR_METHOD_NOT_IMPLEMENTED:u}=Un().codes,s=va(),{getHighWaterMark:n}=Xb();t(a.prototype,s.prototype),t(a,s);const r=e("kCallback");function a(c){if(!(this instanceof a))return new a(c);const d=c?n(this,c,"readableHighWaterMark",!0):null;d===0&&(c={...c,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:c.writableHighWaterMark||0}),s.call(this,c),this._readableState.sync=!1,this[r]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",l)}function o(c){typeof this._flush=="function"&&!this.destroyed?this._flush((d,h)=>{if(d){c?c(d):this.destroy(d);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function l(){this._final!==o&&o.call(this)}return a.prototype._final=o,a.prototype._transform=function(c,d,h){throw new u("_transform()")},a.prototype._write=function(c,d,h){const f=this._readableState,p=this._writableState,y=f.length;this._transform(c,d,(b,g)=>{if(b){h(b);return}g!=null&&this.push(g),p.ended||y===f.length||f.length<f.highWaterMark?h():this[r]=h})},a.prototype._read=function(){if(this[r]){const c=this[r];this[r]=null,c()}},L_}var M_,PI;function Bq(){if(PI)return M_;PI=1;const{ObjectSetPrototypeOf:t}=Rr();M_=u;const e=qq();t(u.prototype,e.prototype),t(u,e);function u(s){if(!(this instanceof u))return new u(s);e.call(this,s)}return u.prototype._transform=function(s,n,r){r(null,s)},M_}var F_,DI;function YT(){if(DI)return F_;DI=1;const t=Ta(),{ArrayIsArray:e,Promise:u,SymbolAsyncIterator:s,SymbolDispose:n}=Rr(),r=rs(),{once:a}=In(),o=au(),l=va(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:f,ERR_STREAM_DESTROYED:p,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:b}=Un(),{validateFunction:g,validateAbortSignal:m}=Dy(),{isIterable:v,isReadable:_,isReadableNodeStream:w,isNodeStream:S,isTransformStream:A,isWebStream:D,isReadableStream:L,isReadableFinished:O}=Aa(),E=globalThis.AbortController||Qo().AbortController;let P,M,U;function j(ie,ae,Ee){let De=!1;ie.on("close",()=>{De=!0});const ge=r(ie,{readable:ae,writable:Ee},de=>{De=!de});return{destroy:de=>{De||(De=!0,o.destroyer(ie,de||new p("pipe")))},cleanup:ge}}function q(ie){return g(ie[ie.length-1],"streams[stream.length - 1]"),ie.pop()}function $(ie){if(v(ie))return ie;if(w(ie))return Z(ie);throw new d("val",["Readable","Iterable","AsyncIterable"],ie)}async function*Z(ie){M||(M=Kb()),yield*M.prototype[s].call(ie)}async function X(ie,ae,Ee,{end:De}){let ge,de=null;const fe=R=>{if(R&&(ge=R),de){const T=de;de=null,T()}},H=()=>new u((R,T)=>{ge?T(ge):de=()=>{ge?T(ge):R()}});ae.on("drain",fe);const N=r(ae,{readable:!1},fe);try{ae.writableNeedDrain&&await H();for await(const R of ie)ae.write(R)||await H();De&&(ae.end(),await H()),Ee()}catch(R){Ee(ge!==R?c(ge,R):R)}finally{N(),ae.off("drain",fe)}}async function le(ie,ae,Ee,{end:De}){A(ae)&&(ae=ae.writable);const ge=ae.getWriter();try{for await(const de of ie)await ge.ready,ge.write(de).catch(()=>{});await ge.ready,De&&await ge.close(),Ee()}catch(de){try{await ge.abort(de),Ee(de)}catch(fe){Ee(fe)}}}function K(...ie){return he(ie,a(q(ie)))}function he(ie,ae,Ee){if(ie.length===1&&e(ie[0])&&(ie=ie[0]),ie.length<2)throw new f("streams");const De=new E,ge=De.signal,de=Ee==null?void 0:Ee.signal,fe=[];m(de,"options.signal");function H(){V(new b)}U=U||In().addAbortListener;let N;de&&(N=U(de,H));let R,T;const x=[];let B=0;function k(re){V(re,--B===0)}function V(re,ce){var Te;if(re&&(!R||R.code==="ERR_STREAM_PREMATURE_CLOSE")&&(R=re),!(!R&&!ce)){for(;x.length;)x.shift()(R);(Te=N)===null||Te===void 0||Te[n](),De.abort(),ce&&(R||fe.forEach(xe=>xe()),t.nextTick(ae,R,T))}}let J;for(let re=0;re<ie.length;re++){const ce=ie[re],Te=re<ie.length-1,xe=re>0,Le=Te||(Ee==null?void 0:Ee.end)!==!1,qe=re===ie.length-1;if(S(ce)){let G=function(F){F&&F.name!=="AbortError"&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"&&k(F)};if(Le){const{destroy:F,cleanup:Q}=j(ce,Te,xe);x.push(F),_(ce)&&qe&&fe.push(Q)}ce.on("error",G),_(ce)&&qe&&fe.push(()=>{ce.removeListener("error",G)})}if(re===0)if(typeof ce=="function"){if(J=ce({signal:ge}),!v(J))throw new h("Iterable, AsyncIterable or Stream","source",J)}else v(ce)||w(ce)||A(ce)?J=ce:J=l.from(ce);else if(typeof ce=="function"){if(A(J)){var z;J=$((z=J)===null||z===void 0?void 0:z.readable)}else J=$(J);if(J=ce(J,{signal:ge}),Te){if(!v(J,!0))throw new h("AsyncIterable",`transform[${re-1}]`,J)}else{var Y;P||(P=Bq());const G=new P({objectMode:!0}),F=(Y=J)===null||Y===void 0?void 0:Y.then;if(typeof F=="function")B++,F.call(J,me=>{T=me,me!=null&&G.write(me),Le&&G.end(),t.nextTick(k)},me=>{G.destroy(me),t.nextTick(k,me)});else if(v(J,!0))B++,X(J,G,k,{end:Le});else if(L(J)||A(J)){const me=J.readable||J;B++,X(me,G,k,{end:Le})}else throw new h("AsyncIterable or Promise","destination",J);J=G;const{destroy:Q,cleanup:te}=j(J,!1,!0);x.push(Q),qe&&fe.push(te)}}else if(S(ce)){if(w(J)){B+=2;const G=Re(J,ce,k,{end:Le});_(ce)&&qe&&fe.push(G)}else if(A(J)||L(J)){const G=J.readable||J;B++,X(G,ce,k,{end:Le})}else if(v(J))B++,X(J,ce,k,{end:Le});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],J);J=ce}else if(D(ce)){if(w(J))B++,le($(J),ce,k,{end:Le});else if(L(J)||v(J))B++,le(J,ce,k,{end:Le});else if(A(J))B++,le(J.readable,ce,k,{end:Le});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],J);J=ce}else J=l.from(ce)}return(ge!=null&&ge.aborted||de!=null&&de.aborted)&&t.nextTick(H),J}function Re(ie,ae,Ee,{end:De}){let ge=!1;if(ae.on("close",()=>{ge||Ee(new y)}),ie.pipe(ae,{end:!1}),De){let de=function(){ge=!0,ae.end()};O(ie)?t.nextTick(de):ie.once("end",de)}else Ee();return r(ie,{readable:!0,writable:!1},de=>{const fe=ie._readableState;de&&de.code==="ERR_STREAM_PREMATURE_CLOSE"&&fe&&fe.ended&&!fe.errored&&!fe.errorEmitted?ie.once("end",Ee).once("error",Ee):Ee(de)}),r(ae,{readable:!1,writable:!0},Ee)}return F_={pipelineImpl:he,pipeline:K},F_}var q_,NI;function Uq(){if(NI)return q_;NI=1;const{pipeline:t}=YT(),e=va(),{destroyer:u}=au(),{isNodeStream:s,isReadable:n,isWritable:r,isWebStream:a,isTransformStream:o,isWritableStream:l,isReadableStream:c}=Aa(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:f}}=Un(),p=rs();return q_=function(...b){if(b.length===0)throw new f("streams");if(b.length===1)return e.from(b[0]);const g=[...b];if(typeof b[0]=="function"&&(b[0]=e.from(b[0])),typeof b[b.length-1]=="function"){const P=b.length-1;b[P]=e.from(b[P])}for(let P=0;P<b.length;++P)if(!(!s(b[P])&&!a(b[P]))){if(P<b.length-1&&!(n(b[P])||c(b[P])||o(b[P])))throw new h(`streams[${P}]`,g[P],"must be readable");if(P>0&&!(r(b[P])||l(b[P])||o(b[P])))throw new h(`streams[${P}]`,g[P],"must be writable")}let m,v,_,w,S;function A(P){const M=w;w=null,M?M(P):P?S.destroy(P):!E&&!O&&S.destroy()}const D=b[0],L=t(b,A),O=!!(r(D)||l(D)||o(D)),E=!!(n(L)||c(L)||o(L));if(S=new e({writableObjectMode:!!(D!=null&&D.writableObjectMode),readableObjectMode:!!(L!=null&&L.readableObjectMode),writable:O,readable:E}),O){if(s(D))S._write=function(M,U,j){D.write(M,U)?j():m=j},S._final=function(M){D.end(),v=M},D.on("drain",function(){if(m){const M=m;m=null,M()}});else if(a(D)){const U=(o(D)?D.writable:D).getWriter();S._write=async function(j,q,$){try{await U.ready,U.write(j).catch(()=>{}),$()}catch(Z){$(Z)}},S._final=async function(j){try{await U.ready,U.close().catch(()=>{}),v=j}catch(q){j(q)}}}const P=o(L)?L.readable:L;p(P,()=>{if(v){const M=v;v=null,M()}})}if(E){if(s(L))L.on("readable",function(){if(_){const P=_;_=null,P()}}),L.on("end",function(){S.push(null)}),S._read=function(){for(;;){const P=L.read();if(P===null){_=S._read;return}if(!S.push(P))return}};else if(a(L)){const M=(o(L)?L.readable:L).getReader();S._read=async function(){for(;;)try{const{value:U,done:j}=await M.read();if(!S.push(U))return;if(j){S.push(null);return}}catch{return}}}}return S._destroy=function(P,M){!P&&w!==null&&(P=new d),_=null,m=null,v=null,w===null?M(P):(w=M,s(L)&&u(L,P))},S},q_}var CI;function MG(){if(CI)return h1;CI=1;const t=globalThis.AbortController||Qo().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:u,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:n},AbortError:r}=Un(),{validateAbortSignal:a,validateInteger:o,validateObject:l}=Dy(),c=Rr().Symbol("kWeak"),d=Rr().Symbol("kResistStopPropagation"),{finished:h}=rs(),f=Uq(),{addAbortSignalNoValidate:p}=Jb(),{isWritable:y,isNodeStream:b}=Aa(),{deprecate:g}=In(),{ArrayPrototypePush:m,Boolean:v,MathFloor:_,Number:w,NumberIsNaN:S,Promise:A,PromiseReject:D,PromiseResolve:L,PromisePrototypeThen:O,Symbol:E}=Rr(),P=E("kEmpty"),M=E("kEof");function U(de,fe){if(fe!=null&&l(fe,"options"),(fe==null?void 0:fe.signal)!=null&&a(fe.signal,"options.signal"),b(de)&&!y(de))throw new e("stream",de,"must be writable");const H=f(this,de);return fe!=null&&fe.signal&&p(fe.signal,H),H}function j(de,fe){if(typeof de!="function")throw new u("fn",["Function","AsyncFunction"],de);fe!=null&&l(fe,"options"),(fe==null?void 0:fe.signal)!=null&&a(fe.signal,"options.signal");let H=1;(fe==null?void 0:fe.concurrency)!=null&&(H=_(fe.concurrency));let N=H-1;return(fe==null?void 0:fe.highWaterMark)!=null&&(N=_(fe.highWaterMark)),o(H,"options.concurrency",1),o(N,"options.highWaterMark",0),N+=H,(async function*(){const T=In().AbortSignalAny([fe==null?void 0:fe.signal].filter(v)),x=this,B=[],k={signal:T};let V,J,z=!1,Y=0;function re(){z=!0,ce()}function ce(){Y-=1,Te()}function Te(){J&&!z&&Y<H&&B.length<N&&(J(),J=null)}async function xe(){try{for await(let Le of x){if(z)return;if(T.aborted)throw new r;try{if(Le=de(Le,k),Le===P)continue;Le=L(Le)}catch(qe){Le=D(qe)}Y+=1,O(Le,ce,re),B.push(Le),V&&(V(),V=null),!z&&(B.length>=N||Y>=H)&&await new A(qe=>{J=qe})}B.push(M)}catch(Le){const qe=D(Le);O(qe,ce,re),B.push(qe)}finally{z=!0,V&&(V(),V=null)}}xe();try{for(;;){for(;B.length>0;){const Le=await B[0];if(Le===M)return;if(T.aborted)throw new r;Le!==P&&(yield Le),B.shift(),Te()}await new A(Le=>{V=Le})}}finally{z=!0,J&&(J(),J=null)}}).call(this)}function q(de=void 0){return de!=null&&l(de,"options"),(de==null?void 0:de.signal)!=null&&a(de.signal,"options.signal"),(async function*(){let H=0;for await(const R of this){var N;if(de!=null&&(N=de.signal)!==null&&N!==void 0&&N.aborted)throw new r({cause:de.signal.reason});yield[H++,R]}}).call(this)}async function $(de,fe=void 0){for await(const H of K.call(this,de,fe))return!0;return!1}async function Z(de,fe=void 0){if(typeof de!="function")throw new u("fn",["Function","AsyncFunction"],de);return!await $.call(this,async(...H)=>!await de(...H),fe)}async function X(de,fe){for await(const H of K.call(this,de,fe))return H}async function le(de,fe){if(typeof de!="function")throw new u("fn",["Function","AsyncFunction"],de);async function H(N,R){return await de(N,R),P}for await(const N of j.call(this,H,fe));}function K(de,fe){if(typeof de!="function")throw new u("fn",["Function","AsyncFunction"],de);async function H(N,R){return await de(N,R)?N:P}return j.call(this,H,fe)}class he extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Re(de,fe,H){var N;if(typeof de!="function")throw new u("reducer",["Function","AsyncFunction"],de);H!=null&&l(H,"options"),(H==null?void 0:H.signal)!=null&&a(H.signal,"options.signal");let R=arguments.length>1;if(H!=null&&(N=H.signal)!==null&&N!==void 0&&N.aborted){const V=new r(void 0,{cause:H.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(V)),V}const T=new t,x=T.signal;if(H!=null&&H.signal){const V={once:!0,[c]:this,[d]:!0};H.signal.addEventListener("abort",()=>T.abort(),V)}let B=!1;try{for await(const V of this){var k;if(B=!0,H!=null&&(k=H.signal)!==null&&k!==void 0&&k.aborted)throw new r;R?fe=await de(fe,V,{signal:x}):(fe=V,R=!0)}if(!B&&!R)throw new he}finally{T.abort()}return fe}async function ie(de){de!=null&&l(de,"options"),(de==null?void 0:de.signal)!=null&&a(de.signal,"options.signal");const fe=[];for await(const N of this){var H;if(de!=null&&(H=de.signal)!==null&&H!==void 0&&H.aborted)throw new r(void 0,{cause:de.signal.reason});m(fe,N)}return fe}function ae(de,fe){const H=j.call(this,de,fe);return(async function*(){for await(const R of H)yield*R}).call(this)}function Ee(de){if(de=w(de),S(de))return 0;if(de<0)throw new n("number",">= 0",de);return de}function De(de,fe=void 0){return fe!=null&&l(fe,"options"),(fe==null?void 0:fe.signal)!=null&&a(fe.signal,"options.signal"),de=Ee(de),(async function*(){var N;if(fe!=null&&(N=fe.signal)!==null&&N!==void 0&&N.aborted)throw new r;for await(const T of this){var R;if(fe!=null&&(R=fe.signal)!==null&&R!==void 0&&R.aborted)throw new r;de--<=0&&(yield T)}}).call(this)}function ge(de,fe=void 0){return fe!=null&&l(fe,"options"),(fe==null?void 0:fe.signal)!=null&&a(fe.signal,"options.signal"),de=Ee(de),(async function*(){var N;if(fe!=null&&(N=fe.signal)!==null&&N!==void 0&&N.aborted)throw new r;for await(const T of this){var R;if(fe!=null&&(R=fe.signal)!==null&&R!==void 0&&R.aborted)throw new r;if(de-- >0&&(yield T),de<=0)return}}).call(this)}return h1.streamReturningOperators={asIndexedPairs:g(q,"readable.asIndexedPairs will be removed in a future version."),drop:De,filter:K,flatMap:ae,map:j,take:ge,compose:U},h1.promiseReturningOperators={every:Z,forEach:le,reduce:Re,toArray:ie,some:$,find:X},h1}var B_,jI;function Qq(){if(jI)return B_;jI=1;const{ArrayPrototypePop:t,Promise:e}=Rr(),{isIterable:u,isNodeStream:s,isWebStream:n}=Aa(),{pipelineImpl:r}=YT(),{finished:a}=rs();Hq();function o(...l){return new e((c,d)=>{let h,f;const p=l[l.length-1];if(p&&typeof p=="object"&&!s(p)&&!u(p)&&!n(p)){const y=t(l);h=y.signal,f=y.end}r(l,(y,b)=>{y?d(y):c(b)},{signal:h,end:f})})}return B_={finished:a,pipeline:o},B_}var LI;function Hq(){if(LI)return m_.exports;LI=1;const{Buffer:t}=Wi(),{ObjectDefineProperty:e,ObjectKeys:u,ReflectApply:s}=Rr(),{promisify:{custom:n}}=In(),{streamReturningOperators:r,promiseReturningOperators:a}=MG(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=Un(),l=Uq(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:d}=Xb(),{pipeline:h}=YT(),{destroyer:f}=au(),p=rs(),y=Qq(),b=Aa(),g=m_.exports=XT().Stream;g.isDestroyed=b.isDestroyed,g.isDisturbed=b.isDisturbed,g.isErrored=b.isErrored,g.isReadable=b.isReadable,g.isWritable=b.isWritable,g.Readable=Kb();for(const v of u(r)){let w=function(...S){if(new.target)throw o();return g.Readable.from(s(_,this,S))};const _=r[v];e(w,"name",{__proto__:null,value:_.name}),e(w,"length",{__proto__:null,value:_.length}),e(g.Readable.prototype,v,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}for(const v of u(a)){let w=function(...S){if(new.target)throw o();return s(_,this,S)};const _=a[v];e(w,"name",{__proto__:null,value:_.name}),e(w,"length",{__proto__:null,value:_.length}),e(g.Readable.prototype,v,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}g.Writable=KT(),g.Duplex=va(),g.Transform=qq(),g.PassThrough=Bq(),g.pipeline=h;const{addAbortSignal:m}=Jb();return g.addAbortSignal=m,g.finished=p,g.destroy=f,g.compose=l,g.setDefaultHighWaterMark=c,g.getDefaultHighWaterMark=d,e(g,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return y}}),e(h,n,{__proto__:null,enumerable:!0,get(){return y.pipeline}}),e(p,n,{__proto__:null,enumerable:!0,get(){return y.finished}}),g.Stream=g,g._isUint8Array=function(_){return _ instanceof Uint8Array},g._uint8ArrayToBuffer=function(_){return t.from(_.buffer,_.byteOffset,_.byteLength)},m_.exports}var MI;function Wt(){return MI||(MI=1,function(t){const e=Hq(),u=Qq(),s=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=s,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return u}}),t.exports.Stream=e.Stream,t.exports.default=t.exports}(b_)),b_.exports}var FI;function FG(){if(FI)return jc;FI=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.ActorQueryResultSerializeJson=void 0;const t=Gi(),e=Dt(),u=Xt(),s=Wt();let n=class extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}async testHandleChecked(a,o){if(!["bindings","quads","boolean"].includes(a.type))throw new Error("This actor can only handle bindings or quad streams.");return!0}async runHandle(a,o,l){const c=new s.Readable;if(c._read=()=>{},a.type==="bindings"||a.type==="quads"){let d=a.type==="bindings"?(0,e.wrap)(a.bindingsStream).map(f=>JSON.stringify(Object.fromEntries([...f].map(([p,y])=>[p.value,u.termToString(y)])))):(0,e.wrap)(a.quadStream).map(f=>JSON.stringify(u.quadToStringQuad(f))),h=!0;d=d.map(f=>{const p=`${h?"":","}
${f}`;return h=!1,p}).prepend(["["]).append([`
]
`]),c.wrap(d)}else try{c.push(`${JSON.stringify(await a.execute())}
`),c.push(null)}catch(d){setTimeout(()=>c.emit("error",d))}return{data:c}}};return jc.ActorQueryResultSerializeJson=n,jc}var qI;function qG(){return qI||(qI=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(FG(),t)}(h_)),h_}var U_={},Qc={},BI;function BG(){if(BI)return Qc;BI=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.ActorQueryResultSerializeSimple=void 0;const t=Gi(),e=Dt(),u=Xt(),s=Wt();let n=class wo extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}async testHandleChecked(a,o){if(!["bindings","quads","boolean","void"].includes(a.type))throw new Error("This actor can only handle bindings streams, quad streams, booleans, or updates.");return!0}static termToString(a){return a.termType==="Quad"?(0,u.termToString)(a):a.value}async runHandle(a,o,l){const c=new s.Readable;return a.type==="bindings"?c.wrap(a.bindingsStream.map(d=>`${[...d].map(([h,f])=>`?${h.value}: ${wo.termToString(f)}`).join(`
`)}

`)):a.type==="quads"?c.wrap(a.quadStream.map(d=>`subject: ${wo.termToString(d.subject)}
predicate: ${wo.termToString(d.predicate)}
object: ${wo.termToString(d.object)}
graph: ${wo.termToString(d.graph)}

`)):c.wrap((0,e.wrap)(a.type==="boolean"?a.execute().then(d=>[`${d}
`]):a.execute().then(()=>[`ok
`]))),{data:c}}};return Qc.ActorQueryResultSerializeSimple=n,Qc}var UI;function UG(){return UI||(UI=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(BG(),t)}(U_)),U_}var Q_={},Hc={},QI;function QG(){if(QI)return Hc;QI=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.ActorQueryResultSerializeSparqlCsv=void 0;const t=Gi(),e=Wt();let u=class x0 extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(n){super(n)}static bindingToCsvBindings(n){if(!n)return"";let r=n.value;if(n.termType==="Literal")r=`${r}`;else if(n.termType==="BlankNode")r=`_:${r}`;else if(n.termType==="Quad"){let a=x0.bindingToCsvBindings(n.object);n.object.termType==="Literal"&&(a=`"${a.replaceAll('"','""')}"`),r=`<< ${x0.bindingToCsvBindings(n.subject)} ${x0.bindingToCsvBindings(n.predicate)} ${a} >>`}else r=`<${r}>`;return/[",\n\r]/u.test(r)&&(r=`"${r.replaceAll('"','""')}"`),r}async testHandleChecked(n,r){if(n.type!=="bindings")throw new Error("This actor can only handle bindings streams.");return!0}async runHandle(n,r,a){const o=n,l=new e.Readable,c=await o.metadata();return l.push(`${c.variables.map(d=>d.value).join(",")}\r
`),l.wrap(o.bindingsStream.map(d=>`${c.variables.map(h=>x0.bindingToCsvBindings(d.get(h))).join(",")}\r
`)),{data:l}}};return Hc.ActorQueryResultSerializeSparqlCsv=u,Hc}var HI;function HG(){return HI||(HI=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(QG(),t)}(Q_)),Q_}var H_={},$c={},$_={},tn={},$I;function $G(){if($I)return tn;$I=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.stringQuadToQuad=tn.quadToStringQuad=tn.stringToTerm=tn.getLiteralLanguage=tn.getLiteralType=tn.getLiteralValue=tn.termToString=void 0;const t=Et(),e=new t.DataFactory;function u(y){if(y)switch(y.termType){case"NamedNode":return`<${c(y.value)}>`;case"BlankNode":return`_:${y.value}`;case"Literal":{const b=y;return`"${d(b.value)}"${b.datatype&&b.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&b.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?`^^<${b.datatype.value}>`:""}${b.language?`@${b.language}`:""}`}case"Quad":return`<<${u(y.subject)} ${u(y.predicate)} ${u(y.object)}${y.graph.termType==="DefaultGraph"?"":` ${u(y.graph)}`}>>`;case"Variable":return`?${y.value}`;case"DefaultGraph":return y.value}}tn.termToString=u;function s(y){const b=/^"([^]*)"((\^\^.*)|(@.*))?$/u.exec(y);if(!b)throw new Error(`${y} is not a literal`);return b[1].replace(/\\"/ug,'"')}tn.getLiteralValue=s;function n(y){const b=/^"[^]*"(?:\^\^<([^"]+)>|(@)[^@"]+)?$/u.exec(y);if(!b)throw new Error(`${y} is not a literal`);return b[1]||(b[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}tn.getLiteralType=n;function r(y){const b=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/u.exec(y);if(!b)throw new Error(`${y} is not a literal`);return b[1]?b[1].toLowerCase():""}tn.getLiteralLanguage=r;function a(y,b){if(b=b||e,!y||y.length===0)return b.defaultGraph();switch(y[0]){case"_":return b.blankNode(y.slice(2));case"?":if(!b.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return b.variable(y.slice(1));case'"':{const g=r(y),m=b.namedNode(n(y));return b.literal(s(y),g||m)}case"<":default:if(y.startsWith("<<")&&y.endsWith(">>")){const g=y.slice(2,-2),m=[];let v=0,_=0;for(let w=0;w<g.length;w++){const S=g[w];if(S==="<"&&v++,S===">"){if(v===0)throw new Error(`Found closing tag without opening tag in ${y}`);v--}S===" "&&v===0&&(m.push(g.slice(_,w)),_=w+1)}if(v!==0)throw new Error(`Found opening tag without closing tag in ${y}`);if(m.push(g.slice(_,g.length)),m.length!==3&&m.length!==4)throw new Error(`Nested quad syntax error ${y}`);return b.quad(a(m[0]),a(m[1]),a(m[2]),m[3]?a(m[3]):void 0)}if(!y.startsWith("<")||!y.endsWith(">"))throw new Error(`Detected invalid iri for named node (must be wrapped in <>): ${y}`);return b.namedNode(y.slice(1,-1))}}tn.stringToTerm=a;function o(y){return{subject:u(y.subject),predicate:u(y.predicate),object:u(y.object),graph:u(y.graph)}}tn.quadToStringQuad=o;function l(y,b){return b=b||e,b.quad(a(y.subject,b),a(y.predicate,b),a(y.object,b),a(y.graph,b))}tn.stringQuadToQuad=l;function c(y){return y.replace(h,p)}function d(y){return h.test(y)&&(y=y.replace(h,p)),y}const h=/["\\\t\n\r\b\f\u0000-\u0019]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=new Map([["\\","\\\\"],['"','\\"'],["	","\\t"],[`
`,"\\n"],["\r","\\r"],["\b","\\b"],["\f","\\f"]]);function p(y){const b=f.get(y);if(!b){if(y.length===1){const m=y.charCodeAt(0).toString(16);return`${"\\u0000".slice(0,-m.length)}${m}`}const g=((y.charCodeAt(0)-55296)*1024+y.charCodeAt(1)+9216).toString(16);return`${"\\U00000000".slice(0,-g.length)}${g}`}return b}return tn}var VI;function Ny(){return VI||(VI=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.termToString=t.stringToTerm=t.stringQuadToQuad=t.quadToStringQuad=t.getLiteralValue=t.getLiteralType=t.getLiteralLanguage=void 0;const e=$G();Object.defineProperty(t,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(t,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(t,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(t,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(t,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(t,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(t,"termToString",{enumerable:!0,get:function(){return e.termToString}})}($_)),$_}var kI;function VG(){if(kI)return $c;kI=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.ActorQueryResultSerializeSparqlTsv=void 0;const t=Gi(),e=Ny(),u=Wt();let s=class $q extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(r){super(r)}static bindingToTsvBindings(r){return r?(0,e.termToString)(r).replaceAll("	","\\t").replaceAll(`
`,"\\n").replaceAll("\r","\\r"):""}async testHandleChecked(r,a){if(r.type!=="bindings")throw new Error("This actor can only handle bindings streams.");return!0}async runHandle(r,a,o){const l=r,c=new u.Readable,d=await l.metadata();return c.push(`${d.variables.map(h=>h.value).join("	")}
`),c.wrap(l.bindingsStream.map(h=>`${d.variables.map(f=>$q.bindingToTsvBindings(h.get(f))).join("	")}
`)),{data:c}}};return $c.ActorQueryResultSerializeSparqlTsv=s,$c}var zI;function kG(){return zI||(zI=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(VG(),t)}(H_)),H_}var V_={},Vc={},kc={},GI;function zG(){if(GI)return kc;GI=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.XmlSerializer=void 0;let t=class{constructor(){this.stack=[]}open(u,s){const n=`${this.identation()+this.formatTag(u,s,"open")}
`;return this.stack.push(u),n}close(){const u=this.stack.pop();if(u===void 0)throw new Error("There is no tag left to close");return`${this.identation()+this.formatTag(u,{},"close")}
`}serializeNode(u){if(u.children===void 0)return`${this.identation()+this.formatTag(u.name,u.attributes,"self-closing")}
`;if(typeof u.children=="string")return`${this.identation()+this.formatTag(u.name,u.attributes,"open")+this.escape(u.children)+this.formatTag(u.name,{},"close")}
`;const s=[];s.push(`${this.identation()+this.formatTag(u.name,u.attributes,"open")}
`),this.stack.push(u.name);for(const n of u.children)s.push(this.serializeNode(n));return this.stack.pop(),s.push(`${this.identation()+this.formatTag(u.name,{},"close")}
`),s.join("")}identation(){return this.stack.map(u=>"  ").join("")}formatTag(u,s,n){return`<${n==="close"?"/":""}${u}${Object.entries(s??{}).map(r=>` ${r[0]}="${this.escape(r[1])}"`)}${n==="self-closing"?"/":""}>`}escape(u){return u.replaceAll(/["&'<>]/gu,s=>{switch(s){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}})}};return kc.XmlSerializer=t,t.header=`<?xml version="1.0" encoding="UTF-8"?>
`,kc}var WI;function GG(){if(WI)return Vc;WI=1,Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.ActorQueryResultSerializeSparqlXml=void 0;const t=Gi(),e=Dt(),u=Wt(),s=zG();let n=class Vq extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}static bindingToXmlBindings(a,o){return{name:"binding",attributes:{name:o.value},children:[this.valueToXmlValue(a)]}}static valueToXmlValue(a){let o;switch(a.termType){case"Literal":return a.language?o={"xml:lang":a.language}:a.datatype&&a.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"?o={datatype:a.datatype.value}:o={},{name:"literal",attributes:o,children:a.value};case"BlankNode":return{name:"bnode",children:a.value};case"Quad":return{name:"triple",children:[{name:"subject",children:[this.valueToXmlValue(a.subject)]},{name:"predicate",children:[this.valueToXmlValue(a.predicate)]},{name:"object",children:[this.valueToXmlValue(a.object)]}]};default:return{name:"uri",children:a.value}}}async testHandleChecked(a,o){if(!["bindings","boolean"].includes(a.type))throw new Error("This actor can only handle bindings streams or booleans.");return!0}async runHandle(a,o,l){const c=new u.Readable;c._read=()=>{};const d=new s.XmlSerializer,h=await a.metadata();if(c.push(s.XmlSerializer.header),c.push(d.open("sparql",{xmlns:"http://www.w3.org/2005/sparql-results#"})),c.push(d.serializeNode({name:"head",children:h.variables.map(f=>({name:"variable",attributes:{name:f.value}}))})),a.type==="bindings"){function*f(){yield d.close(),yield d.close()}c.push(d.open("results"));const p=(0,e.wrap)(a.bindingsStream).map(y=>d.serializeNode({name:"result",children:[...y].map(([b,g])=>Vq.bindingToXmlBindings(g,b))})).append((0,e.wrap)(f()));c.wrap(p)}else try{const f=await a.execute();c.push(d.serializeNode({name:"boolean",children:f.toString()})),c.push(d.close()),setTimeout(()=>c.push(null))}catch(f){setTimeout(()=>c.emit("error",f))}return{data:c}}};return Vc.ActorQueryResultSerializeSparqlXml=n,Vc}var JI;function WG(){return JI||(JI=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(GG(),t)}(V_)),V_}var k_={},zc={},XI;function JG(){if(XI)return zc;XI=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.ActorQueryResultSerializeTable=void 0;const t=Gi(),e=Et(),u=Xt(),s=un(),n=Wt(),r=new e.DataFactory,a=s.QUAD_TERM_NAMES.map(l=>r.variable(l));let o=class m3 extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(c){super(c),this.padding=m3.repeat(" ",this.columnWidth)}static repeat(c,d){return c.repeat(d)}async testHandleChecked(c,d){if(!["bindings","quads"].includes(c.type))throw new Error("This actor can only handle bindings or quad streams.");return!0}termToString(c){return c.termType==="Quad"?(0,u.termToString)(c):c.value}pad(c){return c.length<=this.columnWidth?c+this.padding.slice(c.length):`${c.slice(0,this.columnWidth-1)}`}pushHeader(c,d){const h=d.map(f=>this.pad(f.value)).join(" ");c.push(`${h}
${m3.repeat("-",h.length)}
`)}createRow(c,d){return`${c.map(h=>d.has(h)?this.termToString(d.get(h)):"").map(h=>this.pad(h)).join(" ")}
`}async runHandle(c,d,h){const f=new n.Readable;let p;if(c.type==="bindings"){p=c.bindingsStream.map(b=>this.createRow(y,b));const y=(await c.metadata()).variables;this.pushHeader(f,y)}else p=c.quadStream.map(y=>`${(0,s.getTerms)(y).map(b=>this.pad(this.termToString(b))).join(" ")}
`),this.pushHeader(f,a);return f.wrap(p),{data:f}}};return zc.ActorQueryResultSerializeTable=o,zc}var KI;function XG(){return KI||(KI=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(JG(),t)}(k_)),k_}var z_={},Gc={},G_={},Wc={},W_={},J_={},Jc={},Xc={},YI;function Ho(){if(YI)return Xc;YI=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.Translator=void 0;let t=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(u){throw new Error(`Invalid RDF ${u.datatype.value} value: '${u.value}'`)}registerHandler(u,s,n){for(const r of s)this.supportedRdfDatatypes.push(r),this.fromRdfHandlers[r.value]=u;for(const r of n){let a=this.toRdfHandlers[r];a||(this.toRdfHandlers[r]=a=[]),a.push(u)}}fromRdf(u,s){const n=this.fromRdfHandlers[u.datatype.value];return n?n.fromRdf(u,s):u.value}toRdf(u,s){const n=this.toRdfHandlers[typeof u];if(n)for(const r of n){const a=r.toRdf(u,s);if(a)return a}throw new Error(`Invalid JavaScript value: '${u}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}};return Xc.Translator=t,Xc}var ZI;function KG(){if(ZI)return Jc;ZI=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.TypeHandlerBoolean=void 0;const t=Ho();let e=class kq{fromRdf(s,n){switch(s.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return n&&t.Translator.incorrectRdfDataType(s),!1}toRdf(s,{datatype:n,dataFactory:r}){return r.literal(s?"true":"false",n||r.namedNode(kq.TYPE))}};return e.TYPE="http://www.w3.org/2001/XMLSchema#boolean",Jc.TypeHandlerBoolean=e,Jc}var Kc={},eP;function YG(){if(eP)return Kc;eP=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.TypeHandlerDate=void 0;const t=Ho();let e=class g3{fromRdf(s,n){switch(n&&!s.value.match(g3.VALIDATORS[s.datatype.value.substr(33,s.datatype.value.length)])&&t.Translator.incorrectRdfDataType(s),s.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(s.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const r=s.value.split("-");return new Date(0,parseInt(r[0],10)-1,parseInt(r[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(s.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(s.value+"-01");default:return new Date(s.value)}}toRdf(s,{datatype:n,dataFactory:r}){if(n=n||r.namedNode(g3.TYPES[0]),!(s instanceof Date))return null;const a=s;let o;switch(n.value){case"http://www.w3.org/2001/XMLSchema#gDay":o=String(a.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":o=a.getUTCMonth()+1+"-"+a.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":o=String(a.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":o=a.getUTCFullYear()+"-"+(a.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":o=a.toISOString().replace(/T.*$/,"");break;default:o=a.toISOString()}return r.literal(o,n)}};return e.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],e.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},Kc.TypeHandlerDate=e,Kc}var Yc={},tP;function ZG(){if(tP)return Yc;tP=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.TypeHandlerNumberDouble=void 0;const t=Ho();let e=class zq{fromRdf(s,n){const r=parseFloat(s.value);return n&&isNaN(r)&&t.Translator.incorrectRdfDataType(s),r}toRdf(s,{datatype:n,dataFactory:r}){return n=n||r.namedNode(zq.TYPES[0]),isNaN(s)?r.literal("NaN",n):isFinite(s)?s%1===0?null:r.literal(s.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),n):r.literal(s>0?"INF":"-INF",n)}};return e.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],Yc.TypeHandlerNumberDouble=e,Yc}var Zc={},rP;function eW(){if(rP)return Zc;rP=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.TypeHandlerNumberInteger=void 0;const t=Ho();let e=class I0{fromRdf(s,n){const r=parseInt(s.value,10);return n&&(isNaN(r)||s.value.indexOf(".")>=0)&&t.Translator.incorrectRdfDataType(s),r}toRdf(s,{datatype:n,dataFactory:r}){return r.literal(String(s),n||(s<=I0.MAX_INT&&s>=I0.MIN_INT?r.namedNode(I0.TYPES[0]):r.namedNode(I0.TYPES[1])))}};return e.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],e.MAX_INT=2147483647,e.MIN_INT=-2147483648,Zc.TypeHandlerNumberInteger=e,Zc}var el={},nP;function tW(){if(nP)return el;nP=1,Object.defineProperty(el,"__esModule",{value:!0}),el.TypeHandlerString=void 0;let t=class{fromRdf(u){return u.value}toRdf(u,{datatype:s,dataFactory:n}){return n.literal(u,s)}};return t.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],el.TypeHandlerString=t,el}var iP;function aP(){return iP||(iP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(KG(),t),u(YG(),t),u(ZG(),t),u(eW(),t),u(tW(),t)}(J_)),J_}var X_={},sP;function rW(){return sP||(sP=1,Object.defineProperty(X_,"__esModule",{value:!0})),X_}var oP;function nW(){return oP||(oP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(p,y,b,g){g===void 0&&(g=b);var m=Object.getOwnPropertyDescriptor(y,b);(!m||("get"in m?!y.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(p,g,m)}:function(p,y,b,g){g===void 0&&(g=b),p[g]=y[b]}),u=I&&I.__exportStar||function(p,y){for(var b in p)b!=="default"&&!Object.prototype.hasOwnProperty.call(y,b)&&e(y,p,b)};Object.defineProperty(t,"__esModule",{value:!0}),t.getSupportedJavaScriptPrimitives=t.getSupportedRdfDatatypes=t.getTermRaw=t.toRdf=t.fromRdf=void 0;const s=Et(),n=aP(),r=Ho();u(aP(),t),u(rW(),t),u(Ho(),t);const a=new s.DataFactory,o=new r.Translator;o.registerHandler(new n.TypeHandlerString,n.TypeHandlerString.TYPES.map(p=>a.namedNode(p)),["string"]),o.registerHandler(new n.TypeHandlerBoolean,[n.TypeHandlerBoolean.TYPE].map(p=>a.namedNode(p)),["boolean"]),o.registerHandler(new n.TypeHandlerNumberDouble,n.TypeHandlerNumberDouble.TYPES.map(p=>a.namedNode(p)),["number"]),o.registerHandler(new n.TypeHandlerNumberInteger,n.TypeHandlerNumberInteger.TYPES.map(p=>a.namedNode(p)),["number"]),o.registerHandler(new n.TypeHandlerDate,n.TypeHandlerDate.TYPES.map(p=>a.namedNode(p)),["object"]);function l(p,y){return o.fromRdf(p,y)}t.fromRdf=l;function c(p,y){return y&&"namedNode"in y&&(y={dataFactory:y}),y=y||{},y&&!y.dataFactory&&(y.dataFactory=a),o.toRdf(p,y)}t.toRdf=c;function d(p,y){return p.termType==="Literal"?l(p,y):p.value}t.getTermRaw=d;function h(){return o.getSupportedRdfDatatypes()}t.getSupportedRdfDatatypes=h;function f(){return o.getSupportedJavaScriptPrimitives()}t.getSupportedJavaScriptPrimitives=f}(W_)),W_}var K_={},tl={},Y_,uP;function Gq(){if(uP)return Y_;uP=1;var{Buffer:t}=Wi(),e={},u=e.LEFT_BRACE=1,s=e.RIGHT_BRACE=2,n=e.LEFT_BRACKET=3,r=e.RIGHT_BRACKET=4,a=e.COLON=5,o=e.COMMA=6,l=e.TRUE=7,c=e.FALSE=8,d=e.NULL=9,h=e.STRING=10,f=e.NUMBER=11,p=e.START=17,y=e.STOP=18,b=e.TRUE1=33,g=e.TRUE2=34,m=e.TRUE3=35,v=e.FALSE1=49,_=e.FALSE2=50,w=e.FALSE3=51,S=e.FALSE4=52,A=e.NULL1=65,D=e.NULL2=66,L=e.NULL3=67,O=e.NUMBER1=81,E=e.NUMBER3=83,P=e.STRING1=97,M=e.STRING2=98,U=e.STRING3=99,j=e.STRING4=100,q=e.STRING5=101,$=e.STRING6=102,Z=e.VALUE=113,X=e.KEY=114,le=e.OBJECT=129,K=e.ARRAY=130,he="\\".charCodeAt(0),Re="/".charCodeAt(0),ie="\b".charCodeAt(0),ae="\f".charCodeAt(0),Ee=`
`.charCodeAt(0),De="\r".charCodeAt(0),ge="	".charCodeAt(0),de=64*1024;function fe(R){return t.alloc?t.alloc(R):new t(R)}function H(){this.tState=p,this.value=void 0,this.string=void 0,this.stringBuffer=fe(de),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=Z,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:fe(2),3:fe(3),4:fe(4)},this.offset=-1}H.toknam=function(R){for(var T=Object.keys(e),x=0,B=T.length;x<B;x++){var k=T[x];if(e[k]===R)return k}return R&&"0x"+R.toString(16)};var N=H.prototype;return N.onError=function(R){throw R},N.charError=function(R,T){this.tState=y,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(R[T]))+" at position "+T+" in state "+H.toknam(this.tState)))},N.appendStringChar=function(R){this.stringBufferOffset>=de&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=R},N.appendStringBuf=function(R,T,x){var B=R.length;typeof T=="number"&&(typeof x=="number"?x<0?B=R.length-T+x:B=x-T:B=R.length-T),B<0&&(B=0),this.stringBufferOffset+B>de&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),R.copy(this.stringBuffer,this.stringBufferOffset,T,x),this.stringBufferOffset+=B},N.write=function(R){typeof R=="string"&&(R=new t(R));for(var T,x=0,B=R.length;x<B;x++)if(this.tState===p){if(T=R[x],this.offset++,T===123)this.onToken(u,"{");else if(T===125)this.onToken(s,"}");else if(T===91)this.onToken(n,"[");else if(T===93)this.onToken(r,"]");else if(T===58)this.onToken(a,":");else if(T===44)this.onToken(o,",");else if(T===116)this.tState=b;else if(T===102)this.tState=v;else if(T===110)this.tState=A;else if(T===34)this.string="",this.stringBufferOffset=0,this.tState=P;else if(T===45)this.string="-",this.tState=O;else if(T>=48&&T<64)this.string=String.fromCharCode(T),this.tState=E;else if(!(T===32||T===9||T===10||T===13))return this.charError(R,x)}else if(this.tState===P)if(T=R[x],this.bytes_remaining>0){for(var k=0;k<this.bytes_remaining;k++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+k]=R[k];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,x=x+k-1}else if(this.bytes_remaining===0&&T>=128){if(T<=193||T>244)return this.onError(new Error("Invalid UTF-8 character at position "+x+" in state "+H.toknam(this.tState)));if(T>=194&&T<=223&&(this.bytes_in_sequence=2),T>=224&&T<=239&&(this.bytes_in_sequence=3),T>=240&&T<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+x>R.length){for(var V=0;V<=R.length-1-x;V++)this.temp_buffs[this.bytes_in_sequence][V]=R[x+V];this.bytes_remaining=x+this.bytes_in_sequence-R.length,x=R.length-1}else this.appendStringBuf(R,x,x+this.bytes_in_sequence),x=x+this.bytes_in_sequence-1}else if(T===34)this.tState=p,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(h,this.string),this.offset+=t.byteLength(this.string,"utf8")+1,this.string=void 0;else if(T===92)this.tState=M;else if(T>=32)this.appendStringChar(T);else return this.charError(R,x);else if(this.tState===M)if(T=R[x],T===34)this.appendStringChar(T),this.tState=P;else if(T===92)this.appendStringChar(he),this.tState=P;else if(T===47)this.appendStringChar(Re),this.tState=P;else if(T===98)this.appendStringChar(ie),this.tState=P;else if(T===102)this.appendStringChar(ae),this.tState=P;else if(T===110)this.appendStringChar(Ee),this.tState=P;else if(T===114)this.appendStringChar(De),this.tState=P;else if(T===116)this.appendStringChar(ge),this.tState=P;else if(T===117)this.unicode="",this.tState=U;else return this.charError(R,x);else if(this.tState===U||this.tState===j||this.tState===q||this.tState===$)if(T=R[x],T>=48&&T<64||T>64&&T<=70||T>96&&T<=102){if(this.unicode+=String.fromCharCode(T),this.tState++===$){var J=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&J>=56320&&J<57343+1?(this.appendStringBuf(new t(String.fromCharCode(this.highSurrogate,J))),this.highSurrogate=void 0):this.highSurrogate===void 0&&J>=55296&&J<56319+1?this.highSurrogate=J:(this.highSurrogate!==void 0&&(this.appendStringBuf(new t(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new t(String.fromCharCode(J)))),this.tState=P}}else return this.charError(R,x);else if(this.tState===O||this.tState===E)switch(T=R[x],T){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(T),this.tState=E;break;default:this.tState=p;var z=this.numberReviver(this.string);if(z)return z;this.offset+=this.string.length-1,this.string=void 0,x--;break}else if(this.tState===b)if(R[x]===114)this.tState=g;else return this.charError(R,x);else if(this.tState===g)if(R[x]===117)this.tState=m;else return this.charError(R,x);else if(this.tState===m)if(R[x]===101)this.tState=p,this.onToken(l,!0),this.offset+=3;else return this.charError(R,x);else if(this.tState===v)if(R[x]===97)this.tState=_;else return this.charError(R,x);else if(this.tState===_)if(R[x]===108)this.tState=w;else return this.charError(R,x);else if(this.tState===w)if(R[x]===115)this.tState=S;else return this.charError(R,x);else if(this.tState===S)if(R[x]===101)this.tState=p,this.onToken(c,!1),this.offset+=4;else return this.charError(R,x);else if(this.tState===A)if(R[x]===117)this.tState=D;else return this.charError(R,x);else if(this.tState===D)if(R[x]===108)this.tState=L;else return this.charError(R,x);else if(this.tState===L)if(R[x]===108)this.tState=p,this.onToken(d,null),this.offset+=3;else return this.charError(R,x)},N.onToken=function(R,T){},N.parseError=function(R,T){this.tState=y,this.onError(new Error("Unexpected "+H.toknam(R)+(T?"("+JSON.stringify(T)+")":"")+" in state "+H.toknam(this.state)))},N.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},N.pop=function(){var R=this.value,T=this.stack.pop();this.value=T.value,this.key=T.key,this.mode=T.mode,this.emit(R),this.mode||(this.state=Z)},N.emit=function(R){this.mode&&(this.state=o),this.onValue(R)},N.onValue=function(R){},N.onToken=function(R,T){if(this.state===Z)if(R===h||R===f||R===l||R===c||R===d)this.value&&(this.value[this.key]=T),this.emit(T);else if(R===u)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=X,this.mode=le;else if(R===n)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=K,this.state=Z;else if(R===s)if(this.mode===le)this.pop();else return this.parseError(R,T);else if(R===r)if(this.mode===K)this.pop();else return this.parseError(R,T);else return this.parseError(R,T);else if(this.state===X)if(R===h)this.key=T,this.state=a;else if(R===s)this.pop();else return this.parseError(R,T);else if(this.state===a)if(R===a)this.state=Z;else return this.parseError(R,T);else if(this.state===o)if(R===o)this.mode===K?(this.key++,this.state=Z):this.mode===le&&(this.state=X);else if(R===r&&this.mode===K||R===s&&this.mode===le)this.pop();else return this.parseError(R,T);else return this.parseError(R,T)},N.numberReviver=function(R){var T=Number(R);if(isNaN(T))return this.charError(buffer,i);R.match(/[0-9]+/)==R&&T.toString()!=R?this.onToken(h,R):this.onToken(f,T)},H.C=e,Y_=H,Y_}var cP;function iW(){if(cP)return tl;cP=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.SparqlJsonParser=void 0;const t=Et(),e=Wt(),u=Gq();let s=class{constructor(r){var a;r=r||{},this.dataFactory=r.dataFactory||new t.DataFactory,this.prefixVariableQuestionMark=!!r.prefixVariableQuestionMark,this.suppressMissingStreamResultsError=(a=r.suppressMissingStreamResultsError)!==null&&a!==void 0?a:!0}parseJsonResults(r){return r.results.bindings.map(a=>this.parseJsonBindings(a))}parseJsonResultsStream(r){const a=h=>d.emit("error",h);r.on("error",a);const o=new u;o.onError=a;let l=!1,c=!1;o.onValue=h=>{if(o.key==="vars"&&o.stack.length===2&&o.stack[1].key==="head")d.emit("variables",h.map(f=>this.dataFactory.variable(f))),l=!0;else if(o.key==="results"&&o.stack.length===1)c=!0;else if(typeof o.key=="number"&&o.stack.length===3&&o.stack[1].key==="results"&&o.stack[2].key==="bindings")try{d.push(this.parseJsonBindings(h))}catch(f){d.emit("error",f)}else o.key==="metadata"&&o.stack.length===1&&d.emit("metadata",h)};const d=r.on("end",h=>{!c&&!this.suppressMissingStreamResultsError?d.emit("error",new Error("No valid SPARQL query results were found.")):l||d.emit("variables",[])}).pipe(new e.Transform({objectMode:!0,transform(h,f,p){o.write(h),p()}}));return d}parseJsonBindings(r){const a={};for(const o in r){const l=r[o];a[this.prefixVariableQuestionMark?"?"+o:o]=this.parseJsonValue(l)}return a}parseJsonValue(r){let a;switch(r.type){case"bnode":a=this.dataFactory.blankNode(r.value);break;case"literal":r["xml:lang"]?a=this.dataFactory.literal(r.value,r["xml:lang"]):r.datatype?a=this.dataFactory.literal(r.value,this.dataFactory.namedNode(r.datatype)):a=this.dataFactory.literal(r.value);break;case"typed-literal":a=this.dataFactory.literal(r.value,this.dataFactory.namedNode(r.datatype));break;case"triple":const o=r.value;if(!o||!o.subject||!o.predicate||!o.object)throw new Error("Invalid quoted triple: "+JSON.stringify(r));a=this.dataFactory.quad(this.parseJsonValue(o.subject),this.parseJsonValue(o.predicate),this.parseJsonValue(o.object));break;default:a=this.dataFactory.namedNode(r.value);break}return a}parseJsonBoolean(r){if("boolean"in r)return r.boolean;throw new Error("No valid ASK response was found.")}parseJsonBooleanStream(r){return new Promise((a,o)=>{const l=new u;l.onError=o,l.onValue=c=>{l.key==="boolean"&&typeof c=="boolean"&&l.stack.length===1&&a(c)},r.on("error",o).on("data",c=>l.write(c)).on("end",()=>o(new Error("No valid ASK response was found.")))})}};return tl.SparqlJsonParser=s,tl}var lP;function Wq(){return lP||(lP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(iW(),t)}(K_)),K_}var dP;function aW(){if(dP)return Wc;dP=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.Converter=void 0;const t=nW(),e=Wq();let u=class fa{constructor(n){n=n||{delimiter:"_"},n.prefixVariableQuestionMark=!1,this.delimiter=n.delimiter||"_",this.parser=new e.SparqlJsonParser(n),this.materializeRdfJsTerms=n.materializeRdfJsTerms}static addValueToTree(n,r,a,o,l,c){const d=r[0],h=o?o+c+d:d,f=l.singularizeVariables[h];if(r.length===1)f?n[d]||(n[d]=a):(n[d]||(n[d]=[]),n[d].push(a));else{let p;f?(n[d]||(n[d]={}),p=n[d]):(n[d]||(n[d]=[{}]),p=n[d][0]),fa.addValueToTree(p,r.slice(1),a,h,l,c)}}static mergeTrees(n,r){if(typeof n!=typeof r)throw new Error(`Two incompatible tree nodes were found: ${typeof n} and ${typeof r}`);if(Array.isArray(n)!==Array.isArray(r))throw new Error(`Two incompatible tree nodes were found: Array?${Array.isArray(n)} and Array?${Array.isArray(r)}`);if(typeof n=="object"&&typeof r=="object"){if(n.termType&&r.termType)return n.equals(r)?{valid:!0,result:n}:{valid:!1,result:n};if(Array.isArray(n)&&Array.isArray(r)){if(n.length>0){const a=[];let o=!1;for(const l of n){const c=fa.mergeTrees(l,r[0]);c.valid?(o=!0,a.push(c.result)):a.push(l)}if(o)return{valid:!0,result:a}}return{valid:!0,result:n.concat(r)}}else{const a={};for(const o in r)a[o]=r[o];for(const o in n)if(a[o]){const l=fa.mergeTrees(n[o],a[o]);if(l.valid)a[o]=l.result;else return{valid:!1,result:n}}else a[o]=n[o];return{valid:!0,result:a}}}else throw new Error(`Unmergable tree types: ${typeof n} and ${typeof r}`)}static materializeTree(n){if(n.termType)return(0,t.getTermRaw)(n);if(Array.isArray(n))return n.map(fa.materializeTree);{const r={};for(const a in n)r[a]=fa.materializeTree(n[a]);return r}}sparqlJsonResultsToTree(n,r){return this.bindingsToTree(this.parser.parseJsonResults(n),r||{singularizeVariables:{}})}bindingsToTree(n,r){const a=r&&r.singularizeVariables[""];let o=a?{}:[];for(const l of n){const c=a?{}:[{}];for(const d in l){const h=d.split(this.delimiter),f=l[d];fa.addValueToTree(a?c:c[0],h,f,"",r,this.delimiter)}o=fa.mergeTrees(o,c).result}return this.materializeRdfJsTerms&&(o=fa.materializeTree(o)),o}};return Wc.Converter=u,Wc}var fP;function sW(){return fP||(fP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(aW(),t)}(G_)),G_}var hP;function pP(){if(hP)return Gc;hP=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.ActorQueryResultSerializeTree=void 0;const t=Gi(),e=Lt,u=ot,s=Wt(),n=sW();let r=class Jq extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}static async bindingsStreamToGraphQl(o,l,c){const d=u.ActionContext.ensureActionContext(l),h=new n.Converter(c),f={singularizeVariables:d.get(e.KeysInitQuery.graphqlSingularizeVariables)??{}};return h.bindingsToTree(await o.map(p=>Object.fromEntries([...p].map(([y,b])=>[y.value,b]))).toArray(),f)}async testHandleChecked(o){if(o.type!=="bindings")throw new Error("This actor can only handle bindings streams.");return!0}async runHandle(o,l){const c=new s.Readable;return c._read=()=>{c._read=()=>{},Jq.bindingsStreamToGraphQl(o.bindingsStream,o.context,{materializeRdfJsTerms:!0}).then(d=>{c.push(JSON.stringify(d,null,"  ")),c.push(null)}).catch(d=>c.emit("error",d))},{data:c}}};return Gc.ActorQueryResultSerializeTree=r,Gc}var yP;function oW(){return yP||(yP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(r,a,o,l){l===void 0&&(l=o);var c=Object.getOwnPropertyDescriptor(a,o);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(r,l,c)}:function(r,a,o,l){l===void 0&&(l=o),r[l]=a[o]}),u=I&&I.__exportStar||function(r,a){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&e(a,r,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.bindingsStreamToGraphQl=void 0;const s=pP(),{bindingsStreamToGraphQl:n}=s.ActorQueryResultSerializeTree;t.bindingsStreamToGraphQl=n,u(pP(),t)}(z_)),z_}var Z_={},rl={},bP;function uW(){if(bP)return rl;bP=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.MediatorCombineUnion=void 0;const t=ot;let e=class extends t.Mediator{constructor(s){super(s),this.combiner=this.createCombiner()}async mediate(s){let n;try{n=this.publish(s)}catch{n=[]}if(this.filterErrors){const a=[];for(const o of n)try{await o.reply,a.push(o)}catch{}n=a}await Promise.all(n.map(({reply:a})=>a));const r=await Promise.all(n.map(a=>a.actor.runObservable(s)));return this.combiner(r)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return s=>{const n={};return n[this.field]={},[{}].concat(s.map(r=>r[this.field])).forEach(r=>{n[this.field]={...r,...n[this.field]}}),n}}};return rl.MediatorCombineUnion=e,rl}var mP;function xa(){return mP||(mP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(uW(),t)}(Z_)),Z_}var ev={},nl={},gP;function cW(){if(gP)return nl;gP=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.MediatorNumber=void 0;const t=ot;let e=class extends t.Mediator{constructor(s){super(s),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return s=>s.reduce((n,r,a)=>{const o=this.getOrDefault(r[this.field],Number.POSITIVE_INFINITY);return o!==null&&(Number.isNaN(n[0])||n[0]>o)?[o,a]:n},[Number.NaN,-1])[1];case"max":return s=>s.reduce((n,r,a)=>{const o=this.getOrDefault(r[this.field],Number.NEGATIVE_INFINITY);return o!==null&&(Number.isNaN(n[0])||n[0]<o)?[o,a]:n},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(s,n){return s===void 0?n:s}async mediateWith(s,n){let r=n.map(({reply:c})=>c);const a=[];if(this.ignoreErrors){const c={};c[this.field]=null,r=r.map(d=>d.catch(h=>(a.push(h),c)))}const o=await Promise.all(r),l=this.indexPicker(o);if(l<0)throw new Error(`All actors rejected their test in ${this.name}
${a.map(c=>c.message).join(`
`)}`);return n[l].actor}};return nl.MediatorNumber=e,nl}var _P;function il(){return _P||(_P=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(cW(),t)}(ev)),ev}var tv={},al={},rv={},sl={},oa={},vP;function ZT(){if(vP)return oa;vP=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.ActorDereferenceBase=oa.isHardError=oa.emptyReadable=void 0;const t=Lt,e=ot,u=Wt();function s(){const a=new u.Readable;return a.push(null),a}oa.emptyReadable=s;function n(a){return!a.get(t.KeysInitQuery.lenient)}oa.isHardError=n;let r=class extends e.Actor{constructor(o){super(o)}async dereferenceErrorHandler(o,l,c){if(n(o.context))throw l;return this.logWarn(o.context,l.message),{...c,data:s()}}};return oa.ActorDereferenceBase=r,oa}var wP;function lW(){if(wP)return sl;wP=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.ActorDereference=void 0;const t=ZT();let e=class extends t.ActorDereferenceBase{constructor(s){super(s)}async handleDereferenceErrors(s,n,r,a=0){return this.dereferenceErrorHandler(s,n,{url:s.url,exists:!1,headers:r,requestTime:a})}};return sl.ActorDereference=e,sl}var ws={},SP;function dW(){if(SP)return ws;SP=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.ActorDereferenceParse=ws.getMediaTypeFromExtension=void 0;const t=Wt(),e=ZT();function u(n,r){const a=n.lastIndexOf(".");return a>=0&&(r==null?void 0:r[n.slice(a+1)])||""}ws.getMediaTypeFromExtension=u;let s=class extends e.ActorDereferenceBase{constructor(r){super(r)}async test(r){return!0}handleDereferenceStreamErrors(r,a){return(0,e.isHardError)(r.context)||(a.on("error",o=>{this.logWarn(r.context,o.message,()=>({url:r.url})),a.push(null)}),a=a.pipe(new t.PassThrough({objectMode:!0}))),a}async run(r){var c,d;const{context:a}=r,o=await this.mediatorDereference.mediate({...r,mediaTypes:async()=>{var h,f;return(f=await((h=this.mediatorParseMediatypes)==null?void 0:h.mediate({context:a,mediaTypes:!0})))==null?void 0:f.mediaTypes}});let l;try{l=(await this.mediatorParse.mediate({context:a,handle:{context:a,...o,metadata:await this.getMetadata(o)},handleMediaType:o.mediaType||u(o.url,this.mediaMappings)||r.mediaType})).handle,l.data=this.handleDereferenceStreamErrors(r,l.data)}catch(h){await((d=(c=o.data).close)==null?void 0:d.call(c)),l=await this.dereferenceErrorHandler(r,h,{})}return{...o,...l}}};return ws.ActorDereferenceParse=s,ws}var TP;function eA(){return TP||(TP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(lW(),t),u(dW(),t),u(ZT(),t)}(rv)),rv}var AP;function fW(){if(AP)return al;AP=1,Object.defineProperty(al,"__esModule",{value:!0}),al.ActorDereferenceFallback=void 0;const t=eA();let e=class extends t.ActorDereference{constructor(s){super(s)}async test(s){return!0}async run(s){return this.handleDereferenceErrors(s,new Error(`Could not dereference '${s.url}'`))}};return al.ActorDereferenceFallback=e,al}var EP;function hW(){return EP||(EP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(fW(),t)}(tv)),tv}var nv={},ol={},iv={},ul={},OP;function pW(){if(OP)return ul;OP=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.ActorRdfJoinEntriesSort=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return ul.ActorRdfJoinEntriesSort=e,ul}var RP;function yW(){return RP||(RP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(pW(),t)}(iv)),iv}var xP;function bW(){if(xP)return ol;xP=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.ActorRdfJoinEntriesSortCardinality=void 0;const t=yW();let e=class extends t.ActorRdfJoinEntriesSort{constructor(s){super(s)}async test(s){return!0}async run(s){return{entries:[...s.entries].sort((r,a)=>r.metadata.cardinality.value-a.metadata.cardinality.value)}}};return ol.ActorRdfJoinEntriesSortCardinality=e,ol}var IP;function mW(){return IP||(IP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(bW(),t)}(nv)),nv}var av={},Ss={},sv={},cl={},PP;function gW(){if(PP)return cl;PP=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.ActorRdfJoinSelectivity=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return cl.ActorRdfJoinSelectivity=e,cl}var DP;function _W(){return DP||(DP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(gW(),t)}(sv)),sv}var NP;function vW(){if(NP)return Ss;NP=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.JoinTypes=Ss.ActorRdfJoinSelectivityVariableCounting=void 0;const t=_W(),e=Ot();let u=class Ls extends t.ActorRdfJoinSelectivity{constructor(r){super(r)}async test(r){return{accuracy:.5}}static getPatternCost(r){let a=1;return r.subject.termType==="Variable"&&(a+=4),(r.predicate.termType==="Variable"||r.type===e.Algebra.types.PATH)&&(a+=1),r.object.termType==="Variable"&&(a+=2),r.graph.termType==="Variable"&&(a+=1),a/9}static getJoinTypes(r,a){const o=[];return r.subject.termType==="Variable"?(r.subject.equals(a.subject)&&o.push(s.unboundSS),a.type==="pattern"&&r.subject.equals(a.predicate)&&o.push(s.unboundSP),r.subject.equals(a.object)&&o.push(s.unboundSO),r.subject.equals(a.graph)&&o.push(s.unboundSG)):(r.subject.equals(a.subject)&&o.push(s.boundSS),a.type==="pattern"&&r.subject.equals(a.predicate)&&o.push(s.boundSP),r.subject.equals(a.object)&&o.push(s.boundSO),r.subject.equals(a.graph)&&o.push(s.boundSG)),r.type==="pattern"&&(r.predicate.termType==="Variable"?(r.predicate.equals(a.subject)&&o.push(s.unboundPS),a.type==="pattern"&&r.predicate.equals(a.predicate)&&o.push(s.unboundPP),r.predicate.equals(a.object)&&o.push(s.unboundPO),r.predicate.equals(a.graph)&&o.push(s.unboundPG)):(r.predicate.equals(a.subject)&&o.push(s.boundPS),a.type==="pattern"&&r.predicate.equals(a.predicate)&&o.push(s.boundPP),r.predicate.equals(a.object)&&o.push(s.boundPO),r.predicate.equals(a.graph)&&o.push(s.boundPG))),r.object.termType==="Variable"?(r.object.equals(a.subject)&&o.push(s.unboundOS),a.type==="pattern"&&r.object.equals(a.predicate)&&o.push(s.unboundOP),r.object.equals(a.object)&&o.push(s.unboundOO),r.object.equals(a.graph)&&o.push(s.unboundOG)):(r.object.equals(a.subject)&&o.push(s.boundOS),a.type==="pattern"&&r.object.equals(a.predicate)&&o.push(s.boundOP),r.object.equals(a.object)&&o.push(s.boundOO),r.object.equals(a.graph)&&o.push(s.boundOG)),r.graph.termType==="Variable"?(r.graph.equals(a.subject)&&o.push(s.unboundGS),a.type==="pattern"&&r.graph.equals(a.predicate)&&o.push(s.unboundGP),r.graph.equals(a.object)&&o.push(s.unboundGO),r.graph.equals(a.graph)&&o.push(s.unboundGG)):(r.graph.equals(a.subject)&&o.push(s.boundGS),a.type==="pattern"&&r.graph.equals(a.predicate)&&o.push(s.boundGP),r.graph.equals(a.object)&&o.push(s.boundGO),r.graph.equals(a.graph)&&o.push(s.boundGG)),o}static getOperationsPairwiseJoinCost(r,a){let o=Ls.MAX_PAIRWISE_COST;for(const l of Ls.getJoinTypes(r,a))switch(l){case s.boundSS:o-=2*2;break;case s.boundSP:o-=3*2;break;case s.boundSO:o-=1*2;break;case s.boundSG:o-=3*2;break;case s.boundPS:o-=3*2;break;case s.boundPP:return 1;case s.boundPO:o-=3*2;break;case s.boundPG:o-=3*2;break;case s.boundOS:o-=1*2;break;case s.boundOP:o-=3*2;break;case s.boundOO:o-=1*2;break;case s.boundOG:o-=3*2;break;case s.boundGS:o-=3*2;break;case s.boundGP:o-=3*2;break;case s.boundGO:o-=3*2;break;case s.boundGG:o-=3*2;break;case s.unboundSS:o-=2;break;case s.unboundSP:o-=3;break;case s.unboundSO:o-=1;break;case s.unboundSG:o-=3;break;case s.unboundPS:o-=3;break;case s.unboundPP:o-=3;break;case s.unboundPO:o-=3;break;case s.unboundPG:o-=3;break;case s.unboundOS:o-=1;break;case s.unboundOP:o-=3;break;case s.unboundOO:o-=1;break;case s.unboundOG:o-=3;break;case s.unboundGS:o-=3;break;case s.unboundGP:o-=3;break;case s.unboundGO:o-=3;break;case s.unboundGG:o-=3;break}return o/Ls.MAX_PAIRWISE_COST}static getOperationsJoinCost(r){const a=[];for(const c of r)e.Util.recurseOperation(c,{[e.Algebra.types.PATTERN](d){return a.push(d),!1},[e.Algebra.types.PATH](d){return a.push(d),!1}});let o=0,l=0;for(const c of a)for(const d of a)c!==d&&(o+=Ls.getOperationsPairwiseJoinCost(c,d),l++);return l===0?1:o/l*a.reduce((c,d)=>c*Ls.getPatternCost(d),1)}async run(r){return r.entries.length<=1?{selectivity:1}:{selectivity:Ls.getOperationsJoinCost(r.entries.map(a=>a.operation))}}};Ss.ActorRdfJoinSelectivityVariableCounting=u,u.MAX_PAIRWISE_COST=41*2;var s;return function(n){n[n.boundSS=0]="boundSS",n[n.boundSP=1]="boundSP",n[n.boundSO=2]="boundSO",n[n.boundSG=3]="boundSG",n[n.boundPS=4]="boundPS",n[n.boundPP=5]="boundPP",n[n.boundPO=6]="boundPO",n[n.boundPG=7]="boundPG",n[n.boundOS=8]="boundOS",n[n.boundOP=9]="boundOP",n[n.boundOO=10]="boundOO",n[n.boundOG=11]="boundOG",n[n.boundGS=12]="boundGS",n[n.boundGP=13]="boundGP",n[n.boundGO=14]="boundGO",n[n.boundGG=15]="boundGG",n[n.unboundSS=16]="unboundSS",n[n.unboundSP=17]="unboundSP",n[n.unboundSO=18]="unboundSO",n[n.unboundSG=19]="unboundSG",n[n.unboundPS=20]="unboundPS",n[n.unboundPP=21]="unboundPP",n[n.unboundPO=22]="unboundPO",n[n.unboundPG=23]="unboundPG",n[n.unboundOS=24]="unboundOS",n[n.unboundOP=25]="unboundOP",n[n.unboundOO=26]="unboundOO",n[n.unboundOG=27]="unboundOG",n[n.unboundGS=28]="unboundGS",n[n.unboundGP=29]="unboundGP",n[n.unboundGO=30]="unboundGO",n[n.unboundGG=31]="unboundGG"}(s||(Ss.JoinTypes=s={})),Ss}var CP;function wW(){return CP||(CP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(vW(),t)}(av)),av}var ov={},ll={},uv={},dl={},jP;function SW(){if(jP)return dl;jP=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.ActorRdfMetadata=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return dl.ActorRdfMetadata=e,dl}var LP;function Xq(){return LP||(LP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(SW(),t)}(uv)),uv}var MP;function TW(){if(MP)return ll;MP=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.ActorRdfMetadataPrimaryTopic=void 0;const t=Xq(),e=Wt();let u=class extends t.ActorRdfMetadata{constructor(n){super(n)}async test(n){if(n.triples)throw new Error("This actor only supports non-triple quad streams.");return!0}async run(n){const r=new e.Readable({objectMode:!0}),a=new e.Readable({objectMode:!0}),o=()=>{r._read=a._read=()=>{},n.quads.on("error",h=>{r.emit("error",h),a.emit("error",h)});const l={};let c;const d={};n.quads.on("data",h=>{h.predicate.value==="http://rdfs.org/ns/void#subset"&&h.object.value===n.url?c=h.subject.value:h.predicate.value==="http://xmlns.com/foaf/0.1/primaryTopic"&&(d[h.object.value]=h.subject.value);let f=l[h.graph.value];f||(f=l[h.graph.value]=[]),f.push(h)}),n.quads.on("end",()=>{const h=c?d[c]:void 0;for(const f in l)if(f===h){for(const p of l[f])a.push(p);if(this.metadataToData)for(const p of l[f])r.push(p)}else{for(const p of l[f])r.push(p);if(!h&&this.dataToMetadataOnInvalidMetadataGraph)for(const p of l[f])a.push(p)}r.push(null),a.push(null)})};return r._read=a._read=()=>{o()},{data:r,metadata:a}}};return ll.ActorRdfMetadataPrimaryTopic=u,ll}var FP;function AW(){return FP||(FP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(TW(),t)}(ov)),ov}var cv={},fl={},qP;function EW(){if(qP)return fl;qP=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.ActorRdfMetadataAll=void 0;const t=Xq(),e=Wt();let u=class extends t.ActorRdfMetadata{constructor(n){super(n)}async test(n){return!0}async run(n){const r=new e.Readable({objectMode:!0}),a=new e.Readable({objectMode:!0});n.quads.on("error",l=>{r.emit("error",l),a.emit("error",l)}),n.quads.on("end",()=>{r.push(null),a.push(null)});const o=r._read=a._read=l=>{for(;l>0;){const c=n.quads.read();if(c===null)return n.quads.once("readable",()=>o(l));l--,r.push(c),a.push(c)}};return{data:r,metadata:a}}};return fl.ActorRdfMetadataAll=u,fl}var BP;function OW(){return BP||(BP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(EW(),t)}(cv)),cv}var lv={},hl={},dv={},pl={},UP;function RW(){if(UP)return pl;UP=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.ActorRdfMetadataAccumulate=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return pl.ActorRdfMetadataAccumulate=e,pl}var QP;function Yb(){return QP||(QP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(RW(),t)}(dv)),dv}var HP;function xW(){if(HP)return hl;HP=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.ActorRdfMetadataAccumulateCanContainUndefs=void 0;const t=Yb();let e=class extends t.ActorRdfMetadataAccumulate{constructor(s){super(s)}async test(s){return!0}async run(s){if(s.mode==="initialize")return{metadata:{canContainUndefs:!1}};let n=s.accumulatedMetadata.canContainUndefs;return s.appendingMetadata.canContainUndefs&&(n=!0),{metadata:{canContainUndefs:n}}}};return hl.ActorRdfMetadataAccumulateCanContainUndefs=e,hl}var $P;function IW(){return $P||($P=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(xW(),t)}(lv)),lv}var fv={},yl={},VP;function PW(){if(VP)return yl;VP=1,Object.defineProperty(yl,"__esModule",{value:!0}),yl.ActorRdfMetadataAccumulateCardinality=void 0;const t=Yb();let e=class extends t.ActorRdfMetadataAccumulate{constructor(s){super(s)}async test(s){return!0}async run(s){if(s.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0}}};const n={...s.accumulatedMetadata.cardinality};if(n.dataset)if(s.appendingMetadata.cardinality.dataset){if(n.dataset!==s.appendingMetadata.cardinality.dataset&&s.appendingMetadata.subsetOf===n.dataset)return{metadata:{cardinality:s.appendingMetadata.cardinality}};if(n.dataset===s.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:n}};delete n.dataset}else return{metadata:{cardinality:n}};return!s.appendingMetadata.cardinality||!Number.isFinite(s.appendingMetadata.cardinality.value)?(n.type="estimate",n.value=Number.POSITIVE_INFINITY):(s.appendingMetadata.cardinality.type==="estimate"&&(n.type="estimate"),n.value+=s.appendingMetadata.cardinality.value),{metadata:{cardinality:n}}}};return yl.ActorRdfMetadataAccumulateCardinality=e,yl}var kP;function DW(){return kP||(kP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(PW(),t)}(fv)),fv}var hv={},bl={},zP;function NW(){if(zP)return bl;zP=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.ActorRdfMetadataAccumulatePageSize=void 0;const t=Yb();let e=class extends t.ActorRdfMetadataAccumulate{constructor(s){super(s)}async test(s){return!0}async run(s){return s.mode==="initialize"?{metadata:{}}:{metadata:{..."pageSize"in s.accumulatedMetadata||"pageSize"in s.appendingMetadata?{pageSize:(s.accumulatedMetadata.pageSize??0)+(s.appendingMetadata.pageSize??0)}:{}}}}};return bl.ActorRdfMetadataAccumulatePageSize=e,bl}var GP;function CW(){return GP||(GP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(NW(),t)}(hv)),hv}var pv={},ml={},WP;function jW(){if(WP)return ml;WP=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.ActorRdfMetadataAccumulateRequestTime=void 0;const t=Yb();let e=class extends t.ActorRdfMetadataAccumulate{constructor(s){super(s)}async test(s){return!0}async run(s){return s.mode==="initialize"?{metadata:{}}:{metadata:{..."requestTime"in s.accumulatedMetadata||"requestTime"in s.appendingMetadata?{requestTime:(s.accumulatedMetadata.requestTime??0)+(s.appendingMetadata.requestTime??0)}:{}}}}};return ml.ActorRdfMetadataAccumulateRequestTime=e,ml}var JP;function LW(){return JP||(JP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(jW(),t)}(pv)),pv}var yv={},gl={},bv={},_l={},XP;function MW(){if(XP)return _l;XP=1,Object.defineProperty(_l,"__esModule",{value:!0}),_l.ActorRdfMetadataExtract=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return _l.ActorRdfMetadataExtract=e,_l}var KP;function ns(){return KP||(KP=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(MW(),t)}(bv)),bv}var mv={exports:{}},YP;function FW(){return YP||(YP=1,function(t){(function(e){var u=function(){function y(b){this.options=b}return y.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},y}(),s=function(){function y(D){return Object.prototype.toString.apply(D)==="[object Array]"}function b(D){return Object.prototype.toString.apply(D)==="[object String]"}function g(D){return Object.prototype.toString.apply(D)==="[object Number]"}function m(D){return Object.prototype.toString.apply(D)==="[object Boolean]"}function v(D,L){var O="",E=!0,P;for(P=0;P<D.length;P+=1)E?E=!1:O+=L,O+=D[P];return O}function _(D,L){for(var O=[],E=0;E<D.length;E+=1)O.push(L(D[E]));return O}function w(D,L){for(var O=[],E=0;E<D.length;E+=1)L(D[E])&&O.push(D[E]);return O}function S(D){if(typeof D!="object"||D===null)return D;Object.freeze(D);var L,O;for(O in D)D.hasOwnProperty(O)&&(L=D[O],typeof L=="object"&&A(L));return D}function A(D){return typeof Object.freeze=="function"?S(D):D}return{isArray:y,isString:b,isNumber:g,isBoolean:m,join:v,map:_,filter:w,deepFreeze:A}}(),n=function(){function y(m){return m>="a"&&m<="z"||m>="A"&&m<="Z"}function b(m){return m>="0"&&m<="9"}function g(m){return b(m)||m>="a"&&m<="f"||m>="A"&&m<="F"}return{isAlpha:y,isDigit:b,isHexDigit:g}}(),r=function(){var y={encode:function(w){return unescape(encodeURIComponent(w))},numBytes:function(w){return w<=127?1:194<=w&&w<=223?2:224<=w&&w<=239?3:240<=w&&w<=244?4:0},isValidFollowingCharCode:function(w){return 128<=w&&w<=191}};function b(w){var S="",A=y.encode(w),D,L;for(L=0;L<A.length;L+=1)D=A.charCodeAt(L),S+="%"+(D<16?"0":"")+D.toString(16).toUpperCase();return S}function g(w,S){return w.charAt(S)==="%"&&n.isHexDigit(w.charAt(S+1))&&n.isHexDigit(w.charAt(S+2))}function m(w,S){return parseInt(w.substr(S,2),16)}function v(w){if(!g(w,0))return!1;var S=m(w,1),A=y.numBytes(S);if(A===0)return!1;for(var D=1;D<A;D+=1)if(!g(w,3*D)||!y.isValidFollowingCharCode(m(w,3*D+1)))return!1;return!0}function _(w,S){var A=w.charAt(S);if(!g(w,S))return A;var D=m(w,S+1),L=y.numBytes(D);if(L===0)return A;for(var O=1;O<L;O+=1)if(!g(w,S+3*O)||!y.isValidFollowingCharCode(m(w,S+3*O+1)))return A;return w.substr(S,3*L)}return{encodeCharacter:b,isPctEncoded:v,pctCharAt:_}}(),a=function(){function y(m){return n.isAlpha(m)||n.isDigit(m)||m==="_"||r.isPctEncoded(m)}function b(m){return n.isAlpha(m)||n.isDigit(m)||m==="-"||m==="."||m==="_"||m==="~"}function g(m){return m===":"||m==="/"||m==="?"||m==="#"||m==="["||m==="]"||m==="@"||m==="!"||m==="$"||m==="&"||m==="("||m===")"||m==="*"||m==="+"||m===","||m===";"||m==="="||m==="'"}return{isVarchar:y,isUnreserved:b,isReserved:g}}(),o=function(){function y(v,_){var w="",S,A="";for((typeof v=="number"||typeof v=="boolean")&&(v=v.toString()),S=0;S<v.length;S+=A.length)A=v.charAt(S),w+=a.isUnreserved(A)||_&&a.isReserved(A)?A:r.encodeCharacter(A);return w}function b(v){return y(v,!0)}function g(v,_){var w=r.pctCharAt(v,_);return w.length>1||a.isReserved(w)||a.isUnreserved(w)?w:r.encodeCharacter(w)}function m(v){var _="",w,S="";for(w=0;w<v.length;w+=S.length)S=r.pctCharAt(v,w),S.length>1?_+=S:_+=a.isReserved(S)||a.isUnreserved(S)?S:r.encodeCharacter(S);return _}return{encode:y,encodePassReserved:b,encodeLiteral:m,encodeLiteralCharacter:g}}(),l=function(){var y={};function b(g){y[g]={symbol:g,separator:g==="?"?"&":g===""||g==="+"||g==="#"?",":g,named:g===";"||g==="&"||g==="?",ifEmpty:g==="&"||g==="?"?"=":"",first:g==="+"?"":g,encode:g==="+"||g==="#"?o.encodePassReserved:o.encode,toString:function(){return this.symbol}}}return b(""),b("+"),b("#"),b("."),b("/"),b(";"),b("?"),b("&"),{valueOf:function(g){return y[g]?y[g]:"=,!@|".indexOf(g)>=0?null:y[""]}}}();function c(y){var b;if(y==null)return!1;if(s.isArray(y))return y.length>0;if(typeof y=="string"||typeof y=="number"||typeof y=="boolean")return!0;for(b in y)if(y.hasOwnProperty(b)&&c(y[b]))return!0;return!1}var d=function(){function y(b){this.literal=o.encodeLiteral(b)}return y.prototype.expand=function(){return this.literal},y.prototype.toString=y.prototype.expand,y}(),h=function(){function y(g){var m,v=[],_=null,w=null,S=null,A,D="";function L(){var E=g.substring(w,A);if(E.length===0)throw new u({expressionText:g,message:"a varname must be specified",position:A});_={varname:E,exploded:!1,maxLength:null},w=null}function O(){if(S===A)throw new u({expressionText:g,message:"after a ':' you have to specify the length",position:A});_.maxLength=parseInt(g.substring(S,A),10),S=null}for(m=function(E){var P=l.valueOf(E);if(P===null)throw new u({expressionText:g,message:"illegal use of reserved operator",position:A,operator:E});return P}(g.charAt(0)),A=m.symbol.length,w=A;A<g.length;A+=D.length){if(D=r.pctCharAt(g,A),w!==null){if(D==="."){if(w===A)throw new u({expressionText:g,message:"a varname MUST NOT start with a dot",position:A});continue}if(a.isVarchar(D))continue;L()}if(S!==null){if(A===S&&D==="0")throw new u({expressionText:g,message:"A :prefix must not start with digit 0",position:A});if(n.isDigit(D)){if(A-S>=4)throw new u({expressionText:g,message:"A :prefix must have max 4 digits",position:A});continue}O()}if(D===":"){if(_.maxLength!==null)throw new u({expressionText:g,message:"only one :maxLength is allowed per varspec",position:A});if(_.exploded)throw new u({expressionText:g,message:"an exploeded varspec MUST NOT be varspeced",position:A});S=A+1;continue}if(D==="*"){if(_===null)throw new u({expressionText:g,message:"exploded without varspec",position:A});if(_.exploded)throw new u({expressionText:g,message:"exploded twice",position:A});if(_.maxLength)throw new u({expressionText:g,message:"an explode (*) MUST NOT follow to a prefix",position:A});_.exploded=!0;continue}if(D===","){v.push(_),_=null,w=A+1;continue}throw new u({expressionText:g,message:"illegal character",character:D,position:A})}return w!==null&&L(),S!==null&&O(),v.push(_),new f(g,m,v)}function b(g){var m,v,_=[],w=null,S=0;for(m=0;m<g.length;m+=1){if(v=g.charAt(m),S!==null){if(v==="}")throw new u({templateText:g,message:"unopened brace closed",position:m});v==="{"&&(S<m&&_.push(new d(g.substring(S,m))),S=null,w=m);continue}if(w!==null){if(v==="{")throw new u({templateText:g,message:"brace already opened",position:m});if(v==="}"){if(w+1===m)throw new u({templateText:g,message:"empty braces",position:w});try{_.push(y(g.substring(w+1,m)))}catch(A){throw A.prototype===u.prototype?new u({templateText:g,message:A.options.message,position:w+A.options.position,details:A.options}):A}w=null,S=m+1}continue}throw new Error("reached unreachable code")}if(w!==null)throw new u({templateText:g,message:"unclosed brace",position:w});return S<g.length&&_.push(new d(g.substr(S))),new p(g,_)}return b}(),f=function(){function y(D){return JSON&&JSON.stringify?JSON.stringify(D):D}function b(D){if(!c(D))return!0;if(s.isString(D))return D==="";if(s.isNumber(D)||s.isBoolean(D))return!1;if(s.isArray(D))return D.length===0;for(var L in D)if(D.hasOwnProperty(L))return!1;return!0}function g(D){var L=[],O;for(O in D)D.hasOwnProperty(O)&&L.push({name:O,value:D[O]});return L}function m(D,L,O){this.templateText=D,this.operator=L,this.varspecs=O}m.prototype.toString=function(){return this.templateText};function v(D,L,O){var E="";if(O=O.toString(),L.named){if(E+=o.encodeLiteral(D.varname),O==="")return E+=L.ifEmpty,E;E+="="}return D.maxLength!==null&&(O=O.substr(0,D.maxLength)),E+=L.encode(O),E}function _(D){return c(D.value)}function w(D,L,O){var E=[],P="";if(L.named){if(P+=o.encodeLiteral(D.varname),b(O))return P+=L.ifEmpty,P;P+="="}return s.isArray(O)?(E=O,E=s.filter(E,c),E=s.map(E,L.encode),P+=s.join(E,",")):(E=g(O),E=s.filter(E,_),E=s.map(E,function(M){return L.encode(M.name)+","+L.encode(M.value)}),P+=s.join(E,",")),P}function S(D,L,O){var E=s.isArray(O),P=[];return E?(P=O,P=s.filter(P,c),P=s.map(P,function(M){var U=o.encodeLiteral(D.varname);return b(M)?U+=L.ifEmpty:U+="="+L.encode(M),U})):(P=g(O),P=s.filter(P,_),P=s.map(P,function(M){var U=o.encodeLiteral(M.name);return b(M.value)?U+=L.ifEmpty:U+="="+L.encode(M.value),U})),s.join(P,L.separator)}function A(D,L){var O=[],E="";return s.isArray(L)?(O=L,O=s.filter(O,c),O=s.map(O,D.encode),E+=s.join(O,D.separator)):(O=g(L),O=s.filter(O,function(P){return c(P.value)}),O=s.map(O,function(P){return D.encode(P.name)+"="+D.encode(P.value)}),E+=s.join(O,D.separator)),E}return m.prototype.expand=function(D){var L=[],O,E,P,M=this.operator;for(O=0;O<this.varspecs.length;O+=1)if(E=this.varspecs[O],P=D[E.varname],P!=null)if(E.exploded,s.isArray(P),typeof P=="string"||typeof P=="number"||typeof P=="boolean")L.push(v(E,M,P));else{if(E.maxLength&&c(P))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+y(P));E.exploded?c(P)&&(M.named?L.push(S(E,M,P)):L.push(A(M,P))):(M.named||!b(P))&&L.push(w(E,M,P))}return L.length===0?"":M.first+s.join(L,M.separator)},m}(),p=function(){function y(b,g){this.templateText=b,this.expressions=g,s.deepFreeze(this)}return y.prototype.toString=function(){return this.templateText},y.prototype.expand=function(b){var g,m="";for(g=0;g<this.expressions.length;g+=1)m+=this.expressions[g].expand(b);return m},y.parse=h,y.UriTemplateError=u,y}();e(p)})(function(e){t.exports=e})}(mv)),mv.exports}var ZP;function qW(){if(ZP)return gl;ZP=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.ActorRdfMetadataExtractHydraControls=void 0;const t=ns(),e=FW();let u=class z1 extends t.ActorRdfMetadataExtract{constructor(n){super(n),this.parsedUriTemplateCache={}}async test(n){return!0}getLinks(n,r){return Object.fromEntries(z1.LINK_TYPES.map(a=>{const o=r[a]||r[`${a}Page`],l=o&&o[n];return[a,l&&l.length>0?[l[0]]:[]]}))}parseUriTemplateCached(n){const r=this.parsedUriTemplateCache[n];return r||(this.parsedUriTemplateCache[n]=(0,e.parse)(n))}getSearchForms(n){const r=n.search,a=[];if(r)for(const o in r)for(const l of r[o]){const c=(n.template||{})[l]||[];if(c.length!==1)throw new Error(`Expected 1 hydra:template for ${l}`);const d=c[0],h=this.parseUriTemplateCached(d),f=Object.fromEntries(((n.mapping||{})[l]||[]).map(y=>{const b=((n.variable||{})[y]||[])[0],g=((n.property||{})[y]||[])[0];if(!b)throw new Error(`Expected a hydra:variable for ${y}`);if(!g)throw new Error(`Expected a hydra:property for ${y}`);return[g,b]})),p=y=>h.expand(Object.fromEntries(Object.keys(y).map(b=>[f[b],y[b]])));a.push({dataset:o,template:d,mappings:f,getUri:p})}return{values:a}}getHydraProperties(n){return new Promise((r,a)=>{n.on("error",a);const o={};n.on("data",l=>{if(l.predicate.value.startsWith(z1.HYDRA)){const c=l.predicate.value.slice(z1.HYDRA.length),d=o[c]||(o[c]={});(d[l.subject.value]||(d[l.subject.value]=[])).push(l.object.value)}}),n.on("end",()=>r(o))})}async run(n){const r={},a=await this.getHydraProperties(n.metadata);return Object.assign(r,this.getLinks(n.url,a)),r.searchForms=this.getSearchForms(a),{metadata:r}}};return gl.ActorRdfMetadataExtractHydraControls=u,u.HYDRA="http://www.w3.org/ns/hydra/core#",u.LINK_TYPES=["first","next","previous","last"],gl}var eD;function BW(){return eD||(eD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(qW(),t)}(yv)),yv}var gv={},vl={},tD;function UW(){if(tD)return vl;tD=1,Object.defineProperty(vl,"__esModule",{value:!0}),vl.ActorRdfMetadataExtractHydraCount=void 0;const t=ns();let e=class extends t.ActorRdfMetadataExtract{constructor(s){super(s)}async test(s){return!0}run(s){return new Promise((n,r)=>{s.metadata.on("error",r),s.metadata.on("data",a=>{this.predicates.includes(a.predicate.value)&&n({metadata:{cardinality:{type:"estimate",value:Number.parseInt(a.object.value,10),dataset:a.subject.value}}})}),s.metadata.on("end",()=>{n({metadata:{cardinality:{type:"estimate",value:0}}})})})}};return vl.ActorRdfMetadataExtractHydraCount=e,vl}var rD;function QW(){return rD||(rD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(UW(),t)}(gv)),gv}var _v={},wl={},nD;function HW(){if(nD)return wl;nD=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.ActorRdfMetadataExtractHydraPagesize=void 0;const t=ns();let e=class extends t.ActorRdfMetadataExtract{constructor(s){super(s)}async test(s){return!0}async run(s){return new Promise((n,r)=>{s.metadata.on("error",r),s.metadata.on("data",a=>{this.predicates.includes(a.predicate.value)&&n({metadata:{pageSize:Number.parseInt(a.object.value,10)}})}),s.metadata.on("end",()=>{n({metadata:{}})})})}};return wl.ActorRdfMetadataExtractHydraPagesize=e,wl}var iD;function $W(){return iD||(iD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(HW(),t)}(_v)),_v}var vv={},Sl={},aD;function VW(){if(aD)return Sl;aD=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.ActorRdfMetadataExtractRequestTime=void 0;const t=ns();let e=class extends t.ActorRdfMetadataExtract{constructor(s){super(s)}async test(s){return!0}async run(s){return{metadata:{requestTime:s.requestTime}}}};return Sl.ActorRdfMetadataExtractRequestTime=e,Sl}var sD;function kW(){return sD||(sD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(VW(),t)}(vv)),vv}var wv={},Tl={},oD;function zW(){if(oD)return Tl;oD=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.ActorRdfMetadataExtractAllowHttpMethods=void 0;const t=ns();let e=class extends t.ActorRdfMetadataExtract{constructor(s){super(s)}async test(s){return!0}async run(s){var r,a;const n={};return(r=s.headers)!=null&&r.get("allow")&&(n.allowHttpMethods=(a=s.headers.get("allow"))==null?void 0:a.split(/, */u)),{metadata:n}}};return Tl.ActorRdfMetadataExtractAllowHttpMethods=e,Tl}var uD;function GW(){return uD||(uD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(zW(),t)}(wv)),wv}var Sv={},Al={},cD;function WW(){if(cD)return Al;cD=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.ActorRdfMetadataExtractPutAccepted=void 0;const t=ns();let e=class extends t.ActorRdfMetadataExtract{constructor(s){super(s)}async test(s){return!0}async run(s){var r,a;const n={};return(r=s.headers)!=null&&r.get("accept-put")&&(n.putAccepted=(a=s.headers.get("accept-put"))==null?void 0:a.split(/, */u)),{metadata:n}}};return Al.ActorRdfMetadataExtractPutAccepted=e,Al}var lD;function JW(){return lD||(lD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(WW(),t)}(Sv)),Sv}var Tv={},El={},dD;function XW(){if(dD)return El;dD=1,Object.defineProperty(El,"__esModule",{value:!0}),El.ActorRdfMetadataExtractPatchSparqlUpdate=void 0;const t=ns();let e=class extends t.ActorRdfMetadataExtract{constructor(s){super(s)}async test(s){return!0}async run(s){var r,a,o,l;const n={};return(((a=(r=s.headers)==null?void 0:r.get("accept-patch"))==null?void 0:a.includes("application/sparql-update"))??((l=(o=s.headers)==null?void 0:o.get("ms-author-via"))==null?void 0:l.includes("SPARQL")))&&(n.patchSparqlUpdate=!0),{metadata:n}}};return El.ActorRdfMetadataExtractPatchSparqlUpdate=e,El}var fD;function KW(){return fD||(fD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(XW(),t)}(Tv)),Tv}var Av={},Ol={},hD;function YW(){if(hD)return Ol;hD=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.ActorRdfMetadataExtractSparqlService=void 0;const t=ns(),e=Pi();let u=class extends t.ActorRdfMetadataExtract{constructor(n){super(n)}async test(n){return!0}async run(n){return new Promise((r,a)=>{n.metadata.on("error",a);const o={};n.metadata.on("data",l=>{l.predicate.value==="http://www.w3.org/ns/sparql-service-description#endpoint"&&(l.subject.termType==="BlankNode"||l.subject.value===n.url)?(o.sparqlService=l.object.termType==="Literal"?(0,e.resolve)(l.object.value,n.url):l.object.value,this.inferHttpsEndpoint&&n.url.startsWith("https")&&!o.sparqlService.startsWith("https")&&(o.sparqlService=o.sparqlService.replace("http:","https:"))):l.predicate.value==="http://www.w3.org/ns/sparql-service-description#defaultGraph"&&(o.defaultGraph=l.object.value)}),n.metadata.on("end",()=>{r({metadata:o})})})}};return Ol.ActorRdfMetadataExtractSparqlService=u,Ol}var pD;function ZW(){return pD||(pD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(YW(),t)}(Av)),Av}var Ev={},Rl={},Ov={},xl={},yD;function eJ(){if(yD)return xl;yD=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.ActorRdfParse=void 0;const t=iu();let e=class extends t.ActorAbstractMediaTyped{constructor(s){super(s)}};return xl.ActorRdfParse=e,xl}var Il={},bD;function tJ(){if(bD)return Il;bD=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.ActorRdfParseFixedMediaTypes=void 0;const t=iu();let e=class extends t.ActorAbstractMediaTypedFixed{constructor(s){super(s)}async testHandleChecked(s){return!0}};return Il.ActorRdfParseFixedMediaTypes=e,Il}var mD;function su(){return mD||(mD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(eJ(),t),u(tJ(),t)}(Ov)),Ov}var rJ=Wi();/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let gD;var nJ=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:I):t=>(gD||(gD=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));const iJ=R$(nJ),Pl="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Dl="http://www.w3.org/2001/XMLSchema#",Rv="http://www.w3.org/2000/10/swap/",ln={xsd:{decimal:`${Dl}decimal`,boolean:`${Dl}boolean`,double:`${Dl}double`,integer:`${Dl}integer`,string:`${Dl}string`},rdf:{type:`${Pl}type`,nil:`${Pl}nil`,first:`${Pl}first`,rest:`${Pl}rest`,langString:`${Pl}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Rv}reify#forSome`,forAll:`${Rv}reify#forAll`},log:{implies:`${Rv}log#implies`}},{xsd:b1}=ln,aJ=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,_D={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},sJ=/[\x00-\x20<>\\"\{\}\|\^\`]/,oJ={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},uJ=/$0^/;class tA{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const u in this)!(u in oJ)&&this[u]instanceof RegExp&&(this[u]=uJ)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,u){let s=this._input,n=s.length;for(;;){let o,l;for(;o=this._newline.exec(s);)this.comments&&(l=this._comment.exec(o[0]))&&r("comment",l[1],"",this._line,o[0].length),s=s.substr(o[0].length,s.length),n=s.length,this._line++;if(!o&&(o=this._whitespace.exec(s))&&(s=s.substr(o[0].length,s.length)),this._endOfFile.test(s))return u&&(this.comments&&(l=this._comment.exec(s))&&r("comment",l[1],"",this._line,s.length),s=null,r("eof","","",this._line,0)),this._input=s;const c=this._line,d=s[0];let h="",f="",p="",y=null,b=0,g=!1;switch(d){case"^":if(s.length<3)break;if(s[1]==="^"){if(this._previousMarker="^^",s=s.substr(2),s[0]!=="<"){g=!0;break}}else{this._n3Mode&&(b=1,h="^");break}case"<":if(y=this._unescapedIri.exec(s))h="IRI",f=y[1];else if(y=this._iri.exec(s)){if(f=this._unescape(y[1]),f===null||sJ.test(f))return a(this);h="IRI"}else s.length>1&&s[1]==="<"?(h="<<",b=2):this._n3Mode&&s.length>1&&s[1]==="="&&(h="inverse",b=2,f=">");break;case">":s.length>1&&s[1]===">"&&(h=">>",b=2);break;case"_":((y=this._blank.exec(s))||u&&(y=this._blank.exec(`${s} `)))&&(h="blank",p="_",f=y[1]);break;case'"':if(y=this._simpleQuotedString.exec(s))f=y[1];else if({value:f,matchLength:b}=this._parseLiteral(s),f===null)return a(this);(y!==null||b!==0)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(y=this._simpleApostropheString.exec(s))f=y[1];else if({value:f,matchLength:b}=this._parseLiteral(s),f===null)return a(this);(y!==null||b!==0)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(y=this._variable.exec(s))&&(h="var",f=y[0]);break;case"@":this._previousMarker==="literal"&&(y=this._langcode.exec(s))?(h="langcode",f=y[1]):(y=this._keyword.exec(s))&&(h=y[0]);break;case".":if(s.length===1?u:s[1]<"0"||s[1]>"9"){h=".",b=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(y=this._number.exec(s)||u&&(y=this._number.exec(`${s} `)))&&(h="literal",f=y[0],p=typeof y[1]=="string"?b1.double:typeof y[2]=="string"?b1.decimal:b1.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(y=this._sparqlKeyword.exec(s))?h=y[0].toUpperCase():g=!0;break;case"f":case"t":(y=this._boolean.exec(s))?(h="literal",f=y[0],p=b1.boolean):g=!0;break;case"a":(y=this._shortPredicates.exec(s))?(h="abbreviation",f="a"):g=!0;break;case"=":this._n3Mode&&s.length>1&&(h="abbreviation",s[1]!==">"?(b=1,f="="):(b=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(b=1,h=d);break;case"{":!this._lineMode&&s.length>=2&&(s[1]==="|"?(h="{|",b=2):(h=d,b=1));break;case"|":s.length>=2&&s[1]==="}"&&(h="|}",b=2);break;default:g=!0}if(g&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(y=this._prefix.exec(s))?(h="prefix",f=y[1]||""):((y=this._prefixed.exec(s))||u&&(y=this._prefixed.exec(`${s} `)))&&(h="prefixed",p=y[1]||"",f=this._unescape(y[2]))),this._previousMarker==="^^")switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return u||!/^'''|^"""/.test(s)&&/\n|\r/.test(s)?a(this):this._input=s;const m=b||y[0].length,v=r(h,f,p,c,m);this.previousToken=v,this._previousMarker=h,s=s.substr(m,s.length)}function r(o,l,c,d,h){const f=s?n-s.length:n,p=f+h,y={type:o,value:l,prefix:c,line:d,start:f,end:p};return e(null,y),y}function a(o){e(o._syntaxError(/^\S*/.exec(s)[0]))}}_unescape(e){let u=!1;const s=e.replace(aJ,(n,r,a,o)=>{if(typeof r=="string")return String.fromCharCode(Number.parseInt(r,16));if(typeof a=="string"){let l=Number.parseInt(a,16);return l<=65535?String.fromCharCode(Number.parseInt(a,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(l&1023))}return o in _D?_D[o]:(u=!0,"")});return u?null:s}_parseLiteral(e){if(e.length>=3){const u=e.match(/^(?:"""|"|'''|'|)/)[0],s=u.length;let n=Math.max(this._literalClosingPos,s);for(;(n=e.indexOf(u,n))>0;){let r=0;for(;e[n-r-1]==="\\";)r++;if(r%2===0){const a=e.substring(s,n),o=a.split(/\r\n|\r|\n/).length-1,l=n+s;if(s===1&&o!==0||s===3&&this._lineMode)break;return this._line+=o,{value:this._unescape(a),matchLength:l}}n++}this._literalClosingPos=e.length-s+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const u=new Error(`Unexpected "${e}" on line ${this._line}.`);return u.context={token:void 0,line:this._line,previousToken:this.previousToken},u}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,u){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof u=="function")iJ(()=>this._tokenizeToEnd(u,!0));else{const s=[];let n;if(this._tokenizeToEnd((r,a)=>r?n=r:s.push(a),!0),n)throw n;return s}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",s=>{this._input!==null&&s.length!==0&&(this._pendingBuffer&&(s=rJ.Buffer.concat([this._pendingBuffer,s]),this._pendingBuffer=null),s[s.length-1]&128?this._pendingBuffer=s:(typeof this._input>"u"?this._input=this._readStartingBom(typeof s=="string"?s:s.toString()):this._input+=s,this._tokenizeToEnd(u,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(u,!0)}),e.on("error",u)}}const{rdf:cJ,xsd:Hs}=ln;let Cy,lJ=0;const _3={namedNode:dJ,blankNode:fJ,variable:pJ,literal:hJ,defaultGraph:yJ,quad:vD,triple:vD},wa=_3;let Ji=class Kq{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Kq?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}};class Zb extends Ji{get termType(){return"NamedNode"}}class ka extends Ji{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let u=e.lastIndexOf('"')+1;return u<e.length&&e[u++]==="@"?e.substr(u).toLowerCase():""}get datatype(){return new Zb(this.datatypeString)}get datatypeString(){const e=this.id,u=e.lastIndexOf('"')+1,s=u<e.length?e[u]:"";return s==="^"?e.substr(u+2):s!=="@"?Hs.string:cJ.langString}equals(e){return e instanceof ka?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class rA extends Ji{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}let nA=class extends Ji{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}};class iA extends Ji{constructor(){return super(""),Cy||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}Cy=new iA;function Vs(t,e,u){if(e=e||_3,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===_3)return new ka(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const s=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,s-1),t[s+1]==="@"?t.substr(s+2):e.namedNode(t.substr(s+3)));case"[":t=JSON.parse(t);break;default:if(!u||!Array.isArray(t))return e.namedNode(t)}return e.quad(Vs(t[0],e,!0),Vs(t[1],e,!0),Vs(t[2],e,!0),t[3]&&Vs(t[3],e,!0))}function Qa(t,e){if(typeof t=="string")return t;if(t instanceof Ji&&t.termType!=="Quad")return t.id;if(!t)return Cy.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==Hs.string?`^^${t.datatype.value}`:""}`;case"Quad":const u=[Qa(t.subject,!0),Qa(t.predicate,!0),Qa(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&u.push(Qa(t.graph,!0)),e?u:JSON.stringify(u);default:throw new Error(`Unexpected termType: ${t.termType}`)}}class ny extends Ji{constructor(e,u,s,n){super(""),this._subject=e,this._predicate=u,this._object=s,this._graph=n||Cy}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function dJ(t){return new Zb(t)}function fJ(t){return new rA(t||`n3-${lJ++}`)}function hJ(t,e){if(typeof e=="string")return new ka(`"${t}"@${e.toLowerCase()}`);let u=e?e.value:"";return u===""&&(typeof t=="boolean"?u=Hs.boolean:typeof t=="number"&&(Number.isFinite(t)?u=Number.isInteger(t)?Hs.integer:Hs.double:(u=Hs.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),u===""||u===Hs.string?new ka(`"${t}"`):new ka(`"${t}"^^${u}`)}function pJ(t){return new nA(t)}function yJ(){return Cy}function vD(t,e,u,s){return new ny(t,e,u,s)}let wD=0;class em{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&Yq(this,e.factory);const u=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",s=/turtle/.test(u),n=/trig/.test(u),r=/triple/.test(u),a=/quad/.test(u),o=this._n3Mode=/n3/.test(u),l=r||a;(this._supportsNamedGraphs=!(s||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(s||n||r||o),this._supportsRDFStar=u===""||/star|\*$/.test(u),l&&(this._resolveRelativeIRI=c=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new tA({lineMode:l,n3:o}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){wD=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const u=e.indexOf("#");u>=0&&(e=e.substr(0,u)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,u,s,n,r){const a=this._n3Mode;this._contextStack.push({type:e,subject:s,predicate:n,object:r,graph:u,inverse:a?this._inversePredicate:!1,blankPrefix:a?this._prefixes._:"",quantified:a?this._quantified:null}),a&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,u){const s=this._contextStack.pop();if(!s||s.type!==e)return this._error(`Unexpected ${u.type}`,u);this._subject=s.subject,this._predicate=s.predicate,this._object=s.object,this._graph=s.graph,this._n3Mode&&(this._inversePredicate=s.inverse,this._prefixes._=s.blankPrefix,this._quantified=s.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,u){let s;switch(e.type){case"IRI":case"typeIRI":const n=this._resolveIRI(e.value);if(n===null)return this._error("Invalid IRI",e);s=this._namedNode(n);break;case"type":case"prefixed":const r=this._prefixes[e.prefix];if(r===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);s=this._namedNode(r+e.value);break;case"blank":s=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":s=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!u&&this._n3Mode&&s.id in this._quantified&&(s=this._quantified[s.id]),s}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const u=e.type;switch(u){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${u}`,e):(this._subject=null,u==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const u=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:u?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let u=null,s=null,n=this._readListItem;const r=this._subject,a=this._contextStack,o=a[a.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,s=this._blankNode(),this.RDF_FIRST,this._subject=u=this._blankNode()),n=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,s=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),a.length!==0&&a[a.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(n=this._readPredicate,this._subject===this.RDF_NIL)return n}else if(n=this._getContextEndReader(),this._object===this.RDF_NIL)return n;s=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,n=this._readListItemDataTypeOrLang):(u=this._literal(e.value,this._namedNode(e.prefix)),n=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((u=this._readEntity(e))===void 0)return}if(s===null&&(this._subject=s=this._blankNode()),r===null?o.predicate===null?o.subject=s:o.object=s:this._emit(r,this.RDF_REST,s,this._graph),u!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,s,this.RDF_FIRST,u),this._subject=u,this._predicate=null,this._getPathReader(this._readListItem);this._emit(s,this.RDF_FIRST,u,this._graph)}return n}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let u=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const s=this._readEntity(e);if(s===void 0)return;u=this._literal(this._literalValue,s),e=null;break;case"langcode":u=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:u}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,u){const s=this._completeLiteral(e);if(s)return this._object=s.literal,u&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),s.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(s.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let u,s=this._graph;const n=this._subject,r=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,u=this._contextStack.length?this._readSubject:this._readInTopContext,r&&(this._inversePredicate=!1);break;case";":u=this._readPredicate;break;case",":u=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const a=this._predicate,o=this._object;this._subject=this._quad(n,a,o,this.DEFAULTGRAPH),u=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,u=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(s=this._readEntity(e))!==void 0){u=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(n!==null){const a=this._predicate,o=this._object;r?this._emit(o,a,n,s):this._emit(n,a,o,s)}return u}_readBlankNodePunctuation(e){let u;switch(e.type){case";":u=this._readPredicate;break;case",":u=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),u}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const u=this._readEntity(e);return this._prefixes[this._prefix]=u.value,this._prefixCallback(this._prefix,u),this._readDeclarationPunctuation}_readBaseIRI(e){const u=e.type==="IRI"&&this._resolveIRI(e.value);return u?(this._setBase(u),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let u;switch(e.type){case"IRI":case"prefixed":if((u=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,u,this.QUANTIFIERS_GRAPH)):this._quantified[u.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const u=this._contextStack,s=u.length&&u[u.length-1];if(s&&s.type==="item"){const n=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,n,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let u,s;const n=this._blankNode();if((s=this._readEntity(e))!==void 0)return this._predicate===null?(u=this._subject,this._subject=n):(u=this._object,this._object=n),this._emit(u,s,n,this._graph),this._readPath}_readBackwardPath(e){const u=this._blankNode();let s,n;if((s=this._readEntity(e))!==void 0)return this._predicate===null?(n=this._subject,this._subject=u):(n=this._object,this._object=u),this._emit(u,s,n,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const u=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=u,this._readPredicate):(this._object=u,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,u,s,n){this._callback(null,this._quad(e,u,s,n||this.DEFAULTGRAPH))}_error(e,u){const s=new Error(`${e} on line ${u.line}.`);s.context={token:u,line:u.line,previousToken:this._lexer.previousToken},this._callback(s),this._callback=m1}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const u=e.length;let s="",n=-1,r=-1,a=0,o="/";for(;n<u;){switch(o){case":":if(r<0&&e[++n]==="/"&&e[++n]==="/")for(;(r=n+1)<u&&e[r]!=="/";)n=r;break;case"?":case"#":n=u;break;case"/":if(e[n+1]===".")switch(o=e[++n+1],o){case"/":s+=e.substring(a,n-1),a=n+1;break;case void 0:case"?":case"#":return s+e.substring(a,n)+e.substr(n+1);case".":if(o=e[++n+1],o===void 0||o==="/"||o==="?"||o==="#"){if(s+=e.substring(a,n-2),(a=s.lastIndexOf("/"))>=r&&(s=s.substr(0,a)),o!=="/")return`${s}/${e.substr(n+1)}`;a=n+1}}}o=e[++n]}return s+e.substring(a)}parse(e,u,s){let n,r,a;if(u&&(u.onQuad||u.onPrefix||u.onComment)?(n=u.onQuad,r=u.onPrefix,a=u.onComment):(n=u,r=s),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${wD++}_`,this._prefixCallback=r||m1,this._inversePredicate=!1,this._quantified=Object.create(null),!n){const l=[];let c;if(this._callback=(d,h)=>{d?c=d:h&&l.push(h)},this._lexer.tokenize(e).every(d=>this._readCallback=this._readCallback(d)),c)throw c;return l}let o=(l,c)=>{l!==null?(this._callback(l),this._callback=m1):this._readCallback&&(this._readCallback=this._readCallback(c))};a&&(this._lexer.comments=!0,o=(l,c)=>{l!==null?(this._callback(l),this._callback=m1):this._readCallback&&(c.type==="comment"?a(c.value):this._readCallback=this._readCallback(c))}),this._callback=n,this._lexer.tokenize(e,o)}}function m1(){}function Yq(t,e){const u=e.namedNode;t._namedNode=u,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=u(ln.rdf.first),t.RDF_REST=u(ln.rdf.rest),t.RDF_NIL=u(ln.rdf.nil),t.N3_FORALL=u(ln.r.forAll),t.N3_FORSOME=u(ln.r.forSome),t.ABBREVIATIONS={a:u(ln.rdf.type),"=":u(ln.owl.sameAs),">":u(ln.log.implies)},t.QUANTIFIERS_GRAPH=u("urn:n3:quantifiers")}Yq(em.prototype,wa);function bJ(t){return!!t&&t.termType==="NamedNode"}function mJ(t){return!!t&&t.termType==="BlankNode"}function gJ(t){return!!t&&t.termType==="Literal"}function _J(t){return!!t&&t.termType==="Variable"}function iy(t){return!!t&&t.termType==="DefaultGraph"}function vJ(t){return iy(t.graph)}function wJ(t,e){return Zq({"":t.value||t},e)("")}function Zq(t,e){const u=Object.create(null);for(const n in t)s(n,t[n]);e=e||wa;function s(n,r){if(typeof r=="string"){const a=Object.create(null);u[n]=o=>a[o]||(a[o]=e.namedNode(r+o))}else if(!(n in u))throw new Error(`Unknown prefix: ${n}`);return u[n]}return s}const e7=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:vJ,isBlankNode:mJ,isDefaultGraph:iy,isLiteral:gJ,isNamedNode:bJ,isVariable:_J,prefix:wJ,prefixes:Zq},Symbol.toStringTag,{value:"Module"})),Nl=wa.defaultGraph(),{rdf:SJ,xsd:mo}=ln,SD=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,TD=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,TJ={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Cl extends Ji{equals(e){return e===this}}class jy{constructor(e,u){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(u=e,e=null),u=u||{},this._lists=u.lists,e)this._outputStream=e,this._endStream=u.end===void 0?!0:!!u.end;else{let s="";this._outputStream={write(n,r,a){s+=n,a&&a()},end:n=>{n&&n(null,s)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(u.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Nl,this._prefixIRIs=Object.create(null),u.prefixes&&this.addPrefixes(u.prefixes),u.baseIRI&&(this._baseMatcher=new RegExp(`^${ED(u.baseIRI)}${u.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=u.baseIRI.length))}get _inDefaultGraph(){return Nl.equals(this._graph)}_write(e,u){this._outputStream.write(e,"utf8",u)}_writeQuad(e,u,s,n,r){try{n.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Nl.equals(n)?"":`${this._encodeIriOrBlank(n)} {
`)),this._graph=n,this._subject=null),e.equals(this._subject)?u.equals(this._predicate)?this._write(`, ${this._encodeObject(s)}`,r):this._write(`;
    ${this._encodePredicate(this._predicate=u)} ${this._encodeObject(s)}`,r):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=u)} ${this._encodeObject(s)}`,r)}catch(a){r&&r(a)}}_writeQuadLine(e,u,s,n,r){delete this._prefixMatch,this._write(this.quadToString(e,u,s,n),r)}quadToString(e,u,s,n){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(u)} ${this._encodeObject(s)}${n&&n.value?` ${this._encodeIriOrBlank(n)} .
`:` .
`}`}quadsToString(e){let u="";for(const s of e)u+=this.quadToString(s.subject,s.predicate,s.object,s.graph);return u}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let u=e.value;this._baseMatcher&&this._baseMatcher.test(u)&&(u=u.substr(this._baseLength)),SD.test(u)&&(u=u.replace(TD,AD));const s=this._prefixRegex.exec(u);return s?s[1]?this._prefixIRIs[s[1]]+s[2]:u:`<${u}>`}_encodeLiteral(e){let u=e.value;if(SD.test(u)&&(u=u.replace(TD,AD)),e.language)return`"${u}"@${e.language}`;if(this._lineMode){if(e.datatype.value===mo.string)return`"${u}"`}else switch(e.datatype.value){case mo.string:return`"${u}"`;case mo.boolean:if(u==="true"||u==="false")return u;break;case mo.integer:if(/^[+-]?\d+$/.test(u))return u;break;case mo.decimal:if(/^[+-]?\d*\.\d+$/.test(u))return u;break;case mo.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(u))return u;break}return`"${u}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===SJ.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:u,object:s,graph:n}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(u)} ${this._encodeObject(s)}${iy(n)?"":` ${this._encodeIriOrBlank(n)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,u,s,n,r){s===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,u):typeof n=="function"?this._writeQuad(e,u,s,Nl,n):this._writeQuad(e,u,s,n||Nl,r)}addQuads(e){for(let u=0;u<e.length;u++)this.addQuad(e[u])}addPrefix(e,u,s){const n={};n[e]=u,this.addPrefixes(n,s)}addPrefixes(e,u){if(!this._prefixIRIs)return u&&u();let s=!1;for(let n in e){let r=e[n];typeof r!="string"&&(r=r.value),s=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[r]=n+=":",this._write(`@prefix ${n} <${r}>.
`)}if(s){let n="",r="";for(const a in this._prefixIRIs)n+=n?`|${a}`:a,r+=(r?"|":"")+this._prefixIRIs[a];n=ED(n),this._prefixRegex=new RegExp(`^(?:${r})[^/]*$|^(${n})([_a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(s?`
`:"",u)}blank(e,u){let s=e,n,r;switch(e===void 0?s=[]:e.termType?s=[{predicate:e,object:u}]:"length"in e||(s=[e]),r=s.length){case 0:return new Cl("[]");case 1:if(n=s[0],!(n.object instanceof Cl))return new Cl(`[ ${this._encodePredicate(n.predicate)} ${this._encodeObject(n.object)} ]`);default:let a="[";for(let o=0;o<r;o++)n=s[o],n.predicate.equals(e)?a+=`, ${this._encodeObject(n.object)}`:(a+=`${(o?`;
  `:`
  `)+this._encodePredicate(n.predicate)} ${this._encodeObject(n.object)}`,e=n.predicate);return new Cl(`${a}
]`)}}list(e){const u=e&&e.length||0,s=new Array(u);for(let n=0;n<u;n++)s[n]=this._encodeObject(e[n]);return new Cl(`(${s.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let u=e&&((s,n)=>{u=null,e(s,n)});if(this._endStream)try{return this._outputStream.end(u)}catch{}u&&u()}}function AD(t){let e=TJ[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}function ED(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var tm=Wt();const xv=Symbol("iter");function G1(t,e,u=4){if(u===0)return Object.assign(t,e);for(const s in e)t[s]=G1(t[s]||Object.create(null),e[s],u-1);return t}function t7(t,e,u=4){let s=!1;for(const n in t)if(n in e){const r=u===0?null:t7(t[n],e[n],u-1);if(r!==!1)s=s||Object.create(null),s[n]=r;else if(u===3)return!1}return s}class aA{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||wa}_termFromId(e){if(e[0]==="."){const u=this._entities,s=e.split(".");return this._factory.quad(this._termFromId(u[s[1]]),this._termFromId(u[s[2]]),this._termFromId(u[s[3]]),s[4]&&this._termFromId(u[s[4]]))}return Vs(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){const u=this._termToNumericId(e.subject),s=this._termToNumericId(e.predicate),n=this._termToNumericId(e.object);let r;return u&&s&&n&&(iy(e.graph)||(r=this._termToNumericId(e.graph)))&&this._ids[r?`.${u}.${s}.${n}.${r}`:`.${u}.${s}.${n}`]}return this._ids[Qa(e)]}_termToNewNumericId(e){const u=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${iy(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:Qa(e);return this._ids[u]||(this._ids[this._entities[++this._id]=u]=this._id)}createBlankNode(e){let u,s;if(e)for(u=e=`_:${e}`,s=1;this._ids[u];)u=e+s++;else do u=`_:b${this._blankNodeIndex++}`;while(this._ids[u]);return this._ids[u]=++this._id,this._entities[this._id]=u,this._factory.blankNode(u.substr(2))}}class qn{constructor(e,u){this._size=0,this._graphs=Object.create(null),!u&&e&&!e[0]&&(u=e,e=null),u=u||{},this._factory=u.factory||wa,this._entityIndex=u.entityIndex||new aA({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addQuads(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const u=this._graphs;let s,n;for(const r in u)for(const a in s=u[r].subjects)for(const o in n=s[a])e+=Object.keys(n[o]).length;return this._size=e}_addToIndex(e,u,s,n){const r=e[u]||(e[u]={}),a=r[s]||(r[s]={}),o=n in a;return o||(a[n]=null),!o}_removeFromIndex(e,u,s,n){const r=e[u],a=r[s];delete a[n];for(const o in a)return;delete r[s];for(const o in r)return;delete e[u]}*_findInIndex(e,u,s,n,r,a,o,l){let c,d,h;const f=this._entities,p=this._termFromId(f[l]),y={subject:null,predicate:null,object:null};u&&((c=e,e={})[u]=c[u]);for(const b in e)if(d=e[b]){y[r]=this._termFromId(f[b]),s&&((c=d,d={})[s]=c[s]);for(const g in d)if(h=d[g]){y[a]=this._termFromId(f[g]);const m=n?n in h?[n]:[]:Object.keys(h);for(let v=0;v<m.length;v++)y[o]=this._termFromId(f[m[v]]),yield this._factory.quad(y.subject,y.predicate,y.object,p)}}}_loop(e,u){for(const s in e)u(s)}_loopByKey0(e,u,s){let n,r;if(n=e[u])for(r in n)s(r)}_loopByKey1(e,u,s){let n,r;for(n in e)r=e[n],r[u]&&s(n)}_loopBy2Keys(e,u,s,n){let r,a,o;if((r=e[u])&&(a=r[s]))for(o in a)n(o)}_countInIndex(e,u,s,n){let r=0,a,o,l;u&&((a=e,e={})[u]=a[u]);for(const c in e)if(o=e[c]){s&&((a=o,o={})[s]=a[s]);for(const d in o)(l=o[d])&&(n?n in l&&r++:r+=Object.keys(l).length)}return r}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){const u=Object.create(null);return s=>{s in u||(u[s]=!0,e(this._termFromId(this._entities[s],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,u,s,n){u||(n=e.graph,s=e.object,u=e.predicate,e=e.subject),n=n?this._termToNewNumericId(n):1;let r=this._graphs[n];return r||(r=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(r)),e=this._termToNewNumericId(e),u=this._termToNewNumericId(u),s=this._termToNewNumericId(s),this._addToIndex(r.subjects,e,u,s)?(this._addToIndex(r.predicates,u,s,e),this._addToIndex(r.objects,s,e,u),this._size=null,!0):!1}addQuads(e){for(let u=0;u<e.length;u++)this.addQuad(e[u])}delete(e){return this.removeQuad(e),this}has(e,u,s,n){return e&&e.subject&&({subject:e,predicate:u,object:s,graph:n}=e),!this.readQuads(e,u,s,n).next().done}import(e){return e.on("data",u=>{this.addQuad(u)}),e}removeQuad(e,u,s,n){u||({subject:e,predicate:u,object:s,graph:n}=e),n=n?this._termToNumericId(n):1;const r=this._graphs;let a,o,l;if(!(e=e&&this._termToNumericId(e))||!(u=u&&this._termToNumericId(u))||!(s=s&&this._termToNumericId(s))||!(a=r[n])||!(o=a.subjects[e])||!(l=o[u])||!(s in l))return!1;this._removeFromIndex(a.subjects,e,u,s),this._removeFromIndex(a.predicates,u,s,e),this._removeFromIndex(a.objects,s,e,u),this._size!==null&&this._size--;for(e in a.subjects)return!0;return delete r[n],!0}removeQuads(e){for(let u=0;u<e.length;u++)this.removeQuad(e[u])}remove(e){return e.on("data",u=>{this.removeQuad(u)}),e}removeMatches(e,u,s,n){const r=new tm.Readable({objectMode:!0}),a=this.readQuads(e,u,s,n);return r._read=o=>{for(;o-- >0;){const{done:l,value:c}=a.next();if(l){r.push(null);return}r.push(c)}},this.remove(r)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,u,s,n){return[...this.readQuads(e,u,s,n)]}*readQuads(e,u,s,n){const r=this._getGraphs(n);let a,o,l,c;if(!(e&&!(o=this._termToNumericId(e))||u&&!(l=this._termToNumericId(u))||s&&!(c=this._termToNumericId(s))))for(const d in r)(a=r[d])&&(o?c?yield*this._findInIndex(a.objects,c,o,l,"object","subject","predicate",d):yield*this._findInIndex(a.subjects,o,l,null,"subject","predicate","object",d):l?yield*this._findInIndex(a.predicates,l,c,null,"predicate","object","subject",d):c?yield*this._findInIndex(a.objects,c,null,null,"object","subject","predicate",d):yield*this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",d))}match(e,u,s,n){return new sA(this,e,u,s,n,{entityIndex:this._entityIndex})}countQuads(e,u,s,n){const r=this._getGraphs(n);let a=0,o,l,c,d;if(e&&!(l=this._termToNumericId(e))||u&&!(c=this._termToNumericId(u))||s&&!(d=this._termToNumericId(s)))return 0;for(const h in r)(o=r[h])&&(e?s?a+=this._countInIndex(o.objects,d,l,c):a+=this._countInIndex(o.subjects,l,c,d):u?a+=this._countInIndex(o.predicates,c,d,l):a+=this._countInIndex(o.objects,d,l,c));return a}forEach(e,u,s,n,r){this.some(a=>(e(a,this),!1),u,s,n,r)}every(e,u,s,n,r){return!this.some(a=>!e(a,this),u,s,n,r)}some(e,u,s,n,r){for(const a of this.readQuads(u,s,n,r))if(e(a))return!0;return!1}getSubjects(e,u,s){const n=[];return this.forSubjects(r=>{n.push(r)},e,u,s),n}forSubjects(e,u,s,n){const r=this._getGraphs(n);let a,o,l;if(e=this._uniqueEntities(e),!(u&&!(o=this._termToNumericId(u))||s&&!(l=this._termToNumericId(s))))for(n in r)(a=r[n])&&(o?l?this._loopBy2Keys(a.predicates,o,l,e):this._loopByKey1(a.subjects,o,e):l?this._loopByKey0(a.objects,l,e):this._loop(a.subjects,e))}getPredicates(e,u,s){const n=[];return this.forPredicates(r=>{n.push(r)},e,u,s),n}forPredicates(e,u,s,n){const r=this._getGraphs(n);let a,o,l;if(e=this._uniqueEntities(e),!(u&&!(o=this._termToNumericId(u))||s&&!(l=this._termToNumericId(s))))for(n in r)(a=r[n])&&(o?l?this._loopBy2Keys(a.objects,l,o,e):this._loopByKey0(a.subjects,o,e):l?this._loopByKey1(a.predicates,l,e):this._loop(a.predicates,e))}getObjects(e,u,s){const n=[];return this.forObjects(r=>{n.push(r)},e,u,s),n}forObjects(e,u,s,n){const r=this._getGraphs(n);let a,o,l;if(e=this._uniqueEntities(e),!(u&&!(o=this._termToNumericId(u))||s&&!(l=this._termToNumericId(s))))for(n in r)(a=r[n])&&(o?l?this._loopBy2Keys(a.subjects,o,l,e):this._loopByKey1(a.objects,o,e):l?this._loopByKey0(a.predicates,l,e):this._loop(a.objects,e))}getGraphs(e,u,s){const n=[];return this.forGraphs(r=>{n.push(r)},e,u,s),n}forGraphs(e,u,s,n){for(const r in this._graphs)this.some(a=>(e(a.graph),!0),u,s,n,this._termFromId(this._entities[r]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:u=!1}={}){const s={},n=u?()=>!0:(o,l)=>{throw new Error(`${o.value} ${l}`)},r=this.getQuads(null,ln.rdf.rest,ln.rdf.nil,null),a=e?[...r]:[];return r.forEach(o=>{const l=[];let c=!1,d,h;const f=o.graph;let p=o.subject;for(;p&&!c;){const y=this.getQuads(null,null,p,null),b=this.getQuads(p,null,null,null);let g,m=null,v=null,_=null;for(let w=0;w<b.length&&!c;w++)g=b[w],g.graph.equals(f)?d?c=n(p,"has non-list arcs out"):g.predicate.value===ln.rdf.first?m?c=n(p,"has multiple rdf:first arcs"):a.push(m=g):g.predicate.value===ln.rdf.rest?v?c=n(p,"has multiple rdf:rest arcs"):a.push(v=g):y.length?c=n(p,"can't be subject and object"):(d=g,h="subject"):c=n(p,"not confined to single graph");for(let w=0;w<y.length&&!c;++w)g=y[w],d?c=n(p,"can't have coreferences"):g.predicate.value===ln.rdf.rest?_?c=n(p,"has incoming rdf:rest arcs"):_=g:(d=g,h="object");m?l.unshift(m.object):c=n(p,"has no list head"),p=_&&_.subject}c?e=!1:d&&(s[d[h].value]=l)}),e&&this.removeQuads(a),s}addAll(e){if(Array.isArray(e))this.addQuads(e);else if(e instanceof qn&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=G1(this._graphs,e._graphs),this._size=null);else for(const u of e)this.add(u);return this}contains(e){if(e===this)return!0;if(!(e instanceof qn)||this._entityIndex!==e._entityIndex)return e.every(c=>this.has(c));const u=this._graphs,s=e._graphs;let n,r,a,o,l;for(const c in s){if(!(n=u[c]))return!1;n=n.subjects;for(const d in r=s[c].subjects){if(!(a=n[d]))return!1;for(const h in o=r[d]){if(!(l=a[h]))return!1;for(const f in o[h])if(!(f in l))return!1}}}return!0}deleteMatches(e,u,s,n){for(const r of this.match(e,u,s,n))this.removeQuad(r);return this}difference(e){return e===this?new qn({entityIndex:this._entityIndex}):this.filter(u=>!e.has(u))}equals(e){return e===this||this.size===e.size&&this.contains(e)}filter(e){const u=new qn({entityIndex:this._entityIndex});for(const s of this)e(s,this)&&u.add(s);return u}intersection(e){if(e===this){const u=new qn({entityIndex:this._entityIndex});return u._graphs=G1(Object.create(null),this._graphs),u._size=this._size,u}else if(e instanceof qn&&this._entityIndex===e._entityIndex){const u=new qn({entityIndex:this._entityIndex}),s=t7(e._graphs,this._graphs);return s&&(u._graphs=s,u._size=null),u}return this.filter(u=>e.has(u))}map(e){const u=new qn({entityIndex:this._entityIndex});for(const s of this)u.add(e(s,this));return u}reduce(e,u){const s=this.readQuads();let n=u===void 0?s.next().value:u;for(const r of s)n=e(n,r,this);return n}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new jy().quadsToString(this)}union(e){const u=new qn({entityIndex:this._entityIndex});return u._graphs=G1(Object.create(null),this._graphs),u._size=this._size,u.addAll(e),u}*[Symbol.iterator](){yield*this.readQuads()}}class sA extends tm.Readable{constructor(e,u,s,n,r,a){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:u,predicate:s,object:n,graph:r,options:a})}get filtered(){if(!this._filtered){const{n3Store:e,graph:u,object:s,predicate:n,subject:r}=this,a=this._filtered=new qn({factory:e._factory,entityIndex:this.options.entityIndex});for(const o of e.readQuads(r,n,s,u))a.addQuad(o)}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[xv]&&(this[xv]=this[Symbol.iterator]());const u=this[xv];for(;e-- >0;){const{done:s,value:n}=u.next();if(s){this.push(null);return}this.push(n)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,u,s,n){return this.filtered.deleteMatches(e,u,s,n)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,u,s,n,r){return this.filtered.every(e,u,s,n,r)}filter(e){return this.filtered.filter(e)}forEach(e,u,s,n,r){return this.filtered.forEach(e,u,s,n,r)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,u,s,n,r){return this.filtered.some(e,u,s,n,r)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,u){return this.filtered.reduce(e,u)}toString(){return new jy().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,u,s,n){return new sA(this.filtered,e,u,s,n,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class r7{dataset(e){return new qn(e)}}function n7(t){const e=[];for(const{subject:u,object:s}of t.match(null,wa.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,wa.defaultGraph())){const n=[...t.match(null,null,null,u)],r=[...t.match(null,null,null,s)];e.push({premise:n,conclusion:r})}return e}class i7{constructor(e){this._store=e}_add(e,u,s,n,r){this._store._addToIndex(n.subjects,e,u,s)&&(this._store._addToIndex(n.predicates,u,s,e),this._store._addToIndex(n.objects,s,e,u),r())}_evaluatePremise(e,u,s,n=0){let r,a,o,l,c;const[d,h,f]=e.premise[n].value,p=u[e.premise[n].content],y=!(o=d.value);for(o in y?p:{[o]:p[o]})if(l=p[o]){y&&(d.value=Number(o)),r=!(o=h.value);for(o in r?l:{[o]:l[o]})if(c=l[o]){r&&(h.value=Number(o)),a=!(o=f.value);for(o in a?c:{[o]:c[o]})a&&(f.value=Number(o)),n===e.premise.length-1?e.conclusion.forEach(b=>{this._add(b.subject.value,b.predicate.value,b.object.value,u,()=>{s(b)})}):this._evaluatePremise(e,u,s,n+1);a&&(f.value=null)}r&&(h.value=null)}y&&(d.value=null)}_evaluateRules(e,u,s){for(let n=0;n<e.length;n++)this._evaluatePremise(e[n],u,s)}_reasonGraphNaive(e,u){const s=[];function n(o){o.next&&o.next.forEach(l=>{s.push([o.subject.value,o.predicate.value,o.object.value,l])})}const r=o=>{o.forEach(l=>{this._add(l.subject.value,l.predicate.value,l.object.value,u,()=>{n(l)})})};this._evaluateRules(e,u,n);let a;for(;(a=s.pop())!==void 0;){const[o,l,c,d]=a,h=d.basePremise.subject.value;h||(d.basePremise.subject.value=o);const f=d.basePremise.predicate.value;f||(d.basePremise.predicate.value=l);const p=d.basePremise.object.value;p||(d.basePremise.object.value=c),d.premise.length===0?r(d.conclusion):this._evaluatePremise(d,u,n),h||(d.basePremise.subject.value=null),f||(d.basePremise.predicate.value=null),p||(d.basePremise.object.value=null)}}_createRule({premise:e,conclusion:u}){const s={},n=a=>a.termType==="Variable"?s[a.value]=s[a.value]||{}:{value:this._store._termToNewNumericId(a)},r=a=>({subject:n(a.subject),predicate:n(a.predicate),object:n(a.object)});return{premise:e.map(a=>r(a)),conclusion:u.map(a=>r(a)),variables:Object.values(s)}}reason(e){Array.isArray(e)||(e=n7(e)),e=e.map(s=>this._createRule(s));for(const s of e)for(const n of e)for(let r=0;r<n.premise.length;r++){const a=n.premise[r];for(const o of s.conclusion){if(Iv(a.subject,o.subject)&&Iv(a.predicate,o.predicate)&&Iv(a.object,o.object)){const l=new Set,c=[];a.subject.value=a.subject.value||1,a.object.value=a.object.value||1,a.predicate.value=a.predicate.value||1;for(let d=0;d<n.premise.length;d++)d!==r&&c.push(OD(n.premise[d],l));(o.next=o.next||[]).push({premise:c,conclusion:n.conclusion,basePremise:a})}n.variables.forEach(l=>{l.value=null})}}for(const s of e){const n=new Set;s.premise=s.premise.map(r=>OD(r,n))}const u=this._store._getGraphs();for(const s in u)this._reasonGraphNaive(e,u[s]);this._store._size=null}}function OD({subject:t,predicate:e,object:u},s){const n=t.value||s.has(t)||(s.add(t),!1),r=e.value||s.has(e)||(s.add(e),!1),a=u.value||s.has(u)||(s.add(u),!1);return!n&&r?{content:"predicates",value:[e,u,t]}:a?{content:"objects",value:[u,t,e]}:{content:"subjects",value:[t,e,u]}}function Iv(t,e){return t.value===null&&(t.value=e.value),t.value===e.value}class a7 extends tm.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const u=new em(e);let s,n;const r={onQuad:(a,o)=>{a&&this.emit("error",a)||o&&this.push(o)},onPrefix:(a,o)=>{this.emit("prefix",a,o)}};e&&e.comments&&(r.onComment=a=>{this.emit("comment",a)}),u.parse({on:(a,o)=>{switch(a){case"data":s=o;break;case"end":n=o;break}}},r),this._transform=(a,o,l)=>{s(a),l()},this._flush=a=>{n(),a()}}import(e){return e.on("data",u=>{this.write(u)}),e.on("end",()=>{this.end()}),e.on("error",u=>{this.emit("error",u)}),this}}class s7 extends tm.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const u=this._writer=new jy({write:(s,n,r)=>{this.push(s),r&&r()},end:s=>{this.push(null),s&&s()}},e);this._transform=(s,n,r)=>{u.addQuad(s,r)},this._flush=s=>{u.end(s)}}import(e){return e.on("data",u=>{this.write(u)}),e.on("end",()=>{this.end()}),e.on("error",u=>{this.emit("error",u)}),e.on("prefix",(u,s)=>{this._writer.addPrefix(u,s)}),this}}const AJ={Lexer:tA,Parser:em,Writer:jy,Store:qn,StoreFactory:r7,EntityIndex:aA,StreamParser:a7,StreamWriter:s7,Util:e7,Reasoner:i7,DataFactory:wa,Term:Ji,NamedNode:Zb,Literal:ka,BlankNode:rA,Variable:nA,DefaultGraph:iA,Quad:ny,Triple:ny,termFromId:Vs,termToId:Qa},EJ=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:rA,DataFactory:wa,DefaultGraph:iA,EntityIndex:aA,Lexer:tA,Literal:ka,NamedNode:Zb,Parser:em,Quad:ny,Reasoner:i7,Store:qn,StoreFactory:r7,StreamParser:a7,StreamWriter:s7,Term:Ji,Triple:ny,Util:e7,Variable:nA,Writer:jy,default:AJ,getRulesFromDataset:n7,termFromId:Vs,termToId:Qa},Symbol.toStringTag,{value:"Module"})),is=iT(EJ);var RD;function OJ(){if(RD)return Rl;RD=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.ActorRdfParseN3=void 0;const t=su(),e=is;let u=class extends t.ActorRdfParseFixedMediaTypes{constructor(n){super(n)}async runHandle(n,r,a){var l;n.data.on("error",c=>o.emit("error",c));const o=n.data.pipe(new e.StreamParser({baseIRI:(l=n.metadata)==null?void 0:l.baseIRI,format:r.endsWith("n3")?r:`${r}*`}));return{data:o,metadata:{triples:r==="text/turtle"||r==="application/n-triples"||r==="text/n3"}}}};return Rl.ActorRdfParseN3=u,Rl}var xD;function RJ(){return xD||(xD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(OJ(),t)}(Ev)),Ev}var Pv={},jl={},Dv={},Ts={},As={},Nv={},ID;function xJ(){return ID||(ID=1,function(t){/**
 * Character classes and associated utilities for the 5th edition of XML 1.0.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR=`	
\r ---`,t.S=` 	\r
`,t.NAME_START_CHAR=":A-Z_a-z-----------",t.NAME_CHAR="-"+t.NAME_START_CHAR+".0-9--",t.CHAR_RE=new RegExp("^["+t.CHAR+"]$","u"),t.S_RE=new RegExp("^["+t.S+"]+$","u"),t.NAME_START_CHAR_RE=new RegExp("^["+t.NAME_START_CHAR+"]$","u"),t.NAME_CHAR_RE=new RegExp("^["+t.NAME_CHAR+"]$","u"),t.NAME_RE=new RegExp("^["+t.NAME_START_CHAR+"]["+t.NAME_CHAR+"]*$","u"),t.NMTOKEN_RE=new RegExp("^["+t.NAME_CHAR+"]+$","u");var e=9,u=10,s=13,n=32;t.S_LIST=[n,u,s,e];function r(c){return c>=n&&c<=55295||c===u||c===s||c===e||c>=57344&&c<=65533||c>=65536&&c<=1114111}t.isChar=r;function a(c){return c===n||c===u||c===s||c===e}t.isS=a;function o(c){return c>=65&&c<=90||c>=97&&c<=122||c===58||c===95||c===8204||c===8205||c>=192&&c<=214||c>=216&&c<=246||c>=248&&c<=767||c>=880&&c<=893||c>=895&&c<=8191||c>=8304&&c<=8591||c>=11264&&c<=12271||c>=12289&&c<=55295||c>=63744&&c<=64975||c>=65008&&c<=65533||c>=65536&&c<=983039}t.isNameStartChar=o;function l(c){return o(c)||c>=48&&c<=57||c===45||c===46||c===183||c>=768&&c<=879||c>=8255&&c<=8256}t.isNameChar=l}(Nv)),Nv}var Cv={},PD;function IJ(){return PD||(PD=1,function(t){/**
 * Character classes and associated utilities for the 2nd edition of XML 1.1.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR="---",t.RESTRICTED_CHAR="-\b\v\f---",t.S=` 	\r
`,t.NAME_START_CHAR=":A-Z_a-z-----------",t.NAME_CHAR="-"+t.NAME_START_CHAR+".0-9--",t.CHAR_RE=new RegExp("^["+t.CHAR+"]$","u"),t.RESTRICTED_CHAR_RE=new RegExp("^["+t.RESTRICTED_CHAR+"]$","u"),t.S_RE=new RegExp("^["+t.S+"]+$","u"),t.NAME_START_CHAR_RE=new RegExp("^["+t.NAME_START_CHAR+"]$","u"),t.NAME_CHAR_RE=new RegExp("^["+t.NAME_CHAR+"]$","u"),t.NAME_RE=new RegExp("^["+t.NAME_START_CHAR+"]["+t.NAME_CHAR+"]*$","u"),t.NMTOKEN_RE=new RegExp("^["+t.NAME_CHAR+"]+$","u");var e=9,u=10,s=13,n=32;t.S_LIST=[n,u,s,e];function r(h){return h>=1&&h<=55295||h>=57344&&h<=65533||h>=65536&&h<=1114111}t.isChar=r;function a(h){return h>=1&&h<=8||h===11||h===12||h>=14&&h<=31||h>=127&&h<=132||h>=134&&h<=159}t.isRestrictedChar=a;function o(h){return h===9||h===10||h===13||h>31&&h<127||h===133||h>159&&h<=55295||h>=57344&&h<=65533||h>=65536&&h<=1114111}t.isCharAndNotRestricted=o;function l(h){return h===n||h===u||h===s||h===e}t.isS=l;function c(h){return h>=65&&h<=90||h>=97&&h<=122||h===58||h===95||h===8204||h===8205||h>=192&&h<=214||h>=216&&h<=246||h>=248&&h<=767||h>=880&&h<=893||h>=895&&h<=8191||h>=8304&&h<=8591||h>=11264&&h<=12271||h>=12289&&h<=55295||h>=63744&&h<=64975||h>=65008&&h<=65533||h>=65536&&h<=983039}t.isNameStartChar=c;function d(h){return c(h)||h>=48&&h<=57||h===45||h===46||h===183||h>=768&&h<=879||h>=8255&&h<=8256}t.isNameChar=d}(Cv)),Cv}var jv={},DD;function PJ(){return DD||(DD=1,function(t){/**
 * Character class utilities for XML NS 1.0 edition 3.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(t,"__esModule",{value:!0}),t.NC_NAME_START_CHAR="A-Z_a-z------------",t.NC_NAME_CHAR="-"+t.NC_NAME_START_CHAR+".0-9--",t.NC_NAME_START_CHAR_RE=new RegExp("^["+t.NC_NAME_START_CHAR+"]$","u"),t.NC_NAME_CHAR_RE=new RegExp("^["+t.NC_NAME_CHAR+"]$","u"),t.NC_NAME_RE=new RegExp("^["+t.NC_NAME_START_CHAR+"]["+t.NC_NAME_CHAR+"]*$","u");function e(s){return s>=65&&s<=90||s===95||s>=97&&s<=122||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8204&&s<=8205||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}t.isNCNameStartChar=e;function u(s){return e(s)||s===45||s===46||s>=48&&s<=57||s===183||s>=768&&s<=879||s>=8255&&s<=8256}t.isNCNameChar=u}(jv)),jv}var ND;function o7(){if(ND)return As;ND=1,Object.defineProperty(As,"__esModule",{value:!0}),As.SaxesParser=As.EVENTS=void 0;const t=xJ(),e=IJ(),u=PJ();var s=t.isS,n=t.isChar,r=t.isNameStartChar,a=t.isNameChar,o=t.S_LIST,l=t.NAME_RE,c=e.isChar,d=u.isNCNameStartChar,h=u.isNCNameChar,f=u.NC_NAME_RE;const p="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/2000/xmlns/",b={__proto__:null,xml:p,xmlns:y},g={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},m=-1,v=-2,_=0,w=1,S=2,A=3,D=4,L=5,O=6,E=7,P=8,M=9,U=10,j=11,q=12,$=13,Z=14,X=15,le=16,K=17,he=18,Re=19,ie=20,ae=21,Ee=22,De=23,ge=24,de=25,fe=26,H=27,N=28,R=29,T=30,x=31,B=32,k=33,V=34,J=35,z=36,Y=37,re=38,ce=39,Te=40,xe=41,Le=42,qe=43,G=44,F=9,Q=10,te=13,me=32,Oe=33,Ne=34,We=38,Ve=39,pe=45,we=47,W=59,Se=60,Ae=61,je=62,He=63,Ge=91,tt=93,lt=133,ut=8232,oe=Ke=>Ke===Ne||Ke===Ve,C=[Ne,Ve],ee=[...C,Ge,je],ye=[...C,Se,tt],Pe=[Ae,He,...o],Ue=[...o,je,We,Se];function Fe(Ke,be,Ie){switch(be){case"xml":Ie!==p&&Ke.fail(`xml prefix must be bound to ${p}.`);break;case"xmlns":Ie!==y&&Ke.fail(`xmlns prefix must be bound to ${y}.`);break}switch(Ie){case y:Ke.fail(be===""?`the default namespace may not be set to ${Ie}.`:`may not assign a prefix (even "xmlns") to the URI ${y}.`);break;case p:switch(be){case"xml":break;case"":Ke.fail(`the default namespace may not be set to ${Ie}.`);break;default:Ke.fail("may not assign the xml namespace to another prefix.")}break}}function Ye(Ke,be){for(const Ie of Object.keys(be))Fe(Ke,Ie,be[Ie])}const $e=Ke=>f.test(Ke),Je=Ke=>l.test(Ke),nt=0,yt=1,ft=2;As.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const et={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class Ir{get closed(){return this._closed}constructor(be){this.opt=be??{},this.fragmentOpt=!!this.opt.fragment;const Ie=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,Ie){this.nameStartCheck=d,this.nameCheck=h,this.isName=$e,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},b);const Me=this.opt.additionalNamespaces;Me!=null&&(Ye(this,Me),Object.assign(this.ns,Me))}else this.nameStartCheck=r,this.nameCheck=a,this.isName=Je,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var be;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=nt,this.attribList=[];const{fragmentOpt:Ie}=this;this.state=Ie?$:_,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=Ie,this.xmlDeclPossible=!Ie,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:Me}=this.opt;if(Me===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");Me="1.0"}this.setXMLVersion(Me),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(g),(be=this.readyHandler)===null||be===void 0||be.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(be,Ie){this[et[be]]=Ie}off(be){this[et[be]]=void 0}makeError(be){var Ie;let Me=(Ie=this.fileName)!==null&&Ie!==void 0?Ie:"";return this.trackPosition&&(Me.length>0&&(Me+=":"),Me+=`${this.line}:${this.column}`),Me.length>0&&(Me+=": "),new Error(Me+be)}fail(be){const Ie=this.makeError(be),Me=this.errorHandler;if(Me===void 0)throw Ie;return Me(Ie),this}write(be){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let Ie=!1;be===null?(Ie=!0,be=""):typeof be=="object"&&(be=be.toString()),this.carriedFromPrevious!==void 0&&(be=`${this.carriedFromPrevious}${be}`,this.carriedFromPrevious=void 0);let Me=be.length;const it=be.charCodeAt(Me-1);!Ie&&(it===te||it>=55296&&it<=56319)&&(this.carriedFromPrevious=be[Me-1],Me--,be=be.slice(0,Me));const{stateTable:at}=this;for(this.chunk=be,this.i=0;this.i<Me;)at[this.state].call(this);return this.chunkPosition+=Me,Ie?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:be,i:Ie}=this;if(this.prevI=Ie,this.i=Ie+1,Ie>=be.length)return m;const Me=be.charCodeAt(Ie);if(this.column++,Me<55296){if(Me>=me||Me===F)return Me;switch(Me){case Q:return this.line++,this.column=0,this.positionAtNewLine=this.position,Q;case te:return be.charCodeAt(Ie+1)===Q&&(this.i=Ie+2),this.line++,this.column=0,this.positionAtNewLine=this.position,v;default:return this.fail("disallowed character."),Me}}if(Me>56319)return Me>=57344&&Me<=65533||this.fail("disallowed character."),Me;const it=65536+(Me-55296)*1024+(be.charCodeAt(Ie+1)-56320);return this.i=Ie+2,it>1114111&&this.fail("disallowed character."),it}getCode11(){const{chunk:be,i:Ie}=this;if(this.prevI=Ie,this.i=Ie+1,Ie>=be.length)return m;const Me=be.charCodeAt(Ie);if(this.column++,Me<55296){if(Me>31&&Me<127||Me>159&&Me!==ut||Me===F)return Me;switch(Me){case Q:return this.line++,this.column=0,this.positionAtNewLine=this.position,Q;case te:{const at=be.charCodeAt(Ie+1);(at===Q||at===lt)&&(this.i=Ie+2)}case lt:case ut:return this.line++,this.column=0,this.positionAtNewLine=this.position,v;default:return this.fail("disallowed character."),Me}}if(Me>56319)return Me>=57344&&Me<=65533||this.fail("disallowed character."),Me;const it=65536+(Me-55296)*1024+(be.charCodeAt(Ie+1)-56320);return this.i=Ie+2,it>1114111&&this.fail("disallowed character."),it}getCodeNorm(){const be=this.getCode();return be===v?Q:be}unget(){this.i=this.prevI,this.column--}captureTo(be){let{i:Ie}=this;const{chunk:Me}=this;for(;;){const it=this.getCode(),at=it===v,Tt=at?Q:it;if(Tt===m||be.includes(Tt))return this.text+=Me.slice(Ie,this.prevI),Tt;at&&(this.text+=`${Me.slice(Ie,this.prevI)}
`,Ie=this.i)}}captureToChar(be){let{i:Ie}=this;const{chunk:Me}=this;for(;;){let it=this.getCode();switch(it){case v:this.text+=`${Me.slice(Ie,this.prevI)}
`,Ie=this.i,it=Q;break;case m:return this.text+=Me.slice(Ie),!1}if(it===be)return this.text+=Me.slice(Ie,this.prevI),!0}}captureNameChars(){const{chunk:be,i:Ie}=this;for(;;){const Me=this.getCode();if(Me===m)return this.name+=be.slice(Ie),m;if(!a(Me))return this.name+=be.slice(Ie,this.prevI),Me===v?Q:Me}}skipSpaces(){for(;;){const be=this.getCodeNorm();if(be===m||!s(be))return be}}setXMLVersion(be){this.currentXMLVersion=be,be==="1.0"?(this.isChar=n,this.getCode=this.getCode10):(this.isChar=c,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=w}sBeginWhitespace(){const be=this.i,Ie=this.skipSpaces();switch(this.prevI!==be&&(this.xmlDeclPossible=!1),Ie){case Se:if(this.state=X,this.text.length!==0)throw new Error("no-empty text at start");break;case m:break;default:this.unget(),this.state=$,this.xmlDeclPossible=!1}}sDoctype(){var be;const Ie=this.captureTo(ee);switch(Ie){case je:{(be=this.doctypeHandler)===null||be===void 0||be.call(this,this.text),this.text="",this.state=$,this.doctype=!0;break}case m:break;default:this.text+=String.fromCodePoint(Ie),Ie===Ge?this.state=D:oe(Ie)&&(this.state=A,this.q=Ie)}}sDoctypeQuote(){const be=this.q;this.captureToChar(be)&&(this.text+=String.fromCodePoint(be),this.q=null,this.state=S)}sDTD(){const be=this.captureTo(ye);be!==m&&(this.text+=String.fromCodePoint(be),be===tt?this.state=S:be===Se?this.state=O:oe(be)&&(this.state=L,this.q=be))}sDTDQuoted(){const be=this.q;this.captureToChar(be)&&(this.text+=String.fromCodePoint(be),this.state=D,this.q=null)}sDTDOpenWaka(){const be=this.getCodeNorm();switch(this.text+=String.fromCodePoint(be),be){case Oe:this.state=E,this.openWakaBang="";break;case He:this.state=j;break;default:this.state=D}}sDTDOpenWakaBang(){const be=String.fromCodePoint(this.getCodeNorm()),Ie=this.openWakaBang+=be;this.text+=be,Ie!=="-"&&(this.state=Ie==="--"?P:D,this.openWakaBang="")}sDTDComment(){this.captureToChar(pe)&&(this.text+="-",this.state=M)}sDTDCommentEnding(){const be=this.getCodeNorm();this.text+=String.fromCodePoint(be),this.state=be===pe?U:P}sDTDCommentEnded(){const be=this.getCodeNorm();this.text+=String.fromCodePoint(be),be===je?this.state=D:(this.fail("malformed comment."),this.state=P)}sDTDPI(){this.captureToChar(He)&&(this.text+="?",this.state=q)}sDTDPIEnding(){const be=this.getCodeNorm();this.text+=String.fromCodePoint(be),be===je&&(this.state=D)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:be}=this;const{chunk:Ie}=this;e:for(;;)switch(this.getCode()){case v:this.entity+=`${Ie.slice(be,this.prevI)}
`,be=this.i;break;case W:{const{entityReturnState:Me}=this,it=this.entity+Ie.slice(be,this.prevI);this.state=Me;let at;it===""?(this.fail("empty entity name."),at="&;"):(at=this.parseEntity(it),this.entity=""),(Me!==$||this.textHandler!==void 0)&&(this.text+=at);break e}case m:this.entity+=Ie.slice(be);break e}}sOpenWaka(){const be=this.getCode();if(r(be))this.state=V,this.unget(),this.xmlDeclPossible=!1;else switch(be){case we:this.state=qe,this.xmlDeclPossible=!1;break;case Oe:this.state=le,this.openWakaBang="",this.xmlDeclPossible=!1;break;case He:this.state=De;break;default:this.fail("disallowed character in tag name"),this.state=$,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=ie,this.openWakaBang="";break;case"--":this.state=K,this.openWakaBang="";break;case"DOCTYPE":this.state=S,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(pe)&&(this.state=he)}sCommentEnding(){var be;const Ie=this.getCodeNorm();Ie===pe?(this.state=Re,(be=this.commentHandler)===null||be===void 0||be.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(Ie)}`,this.state=K)}sCommentEnded(){const be=this.getCodeNorm();be!==je?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(be)}`,this.state=K):this.state=$}sCData(){this.captureToChar(tt)&&(this.state=ae)}sCDataEnding(){const be=this.getCodeNorm();be===tt?this.state=Ee:(this.text+=`]${String.fromCodePoint(be)}`,this.state=ie)}sCDataEnding2(){var be;const Ie=this.getCodeNorm();switch(Ie){case je:{(be=this.cdataHandler)===null||be===void 0||be.call(this,this.text),this.text="",this.state=$;break}case tt:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(Ie)}`,this.state=ie}}sPIFirstChar(){const be=this.getCodeNorm();this.nameStartCheck(be)?(this.piTarget+=String.fromCodePoint(be),this.state=ge):be===He||s(be)?(this.fail("processing instruction without a target."),this.state=be===He?fe:de):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(be),this.state=ge)}sPIRest(){const{chunk:be,i:Ie}=this;for(;;){const Me=this.getCodeNorm();if(Me===m){this.piTarget+=be.slice(Ie);return}if(!this.nameCheck(Me)){this.piTarget+=be.slice(Ie,this.prevI);const it=Me===He;it||s(Me)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=it?k:H):this.state=it?fe:de:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(Me));break}}}sPIBody(){if(this.text.length===0){const be=this.getCodeNorm();be===He?this.state=fe:s(be)||(this.text=String.fromCodePoint(be))}else this.captureToChar(He)&&(this.state=fe)}sPIEnding(){var be;const Ie=this.getCodeNorm();if(Ie===je){const{piTarget:Me}=this;Me.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(be=this.piHandler)===null||be===void 0||be.call(this,{target:Me,body:this.text}),this.piTarget=this.text="",this.state=$}else Ie===He?this.text+="?":(this.text+=`?${String.fromCodePoint(Ie)}`,this.state=de);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const be=this.skipSpaces();if(be===He){this.state=k;return}be!==m&&(this.state=N,this.name=String.fromCodePoint(be))}sXMLDeclName(){const be=this.captureTo(Pe);if(be===He){this.state=k,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if(s(be)||be===Ae){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=be===Ae?T:R}}sXMLDeclEq(){const be=this.getCodeNorm();if(be===He){this.state=k,this.fail("XML declaration is incomplete.");return}s(be)||(be!==Ae&&this.fail("value required."),this.state=T)}sXMLDeclValueStart(){const be=this.getCodeNorm();if(be===He){this.state=k,this.fail("XML declaration is incomplete.");return}s(be)||(oe(be)?this.q=be:(this.fail("value must be quoted."),this.q=me),this.state=x)}sXMLDeclValue(){const be=this.captureTo([this.q,He]);if(be===He){this.state=k,this.text="",this.fail("XML declaration is incomplete.");return}if(be===m)return;const Ie=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const Me=Ie;this.xmlDecl.version=Me,/^1\.[0-9]+$/.test(Me)?this.opt.forceXMLVersion||this.setXMLVersion(Me):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(Ie)||this.fail("encoding value must match 	/^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=Ie;break;case"standalone":Ie!=="yes"&&Ie!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=Ie;break}this.name="",this.state=B}sXMLDeclSeparator(){const be=this.getCodeNorm();if(be===He){this.state=k;return}s(be)||(this.fail("whitespace required."),this.unget()),this.state=H}sXMLDeclEnding(){var be;this.getCodeNorm()===je?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(be=this.xmldeclHandler)===null||be===void 0||be.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=$):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var be;const Ie=this.captureNameChars();if(Ie===m)return;const Me=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=Me.ns=Object.create(null)),(be=this.openTagStartHandler)===null||be===void 0||be.call(this,Me),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),Ie){case je:this.openTag();break;case we:this.state=J;break;default:s(Ie)||this.fail("disallowed character in tag name."),this.state=z}}sOpenTagSlash(){this.getCode()===je?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=z)}sAttrib(){const be=this.skipSpaces();be!==m&&(r(be)?(this.unget(),this.state=Y):be===je?this.openTag():be===we?this.state=J:this.fail("disallowed character in attribute name."))}sAttribName(){const be=this.captureNameChars();be===Ae?this.state=ce:s(be)?this.state=re:be===je?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):be!==m&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const be=this.skipSpaces();switch(be){case m:return;case Ae:this.state=ce;break;default:this.fail("attribute without value."),this.text="",this.name="",be===je?this.openTag():r(be)?(this.unget(),this.state=Y):(this.fail("disallowed character in attribute name."),this.state=z)}}sAttribValue(){const be=this.getCodeNorm();oe(be)?(this.q=be,this.state=Te):s(be)||(this.fail("unquoted attribute value."),this.state=Le,this.unget())}sAttribValueQuoted(){const{q:be,chunk:Ie}=this;let{i:Me}=this;for(;;)switch(this.getCode()){case be:this.pushAttrib(this.name,this.text+Ie.slice(Me,this.prevI)),this.name=this.text="",this.q=null,this.state=xe;return;case We:this.text+=Ie.slice(Me,this.prevI),this.state=Z,this.entityReturnState=Te;return;case Q:case v:case F:this.text+=`${Ie.slice(Me,this.prevI)} `,Me=this.i;break;case Se:this.text+=Ie.slice(Me,this.prevI),this.fail("disallowed character.");return;case m:this.text+=Ie.slice(Me);return}}sAttribValueClosed(){const be=this.getCodeNorm();s(be)?this.state=z:be===je?this.openTag():be===we?this.state=J:r(be)?(this.fail("no whitespace between attributes."),this.unget(),this.state=Y):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const be=this.captureTo(Ue);switch(be){case We:this.state=Z,this.entityReturnState=Le;break;case Se:this.fail("disallowed character.");break;case m:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",be===je?this.openTag():this.state=z}}sCloseTag(){const be=this.captureNameChars();be===je?this.closeTag():s(be)?this.state=G:be!==m&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case je:this.closeTag();break;case m:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:be,forbiddenState:Ie}=this;const{chunk:Me,textHandler:it}=this;e:for(;;)switch(this.getCode()){case Se:{if(this.state=X,it!==void 0){const{text:at}=this,Tt=Me.slice(be,this.prevI);at.length!==0?(it(at+Tt),this.text=""):Tt.length!==0&&it(Tt)}Ie=nt;break e}case We:this.state=Z,this.entityReturnState=$,it!==void 0&&(this.text+=Me.slice(be,this.prevI)),Ie=nt;break e;case tt:switch(Ie){case nt:Ie=yt;break;case yt:Ie=ft;break;case ft:break;default:throw new Error("impossible state")}break;case je:Ie===ft&&this.fail('the string "]]>" is disallowed in char data.'),Ie=nt;break;case v:it!==void 0&&(this.text+=`${Me.slice(be,this.prevI)}
`),be=this.i,Ie=nt;break;case m:it!==void 0&&(this.text+=Me.slice(be));break e;default:Ie=nt}this.forbiddenState=Ie}handleTextOutsideRoot(){let{i:be}=this;const{chunk:Ie,textHandler:Me}=this;let it=!1;e:for(;;){const at=this.getCode();switch(at){case Se:{if(this.state=X,Me!==void 0){const{text:Tt}=this,Vt=Ie.slice(be,this.prevI);Tt.length!==0?(Me(Tt+Vt),this.text=""):Vt.length!==0&&Me(Vt)}break e}case We:this.state=Z,this.entityReturnState=$,Me!==void 0&&(this.text+=Ie.slice(be,this.prevI)),it=!0;break e;case v:Me!==void 0&&(this.text+=`${Ie.slice(be,this.prevI)}
`),be=this.i;break;case m:Me!==void 0&&(this.text+=Ie.slice(be));break e;default:s(at)||(it=!0)}}it&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(be,Ie){var Me;const{prefix:it,local:at}=this.qname(be),Tt={name:be,prefix:it,local:at,value:Ie};if(this.attribList.push(Tt),(Me=this.attributeHandler)===null||Me===void 0||Me.call(this,Tt),it==="xmlns"){const Vt=Ie.trim();this.currentXMLVersion==="1.0"&&Vt===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[at]=Vt,Fe(this,at,Vt)}else if(be==="xmlns"){const Vt=Ie.trim();this.topNS[""]=Vt,Fe(this,"",Vt)}}pushAttribPlain(be,Ie){var Me;const it={name:be,value:Ie};this.attribList.push(it),(Me=this.attributeHandler)===null||Me===void 0||Me.call(this,it)}end(){var be,Ie;this.sawRoot||this.fail("document must contain a root element.");const{tags:Me}=this;for(;Me.length>0;){const at=Me.pop();this.fail(`unclosed tag: ${at.name}`)}this.state!==_&&this.state!==$&&this.fail("unexpected end.");const{text:it}=this;return it.length!==0&&((be=this.textHandler)===null||be===void 0||be.call(this,it),this.text=""),this._closed=!0,(Ie=this.endHandler)===null||Ie===void 0||Ie.call(this),this._init(),this}resolve(be){var Ie,Me;let it=this.topNS[be];if(it!==void 0)return it;const{tags:at}=this;for(let Tt=at.length-1;Tt>=0;Tt--)if(it=at[Tt].ns[be],it!==void 0)return it;return it=this.ns[be],it!==void 0?it:(Me=(Ie=this.opt).resolvePrefix)===null||Me===void 0?void 0:Me.call(Ie,be)}qname(be){const Ie=be.indexOf(":");if(Ie===-1)return{prefix:"",local:be};const Me=be.slice(Ie+1),it=be.slice(0,Ie);return(it===""||Me===""||Me.includes(":"))&&this.fail(`malformed name: ${be}.`),{prefix:it,local:Me}}processAttribsNS(){var be;const{attribList:Ie}=this,Me=this.tag;{const{prefix:Tt,local:Vt}=this.qname(Me.name);Me.prefix=Tt,Me.local=Vt;const rr=Me.uri=(be=this.resolve(Tt))!==null&&be!==void 0?be:"";Tt!==""&&(Tt==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),rr===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Tt)}.`),Me.uri=Tt))}if(Ie.length===0)return;const{attributes:it}=Me,at=new Set;for(const Tt of Ie){const{name:Vt,prefix:rr,local:fi}=Tt;let bn,or;rr===""?(bn=Vt==="xmlns"?y:"",or=Vt):(bn=this.resolve(rr),bn===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(rr)}.`),bn=rr),or=`{${bn}}${fi}`),at.has(or)&&this.fail(`duplicate attribute: ${or}.`),at.add(or),Tt.uri=bn,it[Vt]=Tt}this.attribList=[]}processAttribsPlain(){const{attribList:be}=this,Ie=this.tag.attributes;for(const{name:Me,value:it}of be)Ie[Me]!==void 0&&this.fail(`duplicate attribute: ${Me}.`),Ie[Me]=it;this.attribList=[]}openTag(){var be;this.processAttribs();const{tags:Ie}=this,Me=this.tag;Me.isSelfClosing=!1,(be=this.openTagHandler)===null||be===void 0||be.call(this,Me),Ie.push(Me),this.state=$,this.name=""}openSelfClosingTag(){var be,Ie,Me;this.processAttribs();const{tags:it}=this,at=this.tag;at.isSelfClosing=!0,(be=this.openTagHandler)===null||be===void 0||be.call(this,at),(Ie=this.closeTagHandler)===null||Ie===void 0||Ie.call(this,at),(this.tag=(Me=it[it.length-1])!==null&&Me!==void 0?Me:null)===null&&(this.closedRoot=!0),this.state=$,this.name=""}closeTag(){const{tags:be,name:Ie}=this;if(this.state=$,this.name="",Ie===""){this.fail("weird empty close tag."),this.text+="</>";return}const Me=this.closeTagHandler;let it=be.length;for(;it-- >0;){const at=this.tag=be.pop();if(this.topNS=at.ns,Me==null||Me(at),at.name===Ie)break;this.fail("unexpected close tag.")}it===0?this.closedRoot=!0:it<0&&(this.fail(`unmatched closing tag: ${Ie}.`),this.text+=`</${Ie}>`)}parseEntity(be){if(be[0]!=="#"){const Me=this.ENTITIES[be];return Me!==void 0?Me:(this.fail(this.isName(be)?"undefined entity.":"disallowed character in entity name."),`&${be};`)}let Ie=NaN;return be[1]==="x"&&/^#x[0-9a-f]+$/i.test(be)?Ie=parseInt(be.slice(2),16):/^#[0-9]+$/.test(be)&&(Ie=parseInt(be.slice(1),10)),this.isChar(Ie)?String.fromCodePoint(Ie):(this.fail("malformed character entity."),`&${be};`)}}return As.SaxesParser=Ir,As}var Ll={},CD;function DJ(){if(CD)return Ll;CD=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.ParseError=void 0;let t=class extends Error{constructor(u,s){const n=u.saxParser;super(u.trackPosition?`Line ${n.line} column ${n.column+1}: ${s}`:s)}};return Ll.ParseError=t,Ll}var Lv={},Mv={},jD;function NJ(){return jD||(jD=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateIri=t.IriValidationStrategy=void 0;function e(){const o="[!$&'()*+,;=]",l="%[a-fA-F0-9]{2}",c="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",d=`${c}\\.${c}\\.${c}\\.${c}`,h="[a-fA-F0-9]{1,4}",f=`(${h}:${h}|${d})`,p=`((${h}:){6}${f}|::(${h}:){5}${f}|(${h})?::(${h}:){4}${f}|((${h}:){0,1}${h})?::(${h}:){3}${f}|((${h}:){0,2}${h})?::(${h}:){2}${f}|((${h}:){0,3}${h})?::${h}:${f}|((${h}:){0,4}${h})?::${f}|((${h}:){0,5}${h})?::${h}|((${h}:){0,6}${h})?::)`,y=`v[a-fA-F0-9]+\\.(${o}|${o}|":)+`,b=`\\[(${p}|${y})\\]`,g="[0-9]*",m="[a-zA-Z][a-zA-Z0-9+\\-.]*",_="[---]",A="[a-zA-Z0-9\\-._~-----------------]",D=`(${A}|${l}|${o}|[:@])*`,L=`(${D}|[\\/?])*`,O=`(${D}|${_}|[\\/?])*`,E=`(${D})+`,P=`(${D})*`,M="",U=`${E}(\\/${P})*`,j=`\\/(${E}(\\/${P})*)?`,q=`(\\/${P})*`,$=`(${A}|${l}|${o})*`,Z=`(${b}|${d}|${$})`,K=`(\\/\\/${`(${`(${A}|${l}|${o}|:)*`}@)?${Z}(:${g})?`}${q}|${j}|${U}|${M})`,he=`^${m}:${K}(\\?${O})?(#${L})?$`;return new RegExp(he,"u")}const u=e(),s=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var n;(function(a){a.Strict="strict",a.Pragmatic="pragmatic",a.None="none"})(n=t.IriValidationStrategy||(t.IriValidationStrategy={}));function r(a,o=n.Strict){switch(o){case n.Strict:return u.test(a)?void 0:new Error(`Invalid IRI according to RFC 3987: '${a}'`);case n.Pragmatic:return s.test(a)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${a}'`);case n.None:return;default:return new Error(`Not supported validation strategy "${o}"`)}}t.validateIri=r}(Mv)),Mv}var LD;function CJ(){return LD||(LD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(NJ(),t)}(Lv)),Lv}var MD;function jJ(){if(MD)return Ts;MD=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.ParseType=Ts.RdfXmlParser=void 0;const t=Pi(),e=o7(),u=Wt(),s=DJ(),n=Et(),r=CJ();let a=class Tr extends u.Transform{constructor(c){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},c&&(Object.assign(this,c),this.options=c),this.dataFactory||(this.dataFactory=new n.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.validateUri!==!1&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?r.IriValidationStrategy.Pragmatic:r.IriValidationStrategy.None),this.saxParser=new e.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(c){const d=new u.PassThrough({readableObjectMode:!0});c.on("error",f=>h.emit("error",f)),c.on("data",f=>d.push(f)),c.on("end",()=>d.push(null));const h=d.pipe(new Tr(this.options));return h}_transform(c,d,h){try{this.saxParser.write(c)}catch(f){return h(f)}h()}newParseError(c){return new s.ParseError(this,c)}valueToUri(c,d){return this.uriToNamedNode((0,t.resolve)(c,d.baseIRI))}uriToNamedNode(c){const d=(0,r.validateIri)(c,this.iriValidationStrategy);if(d instanceof Error)throw this.newParseError(d.message);return this.dataFactory.namedNode(c)}validateNcname(c){if(!Tr.NCNAME_MATCHER.test(c))throw this.newParseError(`Not a valid NCName: ${c}`)}attachSaxListeners(){this.saxParser.on("error",c=>this.emit("error",c)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(c){const d=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let h=o.RESOURCE;if(d&&(d.hadChildren=!0,h=d.childrenParseType),d&&d.childrenStringTags){const p=c.name;let y="";for(const v in c.attributes)y+=` ${v}="${c.attributes[v].value}"`;const g=`<${`${p}${y}`}>`;d.childrenStringTags.push(g);const m={childrenStringTags:d.childrenStringTags};m.childrenStringEmitClosingTag=`</${p}>`,this.activeTagStack.push(m);return}const f={};d?(f.language=d.language,f.baseIRI=d.baseIRI):f.baseIRI=this.baseIRI,this.activeTagStack.push(f),h===o.RESOURCE?this.onTagResource(c,f,d,!d):this.onTagProperty(c,f,d)}onTagResource(c,d,h,f){d.childrenParseType=o.PROPERTY;let p=!0;if(c.uri===Tr.RDF){if(!f&&Tr.FORBIDDEN_NODE_ELEMENTS.indexOf(c.local)>=0)throw this.newParseError(`Illegal node element name: ${c.local}`);switch(c.local){case"RDF":d.childrenParseType=o.RESOURCE;case"Description":p=!1}}const y=[],b=[];let g=null,m=!1,v=!1,_=null;for(const w in c.attributes){const S=c.attributes[w];if(h&&S.uri===Tr.RDF)switch(S.local){case"about":if(g)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${S.value} and ${g} where found.`);g=S.value;continue;case"ID":if(g)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${S.value} and ${g} where found.`);this.validateNcname(S.value),g="#"+S.value,m=!0;continue;case"nodeID":if(g)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${S.value} and ${g} where found.`);this.validateNcname(S.value),g=S.value,v=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":_=S.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(S.uri===Tr.XML){if(S.local==="lang"){d.language=S.value===""?null:S.value.toLowerCase();continue}else if(S.local==="base"){d.baseIRI=(0,t.resolve)(S.value,d.baseIRI);continue}}S.prefix!=="xml"&&S.prefix!=="xmlns"&&(S.prefix!==""||S.local!=="xmlns")&&S.uri&&(y.push(this.uriToNamedNode(S.uri+S.local)),b.push(S.value))}if(g!==null&&(d.subject=v?this.dataFactory.blankNode(g):this.valueToUri(g,d),m&&this.claimNodeId(d.subject)),d.subject||(d.subject=this.dataFactory.blankNode()),p){const w=this.uriToNamedNode(c.uri+c.local);this.emitTriple(d.subject,this.dataFactory.namedNode(Tr.RDF+"type"),w,h?h.reifiedStatementId:null)}if(h){if(h.predicate)if(h.childrenCollectionSubject){const w=this.dataFactory.blankNode();this.emitTriple(h.childrenCollectionSubject,h.childrenCollectionPredicate,w,h.reifiedStatementId),this.emitTriple(w,this.dataFactory.namedNode(Tr.RDF+"first"),d.subject,d.reifiedStatementId),h.childrenCollectionSubject=w,h.childrenCollectionPredicate=this.dataFactory.namedNode(Tr.RDF+"rest")}else{this.emitTriple(h.subject,h.predicate,d.subject,h.reifiedStatementId);for(let w=0;w<h.predicateSubPredicates.length;w++)this.emitTriple(d.subject,h.predicateSubPredicates[w],h.predicateSubObjects[w],null);h.predicateSubPredicates=[],h.predicateSubObjects=[],h.predicateEmitted=!0}for(let w=0;w<y.length;w++){const S=this.dataFactory.literal(b[w],d.datatype||d.language);this.emitTriple(d.subject,y[w],S,h.reifiedStatementId)}_&&this.emitTriple(d.subject,this.dataFactory.namedNode(Tr.RDF+"type"),this.uriToNamedNode(_),null)}}onTagProperty(c,d,h){if(d.childrenParseType=o.RESOURCE,d.subject=h.subject,c.uri===Tr.RDF&&c.local==="li"?(h.listItemCounter||(h.listItemCounter=1),d.predicate=this.uriToNamedNode(c.uri+"_"+h.listItemCounter++)):d.predicate=this.uriToNamedNode(c.uri+c.local),c.uri===Tr.RDF&&Tr.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(c.local)>=0)throw this.newParseError(`Illegal property element name: ${c.local}`);d.predicateSubPredicates=[],d.predicateSubObjects=[];let f=!1,p=!1,y=null,b=!0;const g=[],m=[];for(const v in c.attributes){const _=c.attributes[v];if(_.uri===Tr.RDF)switch(_.local){case"resource":if(y)throw this.newParseError(`Found both rdf:resource (${_.value}) and rdf:nodeID (${y}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${_.value})`);d.hadChildren=!0,y=_.value,b=!1;continue;case"datatype":if(p)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${_.value}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${_.value})`);d.datatype=this.valueToUri(_.value,d);continue;case"nodeID":if(p)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${_.value}).`);if(d.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${_.value}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${_.value})`);this.validateNcname(_.value),d.hadChildren=!0,y=_.value,b=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(p)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(d.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${d.datatype.value})`);if(y)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${y})`);if(_.value==="Resource"){f=!0,d.childrenParseType=o.PROPERTY;const w=this.dataFactory.blankNode();this.emitTriple(d.subject,d.predicate,w,d.reifiedStatementId),d.subject=w,d.predicate=null}else _.value==="Collection"?(f=!0,d.hadChildren=!0,d.childrenCollectionSubject=d.subject,d.childrenCollectionPredicate=d.predicate,b=!1):_.value==="Literal"&&(f=!0,d.childrenTagsToString=!0,d.childrenStringTags=[]);continue;case"ID":this.validateNcname(_.value),d.reifiedStatementId=this.valueToUri("#"+_.value,d),this.claimNodeId(d.reifiedStatementId);continue}else if(_.uri===Tr.XML&&_.local==="lang"){d.language=_.value===""?null:_.value.toLowerCase();continue}if(_.prefix!=="xml"&&_.prefix!=="xmlns"&&(_.prefix!==""||_.local!=="xmlns")&&_.uri){if(f||d.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${_.value}`);d.hadChildren=!0,p=!0,g.push(this.uriToNamedNode(_.uri+_.local)),m.push(this.dataFactory.literal(_.value,d.datatype||d.language))}}if(y!==null){const v=d.subject;d.subject=b?this.dataFactory.blankNode(y):this.valueToUri(y,d),this.emitTriple(v,d.predicate,d.subject,d.reifiedStatementId);for(let _=0;_<g.length;_++)this.emitTriple(d.subject,g[_],m[_],null);d.predicateEmitted=!0}else b&&(d.predicateSubPredicates=g,d.predicateSubObjects=m,d.predicateEmitted=!1)}emitTriple(c,d,h,f){this.push(this.dataFactory.quad(c,d,h,this.defaultGraph)),f&&(this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Tr.RDF+"type"),this.dataFactory.namedNode(Tr.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Tr.RDF+"subject"),c,this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Tr.RDF+"predicate"),d,this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Tr.RDF+"object"),h,this.defaultGraph)))}claimNodeId(c){if(!this.allowDuplicateRdfIds){if(this.nodeIds[c.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${c.value}'.`);this.nodeIds[c.value]=!0}}onText(c){const d=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;d&&(d.childrenStringTags?d.childrenStringTags.push(c):d.predicate&&(d.text=c))}onCloseTag(){const c=this.activeTagStack.pop();if(c.childrenStringEmitClosingTag&&c.childrenStringTags.push(c.childrenStringEmitClosingTag),c.childrenTagsToString&&(c.datatype=this.dataFactory.namedNode(Tr.RDF+"XMLLiteral"),c.text=c.childrenStringTags.join(""),c.hadChildren=!1),c.childrenCollectionSubject)this.emitTriple(c.childrenCollectionSubject,c.childrenCollectionPredicate,this.dataFactory.namedNode(Tr.RDF+"nil"),c.reifiedStatementId);else if(c.predicate){if(!c.hadChildren&&c.childrenParseType!==o.PROPERTY)this.emitTriple(c.subject,c.predicate,this.dataFactory.literal(c.text||"",c.datatype||c.language),c.reifiedStatementId);else if(!c.predicateEmitted){const d=this.dataFactory.blankNode();this.emitTriple(c.subject,c.predicate,d,c.reifiedStatementId);for(let h=0;h<c.predicateSubPredicates.length;h++)this.emitTriple(d,c.predicateSubPredicates[h],c.predicateSubObjects[h],null)}}}onDoctype(c){c.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(d,h,f)=>(this.saxParser.ENTITIES[h]=f,""))}};Ts.RdfXmlParser=a,a.MIME_TYPE="application/rdf+xml",a.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a.XML="http://www.w3.org/XML/1998/namespace",a.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],a.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],a.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u;var o;return function(l){l[l.RESOURCE=0]="RESOURCE",l[l.PROPERTY=1]="PROPERTY"}(o||(Ts.ParseType=o={})),Ts}var FD;function LJ(){return FD||(FD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(jJ(),t)}(Dv)),Dv}var qD;function MJ(){if(qD)return jl;qD=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.ActorRdfParseRdfXml=void 0;const t=su(),e=LJ();let u=class extends t.ActorRdfParseFixedMediaTypes{constructor(n){super(n)}async runHandle(n){var a;n.data.on("error",o=>r.emit("error",o));const r=n.data.pipe(new e.RdfXmlParser({baseIRI:(a=n.metadata)==null?void 0:a.baseIRI}));return{data:r,metadata:{triples:!0}}}};return jl.ActorRdfParseRdfXml=u,jl}var BD;function FJ(){return BD||(BD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(MJ(),t)}(Pv)),Pv}var Fv={},Ml={},qv={},Bv={},UD;function qJ(){return UD||(UD=1,Object.defineProperty(Bv,"__esModule",{value:!0})),Bv}var Uv={},QD;function BJ(){return QD||(QD=1,Object.defineProperty(Uv,"__esModule",{value:!0})),Uv}var Qv={},HD;function UJ(){return HD||(HD=1,Object.defineProperty(Qv,"__esModule",{value:!0})),Qv}var Fl={},Hv={},ql={},$v={},Vv={},g1={},$D;function QJ(){return $D||($D=1,Object.defineProperty(g1,"__esModule",{value:!0}),g1.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(t){return t.charCodeAt(0)}))),g1}var _1={},VD;function HJ(){return VD||(VD=1,Object.defineProperty(_1,"__esModule",{value:!0}),_1.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(t){return t.charCodeAt(0)}))),_1}var kv={},kD;function zD(){return kD||(kD=1,function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCodePoint=t.fromCodePoint=void 0;var u=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);t.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(r){var a="";return r>65535&&(r-=65536,a+=String.fromCharCode(r>>>10&1023|55296),r=56320|r&1023),a+=String.fromCharCode(r),a};function s(r){var a;return r>=55296&&r<=57343||r>1114111?65533:(a=u.get(r))!==null&&a!==void 0?a:r}t.replaceCodePoint=s;function n(r){return(0,t.fromCodePoint)(s(r))}t.default=n}(kv)),kv}var GD;function Xa(){return GD||(GD=1,function(t){var e=I&&I.__createBinding||(Object.create?function(P,M,U,j){j===void 0&&(j=U);var q=Object.getOwnPropertyDescriptor(M,U);(!q||("get"in q?!M.__esModule:q.writable||q.configurable))&&(q={enumerable:!0,get:function(){return M[U]}}),Object.defineProperty(P,j,q)}:function(P,M,U,j){j===void 0&&(j=U),P[j]=M[U]}),u=I&&I.__setModuleDefault||(Object.create?function(P,M){Object.defineProperty(P,"default",{enumerable:!0,value:M})}:function(P,M){P.default=M}),s=I&&I.__importStar||function(P){if(P&&P.__esModule)return P;var M={};if(P!=null)for(var U in P)U!=="default"&&Object.prototype.hasOwnProperty.call(P,U)&&e(M,P,U);return u(M,P),M},n=I&&I.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXML=t.decodeHTMLStrict=t.decodeHTMLAttribute=t.decodeHTML=t.determineBranch=t.EntityDecoder=t.DecodingMode=t.BinTrieFlags=t.fromCodePoint=t.replaceCodePoint=t.decodeCodePoint=t.xmlDecodeTree=t.htmlDecodeTree=void 0;var r=n(QJ());t.htmlDecodeTree=r.default;var a=n(HJ());t.xmlDecodeTree=a.default;var o=s(zD());t.decodeCodePoint=o.default;var l=zD();Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return l.replaceCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return l.fromCodePoint}});var c;(function(P){P[P.NUM=35]="NUM",P[P.SEMI=59]="SEMI",P[P.EQUALS=61]="EQUALS",P[P.ZERO=48]="ZERO",P[P.NINE=57]="NINE",P[P.LOWER_A=97]="LOWER_A",P[P.LOWER_F=102]="LOWER_F",P[P.LOWER_X=120]="LOWER_X",P[P.LOWER_Z=122]="LOWER_Z",P[P.UPPER_A=65]="UPPER_A",P[P.UPPER_F=70]="UPPER_F",P[P.UPPER_Z=90]="UPPER_Z"})(c||(c={}));var d=32,h;(function(P){P[P.VALUE_LENGTH=49152]="VALUE_LENGTH",P[P.BRANCH_LENGTH=16256]="BRANCH_LENGTH",P[P.JUMP_TABLE=127]="JUMP_TABLE"})(h=t.BinTrieFlags||(t.BinTrieFlags={}));function f(P){return P>=c.ZERO&&P<=c.NINE}function p(P){return P>=c.UPPER_A&&P<=c.UPPER_F||P>=c.LOWER_A&&P<=c.LOWER_F}function y(P){return P>=c.UPPER_A&&P<=c.UPPER_Z||P>=c.LOWER_A&&P<=c.LOWER_Z||f(P)}function b(P){return P===c.EQUALS||y(P)}var g;(function(P){P[P.EntityStart=0]="EntityStart",P[P.NumericStart=1]="NumericStart",P[P.NumericDecimal=2]="NumericDecimal",P[P.NumericHex=3]="NumericHex",P[P.NamedEntity=4]="NamedEntity"})(g||(g={}));var m;(function(P){P[P.Legacy=0]="Legacy",P[P.Strict=1]="Strict",P[P.Attribute=2]="Attribute"})(m=t.DecodingMode||(t.DecodingMode={}));var v=function(){function P(M,U,j){this.decodeTree=M,this.emitCodePoint=U,this.errors=j,this.state=g.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=m.Strict}return P.prototype.startEntity=function(M){this.decodeMode=M,this.state=g.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},P.prototype.write=function(M,U){switch(this.state){case g.EntityStart:return M.charCodeAt(U)===c.NUM?(this.state=g.NumericStart,this.consumed+=1,this.stateNumericStart(M,U+1)):(this.state=g.NamedEntity,this.stateNamedEntity(M,U));case g.NumericStart:return this.stateNumericStart(M,U);case g.NumericDecimal:return this.stateNumericDecimal(M,U);case g.NumericHex:return this.stateNumericHex(M,U);case g.NamedEntity:return this.stateNamedEntity(M,U)}},P.prototype.stateNumericStart=function(M,U){return U>=M.length?-1:(M.charCodeAt(U)|d)===c.LOWER_X?(this.state=g.NumericHex,this.consumed+=1,this.stateNumericHex(M,U+1)):(this.state=g.NumericDecimal,this.stateNumericDecimal(M,U))},P.prototype.addToNumericResult=function(M,U,j,q){if(U!==j){var $=j-U;this.result=this.result*Math.pow(q,$)+parseInt(M.substr(U,$),q),this.consumed+=$}},P.prototype.stateNumericHex=function(M,U){for(var j=U;U<M.length;){var q=M.charCodeAt(U);if(f(q)||p(q))U+=1;else return this.addToNumericResult(M,j,U,16),this.emitNumericEntity(q,3)}return this.addToNumericResult(M,j,U,16),-1},P.prototype.stateNumericDecimal=function(M,U){for(var j=U;U<M.length;){var q=M.charCodeAt(U);if(f(q))U+=1;else return this.addToNumericResult(M,j,U,10),this.emitNumericEntity(q,2)}return this.addToNumericResult(M,j,U,10),-1},P.prototype.emitNumericEntity=function(M,U){var j;if(this.consumed<=U)return(j=this.errors)===null||j===void 0||j.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(M===c.SEMI)this.consumed+=1;else if(this.decodeMode===m.Strict)return 0;return this.emitCodePoint((0,o.replaceCodePoint)(this.result),this.consumed),this.errors&&(M!==c.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},P.prototype.stateNamedEntity=function(M,U){for(var j=this.decodeTree,q=j[this.treeIndex],$=(q&h.VALUE_LENGTH)>>14;U<M.length;U++,this.excess++){var Z=M.charCodeAt(U);if(this.treeIndex=w(j,q,this.treeIndex+Math.max(1,$),Z),this.treeIndex<0)return this.result===0||this.decodeMode===m.Attribute&&($===0||b(Z))?0:this.emitNotTerminatedNamedEntity();if(q=j[this.treeIndex],$=(q&h.VALUE_LENGTH)>>14,$!==0){if(Z===c.SEMI)return this.emitNamedEntityData(this.treeIndex,$,this.consumed+this.excess);this.decodeMode!==m.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},P.prototype.emitNotTerminatedNamedEntity=function(){var M,U=this,j=U.result,q=U.decodeTree,$=(q[j]&h.VALUE_LENGTH)>>14;return this.emitNamedEntityData(j,$,this.consumed),(M=this.errors)===null||M===void 0||M.missingSemicolonAfterCharacterReference(),this.consumed},P.prototype.emitNamedEntityData=function(M,U,j){var q=this.decodeTree;return this.emitCodePoint(U===1?q[M]&~h.VALUE_LENGTH:q[M+1],j),U===3&&this.emitCodePoint(q[M+2],j),j},P.prototype.end=function(){var M;switch(this.state){case g.NamedEntity:return this.result!==0&&(this.decodeMode!==m.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case g.NumericDecimal:return this.emitNumericEntity(0,2);case g.NumericHex:return this.emitNumericEntity(0,3);case g.NumericStart:return(M=this.errors)===null||M===void 0||M.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case g.EntityStart:return 0}},P}();t.EntityDecoder=v;function _(P){var M="",U=new v(P,function(j){return M+=(0,o.fromCodePoint)(j)});return function(q,$){for(var Z=0,X=0;(X=q.indexOf("&",X))>=0;){M+=q.slice(Z,X),U.startEntity($);var le=U.write(q,X+1);if(le<0){Z=X+U.end();break}Z=X+le,X=le===0?Z+1:Z}var K=M+q.slice(Z);return M="",K}}function w(P,M,U,j){var q=(M&h.BRANCH_LENGTH)>>7,$=M&h.JUMP_TABLE;if(q===0)return $!==0&&j===$?U:-1;if($){var Z=j-$;return Z<0||Z>=q?-1:P[U+Z]-1}for(var X=U,le=X+q-1;X<=le;){var K=X+le>>>1,he=P[K];if(he<j)X=K+1;else if(he>j)le=K-1;else return P[K+q]}return-1}t.determineBranch=w;var S=_(r.default),A=_(a.default);function D(P,M){return M===void 0&&(M=m.Legacy),S(P,M)}t.decodeHTML=D;function L(P){return S(P,m.Attribute)}t.decodeHTMLAttribute=L;function O(P){return S(P,m.Strict)}t.decodeHTMLStrict=O;function E(P){return A(P,m.Strict)}t.decodeXML=E}(Vv)),Vv}var WD;function u7(){return WD||(WD=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var e=Xa(),u;(function(f){f[f.Tab=9]="Tab",f[f.NewLine=10]="NewLine",f[f.FormFeed=12]="FormFeed",f[f.CarriageReturn=13]="CarriageReturn",f[f.Space=32]="Space",f[f.ExclamationMark=33]="ExclamationMark",f[f.Number=35]="Number",f[f.Amp=38]="Amp",f[f.SingleQuote=39]="SingleQuote",f[f.DoubleQuote=34]="DoubleQuote",f[f.Dash=45]="Dash",f[f.Slash=47]="Slash",f[f.Zero=48]="Zero",f[f.Nine=57]="Nine",f[f.Semi=59]="Semi",f[f.Lt=60]="Lt",f[f.Eq=61]="Eq",f[f.Gt=62]="Gt",f[f.Questionmark=63]="Questionmark",f[f.UpperA=65]="UpperA",f[f.LowerA=97]="LowerA",f[f.UpperF=70]="UpperF",f[f.LowerF=102]="LowerF",f[f.UpperZ=90]="UpperZ",f[f.LowerZ=122]="LowerZ",f[f.LowerX=120]="LowerX",f[f.OpeningSquareBracket=91]="OpeningSquareBracket"})(u||(u={}));var s;(function(f){f[f.Text=1]="Text",f[f.BeforeTagName=2]="BeforeTagName",f[f.InTagName=3]="InTagName",f[f.InSelfClosingTag=4]="InSelfClosingTag",f[f.BeforeClosingTagName=5]="BeforeClosingTagName",f[f.InClosingTagName=6]="InClosingTagName",f[f.AfterClosingTagName=7]="AfterClosingTagName",f[f.BeforeAttributeName=8]="BeforeAttributeName",f[f.InAttributeName=9]="InAttributeName",f[f.AfterAttributeName=10]="AfterAttributeName",f[f.BeforeAttributeValue=11]="BeforeAttributeValue",f[f.InAttributeValueDq=12]="InAttributeValueDq",f[f.InAttributeValueSq=13]="InAttributeValueSq",f[f.InAttributeValueNq=14]="InAttributeValueNq",f[f.BeforeDeclaration=15]="BeforeDeclaration",f[f.InDeclaration=16]="InDeclaration",f[f.InProcessingInstruction=17]="InProcessingInstruction",f[f.BeforeComment=18]="BeforeComment",f[f.CDATASequence=19]="CDATASequence",f[f.InSpecialComment=20]="InSpecialComment",f[f.InCommentLike=21]="InCommentLike",f[f.BeforeSpecialS=22]="BeforeSpecialS",f[f.SpecialStartSequence=23]="SpecialStartSequence",f[f.InSpecialTag=24]="InSpecialTag",f[f.BeforeEntity=25]="BeforeEntity",f[f.BeforeNumericEntity=26]="BeforeNumericEntity",f[f.InNamedEntity=27]="InNamedEntity",f[f.InNumericEntity=28]="InNumericEntity",f[f.InHexEntity=29]="InHexEntity"})(s||(s={}));function n(f){return f===u.Space||f===u.NewLine||f===u.Tab||f===u.FormFeed||f===u.CarriageReturn}function r(f){return f===u.Slash||f===u.Gt||n(f)}function a(f){return f>=u.Zero&&f<=u.Nine}function o(f){return f>=u.LowerA&&f<=u.LowerZ||f>=u.UpperA&&f<=u.UpperZ}function l(f){return f>=u.UpperA&&f<=u.UpperF||f>=u.LowerA&&f<=u.LowerF}var c;(function(f){f[f.NoValue=0]="NoValue",f[f.Unquoted=1]="Unquoted",f[f.Single=2]="Single",f[f.Double=3]="Double"})(c=t.QuoteType||(t.QuoteType={}));var d={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},h=function(){function f(p,y){var b=p.xmlMode,g=b===void 0?!1:b,m=p.decodeEntities,v=m===void 0?!0:m;this.cbs=y,this.state=s.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=s.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=g,this.decodeEntities=v,this.entityTrie=g?e.xmlDecodeTree:e.htmlDecodeTree}return f.prototype.reset=function(){this.state=s.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=s.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},f.prototype.write=function(p){this.offset+=this.buffer.length,this.buffer=p,this.parse()},f.prototype.end=function(){this.running&&this.finish()},f.prototype.pause=function(){this.running=!1},f.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},f.prototype.getIndex=function(){return this.index},f.prototype.getSectionStart=function(){return this.sectionStart},f.prototype.stateText=function(p){p===u.Lt||!this.decodeEntities&&this.fastForwardTo(u.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=s.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&p===u.Amp&&(this.state=s.BeforeEntity)},f.prototype.stateSpecialStartSequence=function(p){var y=this.sequenceIndex===this.currentSequence.length,b=y?r(p):(p|32)===this.currentSequence[this.sequenceIndex];if(!b)this.isSpecial=!1;else if(!y){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=s.InTagName,this.stateInTagName(p)},f.prototype.stateInSpecialTag=function(p){if(this.sequenceIndex===this.currentSequence.length){if(p===u.Gt||n(p)){var y=this.index-this.currentSequence.length;if(this.sectionStart<y){var b=this.index;this.index=y,this.cbs.ontext(this.sectionStart,y),this.index=b}this.isSpecial=!1,this.sectionStart=y+2,this.stateInClosingTagName(p);return}this.sequenceIndex=0}(p|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===d.TitleEnd?this.decodeEntities&&p===u.Amp&&(this.state=s.BeforeEntity):this.fastForwardTo(u.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(p===u.Lt)},f.prototype.stateCDATASequence=function(p){p===d.Cdata[this.sequenceIndex]?++this.sequenceIndex===d.Cdata.length&&(this.state=s.InCommentLike,this.currentSequence=d.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=s.InDeclaration,this.stateInDeclaration(p))},f.prototype.fastForwardTo=function(p){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===p)return!0;return this.index=this.buffer.length+this.offset-1,!1},f.prototype.stateInCommentLike=function(p){p===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=s.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):p!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},f.prototype.isTagStartChar=function(p){return this.xmlMode?!r(p):o(p)},f.prototype.startSpecial=function(p,y){this.isSpecial=!0,this.currentSequence=p,this.sequenceIndex=y,this.state=s.SpecialStartSequence},f.prototype.stateBeforeTagName=function(p){if(p===u.ExclamationMark)this.state=s.BeforeDeclaration,this.sectionStart=this.index+1;else if(p===u.Questionmark)this.state=s.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(p)){var y=p|32;this.sectionStart=this.index,!this.xmlMode&&y===d.TitleEnd[2]?this.startSpecial(d.TitleEnd,3):this.state=!this.xmlMode&&y===d.ScriptEnd[2]?s.BeforeSpecialS:s.InTagName}else p===u.Slash?this.state=s.BeforeClosingTagName:(this.state=s.Text,this.stateText(p))},f.prototype.stateInTagName=function(p){r(p)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(p))},f.prototype.stateBeforeClosingTagName=function(p){n(p)||(p===u.Gt?this.state=s.Text:(this.state=this.isTagStartChar(p)?s.InClosingTagName:s.InSpecialComment,this.sectionStart=this.index))},f.prototype.stateInClosingTagName=function(p){(p===u.Gt||n(p))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=s.AfterClosingTagName,this.stateAfterClosingTagName(p))},f.prototype.stateAfterClosingTagName=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.state=s.Text,this.baseState=s.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeAttributeName=function(p){p===u.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=s.InSpecialTag,this.sequenceIndex=0):this.state=s.Text,this.baseState=this.state,this.sectionStart=this.index+1):p===u.Slash?this.state=s.InSelfClosingTag:n(p)||(this.state=s.InAttributeName,this.sectionStart=this.index)},f.prototype.stateInSelfClosingTag=function(p){p===u.Gt?(this.cbs.onselfclosingtag(this.index),this.state=s.Text,this.baseState=s.Text,this.sectionStart=this.index+1,this.isSpecial=!1):n(p)||(this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(p))},f.prototype.stateInAttributeName=function(p){(p===u.Eq||r(p))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=s.AfterAttributeName,this.stateAfterAttributeName(p))},f.prototype.stateAfterAttributeName=function(p){p===u.Eq?this.state=s.BeforeAttributeValue:p===u.Slash||p===u.Gt?(this.cbs.onattribend(c.NoValue,this.index),this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(p)):n(p)||(this.cbs.onattribend(c.NoValue,this.index),this.state=s.InAttributeName,this.sectionStart=this.index)},f.prototype.stateBeforeAttributeValue=function(p){p===u.DoubleQuote?(this.state=s.InAttributeValueDq,this.sectionStart=this.index+1):p===u.SingleQuote?(this.state=s.InAttributeValueSq,this.sectionStart=this.index+1):n(p)||(this.sectionStart=this.index,this.state=s.InAttributeValueNq,this.stateInAttributeValueNoQuotes(p))},f.prototype.handleInAttributeValue=function(p,y){p===y||!this.decodeEntities&&this.fastForwardTo(y)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(y===u.DoubleQuote?c.Double:c.Single,this.index),this.state=s.BeforeAttributeName):this.decodeEntities&&p===u.Amp&&(this.baseState=this.state,this.state=s.BeforeEntity)},f.prototype.stateInAttributeValueDoubleQuotes=function(p){this.handleInAttributeValue(p,u.DoubleQuote)},f.prototype.stateInAttributeValueSingleQuotes=function(p){this.handleInAttributeValue(p,u.SingleQuote)},f.prototype.stateInAttributeValueNoQuotes=function(p){n(p)||p===u.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(c.Unquoted,this.index),this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(p)):this.decodeEntities&&p===u.Amp&&(this.baseState=this.state,this.state=s.BeforeEntity)},f.prototype.stateBeforeDeclaration=function(p){p===u.OpeningSquareBracket?(this.state=s.CDATASequence,this.sequenceIndex=0):this.state=p===u.Dash?s.BeforeComment:s.InDeclaration},f.prototype.stateInDeclaration=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=s.Text,this.sectionStart=this.index+1)},f.prototype.stateInProcessingInstruction=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=s.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeComment=function(p){p===u.Dash?(this.state=s.InCommentLike,this.currentSequence=d.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=s.InDeclaration},f.prototype.stateInSpecialComment=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=s.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeSpecialS=function(p){var y=p|32;y===d.ScriptEnd[3]?this.startSpecial(d.ScriptEnd,4):y===d.StyleEnd[3]?this.startSpecial(d.StyleEnd,4):(this.state=s.InTagName,this.stateInTagName(p))},f.prototype.stateBeforeEntity=function(p){this.entityExcess=1,this.entityResult=0,p===u.Number?this.state=s.BeforeNumericEntity:p===u.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=s.InNamedEntity,this.stateInNamedEntity(p))},f.prototype.stateInNamedEntity=function(p){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,p),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var y=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(y){var b=(y>>14)-1;if(!this.allowLegacyEntity()&&p!==u.Semi)this.trieIndex+=b;else{var g=this.index-this.entityExcess+1;g>this.sectionStart&&this.emitPartial(this.sectionStart,g),this.entityResult=this.trieIndex,this.trieIndex+=b,this.entityExcess=0,this.sectionStart=this.index+1,b===0&&this.emitNamedEntity()}}},f.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var p=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(p){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},f.prototype.stateBeforeNumericEntity=function(p){(p|32)===u.LowerX?(this.entityExcess++,this.state=s.InHexEntity):(this.state=s.InNumericEntity,this.stateInNumericEntity(p))},f.prototype.emitNumericEntity=function(p){var y=this.index-this.entityExcess-1,b=y+2+ +(this.state===s.InHexEntity);b!==this.index&&(y>this.sectionStart&&this.emitPartial(this.sectionStart,y),this.sectionStart=this.index+Number(p),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},f.prototype.stateInNumericEntity=function(p){p===u.Semi?this.emitNumericEntity(!0):a(p)?(this.entityResult=this.entityResult*10+(p-u.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.stateInHexEntity=function(p){p===u.Semi?this.emitNumericEntity(!0):a(p)?(this.entityResult=this.entityResult*16+(p-u.Zero),this.entityExcess++):l(p)?(this.entityResult=this.entityResult*16+((p|32)-u.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===s.Text||this.baseState===s.InSpecialTag)},f.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===s.Text||this.state===s.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===s.InAttributeValueDq||this.state===s.InAttributeValueSq||this.state===s.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},f.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},f.prototype.parse=function(){for(;this.shouldContinue();){var p=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case s.Text:{this.stateText(p);break}case s.SpecialStartSequence:{this.stateSpecialStartSequence(p);break}case s.InSpecialTag:{this.stateInSpecialTag(p);break}case s.CDATASequence:{this.stateCDATASequence(p);break}case s.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(p);break}case s.InAttributeName:{this.stateInAttributeName(p);break}case s.InCommentLike:{this.stateInCommentLike(p);break}case s.InSpecialComment:{this.stateInSpecialComment(p);break}case s.BeforeAttributeName:{this.stateBeforeAttributeName(p);break}case s.InTagName:{this.stateInTagName(p);break}case s.InClosingTagName:{this.stateInClosingTagName(p);break}case s.BeforeTagName:{this.stateBeforeTagName(p);break}case s.AfterAttributeName:{this.stateAfterAttributeName(p);break}case s.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(p);break}case s.BeforeAttributeValue:{this.stateBeforeAttributeValue(p);break}case s.BeforeClosingTagName:{this.stateBeforeClosingTagName(p);break}case s.AfterClosingTagName:{this.stateAfterClosingTagName(p);break}case s.BeforeSpecialS:{this.stateBeforeSpecialS(p);break}case s.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(p);break}case s.InSelfClosingTag:{this.stateInSelfClosingTag(p);break}case s.InDeclaration:{this.stateInDeclaration(p);break}case s.BeforeDeclaration:{this.stateBeforeDeclaration(p);break}case s.BeforeComment:{this.stateBeforeComment(p);break}case s.InProcessingInstruction:{this.stateInProcessingInstruction(p);break}case s.InNamedEntity:{this.stateInNamedEntity(p);break}case s.BeforeEntity:{this.stateBeforeEntity(p);break}case s.InHexEntity:{this.stateInHexEntity(p);break}case s.InNumericEntity:{this.stateInNumericEntity(p);break}default:this.stateBeforeNumericEntity(p)}this.index++}this.cleanup()},f.prototype.finish=function(){this.state===s.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},f.prototype.handleTrailingData=function(){var p=this.buffer.length+this.offset;this.state===s.InCommentLike?this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,p,0):this.cbs.oncomment(this.sectionStart,p,0):this.state===s.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===s.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===s.InTagName||this.state===s.BeforeAttributeName||this.state===s.BeforeAttributeValue||this.state===s.AfterAttributeName||this.state===s.InAttributeName||this.state===s.InAttributeValueSq||this.state===s.InAttributeValueDq||this.state===s.InAttributeValueNq||this.state===s.InClosingTagName||this.cbs.ontext(this.sectionStart,p)},f.prototype.emitPartial=function(p,y){this.baseState!==s.Text&&this.baseState!==s.InSpecialTag?this.cbs.onattribdata(p,y):this.cbs.ontext(p,y)},f.prototype.emitCodePoint=function(p){this.baseState!==s.Text&&this.baseState!==s.InSpecialTag?this.cbs.onattribentity(p):this.cbs.ontextentity(p)},f}();t.default=h}($v)),$v}var JD;function XD(){if(JD)return ql;JD=1;var t=I&&I.__createBinding||(Object.create?function(g,m,v,_){_===void 0&&(_=v);var w=Object.getOwnPropertyDescriptor(m,v);(!w||("get"in w?!m.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(g,_,w)}:function(g,m,v,_){_===void 0&&(_=v),g[_]=m[v]}),e=I&&I.__setModuleDefault||(Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m}),u=I&&I.__importStar||function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var v in g)v!=="default"&&Object.prototype.hasOwnProperty.call(g,v)&&t(m,g,v);return e(m,g),m};Object.defineProperty(ql,"__esModule",{value:!0}),ql.Parser=void 0;var s=u(u7()),n=Xa(),r=new Set(["input","option","optgroup","select","button","datalist","textarea"]),a=new Set(["p"]),o=new Set(["thead","tbody"]),l=new Set(["dd","dt"]),c=new Set(["rt","rp"]),d=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",a],["h1",a],["h2",a],["h3",a],["h4",a],["h5",a],["h6",a],["select",r],["input",r],["output",r],["button",r],["datalist",r],["textarea",r],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",l],["dt",l],["address",a],["article",a],["aside",a],["blockquote",a],["details",a],["div",a],["dl",a],["fieldset",a],["figcaption",a],["figure",a],["footer",a],["form",a],["header",a],["hr",a],["main",a],["nav",a],["ol",a],["pre",a],["section",a],["table",a],["ul",a],["rt",c],["rp",c],["tbody",o],["tfoot",o]]),h=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),y=/\s|\//,b=function(){function g(m,v){v===void 0&&(v={});var _,w,S,A,D;this.options=v,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=m??{},this.lowerCaseTagNames=(_=v.lowerCaseTags)!==null&&_!==void 0?_:!v.xmlMode,this.lowerCaseAttributeNames=(w=v.lowerCaseAttributeNames)!==null&&w!==void 0?w:!v.xmlMode,this.tokenizer=new((S=v.Tokenizer)!==null&&S!==void 0?S:s.default)(this.options,this),(D=(A=this.cbs).onparserinit)===null||D===void 0||D.call(A,this)}return g.prototype.ontext=function(m,v){var _,w,S=this.getSlice(m,v);this.endIndex=v-1,(w=(_=this.cbs).ontext)===null||w===void 0||w.call(_,S),this.startIndex=v},g.prototype.ontextentity=function(m){var v,_,w=this.tokenizer.getSectionStart();this.endIndex=w-1,(_=(v=this.cbs).ontext)===null||_===void 0||_.call(v,(0,n.fromCodePoint)(m)),this.startIndex=w},g.prototype.isVoidElement=function(m){return!this.options.xmlMode&&h.has(m)},g.prototype.onopentagname=function(m,v){this.endIndex=v;var _=this.getSlice(m,v);this.lowerCaseTagNames&&(_=_.toLowerCase()),this.emitOpenTag(_)},g.prototype.emitOpenTag=function(m){var v,_,w,S;this.openTagStart=this.startIndex,this.tagname=m;var A=!this.options.xmlMode&&d.get(m);if(A)for(;this.stack.length>0&&A.has(this.stack[this.stack.length-1]);){var D=this.stack.pop();(_=(v=this.cbs).onclosetag)===null||_===void 0||_.call(v,D,!0)}this.isVoidElement(m)||(this.stack.push(m),f.has(m)?this.foreignContext.push(!0):p.has(m)&&this.foreignContext.push(!1)),(S=(w=this.cbs).onopentagname)===null||S===void 0||S.call(w,m),this.cbs.onopentag&&(this.attribs={})},g.prototype.endOpenTag=function(m){var v,_;this.startIndex=this.openTagStart,this.attribs&&((_=(v=this.cbs).onopentag)===null||_===void 0||_.call(v,this.tagname,this.attribs,m),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},g.prototype.onopentagend=function(m){this.endIndex=m,this.endOpenTag(!1),this.startIndex=m+1},g.prototype.onclosetag=function(m,v){var _,w,S,A,D,L;this.endIndex=v;var O=this.getSlice(m,v);if(this.lowerCaseTagNames&&(O=O.toLowerCase()),(f.has(O)||p.has(O))&&this.foreignContext.pop(),this.isVoidElement(O))!this.options.xmlMode&&O==="br"&&((w=(_=this.cbs).onopentagname)===null||w===void 0||w.call(_,"br"),(A=(S=this.cbs).onopentag)===null||A===void 0||A.call(S,"br",{},!0),(L=(D=this.cbs).onclosetag)===null||L===void 0||L.call(D,"br",!1));else{var E=this.stack.lastIndexOf(O);if(E!==-1)if(this.cbs.onclosetag)for(var P=this.stack.length-E;P--;)this.cbs.onclosetag(this.stack.pop(),P!==0);else this.stack.length=E;else!this.options.xmlMode&&O==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=v+1},g.prototype.onselfclosingtag=function(m){this.endIndex=m,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=m+1):this.onopentagend(m)},g.prototype.closeCurrentTag=function(m){var v,_,w=this.tagname;this.endOpenTag(m),this.stack[this.stack.length-1]===w&&((_=(v=this.cbs).onclosetag)===null||_===void 0||_.call(v,w,!m),this.stack.pop())},g.prototype.onattribname=function(m,v){this.startIndex=m;var _=this.getSlice(m,v);this.attribname=this.lowerCaseAttributeNames?_.toLowerCase():_},g.prototype.onattribdata=function(m,v){this.attribvalue+=this.getSlice(m,v)},g.prototype.onattribentity=function(m){this.attribvalue+=(0,n.fromCodePoint)(m)},g.prototype.onattribend=function(m,v){var _,w;this.endIndex=v,(w=(_=this.cbs).onattribute)===null||w===void 0||w.call(_,this.attribname,this.attribvalue,m===s.QuoteType.Double?'"':m===s.QuoteType.Single?"'":m===s.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},g.prototype.getInstructionName=function(m){var v=m.search(y),_=v<0?m:m.substr(0,v);return this.lowerCaseTagNames&&(_=_.toLowerCase()),_},g.prototype.ondeclaration=function(m,v){this.endIndex=v;var _=this.getSlice(m,v);if(this.cbs.onprocessinginstruction){var w=this.getInstructionName(_);this.cbs.onprocessinginstruction("!".concat(w),"!".concat(_))}this.startIndex=v+1},g.prototype.onprocessinginstruction=function(m,v){this.endIndex=v;var _=this.getSlice(m,v);if(this.cbs.onprocessinginstruction){var w=this.getInstructionName(_);this.cbs.onprocessinginstruction("?".concat(w),"?".concat(_))}this.startIndex=v+1},g.prototype.oncomment=function(m,v,_){var w,S,A,D;this.endIndex=v,(S=(w=this.cbs).oncomment)===null||S===void 0||S.call(w,this.getSlice(m,v-_)),(D=(A=this.cbs).oncommentend)===null||D===void 0||D.call(A),this.startIndex=v+1},g.prototype.oncdata=function(m,v,_){var w,S,A,D,L,O,E,P,M,U;this.endIndex=v;var j=this.getSlice(m,v-_);this.options.xmlMode||this.options.recognizeCDATA?((S=(w=this.cbs).oncdatastart)===null||S===void 0||S.call(w),(D=(A=this.cbs).ontext)===null||D===void 0||D.call(A,j),(O=(L=this.cbs).oncdataend)===null||O===void 0||O.call(L)):((P=(E=this.cbs).oncomment)===null||P===void 0||P.call(E,"[CDATA[".concat(j,"]]")),(U=(M=this.cbs).oncommentend)===null||U===void 0||U.call(M)),this.startIndex=v+1},g.prototype.onend=function(){var m,v;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var _=this.stack.length;_>0;this.cbs.onclosetag(this.stack[--_],!0));}(v=(m=this.cbs).onend)===null||v===void 0||v.call(m)},g.prototype.reset=function(){var m,v,_,w;(v=(m=this.cbs).onreset)===null||v===void 0||v.call(m),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(w=(_=this.cbs).onparserinit)===null||w===void 0||w.call(_,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},g.prototype.parseComplete=function(m){this.reset(),this.end(m)},g.prototype.getSlice=function(m,v){for(;m-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var _=this.buffers[0].slice(m-this.bufferOffset,v-this.bufferOffset);v-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),_+=this.buffers[0].slice(0,v-this.bufferOffset);return _},g.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},g.prototype.write=function(m){var v,_;if(this.ended){(_=(v=this.cbs).onerror)===null||_===void 0||_.call(v,new Error(".write() after done!"));return}this.buffers.push(m),this.tokenizer.running&&(this.tokenizer.write(m),this.writeIndex++)},g.prototype.end=function(m){var v,_;if(this.ended){(_=(v=this.cbs).onerror)===null||_===void 0||_.call(v,new Error(".end() after done!"));return}m&&this.write(m),this.ended=!0,this.tokenizer.end()},g.prototype.pause=function(){this.tokenizer.pause()},g.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},g.prototype.parseChunk=function(m){this.write(m)},g.prototype.done=function(m){this.end(m)},g}();return ql.Parser=b,ql}var zv={},Gv={},KD;function to(){return KD||(KD=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0;var e;(function(s){s.Root="root",s.Text="text",s.Directive="directive",s.Comment="comment",s.Script="script",s.Style="style",s.Tag="tag",s.CDATA="cdata",s.Doctype="doctype"})(e=t.ElementType||(t.ElementType={}));function u(s){return s.type===e.Tag||s.type===e.Script||s.type===e.Style}t.isTag=u,t.Root=e.Root,t.Text=e.Text,t.Directive=e.Directive,t.Comment=e.Comment,t.Script=e.Script,t.Style=e.Style,t.Tag=e.Tag,t.CDATA=e.CDATA,t.Doctype=e.Doctype}(Gv)),Gv}var Ft={},YD;function ZD(){if(YD)return Ft;YD=1;var t=I&&I.__extends||function(){var S=function(A,D){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,O){L.__proto__=O}||function(L,O){for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&(L[E]=O[E])},S(A,D)};return function(A,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");S(A,D);function L(){this.constructor=A}A.prototype=D===null?Object.create(D):(L.prototype=D.prototype,new L)}}(),e=I&&I.__assign||function(){return e=Object.assign||function(S){for(var A,D=1,L=arguments.length;D<L;D++){A=arguments[D];for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(S[O]=A[O])}return S},e.apply(this,arguments)};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.cloneNode=Ft.hasChildren=Ft.isDocument=Ft.isDirective=Ft.isComment=Ft.isText=Ft.isCDATA=Ft.isTag=Ft.Element=Ft.Document=Ft.CDATA=Ft.NodeWithChildren=Ft.ProcessingInstruction=Ft.Comment=Ft.Text=Ft.DataNode=Ft.Node=void 0;var u=to(),s=function(){function S(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(S.prototype,"parentNode",{get:function(){return this.parent},set:function(A){this.parent=A},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"previousSibling",{get:function(){return this.prev},set:function(A){this.prev=A},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"nextSibling",{get:function(){return this.next},set:function(A){this.next=A},enumerable:!1,configurable:!0}),S.prototype.cloneNode=function(A){return A===void 0&&(A=!1),_(this,A)},S}();Ft.Node=s;var n=function(S){t(A,S);function A(D){var L=S.call(this)||this;return L.data=D,L}return Object.defineProperty(A.prototype,"nodeValue",{get:function(){return this.data},set:function(D){this.data=D},enumerable:!1,configurable:!0}),A}(s);Ft.DataNode=n;var r=function(S){t(A,S);function A(){var D=S!==null&&S.apply(this,arguments)||this;return D.type=u.ElementType.Text,D}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),A}(n);Ft.Text=r;var a=function(S){t(A,S);function A(){var D=S!==null&&S.apply(this,arguments)||this;return D.type=u.ElementType.Comment,D}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),A}(n);Ft.Comment=a;var o=function(S){t(A,S);function A(D,L){var O=S.call(this,L)||this;return O.name=D,O.type=u.ElementType.Directive,O}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),A}(n);Ft.ProcessingInstruction=o;var l=function(S){t(A,S);function A(D){var L=S.call(this)||this;return L.children=D,L}return Object.defineProperty(A.prototype,"firstChild",{get:function(){var D;return(D=this.children[0])!==null&&D!==void 0?D:null},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"childNodes",{get:function(){return this.children},set:function(D){this.children=D},enumerable:!1,configurable:!0}),A}(s);Ft.NodeWithChildren=l;var c=function(S){t(A,S);function A(){var D=S!==null&&S.apply(this,arguments)||this;return D.type=u.ElementType.CDATA,D}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),A}(l);Ft.CDATA=c;var d=function(S){t(A,S);function A(){var D=S!==null&&S.apply(this,arguments)||this;return D.type=u.ElementType.Root,D}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),A}(l);Ft.Document=d;var h=function(S){t(A,S);function A(D,L,O,E){O===void 0&&(O=[]),E===void 0&&(E=D==="script"?u.ElementType.Script:D==="style"?u.ElementType.Style:u.ElementType.Tag);var P=S.call(this,O)||this;return P.name=D,P.attribs=L,P.type=E,P}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"tagName",{get:function(){return this.name},set:function(D){this.name=D},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"attributes",{get:function(){var D=this;return Object.keys(this.attribs).map(function(L){var O,E;return{name:L,value:D.attribs[L],namespace:(O=D["x-attribsNamespace"])===null||O===void 0?void 0:O[L],prefix:(E=D["x-attribsPrefix"])===null||E===void 0?void 0:E[L]}})},enumerable:!1,configurable:!0}),A}(l);Ft.Element=h;function f(S){return(0,u.isTag)(S)}Ft.isTag=f;function p(S){return S.type===u.ElementType.CDATA}Ft.isCDATA=p;function y(S){return S.type===u.ElementType.Text}Ft.isText=y;function b(S){return S.type===u.ElementType.Comment}Ft.isComment=b;function g(S){return S.type===u.ElementType.Directive}Ft.isDirective=g;function m(S){return S.type===u.ElementType.Root}Ft.isDocument=m;function v(S){return Object.prototype.hasOwnProperty.call(S,"children")}Ft.hasChildren=v;function _(S,A){A===void 0&&(A=!1);var D;if(y(S))D=new r(S.data);else if(b(S))D=new a(S.data);else if(f(S)){var L=A?w(S.children):[],O=new h(S.name,e({},S.attribs),L);L.forEach(function(U){return U.parent=O}),S.namespace!=null&&(O.namespace=S.namespace),S["x-attribsNamespace"]&&(O["x-attribsNamespace"]=e({},S["x-attribsNamespace"])),S["x-attribsPrefix"]&&(O["x-attribsPrefix"]=e({},S["x-attribsPrefix"])),D=O}else if(p(S)){var L=A?w(S.children):[],E=new c(L);L.forEach(function(j){return j.parent=E}),D=E}else if(m(S)){var L=A?w(S.children):[],P=new d(L);L.forEach(function(j){return j.parent=P}),S["x-mode"]&&(P["x-mode"]=S["x-mode"]),D=P}else if(g(S)){var M=new o(S.name,S.data);S["x-name"]!=null&&(M["x-name"]=S["x-name"],M["x-publicId"]=S["x-publicId"],M["x-systemId"]=S["x-systemId"]),D=M}else throw new Error("Not implemented yet: ".concat(S.type));return D.startIndex=S.startIndex,D.endIndex=S.endIndex,S.sourceCodeLocation!=null&&(D.sourceCodeLocation=S.sourceCodeLocation),D}Ft.cloneNode=_;function w(S){for(var A=S.map(function(L){return _(L,!0)}),D=1;D<A.length;D++)A[D].prev=A[D-1],A[D-1].next=A[D];return A}return Ft}var eN;function ui(){return eN||(eN=1,function(t){var e=I&&I.__createBinding||(Object.create?function(o,l,c,d){d===void 0&&(d=c);var h=Object.getOwnPropertyDescriptor(l,c);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(o,d,h)}:function(o,l,c,d){d===void 0&&(d=c),o[d]=l[c]}),u=I&&I.__exportStar||function(o,l){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&e(l,o,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var s=to(),n=ZD();u(ZD(),t);var r={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},a=function(){function o(l,c,d){this.dom=[],this.root=new n.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof c=="function"&&(d=c,c=r),typeof l=="object"&&(c=l,l=void 0),this.callback=l??null,this.options=c??r,this.elementCB=d??null}return o.prototype.onparserinit=function(l){this.parser=l},o.prototype.onreset=function(){this.dom=[],this.root=new n.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(l){this.handleCallback(l)},o.prototype.onclosetag=function(){this.lastNode=null;var l=this.tagStack.pop();this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(l)},o.prototype.onopentag=function(l,c){var d=this.options.xmlMode?s.ElementType.Tag:void 0,h=new n.Element(l,c,void 0,d);this.addNode(h),this.tagStack.push(h)},o.prototype.ontext=function(l){var c=this.lastNode;if(c&&c.type===s.ElementType.Text)c.data+=l,this.options.withEndIndices&&(c.endIndex=this.parser.endIndex);else{var d=new n.Text(l);this.addNode(d),this.lastNode=d}},o.prototype.oncomment=function(l){if(this.lastNode&&this.lastNode.type===s.ElementType.Comment){this.lastNode.data+=l;return}var c=new n.Comment(l);this.addNode(c),this.lastNode=c},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var l=new n.Text(""),c=new n.CDATA([l]);this.addNode(c),l.parent=c,this.lastNode=l},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(l,c){var d=new n.ProcessingInstruction(l,c);this.addNode(d)},o.prototype.handleCallback=function(l){if(typeof this.callback=="function")this.callback(l,this.dom);else if(l)throw l},o.prototype.addNode=function(l){var c=this.tagStack[this.tagStack.length-1],d=c.children[c.children.length-1];this.options.withStartIndices&&(l.startIndex=this.parser.startIndex),this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),c.children.push(l),d&&(l.prev=d,d.next=l),l.parent=c,this.lastNode=null},o}();t.DomHandler=a,t.default=a}(zv)),zv}var Wv={},zn={},go={},Jv={},Es={},v1={},tN;function $J(){if(tN)return v1;tN=1,Object.defineProperty(v1,"__esModule",{value:!0});function t(e){for(var u=1;u<e.length;u++)e[u][0]+=e[u-1][0]+1;return e}return v1.default=new Map(t([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(t([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(t([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(t([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),v1}var Xv={},rN;function v3(){return rN||(rN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.getCodePoint=t.xmlReplacer=void 0,t.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var e=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);t.getCodePoint=String.prototype.codePointAt!=null?function(n,r){return n.codePointAt(r)}:function(n,r){return(n.charCodeAt(r)&64512)===55296?(n.charCodeAt(r)-55296)*1024+n.charCodeAt(r+1)-56320+65536:n.charCodeAt(r)};function u(n){for(var r="",a=0,o;(o=t.xmlReplacer.exec(n))!==null;){var l=o.index,c=n.charCodeAt(l),d=e.get(c);d!==void 0?(r+=n.substring(a,l)+d,a=l+1):(r+="".concat(n.substring(a,l),"&#x").concat((0,t.getCodePoint)(n,l).toString(16),";"),a=t.xmlReplacer.lastIndex+=+((c&64512)===55296))}return r+n.substr(a)}t.encodeXML=u,t.escape=u;function s(n,r){return function(o){for(var l,c=0,d="";l=n.exec(o);)c!==l.index&&(d+=o.substring(c,l.index)),d+=r.get(l[0].charCodeAt(0)),c=l.index+1;return d+o.substring(c)}}t.escapeUTF8=s(/[&<>'"]/g,e),t.escapeAttribute=s(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),t.escapeText=s(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))}(Xv)),Xv}var nN;function iN(){if(nN)return Es;nN=1;var t=I&&I.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Es,"__esModule",{value:!0}),Es.encodeNonAsciiHTML=Es.encodeHTML=void 0;var e=t($J()),u=v3(),s=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function n(o){return a(s,o)}Es.encodeHTML=n;function r(o){return a(u.xmlReplacer,o)}Es.encodeNonAsciiHTML=r;function a(o,l){for(var c="",d=0,h;(h=o.exec(l))!==null;){var f=h.index;c+=l.substring(d,f);var p=l.charCodeAt(f),y=e.default.get(p);if(typeof y=="object"){if(f+1<l.length){var b=l.charCodeAt(f+1),g=typeof y.n=="number"?y.n===b?y.o:void 0:y.n.get(b);if(g!==void 0){c+=g,d=o.lastIndex+=1;continue}}y=y.v}if(y!==void 0)c+=y,d=f+1;else{var m=(0,u.getCodePoint)(l,f);c+="&#x".concat(m.toString(16),";"),d=o.lastIndex+=+(m!==p)}}return c+l.substr(d)}return Es}var aN;function VJ(){return aN||(aN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLAttribute=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.DecodingMode=t.EntityDecoder=t.encodeHTML5=t.encodeHTML4=t.encodeNonAsciiHTML=t.encodeHTML=t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.encode=t.decodeStrict=t.decode=t.EncodingMode=t.EntityLevel=void 0;var e=Xa(),u=iN(),s=v3(),n;(function(f){f[f.XML=0]="XML",f[f.HTML=1]="HTML"})(n=t.EntityLevel||(t.EntityLevel={}));var r;(function(f){f[f.UTF8=0]="UTF8",f[f.ASCII=1]="ASCII",f[f.Extensive=2]="Extensive",f[f.Attribute=3]="Attribute",f[f.Text=4]="Text"})(r=t.EncodingMode||(t.EncodingMode={}));function a(f,p){p===void 0&&(p=n.XML);var y=typeof p=="number"?p:p.level;if(y===n.HTML){var b=typeof p=="object"?p.mode:void 0;return(0,e.decodeHTML)(f,b)}return(0,e.decodeXML)(f)}t.decode=a;function o(f,p){var y;p===void 0&&(p=n.XML);var b=typeof p=="number"?{level:p}:p;return(y=b.mode)!==null&&y!==void 0||(b.mode=e.DecodingMode.Strict),a(f,b)}t.decodeStrict=o;function l(f,p){p===void 0&&(p=n.XML);var y=typeof p=="number"?{level:p}:p;return y.mode===r.UTF8?(0,s.escapeUTF8)(f):y.mode===r.Attribute?(0,s.escapeAttribute)(f):y.mode===r.Text?(0,s.escapeText)(f):y.level===n.HTML?y.mode===r.ASCII?(0,u.encodeNonAsciiHTML)(f):(0,u.encodeHTML)(f):(0,s.encodeXML)(f)}t.encode=l;var c=v3();Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return c.encodeXML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return c.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return c.escapeUTF8}}),Object.defineProperty(t,"escapeAttribute",{enumerable:!0,get:function(){return c.escapeAttribute}}),Object.defineProperty(t,"escapeText",{enumerable:!0,get:function(){return c.escapeText}});var d=iN();Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return d.encodeNonAsciiHTML}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return d.encodeHTML}});var h=Xa();Object.defineProperty(t,"EntityDecoder",{enumerable:!0,get:function(){return h.EntityDecoder}}),Object.defineProperty(t,"DecodingMode",{enumerable:!0,get:function(){return h.DecodingMode}}),Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return h.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTMLAttribute",{enumerable:!0,get:function(){return h.decodeHTMLAttribute}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return h.decodeXML}})}(Jv)),Jv}var Os={},sN;function kJ(){return sN||(sN=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.attributeNames=Os.elementNames=void 0,Os.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(t){return[t.toLowerCase(),t]})),Os.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(t){return[t.toLowerCase(),t]}))),Os}var oN;function zJ(){if(oN)return go;oN=1;var t=I&&I.__assign||function(){return t=Object.assign||function(w){for(var S,A=1,D=arguments.length;A<D;A++){S=arguments[A];for(var L in S)Object.prototype.hasOwnProperty.call(S,L)&&(w[L]=S[L])}return w},t.apply(this,arguments)},e=I&&I.__createBinding||(Object.create?function(w,S,A,D){D===void 0&&(D=A);var L=Object.getOwnPropertyDescriptor(S,A);(!L||("get"in L?!S.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return S[A]}}),Object.defineProperty(w,D,L)}:function(w,S,A,D){D===void 0&&(D=A),w[D]=S[A]}),u=I&&I.__setModuleDefault||(Object.create?function(w,S){Object.defineProperty(w,"default",{enumerable:!0,value:S})}:function(w,S){w.default=S}),s=I&&I.__importStar||function(w){if(w&&w.__esModule)return w;var S={};if(w!=null)for(var A in w)A!=="default"&&Object.prototype.hasOwnProperty.call(w,A)&&e(S,w,A);return u(S,w),S};Object.defineProperty(go,"__esModule",{value:!0}),go.render=void 0;var n=s(to()),r=VJ(),a=kJ(),o=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function l(w){return w.replace(/"/g,"&quot;")}function c(w,S){var A;if(w){var D=((A=S.encodeEntities)!==null&&A!==void 0?A:S.decodeEntities)===!1?l:S.xmlMode||S.encodeEntities!=="utf8"?r.encodeXML:r.escapeAttribute;return Object.keys(w).map(function(L){var O,E,P=(O=w[L])!==null&&O!==void 0?O:"";return S.xmlMode==="foreign"&&(L=(E=a.attributeNames.get(L))!==null&&E!==void 0?E:L),!S.emptyAttrs&&!S.xmlMode&&P===""?L:"".concat(L,'="').concat(D(P),'"')}).join(" ")}}var d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function h(w,S){S===void 0&&(S={});for(var A=("length"in w)?w:[w],D="",L=0;L<A.length;L++)D+=f(A[L],S);return D}go.render=h,go.default=h;function f(w,S){switch(w.type){case n.Root:return h(w.children,S);case n.Doctype:case n.Directive:return g(w);case n.Comment:return _(w);case n.CDATA:return v(w);case n.Script:case n.Style:case n.Tag:return b(w,S);case n.Text:return m(w,S)}}var p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),y=new Set(["svg","math"]);function b(w,S){var A;S.xmlMode==="foreign"&&(w.name=(A=a.elementNames.get(w.name))!==null&&A!==void 0?A:w.name,w.parent&&p.has(w.parent.name)&&(S=t(t({},S),{xmlMode:!1}))),!S.xmlMode&&y.has(w.name)&&(S=t(t({},S),{xmlMode:"foreign"}));var D="<".concat(w.name),L=c(w.attribs,S);return L&&(D+=" ".concat(L)),w.children.length===0&&(S.xmlMode?S.selfClosingTags!==!1:S.selfClosingTags&&d.has(w.name))?(S.xmlMode||(D+=" "),D+="/>"):(D+=">",w.children.length>0&&(D+=h(w.children,S)),(S.xmlMode||!d.has(w.name))&&(D+="</".concat(w.name,">"))),D}function g(w){return"<".concat(w.data,">")}function m(w,S){var A,D=w.data||"";return((A=S.encodeEntities)!==null&&A!==void 0?A:S.decodeEntities)!==!1&&!(!S.xmlMode&&w.parent&&o.has(w.parent.name))&&(D=S.xmlMode||S.encodeEntities!=="utf8"?(0,r.encodeXML)(D):(0,r.escapeText)(D)),D}function v(w){return"<![CDATA[".concat(w.children[0].data,"]]>")}function _(w){return"<!--".concat(w.data,"-->")}return go}var uN;function c7(){if(uN)return zn;uN=1;var t=I&&I.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(zn,"__esModule",{value:!0}),zn.innerText=zn.textContent=zn.getText=zn.getInnerHTML=zn.getOuterHTML=void 0;var e=ui(),u=t(zJ()),s=to();function n(c,d){return(0,u.default)(c,d)}zn.getOuterHTML=n;function r(c,d){return(0,e.hasChildren)(c)?c.children.map(function(h){return n(h,d)}).join(""):""}zn.getInnerHTML=r;function a(c){return Array.isArray(c)?c.map(a).join(""):(0,e.isTag)(c)?c.name==="br"?`
`:a(c.children):(0,e.isCDATA)(c)?a(c.children):(0,e.isText)(c)?c.data:""}zn.getText=a;function o(c){return Array.isArray(c)?c.map(o).join(""):(0,e.hasChildren)(c)&&!(0,e.isComment)(c)?o(c.children):(0,e.isText)(c)?c.data:""}zn.textContent=o;function l(c){return Array.isArray(c)?c.map(l).join(""):(0,e.hasChildren)(c)&&(c.type===s.ElementType.Tag||(0,e.isCDATA)(c))?l(c.children):(0,e.isText)(c)?c.data:""}return zn.innerText=l,zn}var Hr={},cN;function GJ(){if(cN)return Hr;cN=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.prevElementSibling=Hr.nextElementSibling=Hr.getName=Hr.hasAttrib=Hr.getAttributeValue=Hr.getSiblings=Hr.getParent=Hr.getChildren=void 0;var t=ui();function e(c){return(0,t.hasChildren)(c)?c.children:[]}Hr.getChildren=e;function u(c){return c.parent||null}Hr.getParent=u;function s(c){var d,h,f=u(c);if(f!=null)return e(f);for(var p=[c],y=c.prev,b=c.next;y!=null;)p.unshift(y),d=y,y=d.prev;for(;b!=null;)p.push(b),h=b,b=h.next;return p}Hr.getSiblings=s;function n(c,d){var h;return(h=c.attribs)===null||h===void 0?void 0:h[d]}Hr.getAttributeValue=n;function r(c,d){return c.attribs!=null&&Object.prototype.hasOwnProperty.call(c.attribs,d)&&c.attribs[d]!=null}Hr.hasAttrib=r;function a(c){return c.name}Hr.getName=a;function o(c){for(var d,h=c.next;h!==null&&!(0,t.isTag)(h);)d=h,h=d.next;return h}Hr.nextElementSibling=o;function l(c){for(var d,h=c.prev;h!==null&&!(0,t.isTag)(h);)d=h,h=d.prev;return h}return Hr.prevElementSibling=l,Hr}var vn={},lN;function WJ(){if(lN)return vn;lN=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.prepend=vn.prependChild=vn.append=vn.appendChild=vn.replaceElement=vn.removeElement=void 0;function t(a){if(a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),a.parent){var o=a.parent.children,l=o.lastIndexOf(a);l>=0&&o.splice(l,1)}a.next=null,a.prev=null,a.parent=null}vn.removeElement=t;function e(a,o){var l=o.prev=a.prev;l&&(l.next=o);var c=o.next=a.next;c&&(c.prev=o);var d=o.parent=a.parent;if(d){var h=d.children;h[h.lastIndexOf(a)]=o,a.parent=null}}vn.replaceElement=e;function u(a,o){if(t(o),o.next=null,o.parent=a,a.children.push(o)>1){var l=a.children[a.children.length-2];l.next=o,o.prev=l}else o.prev=null}vn.appendChild=u;function s(a,o){t(o);var l=a.parent,c=a.next;if(o.next=c,o.prev=a,a.next=o,o.parent=l,c){if(c.prev=o,l){var d=l.children;d.splice(d.lastIndexOf(c),0,o)}}else l&&l.children.push(o)}vn.append=s;function n(a,o){if(t(o),o.parent=a,o.prev=null,a.children.unshift(o)!==1){var l=a.children[1];l.prev=o,o.next=l}else o.next=null}vn.prependChild=n;function r(a,o){t(o);var l=a.parent;if(l){var c=l.children;c.splice(c.indexOf(a),0,o)}a.prev&&(a.prev.next=o),o.parent=l,o.prev=a.prev,o.next=a,a.prev=o}return vn.prepend=r,vn}var wn={},dN;function l7(){if(dN)return wn;dN=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.findAll=wn.existsOne=wn.findOne=wn.findOneChild=wn.find=wn.filter=void 0;var t=ui();function e(o,l,c,d){return c===void 0&&(c=!0),d===void 0&&(d=1/0),u(o,Array.isArray(l)?l:[l],c,d)}wn.filter=e;function u(o,l,c,d){for(var h=[],f=[l],p=[0];;){if(p[0]>=f[0].length){if(p.length===1)return h;f.shift(),p.shift();continue}var y=f[0][p[0]++];if(o(y)&&(h.push(y),--d<=0))return h;c&&(0,t.hasChildren)(y)&&y.children.length>0&&(p.unshift(0),f.unshift(y.children))}}wn.find=u;function s(o,l){return l.find(o)}wn.findOneChild=s;function n(o,l,c){c===void 0&&(c=!0);for(var d=null,h=0;h<l.length&&!d;h++){var f=l[h];if((0,t.isTag)(f))o(f)?d=f:c&&f.children.length>0&&(d=n(o,f.children,!0));else continue}return d}wn.findOne=n;function r(o,l){return l.some(function(c){return(0,t.isTag)(c)&&(o(c)||r(o,c.children))})}wn.existsOne=r;function a(o,l){for(var c=[],d=[l],h=[0];;){if(h[0]>=d[0].length){if(d.length===1)return c;d.shift(),h.shift();continue}var f=d[0][h[0]++];(0,t.isTag)(f)&&(o(f)&&c.push(f),f.children.length>0&&(h.unshift(0),d.unshift(f.children)))}}return wn.findAll=a,wn}var Gn={},fN;function d7(){if(fN)return Gn;fN=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.getElementsByTagType=Gn.getElementsByTagName=Gn.getElementById=Gn.getElements=Gn.testElement=void 0;var t=ui(),e=l7(),u={tag_name:function(h){return typeof h=="function"?function(f){return(0,t.isTag)(f)&&h(f.name)}:h==="*"?t.isTag:function(f){return(0,t.isTag)(f)&&f.name===h}},tag_type:function(h){return typeof h=="function"?function(f){return h(f.type)}:function(f){return f.type===h}},tag_contains:function(h){return typeof h=="function"?function(f){return(0,t.isText)(f)&&h(f.data)}:function(f){return(0,t.isText)(f)&&f.data===h}}};function s(h,f){return typeof f=="function"?function(p){return(0,t.isTag)(p)&&f(p.attribs[h])}:function(p){return(0,t.isTag)(p)&&p.attribs[h]===f}}function n(h,f){return function(p){return h(p)||f(p)}}function r(h){var f=Object.keys(h).map(function(p){var y=h[p];return Object.prototype.hasOwnProperty.call(u,p)?u[p](y):s(p,y)});return f.length===0?null:f.reduce(n)}function a(h,f){var p=r(h);return p?p(f):!0}Gn.testElement=a;function o(h,f,p,y){y===void 0&&(y=1/0);var b=r(h);return b?(0,e.filter)(b,f,p,y):[]}Gn.getElements=o;function l(h,f,p){return p===void 0&&(p=!0),Array.isArray(f)||(f=[f]),(0,e.findOne)(s("id",h),f,p)}Gn.getElementById=l;function c(h,f,p,y){return p===void 0&&(p=!0),y===void 0&&(y=1/0),(0,e.filter)(u.tag_name(h),f,p,y)}Gn.getElementsByTagName=c;function d(h,f,p,y){return p===void 0&&(p=!0),y===void 0&&(y=1/0),(0,e.filter)(u.tag_type(h),f,p,y)}return Gn.getElementsByTagType=d,Gn}var Kv={},hN;function JJ(){return hN||(hN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.DocumentPosition=t.removeSubsets=void 0;var e=ui();function u(a){for(var o=a.length;--o>=0;){var l=a[o];if(o>0&&a.lastIndexOf(l,o-1)>=0){a.splice(o,1);continue}for(var c=l.parent;c;c=c.parent)if(a.includes(c)){a.splice(o,1);break}}return a}t.removeSubsets=u;var s;(function(a){a[a.DISCONNECTED=1]="DISCONNECTED",a[a.PRECEDING=2]="PRECEDING",a[a.FOLLOWING=4]="FOLLOWING",a[a.CONTAINS=8]="CONTAINS",a[a.CONTAINED_BY=16]="CONTAINED_BY"})(s=t.DocumentPosition||(t.DocumentPosition={}));function n(a,o){var l=[],c=[];if(a===o)return 0;for(var d=(0,e.hasChildren)(a)?a:a.parent;d;)l.unshift(d),d=d.parent;for(d=(0,e.hasChildren)(o)?o:o.parent;d;)c.unshift(d),d=d.parent;for(var h=Math.min(l.length,c.length),f=0;f<h&&l[f]===c[f];)f++;if(f===0)return s.DISCONNECTED;var p=l[f-1],y=p.children,b=l[f],g=c[f];return y.indexOf(b)>y.indexOf(g)?p===o?s.FOLLOWING|s.CONTAINED_BY:s.FOLLOWING:p===a?s.PRECEDING|s.CONTAINS:s.PRECEDING}t.compareDocumentPosition=n;function r(a){return a=a.filter(function(o,l,c){return!c.includes(o,l+1)}),a.sort(function(o,l){var c=n(o,l);return c&s.PRECEDING?-1:c&s.FOLLOWING?1:0}),a}t.uniqueSort=r}(Kv)),Kv}var Bl={},pN;function XJ(){if(pN)return Bl;pN=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.getFeed=void 0;var t=c7(),e=d7();function u(f){var p=l(h,f);return p?p.name==="feed"?s(p):n(p):null}Bl.getFeed=u;function s(f){var p,y=f.children,b={type:"atom",items:(0,e.getElementsByTagName)("entry",y).map(function(v){var _,w=v.children,S={media:o(w)};d(S,"id","id",w),d(S,"title","title",w);var A=(_=l("link",w))===null||_===void 0?void 0:_.attribs.href;A&&(S.link=A);var D=c("summary",w)||c("content",w);D&&(S.description=D);var L=c("updated",w);return L&&(S.pubDate=new Date(L)),S})};d(b,"id","id",y),d(b,"title","title",y);var g=(p=l("link",y))===null||p===void 0?void 0:p.attribs.href;g&&(b.link=g),d(b,"description","subtitle",y);var m=c("updated",y);return m&&(b.updated=new Date(m)),d(b,"author","email",y,!0),b}function n(f){var p,y,b=(y=(p=l("channel",f.children))===null||p===void 0?void 0:p.children)!==null&&y!==void 0?y:[],g={type:f.name.substr(0,3),id:"",items:(0,e.getElementsByTagName)("item",f.children).map(function(v){var _=v.children,w={media:o(_)};d(w,"id","guid",_),d(w,"title","title",_),d(w,"link","link",_),d(w,"description","description",_);var S=c("pubDate",_)||c("dc:date",_);return S&&(w.pubDate=new Date(S)),w})};d(g,"title","title",b),d(g,"link","link",b),d(g,"description","description",b);var m=c("lastBuildDate",b);return m&&(g.updated=new Date(m)),d(g,"author","managingEditor",b,!0),g}var r=["url","type","lang"],a=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function o(f){return(0,e.getElementsByTagName)("media:content",f).map(function(p){for(var y=p.attribs,b={medium:y.medium,isDefault:!!y.isDefault},g=0,m=r;g<m.length;g++){var v=m[g];y[v]&&(b[v]=y[v])}for(var _=0,w=a;_<w.length;_++){var v=w[_];y[v]&&(b[v]=parseInt(y[v],10))}return y.expression&&(b.expression=y.expression),b})}function l(f,p){return(0,e.getElementsByTagName)(f,p,!0,1)[0]}function c(f,p,y){return y===void 0&&(y=!1),(0,t.textContent)((0,e.getElementsByTagName)(f,p,y,1)).trim()}function d(f,p,y,b,g){g===void 0&&(g=!1);var m=c(y,b,g);m&&(f[p]=m)}function h(f){return f==="rss"||f==="feed"||f==="rdf:RDF"}return Bl}var yN;function ma(){return yN||(yN=1,function(t){var e=I&&I.__createBinding||(Object.create?function(n,r,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(r,a);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[a]}}),Object.defineProperty(n,o,l)}:function(n,r,a,o){o===void 0&&(o=a),n[o]=r[a]}),u=I&&I.__exportStar||function(n,r){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(r,a)&&e(r,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,u(c7(),t),u(GJ(),t),u(WJ(),t),u(l7(),t),u(d7(),t),u(JJ(),t),u(XJ(),t);var s=ui();Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return s.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return s.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return s.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return s.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return s.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return s.hasChildren}})}(Wv)),Wv}var bN;function KJ(){return bN||(bN=1,function(t){var e=I&&I.__createBinding||(Object.create?function(m,v,_,w){w===void 0&&(w=_);var S=Object.getOwnPropertyDescriptor(v,_);(!S||("get"in S?!v.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return v[_]}}),Object.defineProperty(m,w,S)}:function(m,v,_,w){w===void 0&&(w=_),m[w]=v[_]}),u=I&&I.__setModuleDefault||(Object.create?function(m,v){Object.defineProperty(m,"default",{enumerable:!0,value:v})}:function(m,v){m.default=v}),s=I&&I.__importStar||function(m){if(m&&m.__esModule)return m;var v={};if(m!=null)for(var _ in m)_!=="default"&&Object.prototype.hasOwnProperty.call(m,_)&&e(v,m,_);return u(v,m),v},n=I&&I.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var r=XD(),a=XD();Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return a.Parser}});var o=ui(),l=ui();Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}});function c(m,v){var _=new o.DomHandler(void 0,v);return new r.Parser(_,v).end(m),_.root}t.parseDocument=c;function d(m,v){return c(m,v).children}t.parseDOM=d;function h(m,v,_){var w=new o.DomHandler(m,v,_);return new r.Parser(w,v)}t.createDomStream=h;var f=u7();Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return n(f).default}}),t.ElementType=s(to());var p=ma(),y=ma();Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return y.getFeed}});var b={xmlMode:!0};function g(m,v){return v===void 0&&(v=b),(0,p.getFeed)(d(m,v))}t.parseFeed=g,t.DomUtils=s(ma())}(Hv)),Hv}const YJ={"@context":{alternate:"http://www.w3.org/1999/xhtml/vocab#alternate",appendix:"http://www.w3.org/1999/xhtml/vocab#appendix",cite:"http://www.w3.org/1999/xhtml/vocab#cite",bookmark:"http://www.w3.org/1999/xhtml/vocab#bookmark",contents:"http://www.w3.org/1999/xhtml/vocab#contents",chapter:"http://www.w3.org/1999/xhtml/vocab#chapter",copyright:"http://www.w3.org/1999/xhtml/vocab#copyright",first:"http://www.w3.org/1999/xhtml/vocab#first",glossary:"http://www.w3.org/1999/xhtml/vocab#glossary",help:"http://www.w3.org/1999/xhtml/vocab#help",icon:"http://www.w3.org/1999/xhtml/vocab#icon",index:"http://www.w3.org/1999/xhtml/vocab#index",last:"http://www.w3.org/1999/xhtml/vocab#last",license:"http://www.w3.org/1999/xhtml/vocab#license",meta:"http://www.w3.org/1999/xhtml/vocab#meta",next:"http://www.w3.org/1999/xhtml/vocab#next",prev:"http://www.w3.org/1999/xhtml/vocab#prev",previous:"http://www.w3.org/1999/xhtml/vocab#previous",section:"http://www.w3.org/1999/xhtml/vocab#section",start:"http://www.w3.org/1999/xhtml/vocab#start",stylesheet:"http://www.w3.org/1999/xhtml/vocab#stylesheet",subsection:"http://www.w3.org/1999/xhtml/vocab#subsection",top:"http://www.w3.org/1999/xhtml/vocab#top",up:"http://www.w3.org/1999/xhtml/vocab#up",p3pv1:"http://www.w3.org/1999/xhtml/vocab#p3pv1"}},ZJ={"@context":{as:"https://www.w3.org/ns/activitystreams#",cat:"http://www.w3.org/ns/dcat#",cc:"http://creativecommons.org/ns#",cnt:"http://www.w3.org/2008/content#",csvw:"http://www.w3.org/ns/csvw#",ctag:"http://commontag.org/ns#",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcat:"http://www.w3.org/ns/dcat#",dcterms:"http://purl.org/dc/terms/",dqv:"http://www.w3.org/ns/dqv#",duv:"https://www.w3.org/TR/vocab-duv#",earl:"http://www.w3.org/ns/earl#",foaf:"http://xmlns.com/foaf/0.1/",gldp:"http://www.w3.org/ns/people#",gr:"http://purl.org/goodrelations/v1#",grddl:"http://www.w3.org/2003/g/data-view#",ht:"http://www.w3.org/2006/http#",ical:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",ma:"http://www.w3.org/ns/ma-ont#",oa:"http://www.w3.org/ns/oa#",odrl:"http://www.w3.org/ns/odrl/2/",og:"http://ogp.me/ns#",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",prov:"http://www.w3.org/ns/prov#",ptr:"http://www.w3.org/2009/pointers#",qb:"http://purl.org/linked-data/cube#",rev:"http://purl.org/stuff/rev#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfa:"http://www.w3.org/ns/rdfa#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rif:"http://www.w3.org/2007/rif#",rr:"http://www.w3.org/ns/r2rml#",schema:"http://schema.org/",sd:"http://www.w3.org/ns/sparql-service-description#",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",ssn:"http://www.w3.org/ns/ssn/",sosa:"http://www.w3.org/ns/sosa/",time:"http://www.w3.org/2006/time#",v:"http://rdf.data-vocabulary.org/#",vcard:"http://www.w3.org/2006/vcard/ns#",void:"http://rdfs.org/ns/void#",wdr:"http://www.w3.org/2007/05/powder#",wdrs:"http://www.w3.org/2007/05/powder-s#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",describedby:"http://www.w3.org/2007/05/powder-s#describedby",license:"http://www.w3.org/1999/xhtml/vocab#license",role:"http://www.w3.org/1999/xhtml/vocab#role"}};var Rs={},mN;function oA(){return mN||(mN=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.RDFA_CONTENTTYPES=Rs.RDFA_FEATURES=void 0,Rs.RDFA_FEATURES={"":{baseTag:!0,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},core:{baseTag:!1,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!1,datetimeAttribute:!1,timeTag:!1,htmlDatatype:!1,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!1},html:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0},xhtml:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},xml:{baseTag:!1,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!1,inheritSubjectInHeadBody:!1,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!1,copyRdfaPatterns:!1,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0}},Rs.RDFA_CONTENTTYPES={"text/html":"html","application/xhtml+xml":"xhtml","application/xml":"xml","text/xml":"xml","image/svg+xml":"xml"}),Rs}var Ul={},gN;function f7(){if(gN)return Ul;gN=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.Util=void 0;const t=Pi(),e=oA(),u=Et();class s{constructor(r,a){this.dataFactory=r||new u.DataFactory,this.baseIRI=this.dataFactory.namedNode(a||""),this.baseIRIDocument=this.baseIRI}static parsePrefixes(r,a,o){const l={};if(o)for(const c in r)c.startsWith("xmlns")&&(l[c.substr(6)]=r[c]);if(r.prefix||Object.keys(l).length>0){const c=Object.assign(Object.assign({},a),l);if(r.prefix){let d;for(;d=s.PREFIX_REGEX.exec(r.prefix);)c[d[1]]=d[2]}return c}else return a}static expandPrefixedTerm(r,a){const o=r.indexOf(":");let l,c;if(o>=0&&(l=r.substr(0,o),c=r.substr(o+1)),l==="")return"http://www.w3.org/1999/xhtml/vocab#"+c;if(l){const d=a.prefixesAll[l];if(d)return d+c}if(r){const d=a.prefixesAll[r.toLocaleLowerCase()];if(d)return d}return r}static isValidIri(r){return s.IRI_REGEX.test(r)}static contentTypeToProfile(r){return e.RDFA_CONTENTTYPES[r]||""}getBaseIRI(r){let a=r;const o=a.indexOf("#");return o>=0&&(a=a.substr(0,o)),this.dataFactory.namedNode((0,t.resolve)(a,this.baseIRI.value))}getResourceOrBaseIri(r,a){return r===!0?this.getBaseIriTerm(a):r}getBaseIriTerm(r){return r.localBaseIRI||this.baseIRI}createVocabIris(r,a,o,l){return r.split(/\s+/).filter(c=>c&&(o||c.indexOf(":")>=0)).map(c=>this.createIri(c,a,!0,!0,l)).filter(c=>c!=null)}createLiteral(r,a){if(a.interpretObjectAsTime&&!a.datatype){for(const o of s.TIME_REGEXES)if(r.match(o.regex)){a.datatype=this.dataFactory.namedNode(s.XSD+o.type);break}}return this.dataFactory.literal(r,a.datatype||a.language)}createBlankNode(){return this.blankNodeFactory?this.blankNodeFactory():this.dataFactory.blankNode()}createIri(r,a,o,l,c){if(r=r||"",!l)return o||(r=(0,t.resolve)(r,this.getBaseIriTerm(a).value)),s.isValidIri(r)?this.dataFactory.namedNode(r):null;if(r.length>0&&r[0]==="["&&r[r.length-1]==="]"&&(r=r.substr(1,r.length-2),r.indexOf(":")<0))return null;if(r.startsWith("_:"))return c?this.dataFactory.blankNode(r.substr(2)||"b_identity"):null;if(o&&a.vocab&&r.indexOf(":")<0)return this.dataFactory.namedNode(a.vocab+r);let d=s.expandPrefixedTerm(r,a);return o?r!==d&&(d=(0,t.resolve)(d,this.baseIRIDocument.value)):d=(0,t.resolve)(d,this.getBaseIriTerm(a).value),s.isValidIri(d)?this.dataFactory.namedNode(d):null}}return Ul.Util=s,s.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s.XSD="http://www.w3.org/2001/XMLSchema#",s.RDFA="http://www.w3.org/ns/rdfa#",s.PREFIX_REGEX=/\s*([^:\s]*)*:\s*([^\s]*)*\s*/g,s.TIME_REGEXES=[{regex:/^-?P([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9])?S)?)?$/,type:"duration"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"dateTime"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,type:"date"},{regex:/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"time"},{regex:/^[0-9]+-[0-9][0-9]$/,type:"gYearMonth"},{regex:/^[0-9]+$/,type:"gYear"}],s.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`]*$/,Ul}var _N;function eX(){if(_N)return Fl;_N=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.RdfaParser=void 0;const t=KJ(),e=Wt(),u=YJ,s=ZJ,n=oA(),r=f7();let a=class h7 extends e.Transform{constructor(l){super({readableObjectMode:!0}),this.activeTagStack=[],l=l||{},this.options=l,this.util=new r.Util(l.dataFactory,l.baseIRI),this.defaultGraph=l.defaultGraph||this.util.dataFactory.defaultGraph();const c=l.contentType?r.Util.contentTypeToProfile(l.contentType):l.profile||"";this.features=l.features||n.RDFA_FEATURES[c],this.htmlParseListener=l.htmlParseListener,this.rdfaPatterns=this.features.copyRdfaPatterns?{}:null,this.pendingRdfaPatternCopies=this.features.copyRdfaPatterns?{}:null,this.parser=this.initializeParser(c==="xml"),this.activeTagStack.push({incompleteTriples:[],inlist:!1,language:l.language,listMapping:{},listMappingLocal:{},name:"",prefixesAll:Object.assign(Object.assign({},s["@context"]),this.features.xhtmlInitialContext?u["@context"]:{}),prefixesCustom:{},skipElement:!1,vocab:l.vocab})}import(l){const c=new e.PassThrough({readableObjectMode:!0});l.on("error",h=>d.emit("error",h)),l.on("data",h=>c.push(h)),l.on("end",()=>c.push(null));const d=c.pipe(new h7(this.options));return d}_transform(l,c,d){this.parser.write(l.toString()),d()}_flush(l){this.parser.end(),l()}onTagOpen(l,c){let d=this.activeTagStack.length-1;for(;d>0&&this.activeTagStack[d].skipElement;)d--;let h=this.activeTagStack[d];d!==this.activeTagStack.length-1&&(h=Object.assign(Object.assign({},h),{language:this.activeTagStack[this.activeTagStack.length-1].language,prefixesAll:this.activeTagStack[this.activeTagStack.length-1].prefixesAll,prefixesCustom:this.activeTagStack[this.activeTagStack.length-1].prefixesCustom,vocab:this.activeTagStack[this.activeTagStack.length-1].vocab}));const f={collectChildTags:h.collectChildTags,incompleteTriples:[],inlist:"inlist"in c,listMapping:[],listMappingLocal:h.listMapping,localBaseIRI:h.localBaseIRI,name:l,prefixesAll:null,prefixesCustom:null,skipElement:!1};if(this.activeTagStack.push(f),f.collectChildTags){for(const S of Object.keys(h.prefixesCustom).sort()){const A=h.prefixesCustom[S],D=S===""?"xmlns":"xmlns:"+S;D in c||(c[D]=A)}const w=Object.keys(c).map(S=>`${S}="${c[S]}"`).join(" ");if(f.text=[`<${l}${w?" "+w:""}>`],this.features.skipHandlingXmlLiteralChildren)return}let p=!0,y=!0;if(this.features.onlyAllowUriRelRevIfProperty&&("property"in c&&"rel"in c&&(p=!1,c.rel.indexOf(":")<0&&delete c.rel),"property"in c&&"rev"in c&&(y=!1,c.rev.indexOf(":")<0&&delete c.rev)),this.features.copyRdfaPatterns){if(h.collectedPatternTag){const w={attributes:c,children:[],name:l,referenced:!1,rootPattern:!1,text:[]};h.collectedPatternTag.children.push(w),f.collectedPatternTag=w;return}if(c.typeof==="rdfa:Pattern"){f.collectedPatternTag={attributes:c,children:[],name:l,parentTag:h,referenced:!1,rootPattern:!0,text:[]};return}if(c.property==="rdfa:copy"){const w=c.resource||c.href||c.src;this.rdfaPatterns[w]?this.emitPatternCopy(h,this.rdfaPatterns[w],w):(this.pendingRdfaPatternCopies[w]||(this.pendingRdfaPatternCopies[w]=[]),this.pendingRdfaPatternCopies[w].push(h));return}}this.features.baseTag&&l==="base"&&c.href&&(this.util.baseIRI=this.util.getBaseIRI(c.href)),this.features.xmlBase&&c["xml:base"]&&(f.localBaseIRI=this.util.getBaseIRI(c["xml:base"])),this.features.timeTag&&l==="time"&&!c.datatype&&(f.interpretObjectAsTime=!0);let b,g,m;if("vocab"in c?c.vocab?(f.vocab=c.vocab,this.emitTriple(this.util.getBaseIriTerm(f),this.util.dataFactory.namedNode(r.Util.RDFA+"usesVocabulary"),this.util.dataFactory.namedNode(f.vocab))):f.vocab=this.activeTagStack[0].vocab:f.vocab=h.vocab,f.prefixesCustom=r.Util.parsePrefixes(c,h.prefixesCustom,this.features.xmlnsPrefixMappings),f.prefixesAll=Object.keys(f.prefixesCustom).length>0?Object.assign(Object.assign({},h.prefixesAll),f.prefixesCustom):h.prefixesAll,this.features.roleAttribute&&c.role){const w=c.id?this.util.createIri("#"+c.id,f,!1,!1,!1):this.util.createBlankNode(),S=f.vocab;f.vocab="http://www.w3.org/1999/xhtml/vocab#";for(const A of this.util.createVocabIris(c.role,f,!0,!1))this.emitTriple(w,this.util.dataFactory.namedNode("http://www.w3.org/1999/xhtml/vocab#role"),A);f.vocab=S}"xml:lang"in c||this.features.langAttribute&&"lang"in c?f.language=c["xml:lang"]||c.lang:f.language=h.language;const v=this.activeTagStack.length===2;if(!("rel"in c)&&!("rev"in c)?"property"in c&&!("content"in c)&&!("datatype"in c)?("about"in c?(b=this.util.createIri(c.about,f,!1,!0,!0),f.explicitNewSubject=!!b):v?b=!0:h.object&&(b=h.object),"typeof"in c&&("about"in c&&(m=this.util.createIri(c.about,f,!1,!0,!0)),!m&&v&&(m=!0),!m&&"resource"in c&&(m=this.util.createIri(c.resource,f,!1,!0,!0)),!m&&("href"in c||"src"in c)&&(m=this.util.createIri(c.href||c.src,f,!1,!1,!0)),!m&&this.isInheritSubjectInHeadBody(l)&&(m=b),m||(m=this.util.createBlankNode()),g=m)):(("about"in c||"resource"in c)&&(b=this.util.createIri(c.about||c.resource,f,!1,!0,!0),f.explicitNewSubject=!!b),!b&&("href"in c||"src"in c)&&(b=this.util.createIri(c.href||c.src,f,!1,!1,!0),f.explicitNewSubject=!!b),b||(v?b=!0:this.isInheritSubjectInHeadBody(l)?b=h.object:"typeof"in c?(b=this.util.createBlankNode(),f.explicitNewSubject=!0):h.object&&(b=h.object,"property"in c||(f.skipElement=!0))),"typeof"in c&&(m=b)):("about"in c?(b=this.util.createIri(c.about,f,!1,!0,!0),f.explicitNewSubject=!!b,"typeof"in c&&(m=b)):v?b=!0:h.object&&(b=h.object),"resource"in c&&(g=this.util.createIri(c.resource,f,!1,!0,!0)),g||("href"in c||"src"in c?g=this.util.createIri(c.href||c.src,f,!1,!1,!0):"typeof"in c&&!("about"in c)&&!this.isInheritSubjectInHeadBody(l)&&(g=this.util.createBlankNode())),"typeof"in c&&!("about"in c)&&(this.isInheritSubjectInHeadBody(l)?m=b:m=g)),m)for(const w of this.util.createVocabIris(c.typeof,f,!0,!0))this.emitTriple(this.util.getResourceOrBaseIri(m,f),this.util.dataFactory.namedNode(r.Util.RDF+"type"),w);if(b&&(f.listMapping={}),g){if("rel"in c&&"inlist"in c)for(const w of this.util.createVocabIris(c.rel,f,p,!1))this.addListMapping(f,b,w,g);if(!("rel"in c&&"inlist"in c)){if("rel"in c)for(const w of this.util.createVocabIris(c.rel,f,p,!1))this.emitTriple(this.util.getResourceOrBaseIri(b,f),w,this.util.getResourceOrBaseIri(g,f));if("rev"in c)for(const w of this.util.createVocabIris(c.rev,f,y,!1))this.emitTriple(this.util.getResourceOrBaseIri(g,f),w,this.util.getResourceOrBaseIri(b,f))}}if(!g){if("rel"in c)if("inlist"in c)for(const w of this.util.createVocabIris(c.rel,f,p,!1))this.addListMapping(f,b,w,null),f.incompleteTriples.push({predicate:w,reverse:!1,list:!0});else for(const w of this.util.createVocabIris(c.rel,f,p,!1))f.incompleteTriples.push({predicate:w,reverse:!1});if("rev"in c)for(const w of this.util.createVocabIris(c.rev,f,y,!1))f.incompleteTriples.push({predicate:w,reverse:!0});f.incompleteTriples.length>0&&(g=this.util.createBlankNode())}if("property"in c){f.predicates=this.util.createVocabIris(c.property,f,!0,!1);let w;if("datatype"in c?(f.datatype=this.util.createIri(c.datatype,f,!0,!0,!1),f.datatype&&(f.datatype.value===r.Util.RDF+"XMLLiteral"||this.features.htmlDatatype&&f.datatype.value===r.Util.RDF+"HTML")&&(f.collectChildTags=!0)):(!("rev"in c)&&!("rel"in c)&&!("content"in c)&&("resource"in c&&(w=this.util.createIri(c.resource,f,!1,!0,!0)),!w&&"href"in c&&(w=this.util.createIri(c.href,f,!1,!1,!0)),!w&&"src"in c&&(w=this.util.createIri(c.src,f,!1,!1,!0))),"typeof"in c&&!("about"in c)&&(w=m)),"content"in c){const S=this.util.createLiteral(c.content,f);if("inlist"in c)for(const A of f.predicates)this.addListMapping(f,b,A,S);else{const A=this.util.getResourceOrBaseIri(b,f);for(const D of f.predicates)this.emitTriple(A,D,S)}f.predicates=null}else if(this.features.datetimeAttribute&&"datetime"in c){f.interpretObjectAsTime=!0;const S=this.util.createLiteral(c.datetime,f);if("inlist"in c)for(const A of f.predicates)this.addListMapping(f,b,A,S);else{const A=this.util.getResourceOrBaseIri(b,f);for(const D of f.predicates)this.emitTriple(A,D,S)}f.predicates=null}else if(w){const S=this.util.getResourceOrBaseIri(w,f);if("inlist"in c)for(const A of f.predicates)this.addListMapping(f,b,A,S);else{const A=this.util.getResourceOrBaseIri(b,f);for(const D of f.predicates)this.emitTriple(A,D,S)}f.predicates=null}}let _=!1;if(!f.skipElement&&b&&h.incompleteTriples.length>0){_=!0;const w=this.util.getResourceOrBaseIri(h.subject,f),S=this.util.getResourceOrBaseIri(b,f);for(const A of h.incompleteTriples)if(A.reverse)this.emitTriple(S,A.predicate,w);else if(A.list){let D=null;for(let L=this.activeTagStack.length-1;L>=0;L--)if(this.activeTagStack[L].inlist){D=this.activeTagStack[L];break}this.addListMapping(D,b,A.predicate,S)}else this.emitTriple(w,A.predicate,S)}!_&&h.incompleteTriples.length>0&&(f.incompleteTriples=f.incompleteTriples.concat(h.incompleteTriples)),f.subject=b||h.subject,f.object=g||b}onText(l){const c=this.activeTagStack[this.activeTagStack.length-1];if(this.features.copyRdfaPatterns&&c.collectedPatternTag){c.collectedPatternTag.text.push(l);return}c.text||(c.text=[]),c.text.push(l)}onTagClose(){const l=this.activeTagStack[this.activeTagStack.length-1],c=this.activeTagStack[this.activeTagStack.length-2];if(!(l.collectChildTags&&c.collectChildTags&&this.features.skipHandlingXmlLiteralChildren)){if(this.features.copyRdfaPatterns&&l.collectedPatternTag&&l.collectedPatternTag.rootPattern){const d=l.collectedPatternTag.attributes.resource;if(delete l.collectedPatternTag.attributes.resource,delete l.collectedPatternTag.attributes.typeof,this.rdfaPatterns[d]=l.collectedPatternTag,this.pendingRdfaPatternCopies[d]){for(const h of this.pendingRdfaPatternCopies[d])this.emitPatternCopy(h,l.collectedPatternTag,d);delete this.pendingRdfaPatternCopies[d]}this.activeTagStack.pop();return}if(l.predicates){const d=this.util.getResourceOrBaseIri(l.subject,l);let h=l.text||[];l.collectChildTags&&c.collectChildTags&&(h=h.slice(1));const f=this.util.createLiteral(h.join(""),l);if(l.inlist)for(const p of l.predicates)this.addListMapping(l,d,p,f);else for(const p of l.predicates)this.emitTriple(d,p,f);c.predicates||(l.text=null)}if(l.object&&Object.keys(l.listMapping).length>0){const d=this.util.getResourceOrBaseIri(l.object,l);for(const h in l.listMapping){const f=this.util.dataFactory.namedNode(h),p=l.listMapping[h];if(p.length>0){const y=p.map(()=>this.util.createBlankNode());for(let b=0;b<p.length;b++){const g=this.util.getResourceOrBaseIri(p[b],l);this.emitTriple(y[b],this.util.dataFactory.namedNode(r.Util.RDF+"first"),g),this.emitTriple(y[b],this.util.dataFactory.namedNode(r.Util.RDF+"rest"),b<p.length-1?y[b+1]:this.util.dataFactory.namedNode(r.Util.RDF+"nil"))}this.emitTriple(d,f,y[0])}else this.emitTriple(d,f,this.util.dataFactory.namedNode(r.Util.RDF+"nil"))}}}this.activeTagStack.pop(),l.collectChildTags&&l.text&&l.text.push(`</${l.name}>`),l.text&&c&&(c.text?c.text=c.text.concat(l.text):c.text=l.text)}onEnd(){if(this.features.copyRdfaPatterns){this.features.copyRdfaPatterns=!1;for(const l in this.rdfaPatterns){const c=this.rdfaPatterns[l];c.referenced||(c.attributes.typeof="rdfa:Pattern",c.attributes.resource=l,this.emitPatternCopy(c.parentTag,c,l),c.referenced=!1,delete c.attributes.typeof,delete c.attributes.resource)}for(const l in this.pendingRdfaPatternCopies)for(const c of this.pendingRdfaPatternCopies[l])this.activeTagStack.push(c),this.onTagOpen("link",{property:"rdfa:copy",href:l}),this.onTagClose(),this.activeTagStack.pop();this.features.copyRdfaPatterns=!0}}isInheritSubjectInHeadBody(l){return this.features.inheritSubjectInHeadBody&&(l==="head"||l==="body")}addListMapping(l,c,d,h){if(l.explicitNewSubject){const f=this.util.createBlankNode();this.emitTriple(this.util.getResourceOrBaseIri(c,l),d,f),this.emitTriple(f,this.util.dataFactory.namedNode(r.Util.RDF+"first"),this.util.getResourceOrBaseIri(h,l)),this.emitTriple(f,this.util.dataFactory.namedNode(r.Util.RDF+"rest"),this.util.dataFactory.namedNode(r.Util.RDF+"nil"))}else{let f=l.listMappingLocal[d.value];f||(l.listMappingLocal[d.value]=f=[]),h&&f.push(h)}}emitTriple(l,c,d){l.termType==="NamedNode"&&l.value.indexOf(":")<0||c.termType==="NamedNode"&&c.value.indexOf(":")<0||d.termType==="NamedNode"&&d.value.indexOf(":")<0||this.push(this.util.dataFactory.quad(l,c,d,this.defaultGraph))}emitPatternCopy(l,c,d){if(this.activeTagStack.push(l),c.referenced=!0,!c.constructedBlankNodes)c.constructedBlankNodes=[],this.util.blankNodeFactory=()=>{const h=this.util.dataFactory.blankNode();return c.constructedBlankNodes.push(h),h};else{let h=0;this.util.blankNodeFactory=()=>c.constructedBlankNodes[h++]}this.emitPatternCopyAbsolute(c,!0,d),this.util.blankNodeFactory=null,this.activeTagStack.pop()}emitPatternCopyAbsolute(l,c,d){if(!(!c&&l.attributes.property==="rdfa:copy"&&l.attributes.href===d)){this.onTagOpen(l.name,l.attributes);for(const h of l.text)this.onText(h);for(const h of l.children)this.emitPatternCopyAbsolute(h,!1,d);this.onTagClose()}}initializeParser(l){return new t.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(c){this.emit("error",c)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(c){this.emit("error",c)}},onopentag:(c,d)=>{try{this.onTagOpen(c,d),this.htmlParseListener&&this.htmlParseListener.onTagOpen(c,d)}catch(h){this.emit("error",h)}},ontext:c=>{try{this.onText(c),this.htmlParseListener&&this.htmlParseListener.onText(c)}catch(d){this.emit("error",d)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:l})}};return Fl.RdfaParser=a,Fl}var vN;function p7(){return vN||(vN=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(qJ(),t),u(BJ(),t),u(UJ(),t),u(eX(),t),u(oA(),t),u(f7(),t)}(qv)),qv}var wN;function tX(){if(wN)return Ml;wN=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.ActorRdfParseXmlRdfa=void 0;const t=su(),e=p7();let u=class extends t.ActorRdfParseFixedMediaTypes{constructor(n){super(n)}async runHandle(n,r,a){var c;const o=(n.headers&&n.headers.get("content-language"))??void 0;n.data.on("error",d=>l.emit("error",d));const l=n.data.pipe(new e.RdfaParser({baseIRI:(c=n.metadata)==null?void 0:c.baseIRI,profile:"xml",language:o}));return{data:l,metadata:{triples:!0}}}};return Ml.ActorRdfParseXmlRdfa=u,Ml}var SN;function rX(){return SN||(SN=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(tX(),t)}(Fv)),Fv}var Yv={},Ql={},w1={},Hl={},TN;function y7(){if(TN)return Hl;TN=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.promisifyEventEmitter=void 0;function t(e,u){return new Promise((s,n)=>{e.on("end",()=>s(u)),e.on("error",n)})}return Hl.promisifyEventEmitter=t,Hl}var AN;function ou(){if(AN)return w1;AN=1;var t=I&&I.__awaiter||function(s,n,r,a){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(p){try{f(a.next(p))}catch(y){c(y)}}function h(p){try{f(a.throw(p))}catch(y){c(y)}}function f(p){p.done?l(p.value):o(p.value).then(d,h)}f((a=a.apply(s,n||[])).next())})};Object.defineProperty(w1,"__esModule",{value:!0}),w1.stringify=u;const e=y7();function u(s){return t(this,void 0,void 0,function*(){let n="";return s.on("data",r=>{n+=r}),yield(0,e.promisifyEventEmitter)(s),n})}return w1}var S1={},Zv,EN;function nX(){if(EN)return Zv;EN=1;var t=function(){var e=function(Ye,$e,Je,nt){for(Je=Je||{},nt=Ye.length;nt--;Je[Ye[nt]]=$e);return Je},u=[7,12,13,14,15,16,20,25,115,130],s=[7,13,16,20,25,115,130],n=[7,13,16,115,130],r=[1,25],a=[1,29],o=[1,27],l=[1,28],c=[13,16,115,130],d=[13,16,28,38,40,42,44,46,48,53,56,61,67,85,87,92,93,95,96,102,110,111,115,119,120,126,128,129,130,131,132,133,134,135,136],h=[28,56],f=[1,42],p=[46,48,53,56],y=[1,54],b=[1,60],g=[1,56],m=[1,57],v=[1,58],_=[1,63],w=[1,64],S=[1,65],A=[1,66],D=[1,67],L=[1,68],O=[1,75],E=[28,46,48,53,56],P=[28,42,46,48,53,56],M=[13,16,28,38,40,42,44,46,48,53,56,92,115,119,120,130,131,132,133,134,135,136],U=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,119,120,126,128,129,130,131,132,133,134,135,136],j=[13,16,38,40,44,92,115,119,120,130,131,132,133,134,135,136],q=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,117,118,119,120,126,128,129,130,131,132,133,134,135,136],$=[13,16,28,56,115,130],Z=[13,16,38,58,87,96,109,115,126,130],X=[1,116],le=[1,112],K=[1,108],he=[1,114],Re=[1,111],ie=[7,13,16,20,25,44,48,53,56,67,85,87,95,96,115,128,129,130],ae=[48,53],Ee=[48,53,87,96,126],De=[13,16,44,48,53,56,85,87,95,96,115,128,129,130],ge=[1,126],de=[13,16,40,44,48,53,56,85,87,95,96,115,128,129,130],fe=[1,129],H=[48,53,67,87,96,126],N=[13,16,40,44,48,53,56,67,85,87,95,96,115,128,129,130],R=[1,133],T=[13,16,40,44,48,53,56,67,85,87,95,96,102,115,128,129,130],x=[13,16,40,44,48,53,56,67,85,87,93,95,96,102,110,111,115,128,129,130],B=[1,151],k=[1,153],V=[1,156],J=[1,157],z=[1,158],Y=[1,167],re=[1,175],ce=[13,16,44,48,53,56,67,85,87,95,96,115,128,129,130],Te=[13,16,44,48,53,56,67,85,87,95,96,115,126,128,129,130],xe=[13,16,46,92,115,119,120,130,131,132,133,134,135,136],Le={trace:function(){},yy:{},symbols_:{error:2,shaclDoc:3,shaclDoc_repetition0:4,shaclDoc_repetition1:5,ttlSection:6,EOF:7,directive:8,baseDecl:9,importsDecl:10,prefixDecl:11,KW_BASE:12,IRIREF:13,KW_IMPORTS:14,KW_PREFIX:15,PNAME_NS:16,nodeShapeIri:17,iri:18,nodeShape:19,KW_SHAPE:20,nodeShape_option0:21,nodeShape_option1:22,nodeShapeBody:23,shapeClass:24,KW_SHAPE_CLASS:25,shapeClass_option0:26,turtleAnnotation:27,";":28,turtleAnnotation2:29,predicate:30,turtleAnnotation2_option0:31,objectList:32,object:33,objectList_repetition0:34,iriOrLiteral:35,blankNodeSection:36,list:37,"(":38,list_repetition0:39,")":40,objectTail:41,",":42,LB:43,"[":44,RB:45,"]":46,LP:47,"%":48,RP:49,pcSection:50,iriHead:51,ttlStatement:52,".":53,ttlSection_repetition0:54,startNodeShape:55,"{":56,endNodeShape:57,"}":58,nodeShapeBody_repetition0:59,targetClass:60,"->":61,targetClass_repetition_plus0:62,constraint:63,constraint_group0:64,constraint_option0:65,orNotComponent:66,"|":67,nodeNot:68,nodeOrEmit:69,nodeOr:70,nodeOr_repetition_plus0:71,nodeValue:72,negation:73,nodeValue_group0:74,"=":75,iriOrLiteralOrArray:76,propertyShape:77,path:78,propertyShape_repetition0:79,propertyOrComponent:80,propertyNot:81,propertyOr:82,propertyOr_repetition_plus0:83,propertyAtom:84,NODEKIND:85,shapeRef:86,PARAM:87,propertyCount:88,propertyMinCount:89,"..":90,propertyMaxCount:91,INTEGER:92,"*":93,shapeRef_group0:94,"@":95,"!":96,pathAlternative:97,additionalAlternative:98,pathSequence:99,pathAlternative_repetition_plus0:100,additionalSequence:101,"/":102,pathEltOrInverse:103,pathSequence_repetition_plus0:104,pathElt:105,pathPrimary:106,pathMod:107,pathInverse:108,"^":109,"?":110,"+":111,iriOrLiteralOrArray_repetition0:112,literal:113,iri_group0:114,a:115,string:116,LANGTAG:117,"^^":118,DECIMAL:119,DOUBLE:120,literal_group0:121,string_group0:122,string_group1:123,shaclDoc_repetition1_group0:124,constraint_group0_repetition_plus0:125,TARGET:126,propertyShape_repetition0_group0:127,ATPNAME_LN:128,ATPNAME_NS:129,PNAME_LN:130,KW_TRUE:131,KW_FALSE:132,STRING_LITERAL1:133,STRING_LITERAL2:134,STRING_LITERAL_LONG1:135,STRING_LITERAL_LONG2:136,$accept:0,$end:1},terminals_:{2:"error",7:"EOF",12:"KW_BASE",13:"IRIREF",14:"KW_IMPORTS",15:"KW_PREFIX",16:"PNAME_NS",20:"KW_SHAPE",25:"KW_SHAPE_CLASS",28:";",38:"(",40:")",42:",",44:"[",46:"]",48:"%",53:".",56:"{",58:"}",61:"->",67:"|",75:"=",85:"NODEKIND",87:"PARAM",90:"..",92:"INTEGER",93:"*",95:"@",96:"!",102:"/",109:"^",110:"?",111:"+",115:"a",117:"LANGTAG",118:"^^",119:"DECIMAL",120:"DOUBLE",126:"TARGET",128:"ATPNAME_LN",129:"ATPNAME_NS",130:"PNAME_LN",131:"KW_TRUE",132:"KW_FALSE",133:"STRING_LITERAL1",134:"STRING_LITERAL2",135:"STRING_LITERAL_LONG1",136:"STRING_LITERAL_LONG2"},productions_:[0,[3,4],[8,1],[8,1],[8,1],[9,2],[10,2],[11,3],[17,1],[19,5],[24,4],[27,2],[29,2],[30,2],[32,2],[33,1],[33,1],[33,1],[37,3],[41,2],[43,1],[45,1],[36,3],[47,1],[49,1],[50,3],[51,1],[52,3],[6,1],[55,1],[57,1],[23,3],[60,2],[63,3],[66,2],[69,1],[70,1],[70,2],[68,1],[68,2],[72,3],[77,2],[80,2],[82,1],[82,2],[81,1],[81,2],[84,1],[84,1],[84,1],[84,3],[84,1],[88,5],[89,1],[91,1],[91,1],[86,1],[86,2],[73,1],[78,1],[98,2],[97,1],[97,2],[101,2],[99,1],[99,2],[105,1],[105,2],[103,1],[103,2],[108,1],[107,1],[107,1],[107,1],[106,1],[106,3],[76,1],[76,3],[35,1],[35,1],[18,1],[18,1],[18,1],[113,1],[113,2],[113,3],[113,1],[113,1],[113,1],[113,1],[116,1],[116,1],[4,0],[4,2],[124,1],[124,1],[5,0],[5,2],[21,0],[21,1],[22,0],[22,1],[26,0],[26,1],[31,0],[31,1],[34,0],[34,2],[39,0],[39,2],[54,0],[54,2],[59,0],[59,2],[62,1],[62,2],[125,1],[125,2],[64,1],[64,1],[65,0],[65,1],[71,1],[71,2],[74,1],[74,1],[127,1],[127,1],[79,0],[79,2],[83,1],[83,2],[94,1],[94,1],[100,1],[100,2],[104,1],[104,2],[112,0],[112,2],[114,1],[114,1],[121,1],[121,1],[122,1],[122,1],[123,1],[123,1]],performAction:function($e,Je,nt,yt,ft,et,Ir){var Ke=et.length-1;switch(ft){case 1:this.$=C(Fe.factory.namedNode(je("")),Fe.factory.namedNode(G),Fe.factory.namedNode(we+"Ontology"));break;case 5:Fe.base=Fe.factory.namedNode(et[Ke].slice(1,-1)),Fe.n3Parser._setBase(Fe.base.value);break;case 6:this.$=C(Fe.base,Fe.factory.namedNode(we+"imports"),Fe.factory.namedNode(et[Ke].slice(1,-1)));break;case 7:this.$=Fe.prefixes[et[Ke-1].substr(0,et[Ke-1].length-1)]=je(et[Ke]);break;case 8:Fe.nodeShapeStack=!1,C(Fe.currentNodeShape=et[Ke],Fe.factory.namedNode(G),Fe.factory.namedNode(pe+"NodeShape"));break;case 10:this.$=C(Fe.currentNodeShape,Fe.factory.namedNode(G),Fe.factory.namedNode(W+"Class"));break;case 11:this.$=Pe();break;case 13:this.$=et[Ke].forEach(Me=>C(Fe.currentNodeShape,et[Ke-1],Me));break;case 14:this.$=[et[Ke-1],...et[Ke]];break;case 18:this.$=Ae(et[Ke-1],!0);break;case 19:case 34:case 42:case 60:case 63:this.$=et[Ke];break;case 20:Fe.tempCurrentNodeShape=Fe.currentNodeShape,this.$=Fe.currentNodeShape=lt();break;case 21:Fe.currentNodeShape=Fe.tempCurrentNodeShape;break;case 22:case 31:this.$=et[Ke-2];break;case 23:Fe.tempCurrentNodeShape=Fe.currentNodeShape,Fe.currentNodeShape=Fe.currentPropertyNode;break;case 24:Fe.currentNodeShape=Fe.tempCurrentNodeShape;break;case 26:Fe.currentNodeShape=et[Ke];break;case 29:Fe.nodeShapeStack?(Fe.nodeShapeStack.push(Fe.currentNodeShape),C(Fe.currentPropertyNode,Fe.factory.namedNode(pe+"node"),Fe.currentNodeShape=lt())):Fe.nodeShapeStack=[],this.$=Fe.currentNodeShape;break;case 30:Fe.nodeShapeStack.length>0&&(Fe.currentNodeShape=Fe.nodeShapeStack.pop());break;case 32:this.$=et[Ke].forEach(Me=>{C(Fe.currentNodeShape,Fe.factory.namedNode(pe+"targetClass"),Me)});break;case 35:this.$=C(Fe.currentNodeShape,Fe.factory.namedNode(pe+et[Ke][0]),et[Ke][1]);break;case 36:break;case 37:const be=Ae([et[Ke-1],...et[Ke]].map(Me=>{const it=lt();return C(it,Fe.factory.namedNode(pe+Me[0]),Me[1]),it}));this.$=["or",be];break;case 39:case 46:this.$=ye("not",...et[Ke]);break;case 40:case 50:this.$=[et[Ke-2],et[Ke]];break;case 43:this.$=et[Ke]&&ee(...et[Ke]);break;case 44:this.$=ee("or",Ae([et[Ke-1],...et[Ke]].map(Me=>{const it=lt();return C(it,Fe.factory.namedNode(pe+Me[0]),Me[1]),it})));break;case 47:this.$=[Se[et[Ke].value]?"datatype":"class",et[Ke]];break;case 48:this.$=["nodeKind",Fe.factory.namedNode(pe+et[Ke])];break;case 49:this.$=["node",Fe.factory.namedNode(et[Ke])];break;case 51:this.$=void 0;break;case 53:this.$=et[Ke]>0&&ee("minCount",Ge(et[Ke],Oe));break;case 54:this.$=ee("maxCount",Ge(et[Ke],Oe));break;case 56:this.$=He(et[Ke].slice(1));break;case 57:this.$=je(et[Ke]);break;case 59:C(Fe.currentNodeShape,Fe.factory.namedNode(pe+"property"),Fe.currentPropertyNode=lt()),ee("path",et[Ke]);break;case 62:const Ie=lt();C(Ie,Fe.factory.namedNode(pe+"alternativePath"),Ae([et[Ke-1],...et[Ke]])),this.$=Ie;break;case 65:this.$=Ae([et[Ke-1],...et[Ke]]);break;case 67:C(this.$=lt(),Fe.factory.namedNode(pe+et[Ke]),et[Ke-1]);break;case 69:C(this.$=lt(),Fe.factory.namedNode(pe+"inversePath"),et[Ke]);break;case 71:this.$="zeroOrOnePath";break;case 72:this.$="zeroOrMorePath";break;case 73:this.$="oneOrMorePath";break;case 75:this.$=et[Ke-1];break;case 77:this.$=Ae(et[Ke-1]);break;case 80:this.$=Fe.factory.namedNode(je(et[Ke]));break;case 81:this.$=Fe.factory.namedNode(He(et[Ke]));break;case 82:this.$=Pe(Fe.factory.namedNode(G));break;case 83:this.$=Ge(et[Ke]);break;case 84:this.$=tt(et[Ke-1],lowercase(et[Ke].substr(1)));break;case 85:this.$=Ge(et[Ke-2],et[Ke]);break;case 86:this.$=Ge(et[Ke],Oe);break;case 87:this.$=Ge(et[Ke],Ne);break;case 88:this.$=Ge(et[Ke].toLowerCase(),We);break;case 89:this.$=Ge(et[Ke].toLowerCase(),Ve);break;case 90:this.$=oe(et[Ke],1);break;case 91:this.$=oe(et[Ke],3);break;case 92:case 96:case 106:case 108:case 110:case 112:case 128:case 138:this.$=[];break;case 93:case 97:case 107:case 109:case 111:case 113:case 115:case 117:case 123:case 129:case 131:case 135:case 137:case 139:et[Ke-1].push(et[Ke]);break;case 114:case 116:case 122:case 130:case 134:case 136:this.$=[et[Ke]];break}},table:[e(u,[2,92],{3:1,4:2}),{1:[3]},e(s,[2,96],{5:3,8:4,9:5,10:6,11:7,12:[1,8],14:[1,9],15:[1,10]}),e(n,[2,110],{6:11,124:12,54:13,19:14,24:15,20:[1,16],25:[1,17]}),e(u,[2,93]),e(u,[2,2]),e(u,[2,3]),e(u,[2,4]),{13:[1,18]},{13:[1,19]},{16:[1,20]},{7:[1,21]},e(s,[2,97]),{7:[2,28],13:r,16:a,18:24,51:23,52:22,114:26,115:o,130:l},e(s,[2,94]),e(s,[2,95]),{13:r,16:a,17:30,18:31,114:26,115:o,130:l},{13:r,16:a,17:32,18:31,114:26,115:o,130:l},e(u,[2,5]),e(u,[2,6]),{13:[1,33]},{1:[2,1]},e(n,[2,111]),{13:r,16:a,18:36,29:34,30:35,114:26,115:o,130:l},e(c,[2,26]),e(d,[2,80]),e(d,[2,81]),e(d,[2,82]),e(d,[2,140]),e(d,[2,141]),e(h,[2,98],{21:37,60:38,61:[1,39]}),e([28,56,61],[2,8]),{26:40,27:41,28:f,56:[2,102]},e(u,[2,7]),{53:[1,43]},e(p,[2,104],{31:44,27:45,28:f}),{13:r,16:a,18:51,32:46,33:47,35:48,36:49,37:50,38:y,43:53,44:b,92:g,113:52,114:26,115:o,116:55,119:m,120:v,121:59,122:61,123:62,130:l,131:_,132:w,133:S,134:A,135:D,136:L},{22:69,27:70,28:f,56:[2,100]},e(h,[2,99]),{13:r,16:a,18:72,62:71,114:26,115:o,130:l},{23:73,55:74,56:O},{56:[2,103]},{13:r,16:a,18:36,29:76,30:35,114:26,115:o,130:l},e(n,[2,27]),e(p,[2,12]),e(p,[2,105]),e(E,[2,13]),e(P,[2,106],{34:77}),e(M,[2,15]),e(M,[2,16]),e(M,[2,17]),e(U,[2,78]),e(U,[2,79]),{13:r,16:a,18:36,29:78,30:35,114:26,115:o,130:l},e(j,[2,108],{39:79}),e(U,[2,83],{117:[1,80],118:[1,81]}),e(U,[2,86]),e(U,[2,87]),e(U,[2,88]),e(U,[2,89]),e(c,[2,20]),e(q,[2,90]),e(q,[2,91]),e(U,[2,142]),e(U,[2,143]),e(q,[2,144]),e(q,[2,145]),e(q,[2,146]),e(q,[2,147]),{23:82,55:74,56:O},{56:[2,101]},e(h,[2,32],{114:26,18:83,13:r,16:a,115:o,130:l}),e($,[2,114]),e(s,[2,10]),e(Z,[2,112],{59:84}),e(Z,[2,29]),e(p,[2,11]),e(E,[2,14],{41:85,42:[1,86]}),{45:87,46:[1,88]},{13:r,16:a,18:51,33:90,35:48,36:49,37:50,38:y,40:[1,89],43:53,44:b,92:g,113:52,114:26,115:o,116:55,119:m,120:v,121:59,122:61,123:62,130:l,131:_,132:w,133:S,134:A,135:D,136:L},e(U,[2,84]),{13:r,16:a,18:91,114:26,115:o,130:l},e(s,[2,9]),e($,[2,115]),{13:r,16:a,18:115,38:X,57:92,58:[1,94],63:93,64:95,68:102,69:98,70:100,72:104,73:105,74:107,77:97,78:99,87:le,96:K,97:101,99:103,103:106,105:109,106:113,108:110,109:he,114:26,115:o,125:96,126:Re,130:l},e(P,[2,107]),{13:r,16:a,18:51,33:117,35:48,36:49,37:50,38:y,43:53,44:b,92:g,113:52,114:26,115:o,116:55,119:m,120:v,121:59,122:61,123:62,130:l,131:_,132:w,133:S,134:A,135:D,136:L},e(M,[2,22]),e(M,[2,21]),e(M,[2,18]),e(j,[2,109]),e(U,[2,85]),e(ie,[2,31]),e(Z,[2,113]),e(ie,[2,30]),{47:120,48:[1,121],50:119,53:[2,120],65:118},e(ae,[2,118],{70:100,68:102,72:104,73:105,74:107,69:122,87:le,96:K,126:Re}),e(ae,[2,119]),e(Ee,[2,116]),e(De,[2,128],{79:123}),e(Ee,[2,35]),e(De,[2,59]),e(Ee,[2,36],{71:124,66:125,67:ge}),e(de,[2,61],{100:127,98:128,67:fe}),e(H,[2,38]),{72:130,74:107,87:le,126:Re},e(N,[2,64],{104:131,101:132,102:R}),{75:[1,134]},e([13,16,56,85,87,95,115,126,128,129,130],[2,58]),e(T,[2,68]),{13:r,16:a,18:115,38:X,105:135,106:113,114:26,115:o,130:l},{75:[2,124]},{75:[2,125]},e(T,[2,66],{107:136,93:[1,138],110:[1,137],111:[1,139]}),e([13,16,38,115,130],[2,70]),e(x,[2,74]),{13:r,16:a,18:115,38:X,97:140,99:103,103:106,105:109,106:113,108:110,109:he,114:26,115:o,130:l},e(P,[2,19]),{53:[1,141]},{53:[2,121]},{13:r,16:a,18:36,29:142,30:35,114:26,115:o,130:l},e(c,[2,23]),e(Ee,[2,117]),e(ae,[2,41],{114:26,55:74,127:143,88:144,82:145,81:147,84:148,73:149,18:150,86:152,23:154,94:155,13:r,16:a,44:[1,146],56:O,85:B,87:k,95:V,96:K,115:o,128:J,129:z,130:l}),e(Ee,[2,37],{66:159,67:ge}),e(H,[2,122]),{68:160,72:104,73:105,74:107,87:le,96:K,126:Re},e(de,[2,62],{98:161,67:fe}),e(N,[2,134]),{13:r,16:a,18:115,38:X,99:162,103:106,105:109,106:113,108:110,109:he,114:26,115:o,130:l},e(H,[2,39]),e(N,[2,65],{101:163,102:R}),e(T,[2,136]),{13:r,16:a,18:115,38:X,103:164,105:109,106:113,108:110,109:he,114:26,115:o,130:l},{13:r,16:a,18:51,35:166,44:Y,76:165,92:g,113:52,114:26,115:o,116:55,119:m,120:v,121:59,122:61,123:62,130:l,131:_,132:w,133:S,134:A,135:D,136:L},e(T,[2,69]),e(T,[2,67]),e(T,[2,71]),e(T,[2,72]),e(T,[2,73]),{40:[1,168]},e(Z,[2,33]),{48:[1,170],49:169},e(De,[2,129]),e(De,[2,126]),e(De,[2,127]),{89:171,92:[1,172]},e(De,[2,43],{83:173,80:174,67:re}),e(ce,[2,45]),{13:r,16:a,18:150,23:154,55:74,56:O,84:176,85:B,86:152,87:k,94:155,95:V,114:26,115:o,128:J,129:z,130:l},e(ce,[2,47]),e(ce,[2,48]),e(ce,[2,49]),{75:[1,177]},e(ce,[2,51]),e(ce,[2,56]),{13:[1,178]},e(ce,[2,132]),e(ce,[2,133]),e(H,[2,123]),e(H,[2,34]),e(N,[2,135]),e(N,[2,60]),e(T,[2,137]),e(T,[2,63]),e(H,[2,40]),e(Te,[2,76]),e(xe,[2,138],{112:179}),e(x,[2,75]),{53:[2,25]},{53:[2,24]},{90:[1,180]},{90:[2,53]},e(De,[2,44],{80:181,67:re}),e(ce,[2,130]),{13:r,16:a,18:150,23:154,55:74,56:O,73:149,81:182,84:148,85:B,86:152,87:k,94:155,95:V,96:K,114:26,115:o,128:J,129:z,130:l},e(ce,[2,46]),{13:r,16:a,18:51,35:166,44:Y,76:183,92:g,113:52,114:26,115:o,116:55,119:m,120:v,121:59,122:61,123:62,130:l,131:_,132:w,133:S,134:A,135:D,136:L},e(ce,[2,57]),{13:r,16:a,18:51,35:185,46:[1,184],92:g,113:52,114:26,115:o,116:55,119:m,120:v,121:59,122:61,123:62,130:l,131:_,132:w,133:S,134:A,135:D,136:L},{91:186,92:[1,187],93:[1,188]},e(ce,[2,131]),e(ce,[2,42]),e(ce,[2,50]),e(Te,[2,77]),e(xe,[2,139]),{46:[1,189]},{46:[2,54]},{46:[2,55]},e(De,[2,52])],defaultActions:{21:[2,1],41:[2,103],70:[2,101],111:[2,124],112:[2,125],119:[2,121],169:[2,25],170:[2,24],172:[2,53],187:[2,54],188:[2,55]},parseError:function($e,Je){if(Je.recoverable)this.trace($e);else{var nt=new Error($e);throw nt.hash=Je,nt}},parse:function($e){var Je=this,nt=[0],yt=[null],ft=[],et=this.table,Ir="",Ke=0,be=0,Ie=2,Me=1,it=ft.slice.call(arguments,1),at=Object.create(this.lexer),Tt={yy:{}};for(var Vt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Vt)&&(Tt.yy[Vt]=this.yy[Vt]);at.setInput($e,Tt.yy),Tt.yy.lexer=at,Tt.yy.parser=this,typeof at.yylloc>"u"&&(at.yylloc={});var rr=at.yylloc;ft.push(rr);var fi=at.options&&at.options.ranges;typeof Tt.yy.parseError=="function"?this.parseError=Tt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var bn=function(){var Xr;return Xr=at.lex()||Me,typeof Xr!="number"&&(Xr=Je.symbols_[Xr]||Xr),Xr},or,Ln,Qr,Qn,Pr={},hi,Mr,Ni,Zi;;){if(Ln=nt[nt.length-1],this.defaultActions[Ln]?Qr=this.defaultActions[Ln]:((or===null||typeof or>"u")&&(or=bn()),Qr=et[Ln]&&et[Ln][or]),typeof Qr>"u"||!Qr.length||!Qr[0]){var mn="";Zi=[];for(hi in et[Ln])this.terminals_[hi]&&hi>Ie&&Zi.push("'"+this.terminals_[hi]+"'");at.showPosition?mn="Parse error on line "+(Ke+1)+`:
`+at.showPosition()+`
Expecting `+Zi.join(", ")+", got '"+(this.terminals_[or]||or)+"'":mn="Parse error on line "+(Ke+1)+": Unexpected "+(or==Me?"end of input":"'"+(this.terminals_[or]||or)+"'"),this.parseError(mn,{text:at.match,token:this.terminals_[or]||or,line:at.yylineno,loc:rr,expected:Zi})}if(Qr[0]instanceof Array&&Qr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ln+", token: "+or);switch(Qr[0]){case 1:nt.push(or),yt.push(at.yytext),ft.push(at.yylloc),nt.push(Qr[1]),or=null,be=at.yyleng,Ir=at.yytext,Ke=at.yylineno,rr=at.yylloc;break;case 2:if(Mr=this.productions_[Qr[1]][1],Pr.$=yt[yt.length-Mr],Pr._$={first_line:ft[ft.length-(Mr||1)].first_line,last_line:ft[ft.length-1].last_line,first_column:ft[ft.length-(Mr||1)].first_column,last_column:ft[ft.length-1].last_column},fi&&(Pr._$.range=[ft[ft.length-(Mr||1)].range[0],ft[ft.length-1].range[1]]),Qn=this.performAction.apply(Pr,[Ir,be,Ke,Tt.yy,Qr[1],yt,ft].concat(it)),typeof Qn<"u")return Qn;Mr&&(nt=nt.slice(0,-1*Mr*2),yt=yt.slice(0,-1*Mr),ft=ft.slice(0,-1*Mr)),nt.push(this.productions_[Qr[1]][0]),yt.push(Pr.$),ft.push(Pr._$),Ni=et[nt[nt.length-2]][nt[nt.length-1]],nt.push(Ni);break;case 3:return!0}}return!0}};const qe="http://www.w3.org/1999/02/22-rdf-syntax-ns#",G=qe+"type",F=qe+"first",Q=qe+"rest",te=qe+"nil",me="http://www.w3.org/2001/XMLSchema#",Oe=me+"integer",Ne=me+"decimal",We=me+"double",Ve=me+"boolean",pe="http://www.w3.org/ns/shacl#",we="http://www.w3.org/2002/07/owl#",W="http://www.w3.org/2000/01/rdf-schema#",Se={[Oe]:!0,[Ne]:!0,[me+"float"]:!0,[We]:!0,[me+"string"]:!0,[Ve]:!0,[me+"dateTime"]:!0,[me+"nonPositiveInteger"]:!0,[me+"negativeInteger"]:!0,[me+"long"]:!0,[me+"int"]:!0,[me+"short"]:!0,[me+"byte"]:!0,[me+"nonNegativeInteger"]:!0,[me+"unsignedLong"]:!0,[me+"unsignedShort"]:!0,[me+"unsignedByte"]:!0,[me+"positiveInteger"]:!0,[qe+"langString"]:!0};function Ae(Ye,$e=!1){let Je=0,nt=Ye.length;if($e&&nt===0)return Fe.factory.namedNode(te);const yt=head=lt();return nt===0&&C(head,Fe.factory.namedNode(Q),Fe.factory.namedNode(te)),Ye.forEach(ft=>{if(ft===void 0)throw new Error("b");C(head,Fe.factory.namedNode(F),ft),C(head,Fe.factory.namedNode(Q),head=++Je<nt?lt():Fe.factory.namedNode(te))}),yt}function je(Ye){return Fe.n3Parser._resolveIRI(Ye[0]==="<"?Ye.substring(1,Ye.length-1):Ye)}function He(Ye){const $e=Ye.indexOf(":"),Je=Ye.substr(0,$e),nt=Fe.prefixes[Je];if(!nt)throw new Error("Unknown prefix: "+Je);return je(nt+Ye.substr($e+1))}function Ge(Ye,$e){return $e&&$e.termType!=="NamedNode"&&($e=Fe.factory.namedNode($e)),Fe.factory.literal(Ye,$e)}function tt(Ye,$e){return Fe.factory.literal(Ye,$e)}function lt(Ye){return typeof Ye=="string"?Ye.startsWith("e_")?Fe.factory.blankNode(Ye):Fe.factory.blankNode("e_"+Ye):Fe.factory.blankNode("g_"+ut++)}var ut=0;Fe._resetBlanks=function(){ut=0};function oe(Ye,$e){return Fe.n3Parser._lexer._unescape(Ye.substring($e,Ye.length-$e))}function C(Ye,$e,Je){if(!Ye.termType||!$e.termType||$e.value.includes(",")||!Je.termType)throw new Error(`boo ${Ye.value} ${$e.value} ${Je.value}`);Fe.onQuad(Fe.factory.quad(Ye,$e,Je))}function ee(Ye,$e){C(Fe.currentPropertyNode,Fe.factory.namedNode(pe+Ye),$e)}function ye(Ye,$e,Je){const nt=lt();return C(nt,Fe.factory.namedNode(pe+$e),Je),[Ye,nt]}function Pe(Ye){if(!Fe.extended)throw new Error("Encountered extended SHACLC syntax; but extended parsing is disabled");return Ye}var Ue=function(){var Ye={EOF:1,parseError:function(Je,nt){if(this.yy.parser)this.yy.parser.parseError(Je,nt);else throw new Error(Je)},setInput:function($e,Je){return this.yy=Je||this.yy||{},this._input=$e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var $e=this._input[0];this.yytext+=$e,this.yyleng++,this.offset++,this.match+=$e,this.matched+=$e;var Je=$e.match(/(?:\r\n?|\n).*/g);return Je?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),$e},unput:function($e){var Je=$e.length,nt=$e.split(/(?:\r\n?|\n)/g);this._input=$e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Je),this.offset-=Je;var yt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),nt.length-1&&(this.yylineno-=nt.length-1);var ft=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:nt?(nt.length===yt.length?this.yylloc.first_column:0)+yt[yt.length-nt.length].length-nt[0].length:this.yylloc.first_column-Je},this.options.ranges&&(this.yylloc.range=[ft[0],ft[0]+this.yyleng-Je]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function($e){this.unput(this.match.slice($e))},pastInput:function(){var $e=this.matched.substr(0,this.matched.length-this.match.length);return($e.length>20?"...":"")+$e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var $e=this.match;return $e.length<20&&($e+=this._input.substr(0,20-$e.length)),($e.substr(0,20)+($e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var $e=this.pastInput(),Je=new Array($e.length+1).join("-");return $e+this.upcomingInput()+`
`+Je+"^"},test_match:function($e,Je){var nt,yt,ft;if(this.options.backtrack_lexer&&(ft={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ft.yylloc.range=this.yylloc.range.slice(0))),yt=$e[0].match(/(?:\r\n?|\n).*/g),yt&&(this.yylineno+=yt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:yt?yt[yt.length-1].length-yt[yt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+$e[0].length},this.yytext+=$e[0],this.match+=$e[0],this.matches=$e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice($e[0].length),this.matched+=$e[0],nt=this.performAction.call(this,this.yy,this,Je,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),nt)return nt;if(this._backtrack){for(var et in ft)this[et]=ft[et];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var $e,Je,nt,yt;this._more||(this.yytext="",this.match="");for(var ft=this._currentRules(),et=0;et<ft.length;et++)if(nt=this._input.match(this.rules[ft[et]]),nt&&(!Je||nt[0].length>Je[0].length)){if(Je=nt,yt=et,this.options.backtrack_lexer){if($e=this.test_match(nt,ft[et]),$e!==!1)return $e;if(this._backtrack){Je=!1;continue}else return!1}else if(!this.options.flex)break}return Je?($e=this.test_match(Je,ft[yt]),$e!==!1?$e:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Je=this.next();return Je||this.lex()},begin:function(Je){this.conditionStack.push(Je)},popState:function(){var Je=this.conditionStack.length-1;return Je>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Je){return Je=this.conditionStack.length-1-Math.abs(Je||0),Je>=0?this.conditionStack[Je]:"INITIAL"},pushState:function(Je){this.begin(Je)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(Je,nt,yt,ft){switch(yt){case 0:break;case 1:return 12;case 2:return 14;case 3:return 15;case 4:return 25;case 5:return 20;case 6:return 131;case 7:return 132;case 8:return 85;case 9:return 126;case 10:return 87;case 11:return"PASS";case 12:return"COMMENT";case 13:return 13;case 14:return 16;case 15:return 130;case 16:return 129;case 17:return 128;case 18:return 117;case 19:return 92;case 20:return 119;case 21:return 120;case 22:return"EXPONENT";case 23:return 133;case 24:return 134;case 25:return 135;case 26:return 136;case 27:return 61;case 28:return 90;case 29:return 58;case 30:return 56;case 31:return 38;case 32:return 40;case 33:return 44;case 34:return 46;case 35:return 110;case 36:return 93;case 37:return 111;case 38:return 67;case 39:return 118;case 40:return 53;case 41:return 96;case 42:return 102;case 43:return 75;case 44:return 95;case 45:return 109;case 46:return 28;case 47:return 42;case 48:return 48;case 49:return 115;case 50:return 7;case 51:console.log(nt.yytext);break}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:IMPORTS)/i,/^(?:PREFIX)/i,/^(?:shapeClass)/i,/^(?:shape)/i,/^(?:true)/i,/^(?:false)/i,/^(?:(BlankNode|IRI|Literal|BlankNodeOrIRI|BlankNodeOrLiteral|IRIOrLiteral\b))/i,/^(?:(targetNode|targetObjectsOf|targetSubjectsOf\b))/i,/^(?:(deactivated|severity|message|class|datatype|nodeKind|minExclusive|minInclusive|maxExclusive|maxInclusive|minLength|maxLength|pattern|flags|languageIn|uniqueLang|equals|disjoint|lessThan|lessThanOrEquals|qualifiedValueShape|qualifiedMinCount|qualifiedMaxCount|qualifiedValueShapesDisjoint|closed|ignoredProperties|hasValue|in))/i,/^(?:([ \t\r\n]+))/i,/^(?:(#[\r\n]*))/i,/^(?:(<([^=<>\"\{\}\|\^`\\\u0000-\u0020]|(\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*>))/i,/^(?:((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@(([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(@((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@[a-zA-Z]+(-[a-zA-Z0-9]+)*))/i,/^(?:([+-]?[0-9]+))/i,/^(?:([+-]?[0-9]*\.[0-9]+))/i,/^(?:([+-]?([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.?[0-9]+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"\'])))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"\'])))*"""))/i,/^(?:->)/i,/^(?:\.\.)/i,/^(?:\})/i,/^(?:\{)/i,/^(?:\()/i,/^(?:\))/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\?)/i,/^(?:\*)/i,/^(?:\+)/i,/^(?:\|)/i,/^(?:\^\^)/i,/^(?:\.)/i,/^(?:!)/i,/^(?:\/)/i,/^(?:=)/i,/^(?:@)/i,/^(?:\^)/i,/^(?:;)/i,/^(?:,)/i,/^(?:%)/i,/^(?:a)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return Ye}();Le.lexer=Ue;function Fe(){this.yy={}}return Fe.prototype=Le,Le.Parser=Fe,new Fe}();return Zv=t,Zv}var ON;function iX(){if(ON)return S1;ON=1;const t=nX().Parser,e=is;class u{constructor(){}parse(n,{extendedSyntax:r,baseIRI:a}={}){this._parser=new t,this._parser.Parser.factory=e.DataFactory,this._parser.Parser.base=e.DataFactory.namedNode(a||"urn:x-base:default"),this._parser.Parser.extended=r===!0,this._parser.Parser.prefixes={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"},this._parser.Parser.currentNodeShape=void 0,this._parser.Parser.currentPropertyNode=void 0,this._parser.Parser.nodeShapeStack=[],this._parser.Parser.tempCurrentNodeShape=void 0,this._parser.Parser.n3Parser=new e.Parser({baseIRI:a||"urn:x-base:default"});const o=[];return this._parser.Parser.onQuad=l=>{o.push(l)},this._parser.parse(n),o.prefixes=this._parser.Parser.prefixes,o}}return S1.Parser=u,S1.parse=function(n,r){return new u().parse(n,r)},S1}var $l={},RN;function aX(){if(RN)return $l;RN=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.PrefixWrappingIterator=void 0;const t=Dt();let e=class extends t.WrappingIterator{constructor(s){super(s==null?void 0:s.then(n=>(this.prefixes=n.prefixes,n)))}read(){if(this.prefixes){for(const s of Object.entries(this.prefixes))this.emit("prefix",...s);delete this.prefixes}return super.read()}};return $l.PrefixWrappingIterator=e,$l}var xN;function sX(){if(xN)return Ql;xN=1,Object.defineProperty(Ql,"__esModule",{value:!0}),Ql.ActorRdfParseShaclc=void 0;const t=su(),e=ou(),u=Wt(),s=iX(),n=aX();let r=class extends t.ActorRdfParseFixedMediaTypes{constructor(o){super(o)}async runHandle(o,l,c){const d=new n.PrefixWrappingIterator((0,e.stringify)(o.data).then(f=>{var p;return(0,s.parse)(f,{extendedSyntax:l==="text/shaclc-ext",baseIRI:(p=o.metadata)==null?void 0:p.baseIRI})})),h=new u.Readable({objectMode:!0});return d.on("prefix",(...f)=>h.emit("prefix",...f)),{data:h.wrap(d),metadata:{triples:!0}}}};return Ql.ActorRdfParseShaclc=r,Ql}var IN;function oX(){return IN||(IN=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(sX(),t)}(Yv)),Yv}var ew={},Vl={},tw={},kl={},_o={},PN;function b7(){if(PN)return _o;PN=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.QuoteType=void 0;var t=Xa(),e;(function(c){c[c.Tab=9]="Tab",c[c.NewLine=10]="NewLine",c[c.FormFeed=12]="FormFeed",c[c.CarriageReturn=13]="CarriageReturn",c[c.Space=32]="Space",c[c.ExclamationMark=33]="ExclamationMark",c[c.Number=35]="Number",c[c.Amp=38]="Amp",c[c.SingleQuote=39]="SingleQuote",c[c.DoubleQuote=34]="DoubleQuote",c[c.Dash=45]="Dash",c[c.Slash=47]="Slash",c[c.Zero=48]="Zero",c[c.Nine=57]="Nine",c[c.Semi=59]="Semi",c[c.Lt=60]="Lt",c[c.Eq=61]="Eq",c[c.Gt=62]="Gt",c[c.Questionmark=63]="Questionmark",c[c.UpperA=65]="UpperA",c[c.LowerA=97]="LowerA",c[c.UpperF=70]="UpperF",c[c.LowerF=102]="LowerF",c[c.UpperZ=90]="UpperZ",c[c.LowerZ=122]="LowerZ",c[c.LowerX=120]="LowerX",c[c.OpeningSquareBracket=91]="OpeningSquareBracket"})(e||(e={}));var u;(function(c){c[c.Text=1]="Text",c[c.BeforeTagName=2]="BeforeTagName",c[c.InTagName=3]="InTagName",c[c.InSelfClosingTag=4]="InSelfClosingTag",c[c.BeforeClosingTagName=5]="BeforeClosingTagName",c[c.InClosingTagName=6]="InClosingTagName",c[c.AfterClosingTagName=7]="AfterClosingTagName",c[c.BeforeAttributeName=8]="BeforeAttributeName",c[c.InAttributeName=9]="InAttributeName",c[c.AfterAttributeName=10]="AfterAttributeName",c[c.BeforeAttributeValue=11]="BeforeAttributeValue",c[c.InAttributeValueDq=12]="InAttributeValueDq",c[c.InAttributeValueSq=13]="InAttributeValueSq",c[c.InAttributeValueNq=14]="InAttributeValueNq",c[c.BeforeDeclaration=15]="BeforeDeclaration",c[c.InDeclaration=16]="InDeclaration",c[c.InProcessingInstruction=17]="InProcessingInstruction",c[c.BeforeComment=18]="BeforeComment",c[c.CDATASequence=19]="CDATASequence",c[c.InSpecialComment=20]="InSpecialComment",c[c.InCommentLike=21]="InCommentLike",c[c.BeforeSpecialS=22]="BeforeSpecialS",c[c.BeforeSpecialT=23]="BeforeSpecialT",c[c.SpecialStartSequence=24]="SpecialStartSequence",c[c.InSpecialTag=25]="InSpecialTag",c[c.InEntity=26]="InEntity"})(u||(u={}));function s(c){return c===e.Space||c===e.NewLine||c===e.Tab||c===e.FormFeed||c===e.CarriageReturn}function n(c){return c===e.Slash||c===e.Gt||s(c)}function r(c){return c>=e.LowerA&&c<=e.LowerZ||c>=e.UpperA&&c<=e.UpperZ}var a;(function(c){c[c.NoValue=0]="NoValue",c[c.Unquoted=1]="Unquoted",c[c.Single=2]="Single",c[c.Double=3]="Double"})(a||(_o.QuoteType=a={}));var o={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])},l=function(){function c(d,h){var f=d.xmlMode,p=f===void 0?!1:f,y=d.decodeEntities,b=y===void 0?!0:y,g=this;this.cbs=h,this.state=u.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=u.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=p,this.decodeEntities=b,this.entityDecoder=new t.EntityDecoder(p?t.xmlDecodeTree:t.htmlDecodeTree,function(m,v){return g.emitCodePoint(m,v)})}return c.prototype.reset=function(){this.state=u.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=u.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},c.prototype.write=function(d){this.offset+=this.buffer.length,this.buffer=d,this.parse()},c.prototype.end=function(){this.running&&this.finish()},c.prototype.pause=function(){this.running=!1},c.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},c.prototype.stateText=function(d){d===e.Lt||!this.decodeEntities&&this.fastForwardTo(e.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=u.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&d===e.Amp&&this.startEntity()},c.prototype.stateSpecialStartSequence=function(d){var h=this.sequenceIndex===this.currentSequence.length,f=h?n(d):(d|32)===this.currentSequence[this.sequenceIndex];if(!f)this.isSpecial=!1;else if(!h){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=u.InTagName,this.stateInTagName(d)},c.prototype.stateInSpecialTag=function(d){if(this.sequenceIndex===this.currentSequence.length){if(d===e.Gt||s(d)){var h=this.index-this.currentSequence.length;if(this.sectionStart<h){var f=this.index;this.index=h,this.cbs.ontext(this.sectionStart,h),this.index=f}this.isSpecial=!1,this.sectionStart=h+2,this.stateInClosingTagName(d);return}this.sequenceIndex=0}(d|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===o.TitleEnd?this.decodeEntities&&d===e.Amp&&this.startEntity():this.fastForwardTo(e.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(d===e.Lt)},c.prototype.stateCDATASequence=function(d){d===o.Cdata[this.sequenceIndex]?++this.sequenceIndex===o.Cdata.length&&(this.state=u.InCommentLike,this.currentSequence=o.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=u.InDeclaration,this.stateInDeclaration(d))},c.prototype.fastForwardTo=function(d){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===d)return!0;return this.index=this.buffer.length+this.offset-1,!1},c.prototype.stateInCommentLike=function(d){d===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===o.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=u.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):d!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},c.prototype.isTagStartChar=function(d){return this.xmlMode?!n(d):r(d)},c.prototype.startSpecial=function(d,h){this.isSpecial=!0,this.currentSequence=d,this.sequenceIndex=h,this.state=u.SpecialStartSequence},c.prototype.stateBeforeTagName=function(d){if(d===e.ExclamationMark)this.state=u.BeforeDeclaration,this.sectionStart=this.index+1;else if(d===e.Questionmark)this.state=u.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(d)){var h=d|32;this.sectionStart=this.index,this.xmlMode?this.state=u.InTagName:h===o.ScriptEnd[2]?this.state=u.BeforeSpecialS:h===o.TitleEnd[2]?this.state=u.BeforeSpecialT:this.state=u.InTagName}else d===e.Slash?this.state=u.BeforeClosingTagName:(this.state=u.Text,this.stateText(d))},c.prototype.stateInTagName=function(d){n(d)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=u.BeforeAttributeName,this.stateBeforeAttributeName(d))},c.prototype.stateBeforeClosingTagName=function(d){s(d)||(d===e.Gt?this.state=u.Text:(this.state=this.isTagStartChar(d)?u.InClosingTagName:u.InSpecialComment,this.sectionStart=this.index))},c.prototype.stateInClosingTagName=function(d){(d===e.Gt||s(d))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=u.AfterClosingTagName,this.stateAfterClosingTagName(d))},c.prototype.stateAfterClosingTagName=function(d){(d===e.Gt||this.fastForwardTo(e.Gt))&&(this.state=u.Text,this.sectionStart=this.index+1)},c.prototype.stateBeforeAttributeName=function(d){d===e.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=u.InSpecialTag,this.sequenceIndex=0):this.state=u.Text,this.sectionStart=this.index+1):d===e.Slash?this.state=u.InSelfClosingTag:s(d)||(this.state=u.InAttributeName,this.sectionStart=this.index)},c.prototype.stateInSelfClosingTag=function(d){d===e.Gt?(this.cbs.onselfclosingtag(this.index),this.state=u.Text,this.sectionStart=this.index+1,this.isSpecial=!1):s(d)||(this.state=u.BeforeAttributeName,this.stateBeforeAttributeName(d))},c.prototype.stateInAttributeName=function(d){(d===e.Eq||n(d))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=u.AfterAttributeName,this.stateAfterAttributeName(d))},c.prototype.stateAfterAttributeName=function(d){d===e.Eq?this.state=u.BeforeAttributeValue:d===e.Slash||d===e.Gt?(this.cbs.onattribend(a.NoValue,this.sectionStart),this.sectionStart=-1,this.state=u.BeforeAttributeName,this.stateBeforeAttributeName(d)):s(d)||(this.cbs.onattribend(a.NoValue,this.sectionStart),this.state=u.InAttributeName,this.sectionStart=this.index)},c.prototype.stateBeforeAttributeValue=function(d){d===e.DoubleQuote?(this.state=u.InAttributeValueDq,this.sectionStart=this.index+1):d===e.SingleQuote?(this.state=u.InAttributeValueSq,this.sectionStart=this.index+1):s(d)||(this.sectionStart=this.index,this.state=u.InAttributeValueNq,this.stateInAttributeValueNoQuotes(d))},c.prototype.handleInAttributeValue=function(d,h){d===h||!this.decodeEntities&&this.fastForwardTo(h)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(h===e.DoubleQuote?a.Double:a.Single,this.index+1),this.state=u.BeforeAttributeName):this.decodeEntities&&d===e.Amp&&this.startEntity()},c.prototype.stateInAttributeValueDoubleQuotes=function(d){this.handleInAttributeValue(d,e.DoubleQuote)},c.prototype.stateInAttributeValueSingleQuotes=function(d){this.handleInAttributeValue(d,e.SingleQuote)},c.prototype.stateInAttributeValueNoQuotes=function(d){s(d)||d===e.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(a.Unquoted,this.index),this.state=u.BeforeAttributeName,this.stateBeforeAttributeName(d)):this.decodeEntities&&d===e.Amp&&this.startEntity()},c.prototype.stateBeforeDeclaration=function(d){d===e.OpeningSquareBracket?(this.state=u.CDATASequence,this.sequenceIndex=0):this.state=d===e.Dash?u.BeforeComment:u.InDeclaration},c.prototype.stateInDeclaration=function(d){(d===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=u.Text,this.sectionStart=this.index+1)},c.prototype.stateInProcessingInstruction=function(d){(d===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=u.Text,this.sectionStart=this.index+1)},c.prototype.stateBeforeComment=function(d){d===e.Dash?(this.state=u.InCommentLike,this.currentSequence=o.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=u.InDeclaration},c.prototype.stateInSpecialComment=function(d){(d===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=u.Text,this.sectionStart=this.index+1)},c.prototype.stateBeforeSpecialS=function(d){var h=d|32;h===o.ScriptEnd[3]?this.startSpecial(o.ScriptEnd,4):h===o.StyleEnd[3]?this.startSpecial(o.StyleEnd,4):(this.state=u.InTagName,this.stateInTagName(d))},c.prototype.stateBeforeSpecialT=function(d){var h=d|32;h===o.TitleEnd[3]?this.startSpecial(o.TitleEnd,4):h===o.TextareaEnd[3]?this.startSpecial(o.TextareaEnd,4):(this.state=u.InTagName,this.stateInTagName(d))},c.prototype.startEntity=function(){this.baseState=this.state,this.state=u.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?t.DecodingMode.Strict:this.baseState===u.Text||this.baseState===u.InSpecialTag?t.DecodingMode.Legacy:t.DecodingMode.Attribute)},c.prototype.stateInEntity=function(){var d=this.entityDecoder.write(this.buffer,this.index-this.offset);d>=0?(this.state=this.baseState,d===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1},c.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===u.Text||this.state===u.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===u.InAttributeValueDq||this.state===u.InAttributeValueSq||this.state===u.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},c.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},c.prototype.parse=function(){for(;this.shouldContinue();){var d=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case u.Text:{this.stateText(d);break}case u.SpecialStartSequence:{this.stateSpecialStartSequence(d);break}case u.InSpecialTag:{this.stateInSpecialTag(d);break}case u.CDATASequence:{this.stateCDATASequence(d);break}case u.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(d);break}case u.InAttributeName:{this.stateInAttributeName(d);break}case u.InCommentLike:{this.stateInCommentLike(d);break}case u.InSpecialComment:{this.stateInSpecialComment(d);break}case u.BeforeAttributeName:{this.stateBeforeAttributeName(d);break}case u.InTagName:{this.stateInTagName(d);break}case u.InClosingTagName:{this.stateInClosingTagName(d);break}case u.BeforeTagName:{this.stateBeforeTagName(d);break}case u.AfterAttributeName:{this.stateAfterAttributeName(d);break}case u.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(d);break}case u.BeforeAttributeValue:{this.stateBeforeAttributeValue(d);break}case u.BeforeClosingTagName:{this.stateBeforeClosingTagName(d);break}case u.AfterClosingTagName:{this.stateAfterClosingTagName(d);break}case u.BeforeSpecialS:{this.stateBeforeSpecialS(d);break}case u.BeforeSpecialT:{this.stateBeforeSpecialT(d);break}case u.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(d);break}case u.InSelfClosingTag:{this.stateInSelfClosingTag(d);break}case u.InDeclaration:{this.stateInDeclaration(d);break}case u.BeforeDeclaration:{this.stateBeforeDeclaration(d);break}case u.BeforeComment:{this.stateBeforeComment(d);break}case u.InProcessingInstruction:{this.stateInProcessingInstruction(d);break}case u.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()},c.prototype.finish=function(){this.state===u.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()},c.prototype.handleTrailingData=function(){var d=this.buffer.length+this.offset;this.sectionStart>=d||(this.state===u.InCommentLike?this.currentSequence===o.CdataEnd?this.cbs.oncdata(this.sectionStart,d,0):this.cbs.oncomment(this.sectionStart,d,0):this.state===u.InTagName||this.state===u.BeforeAttributeName||this.state===u.BeforeAttributeValue||this.state===u.AfterAttributeName||this.state===u.InAttributeName||this.state===u.InAttributeValueSq||this.state===u.InAttributeValueDq||this.state===u.InAttributeValueNq||this.state===u.InClosingTagName||this.cbs.ontext(this.sectionStart,d))},c.prototype.emitCodePoint=function(d,h){this.baseState!==u.Text&&this.baseState!==u.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+h,this.index=this.sectionStart-1,this.cbs.onattribentity(d)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+h,this.index=this.sectionStart-1,this.cbs.ontextentity(d,this.sectionStart))},c}();return _o.default=l,_o}var DN;function NN(){if(DN)return kl;DN=1;var t=I&&I.__createBinding||(Object.create?function(g,m,v,_){_===void 0&&(_=v);var w=Object.getOwnPropertyDescriptor(m,v);(!w||("get"in w?!m.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(g,_,w)}:function(g,m,v,_){_===void 0&&(_=v),g[_]=m[v]}),e=I&&I.__setModuleDefault||(Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m}),u=I&&I.__importStar||function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var v in g)v!=="default"&&Object.prototype.hasOwnProperty.call(g,v)&&t(m,g,v);return e(m,g),m};Object.defineProperty(kl,"__esModule",{value:!0}),kl.Parser=void 0;var s=u(b7()),n=Xa(),r=new Set(["input","option","optgroup","select","button","datalist","textarea"]),a=new Set(["p"]),o=new Set(["thead","tbody"]),l=new Set(["dd","dt"]),c=new Set(["rt","rp"]),d=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",a],["h1",a],["h2",a],["h3",a],["h4",a],["h5",a],["h6",a],["select",r],["input",r],["output",r],["button",r],["datalist",r],["textarea",r],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",l],["dt",l],["address",a],["article",a],["aside",a],["blockquote",a],["details",a],["div",a],["dl",a],["fieldset",a],["figcaption",a],["figure",a],["footer",a],["form",a],["header",a],["hr",a],["main",a],["nav",a],["ol",a],["pre",a],["section",a],["table",a],["ul",a],["rt",c],["rp",c],["tbody",o],["tfoot",o]]),h=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),y=/\s|\//,b=function(){function g(m,v){v===void 0&&(v={});var _,w,S,A,D,L;this.options=v,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=m??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(_=v.lowerCaseTags)!==null&&_!==void 0?_:this.htmlMode,this.lowerCaseAttributeNames=(w=v.lowerCaseAttributeNames)!==null&&w!==void 0?w:this.htmlMode,this.recognizeSelfClosing=(S=v.recognizeSelfClosing)!==null&&S!==void 0?S:!this.htmlMode,this.tokenizer=new((A=v.Tokenizer)!==null&&A!==void 0?A:s.default)(this.options,this),this.foreignContext=[!this.htmlMode],(L=(D=this.cbs).onparserinit)===null||L===void 0||L.call(D,this)}return g.prototype.ontext=function(m,v){var _,w,S=this.getSlice(m,v);this.endIndex=v-1,(w=(_=this.cbs).ontext)===null||w===void 0||w.call(_,S),this.startIndex=v},g.prototype.ontextentity=function(m,v){var _,w;this.endIndex=v-1,(w=(_=this.cbs).ontext)===null||w===void 0||w.call(_,(0,n.fromCodePoint)(m)),this.startIndex=v},g.prototype.isVoidElement=function(m){return this.htmlMode&&h.has(m)},g.prototype.onopentagname=function(m,v){this.endIndex=v;var _=this.getSlice(m,v);this.lowerCaseTagNames&&(_=_.toLowerCase()),this.emitOpenTag(_)},g.prototype.emitOpenTag=function(m){var v,_,w,S;this.openTagStart=this.startIndex,this.tagname=m;var A=this.htmlMode&&d.get(m);if(A)for(;this.stack.length>0&&A.has(this.stack[0]);){var D=this.stack.shift();(_=(v=this.cbs).onclosetag)===null||_===void 0||_.call(v,D,!0)}this.isVoidElement(m)||(this.stack.unshift(m),this.htmlMode&&(f.has(m)?this.foreignContext.unshift(!0):p.has(m)&&this.foreignContext.unshift(!1))),(S=(w=this.cbs).onopentagname)===null||S===void 0||S.call(w,m),this.cbs.onopentag&&(this.attribs={})},g.prototype.endOpenTag=function(m){var v,_;this.startIndex=this.openTagStart,this.attribs&&((_=(v=this.cbs).onopentag)===null||_===void 0||_.call(v,this.tagname,this.attribs,m),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},g.prototype.onopentagend=function(m){this.endIndex=m,this.endOpenTag(!1),this.startIndex=m+1},g.prototype.onclosetag=function(m,v){var _,w,S,A,D,L,O,E;this.endIndex=v;var P=this.getSlice(m,v);if(this.lowerCaseTagNames&&(P=P.toLowerCase()),this.htmlMode&&(f.has(P)||p.has(P))&&this.foreignContext.shift(),this.isVoidElement(P))this.htmlMode&&P==="br"&&((A=(S=this.cbs).onopentagname)===null||A===void 0||A.call(S,"br"),(L=(D=this.cbs).onopentag)===null||L===void 0||L.call(D,"br",{},!0),(E=(O=this.cbs).onclosetag)===null||E===void 0||E.call(O,"br",!1));else{var M=this.stack.indexOf(P);if(M!==-1)for(var U=0;U<=M;U++){var j=this.stack.shift();(w=(_=this.cbs).onclosetag)===null||w===void 0||w.call(_,j,U!==M)}else this.htmlMode&&P==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=v+1},g.prototype.onselfclosingtag=function(m){this.endIndex=m,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=m+1):this.onopentagend(m)},g.prototype.closeCurrentTag=function(m){var v,_,w=this.tagname;this.endOpenTag(m),this.stack[0]===w&&((_=(v=this.cbs).onclosetag)===null||_===void 0||_.call(v,w,!m),this.stack.shift())},g.prototype.onattribname=function(m,v){this.startIndex=m;var _=this.getSlice(m,v);this.attribname=this.lowerCaseAttributeNames?_.toLowerCase():_},g.prototype.onattribdata=function(m,v){this.attribvalue+=this.getSlice(m,v)},g.prototype.onattribentity=function(m){this.attribvalue+=(0,n.fromCodePoint)(m)},g.prototype.onattribend=function(m,v){var _,w;this.endIndex=v,(w=(_=this.cbs).onattribute)===null||w===void 0||w.call(_,this.attribname,this.attribvalue,m===s.QuoteType.Double?'"':m===s.QuoteType.Single?"'":m===s.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},g.prototype.getInstructionName=function(m){var v=m.search(y),_=v<0?m:m.substr(0,v);return this.lowerCaseTagNames&&(_=_.toLowerCase()),_},g.prototype.ondeclaration=function(m,v){this.endIndex=v;var _=this.getSlice(m,v);if(this.cbs.onprocessinginstruction){var w=this.getInstructionName(_);this.cbs.onprocessinginstruction("!".concat(w),"!".concat(_))}this.startIndex=v+1},g.prototype.onprocessinginstruction=function(m,v){this.endIndex=v;var _=this.getSlice(m,v);if(this.cbs.onprocessinginstruction){var w=this.getInstructionName(_);this.cbs.onprocessinginstruction("?".concat(w),"?".concat(_))}this.startIndex=v+1},g.prototype.oncomment=function(m,v,_){var w,S,A,D;this.endIndex=v,(S=(w=this.cbs).oncomment)===null||S===void 0||S.call(w,this.getSlice(m,v-_)),(D=(A=this.cbs).oncommentend)===null||D===void 0||D.call(A),this.startIndex=v+1},g.prototype.oncdata=function(m,v,_){var w,S,A,D,L,O,E,P,M,U;this.endIndex=v;var j=this.getSlice(m,v-_);!this.htmlMode||this.options.recognizeCDATA?((S=(w=this.cbs).oncdatastart)===null||S===void 0||S.call(w),(D=(A=this.cbs).ontext)===null||D===void 0||D.call(A,j),(O=(L=this.cbs).oncdataend)===null||O===void 0||O.call(L)):((P=(E=this.cbs).oncomment)===null||P===void 0||P.call(E,"[CDATA[".concat(j,"]]")),(U=(M=this.cbs).oncommentend)===null||U===void 0||U.call(M)),this.startIndex=v+1},g.prototype.onend=function(){var m,v;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var _=0;_<this.stack.length;_++)this.cbs.onclosetag(this.stack[_],!0)}(v=(m=this.cbs).onend)===null||v===void 0||v.call(m)},g.prototype.reset=function(){var m,v,_,w;(v=(m=this.cbs).onreset)===null||v===void 0||v.call(m),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(w=(_=this.cbs).onparserinit)===null||w===void 0||w.call(_,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1},g.prototype.parseComplete=function(m){this.reset(),this.end(m)},g.prototype.getSlice=function(m,v){for(;m-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var _=this.buffers[0].slice(m-this.bufferOffset,v-this.bufferOffset);v-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),_+=this.buffers[0].slice(0,v-this.bufferOffset);return _},g.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},g.prototype.write=function(m){var v,_;if(this.ended){(_=(v=this.cbs).onerror)===null||_===void 0||_.call(v,new Error(".write() after done!"));return}this.buffers.push(m),this.tokenizer.running&&(this.tokenizer.write(m),this.writeIndex++)},g.prototype.end=function(m){var v,_;if(this.ended){(_=(v=this.cbs).onerror)===null||_===void 0||_.call(v,new Error(".end() after done!"));return}m&&this.write(m),this.ended=!0,this.tokenizer.end()},g.prototype.pause=function(){this.tokenizer.pause()},g.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},g.prototype.parseChunk=function(m){this.write(m)},g.prototype.done=function(m){this.end(m)},g}();return kl.Parser=b,kl}var CN;function uX(){return CN||(CN=1,function(t){var e=I&&I.__createBinding||(Object.create?function(v,_,w,S){S===void 0&&(S=w);var A=Object.getOwnPropertyDescriptor(_,w);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[w]}}),Object.defineProperty(v,S,A)}:function(v,_,w,S){S===void 0&&(S=w),v[S]=_[w]}),u=I&&I.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),s=I&&I.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var w in v)w!=="default"&&Object.prototype.hasOwnProperty.call(v,w)&&e(_,v,w);return u(_,v),_},n=I&&I.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.QuoteType=t.Tokenizer=t.createDomStream=t.createDocumentStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var r=NN(),a=NN();Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return a.Parser}});var o=ui(),l=ui();Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}});function c(v,_){var w=new o.DomHandler(void 0,_);return new r.Parser(w,_).end(v),w.root}t.parseDocument=c;function d(v,_){return c(v,_).children}t.parseDOM=d;function h(v,_,w){var S=new o.DomHandler(function(A){return v(A,S.root)},_,w);return new r.Parser(S,_)}t.createDocumentStream=h;function f(v,_,w){var S=new o.DomHandler(v,_,w);return new r.Parser(S,_)}t.createDomStream=f;var p=b7();Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return n(p).default}}),Object.defineProperty(t,"QuoteType",{enumerable:!0,get:function(){return p.QuoteType}}),t.ElementType=s(to());var y=ma(),b=ma();Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return b.getFeed}});var g={xmlMode:!0};function m(v,_){return _===void 0&&(_=g),(0,y.getFeed)(d(v,_))}t.parseFeed=m,t.DomUtils=s(ma())}(tw)),tw}var jN;function cX(){if(jN)return Vl;jN=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.ActorRdfParseHtml=void 0;const t=su(),e=uX(),u=Wt();class s extends t.ActorRdfParseFixedMediaTypes{constructor(r){super(r)}async runHandle(r,a,o){var y;const l=new u.Readable({objectMode:!0});l._read=()=>{};let c=0,d=1;function h(b){l.emit("error",b)}function f(){--d===0&&l.push(null)}const p={baseIRI:((y=r.metadata)==null?void 0:y.baseIRI)??"",context:o,emit:b=>{c--,l.push(b)},end:f,error:h,headers:r.headers};try{const b=await Promise.all(this.busRdfParseHtml.publish(p));d+=b.length;const g=[];for(const _ of b){const{htmlParseListener:w}=await _.actor.run(p);g.push(w)}const m=new e.Parser({onclosetag(){try{for(const _ of g)_.onTagClose()}catch(_){h(_)}},onend(){try{for(const _ of g)_.onEnd()}catch(_){h(_)}f()},onopentag(_,w){try{for(const S of g)S.onTagOpen(_,w)}catch(S){h(S)}},ontext(_){try{for(const w of g)w.onText(_)}catch(w){h(w)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:!1}),v=l._read=_=>{for(c=Math.max(_,c);c>0;){const w=r.data.read();if(w===null){r.data.once("readable",()=>v(0));return}m.write(w.toString())}};r.data.on("error",h).on("end",()=>m.end())}catch(b){setTimeout(()=>{l.emit("error",b)})}return{data:l}}}return Vl.ActorRdfParseHtml=s,Vl}var LN;function lX(){return LN||(LN=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(cX(),t)}(ew)),ew}var rw={},zl={},nw={},Gl={},MN;function dX(){if(MN)return Gl;MN=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.ActorRdfParseHtml=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return Gl.ActorRdfParseHtml=e,Gl}var FN;function uA(){return FN||(FN=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(dX(),t)}(nw)),nw}var iw={},aw={},qN;function fX(){return qN||(qN=1,Object.defineProperty(aw,"__esModule",{value:!0})),aw}var Wl={},BN;function m7(){if(BN)return Wl;BN=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.ItemPropertyHandlerContent=void 0;let t=class{canHandle(u,s){return"content"in s}getObject(u,s,n){return s.createLiteral(u.content,n)}};return Wl.ItemPropertyHandlerContent=t,Wl}var Jl={},Xl={},UN;function rm(){if(UN)return Xl;UN=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.Util=void 0;const t=Et(),e=Pi();class u{constructor(n,r){this.dataFactory=n||new t.DataFactory,this.baseIRI=r||""}static isValidIri(n){return u.IRI_REGEX.test(n)}createVocabIris(n,r,a){return n.split(/\s+/u).filter(o=>!!o).map(o=>{if(!u.isValidIri(o)){if(!a)return;o=`${r.vocab||`${this.baseIRI}#`}${o}`}return this.dataFactory.namedNode(o)}).filter(o=>!!o)}getVocabularyExpansionType(n,r,a){const o=n.split(/\s+/u);if(o.includes("subPropertyOf")||o.includes("equivalentProperty"))return[this.dataFactory.namedNode(`${u.RDF}type`)];if(r.vocab&&r.vocab in a&&a[r.vocab].properties){let l=[];for(const[c,d]of Object.entries(a[r.vocab].properties))o.includes(c)&&(l=[...Object.values(d).map(h=>this.dataFactory.namedNode(h))]);return l}return[]}createSubject(n){if(!u.isValidIri(n))try{n=(0,e.resolve)(n,this.baseIRI)}catch{return}return this.dataFactory.namedNode(n)}createLiteral(n,r){return this.dataFactory.literal(n,r.language)}deriveVocab(n,r){let a;for(const o in r)if(n.startsWith(o)){a=o,a.endsWith("/")||(a+="#");break}if(!a){const o=n.indexOf("#");o>0?a=n.slice(0,o+1):a=(0,e.resolve)(".",n)}return a}}return Xl.Util=u,u.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",u.XSD="http://www.w3.org/2001/XMLSchema#",u.RDFA="http://www.w3.org/ns/rdfa#",u.IRI_REGEX=/^([A-Za-z][\d+-.A-Za-z]*|_):[^ "<>[\\\]`{|}]*$/u,Xl}var QN;function g7(){if(QN)return Jl;QN=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.ItemPropertyHandlerNumber=void 0;const t=rm();let e=class{constructor(s,n){this.tagName=s,this.attributeName=n}canHandle(s,n){return this.tagName===s&&this.attributeName in n}getObject(s,n,r){const a=s[this.attributeName];let o;return!Number.isNaN(Number.parseInt(a,10))&&!a.includes(".")?o=`${t.Util.XSD}integer`:Number.isNaN(Number.parseFloat(a))||(o=`${t.Util.XSD}double`),n.dataFactory.literal(a,o&&n.dataFactory.namedNode(o))}};return Jl.ItemPropertyHandlerNumber=e,Jl}var Kl={},HN;function v7(){if(HN)return Kl;HN=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.ItemPropertyHandlerTime=void 0;const t=rm();let e=class _7{canHandle(s,n){return s==="time"&&"datetime"in n}getObject(s,n,r){const a=s.datetime;let o;for(const l of _7.TIME_REGEXES)if(l.regex.test(a)){o=n.dataFactory.namedNode(t.Util.XSD+l.type);break}return n.dataFactory.literal(a,o)}};return Kl.ItemPropertyHandlerTime=e,e.TIME_REGEXES=[{regex:/^-?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d)?S)?)?$/u,type:"duration"},{regex:/^\d+-\d\d-\d\dT\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"dateTime"},{regex:/^\d+-\d\d-\d\dZ?$/u,type:"date"},{regex:/^\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"time"},{regex:/^\d+-\d\d$/u,type:"gYearMonth"},{regex:/^\d+$/u,type:"gYear"}],Kl}var Yl={},$N;function w7(){if($N)return Yl;$N=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.ItemPropertyHandlerUrl=void 0;const t=Pi();let e=class{constructor(s,n){this.tagName=s,this.attributeName=n}canHandle(s,n){return this.tagName===s&&this.attributeName in n}getObject(s,n,r){return n.dataFactory.namedNode((0,t.resolve)(s[this.attributeName],n.baseIRI))}};return Yl.ItemPropertyHandlerUrl=e,Yl}var sw={},VN;function hX(){return VN||(VN=1,Object.defineProperty(sw,"__esModule",{value:!0})),sw}var ow={},kN;function pX(){return kN||(kN=1,Object.defineProperty(ow,"__esModule",{value:!0})),ow}var uw={},zN;function yX(){return zN||(zN=1,Object.defineProperty(uw,"__esModule",{value:!0})),uw}var Zl={},cw={},ed={},lw={},GN;function S7(){return GN||(GN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var e=Xa(),u;(function(f){f[f.Tab=9]="Tab",f[f.NewLine=10]="NewLine",f[f.FormFeed=12]="FormFeed",f[f.CarriageReturn=13]="CarriageReturn",f[f.Space=32]="Space",f[f.ExclamationMark=33]="ExclamationMark",f[f.Number=35]="Number",f[f.Amp=38]="Amp",f[f.SingleQuote=39]="SingleQuote",f[f.DoubleQuote=34]="DoubleQuote",f[f.Dash=45]="Dash",f[f.Slash=47]="Slash",f[f.Zero=48]="Zero",f[f.Nine=57]="Nine",f[f.Semi=59]="Semi",f[f.Lt=60]="Lt",f[f.Eq=61]="Eq",f[f.Gt=62]="Gt",f[f.Questionmark=63]="Questionmark",f[f.UpperA=65]="UpperA",f[f.LowerA=97]="LowerA",f[f.UpperF=70]="UpperF",f[f.LowerF=102]="LowerF",f[f.UpperZ=90]="UpperZ",f[f.LowerZ=122]="LowerZ",f[f.LowerX=120]="LowerX",f[f.OpeningSquareBracket=91]="OpeningSquareBracket"})(u||(u={}));var s;(function(f){f[f.Text=1]="Text",f[f.BeforeTagName=2]="BeforeTagName",f[f.InTagName=3]="InTagName",f[f.InSelfClosingTag=4]="InSelfClosingTag",f[f.BeforeClosingTagName=5]="BeforeClosingTagName",f[f.InClosingTagName=6]="InClosingTagName",f[f.AfterClosingTagName=7]="AfterClosingTagName",f[f.BeforeAttributeName=8]="BeforeAttributeName",f[f.InAttributeName=9]="InAttributeName",f[f.AfterAttributeName=10]="AfterAttributeName",f[f.BeforeAttributeValue=11]="BeforeAttributeValue",f[f.InAttributeValueDq=12]="InAttributeValueDq",f[f.InAttributeValueSq=13]="InAttributeValueSq",f[f.InAttributeValueNq=14]="InAttributeValueNq",f[f.BeforeDeclaration=15]="BeforeDeclaration",f[f.InDeclaration=16]="InDeclaration",f[f.InProcessingInstruction=17]="InProcessingInstruction",f[f.BeforeComment=18]="BeforeComment",f[f.CDATASequence=19]="CDATASequence",f[f.InSpecialComment=20]="InSpecialComment",f[f.InCommentLike=21]="InCommentLike",f[f.BeforeSpecialS=22]="BeforeSpecialS",f[f.SpecialStartSequence=23]="SpecialStartSequence",f[f.InSpecialTag=24]="InSpecialTag",f[f.BeforeEntity=25]="BeforeEntity",f[f.BeforeNumericEntity=26]="BeforeNumericEntity",f[f.InNamedEntity=27]="InNamedEntity",f[f.InNumericEntity=28]="InNumericEntity",f[f.InHexEntity=29]="InHexEntity"})(s||(s={}));function n(f){return f===u.Space||f===u.NewLine||f===u.Tab||f===u.FormFeed||f===u.CarriageReturn}function r(f){return f===u.Slash||f===u.Gt||n(f)}function a(f){return f>=u.Zero&&f<=u.Nine}function o(f){return f>=u.LowerA&&f<=u.LowerZ||f>=u.UpperA&&f<=u.UpperZ}function l(f){return f>=u.UpperA&&f<=u.UpperF||f>=u.LowerA&&f<=u.LowerF}var c;(function(f){f[f.NoValue=0]="NoValue",f[f.Unquoted=1]="Unquoted",f[f.Single=2]="Single",f[f.Double=3]="Double"})(c=t.QuoteType||(t.QuoteType={}));var d={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},h=function(){function f(p,y){var b=p.xmlMode,g=b===void 0?!1:b,m=p.decodeEntities,v=m===void 0?!0:m;this.cbs=y,this.state=s.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=s.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=g,this.decodeEntities=v,this.entityTrie=g?e.xmlDecodeTree:e.htmlDecodeTree}return f.prototype.reset=function(){this.state=s.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=s.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},f.prototype.write=function(p){this.offset+=this.buffer.length,this.buffer=p,this.parse()},f.prototype.end=function(){this.running&&this.finish()},f.prototype.pause=function(){this.running=!1},f.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},f.prototype.getIndex=function(){return this.index},f.prototype.getSectionStart=function(){return this.sectionStart},f.prototype.stateText=function(p){p===u.Lt||!this.decodeEntities&&this.fastForwardTo(u.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=s.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&p===u.Amp&&(this.state=s.BeforeEntity)},f.prototype.stateSpecialStartSequence=function(p){var y=this.sequenceIndex===this.currentSequence.length,b=y?r(p):(p|32)===this.currentSequence[this.sequenceIndex];if(!b)this.isSpecial=!1;else if(!y){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=s.InTagName,this.stateInTagName(p)},f.prototype.stateInSpecialTag=function(p){if(this.sequenceIndex===this.currentSequence.length){if(p===u.Gt||n(p)){var y=this.index-this.currentSequence.length;if(this.sectionStart<y){var b=this.index;this.index=y,this.cbs.ontext(this.sectionStart,y),this.index=b}this.isSpecial=!1,this.sectionStart=y+2,this.stateInClosingTagName(p);return}this.sequenceIndex=0}(p|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===d.TitleEnd?this.decodeEntities&&p===u.Amp&&(this.state=s.BeforeEntity):this.fastForwardTo(u.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(p===u.Lt)},f.prototype.stateCDATASequence=function(p){p===d.Cdata[this.sequenceIndex]?++this.sequenceIndex===d.Cdata.length&&(this.state=s.InCommentLike,this.currentSequence=d.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=s.InDeclaration,this.stateInDeclaration(p))},f.prototype.fastForwardTo=function(p){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===p)return!0;return this.index=this.buffer.length+this.offset-1,!1},f.prototype.stateInCommentLike=function(p){p===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=s.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):p!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},f.prototype.isTagStartChar=function(p){return this.xmlMode?!r(p):o(p)},f.prototype.startSpecial=function(p,y){this.isSpecial=!0,this.currentSequence=p,this.sequenceIndex=y,this.state=s.SpecialStartSequence},f.prototype.stateBeforeTagName=function(p){if(p===u.ExclamationMark)this.state=s.BeforeDeclaration,this.sectionStart=this.index+1;else if(p===u.Questionmark)this.state=s.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(p)){var y=p|32;this.sectionStart=this.index,!this.xmlMode&&y===d.TitleEnd[2]?this.startSpecial(d.TitleEnd,3):this.state=!this.xmlMode&&y===d.ScriptEnd[2]?s.BeforeSpecialS:s.InTagName}else p===u.Slash?this.state=s.BeforeClosingTagName:(this.state=s.Text,this.stateText(p))},f.prototype.stateInTagName=function(p){r(p)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(p))},f.prototype.stateBeforeClosingTagName=function(p){n(p)||(p===u.Gt?this.state=s.Text:(this.state=this.isTagStartChar(p)?s.InClosingTagName:s.InSpecialComment,this.sectionStart=this.index))},f.prototype.stateInClosingTagName=function(p){(p===u.Gt||n(p))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=s.AfterClosingTagName,this.stateAfterClosingTagName(p))},f.prototype.stateAfterClosingTagName=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.state=s.Text,this.baseState=s.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeAttributeName=function(p){p===u.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=s.InSpecialTag,this.sequenceIndex=0):this.state=s.Text,this.baseState=this.state,this.sectionStart=this.index+1):p===u.Slash?this.state=s.InSelfClosingTag:n(p)||(this.state=s.InAttributeName,this.sectionStart=this.index)},f.prototype.stateInSelfClosingTag=function(p){p===u.Gt?(this.cbs.onselfclosingtag(this.index),this.state=s.Text,this.baseState=s.Text,this.sectionStart=this.index+1,this.isSpecial=!1):n(p)||(this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(p))},f.prototype.stateInAttributeName=function(p){(p===u.Eq||r(p))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=s.AfterAttributeName,this.stateAfterAttributeName(p))},f.prototype.stateAfterAttributeName=function(p){p===u.Eq?this.state=s.BeforeAttributeValue:p===u.Slash||p===u.Gt?(this.cbs.onattribend(c.NoValue,this.index),this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(p)):n(p)||(this.cbs.onattribend(c.NoValue,this.index),this.state=s.InAttributeName,this.sectionStart=this.index)},f.prototype.stateBeforeAttributeValue=function(p){p===u.DoubleQuote?(this.state=s.InAttributeValueDq,this.sectionStart=this.index+1):p===u.SingleQuote?(this.state=s.InAttributeValueSq,this.sectionStart=this.index+1):n(p)||(this.sectionStart=this.index,this.state=s.InAttributeValueNq,this.stateInAttributeValueNoQuotes(p))},f.prototype.handleInAttributeValue=function(p,y){p===y||!this.decodeEntities&&this.fastForwardTo(y)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(y===u.DoubleQuote?c.Double:c.Single,this.index),this.state=s.BeforeAttributeName):this.decodeEntities&&p===u.Amp&&(this.baseState=this.state,this.state=s.BeforeEntity)},f.prototype.stateInAttributeValueDoubleQuotes=function(p){this.handleInAttributeValue(p,u.DoubleQuote)},f.prototype.stateInAttributeValueSingleQuotes=function(p){this.handleInAttributeValue(p,u.SingleQuote)},f.prototype.stateInAttributeValueNoQuotes=function(p){n(p)||p===u.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(c.Unquoted,this.index),this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(p)):this.decodeEntities&&p===u.Amp&&(this.baseState=this.state,this.state=s.BeforeEntity)},f.prototype.stateBeforeDeclaration=function(p){p===u.OpeningSquareBracket?(this.state=s.CDATASequence,this.sequenceIndex=0):this.state=p===u.Dash?s.BeforeComment:s.InDeclaration},f.prototype.stateInDeclaration=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=s.Text,this.sectionStart=this.index+1)},f.prototype.stateInProcessingInstruction=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=s.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeComment=function(p){p===u.Dash?(this.state=s.InCommentLike,this.currentSequence=d.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=s.InDeclaration},f.prototype.stateInSpecialComment=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=s.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeSpecialS=function(p){var y=p|32;y===d.ScriptEnd[3]?this.startSpecial(d.ScriptEnd,4):y===d.StyleEnd[3]?this.startSpecial(d.StyleEnd,4):(this.state=s.InTagName,this.stateInTagName(p))},f.prototype.stateBeforeEntity=function(p){this.entityExcess=1,this.entityResult=0,p===u.Number?this.state=s.BeforeNumericEntity:p===u.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=s.InNamedEntity,this.stateInNamedEntity(p))},f.prototype.stateInNamedEntity=function(p){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,p),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var y=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(y){var b=(y>>14)-1;if(!this.allowLegacyEntity()&&p!==u.Semi)this.trieIndex+=b;else{var g=this.index-this.entityExcess+1;g>this.sectionStart&&this.emitPartial(this.sectionStart,g),this.entityResult=this.trieIndex,this.trieIndex+=b,this.entityExcess=0,this.sectionStart=this.index+1,b===0&&this.emitNamedEntity()}}},f.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var p=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(p){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},f.prototype.stateBeforeNumericEntity=function(p){(p|32)===u.LowerX?(this.entityExcess++,this.state=s.InHexEntity):(this.state=s.InNumericEntity,this.stateInNumericEntity(p))},f.prototype.emitNumericEntity=function(p){var y=this.index-this.entityExcess-1,b=y+2+ +(this.state===s.InHexEntity);b!==this.index&&(y>this.sectionStart&&this.emitPartial(this.sectionStart,y),this.sectionStart=this.index+Number(p),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},f.prototype.stateInNumericEntity=function(p){p===u.Semi?this.emitNumericEntity(!0):a(p)?(this.entityResult=this.entityResult*10+(p-u.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.stateInHexEntity=function(p){p===u.Semi?this.emitNumericEntity(!0):a(p)?(this.entityResult=this.entityResult*16+(p-u.Zero),this.entityExcess++):l(p)?(this.entityResult=this.entityResult*16+((p|32)-u.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===s.Text||this.baseState===s.InSpecialTag)},f.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===s.Text||this.state===s.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===s.InAttributeValueDq||this.state===s.InAttributeValueSq||this.state===s.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},f.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},f.prototype.parse=function(){for(;this.shouldContinue();){var p=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case s.Text:{this.stateText(p);break}case s.SpecialStartSequence:{this.stateSpecialStartSequence(p);break}case s.InSpecialTag:{this.stateInSpecialTag(p);break}case s.CDATASequence:{this.stateCDATASequence(p);break}case s.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(p);break}case s.InAttributeName:{this.stateInAttributeName(p);break}case s.InCommentLike:{this.stateInCommentLike(p);break}case s.InSpecialComment:{this.stateInSpecialComment(p);break}case s.BeforeAttributeName:{this.stateBeforeAttributeName(p);break}case s.InTagName:{this.stateInTagName(p);break}case s.InClosingTagName:{this.stateInClosingTagName(p);break}case s.BeforeTagName:{this.stateBeforeTagName(p);break}case s.AfterAttributeName:{this.stateAfterAttributeName(p);break}case s.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(p);break}case s.BeforeAttributeValue:{this.stateBeforeAttributeValue(p);break}case s.BeforeClosingTagName:{this.stateBeforeClosingTagName(p);break}case s.AfterClosingTagName:{this.stateAfterClosingTagName(p);break}case s.BeforeSpecialS:{this.stateBeforeSpecialS(p);break}case s.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(p);break}case s.InSelfClosingTag:{this.stateInSelfClosingTag(p);break}case s.InDeclaration:{this.stateInDeclaration(p);break}case s.BeforeDeclaration:{this.stateBeforeDeclaration(p);break}case s.BeforeComment:{this.stateBeforeComment(p);break}case s.InProcessingInstruction:{this.stateInProcessingInstruction(p);break}case s.InNamedEntity:{this.stateInNamedEntity(p);break}case s.BeforeEntity:{this.stateBeforeEntity(p);break}case s.InHexEntity:{this.stateInHexEntity(p);break}case s.InNumericEntity:{this.stateInNumericEntity(p);break}default:this.stateBeforeNumericEntity(p)}this.index++}this.cleanup()},f.prototype.finish=function(){this.state===s.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},f.prototype.handleTrailingData=function(){var p=this.buffer.length+this.offset;this.state===s.InCommentLike?this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,p,0):this.cbs.oncomment(this.sectionStart,p,0):this.state===s.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===s.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===s.InTagName||this.state===s.BeforeAttributeName||this.state===s.BeforeAttributeValue||this.state===s.AfterAttributeName||this.state===s.InAttributeName||this.state===s.InAttributeValueSq||this.state===s.InAttributeValueDq||this.state===s.InAttributeValueNq||this.state===s.InClosingTagName||this.cbs.ontext(this.sectionStart,p)},f.prototype.emitPartial=function(p,y){this.baseState!==s.Text&&this.baseState!==s.InSpecialTag?this.cbs.onattribdata(p,y):this.cbs.ontext(p,y)},f.prototype.emitCodePoint=function(p){this.baseState!==s.Text&&this.baseState!==s.InSpecialTag?this.cbs.onattribentity(p):this.cbs.ontextentity(p)},f}();t.default=h}(lw)),lw}var WN;function JN(){if(WN)return ed;WN=1;var t=I&&I.__createBinding||(Object.create?function(g,m,v,_){_===void 0&&(_=v);var w=Object.getOwnPropertyDescriptor(m,v);(!w||("get"in w?!m.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(g,_,w)}:function(g,m,v,_){_===void 0&&(_=v),g[_]=m[v]}),e=I&&I.__setModuleDefault||(Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m}),u=I&&I.__importStar||function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var v in g)v!=="default"&&Object.prototype.hasOwnProperty.call(g,v)&&t(m,g,v);return e(m,g),m};Object.defineProperty(ed,"__esModule",{value:!0}),ed.Parser=void 0;var s=u(S7()),n=Xa(),r=new Set(["input","option","optgroup","select","button","datalist","textarea"]),a=new Set(["p"]),o=new Set(["thead","tbody"]),l=new Set(["dd","dt"]),c=new Set(["rt","rp"]),d=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",a],["h1",a],["h2",a],["h3",a],["h4",a],["h5",a],["h6",a],["select",r],["input",r],["output",r],["button",r],["datalist",r],["textarea",r],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",l],["dt",l],["address",a],["article",a],["aside",a],["blockquote",a],["details",a],["div",a],["dl",a],["fieldset",a],["figcaption",a],["figure",a],["footer",a],["form",a],["header",a],["hr",a],["main",a],["nav",a],["ol",a],["pre",a],["section",a],["table",a],["ul",a],["rt",c],["rp",c],["tbody",o],["tfoot",o]]),h=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),y=/\s|\//,b=function(){function g(m,v){v===void 0&&(v={});var _,w,S,A,D;this.options=v,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=m??{},this.lowerCaseTagNames=(_=v.lowerCaseTags)!==null&&_!==void 0?_:!v.xmlMode,this.lowerCaseAttributeNames=(w=v.lowerCaseAttributeNames)!==null&&w!==void 0?w:!v.xmlMode,this.tokenizer=new((S=v.Tokenizer)!==null&&S!==void 0?S:s.default)(this.options,this),(D=(A=this.cbs).onparserinit)===null||D===void 0||D.call(A,this)}return g.prototype.ontext=function(m,v){var _,w,S=this.getSlice(m,v);this.endIndex=v-1,(w=(_=this.cbs).ontext)===null||w===void 0||w.call(_,S),this.startIndex=v},g.prototype.ontextentity=function(m){var v,_,w=this.tokenizer.getSectionStart();this.endIndex=w-1,(_=(v=this.cbs).ontext)===null||_===void 0||_.call(v,(0,n.fromCodePoint)(m)),this.startIndex=w},g.prototype.isVoidElement=function(m){return!this.options.xmlMode&&h.has(m)},g.prototype.onopentagname=function(m,v){this.endIndex=v;var _=this.getSlice(m,v);this.lowerCaseTagNames&&(_=_.toLowerCase()),this.emitOpenTag(_)},g.prototype.emitOpenTag=function(m){var v,_,w,S;this.openTagStart=this.startIndex,this.tagname=m;var A=!this.options.xmlMode&&d.get(m);if(A)for(;this.stack.length>0&&A.has(this.stack[this.stack.length-1]);){var D=this.stack.pop();(_=(v=this.cbs).onclosetag)===null||_===void 0||_.call(v,D,!0)}this.isVoidElement(m)||(this.stack.push(m),f.has(m)?this.foreignContext.push(!0):p.has(m)&&this.foreignContext.push(!1)),(S=(w=this.cbs).onopentagname)===null||S===void 0||S.call(w,m),this.cbs.onopentag&&(this.attribs={})},g.prototype.endOpenTag=function(m){var v,_;this.startIndex=this.openTagStart,this.attribs&&((_=(v=this.cbs).onopentag)===null||_===void 0||_.call(v,this.tagname,this.attribs,m),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},g.prototype.onopentagend=function(m){this.endIndex=m,this.endOpenTag(!1),this.startIndex=m+1},g.prototype.onclosetag=function(m,v){var _,w,S,A,D,L;this.endIndex=v;var O=this.getSlice(m,v);if(this.lowerCaseTagNames&&(O=O.toLowerCase()),(f.has(O)||p.has(O))&&this.foreignContext.pop(),this.isVoidElement(O))!this.options.xmlMode&&O==="br"&&((w=(_=this.cbs).onopentagname)===null||w===void 0||w.call(_,"br"),(A=(S=this.cbs).onopentag)===null||A===void 0||A.call(S,"br",{},!0),(L=(D=this.cbs).onclosetag)===null||L===void 0||L.call(D,"br",!1));else{var E=this.stack.lastIndexOf(O);if(E!==-1)if(this.cbs.onclosetag)for(var P=this.stack.length-E;P--;)this.cbs.onclosetag(this.stack.pop(),P!==0);else this.stack.length=E;else!this.options.xmlMode&&O==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=v+1},g.prototype.onselfclosingtag=function(m){this.endIndex=m,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=m+1):this.onopentagend(m)},g.prototype.closeCurrentTag=function(m){var v,_,w=this.tagname;this.endOpenTag(m),this.stack[this.stack.length-1]===w&&((_=(v=this.cbs).onclosetag)===null||_===void 0||_.call(v,w,!m),this.stack.pop())},g.prototype.onattribname=function(m,v){this.startIndex=m;var _=this.getSlice(m,v);this.attribname=this.lowerCaseAttributeNames?_.toLowerCase():_},g.prototype.onattribdata=function(m,v){this.attribvalue+=this.getSlice(m,v)},g.prototype.onattribentity=function(m){this.attribvalue+=(0,n.fromCodePoint)(m)},g.prototype.onattribend=function(m,v){var _,w;this.endIndex=v,(w=(_=this.cbs).onattribute)===null||w===void 0||w.call(_,this.attribname,this.attribvalue,m===s.QuoteType.Double?'"':m===s.QuoteType.Single?"'":m===s.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},g.prototype.getInstructionName=function(m){var v=m.search(y),_=v<0?m:m.substr(0,v);return this.lowerCaseTagNames&&(_=_.toLowerCase()),_},g.prototype.ondeclaration=function(m,v){this.endIndex=v;var _=this.getSlice(m,v);if(this.cbs.onprocessinginstruction){var w=this.getInstructionName(_);this.cbs.onprocessinginstruction("!".concat(w),"!".concat(_))}this.startIndex=v+1},g.prototype.onprocessinginstruction=function(m,v){this.endIndex=v;var _=this.getSlice(m,v);if(this.cbs.onprocessinginstruction){var w=this.getInstructionName(_);this.cbs.onprocessinginstruction("?".concat(w),"?".concat(_))}this.startIndex=v+1},g.prototype.oncomment=function(m,v,_){var w,S,A,D;this.endIndex=v,(S=(w=this.cbs).oncomment)===null||S===void 0||S.call(w,this.getSlice(m,v-_)),(D=(A=this.cbs).oncommentend)===null||D===void 0||D.call(A),this.startIndex=v+1},g.prototype.oncdata=function(m,v,_){var w,S,A,D,L,O,E,P,M,U;this.endIndex=v;var j=this.getSlice(m,v-_);this.options.xmlMode||this.options.recognizeCDATA?((S=(w=this.cbs).oncdatastart)===null||S===void 0||S.call(w),(D=(A=this.cbs).ontext)===null||D===void 0||D.call(A,j),(O=(L=this.cbs).oncdataend)===null||O===void 0||O.call(L)):((P=(E=this.cbs).oncomment)===null||P===void 0||P.call(E,"[CDATA[".concat(j,"]]")),(U=(M=this.cbs).oncommentend)===null||U===void 0||U.call(M)),this.startIndex=v+1},g.prototype.onend=function(){var m,v;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var _=this.stack.length;_>0;this.cbs.onclosetag(this.stack[--_],!0));}(v=(m=this.cbs).onend)===null||v===void 0||v.call(m)},g.prototype.reset=function(){var m,v,_,w;(v=(m=this.cbs).onreset)===null||v===void 0||v.call(m),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(w=(_=this.cbs).onparserinit)===null||w===void 0||w.call(_,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},g.prototype.parseComplete=function(m){this.reset(),this.end(m)},g.prototype.getSlice=function(m,v){for(;m-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var _=this.buffers[0].slice(m-this.bufferOffset,v-this.bufferOffset);v-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),_+=this.buffers[0].slice(0,v-this.bufferOffset);return _},g.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},g.prototype.write=function(m){var v,_;if(this.ended){(_=(v=this.cbs).onerror)===null||_===void 0||_.call(v,new Error(".write() after done!"));return}this.buffers.push(m),this.tokenizer.running&&(this.tokenizer.write(m),this.writeIndex++)},g.prototype.end=function(m){var v,_;if(this.ended){(_=(v=this.cbs).onerror)===null||_===void 0||_.call(v,new Error(".end() after done!"));return}m&&this.write(m),this.ended=!0,this.tokenizer.end()},g.prototype.pause=function(){this.tokenizer.pause()},g.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},g.prototype.parseChunk=function(m){this.write(m)},g.prototype.done=function(m){this.end(m)},g}();return ed.Parser=b,ed}var XN;function bX(){return XN||(XN=1,function(t){var e=I&&I.__createBinding||(Object.create?function(m,v,_,w){w===void 0&&(w=_);var S=Object.getOwnPropertyDescriptor(v,_);(!S||("get"in S?!v.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return v[_]}}),Object.defineProperty(m,w,S)}:function(m,v,_,w){w===void 0&&(w=_),m[w]=v[_]}),u=I&&I.__setModuleDefault||(Object.create?function(m,v){Object.defineProperty(m,"default",{enumerable:!0,value:v})}:function(m,v){m.default=v}),s=I&&I.__importStar||function(m){if(m&&m.__esModule)return m;var v={};if(m!=null)for(var _ in m)_!=="default"&&Object.prototype.hasOwnProperty.call(m,_)&&e(v,m,_);return u(v,m),v},n=I&&I.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var r=JN(),a=JN();Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return a.Parser}});var o=ui(),l=ui();Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}});function c(m,v){var _=new o.DomHandler(void 0,v);return new r.Parser(_,v).end(m),_.root}t.parseDocument=c;function d(m,v){return c(m,v).children}t.parseDOM=d;function h(m,v,_){var w=new o.DomHandler(m,v,_);return new r.Parser(w,v)}t.createDomStream=h;var f=S7();Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return n(f).default}}),t.ElementType=s(to());var p=ma(),y=ma();Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return y.getFeed}});var b={xmlMode:!0};function g(m,v){return v===void 0&&(v=b),(0,p.getFeed)(d(m,v))}t.parseFeed=g,t.DomUtils=s(ma())}(cw)),cw}const mX={"http://schema.org/":{properties:{additionalType:{subPropertyOf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}}},"http://microformats.org/profile/hcard":{}};var KN;function gX(){if(KN)return Zl;KN=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.MicrodataRdfParser=void 0;const t=bX(),e=Wt(),u=m7(),s=g7(),n=v7(),r=w7(),a=rm(),o=mX;let l=class w3 extends e.Transform{constructor(d){super({readableObjectMode:!0}),this.itemScopeStack=[],this.textBufferStack=[],this.isEmittingReferences=!1,this.pendingItemRefsDomain={},this.pendingItemRefsRangeFinalized={},this.pendingItemRefsRangeCollecting={},d=d||{},this.options=d,this.util=new a.Util(d.dataFactory,d.baseIRI),this.defaultGraph=d.defaultGraph||this.util.dataFactory.defaultGraph(),this.htmlParseListener=d.htmlParseListener,this.vocabRegistry=d.vocabRegistry||o,this.parser=this.initializeParser(!!d.xmlMode)}import(d){const h=new e.PassThrough({readableObjectMode:!0});d.on("error",p=>f.emit("error",p)),d.on("data",p=>h.push(p)),d.on("end",()=>h.push(null));const f=h.pipe(new w3(this.options));return f}_transform(d,h,f){this.parser.write(d.toString()),f()}_flush(d){this.parser.end(),d()}getItemScope(d){let h=this.itemScopeStack.length-(d?2:1);for(;h>0&&!this.itemScopeStack[h];)h--;return this.itemScopeStack[h]}getDepth(){return this.itemScopeStack.length}onTagOpen(d,h){if(!this.isEmittingReferences){if("id"in h){const p=h.id;this.pendingItemRefsRangeCollecting[p]={events:[],counter:0,ids:[]}}for(const p of Object.values(this.pendingItemRefsRangeCollecting))p.counter++,p.events.push({type:"open",name:d,attributes:h})}this.textBufferStack.push(void 0);let f;if("itemscope"in h){let p;if(this.emittingReferencesItemScopeIdGenerator)p=this.emittingReferencesItemScopeIdGenerator();else{p="itemid"in h&&this.util.createSubject(h.itemid)||this.util.dataFactory.blankNode();for(const b of Object.values(this.pendingItemRefsRangeCollecting))b.ids.push(p)}f={subject:p},this.isEmittingReferences&&(f.blockEmission=!0);const y=this.getItemScope();y&&y.vocab&&(f.vocab=y.vocab),this.itemScopeStack.push(f)}else f=this.getItemScope(),this.itemScopeStack.push(void 0);if(f){if("itemtype"in h)for(const p of this.util.createVocabIris(h.itemtype,f,!1))f.vocab||(f.vocab=this.util.deriveVocab(p.value,this.vocabRegistry)),f.blockEmission||this.emitTriple(f.subject,this.util.dataFactory.namedNode(`${a.Util.RDF}type`),p);if("lang"in h&&(f.language=h.lang),"xml:lang"in h&&(f.language=h["xml:lang"]),"itemscope"in h&&!this.isEmittingReferences&&"itemref"in h)for(const p of h.itemref.split(/\s+/u))p in this.pendingItemRefsDomain||(this.pendingItemRefsDomain[p]=[]),this.pendingItemRefsDomain[p].push(f),this.tryToEmitReferences(p,f)}"itemprop"in h&&this.handleItemProperties(h.itemprop,!1,f,d,h),"itemprop-reverse"in h&&this.handleItemProperties(h["itemprop-reverse"],!0,f,d,h)}onText(d){if(!this.isEmittingReferences)for(const h of Object.values(this.pendingItemRefsRangeCollecting))h.events.push({type:"text",data:d});for(const h of this.textBufferStack)h&&h.push(d)}onTagClose(){if(!this.isEmittingReferences)for(const[h,f]of Object.entries(this.pendingItemRefsRangeCollecting))f.counter--,f.events.push({type:"close"}),f.counter===0&&(this.pendingItemRefsRangeFinalized[h]=f,delete this.pendingItemRefsRangeCollecting[h],this.tryToEmitReferences(h));const d=this.getItemScope(!0);if(d){const h=this.getDepth();if(d.predicates&&h in d.predicates)for(const[f,p]of Object.entries(d.predicates[h])){const y=this.util.createLiteral(this.textBufferStack[h].join(""),d);this.emitPredicateTriples(d,p,y,f==="reverse"),delete d.predicates[h][f]}}this.itemScopeStack.pop(),this.textBufferStack.pop()}onEnd(){}initializeParser(d){return new t.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(h){this.emit("error",h)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(h){this.emit("error",h)}},onopentag:(h,f)=>{try{this.onTagOpen(h,f),this.htmlParseListener&&this.htmlParseListener.onTagOpen(h,f)}catch(p){this.emit("error",p)}},ontext:h=>{try{this.onText(h),this.htmlParseListener&&this.htmlParseListener.onText(h)}catch(f){this.emit("error",f)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:d})}handleItemProperties(d,h,f,p,y){const b=this.getItemScope(!0);if(b){const g=this.getDepth(),m=this.util.createVocabIris(d,b,!0);b.predicates||(b.predicates={}),b.predicates[g]||(b.predicates[g]={});const v=h?"reverse":"forward";b.predicates[g][v]=m;for(const _ of this.util.getVocabularyExpansionType(d,b,this.vocabRegistry))m.push(_);if(f&&"itemscope"in y)this.emitPredicateTriples(b,m,f.subject,h),delete b.predicates[g][v];else for(const _ of w3.ITEM_PROPERTY_HANDLERS)if(_.canHandle(p,y)){const w=_.getObject(y,this.util,b);this.emitPredicateTriples(b,m,w,h),delete b.predicates[g][v]}b.predicates[g][v]&&(this.textBufferStack[g]=[])}}emitPredicateTriples(d,h,f,p){if(!d.blockEmission)for(const y of h)p?f.termType!=="Literal"&&this.emitTriple(f,y,d.subject):this.emitTriple(d.subject,y,f)}emitTriple(d,h,f){this.push(this.util.dataFactory.quad(d,h,f,this.defaultGraph))}tryToEmitReferences(d,h){const f=this.pendingItemRefsRangeFinalized[d];if(f){let p;if(h){p=[h];const y=this.pendingItemRefsDomain[d].indexOf(h);this.pendingItemRefsDomain[d].splice(y,1)}else p=this.pendingItemRefsDomain[d],delete this.pendingItemRefsDomain[d];if(p){const y=this.itemScopeStack,b=this.textBufferStack;this.isEmittingReferences=!0;for(const g of p){this.itemScopeStack=[g],this.textBufferStack=[void 0];const m=[...f.ids];this.emittingReferencesItemScopeIdGenerator=()=>m.shift();for(const v of f.events)switch(v.type){case"open":this.onTagOpen(v.name,v.attributes);break;case"text":this.onText(v.data);break;case"close":this.onTagClose();break}}this.emittingReferencesItemScopeIdGenerator=void 0,this.itemScopeStack=y,this.textBufferStack=b,this.isEmittingReferences=!1}}}};return Zl.MicrodataRdfParser=l,l.ITEM_PROPERTY_HANDLERS=[new u.ItemPropertyHandlerContent,new r.ItemPropertyHandlerUrl("a","href"),new r.ItemPropertyHandlerUrl("area","href"),new r.ItemPropertyHandlerUrl("audio","src"),new r.ItemPropertyHandlerUrl("embed","src"),new r.ItemPropertyHandlerUrl("iframe","src"),new r.ItemPropertyHandlerUrl("img","src"),new r.ItemPropertyHandlerUrl("link","href"),new r.ItemPropertyHandlerUrl("object","data"),new r.ItemPropertyHandlerUrl("source","src"),new r.ItemPropertyHandlerUrl("track","src"),new r.ItemPropertyHandlerUrl("video","src"),new s.ItemPropertyHandlerNumber("data","value"),new s.ItemPropertyHandlerNumber("meter","value"),new n.ItemPropertyHandlerTime],Zl}var YN;function _X(){return YN||(YN=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(fX(),t),u(m7(),t),u(g7(),t),u(v7(),t),u(w7(),t),u(hX(),t),u(pX(),t),u(yX(),t),u(gX(),t),u(rm(),t)}(iw)),iw}var ZN;function vX(){if(ZN)return zl;ZN=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.ActorRdfParseHtmlMicrodata=void 0;const t=uA(),e=_X();let u=class extends t.ActorRdfParseHtml{constructor(n){super(n)}async test(n){return!0}async run(n){const r=n.headers?n.headers.get("content-type"):null,a=r==null?void 0:r.includes("xml"),o=new e.MicrodataRdfParser({baseIRI:n.baseIRI,xmlMode:a});o.on("error",n.error),o.on("data",n.emit);const l=o.onEnd;return o.onEnd=()=>{l.call(o),n.end()},{htmlParseListener:o}}};return zl.ActorRdfParseHtmlMicrodata=u,zl}var e4;function wX(){return e4||(e4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(vX(),t)}(rw)),rw}var dw={},td={},t4;function SX(){if(t4)return td;t4=1,Object.defineProperty(td,"__esModule",{value:!0}),td.ActorRdfParseHtmlRdfa=void 0;const t=uA(),e=p7();let u=class extends t.ActorRdfParseHtml{constructor(n){super(n)}async test(n){return!0}async run(n){const r=n.headers?n.headers.get("content-type"):null,a=(n.headers&&n.headers.get("content-language"))??void 0,o=r&&r.includes("xml")?"xhtml":"html",l=new e.RdfaParser({baseIRI:n.baseIRI,profile:o,language:a});l.on("error",n.error),l.on("data",n.emit);const c=l.onEnd;return l.onEnd=()=>{c.call(l),n.end()},{htmlParseListener:l}}};return td.ActorRdfParseHtmlRdfa=u,td}var r4;function TX(){return r4||(r4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(SX(),t)}(dw)),dw}var fw={},rd={},hw={},nd={},n4;function AX(){if(n4)return nd;n4=1,Object.defineProperty(nd,"__esModule",{value:!0}),nd.ActorRdfResolveHypermediaLinks=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return nd.ActorRdfResolveHypermediaLinks=e,nd}var i4;function EX(){return i4||(i4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(AX(),t)}(hw)),hw}var a4;function OX(){if(a4)return rd;a4=1,Object.defineProperty(rd,"__esModule",{value:!0}),rd.ActorRdfResolveHypermediaLinksNext=void 0;const t=EX();let e=class extends t.ActorRdfResolveHypermediaLinks{constructor(s){super(s)}async test(s){if(!s.metadata.next||s.metadata.next.length===0)throw new Error(`Actor ${this.name} requires a 'next' metadata entry.`);return!0}async run(s){return{links:s.metadata.next.map(n=>({url:n}))}}};return rd.ActorRdfResolveHypermediaLinksNext=e,rd}var s4;function RX(){return s4||(s4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(OX(),t)}(fw)),fw}var pw={},id={},yw={},ad={},o4;function xX(){if(o4)return ad;o4=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.ActorRdfSerialize=void 0;const t=iu();let e=class extends t.ActorAbstractMediaTyped{constructor(s){super(s)}};return ad.ActorRdfSerialize=e,ad}var sd={},u4;function IX(){if(u4)return sd;u4=1,Object.defineProperty(sd,"__esModule",{value:!0}),sd.ActorRdfSerializeFixedMediaTypes=void 0;const t=iu();let e=class extends t.ActorAbstractMediaTypedFixed{constructor(s){super(s)}async testHandleChecked(){return!0}};return sd.ActorRdfSerializeFixedMediaTypes=e,sd}var c4;function cA(){return c4||(c4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(xX(),t),u(IX(),t)}(yw)),yw}var l4;function PX(){if(l4)return id;l4=1,Object.defineProperty(id,"__esModule",{value:!0}),id.ActorRdfSerializeN3=void 0;const t=cA(),e=is;let u=class extends t.ActorRdfSerializeFixedMediaTypes{constructor(n){super(n)}async runHandle(n,r){const a=new e.StreamWriter({format:r});let o;return"pipe"in n.quadStream?(n.quadStream.on("error",l=>a.emit("error",l)),o=n.quadStream.pipe(a)):o=a.import(n.quadStream),{data:o,triples:r==="text/turtle"||r==="application/n-triples"||r==="text/n3"}}};return id.ActorRdfSerializeN3=u,id}var d4;function DX(){return d4||(d4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(PX(),t)}(pw)),pw}var bw={},od={},mw={},ud={},cd={},f4;function NX(){if(f4)return cd;f4=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.SeparatorType=void 0;let t=class{constructor(u){this.label=u}};return cd.SeparatorType=t,t.COMMA=new t(","),t.OBJECT_START=new t("{"),t.OBJECT_END=new t("}"),t.OBJECT_END_COMMA=new t("},"),t.ARRAY_START=new t("["),t.ARRAY_END=new t("]"),t.ARRAY_END_COMMA=new t("],"),t.GRAPH_FIELD_NONCOMPACT=new t('"@graph": ['),t.GRAPH_FIELD_COMPACT=new t('"@graph":['),t.CONTEXT_FIELD=new t('"@context":'),cd}var ld={},h4;function T7(){if(h4)return ld;h4=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.Util=void 0;const t=Jr();class e{static termToValue(s,n,r={compactIds:!1,useNativeTypes:!1}){switch(s.termType){case"NamedNode":const a=n.compactIri(s.value,r.vocab);return r.compactIds?a:{"@id":a};case"DefaultGraph":return r.compactIds?s.value:{"@id":s.value};case"BlankNode":const o=`_:${s.value}`;return r.compactIds?o:{"@id":o};case"Literal":if(s.datatype.value===e.RDF_JSON){let d;try{d=JSON.parse(s.value)}catch(h){throw new t.ErrorCoded("Invalid JSON literal: "+h.message,t.ERROR_CODES.INVALID_JSON_LITERAL)}return{"@value":d,"@type":"@json"}}if(r.rdfDirection==="i18n-datatype"&&s.datatype.value.startsWith(e.I18N)){const[d,h]=s.datatype.value.substr(e.I18N.length,s.datatype.value.length).split("_");return Object.assign(Object.assign({"@value":s.value},d?{"@language":d}:{}),h?{"@direction":h}:{})}const l=s.datatype.value===e.XSD_STRING,c={"@value":!l&&r.useNativeTypes?e.stringToNativeType(s.value,s.datatype.value):s.value};return s.language?Object.assign(Object.assign({},c),{"@language":s.language}):!l&&typeof c["@value"]=="string"?Object.assign(Object.assign({},c),{"@type":s.datatype.value}):c}}static stringToNativeType(s,n){if(n.startsWith(e.XSD))switch(n.substr(e.XSD.length)){case"boolean":if(s==="true")return!0;if(s==="false")return!1;throw new Error(`Invalid xsd:boolean value '${s}'`);case"integer":case"number":case"int":case"byte":case"long":const a=parseInt(s,10);if(isNaN(a))throw new Error(`Invalid xsd:integer value '${s}'`);return a;case"float":case"double":const o=parseFloat(s);if(isNaN(o))throw new Error(`Invalid xsd:float value '${s}'`);return o}return s}}return ld.Util=e,e.XSD="http://www.w3.org/2001/XMLSchema#",e.XSD_STRING=e.XSD+"string",e.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",e.RDF_TYPE=e.RDF+"type",e.RDF_JSON=e.RDF+"JSON",e.I18N="https://www.w3.org/ns/i18n#",ld}var p4;function CX(){if(p4)return ud;p4=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.JsonLdSerializer=void 0;const t=Jr(),e=NX(),u=T7(),s=Wt();let n=class A7 extends s.Transform{constructor(a={}){super({objectMode:!0}),this.indentation=0,this.options=a,this.options.baseIRI&&!this.options.context&&(this.options.context={"@base":this.options.baseIRI}),this.options.context?(this.originalContext=this.options.context,this.context=new t.ContextParser().parse(this.options.context,{baseIRI:this.options.baseIRI})):this.context=Promise.resolve(new t.JsonLdContextNormalized({}))}import(a){const o=new s.PassThrough({objectMode:!0});a.on("error",c=>l.emit("error",c)),a.on("data",c=>o.push(c)),a.on("end",()=>o.push(null));const l=o.pipe(new A7(this.options));return l}_transform(a,o,l){this.context.then(c=>{this.transformQuad(a,c),l()}).catch(l)}async list(a){const o=await this.context;return{"@list":a.map(l=>u.Util.termToValue(l,o,this.options))}}_flush(a){return this.opened||this.pushDocumentStart(),this.lastPredicate&&this.endPredicate(),this.lastSubject&&this.endSubject(),this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.endGraph(),this.endDocument(),a(null,null)}transformQuad(a,o){this.opened||this.pushDocumentStart();const l=this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.lastGraph.equals(a.subject);if(!l&&(!this.lastGraph||!a.graph.equals(this.lastGraph))){let c=a.graph.termType!=="DefaultGraph"&&this.lastSubject&&this.lastSubject.equals(a.graph);this.lastGraph&&(this.lastGraph.termType!=="DefaultGraph"?(this.endPredicate(),this.endSubject(),this.endGraph(!0),c=!1):c?(this.endPredicate(!0),this.lastSubject=null):(this.endPredicate(),this.endSubject(!0))),a.graph.termType!=="DefaultGraph"&&(c||this.pushId(a.graph,!0,o),this.pushSeparator(this.options.space?e.SeparatorType.GRAPH_FIELD_NONCOMPACT:e.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++),this.lastGraph=a.graph}(!this.lastSubject||!a.subject.equals(this.lastSubject))&&(l?(this.endPredicate(),this.endSubject(),this.indentation--,this.pushSeparator(e.SeparatorType.ARRAY_END_COMMA),this.lastGraph=a.graph):(this.lastSubject&&(this.endPredicate(),this.endSubject(!0)),this.pushId(a.subject,!0,o)),this.lastSubject=a.subject),(!this.lastPredicate||!a.predicate.equals(this.lastPredicate))&&(this.lastPredicate&&this.endPredicate(!0),this.pushPredicate(a.predicate,o)),this.pushObject(a.object,o)}pushDocumentStart(){this.opened=!0,this.originalContext&&!this.options.excludeContext?(this.pushSeparator(e.SeparatorType.OBJECT_START),this.indentation++,this.pushSeparator(e.SeparatorType.CONTEXT_FIELD),this.pushIndented(JSON.stringify(this.originalContext,null,this.options.space)+","),this.pushSeparator(this.options.space?e.SeparatorType.GRAPH_FIELD_NONCOMPACT:e.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++):(this.pushSeparator(e.SeparatorType.ARRAY_START),this.indentation++)}pushId(a,o,l){if(a.termType==="Quad")this.pushNestedQuad(a,!0,l);else{const c=a.termType==="BlankNode"?"_:"+a.value:l.compactIri(a.value,!1);o?this.pushSeparator(e.SeparatorType.OBJECT_START):(this.push(e.SeparatorType.OBJECT_START.label),this.options.space&&this.push(`
`)),this.indentation++,this.pushIndented(this.options.space?`"@id": "${c}",`:`"@id":"${c}",`)}}pushPredicate(a,o){let l=a.value;!this.options.useRdfType&&l===u.Util.RDF_TYPE&&(l="@type",this.objectOptions=Object.assign(Object.assign({},this.options),{compactIds:!0,vocab:!0}));const c=o.compactIri(l,!0);this.pushIndented(this.options.space?`"${c}": [`:`"${c}":[`),this.indentation++,this.lastPredicate=a}pushObject(a,o){if(this.hadObjectForPredicate?this.pushSeparator(e.SeparatorType.COMMA):this.hadObjectForPredicate=!0,a.termType==="Quad"){const c=this.lastSubject,d=this.lastPredicate;this.hadObjectForPredicate=!1,this.pushNestedQuad(a,!1,o),this.endSubject(!1),this.hadObjectForPredicate=!0,this.lastPredicate=d,this.lastSubject=c;return}let l;try{a["@list"]?l=a:l=u.Util.termToValue(a,o,this.objectOptions||this.options)}catch(c){return this.emit("error",c)}this.pushIndented(JSON.stringify(l,null,this.options.space))}pushNestedQuad(a,o,l){this.pushSeparator(e.SeparatorType.OBJECT_START),this.indentation++,this.pushIndented(this.options.space?'"@id": ':'"@id":',!1),a.graph.termType!=="DefaultGraph"&&this.emit("error",new Error(`Found a nested quad with the non-default graph: ${a.graph.value}`)),this.pushId(a.subject,!1,l),this.pushPredicate(a.predicate,l),this.pushObject(a.object,l),this.endPredicate(!1),this.endSubject(o)}endDocument(){this.opened=!1,this.originalContext&&!this.options.excludeContext?(this.indentation--,this.pushSeparator(e.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(e.SeparatorType.OBJECT_END)):(this.indentation--,this.pushSeparator(e.SeparatorType.ARRAY_END))}endPredicate(a){this.indentation--,this.pushSeparator(a?e.SeparatorType.ARRAY_END_COMMA:e.SeparatorType.ARRAY_END),this.hadObjectForPredicate=!1,this.objectOptions=null,this.lastPredicate=null}endSubject(a){this.indentation--,this.pushSeparator(a?e.SeparatorType.OBJECT_END_COMMA:e.SeparatorType.OBJECT_END),this.lastSubject=null}endGraph(a){this.indentation--,this.pushSeparator(e.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(a?e.SeparatorType.OBJECT_END_COMMA:e.SeparatorType.OBJECT_END),this.lastGraph=null}pushSeparator(a){this.pushIndented(a.label)}pushIndented(a,o=!0){const l=this.getIndentPrefix(),c=a.split(`
`).map(d=>l+d).join(`
`);this.push(c),this.options.space&&o&&this.push(`
`)}getIndentPrefix(){return this.options.space?this.options.space.repeat(this.indentation):""}};return ud.JsonLdSerializer=n,ud}var y4;function jX(){return y4||(y4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r),Object.defineProperty(s,a,{enumerable:!0,get:function(){return n[r]}})}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(CX(),t),u(T7(),t)}(mw)),mw}var b4;function LX(){if(b4)return od;b4=1,Object.defineProperty(od,"__esModule",{value:!0}),od.ActorRdfSerializeJsonLd=void 0;const t=cA(),e=jX();let u=class extends t.ActorRdfSerializeFixedMediaTypes{constructor(n){super(n)}async runHandle(n,r,a){const o=new e.JsonLdSerializer({space:" ".repeat(this.jsonStringifyIndentSpaces)});let l;return"pipe"in n.quadStream?(n.quadStream.on("error",c=>o.emit("error",c)),l=n.quadStream.pipe(o)):l=o.import(n.quadStream),{data:l}}};return od.ActorRdfSerializeJsonLd=u,od}var m4;function MX(){return m4||(m4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(LX(),t)}(bw)),bw}var gw={},dd={},T1={},g4;function FX(){if(g4)return T1;g4=1,Object.defineProperty(T1,"__esModule",{value:!0});function t(u,s){return new Promise((n,r)=>{u.on("end",()=>n(s)),u.on("error",r)})}function e(u){const s=[];return t(u.on("data",n=>s.push(n)),s)}return T1.default=e,T1}var fd={},A1={},_w={},hd={},_4;function qX(){if(_4)return hd;_4=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.fragment=void 0;function t(s){let n=s;(n.endsWith("/")||n.endsWith("#"))&&(n=n.slice(0,n.length-1));const r=[];n.lastIndexOf("/")>0&&r.push(n.lastIndexOf("/")),n.lastIndexOf("#")>0&&r.push(n.lastIndexOf("#"));const a=Math.max(...r);return n.slice(a+1)}function e(s){var n;const r=(n=s.split(/[^a-z0-9]+/ig).filter(a=>a!=="").map(a=>a[0].toUpperCase()+a.slice(1)).join("").match(/[a-z][a-z0-9]+/ig))===null||n===void 0?void 0:n[0];return typeof r>"u"?void 0:r[0].toLowerCase()+r.slice(1)}function u(s){let n=t(s);return n=n?e(n):void 0,n||"v"}return hd.fragment=u,hd}var vw={},pd={},xs={},E1={exports:{}},v4;function BX(){return v4||(v4=1,function(t,e){var u=typeof self<"u"?self:I,s=function(){function r(){this.fetch=!1,this.DOMException=u.DOMException}return r.prototype=u,new r}();(function(r){(function(a){var o={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function l(j){return j&&DataView.prototype.isPrototypeOf(j)}if(o.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(j){return j&&c.indexOf(Object.prototype.toString.call(j))>-1};function h(j){if(typeof j!="string"&&(j=String(j)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(j))throw new TypeError("Invalid character in header field name");return j.toLowerCase()}function f(j){return typeof j!="string"&&(j=String(j)),j}function p(j){var q={next:function(){var $=j.shift();return{done:$===void 0,value:$}}};return o.iterable&&(q[Symbol.iterator]=function(){return q}),q}function y(j){this.map={},j instanceof y?j.forEach(function(q,$){this.append($,q)},this):Array.isArray(j)?j.forEach(function(q){this.append(q[0],q[1])},this):j&&Object.getOwnPropertyNames(j).forEach(function(q){this.append(q,j[q])},this)}y.prototype.append=function(j,q){j=h(j),q=f(q);var $=this.map[j];this.map[j]=$?$+", "+q:q},y.prototype.delete=function(j){delete this.map[h(j)]},y.prototype.get=function(j){return j=h(j),this.has(j)?this.map[j]:null},y.prototype.has=function(j){return this.map.hasOwnProperty(h(j))},y.prototype.set=function(j,q){this.map[h(j)]=f(q)},y.prototype.forEach=function(j,q){for(var $ in this.map)this.map.hasOwnProperty($)&&j.call(q,this.map[$],$,this)},y.prototype.keys=function(){var j=[];return this.forEach(function(q,$){j.push($)}),p(j)},y.prototype.values=function(){var j=[];return this.forEach(function(q){j.push(q)}),p(j)},y.prototype.entries=function(){var j=[];return this.forEach(function(q,$){j.push([$,q])}),p(j)},o.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function b(j){if(j.bodyUsed)return Promise.reject(new TypeError("Already read"));j.bodyUsed=!0}function g(j){return new Promise(function(q,$){j.onload=function(){q(j.result)},j.onerror=function(){$(j.error)}})}function m(j){var q=new FileReader,$=g(q);return q.readAsArrayBuffer(j),$}function v(j){var q=new FileReader,$=g(q);return q.readAsText(j),$}function _(j){for(var q=new Uint8Array(j),$=new Array(q.length),Z=0;Z<q.length;Z++)$[Z]=String.fromCharCode(q[Z]);return $.join("")}function w(j){if(j.slice)return j.slice(0);var q=new Uint8Array(j.byteLength);return q.set(new Uint8Array(j)),q.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(j){this._bodyInit=j,j?typeof j=="string"?this._bodyText=j:o.blob&&Blob.prototype.isPrototypeOf(j)?this._bodyBlob=j:o.formData&&FormData.prototype.isPrototypeOf(j)?this._bodyFormData=j:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(j)?this._bodyText=j.toString():o.arrayBuffer&&o.blob&&l(j)?(this._bodyArrayBuffer=w(j.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(j)||d(j))?this._bodyArrayBuffer=w(j):this._bodyText=j=Object.prototype.toString.call(j):this._bodyText="",this.headers.get("content-type")||(typeof j=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(j)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var j=b(this);if(j)return j;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var j=b(this);if(j)return j;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function D(j){var q=j.toUpperCase();return A.indexOf(q)>-1?q:j}function L(j,q){q=q||{};var $=q.body;if(j instanceof L){if(j.bodyUsed)throw new TypeError("Already read");this.url=j.url,this.credentials=j.credentials,q.headers||(this.headers=new y(j.headers)),this.method=j.method,this.mode=j.mode,this.signal=j.signal,!$&&j._bodyInit!=null&&($=j._bodyInit,j.bodyUsed=!0)}else this.url=String(j);if(this.credentials=q.credentials||this.credentials||"same-origin",(q.headers||!this.headers)&&(this.headers=new y(q.headers)),this.method=D(q.method||this.method||"GET"),this.mode=q.mode||this.mode||null,this.signal=q.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&$)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody($)}L.prototype.clone=function(){return new L(this,{body:this._bodyInit})};function O(j){var q=new FormData;return j.trim().split("&").forEach(function($){if($){var Z=$.split("="),X=Z.shift().replace(/\+/g," "),le=Z.join("=").replace(/\+/g," ");q.append(decodeURIComponent(X),decodeURIComponent(le))}}),q}function E(j){var q=new y,$=j.replace(/\r?\n[\t ]+/g," ");return $.split(/\r?\n/).forEach(function(Z){var X=Z.split(":"),le=X.shift().trim();if(le){var K=X.join(":").trim();q.append(le,K)}}),q}S.call(L.prototype);function P(j,q){q||(q={}),this.type="default",this.status=q.status===void 0?200:q.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in q?q.statusText:"OK",this.headers=new y(q.headers),this.url=q.url||"",this._initBody(j)}S.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},P.error=function(){var j=new P(null,{status:0,statusText:""});return j.type="error",j};var M=[301,302,303,307,308];P.redirect=function(j,q){if(M.indexOf(q)===-1)throw new RangeError("Invalid status code");return new P(null,{status:q,headers:{location:j}})},a.DOMException=r.DOMException;try{new a.DOMException}catch{a.DOMException=function(q,$){this.message=q,this.name=$;var Z=Error(q);this.stack=Z.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function U(j,q){return new Promise(function($,Z){var X=new L(j,q);if(X.signal&&X.signal.aborted)return Z(new a.DOMException("Aborted","AbortError"));var le=new XMLHttpRequest;function K(){le.abort()}le.onload=function(){var he={status:le.status,statusText:le.statusText,headers:E(le.getAllResponseHeaders()||"")};he.url="responseURL"in le?le.responseURL:he.headers.get("X-Request-URL");var Re="response"in le?le.response:le.responseText;$(new P(Re,he))},le.onerror=function(){Z(new TypeError("Network request failed"))},le.ontimeout=function(){Z(new TypeError("Network request failed"))},le.onabort=function(){Z(new a.DOMException("Aborted","AbortError"))},le.open(X.method,X.url,!0),X.credentials==="include"?le.withCredentials=!0:X.credentials==="omit"&&(le.withCredentials=!1),"responseType"in le&&o.blob&&(le.responseType="blob"),X.headers.forEach(function(he,Re){le.setRequestHeader(Re,he)}),X.signal&&(X.signal.addEventListener("abort",K),le.onreadystatechange=function(){le.readyState===4&&X.signal.removeEventListener("abort",K)}),le.send(typeof X._bodyInit>"u"?null:X._bodyInit)})}return U.polyfill=!0,r.fetch||(r.fetch=U,r.Headers=y,r.Request=L,r.Response=P),a.Headers=y,a.Request=L,a.Response=P,a.fetch=U,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var n=s;e=n.fetch,e.default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e}(E1,E1.exports)),E1.exports}var w4;function lA(){if(w4)return xs;w4=1;var t=I&&I.__awaiter||function(n,r,a,o){function l(c){return c instanceof a?c:new a(function(d){d(c)})}return new(a||(a=Promise))(function(c,d){function h(y){try{p(o.next(y))}catch(b){d(b)}}function f(y){try{p(o.throw(y))}catch(b){d(b)}}function p(y){y.done?c(y.value):l(y.value).then(h,f)}p((o=o.apply(n,r||[])).next())})};Object.defineProperty(xs,"__esModule",{value:!0}),xs.fetchContext=xs.fetchJson=void 0;const e=BX();function u(n,r){var a;return t(this,void 0,void 0,function*(){return(yield((a=r==null?void 0:r.fetch)!==null&&a!==void 0?a:e.fetch)(n)).json()})}xs.fetchJson=u;function s(n,r){return t(this,void 0,void 0,function*(){return(yield u(n,r))["@context"]})}return xs.fetchContext=s,xs}var S4;function UX(){if(S4)return pd;S4=1;var t=I&&I.__awaiter||function(s,n,r,a){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(p){try{f(a.next(p))}catch(y){c(y)}}function h(p){try{f(a.throw(p))}catch(y){c(y)}}function f(p){p.done?l(p.value):o(p.value).then(d,h)}f((a=a.apply(s,n||[])).next())})};Object.defineProperty(pd,"__esModule",{value:!0}),pd.lookupUri=void 0;const e=lA();function u(s,n){return t(this,void 0,void 0,function*(){const r=(yield(0,e.fetchContext)(`https://prefix.cc/${s}.file.jsonld`,n))[s];if(typeof r!="string")throw new Error(`Expected uri to be a string, received: ${r} of type ${typeof r}`);return r})}return pd.lookupUri=u,pd}var yd={},T4;function QX(){if(T4)return yd;T4=1;var t=I&&I.__awaiter||function(s,n,r,a){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(p){try{f(a.next(p))}catch(y){c(y)}}function h(p){try{f(a.throw(p))}catch(y){c(y)}}function f(p){p.done?l(p.value):o(p.value).then(d,h)}f((a=a.apply(s,n||[])).next())})};Object.defineProperty(yd,"__esModule",{value:!0}),yd.lookupPrefix=void 0;const e=lA();function u(s,n){return t(this,void 0,void 0,function*(){const r=new URL("https://prefix.cc/reverse");r.searchParams.append("uri",s),r.searchParams.append("format","jsonld");const a=Object.keys(yield(0,e.fetchContext)(r,n));if(a.length===0)throw new Error("No prefixes returned");return a[0]})}return yd.lookupPrefix=u,yd}var bd={},A4;function HX(){if(A4)return bd;A4=1;var t=I&&I.__awaiter||function(s,n,r,a){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(p){try{f(a.next(p))}catch(y){c(y)}}function h(p){try{f(a.throw(p))}catch(y){c(y)}}function f(p){p.done?l(p.value):o(p.value).then(d,h)}f((a=a.apply(s,n||[])).next())})};Object.defineProperty(bd,"__esModule",{value:!0}),bd.lookupAllPrefixes=void 0;const e=lA();function u(s){return t(this,void 0,void 0,function*(){return(0,e.fetchContext)("https://prefix.cc/context",s)})}return bd.lookupAllPrefixes=u,bd}var E4;function O4(){return E4||(E4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(UX(),t),u(QX(),t),u(HX(),t)}(vw)),vw}var R4;function $X(){return R4||(R4=1,function(t){var e=I&&I.__awaiter||function(o,l,c,d){function h(f){return f instanceof c?f:new c(function(p){p(f)})}return new(c||(c=Promise))(function(f,p){function y(m){try{g(d.next(m))}catch(v){p(v)}}function b(m){try{g(d.throw(m))}catch(v){p(v)}}function g(m){m.done?f(m.value):h(m.value).then(y,b)}g((d=d.apply(o,l||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.lookupAllPrefixes=t.prefixToUri=t.uriToPrefix=void 0;const u=qX(),s=O4();function n(o,l){return e(this,void 0,void 0,function*(){let c;try{c=yield(0,s.lookupPrefix)(o,l)}catch{l!=null&&l.mintOnUnknown&&(c=(0,u.fragment)(o).slice(0,4))}if(typeof c<"u"&&typeof(l==null?void 0:l.existingPrefixes)=="object"&&c in l.existingPrefixes){let d=0;for(;`${c}${d}`in l.existingPrefixes;)d+=1;c=`${c}${d}`}return c})}t.uriToPrefix=n;function r(o,l){return e(this,void 0,void 0,function*(){try{return yield(0,s.lookupUri)(o,l)}catch{return}})}t.prefixToUri=r;var a=O4();Object.defineProperty(t,"lookupAllPrefixes",{enumerable:!0,get:function(){return a.lookupAllPrefixes}})}(_w)),_w}var md={},x4;function VX(){if(x4)return md;x4=1,Object.defineProperty(md,"__esModule",{value:!0}),md.getShaclName=void 0;function t(e){if(e.termType!=="NamedNode"||!e.value.startsWith("http://www.w3.org/ns/shacl#"))throw new Error(`Term ${e.value} is not part of the SHACL namespace`);return e.value.slice(27)}return md.getShaclName=t,md}var O1={},I4;function kX(){return I4||(I4=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.default={deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,uniqueLang:!0,equals:!0,disjoint:!0,lessThan:!0,lessThanOrEquals:!0,qualifiedValueShape:!0,qualifiedMinCount:!0,qualifiedMaxCount:!0,qualifiedValueShapesDisjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0,node:!0}),O1}var R1={},P4;function zX(){return P4||(P4=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.default={owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"}),R1}var x1={},D4;function GX(){return D4||(D4=1,Object.defineProperty(x1,"__esModule",{value:!0}),x1.default={targetNode:!0,targetObjectsOf:!0,targetSubjectsOf:!0,deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,equals:!0,disjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0}),x1}var N4;function WX(){if(N4)return A1;N4=1;var t=I&&I.__awaiter||function(p,y,b,g){function m(v){return v instanceof b?v:new b(function(_){_(v)})}return new(b||(b=Promise))(function(v,_){function w(D){try{A(g.next(D))}catch(L){_(L)}}function S(D){try{A(g.throw(D))}catch(L){_(L)}}function A(D){D.done?v(D.value):m(D.value).then(w,S)}A((g=g.apply(p,y||[])).next())})},e=I&&I.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(A1,"__esModule",{value:!0});const u=is,s=$X(),n=Ny(),r=VX(),a=e(kX()),o=e(zX()),l=e(GX());function c(p){var y;return(y=/^[^]*[#/]/.exec(p))===null||y===void 0?void 0:y[0]}const d={"http://www.w3.org/1999/02/22-rdf-syntax-ns#":"rdf","http://www.w3.org/2000/01/rdf-schema#":"rdfs","http://www.w3.org/ns/shacl#":"sh","http://www.w3.org/2001/XMLSchema#":"xsd"},h={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"};class f{constructor(y,b,g={},m=void 0,v=!0,_=!1,w,S=!1){this.store=y,this.base=m,this.errorOnExtraQuads=v,this.mintUnspecifiedPrefixes=_,this.fetch=w,this.extendedSyntax=S,this.prefixes={},this.prefixRev={};for(const A of Object.keys(g)){const D=g[A],L=typeof D=="string"?D:D.value;!(L in d)&&!(A in h)&&(this.prefixRev[L]=A,this.prefixes[A]=L)}this.writer=b}write(){return t(this,void 0,void 0,function*(){const y=this.store.getQuads(null,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/2002/07/owl#Ontology",null);if(y.length===1&&y[0].subject.termType==="NamedNode"){const g=y[0].subject;this.store.removeQuads(y),g.equals(new u.NamedNode("urn:x-base:default"))||this.writer.add(`BASE ${(0,n.termToString)(g)}`),yield this.writeImports(g)}else throw new Error("Base expected");if(this.mintUnspecifiedPrefixes){const g=new Set;for(const v of[...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)])if(v.termType==="NamedNode"){const _=c(v.value);_&&!(_ in this.prefixRev)&&!(_ in d)&&g.add(_)}const m=Object.assign(Object.assign({},this.prefixes),h);yield Promise.all([...g].map(v=>(0,s.uriToPrefix)(v,{fetch:this.fetch,mintOnUnknown:!0,existingPrefixes:m}).then(_=>{this.prefixes[_]=v,m[_]=v,this.prefixRev[v]=_})))}const b=new Set([...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)].filter(g=>g.termType==="NamedNode").map(g=>c(g.value)).filter(g=>typeof g=="string"));for(const g in this.prefixRev)b.has(g)||(delete this.prefixes[this.prefixRev[g]],delete this.prefixRev[g]);if(yield this.writePrefixes(),this.prefixes=Object.assign(Object.assign({},this.prefixes),h),this.prefixRev=Object.assign(Object.assign({},this.prefixRev),d),this.writer.newLine(),yield this.writeShapes(),this.extendedSyntax){const g=this.store.getSubjects(null,null,null);g.length>0&&this.writer.newLine(1);for(const m of g)this.writer.add(yield this.termToString(m,!0,!0)),this.writer.add(" "),this.writer.indent(),yield this.writeTurtlePredicates(m),this.writer.deindent();g.length>0&&(this.writer.add(" ."),this.writer.newLine())}if(this.errorOnExtraQuads&&this.store.size>0)throw new Error(`Dataset contains quads that cannot be written in SHACLC [
${new u.Writer({prefixes:this.prefixes}).quadsToString(this.store.getQuads(null,null,null,null))}]`);this.writer.end()})}writeImports(y){return t(this,void 0,void 0,function*(){const b=this.store.getObjectsOnce(y,new u.NamedNode("http://www.w3.org/2002/07/owl#imports"),null);if(b.length>0)for(const g of b)this.writer.add(`IMPORTS <${g.value}>`,!0)})}writePrefixes(){return t(this,void 0,void 0,function*(){const y=Object.keys(this.prefixes).filter(b=>!(b in o.default)).sort();if(y.length>0)for(const b of y)this.writer.add(`PREFIX ${b}: <${this.prefixes[b]}>`,!0)})}termToString(y,b=!1,g=!1){return t(this,void 0,void 0,function*(){try{if(b)throw new Error("Shacl name disabled");return(0,r.getShaclName)(y)}catch{}if(y.termType==="NamedNode"){const m=c(y.value);return m&&m in this.prefixRev&&m in this.prefixRev?`${this.prefixRev[m]}:${y.value.slice(m.length)}`:(0,n.termToString)(y)}if(y.termType==="Literal")return y.datatypeString==="http://www.w3.org/2001/XMLSchema#integer"||y.datatypeString==="http://www.w3.org/2001/XMLSchema#boolean"?y.value:(0,n.termToString)(y);throw y.termType==="BlankNode"&&g&&(0,n.termToString)(y),new Error(`Invalid term type for extra statement ${y.value} (${y.termType})`)})}writeShapes(){return t(this,void 0,void 0,function*(){for(const y of this.store.getSubjectsOnce(new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new u.NamedNode("http://www.w3.org/ns/shacl#NodeShape"),null)){this.store.getQuadsOnce(y,new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new u.NamedNode("http://www.w3.org/2000/01/rdf-schema#Class"),null).length>0?this.writer.add("shapeClass "):this.writer.add("shape "),this.writer.add(yield this.termToString(y)),this.writer.add(" ");const b=this.store.getObjectsOnce(y,new u.NamedNode("http://www.w3.org/ns/shacl#targetClass"),null);if(b.length>0){this.writer.add("-> ");for(const m of b)m.termType==="NamedNode"?this.writer.add(yield this.termToString(m)):(this.writer.add("!"),this.writer.add(yield this.termToString(this.singleObject(m,new u.NamedNode("http://www.w3.org/ns/shacl#not"),!0)))),this.writer.add(" ")}const g=this.store.getPredicates(y,null,null).filter(m=>[new u.NamedNode("http://www.w3.org/ns/shacl#targetClass"),new u.NamedNode("http://www.w3.org/ns/shacl#property"),new u.NamedNode("http://www.w3.org/ns/shacl#or"),...Object.keys(l.default).map(v=>new u.NamedNode("http://www.w3.org/ns/shacl#"+v))].every(v=>!m.equals(v)));g.length>0&&(this.writer.add(";"),this.writer.indent(),this.writer.newLine(1)),this.extendedSyntax&&(yield this.writeGivenTurtlePredicates(y,g)),g.length>0&&(this.writer.add(" "),this.writer.deindent()),yield this.writeShapeBody(y,!1)}})}getSingleProperty(y,b){let g=[y];try{let m=(0,r.getShaclName)(y.predicate),v="pred";if(m==="not"){const _=this.store.getQuadsOnce(y.object,null,null,null);if(g=g.concat(_),_.length!==1)throw new Error("Can only handle having one predicate of 'not'");[y]=_,m=(0,r.getShaclName)(y.predicate),v="not"}if(!(m in b))throw new Error(`${m} is not allowed`);return{name:m,type:v,object:y.object}}catch{this.store.addQuads(g)}}singleLayerPropertiesList(y,b){const g=[];for(const m of this.store.getQuadsOnce(y,null,null,null)){const v=this.getSingleProperty(m,b);v&&g.push(v)}return g}expectOneProperty(y,b){const g=this.store.getQuadsOnce(y,null,null,null);if(g.length===1){const m=this.getSingleProperty(g[0],b);if(m)return m}this.store.addQuads(g)}orProperties(y,b){const g=[];for(const m of this.store.getQuadsOnce(y,new u.NamedNode("http://www.w3.org/ns/shacl#or"),null,null)){const v=[];for(const _ of this.getList(m.object)){const w=this.expectOneProperty(_,b);if(!w)throw this.store.addQuad(m),new Error("Each entry of the 'or' statement must declare exactly one property");v.push(w)}g.push(v)}return g}getList(y){let b=y;const g=[];for(;!b.equals(new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));)g.push(this.singleObject(b,new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),!0)),b=this.singleObject(b,new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),!0);return g}writeIriLiteralOrArray(y){return t(this,void 0,void 0,function*(){if(y.termType==="BlankNode"){this.writer.add("[");let b=!0;for(const g of this.getList(y))b?b=!1:this.writer.add(" "),this.writer.add(yield this.termToString(g));this.writer.add("]")}else this.writer.add(yield this.termToString(y))})}singleObject(y,b,g){var m;return(m=this.singleQuad(y,b,g))===null||m===void 0?void 0:m.object}singleQuad(y,b,g=!1){const m=this.store.getQuadsOnce(y,b,null,null);if(g&&m.length!==1)throw this.store.addQuads(m),new Error(`The subject and predicate ${y==null?void 0:y.value} ${b==null?void 0:b.value} must have exactly one object. Instead has ${m.length}`);if(m.length>1)throw this.store.addQuads(m),new Error(`The subject and predicate ${y==null?void 0:y.value} ${b==null?void 0:b.value} can have at most one object. Instead has ${m.length}`);return m.length===1?m[0]:void 0}writeAssigment({name:y,type:b,object:g}){return t(this,void 0,void 0,function*(){b==="not"&&this.writer.add("!"),this.writer.add(y),this.writer.add("="),yield this.writeIriLiteralOrArray(g)})}writeAtom({name:y,type:b,object:g}){return t(this,void 0,void 0,function*(){switch(b==="not"&&this.writer.add("!"),y){case"node":{if(g.termType==="NamedNode")this.writer.add(`@${yield this.termToString(g)}`);else if(g.termType==="BlankNode")yield this.writeShapeBody(g);else throw new Error("Invalid nested shape, must be blank node or IRI");return}case"nodeKind":{this.writer.add((0,r.getShaclName)(g));return}case"class":{this.writer.add(yield this.termToString(g));return}case"datatype":{this.writer.add(yield this.termToString(g));return}default:this.writer.add(y),this.writer.add("="),yield this.writeIriLiteralOrArray(g)}})}writeAssigments(y,b=" ",g=!0,m){return t(this,void 0,void 0,function*(){for(const v of y)g?g=!1:this.writer.add(b),m?yield this.writeAtom(v):yield this.writeAssigment(v)})}writeParams(y,b=!0,g,m=!1,v=!1){return t(this,void 0,void 0,function*(){const _=this.orProperties(y,g),w=this.singleLayerPropertiesList(y,g);v&&(_.length>0||w.length>0)&&this.writer.newLine(1);for(const S of _)b?b=!1:this.writer.add(" "),yield this.writeAssigments(S,"|",!0,m);yield this.writeAssigments(w," ",b,m),v&&(_.length>0||w.length>0)&&this.writer.add(" .")})}writeShapeBody(y,b=!0){return t(this,void 0,void 0,function*(){this.writer.add("{").indent();const g=this.store.getObjectsOnce(y,new u.NamedNode("http://www.w3.org/ns/shacl#property"),null);yield this.writeParams(y,!0,l.default,!1,!0);for(const m of g)this.writer.newLine(1),yield this.writeProperty(m);this.writer.deindent().newLine(1),b?this.writer.add("} ."):this.writer.add("}").newLine(1)})}writeProperty(y){return t(this,void 0,void 0,function*(){yield this.writePath(this.singleObject(y,new u.NamedNode("http://www.w3.org/ns/shacl#path"),!0));const b=this.singleObject(y,new u.NamedNode("http://www.w3.org/ns/shacl#minCount")),g=this.singleObject(y,new u.NamedNode("http://www.w3.org/ns/shacl#maxCount")),m=this.singleObject(y,new u.NamedNode("http://www.w3.org/ns/shacl#nodeKind")),v=this.singleObject(y,new u.NamedNode("http://www.w3.org/ns/shacl#class")),_=this.singleObject(y,new u.NamedNode("http://www.w3.org/ns/shacl#datatype")),w=this.store.getObjectsOnce(y,new u.NamedNode("http://www.w3.org/ns/shacl#node"),null);if(m&&(this.writer.add(" "),this.writer.add((0,r.getShaclName)(m))),v&&(this.writer.add(" "),this.writer.add(yield this.termToString(v))),_&&(this.writer.add(" "),this.writer.add(yield this.termToString(_))),b!==void 0||g!==void 0){if(this.writer.add(" ["),b){if(b.termType!=="Literal"||b.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid min value, must me an integer literal");this.writer.add(b.value)}else this.writer.add("0");if(this.writer.add(".."),g){if(g.termType!=="Literal"||g.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid max value, must me an integer literal");this.store.removeMatches(y,new u.NamedNode("http://www.w3.org/ns/shacl#maxCount"),void 0,void 0),this.writer.add(g.value)}else this.writer.add("*");this.writer.add("]")}yield this.writeParams(y,!1,a.default,!0);const S=[];for(const A of w)if(A.termType==="NamedNode")this.writer.add(" "),this.writer.add(`@${yield this.termToString(A)}`);else if(A.termType==="BlankNode")S.push(A);else throw new Error("Invalid nested shape, must be blank node or IRI");for(const A of S)this.writer.add(" "),yield this.writeShapeBody(A);this.extendedSyntax&&this.store.getQuads(y,null,null,null).length>0&&(this.writer.add(" %"),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(y),this.writer.deindent(),this.writer.newLine(1),this.writer.add("%")),S.length===0&&this.writer.add(" .")})}writeTurtlePredicates(y){return t(this,void 0,void 0,function*(){return this.writeGivenTurtlePredicates(y,this.store.getPredicates(y,null,null))})}writeGivenTurtlePredicates(y,b){return t(this,void 0,void 0,function*(){let g=!1;if(b.some(m=>m.equals(u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")))){const m=this.store.getObjectsOnce(y,u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),null);m.length>0&&(g=!0,this.writer.add("a "),yield this.writeTurtleObjects(m))}for(const m of b)m.equals(u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))||(g?(this.writer.add(" ;"),this.writer.newLine(1)):g=!0,this.writer.add(yield this.termToString(m,!0)),this.writer.add(" "),yield this.writeTurtleObjects(this.store.getObjectsOnce(y,m,null)))})}writeTurtleObjects(y){return t(this,void 0,void 0,function*(){const b=[],g=[];for(const v of y)v.termType==="BlankNode"&&[...this.store.match(null,null,v),...this.store.match(null,v,null)].length===0?b.push(v):g.push(v);this.writer.add((yield Promise.all(g.map(v=>this.termToString(v,!0,!0)))).join(", "));let m=g.length>0;if(b.length>0)for(const v of b)m?this.writer.add(", "):m=!0,(yield this.writeList(v))||(this.writer.add("["),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(v),this.writer.deindent(),this.writer.newLine(1),this.writer.add("]"))})}writeList(y){return t(this,void 0,void 0,function*(){let b=y;const g=[],m=[];for(;!b.equals(u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));){const _=this.store.getQuadsOnce(b,u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),null,null),w=this.store.getQuadsOnce(b,u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),null,null);if(m.push(..._,...w),_.length!==1||w.length!==1||this.store.getQuads(b,null,null,null).length!==0)return this.store.addQuads(m),!1;g.push(_[0].object),b=w[0].object}let v=!1;this.writer.add("(");for(const _ of g)v?this.writer.add(" "):v=!0,yield this.writeTurtleObjects([_]);return this.writer.add(")"),!0})}writePath(y,b=!1){return t(this,void 0,void 0,function*(){if(y.termType==="NamedNode")this.writer.add(yield this.termToString(y));else if(y.termType==="BlankNode"){const g=this.store.getQuadsOnce(y,null,null,null);if(g.length===1){const{predicate:m,object:v}=g[0];switch(m.value){case"http://www.w3.org/ns/shacl#inversePath":this.writer.add("^"),yield this.writePath(v,!0);return;case"http://www.w3.org/ns/shacl#alternativePath":{const _=this.getList(v);if(_.length===0)throw new Error("Invalid Alternative Path - no options");if(_.length===1)yield this.writePath(_[0]);else{b&&this.writer.add("(");let w=!0;for(const S of _)w?w=!1:this.writer.add("|"),yield this.writePath(S,!0);b&&this.writer.add(")")}return}case"http://www.w3.org/ns/shacl#zeroOrMorePath":yield this.writePath(v,!0),this.writer.add("*");return;case"http://www.w3.org/ns/shacl#oneOrMorePath":yield this.writePath(v,!0),this.writer.add("+");return;case"http://www.w3.org/ns/shacl#zeroOrOnePath":yield this.writePath(v,!0),this.writer.add("?");return;default:throw new Error(`Invalid path type ${y.value}`)}}else{this.store.addQuads(g);const m=this.getList(y);if(m.length===0)throw new Error("Invalid Path");{b&&this.writer.add("(");let v=!0;for(const _ of m)v?v=!1:this.writer.add("/"),yield this.writePath(_,!0);b&&this.writer.add(")")}}}else throw new Error("Path should be named node or blank node")})}}return A1.default=f,A1}var I1={},C4;function JX(){if(C4)return I1;C4=1,Object.defineProperty(I1,"__esModule",{value:!0});class t{constructor(u){this.indents=0,this.write=u.write,this.end=u.end}indent(){return this.indents+=1,this}deindent(){if(this.indents<1)throw new Error(`Trying to deindent when indent is only ${this.indents}`);return this.indents-=1,this}add(u,s=!1){return this.write(s?`
${"	".repeat(this.indents)}${u}`:u,"utf-8"),this}newLine(u=2){return this.write(`
`.repeat(u)+"	".repeat(this.indents),"utf-8"),this}}return I1.default=t,I1}var P1={},j4;function XX(){if(j4)return P1;j4=1,Object.defineProperty(P1,"__esModule",{value:!0});const t=is;class e extends t.Store{getQuadsOnce(s,n,r,a){const o=this.getQuads(s,n,r,a);return this.removeQuads(o),o}getSubjectsOnce(s,n,r){return this.getQuadsOnce(null,s,n,r).map(a=>a.subject)}getObjectsOnce(s,n,r){return this.getQuadsOnce(s,n,null,r).map(a=>a.object)}}return P1.default=e,P1}var L4;function KX(){if(L4)return fd;L4=1;var t=I&&I.__awaiter||function(o,l,c,d){function h(f){return f instanceof c?f:new c(function(p){p(f)})}return new(c||(c=Promise))(function(f,p){function y(m){try{g(d.next(m))}catch(v){p(v)}}function b(m){try{g(d.throw(m))}catch(v){p(v)}}function g(m){m.done?f(m.value):h(m.value).then(y,b)}g((d=d.apply(o,l||[])).next())})},e=I&&I.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(fd,"__esModule",{value:!0}),fd.write=void 0;const u=is,s=e(WX()),n=e(JX()),r=e(XX());function a(o,l){return t(this,void 0,void 0,function*(){return new Promise((c,d)=>t(this,void 0,void 0,function*(){try{let h="";const f=new r.default(o),p=f.getGraphs(null,null,null);if(p.length>1)throw new Error("More than one graph found - can serialize in the default graph");if(p.length===1&&!p[0].equals(u.DataFactory.defaultGraph()))throw new Error(`Expected all triples to be in the default graph, instead triples were in ${p[0].value}`);const y=new n.default({write:g=>{h+=g},end:()=>{let g=f.getQuads(null,null,null,null);g.length===0&&(g=void 0),c({text:h,extraQuads:g})}});yield new s.default(f,y,l==null?void 0:l.prefixes,void 0,(l==null?void 0:l.errorOnUnused)!==!1,l==null?void 0:l.mintPrefixes,l==null?void 0:l.fetch,l==null?void 0:l.extendedSyntax).write()}catch(h){d(h)}}))})}return fd.write=a,fd}var M4;function YX(){if(M4)return dd;M4=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.ActorRdfSerializeShaclc=void 0;const t=cA(),e=FX(),u=Wt(),s=KX();let n=class extends t.ActorRdfSerializeFixedMediaTypes{constructor(a){super(a)}async runHandle(a,o){const l=new u.Readable;l._read=()=>{};try{const c={};a.quadStream.on("prefix",(h,f)=>{c[h]=f});const{text:d}=await(0,s.write)(await(0,e.default)(a.quadStream),{errorOnUnused:!0,extendedSyntax:o==="text/shaclc-ext",prefixes:c});l.push(d),l.push(null)}catch(c){l._read=()=>{l.emit("error",c)}}return{data:l,triples:!0}}};return dd.ActorRdfSerializeShaclc=n,dd}var F4;function ZX(){return F4||(F4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(YX(),t)}(gw)),gw}var ww={},gd={},Sw={},_d={},q4;function eK(){if(q4)return _d;q4=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.ActorRdfResolveHypermediaLinksQueue=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return _d.ActorRdfResolveHypermediaLinksQueue=e,_d}var Tw={},B4;function tK(){return B4||(B4=1,Object.defineProperty(Tw,"__esModule",{value:!0})),Tw}var vd={},U4;function rK(){if(U4)return vd;U4=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.LinkQueueWrapper=void 0;let t=class{constructor(u){this.linkQueue=u}push(u,s){return this.linkQueue.push(u,s)}getSize(){return this.linkQueue.getSize()}isEmpty(){return this.linkQueue.isEmpty()}pop(){return this.linkQueue.pop()}peek(){return this.linkQueue.peek()}};return vd.LinkQueueWrapper=t,vd}var Q4;function nK(){return Q4||(Q4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(eK(),t),u(tK(),t),u(rK(),t)}(Sw)),Sw}var wd={},H4;function E7(){if(H4)return wd;H4=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.LinkQueueFifo=void 0;let t=class{constructor(){this.links=[]}push(u){return this.links.push(u),!0}getSize(){return this.links.length}isEmpty(){return this.links.length===0}pop(){return this.links.shift()}peek(){return this.links[0]}};return wd.LinkQueueFifo=t,wd}var $4;function iK(){if($4)return gd;$4=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.ActorRdfResolveHypermediaLinksQueueFifo=void 0;const t=nK(),e=E7();let u=class extends t.ActorRdfResolveHypermediaLinksQueue{constructor(n){super(n)}async test(n){return!0}async run(n){return{linkQueue:new e.LinkQueueFifo}}};return gd.ActorRdfResolveHypermediaLinksQueueFifo=u,gd}var V4;function aK(){return V4||(V4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(iK(),t),u(E7(),t)}(ww)),ww}var Aw={},Sd={},Ew={},Td={},k4;function O7(){if(k4)return Td;k4=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.ActorRdfUpdateQuads=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return Td.ActorRdfUpdateQuads=e,Td}var ua={},z4;function sK(){if(z4)return ua;z4=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.ActorRdfUpdateQuadsDestination=ua.deskolemize=ua.deskolemizeStream=void 0;const t=dq(),e=Lt,u=O7();function s(a,o){return a==null?void 0:a.map(l=>(0,t.deskolemizeQuad)(l,o))}ua.deskolemizeStream=s;function n(a){var c;const o=a.context.get(e.KeysRdfUpdateQuads.destination),l=(c=a.context.get(e.KeysQuerySourceIdentify.sourceIds))==null?void 0:c.get(o);return l?{...a,quadStreamInsert:s(a.quadStreamInsert,l),quadStreamDelete:s(a.quadStreamDelete,l)}:a}ua.deskolemize=n;let r=class extends u.ActorRdfUpdateQuads{async test(o){return!0}async run(o){const l=await this.getDestination(o.context);return await this.getOutput(l,n(o))}async getOutput(o,l){return{execute:async()=>{await(l.quadStreamDelete?o.delete(l.quadStreamDelete):Promise.resolve()),await(l.deleteGraphs?o.deleteGraphs(l.deleteGraphs.graphs,l.deleteGraphs.requireExistence,l.deleteGraphs.dropGraphs):Promise.resolve()),await(l.createGraphs?o.createGraphs(l.createGraphs.graphs,l.createGraphs.requireNonExistence):Promise.resolve()),await(l.quadStreamInsert?o.insert(l.quadStreamInsert):Promise.resolve())}}}};return ua.ActorRdfUpdateQuadsDestination=r,ua}var Ow={},G4;function oK(){return G4||(G4=1,Object.defineProperty(Ow,"__esModule",{value:!0})),Ow}var Sn={},W4;function uK(){if(W4)return Sn;W4=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.getContextDestinationUrl=Sn.getContextDestination=Sn.getDataDestinationContext=Sn.getDataDestinationValue=Sn.getDataDestinationType=Sn.isDataDestinationRawType=void 0;const t=Lt;function e(o){return typeof o=="string"||"remove"in o}Sn.isDataDestinationRawType=e;function u(o){return typeof o=="string"?"":"remove"in o?"rdfjsStore":o.type}Sn.getDataDestinationType=u;function s(o){return e(o)?o:o.value}Sn.getDataDestinationValue=s;function n(o,l){return typeof o=="string"||"remove"in o||!o.context?l:l.merge(o.context)}Sn.getDataDestinationContext=n;function r(o){return o.get(t.KeysRdfUpdateQuads.destination)}Sn.getContextDestination=r;function a(o){if(o){let l=s(o);if(typeof l=="string"){const c=l.indexOf("#");return c>=0&&(l=l.slice(0,c)),l}}}return Sn.getContextDestinationUrl=a,Sn}var J4;function dA(){return J4||(J4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(O7(),t),u(sK(),t),u(oK(),t),u(uK(),t)}(Ew)),Ew}var Ad={},X4;function cK(){if(X4)return Ad;X4=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.RdfJsQuadDestination=void 0;const t=y7(),e=Et(),u=Xt(),s=new e.DataFactory;let n=class{constructor(a){this.store=a}delete(a){return(0,t.promisifyEventEmitter)(this.store.remove(a))}insert(a){return(0,t.promisifyEventEmitter)(this.store.import(a))}async deleteGraphs(a,o,l){switch(a){case"ALL":await(0,t.promisifyEventEmitter)(this.store.deleteGraph(s.defaultGraph()));case"NAMED":const c=this.store.match(),d={};c.on("data",h=>{h.graph.termType!=="DefaultGraph"&&(d[(0,u.termToString)(h.graph)]=!0)}),await(0,t.promisifyEventEmitter)(c),await Promise.all(Object.keys(d).map(h=>(0,t.promisifyEventEmitter)(this.store.deleteGraph((0,u.stringToTerm)(h)))));break;default:for(const h of Array.isArray(a)?a:[a])await(0,t.promisifyEventEmitter)(this.store.deleteGraph(h))}}async createGraphs(a,o){if(o)for(const l of a){const c=this.store.match(void 0,void 0,void 0,l);await new Promise((d,h)=>{c.once("data",()=>{h(new Error(`Unable to create graph ${l.value} as it already exists`))}),c.on("end",d),c.on("error",h)})}}};return Ad.RdfJsQuadDestination=n,Ad}var K4;function lK(){if(K4)return Sd;K4=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.ActorRdfUpdateQuadsRdfJsStore=void 0;const t=dA(),e=cK();let u=class extends t.ActorRdfUpdateQuadsDestination{constructor(n){super(n)}async test(n){const r=(0,t.getContextDestination)(n.context);if(!r||typeof r=="string"||!("remove"in r)&&"value"in r&&!r.value.remove)throw new Error(`${this.name} received an invalid rdfjsStore.`);return!0}async getDestination(n){const r=(0,t.getContextDestination)(n);return new e.RdfJsQuadDestination("remove"in r?r:r.value)}};return Sd.ActorRdfUpdateQuadsRdfJsStore=u,Sd}var Y4;function dK(){return Y4||(Y4=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(lK(),t)}(Aw)),Aw}var Rw={},Ed={},xw={},Od={},Iw={},Is={},Z4;function fK(){if(Z4)return Is;Z4=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.readableFromWeb=Is.ReadableFromWeb=void 0;const t=Wt();let e=class extends t.Readable{constructor(n,r){super(r),this.reader=n.getReader(),this.readerClosed=!1,this.reader.closed.then(()=>{this.readerClosed=!0}).catch(a=>{this.readerClosed=!0,this.destroy(a)})}_read(){this.reader.read().then(n=>this.push(n.done?null:n.value)).catch(n=>this.destroy(n))}destroy(n){return this.readerClosed||this.reader.cancel(n).then().catch(()=>{}),super.destroy(n)}};Is.ReadableFromWeb=e;function u(s,n){return new e(s,n)}return Is.readableFromWeb=u,Is}var e6;function hK(){return e6||(e6=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.readableFromWeb=void 0;var e=fK();Object.defineProperty(t,"readableFromWeb",{enumerable:!0,get:function(){return e.readableFromWeb}})}(Iw)),Iw}function D1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pw={exports:{}},t6;function pK(){return t6||(t6=1,function(t,e){(function(u){t.exports=u()})(function(){return function u(s,n,r){function a(c,d){if(!n[c]){if(!s[c]){var h=typeof D1=="function"&&D1;if(!d&&h)return h(c,!0);if(o)return o(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var p=n[c]={exports:{}};s[c][0].call(p.exports,function(y){var b=s[c][1][y];return a(b||y)},p,p.exports,u,s,n,r)}return n[c].exports}for(var o=typeof D1=="function"&&D1,l=0;l<r.length;l++)a(r[l]);return a}({1:[function(u,s,n){Object.defineProperty(n,"__esModule",{value:!0});var r=u("./spec/reference-implementation/lib/readable-stream"),a=r.ReadableStream,o=u("./spec/reference-implementation/lib/writable-stream"),l=o.WritableStream,c=u("./spec/reference-implementation/lib/byte-length-queuing-strategy"),d=u("./spec/reference-implementation/lib/count-queuing-strategy"),h=u("./spec/reference-implementation/lib/transform-stream"),f=h.TransformStream;n.ByteLengthQueuingStrategy=c,n.CountQueuingStrategy=d,n.ReadableStream=a,n.WritableStream=l,n.TransformStream=f;var p={ReadableStream:a,WritableStream:l,ByteLengthQueuingStrategy:c,CountQueuingStrategy:d,TransformStream:f};n.default=p},{"./spec/reference-implementation/lib/byte-length-queuing-strategy":8,"./spec/reference-implementation/lib/count-queuing-strategy":9,"./spec/reference-implementation/lib/readable-stream":12,"./spec/reference-implementation/lib/transform-stream":13,"./spec/reference-implementation/lib/writable-stream":15}],2:[function(u,s,n){(function(r){function a(j,q){if(j===q)return 0;for(var $=j.length,Z=q.length,X=0,le=Math.min($,Z);X<le;++X)if(j[X]!==q[X]){$=j[X],Z=q[X];break}return $<Z?-1:Z<$?1:0}function o(j){return r.Buffer&&typeof r.Buffer.isBuffer=="function"?r.Buffer.isBuffer(j):!(j==null||!j._isBuffer)}function l(j){return Object.prototype.toString.call(j)}function c(j){return!o(j)&&typeof r.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(j):!!j&&(j instanceof DataView||!!(j.buffer&&j.buffer instanceof ArrayBuffer)))}function d(j){if(D.isFunction(j)){if(E)return j.name;var q=j.toString().match(M);return q&&q[1]}}function h(j,q){return typeof j=="string"?j.length<q?j:j.slice(0,q):j}function f(j){if(E||!D.isFunction(j))return D.inspect(j);var q=d(j);return"[Function"+(q?": "+q:"")+"]"}function p(j){return h(f(j.actual),128)+" "+j.operator+" "+h(f(j.expected),128)}function y(j,q,$,Z,X){throw new P.AssertionError({message:$,actual:j,expected:q,operator:Z,stackStartFunction:X})}function b(j,q){j||y(j,!0,q,"==",P.ok)}function g(j,q,$,Z){if(j===q)return!0;if(o(j)&&o(q))return a(j,q)===0;if(D.isDate(j)&&D.isDate(q))return j.getTime()===q.getTime();if(D.isRegExp(j)&&D.isRegExp(q))return j.source===q.source&&j.global===q.global&&j.multiline===q.multiline&&j.lastIndex===q.lastIndex&&j.ignoreCase===q.ignoreCase;if(j!==null&&typeof j=="object"||q!==null&&typeof q=="object"){if(c(j)&&c(q)&&l(j)===l(q)&&!(j instanceof Float32Array||j instanceof Float64Array))return a(new Uint8Array(j.buffer),new Uint8Array(q.buffer))===0;if(o(j)!==o(q))return!1;var X=(Z=Z||{actual:[],expected:[]}).actual.indexOf(j);return X!==-1&&X===Z.expected.indexOf(q)||(Z.actual.push(j),Z.expected.push(q),v(j,q,$,Z))}return $?j===q:j==q}function m(j){return Object.prototype.toString.call(j)=="[object Arguments]"}function v(j,q,$,Z){if(j==null||q===null||q===void 0)return!1;if(D.isPrimitive(j)||D.isPrimitive(q))return j===q;if($&&Object.getPrototypeOf(j)!==Object.getPrototypeOf(q))return!1;var X=m(j),le=m(q);if(X&&!le||!X&&le)return!1;if(X)return j=O.call(j),q=O.call(q),g(j,q,$);var K,he,Re=U(j),ie=U(q);if(Re.length!==ie.length)return!1;for(Re.sort(),ie.sort(),he=Re.length-1;he>=0;he--)if(Re[he]!==ie[he])return!1;for(he=Re.length-1;he>=0;he--)if(K=Re[he],!g(j[K],q[K],$,Z))return!1;return!0}function _(j,q,$){g(j,q,!0)&&y(j,q,$,"notDeepStrictEqual",_)}function w(j,q){if(!j||!q)return!1;if(Object.prototype.toString.call(q)=="[object RegExp]")return q.test(j);try{if(j instanceof q)return!0}catch{}return!Error.isPrototypeOf(q)&&q.call({},j)===!0}function S(j){var q;try{j()}catch($){q=$}return q}function A(j,q,$,Z){var X;if(typeof q!="function")throw new TypeError('"block" argument must be a function');typeof $=="string"&&(Z=$,$=null),X=S(q),Z=($&&$.name?" ("+$.name+").":".")+(Z?" "+Z:"."),j&&!X&&y(X,$,"Missing expected exception"+Z);var le=typeof Z=="string",K=!j&&D.isError(X),he=!j&&X&&!$;if((K&&le&&w(X,$)||he)&&y(X,$,"Got unwanted exception"+Z),j&&X&&$&&!w(X,$)||!j&&X)throw X}var D=u("util/"),L=Object.prototype.hasOwnProperty,O=Array.prototype.slice,E=(function(){}).name==="foo",P=s.exports=b,M=/\s*function\s+([^\(\s]*)\s*/;P.AssertionError=function(q){this.name="AssertionError",this.actual=q.actual,this.expected=q.expected,this.operator=q.operator,q.message?(this.message=q.message,this.generatedMessage=!1):(this.message=p(this),this.generatedMessage=!0);var $=q.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,$);else{var Z=new Error;if(Z.stack){var X=Z.stack,le=d($),K=X.indexOf(`
`+le);if(K>=0){var he=X.indexOf(`
`,K+1);X=X.substring(he+1)}this.stack=X}}},D.inherits(P.AssertionError,Error),P.fail=y,P.ok=b,P.equal=function(q,$,Z){q!=$&&y(q,$,Z,"==",P.equal)},P.notEqual=function(q,$,Z){q==$&&y(q,$,Z,"!=",P.notEqual)},P.deepEqual=function(q,$,Z){g(q,$,!1)||y(q,$,Z,"deepEqual",P.deepEqual)},P.deepStrictEqual=function(q,$,Z){g(q,$,!0)||y(q,$,Z,"deepStrictEqual",P.deepStrictEqual)},P.notDeepEqual=function(q,$,Z){g(q,$,!1)&&y(q,$,Z,"notDeepEqual",P.notDeepEqual)},P.notDeepStrictEqual=_,P.strictEqual=function(q,$,Z){q!==$&&y(q,$,Z,"===",P.strictEqual)},P.notStrictEqual=function(q,$,Z){q===$&&y(q,$,Z,"!==",P.notStrictEqual)},P.throws=function(j,q,$){A(!0,j,q,$)},P.doesNotThrow=function(j,q,$){A(!1,j,q,$)},P.ifError=function(j){if(j)throw j};var U=Object.keys||function(j){var q=[];for(var $ in j)L.call(j,$)&&q.push($);return q}}).call(this,typeof I<"u"?I:typeof self<"u"?self:typeof window<"u"?window:{})},{"util/":7}],3:[function(u,s,n){},{}],4:[function(u,s,n){function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(w){if(p===setTimeout)return setTimeout(w,0);if((p===r||!p)&&setTimeout)return p=setTimeout,setTimeout(w,0);try{return p(w,0)}catch{try{return p.call(null,w,0)}catch{return p.call(this,w,0)}}}function l(w){if(y===clearTimeout)return clearTimeout(w);if((y===a||!y)&&clearTimeout)return y=clearTimeout,clearTimeout(w);try{return y(w)}catch{try{return y.call(null,w)}catch{return y.call(this,w)}}}function c(){v&&g&&(v=!1,g.length?m=g.concat(m):_=-1,m.length&&d())}function d(){if(!v){var w=o(c);v=!0;for(var S=m.length;S;){for(g=m,m=[];++_<S;)g&&g[_].run();_=-1,S=m.length}g=null,v=!1,l(w)}}function h(w,S){this.fun=w,this.array=S}function f(){}var p,y,b=s.exports={};(function(){try{p=typeof setTimeout=="function"?setTimeout:r}catch{p=r}try{y=typeof clearTimeout=="function"?clearTimeout:a}catch{y=a}})();var g,m=[],v=!1,_=-1;b.nextTick=function(w){var S=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)S[A-1]=arguments[A];m.push(new h(w,S)),m.length!==1||v||o(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=f,b.addListener=f,b.once=f,b.off=f,b.removeListener=f,b.removeAllListeners=f,b.emit=f,b.prependListener=f,b.prependOnceListener=f,b.listeners=function(w){return[]},b.binding=function(w){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(w){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},{}],5:[function(u,s,n){typeof Object.create=="function"?s.exports=function(a,o){a.super_=o,a.prototype=Object.create(o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:s.exports=function(a,o){a.super_=o;var l=function(){};l.prototype=o.prototype,a.prototype=new l,a.prototype.constructor=a}},{}],6:[function(u,s,n){s.exports=function(a){return a&&typeof a=="object"&&typeof a.copy=="function"&&typeof a.fill=="function"&&typeof a.readUInt8=="function"}},{}],7:[function(u,s,n){(function(r,a){function o(ie,ae){var Ee={seen:[],stylize:c};return arguments.length>=3&&(Ee.depth=arguments[2]),arguments.length>=4&&(Ee.colors=arguments[3]),v(ae)?Ee.showHidden=ae:ae&&n._extend(Ee,ae),L(Ee.showHidden)&&(Ee.showHidden=!1),L(Ee.depth)&&(Ee.depth=2),L(Ee.colors)&&(Ee.colors=!1),L(Ee.customInspect)&&(Ee.customInspect=!0),Ee.colors&&(Ee.stylize=l),h(Ee,ie,Ee.depth)}function l(ie,ae){var Ee=o.styles[ae];return Ee?"\x1B["+o.colors[Ee][0]+"m"+ie+"\x1B["+o.colors[Ee][1]+"m":ie}function c(ie,ae){return ie}function d(ie){var ae={};return ie.forEach(function(Ee,De){ae[Ee]=!0}),ae}function h(ie,ae,Ee){if(ie.customInspect&&ae&&U(ae.inspect)&&ae.inspect!==n.inspect&&(!ae.constructor||ae.constructor.prototype!==ae)){var De=ae.inspect(Ee,ie);return A(De)||(De=h(ie,De,Ee)),De}var ge=f(ie,ae);if(ge)return ge;var de=Object.keys(ae),fe=d(de);if(ie.showHidden&&(de=Object.getOwnPropertyNames(ae)),M(ae)&&(de.indexOf("message")>=0||de.indexOf("description")>=0))return p(ae);if(de.length===0){if(U(ae)){var H=ae.name?": "+ae.name:"";return ie.stylize("[Function"+H+"]","special")}if(O(ae))return ie.stylize(RegExp.prototype.toString.call(ae),"regexp");if(P(ae))return ie.stylize(Date.prototype.toString.call(ae),"date");if(M(ae))return p(ae)}var N="",R=!1,T=["{","}"];if(m(ae)&&(R=!0,T=["[","]"]),U(ae)&&(N=" [Function"+(ae.name?": "+ae.name:"")+"]"),O(ae)&&(N=" "+RegExp.prototype.toString.call(ae)),P(ae)&&(N=" "+Date.prototype.toUTCString.call(ae)),M(ae)&&(N=" "+p(ae)),de.length===0&&(!R||ae.length==0))return T[0]+N+T[1];if(Ee<0)return O(ae)?ie.stylize(RegExp.prototype.toString.call(ae),"regexp"):ie.stylize("[Object]","special");ie.seen.push(ae);var x;return x=R?y(ie,ae,Ee,fe,de):de.map(function(B){return b(ie,ae,Ee,fe,B,R)}),ie.seen.pop(),g(x,N,T)}function f(ie,ae){if(L(ae))return ie.stylize("undefined","undefined");if(A(ae)){var Ee="'"+JSON.stringify(ae).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ie.stylize(Ee,"string")}return S(ae)?ie.stylize(""+ae,"number"):v(ae)?ie.stylize(""+ae,"boolean"):_(ae)?ie.stylize("null","null"):void 0}function p(ie){return"["+Error.prototype.toString.call(ie)+"]"}function y(ie,ae,Ee,De,ge){for(var de=[],fe=0,H=ae.length;fe<H;++fe)X(ae,String(fe))?de.push(b(ie,ae,Ee,De,String(fe),!0)):de.push("");return ge.forEach(function(N){N.match(/^\d+$/)||de.push(b(ie,ae,Ee,De,N,!0))}),de}function b(ie,ae,Ee,De,ge,de){var fe,H,N;if((N=Object.getOwnPropertyDescriptor(ae,ge)||{value:ae[ge]}).get?H=N.set?ie.stylize("[Getter/Setter]","special"):ie.stylize("[Getter]","special"):N.set&&(H=ie.stylize("[Setter]","special")),X(De,ge)||(fe="["+ge+"]"),H||(ie.seen.indexOf(N.value)<0?(H=_(Ee)?h(ie,N.value,null):h(ie,N.value,Ee-1)).indexOf(`
`)>-1&&(H=de?H.split(`
`).map(function(R){return"  "+R}).join(`
`).substr(2):`
`+H.split(`
`).map(function(R){return"   "+R}).join(`
`)):H=ie.stylize("[Circular]","special")),L(fe)){if(de&&ge.match(/^\d+$/))return H;(fe=JSON.stringify(""+ge)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(fe=fe.substr(1,fe.length-2),fe=ie.stylize(fe,"name")):(fe=fe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),fe=ie.stylize(fe,"string"))}return fe+": "+H}function g(ie,ae,Ee){var De=0;return ie.reduce(function(ge,de){return De++,de.indexOf(`
`)>=0&&De++,ge+de.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Ee[0]+(ae===""?"":ae+`
 `)+" "+ie.join(`,
  `)+" "+Ee[1]:Ee[0]+ae+" "+ie.join(", ")+" "+Ee[1]}function m(ie){return Array.isArray(ie)}function v(ie){return typeof ie=="boolean"}function _(ie){return ie===null}function w(ie){return ie==null}function S(ie){return typeof ie=="number"}function A(ie){return typeof ie=="string"}function D(ie){return typeof ie=="symbol"}function L(ie){return ie===void 0}function O(ie){return E(ie)&&q(ie)==="[object RegExp]"}function E(ie){return typeof ie=="object"&&ie!==null}function P(ie){return E(ie)&&q(ie)==="[object Date]"}function M(ie){return E(ie)&&(q(ie)==="[object Error]"||ie instanceof Error)}function U(ie){return typeof ie=="function"}function j(ie){return ie===null||typeof ie=="boolean"||typeof ie=="number"||typeof ie=="string"||typeof ie=="symbol"||ie===void 0}function q(ie){return Object.prototype.toString.call(ie)}function $(ie){return ie<10?"0"+ie.toString(10):ie.toString(10)}function Z(){var ie=new Date,ae=[$(ie.getHours()),$(ie.getMinutes()),$(ie.getSeconds())].join(":");return[ie.getDate(),Re[ie.getMonth()],ae].join(" ")}function X(ie,ae){return Object.prototype.hasOwnProperty.call(ie,ae)}var le=/%[sdj%]/g;n.format=function(ie){if(!A(ie)){for(var ae=[],Ee=0;Ee<arguments.length;Ee++)ae.push(o(arguments[Ee]));return ae.join(" ")}for(var Ee=1,De=arguments,ge=De.length,de=String(ie).replace(le,function(N){if(N==="%%")return"%";if(Ee>=ge)return N;switch(N){case"%s":return String(De[Ee++]);case"%d":return Number(De[Ee++]);case"%j":try{return JSON.stringify(De[Ee++])}catch{return"[Circular]"}default:return N}}),fe=De[Ee];Ee<ge;fe=De[++Ee])_(fe)||!E(fe)?de+=" "+fe:de+=" "+o(fe);return de},n.deprecate=function(ie,ae){if(L(a.process))return function(){return n.deprecate(ie,ae).apply(this,arguments)};if(r.noDeprecation===!0)return ie;var Ee=!1;return function(){if(!Ee){if(r.throwDeprecation)throw new Error(ae);r.traceDeprecation?console.trace(ae):console.error(ae),Ee=!0}return ie.apply(this,arguments)}};var K,he={};n.debuglog=function(ie){if(L(K)&&(K={}.NODE_DEBUG||""),ie=ie.toUpperCase(),!he[ie])if(new RegExp("\\b"+ie+"\\b","i").test(K)){var ae=r.pid;he[ie]=function(){var Ee=n.format.apply(n,arguments);console.error("%s %d: %s",ie,ae,Ee)}}else he[ie]=function(){};return he[ie]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=m,n.isBoolean=v,n.isNull=_,n.isNullOrUndefined=w,n.isNumber=S,n.isString=A,n.isSymbol=D,n.isUndefined=L,n.isRegExp=O,n.isObject=E,n.isDate=P,n.isError=M,n.isFunction=U,n.isPrimitive=j,n.isBuffer=u("./support/isBuffer");var Re=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",Z(),n.format.apply(n,arguments))},n.inherits=u("inherits"),n._extend=function(ie,ae){if(!ae||!E(ae))return ie;for(var Ee=Object.keys(ae),De=Ee.length;De--;)ie[Ee[De]]=ae[Ee[De]];return ie}}).call(this,u("_process"),typeof I<"u"?I:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":6,_process:4,inherits:5}],8:[function(u,s,n){function r(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var a=function(){function c(d,h){for(var f=0;f<h.length;f++){var p=h[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,h,f){return h&&c(d.prototype,h),f&&c(d,f),d}}(),o=u("./helpers.js"),l=o.createDataProperty;s.exports=function(){function c(d){var h=d.highWaterMark;r(this,c),l(this,"highWaterMark",h)}return a(c,[{key:"size",value:function(h){return h.byteLength}}]),c}()},{"./helpers.js":10}],9:[function(u,s,n){function r(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var a=function(){function c(d,h){for(var f=0;f<h.length;f++){var p=h[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,h,f){return h&&c(d.prototype,h),f&&c(d,f),d}}(),o=u("./helpers.js"),l=o.createDataProperty;s.exports=function(){function c(d){var h=d.highWaterMark;r(this,c),l(this,"highWaterMark",h)}return a(c,[{key:"size",value:function(){return 1}}]),c}()},{"./helpers.js":10}],10:[function(u,s,n){function r(c,d,h){if(typeof c!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(c,d,h)}function a(c,d,h){try{return Promise.resolve(r(c,d,h))}catch(f){return Promise.reject(f)}}var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};u("better-assert");var l=Symbol('is "detached" for our purposes');n.typeIsObject=function(c){return(c===void 0?"undefined":o(c))==="object"&&c!==null||typeof c=="function"},n.createDataProperty=function(c,d,h){Object.defineProperty(c,d,{value:h,writable:!0,enumerable:!0,configurable:!0})},n.createArrayFromList=function(c){return c.slice()},n.ArrayBufferCopy=function(c,d,h,f,p){new Uint8Array(c).set(new Uint8Array(h,f,p),d)},n.CreateIterResultObject=function(c,d){var h={};return Object.defineProperty(h,"value",{value:c,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(h,"done",{value:d,enumerable:!0,writable:!0,configurable:!0}),h},n.IsFiniteNonNegativeNumber=function(c){return n.IsNonNegativeNumber(c)!==!1&&c!==1/0},n.IsNonNegativeNumber=function(c){return typeof c=="number"&&!Number.isNaN(c)&&!(c<0)},n.Call=r,n.CreateAlgorithmFromUnderlyingMethod=function(c,d,h,f){var p=c[d];if(p!==void 0){if(typeof p!="function")throw new TypeError(p+" is not a method");switch(h){case 0:return function(){return a(p,c,f)};case 1:return function(y){var b=[y].concat(f);return a(p,c,b)}}}return function(){return Promise.resolve()}},n.InvokeOrNoop=function(c,d,h){var f=c[d];if(f!==void 0)return r(f,c,h)},n.PromiseCall=a,n.TransferArrayBuffer=function(c){var d=c.slice();return Object.defineProperty(c,"byteLength",{get:function(){return 0}}),c[l]=!0,d},n.IsDetachedBuffer=function(c){return l in c},n.ValidateAndNormalizeHighWaterMark=function(c){if(c=Number(c),Number.isNaN(c)||c<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return c},n.MakeSizeAlgorithmFromSizeFunction=function(c){if(c===void 0)return function(){return 1};if(typeof c!="function")throw new TypeError("size property of a queuing strategy must be a function");return function(d){return c(d)}}},{"better-assert":16}],11:[function(u,s,n){u("better-assert");var r=u("./helpers.js"),a=r.IsFiniteNonNegativeNumber;n.DequeueValue=function(o){var l=o._queue.shift();return o._queueTotalSize-=l.size,o._queueTotalSize<0&&(o._queueTotalSize=0),l.value},n.EnqueueValueWithSize=function(o,l,c){if(c=Number(c),!a(c))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");o._queue.push({value:l,size:c}),o._queueTotalSize+=c},n.PeekQueueValue=function(o){return o._queue[0].value},n.ResetQueue=function(o){o._queue=[],o._queueTotalSize=0}},{"./helpers.js":10,"better-assert":16}],12:[function(u,s,n){function r(ue,ve){if(!(ue instanceof ve))throw new TypeError("Cannot call a class as a function")}function a(ue){return new mn(ue)}function o(ue){return new Zi(ue)}function l(ue,ve,Ce){var Xe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,st=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return 1},ht=Object.create(Ni.prototype);return d(ht),ge(ht,Object.create(Xr.prototype),ue,ve,Ce,Xe,st),ht}function c(ue,ve,Ce){var Xe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,st=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,ht=Object.create(Ni.prototype);return d(ht),Ne(ht,Object.create(Zn.prototype),ue,ve,Ce,Xe,st),ht}function d(ue){ue._state="readable",ue._reader=void 0,ue._storedError=void 0,ue._disturbed=!1}function h(ue){return!!Ke(ue)&&!!Object.prototype.hasOwnProperty.call(ue,"_readableStreamController")}function f(ue){return ue._disturbed}function p(ue){return ue._reader!==void 0}function y(ue,ve){function Ce(){return $(st).then(function(Fr){var gn=Fr.value;if(Fr.done===!0&&ht===!1&&(St===!1&&K(vr._readableStreamController),Qt===!1&&K(zt._readableStreamController),ht=!0),ht!==!0){var Hn=gn,$n=gn;St===!1&&he(vr._readableStreamController,Hn),Qt===!1&&he(zt._readableStreamController,$n)}})}function Xe(){}var st=o(ue),ht=!1,St=!1,Qt=!1,Kt=void 0,lr=void 0,vr=void 0,zt=void 0,Mn=void 0,ei=new Promise(function(Fr){Mn=Fr});return vr=l(Xe,Ce,function(gn){if(St=!0,Kt=gn,Qt===!0){var Hn=Ir([Kt,lr]),$n=m(ue,Hn);Mn($n)}return ei}),zt=l(Xe,Ce,function(gn){if(Qt=!0,lr=gn,St===!0){var Hn=Ir([Kt,lr]),$n=m(ue,Hn);Mn($n)}return ei}),st._closedPromise.catch(function(Fr){ht!==!0&&(ie(vr._readableStreamController,Fr),ie(zt._readableStreamController,Fr),ht=!0)}),[vr,zt]}function b(ue){return new Promise(function(ve,Ce){var Xe={_resolve:ve,_reject:Ce};ue._reader._readIntoRequests.push(Xe)})}function g(ue){return new Promise(function(ve,Ce){var Xe={_resolve:ve,_reject:Ce};ue._reader._readRequests.push(Xe)})}function m(ue,ve){return ue._disturbed=!0,ue._state==="closed"?Promise.resolve(void 0):ue._state==="errored"?Promise.reject(ue._storedError):(v(ue),ue._readableStreamController[hi](ve).then(function(){}))}function v(ue){ue._state="closed";var ve=ue._reader;if(ve!==void 0){if(P(ve)===!0){var Ce=!0,Xe=!1,st=void 0;try{for(var ht,St=ve._readRequests[Symbol.iterator]();!(Ce=(ht=St.next()).done);Ce=!0)(0,ht.value._resolve)(Ye(void 0,!0))}catch(Qt){Xe=!0,st=Qt}finally{try{!Ce&&St.return&&St.return()}finally{if(Xe)throw st}}ve._readRequests=[]}tt(ve)}}function _(ue,ve){ue._state="errored",ue._storedError=ve;var Ce=ue._reader;if(Ce!==void 0){if(P(Ce)===!0){var Xe=!0,st=!1,ht=void 0;try{for(var St,Qt=Ce._readRequests[Symbol.iterator]();!(Xe=(St=Qt.next()).done);Xe=!0)St.value._reject(ve)}catch(ei){st=!0,ht=ei}finally{try{!Xe&&Qt.return&&Qt.return()}finally{if(st)throw ht}}Ce._readRequests=[]}else{var Kt=!0,lr=!1,vr=void 0;try{for(var zt,Mn=Ce._readIntoRequests[Symbol.iterator]();!(Kt=(zt=Mn.next()).done);Kt=!0)zt.value._reject(ve)}catch(ei){lr=!0,vr=ei}finally{try{!Kt&&Mn.return&&Mn.return()}finally{if(lr)throw vr}}Ce._readIntoRequests=[]}He(Ce,ve),Ce._closedPromise.catch(function(){})}}function w(ue,ve,Ce){ue._reader._readIntoRequests.shift()._resolve(Ye(ve,Ce))}function S(ue,ve,Ce){ue._reader._readRequests.shift()._resolve(Ye(ve,Ce))}function A(ue){return ue._reader._readIntoRequests.length}function D(ue){return ue._reader._readRequests.length}function L(ue){var ve=ue._reader;return ve!==void 0&&E(ve)!==!1}function O(ue){var ve=ue._reader;return ve!==void 0&&P(ve)!==!1}function E(ue){return!!Ke(ue)&&!!Object.prototype.hasOwnProperty.call(ue,"_readIntoRequests")}function P(ue){return!!Ke(ue)&&!!Object.prototype.hasOwnProperty.call(ue,"_readRequests")}function M(ue,ve){ue._ownerReadableStream=ve,ve._reader=ue,ve._state==="readable"?Se(ue):ve._state==="closed"?je(ue):(Ae(ue,ve._storedError),ue._closedPromise.catch(function(){}))}function U(ue,ve){return m(ue._ownerReadableStream,ve)}function j(ue){ue._ownerReadableStream._state==="readable"?He(ue,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Ge(ue,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),ue._closedPromise.catch(function(){}),ue._ownerReadableStream._reader=void 0,ue._ownerReadableStream=void 0}function q(ue,ve){var Ce=ue._ownerReadableStream;return Ce._disturbed=!0,Ce._state==="errored"?Promise.reject(Ce._storedError):re(Ce._readableStreamController,ve)}function $(ue){var ve=ue._ownerReadableStream;return ve._disturbed=!0,ve._state==="closed"?Promise.resolve(Ye(void 0,!0)):ve._state==="errored"?Promise.reject(ve._storedError):ve._readableStreamController[Mr]()}function Z(ue){return!!Ke(ue)&&!!Object.prototype.hasOwnProperty.call(ue,"_controlledReadableStream")}function X(ue){le(ue)!==!1&&(ue._pulling!==!0?(ue._pulling=!0,ue._pullAlgorithm().then(function(){if(ue._pulling=!1,ue._pullAgain===!0)return ue._pullAgain=!1,X(ue)},function(ve){ie(ue,ve)}).catch(Ie)):ue._pullAgain=!0)}function le(ue){var ve=ue._controlledReadableStream;return De(ue)!==!1&&ue._started!==!1&&(p(ve)===!0&&D(ve)>0||ae(ue)>0)}function K(ue){var ve=ue._controlledReadableStream;ue._closeRequested=!0,ue._queue.length===0&&v(ve)}function he(ue,ve){var Ce=ue._controlledReadableStream;if(p(Ce)===!0&&D(Ce)>0)S(Ce,ve,!1);else{var Xe=void 0;try{Xe=ue._strategySizeAlgorithm(ve)}catch(st){throw ie(ue,st),st}try{at(ue,ve,Xe)}catch(st){throw ie(ue,st),st}}X(ue)}function Re(ue,ve){var Ce=ue._controlledReadableStream;Tt(ue),_(Ce,ve)}function ie(ue,ve){ue._controlledReadableStream._state==="readable"&&Re(ue,ve)}function ae(ue){var ve=ue._controlledReadableStream._state;return ve==="errored"?null:ve==="closed"?0:ue._strategyHWM-ue._queueTotalSize}function Ee(ue){return le(ue)!==!0}function De(ue){var ve=ue._controlledReadableStream._state;return ue._closeRequested===!1&&ve==="readable"}function ge(ue,ve,Ce,Xe,st,ht,St){ve._controlledReadableStream=ue,ve._queue=void 0,ve._queueTotalSize=void 0,Tt(ve),ve._started=!1,ve._closeRequested=!1,ve._pullAgain=!1,ve._pulling=!1,ve._strategySizeAlgorithm=St,ve._strategyHWM=ht,ve._pullAlgorithm=Xe,ve._cancelAlgorithm=st,ue._readableStreamController=ve;var Qt=Ce();Promise.resolve(Qt).then(function(){ve._started=!0,X(ve)},function(Kt){ie(ve,Kt)}).catch(Ie)}function de(ue,ve,Ce,Xe){var st=Object.create(Xr.prototype),ht=Fe(ve,"pull",0,[st]),St=Fe(ve,"cancel",1,[]);ge(ue,st,function(){return Je(ve,"start",[st])},ht,St,Ce,Xe)}function fe(ue){return!!Ke(ue)&&!!Object.prototype.hasOwnProperty.call(ue,"_controlledReadableByteStream")}function H(ue){return!!Ke(ue)&&!!Object.prototype.hasOwnProperty.call(ue,"_associatedReadableByteStreamController")}function N(ue){qe(ue)!==!1&&(ue._pulling!==!0?(ue._pulling=!0,ue._pullAlgorithm().then(function(){ue._pulling=!1,ue._pullAgain===!0&&(ue._pullAgain=!1,N(ue))},function(ve){ue._controlledReadableByteStream._state==="readable"&&Q(ue,ve)}).catch(Ie)):ue._pullAgain=!0)}function R(ue){z(ue),ue._pendingPullIntos=[]}function T(ue,ve){var Ce=!1;ue._state==="closed"&&(Ce=!0);var Xe=x(ve);ve.readerType==="default"?S(ue,Xe,Ce):w(ue,Xe,Ce)}function x(ue){var ve=ue.bytesFilled,Ce=ue.elementSize;return new ue.ctor(ue.buffer,ue.byteOffset,ve/Ce)}function B(ue,ve,Ce,Xe){ue._queue.push({buffer:ve,byteOffset:Ce,byteLength:Xe}),ue._queueTotalSize+=Xe}function k(ue,ve){var Ce=ve.elementSize,Xe=ve.bytesFilled-ve.bytesFilled%Ce,st=Math.min(ue._queueTotalSize,ve.byteLength-ve.bytesFilled),ht=ve.bytesFilled+st,St=ht-ht%Ce,Qt=st,Kt=!1;St>Xe&&(Qt=St-ve.bytesFilled,Kt=!0);for(var lr=ue._queue;Qt>0;){var vr=lr[0],zt=Math.min(Qt,vr.byteLength),Mn=ve.byteOffset+ve.bytesFilled;Ue(ve.buffer,Mn,vr.buffer,vr.byteOffset,zt),vr.byteLength===zt?lr.shift():(vr.byteOffset+=zt,vr.byteLength-=zt),ue._queueTotalSize-=zt,V(ue,zt,ve),Qt-=zt}return Kt}function V(ue,ve,Ce){z(ue),Ce.bytesFilled+=ve}function J(ue){ue._queueTotalSize===0&&ue._closeRequested===!0?v(ue._controlledReadableByteStream):N(ue)}function z(ue){ue._byobRequest!==void 0&&(ue._byobRequest._associatedReadableByteStreamController=void 0,ue._byobRequest._view=void 0,ue._byobRequest=void 0)}function Y(ue){for(;ue._pendingPullIntos.length>0;){if(ue._queueTotalSize===0)return;var ve=ue._pendingPullIntos[0];k(ue,ve)===!0&&(Le(ue),T(ue._controlledReadableByteStream,ve))}}function re(ue,ve){var Ce=ue._controlledReadableByteStream,Xe=1;ve.constructor!==DataView&&(Xe=ve.constructor.BYTES_PER_ELEMENT);var st=ve.constructor,ht={buffer:yt(ve.buffer),byteOffset:ve.byteOffset,byteLength:ve.byteLength,bytesFilled:0,elementSize:Xe,ctor:st,readerType:"byob"};if(ue._pendingPullIntos.length>0)return ue._pendingPullIntos.push(ht),b(Ce);if(Ce._state==="closed"){var St=new ve.constructor(ht.buffer,ht.byteOffset,0);return Promise.resolve(Ye(St,!0))}if(ue._queueTotalSize>0){if(k(ue,ht)===!0){var Qt=x(ht);return J(ue),Promise.resolve(Ye(Qt,!1))}if(ue._closeRequested===!0){var Kt=new TypeError("Insufficient bytes to fill elements in the given buffer");return Q(ue,Kt),Promise.reject(Kt)}}ue._pendingPullIntos.push(ht);var lr=b(Ce);return N(ue),lr}function ce(ue,ve){ve.buffer=yt(ve.buffer);var Ce=ue._controlledReadableByteStream;if(L(Ce)===!0)for(;A(Ce)>0;)T(Ce,Le(ue))}function Te(ue,ve,Ce){if(Ce.bytesFilled+ve>Ce.byteLength)throw new RangeError("bytesWritten out of range");if(V(ue,ve,Ce),!(Ce.bytesFilled<Ce.elementSize)){Le(ue);var Xe=Ce.bytesFilled%Ce.elementSize;if(Xe>0){var st=Ce.byteOffset+Ce.bytesFilled,ht=Ce.buffer.slice(st-Xe,st);B(ue,ht,0,ht.byteLength)}Ce.buffer=yt(Ce.buffer),Ce.bytesFilled-=Xe,T(ue._controlledReadableByteStream,Ce),Y(ue)}}function xe(ue,ve){var Ce=ue._pendingPullIntos[0];if(ue._controlledReadableByteStream._state==="closed"){if(ve!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");ce(ue,Ce)}else Te(ue,ve,Ce)}function Le(ue){var ve=ue._pendingPullIntos.shift();return z(ue),ve}function qe(ue){var ve=ue._controlledReadableByteStream;return ve._state==="readable"&&ue._closeRequested!==!0&&ue._started!==!1&&(O(ve)===!0&&D(ve)>0||L(ve)===!0&&A(ve)>0||te(ue)>0)}function G(ue){var ve=ue._controlledReadableByteStream;if(ue._queueTotalSize>0)ue._closeRequested=!0;else{if(ue._pendingPullIntos.length>0&&ue._pendingPullIntos[0].bytesFilled>0){var Ce=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Q(ue,Ce),Ce}v(ve)}}function F(ue,ve){var Ce=ue._controlledReadableByteStream,Xe=ve.buffer,st=ve.byteOffset,ht=ve.byteLength,St=yt(Xe);O(Ce)===!0?D(Ce)===0?B(ue,St,st,ht):S(Ce,new Uint8Array(St,st,ht),!1):L(Ce)===!0?(B(ue,St,st,ht),Y(ue)):B(ue,St,st,ht)}function Q(ue,ve){var Ce=ue._controlledReadableByteStream;R(ue),Tt(ue),_(Ce,ve)}function te(ue){var ve=ue._controlledReadableByteStream._state;return ve==="errored"?null:ve==="closed"?0:ue._strategyHWM-ue._queueTotalSize}function me(ue,ve){if(ve=Number(ve),$e(ve)===!1)throw new RangeError("bytesWritten must be a finite");xe(ue,ve)}function Oe(ue,ve){var Ce=ue._pendingPullIntos[0];if(Ce.byteOffset+Ce.bytesFilled!==ve.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(Ce.byteLength!==ve.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");Ce.buffer=ve.buffer,xe(ue,ve.byteLength)}function Ne(ue,ve,Ce,Xe,st,ht,St){ve._controlledReadableByteStream=ue,ve._pullAgain=!1,ve._pulling=!1,R(ve),ve._queue=ve._queueTotalSize=void 0,Tt(ve),ve._closeRequested=!1,ve._started=!1,ve._strategyHWM=ft(ht),ve._pullAlgorithm=Xe,ve._cancelAlgorithm=st,ve._autoAllocateChunkSize=St,ve._pendingPullIntos=[],ue._readableStreamController=ve;var Qt=Ce();Promise.resolve(Qt).then(function(){ve._started=!0,N(ve)},function(Kt){ue._state==="readable"&&Q(ve,Kt)}).catch(Ie)}function We(ue,ve,Ce){var Xe=Object.create(Zn.prototype),st=Fe(ve,"pull",0,[Xe]),ht=Fe(ve,"cancel",1,[]),St=ve.autoAllocateChunkSize;if(St!==void 0&&(Number.isInteger(St)===!1||St<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");Ne(ue,Xe,function(){return Je(ve,"start",[Xe])},st,ht,Ce,St)}function Ve(ue,ve,Ce){ue._associatedReadableByteStreamController=ve,ue._view=Ce}function pe(ue){return new TypeError("ReadableStream.prototype."+ue+" can only be used on a ReadableStream")}function we(ue){return new TypeError("Cannot "+ue+" a stream using a released reader")}function W(ue){return new TypeError("ReadableStreamDefaultReader.prototype."+ue+" can only be used on a ReadableStreamDefaultReader")}function Se(ue){ue._closedPromise=new Promise(function(ve,Ce){ue._closedPromise_resolve=ve,ue._closedPromise_reject=Ce})}function Ae(ue,ve){ue._closedPromise=Promise.reject(ve),ue._closedPromise_resolve=void 0,ue._closedPromise_reject=void 0}function je(ue){ue._closedPromise=Promise.resolve(void 0),ue._closedPromise_resolve=void 0,ue._closedPromise_reject=void 0}function He(ue,ve){ue._closedPromise_reject(ve),ue._closedPromise_resolve=void 0,ue._closedPromise_reject=void 0}function Ge(ue,ve){ue._closedPromise=Promise.reject(ve)}function tt(ue){ue._closedPromise_resolve(void 0),ue._closedPromise_resolve=void 0,ue._closedPromise_reject=void 0}function lt(ue){return new TypeError("ReadableStreamBYOBReader.prototype."+ue+" can only be used on a ReadableStreamBYOBReader")}function ut(ue){return new TypeError("ReadableStreamDefaultController.prototype."+ue+" can only be used on a ReadableStreamDefaultController")}function oe(ue){return new TypeError("ReadableStreamBYOBRequest.prototype."+ue+" can only be used on a ReadableStreamBYOBRequest")}function C(ue){return new TypeError("ReadableByteStreamController.prototype."+ue+" can only be used on a ReadableByteStreamController")}function ee(ue){try{Promise.prototype.then.call(ue,void 0,function(){})}catch{}}var ye=function(){function ue(ve,Ce){for(var Xe=0;Xe<Ce.length;Xe++){var st=Ce[Xe];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(ve,st.key,st)}}return function(ve,Ce,Xe){return Ce&&ue(ve.prototype,Ce),Xe&&ue(ve,Xe),ve}}();u("better-assert");var Pe=u("./helpers.js"),Ue=Pe.ArrayBufferCopy,Fe=Pe.CreateAlgorithmFromUnderlyingMethod,Ye=Pe.CreateIterResultObject,$e=Pe.IsFiniteNonNegativeNumber,Je=Pe.InvokeOrNoop,nt=Pe.IsDetachedBuffer,yt=Pe.TransferArrayBuffer,ft=Pe.ValidateAndNormalizeHighWaterMark;Pe.IsNonNegativeNumber;var et=Pe.MakeSizeAlgorithmFromSizeFunction,Ir=Pe.createArrayFromList,Ke=Pe.typeIsObject,be=u("./utils.js"),Ie=be.rethrowAssertionErrorRejection,Me=u("./queue-with-sizes.js"),it=Me.DequeueValue,at=Me.EnqueueValueWithSize,Tt=Me.ResetQueue,Vt=u("./writable-stream.js"),rr=Vt.AcquireWritableStreamDefaultWriter,fi=Vt.IsWritableStream,bn=Vt.IsWritableStreamLocked,or=Vt.WritableStreamAbort,Ln=Vt.WritableStreamDefaultWriterCloseWithErrorPropagation,Qr=Vt.WritableStreamDefaultWriterRelease,Qn=Vt.WritableStreamDefaultWriterWrite,Pr=Vt.WritableStreamCloseQueuedOrInFlight,hi=Symbol("[[CancelSteps]]"),Mr=Symbol("[[PullSteps]]"),Ni=function(){function ue(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Xe=Ce.size,st=Ce.highWaterMark;r(this,ue),d(this);var ht=ve.type;if(String(ht)==="bytes"){if(st===void 0&&(st=0),st=ft(st),Xe!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");We(this,ve,st)}else{if(ht!==void 0)throw new RangeError("Invalid type is specified");st===void 0&&(st=1),de(this,ve,st=ft(st),et(Xe))}}return ye(ue,[{key:"cancel",value:function(Ce){return h(this)===!1?Promise.reject(pe("cancel")):p(this)===!0?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):m(this,Ce)}},{key:"getReader",value:function(){var Ce=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).mode;if(h(this)===!1)throw pe("getReader");if(Ce===void 0)return o(this);if((Ce=String(Ce))==="byob")return a(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(Ce,Xe){var st=Ce.writable,ht=Ce.readable;if(st===void 0||ht===void 0)throw new TypeError("readable and writable arguments must be defined");return ee(this.pipeTo(st,Xe)),ht}},{key:"pipeTo",value:function(Ce){var Xe=this,st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ht=st.preventClose,St=st.preventAbort,Qt=st.preventCancel;if(h(this)===!1)return Promise.reject(pe("pipeTo"));if(fi(Ce)===!1)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(ht=!!ht,St=!!St,Qt=!!Qt,p(this)===!0)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(bn(Ce)===!0)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var Kt=o(this),lr=rr(Ce),vr=!1,zt=Promise.resolve();return new Promise(function(Mn,ei){function Fr(){return vr===!0?Promise.resolve():lr._readyPromise.then(function(){return $(Kt).then(function(Yt){var zr=Yt.value;Yt.done!==!0&&(zt=Qn(lr,zr).catch(function(){}))})}).then(Fr)}function gn(){var Yt=zt;return zt.then(function(){return Yt!==zt?gn():void 0})}function Hn(Yt,zr,ri){Yt._state==="errored"?ri(Yt._storedError):zr.catch(ri).catch(Ie)}function $n(Yt,zr,ri){function Ea(){Yt().then(function(){return ea(zr,ri)},function(My){return ea(!0,My)}).catch(Ie)}vr!==!0&&(vr=!0,Ce._state==="writable"&&Pr(Ce)===!1?gn().then(Ea):Ea())}function ti(Yt,zr){vr!==!0&&(vr=!0,Ce._state==="writable"&&Pr(Ce)===!1?gn().then(function(){return ea(Yt,zr)}).catch(Ie):ea(Yt,zr))}function ea(Yt,zr){Qr(lr),j(Kt),Yt?ei(zr):Mn(void 0)}if(Hn(Xe,Kt._closedPromise,function(Yt){St===!1?$n(function(){return or(Ce,Yt)},!0,Yt):ti(!0,Yt)}),Hn(Ce,lr._closedPromise,function(Yt){Qt===!1?$n(function(){return m(Xe,Yt)},!0,Yt):ti(!0,Yt)}),function(zr,ri,Ea){zr._state==="closed"?Ea():ri.then(Ea).catch(Ie)}(Xe,Kt._closedPromise,function(){ht===!1?$n(function(){return Ln(lr)}):ti()}),Pr(Ce)===!0||Ce._state==="closed"){var io=new TypeError("the destination writable stream closed before all data could be piped to it");Qt===!1?$n(function(){return m(Xe,io)},!0,io):ti(!0,io)}Fr().catch(function(Yt){zt=Promise.resolve(),Ie(Yt)})})}},{key:"tee",value:function(){if(h(this)===!1)throw pe("tee");var Ce=y(this);return Ir(Ce)}},{key:"locked",get:function(){if(h(this)===!1)throw pe("locked");return p(this)}}]),ue}();s.exports={CreateReadableByteStream:c,CreateReadableStream:l,ReadableStream:Ni,IsReadableStreamDisturbed:f,ReadableStreamDefaultControllerClose:K,ReadableStreamDefaultControllerEnqueue:he,ReadableStreamDefaultControllerError:Re,ReadableStreamDefaultControllerGetDesiredSize:ae,ReadableStreamDefaultControllerHasBackpressure:Ee,ReadableStreamDefaultControllerCanCloseOrEnqueue:De};var Zi=function(){function ue(ve){if(r(this,ue),h(ve)===!1)throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(p(ve)===!0)throw new TypeError("This stream has already been locked for exclusive reading by another reader");M(this,ve),this._readRequests=[]}return ye(ue,[{key:"cancel",value:function(Ce){return P(this)===!1?Promise.reject(W("cancel")):this._ownerReadableStream===void 0?Promise.reject(we("cancel")):U(this,Ce)}},{key:"read",value:function(){return P(this)===!1?Promise.reject(W("read")):this._ownerReadableStream===void 0?Promise.reject(we("read from")):$(this)}},{key:"releaseLock",value:function(){if(P(this)===!1)throw W("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");j(this)}}},{key:"closed",get:function(){return P(this)===!1?Promise.reject(W("closed")):this._closedPromise}}]),ue}(),mn=function(){function ue(ve){if(r(this,ue),!h(ve))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(fe(ve._readableStreamController)===!1)throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(p(ve))throw new TypeError("This stream has already been locked for exclusive reading by another reader");M(this,ve),this._readIntoRequests=[]}return ye(ue,[{key:"cancel",value:function(Ce){return E(this)?this._ownerReadableStream===void 0?Promise.reject(we("cancel")):U(this,Ce):Promise.reject(lt("cancel"))}},{key:"read",value:function(Ce){return E(this)?this._ownerReadableStream===void 0?Promise.reject(we("read from")):ArrayBuffer.isView(Ce)?nt(Ce.buffer)===!0?Promise.reject(new TypeError("Cannot read into a view onto a detached ArrayBuffer")):Ce.byteLength===0?Promise.reject(new TypeError("view must have non-zero byteLength")):q(this,Ce):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(lt("read"))}},{key:"releaseLock",value:function(){if(!E(this))throw lt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");j(this)}}},{key:"closed",get:function(){return E(this)?this._closedPromise:Promise.reject(lt("closed"))}}]),ue}(),Xr=function(){function ue(){throw r(this,ue),new TypeError}return ye(ue,[{key:"close",value:function(){if(Z(this)===!1)throw ut("close");if(De(this)===!1)throw new TypeError("The stream is not in a state that permits close");K(this)}},{key:"enqueue",value:function(Ce){if(Z(this)===!1)throw ut("enqueue");if(De(this)===!1)throw new TypeError("The stream is not in a state that permits enqueue");return he(this,Ce)}},{key:"error",value:function(Ce){if(Z(this)===!1)throw ut("error");var Xe=this._controlledReadableStream;if(Xe._state!=="readable")throw new TypeError("The stream is "+Xe._state+" and so cannot be errored");Re(this,Ce)}},{key:hi,value:function(Ce){return Tt(this),this._cancelAlgorithm(Ce)}},{key:Mr,value:function(){var Ce=this._controlledReadableStream;if(this._queue.length>0){var Xe=it(this);return this._closeRequested===!0&&this._queue.length===0?v(Ce):X(this),Promise.resolve(Ye(Xe,!1))}var st=g(Ce);return X(this),st}},{key:"desiredSize",get:function(){if(Z(this)===!1)throw ut("desiredSize");return ae(this)}}]),ue}(),ls=function(){function ue(){throw r(this,ue),new TypeError("ReadableStreamBYOBRequest cannot be used directly")}return ye(ue,[{key:"respond",value:function(Ce){if(H(this)===!1)throw oe("respond");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(nt(this._view.buffer)===!0)throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");me(this._associatedReadableByteStreamController,Ce)}},{key:"respondWithNewView",value:function(Ce){if(H(this)===!1)throw oe("respond");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(Ce))throw new TypeError("You can only respond with array buffer views");if(nt(Ce.buffer)===!0)throw new TypeError("The supplied view's buffer has been detached and so cannot be used as a response");Oe(this._associatedReadableByteStreamController,Ce)}},{key:"view",get:function(){if(H(this)===!1)throw oe("view");return this._view}}]),ue}(),Zn=function(){function ue(){throw r(this,ue),new TypeError("ReadableByteStreamController constructor cannot be used directly")}return ye(ue,[{key:"close",value:function(){if(fe(this)===!1)throw C("close");if(this._closeRequested===!0)throw new TypeError("The stream has already been closed; do not close it again!");var Ce=this._controlledReadableByteStream._state;if(Ce!=="readable")throw new TypeError("The stream (in "+Ce+" state) is not in the readable state and cannot be closed");G(this)}},{key:"enqueue",value:function(Ce){if(fe(this)===!1)throw C("enqueue");if(this._closeRequested===!0)throw new TypeError("stream is closed or draining");var Xe=this._controlledReadableByteStream._state;if(Xe!=="readable")throw new TypeError("The stream (in "+Xe+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(Ce))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");if(nt(Ce.buffer)===!0)throw new TypeError("Cannot enqueue a view onto a detached ArrayBuffer");F(this,Ce)}},{key:"error",value:function(Ce){if(fe(this)===!1)throw C("error");var Xe=this._controlledReadableByteStream;if(Xe._state!=="readable")throw new TypeError("The stream is "+Xe._state+" and so cannot be errored");Q(this,Ce)}},{key:hi,value:function(Ce){return this._pendingPullIntos.length>0&&(this._pendingPullIntos[0].bytesFilled=0),Tt(this),this._cancelAlgorithm(Ce)}},{key:Mr,value:function(){var Ce=this._controlledReadableByteStream;if(this._queueTotalSize>0){var Xe=this._queue.shift();this._queueTotalSize-=Xe.byteLength,J(this);var st=void 0;try{st=new Uint8Array(Xe.buffer,Xe.byteOffset,Xe.byteLength)}catch(lr){return Promise.reject(lr)}return Promise.resolve(Ye(st,!1))}var ht=this._autoAllocateChunkSize;if(ht!==void 0){var St=void 0;try{St=new ArrayBuffer(ht)}catch(lr){return Promise.reject(lr)}var Qt={buffer:St,byteOffset:0,byteLength:ht,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(Qt)}var Kt=g(Ce);return N(this),Kt}},{key:"byobRequest",get:function(){if(fe(this)===!1)throw C("byobRequest");if(this._byobRequest===void 0&&this._pendingPullIntos.length>0){var Ce=this._pendingPullIntos[0],Xe=new Uint8Array(Ce.buffer,Ce.byteOffset+Ce.bytesFilled,Ce.byteLength-Ce.bytesFilled),st=Object.create(ls.prototype);Ve(st,this,Xe),this._byobRequest=st}return this._byobRequest}},{key:"desiredSize",get:function(){if(fe(this)===!1)throw C("desiredSize");return te(this)}}]),ue}()},{"./helpers.js":10,"./queue-with-sizes.js":11,"./utils.js":14,"./writable-stream.js":15,"better-assert":16}],13:[function(u,s,n){function r(H,N){if(!(H instanceof N))throw new TypeError("Cannot call a class as a function")}function a(H,N,R){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return 1},B=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,k=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){return 1},V=Object.create(de.prototype),J=void 0;o(V,new Promise(function(Y){J=Y}),T,x,B,k),p(V,Object.create(fe.prototype),N,R);var z=H();return J(z),V}function o(H,N,R,T,x,B){function k(){return N}H._writable=De(k,function(J){return v(H,J)},function(){return w(H)},function(){return _(H)},R,T),H._readable=X(k,function(){return S(H)},function(J){return d(H,J),Promise.resolve()},x,B),H._backpressure=void 0,H._backpressureChangePromise=void 0,H._backpressureChangePromise_resolve=void 0,h(H,!0),H._transformStreamController=void 0}function l(H){return!!j(H)&&!!Object.prototype.hasOwnProperty.call(H,"_transformStreamController")}function c(H,N){O("TransformStreamError()"),H._readable._state==="readable"&&he(H._readable._readableStreamController,N),d(H,N)}function d(H,N){ge(H._writable._writableStreamController,N),H._backpressure===!0&&h(H,!1)}function h(H,N){O("TransformStreamSetBackpressure() [backpressure = "+N+"]"),H._backpressureChangePromise!==void 0&&H._backpressureChangePromise_resolve(),H._backpressureChangePromise=new Promise(function(R){H._backpressureChangePromise_resolve=R}),H._backpressure=N}function f(H){return!!j(H)&&!!Object.prototype.hasOwnProperty.call(H,"_controlledTransformStream")}function p(H,N,R,T){N._controlledTransformStream=H,H._transformStreamController=N,N._transformAlgorithm=R,N._flushAlgorithm=T}function y(H,N){var R=Object.create(fe.prototype),T=function(V){try{return b(R,V),Promise.resolve()}catch(J){return Promise.reject(J)}},x=N.transform;if(x!==void 0){if(typeof x!="function")throw new TypeError("transform is not a method");T=function(V){return U(x,N,[V,R]).catch(function(J){throw c(H,J),J})}}var B=M(N,"flush",0,[R]);p(H,R,T,B)}function b(H,N){O("TransformStreamDefaultControllerEnqueue()");var R=H._controlledTransformStream,T=R._readable._readableStreamController;if(ae(T)===!1)throw new TypeError("Readable side is not in a state that permits enqueue");try{K(T,N)}catch(x){throw d(R,x),R._readable._storedError}ie(T)!==R._backpressure&&h(R,!0)}function g(H,N){c(H._controlledTransformStream,N)}function m(H){O("TransformStreamDefaultControllerTerminate()");var N=H._controlledTransformStream,R=N._readable._readableStreamController;ae(R)===!0&&le(R),d(N,new TypeError("TransformStream terminated"))}function v(H,N){O("TransformStreamDefaultSinkWriteAlgorithm()");var R=H._transformStreamController;return H._backpressure===!0?H._backpressureChangePromise.then(function(){var T=H._writable;if(T._state==="erroring")throw T._storedError;return R._transformAlgorithm(N)}):R._transformAlgorithm(N)}function _(H){return c(H,new TypeError("Writable side aborted")),Promise.resolve()}function w(H){O("TransformStreamDefaultSinkCloseAlgorithm()");var N=H._readable;return H._transformStreamController._flushAlgorithm().then(function(){if(N._state==="errored")throw N._storedError;var R=N._readableStreamController;ae(R)===!0&&le(R)}).catch(function(R){throw c(H,R),N._storedError})}function S(H){return O("TransformStreamDefaultSourcePullAlgorithm()"),h(H,!1),H._backpressureChangePromise}function A(H){return new TypeError("TransformStreamDefaultController.prototype."+H+" can only be used on a TransformStreamDefaultController")}function D(H){return new TypeError("TransformStream.prototype."+H+" can only be used on a TransformStream")}var L=function(){function H(N,R){for(var T=0;T<R.length;T++){var x=R[T];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(N,x.key,x)}}return function(N,R,T){return R&&H(N.prototype,R),T&&H(N,T),N}}();u("better-assert");var O=u("debug")("streams:transform-stream:verbose"),E=u("./helpers.js"),P=E.InvokeOrNoop,M=E.CreateAlgorithmFromUnderlyingMethod,U=E.PromiseCall,j=E.typeIsObject,q=E.ValidateAndNormalizeHighWaterMark;E.IsNonNegativeNumber;var $=E.MakeSizeAlgorithmFromSizeFunction,Z=u("./readable-stream.js"),X=Z.CreateReadableStream,le=Z.ReadableStreamDefaultControllerClose,K=Z.ReadableStreamDefaultControllerEnqueue,he=Z.ReadableStreamDefaultControllerError,Re=Z.ReadableStreamDefaultControllerGetDesiredSize,ie=Z.ReadableStreamDefaultControllerHasBackpressure,ae=Z.ReadableStreamDefaultControllerCanCloseOrEnqueue,Ee=u("./writable-stream.js"),De=Ee.CreateWritableStream,ge=Ee.WritableStreamDefaultControllerErrorIfNeeded,de=function(){function H(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r(this,H),N.readableType!==void 0)throw new RangeError("Invalid readable type specified");if(N.writableType!==void 0)throw new RangeError("Invalid writable type specified");var x=R.size,B=$(x),k=R.highWaterMark;k===void 0&&(k=1),k=q(k);var V=T.size,J=$(V),z=T.highWaterMark;z===void 0&&(z=0),z=q(z);var Y=void 0;o(this,new Promise(function(ce){Y=ce}),k,B,z,J),y(this,N);var re=P(N,"start",[this._transformStreamController]);Y(re)}return L(H,[{key:"readable",get:function(){if(l(this)===!1)throw D("readable");return this._readable}},{key:"writable",get:function(){if(l(this)===!1)throw D("writable");return this._writable}}]),H}(),fe=function(){function H(){throw r(this,H),new TypeError("TransformStreamDefaultController instances cannot be created directly")}return L(H,[{key:"enqueue",value:function(R){if(f(this)===!1)throw A("enqueue");b(this,R)}},{key:"error",value:function(R){if(f(this)===!1)throw A("error");g(this,R)}},{key:"terminate",value:function(){if(f(this)===!1)throw A("terminate");m(this)}},{key:"desiredSize",get:function(){if(f(this)===!1)throw A("desiredSize");var R=this._controlledTransformStream._readable._readableStreamController;return Re(R)}}]),H}();s.exports={CreateTransformStream:a,TransformStream:de}},{"./helpers.js":10,"./readable-stream.js":12,"./writable-stream.js":15,"better-assert":16,debug:18}],14:[function(u,s,n){var r=u("better-assert");n.rethrowAssertionErrorRejection=function(a){a&&a.constructor===r.AssertionError&&setTimeout(function(){throw a},0)}},{"better-assert":16}],15:[function(u,s,n){function r(C,ee){if(!(C instanceof ee))throw new TypeError("Cannot call a class as a function")}function a(C){return new ut(C)}function o(C,ee,ye,Pe){var Ue=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,Fe=arguments.length>5&&arguments[5]!==void 0?arguments[5]:function(){return 1},Ye=Object.create(lt.prototype);return l(Ye),K(Ye,Object.create(oe.prototype),C,ee,ye,Pe,Ue,Fe),Ye}function l(C){C._state="writable",C._storedError=void 0,C._writer=void 0,C._writableStreamController=void 0,C._writeRequests=[],C._inFlightWriteRequest=void 0,C._closeRequest=void 0,C._inFlightCloseRequest=void 0,C._pendingAbortRequest=void 0,C._backpressure=!1}function c(C){return!!Ve(C)&&!!Object.prototype.hasOwnProperty.call(C,"_writableStreamController")}function d(C){return C._writer!==void 0}function h(C,ee){var ye=C._state;if(ye==="closed")return Promise.resolve(void 0);if(ye==="errored")return Promise.reject(C._storedError);var Pe=new TypeError("Requested to abort");if(C._pendingAbortRequest!==void 0)return Promise.reject(Pe);var Ue=!1;ye==="erroring"&&(Ue=!0,ee=void 0);var Fe=new Promise(function(Ye,$e){C._pendingAbortRequest={_resolve:Ye,_reject:$e,_reason:ee,_wasAlreadyErroring:Ue}});return Ue===!1&&y(C,Pe),Fe}function f(C){return new Promise(function(ee,ye){var Pe={_resolve:ee,_reject:ye};C._writeRequests.push(Pe)})}function p(C,ee){Q("WritableStreamDealWithRejection(stream, %o)",ee),C._state!=="writable"?b(C):y(C,ee)}function y(C,ee){Q("WritableStreamStartErroring(stream, %o)",ee);var ye=C._writableStreamController;C._state="erroring",C._storedError=ee;var Pe=C._writer;Pe!==void 0&&q(Pe,ee),S(C)===!1&&ye._started===!0&&b(C)}function b(C){Q("WritableStreamFinishErroring()"),C._state="errored",C._writableStreamController[tt]();var ee=C._storedError,ye=!0,Pe=!1,Ue=void 0;try{for(var Fe,Ye=C._writeRequests[Symbol.iterator]();!(ye=(Fe=Ye.next()).done);ye=!0)Fe.value._reject(ee)}catch(Je){Pe=!0,Ue=Je}finally{try{!ye&&Ye.return&&Ye.return()}finally{if(Pe)throw Ue}}if(C._writeRequests=[],C._pendingAbortRequest!==void 0){var $e=C._pendingAbortRequest;if(C._pendingAbortRequest=void 0,$e._wasAlreadyErroring===!0)return $e._reject(ee),void L(C);C._writableStreamController[Ge]($e._reason).then(function(){$e._resolve(),L(C)},function(Je){$e._reject(Je),L(C)})}else L(C)}function g(C){C._inFlightWriteRequest._resolve(void 0),C._inFlightWriteRequest=void 0}function m(C,ee){C._inFlightWriteRequest._reject(ee),C._inFlightWriteRequest=void 0,p(C,ee)}function v(C){C._inFlightCloseRequest._resolve(void 0),C._inFlightCloseRequest=void 0,C._state==="erroring"&&(C._storedError=void 0,C._pendingAbortRequest!==void 0&&(C._pendingAbortRequest._resolve(),C._pendingAbortRequest=void 0)),C._state="closed";var ee=C._writer;ee!==void 0&&Y(ee)}function _(C,ee){C._inFlightCloseRequest._reject(ee),C._inFlightCloseRequest=void 0,C._pendingAbortRequest!==void 0&&(C._pendingAbortRequest._reject(ee),C._pendingAbortRequest=void 0),p(C,ee)}function w(C){return C._closeRequest!==void 0||C._inFlightCloseRequest!==void 0}function S(C){return C._inFlightWriteRequest===void 0&&C._inFlightCloseRequest===void 0?(Q("WritableStreamHasOperationMarkedInFlight() is false"),!1):(Q("WritableStreamHasOperationMarkedInFlight() is true"),!0)}function A(C){C._inFlightCloseRequest=C._closeRequest,C._closeRequest=void 0}function D(C){C._inFlightWriteRequest=C._writeRequests.shift()}function L(C){Q("WritableStreamRejectCloseAndClosedPromiseIfNeeded()"),C._closeRequest!==void 0&&(C._closeRequest._reject(C._storedError),C._closeRequest=void 0);var ee=C._writer;ee!==void 0&&(J(ee,C._storedError),ee._closedPromise.catch(function(){}))}function O(C,ee){var ye=C._writer;ye!==void 0&&ee!==C._backpressure&&(ee===!0?Le(ye):G(ye)),C._backpressure=ee}function E(C){return!!Ve(C)&&!!Object.prototype.hasOwnProperty.call(C,"_ownerWritableStream")}function P(C,ee){return h(C._ownerWritableStream,ee)}function M(C){var ee=C._ownerWritableStream,ye=ee._state;if(ye==="closed"||ye==="errored")return Promise.reject(new TypeError("The stream (in "+ye+" state) is not in the writable state and cannot be closed"));var Pe=new Promise(function(Ue,Fe){var Ye={_resolve:Ue,_reject:Fe};ee._closeRequest=Ye});return ee._backpressure===!0&&ye==="writable"&&G(C),Re(ee._writableStreamController),Pe}function U(C){var ee=C._ownerWritableStream,ye=ee._state;return w(ee)===!0||ye==="closed"?Promise.resolve():ye==="errored"?Promise.reject(ee._storedError):M(C)}function j(C,ee){C._closedPromiseState==="pending"?J(C,ee):z(C,ee),C._closedPromise.catch(function(){})}function q(C,ee){Q("WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, %o)",ee),C._readyPromiseState==="pending"?xe(C,ee):qe(C,ee),C._readyPromise.catch(function(){})}function $(C){var ee=C._ownerWritableStream,ye=ee._state;return ye==="errored"||ye==="erroring"?null:ye==="closed"?0:ae(ee._writableStreamController)}function Z(C){var ee=C._ownerWritableStream,ye=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");q(C,ye),j(C,ye),ee._writer=void 0,C._ownerWritableStream=void 0}function X(C,ee){var ye=C._ownerWritableStream,Pe=ye._writableStreamController,Ue=ie(Pe,ee);if(ye!==C._ownerWritableStream)return Promise.reject(x("write to"));var Fe=ye._state;if(Fe==="errored")return Promise.reject(ye._storedError);if(w(ye)===!0||Fe==="closed")return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if(Fe==="erroring")return Promise.reject(ye._storedError);var Ye=f(ye);return Ee(Pe,ee,Ue),Ye}function le(C){return!!Ve(C)&&!!Object.prototype.hasOwnProperty.call(C,"_controlledWritableStream")}function K(C,ee,ye,Pe,Ue,Fe,Ye,$e){ee._controlledWritableStream=C,C._writableStreamController=ee,ee._queue=void 0,ee._queueTotalSize=void 0,He(ee),ee._started=!1,ee._strategySizeAlgorithm=$e,ee._strategyHWM=Ye,ee._writeAlgorithm=Pe,ee._closeAlgorithm=Ue,ee._abortAlgorithm=Fe;var Je=H(ee);O(C,Je);var nt=ye();Promise.resolve(nt).then(function(){ee._started=!0,De(ee)},function(yt){ee._started=!0,p(C,yt)}).catch(we)}function he(C,ee,ye,Pe){var Ue=Object.create(oe.prototype),Fe=me(ee,"write",1,[Ue]),Ye=me(ee,"close",0,[]),$e=me(ee,"abort",1,[]);K(C,Ue,function(){return Oe(ee,"start",[Ue])},Fe,Ye,$e,ye,Pe)}function Re(C){Ae(C,"close",0),De(C)}function ie(C,ee){try{return C._strategySizeAlgorithm(ee)}catch(ye){return ge(C,ye),1}}function ae(C){return C._strategyHWM-C._queueTotalSize}function Ee(C,ee,ye){var Pe={chunk:ee};try{Ae(C,Pe,ye)}catch(Fe){return void ge(C,Fe)}var Ue=C._controlledWritableStream;w(Ue)===!1&&Ue._state==="writable"&&O(Ue,H(C)),De(C)}function De(C){Q("WritableStreamDefaultControllerAdvanceQueueIfNeeded()");var ee=C._controlledWritableStream;if(C._started!==!1&&ee._inFlightWriteRequest===void 0){var ye=ee._state;if(ye!=="closed"&&ye!=="errored")if(ye!=="erroring"){if(C._queue.length!==0){var Pe=je(C);Pe==="close"?de(C):fe(C,Pe.chunk)}}else b(ee)}}function ge(C,ee){C._controlledWritableStream._state==="writable"&&N(C,ee)}function de(C){var ee=C._controlledWritableStream;A(ee),Se(C),C._closeAlgorithm().then(function(){v(ee)},function(ye){_(ee,ye)}).catch(we)}function fe(C,ee){var ye=C._controlledWritableStream;D(ye),C._writeAlgorithm(ee).then(function(){g(ye);var Pe=ye._state;if(Se(C),w(ye)===!1&&Pe==="writable"){var Ue=H(C);O(ye,Ue)}De(C)},function(Pe){m(ye,Pe)}).catch(we)}function H(C){return ae(C)<=0}function N(C,ee){y(C._controlledWritableStream,ee)}function R(C){return new TypeError("WritableStream.prototype."+C+" can only be used on a WritableStream")}function T(C){return new TypeError("WritableStreamDefaultWriter.prototype."+C+" can only be used on a WritableStreamDefaultWriter")}function x(C){return new TypeError("Cannot "+C+" a stream using a released writer")}function B(C){C._closedPromise=new Promise(function(ee,ye){C._closedPromise_resolve=ee,C._closedPromise_reject=ye,C._closedPromiseState="pending"})}function k(C,ee){C._closedPromise=Promise.reject(ee),C._closedPromise_resolve=void 0,C._closedPromise_reject=void 0,C._closedPromiseState="rejected"}function V(C){C._closedPromise=Promise.resolve(void 0),C._closedPromise_resolve=void 0,C._closedPromise_reject=void 0,C._closedPromiseState="resolved"}function J(C,ee){C._closedPromise_reject(ee),C._closedPromise_resolve=void 0,C._closedPromise_reject=void 0,C._closedPromiseState="rejected"}function z(C,ee){C._closedPromise=Promise.reject(ee),C._closedPromiseState="rejected"}function Y(C){C._closedPromise_resolve(void 0),C._closedPromise_resolve=void 0,C._closedPromise_reject=void 0,C._closedPromiseState="resolved"}function re(C){Q("defaultWriterReadyPromiseInitialize()"),C._readyPromise=new Promise(function(ee,ye){C._readyPromise_resolve=ee,C._readyPromise_reject=ye}),C._readyPromiseState="pending"}function ce(C,ee){Q("defaultWriterReadyPromiseInitializeAsRejected(writer, %o)",ee),C._readyPromise=Promise.reject(ee),C._readyPromise_resolve=void 0,C._readyPromise_reject=void 0,C._readyPromiseState="rejected"}function Te(C){Q("defaultWriterReadyPromiseInitializeAsResolved()"),C._readyPromise=Promise.resolve(void 0),C._readyPromise_resolve=void 0,C._readyPromise_reject=void 0,C._readyPromiseState="fulfilled"}function xe(C,ee){Q("defaultWriterReadyPromiseReject(writer, %o)",ee),C._readyPromise_reject(ee),C._readyPromise_resolve=void 0,C._readyPromise_reject=void 0,C._readyPromiseState="rejected"}function Le(C){Q("defaultWriterReadyPromiseReset()"),C._readyPromise=new Promise(function(ee,ye){C._readyPromise_resolve=ee,C._readyPromise_reject=ye}),C._readyPromiseState="pending"}function qe(C,ee){Q("defaultWriterReadyPromiseResetToRejected(writer, %o)",ee),C._readyPromise=Promise.reject(ee),C._readyPromiseState="rejected"}function G(C){Q("defaultWriterReadyPromiseResolve()"),C._readyPromise_resolve(void 0),C._readyPromise_resolve=void 0,C._readyPromise_reject=void 0,C._readyPromiseState="fulfilled"}var F=function(){function C(ee,ye){for(var Pe=0;Pe<ye.length;Pe++){var Ue=ye[Pe];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(ee,Ue.key,Ue)}}return function(ee,ye,Pe){return ye&&C(ee.prototype,ye),Pe&&C(ee,Pe),ee}}();u("better-assert");var Q=u("debug")("streams:writable-stream:verbose"),te=u("./helpers.js"),me=te.CreateAlgorithmFromUnderlyingMethod,Oe=te.InvokeOrNoop,Ne=te.ValidateAndNormalizeHighWaterMark;te.IsNonNegativeNumber;var We=te.MakeSizeAlgorithmFromSizeFunction,Ve=te.typeIsObject,pe=u("./utils.js"),we=pe.rethrowAssertionErrorRejection,W=u("./queue-with-sizes.js"),Se=W.DequeueValue,Ae=W.EnqueueValueWithSize,je=W.PeekQueueValue,He=W.ResetQueue,Ge=Symbol("[[AbortSteps]]"),tt=Symbol("[[ErrorSteps]]"),lt=function(){function C(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pe=ye.size,Ue=ye.highWaterMark,Fe=Ue===void 0?1:Ue;if(r(this,C),l(this),ee.type!==void 0)throw new RangeError("Invalid type is specified");var Ye=We(Pe);he(this,ee,Fe=Ne(Fe),Ye)}return F(C,[{key:"abort",value:function(ye){return c(this)===!1?Promise.reject(R("abort")):d(this)===!0?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):h(this,ye)}},{key:"getWriter",value:function(){if(c(this)===!1)throw R("getWriter");return a(this)}},{key:"locked",get:function(){if(c(this)===!1)throw R("locked");return d(this)}}]),C}();s.exports={AcquireWritableStreamDefaultWriter:a,CreateWritableStream:o,IsWritableStream:c,IsWritableStreamLocked:d,WritableStream:lt,WritableStreamAbort:h,WritableStreamDefaultControllerErrorIfNeeded:ge,WritableStreamDefaultWriterCloseWithErrorPropagation:U,WritableStreamDefaultWriterRelease:Z,WritableStreamDefaultWriterWrite:X,WritableStreamCloseQueuedOrInFlight:w};var ut=function(){function C(ee){if(r(this,C),c(ee)===!1)throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(d(ee)===!0)throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=ee,ee._writer=this;var ye=ee._state;if(ye==="writable")w(ee)===!1&&ee._backpressure===!0?re(this):Te(this),B(this);else if(ye==="erroring")ce(this,ee._storedError),this._readyPromise.catch(function(){}),B(this);else if(ye==="closed")Te(this),V(this);else{var Pe=ee._storedError;ce(this,Pe),this._readyPromise.catch(function(){}),k(this,Pe),this._closedPromise.catch(function(){})}}return F(C,[{key:"abort",value:function(ye){return E(this)===!1?Promise.reject(T("abort")):this._ownerWritableStream===void 0?Promise.reject(x("abort")):P(this,ye)}},{key:"close",value:function(){if(E(this)===!1)return Promise.reject(T("close"));var ye=this._ownerWritableStream;return ye===void 0?Promise.reject(x("close")):w(ye)===!0?Promise.reject(new TypeError("cannot close an already-closing stream")):M(this)}},{key:"releaseLock",value:function(){if(E(this)===!1)throw T("releaseLock");this._ownerWritableStream!==void 0&&Z(this)}},{key:"write",value:function(ye){return E(this)===!1?Promise.reject(T("write")):this._ownerWritableStream===void 0?Promise.reject(x("write to")):X(this,ye)}},{key:"closed",get:function(){return E(this)===!1?Promise.reject(T("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(E(this)===!1)throw T("desiredSize");if(this._ownerWritableStream===void 0)throw x("desiredSize");return $(this)}},{key:"ready",get:function(){return E(this)===!1?Promise.reject(T("ready")):this._readyPromise}}]),C}(),oe=function(){function C(){throw r(this,C),new TypeError("WritableStreamDefaultController cannot be constructed explicitly")}return F(C,[{key:"error",value:function(ye){if(le(this)===!1)throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");this._controlledWritableStream._state==="writable"&&N(this,ye)}},{key:Ge,value:function(ye){return this._abortAlgorithm(ye)}},{key:tt,value:function(){He(this)}}]),C}()},{"./helpers.js":10,"./queue-with-sizes.js":11,"./utils.js":14,"better-assert":16,debug:18}],16:[function(u,s,n){(function(r){function a(d){if(!d){var h=l(),f=h[1],p=f.getFileName(),y=f.getLineNumber(),b=(b=c.readFileSync(p,"utf8")).split(`
`)[y-1].match(/assert\((.*)\)/)[1];throw new o({message:b,stackStartFunction:h[0].getFunction()})}}var o=u("assert").AssertionError,l=u("callsite"),c=u("fs");s.exports={}.NO_ASSERT?function(){}:a}).call(this,u("_process"))},{_process:4,assert:2,callsite:17,fs:3}],17:[function(u,s,n){s.exports=function(){var r=Error.prepareStackTrace;Error.prepareStackTrace=function(l,c){return c};var a=new Error;Error.captureStackTrace(a,arguments.callee);var o=a.stack;return Error.prepareStackTrace=r,o}},{}],18:[function(u,s,n){(function(r){function a(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(f){var p=this.useColors;if(f[0]=(p?"%c":"")+this.namespace+(p?" %c":" ")+f[0]+(p?"%c ":" ")+"+"+n.humanize(this.diff),p){var y="color: "+this.color;f.splice(1,0,y,"color: inherit");var b=0,g=0;f[0].replace(/%[a-zA-Z%]/g,function(m){m!=="%%"&&(b++,m==="%c"&&(g=b))}),f.splice(g,0,y)}}function l(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(f){try{f==null?n.storage.removeItem("debug"):n.storage.debug=f}catch{}}function d(){var f;try{f=n.storage.debug}catch{}return!f&&typeof r<"u"&&"env"in r&&(f={}.DEBUG),f}function h(){try{return window.localStorage}catch{}}n=s.exports=u("./debug"),n.log=l,n.formatArgs=o,n.save=c,n.load=d,n.useColors=a,n.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:h(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.formatters.j=function(f){try{return JSON.stringify(f)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}},n.enable(d())}).call(this,u("_process"))},{"./debug":19,_process:4}],19:[function(u,s,n){function r(f){var p,y=0;for(p in f)y=(y<<5)-y+f.charCodeAt(p),y|=0;return n.colors[Math.abs(y)%n.colors.length]}function a(f){function p(){if(p.enabled){var b=p,g=+new Date,m=g-(y||g);b.diff=m,b.prev=y,b.curr=g,y=g;for(var v=new Array(arguments.length),_=0;_<v.length;_++)v[_]=arguments[_];v[0]=n.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");var w=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,function(S,A){if(S==="%%")return S;w++;var D=n.formatters[A];if(typeof D=="function"){var L=v[w];S=D.call(b,L),v.splice(w,1),w--}return S}),n.formatArgs.call(b,v),(p.log||n.log||console.log.bind(console)).apply(b,v)}}var y;return p.namespace=f,p.enabled=n.enabled(f),p.useColors=n.useColors(),p.color=r(f),p.destroy=o,typeof n.init=="function"&&n.init(p),n.instances.push(p),p}function o(){var f=n.instances.indexOf(this);return f!==-1&&(n.instances.splice(f,1),!0)}function l(f){n.save(f),n.names=[],n.skips=[];var p,y=(typeof f=="string"?f:"").split(/[\s,]+/),b=y.length;for(p=0;p<b;p++)y[p]&&((f=y[p].replace(/\*/g,".*?"))[0]==="-"?n.skips.push(new RegExp("^"+f.substr(1)+"$")):n.names.push(new RegExp("^"+f+"$")));for(p=0;p<n.instances.length;p++){var g=n.instances[p];g.enabled=n.enabled(g.namespace)}}function c(){n.enable("")}function d(f){if(f[f.length-1]==="*")return!0;var p,y;for(p=0,y=n.skips.length;p<y;p++)if(n.skips[p].test(f))return!1;for(p=0,y=n.names.length;p<y;p++)if(n.names[p].test(f))return!0;return!1}function h(f){return f instanceof Error?f.stack||f.message:f}n=s.exports=a.debug=a.default=a,n.coerce=h,n.disable=c,n.enable=l,n.enabled=d,n.humanize=u("ms"),n.instances=[],n.names=[],n.skips=[],n.formatters={}},{ms:20}],20:[function(u,s,n){function r(y){if(!((y=String(y)).length>100)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(y);if(b){var g=parseFloat(b[1]);switch((b[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return g*p;case"days":case"day":case"d":return g*f;case"hours":case"hour":case"hrs":case"hr":case"h":return g*h;case"minutes":case"minute":case"mins":case"min":case"m":return g*d;case"seconds":case"second":case"secs":case"sec":case"s":return g*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function a(y){return y>=f?Math.round(y/f)+"d":y>=h?Math.round(y/h)+"h":y>=d?Math.round(y/d)+"m":y>=c?Math.round(y/c)+"s":y+"ms"}function o(y){return l(y,f,"day")||l(y,h,"hour")||l(y,d,"minute")||l(y,c,"second")||y+" ms"}function l(y,b,g){if(!(y<b))return y<1.5*b?Math.floor(y/b)+" "+g:Math.ceil(y/b)+" "+g+"s"}var c=1e3,d=60*c,h=60*d,f=24*h,p=365.25*f;s.exports=function(y,b){b=b||{};var g=typeof y;if(g==="string"&&y.length>0)return r(y);if(g==="number"&&isNaN(y)===!1)return b.long?o(y):a(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))}},{}]},{},[1])(1)})}(Pw)),Pw.exports}var Dw,r6;function R7(){if(r6)return Dw;r6=1;const t=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";return t.writable=e=>t(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object",t.readable=e=>t(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object",t.duplex=e=>t.writable(e)&&t.readable(e),t.transform=e=>t.duplex(e)&&typeof e._transform=="function",Dw=t,Dw}var Nw={exports:{}},n6;function yK(){return n6||(n6=1,function(t){t.exports=e,t.exports.WEBSTREAM_SUPPORT=typeof ReadableStream<"u";function e(u){if(!t.exports.WEBSTREAM_SUPPORT)throw new Error("No web ReadableStream support");var s=!1,n={};function r(l){n.data=d,n.end=d,n.end=h,n.close=h,n.error=h;for(var c in n)u.on(c,n[c]);u.pause();function d(f){s||(l.enqueue(f),u.pause())}function h(f){if(!s){s=!0;for(var p in n)u.removeListener(p,n[p]);f?l.error(f):l.close()}}}function a(){s||u.resume()}function o(){s=!0;for(var l in n)u.removeListener(l,n[l]);u.push(null),u.pause(),u.destroy?u.destroy():u.close&&u.close()}return new ReadableStream({start:r,pull:a,cancel:o})}}(Nw)),Nw.exports}var i6;function x7(){if(i6)return Od;i6=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.ActorHttp=void 0;const t=ot,e=hK();globalThis.ReadableStream||(globalThis.ReadableStream=pK().ReadableStream);const u=R7(),s=yK();let n=class extends t.Actor{constructor(a){super(a)}static toNodeReadable(a){return u(a)||a===null?a:(0,e.readableFromWeb)(a)}static toWebReadableStream(a){return s(a)}static headersToHash(a){const o={};return a.forEach((l,c)=>{o[c]=l}),o}};return Od.ActorHttp=n,Od}var Rd={},a6;function bK(){if(a6)return Rd;a6=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.validateAndCloseHttpResponse=void 0;const t=ou(),e=x7();async function u(s,n){var r;if(n.status>=400){let a="empty response";if(n.body){const o=e.ActorHttp.toNodeReadable(n.body);a=await(0,t.stringify)(o)}throw new Error(`Could not update ${s} (HTTP status ${n.status}):
${a}`)}await((r=n.body)==null?void 0:r.cancel())}return Rd.validateAndCloseHttpResponse=u,Rd}var s6;function as(){return s6||(s6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(x7(),t),u(bK(),t)}(xw)),xw}var o6={},u6;function I7(){return u6||(u6=1,function(t){(function(e){var u=typeof globalThis<"u"&&globalThis||typeof t<"u"&&t||typeof u<"u"&&u,s={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function n(E){return E&&DataView.prototype.isPrototypeOf(E)}if(s.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(E){return E&&r.indexOf(Object.prototype.toString.call(E))>-1};function o(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(E)||E==="")throw new TypeError('Invalid character in header field name: "'+E+'"');return E.toLowerCase()}function l(E){return typeof E!="string"&&(E=String(E)),E}function c(E){var P={next:function(){var M=E.shift();return{done:M===void 0,value:M}}};return s.iterable&&(P[Symbol.iterator]=function(){return P}),P}function d(E){this.map={},E instanceof d?E.forEach(function(P,M){this.append(M,P)},this):Array.isArray(E)?E.forEach(function(P){this.append(P[0],P[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(P){this.append(P,E[P])},this)}d.prototype.append=function(E,P){E=o(E),P=l(P);var M=this.map[E];this.map[E]=M?M+", "+P:P},d.prototype.delete=function(E){delete this.map[o(E)]},d.prototype.get=function(E){return E=o(E),this.has(E)?this.map[E]:null},d.prototype.has=function(E){return this.map.hasOwnProperty(o(E))},d.prototype.set=function(E,P){this.map[o(E)]=l(P)},d.prototype.forEach=function(E,P){for(var M in this.map)this.map.hasOwnProperty(M)&&E.call(P,this.map[M],M,this)},d.prototype.keys=function(){var E=[];return this.forEach(function(P,M){E.push(M)}),c(E)},d.prototype.values=function(){var E=[];return this.forEach(function(P){E.push(P)}),c(E)},d.prototype.entries=function(){var E=[];return this.forEach(function(P,M){E.push([M,P])}),c(E)},s.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function h(E){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}function f(E){return new Promise(function(P,M){E.onload=function(){P(E.result)},E.onerror=function(){M(E.error)}})}function p(E){var P=new FileReader,M=f(P);return P.readAsArrayBuffer(E),M}function y(E){var P=new FileReader,M=f(P);return P.readAsText(E),M}function b(E){for(var P=new Uint8Array(E),M=new Array(P.length),U=0;U<P.length;U++)M[U]=String.fromCharCode(P[U]);return M.join("")}function g(E){if(E.slice)return E.slice(0);var P=new Uint8Array(E.byteLength);return P.set(new Uint8Array(E)),P.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(E){this.bodyUsed=this.bodyUsed,this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:s.blob&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:s.formData&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():s.arrayBuffer&&s.blob&&n(E)?(this._bodyArrayBuffer=g(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(E)||a(E))?this._bodyArrayBuffer=g(E):this._bodyText=E=Object.prototype.toString.call(E):this._bodyText="",this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var E=h(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var E=h(this);return E||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(p)}),this.text=function(){var E=h(this);if(E)return E;if(this._bodyBlob)return y(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(b(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(E){var P=E.toUpperCase();return v.indexOf(P)>-1?P:E}function w(E,P){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P=P||{};var M=P.body;if(E instanceof w){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,P.headers||(this.headers=new d(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,!M&&E._bodyInit!=null&&(M=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=P.credentials||this.credentials||"same-origin",(P.headers||!this.headers)&&(this.headers=new d(P.headers)),this.method=_(P.method||this.method||"GET"),this.mode=P.mode||this.mode||null,this.signal=P.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(P.cache==="no-store"||P.cache==="no-cache")){var U=/([?&])_=[^&]*/;if(U.test(this.url))this.url=this.url.replace(U,"$1_="+new Date().getTime());else{var j=/\?/;this.url+=(j.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function S(E){var P=new FormData;return E.trim().split("&").forEach(function(M){if(M){var U=M.split("="),j=U.shift().replace(/\+/g," "),q=U.join("=").replace(/\+/g," ");P.append(decodeURIComponent(j),decodeURIComponent(q))}}),P}function A(E){var P=new d,M=E.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(U){return U.indexOf(`
`)===0?U.substr(1,U.length):U}).forEach(function(U){var j=U.split(":"),q=j.shift().trim();if(q){var $=j.join(":").trim();P.append(q,$)}}),P}m.call(w.prototype);function D(E,P){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P||(P={}),this.type="default",this.status=P.status===void 0?200:P.status,this.ok=this.status>=200&&this.status<300,this.statusText=P.statusText===void 0?"":""+P.statusText,this.headers=new d(P.headers),this.url=P.url||"",this._initBody(E)}m.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},D.error=function(){var E=new D(null,{status:0,statusText:""});return E.type="error",E};var L=[301,302,303,307,308];D.redirect=function(E,P){if(L.indexOf(P)===-1)throw new RangeError("Invalid status code");return new D(null,{status:P,headers:{location:E}})},e.DOMException=u.DOMException;try{new e.DOMException}catch{e.DOMException=function(P,M){this.message=P,this.name=M;var U=Error(P);this.stack=U.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function O(E,P){return new Promise(function(M,U){var j=new w(E,P);if(j.signal&&j.signal.aborted)return U(new e.DOMException("Aborted","AbortError"));var q=new XMLHttpRequest;function $(){q.abort()}q.onload=function(){var X={status:q.status,statusText:q.statusText,headers:A(q.getAllResponseHeaders()||"")};X.url="responseURL"in q?q.responseURL:X.headers.get("X-Request-URL");var le="response"in q?q.response:q.responseText;setTimeout(function(){M(new D(le,X))},0)},q.onerror=function(){setTimeout(function(){U(new TypeError("Network request failed"))},0)},q.ontimeout=function(){setTimeout(function(){U(new TypeError("Network request failed"))},0)},q.onabort=function(){setTimeout(function(){U(new e.DOMException("Aborted","AbortError"))},0)};function Z(X){try{return X===""&&u.location.href?u.location.href:X}catch{return X}}q.open(j.method,Z(j.url),!0),j.credentials==="include"?q.withCredentials=!0:j.credentials==="omit"&&(q.withCredentials=!1),"responseType"in q&&(s.blob?q.responseType="blob":s.arrayBuffer&&j.headers.get("Content-Type")&&j.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(q.responseType="arraybuffer")),P&&typeof P.headers=="object"&&!(P.headers instanceof d)?Object.getOwnPropertyNames(P.headers).forEach(function(X){q.setRequestHeader(X,l(P.headers[X]))}):j.headers.forEach(function(X,le){q.setRequestHeader(le,X)}),j.signal&&(j.signal.addEventListener("abort",$),q.onreadystatechange=function(){q.readyState===4&&j.signal.removeEventListener("abort",$)}),q.send(typeof j._bodyInit>"u"?null:j._bodyInit)})}return O.polyfill=!0,u.fetch||(u.fetch=O,u.Headers=d,u.Request=w,u.Response=D),e.Headers=d,e.Request=w,e.Response=D,e.fetch=O,e})({})}(typeof self<"u"?self:I)),o6}var xd={},c6;function mK(){if(c6)return xd;c6=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.FetchInitPreprocessor=void 0;const t=as();class e{async handle(s){if(s.headers){const n=new Headers(s.headers);n.has("user-agent")&&n.delete("user-agent"),s.headers=n}if(s!=null&&s.headers&&"append"in s.headers&&(s.headers=t.ActorHttp.headersToHash(s.headers)),s.body&&typeof s.body!="string"&&"getReader"in s.body){const n=s.body.getReader(),r=[];for(;;){const{done:a,value:o}=await n.read();if(a)break;r.push(o)}s.body=r.join("")}return{keepalive:!s.body,...s}}async createAbortController(){return new AbortController}}return xd.FetchInitPreprocessor=e,xd}var l6;function gK(){if(l6)return Ed;l6=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.ActorHttpFetch=void 0;const t=as(),e=Lt;I7();const u=mK();let s=class S3 extends t.ActorHttp{constructor(r){super(r),this.userAgent=S3.createUserAgent(),this.fetchInitPreprocessor=new u.FetchInitPreprocessor(r.agentOptions)}static createUserAgent(){return`Comunica/actor-http-fetch (${typeof globalThis.navigator>"u"?`Node.js ${process.version}; ${process.platform}`:`Browser-${globalThis.navigator.userAgent}`})`}async test(r){return{time:Number.POSITIVE_INFINITY}}static async getResponse(r,a,o,l,c,d){var p;let h,f=l+1;for(;f-- >0;)try{const y=await r(a,o);if(d&&y.status>=500&&y.status<600)throw new Error(`Server replied with response code ${y.status}: ${y.statusText}`);return y}catch(y){if(h=y,(p=o.signal)!=null&&p.aborted)throw y;f>0&&await new Promise((b,g)=>{var m;setTimeout(b,c),(m=o.signal)==null||m.addEventListener("abort",()=>{g(new Error("Fetch aborted by timeout."))})})}throw l>0?new Error(`Number of fetch retries (${l}) exceeded. Last error: ${String(h)}`):h}async run(r){var f,p,y,b,g,m,v,_;const a=((f=r.init)==null?void 0:f.headers)??{};r.init=r.init??{},r.init.headers=new Headers(a),r.init.headers.has("user-agent")||r.init.headers.append("user-agent",this.userAgent);const o=r.context.get(e.KeysHttp.auth);o&&r.init.headers.append("Authorization",`Basic ${Buffer.from(o).toString("base64")}`),this.logInfo(r.context,`Requesting ${typeof r.input=="string"?r.input:r.input.url}`,()=>({headers:t.ActorHttp.headersToHash(new Headers(r.init.headers)),method:r.init.method??"GET"})),(p=r.init)!=null&&p.headers&&"append"in r.init.headers&&r.context.has(e.KeysHttp.fetch)&&(r.init.headers=t.ActorHttp.headersToHash(r.init.headers));let l={...r.init};r.context.get(e.KeysHttp.includeCredentials)&&(l.credentials="include");const c=(y=r.context)==null?void 0:y.get(e.KeysHttp.httpTimeout);let d,h;if(c!==void 0){const w=await this.fetchInitPreprocessor.createAbortController();l.signal=w.signal,h=()=>w.abort(),d=setTimeout(()=>h(),c)}try{l=await this.fetchInitPreprocessor.handle(l);const w=((b=r.context)==null?void 0:b.get(e.KeysHttp.httpRetryCount))??0,S=((g=r.context)==null?void 0:g.get(e.KeysHttp.httpRetryDelay))??0,A=((m=r.context)==null?void 0:m.get(e.KeysHttp.httpRetryOnServerError))??!1,D=(v=r.context)==null?void 0:v.get(e.KeysHttp.fetch),L=await S3.getResponse(D??fetch,r.input,l,w,S,A);return d!==void 0&&((((_=r.context)==null?void 0:_.get(e.KeysHttp.httpBodyTimeout))||!1)&&L.body?(h=()=>{var E;return(E=L.body)==null?void 0:E.cancel(new Error(`HTTP timeout when reading the body of ${L.url}.
This error can be disabled by modifying the 'httpBodyTimeout' and/or 'httpTimeout' options.`))},L.body.on("close",()=>{clearTimeout(d)})):clearTimeout(d)),L.body&&!L.body.cancel&&(L.body.cancel=async O=>{L.body.destroy(O),d!==void 0&&clearTimeout(d)}),L}catch(w){throw d!==void 0&&clearTimeout(d),w}}};return Ed.ActorHttpFetch=s,Ed}var d6;function _K(){return d6||(d6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(gK(),t)}(Rw)),Rw}var Cw={},Id={},f6;function vK(){if(f6)return Id;f6=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.ActorQueryOperationSource=void 0;const t=wt(),e=Lt,u=Cn(),s=Ot();let n=class extends t.ActorQueryOperation{constructor(a){super(a)}async test(a){if(!t.ActorQueryOperation.getOperationSource(a.operation))throw new Error(`Actor ${this.name} requires an operation with source annotation.`);return{httpRequests:1}}async run(a){const o=a.context.get(e.KeysInitQuery.physicalQueryPlanLogger);o&&(o.logOperation(a.operation.type,void 0,a.operation,a.context.get(e.KeysInitQuery.physicalQueryPlanNode),this.name,{}),a.context=a.context.set(e.KeysInitQuery.physicalQueryPlanNode,a.operation));const l=t.ActorQueryOperation.getOperationSource(a.operation),c=l.context?a.context.merge(l.context):a.context;let d=!1;if(s.Util.recurseOperation(a.operation,{construct(){return d=!0,!1}}),d){const p=l.source.queryQuads(a.operation,c),y=(0,u.getMetadataQuads)(p);return{type:"quads",quadStream:p,metadata:y}}switch(a.operation.type){case s.Algebra.types.ASK:return{type:"boolean",execute:()=>l.source.queryBoolean(a.operation,c)};case s.Algebra.types.COMPOSITE_UPDATE:case s.Algebra.types.DELETE_INSERT:case s.Algebra.types.LOAD:case s.Algebra.types.CLEAR:case s.Algebra.types.CREATE:case s.Algebra.types.DROP:case s.Algebra.types.ADD:case s.Algebra.types.MOVE:case s.Algebra.types.COPY:return{type:"void",execute:()=>l.source.queryVoid(a.operation,c)}}const h=l.source.queryBindings(a.operation,c),f=(0,u.getMetadataBindings)(h);return{type:"bindings",bindingsStream:h,metadata:f}}};return Id.ActorQueryOperationSource=n,Id}var h6;function wK(){return h6||(h6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(vK(),t)}(Cw)),Cw}var jw={},Pd={},p6;function SK(){if(p6)return Pd;p6=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.MediatorJoinCoefficientsFixed=void 0;const t=Lt,e=ot;let u=class extends e.Mediator{constructor(n){super(n)}async mediateWith(n,r){var b;const a=[],o=r.map(({reply:g})=>g).map(g=>g.catch(m=>{a.push(m)})),l=await Promise.all(o);let c=l.map(g=>{if(g)return g.iterations*this.cpuWeight+g.persistedItems*this.memoryWeight+g.blockingItems*this.timeWeight+g.requestTime*this.ioWeight});const d=Math.max(...c.filter(g=>g!==void 0)),h=n.context.get(t.KeysQueryOperation.limitIndicator);h&&(c=c.map((g,m)=>g!==void 0&&l[m].blockingItems>0&&l[m].iterations>h?g+d:g));let f=-1,p=Number.POSITIVE_INFINITY;for(const[g,m]of c.entries())m!==void 0&&(f===-1||m<p)&&(f=g,p=m);if(f<0)throw new Error(`All actors rejected their test in ${this.name}
${a.map(g=>g.message).join(`
`)}`);const y=r[f].actor;return y.includeInLogs&&((b=e.Actor.getContextLogger(n.context))==null||b.debug(`Determined physical join operator '${y.logicalType}-${y.physicalName}'`,{entries:n.entries.length,variables:await Promise.all(n.entries.map(async g=>(await g.output.metadata()).variables.map(m=>m.value))),costs:Object.fromEntries(c.map((g,m)=>[`${r[m].actor.logicalType}-${r[m].actor.physicalName}`,g]).filter(g=>g[1]!==void 0)),coefficients:Object.fromEntries(l.map((g,m)=>[`${r[m].actor.logicalType}-${r[m].actor.physicalName}`,g]).filter(g=>g[1]!==void 0))})),y}};return Pd.MediatorJoinCoefficientsFixed=u,Pd}var y6;function TK(){return y6||(y6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(SK(),t)}(jw)),jw}var Lw={},Dd={},b6;function P7(){if(b6)return Dd;b6=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.ActorHttpInvalidate=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return Dd.ActorHttpInvalidate=e,Dd}var Nd={},m6;function AK(){if(m6)return Nd;m6=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.ActorHttpInvalidateListenable=void 0;const t=P7();let e=class extends t.ActorHttpInvalidate{constructor(s){super(s),this.invalidateListeners=[],this.invalidateListeners=[]}addInvalidateListener(s){this.invalidateListeners.push(s)}async test(s){return!0}async run(s){for(const n of this.invalidateListeners)n(s);return{}}};return Nd.ActorHttpInvalidateListenable=e,Nd}var g6;function N1(){return g6||(g6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(P7(),t),u(AK(),t)}(Lw)),Lw}var Mw={},Cd={},_6;function EK(){if(_6)return Cd;_6=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.MediatorAll=void 0;const t=ot;let e=class extends t.Mediator{constructor(s){super(s)}async mediate(s){const n=[];let r;try{r=this.publish(s)}catch{r=[]}for(const o of r)try{await o.reply,n.push(o.actor)}catch{}return(await Promise.all(n.map(o=>o.runObservable(s))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}};return Cd.MediatorAll=e,Cd}var v6;function OK(){return v6||(v6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(EK(),t)}(Mw)),Mw}var Fw={},jd={},qw={},Ld={},Md={},w6;function RK(){if(w6)return Md;w6=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.instrumentIterator=void 0;function t(u){const s={count:0,timeSelf:0,timeLife:0};return e(u,s,!0),new Promise(n=>{u.on("end",()=>{n(s)})})}Md.instrumentIterator=t;function e(u,s,n){if(!("_profileInstrumented"in u)){if(u._profileInstrumented=!0,"_read"in u){const r=u._read;u._read=(a,o)=>{const l=performance.now();r.call(u,a,()=>{s.timeSelf+=performance.now()-l,o()})}}if("read"in u){const r=u.read;u.read=()=>{const a=performance.now(),o=r.call(u);return n&&o&&s.count++,s.timeSelf+=performance.now()-a,o}}if(n){const r=performance.now();u.on("end",()=>{s.timeLife=performance.now()-r})}"_source"in u&&e(u._source,s,!1)}}return Md}var S6;function xK(){if(S6)return Ld;S6=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.ActorRdfJoin=void 0;const t=Lt,e=ot,u=Cn(),s=Et(),n=Xt(),r=RK(),a=new s.DataFactory;let o=class Da extends e.Actor{constructor(c,d){super(c),this.includeInLogs=!0,this.logicalType=d.logicalType,this.physicalName=d.physicalName,this.limitEntries=d.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=d.limitEntriesMin??!1,this.canHandleUndefs=d.canHandleUndefs??!1,this.isLeaf=d.isLeaf??!0,this.requiresVariableOverlap=d.requiresVariableOverlap??!1}static hash(c,d){return d.map(h=>{const f=c.get(h);return f?f.value:""}).join("")}static hashNonClashing(c,d){return d.map(h=>{const f=c.get(h);return f?(0,n.termToString)(f):""}).join("")}static overlappingVariables(c){const d=c.map(f=>f.variables);let h=d[0];for(const f of d.slice(1))h=h.filter(p=>f.some(y=>y.value===p.value));return h}static joinVariables(c){return[...new Set(c.flatMap(d=>d.variables.map(h=>h.value)))].map(d=>a.variable(d))}static joinBindings(...c){if(c.length===0)return null;if(c.length===1)return c[0];let d=c[0];for(const h of c.slice(1)){const f=d.merge(h);if(!f)return null;d=f}return d}static getCardinality(c){return c.cardinality}static async getMetadatas(c){return await Promise.all(c.map(d=>d.output.metadata()))}static async getEntriesWithMetadatas(c){const d=await Da.getMetadatas(c);return c.map((h,f)=>({...h,metadata:d[f]}))}static getRequestInitialTimes(c){return c.map(d=>d.pageSize?0:d.requestTime??0)}static getRequestItemTimes(c){return c.map(d=>d.pageSize?(d.requestTime??0)/d.pageSize:0)}constructState(c){const d=new u.MetadataValidationState,h=()=>d.invalidate();for(const f of c)f.state.addInvalidateListener(h);return d}async constructResultMetadata(c,d,h,f={},p=!1){let y;return f.cardinality?y=f.cardinality:(y=d.reduce((b,g)=>{const m=Da.getCardinality(g);return{type:m.type==="estimate"?"estimate":b.type,value:b.value*(p?Math.max(1,m.value):m.value)}},{type:"exact",value:1}),y.value*=(await this.mediatorJoinSelectivity.mediate({entries:c,context:h})).selectivity),{state:this.constructState(d),...f,cardinality:{type:y.type,value:y.value},canContainUndefs:f.canContainUndefs??d.some(b=>b.canContainUndefs),variables:Da.joinVariables(d)}}static async sortJoinEntries(c,d,h){if(d.some(g=>g.metadata.canContainUndefs))return d;const p={};for(const g of d)for(const m of g.metadata.variables){let v=p[m.value];v||(v=0),p[m.value]=++v}const y=[];for(const[g,m]of Object.entries(p))m>=2&&y.push(g);if(y.length===0)throw new Error("Bind join can only join entries with at least one common variable");const b=[];for(const g of d){let m=!1;for(const v of g.metadata.variables)if(y.includes(v.value)){m=!0;break}m||b.push(g)}return(await c.mediate({entries:d,context:h})).entries.sort((g,m)=>{const v=b.includes(g),_=b.includes(m);return v===_?0:v?1:-1})}async test(c){if(c.type!==this.logicalType)throw new Error(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${c.type}' was given.`);if(c.entries.length<=1)throw new Error(`${this.name} requires at least two join entries.`);if(this.limitEntriesMin?c.entries.length<this.limitEntries:c.entries.length>this.limitEntries)throw new Error(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${c.entries.length}.`);for(const h of c.entries)if(h.output.type!=="bindings")throw new Error(`Invalid type of a join entry: Expected 'bindings' but got '${h.output.type}'`);const d=await Da.getMetadatas(c.entries);if(!this.canHandleUndefs){for(const h of d)if(h.canContainUndefs)throw new Error(`Actor ${this.name} can not join streams containing undefs`)}if(this.requiresVariableOverlap&&Da.overlappingVariables(d).length===0)throw new Error(`Actor ${this.name} can only join entries with at least one common variable`);return await this.getJoinCoefficients(c,d)}async run(c){let d;c.context.has(t.KeysInitQuery.physicalQueryPlanLogger)&&(d=c.context.get(t.KeysInitQuery.physicalQueryPlanNode),c.context=c.context.set(t.KeysInitQuery.physicalQueryPlanNode,c));const h=c.context.get(t.KeysInitQuery.physicalQueryPlanLogger);let f;this.includeInLogs&&h&&(f={},h.stashChildren(d,g=>g.logicalOperator.startsWith("join")),h.logOperation(`join-${this.logicalType}`,this.physicalName,c,d,this.name,f));const{result:p,physicalPlanMetadata:y}=await this.getOutput(c),b=await Da.getMetadatas(c.entries);if(f){(0,r.instrumentIterator)(p.bindingsStream).then(m=>{h.appendMetadata(c,{cardinalityReal:m.count,timeSelf:m.timeSelf,timeLife:m.timeLife})}),Object.assign(f,y);const g=b.map(Da.getCardinality);if(f.cardinalities=g,f.joinCoefficients=await this.getJoinCoefficients(c,b),this.isLeaf)for(let m=0;m<c.entries.length;m++){const v=c.entries[m];h.unstashChild(v.operation,c),h.appendMetadata(v.operation,{cardinality:g[m]})}}return p.metadata=(0,u.cachifyMetadata)(p.metadata),p}};return Ld.ActorRdfJoin=o,Ld}var Fd={},T6;function IK(){if(T6)return Fd;T6=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.ChunkedIterator=void 0;const t=Dt();let e=class extends t.TransformIterator{constructor(s,n,r){super(s,r),this.chunk=[],this.blockSize=n}consumeChunkAsIterator(){const s=new t.ArrayIterator(this.chunk,{autoStart:!1});return this.chunk=[],s}_transform(s,n,r){this.chunk.push(s),this.chunk.length>=this.blockSize&&r(this.consumeChunkAsIterator()),n()}_flush(s){this.chunk.length>0&&this._push(this.consumeChunkAsIterator()),super._flush(s)}};return Fd.ChunkedIterator=e,Fd}var A6;function jn(){return A6||(A6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(xK(),t),u(IK(),t)}(qw)),qw}var E6;function PK(){if(E6)return jd;E6=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.ActorRdfJoinSingle=void 0;const t=jn();let e=class extends t.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(s){if(s.entries.length!==1)throw new Error(`Actor ${this.name} can only join a single entry`);return await this.getJoinCoefficients()}async getOutput(s){return{result:s.entries[0].output}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}};return jd.ActorRdfJoinSingle=e,jd}var O6;function DK(){return O6||(O6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(PK(),t)}(Fw)),Fw}var Bw={},qd={},R6;function NK(){if(R6)return qd;R6=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.ActorRdfJoinMultiEmpty=void 0;const t=jn(),e=Cn(),u=Dt();let s=class extends t.ActorRdfJoin{constructor(r){super(r,{logicalType:"inner",physicalName:"multi-empty",canHandleUndefs:!0})}async test(r){if((await t.ActorRdfJoin.getMetadatas(r.entries)).every(a=>t.ActorRdfJoin.getCardinality(a).value>0))throw new Error(`Actor ${this.name} can only join entries where at least one is empty`);return super.test(r)}async getOutput(r){for(const a of r.entries)a.output.bindingsStream.close();return{result:{bindingsStream:new u.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new e.MetadataValidationState,cardinality:{type:"exact",value:0},canContainUndefs:!1,variables:t.ActorRdfJoin.joinVariables(await t.ActorRdfJoin.getMetadatas(r.entries))}),type:"bindings"}}}async getJoinCoefficients(r,a){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}};return qd.ActorRdfJoinMultiEmpty=s,qd}var x6;function CK(){return x6||(x6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(NK(),t)}(Bw)),Bw}var Uw={},Bd={},I6;function jK(){if(I6)return Bd;I6=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.ActorRdfJoinMultiBindSource=void 0;const t=wt(),e=jn(),u=Dt(),s=Ot(),n=new s.Factory;let r=class extends e.ActorRdfJoin{constructor(o){super(o,{logicalType:"inner",physicalName:"bind-source",canHandleUndefs:!0})}async getOutput(o){const l=await e.ActorRdfJoin.getEntriesWithMetadatas(o.entries),c=await this.sortJoinEntries(l,o.context);this.logDebug(o.context,"First entry for Bind Join Source: ",()=>({entry:c[0].operation,metadata:c[0].metadata}));for(const[m,v]of c.entries())m!==0&&v.output.bindingsStream.close();const d=c[0].output,h=c[0].metadata,f=[...c];f.splice(0,1);const p=t.ActorQueryOperation.getOperationSource(f[0].operation),y=this.createOperationFromEntries(f),b=new e.ChunkedIterator(d.bindingsStream,this.blockSize,{autoStart:!1});return{result:{type:"bindings",bindingsStream:new u.UnionIterator(b.map(m=>p.source.queryBindings(y,p.context?o.context.merge(p.context):o.context,{joinBindings:{bindings:m,metadata:h}}))),metadata:()=>this.constructResultMetadata(c,c.map(m=>m.metadata),o.context)},physicalPlanMetadata:{bindIndex:l.indexOf(c[0])}}}async sortJoinEntries(o,l){return o=await e.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,o,l),o=o.sort((c,d)=>c.operationModified&&!d.operationModified?-1:0),o}async getJoinCoefficients(o,l){const c=await this.sortJoinEntries(o.entries.map((_,w)=>({..._,metadata:l[w]})),o.context);l=c.map(_=>_.metadata);const d=e.ActorRdfJoin.getRequestInitialTimes(l),h=e.ActorRdfJoin.getRequestItemTimes(l),f=[...c];[...d],[...h],f.splice(0,1);const p=f.map(_=>t.ActorQueryOperation.getOperationSource(_.operation));if(p.some(_=>!_))throw new Error(`Actor ${this.name} can not bind on remaining operations without source annotation`);if(p.some(_=>_!==p[0]))throw new Error(`Actor ${this.name} can not bind on remaining operations with non-equal source annotation`);const y=p[0],b=this.createOperationFromEntries(f),g=await y.source.getSelectorShape(o.context);if(!t.ActorQueryOperation.doesShapeAcceptOperation(g,b,{joinBindings:!0}))throw new Error(`Actor ${this.name} detected a source that can not handle passing down join bindings`);const m=await Promise.all(f.map(async _=>(await this.mediatorJoinSelectivity.mediate({entries:[c[0],_],context:o.context})).selectivity*this.selectivityModifier)),v=f.map((_,w)=>_.metadata.cardinality.value*m[w]).reduce((_,w)=>_+w,0);return{iterations:1,persistedItems:l[0].cardinality.value,blockingItems:l[0].cardinality.value,requestTime:d[0]+l[0].cardinality.value*h[0]+d[1]+v*h[1]}}createOperationFromEntries(o){return o.length===1?o[0].operation:n.createJoin(o.map(l=>l.operation),!0)}};return Bd.ActorRdfJoinMultiBindSource=r,Bd}var P6;function LK(){return P6||(P6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(jK(),t)}(Uw)),Uw}var Qw={},Ud={},Hw,D6;function MK(){if(D6)return Hw;D6=1;let t=Dt(),e=t.MultiTransformIterator,u=t.SimpleTransformIterator;class s extends e{constructor(r,a,o,l){super(r,l),this.funRight=a,this.funJoin=o}_createTransformer(r){return new u(this.funRight(r),{transform:(a,o,l)=>{let c=this.funJoin(r,a);c!==null&&l(c),o()}})}}return Hw=s,Hw}var $w,N6;function FK(){if(N6)return $w;N6=1;let t=Dt().AsyncIterator;class e extends t{constructor(s,n,r,a){super(),this.addedDataListener=!1,this.left=s,this.right=n,this.funHash=r,this.funJoin=a,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",l=>this.destroy(l)),this.right.on("error",l=>this.destroy(l)),this.readable=!1,this.left.on("end",o.bind(this));function o(){this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",l=>{l==="data"&&this._addDataListenerIfNeeded()}),this.left.readable&&this._addDataListenerIfNeeded(),this.left.on("readable",()=>this._addDataListenerIfNeeded())}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this._addDataListenerIfNeeded();;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let n=this.matches[this.matchIdx++],r=this.funJoin(n,this.match);if(r!==null)return r}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let s=this.funHash(this.match);this.matches=this.leftMap.get(s)||[],this.matchIdx=0}}_addDataListenerIfNeeded(){this.addedDataListener||(this.addedDataListener=!0,this._addDataListener())}_addDataListener(){this.left.on("data",s.bind(this));function s(n){let r=this.funHash(n);this.leftMap.has(r)||this.leftMap.set(r,[]),this.leftMap.get(r).push(n)}}}return $w=e,$w}var Vw,C6;function qK(){if(C6)return Vw;C6=1;const{MultiTransformIterator:t,SimpleTransformIterator:e,scheduleTask:u}=Dt();class s extends t{constructor(r,a,o,l){super(r,l),this.right=a,this.funJoin=o,this.on("end",()=>this.right.close())}_end(){super._end(),u(()=>this.right.destroy())}_createTransformer(r){return new e(this.right.clone(),{transform:(a,o,l)=>{let c=this.funJoin(r,a);c!==null&&l(c),o()}})}}return Vw=s,Vw}var kw,j6;function BK(){if(j6)return kw;j6=1;let t=Dt().AsyncIterator;class e extends t{constructor(s,n,r,a){super(),this.left=s,this.right=n,this.funHash=r,this.funJoin=a,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",o=>this.destroy(o)),this.right.on("error",o=>this.destroy(o)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(;;){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let r=this.matches[this.matchIdx++],a=this.usedLeft?this.funJoin(this.match,r):this.funJoin(r,this.match);if(a!==null)return a}this.hasResults()||this._end();let s=null;for(let r=0;r<2&&(s=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,s===null);++r);if(this.done||s===null)return this.readable=!1,null;let n=this.funHash(s);if(this.usedLeft&&this.right.done)this.leftMap=null;else if(this.left.done)this.rightMap=null;else{let r=this.usedLeft?this.leftMap:this.rightMap;r.has(n)||r.set(n,[]),r.get(n).push(s)}this.match=s,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(n)||[],this.matchIdx=0}}}return kw=e,kw}var zw,L6;function UK(){if(L6)return zw;L6=1;let t=Dt().AsyncIterator;class e extends t{constructor(s){super(),Array.isArray(s)||(s=Array.prototype.slice.call(arguments)),this.streams=s;for(let n of s)n.on("readable",()=>this.emit("readable")),n.on("end",()=>this._removeStream(n));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(s){let n=this.streams.indexOf(s);n<0||(this.streams.splice(n,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let s of this.streams)s.close()}read(){for(let s=0;s<this.streams.length;++s){this.idx=(this.idx+1)%this.streams.length;let n=this.streams[this.idx].read();if(n!==null)return n}return null}}return zw=e,zw}var Gw,M6;function nm(){if(M6)return Gw;M6=1;const t=MK(),e=FK(),u=qK(),s=BK(),n=UK();return Gw={DynamicNestedLoopJoin:t,HashJoin:e,NestedLoopJoin:u,SymmetricHashJoin:s,MergeStream:n},Gw}var F6;function QK(){if(F6)return Ud;F6=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.ActorRdfJoinHash=void 0;const t=jn(),e=nm();let u=class extends t.ActorRdfJoin{constructor(n){super(n,{logicalType:"inner",physicalName:"hash",limitEntries:2,requiresVariableOverlap:!0})}async getOutput(n){let r=await t.ActorRdfJoin.getMetadatas(n.entries);r[1].cardinality.value<r[0].cardinality.value&&(r=[r[1],r[0]],n={...n,entries:[n.entries[1],n.entries[0]]});const a=t.ActorRdfJoin.overlappingVariables(r);return{result:{type:"bindings",bindingsStream:new e.HashJoin(n.entries[0].output.bindingsStream,n.entries[1].output.bindingsStream,l=>t.ActorRdfJoin.hash(l,a),t.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(n.entries,r,n.context)}}}async getJoinCoefficients(n,r){r[1].cardinality.value<r[0].cardinality.value&&(r=[r[1],r[0]]);const a=t.ActorRdfJoin.getRequestInitialTimes(r),o=t.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value+r[1].cardinality.value,persistedItems:r[0].cardinality.value,blockingItems:r[0].cardinality.value,requestTime:a[0]+r[0].cardinality.value*o[0]+a[1]+r[1].cardinality.value*o[1]}}};return Ud.ActorRdfJoinHash=u,Ud}var q6;function HK(){return q6||(q6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(QK(),t)}(Qw)),Qw}var Ww={},Qd={},B6;function $K(){if(B6)return Qd;B6=1,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.ActorRdfJoinSymmetricHash=void 0;const t=jn(),e=nm();let u=class D7 extends t.ActorRdfJoin{constructor(n){super(n,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2,requiresVariableOverlap:!0})}async getOutput(n){const r=await t.ActorRdfJoin.getMetadatas(n.entries),a=t.ActorRdfJoin.overlappingVariables(r);return{result:{type:"bindings",bindingsStream:new e.SymmetricHashJoin(n.entries[0].output.bindingsStream,n.entries[1].output.bindingsStream,l=>D7.hash(l,a),t.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(n.entries,r,n.context)}}}async getJoinCoefficients(n,r){const a=t.ActorRdfJoin.getRequestInitialTimes(r),o=t.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value+r[1].cardinality.value,persistedItems:r[0].cardinality.value+r[1].cardinality.value,blockingItems:0,requestTime:a[0]+r[0].cardinality.value*o[0]+a[1]+r[1].cardinality.value*o[1]}}};return Qd.ActorRdfJoinSymmetricHash=u,Qd}var U6;function VK(){return U6||(U6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u($K(),t)}(Ww)),Ww}var Jw={},Hd={},Q6;function kK(){if(Q6)return Hd;Q6=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.ActorRdfJoinNestedLoop=void 0;const t=jn(),e=nm();let u=class extends t.ActorRdfJoin{constructor(n){super(n,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(n){return{result:{type:"bindings",bindingsStream:new e.NestedLoopJoin(n.entries[0].output.bindingsStream,n.entries[1].output.bindingsStream,t.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(n.entries,await t.ActorRdfJoin.getMetadatas(n.entries),n.context)}}}async getJoinCoefficients(n,r){const a=t.ActorRdfJoin.getRequestInitialTimes(r),o=t.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value*r[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:a[0]+r[0].cardinality.value*o[0]+a[1]+r[1].cardinality.value*o[1]}}};return Hd.ActorRdfJoinNestedLoop=u,Hd}var H6;function zK(){return H6||(H6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(kK(),t)}(Jw)),Jw}var Xw={},$d={},$6;function GK(){if($6)return $d;$6=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.ActorRdfJoinMinusHash=void 0;const t=wt(),e=jn();let u=class extends e.ActorRdfJoin{constructor(n){super(n,{logicalType:"minus",physicalName:"hash",limitEntries:2})}async getOutput(n){const r=n.entries[1].output,a=n.entries[0].output,o=await e.ActorRdfJoin.getMetadatas(n.entries),l=e.ActorRdfJoin.overlappingVariables(o);if(l.length>0){const c={},d=new t.ClosableTransformIterator(async()=>(await new Promise(h=>{r.bindingsStream.on("data",f=>{c[e.ActorRdfJoin.hashNonClashing(f,l)]=!0}),r.bindingsStream.on("end",h),r.bindingsStream.on("error",f=>{d.emit("error",f)})}),a.bindingsStream.filter(h=>!c[e.ActorRdfJoin.hashNonClashing(h,l)])),{autoStart:!1,onClose(){r.bindingsStream.destroy(),a.bindingsStream.destroy()}});return{result:{type:"bindings",bindingsStream:d,metadata:a.metadata}}}return r.bindingsStream.destroy(),{result:a}}async getJoinCoefficients(n,r){const a=e.ActorRdfJoin.getRequestInitialTimes(r),o=e.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value+r[1].cardinality.value,persistedItems:r[0].cardinality.value,blockingItems:r[0].cardinality.value,requestTime:a[0]+r[0].cardinality.value*o[0]+a[1]+r[1].cardinality.value*o[1]}}};return $d.ActorRdfJoinMinusHash=u,$d}var V6;function WK(){return V6||(V6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(GK(),t)}(Xw)),Xw}var Kw={},Vd={},kd={},k6;function JK(){if(k6)return kd;k6=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.BindingsIndex=void 0;const t=Xt();let e=class T3{constructor(s){this.data={},this.keys=s}static hashTerm(s){return s&&s.termType!=="Variable"?(0,t.termToString)(s):""}add(s){if(this.isBindingsValid(s)){let n=this.data;for(const r of this.keys){const a=T3.hashTerm(s.get(r));let o=n[a];o||(o=n[a]={}),n=o}}}contains(s){return this.isBindingsValid(s)?this.containsRecursive(s,this.keys,[this.data]):!1}isBindingsValid(s){let n=!1;for(const r of this.keys)if(s.get(r)){n=!0;break}return n}containsRecursive(s,n,r){if(n.length===0)return!0;let a;[a,...n]=n;for(const o of r){const l=T3.hashTerm(s.get(a));if(l){const c=[o[l],o[""]].filter(Boolean);if(c.length===0)continue;if(this.containsRecursive(s,n,c))return!0}else{let c=Object.keys(o).map(d=>o[d]);if(c.length===0&&(c=[{}]),this.containsRecursive(s,n,c))return!0}}return!1}};return kd.BindingsIndex=e,kd}var z6;function XK(){if(z6)return Vd;z6=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.ActorRdfJoinMinusHashUndef=void 0;const t=wt(),e=jn(),u=JK();let s=class extends e.ActorRdfJoin{constructor(r){super(r,{logicalType:"minus",physicalName:"hash-undef",limitEntries:2,canHandleUndefs:!0})}async getOutput(r){const a=r.entries[1].output,o=r.entries[0].output,l=await e.ActorRdfJoin.getMetadatas(r.entries),c=e.ActorRdfJoin.overlappingVariables(l);if(c.length>0){const d=new u.BindingsIndex(c),h=new t.ClosableTransformIterator(async()=>(await new Promise(f=>{a.bindingsStream.on("data",p=>d.add(p)),a.bindingsStream.on("end",f),a.bindingsStream.on("error",p=>{h.emit("error",p)})}),o.bindingsStream.filter(f=>!d.contains(f))),{autoStart:!1,onClose(){a.bindingsStream.destroy(),o.bindingsStream.destroy()}});return{result:{type:"bindings",bindingsStream:h,async metadata(){const f=await o.metadata(),p=await o.metadata();return{...p,canContainUndefs:f.canContainUndefs||p.canContainUndefs}}}}}return a.bindingsStream.destroy(),{result:o}}async getJoinCoefficients(r,a){const o=e.ActorRdfJoin.getRequestInitialTimes(a),l=e.ActorRdfJoin.getRequestItemTimes(a);return{iterations:(a[0].cardinality.value+a[1].cardinality.value)*1.01,persistedItems:a[0].cardinality.value,blockingItems:a[0].cardinality.value,requestTime:o[0]+a[0].cardinality.value*l[0]+o[1]+a[1].cardinality.value*l[1]}}};return Vd.ActorRdfJoinMinusHashUndef=s,Vd}var G6;function KK(){return G6||(G6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(XK(),t)}(Kw)),Kw}var Yw={},zd={},Gd={},W6;function YK(){if(W6)return Gd;W6=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.BindingsIndexDef=void 0;let t=class{constructor(u,s){this.keys=u,this.hashFn=s,this.index={}}put(u,s){return this.index[this.hashFn(u,this.keys)]=s}get(u){const s=this.getFirst(u);return s?[s]:[]}getFirst(u){return this.index[this.hashFn(u,this.keys)]}values(){return Object.values(this.index)}};return Gd.BindingsIndexDef=t,Gd}var Wd={},J6;function ZK(){if(J6)return Wd;J6=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.BindingsIndexUndef=void 0;let t=class{constructor(u,s){this.data={},this.keys=u,this.hashFn=s}put(u,s){if(this.isBindingsValid(u)){let n=this.data;for(let r=0;r<this.keys.length;r++){const a=this.keys[r],o=this.hashFn(u.get(a));let l=n[o];l||(l=n[o]=r===this.keys.length-1?s:{}),n=l}}return s}isBindingsValid(u){let s=!1;for(const n of this.keys)if(u.has(n)){s=!0;break}return s}get(u){return this.isBindingsValid(u)?this.getRecursive(u,this.keys,[this.data]):[]}getRecursive(u,s,n){if(s.length===0)return n;let r;[r,...s]=s;const a=[];for(const o of n){const l=this.hashFn(u==null?void 0:u.get(r));if(l){const c=[o[l],o[""]].filter(Boolean);if(c.length===0)continue;a.push(this.getRecursive(u,s,c))}else{const c=Object.values(o);if(c.length===0)continue;a.push(this.getRecursive(u,s,c))}}return a.flat()}getFirst(u){if(this.isBindingsValid(u))return this.getRecursiveFirst(u,this.keys,[this.data])}getRecursiveFirst(u,s,n){if(s.length===0)return n[0];let r;[r,...s]=s;for(const a of n){const o=this.hashFn(u.get(r));if(o){const l=[a[o],a[""]].filter(Boolean);if(l.length===0)continue;const c=this.getRecursiveFirst(u,s,l);if(c)return c}else{const l=Object.values(a);if(l.length===0)continue;const c=this.getRecursiveFirst(u,s,l);if(c)return c}}}values(){return this.keys.length===0?[]:this.getRecursive(void 0,this.keys,[this.data])}};return Wd.BindingsIndexUndef=t,Wd}var X6;function eY(){if(X6)return zd;X6=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.ActorRdfJoinOptionalHash=void 0;const t=wt(),e=jn(),u=Dt(),s=Xt(),n=YK(),r=ZK();let a=class A3 extends e.ActorRdfJoin{constructor(l){super(l,{logicalType:"optional",physicalName:`hash-${l.canHandleUndefs?"undef":"def"}-${l.blocking?"blocking":"nonblocking"}`,limitEntries:2,canHandleUndefs:l.canHandleUndefs,requiresVariableOverlap:!0})}static constructIndex(l,c){return l?new r.BindingsIndexUndef(c,d=>d&&d.termType!=="Variable"?(0,s.termToString)(d):""):new n.BindingsIndexDef(c,e.ActorRdfJoin.hashNonClashing)}async getOutput(l){const c=l.entries[1].output,d=l.entries[0].output,h=await e.ActorRdfJoin.getMetadatas(l.entries),f=e.ActorRdfJoin.overlappingVariables(h);let p;return this.blocking?p=new t.ClosableTransformIterator(async()=>{const y=A3.constructIndex(this.canHandleUndefs,f);return await new Promise(b=>{c.bindingsStream.on("data",g=>{(y.getFirst(g)??y.put(g,[])).push(g)}),c.bindingsStream.on("end",b),c.bindingsStream.on("error",g=>{p.emit("error",g)})}),new u.MultiTransformIterator(d.bindingsStream,{multiTransform:b=>new u.ArrayIterator(y.get(b).flat().map(g=>e.ActorRdfJoin.joinBindings(b,g)).filter(g=>g!==null),{autoStart:!1}),optional:!0,autoStart:!1})},{autoStart:!1,onClose(){c.bindingsStream.destroy(),d.bindingsStream.destroy()}}):p=new t.ClosableTransformIterator(async()=>{const y=A3.constructIndex(this.canHandleUndefs,f);let b=!0;return c.bindingsStream.on("data",g=>{(y.getFirst(g)??y.put(g,new u.BufferedIterator({autoStart:!1})))._push(g)}),c.bindingsStream.on("end",()=>{for(const g of y.values())g.close();b=!1}),c.bindingsStream.on("error",g=>{p.emit("error",g)}),new u.MultiTransformIterator(d.bindingsStream,{multiTransform:g=>{let m=y.get(g);return m.length===0&&(b?m=[y.put(g,new u.BufferedIterator({autoStart:!1}))]:m=[]),new u.UnionIterator(m.map(_=>_.clone()),{autoStart:!1}).map(_=>e.ActorRdfJoin.joinBindings(g,_))},optional:!0,autoStart:!1})},{autoStart:!1,onClose(){c.bindingsStream.destroy(),d.bindingsStream.destroy()}}),{result:{type:"bindings",bindingsStream:p,metadata:async()=>await this.constructResultMetadata(l.entries,await e.ActorRdfJoin.getMetadatas(l.entries),l.context,{canContainUndefs:!0},!0)}}}async getJoinCoefficients(l,c){const d=e.ActorRdfJoin.getRequestInitialTimes(c),h=e.ActorRdfJoin.getRequestItemTimes(c);let f=c[0].cardinality.value+c[1].cardinality.value;return this.canHandleUndefs||(f*=.8),this.blocking&&(f*=.9),{iterations:f,persistedItems:c[0].cardinality.value,blockingItems:this.blocking?c[0].cardinality.value:0,requestTime:d[0]+c[0].cardinality.value*h[0]+d[1]+c[1].cardinality.value*h[1]}}};return zd.ActorRdfJoinOptionalHash=a,zd}var K6;function C1(){return K6||(K6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(eY(),t)}(Yw)),Yw}var Zw={},Jd={},Y6;function tY(){if(Y6)return Jd;Y6=1,Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.ActorRdfJoinOptionalNestedLoop=void 0;const t=jn(),e=nm();let u=class extends t.ActorRdfJoin{constructor(n){super(n,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(n){return{result:{type:"bindings",bindingsStream:new e.NestedLoopJoin(n.entries[0].output.bindingsStream,n.entries[1].output.bindingsStream,t.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(n.entries,await t.ActorRdfJoin.getMetadatas(n.entries),n.context,{canContainUndefs:!0},!0)}}}async getJoinCoefficients(n,r){const a=t.ActorRdfJoin.getRequestInitialTimes(r),o=t.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value*r[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:a[0]+r[0].cardinality.value*o[0]+a[1]+r[1].cardinality.value*o[1]}}};return Jd.ActorRdfJoinOptionalNestedLoop=u,Jd}var Z6;function rY(){return Z6||(Z6=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(tY(),t)}(Zw)),Zw}var e2={},Xd={},t2={},Kd={},eC;function nY(){if(eC)return Kd;eC=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.ActorDereferenceRdf=void 0;const t=eA();let e=class extends t.ActorDereferenceParse{constructor(s){super(s)}};return Kd.ActorDereferenceRdf=e,Kd}var tC;function iY(){return tC||(tC=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(nY(),t)}(t2)),t2}var rC;function aY(){if(rC)return Xd;rC=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.ActorDereferenceRdfParse=void 0;const t=iY();let e=class extends t.ActorDereferenceRdf{constructor(s){super(s)}async getMetadata(s){return{baseIRI:s.url}}};return Xd.ActorDereferenceRdfParse=e,Xd}var nC;function sY(){return nC||(nC=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(aY(),t)}(e2)),e2}var r2={},Yd={},Zd={},iC;function oY(){if(iC)return Zd;iC=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.HtmlScriptListener=void 0;const t=Lt,e=Wt(),u=Pi();let s=class P0{constructor(r,a,o,l,c,d,h,f){this.textChunksJsonLd=[],this.endBarrier=1,this.passedScripts=0,this.isFinalJsonLdProcessing=!1,this.mediatorRdfParseHandle=r,this.cbQuad=a,this.cbError=o,this.cbEnd=l,this.supportedTypes=c,this.context=d.set(t.KeysRdfParseHtmlScript.processingHtmlScript,!0),this.baseIRI=h,this.headers=f,this.onlyFirstScript=d.get(t.KeysRdfParseHtmlScript.extractAllScripts)===!1;const p=this.baseIRI.indexOf("#");this.targetScriptId=p>0?this.baseIRI.slice(p+1,this.baseIRI.length):null}static newErrorCoded(r,a){const o=new Error(r);return o.code=a,o}onEnd(){--this.endBarrier===0&&(this.textChunksJsonLd.length>0?(this.handleMediaType="application/ld+json",this.textChunks=this.textChunksJsonLd,this.textChunks.push("]"),this.textChunksJsonLd=[],this.isFinalJsonLdProcessing=!0,this.endBarrier++,this.onTagClose()):(this.passedScripts===0&&this.targetScriptId&&this.cbError(P0.newErrorCoded(`Failed to find targeted script id "${this.targetScriptId}"`,"loading document failed")),this.cbEnd()),this.isFinalJsonLdProcessing=!1)}onTagClose(){if(this.handleMediaType)if(this.requiresCustomJsonLdHandling(this.handleMediaType)&&!this.isFinalJsonLdProcessing)this.handleMediaType=void 0,this.textChunks=void 0,this.onEnd();else{const r=new e.Readable({objectMode:!0});r._read=()=>{};const a=this.textChunks,o={context:this.context,handle:{metadata:{baseIRI:this.baseIRI},data:r,headers:this.headers,context:this.context},handleMediaType:this.handleMediaType};this.mediatorRdfParseHandle.mediate(o).then(({handle:l})=>{l.data.on("error",c=>this.cbError(P0.newErrorCoded(c.message,"invalid script element"))).on("data",this.cbQuad).on("end",()=>this.onEnd());for(const c of a)r.push(c);r.push(null)}).catch(l=>{this.targetScriptId?this.cbError(P0.newErrorCoded(l.message,"loading document failed")):this.onEnd()}),this.handleMediaType=void 0,this.textChunks=void 0}}onTagOpen(r,a){r==="base"&&a.href&&(this.baseIRI=(0,u.resolve)(a.href,this.baseIRI)),r==="script"&&(!this.targetScriptId||a.id===this.targetScriptId)?this.supportedTypes[a.type]?this.onlyFirstScript&&this.passedScripts>0?this.handleMediaType=void 0:(this.passedScripts++,this.handleMediaType=a.type,this.endBarrier++,this.requiresCustomJsonLdHandling(this.handleMediaType)?(this.textChunks=this.textChunksJsonLd,this.textChunks.push(this.textChunks.length===0?"[":",")):this.textChunks=[]):this.targetScriptId&&this.cbError(P0.newErrorCoded(`Targeted script "${this.targetScriptId}" does not have a supported type`,"loading document failed")):this.handleMediaType=void 0}onText(r){this.handleMediaType&&this.textChunks.push(r)}requiresCustomJsonLdHandling(r){return!this.onlyFirstScript&&!this.targetScriptId&&r==="application/ld+json"}};return Zd.HtmlScriptListener=s,Zd}var aC;function uY(){if(aC)return Yd;aC=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.ActorRdfParseHtmlScript=void 0;const t=uA(),e=oY();let u=class extends t.ActorRdfParseHtml{constructor(n){super(n)}async test(n){return!0}async run(n){const r=(await this.mediatorRdfParseMediatypes.mediate({context:n.context,mediaTypes:!0})).mediaTypes;return{htmlParseListener:new e.HtmlScriptListener(this.mediatorRdfParseHandle,n.emit,n.error,n.end,r,n.context,n.baseIRI,n.headers)}}};return Yd.ActorRdfParseHtmlScript=u,Yd}var sC;function cY(){return sC||(sC=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(uY(),t)}(r2)),r2}var n2={},ef={},oC;function lY(){if(oC)return ef;oC=1,Object.defineProperty(ef,"__esModule",{value:!0}),ef.ActorQueryResultSerializeRdf=void 0;const t=Gi();let e=class extends t.ActorQueryResultSerialize{constructor(s){super(s)}async testHandle(s,n,r){if(s.type!=="quads")throw new Error(`Actor ${this.name} can only handle quad streams`);const{mediaTypes:a}=await this.mediatorMediaTypeCombiner.mediate({context:r,mediaTypes:!0});if(!(n in a))throw new Error(`Actor ${this.name} can not handle media type ${n}. All available types: ${Object.keys(a)}`);return!0}async runHandle(s,n,r){return(await this.mediatorRdfSerialize.mediate({context:r,handle:{context:r,quadStream:s.quadStream},handleMediaType:n})).handle}async testMediaType(s){return!0}async getMediaTypes(s){return(await this.mediatorMediaTypeCombiner.mediate({context:s,mediaTypes:!0})).mediaTypes}async testMediaTypeFormats(s){return!0}async getMediaTypeFormats(s){return(await this.mediatorMediaTypeFormatCombiner.mediate({context:s,mediaTypeFormats:!0})).mediaTypeFormats}};return ef.ActorQueryResultSerializeRdf=e,ef}var uC;function dY(){return uC||(uC=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(lY(),t)}(n2)),n2}var i2={},tf={},cC;function fY(){if(cC)return tf;cC=1,Object.defineProperty(tf,"__esModule",{value:!0}),tf.ActorHttpWayback=void 0;const t=as(),e=Lt,u=ou();I7();const s="http://wayback.archive-it.org/";function n(o){const l=new Request(o.input,o.init);return{input:new Request(new URL(`/${l.url}`,s),l)}}function r(o){const l=o.get(e.KeysHttpProxy.httpProxyHandler);return l?c=>l.getProxy(n(c)):c=>Promise.resolve(n(c))}let a=class extends t.ActorHttp{constructor(l){super(l)}async test(l){return!0}async run(l){let c=await this.mediatorHttp.mediate(l);if(c.status===404&&l.context.get(e.KeysHttpWayback.recoverBrokenLinks)){let d=await this.mediatorHttp.mediate({...l,context:l.context.set(e.KeysHttpWayback.recoverBrokenLinks,!1).set(e.KeysHttpProxy.httpProxyHandler,{getProxy:r(l.context)})});d.status===200&&([c,d]=[d,c]);const{body:h}=d;h&&("cancel"in h&&typeof h.cancel=="function"?await h.cancel():"destroy"in h&&typeof h.destroy=="function"?h.destroy():await(0,u.stringify)(t.ActorHttp.toNodeReadable(h)))}return c}};return tf.ActorHttpWayback=a,tf}var lC;function hY(){return lC||(lC=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(fY(),t)}(i2)),i2}var a2={},rf={},s2={},nf={},af={},sf={},of={},uf={},dC;function pY(){if(dC)return uf;dC=1,Object.defineProperty(uf,"__esModule",{value:!0}),uf.ContainerHandlerIdentifier=void 0;let t=class{canCombineWithGraph(){return!0}async handle(u,s,n,r,a,o){let l;if(s.emittedStack[o+1]&&s.idStack[o+1])l=s.idStack[o+1][0];else{const h=await n.getContainerKey(r[o],r,o)!==null?await n.resourceToTerm(await s.getContext(r),r[o]):n.dataFactory.blankNode();if(!h){s.emittedStack[o]=!1;return}l=h,s.idStack[o+1]=[l]}let c=s.idStack[o];c||(c=s.idStack[o]=[]),c.some(d=>d.equals(l))||c.push(l),await s.handlePendingContainerFlushBuffers()||(s.emittedStack[o]=!1)}};return uf.ContainerHandlerIdentifier=t,uf}var cf={},lf={},fC;function im(){if(fC)return lf;fC=1,Object.defineProperty(lf,"__esModule",{value:!0}),lf.EntryHandlerPredicate=void 0;const t=Jr(),e=ro();let u=class N7{static async handlePredicateObject(n,r,a,o,l,c,d,h,f){const p=await r.getPropertiesDepth(a,o),y=await r.getDepthOffsetGraph(o,a),b=o-y,g=n.idStack[p];if(g&&!f)for(const m of g)if(y>=0){const _=n.idStack[b-1];if(_)for(const w of _)r.emitQuadChecked(o,m,l,c,w,d,h);else d?(r.validateReverseSubject(c),n.getUnidentifiedGraphBufferSafe(b-1).push({subject:c,predicate:l,object:m,isEmbedded:h})):n.getUnidentifiedGraphBufferSafe(b-1).push({subject:m,predicate:l,object:c,isEmbedded:h})}else{const _=await r.getGraphContainerValue(a,p);r.emitQuadChecked(o,m,l,c,_,d,h)}else if(d&&r.validateReverseSubject(c),f){if(n.rdfstar){n.idStack[o]&&n.emitError(new t.ErrorCoded(`Found an illegal @id inside an annotation: ${n.idStack[o][0].value}`,t.ERROR_CODES.INVALID_ANNOTATION));for(let _=0;_<o;_++)await r.unaliasKeyword(a[_],a,_)==="@id"&&n.emitError(new t.ErrorCoded("Found an illegal annotation inside an embedded node",t.ERROR_CODES.INVALID_ANNOTATION));const m=n.getAnnotationsBufferSafe(p),v={predicate:l,object:c,reverse:d,nestedAnnotations:[],depth:p};m.push(v);for(let _=m.length-2;_>=0;_--){const w=m[_];w.depth>p&&(v.nestedAnnotations.push(w),m.splice(_,1))}}}else n.getUnidentifiedValueBufferSafe(p).push({predicate:l,object:c,reverse:d,isEmbedded:h})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(n,r,a,o,l){const c=a[o];if(c){const d=await n.getContext(a);if(!n.jsonLiteralStack[o]&&await r.predicateToTerm(d,a[o]))return e.Util.getContextValueType(d,c)==="@json"&&(n.jsonLiteralStack[o+1]=!0),!0}return!1}async test(n,r,a,o,l){return o[l]}async handle(n,r,a,o,l,c,d){const h=o[c],f=await n.getContext(o),p=await r.predicateToTerm(f,a);if(p){const y=await r.valueToTerm(f,a,l,c,o);if(y.length)for(let b of y){let g=await r.unaliasKeywordParent(o,c);const m=e.Util.isPropertyReverse(f,h,g);let v=0;for(;g==="@reverse"||typeof g=="number";)typeof g=="number"?v++:c--,g=await r.unaliasKeywordParent(o,c-v);const _=e.Util.isPropertyInEmbeddedNode(g);r.validateReverseInEmbeddedNode(a,m,_);const w=e.Util.isPropertyInAnnotationObject(g);if(l){const S="@list"in e.Util.getContextValueContainer(f,a);if(S||l["@list"]){if((S&&!Array.isArray(l)&&!l["@list"]||l["@list"]&&!Array.isArray(l["@list"]))&&b!==r.rdfNil){const A=r.dataFactory.blankNode();n.emitQuad(c,r.dataFactory.quad(A,r.rdfRest,r.rdfNil,r.getDefaultGraph())),n.emitQuad(c,r.dataFactory.quad(A,r.rdfFirst,b,r.getDefaultGraph())),b=A}if(m&&!n.allowSubjectList)throw new t.ErrorCoded(`Found illegal list value in subject position at ${a}`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await N7.handlePredicateObject(n,r,o,c,p,b,m,_,w)}}}};return lf.EntryHandlerPredicate=u,lf}var hC;function yY(){if(hC)return cf;hC=1,Object.defineProperty(cf,"__esModule",{value:!0}),cf.ContainerHandlerIndex=void 0;const t=Jr(),e=im(),u=ro();let s=class{canCombineWithGraph(){return!0}async handle(r,a,o,l,c,d){if(!Array.isArray(c)){const h="@graph"in r,f=await a.getContext(l),p=l[d-1],y=u.Util.getContextValueIndex(f,p);if(y){if(t.Util.isPotentialKeyword(y))throw new t.ErrorCoded(`Keywords can not be used as @index value, got: ${y}`,t.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof y!="string")throw new t.ErrorCoded(`@index values must be strings, got: ${y}`,t.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof c!="object"){if(u.Util.getContextValueType(f,p)!=="@id")throw new t.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${c}`,t.ERROR_CODES.INVALID_VALUE_OBJECT);const m=o.resourceToTerm(f,c);m&&(a.idStack[d+1]=[m])}const g=o.createVocabOrBaseTerm(f,y);if(g){const m=await o.valueToTerm(f,y,await o.getContainerKey(l[d],l,d),d,l);if(h){const v=await o.getGraphContainerValue(l,d+1);for(const _ of m)a.emitQuad(d,o.dataFactory.quad(v,g,_,o.getDefaultGraph()))}else for(const v of m)await e.EntryHandlerPredicate.handlePredicateObject(a,o,l,d+1,g,v,!1,!1,!1)}}const b=h?2:1;await a.newOnValueJob(l.slice(0,l.length-b),c,d-b,!0),await a.handlePendingContainerFlushBuffers()}a.emittedStack[d]=!1}};return cf.ContainerHandlerIndex=s,cf}var df={},pC;function bY(){if(pC)return df;pC=1,Object.defineProperty(df,"__esModule",{value:!0}),df.ContainerHandlerLanguage=void 0;const t=Jr();let e=class{canCombineWithGraph(){return!1}async handle(s,n,r,a,o,l){const c=await r.getContainerKey(a[l],a,l);if(Array.isArray(o))o=o.map(d=>({"@value":d,"@language":c}));else{if(typeof o!="string")throw new t.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(o)}', but expected string`,t.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);o={"@value":o,"@language":c}}await n.newOnValueJob(a.slice(0,a.length-1),o,l-1,!0),n.emittedStack[l]=!1}};return df.ContainerHandlerLanguage=e,df}var ff={},yC;function mY(){if(yC)return ff;yC=1,Object.defineProperty(ff,"__esModule",{value:!0}),ff.ContainerHandlerType=void 0;const t=im(),e=ro();let u=class{canCombineWithGraph(){return!1}async handle(n,r,a,o,l,c){if(!Array.isArray(l)){if(typeof l=="string"){const f=await r.getContext(o),y=e.Util.getContextValueType(f,o[c-1])==="@vocab"?await a.createVocabOrBaseTerm(f,l):await a.resourceToTerm(f,l);if(y){const b={"@id":y.termType==="NamedNode"?y.value:l};await r.newOnValueJob(o.slice(0,o.length-1),b,c-1,!0),r.idStack[c+1]=[y]}}else{const f=!!r.idStack[c+1];f||delete r.idStack[c],await r.newOnValueJob(o.slice(0,o.length-1),l,c-1,!0),f||(r.idStack[c+1]=r.idStack[c])}const d=await a.getContainerKey(o[c],o,c),h=d!==null?a.createVocabOrBaseTerm(await r.getContext(o),d):null;h&&await t.EntryHandlerPredicate.handlePredicateObject(r,a,o,c+1,a.rdfType,h,!1,!1,!1),await r.handlePendingContainerFlushBuffers()}r.emittedStack[c]=!1}};return ff.ContainerHandlerType=u,ff}var bC;function C7(){if(bC)return of;bC=1,Object.defineProperty(of,"__esModule",{value:!0}),of.EntryHandlerContainer=void 0;const t=pY(),e=yY(),u=bY(),s=mY(),n=ro();let r=class Na{static isSimpleGraphContainer(o){return"@graph"in o&&("@set"in o&&Object.keys(o).length===2||Object.keys(o).length===1)}static isComplexGraphContainer(o){return"@graph"in o&&("@set"in o&&Object.keys(o).length>2||!("@set"in o)&&Object.keys(o).length>1)}static getContainerGraphIndex(o,l,c){let d=Na.isSimpleGraphContainer(o),h="";for(let f=l;f<c.length;f++)(!d||typeof c[f]=="number")&&(h+=":"+c[f]),!d&&typeof c[f]!="number"&&(d=!0);return h}static async getContainerHandler(o,l,c){const d={containers:{"@set":!0},depth:c,fallback:!0};let h=!1;const f=await o.getContext(l,2);for(let p=c-1;p>=0;p--)if(typeof l[p]!="number"){const y=n.Util.getContextValue(f,"@container",l[p],!1);if(y&&Na.isSimpleGraphContainer(y))return{containers:y,depth:p+1,fallback:!1};const b=n.Util.getContextValue(f,"@container",l[p-1],!1);if(b){const g="@graph"in b;for(const m in Na.CONTAINER_HANDLERS)if(b[m])return g?Na.CONTAINER_HANDLERS[m].canCombineWithGraph()?{containers:b,depth:p,fallback:!1}:d:h?d:{containers:b,depth:p,fallback:!1};return d}else{if(h)return d;h=!0}}return d}static async isBufferableContainerHandler(o,l,c){const d=await Na.getContainerHandler(o,l,c);return!d.fallback&&!("@graph"in d.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(o,l,c,d,h){return!!await this.test(o,l,null,c,d)}async test(o,l,c,d,h){const f=n.Util.getContextValueContainer(await o.getContext(d,2),d[h-1]);for(const p in Na.CONTAINER_HANDLERS)if(f[p])return{containers:f,handler:Na.CONTAINER_HANDLERS[p]};return null}async handle(o,l,c,d,h,f,p){return p.handler.handle(p.containers,o,l,d,h,f)}};return r.CONTAINER_HANDLERS={"@id":new t.ContainerHandlerIdentifier,"@index":new e.ContainerHandlerIndex,"@language":new u.ContainerHandlerLanguage,"@type":new s.ContainerHandlerType},of.EntryHandlerContainer=r,of}var o2,mC;function gY(){return mC||(mC=1,o2=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((u,s,n)=>{const r=n===0?"":",",a=s===void 0||typeof s=="symbol"?null:s;return u+r+t(a)},"")+"]":"{"+Object.keys(e).sort().reduce((u,s,n)=>{if(e[s]===void 0||typeof e[s]=="symbol")return u;const r=u.length===0?"":",";return u+r+t(s)+":"+t(e[s])},"")+"}"}),o2}var gC;function ro(){if(gC)return sf;gC=1,Object.defineProperty(sf,"__esModule",{value:!0}),sf.Util=void 0;const t=Jr(),e=Et(),u=C7(),s=gY();let n=class Zt{constructor(a){this.parsingContext=a.parsingContext,this.dataFactory=a.dataFactory||new e.DataFactory,this.rdfFirst=this.dataFactory.namedNode(Zt.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(Zt.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(Zt.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(Zt.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(Zt.RDF+"JSON")}static getContextValue(a,o,l,c){const d=a.getContextRaw()[l];if(!d)return c;const h=d[o];return h===void 0?c:h}static getContextValueContainer(a,o){return Zt.getContextValue(a,"@container",o,{"@set":!0})}static getContextValueType(a,o){const l=Zt.getContextValue(a,"@type",o,null);return l==="@none"?null:l}static getContextValueLanguage(a,o){return Zt.getContextValue(a,"@language",o,a.getContextRaw()["@language"]||null)}static getContextValueDirection(a,o){return Zt.getContextValue(a,"@direction",o,a.getContextRaw()["@direction"]||null)}static isContextValueReverse(a,o){return!!Zt.getContextValue(a,"@reverse",o,null)}static getContextValueIndex(a,o){return Zt.getContextValue(a,"@index",o,a.getContextRaw()["@index"]||null)}static isPropertyReverse(a,o,l){return l==="@reverse"!==Zt.isContextValueReverse(a,o)}static isPropertyInEmbeddedNode(a){return a==="@id"}static isPropertyInAnnotationObject(a){return a==="@annotation"}static isValidIri(a){return a!==null&&t.Util.isValidIri(a)}static isPrefixArray(a,o){if(a.length>o.length)return!1;for(let l=0;l<a.length;l++)if(a[l]!==o[l])return!1;return!0}async validateValueIndexes(a){if(this.parsingContext.validateValueIndexes){const o={};for(const l of a)if(l&&typeof l=="object"){const c=l["@id"],d=l["@index"];if(c&&d){const h=o[c];if(h&&h!==d)throw new t.ErrorCoded(`Conflicting @index value for ${c}`,t.ERROR_CODES.CONFLICTING_INDEXES);o[c]=d}}}}async valueToTerm(a,o,l,c,d){if(Zt.getContextValueType(a,o)==="@json")return[this.dataFactory.literal(this.valueToJsonString(l),this.rdfJson)];const h=typeof l;switch(h){case"object":if(l==null)return[];if(Array.isArray(l))return"@list"in Zt.getContextValueContainer(a,o)?l.length===0?[this.rdfNil]:this.parsingContext.idStack[c+1]||[]:(await this.validateValueIndexes(l),[]);if(a=await this.getContextSelfOrPropertyScoped(a,o),"@context"in l&&(a=await this.parsingContext.parseContext(l["@context"],(await this.parsingContext.getContext(d,0)).getContextRaw())),l=await this.unaliasKeywords(l,d,c,a),"@value"in l){let f,p,y,b,g;for(o in l){const m=l[o];switch(o){case"@value":f=m;break;case"@language":p=m;break;case"@direction":y=m;break;case"@type":b=m;break;case"@index":g=m;break;case"@annotation":break;default:throw new t.ErrorCoded(`Unknown value entry '${o}' in @value: ${JSON.stringify(l)}`,t.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(b,d,c,!0,a)==="@json")return[this.dataFactory.literal(this.valueToJsonString(f),this.rdfJson)];if(f===null)return[];if(typeof f=="object")throw new t.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(f)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&g&&typeof g!="string")throw new t.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(g)}'`,t.ERROR_CODES.INVALID_INDEX_VALUE);if(p){if(typeof f!="string")throw new t.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`,t.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!t.ContextParser.validateLanguage(p,this.parsingContext.strictValues,t.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(p=p.toLowerCase())}if(y){if(typeof f!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`);if(!t.ContextParser.validateDirection(y,this.parsingContext.strictValues))return[]}if(p&&y&&this.parsingContext.rdfDirection){if(b)throw new t.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(c,f,p,y))}else if(p){if(b)throw new t.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(f,p)]}else if(y&&this.parsingContext.rdfDirection){if(b)throw new t.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(c,f,p,y))}else if(b){if(typeof b!="string")throw new t.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(b)}'`,t.ERROR_CODES.INVALID_TYPED_VALUE);const m=this.createVocabOrBaseTerm(a,b);if(!m)throw new t.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(b)}'`,t.ERROR_CODES.INVALID_TYPED_VALUE);if(m.termType!=="NamedNode")throw new t.ErrorCoded(`Illegal value type (${m.termType}): ${b}`,t.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(f,m)]}return await this.valueToTerm(new t.JsonLdContextNormalized({}),o,f,c,d)}else if("@set"in l){if(Object.keys(l).length>1)throw new t.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${o}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in l){if(Object.keys(l).length>1)throw new t.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${o}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const f=l["@list"];return Array.isArray(f)?f.length===0?[this.rdfNil]:this.parsingContext.idStack[c+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(d),o,f,c-1,d.slice(0,-1))}else{if("@reverse"in l&&typeof l["@reverse"]=="boolean")return[];if("@graph"in Zt.getContextValueContainer(await this.parsingContext.getContext(d),o)){const f=this.parsingContext.graphContainerTermStack[c+1];return f?Object.values(f):[this.dataFactory.blankNode()]}else if("@id"in l){if(Object.keys(l).length>1&&(a=await this.parsingContext.getContext(d,0)),"@context"in l&&(a=await this.parsingContext.parseContext(l["@context"],a.getContextRaw())),l["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(a,l["@id"]));{const f=l["@id"];let p;if(typeof f=="object")if(this.parsingContext.rdfstar)p=this.parsingContext.idStack[c+1][0];else throw new t.ErrorCoded(`Found illegal @id '${l}'`,t.ERROR_CODES.INVALID_ID_VALUE);else p=this.resourceToTerm(a,f);return this.nullableTermToArray(p)}}else return this.parsingContext.emittedStack[c+1]||l&&typeof l=="object"&&Object.keys(l).length===0?this.parsingContext.idStack[c+1]||(this.parsingContext.idStack[c+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(c,await this.getContextSelfOrPropertyScoped(a,o),o,l,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(c,await this.getContextSelfOrPropertyScoped(a,o),o,(!!l).toString(),this.dataFactory.namedNode(Zt.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(c,await this.getContextSelfOrPropertyScoped(a,o),o,l,this.dataFactory.namedNode(l%1===0&&l<1e21?Zt.XSD_INTEGER:Zt.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${h}`)),[]}}async getContextSelfOrPropertyScoped(a,o){const l=a.getContextRaw()[o];return l&&typeof l=="object"&&"@context"in l&&(a=await this.parsingContext.parseContext(l,a.getContextRaw(),!0)),a}nullableTermToArray(a){return a?[a]:[]}predicateToTerm(a,o){const l=a.expandTerm(o,!0,this.parsingContext.getExpandOptions());if(!l)return null;if(l[0]==="_"&&l[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(l.substr(2)):null;if(Zt.isValidIri(l))return this.dataFactory.namedNode(l);if(l&&this.parsingContext.strictValues)this.parsingContext.emitError(new t.ErrorCoded(`Invalid predicate IRI: ${l}`,t.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(a,o){if(o.startsWith("_:"))return this.dataFactory.blankNode(o.substr(2));const l=a.expandTerm(o,!1,this.parsingContext.getExpandOptions());if(!Zt.isValidIri(l))if(l&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${l}`));else return null;return this.dataFactory.namedNode(l)}createVocabOrBaseTerm(a,o){if(o.startsWith("_:"))return this.dataFactory.blankNode(o.substr(2));const l=this.parsingContext.getExpandOptions();let c=a.expandTerm(o,!0,l);if(c===o&&(c=a.expandTerm(o,!1,l)),!Zt.isValidIri(c))if(c&&this.parsingContext.strictValues&&!c.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${c}`));else return null;return this.dataFactory.namedNode(c)}intToString(a,o){return typeof a=="number"?Number.isFinite(a)?a%1===0&&(!o||o.value!==Zt.XSD_DOUBLE)?Number(a).toString():a.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):a>0?"INF":"-INF":a}stringValueToTerm(a,o,l,c,d){const h=Zt.getContextValueType(o,l);if(h)if(h==="@id"){if(!d)return this.resourceToTerm(o,this.intToString(c,d))}else if(h==="@vocab"){if(!d)return this.createVocabOrBaseTerm(o,this.intToString(c,d))}else d=this.dataFactory.namedNode(h);if(!d){const f=Zt.getContextValueLanguage(o,l),p=Zt.getContextValueDirection(o,l);return p&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(a,this.intToString(c,d),f,p):this.dataFactory.literal(this.intToString(c,d),f)}return this.dataFactory.literal(this.intToString(c,d),d)}createLanguageDirectionLiteral(a,o,l,c){if(this.parsingContext.rdfDirection==="i18n-datatype")return l||(l=""),this.dataFactory.literal(o,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${l}_${c}`));{const d=this.dataFactory.blankNode(),h=this.getDefaultGraph();return this.parsingContext.emitQuad(a,this.dataFactory.quad(d,this.dataFactory.namedNode(Zt.RDF+"value"),this.dataFactory.literal(o),h)),l&&this.parsingContext.emitQuad(a,this.dataFactory.quad(d,this.dataFactory.namedNode(Zt.RDF+"language"),this.dataFactory.literal(l),h)),this.parsingContext.emitQuad(a,this.dataFactory.quad(d,this.dataFactory.namedNode(Zt.RDF+"direction"),this.dataFactory.literal(c),h)),d}}valueToJsonString(a){return s(a)}async unaliasKeyword(a,o,l,c,d){if(Number.isInteger(a))return a;if(!c){const h=this.parsingContext.unaliasedKeywordCacheStack[l];if(h)return h}if(!t.Util.isPotentialKeyword(a)){d=d||await this.parsingContext.getContext(o);let h=d.getContextRaw()[a];h&&typeof h=="object"&&(h=h["@id"]),t.Util.isValidKeyword(h)&&(a=h)}return c?a:this.parsingContext.unaliasedKeywordCacheStack[l]=a}async unaliasKeywordParent(a,o){return await this.unaliasKeyword(o>0&&a[o-1],a,o-1)}async unaliasKeywords(a,o,l,c){const d={};for(const h in a)d[await this.unaliasKeyword(h,o,l+1,!0,c)]=a[h];return d}async isLiteral(a,o){for(let l=o;l>=0;l--){if(await this.unaliasKeyword(a[l],a,l)==="@annotation")return!1;if(this.parsingContext.literalStack[l]||this.parsingContext.jsonLiteralStack[l])return!0}return!1}async getDepthOffsetGraph(a,o){for(let l=a-1;l>0;l--)if(await this.unaliasKeyword(o[l],o,l)==="@graph"){const c=(await u.EntryHandlerContainer.getContainerHandler(this.parsingContext,o,l)).containers;return u.EntryHandlerContainer.isComplexGraphContainer(c)?-1:a-l-1}return-1}validateReverseSubject(a){if(a.termType==="Literal")throw new t.ErrorCoded(`Found illegal literal in subject position: ${a.value}`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(a,o){let l=this.getDefaultGraph();const{containers:c,depth:d}=await u.EntryHandlerContainer.getContainerHandler(this.parsingContext,a,o);if("@graph"in c){const h=u.EntryHandlerContainer.getContainerGraphIndex(c,d,a),f=this.parsingContext.graphContainerTermStack[d];if(l=f?f[h]:null,!l){let p=null;if("@id"in c){const y=await this.getContainerKey(a[d],a,d);y!==null&&(p=await this.resourceToTerm(await this.parsingContext.getContext(a),y))}p||(p=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[d]||(this.parsingContext.graphContainerTermStack[d]={}),l=this.parsingContext.graphContainerTermStack[d][h]=p}}return l}async getPropertiesDepth(a,o){let l=o;for(let c=o-1;c>0;c--)if(typeof a[c]!="number"){const d=await this.unaliasKeyword(a[c],a,c);if(d==="@reverse")return c;if(d==="@nest")l=c;else return l}return l}async getContainerKey(a,o,l){const c=await this.unaliasKeyword(a,o,l);return c==="@none"?null:c}validateReverseInEmbeddedNode(a,o,l){if(l&&o&&!this.parsingContext.rdfstarReverseInEmbedded)throw new t.ErrorCoded(`Illegal reverse property in embedded node in ${a}`,t.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(a,o,l,c,d,h,f){let p;if(h?(this.validateReverseSubject(c),p=this.dataFactory.quad(c,l,o,d)):p=this.dataFactory.quad(o,l,c,d),f){if(p.graph.termType!=="DefaultGraph"&&(p=this.dataFactory.quad(p.subject,p.predicate,p.object)),this.parsingContext.idStack[a-1])throw new t.ErrorCoded("Illegal multiple properties in an embedded node",t.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[a-1]=[p]}else this.parsingContext.emitQuad(a,p);const y=this.parsingContext.annotationsBuffer[a];if(y){for(const b of y)this.emitAnnotation(a,p,b);delete this.parsingContext.annotationsBuffer[a]}}emitAnnotation(a,o,l){let c;l.reverse?(this.validateReverseSubject(l.object),c=this.dataFactory.quad(l.object,l.predicate,o)):c=this.dataFactory.quad(o,l.predicate,l.object),this.parsingContext.emitQuad(a,c);for(const d of l.nestedAnnotations)this.emitAnnotation(a,c,d)}};return n.XSD="http://www.w3.org/2001/XMLSchema#",n.XSD_BOOLEAN=n.XSD+"boolean",n.XSD_INTEGER=n.XSD+"integer",n.XSD_DOUBLE=n.XSD+"double",n.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",sf.Util=n,sf}var _C;function _Y(){if(_C)return af;_C=1,Object.defineProperty(af,"__esModule",{value:!0}),af.EntryHandlerArrayValue=void 0;const t=ro(),e=Jr();let u=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(n,r,a,o,l){return this.test(n,r,null,a,o)}async test(n,r,a,o,l){return typeof o[l]=="number"}async handle(n,r,a,o,l,c){let d=await r.unaliasKeywordParent(o,c);if(d==="@list"){let h=null,f=0;for(let p=c-2;p>0;p--){const y=o[p];if(typeof y=="string"||typeof y=="number"){f=p,h=y;break}}if(h!==null){const p=await r.valueToTerm(await n.getContext(o),h,l,c,o);for(const y of p)await this.handleListElement(n,r,y,l,c,o.slice(0,f),f);p.length===0&&await this.handleListElement(n,r,null,l,c,o.slice(0,f),f)}}else if(d==="@set")await n.newOnValueJob(o.slice(0,-2),l,c-2,!1);else if(d!==void 0&&d!=="@type"){for(let f=c-1;f>0;f--)if(typeof o[f]!="number"){d=await r.unaliasKeyword(o[f],o,f);break}const h=await n.getContext(o.slice(0,-1));if("@list"in t.Util.getContextValueContainer(h,d)){n.emittedStack[c+1]=!0;const f=await r.valueToTerm(await n.getContext(o),d,l,c,o);for(const p of f)await this.handleListElement(n,r,p,l,c,o.slice(0,-1),c-1);f.length===0&&await this.handleListElement(n,r,null,l,c,o.slice(0,-1),c-1)}else n.shiftStack(c,1),await n.newOnValueJob(o.slice(0,-1),l,c-1,!1),n.contextTree.removeContext(o.slice(0,-1))}}async handleListElement(n,r,a,o,l,c,d){let h=n.listPointerStack[l];if(o!==null&&(await r.unaliasKeywords(o,c,l))["@value"]!==null){if(!h||!h.value){const f=r.dataFactory.blankNode();h={value:f,listRootDepth:d,listId:f}}else{const f=r.dataFactory.blankNode();n.emitQuad(l,r.dataFactory.quad(h.value,r.rdfRest,f,r.getDefaultGraph())),h.value=f}a&&n.emitQuad(l,r.dataFactory.quad(h.value,r.rdfFirst,a,r.getDefaultGraph()))}else h||(h={listRootDepth:d,listId:r.rdfNil});n.listPointerStack[l]=h,n.rdfstar&&n.annotationsBuffer[l]&&n.emitError(new e.ErrorCoded("Found an illegal annotation inside a list",e.ERROR_CODES.INVALID_ANNOTATION))}};return af.EntryHandlerArrayValue=u,af}var hf={},vC;function vY(){if(vC)return hf;vC=1,Object.defineProperty(hf,"__esModule",{value:!0}),hf.EntryHandlerInvalidFallback=void 0;let t=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(u,s,n,r,a){return!1}async test(u,s,n,r,a){return!0}async handle(u,s,n,r,a,o){u.emittedStack[o]=!1}};return hf.EntryHandlerInvalidFallback=t,hf}var pf={},yf={},wC;function ss(){if(wC)return yf;wC=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.EntryHandlerKeyword=void 0;let t=class{constructor(u){this.keyword=u}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(u,s,n,r,a){return!1}async test(u,s,n,r,a){return n===this.keyword}};return yf.EntryHandlerKeyword=t,yf}var SC;function wY(){if(SC)return pf;SC=1,Object.defineProperty(pf,"__esModule",{value:!0}),pf.EntryHandlerKeywordContext=void 0;const t=Jr(),e=ss();let u=class extends e.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(n,r,a,o,l,c){n.streamingProfile&&(n.processingStack[c]||n.processingType[c]||n.idStack[c]!==void 0)&&n.emitError(new t.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",t.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const d=n.getContext(o),h=n.parseContext(l,(await d).getContextRaw());n.contextTree.setContext(o.slice(0,-1),h),n.emitContext(l),await n.validateContext(await h)}};return pf.EntryHandlerKeywordContext=u,pf}var bf={},TC;function SY(){if(TC)return bf;TC=1,Object.defineProperty(bf,"__esModule",{value:!0}),bf.EntryHandlerKeywordGraph=void 0;const t=ss();let e=class extends t.EntryHandlerKeyword{constructor(){super("@graph")}async handle(s,n,r,a,o,l){s.graphStack[l+1]=!0}};return bf.EntryHandlerKeywordGraph=e,bf}var mf={},AC;function TY(){if(AC)return mf;AC=1,Object.defineProperty(mf,"__esModule",{value:!0}),mf.EntryHandlerKeywordId=void 0;const t=Jr(),e=ss();let u=class extends e.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(n,r,a,o,l,c){if(typeof l!="string"){if(n.rdfstar&&typeof l=="object"){const h=Object.keys(l);h.length===1&&h[0]==="@id"&&n.emitError(new t.ErrorCoded(`Invalid embedded node without property with @id ${l["@id"]}`,t.ERROR_CODES.INVALID_EMBEDDED_NODE))}else n.emitError(new t.ErrorCoded(`Found illegal @id '${l}'`,t.ERROR_CODES.INVALID_ID_VALUE));return}const d=await r.getPropertiesDepth(o,c);if(n.idStack[d]!==void 0&&(n.idStack[d][0].listHead?n.emitError(new t.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${o[c-1]}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):n.emitError(new t.ErrorCoded(`Found duplicate @ids '${n.idStack[d][0].value}' and '${l}'`,t.ERROR_CODES.COLLIDING_KEYWORDS))),n.rdfstar&&n.annotationsBuffer[c])for(const h of n.annotationsBuffer[c])h.depth===c&&n.emitError(new t.ErrorCoded(`Found an illegal @id inside an annotation: ${l}`,t.ERROR_CODES.INVALID_ANNOTATION));n.idStack[d]=r.nullableTermToArray(await r.resourceToTerm(await n.getContext(o),l))}};return mf.EntryHandlerKeywordId=u,mf}var gf={},EC;function AY(){if(EC)return gf;EC=1,Object.defineProperty(gf,"__esModule",{value:!0}),gf.EntryHandlerKeywordIncluded=void 0;const t=Jr(),e=ss();let u=class extends e.EntryHandlerKeyword{constructor(){super("@included")}async handle(n,r,a,o,l,c){typeof l!="object"&&n.emitError(new t.ErrorCoded(`Found illegal @included '${l}'`,t.ERROR_CODES.INVALID_INCLUDED_VALUE));const d=await r.unaliasKeywords(l,o,c,await n.getContext(o));"@value"in d&&n.emitError(new t.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in d&&n.emitError(new t.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_INCLUDED_VALUE)),n.emittedStack[c]=!1}};return gf.EntryHandlerKeywordIncluded=u,gf}var _f={},OC;function EY(){if(OC)return _f;OC=1,Object.defineProperty(_f,"__esModule",{value:!0}),_f.EntryHandlerKeywordNest=void 0;const t=Jr(),e=ss();let u=class extends e.EntryHandlerKeyword{constructor(){super("@nest")}async handle(n,r,a,o,l,c){typeof l!="object"&&n.emitError(new t.ErrorCoded(`Found invalid @nest entry for '${a}': '${l}'`,t.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await r.unaliasKeywords(l,o,c,await n.getContext(o))&&n.emitError(new t.ErrorCoded(`Found an invalid @value node for '${a}'`,t.ERROR_CODES.INVALID_NEST_VALUE)),n.emittedStack[c]=!1}};return _f.EntryHandlerKeywordNest=u,_f}var vf={},RC;function OY(){if(RC)return vf;RC=1,Object.defineProperty(vf,"__esModule",{value:!0}),vf.EntryHandlerKeywordType=void 0;const t=Jr(),e=ro(),u=im(),s=ss();let n=class extends s.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(a,o,l,c,d,h){const f=c[h],p=await a.getContext(c),y=o.rdfType,b=await o.unaliasKeywordParent(c,h),g=e.Util.isPropertyReverse(p,f,b),m=e.Util.isPropertyInEmbeddedNode(b);o.validateReverseInEmbeddedNode(l,g,m);const v=e.Util.isPropertyInAnnotationObject(b),_=Array.isArray(d)?d:[d];for(const A of _){typeof A!="string"&&a.emitError(new t.ErrorCoded(`Found illegal @type '${A}'`,t.ERROR_CODES.INVALID_TYPE_VALUE));const D=o.createVocabOrBaseTerm(p,A);D&&await u.EntryHandlerPredicate.handlePredicateObject(a,o,c,h,y,D,g,m,v)}let w=Promise.resolve(p),S=!1;for(const A of _.sort()){const D=e.Util.getContextValue(p,"@context",A,null);D&&(S=!0,w=w.then(L=>a.parseContext(D,L.getContextRaw())))}a.streamingProfile&&(S||!a.streamingProfileAllowOutOfOrderPlainType)&&(a.processingStack[h]||a.idStack[h])&&a.emitError(new t.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",t.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),S&&(w=w.then(A=>A.getContextRaw()["@propagate"]!==!0?new t.JsonLdContextNormalized(Object.assign(Object.assign({},A.getContextRaw()),{"@propagate":!1,"@__propagateFallback":p.getContextRaw()})):A),a.contextTree.setContext(c.slice(0,c.length-1),w)),a.processingType[h]=!0}};return vf.EntryHandlerKeywordType=n,vf}var wf={},xC;function RY(){if(xC)return wf;xC=1,Object.defineProperty(wf,"__esModule",{value:!0}),wf.EntryHandlerKeywordUnknownFallback=void 0;const t=Jr();let e=class j7{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(s,n,r,a,o){const l=await n.unaliasKeyword(r[a],r,a);return t.Util.isPotentialKeyword(l)?!(!o&&l==="@list"):!1}async test(s,n,r,a,o){return t.Util.isPotentialKeyword(r)}async handle(s,n,r,a,o,l){const c=j7.VALID_KEYWORDS_TYPES[r];c!==void 0?c&&typeof o!==c.type&&s.emitError(new t.ErrorCoded(`Invalid value type for '${r}' with value '${o}'`,c.errorCode)):s.strictValues&&s.emitError(new Error(`Unknown keyword '${r}' with value '${o}'`)),s.emittedStack[l]=!1}};return e.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:t.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:t.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null},wf.EntryHandlerKeywordUnknownFallback=e,wf}var Sf={},IC;function xY(){if(IC)return Sf;IC=1,Object.defineProperty(Sf,"__esModule",{value:!0}),Sf.EntryHandlerKeywordValue=void 0;const t=ss();let e=class extends t.EntryHandlerKeyword{constructor(){super("@value")}async validate(s,n,r,a,o){const l=r[a];return l&&!s.literalStack[a]&&await this.test(s,n,l,r,a)&&(s.literalStack[a]=!0),super.validate(s,n,r,a,o)}async test(s,n,r,a,o){return await n.unaliasKeyword(a[o],a.slice(0,a.length-1),o-1,!0)==="@value"}async handle(s,n,r,a,o,l){s.literalStack[l]=!0,delete s.unidentifiedValuesBuffer[l],delete s.unidentifiedGraphsBuffer[l],s.emittedStack[l]=!1}};return Sf.EntryHandlerKeywordValue=e,Sf}var Tf={},Af={},PC;function IY(){if(PC)return Af;PC=1,Object.defineProperty(Af,"__esModule",{value:!0}),Af.ContextTree=void 0;let t=class L7{constructor(){this.subTrees={}}getContext(u){if(u.length>0){const[s,...n]=u,r=this.subTrees[s];if(r){const a=r.getContext(n);if(a)return a.then(({context:o,depth:l})=>({context:o,depth:l+1}))}}return this.context?this.context.then(s=>({context:s,depth:0})):null}setContext(u,s){if(u.length===0)this.context=s;else{const[n,...r]=u;let a=this.subTrees[n];a||(a=this.subTrees[n]=new L7),a.setContext(r,s)}}removeContext(u){this.setContext(u,null)}};return Af.ContextTree=t,Af}var DC;function PY(){if(DC)return Tf;DC=1,Object.defineProperty(Tf,"__esModule",{value:!0}),Tf.ParsingContext=void 0;const t=Jr(),e=Py(),u=IY(),s=F7();let n=class M7{constructor(a){this.contextParser=new t.ContextParser({documentLoader:a.documentLoader,skipValidation:a.skipContextValidation}),this.streamingProfile=!!a.streamingProfile,this.baseIRI=a.baseIRI,this.produceGeneralizedRdf=!!a.produceGeneralizedRdf,this.allowSubjectList=!!a.allowSubjectList,this.processingMode=a.processingMode||s.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!a.strictValues,this.validateValueIndexes=!!a.validateValueIndexes,this.defaultGraph=a.defaultGraph,this.rdfDirection=a.rdfDirection,this.normalizeLanguageTags=a.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=a.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=a.rdfstar!==!1,this.rdfstarReverseInEmbedded=a.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new u.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=a.parser,a.context?(this.rootContext=this.parseContext(a.context),this.rootContext.then(o=>this.validateContext(o))):this.rootContext=Promise.resolve(new t.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(a,o,l){return this.contextParser.parse(a,{baseIRI:this.baseIRI,ignoreProtection:l,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:o,processingMode:this.activeProcessingMode})}validateContext(a){const o=a.getContextRaw()["@version"];if(o){if(this.activeProcessingMode&&o>this.activeProcessingMode)throw new e.ErrorCoded(`Unsupported JSON-LD version '${o}' under active processing mode ${this.activeProcessingMode}.`,e.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&o<this.activeProcessingMode)throw new e.ErrorCoded(`Invalid JSON-LD version ${o} under active processing mode ${this.activeProcessingMode}.`,e.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=o}}async getContext(a,o=1){const l=a;for(;typeof a[a.length-1]=="number";)a=a.slice(0,a.length-1);o&&(a=a.slice(0,-o));const c=await this.getContextPropagationAware(a);let h=c.context.getContextRaw();for(let f=c.depth;f<l.length-o;f++){const p=l[f],y=h[p];if(y&&typeof y=="object"&&"@context"in y){const b=(await this.parseContext(y,h,!0)).getContextRaw(),g=!(p in b)||b[p]["@context"]["@propagate"];(g!==!1||f===l.length-1-o)&&(h=Object.assign({},b),delete h["@propagate"],h[p]=Object.assign({},h[p]),"@id"in y&&(h[p]["@id"]=y["@id"]),delete h[p]["@context"],g!==!1&&this.contextTree.setContext(l.slice(0,f+o),Promise.resolve(new t.JsonLdContextNormalized(h))))}}return new t.JsonLdContextNormalized(h)}async getContextPropagationAware(a){const o=a.length;let l=null,c;do{c=!1,l&&"@__propagateFallback"in l.context.getContextRaw()?l.context=new t.JsonLdContextNormalized(l.context.getContextRaw()["@__propagateFallback"]):(l&&(a=a.slice(0,l.depth-1)),l=await this.contextTree.getContext(a)||{context:await this.rootContext,depth:0});const d=a[a.length-1];if(d in l.context.getContextRaw()){const h=l.context.getContextRaw()[d];h&&typeof h=="object"&&"@context"in h&&(c=!0)}}while(l.depth>0&&l.context.getContextRaw()["@propagate"]===!1&&l.depth!==o&&!c);return l.depth===0&&l.context.getContextRaw()["@propagate"]===!1&&l.depth!==o&&(l.context=new t.JsonLdContextNormalized({})),l}async newOnValueJob(a,o,l,c){await this.parser.newOnValueJob(a,o,l,c)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const a of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(a.depth,a.keys),this.parser.flushStacks(a.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(a,o){a===1&&(this.topLevelProperties=!0),this.parser.push(o)}emitError(a){this.parser.emit("error",a)}emitContext(a){this.parser.emit("context",a)}getUnidentifiedValueBufferSafe(a){let o=this.unidentifiedValuesBuffer[a];return o||(o=[],this.unidentifiedValuesBuffer[a]=o),o}getUnidentifiedGraphBufferSafe(a){let o=this.unidentifiedGraphsBuffer[a];return o||(o=[],this.unidentifiedGraphsBuffer[a]=o),o}getAnnotationsBufferSafe(a){let o=this.annotationsBuffer[a];return o||(o=[],this.annotationsBuffer[a]=o),o}getExpandOptions(){return M7.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(a,o){const l=this.idStack[a+o];if(l&&(this.idStack[a]=l,this.emittedStack[a]=!0,delete this.idStack[a+o]),this.pendingContainerFlushBuffers.length)for(const c of this.pendingContainerFlushBuffers)c.depth>=a+o&&(c.depth-=o,c.keys.splice(a,o));this.unidentifiedValuesBuffer[a+o]&&(this.unidentifiedValuesBuffer[a]=this.unidentifiedValuesBuffer[a+o],delete this.unidentifiedValuesBuffer[a+o]),this.annotationsBuffer[a+o-1]&&(this.annotationsBuffer[a-1]||(this.annotationsBuffer[a-1]=[]),this.annotationsBuffer[a-1]=[...this.annotationsBuffer[a-1],...this.annotationsBuffer[a+o-1]],delete this.annotationsBuffer[a+o-1])}};return n.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},Tf.ParsingContext=n,Tf}var Ef={},NC;function DY(){if(NC)return Ef;NC=1,Object.defineProperty(Ef,"__esModule",{value:!0}),Ef.EntryHandlerKeywordAnnotation=void 0;const t=ss(),e=Jr();let u=class extends t.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(n,r,a,o,l,c){(typeof l=="string"||typeof l=="object"&&l["@value"])&&n.emitError(new e.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(l)}`,e.ERROR_CODES.INVALID_ANNOTATION))}};return Ef.EntryHandlerKeywordAnnotation=u,Ef}var CC;function F7(){if(CC)return nf;CC=1,Object.defineProperty(nf,"__esModule",{value:!0}),nf.JsonLdParser=void 0;const t=Gq(),e=Jr(),u=Wt(),s=_Y(),n=C7(),r=vY(),a=im(),o=wY(),l=SY(),c=TY(),d=AY(),h=EY(),f=OY(),p=RY(),y=xY(),b=PY(),g=ro(),m=Nq(),v=DY();let _=class So extends u.Transform{constructor(S){super({readableObjectMode:!0}),S=S||{},this.options=S,this.parsingContext=new b.ParsingContext(Object.assign({parser:this},S)),this.util=new g.Util({dataFactory:S.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new t,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(S,A,D,L){let O,E=["application/activity+json"];if(L&&L.wellKnownMediaTypes&&(E=L.wellKnownMediaTypes),A!=="application/ld+json"&&!E.includes(A)){if(A!=="application/json"&&!A.endsWith("+json"))throw new e.ErrorCoded(`Unsupported JSON-LD media type ${A}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(D&&D.has("Link")&&D.forEach((M,U)=>{if(U==="link"){const j=(0,m.parse)(M);for(const q of j.get("rel","http://www.w3.org/ns/json-ld#context")){if(O)throw new e.ErrorCoded("Multiple JSON-LD context link headers were found on "+S,e.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);O=q.uri}}}),!O&&!(L!=null&&L.ignoreMissingContextLinkHeader))throw new e.ErrorCoded(`Missing context link header for media type ${A} on ${S}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let P;if(D&&D.has("Content-Type")){const M=D.get("Content-Type"),U=/; *profile=([^"]*)/.exec(M);U&&U[1]==="http://www.w3.org/ns/json-ld#streaming"&&(P=!0)}return new So(Object.assign({baseIRI:S,context:O,streamingProfile:P},L||{}))}import(S){if("pipe"in S){S.on("error",D=>A.emit("error",D));const A=S.pipe(new So(this.options));return A}else{const A=new u.PassThrough({readableObjectMode:!0});S.on("error",L=>D.emit("error",L)),S.on("data",L=>A.push(L)),S.on("end",()=>A.push(null));const D=A.pipe(new So(this.options));return D}}_transform(S,A,D){this.jsonParser.write(S),this.lastOnValueJob.then(()=>D(),L=>D(L))}async newOnValueJob(S,A,D,L){let O=!0;if(L&&D<this.lastDepth){const j=this.parsingContext.listPointerStack[this.lastDepth];j&&(j.value&&this.push(this.util.dataFactory.quad(j.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),j.listId.listHead=!0,this.parsingContext.idStack[j.listRootDepth+1]=[j.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await n.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),O=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const E=await this.util.unaliasKeyword(S[D],S,D),P=await this.util.unaliasKeywordParent(S,D);this.parsingContext.emittedStack[D]=!0;let M=!0;e.Util.isValidKeyword(E)&&P==="@reverse"&&E!=="@context"&&this.emit("error",new e.ErrorCoded(`Found the @id '${A}' inside an @reverse property`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let U=!1;this.parsingContext.validationStack.length>1&&(U=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let j=Math.max(1,this.parsingContext.validationStack.length-1);j<S.length-1;j++){const q=this.parsingContext.validationStack[j]||(this.parsingContext.validationStack[j]=await this.validateKey(S.slice(0,j+1),j,U));if(q.valid)!U&&q.property&&(U=!0);else{this.parsingContext.emittedStack[D]=!1,M=!1;break}}if(await this.util.isLiteral(S,D)&&(M=!1),M)for(const j of So.ENTRY_HANDLERS){const q=await j.test(this.parsingContext,this.util,E,S,D);if(q){await j.handle(this.parsingContext,this.util,E,S,A,D,q),j.isStackProcessor()&&(this.parsingContext.processingStack[D]=!0);break}}D===0&&Array.isArray(A)&&await this.util.validateValueIndexes(A),O&&D<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=D,this.lastKeys=S,this.parsingContext.unaliasedKeywordCacheStack.splice(D-1)}flushStacks(S){this.parsingContext.processingStack.splice(S,1),this.parsingContext.processingType.splice(S,1),this.parsingContext.emittedStack.splice(S,1),this.parsingContext.idStack.splice(S,1),this.parsingContext.graphStack.splice(S+1,1),this.parsingContext.graphContainerTermStack.splice(S,1),this.parsingContext.jsonLiteralStack.splice(S,1),this.parsingContext.validationStack.splice(S-1,2),this.parsingContext.literalStack.splice(S,this.parsingContext.literalStack.length-S),this.parsingContext.annotationsBuffer.splice(S,1)}async flushBuffer(S,A){let D=this.parsingContext.idStack[S];!!D||(D=this.parsingContext.idStack[S]=[this.util.dataFactory.blankNode()]);const O=this.parsingContext.unidentifiedValuesBuffer[S];if(O){for(const M of D){const U=await this.util.getDepthOffsetGraph(S,A),j=this.parsingContext.graphStack[S]||U>=0?this.parsingContext.idStack[S-U-1]:[await this.util.getGraphContainerValue(A,S)];if(j)for(const q of j){this.parsingContext.emittedStack[S]=!0;for(const $ of O)this.util.emitQuadChecked(S,M,$.predicate,$.object,q,$.reverse,$.isEmbedded)}else{const q=this.parsingContext.getUnidentifiedGraphBufferSafe(S-await this.util.getDepthOffsetGraph(S,A)-1);for(const $ of O)$.reverse?q.push({object:M,predicate:$.predicate,subject:$.object,isEmbedded:$.isEmbedded}):q.push({object:$.object,predicate:$.predicate,subject:M,isEmbedded:$.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(S,1),this.parsingContext.literalStack.splice(S,1),this.parsingContext.jsonLiteralStack.splice(S,1)}const E=this.parsingContext.unidentifiedGraphsBuffer[S];if(E){for(const M of D){const U=S===1&&M.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():M;this.parsingContext.emittedStack[S]=!0;for(const j of E)this.parsingContext.emitQuad(S,this.util.dataFactory.quad(j.subject,j.predicate,j.object,U))}this.parsingContext.unidentifiedGraphsBuffer.splice(S,1)}const P=this.parsingContext.annotationsBuffer[S];if(P){P.length>0&&S===1&&this.parsingContext.emitError(new e.ErrorCoded("Annotations can not be made on top-level nodes",e.ERROR_CODES.INVALID_ANNOTATION));const M=this.parsingContext.getAnnotationsBufferSafe(S-1);for(const U of P)M.push(U);delete this.parsingContext.annotationsBuffer[S]}}async validateKey(S,A,D){for(const L of So.ENTRY_HANDLERS)if(await L.validate(this.parsingContext,this.util,S,A,D))return{valid:!0,property:D||L.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=S=>{const A=this.jsonParser.stack.length,D=new Array(A+1).fill(0).map((L,O)=>O===A?this.jsonParser.key:this.jsonParser.stack[O].key);if(!this.isParsingContextInner(A)){const L=()=>this.newOnValueJob(D,S,A,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(D.slice(0,-1)))if(D[A]==="@context"){let O=this.contextJobs[A];O||(O=this.contextJobs[A]=[]),O.push(L)}else this.contextAwaitingJobs.push({job:L,keys:D,depth:A});else this.lastOnValueJob=this.lastOnValueJob.then(L);!this.parsingContext.streamingProfile&&A===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=S=>{this.emit("error",S)}}isParsingContextInner(S){for(let A=S;A>0;A--)if(this.jsonParser.stack[A-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const A of this.contextJobs)if(A)for(const D of A)await D();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const S=[];for(const A of this.contextAwaitingJobs)await this.util.unaliasKeyword(A.keys[A.depth],A.keys,A.depth,!0)==="@type"||typeof A.keys[A.depth]=="number"&&await this.util.unaliasKeyword(A.keys[A.depth-1],A.keys,A.depth-1,!0)==="@type"?this.typeJobs.push({job:A.job,keys:A.keys.slice(0,A.keys.length-1)}):S.push(A);for(const A of S){if(this.typeJobs.length>0){const D=[],L=[];for(let P=0;P<this.typeJobs.length;P++){const M=this.typeJobs[P];g.Util.isPrefixArray(M.keys,A.keys)&&(D.push(M),L.push(P))}const O=D.sort((P,M)=>P.keys.length-M.keys.length);for(const P of O)await P.job();const E=L.sort().reverse();for(const P of E)this.typeJobs.splice(P,1)}await A.job()}}};return _.DEFAULT_PROCESSING_MODE="1.1",_.ENTRY_HANDLERS=[new s.EntryHandlerArrayValue,new o.EntryHandlerKeywordContext,new c.EntryHandlerKeywordId,new d.EntryHandlerKeywordIncluded,new l.EntryHandlerKeywordGraph,new h.EntryHandlerKeywordNest,new f.EntryHandlerKeywordType,new y.EntryHandlerKeywordValue,new v.EntryHandlerKeywordAnnotation,new n.EntryHandlerContainer,new p.EntryHandlerKeywordUnknownFallback,new a.EntryHandlerPredicate,new r.EntryHandlerInvalidFallback],nf.JsonLdParser=_,nf}var jC;function NY(){return jC||(jC=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(F7(),t)}(s2)),s2}var Of={},LC;function B7(){if(LC)return Of;LC=1,Object.defineProperty(Of,"__esModule",{value:!0}),Of.DocumentLoaderMediated=void 0;const t=as(),e=ou(),u=Jr();let s=class q7 extends u.FetchDocumentLoader{constructor(r,a){super(q7.createFetcher(r,a)),this.mediatorHttp=r,this.context=a}static createFetcher(r,a){return async(o,l)=>{const c=await r.mediate({input:o,init:l,context:a});return c.json=async()=>JSON.parse(await(0,e.stringify)(t.ActorHttp.toNodeReadable(c.body))),c}}};return Of.DocumentLoaderMediated=s,Of}var MC;function CY(){if(MC)return rf;MC=1,Object.defineProperty(rf,"__esModule",{value:!0}),rf.ActorRdfParseJsonLd=void 0;const t=su(),e=Lt,u=NY(),s=B7();let n=class extends t.ActorRdfParseFixedMediaTypes{constructor(a){super(a)}async testHandle(a,o,l){if(l.has(e.KeysRdfParseHtmlScript.processingHtmlScript)&&o!=="application/ld+json")throw new Error("JSON-LD in script tags can only have media type 'application/ld+json'");if(!o||!(o in this.mediaTypePriorities||o.endsWith("+json")))throw new Error(`Unrecognized media type: ${o}`);return await this.testHandleChecked(a)}async runHandle(a,o,l){var h;return{data:u.JsonLdParser.fromHttpResponse(((h=a.metadata)==null?void 0:h.baseIRI)??"",o,a.headers,{documentLoader:l.get(e.KeysRdfParseJsonLd.documentLoader)??new s.DocumentLoaderMediated(this.mediatorHttp,l),strictValues:l.get(e.KeysRdfParseJsonLd.strictValues),...l.get(e.KeysRdfParseJsonLd.parserOptions)}).import(a.data)}}};return rf.ActorRdfParseJsonLd=n,rf}var FC;function jY(){return FC||(FC=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(CY(),t),u(B7(),t)}(a2)),a2}var u2={},Rf={},c2={},xf={},qC;function LY(){if(qC)return xf;qC=1,Object.defineProperty(xf,"__esModule",{value:!0}),xf.ActorRdfUpdateHypermedia=void 0;const t=ot;let e=class extends t.Actor{constructor(s,n){super(s),this.destinationType=n}async test(s){if(s.forceDestinationType&&this.destinationType!==s.forceDestinationType)throw new Error(`Actor ${this.name} is not able to handle destination type ${s.forceDestinationType}.`);return this.testMetadata(s)}};return xf.ActorRdfUpdateHypermedia=e,xf}var BC;function fA(){return BC||(BC=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(LY(),t)}(c2)),c2}var If={},j1={exports:{}},UC;function hA(){return UC||(UC=1,function(t,e){var u=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof I<"u"&&I,s=function(){function r(){this.fetch=!1,this.DOMException=u.DOMException}return r.prototype=u,new r}();(function(r){(function(a){var o=typeof r<"u"&&r||typeof self<"u"&&self||typeof o<"u"&&o,l={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function c(q){return q&&DataView.prototype.isPrototypeOf(q)}if(l.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(q){return q&&d.indexOf(Object.prototype.toString.call(q))>-1};function f(q){if(typeof q!="string"&&(q=String(q)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(q)||q==="")throw new TypeError('Invalid character in header field name: "'+q+'"');return q.toLowerCase()}function p(q){return typeof q!="string"&&(q=String(q)),q}function y(q){var $={next:function(){var Z=q.shift();return{done:Z===void 0,value:Z}}};return l.iterable&&($[Symbol.iterator]=function(){return $}),$}function b(q){this.map={},q instanceof b?q.forEach(function($,Z){this.append(Z,$)},this):Array.isArray(q)?q.forEach(function($){this.append($[0],$[1])},this):q&&Object.getOwnPropertyNames(q).forEach(function($){this.append($,q[$])},this)}b.prototype.append=function(q,$){q=f(q),$=p($);var Z=this.map[q];this.map[q]=Z?Z+", "+$:$},b.prototype.delete=function(q){delete this.map[f(q)]},b.prototype.get=function(q){return q=f(q),this.has(q)?this.map[q]:null},b.prototype.has=function(q){return this.map.hasOwnProperty(f(q))},b.prototype.set=function(q,$){this.map[f(q)]=p($)},b.prototype.forEach=function(q,$){for(var Z in this.map)this.map.hasOwnProperty(Z)&&q.call($,this.map[Z],Z,this)},b.prototype.keys=function(){var q=[];return this.forEach(function($,Z){q.push(Z)}),y(q)},b.prototype.values=function(){var q=[];return this.forEach(function($){q.push($)}),y(q)},b.prototype.entries=function(){var q=[];return this.forEach(function($,Z){q.push([Z,$])}),y(q)},l.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function g(q){if(q.bodyUsed)return Promise.reject(new TypeError("Already read"));q.bodyUsed=!0}function m(q){return new Promise(function($,Z){q.onload=function(){$(q.result)},q.onerror=function(){Z(q.error)}})}function v(q){var $=new FileReader,Z=m($);return $.readAsArrayBuffer(q),Z}function _(q){var $=new FileReader,Z=m($);return $.readAsText(q),Z}function w(q){for(var $=new Uint8Array(q),Z=new Array($.length),X=0;X<$.length;X++)Z[X]=String.fromCharCode($[X]);return Z.join("")}function S(q){if(q.slice)return q.slice(0);var $=new Uint8Array(q.byteLength);return $.set(new Uint8Array(q)),$.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(q){this.bodyUsed=this.bodyUsed,this._bodyInit=q,q?typeof q=="string"?this._bodyText=q:l.blob&&Blob.prototype.isPrototypeOf(q)?this._bodyBlob=q:l.formData&&FormData.prototype.isPrototypeOf(q)?this._bodyFormData=q:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(q)?this._bodyText=q.toString():l.arrayBuffer&&l.blob&&c(q)?(this._bodyArrayBuffer=S(q.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(q)||h(q))?this._bodyArrayBuffer=S(q):this._bodyText=q=Object.prototype.toString.call(q):this._bodyText="",this.headers.get("content-type")||(typeof q=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(q)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var q=g(this);if(q)return q;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var q=g(this);return q||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(v)}),this.text=function(){var q=g(this);if(q)return q;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(w(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}var D=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function L(q){var $=q.toUpperCase();return D.indexOf($)>-1?$:q}function O(q,$){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');$=$||{};var Z=$.body;if(q instanceof O){if(q.bodyUsed)throw new TypeError("Already read");this.url=q.url,this.credentials=q.credentials,$.headers||(this.headers=new b(q.headers)),this.method=q.method,this.mode=q.mode,this.signal=q.signal,!Z&&q._bodyInit!=null&&(Z=q._bodyInit,q.bodyUsed=!0)}else this.url=String(q);if(this.credentials=$.credentials||this.credentials||"same-origin",($.headers||!this.headers)&&(this.headers=new b($.headers)),this.method=L($.method||this.method||"GET"),this.mode=$.mode||this.mode||null,this.signal=$.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Z)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(Z),(this.method==="GET"||this.method==="HEAD")&&($.cache==="no-store"||$.cache==="no-cache")){var X=/([?&])_=[^&]*/;if(X.test(this.url))this.url=this.url.replace(X,"$1_="+new Date().getTime());else{var le=/\?/;this.url+=(le.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function E(q){var $=new FormData;return q.trim().split("&").forEach(function(Z){if(Z){var X=Z.split("="),le=X.shift().replace(/\+/g," "),K=X.join("=").replace(/\+/g," ");$.append(decodeURIComponent(le),decodeURIComponent(K))}}),$}function P(q){var $=new b,Z=q.replace(/\r?\n[\t ]+/g," ");return Z.split("\r").map(function(X){return X.indexOf(`
`)===0?X.substr(1,X.length):X}).forEach(function(X){var le=X.split(":"),K=le.shift().trim();if(K){var he=le.join(":").trim();$.append(K,he)}}),$}A.call(O.prototype);function M(q,$){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');$||($={}),this.type="default",this.status=$.status===void 0?200:$.status,this.ok=this.status>=200&&this.status<300,this.statusText=$.statusText===void 0?"":""+$.statusText,this.headers=new b($.headers),this.url=$.url||"",this._initBody(q)}A.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},M.error=function(){var q=new M(null,{status:0,statusText:""});return q.type="error",q};var U=[301,302,303,307,308];M.redirect=function(q,$){if(U.indexOf($)===-1)throw new RangeError("Invalid status code");return new M(null,{status:$,headers:{location:q}})},a.DOMException=o.DOMException;try{new a.DOMException}catch{a.DOMException=function($,Z){this.message=$,this.name=Z;var X=Error($);this.stack=X.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function j(q,$){return new Promise(function(Z,X){var le=new O(q,$);if(le.signal&&le.signal.aborted)return X(new a.DOMException("Aborted","AbortError"));var K=new XMLHttpRequest;function he(){K.abort()}K.onload=function(){var ie={status:K.status,statusText:K.statusText,headers:P(K.getAllResponseHeaders()||"")};ie.url="responseURL"in K?K.responseURL:ie.headers.get("X-Request-URL");var ae="response"in K?K.response:K.responseText;setTimeout(function(){Z(new M(ae,ie))},0)},K.onerror=function(){setTimeout(function(){X(new TypeError("Network request failed"))},0)},K.ontimeout=function(){setTimeout(function(){X(new TypeError("Network request failed"))},0)},K.onabort=function(){setTimeout(function(){X(new a.DOMException("Aborted","AbortError"))},0)};function Re(ie){try{return ie===""&&o.location.href?o.location.href:ie}catch{return ie}}K.open(le.method,Re(le.url),!0),le.credentials==="include"?K.withCredentials=!0:le.credentials==="omit"&&(K.withCredentials=!1),"responseType"in K&&(l.blob?K.responseType="blob":l.arrayBuffer&&le.headers.get("Content-Type")&&le.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(K.responseType="arraybuffer")),$&&typeof $.headers=="object"&&!($.headers instanceof b)?Object.getOwnPropertyNames($.headers).forEach(function(ie){K.setRequestHeader(ie,p($.headers[ie]))}):le.headers.forEach(function(ie,ae){K.setRequestHeader(ae,ie)}),le.signal&&(le.signal.addEventListener("abort",he),K.onreadystatechange=function(){K.readyState===4&&le.signal.removeEventListener("abort",he)}),K.send(typeof le._bodyInit>"u"?null:le._bodyInit)})}return j.polyfill=!0,o.fetch||(o.fetch=j,o.Headers=b,o.Request=O,o.Response=M),a.Headers=b,a.Request=O,a.Response=M,a.fetch=j,a})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var n=u.fetch?u:s;e=n.fetch,e.default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e}(j1,j1.exports)),j1.exports}var QC;function U7(){if(QC)return If;QC=1,Object.defineProperty(If,"__esModule",{value:!0}),If.QuadDestinationPatchSparqlUpdate=void 0;const t=as(),e=hA(),u=Ny(),s=Wt();let n=class{constructor(a,o,l){this.url=a,this.context=o,this.mediatorHttp=l}insert(a){return this.wrapSparqlUpdateRequest("INSERT",a)}async delete(a){return this.wrapSparqlUpdateRequest("DELETE",a)}async wrapSparqlUpdateRequest(a,o){const l=o.map(f=>{let p=`${(0,u.termToString)(f.subject)} ${(0,u.termToString)(f.predicate)} ${(0,u.termToString)(f.object)} .`;return f.graph.termType==="DefaultGraph"?p=`  ${p}
`:p=`  GRAPH ${(0,u.termToString)(f.graph)} { ${p} }
`,p}).prepend([`${a} DATA {
`]).append(["}"]),c=new s.Readable;c.wrap(l);const d=new e.Headers({"content-type":"application/sparql-update"}),h=await this.mediatorHttp.mediate({context:this.context,init:{headers:d,method:"PATCH",body:t.ActorHttp.toWebReadableStream(c)},input:this.url});await(0,t.validateAndCloseHttpResponse)(this.url,h)}async deleteGraphs(a,o,l){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}async createGraphs(a,o){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}};return If.QuadDestinationPatchSparqlUpdate=n,If}var HC;function MY(){if(HC)return Rf;HC=1,Object.defineProperty(Rf,"__esModule",{value:!0}),Rf.ActorRdfUpdateHypermediaPatchSparqlUpdate=void 0;const t=fA(),e=U7();let u=class extends t.ActorRdfUpdateHypermedia{constructor(n){super(n,"patchSparqlUpdate")}async testMetadata(n){if(!n.forceDestinationType&&!n.metadata.patchSparqlUpdate)throw new Error(`Actor ${this.name} could not detect a destination with 'application/sparql-update' as 'Accept-Patch' header.`);if(!n.forceDestinationType&&!n.exists)throw new Error(`Actor ${this.name} can only patch a destination that already exists.`);return!0}async run(n){return this.logInfo(n.context,`Identified as patchSparqlUpdate destination: ${n.url}`),{destination:new e.QuadDestinationPatchSparqlUpdate(n.url,n.context,this.mediatorHttp)}}};return Rf.ActorRdfUpdateHypermediaPatchSparqlUpdate=u,Rf}var $C;function FY(){return $C||($C=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(MY(),t),u(U7(),t)}(u2)),u2}var l2={},Pf={},Df={},VC;function Q7(){if(VC)return Df;VC=1,Object.defineProperty(Df,"__esModule",{value:!0}),Df.QuadDestinationPutLdp=void 0;const t=as(),e=hA();let u=class{constructor(n,r,a,o,l,c){this.url=n,this.context=r,this.mediaTypes=a,this.mediatorHttp=o,this.mediatorRdfSerializeMediatypes=l,this.mediatorRdfSerialize=c}insert(n){return this.wrapRdfUpdateRequest("INSERT",n)}async delete(n){throw new Error("Put-based LDP destinations don't support deletions")}async wrapRdfUpdateRequest(n,r){const{mediaTypes:a}=await this.mediatorRdfSerializeMediatypes.mediate({context:this.context,mediaTypes:!0}),o=this.mediaTypes.filter(f=>f in a),l=o.length>0?o[0]:Object.keys(a).sort((f,p)=>a[p]-a[f])[0],{handle:{data:c}}=await this.mediatorRdfSerialize.mediate({context:this.context,handle:{quadStream:r,context:this.context},handleMediaType:l}),d=new e.Headers({"content-type":l}),h=await this.mediatorHttp.mediate({context:this.context,init:{headers:d,method:"PUT",body:t.ActorHttp.toWebReadableStream(c)},input:this.url});await(0,t.validateAndCloseHttpResponse)(this.url,h)}async deleteGraphs(n,r,a){throw new Error("Put-based LDP destinations don't support named graphs")}async createGraphs(n,r){throw new Error("Put-based LDP destinations don't support named graphs")}};return Df.QuadDestinationPutLdp=u,Df}var kC;function qY(){if(kC)return Pf;kC=1,Object.defineProperty(Pf,"__esModule",{value:!0}),Pf.ActorRdfUpdateHypermediaPutLdp=void 0;const t=fA(),e=Q7();let u=class extends t.ActorRdfUpdateHypermedia{constructor(n){super(n,"putLdp")}async testMetadata(n){if(!n.forceDestinationType){if(!n.metadata.allowHttpMethods||!n.metadata.allowHttpMethods.includes("PUT"))throw new Error(`Actor ${this.name} could not detect a destination with 'Allow: PUT' header.`);if(n.exists)throw new Error(`Actor ${this.name} can only put on a destination that does not already exists.`)}return!0}async run(n){return this.logInfo(n.context,`Identified as putLdp destination: ${n.url}`),{destination:new e.QuadDestinationPutLdp(n.url,n.context,n.metadata.putAccepted||[],this.mediatorHttp,this.mediatorRdfSerializeMediatypes,this.mediatorRdfSerialize)}}};return Pf.ActorRdfUpdateHypermediaPutLdp=u,Pf}var zC;function BY(){return zC||(zC=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(qY(),t),u(Q7(),t)}(l2)),l2}var d2={},Nf={},Cf={},f2={},jf={},GC={},WC;function UY(){return WC||(WC=1,function(){(function(t){(function(e){var u={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function s(O){return O&&DataView.prototype.isPrototypeOf(O)}if(u.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(O){return O&&n.indexOf(Object.prototype.toString.call(O))>-1};function a(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(O))throw new TypeError("Invalid character in header field name");return O.toLowerCase()}function o(O){return typeof O!="string"&&(O=String(O)),O}function l(O){var E={next:function(){var P=O.shift();return{done:P===void 0,value:P}}};return u.iterable&&(E[Symbol.iterator]=function(){return E}),E}function c(O){this.map={},O instanceof c?O.forEach(function(E,P){this.append(P,E)},this):Array.isArray(O)?O.forEach(function(E){this.append(E[0],E[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(E){this.append(E,O[E])},this)}c.prototype.append=function(O,E){O=a(O),E=o(E);var P=this.map[O];this.map[O]=P?P+", "+E:E},c.prototype.delete=function(O){delete this.map[a(O)]},c.prototype.get=function(O){return O=a(O),this.has(O)?this.map[O]:null},c.prototype.has=function(O){return this.map.hasOwnProperty(a(O))},c.prototype.set=function(O,E){this.map[a(O)]=o(E)},c.prototype.forEach=function(O,E){for(var P in this.map)this.map.hasOwnProperty(P)&&O.call(E,this.map[P],P,this)},c.prototype.keys=function(){var O=[];return this.forEach(function(E,P){O.push(P)}),l(O)},c.prototype.values=function(){var O=[];return this.forEach(function(E){O.push(E)}),l(O)},c.prototype.entries=function(){var O=[];return this.forEach(function(E,P){O.push([P,E])}),l(O)},u.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);function d(O){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}function h(O){return new Promise(function(E,P){O.onload=function(){E(O.result)},O.onerror=function(){P(O.error)}})}function f(O){var E=new FileReader,P=h(E);return E.readAsArrayBuffer(O),P}function p(O){var E=new FileReader,P=h(E);return E.readAsText(O),P}function y(O){for(var E=new Uint8Array(O),P=new Array(E.length),M=0;M<E.length;M++)P[M]=String.fromCharCode(E[M]);return P.join("")}function b(O){if(O.slice)return O.slice(0);var E=new Uint8Array(O.byteLength);return E.set(new Uint8Array(O)),E.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(O){this._bodyInit=O,O?typeof O=="string"?this._bodyText=O:u.blob&&Blob.prototype.isPrototypeOf(O)?this._bodyBlob=O:u.formData&&FormData.prototype.isPrototypeOf(O)?this._bodyFormData=O:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)?this._bodyText=O.toString():u.arrayBuffer&&u.blob&&s(O)?(this._bodyArrayBuffer=b(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(O)||r(O))?this._bodyArrayBuffer=b(O):this._bodyText=O=Object.prototype.toString.call(O):this._bodyText="",this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var O=d(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var O=d(this);if(O)return O;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(O){var E=O.toUpperCase();return m.indexOf(E)>-1?E:O}function _(O,E){E=E||{};var P=E.body;if(O instanceof _){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,E.headers||(this.headers=new c(O.headers)),this.method=O.method,this.mode=O.mode,this.signal=O.signal,!P&&O._bodyInit!=null&&(P=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=E.credentials||this.credentials||"same-origin",(E.headers||!this.headers)&&(this.headers=new c(E.headers)),this.method=v(E.method||this.method||"GET"),this.mode=E.mode||this.mode||null,this.signal=E.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&P)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(P)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})};function w(O){var E=new FormData;return O.trim().split("&").forEach(function(P){if(P){var M=P.split("="),U=M.shift().replace(/\+/g," "),j=M.join("=").replace(/\+/g," ");E.append(decodeURIComponent(U),decodeURIComponent(j))}}),E}function S(O){var E=new c,P=O.replace(/\r?\n[\t ]+/g," ");return P.split(/\r?\n/).forEach(function(M){var U=M.split(":"),j=U.shift().trim();if(j){var q=U.join(":").trim();E.append(j,q)}}),E}g.call(_.prototype);function A(O,E){E||(E={}),this.type="default",this.status=E.status===void 0?200:E.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in E?E.statusText:"OK",this.headers=new c(E.headers),this.url=E.url||"",this._initBody(O)}g.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},A.error=function(){var O=new A(null,{status:0,statusText:""});return O.type="error",O};var D=[301,302,303,307,308];A.redirect=function(O,E){if(D.indexOf(E)===-1)throw new RangeError("Invalid status code");return new A(null,{status:E,headers:{location:O}})},e.DOMException=t.DOMException;try{new e.DOMException}catch{e.DOMException=function(E,P){this.message=E,this.name=P;var M=Error(E);this.stack=M.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function L(O,E){return new Promise(function(P,M){var U=new _(O,E);if(U.signal&&U.signal.aborted)return M(new e.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function q(){j.abort()}j.onload=function(){var $={status:j.status,statusText:j.statusText,headers:S(j.getAllResponseHeaders()||"")};$.url="responseURL"in j?j.responseURL:$.headers.get("X-Request-URL");var Z="response"in j?j.response:j.responseText;P(new A(Z,$))},j.onerror=function(){M(new TypeError("Network request failed"))},j.ontimeout=function(){M(new TypeError("Network request failed"))},j.onabort=function(){M(new e.DOMException("Aborted","AbortError"))},j.open(U.method,U.url,!0),U.credentials==="include"?j.withCredentials=!0:U.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&u.blob&&(j.responseType="blob"),U.headers.forEach(function($,Z){j.setRequestHeader(Z,$)}),U.signal&&(U.signal.addEventListener("abort",q),j.onreadystatechange=function(){j.readyState===4&&U.signal.removeEventListener("abort",q)}),j.send(typeof U._bodyInit>"u"?null:U._bodyInit)})}return L.polyfill=!0,t.fetch||(t.fetch=L,t.Headers=c,t.Request=_,t.Response=A),e.Headers=c,e.Request=_,e.Response=A,e.fetch=L,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:I)}()),GC}var h2={},Lf={},JC;function QY(){if(JC)return Lf;JC=1,Object.defineProperty(Lf,"__esModule",{value:!0}),Lf.SparqlXmlParser=void 0;const t=Et(),e=o7(),u=Wt();let s=class{constructor(r){r=r||{},this.dataFactory=r.dataFactory||new t.DataFactory,this.prefixVariableQuestionMark=!!r.prefixVariableQuestionMark}parseXmlResultsStream(r){const a=_=>v.emit("error",_);r.on("error",a);const o=new e.SaxesParser,l=[];let c=!1,d=!1;const h=[];let f={},p="",y="",b,g="",m=[];o.on("error",a),o.on("opentag",_=>{_.name==="variable"&&this.stackEquals(l,["sparql","head"])?h.push(this.dataFactory.variable(_.attributes.name)):_.name==="results"&&this.stackEquals(l,["sparql"])?d=!0:_.name==="result"&&this.stackEquals(l,["sparql","results"])?f={}:_.name==="binding"&&this.stackEquals(l,["sparql","results","result"])?(p=_.attributes.name||"",y="",b="",g="",m=[]):_.name==="triple"&&this.stackBeginsWith(l,["sparql","results","result"])?m.push({components:{}}):l[l.length-1]==="triple"&&this.stackBeginsWith(l,["sparql","results","result","binding"])?(y="",b="",g="",["subject","predicate","object"].includes(_.name)?m[m.length-1].currentComponent=_.name:a(new Error(`Illegal quoted triple component '${_.name}' found on line ${o.line+1}`))):this.stackBeginsWith(l,["sparql","results","result","binding"])&&(y=_.name,"xml:lang"in _.attributes?b=_.attributes["xml:lang"]:"datatype"in _.attributes?b=this.dataFactory.namedNode(_.attributes.datatype):b=void 0),l.push(_.name)}),o.on("closetag",_=>{if(this.stackEquals(l,["sparql","head"])&&(v.emit("variables",h),c=!0),this.stackEquals(l,["sparql","results","result"])&&v.push(f),this.stackBeginsWith(l,["sparql","results","result","binding"])){let w;if(!p&&y)a(new Error(`Terms should have a name on line ${o.line+1}`));else if(y==="uri")w=this.dataFactory.namedNode(g);else if(y==="bnode")w=this.dataFactory.blankNode(g);else if(y==="literal")w=this.dataFactory.literal(g,b);else if(l[l.length-1]==="triple"){const S=m.pop();S&&S.components.subject&&S.components.predicate&&S.components.object?w=this.dataFactory.quad(S.components.subject,S.components.predicate,S.components.object):a(new Error(`Incomplete quoted triple on line ${o.line+1}`))}else y&&a(new Error(`Invalid term type '${y}' on line ${o.line+1}`));if(w)if(m.length>0){const S=m[m.length-1];S.components[S.currentComponent]&&a(new Error(`The ${S.currentComponent} in a quoted triple on line ${o.line+1} was already defined before`)),S.components[S.currentComponent]=w}else{const S=this.prefixVariableQuestionMark?"?"+p:p;f[S]=w}y=void 0}l.pop()}),o.on("text",_=>{this.stackBeginsWith(l,["sparql","results","result","binding"])&&l[l.length-1]===y&&(g=_)});const v=r.on("end",_=>{d?c||v.emit("variables",[]):v.emit("error",new Error("No valid SPARQL query results were found."))}).pipe(new u.Transform({objectMode:!0,transform(_,w,S){o.write(_),S()}}));return v}parseXmlBooleanStream(r){return new Promise((a,o)=>{const l=new e.SaxesParser,c=[];l.on("error",o),l.on("opentag",d=>{c.push(d.name)}),l.on("closetag",d=>{c.pop()}),l.on("text",d=>{this.stackEquals(c,["sparql","boolean"])&&a(d==="true")}),r.on("error",o).on("data",d=>l.write(d)).on("end",()=>o(new Error("No valid ASK response was found.")))})}stackEquals(r,a){return r.length===a.length&&r.every((o,l)=>a[l]===o)}stackBeginsWith(r,a){return r.length>=a.length&&a.every((o,l)=>r[l]===o)}};return Lf.SparqlXmlParser=s,Lf}var XC;function HY(){return XC||(XC=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(QY(),t)}(h2)),h2}var p2={exports:{}},KC;function $Y(){return KC||(KC=1,function(t){(function(){var e;typeof window=="object"&&window?e=window:e=I,t.exports?t.exports=e.Promise?e.Promise:r:e.Promise||(e.Promise=r);var u=e.setImmediate||function(f){setTimeout(f,1)};function s(f,p){return function(){f.apply(p,arguments)}}var n=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function r(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof f!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],h(f,s(o,this),s(l,this))}function a(f){var p=this;if(this._state===null){this._deferreds.push(f);return}u(function(){var y=p._state?f.onFulfilled:f.onRejected;if(y===null){(p._state?f.resolve:f.reject)(p._value);return}var b;try{b=y(p._value)}catch(g){f.reject(g);return}f.resolve(b)})}function o(f){try{if(f===this)throw new TypeError("A promise cannot be resolved with itself.");if(f&&(typeof f=="object"||typeof f=="function")){var p=f.then;if(typeof p=="function"){h(s(p,f),s(o,this),s(l,this));return}}this._state=!0,this._value=f,c.call(this)}catch(y){l.call(this,y)}}function l(f){this._state=!1,this._value=f,c.call(this)}function c(){for(var f=0,p=this._deferreds.length;f<p;f++)a.call(this,this._deferreds[f]);this._deferreds=null}function d(f,p,y,b){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof p=="function"?p:null,this.resolve=y,this.reject=b}function h(f,p,y){var b=!1;try{f(function(g){b||(b=!0,p(g))},function(g){b||(b=!0,y(g))})}catch(g){if(b)return;b=!0,y(g)}}r.prototype.catch=function(f){return this.then(null,f)},r.prototype.then=function(f,p){var y=this;return new r(function(b,g){a.call(y,new d(f,p,b,g))})},r.all=function(){var f=Array.prototype.slice.call(arguments.length===1&&n(arguments[0])?arguments[0]:arguments);return new r(function(p,y){if(f.length===0)return p([]);var b=f.length;function g(v,_){try{if(_&&(typeof _=="object"||typeof _=="function")){var w=_.then;if(typeof w=="function"){w.call(_,function(S){g(v,S)},y);return}}f[v]=_,--b===0&&p(f)}catch(S){y(S)}}for(var m=0;m<f.length;m++)g(m,f[m])})},r.resolve=function(f){return f&&typeof f=="object"&&f.constructor===r?f:new r(function(p){p(f)})},r.reject=function(f){return new r(function(p,y){y(f)})},r.race=function(f){return new r(function(p,y){for(var b=0,g=f.length;b<g;b++)f[b].then(p,y)})}})()}(p2)),p2.exports}var y2,YC;function VY(){if(YC)return y2;YC=1;var t=$Y();return y2=function(e,u,s){typeof u=="function"&&(s=u,u=null);var n="",r=new t(function(a,o){e.on("data",function(l){n+=typeof u=="string"?l.toString(u):l.toString()}),e.on("end",function(){a(n)}),e.on("error",o)});return s&&r.then(function(a){s(null,a)},s),r},y2}var Mf={},ZC;function kY(){if(ZC)return Mf;ZC=1,Object.defineProperty(Mf,"__esModule",{value:!0}),Mf.ReadableWebToNodeStream=void 0;const t=Wt();class e extends t.Readable{constructor(s){super(),this.bytesRead=0,this.released=!1,this.reader=s.getReader()}async _read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read();const s=await this.pendingRead;delete this.pendingRead,s.done||this.released?this.push(null):(this.bytesRead+=s.value.length,this.push(s.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}return Mf.ReadableWebToNodeStream=e,Mf}var e8;function zY(){if(e8)return jf;e8=1,Object.defineProperty(jf,"__esModule",{value:!0}),jf.SparqlEndpointFetcher=void 0,UY();const t=Ay(),e=Wq(),u=HY(),s=VY(),n=kY(),r=is,a=R7();let o=class Ms{constructor(c){c=c||{},this.method=c.method||"POST",this.additionalUrlParams=c.additionalUrlParams||new URLSearchParams,this.defaultHeaders=c.defaultHeaders||new Headers,this.fetchCb=c.fetch,this.sparqlJsonParser=new e.SparqlJsonParser(c),this.sparqlXmlParser=new u.SparqlXmlParser(c),this.sparqlParsers={[Ms.CONTENTTYPE_SPARQL_JSON]:{parseBooleanStream:d=>this.sparqlJsonParser.parseJsonBooleanStream(d),parseResultsStream:d=>this.sparqlJsonParser.parseJsonResultsStream(d)},[Ms.CONTENTTYPE_SPARQL_XML]:{parseBooleanStream:d=>this.sparqlXmlParser.parseXmlBooleanStream(d),parseResultsStream:d=>this.sparqlXmlParser.parseXmlResultsStream(d)}},this.timeout=c.timeout}getQueryType(c){const d=new t.Parser({sparqlStar:!0}).parse(c);return d.type==="query"?d.queryType==="DESCRIBE"?"CONSTRUCT":d.queryType:"UNKNOWN"}getUpdateTypes(c){const d=new t.Parser({sparqlStar:!0}).parse(c);if(d.type==="update"){const h={};for(const f of d.updates)"type"in f?h[f.type]=!0:h[f.updateType]=!0;return h}else return"UNKNOWN"}async fetchBindings(c,d){const[h,f]=await this.fetchRawStream(c,d,Ms.CONTENTTYPE_SPARQL),p=this.sparqlParsers[h];if(!p)throw new Error("Unknown SPARQL results content type: "+h);return p.parseResultsStream(f)}async fetchAsk(c,d){const[h,f]=await this.fetchRawStream(c,d,Ms.CONTENTTYPE_SPARQL),p=this.sparqlParsers[h];if(!p)throw new Error("Unknown SPARQL results content type: "+h);return p.parseBooleanStream(f)}async fetchTriples(c,d){return(await this.fetchRawStream(c,d,Ms.CONTENTTYPE_TURTLE))[1].pipe(new r.StreamParser({format:Ms.CONTENTTYPE_TURTLE}))}async fetchUpdate(c,d){const h=globalThis.AbortController||await Promise.resolve().then(()=>Qo()),f=new h,p={};this.defaultHeaders.forEach((b,g)=>{p[g]=b});const y={method:"POST",headers:Object.assign(Object.assign({},p),{"content-type":"application/sparql-update"}),body:d,signal:f.signal};await this.handleFetchCall(c,y,{ignoreBody:!0}),f.abort()}async fetchRawStream(c,d,h){let f=this.method==="POST"?c:c+"?query="+encodeURIComponent(d);const p=new Headers(this.defaultHeaders);let y;return p.append("Accept",h),this.method==="POST"?(p.append("Content-Type","application/x-www-form-urlencoded"),y=new URLSearchParams,y.set("query",d),this.additionalUrlParams.forEach((b,g)=>{y.set(g,b)}),p.append("Content-Length",y.toString().length.toString())):this.additionalUrlParams.toString()!==""&&(f+=`&${this.additionalUrlParams.toString()}`),this.handleFetchCall(f,{headers:p,method:this.method,body:y})}async handleFetchCall(c,d,h={}){let f;if(this.timeout){const g=new AbortController;d.signal=g.signal,f=setTimeout(()=>g.abort(),this.timeout)}const p=await(this.fetchCb||fetch)(c,d);clearTimeout(f);let y;h.ignoreBody||(y=a(p.body)?p.body:new n.ReadableWebToNodeStream(p.body));let b=p.headers.get("Content-Type")||"";if(b.indexOf(";")>0&&(b=b.substr(0,b.indexOf(";"))),!p.ok){const g=/^[^?]*/u.exec(c)[0];let m="empty response";throw y&&(m=await s(y)),new Error(`Invalid SPARQL endpoint response from ${g} (HTTP status ${p.status}):
${m}`)}return[b,y]}};return o.CONTENTTYPE_SPARQL_JSON="application/sparql-results+json",o.CONTENTTYPE_SPARQL_XML="application/sparql-results+xml",o.CONTENTTYPE_SPARQL=`${o.CONTENTTYPE_SPARQL_JSON};q=1.0,${o.CONTENTTYPE_SPARQL_XML};q=0.7`,o.CONTENTTYPE_TURTLE="text/turtle",jf.SparqlEndpointFetcher=o,jf}var t8;function H7(){return t8||(t8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(zY(),t)}(f2)),f2}var r8;function $7(){if(r8)return Cf;r8=1,Object.defineProperty(Cf,"__esModule",{value:!0}),Cf.QuadDestinationSparql=void 0;const t=ou(),e=H7(),u=Ny();let s=class{constructor(r,a,o){this.url=r,this.context=a,this.mediatorHttp=o,this.endpointFetcher=new e.SparqlEndpointFetcher({fetch:(l,c)=>this.mediatorHttp.mediate({input:l,init:c,context:this.context}),prefixVariableQuestionMark:!0})}insert(r){return this.wrapSparqlUpdateRequest("INSERT",r)}async delete(r){return this.wrapSparqlUpdateRequest("DELETE",r)}async wrapSparqlUpdateRequest(r,a){const o=a.map(c=>{let d=`${(0,u.termToString)(c.subject)} ${(0,u.termToString)(c.predicate)} ${(0,u.termToString)(c.object)} .`;return c.graph.termType==="DefaultGraph"?d=`  ${d}
`:d=`  GRAPH ${(0,u.termToString)(c.graph)} { ${d} }
`,d}).prepend([`${r} DATA {
`]).append(["}"]),l=await(0,t.stringify)(o);await this.endpointFetcher.fetchUpdate(this.url,l)}async deleteGraphs(r,a,o){const l=Array.isArray(r)?r:[r],c=[];for(const d of l){let h;typeof d=="string"?h=d:d.termType==="DefaultGraph"?h="DEFAULT":h=`GRAPH <${d.value}>`,c.push(`${o?"DROP":"CLEAR"} ${a?"":"SILENT "}${h}`)}await this.endpointFetcher.fetchUpdate(this.url,c.join("; "))}async createGraphs(r,a){const o=[];for(const l of r)o.push(`CREATE${a?"":" SILENT"} GRAPH <${l.value}>`);await this.endpointFetcher.fetchUpdate(this.url,o.join("; "))}};return Cf.QuadDestinationSparql=s,Cf}var n8;function GY(){if(n8)return Nf;n8=1,Object.defineProperty(Nf,"__esModule",{value:!0}),Nf.ActorRdfUpdateHypermediaSparql=void 0;const t=fA(),e=$7();let u=class extends t.ActorRdfUpdateHypermedia{constructor(n){super(n,"sparql")}async testMetadata(n){if(!n.forceDestinationType&&!n.metadata.sparqlService&&!(this.checkUrlSuffixSparql&&n.url.endsWith("/sparql"))&&!(this.checkUrlSuffixUpdate&&n.url.endsWith("/update")))throw new Error(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql or /update.`);return!0}async run(n){return this.logInfo(n.context,`Identified as sparql destination: ${n.url}`),{destination:new e.QuadDestinationSparql(n.metadata.sparqlService||n.url,n.context,this.mediatorHttp)}}};return Nf.ActorRdfUpdateHypermediaSparql=u,Nf}var i8;function WY(){return i8||(i8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(GY(),t),u($7(),t)}(d2)),d2}var b2={},Ff={},a8;function JY(){if(a8)return Ff;a8=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.ActorQueryOperationBgpJoin=void 0;const t=wt(),e=Ot();let u=class V7 extends t.ActorQueryOperationTypedMediated{constructor(n){super(n,"bgp")}async testOperation(n,r){return!0}async runOperation(n,r){return this.mediatorQueryOperation.mediate({operation:V7.FACTORY.createJoin(n.patterns),context:r})}};return Ff.ActorQueryOperationBgpJoin=u,u.FACTORY=new e.Factory,Ff}var s8;function XY(){return s8||(s8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(JY(),t)}(b2)),b2}var m2={},qf={},o8;function KY(){if(o8)return qf;o8=1,Object.defineProperty(qf,"__esModule",{value:!0}),qf.ActorQueryOperationAsk=void 0;const t=wt();let e=class extends t.ActorQueryOperationTypedMediated{constructor(s){super(s,"ask")}async testOperation(s,n){return!0}async runOperation(s,n){const r=await this.mediatorQueryOperation.mediate({operation:s.input,context:n}),{bindingsStream:a}=t.ActorQueryOperation.getSafeBindings(r);return{type:"boolean",execute:async()=>(await a.take(1).toArray()).length===1}}};return qf.ActorQueryOperationAsk=e,qf}var u8;function YY(){return u8||(u8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(KY(),t)}(m2)),m2}var g2={},Bf={},Uf={},c8;function k7(){if(c8)return Uf;c8=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.BindingsToQuadsIterator=void 0;const t=Dt(),e=Et(),u=un(),s=new e.DataFactory;let n=class D0 extends t.MultiTransformIterator{constructor(a,o){super(o,{autoStart:!1}),this.template=a,this.blankNodeCounter=0}static bindTerm(a,o){return o.termType==="Variable"?a.get(o):o}static bindQuad(a,o){try{return(0,u.mapTermsNested)(o,l=>{const c=D0.bindTerm(a,l);if(!c)throw new Error("Unbound term");return c})}catch{}}static localizeBlankNode(a,o){return o.termType==="BlankNode"?s.blankNode(`${o.value}${a}`):o}static localizeQuad(a,o){return(0,u.mapTermsNested)(o,l=>D0.localizeBlankNode(a,l))}bindTemplate(a,o,l){return o.map(D0.localizeQuad.bind(null,l)).map(d=>D0.bindQuad.bind(null,a)(d)).filter(Boolean)}_createTransformer(a){return new t.ArrayIterator(this.bindTemplate(a,this.template,this.blankNodeCounter++),{autoStart:!1})}};return Uf.BindingsToQuadsIterator=n,Uf}var l8;function ZY(){if(l8)return Bf;l8=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.ActorQueryOperationConstruct=void 0;const t=wt(),e=un(),u=Ot(),s=k7();let n=class z7 extends t.ActorQueryOperationTypedMediated{constructor(a){super(a,"construct")}static getVariables(a){return(0,e.uniqTerms)([].concat.apply([],a.map(o=>(0,e.getVariables)((0,e.getTermsNested)(o)))))}async testOperation(a,o){return!0}async runOperation(a,o){const l=z7.getVariables(a.template),c={type:u.Algebra.types.PROJECT,input:a.input,variables:l},d=t.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:c,context:o})),h=new s.BindingsToQuadsIterator(a.template,d.bindingsStream);return{metadata:()=>d.metadata().then(p=>({...p,order:void 0,cardinality:{type:p.cardinality.type,value:p.cardinality.value*a.template.length},canContainUndefs:!1,availableOrders:void 0})),quadStream:h,type:"quads"}}};return Bf.ActorQueryOperationConstruct=n,Bf}var d8;function G7(){return d8||(d8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(ZY(),t),u(k7(),t)}(g2)),g2}var _2={},Qf={},f8;function eZ(){if(f8)return Qf;f8=1,Object.defineProperty(Qf,"__esModule",{value:!0}),Qf.ActorQueryOperationDistinctHash=void 0;const t=wt();let e=class extends t.ActorQueryOperationTypedMediated{constructor(s){super(s,"distinct")}async testOperation(s,n){return!0}async runOperation(s,n){const r=await this.mediatorQueryOperation.mediate({operation:s.input,context:n});if(r.type==="quads"&&this.mediatorHashQuads!==void 0){const l=t.ActorQueryOperation.getSafeQuads(r);return{type:"quads",quadStream:l.quadStream.filter(await this.newHashFilterQuads(n)),metadata:l.metadata}}const a=t.ActorQueryOperation.getSafeBindings(r);return{type:"bindings",bindingsStream:a.bindingsStream.filter(await this.newHashFilter(n)),metadata:a.metadata}}async newHashFilter(s){const{hashFunction:n}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:s}),r={};return a=>{const o=n(a);return!(o in r)&&(r[o]=!0)}}async newHashFilterQuads(s){if(this.mediatorHashQuads===void 0)return a=>!0;const{hashFunction:n}=await this.mediatorHashQuads.mediate({allowHashCollisions:!0,context:s}),r={};return a=>{const o=n(a);return!(o in r)&&(r[o]=!0)}}};return Qf.ActorQueryOperationDistinctHash=e,Qf}var h8;function tZ(){return h8||(h8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(eZ(),t)}(_2)),_2}var v2={},Hf={},p8;function rZ(){if(p8)return Hf;p8=1,Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.ActorQueryOperationFromQuad=void 0;const t=wt(),e=Ot();let u=class hr extends t.ActorQueryOperationTypedMediated{constructor(n){super(n,"from")}static copyOperation(n,r){const a={};for(const o of Object.keys(n))Array.isArray(n[o])&&o!=="template"?o==="variables"?a[o]=n[o]:a[o]=n[o].map(r):hr.ALGEBRA_TYPES.includes(n[o].type)?a[o]=r(n[o]):a[o]=n[o];return a}static applyOperationDefaultGraph(n,r){if(n.type==="bgp"&&n.patterns.length>0||n.type==="path"||n.type==="pattern"){if(n.type==="bgp")return hr.joinOperations(n.patterns.map(o=>{if(o.graph.termType!=="DefaultGraph")return hr.FACTORY.createBgp([o]);const l=r.map(c=>hr.FACTORY.createBgp([Object.assign(hr.FACTORY.createPattern(o.subject,o.predicate,o.object,c),{metadata:o.metadata})]));return hr.unionOperations(l)}));if(n.graph.termType!=="DefaultGraph")return n;const a=r.map(o=>n.type==="path"?hr.FACTORY.createPath(n.subject,n.predicate,n.object,o):Object.assign(hr.FACTORY.createPattern(n.subject,n.predicate,n.object,o),{metadata:n.metadata}));return hr.unionOperations(a)}return hr.copyOperation(n,a=>this.applyOperationDefaultGraph(a,r))}static applyOperationNamedGraph(n,r,a){if(n.type==="bgp"&&n.patterns.length>0||n.type==="path"||n.type==="pattern"){const o=n.type==="bgp"?n.patterns[0].graph:n.graph;if(o.termType==="DefaultGraph")return{type:e.Algebra.types.BGP,patterns:[]};if(o.termType==="Variable"){if(r.length===1){const c=r[0],d={};d[`?${o.value}`]=c;const h=hr.FACTORY.createValues([o],[d]);let f;return n.type==="bgp"?f=hr.FACTORY.createBgp(n.patterns.map(p=>hr.FACTORY.createPattern(p.subject,p.predicate,p.object,c))):n.type==="path"?f=hr.FACTORY.createPath(n.subject,n.predicate,n.object,c):f=hr.FACTORY.createPattern(n.subject,n.predicate,n.object,c),hr.FACTORY.createJoin([h,f])}return hr.unionOperations(r.map(c=>hr.applyOperationNamedGraph(n,[c],a)))}return[...r,...a].some(c=>c.equals(o))?n:{type:e.Algebra.types.BGP,patterns:[]}}return hr.copyOperation(n,o=>this.applyOperationNamedGraph(o,r,a))}static joinOperations(n){if(n.length===1)return n[0];if(n.length>1)return hr.FACTORY.createJoin(n);throw new Error("A join can only be applied on at least one operation")}static unionOperations(n){if(n.length===1)return n[0];if(n.length>1)return hr.FACTORY.createUnion(n);throw new Error("A union can only be applied on at least one operation")}static createOperation(n){let r=n.input;return n.default.length>0&&(r=hr.applyOperationDefaultGraph(r,n.default)),(n.named.length>0||n.default.length>0)&&(r=hr.applyOperationNamedGraph(r,n.named,n.default)),r}async testOperation(n,r){return!0}async runOperation(n,r){const a=hr.createOperation(n);return this.mediatorQueryOperation.mediate({operation:a,context:r})}};return Hf.ActorQueryOperationFromQuad=u,u.FACTORY=new e.Factory,u.ALGEBRA_TYPES=Object.keys(e.Algebra.types).map(s=>e.Algebra.types[s]),Hf}var y8;function nZ(){return y8||(y8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(rZ(),t)}(v2)),v2}var w2={},$f={},b8;function iZ(){if(b8)return $f;b8=1,Object.defineProperty($f,"__esModule",{value:!0}),$f.ActorQueryOperationProject=void 0;const t=wt(),e=UT(),u=Et(),s=new u.DataFactory;let n=class extends t.ActorQueryOperationTypedMediated{constructor(a){super(a,"project")}async testOperation(a,o){return!0}async runOperation(a,o){const l=t.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:a.input,context:o})),c=await l.metadata(),d=a.variables,h=c.variables.filter(b=>!d.some(g=>b.value===g.value));d.filter(b=>!c.variables.some(g=>b.value===g.value)).length>0&&(c.canContainUndefs=!0);let p=h.length===0?l.bindingsStream:l.bindingsStream.map(b=>{for(const g of h)b=b.delete(g);return b}),y=0;return p=p.map(b=>{y++;const g=new Map;return b.map(m=>{if(m instanceof e.BlankNodeBindingsScoped){let v=g.get(m.value);return v||(v=s.blankNode(`${m.value}${y}`),g.set(m.value,v)),v}return m})}),{type:"bindings",bindingsStream:p,metadata:async()=>({...c,variables:d})}}};return $f.ActorQueryOperationProject=n,$f}var m8;function aZ(){return m8||(m8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(iZ(),t)}(w2)),w2}var S2={},Vf={},kf={},g8;function os(){var f,p,b,g,m,v,_,w,S,A,D,L,O,E,P,M,U,j,q,$,Z,X,le,K,he,Re,E3,ae,Ee,De,ge,de,W7,H,N,R,T,Ca,B,ja,V,O3,z,Y,W1,ce,J1,xe,pr,qe,R3,F,N0,te,La,Oe,x3;if(g8)return kf;g8=1,Object.defineProperty(kf,"__esModule",{value:!0}),kf.LRUCache=void 0;const t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,e=new Set,u=typeof process=="object"&&process?process:{},s=(Ve,pe,we,W)=>{typeof u.emitWarning=="function"?u.emitWarning(Ve,pe,we,W):console.error(`[${we}] ${pe}: ${Ve}`)};let n=globalThis.AbortController,r=globalThis.AbortSignal;if(typeof n>"u"){r=class{constructor(){wr(this,"onabort");wr(this,"_onabort",[]);wr(this,"reason");wr(this,"aborted",!1)}addEventListener(W,Se){this._onabort.push(Se)}},n=class{constructor(){wr(this,"signal",new r);pe()}abort(W){var Se,Ae;if(!this.signal.aborted){this.signal.reason=W,this.signal.aborted=!0;for(const je of this.signal._onabort)je(W);(Ae=(Se=this.signal).onabort)==null||Ae.call(Se,W)}}};let Ve=((f=u.env)==null?void 0:f.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const pe=()=>{Ve&&(Ve=!1,s("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",pe))}}const a=Ve=>!e.has(Ve),o=Ve=>Ve&&Ve===Math.floor(Ve)&&Ve>0&&isFinite(Ve),l=Ve=>o(Ve)?Ve<=Math.pow(2,8)?Uint8Array:Ve<=Math.pow(2,16)?Uint16Array:Ve<=Math.pow(2,32)?Uint32Array:Ve<=Number.MAX_SAFE_INTEGER?c:null:null;class c extends Array{constructor(pe){super(pe),this.fill(0)}}const y=class y{constructor(pe,we){wr(this,"heap");wr(this,"length");if(!_e(y,p))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new we(pe),this.length=0}static create(pe){const we=l(pe);if(!we)return[];_t(y,p,!0);const W=new y(pe,we);return _t(y,p,!1),W}push(pe){this.heap[this.length++]=pe}pop(){return this.heap[--this.length]}};p=new WeakMap,xt(y,p,!1);let d=y;const We=class We{constructor(pe){xt(this,Re);xt(this,de);xt(this,T);xt(this,B);xt(this,V);xt(this,Y);xt(this,ce);xt(this,xe);xt(this,qe);xt(this,F);xt(this,te);xt(this,Oe);xt(this,b,void 0);xt(this,g,void 0);xt(this,m,void 0);xt(this,v,void 0);xt(this,_,void 0);xt(this,w,void 0);wr(this,"ttl");wr(this,"ttlResolution");wr(this,"ttlAutopurge");wr(this,"updateAgeOnGet");wr(this,"updateAgeOnHas");wr(this,"allowStale");wr(this,"noDisposeOnSet");wr(this,"noUpdateTTL");wr(this,"maxEntrySize");wr(this,"sizeCalculation");wr(this,"noDeleteOnFetchRejection");wr(this,"noDeleteOnStaleGet");wr(this,"allowStaleOnFetchAbort");wr(this,"allowStaleOnFetchRejection");wr(this,"ignoreFetchAbort");xt(this,S,void 0);xt(this,A,void 0);xt(this,D,void 0);xt(this,L,void 0);xt(this,O,void 0);xt(this,E,void 0);xt(this,P,void 0);xt(this,M,void 0);xt(this,U,void 0);xt(this,j,void 0);xt(this,q,void 0);xt(this,$,void 0);xt(this,Z,void 0);xt(this,X,void 0);xt(this,le,void 0);xt(this,K,void 0);xt(this,he,void 0);xt(this,ae,()=>{});xt(this,Ee,()=>{});xt(this,De,()=>{});xt(this,ge,()=>!1);xt(this,H,pe=>{});xt(this,N,(pe,we,W)=>{});xt(this,R,(pe,we,W,Se)=>{if(W||Se)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});wr(this,z,"LRUCache");const{max:we=0,ttl:W,ttlResolution:Se=1,ttlAutopurge:Ae,updateAgeOnGet:je,updateAgeOnHas:He,allowStale:Ge,dispose:tt,disposeAfter:lt,noDisposeOnSet:ut,noUpdateTTL:oe,maxSize:C=0,maxEntrySize:ee=0,sizeCalculation:ye,fetchMethod:Pe,memoMethod:Ue,noDeleteOnFetchRejection:Fe,noDeleteOnStaleGet:Ye,allowStaleOnFetchRejection:$e,allowStaleOnFetchAbort:Je,ignoreFetchAbort:nt}=pe;if(we!==0&&!o(we))throw new TypeError("max option must be a nonnegative integer");const yt=we?l(we):Array;if(!yt)throw new Error("invalid max value: "+we);if(_t(this,b,we),_t(this,g,C),this.maxEntrySize=ee||_e(this,g),this.sizeCalculation=ye,this.sizeCalculation){if(!_e(this,g)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Ue!==void 0&&typeof Ue!="function")throw new TypeError("memoMethod must be a function if defined");if(_t(this,w,Ue),Pe!==void 0&&typeof Pe!="function")throw new TypeError("fetchMethod must be a function if specified");if(_t(this,_,Pe),_t(this,K,!!Pe),_t(this,D,new Map),_t(this,L,new Array(we).fill(void 0)),_t(this,O,new Array(we).fill(void 0)),_t(this,E,new yt(we)),_t(this,P,new yt(we)),_t(this,M,0),_t(this,U,0),_t(this,j,d.create(we)),_t(this,S,0),_t(this,A,0),typeof tt=="function"&&_t(this,m,tt),typeof lt=="function"?(_t(this,v,lt),_t(this,q,[])):(_t(this,v,void 0),_t(this,q,void 0)),_t(this,le,!!_e(this,m)),_t(this,he,!!_e(this,v)),this.noDisposeOnSet=!!ut,this.noUpdateTTL=!!oe,this.noDeleteOnFetchRejection=!!Fe,this.allowStaleOnFetchRejection=!!$e,this.allowStaleOnFetchAbort=!!Je,this.ignoreFetchAbort=!!nt,this.maxEntrySize!==0){if(_e(this,g)!==0&&!o(_e(this,g)))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");ct(this,de,W7).call(this)}if(this.allowStale=!!Ge,this.noDeleteOnStaleGet=!!Ye,this.updateAgeOnGet=!!je,this.updateAgeOnHas=!!He,this.ttlResolution=o(Se)||Se===0?Se:1,this.ttlAutopurge=!!Ae,this.ttl=W||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");ct(this,Re,E3).call(this)}if(_e(this,b)===0&&this.ttl===0&&_e(this,g)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!_e(this,b)&&!_e(this,g)){const ft="LRU_CACHE_UNBOUNDED";a(ft)&&(e.add(ft),s("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ft,We))}}static unsafeExposeInternals(pe){return{starts:_e(pe,Z),ttls:_e(pe,X),sizes:_e(pe,$),keyMap:_e(pe,D),keyList:_e(pe,L),valList:_e(pe,O),next:_e(pe,E),prev:_e(pe,P),get head(){return _e(pe,M)},get tail(){return _e(pe,U)},free:_e(pe,j),isBackgroundFetch:we=>{var W;return ct(W=pe,xe,pr).call(W,we)},backgroundFetch:(we,W,Se,Ae)=>{var je;return ct(je=pe,ce,J1).call(je,we,W,Se,Ae)},moveToTail:we=>{var W;return ct(W=pe,F,N0).call(W,we)},indexes:we=>{var W;return ct(W=pe,T,Ca).call(W,we)},rindexes:we=>{var W;return ct(W=pe,B,ja).call(W,we)},isStale:we=>{var W;return _e(W=pe,ge).call(W,we)}}}get max(){return _e(this,b)}get maxSize(){return _e(this,g)}get calculatedSize(){return _e(this,A)}get size(){return _e(this,S)}get fetchMethod(){return _e(this,_)}get memoMethod(){return _e(this,w)}get dispose(){return _e(this,m)}get disposeAfter(){return _e(this,v)}getRemainingTTL(pe){return _e(this,D).has(pe)?1/0:0}*entries(){for(const pe of ct(this,T,Ca).call(this))_e(this,O)[pe]!==void 0&&_e(this,L)[pe]!==void 0&&!ct(this,xe,pr).call(this,_e(this,O)[pe])&&(yield[_e(this,L)[pe],_e(this,O)[pe]])}*rentries(){for(const pe of ct(this,B,ja).call(this))_e(this,O)[pe]!==void 0&&_e(this,L)[pe]!==void 0&&!ct(this,xe,pr).call(this,_e(this,O)[pe])&&(yield[_e(this,L)[pe],_e(this,O)[pe]])}*keys(){for(const pe of ct(this,T,Ca).call(this)){const we=_e(this,L)[pe];we!==void 0&&!ct(this,xe,pr).call(this,_e(this,O)[pe])&&(yield we)}}*rkeys(){for(const pe of ct(this,B,ja).call(this)){const we=_e(this,L)[pe];we!==void 0&&!ct(this,xe,pr).call(this,_e(this,O)[pe])&&(yield we)}}*values(){for(const pe of ct(this,T,Ca).call(this))_e(this,O)[pe]!==void 0&&!ct(this,xe,pr).call(this,_e(this,O)[pe])&&(yield _e(this,O)[pe])}*rvalues(){for(const pe of ct(this,B,ja).call(this))_e(this,O)[pe]!==void 0&&!ct(this,xe,pr).call(this,_e(this,O)[pe])&&(yield _e(this,O)[pe])}[Symbol.iterator](){return this.entries()}find(pe,we={}){for(const W of ct(this,T,Ca).call(this)){const Se=_e(this,O)[W],Ae=ct(this,xe,pr).call(this,Se)?Se.__staleWhileFetching:Se;if(Ae!==void 0&&pe(Ae,_e(this,L)[W],this))return this.get(_e(this,L)[W],we)}}forEach(pe,we=this){for(const W of ct(this,T,Ca).call(this)){const Se=_e(this,O)[W],Ae=ct(this,xe,pr).call(this,Se)?Se.__staleWhileFetching:Se;Ae!==void 0&&pe.call(we,Ae,_e(this,L)[W],this)}}rforEach(pe,we=this){for(const W of ct(this,B,ja).call(this)){const Se=_e(this,O)[W],Ae=ct(this,xe,pr).call(this,Se)?Se.__staleWhileFetching:Se;Ae!==void 0&&pe.call(we,Ae,_e(this,L)[W],this)}}purgeStale(){let pe=!1;for(const we of ct(this,B,ja).call(this,{allowStale:!0}))_e(this,ge).call(this,we)&&(ct(this,te,La).call(this,_e(this,L)[we],"expire"),pe=!0);return pe}info(pe){const we=_e(this,D).get(pe);if(we===void 0)return;const W=_e(this,O)[we],Se=ct(this,xe,pr).call(this,W)?W.__staleWhileFetching:W;if(Se===void 0)return;const Ae={value:Se};if(_e(this,X)&&_e(this,Z)){const je=_e(this,X)[we],He=_e(this,Z)[we];if(je&&He){const Ge=je-(t.now()-He);Ae.ttl=Ge,Ae.start=Date.now()}}return _e(this,$)&&(Ae.size=_e(this,$)[we]),Ae}dump(){const pe=[];for(const we of ct(this,T,Ca).call(this,{allowStale:!0})){const W=_e(this,L)[we],Se=_e(this,O)[we],Ae=ct(this,xe,pr).call(this,Se)?Se.__staleWhileFetching:Se;if(Ae===void 0||W===void 0)continue;const je={value:Ae};if(_e(this,X)&&_e(this,Z)){je.ttl=_e(this,X)[we];const He=t.now()-_e(this,Z)[we];je.start=Math.floor(Date.now()-He)}_e(this,$)&&(je.size=_e(this,$)[we]),pe.unshift([W,je])}return pe}load(pe){this.clear();for(const[we,W]of pe){if(W.start){const Se=Date.now()-W.start;W.start=t.now()-Se}this.set(we,W.value,W)}}set(pe,we,W={}){var oe,C,ee,ye,Pe;if(we===void 0)return this.delete(pe),this;const{ttl:Se=this.ttl,start:Ae,noDisposeOnSet:je=this.noDisposeOnSet,sizeCalculation:He=this.sizeCalculation,status:Ge}=W;let{noUpdateTTL:tt=this.noUpdateTTL}=W;const lt=_e(this,R).call(this,pe,we,W.size||0,He);if(this.maxEntrySize&&lt>this.maxEntrySize)return Ge&&(Ge.set="miss",Ge.maxEntrySizeExceeded=!0),ct(this,te,La).call(this,pe,"set"),this;let ut=_e(this,S)===0?void 0:_e(this,D).get(pe);if(ut===void 0)ut=_e(this,S)===0?_e(this,U):_e(this,j).length!==0?_e(this,j).pop():_e(this,S)===_e(this,b)?ct(this,Y,W1).call(this,!1):_e(this,S),_e(this,L)[ut]=pe,_e(this,O)[ut]=we,_e(this,D).set(pe,ut),_e(this,E)[_e(this,U)]=ut,_e(this,P)[ut]=_e(this,U),_t(this,U,ut),Jy(this,S)._++,_e(this,N).call(this,ut,lt,Ge),Ge&&(Ge.set="add"),tt=!1;else{ct(this,F,N0).call(this,ut);const Ue=_e(this,O)[ut];if(we!==Ue){if(_e(this,K)&&ct(this,xe,pr).call(this,Ue)){Ue.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:Fe}=Ue;Fe!==void 0&&!je&&(_e(this,le)&&((oe=_e(this,m))==null||oe.call(this,Fe,pe,"set")),_e(this,he)&&((C=_e(this,q))==null||C.push([Fe,pe,"set"])))}else je||(_e(this,le)&&((ee=_e(this,m))==null||ee.call(this,Ue,pe,"set")),_e(this,he)&&((ye=_e(this,q))==null||ye.push([Ue,pe,"set"])));if(_e(this,H).call(this,ut),_e(this,N).call(this,ut,lt,Ge),_e(this,O)[ut]=we,Ge){Ge.set="replace";const Fe=Ue&&ct(this,xe,pr).call(this,Ue)?Ue.__staleWhileFetching:Ue;Fe!==void 0&&(Ge.oldValue=Fe)}}else Ge&&(Ge.set="update")}if(Se!==0&&!_e(this,X)&&ct(this,Re,E3).call(this),_e(this,X)&&(tt||_e(this,De).call(this,ut,Se,Ae),Ge&&_e(this,Ee).call(this,Ge,ut)),!je&&_e(this,he)&&_e(this,q)){const Ue=_e(this,q);let Fe;for(;Fe=Ue==null?void 0:Ue.shift();)(Pe=_e(this,v))==null||Pe.call(this,...Fe)}return this}pop(){var pe;try{for(;_e(this,S);){const we=_e(this,O)[_e(this,M)];if(ct(this,Y,W1).call(this,!0),ct(this,xe,pr).call(this,we)){if(we.__staleWhileFetching)return we.__staleWhileFetching}else if(we!==void 0)return we}}finally{if(_e(this,he)&&_e(this,q)){const we=_e(this,q);let W;for(;W=we==null?void 0:we.shift();)(pe=_e(this,v))==null||pe.call(this,...W)}}}has(pe,we={}){const{updateAgeOnHas:W=this.updateAgeOnHas,status:Se}=we,Ae=_e(this,D).get(pe);if(Ae!==void 0){const je=_e(this,O)[Ae];if(ct(this,xe,pr).call(this,je)&&je.__staleWhileFetching===void 0)return!1;if(_e(this,ge).call(this,Ae))Se&&(Se.has="stale",_e(this,Ee).call(this,Se,Ae));else return W&&_e(this,ae).call(this,Ae),Se&&(Se.has="hit",_e(this,Ee).call(this,Se,Ae)),!0}else Se&&(Se.has="miss");return!1}peek(pe,we={}){const{allowStale:W=this.allowStale}=we,Se=_e(this,D).get(pe);if(Se===void 0||!W&&_e(this,ge).call(this,Se))return;const Ae=_e(this,O)[Se];return ct(this,xe,pr).call(this,Ae)?Ae.__staleWhileFetching:Ae}async fetch(pe,we={}){const{allowStale:W=this.allowStale,updateAgeOnGet:Se=this.updateAgeOnGet,noDeleteOnStaleGet:Ae=this.noDeleteOnStaleGet,ttl:je=this.ttl,noDisposeOnSet:He=this.noDisposeOnSet,size:Ge=0,sizeCalculation:tt=this.sizeCalculation,noUpdateTTL:lt=this.noUpdateTTL,noDeleteOnFetchRejection:ut=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:oe=this.allowStaleOnFetchRejection,ignoreFetchAbort:C=this.ignoreFetchAbort,allowStaleOnFetchAbort:ee=this.allowStaleOnFetchAbort,context:ye,forceRefresh:Pe=!1,status:Ue,signal:Fe}=we;if(!_e(this,K))return Ue&&(Ue.fetch="get"),this.get(pe,{allowStale:W,updateAgeOnGet:Se,noDeleteOnStaleGet:Ae,status:Ue});const Ye={allowStale:W,updateAgeOnGet:Se,noDeleteOnStaleGet:Ae,ttl:je,noDisposeOnSet:He,size:Ge,sizeCalculation:tt,noUpdateTTL:lt,noDeleteOnFetchRejection:ut,allowStaleOnFetchRejection:oe,allowStaleOnFetchAbort:ee,ignoreFetchAbort:C,status:Ue,signal:Fe};let $e=_e(this,D).get(pe);if($e===void 0){Ue&&(Ue.fetch="miss");const Je=ct(this,ce,J1).call(this,pe,$e,Ye,ye);return Je.__returned=Je}else{const Je=_e(this,O)[$e];if(ct(this,xe,pr).call(this,Je)){const Ir=W&&Je.__staleWhileFetching!==void 0;return Ue&&(Ue.fetch="inflight",Ir&&(Ue.returnedStale=!0)),Ir?Je.__staleWhileFetching:Je.__returned=Je}const nt=_e(this,ge).call(this,$e);if(!Pe&&!nt)return Ue&&(Ue.fetch="hit"),ct(this,F,N0).call(this,$e),Se&&_e(this,ae).call(this,$e),Ue&&_e(this,Ee).call(this,Ue,$e),Je;const yt=ct(this,ce,J1).call(this,pe,$e,Ye,ye),et=yt.__staleWhileFetching!==void 0&&W;return Ue&&(Ue.fetch=nt?"stale":"refresh",et&&nt&&(Ue.returnedStale=!0)),et?yt.__staleWhileFetching:yt.__returned=yt}}async forceFetch(pe,we={}){const W=await this.fetch(pe,we);if(W===void 0)throw new Error("fetch() returned undefined");return W}memo(pe,we={}){const W=_e(this,w);if(!W)throw new Error("no memoMethod provided to constructor");const{context:Se,forceRefresh:Ae,...je}=we,He=this.get(pe,je);if(!Ae&&He!==void 0)return He;const Ge=W(pe,He,{options:je,context:Se});return this.set(pe,Ge,je),Ge}get(pe,we={}){const{allowStale:W=this.allowStale,updateAgeOnGet:Se=this.updateAgeOnGet,noDeleteOnStaleGet:Ae=this.noDeleteOnStaleGet,status:je}=we,He=_e(this,D).get(pe);if(He!==void 0){const Ge=_e(this,O)[He],tt=ct(this,xe,pr).call(this,Ge);return je&&_e(this,Ee).call(this,je,He),_e(this,ge).call(this,He)?(je&&(je.get="stale"),tt?(je&&W&&Ge.__staleWhileFetching!==void 0&&(je.returnedStale=!0),W?Ge.__staleWhileFetching:void 0):(Ae||ct(this,te,La).call(this,pe,"expire"),je&&W&&(je.returnedStale=!0),W?Ge:void 0)):(je&&(je.get="hit"),tt?Ge.__staleWhileFetching:(ct(this,F,N0).call(this,He),Se&&_e(this,ae).call(this,He),Ge))}else je&&(je.get="miss")}delete(pe){return ct(this,te,La).call(this,pe,"delete")}clear(){return ct(this,Oe,x3).call(this,"delete")}};z=Symbol.toStringTag,b=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,w=new WeakMap,S=new WeakMap,A=new WeakMap,D=new WeakMap,L=new WeakMap,O=new WeakMap,E=new WeakMap,P=new WeakMap,M=new WeakMap,U=new WeakMap,j=new WeakMap,q=new WeakMap,$=new WeakMap,Z=new WeakMap,X=new WeakMap,le=new WeakMap,K=new WeakMap,he=new WeakMap,Re=new WeakSet,E3=function(){const pe=new c(_e(this,b)),we=new c(_e(this,b));_t(this,X,pe),_t(this,Z,we),_t(this,De,(Ae,je,He=t.now())=>{if(we[Ae]=je!==0?He:0,pe[Ae]=je,je!==0&&this.ttlAutopurge){const Ge=setTimeout(()=>{_e(this,ge).call(this,Ae)&&ct(this,te,La).call(this,_e(this,L)[Ae],"expire")},je+1);Ge.unref&&Ge.unref()}}),_t(this,ae,Ae=>{we[Ae]=pe[Ae]!==0?t.now():0}),_t(this,Ee,(Ae,je)=>{if(pe[je]){const He=pe[je],Ge=we[je];if(!He||!Ge)return;Ae.ttl=He,Ae.start=Ge,Ae.now=W||Se();const tt=Ae.now-Ge;Ae.remainingTTL=He-tt}});let W=0;const Se=()=>{const Ae=t.now();if(this.ttlResolution>0){W=Ae;const je=setTimeout(()=>W=0,this.ttlResolution);je.unref&&je.unref()}return Ae};this.getRemainingTTL=Ae=>{const je=_e(this,D).get(Ae);if(je===void 0)return 0;const He=pe[je],Ge=we[je];if(!He||!Ge)return 1/0;const tt=(W||Se())-Ge;return He-tt},_t(this,ge,Ae=>{const je=we[Ae],He=pe[Ae];return!!He&&!!je&&(W||Se())-je>He})},ae=new WeakMap,Ee=new WeakMap,De=new WeakMap,ge=new WeakMap,de=new WeakSet,W7=function(){const pe=new c(_e(this,b));_t(this,A,0),_t(this,$,pe),_t(this,H,we=>{_t(this,A,_e(this,A)-pe[we]),pe[we]=0}),_t(this,R,(we,W,Se,Ae)=>{if(ct(this,xe,pr).call(this,W))return 0;if(!o(Se))if(Ae){if(typeof Ae!="function")throw new TypeError("sizeCalculation must be a function");if(Se=Ae(W,we),!o(Se))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return Se}),_t(this,N,(we,W,Se)=>{if(pe[we]=W,_e(this,g)){const Ae=_e(this,g)-pe[we];for(;_e(this,A)>Ae;)ct(this,Y,W1).call(this,!0)}_t(this,A,_e(this,A)+pe[we]),Se&&(Se.entrySize=W,Se.totalCalculatedSize=_e(this,A))})},H=new WeakMap,N=new WeakMap,R=new WeakMap,T=new WeakSet,Ca=function*({allowStale:pe=this.allowStale}={}){if(_e(this,S))for(let we=_e(this,U);!(!ct(this,V,O3).call(this,we)||((pe||!_e(this,ge).call(this,we))&&(yield we),we===_e(this,M)));)we=_e(this,P)[we]},B=new WeakSet,ja=function*({allowStale:pe=this.allowStale}={}){if(_e(this,S))for(let we=_e(this,M);!(!ct(this,V,O3).call(this,we)||((pe||!_e(this,ge).call(this,we))&&(yield we),we===_e(this,U)));)we=_e(this,E)[we]},V=new WeakSet,O3=function(pe){return pe!==void 0&&_e(this,D).get(_e(this,L)[pe])===pe},Y=new WeakSet,W1=function(pe){var Ae,je;const we=_e(this,M),W=_e(this,L)[we],Se=_e(this,O)[we];return _e(this,K)&&ct(this,xe,pr).call(this,Se)?Se.__abortController.abort(new Error("evicted")):(_e(this,le)||_e(this,he))&&(_e(this,le)&&((Ae=_e(this,m))==null||Ae.call(this,Se,W,"evict")),_e(this,he)&&((je=_e(this,q))==null||je.push([Se,W,"evict"]))),_e(this,H).call(this,we),pe&&(_e(this,L)[we]=void 0,_e(this,O)[we]=void 0,_e(this,j).push(we)),_e(this,S)===1?(_t(this,M,_t(this,U,0)),_e(this,j).length=0):_t(this,M,_e(this,E)[we]),_e(this,D).delete(W),Jy(this,S)._--,we},ce=new WeakSet,J1=function(pe,we,W,Se){const Ae=we===void 0?void 0:_e(this,O)[we];if(ct(this,xe,pr).call(this,Ae))return Ae;const je=new n,{signal:He}=W;He==null||He.addEventListener("abort",()=>je.abort(He.reason),{signal:je.signal});const Ge={signal:je.signal,options:W,context:Se},tt=(ye,Pe=!1)=>{const{aborted:Ue}=je.signal,Fe=W.ignoreFetchAbort&&ye!==void 0;if(W.status&&(Ue&&!Pe?(W.status.fetchAborted=!0,W.status.fetchError=je.signal.reason,Fe&&(W.status.fetchAbortIgnored=!0)):W.status.fetchResolved=!0),Ue&&!Fe&&!Pe)return ut(je.signal.reason);const Ye=C;return _e(this,O)[we]===C&&(ye===void 0?Ye.__staleWhileFetching?_e(this,O)[we]=Ye.__staleWhileFetching:ct(this,te,La).call(this,pe,"fetch"):(W.status&&(W.status.fetchUpdated=!0),this.set(pe,ye,Ge.options))),ye},lt=ye=>(W.status&&(W.status.fetchRejected=!0,W.status.fetchError=ye),ut(ye)),ut=ye=>{const{aborted:Pe}=je.signal,Ue=Pe&&W.allowStaleOnFetchAbort,Fe=Ue||W.allowStaleOnFetchRejection,Ye=Fe||W.noDeleteOnFetchRejection,$e=C;if(_e(this,O)[we]===C&&(!Ye||$e.__staleWhileFetching===void 0?ct(this,te,La).call(this,pe,"fetch"):Ue||(_e(this,O)[we]=$e.__staleWhileFetching)),Fe)return W.status&&$e.__staleWhileFetching!==void 0&&(W.status.returnedStale=!0),$e.__staleWhileFetching;if($e.__returned===$e)throw ye},oe=(ye,Pe)=>{var Fe;const Ue=(Fe=_e(this,_))==null?void 0:Fe.call(this,pe,Ae,Ge);Ue&&Ue instanceof Promise&&Ue.then(Ye=>ye(Ye===void 0?void 0:Ye),Pe),je.signal.addEventListener("abort",()=>{(!W.ignoreFetchAbort||W.allowStaleOnFetchAbort)&&(ye(void 0),W.allowStaleOnFetchAbort&&(ye=Ye=>tt(Ye,!0)))})};W.status&&(W.status.fetchDispatched=!0);const C=new Promise(oe).then(tt,lt),ee=Object.assign(C,{__abortController:je,__staleWhileFetching:Ae,__returned:void 0});return we===void 0?(this.set(pe,ee,{...Ge.options,status:void 0}),we=_e(this,D).get(pe)):_e(this,O)[we]=ee,ee},xe=new WeakSet,pr=function(pe){if(!_e(this,K))return!1;const we=pe;return!!we&&we instanceof Promise&&we.hasOwnProperty("__staleWhileFetching")&&we.__abortController instanceof n},qe=new WeakSet,R3=function(pe,we){_e(this,P)[we]=pe,_e(this,E)[pe]=we},F=new WeakSet,N0=function(pe){pe!==_e(this,U)&&(pe===_e(this,M)?_t(this,M,_e(this,E)[pe]):ct(this,qe,R3).call(this,_e(this,P)[pe],_e(this,E)[pe]),ct(this,qe,R3).call(this,_e(this,U),pe),_t(this,U,pe))},te=new WeakSet,La=function(pe,we){var Se,Ae,je,He;let W=!1;if(_e(this,S)!==0){const Ge=_e(this,D).get(pe);if(Ge!==void 0)if(W=!0,_e(this,S)===1)ct(this,Oe,x3).call(this,we);else{_e(this,H).call(this,Ge);const tt=_e(this,O)[Ge];if(ct(this,xe,pr).call(this,tt)?tt.__abortController.abort(new Error("deleted")):(_e(this,le)||_e(this,he))&&(_e(this,le)&&((Se=_e(this,m))==null||Se.call(this,tt,pe,we)),_e(this,he)&&((Ae=_e(this,q))==null||Ae.push([tt,pe,we]))),_e(this,D).delete(pe),_e(this,L)[Ge]=void 0,_e(this,O)[Ge]=void 0,Ge===_e(this,U))_t(this,U,_e(this,P)[Ge]);else if(Ge===_e(this,M))_t(this,M,_e(this,E)[Ge]);else{const lt=_e(this,P)[Ge];_e(this,E)[lt]=_e(this,E)[Ge];const ut=_e(this,E)[Ge];_e(this,P)[ut]=_e(this,P)[Ge]}Jy(this,S)._--,_e(this,j).push(Ge)}}if(_e(this,he)&&((je=_e(this,q))!=null&&je.length)){const Ge=_e(this,q);let tt;for(;tt=Ge==null?void 0:Ge.shift();)(He=_e(this,v))==null||He.call(this,...tt)}return W},Oe=new WeakSet,x3=function(pe){var we,W,Se;for(const Ae of ct(this,B,ja).call(this,{allowStale:!0})){const je=_e(this,O)[Ae];if(ct(this,xe,pr).call(this,je))je.__abortController.abort(new Error("deleted"));else{const He=_e(this,L)[Ae];_e(this,le)&&((we=_e(this,m))==null||we.call(this,je,He,pe)),_e(this,he)&&((W=_e(this,q))==null||W.push([je,He,pe]))}}if(_e(this,D).clear(),_e(this,O).fill(void 0),_e(this,L).fill(void 0),_e(this,X)&&_e(this,Z)&&(_e(this,X).fill(0),_e(this,Z).fill(0)),_e(this,$)&&_e(this,$).fill(0),_t(this,M,0),_t(this,U,0),_e(this,j).length=0,_t(this,A,0),_t(this,S,0),_e(this,he)&&_e(this,q)){const Ae=_e(this,q);let je;for(;je=Ae==null?void 0:Ae.shift();)(Se=_e(this,v))==null||Se.call(this,...je)}};let h=We;return kf.LRUCache=h,kf}var _8;function sZ(){if(_8)return Vf;_8=1,Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.ActorQueryOperationReducedHash=void 0;const t=wt(),e=os();let u=class extends t.ActorQueryOperationTypedMediated{constructor(n){super(n,"reduced")}async testOperation(n,r){return!0}async runOperation(n,r){const a=t.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:n.input,context:r}));return{type:"bindings",bindingsStream:a.bindingsStream.filter(await this.newHashFilter(r)),metadata:a.metadata}}async newHashFilter(n){const{hashFunction:r}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:n}),a=new e.LRUCache({max:this.cacheSize});return o=>{const l=r(o);return a.has(l)?!1:(a.set(l,!0),!0)}}};return Vf.ActorQueryOperationReducedHash=u,Vf}var v8;function oZ(){return v8||(v8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(sZ(),t)}(S2)),S2}var T2={},zf={},w8;function uZ(){if(w8)return zf;w8=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.ActorQueryOperationSlice=void 0;const t=wt(),e=Lt;let u=class extends t.ActorQueryOperationTypedMediated{constructor(n){super(n,"slice")}async testOperation(n,r){return!0}async runOperation(n,r){n.length&&(r=r.set(e.KeysQueryOperation.limitIndicator,n.length));const a=await this.mediatorQueryOperation.mediate({operation:n.input,context:r});return a.type==="bindings"?{type:"bindings",bindingsStream:this.sliceStream(a.bindingsStream,n),metadata:this.sliceMetadata(a,n)}:a.type==="quads"?{type:"quads",quadStream:this.sliceStream(a.quadStream,n),metadata:this.sliceMetadata(a,n)}:a}sliceStream(n,r){const a=!!r.length||r.length===0,{start:o}=r,l=a?r.start+r.length-1:Number.POSITIVE_INFINITY;return n.transform({offset:o,limit:Math.max(l-o+1,0),autoStart:!1})}sliceMetadata(n,r){const a=!!r.length||r.length===0;return()=>n.metadata().then(o=>{const l={...o.cardinality};return Number.isFinite(l.value)&&(l.value=Math.max(0,l.value-r.start),a&&(l.value=Math.min(l.value,r.length))),{...o,cardinality:l}})}};return zf.ActorQueryOperationSlice=u,zf}var S8;function cZ(){return S8||(S8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(uZ(),t)}(T2)),T2}var A2={},Gf={},T8;function lZ(){if(T8)return Gf;T8=1,Object.defineProperty(Gf,"__esModule",{value:!0}),Gf.ActorQueryOperationUnion=void 0;const t=wt(),e=Cn(),u=Dt(),s=un();let n=class X1 extends t.ActorQueryOperationTypedMediated{constructor(a){super(a,"union")}static unionVariables(a){return(0,s.uniqTerms)(a.flat())}static async unionMetadata(a,o,l,c){let d=(await c.mediate({mode:"initialize",context:l})).metadata;for(const f of a)d={...f,...(await c.mediate({mode:"append",accumulatedMetadata:d,appendingMetadata:f,context:l})).metadata};d.state=new e.MetadataValidationState;const h=()=>d.state.invalidate();for(const f of a)f.state.addInvalidateListener(h);return o&&(d.variables=X1.unionVariables(a.map(f=>f.variables))),d}async testOperation(a,o){return!0}async runOperation(a,o){const l=await Promise.all(a.input.map(d=>this.mediatorQueryOperation.mediate({operation:d,context:o})));let c;for(const d of l)if(c===void 0)c=d.type;else if(c!==d.type)throw new Error(`Unable to union ${c} and ${d.type}`);if(c==="bindings"||a.input.length===0){const d=l.map(t.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new u.UnionIterator(d.map(p=>p.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(d.map(p=>p.metadata())).then(p=>X1.unionMetadata(p,!0,o,this.mediatorRdfMetadataAccumulate))}}if(c==="quads"){const d=l.map(t.ActorQueryOperation.getSafeQuads);return{type:"quads",quadStream:new u.UnionIterator(d.map(p=>p.quadStream),{autoStart:!1}),metadata:()=>Promise.all(d.map(p=>p.metadata())).then(p=>X1.unionMetadata(p,!1,o,this.mediatorRdfMetadataAccumulate))}}throw new Error(`Unable to union ${c}`)}};return Gf.ActorQueryOperationUnion=n,Gf}var A8;function J7(){return A8||(A8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(lZ(),t)}(A2)),A2}var E2={},Wf={},O2={},Jf={},Xf={},E8;function X7(){if(E8)return Xf;E8=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.PathVariableObjectIterator=void 0;const t=wt(),e=Dt(),u=Et(),s=Xt(),n=Ot(),r=new u.DataFactory,a=new n.Factory;let o=class extends e.BufferedIterator{constructor(c,d,h,f,p,y,b=16){super({autoStart:!0}),this.subject=c,this.predicate=d,this.graph=h,this.context=f,this.mediatorQueryOperation=p,this.maxRunningOperations=b,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this._push(this.subject,y)}_end(c){for(const d of this.runningOperations)d.destroy();super._end(c)}_push(c,d=!0){let h;if(d&&(h=(0,s.termToString)(c),this.termHashes.has(h)))return;const f=r.variable("b");this.pendingOperations.push({variable:f,operation:a.createPath(c,this.predicate,f,this.graph)}),h&&(this.termHashes.set(h,c),super._push(c))}_read(c,d){const h=this;(async function(){for(;h.runningOperations.length<h.maxRunningOperations&&h.pendingOperations.length!==0;){const y=h.pendingOperations.pop(),b=t.ActorQueryOperation.getSafeBindings(await h.mediatorQueryOperation.mediate({operation:y.operation,context:h.context})),g=b.bindingsStream.transform({autoStart:!1,transform(m,v,_){const w=m.get(y.variable);_(w),v()}});g.done||(h.runningOperations.push(g),g.on("error",m=>h.destroy(m)),g.on("readable",()=>{h.readable=!0,h._fillBufferAsync()}),g.on("end",()=>{h.runningOperations.splice(h.runningOperations.indexOf(g),1),h.readable=!0,h._fillBufferAsync()})),h.setProperty("metadata",b.metadata)}let f=0,p;for(;f!==(f=c);)for(let y=0;y<h.runningOperations.length&&c>0;y++)(p=h.runningOperations[y].read())!==null&&(c--,h._push(p));h.runningOperations.length===0&&h.pendingOperations.length===0&&h.close()})().then(()=>{d()},f=>this.destroy(f))}};return Xf.PathVariableObjectIterator=o,Xf}var O8;function dZ(){if(O8)return Jf;O8=1,Object.defineProperty(Jf,"__esModule",{value:!0}),Jf.ActorAbstractPath=void 0;const t=wt(),e=Lt,u=Dt(),s=Et(),n=Xt(),r=Ot(),a=X7(),o=new s.DataFactory;let l=class ha extends t.ActorQueryOperationTypedMediated{constructor(d,h){super(d,"path"),this.predicateType=h}async testOperation(d,h){if(d.predicate.type!==this.predicateType)throw new Error(`This Actor only supports ${this.predicateType} Path operations.`);return!0}generateVariable(d,h){return h?d&&(d.subject.value===h||d.object.value===h)?this.generateVariable(d,`${h}b`):o.variable(h):this.generateVariable(d,"b")}async isPathArbitraryLengthDistinct(d,h){return d.get(e.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(d=d.set(e.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:d,operation:void 0}):(d=d.set(e.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:d,operation:t.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:ha.FACTORY.createDistinct(h),context:d}))})}async predicateStarGraphVariable(d,h,f,p,y,b){const g=this.getPathSources(f),m=this.generateVariable(ha.FACTORY.createPath(d,f,h,p)),v=ha.FACTORY.createUnion([this.assignPatternSources(ha.FACTORY.createPattern(d,m,h,p),g),this.assignPatternSources(ha.FACTORY.createPattern(h,m,d,p),g)]),_=t.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:y,operation:v})),w=new Set;return{bindingsStream:new u.MultiTransformIterator(_.bindingsStream,{multiTransform:A=>{const D=A.get(p);return w.has(D.value)?new u.EmptyIterator:(w.add(D.value),new u.TransformIterator(async()=>{const L=new u.BufferedIterator;return await this.getObjectsPredicateStar(d,f,D,y,{},L,{count:0}),L.transform({transform(O,E,P){P(b.bindings([[h,O],[p,D]])),E()}})},{maxBufferSize:128}))},autoStart:!1}),metadata:_.metadata}}async getObjectsPredicateStarEval(d,h,f,p,y,b,g){if(p.termType==="Variable")return this.predicateStarGraphVariable(d,f,h,p,y,g);const m=new a.PathVariableObjectIterator(d,h,p,y,this.mediatorQueryOperation,b);return{bindingsStream:m.transform({autoStart:!1,transform(_,w,S){S(g.bindings([[f,_]])),w()}}),async metadata(){const _=await new Promise(w=>{m.getProperty("metadata",S=>w(S()))});return _.cardinality.value++,_}}}async getObjectsPredicateStar(d,h,f,p,y,b,g){const m=(0,n.termToString)(d);if(y[m])return;b._push(d),y[m]=d,g.count++;const v=this.generateVariable(),_=ha.FACTORY.createPath(d,h,v,f),w=t.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:_,context:p}));return w.bindingsStream.on("data",async S=>{const A=S.get(v);await this.getObjectsPredicateStar(A,h,f,p,y,b,g)}),w.bindingsStream.on("end",()=>{--g.count===0&&b.close()}),w.metadata}async getSubjectAndObjectBindingsPredicateStar(d,h,f,p,y,b,g,m,v,_,w,S){const A=(0,n.termToString)(p)+(0,n.termToString)(b);if(v[A])return;if(w.count++,v[A]=!0,_._push(S.bindings([[d,f],[h,p]])),A in m){const L=await m[A];for(const O of L)await this.getSubjectAndObjectBindingsPredicateStar(d,h,f,O,y,b,g,m,v,_,w,S);--w.count===0&&_.close();return}const D=new Promise(async(L,O)=>{const E=[],P=this.generateVariable(),M=ha.FACTORY.createPath(p,y,P,b),U=t.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:M,context:g}));U.bindingsStream.on("data",async j=>{const q=j.get(P);E.push(q),await this.getSubjectAndObjectBindingsPredicateStar(d,h,f,q,y,b,g,m,v,_,w,S)}),U.bindingsStream.on("error",O),U.bindingsStream.on("end",()=>{--w.count===0&&_.close(),L(E)})});m[A]=D}getPathSources(d){switch(d.type){case r.Algebra.types.ALT:case r.Algebra.types.SEQ:return d.input.flatMap(h=>this.getPathSources(h));case r.Algebra.types.INV:case r.Algebra.types.ONE_OR_MORE_PATH:case r.Algebra.types.ZERO_OR_MORE_PATH:case r.Algebra.types.ZERO_OR_ONE_PATH:return this.getPathSources(d.path);case r.Algebra.types.LINK:case r.Algebra.types.NPS:{const h=t.ActorQueryOperation.getOperationSource(d);if(!h)throw new Error("Could not find a required source on a link path operation");return[h]}}}assignPatternSources(d,h){if(h.length===0)throw new Error("Attempted to assign zero sources to a pattern during property path handling");return h.length===1?t.ActorQueryOperation.assignOperationSource(d,h[0]):ha.FACTORY.createUnion(h.map(f=>t.ActorQueryOperation.assignOperationSource(d,f)),!0)}};return Jf.ActorAbstractPath=l,l.FACTORY=new r.Factory,Jf}var R8;function us(){return R8||(R8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(dZ(),t),u(X7(),t)}(O2)),O2}var x8;function fZ(){if(x8)return Wf;x8=1,Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.ActorQueryOperationPathAlt=void 0;const t=us(),e=J7(),u=wt(),s=Dt(),n=Ot();let r=class extends t.ActorAbstractPath{constructor(o){super(o,n.Algebra.types.ALT)}async runOperation(o,l){const c=o.predicate,d=(await Promise.all(c.input.map(p=>this.mediatorQueryOperation.mediate({context:l,operation:t.ActorAbstractPath.FACTORY.createPath(o.subject,p,o.object,o.graph)})))).map(u.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new s.UnionIterator(d.map(p=>p.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(d.map(p=>p.metadata())).then(p=>e.ActorQueryOperationUnion.unionMetadata(p,!0,l,this.mediatorRdfMetadataAccumulate))}}};return Wf.ActorQueryOperationPathAlt=r,Wf}var I8;function hZ(){return I8||(I8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(fZ(),t)}(E2)),E2}var R2={},Kf={},P8;function pZ(){if(P8)return Kf;P8=1,Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.ActorQueryOperationPathInv=void 0;const t=us(),e=Ot();let u=class extends t.ActorAbstractPath{constructor(n){super(n,e.Algebra.types.INV)}async runOperation(n,r){const a=n.predicate,o=t.ActorAbstractPath.FACTORY.createPath(n.object,a.path,n.subject,n.graph);return this.mediatorQueryOperation.mediate({operation:o,context:r})}};return Kf.ActorQueryOperationPathInv=u,Kf}var D8;function yZ(){return D8||(D8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(pZ(),t)}(R2)),R2}var x2={},Yf={},N8;function bZ(){if(N8)return Yf;N8=1,Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.ActorQueryOperationPathNps=void 0;const t=us(),e=wt(),u=Ot();let s=class extends t.ActorAbstractPath{constructor(r){super(r,u.Algebra.types.NPS)}async runOperation(r,a){const o=r.predicate,l=this.generateVariable(r),c=Object.assign(t.ActorAbstractPath.FACTORY.createPattern(r.subject,l,r.object,r.graph),{metadata:o.metadata}),d=e.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:c,context:a}));return{type:"bindings",bindingsStream:d.bindingsStream.map(f=>o.iris.some(p=>p.equals(f.get(l)))?null:f.delete(l)),metadata:d.metadata}}};return Yf.ActorQueryOperationPathNps=s,Yf}var C8;function mZ(){return C8||(C8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(bZ(),t)}(x2)),x2}var I2={},Zf={},j8;function gZ(){if(j8)return Zf;j8=1,Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.ActorQueryOperationPathLink=void 0;const t=us(),e=Ot();let u=class extends t.ActorAbstractPath{constructor(n){super(n,e.Algebra.types.LINK)}async runOperation(n,r){const a=n.predicate,o=Object.assign(t.ActorAbstractPath.FACTORY.createPattern(n.subject,a.iri,n.object,n.graph),{metadata:a.metadata});return this.mediatorQueryOperation.mediate({operation:o,context:r})}};return Zf.ActorQueryOperationPathLink=u,Zf}var L8;function _Z(){return L8||(L8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(gZ(),t)}(I2)),I2}var P2={},eh={},M8;function vZ(){if(M8)return eh;M8=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.ActorQueryOperationClear=void 0;const t=wt(),e=Et(),u=new e.DataFactory;let s=class extends t.ActorQueryOperationTypedMediated{constructor(r){super(r,"clear")}async testOperation(r,a){return t.ActorQueryOperation.throwOnReadOnly(a),!0}async runOperation(r,a){let o;r.source==="DEFAULT"?o=u.defaultGraph():typeof r.source=="string"?o=r.source:o=[r.source];const{execute:l}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:o,requireExistence:!r.silent,dropGraphs:!1},context:a});return{type:"void",execute:l}}};return eh.ActorQueryOperationClear=s,eh}var F8;function wZ(){return F8||(F8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(vZ(),t)}(P2)),P2}var D2={},th={},q8;function SZ(){if(q8)return th;q8=1,Object.defineProperty(th,"__esModule",{value:!0}),th.ActorQueryOperationUpdateCompositeUpdate=void 0;const t=wt();let e=class extends t.ActorQueryOperationTypedMediated{constructor(s){super(s,"compositeupdate")}async testOperation(s,n){return t.ActorQueryOperation.throwOnReadOnly(n),!0}async runOperation(s,n){return{type:"void",execute:()=>(async()=>{for(const a of s.updates)await t.ActorQueryOperation.getSafeVoid(await this.mediatorQueryOperation.mediate({operation:a,context:n})).execute()})()}}};return th.ActorQueryOperationUpdateCompositeUpdate=e,th}var B8;function TZ(){return B8||(B8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(SZ(),t)}(D2)),D2}var N2={},rh={},U8;function AZ(){if(U8)return rh;U8=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.ActorQueryOperationCreate=void 0;const t=wt();let e=class extends t.ActorQueryOperationTypedMediated{constructor(s){super(s,"create")}async testOperation(s,n){return t.ActorQueryOperation.throwOnReadOnly(n),!0}async runOperation(s,n){const{execute:r}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[s.source],requireNonExistence:!s.silent},context:n});return{type:"void",execute:r}}};return rh.ActorQueryOperationCreate=e,rh}var Q8;function EZ(){return Q8||(Q8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(AZ(),t)}(N2)),N2}var C2={},nh={},H8;function OZ(){if(H8)return nh;H8=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.ActorQueryOperationDrop=void 0;const t=wt(),e=Et(),u=new e.DataFactory;let s=class extends t.ActorQueryOperationTypedMediated{constructor(r){super(r,"drop")}async testOperation(r,a){return t.ActorQueryOperation.throwOnReadOnly(a),!0}async runOperation(r,a){let o;r.source==="DEFAULT"?o=u.defaultGraph():typeof r.source=="string"?o=r.source:o=[r.source];const{execute:l}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:o,requireExistence:!r.silent,dropGraphs:!0},context:a});return{type:"void",execute:l}}};return nh.ActorQueryOperationDrop=s,nh}var $8;function RZ(){return $8||($8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(OZ(),t)}(C2)),C2}var j2={},ih={},V8;function xZ(){if(V8)return ih;V8=1,Object.defineProperty(ih,"__esModule",{value:!0}),ih.ActorQueryOperationLoad=void 0;const t=wt(),e=Lt,u=Et(),s=Ot(),n=new u.DataFactory;let r=class K7 extends t.ActorQueryOperationTypedMediated{constructor(o){super(o,"load"),this.factory=new s.Factory}async testOperation(o,l){return t.ActorQueryOperation.throwOnReadOnly(l),!0}async runOperation(o,l){let c=l;o.silent&&(c=c.set(e.KeysInitQuery.lenient,!0));const{querySource:d}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:o.source.value},context:c});let f=K7.getSafeQuads(await this.mediatorQueryOperation.mediate({operation:this.factory.createConstruct(t.ActorQueryOperation.assignOperationSource(this.factory.createPattern(n.variable("s"),n.variable("p"),n.variable("o")),d),[this.factory.createPattern(n.variable("s"),n.variable("p"),n.variable("o"))]),context:c})).quadStream;o.destination&&(f=f.map(y=>n.quad(y.subject,y.predicate,y.object,o.destination)));const{execute:p}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:f,context:l});return{type:"void",execute:p}}};return ih.ActorQueryOperationLoad=r,ih}var k8;function IZ(){return k8||(k8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(xZ(),t)}(j2)),j2}var L2={},ah={},z8;function PZ(){if(z8)return ah;z8=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.ActorQueryOperationJoin=void 0;const t=wt();let e=class extends t.ActorQueryOperationTypedMediated{constructor(s){super(s,"join")}async testOperation(s,n){return!0}async runOperation(s,n){const r=(await Promise.all(s.input.map(async a=>({output:await this.mediatorQueryOperation.mediate({operation:a,context:n}),operation:a})))).map(({output:a,operation:o})=>({output:t.ActorQueryOperation.getSafeBindings(a),operation:o}));return this.mediatorJoin.mediate({type:"inner",entries:r,context:n})}};return ah.ActorQueryOperationJoin=e,ah}var G8;function DZ(){return G8||(G8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(PZ(),t)}(L2)),L2}var M2={},sh={},W8;function NZ(){if(W8)return sh;W8=1,Object.defineProperty(sh,"__esModule",{value:!0}),sh.ActorQueryOperationMinus=void 0;const t=wt();let e=class extends t.ActorQueryOperationTypedMediated{constructor(s){super(s,"minus")}async testOperation(s,n){return!0}async runOperation(s,n){const r=(await Promise.all(s.input.map(async a=>({output:await this.mediatorQueryOperation.mediate({operation:a,context:n}),operation:a})))).map(({output:a,operation:o})=>({output:t.ActorQueryOperation.getSafeBindings(a),operation:o}));return this.mediatorJoin.mediate({type:"minus",entries:r,context:n})}};return sh.ActorQueryOperationMinus=e,sh}var J8;function CZ(){return J8||(J8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(NZ(),t)}(M2)),M2}var F2={},oh={},X8;function jZ(){if(X8)return oh;X8=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.ActorQueryOperationPathSeq=void 0;const t=us(),e=wt(),u=Ot();let s=class extends t.ActorAbstractPath{constructor(r){super(r,u.Algebra.types.SEQ)}async runOperation(r,a){const o=r.predicate;let l=r.subject;const c=[],d=await Promise.all(o.input.map((p,y)=>{const b=y===o.input.length-1?r.object:this.generateVariable(r,`b${y}`),g=t.ActorAbstractPath.FACTORY.createPath(l,p,b,r.graph),m=this.mediatorQueryOperation.mediate({context:a,operation:g});return l=b,y<o.input.length-1&&c.push(b),{output:m,operation:g}}).map(async({output:p,operation:y})=>({output:e.ActorQueryOperation.getSafeBindings(await p),operation:y}))),h=e.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:"inner",entries:d,context:a}));return{type:"bindings",bindingsStream:h.bindingsStream.transform({transform(p,y,b){for(const g of c)p=p.delete(g);b(p),y()}}),async metadata(){const p=await h.metadata(),y=p.variables.filter(b=>!c.some(g=>g.value===b.value));return{...p,variables:y}}}}};return oh.ActorQueryOperationPathSeq=s,oh}var K8;function LZ(){return K8||(K8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(jZ(),t)}(F2)),F2}var q2={},uh={},Y8;function MZ(){if(Y8)return uh;Y8=1,Object.defineProperty(uh,"__esModule",{value:!0}),uh.ActorRdfJoinMultiSmallest=void 0;const t=wt(),e=jn(),u=Ot();let s=class Y7 extends e.ActorRdfJoin{constructor(r){super(r,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0,canHandleUndefs:!0,isLeaf:!1})}async sortJoinEntries(r,a){return(await this.mediatorJoinEntriesSort.mediate({entries:r,context:a})).entries}async getOutput(r){const a=await this.sortJoinEntries(await e.ActorRdfJoin.getEntriesWithMetadatas([...r.entries]),r.context),o=a[0],l=a[1];a.splice(0,2);const c={output:t.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:r.type,entries:[o,l],context:r.context})),operation:Y7.FACTORY.createJoin([o.operation,l.operation],!1)};return a.push(c),{result:await this.mediatorJoin.mediate({type:r.type,entries:a,context:r.context})}}async getJoinCoefficients(r,a){a=[...a],a=(await this.sortJoinEntries(r.entries.map((d,h)=>({...d,metadata:a[h]})),r.context)).map(d=>d.metadata);const l=e.ActorRdfJoin.getRequestInitialTimes(a),c=e.ActorRdfJoin.getRequestItemTimes(a);return{iterations:a[0].cardinality.value*a[1].cardinality.value*a.slice(2).reduce((d,h)=>d*h.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:l[0]+a[0].cardinality.value*c[0]+l[1]+a[1].cardinality.value*c[1]+a.slice(2).reduce((d,h,f)=>d+l.slice(2)[f]+h.cardinality.value*c.slice(2)[f],0)}}};return uh.ActorRdfJoinMultiSmallest=s,s.FACTORY=new u.Factory,uh}var Z8;function FZ(){return Z8||(Z8=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(MZ(),t)}(q2)),q2}var B2={},ch={},U2={},lh={},dh={},e5;function Z7(){if(e5)return dh;e5=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.bindingsToString=void 0;const t=Xt();function e(u){const s={};for(const n of u.keys())s[n.value]=(0,t.termToString)(u.get(n));return JSON.stringify(s,null,"  ")}return dh.bindingsToString=e,dh}var t5;function eB(){if(t5)return lh;t5=1,Object.defineProperty(lh,"__esModule",{value:!0}),lh.Bindings=void 0;const t=ot,e=BT,u=Z7();let s=class ni{constructor(r,a,o){this.type="bindings",this.dataFactory=r,this.entries=a,this.contextHolder=o}has(r){return this.entries.has(typeof r=="string"?r:r.value)}get(r){return this.entries.get(typeof r=="string"?r:r.value)}set(r,a){return new ni(this.dataFactory,this.entries.set(typeof r=="string"?r:r.value,a),this.contextHolder)}delete(r){return new ni(this.dataFactory,this.entries.delete(typeof r=="string"?r:r.value),this.contextHolder)}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),r=>this.dataFactory.variable(r))}values(){return this.iteratorToIterable(this.entries.values())}forEach(r){for(const[a,o]of this.entries.entries())r(o,this.dataFactory.variable(a))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([r,a])=>[this.dataFactory.variable(r),a])[Symbol.iterator]()}equals(r){var a;if(!r)return!1;if(this===r)return!0;if(this.size!==r.size)return!1;for(const o of this.keys())if(!((a=this.get(o))!=null&&a.equals(r.get(o))))return!1;return!0}filter(r){return new ni(this.dataFactory,(0,e.Map)(this.entries.filter((a,o)=>r(a,this.dataFactory.variable(o)))),this.contextHolder)}map(r){return new ni(this.dataFactory,(0,e.Map)(this.entries.map((a,o)=>r(a,this.dataFactory.variable(o)))),this.contextHolder)}merge(r){const a=new Set([...this.iteratorToIterable(this.entries.keys()),...[...r.keys()].map(l=>l.value)]),o=[];for(const l of a){const c=this.entries.get(l),d=r.get(this.dataFactory.variable(l));if(c&&d&&!c.equals(d))return;const h=c||d;o.push([l,h])}return this.createBindingsWithContexts(o,r)}mergeWith(r,a){const o=new Set([...this.iteratorToIterable(this.entries.keys()),...[...a.keys()].map(c=>c.value)]),l=[];for(const c of o){const d=this.dataFactory.variable(c),h=this.entries.get(c),f=a.get(d);let p;h&&f&&!h.equals(f)?p=r(h,f,d):p=h||f,l.push([c,p])}return this.createBindingsWithContexts(l,a)}createBindingsWithContexts(r,a){if(this.contextHolder&&this.contextHolder.context){let o=this.contextHolder.context;return"contextHolder"in a&&a.contextHolder&&a.contextHolder.context&&(o=ni.mergeContext(this.contextHolder.contextMergeHandlers,o,a.contextHolder.context)),new ni(this.dataFactory,(0,e.Map)(r),{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:o})}return new ni(this.dataFactory,(0,e.Map)(r),a.contextHolder)}static mergeContext(r,a,o){const l=[...a.keys(),...o.keys()],c={},d={},h=new Set(o.keys().map(p=>p.name)),f=a.keys().filter(p=>h.has(p.name));for(const p of l){if(d[p.name]===1)continue;d[p.name]=1;const y=f.some(b=>b.name===p.name);if(r[p.name]&&y){c[p.name]=r[p.name].run(a.get(p),o.get(p));continue}if(!(!r[p.name]&&y)){if(!a.get(p)){c[p.name]=o.get(p);continue}o.get(p)||(c[p.name]=a.get(p))}}return new t.ActionContext(c)}setContextEntry(r,a){return this.setContextEntryRaw(r,a)}setContextEntryRaw(r,a){var o;return this.contextHolder&&this.contextHolder.context?new ni(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context.set(r,a)}):new ni(this.dataFactory,this.entries,{contextMergeHandlers:((o=this.contextHolder)==null?void 0:o.contextMergeHandlers)??{},context:new t.ActionContext().set(r,a)})}deleteContextEntry(r){return this.deleteContextEntryRaw(r)}deleteContextEntryRaw(r){var a;return this.contextHolder?new ni(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:(a=this.contextHolder.context)==null?void 0:a.delete(r)}):new ni(this.dataFactory,this.entries)}getContext(){var r;return(r=this.contextHolder)==null?void 0:r.context}getContextEntry(r){var a;return(a=this.getContext())==null?void 0:a.get(r)}toString(){return(0,u.bindingsToString)(this)}*mapIterable(r,a){for(const o of r)yield a(o)}iteratorToIterable(r){return{[Symbol.iterator]:()=>r}}};return lh.Bindings=s,lh}var fh={},r5;function qZ(){if(r5)return fh;r5=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.BindingsFactory=void 0;const t=BT,e=Et(),u=eB();let s=class tB{constructor(r=new e.DataFactory,a){this.dataFactory=r,this.contextMergeHandlers=a}static async create(r,a){return new tB(new e.DataFactory,(await r.mediate({context:a})).mergeHandlers)}bindings(r=[]){return new u.Bindings(this.dataFactory,(0,t.Map)(r.map(([a,o])=>[a.value,o])),this.contextMergeHandlers?{contextMergeHandlers:this.contextMergeHandlers}:void 0)}fromBindings(r){return this.bindings([...r])}fromRecord(r){return this.bindings(Object.entries(r).map(([a,o])=>[this.dataFactory.variable(a),o]))}};return fh.BindingsFactory=s,fh}var n5;function xr(){return n5||(n5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(eB(),t),u(qZ(),t),u(Z7(),t)}(U2)),U2}var i5;function BZ(){if(i5)return ch;i5=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch.ActorRdfJoinMultiSmallestFilterBindings=void 0;const t=xr(),e=wt(),u=jn(),s=Lt,n=Dt(),r=Ot();let a=class rB extends u.ActorRdfJoin{constructor(l){super(l,{logicalType:"inner",physicalName:"multi-smallest-filter-bindings",limitEntries:2,limitEntriesMin:!0,isLeaf:!1})}async sortJoinEntries(l,c){let{entries:d}=await this.mediatorJoinEntriesSort.mediate({entries:l,context:c});d=d.sort((g,m)=>g.operationModified&&!m.operationModified?-1:0);const h=d.splice(0,1)[0];let f,p=-1,y=0;for(const[g,m]of d.entries()){const v=h.metadata.variables.filter(_=>m.metadata.variables.some(w=>_.equals(w))).length;(!f||v>y||v===y&&(m.metadata.variables.length<f.metadata.variables.length||m.metadata.variables.length===f.metadata.variables.length&&m.metadata.cardinality.value<f.metadata.cardinality.value))&&(f=m,p=g,y=v)}if(y===0)throw new Error(`Actor ${this.name} can only join with common variables`);const b=d;return b.splice(p,1),{first:h,second:f,remaining:b}}async getOutput(l){const c=await u.ActorRdfJoin.getEntriesWithMetadatas([...l.entries]),{first:d,second:h,remaining:f}=await this.sortJoinEntries(c,l.context),p=d.output.bindingsStream;d.output.bindingsStream=p.clone();const y=d.metadata.variables.filter(D=>h.metadata.variables.some(L=>D.equals(L))),b={},g=p.clone().map(D=>D.filter((L,O)=>y.some(E=>E.equals(O)))).filter(D=>{const L=(0,t.bindingsToString)(D);return!(L in b)&&(b[L]=!0)}),m=new u.ChunkedIterator(g,this.blockSize,{autoStart:!1}),v=e.ActorQueryOperation.getOperationSource(h.operation),w={output:{type:"bindings",bindingsStream:new n.UnionIterator(m.map(D=>v.source.queryBindings(h.operation,v.context?l.context.merge(v.context):l.context,{filterBindings:{bindings:D,metadata:d.metadata}}))),metadata:h.output.metadata},operation:h.operation,operationModified:!0};h.output.bindingsStream.destroy();const S={output:e.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:l.type,entries:[d,w],context:l.context.set(s.KeysRdfJoin.lastPhysicalJoin,this.physicalName)})),operation:rB.FACTORY.createJoin([d.operation,w.operation],!1),operationModified:!0},A=f;return A.unshift(S),{result:await this.mediatorJoin.mediate({type:l.type,entries:A,context:l.context}),physicalPlanMetadata:{firstIndex:c.indexOf(d),secondIndex:c.indexOf(h)}}}async getJoinCoefficients(l,c){if(l.context.get(s.KeysRdfJoin.lastPhysicalJoin)===this.physicalName)throw new Error(`Actor ${this.name} can not be called recursively`);c=[...c];const{first:d,second:h,remaining:f}=await this.sortJoinEntries(l.entries.map((w,S)=>({...w,metadata:c[S]})),l.context),p=e.ActorQueryOperation.getOperationSource(h.operation);if(!p)throw new Error(`Actor ${this.name} can only process if entries[1] has a source`);const y=h.operation,b=await p.source.getSelectorShape(l.context);if(!e.ActorQueryOperation.doesShapeAcceptOperation(b,y,{filterBindings:!0}))throw new Error(`Actor ${this.name} can only process if entries[1] accept filterBindings`);c=[d.metadata,h.metadata,...f.map(w=>w.metadata)];const g=u.ActorRdfJoin.getRequestInitialTimes(c),m=u.ActorRdfJoin.getRequestItemTimes(c),{selectivity:v}=await this.mediatorJoinSelectivity.mediate({entries:[d,h],context:l.context}),_=f.reduce((w,S)=>w*S.metadata.cardinality.value*this.selectivityModifier,1);return{iterations:v*this.selectivityModifier*h.metadata.cardinality.value*_,persistedItems:d.metadata.cardinality.value,blockingItems:d.metadata.cardinality.value,requestTime:g[0]+c[0].cardinality.value*m[0]+g[1]+_*m[1]}}};return ch.ActorRdfJoinMultiSmallestFilterBindings=a,a.FACTORY=new r.Factory,ch}var a5;function UZ(){return a5||(a5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(BZ(),t)}(B2)),B2}var Q2={},hh={},s5;function QZ(){if(s5)return hh;s5=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.ActorOptimizeQueryOperationFilterPushdown=void 0;const t=di(),e=wt(),u=un(),s=Ot();let n=class extends t.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return!0}async run(a){let o=a.operation;const l=this;this.splitConjunctive&&(o=s.Util.mapOperation(o,{filter(p,y){return p.expression.expressionType===s.Algebra.expressionTypes.OPERATOR&&p.expression.operator==="&&"?(l.logDebug(a.context,`Split conjunctive filter into ${p.expression.args.length} nested filters`),{recurse:!0,result:p.expression.args.reduce((b,g)=>y.createFilter(b,g),p.input)}):{recurse:!0,result:p}}}));const c=this.getSources(o),d=new Map(await Promise.all(c.map(async p=>[p,await p.source.getSelectorShape(a.context)])));let h=!0,f=0;for(;h&&f<this.maxIterations;)h=!1,o=s.Util.mapOperation(o,{filter(p,y){if(!l.shouldAttemptPushDown(p,c,d))return{recurse:!0,result:p};const b=l.getExpressionVariables(p.expression),[g,m]=l.filterPushdown(p.expression,b,p.input,y,a.context);return g&&(h=!0),{recurse:!0,result:m}}}),f++;return f>1&&l.logDebug(a.context,`Pushed down filters in ${f} iterations`),this.mergeConjunctive&&(o=s.Util.mapOperation(o,{filter(p,y){if(p.input.type===s.Algebra.types.FILTER){const{nestedExpressions:b,input:g}=l.getNestedFilterExpressions(p);return l.logDebug(a.context,`Merge ${b.length} nested filters into conjunctive filter`),{recurse:!0,result:y.createFilter(g,b.slice(1).reduce((m,v)=>y.createOperatorExpression("&&",[m,v]),b[0]))}}return{recurse:!0,result:p}}})),{operation:o,context:a.context}}shouldAttemptPushDown(a,o,l){if(this.aggressivePushdown)return!0;const c=a.expression;return!!(c.expressionType===s.Algebra.expressionTypes.OPERATOR&&c.operator==="="&&(c.args[0].expressionType==="term"&&c.args[0].term.termType!=="Variable"&&c.args[1].expressionType==="term"&&c.args[1].term.termType==="Variable"||c.args[0].expressionType==="term"&&c.args[0].term.termType==="Variable"&&c.args[1].expressionType==="term"&&c.args[1].term.termType!=="Variable")||o.some(d=>e.ActorQueryOperation.doesShapeAcceptOperation(l.get(d),a)))}getSources(a){const o=new Set,l=c=>{const d=e.ActorQueryOperation.getOperationSource(c);return d&&o.add(d),!1};return s.Util.recurseOperation(a,{[s.Algebra.types.PATTERN]:l,[s.Algebra.types.LINK]:l,[s.Algebra.types.NPS]:l,[s.Algebra.types.SERVICE]:l}),[...o]}getExpressionVariables(a){switch(a.expressionType){case s.Algebra.expressionTypes.AGGREGATE:case s.Algebra.expressionTypes.WILDCARD:throw new Error(`Getting expression variables is not supported for ${a.expressionType}`);case s.Algebra.expressionTypes.EXISTENCE:return s.Util.inScopeVariables(a.input);case s.Algebra.expressionTypes.NAMED:return[];case s.Algebra.expressionTypes.OPERATOR:return(0,u.uniqTerms)(a.args.flatMap(o=>this.getExpressionVariables(o)));case s.Algebra.expressionTypes.TERM:return a.term.termType==="Variable"?[a.term]:[]}}getOverlappingOperations(a,o){const l=[],c=[],d=[];for(const h of a.input){const f=s.Util.inScopeVariables(h);this.variablesSubSetOf(o,f)?l.push(h):this.variablesIntersect(o,f)?c.push(h):d.push(h)}return{fullyOverlapping:l,partiallyOverlapping:c,notOverlapping:d}}filterPushdown(a,o,l,c,d){if(this.isExpressionFalse(a))return[!0,c.createUnion([])];if(a.type===s.Algebra.types.EXPRESSION&&a.expressionType===s.Algebra.expressionTypes.EXISTENCE)return[!1,c.createFilter(l,a)];switch(l.type){case s.Algebra.types.EXTEND:return this.variablesIntersect([l.variable],o)?[!1,c.createFilter(l,a)]:[!0,c.createExtend(this.filterPushdown(a,o,l.input,c,d)[1],l.variable,l.expression)];case s.Algebra.types.FILTER:{const[h,f]=this.filterPushdown(a,o,l.input,c,d);return[h,c.createFilter(f,l.expression)]}case s.Algebra.types.JOIN:{if(l.input.length===0)return[!1,c.createFilter(l,a)];const{fullyOverlapping:h,partiallyOverlapping:f,notOverlapping:p}=this.getOverlappingOperations(l,o),y=[];let b=!1;return h.length>0&&(b=!0,y.push(c.createJoin(h.map(g=>this.filterPushdown(a,o,g,c,d)[1])))),f.length>0&&y.push(c.createFilter(c.createJoin(f,!1),a)),p.length>0&&y.push(...p),y.length>1&&(b=!0),b&&this.logDebug(d,`Push down filter across join entries with ${h.length} fully overlapping, ${f.length} partially overlapping, and ${p.length} not overlapping`),[b,y.length===1?y[0]:c.createJoin(y)]}case s.Algebra.types.NOP:return[!0,l];case s.Algebra.types.PROJECT:return this.variablesIntersect(l.variables,o)?[!0,c.createProject(this.filterPushdown(a,o,l.input,c,d)[1],l.variables)]:[!0,l];case s.Algebra.types.UNION:{const{fullyOverlapping:h,partiallyOverlapping:f,notOverlapping:p}=this.getOverlappingOperations(l,o),y=[];let b=!1;return h.length>0&&(b=!0,y.push(c.createUnion(h.map(g=>this.filterPushdown(a,o,g,c,d)[1])))),f.length>0&&y.push(c.createFilter(c.createUnion(f,!1),a)),p.length>0&&y.push(...p),y.length>1&&(b=!0),b&&this.logDebug(d,`Push down filter across union entries with ${h.length} fully overlapping, ${f.length} partially overlapping, and ${p.length} not overlapping`),[b,y.length===1?y[0]:c.createUnion(y)]}case s.Algebra.types.VALUES:return this.variablesIntersect(l.variables,o)?[!1,c.createFilter(l,a)]:[!0,l];case s.Algebra.types.LEFT_JOIN:{if(this.pushIntoLeftJoins){const h=s.Util.inScopeVariables(l.input[1]);if(!this.variablesIntersect(o,h))return this.logDebug(d,"Push down filter into left join"),[!0,c.createLeftJoin(this.filterPushdown(a,o,l.input[0],c,d)[1],l.input[1],l.expression)]}return[!1,c.createFilter(l,a)]}case s.Algebra.types.PATTERN:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(a);if(h){let f=!1;const p=l.metadata;if(l=(0,u.mapTermsNested)(l,y=>y.equals(h.variable)?(f=!0,h.term):y),l.type=s.Algebra.types.PATTERN,l.metadata=p,f)return this.logDebug(d,`Push down filter into pattern for ?${h.variable.value}`),[!0,c.createJoin([l,c.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,c.createFilter(l,a)]}case s.Algebra.types.PATH:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(a);if(h&&(l.subject.equals(h.variable)||l.object.equals(h.variable))){this.logDebug(d,`Push down filter into path for ?${h.variable.value}`);const f=l.metadata;return l=c.createPath(l.subject.equals(h.variable)?h.term:l.subject,l.predicate,l.object.equals(h.variable)?h.term:l.object),l.metadata=f,[!0,c.createJoin([l,c.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,c.createFilter(l,a)]}case s.Algebra.types.MINUS:case s.Algebra.types.ALT:case s.Algebra.types.ASK:case s.Algebra.types.BGP:case s.Algebra.types.CONSTRUCT:case s.Algebra.types.DESCRIBE:case s.Algebra.types.DISTINCT:case s.Algebra.types.EXPRESSION:case s.Algebra.types.FROM:case s.Algebra.types.GRAPH:case s.Algebra.types.GROUP:case s.Algebra.types.INV:case s.Algebra.types.LINK:case s.Algebra.types.NPS:case s.Algebra.types.ONE_OR_MORE_PATH:case s.Algebra.types.ORDER_BY:case s.Algebra.types.REDUCED:case s.Algebra.types.SEQ:case s.Algebra.types.SERVICE:case s.Algebra.types.SLICE:case s.Algebra.types.ZERO_OR_MORE_PATH:case s.Algebra.types.ZERO_OR_ONE_PATH:case s.Algebra.types.COMPOSITE_UPDATE:case s.Algebra.types.DELETE_INSERT:case s.Algebra.types.LOAD:case s.Algebra.types.CLEAR:case s.Algebra.types.CREATE:case s.Algebra.types.DROP:case s.Algebra.types.ADD:case s.Algebra.types.MOVE:case s.Algebra.types.COPY:return[!1,c.createFilter(l,a)]}}getEqualityExpressionPushableIntoPattern(a){if(a.expressionType===s.Algebra.expressionTypes.OPERATOR&&a.operator==="="){if(a.args[0].expressionType==="term"&&a.args[0].term.termType!=="Variable"&&(a.args[0].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(a.args[0].term))&&a.args[1].expressionType==="term"&&a.args[1].term.termType==="Variable")return{variable:a.args[1].term,term:a.args[0].term};if(a.args[0].expressionType==="term"&&a.args[0].term.termType==="Variable"&&a.args[1].expressionType==="term"&&a.args[1].term.termType!=="Variable"&&(a.args[1].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(a.args[1].term)))return{variable:a.args[0].term,term:a.args[1].term}}}isLiteralWithCanonicalLexicalForm(a){if(a.termType==="Literal")switch(a.datatype.value){case"http://www.w3.org/2001/XMLSchema#string":case"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":case"http://www.w3.org/2001/XMLSchema#normalizedString":case"http://www.w3.org/2001/XMLSchema#anyURI":case"http://www.w3.org/2001/XMLSchema#base64Binary":case"http://www.w3.org/2001/XMLSchema#language":case"http://www.w3.org/2001/XMLSchema#Name":case"http://www.w3.org/2001/XMLSchema#NCName":case"http://www.w3.org/2001/XMLSchema#NMTOKEN":case"http://www.w3.org/2001/XMLSchema#token":case"http://www.w3.org/2001/XMLSchema#hexBinary":return!0}return!1}variablesIntersect(a,o){return a.some(l=>o.some(c=>l.equals(c)))}variablesSubSetOf(a,o){return a.length<=o.length&&a.every(l=>o.some(c=>l.equals(c)))}isExpressionFalse(a){return a.term&&a.term.termType==="Literal"&&a.term.value==="false"}getNestedFilterExpressions(a){if(a.input.type===s.Algebra.types.FILTER){const o=this.getNestedFilterExpressions(a.input);return{nestedExpressions:[a.expression,...o.nestedExpressions],input:o.input}}return{nestedExpressions:[a.expression],input:a.input}}};return hh.ActorOptimizeQueryOperationFilterPushdown=n,hh}var o5;function HZ(){return o5||(o5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(QZ(),t)}(Q2)),Q2}var H2={},ph={},Ps={},u5;function nB(){if(u5)return Ps;u5=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.ActorDereferenceHttpBase=Ps.mediaTypesToAcceptString=void 0;const t=eA(),e=as(),u=ou(),s=hA(),n=Pi(),r=/^[^ ;]*/u;function a(l,c){const d="*/*;q=0.1",h=[],f=Object.entries(l).map(([y,b])=>({mediaType:y,priority:b})).sort((y,b)=>b.priority===y.priority?y.mediaType.localeCompare(b.mediaType):b.priority-y.priority);let p=f.length-1;for(const{mediaType:y,priority:b}of f){const g=y+(b===1?"":`;q=${b.toFixed(3).replace(/0*$/u,"")}`);if(p+g.length>c){for(;p+d.length>c;){const m=h.pop()??"";p-=m.length+1}h.push(d);break}h.push(g),p+=g.length}return h.length===0?"*/*":h.join(",")}Ps.mediaTypesToAcceptString=a;let o=class extends t.ActorDereference{constructor(c){super(c)}async test({url:c}){if(!/^https?:/u.test(c))throw new Error(`Cannot retrieve ${c} because it is not an HTTP(S) URL.`);return!0}async run(c){var m,v;let d=!0;const h=new s.Headers(c.headers);h.append("Accept",a(await((m=c.mediaTypes)==null?void 0:m.call(c))??{},this.getMaxAcceptHeaderLength()));let f;const p=Date.now();try{f=await this.mediatorHttp.mediate({context:c.context,init:{headers:h,method:c.method},input:c.url})}catch(_){return this.handleDereferenceErrors(c,_)}const y=(0,n.resolve)(f.url,c.url),b=Date.now()-p;if(f.status!==200){d=!1;const _=f.body?await(0,u.stringify)(e.ActorHttp.toNodeReadable(f.body)):"empty response";if(!c.acceptErrors){const w=new Error(`Could not retrieve ${c.url} (HTTP status ${f.status}):
${_}`);return this.handleDereferenceErrors(c,w,f.headers,b)}}const g=(v=r.exec(f.headers.get("content-type")??""))==null?void 0:v[0];return{url:y,data:d?e.ActorHttp.toNodeReadable(f.body):(0,t.emptyReadable)(),exists:d,requestTime:b,headers:f.headers,mediaType:g==="text/plain"?void 0:g}}};return Ps.ActorDereferenceHttpBase=o,Ps}var c5;function $Z(){if(c5)return ph;c5=1,Object.defineProperty(ph,"__esModule",{value:!0}),ph.ActorDereferenceHttp=void 0;const t=nB();class e extends t.ActorDereferenceHttpBase{getMaxAcceptHeaderLength(){return this.maxAcceptHeaderLengthBrowser}}return ph.ActorDereferenceHttp=e,ph}var l5;function VZ(){return l5||(l5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u($Z(),t),u(nB(),t)}(H2)),H2}var $2={},yh={},d5;function kZ(){if(d5)return yh;d5=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.ActorHttpProxy=void 0;const t=as(),e=Lt;let u=class extends t.ActorHttp{constructor(n){super(n)}async test(n){const r=n.context.get(e.KeysHttpProxy.httpProxyHandler);if(!r)throw new Error(`Actor ${this.name} could not find a proxy handler in the context.`);if(!await r.getProxy(n))throw new Error(`Actor ${this.name} could not determine a proxy for the given request.`);return{time:Number.POSITIVE_INFINITY}}async run(n){const r=typeof n.input=="string"?n.input:n.input.url,a=n.context.get(e.KeysHttpProxy.httpProxyHandler),o=await this.mediatorHttp.mediate({...await a.getProxy(n),context:n.context.delete(e.KeysHttpProxy.httpProxyHandler)});return Object.defineProperty(o,"url",{configurable:!0,enumerable:!0,get:()=>o.headers.get("x-final-url")??r}),o}};return yh.ActorHttpProxy=u,yh}var bh={},f5;function zZ(){if(f5)return bh;f5=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.ProxyHandlerStatic=void 0;let t=class{constructor(u){this.prefixUrl=u}async getProxy(u){return{init:u.init,input:this.modifyInput(u.input)}}modifyInput(u){return typeof u=="string"?this.prefixUrl+u:new Request(this.prefixUrl+u.url,u)}};return bh.ProxyHandlerStatic=t,bh}var h5;function GZ(){return h5||(h5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(kZ(),t),u(zZ(),t)}($2)),$2}var V2={},mh={},p5;function WZ(){if(p5)return mh;p5=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.ActorContextPreprocessQuerySourceIdentify=void 0;const t=xy(),e=Lt,u=ot,s=os();let n=class extends t.ActorContextPreprocess{constructor(a){super(a),this.cache=this.cacheSize?new s.LRUCache({max:this.cacheSize}):void 0;const o=this.cache;o&&this.httpInvalidator.addInvalidateListener(({url:l})=>l?o.delete(l):o.clear())}async test(a){return!0}async run(a){let o=a.context;if(o.has(e.KeysInitQuery.querySourcesUnidentified)){const l=a.context.get(e.KeysInitQuery.querySourcesUnidentified),c=await Promise.all(l.map(h=>this.expandSource(h))),d=await Promise.all(c.map(async h=>this.identifySource(h,a.context)));o=a.context.delete(e.KeysInitQuery.querySourcesUnidentified).set(e.KeysQueryOperation.querySources,d)}return{context:o}}async expandSource(a){return typeof a=="string"||"match"in a?{value:a}:{...a,context:(await this.mediatorContextPreprocess.mediate({context:u.ActionContext.ensureActionContext(a.context??{})})).context}}identifySource(a,o){let l;return typeof a.value=="string"&&this.cache&&(l=this.cache.get(a.value)),l||(l=this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:a,context:o}).then(({querySource:c})=>c),typeof a.value=="string"&&this.cache&&this.cache.set(a.value,l)),l}};return mh.ActorContextPreprocessQuerySourceIdentify=n,mh}var y5;function JZ(){return y5||(y5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(WZ(),t)}(V2)),V2}var k2={},gh={},b5;function XZ(){if(b5)return gh;b5=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.ActorRdfUpdateQuadsHypermedia=void 0;const t=dA(),e=os();let u=class extends t.ActorRdfUpdateQuadsDestination{constructor(n){super(n),this.cache=this.cacheSize?new e.LRUCache({max:this.cacheSize}):void 0;const r=this.cache;r&&this.httpInvalidator.addInvalidateListener(({url:a})=>a?r.delete(a):r.clear())}async test(n){if(!(0,t.getContextDestinationUrl)((0,t.getContextDestination)(n.context)))throw new Error(`Actor ${this.name} can only update quads against a single destination URL.`);return!0}getDestination(n){const r=(0,t.getContextDestination)(n);let a=(0,t.getContextDestinationUrl)(r);if(this.cache&&this.cache.has(a))return this.cache.get(a);const o=(async()=>{var h;let l,c;try{const f=await this.mediatorDereferenceRdf.mediate({context:n,url:a,acceptErrors:!0});c=f.exists,a=f.url;const p=await this.mediatorMetadata.mediate({context:n,url:a,quads:f.data,triples:(h=f.metadata)==null?void 0:h.triples});l=(await this.mediatorMetadataExtract.mediate({context:n,url:a,metadata:p.metadata,headers:f.headers,requestTime:f.requestTime})).metadata}catch{l={},c=!1}const{destination:d}=await this.mediatorRdfUpdateHypermedia.mediate({context:n,url:a,metadata:l,exists:c,forceDestinationType:(0,t.getDataDestinationType)(r)});return d})();return this.cache&&this.cache.set(a,o),o}};return gh.ActorRdfUpdateQuadsHypermedia=u,gh}var m5;function KZ(){return m5||(m5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(XZ(),t)}(k2)),k2}var z2={},_h={},g5;function YZ(){if(g5)return _h;g5=1,Object.defineProperty(_h,"__esModule",{value:!0}),_h.ActionObserverHttp=void 0;const t=ot;class e extends t.ActionObserver{constructor(s){super(s),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(s,n,r){this.requests++}}return _h.ActionObserverHttp=e,_h}var vh={},_5;function ZZ(){if(_5)return vh;_5=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.ActorQueryResultSerializeSparqlJson=void 0;const t=Gi(),e=Dt(),u=Wt();let s=class C0 extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(r){super(r)}static bindingToJsonBindings(r){if(r.termType==="Literal"){const a=r,o={value:a.value,type:"literal"},{language:l,datatype:c}=a;return l?o["xml:lang"]=l:c&&c.value!=="http://www.w3.org/2001/XMLSchema#string"&&(o.datatype=c.value),o}return r.termType==="BlankNode"?{value:r.value,type:"bnode"}:r.termType==="Quad"?{value:{subject:C0.bindingToJsonBindings(r.subject),predicate:C0.bindingToJsonBindings(r.predicate),object:C0.bindingToJsonBindings(r.object)},type:"triple"}:{value:r.value,type:"uri"}}async testHandleChecked(r,a){if(!["bindings","boolean"].includes(r.type))throw new Error("This actor can only handle bindings streams or booleans.");return!0}async runHandle(r,a,o){const l=new u.Readable,c={};if(r.type==="bindings"){const d=await r.metadata();d.variables.length>0&&(c.vars=d.variables.map(h=>h.value))}if(l.push(`{"head": ${JSON.stringify(c)},
`),r.type==="bindings"){const d=r.bindingsStream;l.push(`"results": { "bindings": [
`);let h=!0;function*f(p){yield p()}l.wrap((0,e.wrap)(d).map(p=>{const y=`${h?"":`,
`}${JSON.stringify(Object.fromEntries([...p].map(([b,g])=>[b.value,C0.bindingToJsonBindings(g)])))}`;return h=!1,y}).append((0,e.wrap)(f(()=>`
]}${this.emitMetadata?`,
"metadata": { "httpRequests": ${this.httpObserver.requests} }`:""}}
`))))}else l.wrap((0,e.wrap)(r.execute().then(d=>[`"boolean":${d}
}
`])));return{data:l}}};return vh.ActorQueryResultSerializeSparqlJson=s,vh}var v5;function w5(){return v5||(v5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(YZ(),t),u(ZZ(),t)}(z2)),z2}var G2={},wh={},S5;function eee(){if(S5)return wh;S5=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.ActionObserverHttp=void 0;const t=ot;let e=class extends t.ActionObserver{constructor(s){super(s),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(s,n,r){this.requests++}};return wh.ActionObserverHttp=e,wh}var Sh={},T5;function tee(){if(T5)return Sh;T5=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.ActorQueryResultSerializeStats=void 0;const t=Gi(),e=Dt(),u=Wt(),s=Ta();let n=class extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}async testHandleChecked(a,o){if(!["bindings","quads"].includes(a.type))throw new Error("This actor can only handle bindings streams or quad streams.");return!0}pushHeader(a){const o=["Result","Delay (ms)","HTTP requests"].join(",");a.push(`${o}
`)}createStat(a,o){return`${[o,this.delay(a),this.httpObserver.requests].join(",")}
`}createFooter(a){return`${["TOTAL",this.delay(a),this.httpObserver.requests].join(",")}
`}async runHandle(a,o,l){const c=new u.Readable,d=a.type==="bindings"?a.bindingsStream:a.quadStream,h=this.now();let f=1;function*p(b){yield b()}const y=(0,e.wrap)(d).map(()=>this.createStat(h,f++)).append((0,e.wrap)(p(()=>this.createFooter(h))));return this.pushHeader(c),c.wrap(y),{data:c}}now(){if(typeof performance>"u"){const a=s.hrtime();return a[0]*1e3+a[1]/1e6}return performance.now()}delay(a){return this.now()-a}};return Sh.ActorQueryResultSerializeStats=n,Sh}var A5;function E5(){return A5||(A5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(eee(),t),u(tee(),t)}(G2)),G2}var W2={},Th={},J2={},Ah={},O5;function ree(){if(O5)return Ah;O5=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.ActorQuerySourceIdentifyHypermedia=void 0;const t=ot;class e extends t.Actor{constructor(s,n){super(s),this.sourceType=n}async test(s){if(s.forceSourceType&&this.sourceType!==s.forceSourceType)throw new Error(`Actor ${this.name} is not able to handle source type ${s.forceSourceType}.`);return this.testMetadata(s)}}return Ah.ActorQuerySourceIdentifyHypermedia=e,Ah}var R5;function pA(){return R5||(R5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(ree(),t)}(J2)),J2}var Eh={},X2={},Oh={},x5;function nee(){if(x5)return Oh;x5=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.ActorQuerySourceIdentify=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return Oh.ActorQuerySourceIdentify=e,Oh}var $r={},I5;function iee(){if(I5)return $r;I5=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.filterMatchingQuotedQuads=$r.quadsOrderToBindingsOrder=$r.quadsMetadataToBindingsMetadata=$r.setMetadata=$r.getDuplicateElementLinks=$r.getVariables=$r.isTermVariable=$r.quadsToBindings=void 0;const t=wt(),e=Cn(),u=Et(),s=Xt(),n=un(),r=tq(),a=new u.DataFactory;function o(b,g,m,v){const _=c(g),w=g.graph.termType==="Variable"&&!v,S=d(g),A=(0,n.reduceTermsNested)(g,(O,E,P)=>(E.termType==="Variable"&&(O[P.join("_")]=E.value),O),{});let D=b;w&&(D=D.filter(O=>O.graph.termType!=="DefaultGraph")),S&&(D=D.filter(O=>{for(const E in S){const P=E.split("_"),M=(0,n.getValueNestedPath)(O,P);for(const U of S[E])if(!M.equals((0,n.getValueNestedPath)(O,U)))return!1}return!0}));const L=new t.ClosableIterator(D.map(O=>m.bindings(Object.keys(A).map(E=>{const P=E.split("_"),M=A[E],U=(0,n.getValueNestedPath)(O,P);return[a.variable(M),U]}))),{onClose:()=>b.destroy()});return h(L,b,A,_,w||!!S),L}$r.quadsToBindings=o;function l(b){return b.termType==="Variable"}$r.isTermVariable=l;function c(b){return(0,n.uniqTerms)((0,n.getTermsNested)(b).filter(l))}$r.getVariables=c;function d(b){const g={};let m=!1;if((0,n.forEachTermsNested)(b,(_,w)=>{if(_.termType==="Variable"){const S=(0,s.termToString)(_),A=(g[S]||(g[S]=[])).push(w);m=m||A>1}}),!m)return;const v={};for(const _ in g){const w=g[_],S=w.slice(1);S.length>0&&(v[w[0].join("_")]=S)}return v}$r.getDuplicateElementLinks=d;function h(b,g,m,v,_){const w=A=>{"canContainUndefs"in A||(A.canContainUndefs=!1),_&&(A.cardinality.type="estimate"),b.setProperty("metadata",f((0,e.validateMetadataQuads)(A),m,v)),A.state&&A.state.addInvalidateListener(()=>{h(b,g,m,v,_)})},S=g.getProperty("metadata");S?w(S):g.getProperty("metadata",w)}$r.setMetadata=h;function f(b,g,m){return{...b,canContainUndefs:!1,order:b.order?p(b.order,g):void 0,availableOrders:b.availableOrders?b.availableOrders.map(v=>({cost:v.cost,terms:p(v.terms,g)})):void 0,variables:m}}$r.quadsMetadataToBindingsMetadata=f;function p(b,g){const m={};return b.map(v=>{const _=g[v.term];if(_&&!m[_])return m[_]=!0,{term:a.variable(_),direction:v.direction}}).filter(Boolean)}$r.quadsOrderToBindingsOrder=p;function y(b,g){return(0,n.someTerms)(b,m=>m.termType==="Quad")&&(g=g.filter(m=>(0,r.matchPatternMappings)(m,b))),g}return $r.filterMatchingQuotedQuads=y,$r}var P5;function Ly(){return P5||(P5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(nee(),t),u(iee(),t)}(X2)),X2}var D5;function iB(){if(D5)return Eh;D5=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.QuerySourceQpf=void 0;const t=Ly(),e=Lt,u=Dt(),s=Et(),n=Xt(),r=Ny(),a=un(),o=Ot(),l=new o.Factory,c=new s.DataFactory;let d=class I3{constructor(p,y,b,g,m,v,_,w,S,A,D,L){this.referenceValue=S,this.mediatorMetadata=p,this.mediatorMetadataExtract=y,this.mediatorDereferenceRdf=b,this.bindingsFactory=g,this.subjectUri=m,this.predicateUri=v,this.objectUri=_,this.graphUri=w,this.url=S,this.bindingsRestricted=D,this.cachedQuads={};const O=this.getSearchForm(A);if(!O)throw new Error("Illegal state: found no TPF/QPF search form anymore in metadata.");if(this.searchForm=O,this.defaultGraph=A.defaultGraph?c.namedNode(A.defaultGraph):void 0,L){let E=(0,u.wrap)(L);this.defaultGraph&&(E=this.reverseMapQuadsToDefaultGraph(E)),E.setProperty("metadata",A),this.cacheQuads(E,c.variable(""),c.variable(""),c.variable(""),c.variable(""))}}async getSelectorShape(){return this.bindingsRestricted?I3.SELECTOR_SHAPE_BR:I3.SELECTOR_SHAPE}queryBindings(p,y,b){if(p.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${p.type}' to QuerySourceQpf`);const g=!!y.get(e.KeysQueryOperation.unionDefaultGraph);let m=this.match(p.subject,p.predicate,p.object,p.graph,g,y,b);return m=(0,t.filterMatchingQuotedQuads)(p,m),(0,t.quadsToBindings)(m,p,this.bindingsFactory,g)}getSearchForm(p){if(!p.searchForms||!p.searchForms.values)return;const{searchForms:y}=p;for(const b of y.values)if(this.graphUri&&this.subjectUri in b.mappings&&this.predicateUri in b.mappings&&this.objectUri in b.mappings&&this.graphUri in b.mappings&&Object.keys(b.mappings).length===4||this.subjectUri in b.mappings&&this.predicateUri in b.mappings&&this.objectUri in b.mappings&&Object.keys(b.mappings).length===3)return b}createFragmentUri(p,y,b,g,m){const v={},_=[{uri:this.subjectUri,term:y},{uri:this.predicateUri,term:b},{uri:this.objectUri,term:g},{uri:this.graphUri,term:m}];for(const w of _)w.uri&&(this.bindingsRestricted||w.term.termType!=="Variable"&&(w.term.termType!=="Quad"||(0,a.everyTermsNested)(w.term,S=>S.termType!=="Variable")))&&(v[w.uri]=(0,n.termToString)(w.term));return p.getUri(v)}match(p,y,b,g,m,v,_){let w=!1;if(g.termType==="DefaultGraph")if(this.defaultGraph)w=!0,g=this.defaultGraph;else if(Object.keys(this.searchForm.mappings).length===4&&!this.defaultGraph)if(m)g=c.variable("g");else{const L=new u.ArrayIterator([],{autoStart:!1});return L.setProperty("metadata",{requestTime:0,cardinality:{type:"exact",value:0},first:null,next:null,last:null,canContainUndefs:!1}),L}else Object.keys(this.searchForm.mappings).length===3&&(g=c.variable("g"));if(!(_!=null&&_.filterBindings)){const L=this.getCachedQuads(p,y,b,g);if(L)return L}const S=this;let A;const D=async function(){var M;let L=S.createFragmentUri(S.searchForm,p,y,b,g);_!=null&&_.filterBindings&&(L=await S.getBindingsRestrictedLink(p,y,b,g,L,_.filterBindings));const O=await S.mediatorDereferenceRdf.mediate({context:v,url:L});L=O.url;const E=await S.mediatorMetadata.mediate({context:v,url:L,quads:O.data,triples:(M=O.metadata)==null?void 0:M.triples}),{metadata:P}=await S.mediatorMetadataExtract.mediate({context:v,url:L,metadata:E.metadata,requestTime:O.requestTime});return A.setProperty("metadata",{...P,canContainUndefs:!1,subsetOf:S.url}),E.data}();return A=new u.TransformIterator(async()=>{const L=await D,O=c.defaultGraph();let E=(0,u.wrap)(L).transform({filter(P){return(0,a.matchPattern)(P,p,y,b,g)?!0:w&&(0,a.matchPattern)(P,p,y,b,O)}});return(w||g.termType==="Variable")&&(E=this.reverseMapQuadsToDefaultGraph(E)),E},{autoStart:!1}),_!=null&&_.filterBindings?A:(this.cacheQuads(A,p,y,b,g),this.getCachedQuads(p,y,b,g))}async getBindingsRestrictedLink(p,y,b,g,m,v){const _=[];for(const S of await v.bindings.toArray()){const A=["("];for(const D of v.metadata.variables){const L=S.get(D);A.push(L?(0,r.termToString)(L):"UNDEF"),A.push(" ")}A.push(")"),_.push(A.join(""))}_.length===0&&_.push("(<ex:comunica:unknown>)");const w=encodeURIComponent(`(${v.metadata.variables.map(S=>`?${S.value}`).join(" ")}) { ${_.join(" ")} }`);return`${m}&values=${w}`}reverseMapQuadsToDefaultGraph(p){const y=c.defaultGraph();return p.map(b=>(0,a.mapTerms)(b,(g,m)=>m==="graph"&&g.equals(this.defaultGraph)?y:g))}getPatternId(p,y,b,g){return JSON.stringify({s:p.termType==="Variable"?"":h(p),p:y.termType==="Variable"?"":h(y),o:b.termType==="Variable"?"":h(b),g:g.termType==="Variable"?"":h(g)})}cacheQuads(p,y,b,g,m){const v=this.getPatternId(y,b,g,m);this.cachedQuads[v]=p.clone()}getCachedQuads(p,y,b,g){const m=this.getPatternId(p,y,b,g),v=this.cachedQuads[m];if(v)return v.clone()}queryQuads(p,y){throw new Error("queryQuads is not implemented in QuerySourceQpf")}queryBoolean(p,y){throw new Error("queryBoolean is not implemented in QuerySourceQpf")}queryVoid(p,y){throw new Error("queryVoid is not implemented in QuerySourceQpf")}};Eh.QuerySourceQpf=d,d.SELECTOR_SHAPE={type:"operation",operation:{operationType:"pattern",pattern:l.createPattern(c.variable("s"),c.variable("p"),c.variable("o"),c.variable("g"))},variablesOptional:[c.variable("s"),c.variable("p"),c.variable("o"),c.variable("g")]},d.SELECTOR_SHAPE_BR={type:"operation",operation:{operationType:"pattern",pattern:l.createPattern(c.variable("s"),c.variable("p"),c.variable("o"),c.variable("g"))},variablesOptional:[c.variable("s"),c.variable("p"),c.variable("o"),c.variable("g")],filterBindings:!0};function h(f){return f.termType==="DefaultGraph"?"|":(0,n.termToString)(f)}return Eh}var N5;function aee(){if(N5)return Th;N5=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.ActorQuerySourceIdentifyHypermediaQpf=void 0;const t=xr(),e=pA(),u=iB();let s=class extends e.ActorQuerySourceIdentifyHypermedia{constructor(r){super(r,"qpf")}async test(r){if(r.forceSourceType&&r.forceSourceType!=="qpf"&&r.forceSourceType!=="brtpf")throw new Error(`Actor ${this.name} is not able to handle source type ${r.forceSourceType}.`);return this.testMetadata(r)}async testMetadata(r){const{searchForm:a}=await this.createSource(r.url,r.metadata,r.context,r.forceSourceType==="brtpf");if(r.handledDatasets&&r.handledDatasets[a.dataset])throw new Error(`Actor ${this.name} can only be applied for the first page of a QPF dataset.`);return{filterFactor:1}}async run(r){this.logInfo(r.context,`Identified as qpf source: ${r.url}`);const a=await this.createSource(r.url,r.metadata,r.context,r.forceSourceType==="brtpf",r.quads);return{source:a,dataset:a.searchForm.dataset}}async createSource(r,a,o,l,c){return new u.QuerySourceQpf(this.mediatorMetadata,this.mediatorMetadataExtract,this.mediatorDereferenceRdf,await t.BindingsFactory.create(this.mediatorMergeBindingsContext,o),this.subjectUri,this.predicateUri,this.objectUri,this.graphUri,r,a,l,c)}};return Th.ActorQuerySourceIdentifyHypermediaQpf=s,Th}var C5;function see(){return C5||(C5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(aee(),t),u(iB(),t)}(W2)),W2}var K2={},Rh={},xh={},j5;function aB(){if(j5)return xh;j5=1,Object.defineProperty(xh,"__esModule",{value:!0}),xh.QuerySourceSparql=void 0;const t=Lt,e=ot,u=Dt(),s=H7(),n=os(),r=Et(),a=Ot(),o=new a.Factory,l=new r.DataFactory,c=l.variable("count"),d={type:"estimate",value:Number.POSITIVE_INFINITY};let h=class ii{constructor(p,y,b,g,m,v,_,w){this.referenceValue=p,this.url=p,this.context=y,this.mediatorHttp=b,this.bindMethod=g,this.bindingsFactory=m,this.endpointFetcher=new s.SparqlEndpointFetcher({method:v?"GET":"POST",fetch:(S,A)=>this.mediatorHttp.mediate({input:S,init:A,context:this.lastSourceContext}),prefixVariableQuestionMark:!0}),this.cache=_>0?new n.LRUCache({max:_}):void 0,this.countTimeout=w}async getSelectorShape(){return ii.SELECTOR_SHAPE}queryBindings(p,y,b){let g;b!=null&&b.joinBindings?g=ii.addBindingsToOperation(this.bindMethod,p,b.joinBindings):g=Promise.resolve(p);const m=new u.TransformIterator(async()=>{const v=await g,_=a.Util.inScopeVariables(v),w=y.get(t.KeysInitQuery.queryString),S=!(b!=null&&b.joinBindings)&&w?w:ii.operationToSelectQuery(v,_),A=ii.operationCanContainUndefs(v);return this.queryBindingsRemote(this.url,S,_,y,A)},{autoStart:!1});return this.attachMetadata(m,y,g),m}queryQuads(p,y){this.lastSourceContext=this.context.merge(y);const b=this.endpointFetcher.fetchTriples(this.url,y.get(t.KeysInitQuery.queryString)??ii.operationToQuery(p));this.lastSourceContext=void 0;const g=(0,u.wrap)(b,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY});return this.attachMetadata(g,y,Promise.resolve(p.input)),g}queryBoolean(p,y){this.lastSourceContext=this.context.merge(y);const b=this.endpointFetcher.fetchAsk(this.url,y.get(t.KeysInitQuery.queryString)??ii.operationToQuery(p));return this.lastSourceContext=void 0,b}queryVoid(p,y){this.lastSourceContext=this.context.merge(y);const b=this.endpointFetcher.fetchUpdate(this.url,y.get(t.KeysInitQuery.queryString)??ii.operationToQuery(p));return this.lastSourceContext=void 0,b}attachMetadata(p,y,b){let g=[],m=!1;new Promise(async(v,_)=>{var S;let w;try{const A=await b;g=a.Util.inScopeVariables(A),w=ii.operationToCountQuery(A),m=ii.operationCanContainUndefs(A);const D=(S=this.cache)==null?void 0:S.get(w);if(D!==void 0)return v(D);const L=setTimeout(()=>v(d),this.countTimeout),O=await this.queryBindingsRemote(this.url,w,[c],y,!1);O.on("data",E=>{var U;clearTimeout(L);const P=E.get(c),M={type:"estimate",value:Number.POSITIVE_INFINITY};if(P){const j=Number.parseInt(P.value,10);Number.isNaN(j)||(M.type="exact",M.value=j,(U=this.cache)==null||U.set(w,M))}return v(M)}),O.on("error",()=>{clearTimeout(L),v(d)}),O.on("end",()=>{clearTimeout(L),v(d)})}catch(A){return _(A)}}).then(v=>p.setProperty("metadata",{cardinality:v,canContainUndefs:m,variables:g})).catch(()=>p.setProperty("metadata",{cardinality:d,canContainUndefs:m,variables:g}))}static async addBindingsToOperation(p,y,b){const g=await b.bindings.toArray();switch(p){case"values":return o.createJoin([o.createValues(b.metadata.variables,g.map(m=>Object.fromEntries([...m].map(([v,_])=>[`?${v.value}`,_])))),y],!1);case"union":throw new Error('Not implemented yet: "union" case');case"filter":throw new Error('Not implemented yet: "filter" case')}}static operationToSelectQuery(p,y){return ii.operationToQuery(o.createProject(p,y))}static operationToCountQuery(p){return ii.operationToQuery(o.createProject(o.createExtend(o.createGroup(p,[],[o.createBoundAggregate(l.variable("var0"),"count",o.createWildcardExpression(),!1)]),l.variable("count"),o.createTermExpression(l.variable("var0"))),[l.variable("count")]))}static operationToQuery(p){return(0,a.toSparql)(p,{sparqlStar:!0})}static operationCanContainUndefs(p){let y=!1;return a.Util.recurseOperation(p,{leftjoin(){return y=!0,!1},values(b){return y=b.bindings.some(g=>b.variables.some(m=>!(`?${m.value}`in g))),!1},union(b){const g=b.input.map(a.Util.inScopeVariables).map(m=>m.map(v=>v.value)).map(m=>m.sort((v,_)=>v.localeCompare(_))).map(m=>m.join(","));return g.every(m=>m===g[0])?!0:(y=!0,!1)}}),y}async queryBindingsRemote(p,y,b,g,m){this.lastSourceContext=this.context.merge(g);const v=await this.endpointFetcher.fetchBindings(p,y);return this.lastSourceContext=void 0,(0,u.wrap)(v,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY}).map(w=>this.bindingsFactory.bindings(b.map(S=>{var D;const A=w[`?${S.value}`];return!m&&!A&&((D=e.Actor.getContextLogger(this.context))==null||D.warn(`The endpoint ${p} failed to provide a binding for ${S.value}.`)),[S,A]}).filter(([S,A])=>!!A)))}toString(){return`QuerySourceSparql(${this.url})`}};return xh.QuerySourceSparql=h,h.SELECTOR_SHAPE={type:"disjunction",children:[{type:"operation",operation:{operationType:"type",type:a.Algebra.types.PROJECT},joinBindings:!0},{type:"operation",operation:{operationType:"type",type:a.Algebra.types.CONSTRUCT}},{type:"operation",operation:{operationType:"type",type:a.Algebra.types.DESCRIBE}},{type:"operation",operation:{operationType:"type",type:a.Algebra.types.ASK}},{type:"operation",operation:{operationType:"type",type:a.Algebra.types.COMPOSITE_UPDATE}}]},xh}var L5;function oee(){if(L5)return Rh;L5=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.ActorQuerySourceIdentifyHypermediaSparql=void 0;const t=xr(),e=pA(),u=aB();let s=class extends e.ActorQuerySourceIdentifyHypermedia{constructor(r){super(r,"sparql")}async testMetadata(r){if(!r.forceSourceType&&!r.metadata.sparqlService&&!(this.checkUrlSuffix&&r.url.endsWith("/sparql")))throw new Error(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql.`);return{filterFactor:1}}async run(r){return this.logInfo(r.context,`Identified ${r.url} as sparql source with service URL: ${r.metadata.sparqlService||r.url}`),{source:new u.QuerySourceSparql(r.forceSourceType?r.url:r.metadata.sparqlService||r.url,r.context,this.mediatorHttp,this.bindMethod,await t.BindingsFactory.create(this.mediatorMergeBindingsContext,r.context),this.forceHttpGet,this.cacheSize,this.countTimeout)}}};return Rh.ActorQuerySourceIdentifyHypermediaSparql=s,Rh}var M5;function uee(){return M5||(M5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(oee(),t),u(aB(),t)}(K2)),K2}var Y2={},Ih={},Z2={},Ph={},Dh={},F5;function sB(){if(F5)return Dh;F5=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.QuerySourceRdfJs=void 0;const t=Ly(),e=Lt,u=Cn(),s=Dt(),n=Et(),r=un(),a=Ot(),o=new a.Factory,l=new n.DataFactory;let c=class An{constructor(h,f){this.source=h,this.referenceValue=h,this.bindingsFactory=f}static nullifyVariables(h,f){return!h||h.termType==="Variable"||!f&&h.termType==="Quad"&&(0,r.someTermsNested)(h,p=>p.termType==="Variable")?void 0:h}static hasDuplicateVariables(h){const f=(0,r.filterTermsNested)(h,p=>p.termType==="Variable");return f.length>1&&(0,r.uniqTerms)(f).length<f.length}async getSelectorShape(){return An.SELECTOR_SHAPE}queryBindings(h,f){var g;if(h.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${h.type}' to QuerySourceRdfJs`);const p=!!((g=this.source.features)!=null&&g.quotedTripleFiltering),y=this.source.match(An.nullifyVariables(h.subject,p),An.nullifyVariables(h.predicate,p),An.nullifyVariables(h.object,p),An.nullifyVariables(h.graph,p));let b=y instanceof s.AsyncIterator?y:(0,s.wrap)(y,{autoStart:!1});return p||(b=(0,t.filterMatchingQuotedQuads)(h,b)),b.getProperty("metadata")||this.setMetadata(b,h).catch(m=>b.destroy(m)),(0,t.quadsToBindings)(b,h,this.bindingsFactory,!!f.get(e.KeysQueryOperation.unionDefaultGraph))}async setMetadata(h,f){var g;const p=!!((g=this.source.features)!=null&&g.quotedTripleFiltering);let y;if(this.source.countQuads)y=await this.source.countQuads(An.nullifyVariables(f.subject,p),An.nullifyVariables(f.predicate,p),An.nullifyVariables(f.object,p),An.nullifyVariables(f.graph,p));else{let m=0;y=await new Promise((v,_)=>{const w=this.source.match(An.nullifyVariables(f.subject,p),An.nullifyVariables(f.predicate,p),An.nullifyVariables(f.object,p),An.nullifyVariables(f.graph,p));w.on("error",_),w.on("end",()=>v(m)),w.on("data",()=>m++)})}const b=!p&&(0,r.someTerms)(f,m=>m.termType==="Quad")||An.hasDuplicateVariables(f);h.setProperty("metadata",{state:new u.MetadataValidationState,cardinality:{type:b?"estimate":"exact",value:y},canContainUndefs:!1})}queryQuads(h,f){throw new Error("queryQuads is not implemented in QuerySourceQpf")}queryBoolean(h,f){throw new Error("queryBoolean is not implemented in QuerySourceQpf")}queryVoid(h,f){throw new Error("queryVoid is not implemented in QuerySourceQpf")}toString(){return`QuerySourceRdfJs(${this.source.constructor.name})`}};return Dh.QuerySourceRdfJs=c,c.SELECTOR_SHAPE={type:"operation",operation:{operationType:"pattern",pattern:o.createPattern(l.variable("s"),l.variable("p"),l.variable("o"))},variablesOptional:[l.variable("s"),l.variable("p"),l.variable("o")]},Dh}var q5;function cee(){if(q5)return Ph;q5=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.ActorQuerySourceIdentifyRdfJs=void 0;const t=xr(),e=Ly(),u=ot,s=sB();let n=class extends e.ActorQuerySourceIdentify{constructor(a){super(a)}async test(a){const o=a.querySourceUnidentified;if(o.type!==void 0&&o.type!=="rdfjs")throw new Error(`${this.name} requires a single query source with rdfjs type to be present in the context.`);if(typeof o.value=="string"||!("match"in o.value))throw new Error(`${this.name} received an invalid rdfjs query source.`);return!0}async run(a){return{querySource:{source:new s.QuerySourceRdfJs(a.querySourceUnidentified.value,await t.BindingsFactory.create(this.mediatorMergeBindingsContext,a.context)),context:a.querySourceUnidentified.context??new u.ActionContext}}}};return Ph.ActorQuerySourceIdentifyRdfJs=n,Ph}var eS={},B5;function lee(){return B5||(B5=1,Object.defineProperty(eS,"__esModule",{value:!0})),eS}var U5;function yA(){return U5||(U5=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(cee(),t),u(lee(),t),u(sB(),t)}(Z2)),Z2}var Nh={},tS={},Ch={},jh={},Lh={},Q5;function oB(){if(Q5)return Lh;Q5=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.TermDictionaryNumberRecordFullTerms=void 0;const t=Et(),e=Xt();let u=class{constructor(n=new t.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=n}encode(n){const r=(0,e.termToString)(n);let a=this.dictionary[r];return a===void 0&&(a=this.lastId++,this.dictionary[r]=a,this.reverseDictionary[a]=n),a}encodeOptional(n){const r=(0,e.termToString)(n);return this.dictionary[r]}decode(n){const r=this.reverseDictionary[n];if(r===void 0)throw new Error(`The value ${n} is not present in this dictionary`);return r}*encodings(){for(const n of Object.keys(this.reverseDictionary))yield Number.parseInt(n,10)}findQuotedTriples(n){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(n){throw new Error("findQuotedTriplesEncoded is not supported")}};return Lh.TermDictionaryNumberRecordFullTerms=u,Lh}var Mh={},Fh={},rS={},H5;function Xi(){return H5||(H5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.arePatternsQuoted=t.quadHasVariables=t.quadToPattern=t.encodeOptionalTerms=t.orderQuadComponents=t.getComponentOrderScore=t.getBestIndex=t.QUAD_TERM_NAMES_INVERSE=void 0;const e=un();t.QUAD_TERM_NAMES_INVERSE=Object.fromEntries(e.QUAD_TERM_NAMES.map((c,d)=>[c,d]));function u(c,d){if(c.length===1||d.every(p=>p!==void 0))return 0;const h=[];for(let p=0;p<e.QUAD_TERM_NAMES.length;p++)d[p]&&h.push(e.QUAD_TERM_NAMES[p]);return c.map((p,y)=>({score:s(p,h),index:y})).sort((p,y)=>y.score-p.score)[0].index}t.getBestIndex=u;function s(c,d){return c.map((h,f)=>d.includes(h)?c.length-f:0).reduce((h,f)=>h+f,0)}t.getComponentOrderScore=s;function n(c,d){return c.map(h=>{const f=t.QUAD_TERM_NAMES_INVERSE[h];return d[f]})}t.orderQuadComponents=n;function r(c,d){const h=c.map(f=>{if(f){if(f.termType==="Quad"&&o(f))return;const p=d.encodeOptional(f);return p===void 0?"none":p}return f});if(!h.includes("none"))return h}t.encodeOptionalTerms=r;function a(c,d,h,f,p){let y=!1;return[[c||void 0,d||void 0,h||void 0,f||void 0].map(g=>{if(g){if(g.termType==="Variable")return;if(g.termType==="Quad"){if(p)return g;y=!0;return}}return g}),y]}t.quadToPattern=a;function o(c){for(const d of e.QUAD_TERM_NAMES){const h=c[d];if(h.termType==="Variable"||h.termType==="Quad"&&o(h))return!0}return!1}t.quadHasVariables=o;function l(c){return c.map(d=>(d==null?void 0:d.termType)==="Quad"&&o(d))}t.arePatternsQuoted=l}(rS)),rS}var $5;function bA(){if($5)return Fh;$5=1,Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.RdfStoreIndexNestedMap=void 0;const t=Xi();let e=class{constructor(s){this.features={quotedTripleFiltering:!1},this.dictionary=s.dictionary,this.nestedMap=new Map}set(s,n){const r=this.nestedMap;let a=r.get(s[0]);a||(a=new Map,r.set(s[0],a));let o=a.get(s[1]);o||(o=new Map,a.set(s[1],o));let l=o.get(s[2]);l||(l=new Map,o.set(s[2],l));const c=l.has(s[3]);return c||l.set(s[3],n),!c}remove(s){const n=this.nestedMap,r=n.get(s[0]);if(!r)return!1;const a=r.get(s[1]);if(!a)return!1;const o=a.get(s[2]);if(!o)return!1;const l=o.delete(s[3]);return l&&o.size===0&&(a.delete(s[2]),a.size===0&&(r.delete(s[1]),r.size===0&&n.delete(s[0]))),l}get(s){const n=(0,t.encodeOptionalTerms)(s,this.dictionary);if(!(!n||n.includes(void 0)))return this.getEncoded(n)}getEncoded(s){const n=this.nestedMap.get(s[0]);if(!n)return;const r=n.get(s[1]);if(!r)return;const a=r.get(s[2]);if(a)return a.get(s[3])}*find(s){const n=(0,t.encodeOptionalTerms)(s,this.dictionary);if(!n)return;const[r,a,o,l]=n,[c,d,h,f]=s;let p,y,b,g,m,v,_;const w=this.nestedMap,S=r!==void 0?w.has(r)?[r]:[]:w.keys();for(const A of S){m=w.get(A),p=c||this.dictionary.decode(A);const D=a!==void 0?m.has(a)?[a]:[]:m.keys();for(const L of D){v=m.get(L),y=d||this.dictionary.decode(L);const O=o!==void 0?v.has(o)?[o]:[]:v.keys();for(const E of O){_=v.get(E),b=h||this.dictionary.decode(E);const P=l!==void 0?_.has(l)?[l]:[]:_.keys();for(const M of P)g=f||this.dictionary.decode(M),yield[p,y,b,g]}}}}*findEncoded(s,n){const[r,a,o,l]=s;let c,d,h;const f=this.nestedMap,p=r!==void 0?f.has(r)?[r]:[]:f.keys();for(const y of p){c=f.get(y);const b=a!==void 0?c.has(a)?[a]:[]:c.keys();for(const g of b){d=c.get(g);const m=o!==void 0?d.has(o)?[o]:[]:d.keys();for(const v of m){h=d.get(v);const _=l!==void 0?h.has(l)?[l]:[]:h.keys();for(const w of _)yield[y,g,v,w]}}}}count(s){let n=0;const r=(0,t.encodeOptionalTerms)(s,this.dictionary);if(!r)return 0;const a=r[0],o=r[1],l=r[2],c=r[3];let d,h,f;const p=this.nestedMap,y=a!==void 0?p.has(a)?[a]:[]:p.keys();for(const b of y){d=p.get(b);const g=o!==void 0?d.has(o)?[o]:[]:d.keys();for(const m of g){h=d.get(m);const v=l!==void 0?h.has(l)?[l]:[]:h.keys();for(const _ of v)f=h.get(_),c!==void 0?f.has(c)&&n++:n+=f.size}}return n}};return Fh.RdfStoreIndexNestedMap=e,Fh}var V5;function uB(){if(V5)return Mh;V5=1,Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.TermDictionaryQuotedIndexed=void 0;const t=Et(),e=bA(),u=Xi();let s=class pa{constructor(r,a=new t.DataFactory){this.quotedTriplesDictionary=[],this.features={quotedTriples:!0},this.plainTermDictionary=r;const o={indexCombinations:[],indexConstructor:void 0,dictionary:this,dataFactory:a};this.quotedTriplesReverseDictionaries=[new e.RdfStoreIndexNestedMap(o),new e.RdfStoreIndexNestedMap(o),new e.RdfStoreIndexNestedMap(o)],this.dataFactory=a}encode(r){return r.termType==="Quad"?this.encodeQuotedTriple(r,!1):this.plainTermDictionary.encode(r)}encodeQuotedTriple(r,a){if(r.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const o=(0,u.encodeOptionalTerms)([r.subject,r.predicate,r.object,r.graph],this),l=o&&o.every(f=>f!==void 0)?this.quotedTriplesReverseDictionaries[0].getEncoded(o):void 0;if(l!==void 0||a)return l===void 0?void 0:pa.BITMASK|l;const c=[this.encode(r.subject),this.encode(r.predicate),this.encode(r.object)],d=this.quotedTriplesDictionary.length+1;this.quotedTriplesDictionary.push(c);const h=this.encode(this.dataFactory.defaultGraph());return this.quotedTriplesReverseDictionaries[0].set([c[0],c[1],c[2],h],d),this.quotedTriplesReverseDictionaries[1].set([c[1],c[2],c[0],h],d),this.quotedTriplesReverseDictionaries[2].set([c[2],c[0],c[1],h],d),pa.BITMASK|d}encodeOptional(r){return r.termType==="Quad"?this.encodeQuotedTriple(r,!0):this.plainTermDictionary.encodeOptional(r)}decode(r){if(pa.BITMASK&r){const a=(~pa.BITMASK&r)-1;if(a>=this.quotedTriplesDictionary.length)throw new Error(`The value ${r} is not present in the quoted triples range of the dictionary`);const o=this.quotedTriplesDictionary[a];return this.dataFactory.quad(this.decode(o[0]),this.decode(o[1]),this.decode(o[2]))}return this.plainTermDictionary.decode(r)}*encodings(){for(const r of this.plainTermDictionary.encodings())yield r;for(const r of this.quotedTriplesDictionary.keys())yield pa.BITMASK|1+r}*findQuotedTriples(r){for(const a of this.findQuotedTriplesEncoded(r))yield this.decode(a)}*findQuotedTriplesEncoded(r){const[a,o]=(0,u.quadToPattern)(r.subject,r.predicate,r.object,r.graph,!0);for(const l of this.patternToIterable(a[0]))for(const c of this.patternToIterable(a[1]))for(const d of this.patternToIterable(a[2]))for(const h of this.patternToIterable(a[3]))if(l&&c||!c&&!d){const f=[l,c,d,h];for(const p of this.quotedTriplesReverseDictionaries[0].findEncoded(f,a))yield pa.BITMASK|this.quotedTriplesReverseDictionaries[0].getEncoded(p)}else if(!l&&c){const f=[c,d,l,h];for(const p of this.quotedTriplesReverseDictionaries[1].findEncoded(f,a))yield pa.BITMASK|this.quotedTriplesReverseDictionaries[1].getEncoded(p)}else{const f=[d,l,c,h];for(const p of this.quotedTriplesReverseDictionaries[2].findEncoded(f,a))yield pa.BITMASK|this.quotedTriplesReverseDictionaries[2].getEncoded(p)}}*patternToIterable(r){if((r==null?void 0:r.termType)==="Quad"){yield*this.findQuotedTriplesEncoded(r);return}if(r===void 0){yield void 0;return}const a=this.encodeOptional(r);a!==void 0&&(yield a)}};return s.BITMASK=1<<31,Mh.TermDictionaryQuotedIndexed=s,Mh}var qh={},k5;function cB(){if(k5)return qh;k5=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.RdfStoreIndexNestedMapQuoted=void 0;const t=Xi(),e=bA();let u=class extends e.RdfStoreIndexNestedMap{constructor(n){super(n),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(n,r){for(const a of this.dictionary.findQuotedTriplesEncoded(r))n.has(a)&&(yield a)}*find(n){const r=(0,t.encodeOptionalTerms)(n,this.dictionary);if(!r)return;const[a,o,l,c]=r,[d,h,f,p]=n,[y,b,g,m]=(0,t.arePatternsQuoted)(n);let v,_,w,S,A,D,L;const O=this.nestedMap,E=d!==void 0?y?this.getQuotedPatternKeys(O,d):O.has(a)?[a]:[]:O.keys();for(const P of E){A=O.get(P),v=!y&&d?d:this.dictionary.decode(P);const M=h!==void 0?b?this.getQuotedPatternKeys(A,h):A.has(o)?[o]:[]:A.keys();for(const U of M){D=A.get(U),_=!b&&h?h:this.dictionary.decode(U);const j=f!==void 0?g?this.getQuotedPatternKeys(D,f):D.has(l)?[l]:[]:D.keys();for(const q of j){L=D.get(q),w=!g&&f?f:this.dictionary.decode(q);const $=p!==void 0?m?this.getQuotedPatternKeys(L,p):L.has(c)?[c]:[]:L.keys();for(const Z of $)S=!m&&p?p:this.dictionary.decode(Z),yield[v,_,w,S]}}}}*findEncoded(n,r){const[a,o,l,c]=n,[d,h,f,p]=r,[y,b,g,m]=(0,t.arePatternsQuoted)(r);let v,_,w;const S=this.nestedMap,A=d!==void 0?y?this.getQuotedPatternKeys(S,d):S.has(a)?[a]:[]:S.keys();for(const D of A){v=S.get(D);const L=h!==void 0?b?this.getQuotedPatternKeys(v,h):v.has(o)?[o]:[]:v.keys();for(const O of L){_=v.get(O);const E=f!==void 0?g?this.getQuotedPatternKeys(_,f):_.has(l)?[l]:[]:_.keys();for(const P of E){w=_.get(P);const M=p!==void 0?m?this.getQuotedPatternKeys(w,p):w.has(c)?[c]:[]:w.keys();for(const U of M)yield[Number.parseInt(D,10),Number.parseInt(O,10),Number.parseInt(P,10),Number.parseInt(U,10)]}}}}count(n){let r=0;const a=(0,t.encodeOptionalTerms)(n,this.dictionary);if(!a)return 0;const[o,l,c,d]=a,[h,f,p,y]=n,[b,g,m,v]=(0,t.arePatternsQuoted)(n);let _,w,S;const A=this.nestedMap,D=h!==void 0?b?this.getQuotedPatternKeys(A,h):A.has(o)?[o]:[]:A.keys();for(const L of D){_=A.get(L);const O=f!==void 0?g?this.getQuotedPatternKeys(_,f):_.has(l)?[l]:[]:_.keys();for(const E of O){w=_.get(E);const P=p!==void 0?m?this.getQuotedPatternKeys(w,p):w.has(c)?[c]:[]:w.keys();for(const M of P)S=w.get(M),y!==void 0?v?r+=[...this.getQuotedPatternKeys(S,y)].length:S.has(d)&&r++:r+=S.size}}return r}};return qh.RdfStoreIndexNestedMapQuoted=u,qh}var z5;function lB(){if(z5)return jh;z5=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.RdfStore=void 0;const t=Dt(),e=Et(),u=un(),s=fB(),n=oB(),r=uB(),a=cB(),o=Xi();let l=class j0{constructor(d){this.features={quotedTripleFiltering:!0},this._size=0,this.options=d,this.dataFactory=d.dataFactory,this.dictionary=d.dictionary,this.indexesWrapped=j0.constructIndexesWrapped(d),this.indexesWrappedComponentOrders=this.indexesWrapped.map(h=>h.componentOrder)}static createDefault(){return new j0({indexCombinations:j0.DEFAULT_INDEX_COMBINATIONS,indexConstructor:d=>new a.RdfStoreIndexNestedMapQuoted(d),dictionary:new r.TermDictionaryQuotedIndexed(new n.TermDictionaryNumberRecordFullTerms),dataFactory:new e.DataFactory})}static constructIndexesWrapped(d){const h=[];if(d.indexCombinations.length===0)throw new Error("At least one index combination is required");for(const f of d.indexCombinations){if(!j0.isCombinationValid(f))throw new Error(`Invalid index combination: ${f}`);h.push({index:d.indexConstructor(d),componentOrder:f,componentOrderInverse:Object.fromEntries(f.map((p,y)=>[p,y]))})}return h}static isCombinationValid(d){for(const h of u.QUAD_TERM_NAMES)if(!d.includes(h))return!1;return d.length===4}get size(){return this._size}addQuad(d){const h=[this.dictionary.encode(d.subject),this.dictionary.encode(d.predicate),this.dictionary.encode(d.object),this.dictionary.encode(d.graph)];let f=!1;for(const p of this.indexesWrapped)f=p.index.set((0,o.orderQuadComponents)(p.componentOrder,h),!0);return f?(this._size++,!0):!1}removeQuad(d){const h=[this.dictionary.encodeOptional(d.subject),this.dictionary.encodeOptional(d.predicate),this.dictionary.encodeOptional(d.object),this.dictionary.encodeOptional(d.graph)];if(h.includes(void 0))return!1;let f=!1;for(const p of this.indexesWrapped)if(f=p.index.remove((0,o.orderQuadComponents)(p.componentOrder,h)),!f)break;return f?(this._size--,!0):!1}remove(d){return d.on("data",h=>this.removeQuad(h)),d}removeMatches(d,h,f,p){return this.remove(this.match(d,h,f,p))}deleteGraph(d){return typeof d=="string"&&(d=this.dataFactory.namedNode(d)),this.removeMatches(void 0,void 0,void 0,d)}import(d){return d.on("data",h=>this.addQuad(h)),d}*readQuads(d,h,f,p){const y=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(_=>_.index.features.quotedTripleFiltering),[b,g]=(0,o.quadToPattern)(d,h,f,p,y),m=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,b)],v=(0,o.orderQuadComponents)(m.componentOrder,b);for(const _ of m.index.find(v)){const w=this.dataFactory.quad(_[m.componentOrderInverse.subject],_[m.componentOrderInverse.predicate],_[m.componentOrderInverse.object],_[m.componentOrderInverse.graph]);g?(0,u.matchPattern)(w,d,h,f,p)&&(yield w):yield w}}getQuads(d,h,f,p){return[...this.readQuads(d,h,f,p)]}match(d,h,f,p){return(0,t.wrap)(this.readQuads(d,h,f,p))}countQuads(d,h,f,p){const y=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(v=>v.index.features.quotedTripleFiltering),[b]=(0,o.quadToPattern)(d,h,f,p,y);if(b.every(v=>v===void 0))return this.size;const g=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,b)],m=(0,o.orderQuadComponents)(g.componentOrder,b);return g.index.count(m)}asDataset(){return new s.DatasetCoreWrapper(this)}};return l.DEFAULT_INDEX_COMBINATIONS=[["graph","subject","predicate","object"],["graph","predicate","object","subject"],["graph","object","subject","predicate"]],jh.RdfStore=l,jh}var G5;function fB(){if(G5)return Ch;G5=1,Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.DatasetCoreWrapper=void 0;const t=lB();let e=class dB{constructor(s){this.store=s}get size(){return this.store.size}add(s){return this.store.addQuad(s),this}delete(s){return this.store.removeQuad(s),this}has(s){for(const n of this.store.readQuads(s.subject,s.predicate,s.object,s.graph))return!0;return!1}match(s,n,r,a){const o=new t.RdfStore(this.store.options);for(const l of this.store.readQuads(s,n,r,a))o.addQuad(l);return new dB(o)}[Symbol.iterator](){return this.store.readQuads()}};return Ch.DatasetCoreWrapper=e,Ch}var nS={},W5;function dee(){return W5||(W5=1,Object.defineProperty(nS,"__esModule",{value:!0})),nS}var Bh={},J5;function fee(){if(J5)return Bh;J5=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.TermDictionaryNumberMap=void 0;const t=Et(),e=Xt();let u=class{constructor(n=new t.DataFactory){this.lastId=0,this.dictionary=new Map,this.reverseDictionary=new Map,this.features={quotedTriples:!1},this.dataFactory=n}encode(n){const r=(0,e.termToString)(n);let a=this.dictionary.get(r);return a===void 0&&(a=this.lastId++,this.dictionary.set(r,a),this.reverseDictionary.set(a,r)),a}encodeOptional(n){const r=(0,e.termToString)(n);return this.dictionary.get(r)}decode(n){const r=this.reverseDictionary.get(n);if(r===void 0)throw new Error(`The value ${n} is not present in this dictionary`);return(0,e.stringToTerm)(r,this.dataFactory)}encodings(){return this.reverseDictionary.keys()}findQuotedTriples(n){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(n){throw new Error("findQuotedTriplesEncoded is not supported")}};return Bh.TermDictionaryNumberMap=u,Bh}var Uh={},X5;function hee(){if(X5)return Uh;X5=1,Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.TermDictionaryNumberRecord=void 0;const t=Et(),e=Xt();let u=class{constructor(n=new t.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=n}encode(n){const r=(0,e.termToString)(n);let a=this.dictionary[r];return a===void 0&&(a=this.lastId++,this.dictionary[r]=a,this.reverseDictionary[a]=r),a}encodeOptional(n){const r=(0,e.termToString)(n);return this.dictionary[r]}decode(n){const r=this.reverseDictionary[n];if(r===void 0)throw new Error(`The value ${n} is not present in this dictionary`);return(0,e.stringToTerm)(r,this.dataFactory)}*encodings(){for(const n of Object.keys(this.reverseDictionary))yield Number.parseInt(n,10)}findQuotedTriples(n){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(n){throw new Error("findQuotedTriplesEncoded is not supported")}};return Uh.TermDictionaryNumberRecord=u,Uh}var Qh={},K5;function pee(){if(K5)return Qh;K5=1,Object.defineProperty(Qh,"__esModule",{value:!0}),Qh.TermDictionaryQuoted=void 0;const t=Et(),e=un();let u=class Fs{constructor(n,r,a=new t.DataFactory){this.features={quotedTriples:!0},this.plainTermDictionary=n,this.quotedTriplesDictionary=r,this.dataFactory=a}encode(n){return n.termType==="Quad"?Fs.BITMASK|1+this.quotedTriplesDictionary.encode(n):this.plainTermDictionary.encode(n)}encodeOptional(n){if(n.termType==="Quad"){const r=this.quotedTriplesDictionary.encodeOptional(n);return r===void 0?r:Fs.BITMASK|1+r}return this.plainTermDictionary.encodeOptional(n)}decode(n){if(Fs.BITMASK&n){const r=(~Fs.BITMASK&n)-1;return this.quotedTriplesDictionary.decode(r)}return this.plainTermDictionary.decode(n)}*encodings(){for(const n of this.plainTermDictionary.encodings())yield n;for(const n of this.quotedTriplesDictionary.encodings())yield Fs.BITMASK|1+n}*findQuotedTriples(n){for(const r of this.findQuotedTriplesEncoded(n))yield this.decode(r)}*findQuotedTriplesEncoded(n){for(let r of this.quotedTriplesDictionary.encodings()){r=Fs.BITMASK|1+r;const a=this.decode(r);(0,e.matchPattern)(a,n.subject,n.predicate,n.object,n.graph)&&(yield r)}}};return u.BITMASK=1<<31,Qh.TermDictionaryQuoted=u,Qh}var Hh={},Y5;function yee(){if(Y5)return Hh;Y5=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.TermDictionaryQuotedReferential=void 0;const t=Et(),e=un(),u=Xi();let s=class ya{constructor(r,a=new t.DataFactory){this.quotedTriplesDictionary=[],this.quotedTriplesReverseDictionary={},this.features={quotedTriples:!0},this.plainTermDictionary=r,this.dataFactory=a}encode(r){return r.termType==="Quad"?this.encodeQuotedTriple(r,!1):this.plainTermDictionary.encode(r)}encodeQuotedTriple(r,a){var o;if(r.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const l=(o=(0,u.encodeOptionalTerms)([r.subject,r.predicate,r.object,void 0],this))===null||o===void 0?void 0:o.slice(0,3),c=l&&l.every(f=>f!==void 0)?this.quotedTriplesReverseDictionary[l.join(ya.SEPARATOR)]:void 0;if(c!==void 0||a)return c===void 0?void 0:ya.BITMASK|c;const d=[this.encode(r.subject),this.encode(r.predicate),this.encode(r.object)],h=this.quotedTriplesDictionary.length+1;return this.quotedTriplesDictionary.push(d),this.quotedTriplesReverseDictionary[d.join(ya.SEPARATOR)]=h,ya.BITMASK|h}encodeOptional(r){return r.termType==="Quad"?this.encodeQuotedTriple(r,!0):this.plainTermDictionary.encodeOptional(r)}decode(r){if(ya.BITMASK&r){const a=(~ya.BITMASK&r)-1;if(a>=this.quotedTriplesDictionary.length)throw new Error(`The value ${r} is not present in the quoted triples range of the dictionary`);const o=this.quotedTriplesDictionary[a];return this.dataFactory.quad(this.decode(o[0]),this.decode(o[1]),this.decode(o[2]))}return this.plainTermDictionary.decode(r)}*encodings(){for(const r of this.plainTermDictionary.encodings())yield r;for(const r of this.quotedTriplesDictionary.keys())yield ya.BITMASK|1+r}*findQuotedTriples(r){for(const a of this.findQuotedTriplesEncoded(r))yield this.decode(a)}*findQuotedTriplesEncoded(r){for(let a of this.quotedTriplesDictionary.keys()){a=ya.BITMASK|1+a;const o=this.decode(a);(0,e.matchPattern)(o,r.subject,r.predicate,r.object,r.graph)&&(yield a)}}};return s.BITMASK=1<<31,s.SEPARATOR="_",Hh.TermDictionaryQuotedReferential=s,Hh}var $h={},Z5;function bee(){if(Z5)return $h;Z5=1,Object.defineProperty($h,"__esModule",{value:!0}),$h.TermDictionarySymbol=void 0;const t=Et(),e=Xt();let u=class{constructor(n=new t.DataFactory){this.features={quotedTriples:!1},this.dataFactory=n}encode(n){return Symbol.for(`rdf::${(0,e.termToString)(n)}`)}encodeOptional(n){return this.encode(n)}decode(n){const r=Symbol.keyFor(n);if(r===void 0)throw new Error(`The value ${String(n)} is not present in this dictionary`);return(0,e.stringToTerm)(r.slice(5),this.dataFactory)}encodings(){throw new Error("encodings is not supported")}findQuotedTriples(n){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(n){throw new Error("findQuotedTriplesEncoded is not supported")}};return $h.TermDictionarySymbol=u,$h}var iS={},ej;function mee(){return ej||(ej=1,Object.defineProperty(iS,"__esModule",{value:!0})),iS}var Vh={},tj;function hB(){if(tj)return Vh;tj=1,Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.RdfStoreIndexNestedMapRecursive=void 0;const t=Xi();let e=class{constructor(s){this.features={quotedTripleFiltering:!1},this.dictionary=s.dictionary,this.nestedMap=new Map}set(s,n){let r=this.nestedMap,a=!1;for(const[o,l]of s.entries()){const c=r;let d=c.get(l);d?o===s.length-1&&(a=!0):(d=o===s.length-1?n:new Map,c.set(l,d)),r=d}return!a}remove(s){const n=this.nestedMap,r=n.get(s[0]);if(!r)return!1;const a=r.get(s[1]);if(!a)return!1;const o=a.get(s[2]);if(!o)return!1;const l=o.delete(s[3]);return l&&o.size===0&&(a.delete(s[2]),a.size===0&&(r.delete(s[1]),r.size===0&&n.delete(s[0]))),l}get(s){const n=(0,t.encodeOptionalTerms)(s,this.dictionary);if(!(!n||n.includes(void 0)))return this.getEncoded(n)}getEncoded(s){const n=this.nestedMap.get(s[0]);if(!n)return;const r=n.get(s[1]);if(!r)return;const a=r.get(s[2]);if(a)return a.get(s[3])}*find(s){const n=(0,t.encodeOptionalTerms)(s,this.dictionary);if(n)for(const r of this.findEncoded(n,s))yield[n[0]!==void 0?s[0]:this.dictionary.decode(r[0]),n[1]!==void 0?s[1]:this.dictionary.decode(r[1]),n[2]!==void 0?s[2]:this.dictionary.decode(r[2]),n[3]!==void 0?s[3]:this.dictionary.decode(r[3])]}*findEncoded(s,n){return yield*this.findEncodedInner(0,s,n,this.nestedMap,[])}*findEncodedInner(s,n,r,a,o){if(s===n.length)yield[...o];else{const l=n[s];if(r[s]){const d=l;if(d!==void 0){const h=a.get(d);h&&(o[s]=l,yield*this.findEncodedInner(s+1,n,r,h,o))}}else for(const[d,h]of a.entries())o[s]=d,yield*this.findEncodedInner(s+1,n,r,h,o)}}count(s){return this.countInner(0,s,this.nestedMap)}countInner(s,n,r){const a=n[s];let o=0;if(a){const l=this.dictionary.encodeOptional(a);if(l!==void 0){if(s===n.length-1)return r.has(l)?1:0;const c=r.get(l);c&&(o+=this.countInner(s+1,n,c))}}else{if(s===n.length-1)return r.size;for(const l of r.values())o+=this.countInner(s+1,n,l)}return o}};return Vh.RdfStoreIndexNestedMapRecursive=e,Vh}var kh={},rj;function gee(){if(rj)return kh;rj=1,Object.defineProperty(kh,"__esModule",{value:!0}),kh.RdfStoreIndexNestedMapRecursiveQuoted=void 0;const t=Xi(),e=hB();let u=class extends e.RdfStoreIndexNestedMapRecursive{constructor(n){super(n),this.features={quotedTripleFiltering:!0}}*findEncoded(n,r){return yield*this.findEncodedInnerQuoted(0,n,r,(0,t.arePatternsQuoted)(r),this.nestedMap,[])}*findEncodedInnerQuoted(n,r,a,o,l,c){if(n===r.length)yield[...c];else{const d=r[n],h=a[n];if(h)if(o[n]){const f=this.dictionary.findQuotedTriplesEncoded(h);for(const p of f){const y=l.get(p);y&&(c[n]=p,yield*this.findEncodedInnerQuoted(n+1,r,a,o,y,c))}}else{const f=d;if(f!==void 0){const p=l.get(f);p&&(c[n]=d,yield*this.findEncodedInnerQuoted(n+1,r,a,o,p,c))}}else for(const[f,p]of l.entries())c[n]=f,yield*this.findEncodedInnerQuoted(n+1,r,a,o,p,c)}}countInner(n,r,a){const o=r[n];let l=0;if(o)if(o.termType==="Quad"&&(0,t.quadHasVariables)(o)){const c=this.dictionary.findQuotedTriplesEncoded(o);for(const d of c)if(n===r.length-1)a.has(d)&&l++;else{const h=a.get(d);h&&(l+=this.countInner(n+1,r,h))}}else{const c=this.dictionary.encodeOptional(o);if(c!==void 0){if(n===r.length-1)return a.has(c)?1:0;const d=a.get(c);d&&(l+=this.countInner(n+1,r,d))}}else{if(n===r.length-1)return a.size;for(const c of a.values())l+=this.countInner(n+1,r,c)}return l}};return kh.RdfStoreIndexNestedMapRecursiveQuoted=u,kh}var zh={},nj;function pB(){if(nj)return zh;nj=1,Object.defineProperty(zh,"__esModule",{value:!0}),zh.RdfStoreIndexNestedRecord=void 0;const t=Xi();let e=class{constructor(s){this.features={quotedTripleFiltering:!1},this.dictionary=s.dictionary,this.nestedRecords={}}set(s,n){const r=this.nestedRecords,a=r[s[0]]||(r[s[0]]={}),o=a[s[1]]||(a[s[1]]={}),l=o[s[2]]||(o[s[2]]={});return l[s[3]]?!1:(l[s[3]]=n,!0)}remove(s){const n=this.nestedRecords,r=n[s[0]];if(!r)return!1;const a=r[s[1]];if(!a)return!1;const o=a[s[2]];return!o||!o[s[3]]?!1:(delete o[s[3]],Object.keys(o).length===0&&(delete a[s[2]],Object.keys(a).length===0&&(delete r[s[1]],Object.keys(r).length===0&&delete n[s[0]])),!0)}get(s){const n=(0,t.encodeOptionalTerms)(s,this.dictionary);if(!(!n||n.includes(void 0)))return this.getEncoded(n)}getEncoded(s){var n,r,a;return(a=(r=(n=this.nestedRecords[s[0]])===null||n===void 0?void 0:n[s[1]])===null||r===void 0?void 0:r[s[2]])===null||a===void 0?void 0:a[s[3]]}*find(s){const n=(0,t.encodeOptionalTerms)(s,this.dictionary);if(!n)return;const[r,a,o,l]=n,[c,d,h,f]=s;let p,y,b,g,m,v,_;const w=this.nestedRecords,S=r!==void 0?r in w?[r]:[]:Object.keys(w);for(const A of S){m=w[A],p=c||this.dictionary.decode(Number.parseInt(A,10));const D=a!==void 0?a in m?[a]:[]:Object.keys(m);for(const L of D){v=m[L],y=d||this.dictionary.decode(Number.parseInt(L,10));const O=o!==void 0?o in v?[o]:[]:Object.keys(v);for(const E of O){_=v[E],b=h||this.dictionary.decode(Number.parseInt(E,10));const P=l!==void 0?l in _?[l]:[]:Object.keys(_);for(const M of P)g=f||this.dictionary.decode(Number.parseInt(M,10)),yield[p,y,b,g]}}}}*findEncoded(s,n){const[r,a,o,l]=s;let c,d,h;const f=this.nestedRecords,p=r!==void 0?r in f?[r]:[]:Object.keys(f);for(const y of p){c=f[y];const b=a!==void 0?a in c?[a]:[]:Object.keys(c);for(const g of b){d=c[g];const m=o!==void 0?o in d?[o]:[]:Object.keys(d);for(const v of m){h=d[v];const _=l!==void 0?l in h?[l]:[]:Object.keys(h);for(const w of _)yield[Number.parseInt(y,10),Number.parseInt(g,10),Number.parseInt(v,10),Number.parseInt(w,10)]}}}}count(s){let n=0;const r=(0,t.encodeOptionalTerms)(s,this.dictionary);if(!r)return 0;const a=r[0],o=r[1],l=r[2],c=r[3];let d,h,f;const p=this.nestedRecords,y=a!==void 0?a in p?[a]:[]:Object.keys(p);for(const b of y){d=p[b];const g=o!==void 0?o in d?[o]:[]:Object.keys(d);for(const m of g){h=d[m];const v=l!==void 0?l in h?[l]:[]:Object.keys(h);for(const _ of v)f=h[_],c!==void 0?c in f&&n++:n+=Object.keys(f).length}}return n}};return zh.RdfStoreIndexNestedRecord=e,zh}var Gh={},ij;function _ee(){if(ij)return Gh;ij=1,Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.RdfStoreIndexNestedRecordQuoted=void 0;const t=Xi(),e=pB();let u=class extends e.RdfStoreIndexNestedRecord{constructor(n){super(n),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(n,r){for(const a of this.dictionary.findQuotedTriplesEncoded(r))a in n&&(yield a)}*find(n){const r=(0,t.encodeOptionalTerms)(n,this.dictionary);if(!r)return;const[a,o,l,c]=r,[d,h,f,p]=n,[y,b,g,m]=(0,t.arePatternsQuoted)(n);let v,_,w,S,A,D,L;const O=this.nestedRecords,E=d!==void 0?y?this.getQuotedPatternKeys(O,d):a in O?[a]:[]:Object.keys(O);for(const P of E){A=O[P],v=!y&&d?d:this.dictionary.decode(Number.parseInt(P,10));const M=h!==void 0?b?this.getQuotedPatternKeys(A,h):o in A?[o]:[]:Object.keys(A);for(const U of M){D=A[U],_=!b&&h?h:this.dictionary.decode(Number.parseInt(U,10));const j=f!==void 0?g?this.getQuotedPatternKeys(D,f):l in D?[l]:[]:Object.keys(D);for(const q of j){L=D[q],w=!g&&f?f:this.dictionary.decode(Number.parseInt(q,10));const $=p!==void 0?m?this.getQuotedPatternKeys(L,p):c in L?[c]:[]:Object.keys(L);for(const Z of $)S=!m&&p?p:this.dictionary.decode(Number.parseInt(Z,10)),yield[v,_,w,S]}}}}*findEncoded(n,r){const[a,o,l,c]=n,[d,h,f,p]=r,[y,b,g,m]=(0,t.arePatternsQuoted)(r);let v,_,w;const S=this.nestedRecords,A=d!==void 0?y?this.getQuotedPatternKeys(S,d):a in S?[a]:[]:Object.keys(S);for(const D of A){v=S[D];const L=h!==void 0?b?this.getQuotedPatternKeys(v,h):o in v?[o]:[]:Object.keys(v);for(const O of L){_=v[O];const E=f!==void 0?g?this.getQuotedPatternKeys(_,f):l in _?[l]:[]:Object.keys(_);for(const P of E){w=_[P];const M=p!==void 0?m?this.getQuotedPatternKeys(w,p):c in w?[c]:[]:Object.keys(w);for(const U of M)yield[Number.parseInt(D,10),Number.parseInt(O,10),Number.parseInt(P,10),Number.parseInt(U,10)]}}}}count(n){let r=0;const a=(0,t.encodeOptionalTerms)(n,this.dictionary);if(!a)return 0;const[o,l,c,d]=a,[h,f,p,y]=n,[b,g,m,v]=(0,t.arePatternsQuoted)(n);let _,w,S;const A=this.nestedRecords,D=h!==void 0?b?this.getQuotedPatternKeys(A,h):o in A?[o]:[]:Object.keys(A);for(const L of D){_=A[L];const O=f!==void 0?g?this.getQuotedPatternKeys(_,f):l in _?[l]:[]:Object.keys(_);for(const E of O){w=_[E];const P=p!==void 0?m?this.getQuotedPatternKeys(w,p):c in w?[c]:[]:Object.keys(w);for(const M of P)S=w[M],y!==void 0?v?r+=[...this.getQuotedPatternKeys(S,y)].length:d in S&&r++:r+=Object.keys(S).length}}return r}};return Gh.RdfStoreIndexNestedRecordQuoted=u,Gh}var aS={},aj;function vee(){return aj||(aj=1,Object.defineProperty(aS,"__esModule",{value:!0})),aS}var sS={},sj;function wee(){return sj||(sj=1,Object.defineProperty(sS,"__esModule",{value:!0})),sS}var oj;function See(){return oj||(oj=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(fB(),t),u(dee(),t),u(fee(),t),u(hee(),t),u(oB(),t),u(pee(),t),u(uB(),t),u(yee(),t),u(bee(),t),u(mee(),t),u(bA(),t),u(cB(),t),u(hB(),t),u(gee(),t),u(pB(),t),u(_ee(),t),u(vee(),t),u(Xi(),t),u(wee(),t),u(lB(),t)}(tS)),tS}var uj;function yB(){if(uj)return Nh;uj=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.storeStream=void 0;const t=See();function e(u){const s=t.RdfStore.createDefault();return new Promise((n,r)=>s.import(u).on("error",r).once("end",()=>n(s)))}return Nh.storeStream=e,Nh}var cj;function Tee(){if(cj)return Ih;cj=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.ActorQuerySourceIdentifyHypermediaNone=void 0;const t=yA(),e=xr(),u=pA(),s=yB();let n=class extends u.ActorQuerySourceIdentifyHypermedia{constructor(a){super(a,"file")}async testMetadata(a){return{filterFactor:0}}async run(a){this.logInfo(a.context,`Identified as file source: ${a.url}`);const o=new t.QuerySourceRdfJs(await(0,s.storeStream)(a.quads),await e.BindingsFactory.create(this.mediatorMergeBindingsContext,a.context));return o.toString=()=>`QuerySourceRdfJs(${a.url})`,o.referenceValue=a.url,{source:o}}};return Ih.ActorQuerySourceIdentifyHypermediaNone=n,Ih}var lj;function Aee(){return lj||(lj=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Tee(),t)}(Y2)),Y2}var oS={},Wh={},uS={},Jh={},Xh={},cS={},Ds={},dj;function Ki(){if(dj)return Ds;dj=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.asTermType=Ds.ExpressionType=void 0;var t;(function(u){u.Aggregate="aggregate",u.Existence="existence",u.Named="named",u.Operator="operator",u.SpecialOperator="specialOperator",u.Term="term",u.Variable="variable",u.AsyncExtension="asyncExtension",u.SyncExtension="syncExtension"})(t||(Ds.ExpressionType=t={}));function e(u){if(u==="namedNode"||u==="literal"||u==="blankNode"||u==="quad")return u}return Ds.asTermType=e,Ds}var Kh={},fj;function Eee(){if(fj)return Kh;fj=1,Object.defineProperty(Kh,"__esModule",{value:!0}),Kh.Variable=void 0;const t=Ki();let e=class{constructor(s){this.expressionType=t.ExpressionType.Variable,this.name=s}};return Kh.Variable=e,Kh}var At={},Yh={},lS={},hj;function Nn(){return hj||(hj=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NamedOperators=t.SetFunctions=t.SetFunction=t.Operators=t.SpecialOperators=t.RegularOperators=t.SpecialOperator=t.RegularOperator=t.TypeURL=t.TypeAlias=void 0;var e;(function(a){a.SPARQL_NUMERIC="SPARQL_NUMERIC",a.SPARQL_STRINGLY="SPARQL_STRINGLY"})(e||(t.TypeAlias=e={}));var u;(function(a){a.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",a.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",a.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",a.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",a.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",a.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",a.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",a.XSD_G_MONTH="http://www.w3.org/2001/XMLSchema#gMonth",a.XSD_G_MONTHDAY="http://www.w3.org/2001/XMLSchema#gMonthDay",a.XSD_G_YEAR="http://www.w3.org/2001/XMLSchema#gYear",a.XSD_G_YEAR_MONTH="http://www.w3.org/2001/XMLSchema#gYearMonth",a.XSD_TIME="http://www.w3.org/2001/XMLSchema#time",a.XSD_G_DAY="http://www.w3.org/2001/XMLSchema#gDay",a.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",a.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",a.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",a.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",a.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",a.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",a.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",a.XSD_INT="http://www.w3.org/2001/XMLSchema#int",a.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",a.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",a.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",a.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",a.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",a.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",a.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",a.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",a.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",a.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",a.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",a.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",a.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",a.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",a.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",a.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",a.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",a.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",a.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",a.XSD_DAY_TIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration"})(u||(t.TypeURL=u={}));var s;(function(a){a.NOT="!",a.UMINUS="uminus",a.UPLUS="uplus",a.EQUAL="=",a.NOT_EQUAL="!=",a.LT="<",a.GT=">",a.LTE="<=",a.GTE=">=",a.MULTIPLICATION="*",a.DIVISION="/",a.ADDITION="+",a.SUBTRACTION="-",a.IS_IRI="isiri",a.IS_URI="isuri",a.IS_BLANK="isblank",a.IS_LITERAL="isliteral",a.IS_NUMERIC="isnumeric",a.STR="str",a.LANG="lang",a.DATATYPE="datatype",a.IRI="iri",a.URI="uri",a.STRDT="strdt",a.STRLANG="strlang",a.UUID="uuid",a.STRUUID="struuid",a.STRLEN="strlen",a.SUBSTR="substr",a.UCASE="ucase",a.LCASE="lcase",a.STRSTARTS="strstarts",a.STRENDS="strends",a.CONTAINS="contains",a.STRBEFORE="strbefore",a.STRAFTER="strafter",a.ENCODE_FOR_URI="encode_for_uri",a.LANG_MATCHES="langmatches",a.REGEX="regex",a.REPLACE="replace",a.ABS="abs",a.ROUND="round",a.CEIL="ceil",a.FLOOR="floor",a.RAND="rand",a.NOW="now",a.YEAR="year",a.MONTH="month",a.DAY="day",a.HOURS="hours",a.MINUTES="minutes",a.SECONDS="seconds",a.TIMEZONE="timezone",a.TZ="tz",a.MD5="md5",a.SHA1="sha1",a.SHA256="sha256",a.SHA384="sha384",a.SHA512="sha512",a.TRIPLE="triple",a.SUBJECT="subject",a.PREDICATE="predicate",a.OBJECT="object",a.IS_TRIPLE="istriple"})(s||(t.RegularOperator=s={}));var n;(function(a){a.BOUND="bound",a.IF="if",a.COALESCE="coalesce",a.LOGICAL_OR="||",a.LOGICAL_AND="&&",a.SAME_TERM="sameterm",a.IN="in",a.NOT_IN="notin",a.CONCAT="concat",a.BNODE="bnode"})(n||(t.SpecialOperator=n={})),t.RegularOperators=new Set(Object.values(s)),t.SpecialOperators=new Set(Object.values(n)),t.Operators=new Set([...t.RegularOperators,...t.SpecialOperators]);var r;(function(a){a.COUNT="count",a.SUM="sum",a.MIN="min",a.MAX="max",a.AVG="avg",a.GROUP_CONCAT="group_concat",a.SAMPLE="sample"})(r||(t.SetFunction=r={})),t.SetFunctions=new Set(Object.values(r)),t.NamedOperators=new Set([u.XSD_STRING,u.XSD_FLOAT,u.XSD_DOUBLE,u.XSD_DECIMAL,u.XSD_INTEGER,u.XSD_DATE_TIME,u.XSD_DATE,u.XSD_BOOLEAN,u.XSD_TIME,u.XSD_DURATION,u.XSD_DAY_TIME_DURATION,u.XSD_YEAR_MONTH_DURATION])}(lS)),lS}var mt={},pj;function on(){if(pj)return mt;pj=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.NoExistenceHook=mt.NoAggregator=mt.ExtensionFunctionError=mt.UnknownNamedOperator=mt.UnknownOperator=mt.InvalidTermType=mt.InvalidExpressionType=mt.InvalidExpression=mt.InvalidArity=mt.UnexpectedError=mt.ParseError=mt.EmptyAggregateError=mt.IncompatibleLanguageOperation=mt.InvalidTimezoneCall=mt.CastError=mt.InvalidCompareArgumentTypes=mt.InvalidArgumentTypes=mt.InError=mt.CoalesceError=mt.RDFEqualTypeError=mt.EBVCoercionError=mt.UnboundVariableError=mt.InvalidLexicalForm=mt.isExpressionError=mt.ExpressionError=void 0;class t extends Error{}mt.ExpressionError=t;function e(E){return E instanceof t}mt.isExpressionError=e;class u extends t{constructor(P){super(`Invalid lexical form '${O(P)}'`),this.arg=P}}mt.InvalidLexicalForm=u;class s extends t{constructor(P,M){super(`Unbound variable '${O(P)}'`),this.variable=P,this.bindings=M}}mt.UnboundVariableError=s;class n extends t{constructor(P){super(`Cannot coerce term to EBV '${O(P)}'`),this.arg=P}}mt.EBVCoercionError=n;class r extends t{constructor(P){super("Equality test for literals with unsupported datatypes"),this.args=P}}mt.RDFEqualTypeError=r;class a extends t{constructor(P){super("All COALESCE arguments threw errors"),this.errors=P}}mt.CoalesceError=a;class o extends t{constructor(P){super(`Some argument to IN errorred and none where equal. ${P.map(M=>`(${M.toString()}) `).join("and ")}`),this.errors=P}}mt.InError=o;class l extends t{constructor(P,M){super(`Argument types not valid for operator: '${O(M)}' with '${O(P)}`),this.args=P,this.op=M}}mt.InvalidArgumentTypes=l;class c extends t{constructor(P,M){super(`Compared argument types are supported: '${P.termType}' and '${M.termType}'`),this.arg0=P,this.arg1=M}}mt.InvalidCompareArgumentTypes=c;class d extends t{constructor(P,M){super(`Invalid cast: '${O(P)}' to '${O(M)}'`),this.arg=P}}mt.CastError=d;class h extends t{constructor(P){super(`TIMEZONE call on ${P} which has no timezone`),this.dateString=P}}mt.InvalidTimezoneCall=h;class f extends t{constructor(P,M){super(`Operation on incompatible language literals '${O(P)}' and '${O(M)}'`),this.arg1=P,this.arg2=M}}mt.IncompatibleLanguageOperation=f;class p extends t{constructor(){super("Empty aggregate expression")}}mt.EmptyAggregateError=p;class y extends t{constructor(P,M){super(`Failed to parse ${P} as ${M}.`)}}mt.ParseError=y;class b extends Error{constructor(P,M){super(`Programmer Error '${P}'`),this.payload=M}}mt.UnexpectedError=b;class g extends Error{constructor(P,M){super(`The number of args does not match the arity of the operator '${O(M)}'.`),this.args=P,this.op=M}}mt.InvalidArity=g;class m extends Error{constructor(P){super(`Invalid SPARQL Expression '${O(P)}'`)}}mt.InvalidExpression=m;class v extends Error{constructor(P){super(`Invalid expression type for SPARQL Expression '${O(P)}'`),this.expr=P}}mt.InvalidExpressionType=v;class _ extends Error{constructor(P){super(`Invalid term type for term '${O(P)}'`),this.term=P}}mt.InvalidTermType=_;class w extends Error{constructor(P){super(`Unknown operator: '${O(P)}`)}}mt.UnknownOperator=w;class S extends Error{constructor(P){super(`Unknown named operator: '${O(P)}'`)}}mt.UnknownNamedOperator=S;class A extends Error{constructor(P,M){M instanceof Error?super(`Error thrown in ${P}: ${M.message}${M.stack?`
${M.stack}`:""}`):super(`Error thrown in ${P}`)}}mt.ExtensionFunctionError=A;class D extends Error{constructor(P){super(`Aggregate expression ${O(P)} found, but no aggregate hook provided.`)}}mt.NoAggregator=D;class L extends Error{constructor(){super("EXISTS found, but no existence hook provided.")}}mt.NoExistenceHook=L;function O(E){return JSON.stringify(E)}return mt}var jr={},Ht={},yj;function uu(){if(yj)return Ht;yj=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.extractTimeZone=Ht.extractRawTimeZone=Ht.dayTimeDurationsToSeconds=Ht.yearMonthDurationsToMonths=Ht.trimToDayTimeDuration=Ht.trimToYearMonthDuration=Ht.toUTCDate=Ht.toJSDate=Ht.negateDuration=Ht.toDateTimeRepresentation=Ht.defaultedDateTimeRepresentation=Ht.simplifyDurationRepresentation=Ht.defaultedDurationRepresentation=Ht.defaultedYearMonthDurationRepresentation=Ht.defaultedDayTimeDurationRepresentation=void 0;function t(b){return{day:b.day??0,hours:b.hours??0,minutes:b.minutes??0,seconds:b.seconds??0}}Ht.defaultedDayTimeDurationRepresentation=t;function e(b){return{year:b.year??0,month:b.month??0}}Ht.defaultedYearMonthDurationRepresentation=e;function u(b){return{...t(b),...e(b)}}Ht.defaultedDurationRepresentation=u;function s(b){const g=u(b),m={},v=g.year+Math.trunc(g.month/12);v&&(m.year=v,g.month%=12),g.month&&(m.month=g.month);const _=g.day+Math.trunc(g.hours/24)+Math.trunc(g.minutes/(24*60))+Math.trunc(g.seconds/(24*60*60));_&&(m.day=_,g.hours%=24,g.minutes%=24*60,g.seconds%=24*60*60);const w=g.hours+Math.trunc(g.minutes/60)+Math.trunc(g.seconds/(60*60));w&&(m.hours=w,g.minutes%=60,g.seconds%=60*60);const S=g.minutes+Math.trunc(g.seconds/60);return S&&(m.minutes=S,g.seconds%=60),g.seconds&&(m.seconds=g.seconds),m}Ht.simplifyDurationRepresentation=s;function n(b){return{...b,day:b.day??1,hours:b.hours??0,month:b.month??1,year:b.year??0,seconds:b.seconds??0,minutes:b.minutes??0}}Ht.defaultedDateTimeRepresentation=n;function r({date:b,timeZone:g}){return{year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate(),hours:b.getHours(),minutes:b.getMinutes(),seconds:b.getSeconds(),zoneHours:g.zoneHours,zoneMinutes:g.zoneMinutes}}Ht.toDateTimeRepresentation=r;function a(b){return{year:b.year===void 0?void 0:-1*b.year,month:b.month===void 0?void 0:-1*b.month,day:b.day===void 0?void 0:-1*b.day,hours:b.hours===void 0?void 0:-1*b.hours,minutes:b.minutes===void 0?void 0:-1*b.minutes,seconds:b.seconds===void 0?void 0:-1*b.seconds}}Ht.negateDuration=a;function o(b){const g=new Date(b.year,b.month-1,b.day,b.hours,b.minutes,Math.trunc(b.seconds),b.seconds%1*1e3);return b.year>=0&&b.year<100&&g.setFullYear(g.getFullYear()-1900),g}Ht.toJSDate=o;function l(b,g){const m=o(n(b)),v=m.getTimezoneOffset(),_=b.zoneHours??g.zoneHours,w=b.zoneMinutes??g.zoneMinutes;return new Date(m.getTime()-(v+_*60+w)*60*1e3)}Ht.toUTCDate=l;function c(b){return{year:b.year,month:b.month}}Ht.trimToYearMonthDuration=c;function d(b){return{day:b.day,hours:b.hours,minutes:b.minutes,seconds:b.seconds}}Ht.trimToDayTimeDuration=d;function h(b){return b.year*12+b.month}Ht.yearMonthDurationsToMonths=h;function f(b){return((b.day*24+b.hours)*60+b.minutes)*60+b.seconds}Ht.dayTimeDurationsToSeconds=f;function p(b){return/(Z|([+-]\d\d:\d\d))?$/u.exec(b)[0]}Ht.extractRawTimeZone=p;function y(b){return{zoneHours:b.getTimezoneOffset()/60,zoneMinutes:b.getTimezoneOffset()%60}}return Ht.extractTimeZone=y,Ht}var ca={},bj;function bB(){if(bj)return ca;bj=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.elapsedDuration=ca.addDurationToDateTime=ca.maximumDayInMonthFor=void 0;const t=uu();function e(r,a,o=0){const l=r-o,c=a-o,d=Math.floor(l/c);return{intDiv:d,remainder:r-d*c}}function u(r,a){const{intDiv:o,remainder:l}=e(a,13,1),c=r+o;return[1,3,5,7,8,10,12].includes(l)?31:[4,6,9,11].includes(l)?30:l===2&&(e(c,400).remainder===0||e(c,100).remainder!==0&&e(c,4).remainder===0)?29:28}ca.maximumDayInMonthFor=u;function s(r,a){const o={...r};let l=e(r.month+a.month,13,1);for(o.month=l.remainder,o.year=r.year+a.year+l.intDiv,l=e(r.seconds+a.seconds,60),o.seconds=l.remainder,l=e(r.minutes+a.minutes+l.intDiv,60),o.minutes=l.remainder,l=e(r.hours+a.hours+l.intDiv,24),o.hours=l.remainder,o.day=r.day+a.day+l.intDiv;;){let c;if(o.day<1)o.day+=u(o.year,o.month-1),c=-1;else if(o.day>u(o.year,o.month))o.day-=u(o.year,o.month),c=1;else break;l=e(o.month+c,13,1),o.month=l.remainder,o.year+=l.intDiv}return o}ca.addDurationToDateTime=s;function n(r,a,o){const l=(0,t.toUTCDate)(r,o),c=(0,t.toUTCDate)(a,o),d=l.getTime()-c.getTime();return{day:Math.floor(d/(1e3*60*60*24)),hours:Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(d%(1e3*60*60)/(1e3*60)),seconds:d%(1e3*60)}}return ca.elapsedDuration=n,ca}var mj;function P3(){if(mj)return jr;mj=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.parseDayTimeDuration=jr.parseYearMonthDuration=jr.parseDuration=jr.parseTime=jr.parseDate=jr.parseDateTime=jr.parseXSDInteger=jr.parseXSDDecimal=jr.parseXSDFloat=void 0;const t=uu(),e=on(),u=bB();function s(y){const b=Number(y);return Number.isNaN(b)?y==="NaN"?Number.NaN:y==="INF"||y==="+INF"?Number.POSITIVE_INFINITY:y==="-INF"?Number.NEGATIVE_INFINITY:void 0:b}jr.parseXSDFloat=s;function n(y){const b=Number(y);return Number.isNaN(b)?void 0:b}jr.parseXSDDecimal=n;function r(y){const b=Number.parseInt(y,10);return Number.isNaN(b)?void 0:b}jr.parseXSDInteger=r;function a(y){const[b,g]=y.split("T");return{...l(b),...c(g)}}jr.parseDateTime=a;function o(y){if(y==="")return{zoneHours:void 0,zoneMinutes:void 0};if(y==="Z")return{zoneHours:0,zoneMinutes:0};const g=y.replaceAll(/^([+|-])(\d\d):(\d\d)$/gu,"$11!$2!$3").split("!").map(Number);return{zoneHours:g[0]*g[1],zoneMinutes:g[0]*g[2]}}function l(y){const b=y.replaceAll(/^(-)?([123456789]*\d{4})-(\d\d)-(\d\d)(Z|([+-]\d\d:\d\d))?$/gu,"$11!$2!$3!$4!$5");if(b===y)throw new e.ParseError(y,"date");const g=b.split("!"),m=g.slice(0,-1).map(Number),v={year:m[0]*m[1],month:m[2],day:m[3],...o(g[4])};if(!(v.month>=1&&v.month<=12)||!(v.day>=1&&v.day<=(0,u.maximumDayInMonthFor)(v.year,v.month)))throw new e.ParseError(y,"date");return v}jr.parseDate=l;function c(y){const b=y.replaceAll(/^(\d\d):(\d\d):(\d\d(\.\d+)?)(Z|([+-]\d\d:\d\d))?$/gu,"$1!$2!$3!$5");if(b===y)throw new e.ParseError(y,"time");const g=b.split("!"),m=g.slice(0,-1).map(Number),v={hours:m[0],minutes:m[1],seconds:m[2],...o(g[3])};if(v.seconds>=60||v.minutes>=60||v.hours>24||v.hours===24&&(v.minutes!==0||v.seconds!==0))throw new e.ParseError(y,"time");return v}function d(y){const b=c(y);return b.hours%=24,b}jr.parseTime=d;function h(y){const[b,g]=y.split("T"),m=b.replaceAll(/^(-)?P(\d+Y)?(\d+M)?(\d+D)?$/gu,"$11S!$2!$3!$4");if(m===b)throw new e.ParseError(y,"duration");const v=m.split("!");if(g!==void 0){const S=g.replaceAll(/^(\d+H)?(\d+M)?(\d+(\.\d+)?S)?$/gu,"$1!$2!$3");if(g===""||g===S)throw new e.ParseError(y,"duration");v.push(...S.split("!"))}const _=v.map(S=>S.slice(0,-1));if(!_.slice(1).some(Boolean))throw new e.ParseError(y,"duration");const w=Number(_[0]);return(0,t.simplifyDurationRepresentation)({year:_[1]?w*Number(_[1]):void 0,month:_[2]?w*Number(_[2]):void 0,day:_[3]?w*Number(_[3]):void 0,hours:_[4]?w*Number(_[4]):void 0,minutes:_[5]?w*Number(_[5]):void 0,seconds:_[6]?w*Number(_[6]):void 0})}jr.parseDuration=h;function f(y){const b=h(y);if(["hours","minutes","seconds","day"].some(g=>!!b[g]))throw new e.ParseError(y,"yearMonthDuration");return b}jr.parseYearMonthDuration=f;function p(y){const b=h(y);if(["year","month"].some(g=>!!b[g]))throw new e.ParseError(y,"dayTimeDuration");return b}return jr.parseDayTimeDuration=p,jr}var dS={},fr={},Zh={},gj;function mB(){if(gj)return Zh;gj=1,Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.OverloadTree=void 0;const t=Kn(),e=am();let u=class D3{constructor(n,r){this.identifier=n,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=r??0,this.promotionCount=void 0}getSubtree(n){const r=(0,e.asGeneralType)(n);if(r)return this.generalOverloads[r];for(const[a,o]of this.literalOverLoads)if(n===a)return o}getImplementationExact(n){let r=this;for(const a of n)if(r=r.getSubtree(a),!r)return;return r.implementation}search(n,r,a){let o=a[this.identifier],l=0;for(;l<n.length&&(o!=null&&o.cache);){const h=n[l],f=(0,t.isLiteralTermExpression)(h);o=o.cache[f?f.dataType:h.termType],l++}if(l===n.length&&(o!=null&&o.func))return o.func;const c=[],d=0;if(n.length===0)return this.implementation;for(c.push(...this.getSubTreeWithArg(n[d],r).map(h=>({node:h,index:d+1})));c.length>0;){const{index:h,node:f}=c.pop();if(h===n.length&&f.implementation)return this.addToCache(a,n,f.implementation),f.implementation;c.push(...f.getSubTreeWithArg(n[h],r).map(p=>({node:p,index:h+1})))}}addToCache(n,r,a){function o(c,d){return d in c||(c[d]={}),c[d]}let l=o(n,this.identifier);for(const c of r){const d=(0,t.isLiteralTermExpression)(c),h=d?d.dataType:c.termType;l.cache=l.cache??{},l=o(l.cache,h)}l.func=a}addOverload(n,r){this._addOverload([...n],r,0)}_addOverload(n,r,a){const[o,...l]=n;if(!o){(this.promotionCount===void 0||a<=this.promotionCount)&&(this.promotionCount=a,this.implementation=r);return}let c=this.getSubtree(o);if(!c){const d=new D3(this.identifier,this.depth+1),h=(0,e.asGeneralType)(o);h&&(this.generalOverloads[h]=d);const f=(0,e.asOverrideType)(o);f&&this.literalOverLoads.push([f,d]),c=d}if(c._addOverload(l,r,a),e.typePromotion[o])for(const d of e.typePromotion[o])this.addPromotedOverload(d.typeToPromote,r,d.conversionFunction,l,a)}addPromotedOverload(n,r,a,o,l){let c=this.getSubtree(n);if(!c){const d=new D3(this.identifier,this.depth+1);this.literalOverLoads.push([n,d]),c=d}c._addOverload(o,d=>h=>r(d)([...h.slice(0,this.depth),a(h[this.depth]),...h.slice(this.depth+1,h.length)]),l+1)}getSubTreeWithArg(n,r){const a=[],o=(0,t.isLiteralTermExpression)(n);if(this.generalOverloads.term&&a.push(this.generalOverloads.term),this.generalOverloads[n.termType]&&a.push(this.generalOverloads[n.termType]),o){const l=(0,e.asKnownLiteralType)(o.dataType);let c;l?c=e.superTypeDictTable[l]:c=(0,e.getSuperTypes)(o.dataType,r);const d=this.literalOverLoads.filter(([h,f])=>h in c).map(([h,f])=>[c[h],f]);d.sort(([h,f],[p,y])=>h-p),a.push(...d.map(([h,f])=>f))}return a}};return Zh.OverloadTree=u,Zh}var _j;function Yi(){if(_j)return fr;_j=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.expressionToVar=fr.dateTime=fr.langString=fr.string=fr.double=fr.float=fr.decimal=fr.integer=fr.bool=fr.Builder=fr.declare=void 0;const t=Et(),e=Kn(),u=Kn(),s=Nn(),n=Nn(),r=on(),a=mB(),o=new t.DataFactory;function l(_){return new c(_)}fr.declare=l;class c{constructor(w){this.overloadTree=new a.OverloadTree(w),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}static wrapInvalidLexicalProtected(w){return S=>A=>{for(const[D,L]of A.entries())if(L instanceof u.NonLexicalLiteral)throw new r.InvalidLexicalForm(A[D].toRDF());return w(S)(A)}}set(w,S,A=!0){return this.overloadTree.addOverload(w,A?c.wrapInvalidLexicalProtected(S):S),this}copy({from:w,to:S}){const A=this.overloadTree.getImplementationExact(w);if(!A)throw new r.UnexpectedError("Tried to copy implementation, but types not found",{from:w,to:S});return this.set(S,A)}onUnary(w,S,A=!0){return this.set([w],D=>([L])=>S(D)(L),A)}onUnaryTyped(w,S,A=!0){return this.set([w],D=>([L])=>S(D)(L.typedValue),A)}onBinary(w,S,A=!0){return this.set(w,D=>([L,O])=>S(D)(L,O),A)}onBinaryTyped(w,S,A=!0){return this.set(w,D=>([L,O])=>S(D)(L.typedValue,O.typedValue),A)}onTernaryTyped(w,S,A=!0){return this.set(w,D=>([L,O,E])=>S(D)(L.typedValue,O.typedValue,E.typedValue),A)}onTernary(w,S,A=!0){return this.set(w,D=>([L,O,E])=>S(D)(L,O,E),A)}onQuaternaryTyped(w,S,A=!0){return this.set(w,D=>([L,O,E,P])=>S(D)(L.typedValue,O.typedValue,E.typedValue,P.typedValue),A)}onTerm1(w,S=!1){return this.set(["term"],A=>([D])=>w(A)(D),S)}onTerm3(w){return this.set(["term","term","term"],S=>([A,D,L])=>w(S)(A,D,L))}onQuad1(w){return this.set(["quad"],S=>([A])=>w(S)(A))}onLiteral1(w,S=!0){return this.set(["literal"],A=>([D])=>w(A)(D),S)}onBoolean1(w,S=!0){return this.set([s.TypeURL.XSD_BOOLEAN],A=>([D])=>w(A)(D),S)}onBoolean1Typed(w,S=!0){return this.set([s.TypeURL.XSD_BOOLEAN],A=>([D])=>w(A)(D.typedValue),S)}onString1(w,S=!0){return this.set([s.TypeURL.XSD_STRING],A=>([D])=>w(A)(D),S)}onString1Typed(w,S=!0){return this.set([s.TypeURL.XSD_STRING],A=>([D])=>w(A)(D.typedValue),S)}onLangString1(w,S=!0){return this.set([s.TypeURL.RDF_LANG_STRING],A=>([D])=>w(A)(D),S)}onStringly1(w,S=!0){return this.set([s.TypeAlias.SPARQL_STRINGLY],A=>([D])=>w(A)(D),S)}onStringly1Typed(w,S=!0){return this.set([s.TypeAlias.SPARQL_STRINGLY],A=>([D])=>w(A)(D.typedValue),S)}onNumeric1(w,S=!0){return this.set([s.TypeAlias.SPARQL_NUMERIC],A=>([D])=>w(A)(D),S)}onDateTime1(w,S=!0){return this.set([s.TypeURL.XSD_DATE_TIME],A=>([D])=>w(A)(D),S)}numericConverter(w,S=!0){const A=D=>L=>w(D)(L.typedValue);return this.onUnary(n.TypeURL.XSD_INTEGER,D=>L=>h(A(D)(L)),S).onUnary(n.TypeURL.XSD_DECIMAL,D=>L=>f(A(D)(L)),S).onUnary(n.TypeURL.XSD_FLOAT,D=>L=>p(A(D)(L)),S).onUnary(n.TypeURL.XSD_DOUBLE,D=>L=>y(A(D)(L)),S)}arithmetic(w,S=!0){const A=D=>(L,O)=>w(D)(L.typedValue,O.typedValue);return this.onBinary([n.TypeURL.XSD_INTEGER,n.TypeURL.XSD_INTEGER],D=>(L,O)=>h(A(D)(L,O)),S).onBinary([n.TypeURL.XSD_DECIMAL,n.TypeURL.XSD_DECIMAL],D=>(L,O)=>f(A(D)(L,O)),S).onBinary([n.TypeURL.XSD_FLOAT,n.TypeURL.XSD_FLOAT],D=>(L,O)=>p(A(D)(L,O)),S).onBinary([n.TypeURL.XSD_DOUBLE,n.TypeURL.XSD_DOUBLE],D=>(L,O)=>y(A(D)(L,O)),S)}numberTest(w){return this.numeric(S=>([A,D])=>{const L=w(S)(A.typedValue,D.typedValue);return d(L)})}stringTest(w,S=!0){return this.set([s.TypeURL.XSD_STRING,s.TypeURL.XSD_STRING],A=>([D,L])=>{const O=w(A)(D.typedValue,L.typedValue);return d(O)},S)}booleanTest(w,S=!0){return this.set([s.TypeURL.XSD_BOOLEAN,s.TypeURL.XSD_BOOLEAN],A=>([D,L])=>{const O=w(A)(D.typedValue,L.typedValue);return d(O)},S)}dateTimeTest(w,S=!0){return this.set([s.TypeURL.XSD_DATE_TIME,s.TypeURL.XSD_DATE_TIME],A=>([D,L])=>{const O=w(A)(D.typedValue,L.typedValue);return d(O)},S)}numeric(w){return this.set([s.TypeAlias.SPARQL_NUMERIC,s.TypeAlias.SPARQL_NUMERIC],w)}}fr.Builder=c;function d(_){return new e.BooleanLiteral(_)}fr.bool=d;function h(_){return new e.IntegerLiteral(_)}fr.integer=h;function f(_){return new e.DecimalLiteral(_)}fr.decimal=f;function p(_){return new e.FloatLiteral(_)}fr.float=p;function y(_){return new e.DoubleLiteral(_)}fr.double=y;function b(_){return new e.StringLiteral(_)}fr.string=b;function g(_,w){return new e.LangStringLiteral(_,w)}fr.langString=g;function m(_,w){return new e.DateTimeLiteral(_,w)}fr.dateTime=m;function v(_){return o.variable(_.name.slice(1))}return fr.expressionToVar=v,fr}var vj;function am(){return vj||(vj=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.typePromotion=t.isSubTypeOf=t.getSuperTypeDict=t.isInternalSubType=t.asGeneralType=t.asOverrideType=t.asKnownLiteralType=t.asTypeAlias=t.typeAliasCheck=t.extensionTableInit=t.getSuperTypes=t.superTypeDictTable=t.extensionTableInput=void 0;const e=Kn(),u=Yi(),s=Nn();t.extensionTableInput={[s.TypeURL.XSD_DATE_TIME_STAMP]:s.TypeURL.XSD_DATE_TIME,[s.TypeURL.XSD_DAY_TIME_DURATION]:s.TypeURL.XSD_DURATION,[s.TypeURL.XSD_YEAR_MONTH_DURATION]:s.TypeURL.XSD_DURATION,[s.TypeURL.RDF_LANG_STRING]:s.TypeAlias.SPARQL_STRINGLY,[s.TypeURL.XSD_STRING]:s.TypeAlias.SPARQL_STRINGLY,[s.TypeURL.XSD_NORMALIZED_STRING]:s.TypeURL.XSD_STRING,[s.TypeURL.XSD_TOKEN]:s.TypeURL.XSD_NORMALIZED_STRING,[s.TypeURL.XSD_LANGUAGE]:s.TypeURL.XSD_TOKEN,[s.TypeURL.XSD_NM_TOKEN]:s.TypeURL.XSD_TOKEN,[s.TypeURL.XSD_NAME]:s.TypeURL.XSD_TOKEN,[s.TypeURL.XSD_NC_NAME]:s.TypeURL.XSD_NAME,[s.TypeURL.XSD_ENTITY]:s.TypeURL.XSD_NC_NAME,[s.TypeURL.XSD_ID]:s.TypeURL.XSD_NC_NAME,[s.TypeURL.XSD_ID_REF]:s.TypeURL.XSD_NC_NAME,[s.TypeURL.XSD_DOUBLE]:s.TypeAlias.SPARQL_NUMERIC,[s.TypeURL.XSD_FLOAT]:s.TypeAlias.SPARQL_NUMERIC,[s.TypeURL.XSD_DECIMAL]:s.TypeAlias.SPARQL_NUMERIC,[s.TypeURL.XSD_INTEGER]:s.TypeURL.XSD_DECIMAL,[s.TypeURL.XSD_NON_POSITIVE_INTEGER]:s.TypeURL.XSD_INTEGER,[s.TypeURL.XSD_NEGATIVE_INTEGER]:s.TypeURL.XSD_NON_POSITIVE_INTEGER,[s.TypeURL.XSD_LONG]:s.TypeURL.XSD_INTEGER,[s.TypeURL.XSD_INT]:s.TypeURL.XSD_LONG,[s.TypeURL.XSD_SHORT]:s.TypeURL.XSD_INT,[s.TypeURL.XSD_BYTE]:s.TypeURL.XSD_SHORT,[s.TypeURL.XSD_NON_NEGATIVE_INTEGER]:s.TypeURL.XSD_INTEGER,[s.TypeURL.XSD_POSITIVE_INTEGER]:s.TypeURL.XSD_NON_NEGATIVE_INTEGER,[s.TypeURL.XSD_UNSIGNED_LONG]:s.TypeURL.XSD_NON_NEGATIVE_INTEGER,[s.TypeURL.XSD_UNSIGNED_INT]:s.TypeURL.XSD_UNSIGNED_LONG,[s.TypeURL.XSD_UNSIGNED_SHORT]:s.TypeURL.XSD_UNSIGNED_INT,[s.TypeURL.XSD_UNSIGNED_BYTE]:s.TypeURL.XSD_UNSIGNED_SHORT,[s.TypeURL.XSD_DATE_TIME]:"term",[s.TypeURL.XSD_BOOLEAN]:"term",[s.TypeURL.XSD_DATE]:"term",[s.TypeURL.XSD_G_MONTH]:"term",[s.TypeURL.XSD_G_MONTHDAY]:"term",[s.TypeURL.XSD_G_YEAR]:"term",[s.TypeURL.XSD_G_YEAR_MONTH]:"term",[s.TypeURL.XSD_TIME]:"term",[s.TypeURL.XSD_G_DAY]:"term",[s.TypeURL.XSD_DURATION]:"term",[s.TypeAlias.SPARQL_NUMERIC]:"term",[s.TypeAlias.SPARQL_STRINGLY]:"term",[s.TypeURL.XSD_ANY_URI]:"term"},t.superTypeDictTable=Object.create(null);function n(b,g){const m=g.cache.get(b);if(m)return m;const v=g.discoverer(b);if(v==="term"){const S=Object.create(null);return S.__depth=0,S[b]=0,g.cache.set(b,S),S}let _;const w=c(v);return w?_={...t.superTypeDictTable[w]}:_={...n(v,g)},_.__depth++,_[b]=_.__depth,g.cache.set(b,_),_}t.getSuperTypes=n;function r(){for(const[b,g]of Object.entries(t.extensionTableInput)){const m=b;t.superTypeDictTable[m]||a(m,g,t.superTypeDictTable)}}t.extensionTableInit=r,r();function a(b,g,m){if(g==="term"||g===void 0){const v=Object.create(null);v.__depth=0,v[b]=0,m[b]=v;return}m[g]||a(g,t.extensionTableInput[g],m),m[b]={...m[g],[b]:m[g].__depth+1,__depth:m[g].__depth+1}}t.typeAliasCheck=Object.create(null);function o(){for(const b of Object.values(s.TypeAlias))t.typeAliasCheck[b]=!0}o();function l(b){if(b in t.typeAliasCheck)return b}t.asTypeAlias=l;function c(b){if(b in t.superTypeDictTable)return b}t.asKnownLiteralType=c;function d(b){if(c(b)??b==="term")return b}t.asOverrideType=d;function h(b){if(b==="term"||(0,e.asTermType)(b))return b}t.asGeneralType=h;function f(b,g){return b!=="term"&&t.superTypeDictTable[b]&&t.superTypeDictTable[b][g]!==void 0}t.isInternalSubType=f;function p(b,g){const m=c(b);return m?t.superTypeDictTable[m]:n(b,g)}t.getSuperTypeDict=p;function y(b,g,m){return b==="term"?!1:p(b,m)[g]!==void 0}t.isSubTypeOf=y,t.typePromotion={[s.TypeURL.XSD_STRING]:[{typeToPromote:s.TypeURL.XSD_ANY_URI,conversionFunction:b=>(0,u.string)(b.str())}],[s.TypeURL.XSD_DOUBLE]:[{typeToPromote:s.TypeURL.XSD_FLOAT,conversionFunction:b=>(0,u.double)(b.typedValue)},{typeToPromote:s.TypeURL.XSD_DECIMAL,conversionFunction:b=>(0,u.double)(b.typedValue)}],[s.TypeURL.XSD_FLOAT]:[{typeToPromote:s.TypeURL.XSD_DECIMAL,conversionFunction:b=>(0,u.float)(b.typedValue)}]}}(dS)),dS}var wj;function no(){if(wj)return Yh;wj=1,Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.TermTransformer=void 0;const t=Xt(),e=Ot(),u=Kn(),s=Nn(),n=on(),r=on(),a=P3(),o=P3(),l=am();let c=class{constructor(h){this.superTypeProvider=h}transformRDFTermUnsafe(h){return this.transformTerm({term:h,type:e.Algebra.types.EXPRESSION,expressionType:e.Algebra.expressionTypes.TERM})}transformTerm(h){if(!h.term)throw new n.InvalidExpression(h);switch(h.term.termType){case"Variable":return new u.Variable(t.termToString(h.term));case"Literal":return this.transformLiteral(h.term);case"NamedNode":return new u.NamedNode(h.term.value);case"BlankNode":return new u.BlankNode(h.term.value);case"Quad":return new u.Quad(h.term,this.superTypeProvider);default:throw new n.InvalidTermType(h)}}transformLiteral(h){if(!h.datatype||[null,void 0,""].includes(h.datatype.value))return h.language?new u.LangStringLiteral(h.value,h.language):new u.StringLiteral(h.value);const f=h.datatype.value,p=(0,l.getSuperTypeDict)(f,this.superTypeProvider);try{if(s.TypeURL.XSD_STRING in p)return new u.StringLiteral(h.value,f);if(s.TypeURL.RDF_LANG_STRING in p)return new u.LangStringLiteral(h.value,h.language);if(s.TypeURL.XSD_YEAR_MONTH_DURATION in p)return new u.YearMonthDurationLiteral((0,a.parseYearMonthDuration)(h.value),h.value,f);if(s.TypeURL.XSD_DAY_TIME_DURATION in p)return new u.DayTimeDurationLiteral((0,a.parseDayTimeDuration)(h.value),h.value,f);if(s.TypeURL.XSD_DURATION in p)return new u.DurationLiteral((0,a.parseDuration)(h.value),h.value,f);if(s.TypeURL.XSD_DATE_TIME in p){const g=new Date(h.value);return Number.isNaN(g.getTime())?new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,h.value):new u.DateTimeLiteral((0,a.parseDateTime)(h.value),h.value,f)}if(s.TypeURL.XSD_DATE in p)return new u.DateLiteral((0,a.parseDate)(h.value),h.value,f);if(s.TypeURL.XSD_TIME in p)return new u.TimeLiteral((0,a.parseTime)(h.value),h.value,f);if(s.TypeURL.XSD_BOOLEAN in p)return h.value!=="true"&&h.value!=="false"&&h.value!=="1"&&h.value!=="0"?new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,h.value):new u.BooleanLiteral(h.value==="true"||h.value==="1",h.value);if(s.TypeURL.XSD_DECIMAL in p){const g=o.parseXSDDecimal(h.value);return g===void 0?new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,h.value):s.TypeURL.XSD_INTEGER in p?new u.IntegerLiteral(g,f,h.value):new u.DecimalLiteral(g,f,h.value)}const y=s.TypeURL.XSD_FLOAT in p,b=s.TypeURL.XSD_DOUBLE in p;if(y||b){const g=o.parseXSDFloat(h.value);return g===void 0?new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,h.value):y?new u.FloatLiteral(g,f,h.value):new u.DoubleLiteral(g,f,h.value)}return new u.Literal(h.value,f,h.value)}catch(y){if(y instanceof Error&&(0,r.isExpressionError)(y))return new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,h.value);throw y}}};return Yh.TermTransformer=c,Yh}var bi={},Sj;function Oee(){if(Sj)return bi;Sj=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.serializeDuration=bi.serializeTime=bi.serializeDate=bi.serializeDateTime=void 0;function t(a,o=2){return a.toLocaleString(void 0,{minimumIntegerDigits:o,useGrouping:!1})}function e(a){return`${s({year:a.year,month:a.month,day:a.day})}T${n(a)}`}bi.serializeDateTime=e;function u(a){return a.zoneHours===void 0||a.zoneMinutes===void 0?"":a.zoneHours===0&&a.zoneMinutes===0?"Z":`${a.zoneHours>=0?`+${t(a.zoneHours)}`:t(a.zoneHours)}:${t(Math.abs(a.zoneMinutes))}`}function s(a){return`${t(a.year,4)}-${t(a.month)}-${t(a.day)}${u(a)}`}bi.serializeDate=s;function n(a){return`${t(a.hours)}:${t(a.minutes)}:${t(a.seconds)}${u(a)}`}bi.serializeTime=n;function r(a,o="PT0S"){if(!Object.values(a).some(g=>(g||0)!==0))return o;const l=Object.values(a).some(g=>(g||0)<0)?"-":"",c=a.year?`${Math.abs(a.year)}Y`:"",d=a.month?`${Math.abs(a.month)}M`:"",h=a.day?`${Math.abs(a.day)}D`:"",f=`${l}P${c}${d}${h}`;if(!(a.hours||a.minutes||a.seconds))return f;const p=a.hours?`${Math.abs(a.hours)}H`:"",y=a.minutes?`${Math.abs(a.minutes)}M`:"",b=a.seconds?`${Math.abs(a.seconds)}S`:"";return`${f}T${p}${y}${b}`}return bi.serializeDuration=r,bi}var Tj;function Ree(){if(Tj)return At;Tj=1,Object.defineProperty(At,"__esModule",{value:!0}),At.isNonLexicalLiteral=At.NonLexicalLiteral=At.YearMonthDurationLiteral=At.DayTimeDurationLiteral=At.DurationLiteral=At.DateLiteral=At.TimeLiteral=At.DateTimeLiteral=At.StringLiteral=At.LangStringLiteral=At.BooleanLiteral=At.DoubleLiteral=At.FloatLiteral=At.DecimalLiteral=At.IntegerLiteral=At.NumericLiteral=At.Literal=At.isLiteralTermExpression=At.Quad=At.BlankNode=At.NamedNode=At.Term=void 0;const t=Et(),e=no(),u=Nn(),s=Nn(),n=on(),r=Oee(),a=am(),o=Ki(),l=new t.DataFactory;let c=class{constructor(){this.expressionType=o.ExpressionType.Term}str(){throw new n.InvalidArgumentTypes([this],u.RegularOperator.STR)}coerceEBV(){throw new n.EBVCoercionError(this)}};At.Term=c;class d extends c{constructor($){super(),this.value=$,this.termType="namedNode"}toRDF(){return l.namedNode(this.value)}str(){return this.value}}At.NamedNode=d;class h extends c{constructor($){super(),this.termType="blankNode",this.value=typeof $=="string"?l.blankNode($):$}toRDF(){return this.value}}At.BlankNode=h;class f extends c{constructor($,Z){super(),this.termType="quad",this.transformer=new e.TermTransformer(Z),this.valueTerm=$}toRDF(){return this.valueTerm}get subject(){return this.transformer.transformRDFTermUnsafe(this.RDFsubject)}get predicate(){return this.transformer.transformRDFTermUnsafe(this.RDFpredicate)}get object(){return this.transformer.transformRDFTermUnsafe(this.RDFobject)}get RDFsubject(){return this.toRDF().subject}get RDFpredicate(){return this.toRDF().predicate}get RDFobject(){return this.toRDF().object}}At.Quad=f;function p(q){if(q.termType==="literal")return q}At.isLiteralTermExpression=p;class y extends c{constructor($,Z,X,le){super(),this.typedValue=$,this.dataType=Z,this.strValue=X,this.language=le,this.termType="literal"}toRDF(){return l.literal(this.strValue??this.str(),this.language??l.namedNode(this.dataType))}str(){return this.strValue??this.typedValue.toString()}}At.Literal=y;class b extends y{constructor($,Z,X,le){super($,Z,X,le),this.typedValue=$,this.strValue=X,this.language=le}coerceEBV(){return!!this.typedValue}toRDF(){const $=super.toRDF();return Number.isFinite(this.typedValue)||($.value=$.value.replace("Infinity","INF")),$}str(){return this.strValue??this.specificFormatter(this.typedValue)}}At.NumericLiteral=b;class g extends b{constructor($,Z,X,le){super($,Z??s.TypeURL.XSD_INTEGER,X,le),this.typedValue=$,this.strValue=X,this.language=le}specificFormatter($){return $.toFixed(0)}}At.IntegerLiteral=g;class m extends b{constructor($,Z,X,le){super($,Z??s.TypeURL.XSD_DECIMAL,X,le),this.typedValue=$,this.strValue=X,this.language=le}specificFormatter($){return $.toString()}}At.DecimalLiteral=m;class v extends b{constructor($,Z,X,le){super($,Z??s.TypeURL.XSD_FLOAT,X,le),this.typedValue=$,this.strValue=X,this.language=le}specificFormatter($){return $.toString()}}At.FloatLiteral=v;class _ extends b{constructor($,Z,X,le){super($,Z??s.TypeURL.XSD_DOUBLE,X,le),this.typedValue=$,this.strValue=X,this.language=le}specificFormatter($){if(!Number.isFinite($))return $>0?"INF":$<0?"-INF":"NaN";const Z=$.toExponential(),[X,le]=Z.split("e"),K=le.replace(/\+/u,"");return`${X.includes(".")?X:`${X}.0`}E${K}`}}At.DoubleLiteral=_;class w extends y{constructor($,Z,X){super($,X??s.TypeURL.XSD_BOOLEAN,Z),this.typedValue=$,this.strValue=Z}coerceEBV(){return this.typedValue}}At.BooleanLiteral=w;class S extends y{constructor($,Z,X){super($,X??s.TypeURL.RDF_LANG_STRING,$,Z),this.typedValue=$,this.language=Z}coerceEBV(){return this.str().length>0}}At.LangStringLiteral=S;class A extends y{constructor($,Z){super($,Z??s.TypeURL.XSD_STRING,$),this.typedValue=$}coerceEBV(){return this.str().length>0}}At.StringLiteral=A;class D extends y{constructor($,Z,X){super($,X??s.TypeURL.XSD_DATE_TIME,Z),this.typedValue=$,this.strValue=Z}str(){return(0,r.serializeDateTime)(this.typedValue)}}At.DateTimeLiteral=D;class L extends y{constructor($,Z,X){super($,X??s.TypeURL.XSD_TIME,Z),this.typedValue=$,this.strValue=Z}str(){return(0,r.serializeTime)(this.typedValue)}}At.TimeLiteral=L;class O extends y{constructor($,Z,X){super($,X??s.TypeURL.XSD_DATE,Z),this.typedValue=$,this.strValue=Z}str(){return(0,r.serializeDate)(this.typedValue)}}At.DateLiteral=O;class E extends y{constructor($,Z,X){super($,X??s.TypeURL.XSD_DURATION,Z),this.typedValue=$,this.strValue=Z}str(){return(0,r.serializeDuration)(this.typedValue)}}At.DurationLiteral=E;class P extends E{constructor($,Z,X){super($,Z,X??s.TypeURL.XSD_DAY_TIME_DURATION),this.typedValue=$,this.strValue=Z}}At.DayTimeDurationLiteral=P;class M extends y{constructor($,Z,X){super($,X??s.TypeURL.XSD_YEAR_MONTH_DURATION,Z),this.typedValue=$,this.strValue=Z}str(){return(0,r.serializeDuration)(this.typedValue,"P0M")}}At.YearMonthDurationLiteral=M;class U extends y{constructor($,Z,X,le,K){super({toString:()=>"undefined"},Z,le,K),this.openWorldType=X}coerceEBV(){if((0,a.isSubTypeOf)(this.dataType,s.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,a.isSubTypeOf)(this.dataType,s.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new n.EBVCoercionError(this)}toRDF(){return l.literal(this.str(),this.language??l.namedNode(this.dataType))}str(){return this.strValue??""}}At.NonLexicalLiteral=U;function j(q){if(q instanceof U)return q}return At.isNonLexicalLiteral=j,At}var ep={},Aj;function xee(){if(Aj)return ep;Aj=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.Operator=void 0;const t=Ki();let e=class{constructor(s,n){this.args=s,this.apply=n,this.expressionType=t.ExpressionType.Operator}};return ep.Operator=e,ep}var tp={},Ej;function Iee(){if(Ej)return tp;Ej=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.SpecialOperator=void 0;const t=Ki();let e=class{constructor(s,n,r){this.args=s,this.applyAsync=n,this.applySynchronously=r,this.expressionType=t.ExpressionType.SpecialOperator}};return tp.SpecialOperator=e,tp}var rp={},Oj;function Pee(){if(Oj)return rp;Oj=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.Named=void 0;const t=Ki();let e=class{constructor(s,n,r){this.name=s,this.args=n,this.apply=r,this.expressionType=t.ExpressionType.Named}};return rp.Named=e,rp}var np={},Rj;function Dee(){if(Rj)return np;Rj=1,Object.defineProperty(np,"__esModule",{value:!0}),np.Aggregate=void 0;const t=Ki();let e=class{constructor(s,n){this.name=s,this.expression=n,this.expressionType=t.ExpressionType.Aggregate}};return np.Aggregate=e,np}var ip={},xj;function Nee(){if(xj)return ip;xj=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.Existence=void 0;const t=Ki();let e=class{constructor(s){this.expression=s,this.expressionType=t.ExpressionType.Existence}};return ip.Existence=e,ip}var ap={},Ij;function Cee(){if(Ij)return ap;Ij=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.AsyncExtension=void 0;const t=Ki();let e=class{constructor(s,n,r){this.name=s,this.args=n,this.apply=r,this.expressionType=t.ExpressionType.AsyncExtension}};return ap.AsyncExtension=e,ap}var sp={},Pj;function jee(){if(Pj)return sp;Pj=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.SyncExtension=void 0;const t=Ki();let e=class{constructor(s,n,r){this.name=s,this.args=n,this.apply=r,this.expressionType=t.ExpressionType.SyncExtension}};return sp.SyncExtension=e,sp}var Dj;function Kn(){return Dj||(Dj=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Ki(),t),u(Eee(),t),u(Ree(),t),u(xee(),t),u(Iee(),t),u(Pee(),t),u(Dee(),t),u(Nee(),t),u(Cee(),t),u(jee(),t)}(cS)),cS}var fS={},mi={},Nj;function N3(){if(Nj)return mi;Nj=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.SpecialFunction=mi.NamedFunction=mi.RegularFunction=mi.BaseFunction=void 0;const t=on();class e{constructor(o,l){this.operator=o,this.apply=(c,d)=>(this.monomorph(c,d.superTypeProvider,d.functionArgumentsCache)??this.handleInvalidTypes(c))(d)(c),this.arity=l.arity,this.overloads=l.overloads}monomorph(o,l,c){return this.overloads.search(o,l,c)}}mi.BaseFunction=e;class u extends e{constructor(o,l){super(o,l),this.functionClass="regular"}handleInvalidTypes(o){throw new t.InvalidArgumentTypes(o,this.operator)}}mi.RegularFunction=u;class s extends e{constructor(o,l){super(o,l),this.functionClass="named"}handleInvalidTypes(o){throw new t.InvalidArgumentTypes(o,this.operator)}}mi.NamedFunction=s;class n{constructor(o,l){this.operator=o,this.functionClass="special",this.arity=l.arity,this.applySynchronously=l.applySynchronously,this.applyAsync=l.applyAsync,this.checkArity=l.checkArity??r(this.arity)}}mi.SpecialFunction=n;function r(a){return o=>a===Number.POSITIVE_INFINITY?!0:o.length===a}return mi}var op={},Cj;function Lee(){if(Cj)return op;Cj=1,Object.defineProperty(op,"__esModule",{value:!0}),op.namedDefinitions=void 0;const t=Kn(),e=Kn(),u=Nn(),s=uu(),n=on(),r=P3(),a=Yi(),o={arity:1,overloads:(0,a.declare)(u.TypeURL.XSD_STRING).onNumeric1(()=>_=>(0,a.string)((0,a.float)(_.typedValue).str())).onBoolean1Typed(()=>_=>(0,a.string)((0,a.bool)(_).str())).onTerm1(()=>_=>(0,a.string)(_.str())).collect()},l={arity:1,overloads:(0,a.declare)(u.TypeURL.XSD_FLOAT).onNumeric1(()=>_=>(0,a.float)(_.typedValue)).onBoolean1Typed(()=>_=>(0,a.float)(_?1:0)).onUnary(u.TypeURL.XSD_STRING,()=>_=>{const w=(0,r.parseXSDFloat)(_.str());if(w===void 0)throw new n.CastError(_,u.TypeURL.XSD_FLOAT);return(0,a.float)(w)},!1).collect()},c={arity:1,overloads:(0,a.declare)(u.TypeURL.XSD_DOUBLE).onNumeric1(()=>_=>(0,a.double)(_.typedValue)).onBoolean1Typed(()=>_=>(0,a.double)(_?1:0)).onUnary(u.TypeURL.XSD_STRING,()=>_=>{const w=(0,r.parseXSDFloat)(_.str());if(w===void 0)throw new n.CastError(_,u.TypeURL.XSD_DOUBLE);return(0,a.double)(w)},!1).collect()},d={arity:1,overloads:(0,a.declare)(u.TypeURL.XSD_DECIMAL).onNumeric1(()=>_=>{const w=(0,r.parseXSDDecimal)(_.str());if(w===void 0)throw new n.CastError(_,u.TypeURL.XSD_DECIMAL);return(0,a.decimal)(w)}).onString1(()=>_=>{const w=_.str(),S=/^([+-])?(\d+(\.\d+)?)$/u.test(w)?(0,r.parseXSDDecimal)(w):void 0;if(S===void 0)throw new n.CastError(_,u.TypeURL.XSD_DECIMAL);return(0,a.decimal)(S)},!1).onBoolean1Typed(()=>_=>(0,a.decimal)(_?1:0)).collect()},h={arity:1,overloads:(0,a.declare)(u.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>_=>(0,a.integer)(_?1:0)).onNumeric1(()=>_=>{const w=(0,r.parseXSDInteger)(_.str());if(w===void 0)throw new n.CastError(_,u.TypeURL.XSD_INTEGER);return(0,a.integer)(w)},!1).onString1(()=>_=>{const w=_.str(),S=/^\d+$/u.test(w)?(0,r.parseXSDInteger)(w):void 0;if(S===void 0)throw new n.CastError(_,u.TypeURL.XSD_INTEGER);return(0,a.integer)(S)}).collect()},f={arity:1,overloads:(0,a.declare)(u.TypeURL.XSD_DATE_TIME).onUnary(u.TypeURL.XSD_DATE_TIME,()=>_=>_).onUnary(u.TypeURL.XSD_STRING,()=>_=>(0,a.dateTime)((0,r.parseDateTime)(_.str()),_.str()),!1).onUnary(u.TypeURL.XSD_DATE,()=>_=>new t.DateTimeLiteral({..._.typedValue,hours:0,minutes:0,seconds:0})).collect()},p={arity:1,overloads:(0,a.declare)(u.TypeURL.XSD_BOOLEAN).onNumeric1(()=>_=>(0,a.bool)(_.coerceEBV()),!0).onUnary(u.TypeURL.XSD_BOOLEAN,()=>_=>(0,a.bool)(_.coerceEBV()),!0).onUnary(u.TypeURL.XSD_STRING,()=>_=>{switch(_.str()){case"true":return(0,a.bool)(!0);case"false":return(0,a.bool)(!1);case"1":return(0,a.bool)(!0);case"0":return(0,a.bool)(!1);default:throw new n.CastError(_,u.TypeURL.XSD_BOOLEAN)}},!1).collect()},y={arity:1,overloads:(0,a.declare)(u.TypeURL.XSD_TIME).onUnary(u.TypeURL.XSD_TIME,()=>_=>new t.TimeLiteral(_.typedValue,_.strValue)).onUnary(u.TypeURL.XSD_DATE_TIME,()=>_=>new t.TimeLiteral(_.typedValue)).onStringly1(()=>_=>new t.TimeLiteral((0,r.parseTime)(_.str()))).collect()},b={arity:1,overloads:(0,a.declare)(u.TypeURL.XSD_DATE).onUnary(u.TypeURL.XSD_DATE,()=>_=>new t.DateLiteral(_.typedValue,_.strValue)).onUnary(u.TypeURL.XSD_DATE_TIME,()=>_=>new t.DateLiteral(_.typedValue)).onStringly1(()=>_=>new t.DateLiteral((0,r.parseDate)(_.str()))).collect()},g={arity:1,overloads:(0,a.declare)(u.TypeURL.XSD_DURATION).onUnary(u.TypeURL.XSD_DURATION,()=>_=>new t.DurationLiteral(_.typedValue,_.strValue)).onStringly1(()=>_=>new e.DurationLiteral((0,r.parseDuration)(_.str()))).collect()},m={arity:1,overloads:(0,a.declare)(u.TypeURL.XSD_DAY_TIME_DURATION).onUnary(u.TypeURL.XSD_DURATION,()=>_=>new t.DayTimeDurationLiteral((0,s.trimToDayTimeDuration)(_.typedValue))).onStringly1(()=>_=>new t.DayTimeDurationLiteral((0,r.parseDayTimeDuration)(_.str()))).collect()},v={arity:1,overloads:(0,a.declare)(u.TypeURL.XSD_YEAR_MONTH_DURATION).onUnary(u.TypeURL.XSD_DURATION,()=>_=>new t.YearMonthDurationLiteral((0,s.trimToYearMonthDuration)(_.typedValue))).onStringly1(()=>_=>new t.YearMonthDurationLiteral((0,r.parseYearMonthDuration)(_.str()))).collect()};return op.namedDefinitions={[u.TypeURL.XSD_STRING]:o,[u.TypeURL.XSD_FLOAT]:l,[u.TypeURL.XSD_DOUBLE]:c,[u.TypeURL.XSD_DECIMAL]:d,[u.TypeURL.XSD_INTEGER]:h,[u.TypeURL.XSD_DATE_TIME]:f,[u.TypeURL.XSD_DATE]:b,[u.TypeURL.XSD_BOOLEAN]:p,[u.TypeURL.XSD_TIME]:y,[u.TypeURL.XSD_DURATION]:g,[u.TypeURL.XSD_DAY_TIME_DURATION]:m,[u.TypeURL.XSD_YEAR_MONTH_DURATION]:v},op}var up={},hS={exports:{}},jj;function Mee(){return jj||(jj=1,function(t){(function(e){var u,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,r=Math.floor,a="[BigNumber Error] ",o=a+"Number primitive has more than 15 significant digits: ",l=1e14,c=14,d=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,p=1e9;function y(A){var D,L,O,E=ae.prototype={constructor:ae,toString:null,valueOf:null},P=new ae(1),M=20,U=4,j=-7,q=21,$=-1e7,Z=1e7,X=!1,le=1,K=0,he={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Re="0123456789abcdefghijklmnopqrstuvwxyz",ie=!0;function ae(H,N){var R,T,x,B,k,V,J,z,Y=this;if(!(Y instanceof ae))return new ae(H,N);if(N==null){if(H&&H._isBigNumber===!0){Y.s=H.s,!H.c||H.e>Z?Y.c=Y.e=null:H.e<$?Y.c=[Y.e=0]:(Y.e=H.e,Y.c=H.c.slice());return}if((V=typeof H=="number")&&H*0==0){if(Y.s=1/H<0?(H=-H,-1):1,H===~~H){for(B=0,k=H;k>=10;k/=10,B++);B>Z?Y.c=Y.e=null:(Y.e=B,Y.c=[H]);return}z=String(H)}else{if(!s.test(z=String(H)))return O(Y,z,V);Y.s=z.charCodeAt(0)==45?(z=z.slice(1),-1):1}(B=z.indexOf("."))>-1&&(z=z.replace(".","")),(k=z.search(/e/i))>0?(B<0&&(B=k),B+=+z.slice(k+1),z=z.substring(0,k)):B<0&&(B=z.length)}else{if(v(N,2,Re.length,"Base"),N==10&&ie)return Y=new ae(H),de(Y,M+Y.e+1,U);if(z=String(H),V=typeof H=="number"){if(H*0!=0)return O(Y,z,V,N);if(Y.s=1/H<0?(z=z.slice(1),-1):1,ae.DEBUG&&z.replace(/^0\.0*|\./,"").length>15)throw Error(o+H)}else Y.s=z.charCodeAt(0)===45?(z=z.slice(1),-1):1;for(R=Re.slice(0,N),B=k=0,J=z.length;k<J;k++)if(R.indexOf(T=z.charAt(k))<0){if(T=="."){if(k>B){B=J;continue}}else if(!x&&(z==z.toUpperCase()&&(z=z.toLowerCase())||z==z.toLowerCase()&&(z=z.toUpperCase()))){x=!0,k=-1,B=0;continue}return O(Y,String(H),V,N)}V=!1,z=L(z,N,10,Y.s),(B=z.indexOf("."))>-1?z=z.replace(".",""):B=z.length}for(k=0;z.charCodeAt(k)===48;k++);for(J=z.length;z.charCodeAt(--J)===48;);if(z=z.slice(k,++J)){if(J-=k,V&&ae.DEBUG&&J>15&&(H>d||H!==r(H)))throw Error(o+Y.s*H);if((B=B-k-1)>Z)Y.c=Y.e=null;else if(B<$)Y.c=[Y.e=0];else{if(Y.e=B,Y.c=[],k=(B+1)%c,B<0&&(k+=c),k<J){for(k&&Y.c.push(+z.slice(0,k)),J-=c;k<J;)Y.c.push(+z.slice(k,k+=c));k=c-(z=z.slice(k)).length}else k-=J;for(;k--;z+="0");Y.c.push(+z)}}else Y.c=[Y.e=0]}ae.clone=y,ae.ROUND_UP=0,ae.ROUND_DOWN=1,ae.ROUND_CEIL=2,ae.ROUND_FLOOR=3,ae.ROUND_HALF_UP=4,ae.ROUND_HALF_DOWN=5,ae.ROUND_HALF_EVEN=6,ae.ROUND_HALF_CEIL=7,ae.ROUND_HALF_FLOOR=8,ae.EUCLID=9,ae.config=ae.set=function(H){var N,R;if(H!=null)if(typeof H=="object"){if(H.hasOwnProperty(N="DECIMAL_PLACES")&&(R=H[N],v(R,0,p,N),M=R),H.hasOwnProperty(N="ROUNDING_MODE")&&(R=H[N],v(R,0,8,N),U=R),H.hasOwnProperty(N="EXPONENTIAL_AT")&&(R=H[N],R&&R.pop?(v(R[0],-p,0,N),v(R[1],0,p,N),j=R[0],q=R[1]):(v(R,-p,p,N),j=-(q=R<0?-R:R))),H.hasOwnProperty(N="RANGE"))if(R=H[N],R&&R.pop)v(R[0],-p,-1,N),v(R[1],1,p,N),$=R[0],Z=R[1];else if(v(R,-p,p,N),R)$=-(Z=R<0?-R:R);else throw Error(a+N+" cannot be zero: "+R);if(H.hasOwnProperty(N="CRYPTO"))if(R=H[N],R===!!R)if(R)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))X=R;else throw X=!R,Error(a+"crypto unavailable");else X=R;else throw Error(a+N+" not true or false: "+R);if(H.hasOwnProperty(N="MODULO_MODE")&&(R=H[N],v(R,0,9,N),le=R),H.hasOwnProperty(N="POW_PRECISION")&&(R=H[N],v(R,0,p,N),K=R),H.hasOwnProperty(N="FORMAT"))if(R=H[N],typeof R=="object")he=R;else throw Error(a+N+" not an object: "+R);if(H.hasOwnProperty(N="ALPHABET"))if(R=H[N],typeof R=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(R))ie=R.slice(0,10)=="0123456789",Re=R;else throw Error(a+N+" invalid: "+R)}else throw Error(a+"Object expected: "+H);return{DECIMAL_PLACES:M,ROUNDING_MODE:U,EXPONENTIAL_AT:[j,q],RANGE:[$,Z],CRYPTO:X,MODULO_MODE:le,POW_PRECISION:K,FORMAT:he,ALPHABET:Re}},ae.isBigNumber=function(H){if(!H||H._isBigNumber!==!0)return!1;if(!ae.DEBUG)return!0;var N,R,T=H.c,x=H.e,B=H.s;e:if({}.toString.call(T)=="[object Array]"){if((B===1||B===-1)&&x>=-p&&x<=p&&x===r(x)){if(T[0]===0){if(x===0&&T.length===1)return!0;break e}if(N=(x+1)%c,N<1&&(N+=c),String(T[0]).length==N){for(N=0;N<T.length;N++)if(R=T[N],R<0||R>=l||R!==r(R))break e;if(R!==0)return!0}}}else if(T===null&&x===null&&(B===null||B===1||B===-1))return!0;throw Error(a+"Invalid BigNumber: "+H)},ae.maximum=ae.max=function(){return De(arguments,-1)},ae.minimum=ae.min=function(){return De(arguments,1)},ae.random=function(){var H=9007199254740992,N=Math.random()*H&2097151?function(){return r(Math.random()*H)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(R){var T,x,B,k,V,J=0,z=[],Y=new ae(P);if(R==null?R=M:v(R,0,p),k=n(R/c),X)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(k*=2));J<k;)V=T[J]*131072+(T[J+1]>>>11),V>=9e15?(x=crypto.getRandomValues(new Uint32Array(2)),T[J]=x[0],T[J+1]=x[1]):(z.push(V%1e14),J+=2);J=k/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(k*=7);J<k;)V=(T[J]&31)*281474976710656+T[J+1]*1099511627776+T[J+2]*4294967296+T[J+3]*16777216+(T[J+4]<<16)+(T[J+5]<<8)+T[J+6],V>=9e15?crypto.randomBytes(7).copy(T,J):(z.push(V%1e14),J+=7);J=k/7}else throw X=!1,Error(a+"crypto unavailable");if(!X)for(;J<k;)V=N(),V<9e15&&(z[J++]=V%1e14);for(k=z[--J],R%=c,k&&R&&(V=h[c-R],z[J]=r(k/V)*V);z[J]===0;z.pop(),J--);if(J<0)z=[B=0];else{for(B=-1;z[0]===0;z.splice(0,1),B-=c);for(J=1,V=z[0];V>=10;V/=10,J++);J<c&&(B-=c-J)}return Y.e=B,Y.c=z,Y}}(),ae.sum=function(){for(var H=1,N=arguments,R=new ae(N[0]);H<N.length;)R=R.plus(N[H++]);return R},L=function(){var H="0123456789";function N(R,T,x,B){for(var k,V=[0],J,z=0,Y=R.length;z<Y;){for(J=V.length;J--;V[J]*=T);for(V[0]+=B.indexOf(R.charAt(z++)),k=0;k<V.length;k++)V[k]>x-1&&(V[k+1]==null&&(V[k+1]=0),V[k+1]+=V[k]/x|0,V[k]%=x)}return V.reverse()}return function(R,T,x,B,k){var V,J,z,Y,re,ce,Te,xe,Le=R.indexOf("."),qe=M,G=U;for(Le>=0&&(Y=K,K=0,R=R.replace(".",""),xe=new ae(T),ce=xe.pow(R.length-Le),K=Y,xe.c=N(S(g(ce.c),ce.e,"0"),10,x,H),xe.e=xe.c.length),Te=N(R,T,x,k?(V=Re,H):(V=H,Re)),z=Y=Te.length;Te[--Y]==0;Te.pop());if(!Te[0])return V.charAt(0);if(Le<0?--z:(ce.c=Te,ce.e=z,ce.s=B,ce=D(ce,xe,qe,G,x),Te=ce.c,re=ce.r,z=ce.e),J=z+qe+1,Le=Te[J],Y=x/2,re=re||J<0||Te[J+1]!=null,re=G<4?(Le!=null||re)&&(G==0||G==(ce.s<0?3:2)):Le>Y||Le==Y&&(G==4||re||G==6&&Te[J-1]&1||G==(ce.s<0?8:7)),J<1||!Te[0])R=re?S(V.charAt(1),-qe,V.charAt(0)):V.charAt(0);else{if(Te.length=J,re)for(--x;++Te[--J]>x;)Te[J]=0,J||(++z,Te=[1].concat(Te));for(Y=Te.length;!Te[--Y];);for(Le=0,R="";Le<=Y;R+=V.charAt(Te[Le++]));R=S(R,z,V.charAt(0))}return R}}(),D=function(){function H(T,x,B){var k,V,J,z,Y=0,re=T.length,ce=x%f,Te=x/f|0;for(T=T.slice();re--;)J=T[re]%f,z=T[re]/f|0,k=Te*J+z*ce,V=ce*J+k%f*f+Y,Y=(V/B|0)+(k/f|0)+Te*z,T[re]=V%B;return Y&&(T=[Y].concat(T)),T}function N(T,x,B,k){var V,J;if(B!=k)J=B>k?1:-1;else for(V=J=0;V<B;V++)if(T[V]!=x[V]){J=T[V]>x[V]?1:-1;break}return J}function R(T,x,B,k){for(var V=0;B--;)T[B]-=V,V=T[B]<x[B]?1:0,T[B]=V*k+T[B]-x[B];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,x,B,k,V){var J,z,Y,re,ce,Te,xe,Le,qe,G,F,Q,te,me,Oe,Ne,We,Ve=T.s==x.s?1:-1,pe=T.c,we=x.c;if(!pe||!pe[0]||!we||!we[0])return new ae(!T.s||!x.s||(pe?we&&pe[0]==we[0]:!we)?NaN:pe&&pe[0]==0||!we?Ve*0:Ve/0);for(Le=new ae(Ve),qe=Le.c=[],z=T.e-x.e,Ve=B+z+1,V||(V=l,z=b(T.e/c)-b(x.e/c),Ve=Ve/c|0),Y=0;we[Y]==(pe[Y]||0);Y++);if(we[Y]>(pe[Y]||0)&&z--,Ve<0)qe.push(1),re=!0;else{for(me=pe.length,Ne=we.length,Y=0,Ve+=2,ce=r(V/(we[0]+1)),ce>1&&(we=H(we,ce,V),pe=H(pe,ce,V),Ne=we.length,me=pe.length),te=Ne,G=pe.slice(0,Ne),F=G.length;F<Ne;G[F++]=0);We=we.slice(),We=[0].concat(We),Oe=we[0],we[1]>=V/2&&Oe++;do{if(ce=0,J=N(we,G,Ne,F),J<0){if(Q=G[0],Ne!=F&&(Q=Q*V+(G[1]||0)),ce=r(Q/Oe),ce>1)for(ce>=V&&(ce=V-1),Te=H(we,ce,V),xe=Te.length,F=G.length;N(Te,G,xe,F)==1;)ce--,R(Te,Ne<xe?We:we,xe,V),xe=Te.length,J=1;else ce==0&&(J=ce=1),Te=we.slice(),xe=Te.length;if(xe<F&&(Te=[0].concat(Te)),R(G,Te,F,V),F=G.length,J==-1)for(;N(we,G,Ne,F)<1;)ce++,R(G,Ne<F?We:we,F,V),F=G.length}else J===0&&(ce++,G=[0]);qe[Y++]=ce,G[0]?G[F++]=pe[te]||0:(G=[pe[te]],F=1)}while((te++<me||G[0]!=null)&&Ve--);re=G[0]!=null,qe[0]||qe.splice(0,1)}if(V==l){for(Y=1,Ve=qe[0];Ve>=10;Ve/=10,Y++);de(Le,B+(Le.e=Y+z*c-1)+1,k,re)}else Le.e=z,Le.r=+re;return Le}}();function Ee(H,N,R,T){var x,B,k,V,J;if(R==null?R=U:v(R,0,8),!H.c)return H.toString();if(x=H.c[0],k=H.e,N==null)J=g(H.c),J=T==1||T==2&&(k<=j||k>=q)?w(J,k):S(J,k,"0");else if(H=de(new ae(H),N,R),B=H.e,J=g(H.c),V=J.length,T==1||T==2&&(N<=B||B<=j)){for(;V<N;J+="0",V++);J=w(J,B)}else if(N-=k,J=S(J,B,"0"),B+1>V){if(--N>0)for(J+=".";N--;J+="0");}else if(N+=B-V,N>0)for(B+1==V&&(J+=".");N--;J+="0");return H.s<0&&x?"-"+J:J}function De(H,N){for(var R,T,x=1,B=new ae(H[0]);x<H.length;x++)T=new ae(H[x]),(!T.s||(R=m(B,T))===N||R===0&&B.s===N)&&(B=T);return B}function ge(H,N,R){for(var T=1,x=N.length;!N[--x];N.pop());for(x=N[0];x>=10;x/=10,T++);return(R=T+R*c-1)>Z?H.c=H.e=null:R<$?H.c=[H.e=0]:(H.e=R,H.c=N),H}O=function(){var H=/^(-?)0([xbo])(?=\w[\w.]*$)/i,N=/^([^.]+)\.$/,R=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,x=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(B,k,V,J){var z,Y=V?k:k.replace(x,"");if(T.test(Y))B.s=isNaN(Y)?null:Y<0?-1:1;else{if(!V&&(Y=Y.replace(H,function(re,ce,Te){return z=(Te=Te.toLowerCase())=="x"?16:Te=="b"?2:8,!J||J==z?ce:re}),J&&(z=J,Y=Y.replace(N,"$1").replace(R,"0.$1")),k!=Y))return new ae(Y,z);if(ae.DEBUG)throw Error(a+"Not a"+(J?" base "+J:"")+" number: "+k);B.s=null}B.c=B.e=null}}();function de(H,N,R,T){var x,B,k,V,J,z,Y,re=H.c,ce=h;if(re){e:{for(x=1,V=re[0];V>=10;V/=10,x++);if(B=N-x,B<0)B+=c,k=N,J=re[z=0],Y=r(J/ce[x-k-1]%10);else if(z=n((B+1)/c),z>=re.length)if(T){for(;re.length<=z;re.push(0));J=Y=0,x=1,B%=c,k=B-c+1}else break e;else{for(J=V=re[z],x=1;V>=10;V/=10,x++);B%=c,k=B-c+x,Y=k<0?0:r(J/ce[x-k-1]%10)}if(T=T||N<0||re[z+1]!=null||(k<0?J:J%ce[x-k-1]),T=R<4?(Y||T)&&(R==0||R==(H.s<0?3:2)):Y>5||Y==5&&(R==4||T||R==6&&(B>0?k>0?J/ce[x-k]:0:re[z-1])%10&1||R==(H.s<0?8:7)),N<1||!re[0])return re.length=0,T?(N-=H.e+1,re[0]=ce[(c-N%c)%c],H.e=-N||0):re[0]=H.e=0,H;if(B==0?(re.length=z,V=1,z--):(re.length=z+1,V=ce[c-B],re[z]=k>0?r(J/ce[x-k]%ce[k])*V:0),T)for(;;)if(z==0){for(B=1,k=re[0];k>=10;k/=10,B++);for(k=re[0]+=V,V=1;k>=10;k/=10,V++);B!=V&&(H.e++,re[0]==l&&(re[0]=1));break}else{if(re[z]+=V,re[z]!=l)break;re[z--]=0,V=1}for(B=re.length;re[--B]===0;re.pop());}H.e>Z?H.c=H.e=null:H.e<$&&(H.c=[H.e=0])}return H}function fe(H){var N,R=H.e;return R===null?H.toString():(N=g(H.c),N=R<=j||R>=q?w(N,R):S(N,R,"0"),H.s<0?"-"+N:N)}return E.absoluteValue=E.abs=function(){var H=new ae(this);return H.s<0&&(H.s=1),H},E.comparedTo=function(H,N){return m(this,new ae(H,N))},E.decimalPlaces=E.dp=function(H,N){var R,T,x,B=this;if(H!=null)return v(H,0,p),N==null?N=U:v(N,0,8),de(new ae(B),H+B.e+1,N);if(!(R=B.c))return null;if(T=((x=R.length-1)-b(this.e/c))*c,x=R[x])for(;x%10==0;x/=10,T--);return T<0&&(T=0),T},E.dividedBy=E.div=function(H,N){return D(this,new ae(H,N),M,U)},E.dividedToIntegerBy=E.idiv=function(H,N){return D(this,new ae(H,N),0,1)},E.exponentiatedBy=E.pow=function(H,N){var R,T,x,B,k,V,J,z,Y,re=this;if(H=new ae(H),H.c&&!H.isInteger())throw Error(a+"Exponent not an integer: "+fe(H));if(N!=null&&(N=new ae(N)),V=H.e>14,!re.c||!re.c[0]||re.c[0]==1&&!re.e&&re.c.length==1||!H.c||!H.c[0])return Y=new ae(Math.pow(+fe(re),V?H.s*(2-_(H)):+fe(H))),N?Y.mod(N):Y;if(J=H.s<0,N){if(N.c?!N.c[0]:!N.s)return new ae(NaN);T=!J&&re.isInteger()&&N.isInteger(),T&&(re=re.mod(N))}else{if(H.e>9&&(re.e>0||re.e<-1||(re.e==0?re.c[0]>1||V&&re.c[1]>=24e7:re.c[0]<8e13||V&&re.c[0]<=9999975e7)))return B=re.s<0&&_(H)?-0:0,re.e>-1&&(B=1/B),new ae(J?1/B:B);K&&(B=n(K/c+2))}for(V?(R=new ae(.5),J&&(H.s=1),z=_(H)):(x=Math.abs(+fe(H)),z=x%2),Y=new ae(P);;){if(z){if(Y=Y.times(re),!Y.c)break;B?Y.c.length>B&&(Y.c.length=B):T&&(Y=Y.mod(N))}if(x){if(x=r(x/2),x===0)break;z=x%2}else if(H=H.times(R),de(H,H.e+1,1),H.e>14)z=_(H);else{if(x=+fe(H),x===0)break;z=x%2}re=re.times(re),B?re.c&&re.c.length>B&&(re.c.length=B):T&&(re=re.mod(N))}return T?Y:(J&&(Y=P.div(Y)),N?Y.mod(N):B?de(Y,K,U,k):Y)},E.integerValue=function(H){var N=new ae(this);return H==null?H=U:v(H,0,8),de(N,N.e+1,H)},E.isEqualTo=E.eq=function(H,N){return m(this,new ae(H,N))===0},E.isFinite=function(){return!!this.c},E.isGreaterThan=E.gt=function(H,N){return m(this,new ae(H,N))>0},E.isGreaterThanOrEqualTo=E.gte=function(H,N){return(N=m(this,new ae(H,N)))===1||N===0},E.isInteger=function(){return!!this.c&&b(this.e/c)>this.c.length-2},E.isLessThan=E.lt=function(H,N){return m(this,new ae(H,N))<0},E.isLessThanOrEqualTo=E.lte=function(H,N){return(N=m(this,new ae(H,N)))===-1||N===0},E.isNaN=function(){return!this.s},E.isNegative=function(){return this.s<0},E.isPositive=function(){return this.s>0},E.isZero=function(){return!!this.c&&this.c[0]==0},E.minus=function(H,N){var R,T,x,B,k=this,V=k.s;if(H=new ae(H,N),N=H.s,!V||!N)return new ae(NaN);if(V!=N)return H.s=-N,k.plus(H);var J=k.e/c,z=H.e/c,Y=k.c,re=H.c;if(!J||!z){if(!Y||!re)return Y?(H.s=-N,H):new ae(re?k:NaN);if(!Y[0]||!re[0])return re[0]?(H.s=-N,H):new ae(Y[0]?k:U==3?-0:0)}if(J=b(J),z=b(z),Y=Y.slice(),V=J-z){for((B=V<0)?(V=-V,x=Y):(z=J,x=re),x.reverse(),N=V;N--;x.push(0));x.reverse()}else for(T=(B=(V=Y.length)<(N=re.length))?V:N,V=N=0;N<T;N++)if(Y[N]!=re[N]){B=Y[N]<re[N];break}if(B&&(x=Y,Y=re,re=x,H.s=-H.s),N=(T=re.length)-(R=Y.length),N>0)for(;N--;Y[R++]=0);for(N=l-1;T>V;){if(Y[--T]<re[T]){for(R=T;R&&!Y[--R];Y[R]=N);--Y[R],Y[T]+=l}Y[T]-=re[T]}for(;Y[0]==0;Y.splice(0,1),--z);return Y[0]?ge(H,Y,z):(H.s=U==3?-1:1,H.c=[H.e=0],H)},E.modulo=E.mod=function(H,N){var R,T,x=this;return H=new ae(H,N),!x.c||!H.s||H.c&&!H.c[0]?new ae(NaN):!H.c||x.c&&!x.c[0]?new ae(x):(le==9?(T=H.s,H.s=1,R=D(x,H,0,3),H.s=T,R.s*=T):R=D(x,H,0,le),H=x.minus(R.times(H)),!H.c[0]&&le==1&&(H.s=x.s),H)},E.multipliedBy=E.times=function(H,N){var R,T,x,B,k,V,J,z,Y,re,ce,Te,xe,Le,qe,G=this,F=G.c,Q=(H=new ae(H,N)).c;if(!F||!Q||!F[0]||!Q[0])return!G.s||!H.s||F&&!F[0]&&!Q||Q&&!Q[0]&&!F?H.c=H.e=H.s=null:(H.s*=G.s,!F||!Q?H.c=H.e=null:(H.c=[0],H.e=0)),H;for(T=b(G.e/c)+b(H.e/c),H.s*=G.s,J=F.length,re=Q.length,J<re&&(xe=F,F=Q,Q=xe,x=J,J=re,re=x),x=J+re,xe=[];x--;xe.push(0));for(Le=l,qe=f,x=re;--x>=0;){for(R=0,ce=Q[x]%qe,Te=Q[x]/qe|0,k=J,B=x+k;B>x;)z=F[--k]%qe,Y=F[k]/qe|0,V=Te*z+Y*ce,z=ce*z+V%qe*qe+xe[B]+R,R=(z/Le|0)+(V/qe|0)+Te*Y,xe[B--]=z%Le;xe[B]=R}return R?++T:xe.splice(0,1),ge(H,xe,T)},E.negated=function(){var H=new ae(this);return H.s=-H.s||null,H},E.plus=function(H,N){var R,T=this,x=T.s;if(H=new ae(H,N),N=H.s,!x||!N)return new ae(NaN);if(x!=N)return H.s=-N,T.minus(H);var B=T.e/c,k=H.e/c,V=T.c,J=H.c;if(!B||!k){if(!V||!J)return new ae(x/0);if(!V[0]||!J[0])return J[0]?H:new ae(V[0]?T:x*0)}if(B=b(B),k=b(k),V=V.slice(),x=B-k){for(x>0?(k=B,R=J):(x=-x,R=V),R.reverse();x--;R.push(0));R.reverse()}for(x=V.length,N=J.length,x-N<0&&(R=J,J=V,V=R,N=x),x=0;N;)x=(V[--N]=V[N]+J[N]+x)/l|0,V[N]=l===V[N]?0:V[N]%l;return x&&(V=[x].concat(V),++k),ge(H,V,k)},E.precision=E.sd=function(H,N){var R,T,x,B=this;if(H!=null&&H!==!!H)return v(H,1,p),N==null?N=U:v(N,0,8),de(new ae(B),H,N);if(!(R=B.c))return null;if(x=R.length-1,T=x*c+1,x=R[x]){for(;x%10==0;x/=10,T--);for(x=R[0];x>=10;x/=10,T++);}return H&&B.e+1>T&&(T=B.e+1),T},E.shiftedBy=function(H){return v(H,-d,d),this.times("1e"+H)},E.squareRoot=E.sqrt=function(){var H,N,R,T,x,B=this,k=B.c,V=B.s,J=B.e,z=M+4,Y=new ae("0.5");if(V!==1||!k||!k[0])return new ae(!V||V<0&&(!k||k[0])?NaN:k?B:1/0);if(V=Math.sqrt(+fe(B)),V==0||V==1/0?(N=g(k),(N.length+J)%2==0&&(N+="0"),V=Math.sqrt(+N),J=b((J+1)/2)-(J<0||J%2),V==1/0?N="5e"+J:(N=V.toExponential(),N=N.slice(0,N.indexOf("e")+1)+J),R=new ae(N)):R=new ae(V+""),R.c[0]){for(J=R.e,V=J+z,V<3&&(V=0);;)if(x=R,R=Y.times(x.plus(D(B,x,z,1))),g(x.c).slice(0,V)===(N=g(R.c)).slice(0,V))if(R.e<J&&--V,N=N.slice(V-3,V+1),N=="9999"||!T&&N=="4999"){if(!T&&(de(x,x.e+M+2,0),x.times(x).eq(B))){R=x;break}z+=4,V+=4,T=1}else{(!+N||!+N.slice(1)&&N.charAt(0)=="5")&&(de(R,R.e+M+2,1),H=!R.times(R).eq(B));break}}return de(R,R.e+M+1,U,H)},E.toExponential=function(H,N){return H!=null&&(v(H,0,p),H++),Ee(this,H,N,1)},E.toFixed=function(H,N){return H!=null&&(v(H,0,p),H=H+this.e+1),Ee(this,H,N)},E.toFormat=function(H,N,R){var T,x=this;if(R==null)H!=null&&N&&typeof N=="object"?(R=N,N=null):H&&typeof H=="object"?(R=H,H=N=null):R=he;else if(typeof R!="object")throw Error(a+"Argument not an object: "+R);if(T=x.toFixed(H,N),x.c){var B,k=T.split("."),V=+R.groupSize,J=+R.secondaryGroupSize,z=R.groupSeparator||"",Y=k[0],re=k[1],ce=x.s<0,Te=ce?Y.slice(1):Y,xe=Te.length;if(J&&(B=V,V=J,J=B,xe-=B),V>0&&xe>0){for(B=xe%V||V,Y=Te.substr(0,B);B<xe;B+=V)Y+=z+Te.substr(B,V);J>0&&(Y+=z+Te.slice(B)),ce&&(Y="-"+Y)}T=re?Y+(R.decimalSeparator||"")+((J=+R.fractionGroupSize)?re.replace(new RegExp("\\d{"+J+"}\\B","g"),"$&"+(R.fractionGroupSeparator||"")):re):Y}return(R.prefix||"")+T+(R.suffix||"")},E.toFraction=function(H){var N,R,T,x,B,k,V,J,z,Y,re,ce,Te=this,xe=Te.c;if(H!=null&&(V=new ae(H),!V.isInteger()&&(V.c||V.s!==1)||V.lt(P)))throw Error(a+"Argument "+(V.isInteger()?"out of range: ":"not an integer: ")+fe(V));if(!xe)return new ae(Te);for(N=new ae(P),z=R=new ae(P),T=J=new ae(P),ce=g(xe),B=N.e=ce.length-Te.e-1,N.c[0]=h[(k=B%c)<0?c+k:k],H=!H||V.comparedTo(N)>0?B>0?N:z:V,k=Z,Z=1/0,V=new ae(ce),J.c[0]=0;Y=D(V,N,0,1),x=R.plus(Y.times(T)),x.comparedTo(H)!=1;)R=T,T=x,z=J.plus(Y.times(x=z)),J=x,N=V.minus(Y.times(x=N)),V=x;return x=D(H.minus(R),T,0,1),J=J.plus(x.times(z)),R=R.plus(x.times(T)),J.s=z.s=Te.s,B=B*2,re=D(z,T,B,U).minus(Te).abs().comparedTo(D(J,R,B,U).minus(Te).abs())<1?[z,T]:[J,R],Z=k,re},E.toNumber=function(){return+fe(this)},E.toPrecision=function(H,N){return H!=null&&v(H,1,p),Ee(this,H,N,2)},E.toString=function(H){var N,R=this,T=R.s,x=R.e;return x===null?T?(N="Infinity",T<0&&(N="-"+N)):N="NaN":(H==null?N=x<=j||x>=q?w(g(R.c),x):S(g(R.c),x,"0"):H===10&&ie?(R=de(new ae(R),M+x+1,U),N=S(g(R.c),R.e,"0")):(v(H,2,Re.length,"Base"),N=L(S(g(R.c),x,"0"),10,H,T,!0)),T<0&&R.c[0]&&(N="-"+N)),N},E.valueOf=E.toJSON=function(){return fe(this)},E._isBigNumber=!0,A!=null&&ae.set(A),ae}function b(A){var D=A|0;return A>0||A===D?D:D-1}function g(A){for(var D,L,O=1,E=A.length,P=A[0]+"";O<E;){for(D=A[O++]+"",L=c-D.length;L--;D="0"+D);P+=D}for(E=P.length;P.charCodeAt(--E)===48;);return P.slice(0,E+1||1)}function m(A,D){var L,O,E=A.c,P=D.c,M=A.s,U=D.s,j=A.e,q=D.e;if(!M||!U)return null;if(L=E&&!E[0],O=P&&!P[0],L||O)return L?O?0:-U:M;if(M!=U)return M;if(L=M<0,O=j==q,!E||!P)return O?0:!E^L?1:-1;if(!O)return j>q^L?1:-1;for(U=(j=E.length)<(q=P.length)?j:q,M=0;M<U;M++)if(E[M]!=P[M])return E[M]>P[M]^L?1:-1;return j==q?0:j>q^L?1:-1}function v(A,D,L,O){if(A<D||A>L||A!==r(A))throw Error(a+(O||"Argument")+(typeof A=="number"?A<D||A>L?" out of range: ":" not an integer: ":" not a primitive number: ")+String(A))}function _(A){var D=A.c.length-1;return b(A.e/c)==D&&A.c[D]%2!=0}function w(A,D){return(A.length>1?A.charAt(0)+"."+A.slice(1):A)+(D<0?"e":"e+")+D}function S(A,D,L){var O,E;if(D<0){for(E=L+".";++D;E+=L);A=E+A}else if(O=A.length,++D>O){for(E=L,D-=O;--D;E+=L);A+=E}else D<O&&(A=A.slice(0,D)+"."+A.slice(D));return A}u=y(),u.default=u.BigNumber=u,t.exports?t.exports=u:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=u)})(I)}(hS)),hS.exports}var pS={exports:{}},Lj;function Fee(){return Lj||(Lj=1,function(t,e){(function(u){t.exports=u()})(function(u){var s=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(m,v){var _=m[0],w=m[1],S=m[2],A=m[3];_+=(w&S|~w&A)+v[0]-680876936|0,_=(_<<7|_>>>25)+w|0,A+=(_&w|~_&S)+v[1]-389564586|0,A=(A<<12|A>>>20)+_|0,S+=(A&_|~A&w)+v[2]+606105819|0,S=(S<<17|S>>>15)+A|0,w+=(S&A|~S&_)+v[3]-1044525330|0,w=(w<<22|w>>>10)+S|0,_+=(w&S|~w&A)+v[4]-176418897|0,_=(_<<7|_>>>25)+w|0,A+=(_&w|~_&S)+v[5]+1200080426|0,A=(A<<12|A>>>20)+_|0,S+=(A&_|~A&w)+v[6]-1473231341|0,S=(S<<17|S>>>15)+A|0,w+=(S&A|~S&_)+v[7]-45705983|0,w=(w<<22|w>>>10)+S|0,_+=(w&S|~w&A)+v[8]+1770035416|0,_=(_<<7|_>>>25)+w|0,A+=(_&w|~_&S)+v[9]-1958414417|0,A=(A<<12|A>>>20)+_|0,S+=(A&_|~A&w)+v[10]-42063|0,S=(S<<17|S>>>15)+A|0,w+=(S&A|~S&_)+v[11]-1990404162|0,w=(w<<22|w>>>10)+S|0,_+=(w&S|~w&A)+v[12]+1804603682|0,_=(_<<7|_>>>25)+w|0,A+=(_&w|~_&S)+v[13]-40341101|0,A=(A<<12|A>>>20)+_|0,S+=(A&_|~A&w)+v[14]-1502002290|0,S=(S<<17|S>>>15)+A|0,w+=(S&A|~S&_)+v[15]+1236535329|0,w=(w<<22|w>>>10)+S|0,_+=(w&A|S&~A)+v[1]-165796510|0,_=(_<<5|_>>>27)+w|0,A+=(_&S|w&~S)+v[6]-1069501632|0,A=(A<<9|A>>>23)+_|0,S+=(A&w|_&~w)+v[11]+643717713|0,S=(S<<14|S>>>18)+A|0,w+=(S&_|A&~_)+v[0]-373897302|0,w=(w<<20|w>>>12)+S|0,_+=(w&A|S&~A)+v[5]-701558691|0,_=(_<<5|_>>>27)+w|0,A+=(_&S|w&~S)+v[10]+38016083|0,A=(A<<9|A>>>23)+_|0,S+=(A&w|_&~w)+v[15]-660478335|0,S=(S<<14|S>>>18)+A|0,w+=(S&_|A&~_)+v[4]-405537848|0,w=(w<<20|w>>>12)+S|0,_+=(w&A|S&~A)+v[9]+568446438|0,_=(_<<5|_>>>27)+w|0,A+=(_&S|w&~S)+v[14]-1019803690|0,A=(A<<9|A>>>23)+_|0,S+=(A&w|_&~w)+v[3]-187363961|0,S=(S<<14|S>>>18)+A|0,w+=(S&_|A&~_)+v[8]+1163531501|0,w=(w<<20|w>>>12)+S|0,_+=(w&A|S&~A)+v[13]-1444681467|0,_=(_<<5|_>>>27)+w|0,A+=(_&S|w&~S)+v[2]-51403784|0,A=(A<<9|A>>>23)+_|0,S+=(A&w|_&~w)+v[7]+1735328473|0,S=(S<<14|S>>>18)+A|0,w+=(S&_|A&~_)+v[12]-1926607734|0,w=(w<<20|w>>>12)+S|0,_+=(w^S^A)+v[5]-378558|0,_=(_<<4|_>>>28)+w|0,A+=(_^w^S)+v[8]-2022574463|0,A=(A<<11|A>>>21)+_|0,S+=(A^_^w)+v[11]+1839030562|0,S=(S<<16|S>>>16)+A|0,w+=(S^A^_)+v[14]-35309556|0,w=(w<<23|w>>>9)+S|0,_+=(w^S^A)+v[1]-1530992060|0,_=(_<<4|_>>>28)+w|0,A+=(_^w^S)+v[4]+1272893353|0,A=(A<<11|A>>>21)+_|0,S+=(A^_^w)+v[7]-155497632|0,S=(S<<16|S>>>16)+A|0,w+=(S^A^_)+v[10]-1094730640|0,w=(w<<23|w>>>9)+S|0,_+=(w^S^A)+v[13]+681279174|0,_=(_<<4|_>>>28)+w|0,A+=(_^w^S)+v[0]-358537222|0,A=(A<<11|A>>>21)+_|0,S+=(A^_^w)+v[3]-722521979|0,S=(S<<16|S>>>16)+A|0,w+=(S^A^_)+v[6]+76029189|0,w=(w<<23|w>>>9)+S|0,_+=(w^S^A)+v[9]-640364487|0,_=(_<<4|_>>>28)+w|0,A+=(_^w^S)+v[12]-421815835|0,A=(A<<11|A>>>21)+_|0,S+=(A^_^w)+v[15]+530742520|0,S=(S<<16|S>>>16)+A|0,w+=(S^A^_)+v[2]-995338651|0,w=(w<<23|w>>>9)+S|0,_+=(S^(w|~A))+v[0]-198630844|0,_=(_<<6|_>>>26)+w|0,A+=(w^(_|~S))+v[7]+1126891415|0,A=(A<<10|A>>>22)+_|0,S+=(_^(A|~w))+v[14]-1416354905|0,S=(S<<15|S>>>17)+A|0,w+=(A^(S|~_))+v[5]-57434055|0,w=(w<<21|w>>>11)+S|0,_+=(S^(w|~A))+v[12]+1700485571|0,_=(_<<6|_>>>26)+w|0,A+=(w^(_|~S))+v[3]-1894986606|0,A=(A<<10|A>>>22)+_|0,S+=(_^(A|~w))+v[10]-1051523|0,S=(S<<15|S>>>17)+A|0,w+=(A^(S|~_))+v[1]-2054922799|0,w=(w<<21|w>>>11)+S|0,_+=(S^(w|~A))+v[8]+1873313359|0,_=(_<<6|_>>>26)+w|0,A+=(w^(_|~S))+v[15]-30611744|0,A=(A<<10|A>>>22)+_|0,S+=(_^(A|~w))+v[6]-1560198380|0,S=(S<<15|S>>>17)+A|0,w+=(A^(S|~_))+v[13]+1309151649|0,w=(w<<21|w>>>11)+S|0,_+=(S^(w|~A))+v[4]-145523070|0,_=(_<<6|_>>>26)+w|0,A+=(w^(_|~S))+v[11]-1120210379|0,A=(A<<10|A>>>22)+_|0,S+=(_^(A|~w))+v[2]+718787259|0,S=(S<<15|S>>>17)+A|0,w+=(A^(S|~_))+v[9]-343485551|0,w=(w<<21|w>>>11)+S|0,m[0]=_+m[0]|0,m[1]=w+m[1]|0,m[2]=S+m[2]|0,m[3]=A+m[3]|0}function r(m){var v=[],_;for(_=0;_<64;_+=4)v[_>>2]=m.charCodeAt(_)+(m.charCodeAt(_+1)<<8)+(m.charCodeAt(_+2)<<16)+(m.charCodeAt(_+3)<<24);return v}function a(m){var v=[],_;for(_=0;_<64;_+=4)v[_>>2]=m[_]+(m[_+1]<<8)+(m[_+2]<<16)+(m[_+3]<<24);return v}function o(m){var v=m.length,_=[1732584193,-271733879,-1732584194,271733878],w,S,A,D,L,O;for(w=64;w<=v;w+=64)n(_,r(m.substring(w-64,w)));for(m=m.substring(w-64),S=m.length,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<S;w+=1)A[w>>2]|=m.charCodeAt(w)<<(w%4<<3);if(A[w>>2]|=128<<(w%4<<3),w>55)for(n(_,A),w=0;w<16;w+=1)A[w]=0;return D=v*8,D=D.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(D[2],16),O=parseInt(D[1],16)||0,A[14]=L,A[15]=O,n(_,A),_}function l(m){var v=m.length,_=[1732584193,-271733879,-1732584194,271733878],w,S,A,D,L,O;for(w=64;w<=v;w+=64)n(_,a(m.subarray(w-64,w)));for(m=w-64<v?m.subarray(w-64):new Uint8Array(0),S=m.length,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<S;w+=1)A[w>>2]|=m[w]<<(w%4<<3);if(A[w>>2]|=128<<(w%4<<3),w>55)for(n(_,A),w=0;w<16;w+=1)A[w]=0;return D=v*8,D=D.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(D[2],16),O=parseInt(D[1],16)||0,A[14]=L,A[15]=O,n(_,A),_}function c(m){var v="",_;for(_=0;_<4;_+=1)v+=s[m>>_*8+4&15]+s[m>>_*8&15];return v}function d(m){var v;for(v=0;v<m.length;v+=1)m[v]=c(m[v]);return m.join("")}d(o("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function m(v,_){return v=v|0||0,v<0?Math.max(v+_,0):Math.min(v,_)}ArrayBuffer.prototype.slice=function(v,_){var w=this.byteLength,S=m(v,w),A=w,D,L,O,E;return _!==u&&(A=m(_,w)),S>A?new ArrayBuffer(0):(D=A-S,L=new ArrayBuffer(D),O=new Uint8Array(L),E=new Uint8Array(this,S,D),O.set(E),L)}}();function h(m){return/[\u0080-\uFFFF]/.test(m)&&(m=unescape(encodeURIComponent(m))),m}function f(m,v){var _=m.length,w=new ArrayBuffer(_),S=new Uint8Array(w),A;for(A=0;A<_;A+=1)S[A]=m.charCodeAt(A);return v?S:w}function p(m){return String.fromCharCode.apply(null,new Uint8Array(m))}function y(m,v,_){var w=new Uint8Array(m.byteLength+v.byteLength);return w.set(new Uint8Array(m)),w.set(new Uint8Array(v),m.byteLength),_?w:w.buffer}function b(m){var v=[],_=m.length,w;for(w=0;w<_-1;w+=2)v.push(parseInt(m.substr(w,2),16));return String.fromCharCode.apply(String,v)}function g(){this.reset()}return g.prototype.append=function(m){return this.appendBinary(h(m)),this},g.prototype.appendBinary=function(m){this._buff+=m,this._length+=m.length;var v=this._buff.length,_;for(_=64;_<=v;_+=64)n(this._hash,r(this._buff.substring(_-64,_)));return this._buff=this._buff.substring(_-64),this},g.prototype.end=function(m){var v=this._buff,_=v.length,w,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A;for(w=0;w<_;w+=1)S[w>>2]|=v.charCodeAt(w)<<(w%4<<3);return this._finish(S,_),A=d(this._hash),m&&(A=b(A)),this.reset(),A},g.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},g.prototype.setState=function(m){return this._buff=m.buff,this._length=m.length,this._hash=m.hash,this},g.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},g.prototype._finish=function(m,v){var _=v,w,S,A;if(m[_>>2]|=128<<(_%4<<3),_>55)for(n(this._hash,m),_=0;_<16;_+=1)m[_]=0;w=this._length*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),S=parseInt(w[2],16),A=parseInt(w[1],16)||0,m[14]=S,m[15]=A,n(this._hash,m)},g.hash=function(m,v){return g.hashBinary(h(m),v)},g.hashBinary=function(m,v){var _=o(m),w=d(_);return v?b(w):w},g.ArrayBuffer=function(){this.reset()},g.ArrayBuffer.prototype.append=function(m){var v=y(this._buff.buffer,m,!0),_=v.length,w;for(this._length+=m.byteLength,w=64;w<=_;w+=64)n(this._hash,a(v.subarray(w-64,w)));return this._buff=w-64<_?new Uint8Array(v.buffer.slice(w-64)):new Uint8Array(0),this},g.ArrayBuffer.prototype.end=function(m){var v=this._buff,_=v.length,w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S,A;for(S=0;S<_;S+=1)w[S>>2]|=v[S]<<(S%4<<3);return this._finish(w,_),A=d(this._hash),m&&(A=b(A)),this.reset(),A},g.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.ArrayBuffer.prototype.getState=function(){var m=g.prototype.getState.call(this);return m.buff=p(m.buff),m},g.ArrayBuffer.prototype.setState=function(m){return m.buff=f(m.buff,!0),g.prototype.setState.call(this,m)},g.ArrayBuffer.prototype.destroy=g.prototype.destroy,g.ArrayBuffer.prototype._finish=g.prototype._finish,g.ArrayBuffer.hash=function(m,v){var _=l(new Uint8Array(m)),w=d(_);return v?b(w):w},g})}(pS)),pS.exports}var yS={},cp={},L1={},Mj;function gB(){if(Mj)return L1;Mj=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.default=u;let t;const e=new Uint8Array(16);function u(){if(!t&&(t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}return L1}var vo={},lp={},dp={},Fj;function qee(){if(Fj)return dp;Fj=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.default=void 0;var t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return dp.default=t,dp}var qj;function sm(){if(qj)return lp;qj=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.default=void 0;var t=e(qee());function e(n){return n&&n.__esModule?n:{default:n}}function u(n){return typeof n=="string"&&t.default.test(n)}var s=u;return lp.default=s,lp}var Bj;function om(){if(Bj)return vo;Bj=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.default=void 0,vo.unsafeStringify=s;var t=e(sm());function e(a){return a&&a.__esModule?a:{default:a}}const u=[];for(let a=0;a<256;++a)u.push((a+256).toString(16).slice(1));function s(a,o=0){return u[a[o+0]]+u[a[o+1]]+u[a[o+2]]+u[a[o+3]]+"-"+u[a[o+4]]+u[a[o+5]]+"-"+u[a[o+6]]+u[a[o+7]]+"-"+u[a[o+8]]+u[a[o+9]]+"-"+u[a[o+10]]+u[a[o+11]]+u[a[o+12]]+u[a[o+13]]+u[a[o+14]]+u[a[o+15]]}function n(a,o=0){const l=s(a,o);if(!(0,t.default)(l))throw TypeError("Stringified UUID is invalid");return l}var r=n;return vo.default=r,vo}var Uj;function Bee(){if(Uj)return cp;Uj=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.default=void 0;var t=u(gB()),e=om();function u(c){return c&&c.__esModule?c:{default:c}}let s,n,r=0,a=0;function o(c,d,h){let f=d&&h||0;const p=d||new Array(16);c=c||{};let y=c.node||s,b=c.clockseq!==void 0?c.clockseq:n;if(y==null||b==null){const S=c.random||(c.rng||t.default)();y==null&&(y=s=[S[0]|1,S[1],S[2],S[3],S[4],S[5]]),b==null&&(b=n=(S[6]<<8|S[7])&16383)}let g=c.msecs!==void 0?c.msecs:Date.now(),m=c.nsecs!==void 0?c.nsecs:a+1;const v=g-r+(m-a)/1e4;if(v<0&&c.clockseq===void 0&&(b=b+1&16383),(v<0||g>r)&&c.nsecs===void 0&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=g,a=m,n=b,g+=122192928e5;const _=((g&268435455)*1e4+m)%4294967296;p[f++]=_>>>24&255,p[f++]=_>>>16&255,p[f++]=_>>>8&255,p[f++]=_&255;const w=g/4294967296*1e4&268435455;p[f++]=w>>>8&255,p[f++]=w&255,p[f++]=w>>>24&15|16,p[f++]=w>>>16&255,p[f++]=b>>>8|128,p[f++]=b&255;for(let S=0;S<6;++S)p[f+S]=y[S];return d||(0,e.unsafeStringify)(p)}var l=o;return cp.default=l,cp}var fp={},Ia={},hp={},Qj;function _B(){if(Qj)return hp;Qj=1,Object.defineProperty(hp,"__esModule",{value:!0}),hp.default=void 0;var t=e(sm());function e(n){return n&&n.__esModule?n:{default:n}}function u(n){if(!(0,t.default)(n))throw TypeError("Invalid UUID");let r;const a=new Uint8Array(16);return a[0]=(r=parseInt(n.slice(0,8),16))>>>24,a[1]=r>>>16&255,a[2]=r>>>8&255,a[3]=r&255,a[4]=(r=parseInt(n.slice(9,13),16))>>>8,a[5]=r&255,a[6]=(r=parseInt(n.slice(14,18),16))>>>8,a[7]=r&255,a[8]=(r=parseInt(n.slice(19,23),16))>>>8,a[9]=r&255,a[10]=(r=parseInt(n.slice(24,36),16))/1099511627776&255,a[11]=r/4294967296&255,a[12]=r>>>24&255,a[13]=r>>>16&255,a[14]=r>>>8&255,a[15]=r&255,a}var s=u;return hp.default=s,hp}var Hj;function vB(){if(Hj)return Ia;Hj=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.URL=Ia.DNS=void 0,Ia.default=a;var t=om(),e=u(_B());function u(o){return o&&o.__esModule?o:{default:o}}function s(o){o=unescape(encodeURIComponent(o));const l=[];for(let c=0;c<o.length;++c)l.push(o.charCodeAt(c));return l}const n="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ia.DNS=n;const r="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Ia.URL=r;function a(o,l,c){function d(h,f,p,y){var b;if(typeof h=="string"&&(h=s(h)),typeof f=="string"&&(f=(0,e.default)(f)),((b=f)===null||b===void 0?void 0:b.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let g=new Uint8Array(16+h.length);if(g.set(f),g.set(h,f.length),g=c(g),g[6]=g[6]&15|l,g[8]=g[8]&63|128,p){y=y||0;for(let m=0;m<16;++m)p[y+m]=g[m];return p}return(0,t.unsafeStringify)(g)}try{d.name=o}catch{}return d.DNS=n,d.URL=r,d}return Ia}var pp={},$j;function Uee(){if($j)return pp;$j=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.default=void 0;function t(p){if(typeof p=="string"){const y=unescape(encodeURIComponent(p));p=new Uint8Array(y.length);for(let b=0;b<y.length;++b)p[b]=y.charCodeAt(b)}return e(s(n(p),p.length*8))}function e(p){const y=[],b=p.length*32,g="0123456789abcdef";for(let m=0;m<b;m+=8){const v=p[m>>5]>>>m%32&255,_=parseInt(g.charAt(v>>>4&15)+g.charAt(v&15),16);y.push(_)}return y}function u(p){return(p+64>>>9<<4)+14+1}function s(p,y){p[y>>5]|=128<<y%32,p[u(y)-1]=y;let b=1732584193,g=-271733879,m=-1732584194,v=271733878;for(let _=0;_<p.length;_+=16){const w=b,S=g,A=m,D=v;b=l(b,g,m,v,p[_],7,-680876936),v=l(v,b,g,m,p[_+1],12,-389564586),m=l(m,v,b,g,p[_+2],17,606105819),g=l(g,m,v,b,p[_+3],22,-1044525330),b=l(b,g,m,v,p[_+4],7,-176418897),v=l(v,b,g,m,p[_+5],12,1200080426),m=l(m,v,b,g,p[_+6],17,-1473231341),g=l(g,m,v,b,p[_+7],22,-45705983),b=l(b,g,m,v,p[_+8],7,1770035416),v=l(v,b,g,m,p[_+9],12,-1958414417),m=l(m,v,b,g,p[_+10],17,-42063),g=l(g,m,v,b,p[_+11],22,-1990404162),b=l(b,g,m,v,p[_+12],7,1804603682),v=l(v,b,g,m,p[_+13],12,-40341101),m=l(m,v,b,g,p[_+14],17,-1502002290),g=l(g,m,v,b,p[_+15],22,1236535329),b=c(b,g,m,v,p[_+1],5,-165796510),v=c(v,b,g,m,p[_+6],9,-1069501632),m=c(m,v,b,g,p[_+11],14,643717713),g=c(g,m,v,b,p[_],20,-373897302),b=c(b,g,m,v,p[_+5],5,-701558691),v=c(v,b,g,m,p[_+10],9,38016083),m=c(m,v,b,g,p[_+15],14,-660478335),g=c(g,m,v,b,p[_+4],20,-405537848),b=c(b,g,m,v,p[_+9],5,568446438),v=c(v,b,g,m,p[_+14],9,-1019803690),m=c(m,v,b,g,p[_+3],14,-187363961),g=c(g,m,v,b,p[_+8],20,1163531501),b=c(b,g,m,v,p[_+13],5,-1444681467),v=c(v,b,g,m,p[_+2],9,-51403784),m=c(m,v,b,g,p[_+7],14,1735328473),g=c(g,m,v,b,p[_+12],20,-1926607734),b=d(b,g,m,v,p[_+5],4,-378558),v=d(v,b,g,m,p[_+8],11,-2022574463),m=d(m,v,b,g,p[_+11],16,1839030562),g=d(g,m,v,b,p[_+14],23,-35309556),b=d(b,g,m,v,p[_+1],4,-1530992060),v=d(v,b,g,m,p[_+4],11,1272893353),m=d(m,v,b,g,p[_+7],16,-155497632),g=d(g,m,v,b,p[_+10],23,-1094730640),b=d(b,g,m,v,p[_+13],4,681279174),v=d(v,b,g,m,p[_],11,-358537222),m=d(m,v,b,g,p[_+3],16,-722521979),g=d(g,m,v,b,p[_+6],23,76029189),b=d(b,g,m,v,p[_+9],4,-640364487),v=d(v,b,g,m,p[_+12],11,-421815835),m=d(m,v,b,g,p[_+15],16,530742520),g=d(g,m,v,b,p[_+2],23,-995338651),b=h(b,g,m,v,p[_],6,-198630844),v=h(v,b,g,m,p[_+7],10,1126891415),m=h(m,v,b,g,p[_+14],15,-1416354905),g=h(g,m,v,b,p[_+5],21,-57434055),b=h(b,g,m,v,p[_+12],6,1700485571),v=h(v,b,g,m,p[_+3],10,-1894986606),m=h(m,v,b,g,p[_+10],15,-1051523),g=h(g,m,v,b,p[_+1],21,-2054922799),b=h(b,g,m,v,p[_+8],6,1873313359),v=h(v,b,g,m,p[_+15],10,-30611744),m=h(m,v,b,g,p[_+6],15,-1560198380),g=h(g,m,v,b,p[_+13],21,1309151649),b=h(b,g,m,v,p[_+4],6,-145523070),v=h(v,b,g,m,p[_+11],10,-1120210379),m=h(m,v,b,g,p[_+2],15,718787259),g=h(g,m,v,b,p[_+9],21,-343485551),b=r(b,w),g=r(g,S),m=r(m,A),v=r(v,D)}return[b,g,m,v]}function n(p){if(p.length===0)return[];const y=p.length*8,b=new Uint32Array(u(y));for(let g=0;g<y;g+=8)b[g>>5]|=(p[g/8]&255)<<g%32;return b}function r(p,y){const b=(p&65535)+(y&65535);return(p>>16)+(y>>16)+(b>>16)<<16|b&65535}function a(p,y){return p<<y|p>>>32-y}function o(p,y,b,g,m,v){return r(a(r(r(y,p),r(g,v)),m),b)}function l(p,y,b,g,m,v,_){return o(y&b|~y&g,p,y,m,v,_)}function c(p,y,b,g,m,v,_){return o(y&g|b&~g,p,y,m,v,_)}function d(p,y,b,g,m,v,_){return o(y^b^g,p,y,m,v,_)}function h(p,y,b,g,m,v,_){return o(b^(y|~g),p,y,m,v,_)}var f=t;return pp.default=f,pp}var Vj;function Qee(){if(Vj)return fp;Vj=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.default=void 0;var t=u(vB()),e=u(Uee());function u(r){return r&&r.__esModule?r:{default:r}}var n=(0,t.default)("v3",48,e.default);return fp.default=n,fp}var yp={},bp={},kj;function Hee(){if(kj)return bp;kj=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.default=void 0;var e={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return bp.default=e,bp}var zj;function $ee(){if(zj)return yp;zj=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.default=void 0;var t=s(Hee()),e=s(gB()),u=om();function s(a){return a&&a.__esModule?a:{default:a}}function n(a,o,l){if(t.default.randomUUID&&!o&&!a)return t.default.randomUUID();a=a||{};const c=a.random||(a.rng||e.default)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,o){l=l||0;for(let d=0;d<16;++d)o[l+d]=c[d];return o}return(0,u.unsafeStringify)(c)}var r=n;return yp.default=r,yp}var mp={},gp={},Gj;function Vee(){if(Gj)return gp;Gj=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.default=void 0;function t(n,r,a,o){switch(n){case 0:return r&a^~r&o;case 1:return r^a^o;case 2:return r&a^r&o^a&o;case 3:return r^a^o}}function e(n,r){return n<<r|n>>>32-r}function u(n){const r=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){const d=unescape(encodeURIComponent(n));n=[];for(let h=0;h<d.length;++h)n.push(d.charCodeAt(h))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);const o=n.length/4+2,l=Math.ceil(o/16),c=new Array(l);for(let d=0;d<l;++d){const h=new Uint32Array(16);for(let f=0;f<16;++f)h[f]=n[d*64+f*4]<<24|n[d*64+f*4+1]<<16|n[d*64+f*4+2]<<8|n[d*64+f*4+3];c[d]=h}c[l-1][14]=(n.length-1)*8/Math.pow(2,32),c[l-1][14]=Math.floor(c[l-1][14]),c[l-1][15]=(n.length-1)*8&4294967295;for(let d=0;d<l;++d){const h=new Uint32Array(80);for(let m=0;m<16;++m)h[m]=c[d][m];for(let m=16;m<80;++m)h[m]=e(h[m-3]^h[m-8]^h[m-14]^h[m-16],1);let f=a[0],p=a[1],y=a[2],b=a[3],g=a[4];for(let m=0;m<80;++m){const v=Math.floor(m/20),_=e(f,5)+t(v,p,y,b)+g+r[v]+h[m]>>>0;g=b,b=y,y=e(p,30)>>>0,p=f,f=_}a[0]=a[0]+f>>>0,a[1]=a[1]+p>>>0,a[2]=a[2]+y>>>0,a[3]=a[3]+b>>>0,a[4]=a[4]+g>>>0}return[a[0]>>24&255,a[0]>>16&255,a[0]>>8&255,a[0]&255,a[1]>>24&255,a[1]>>16&255,a[1]>>8&255,a[1]&255,a[2]>>24&255,a[2]>>16&255,a[2]>>8&255,a[2]&255,a[3]>>24&255,a[3]>>16&255,a[3]>>8&255,a[3]&255,a[4]>>24&255,a[4]>>16&255,a[4]>>8&255,a[4]&255]}var s=u;return gp.default=s,gp}var Wj;function kee(){if(Wj)return mp;Wj=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.default=void 0;var t=u(vB()),e=u(Vee());function u(r){return r&&r.__esModule?r:{default:r}}var n=(0,t.default)("v5",80,e.default);return mp.default=n,mp}var _p={},Jj;function zee(){if(Jj)return _p;Jj=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.default=void 0;var t="00000000-0000-0000-0000-000000000000";return _p.default=t,_p}var vp={},Xj;function Gee(){if(Xj)return vp;Xj=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.default=void 0;var t=e(sm());function e(n){return n&&n.__esModule?n:{default:n}}function u(n){if(!(0,t.default)(n))throw TypeError("Invalid UUID");return parseInt(n.slice(14,15),16)}var s=u;return vp.default=s,vp}var Kj;function wB(){return Kj||(Kj=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return a.default}});var e=d(Bee()),u=d(Qee()),s=d($ee()),n=d(kee()),r=d(zee()),a=d(Gee()),o=d(sm()),l=d(om()),c=d(_B());function d(h){return h&&h.__esModule?h:{default:h}}}(yS)),yS}var wp={},Yj;function um(){if(Yj)return wp;Yj=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.orderTypes=void 0;const t=os(),e=cu(),u=no(),s=Nn(),n=on();function r(c,d,h=!1,f,p){if(c===d)return 0;if(c===void 0)return-1;if(d===void 0)return 1;if(c.termType!==d.termType)return l[c.termType]<l[d.termType]?-1:1;if(c.equals(d))return 0;if(c.termType==="Quad"&&d.termType==="Quad"){const y=r(c.subject,d.subject,h,f,p);if(y!==0)return y;const b=r(c.predicate,d.predicate,h,f,p);if(b!==0)return b;const g=r(c.object,d.object,h,f,p);return g!==0?g:r(c.graph,d.graph,h,f,p)}if(c.termType==="Literal")return a(c,d,f,p);if(h)throw new n.InvalidCompareArgumentTypes(c,d);return o(c.value,d.value)}wp.orderTypes=r;function a(c,d,h,f){const p=e.regularFunctions[s.RegularOperator.GT],y=e.regularFunctions[s.RegularOperator.EQUAL],b={now:new Date,functionArgumentsCache:{},superTypeProvider:{discoverer:h??(()=>"term"),cache:f??new t.LRUCache({max:1e3})},defaultTimeZone:{zoneHours:0,zoneMinutes:0}},g=new u.TermTransformer(b.superTypeProvider),m=g.transformLiteral(c),v=g.transformLiteral(d);try{return y.apply([m,v],b).typedValue?0:p.apply([m,v],b).typedValue?1:-1}catch{const _=o(m.dataType,v.dataType);return _!==0?_:o(m.str(),v.str())}}function o(c,d){return c===d?0:c<d?-1:1}const l={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5};return wp}var la={},Zj;function Wee(){if(Zj)return la;Zj=1,Object.defineProperty(la,"__esModule",{value:!0}),la.langMatches=la.replace=la.matches=void 0;function t(r,a,o){return new RegExp(a,o).test(r)}la.matches=t;function e(r,a,o,l){let c=new RegExp(a,l);if(!c.global){const d=l??"";c=new RegExp(a,`${d}g`)}return r.replace(c,o)}la.replace=e;function u(r,a){const o=r.split("-"),l=a.split("-");if(!n(l[0],o[0])&&!s(o[0]))return!1;let c=1,d=1;for(;d<l.length;){if(s(l[d])){d++;continue}if(c===o.length)return!1;if(n(l[d],o[c])){c++,d++;continue}if(o[c].length===1)return!1;c++}return!0}la.langMatches=u;function s(r){return r==="*"}function n(r,a){return new RegExp(`/${r}/`,"iu").test(`/${a}/`)}return la}var eL;function Jee(){if(eL)return up;eL=1,Object.defineProperty(up,"__esModule",{value:!0}),up.definitions=void 0;const t=Mee(),e=kb(),u=Et(),s=Pi(),n=Fee(),r=wB(),a=Kn(),o=no(),l=Nn(),c=Nn(),d=uu(),h=on(),f=um(),p=bB(),y=N3(),b=Yi(),g=Wee(),m=cu(),v=new u.DataFactory,_={arity:1,overloads:(0,b.declare)(l.RegularOperator.NOT).onTerm1(()=>C=>(0,b.bool)(!C.coerceEBV())).collect()},w={arity:1,overloads:(0,b.declare)(l.RegularOperator.UPLUS).numericConverter(()=>C=>C).collect()},S={arity:1,overloads:(0,b.declare)(l.RegularOperator.UMINUS).numericConverter(()=>C=>-C).collect()},A={arity:2,overloads:(0,b.declare)(l.RegularOperator.MULTIPLICATION).arithmetic(()=>(C,ee)=>new t.BigNumber(C).times(ee).toNumber()).collect()},D={arity:2,overloads:(0,b.declare)(l.RegularOperator.DIVISION).arithmetic(()=>(C,ee)=>new t.BigNumber(C).div(ee).toNumber()).onBinaryTyped([c.TypeURL.XSD_INTEGER,c.TypeURL.XSD_INTEGER],()=>(C,ee)=>{if(ee===0)throw new h.ExpressionError("Integer division by 0");return(0,b.decimal)(new t.BigNumber(C).div(ee).toNumber())}).collect()},L={arity:2,overloads:(0,b.declare)(l.RegularOperator.ADDITION).arithmetic(()=>(C,ee)=>new t.BigNumber(C).plus(ee).toNumber()).set([c.TypeURL.XSD_DATE_TIME,c.TypeURL.XSD_DAY_TIME_DURATION],()=>([C,ee])=>new a.DateTimeLiteral((0,p.addDurationToDateTime)(C.typedValue,(0,d.defaultedDurationRepresentation)(ee.typedValue)))).copy({from:[c.TypeURL.XSD_DATE_TIME,c.TypeURL.XSD_DAY_TIME_DURATION],to:[c.TypeURL.XSD_DATE_TIME,c.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([c.TypeURL.XSD_DATE,c.TypeURL.XSD_DAY_TIME_DURATION],()=>([C,ee])=>new a.DateLiteral((0,p.addDurationToDateTime)((0,d.defaultedDateTimeRepresentation)(C.typedValue),(0,d.defaultedDurationRepresentation)(ee.typedValue)))).copy({from:[c.TypeURL.XSD_DATE,c.TypeURL.XSD_DAY_TIME_DURATION],to:[c.TypeURL.XSD_DATE,c.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([c.TypeURL.XSD_TIME,c.TypeURL.XSD_DAY_TIME_DURATION],()=>([C,ee])=>new a.TimeLiteral((0,p.addDurationToDateTime)((0,d.defaultedDateTimeRepresentation)(C.typedValue),(0,d.defaultedDurationRepresentation)(ee.typedValue)))).copy({from:[c.TypeURL.XSD_TIME,c.TypeURL.XSD_DAY_TIME_DURATION],to:[c.TypeURL.XSD_TIME,c.TypeURL.XSD_YEAR_MONTH_DURATION]}).collect()},O={arity:2,overloads:(0,b.declare)(l.RegularOperator.SUBTRACTION).arithmetic(()=>(C,ee)=>new t.BigNumber(C).minus(ee).toNumber()).set([c.TypeURL.XSD_DATE_TIME,c.TypeURL.XSD_DATE_TIME],({defaultTimeZone:C})=>([ee,ye])=>new a.DayTimeDurationLiteral((0,p.elapsedDuration)(ee.typedValue,ye.typedValue,C))).copy({from:[c.TypeURL.XSD_DATE_TIME,c.TypeURL.XSD_DATE_TIME],to:[c.TypeURL.XSD_DATE,c.TypeURL.XSD_DATE]}).copy({from:[c.TypeURL.XSD_DATE_TIME,c.TypeURL.XSD_DATE_TIME],to:[c.TypeURL.XSD_TIME,c.TypeURL.XSD_TIME]}).set([c.TypeURL.XSD_DATE_TIME,c.TypeURL.XSD_DAY_TIME_DURATION],()=>([C,ee])=>new a.DateTimeLiteral((0,p.addDurationToDateTime)(C.typedValue,(0,d.defaultedDurationRepresentation)((0,d.negateDuration)(ee.typedValue))))).copy({from:[c.TypeURL.XSD_DATE_TIME,c.TypeURL.XSD_DAY_TIME_DURATION],to:[c.TypeURL.XSD_DATE_TIME,c.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([c.TypeURL.XSD_DATE,c.TypeURL.XSD_DAY_TIME_DURATION],()=>([C,ee])=>new a.DateLiteral((0,p.addDurationToDateTime)((0,d.defaultedDateTimeRepresentation)(C.typedValue),(0,d.defaultedDurationRepresentation)((0,d.negateDuration)(ee.typedValue))))).copy({from:[c.TypeURL.XSD_DATE,c.TypeURL.XSD_DAY_TIME_DURATION],to:[c.TypeURL.XSD_DATE,c.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([c.TypeURL.XSD_TIME,c.TypeURL.XSD_DAY_TIME_DURATION],()=>([C,ee])=>new a.TimeLiteral((0,p.addDurationToDateTime)((0,d.defaultedDateTimeRepresentation)(C.typedValue),(0,d.defaultedDurationRepresentation)((0,d.negateDuration)(ee.typedValue))))).collect()},E={arity:2,overloads:(0,b.declare)(l.RegularOperator.EQUAL).numberTest(()=>(C,ee)=>C===ee).stringTest(()=>(C,ee)=>C.localeCompare(ee)===0).set([c.TypeURL.RDF_LANG_STRING,c.TypeURL.RDF_LANG_STRING],()=>([C,ee])=>(0,b.bool)(C.str()===ee.str()&&C.language===ee.language)).set([c.TypeAlias.SPARQL_STRINGLY,c.TypeAlias.SPARQL_STRINGLY],()=>()=>(0,b.bool)(!1)).booleanTest(()=>(C,ee)=>C===ee).dateTimeTest(({defaultTimeZone:C})=>(ee,ye)=>(0,d.toUTCDate)(ee,C).getTime()===(0,d.toUTCDate)(ye,C).getTime()).copy({from:[c.TypeURL.XSD_DATE_TIME,c.TypeURL.XSD_DATE_TIME],to:[c.TypeURL.XSD_DATE,c.TypeURL.XSD_DATE]}).set(["quad","quad"],C=>([ee,ye])=>{const Pe=new y.RegularFunction(c.RegularOperator.EQUAL,E);return(0,b.bool)(Pe.apply([ee.subject,ye.subject],C).coerceEBV()&&Pe.apply([ee.predicate,ye.predicate],C).coerceEBV()&&Pe.apply([ee.object,ye.object],C).coerceEBV())},!1).set(["term","term"],()=>([C,ee])=>(0,b.bool)(P(C,ee)),!1).set([c.TypeURL.XSD_DURATION,c.TypeURL.XSD_DURATION],()=>([C,ee])=>(0,b.bool)((0,d.yearMonthDurationsToMonths)((0,d.defaultedYearMonthDurationRepresentation)(C.typedValue))===(0,d.yearMonthDurationsToMonths)((0,d.defaultedYearMonthDurationRepresentation)(ee.typedValue))&&(0,d.dayTimeDurationsToSeconds)((0,d.defaultedDayTimeDurationRepresentation)(C.typedValue))===(0,d.dayTimeDurationsToSeconds)((0,d.defaultedDayTimeDurationRepresentation)(ee.typedValue)))).set([c.TypeURL.XSD_TIME,c.TypeURL.XSD_TIME],({defaultTimeZone:C})=>([ee,ye])=>(0,b.bool)((0,d.toUTCDate)((0,d.defaultedDateTimeRepresentation)(ee.typedValue),C).getTime()===(0,d.toUTCDate)((0,d.defaultedDateTimeRepresentation)(ye.typedValue),C).getTime())).collect()};function P(C,ee){const ye=C.toRDF(),Pe=ee.toRDF(),Ue=ye.equals(Pe);if(!Ue&&ye.termType==="Literal"&&Pe.termType==="Literal")throw new h.RDFEqualTypeError([C,ee]);return Ue}const M={arity:2,overloads:(0,b.declare)(l.RegularOperator.NOT_EQUAL).set(["term","term"],C=>([ee,ye])=>(0,b.bool)(!m.regularFunctions[l.RegularOperator.EQUAL].apply([ee,ye],C).typedValue)).collect()},U={arity:2,overloads:(0,b.declare)(l.RegularOperator.LT).numberTest(()=>(C,ee)=>C<ee).stringTest(()=>(C,ee)=>C.localeCompare(ee)===-1).booleanTest(()=>(C,ee)=>C<ee).set(["quad","quad"],()=>([C,ee])=>(0,b.bool)((0,f.orderTypes)(C.toRDF(),ee.toRDF(),!0)===-1),!1).dateTimeTest(({defaultTimeZone:C})=>(ee,ye)=>(0,d.toUTCDate)(ee,C).getTime()<(0,d.toUTCDate)(ye,C).getTime()).copy({from:[c.TypeURL.XSD_DATE_TIME,c.TypeURL.XSD_DATE_TIME],to:[c.TypeURL.XSD_DATE,c.TypeURL.XSD_DATE]}).set([c.TypeURL.XSD_YEAR_MONTH_DURATION,c.TypeURL.XSD_YEAR_MONTH_DURATION],()=>([C,ee])=>(0,b.bool)((0,d.yearMonthDurationsToMonths)((0,d.defaultedYearMonthDurationRepresentation)(C.typedValue))<(0,d.yearMonthDurationsToMonths)((0,d.defaultedYearMonthDurationRepresentation)(ee.typedValue)))).set([c.TypeURL.XSD_DAY_TIME_DURATION,c.TypeURL.XSD_DAY_TIME_DURATION],()=>([C,ee])=>(0,b.bool)((0,d.dayTimeDurationsToSeconds)((0,d.defaultedDayTimeDurationRepresentation)(C.typedValue))<(0,d.dayTimeDurationsToSeconds)((0,d.defaultedDayTimeDurationRepresentation)(ee.typedValue)))).set([c.TypeURL.XSD_TIME,c.TypeURL.XSD_TIME],({defaultTimeZone:C})=>([ee,ye])=>(0,b.bool)((0,d.toUTCDate)((0,d.defaultedDateTimeRepresentation)(ee.typedValue),C).getTime()<(0,d.toUTCDate)((0,d.defaultedDateTimeRepresentation)(ye.typedValue),C).getTime())).collect()},j={arity:2,overloads:(0,b.declare)(l.RegularOperator.GT).set(["term","term"],C=>([ee,ye])=>m.regularFunctions[l.RegularOperator.LT].apply([ye,ee],C)).collect()},q={arity:2,overloads:(0,b.declare)(l.RegularOperator.LTE).set(["term","term"],C=>([ee,ye])=>(0,b.bool)(m.regularFunctions[l.RegularOperator.LT].apply([ee,ye],C).typedValue||m.regularFunctions[l.RegularOperator.EQUAL].apply([ee,ye],C).typedValue)).collect()},$={arity:2,overloads:(0,b.declare)(l.RegularOperator.GTE).set(["term","term"],C=>([ee,ye])=>m.regularFunctions[l.RegularOperator.LTE].apply([ye,ee],C)).collect()},Z={arity:1,overloads:(0,b.declare)(l.RegularOperator.IS_IRI).onTerm1(()=>C=>(0,b.bool)(C.termType==="namedNode")).collect()},X={arity:1,overloads:(0,b.declare)(l.RegularOperator.IS_BLANK).onTerm1(()=>C=>(0,b.bool)(C.termType==="blankNode")).collect()},le={arity:1,overloads:(0,b.declare)(l.RegularOperator.IS_LITERAL).onTerm1(()=>C=>(0,b.bool)(C.termType==="literal")).collect()},K={arity:1,overloads:(0,b.declare)(l.RegularOperator.IS_NUMERIC).onNumeric1(()=>()=>(0,b.bool)(!0)).onTerm1(()=>()=>(0,b.bool)(!1)).collect()},he={arity:1,overloads:(0,b.declare)(l.RegularOperator.STR).onTerm1(()=>C=>(0,b.string)(C.str())).collect()},Re={arity:1,overloads:(0,b.declare)(l.RegularOperator.LANG).onLiteral1(()=>C=>(0,b.string)(C.language??"")).collect()},ie={arity:1,overloads:(0,b.declare)(l.RegularOperator.DATATYPE).onLiteral1(()=>C=>new a.NamedNode(C.dataType)).collect()},ae={arity:1,overloads:(0,b.declare)(l.RegularOperator.IRI).set(["namedNode"],C=>ee=>{const ye=ee[0],Pe=(0,s.resolve)(ye.str(),C.baseIRI??"");return new a.NamedNode(Pe)}).onString1(C=>ee=>{const ye=(0,s.resolve)(ee.str(),C.baseIRI??"");return new a.NamedNode(ye)}).collect()},Ee={arity:2,overloads:(0,b.declare)(l.RegularOperator.STRDT).set([c.TypeURL.XSD_STRING,"namedNode"],({superTypeProvider:C})=>([ee,ye])=>{const Pe=v.literal(ee.typedValue,v.namedNode(ye.value));return new o.TermTransformer(C).transformLiteral(Pe)}).collect()},De={arity:2,overloads:(0,b.declare)(l.RegularOperator.STRLANG).onBinaryTyped([c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING],()=>(C,ee)=>new a.LangStringLiteral(C,ee.toLowerCase())).collect()},ge={arity:0,overloads:(0,b.declare)(l.RegularOperator.UUID).set([],()=>()=>new a.NamedNode(`urn:uuid:${r.v4()}`)).collect()},de={arity:0,overloads:(0,b.declare)(l.RegularOperator.STRUUID).set([],()=>()=>(0,b.string)(r.v4())).collect()},fe={arity:1,overloads:(0,b.declare)(l.RegularOperator.STRLEN).onStringly1(()=>C=>(0,b.integer)([...C.typedValue].length)).collect()},H={arity:[2,3],overloads:(0,b.declare)(l.RegularOperator.SUBSTR).onBinaryTyped([c.TypeURL.XSD_STRING,c.TypeURL.XSD_INTEGER],()=>(C,ee)=>(0,b.string)([...C].slice(ee-1).join(""))).onBinary([c.TypeURL.RDF_LANG_STRING,c.TypeURL.XSD_INTEGER],()=>(C,ee)=>{const ye=[...C.typedValue].slice(ee.typedValue-1).join("");return(0,b.langString)(ye,C.language)}).onTernaryTyped([c.TypeURL.XSD_STRING,c.TypeURL.XSD_INTEGER,c.TypeURL.XSD_INTEGER],()=>(C,ee,ye)=>(0,b.string)([...C].slice(ee-1,ye+ee-1).join(""))).onTernary([c.TypeURL.RDF_LANG_STRING,c.TypeURL.XSD_INTEGER,c.TypeURL.XSD_INTEGER],()=>(C,ee,ye)=>{const Pe=[...C.typedValue].slice(ee.typedValue-1,ye.typedValue+ee.typedValue-1).join("");return(0,b.langString)(Pe,C.language)}).collect()},N={arity:1,overloads:(0,b.declare)(l.RegularOperator.UCASE).onString1Typed(()=>C=>(0,b.string)(C.toUpperCase())).onLangString1(()=>C=>(0,b.langString)(C.typedValue.toUpperCase(),C.language)).collect()},R={arity:1,overloads:(0,b.declare)(l.RegularOperator.LCASE).onString1Typed(()=>C=>(0,b.string)(C.toLowerCase())).onLangString1(()=>C=>(0,b.langString)(C.typedValue.toLowerCase(),C.language)).collect()},T={arity:2,overloads:(0,b.declare)(l.RegularOperator.STRSTARTS).onBinaryTyped([c.TypeAlias.SPARQL_STRINGLY,c.TypeURL.XSD_STRING],()=>(C,ee)=>(0,b.bool)(C.startsWith(ee))).onBinary([c.TypeURL.RDF_LANG_STRING,c.TypeURL.RDF_LANG_STRING],()=>(C,ee)=>{if(C.language!==ee.language)throw new h.IncompatibleLanguageOperation(C,ee);return(0,b.bool)(C.typedValue.startsWith(ee.typedValue))}).collect()},x={arity:2,overloads:(0,b.declare)(l.RegularOperator.STRENDS).onBinaryTyped([c.TypeAlias.SPARQL_STRINGLY,c.TypeURL.XSD_STRING],()=>(C,ee)=>(0,b.bool)(C.endsWith(ee))).onBinary([c.TypeURL.RDF_LANG_STRING,c.TypeURL.RDF_LANG_STRING],()=>(C,ee)=>{if(C.language!==ee.language)throw new h.IncompatibleLanguageOperation(C,ee);return(0,b.bool)(C.typedValue.endsWith(ee.typedValue))}).collect()},B={arity:2,overloads:(0,b.declare)(l.RegularOperator.CONTAINS).onBinaryTyped([c.TypeAlias.SPARQL_STRINGLY,c.TypeURL.XSD_STRING],()=>(C,ee)=>(0,b.bool)(C.includes(ee))).onBinary([c.TypeURL.RDF_LANG_STRING,c.TypeURL.RDF_LANG_STRING],()=>(C,ee)=>{if(C.language!==ee.language)throw new h.IncompatibleLanguageOperation(C,ee);return(0,b.bool)(C.typedValue.includes(ee.typedValue))}).collect()},k={arity:2,overloads:(0,b.declare)(l.RegularOperator.STRBEFORE).onBinaryTyped([c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING],()=>(C,ee)=>(0,b.string)(C.slice(0,Math.max(0,C.indexOf(ee))))).onBinary([c.TypeURL.RDF_LANG_STRING,c.TypeURL.XSD_STRING],()=>(C,ee)=>{const[ye,Pe]=[C.typedValue,ee.typedValue],Ue=C.typedValue.slice(0,Math.max(0,ye.indexOf(Pe)));return Ue||!Pe?(0,b.langString)(Ue,C.language):(0,b.string)(Ue)}).onBinary([c.TypeURL.RDF_LANG_STRING,c.TypeURL.RDF_LANG_STRING],()=>(C,ee)=>{if(C.language!==ee.language)throw new h.IncompatibleLanguageOperation(C,ee);const[ye,Pe]=[C.typedValue,ee.typedValue],Ue=C.typedValue.slice(0,Math.max(0,ye.indexOf(Pe)));return Ue||!Pe?(0,b.langString)(Ue,C.language):(0,b.string)(Ue)}).collect()},V={arity:2,overloads:(0,b.declare)(l.RegularOperator.STRAFTER).onBinaryTyped([c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING],()=>(C,ee)=>(0,b.string)(C.slice(C.indexOf(ee)).slice(ee.length))).onBinary([c.TypeURL.RDF_LANG_STRING,c.TypeURL.XSD_STRING],()=>(C,ee)=>{const[ye,Pe]=[C.typedValue,ee.typedValue],Ue=ye.slice(ye.indexOf(Pe)).slice(Pe.length);return Ue||!Pe?(0,b.langString)(Ue,C.language):(0,b.string)(Ue)}).onBinary([c.TypeURL.RDF_LANG_STRING,c.TypeURL.RDF_LANG_STRING],()=>(C,ee)=>{if(C.language!==ee.language)throw new h.IncompatibleLanguageOperation(C,ee);const[ye,Pe]=[C.typedValue,ee.typedValue],Ue=ye.slice(ye.indexOf(Pe)).slice(Pe.length);return Ue||!Pe?(0,b.langString)(Ue,C.language):(0,b.string)(Ue)}).collect()},J={arity:1,overloads:(0,b.declare)(l.RegularOperator.ENCODE_FOR_URI).onStringly1Typed(()=>C=>(0,b.string)(encodeURI(C))).collect()},z={arity:2,overloads:(0,b.declare)(l.RegularOperator.LANG_MATCHES).onBinaryTyped([c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING],()=>(C,ee)=>(0,b.bool)(g.langMatches(C,ee))).collect()};function Y(){return(C,ee)=>(0,b.bool)(g.matches(C,ee))}function re(){return(C,ee,ye)=>(0,b.bool)(g.matches(C,ee,ye))}const ce={arity:[2,3],overloads:(0,b.declare)(l.RegularOperator.REGEX).onBinaryTyped([c.TypeAlias.SPARQL_STRINGLY,c.TypeURL.XSD_STRING],Y).onTernaryTyped([c.TypeAlias.SPARQL_STRINGLY,c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING],re).collect()},Te={arity:[3,4],overloads:(0,b.declare)(l.RegularOperator.REPLACE).onTernaryTyped([c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING],()=>(C,ee,ye)=>(0,b.string)(g.replace(C,ee,ye))).set([c.TypeURL.RDF_LANG_STRING,c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING],()=>([C,ee,ye])=>{const Pe=g.replace(C.typedValue,ee.typedValue,ye.typedValue);return(0,b.langString)(Pe,C.language)}).onQuaternaryTyped([c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING],()=>(C,ee,ye,Pe)=>(0,b.string)(g.replace(C,ee,ye,Pe))).set([c.TypeURL.RDF_LANG_STRING,c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING,c.TypeURL.XSD_STRING],()=>([C,ee,ye,Pe])=>{const Ue=g.replace(C.typedValue,ee.typedValue,ye.typedValue,Pe.typedValue);return(0,b.langString)(Ue,C.language)}).collect()},xe={arity:1,overloads:(0,b.declare)(l.RegularOperator.ABS).numericConverter(()=>C=>Math.abs(C)).collect()},Le={arity:1,overloads:(0,b.declare)(l.RegularOperator.ROUND).numericConverter(()=>C=>Math.round(C)).collect()},qe={arity:1,overloads:(0,b.declare)(l.RegularOperator.CEIL).numericConverter(()=>C=>Math.ceil(C)).collect()},G={arity:1,overloads:(0,b.declare)(l.RegularOperator.FLOOR).numericConverter(()=>C=>Math.floor(C)).collect()},F={arity:0,overloads:(0,b.declare)(l.RegularOperator.RAND).set([],()=>()=>(0,b.double)(Math.random())).collect()},Q={arity:0,overloads:(0,b.declare)(l.RegularOperator.NOW).set([],C=>()=>new a.DateTimeLiteral((0,d.toDateTimeRepresentation)({date:C.now,timeZone:C.defaultTimeZone}))).collect()},te={arity:1,overloads:(0,b.declare)(l.RegularOperator.YEAR).onDateTime1(()=>C=>(0,b.integer)(C.typedValue.year)).set([c.TypeURL.XSD_DATE],()=>([C])=>(0,b.integer)(C.typedValue.year)).collect()},me={arity:1,overloads:(0,b.declare)(l.RegularOperator.MONTH).onDateTime1(()=>C=>(0,b.integer)(C.typedValue.month)).set([c.TypeURL.XSD_DATE],()=>([C])=>(0,b.integer)(C.typedValue.month)).collect()},Oe={arity:1,overloads:(0,b.declare)(l.RegularOperator.DAY).onDateTime1(()=>C=>(0,b.integer)(C.typedValue.day)).set([c.TypeURL.XSD_DATE],()=>([C])=>(0,b.integer)(C.typedValue.day)).collect()},Ne={arity:1,overloads:(0,b.declare)(l.RegularOperator.HOURS).onDateTime1(()=>C=>(0,b.integer)(C.typedValue.hours)).set([c.TypeURL.XSD_TIME],()=>([C])=>(0,b.integer)(C.typedValue.hours)).collect()},We={arity:1,overloads:(0,b.declare)(l.RegularOperator.MINUTES).onDateTime1(()=>C=>(0,b.integer)(C.typedValue.minutes)).set([c.TypeURL.XSD_TIME],()=>([C])=>(0,b.integer)(C.typedValue.minutes)).collect()},Ve={arity:1,overloads:(0,b.declare)(l.RegularOperator.SECONDS).onDateTime1(()=>C=>(0,b.decimal)(C.typedValue.seconds)).set([c.TypeURL.XSD_TIME],()=>([C])=>(0,b.integer)(C.typedValue.seconds)).collect()},pe={arity:1,overloads:(0,b.declare)(l.RegularOperator.TIMEZONE).onDateTime1(()=>C=>{const ee={hours:C.typedValue.zoneHours,minutes:C.typedValue.zoneMinutes};if(ee.hours===void 0&&ee.minutes===void 0)throw new h.InvalidTimezoneCall(C.str());return new a.DayTimeDurationLiteral(ee)}).copy({from:[c.TypeURL.XSD_DATE_TIME],to:[c.TypeURL.XSD_DATE]}).copy({from:[c.TypeURL.XSD_DATE_TIME],to:[c.TypeURL.XSD_TIME]}).collect()},we={arity:1,overloads:(0,b.declare)(l.RegularOperator.TZ).onDateTime1(()=>C=>(0,b.string)((0,d.extractRawTimeZone)(C.str()))).copy({from:[c.TypeURL.XSD_DATE_TIME],to:[c.TypeURL.XSD_DATE]}).copy({from:[c.TypeURL.XSD_DATE_TIME],to:[c.TypeURL.XSD_TIME]}).collect()},W={arity:1,overloads:(0,b.declare)(l.RegularOperator.MD5).onString1Typed(()=>C=>(0,b.string)((0,n.hash)(C))).collect()},Se={arity:1,overloads:(0,b.declare)(l.RegularOperator.SHA1).onString1Typed(()=>C=>(0,b.string)((0,e.sha1)().update(C).digest("hex"))).collect()},Ae={arity:1,overloads:(0,b.declare)(l.RegularOperator.SHA256).onString1Typed(()=>C=>(0,b.string)((0,e.sha256)().update(C).digest("hex"))).collect()},je={arity:1,overloads:(0,b.declare)(l.RegularOperator.SHA384).onString1Typed(()=>C=>(0,b.string)((0,e.sha384)().update(C).digest("hex"))).collect()},He={arity:1,overloads:(0,b.declare)(l.RegularOperator.SHA512).onString1Typed(()=>C=>(0,b.string)((0,e.sha512)().update(C).digest("hex"))).collect()},Ge={arity:3,overloads:(0,b.declare)(l.RegularOperator.TRIPLE).onTerm3(C=>(...ee)=>new a.Quad(v.quad(ee[0].toRDF(),ee[1].toRDF(),ee[2].toRDF()),C.superTypeProvider)).collect()},tt={arity:1,overloads:(0,b.declare)(l.RegularOperator.SUBJECT).onQuad1(()=>C=>C.subject).collect()},lt={arity:1,overloads:(0,b.declare)(l.RegularOperator.PREDICATE).onQuad1(()=>C=>C.predicate).collect()},ut={arity:1,overloads:(0,b.declare)(l.RegularOperator.OBJECT).onQuad1(()=>C=>C.object).collect()},oe={arity:1,overloads:(0,b.declare)(l.RegularOperator.IS_TRIPLE).onTerm1(()=>C=>(0,b.bool)(C.termType==="quad")).collect()};return up.definitions={"!":_,uplus:w,uminus:S,"*":A,"/":D,"+":L,"-":O,"=":E,"!=":M,"<":U,">":j,"<=":q,">=":$,isiri:Z,isuri:Z,isblank:X,isliteral:le,isnumeric:K,str:he,lang:Re,datatype:ie,iri:ae,uri:ae,strdt:Ee,strlang:De,uuid:ge,struuid:de,strlen:fe,substr:H,ucase:N,lcase:R,strstarts:T,strends:x,contains:B,strbefore:k,strafter:V,encode_for_uri:J,langmatches:z,regex:ce,replace:Te,abs:xe,round:Le,ceil:qe,floor:G,rand:F,now:Q,year:te,month:me,day:Oe,hours:Ne,minutes:We,seconds:Ve,timezone:pe,tz:we,md5:W,sha1:Se,sha256:Ae,sha384:je,sha512:He,triple:Ge,subject:tt,predicate:lt,object:ut,istriple:oe},up}var Sp={},tL;function Xee(){if(tL)return Sp;tL=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.specialDefinitions=void 0;const t=wB(),e=Kn(),u=Nn(),s=on(),n=Yi(),r=cu(),a={arity:1,async applyAsync({args:D,mapping:L}){return o({args:D,mapping:L})},applySynchronously({args:D,mapping:L}){return o({args:D,mapping:L})}};function o({args:D,mapping:L}){const O=D[0];if(O.expressionType!==e.ExpressionType.Variable)throw new s.InvalidArgumentTypes(D,u.SpecialOperator.BOUND);const E=L.has((0,n.expressionToVar)(O));return(0,n.bool)(E)}const l={arity:3,async applyAsync({args:D,mapping:L,evaluate:O}){const P=(await O(D[0],L)).coerceEBV();return O(P?D[1]:D[2],L)},applySynchronously({args:D,mapping:L,evaluate:O}){const P=O(D[0],L).coerceEBV();return O(P?D[1]:D[2],L)}},c={arity:Number.POSITIVE_INFINITY,async applyAsync({args:D,mapping:L,evaluate:O}){const E=[];for(const P of D)try{return await O(P,L)}catch(M){E.push(M)}throw new s.CoalesceError(E)},applySynchronously({args:D,mapping:L,evaluate:O}){const E=[];for(const P of D)try{return O(P,L)}catch(M){E.push(M)}throw new s.CoalesceError(E)}},d={arity:2,async applyAsync({args:D,mapping:L,evaluate:O}){const[E,P]=D;try{if((await O(E,L)).coerceEBV())return(0,n.bool)(!0);const q=(await O(P,L)).coerceEBV();return(0,n.bool)(q)}catch(M){if(!(await O(P,L)).coerceEBV())throw M;return(0,n.bool)(!0)}},applySynchronously({args:D,mapping:L,evaluate:O}){const[E,P]=D;try{if(O(E,L).coerceEBV())return(0,n.bool)(!0);const q=O(P,L).coerceEBV();return(0,n.bool)(q)}catch(M){if(!O(P,L).coerceEBV())throw M;return(0,n.bool)(!0)}}},h={arity:2,async applyAsync({args:D,mapping:L,evaluate:O}){const[E,P]=D;try{if(!(await O(E,L)).coerceEBV())return(0,n.bool)(!1);const q=(await O(P,L)).coerceEBV();return(0,n.bool)(q)}catch(M){if((await O(P,L)).coerceEBV())throw M;return(0,n.bool)(!1)}},applySynchronously({args:D,mapping:L,evaluate:O}){const[E,P]=D;try{if(!O(E,L).coerceEBV())return(0,n.bool)(!1);const q=O(P,L).coerceEBV();return(0,n.bool)(q)}catch(M){if(O(P,L).coerceEBV())throw M;return(0,n.bool)(!1)}}},f={arity:2,async applyAsync({args:D,mapping:L,evaluate:O}){const[E,P]=D.map(j=>O(j,L)),[M,U]=await Promise.all([E,P]);return(0,n.bool)(M.toRDF().equals(U.toRDF()))},applySynchronously({args:D,mapping:L,evaluate:O}){const[E,P]=D.map(M=>O(M,L));return(0,n.bool)(E.toRDF().equals(P.toRDF()))}},p={arity:Number.POSITIVE_INFINITY,checkArity(D){return D.length>0},async applyAsync(D){const{args:L,mapping:O,evaluate:E}=D,[P,...M]=L,U=await E(P,O);return y(U,{...D,args:M},[])},applySynchronously(D){const{args:L,mapping:O,evaluate:E}=D,[P,...M]=L,U=E(P,O);return b(U,{...D,args:M},[])}};async function y(D,L,O){const{args:E,mapping:P,evaluate:M}=L;if(E.length===0)return O.every(j=>!j)?(0,n.bool)(!1):Promise.reject(new s.InError(O));try{const U=E.shift(),j=await M(U,P);return r.regularFunctions[u.RegularOperator.EQUAL].apply([D,j],L).typedValue?(0,n.bool)(!0):y(D,L,[...O,!1])}catch(U){return y(D,L,[...O,U])}}function b(D,L,O){const{args:E,mapping:P,evaluate:M}=L;if(E.length===0){if(O.every(j=>!j))return(0,n.bool)(!1);throw new s.InError(O)}try{const U=E.shift(),j=M(U,P);return r.regularFunctions[u.RegularOperator.EQUAL].apply([D,j],L).typedValue?(0,n.bool)(!0):b(D,L,[...O,!1])}catch(U){return b(D,L,[...O,U])}}const g={arity:Number.POSITIVE_INFINITY,checkArity(D){return D.length>0},async applyAsync(D){const O=await r.specialFunctions[u.SpecialOperator.IN].applyAsync(D);return(0,n.bool)(!O.typedValue)},applySynchronously(D){const O=r.specialFunctions[u.SpecialOperator.IN].applySynchronously(D);return(0,n.bool)(!O.typedValue)}},m=(0,n.declare)(u.SpecialOperator.CONCAT).onStringly1(()=>D=>D).collect(),v={arity:Number.POSITIVE_INFINITY,async applyAsync(D){const{args:L,mapping:O,evaluate:E,functionArgumentsCache:P,superTypeProvider:M}=D,U=L.map(async X=>E(X,O)).map(async X=>{const le=m.search([await X],M,P);if(!le)throw new s.InvalidArgumentTypes(L,u.SpecialOperator.CONCAT);return le(D)([await X])}),j=await Promise.all(U),$=j.map(X=>X.typedValue).join(""),Z=_(j)?j[0].language:void 0;return Z?(0,n.langString)($,Z):(0,n.string)($)},applySynchronously(D){const{args:L,mapping:O,evaluate:E,superTypeProvider:P,functionArgumentsCache:M}=D,U=L.map(Z=>E(Z,O)).map(Z=>{const X=m.search([Z],P,M);if(!X)throw new s.InvalidArgumentTypes(L,u.SpecialOperator.CONCAT);return X(D)([Z])}),q=U.map(Z=>Z.typedValue).join(""),$=_(U)?U[0].language:void 0;return $?(0,n.langString)(q,$):(0,n.string)(q)}};function _(D){return D.length>0&&D.every(L=>L.language===D[0].language)}const w=(0,n.declare)(u.SpecialOperator.BNODE).onString1(()=>D=>D).collect(),S={arity:Number.POSITIVE_INFINITY,checkArity(D){return D.length===0||D.length===1},async applyAsync(D){const{args:L,mapping:O,evaluate:E,superTypeProvider:P,functionArgumentsCache:M}=D,U=L.length===1?await E(L[0],O):void 0;let j;if(U){const q=w.search([U],P,M);if(!q)throw new s.InvalidArgumentTypes(L,u.SpecialOperator.BNODE);j=q(D)([U]).str()}if(D.bnode){const q=await D.bnode(j);return new e.BlankNode(q)}return A(j)},applySynchronously(D){const{args:L,mapping:O,evaluate:E,superTypeProvider:P,functionArgumentsCache:M}=D,U=L.length===1?E(L[0],O):void 0;let j;if(U){const q=w.search([U],P,M);if(!q)throw new s.InvalidArgumentTypes(L,u.SpecialOperator.BNODE);j=q(D)([U]).str()}if(D.bnode){const q=D.bnode(j);return new e.BlankNode(q)}return A(j)}};function A(D){return new e.BlankNode(D??t.v4())}return Sp.specialDefinitions={bound:a,if:l,coalesce:c,"&&":h,"||":d,sameterm:f,in:p,notin:g,concat:v,bnode:S},Sp}var rL;function cu(){return rL||(rL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(l,c,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(c,d);(!f||("get"in f?!c.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return c[d]}}),Object.defineProperty(l,h,f)}:function(l,c,d,h){h===void 0&&(h=d),l[h]=c[d]}),u=I&&I.__exportStar||function(l,c){for(var d in l)d!=="default"&&!Object.prototype.hasOwnProperty.call(c,d)&&e(c,l,d)};Object.defineProperty(t,"__esModule",{value:!0}),t.OverloadTree=t.namedFunctions=t.specialFunctions=t.regularFunctions=void 0;const s=N3(),n=Lee(),r=Jee(),a=Xee();u(N3(),t),t.regularFunctions=Object.fromEntries(Object.entries(r.definitions).map(([l,c])=>[l,new s.RegularFunction(l,c)])),t.specialFunctions=Object.fromEntries(Object.entries(a.specialDefinitions).map(([l,c])=>[l,new s.SpecialFunction(l,c)])),t.namedFunctions=Object.fromEntries(Object.entries(n.namedDefinitions).map(([l,c])=>[l,new s.NamedFunction(l,c)]));var o=mB();Object.defineProperty(t,"OverloadTree",{enumerable:!0,get:function(){return o.OverloadTree}})}(fS)),fS}var nL;function SB(){if(nL)return Xh;nL=1,Object.defineProperty(Xh,"__esModule",{value:!0}),Xh.AlgebraTransformer=void 0;const t=Ot(),e=Kn(),u=cu(),s=Nn(),n=on(),r=on(),a=no();let o=class L0 extends a.TermTransformer{constructor(c){super(c.superTypeProvider),this.algebraConfig=c,this.creatorConfig={type:c.type,creator:c.creator}}transformAlgebra(c){const d=t.Algebra.expressionTypes;switch(c.expressionType){case d.TERM:return this.transformTerm(c);case d.OPERATOR:return this.transformOperator(c);case d.NAMED:return this.transformNamed(c);case d.EXISTENCE:return L0.transformExistence(c);case d.AGGREGATE:return L0.transformAggregate(c);case d.WILDCARD:return L0.transformWildcard(c)}}static transformWildcard(c){return new e.NamedNode(c.wildcard.value)}transformOperator(c){const d=c.operator.toLowerCase();if(s.SpecialOperators.has(d)){const y=d,b=c.args.map(m=>this.transformAlgebra(m)),g=u.specialFunctions[y];if(!g.checkArity(b))throw new n.InvalidArity(b,y);return new e.SpecialOperator(b,g.applyAsync,g.applySynchronously)}if(!s.Operators.has(d))throw new n.UnknownOperator(c.operator);const h=d,f=c.args.map(y=>this.transformAlgebra(y)),p=u.regularFunctions[h];if(!L0.hasCorrectArity(f,p.arity))throw new n.InvalidArity(f,h);return new e.Operator(f,y=>p.apply(y,this.algebraConfig))}wrapSyncFunction(c,d){return h=>{try{const f=c(h.map(p=>p.toRDF()));return this.transformRDFTermUnsafe(f)}catch(f){throw new r.ExtensionFunctionError(d,f)}}}wrapAsyncFunction(c,d){return async h=>{try{const f=await c(h.map(p=>p.toRDF()));return this.transformRDFTermUnsafe(f)}catch(f){throw new r.ExtensionFunctionError(d,f)}}}transformNamed(c){const d=c.name.value,h=c.args.map(f=>this.transformAlgebra(f));if(s.NamedOperators.has(d)){const f=c.name.value,p=u.namedFunctions[f];return new e.Named(c.name,h,y=>p.apply(y,this.algebraConfig))}if(this.creatorConfig.type==="sync"){const f=this.creatorConfig.creator(c.name);if(f){const p=this.wrapSyncFunction(f,c.name.value);return new e.SyncExtension(c.name,h,p)}}else{const f=this.creatorConfig.creator(c.name);if(f){const p=this.wrapAsyncFunction(f,c.name.value);return new e.AsyncExtension(c.name,h,p)}}throw new n.UnknownNamedOperator(c.name.value)}static hasCorrectArity(c,d){return Array.isArray(d)?d.includes(c.length):c.length===d}static transformAggregate(c){const d=c.aggregator;return new e.Aggregate(d,c)}static transformExistence(c){return new e.Existence(c)}};return Xh.AlgebraTransformer=o,Xh}var Tp={},Ap={},iL;function TB(){if(iL)return Ap;iL=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.BaseExpressionEvaluator=void 0;const t=Yi(),e=on();let u=class{constructor(n){this.termTransformer=n}term(n){return n}variable(n,r){const a=r.get((0,t.expressionToVar)(n));if(!a)throw new e.UnboundVariableError(n.name,r);return this.termTransformer.transformRDFTermUnsafe(a)}};return Ap.BaseExpressionEvaluator=u,Ap}var aL;function Kee(){if(aL)return Tp;aL=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.AsyncRecursiveEvaluator=void 0;const t=Kn(),e=no(),u=on(),s=TB();let n=class extends s.BaseExpressionEvaluator{constructor(a,o){super(o??new e.TermTransformer(a.superTypeProvider)),this.context=a,this.subEvaluators={[t.ExpressionType.Term]:(l,c)=>this.term(l),[t.ExpressionType.Variable]:(l,c)=>this.variable(l,c),[t.ExpressionType.Operator]:(l,c)=>this.evalOperator(l,c),[t.ExpressionType.SpecialOperator]:(l,c)=>this.evalSpecialOperator(l,c),[t.ExpressionType.Named]:(l,c)=>this.evalNamed(l,c),[t.ExpressionType.Existence]:(l,c)=>this.evalExistence(l,c),[t.ExpressionType.Aggregate]:(l,c)=>this.evalAggregate(l),[t.ExpressionType.AsyncExtension]:(l,c)=>this.evalAsyncExtension(l,c)}}async evaluate(a,o){const l=this.subEvaluators[a.expressionType];if(!l)throw new u.InvalidExpressionType(a);return l.bind(this)(a,o)}async evalOperator(a,o){const l=a.args.map(d=>this.evaluate(d,o)),c=await Promise.all(l);return a.apply(c)}async evalSpecialOperator(a,o){const l=this.evaluate.bind(this),c={args:a.args,mapping:o,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,functionArgumentsCache:this.context.functionArgumentsCache,evaluate:l,bnode:this.context.bnode,defaultTimeZone:this.context.defaultTimeZone};return a.applyAsync(c)}async _evalAsyncArgs(a,o){const l=a.map(c=>this.evaluate(c,o));return await Promise.all(l)}async evalNamed(a,o){return a.apply(await this._evalAsyncArgs(a.args,o))}async evalAsyncExtension(a,o){return await a.apply(await this._evalAsyncArgs(a.args,o))}async evalExistence(a,o){if(!this.context.exists)throw new u.NoExistenceHook;return new t.BooleanLiteral(await this.context.exists(a.expression,o))}async evalAggregate(a){if(!this.context.aggregate)throw new u.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(await this.context.aggregate(a.expression))}};return Tp.AsyncRecursiveEvaluator=n,Tp}var sL;function EB(){if(sL)return Jh;sL=1,Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.AsyncEvaluator=void 0;const t=os(),e=SB(),u=uu(),s=Kee();let n=class AB{static completeContext(a){const o=a.now??new Date(Date.now());return{now:o,baseIRI:a.baseIRI??void 0,functionArgumentsCache:a.functionArgumentsCache??{},superTypeProvider:{cache:a.typeCache??new t.LRUCache({max:1e3}),discoverer:a.getSuperType??(()=>"term")},extensionFunctionCreator:a.extensionFunctionCreator,exists:a.exists,aggregate:a.aggregate,bnode:a.bnode,defaultTimeZone:a.defaultTimeZone??(0,u.extractTimeZone)(o)}}constructor(a,o={}){this.algExpr=a;const l=o.extensionFunctionCreator??(()=>{}),c=AB.completeContext(o),d=new e.AlgebraTransformer({type:"async",creator:l,...c});this.expr=d.transformAlgebra(a),this.evaluator=new s.AsyncRecursiveEvaluator(c,d)}async evaluate(a){return(await this.evaluator.evaluate(this.expr,a)).toRDF()}async evaluateAsEBV(a){return(await this.evaluator.evaluate(this.expr,a)).coerceEBV()}async evaluateAsInternal(a){return await this.evaluator.evaluate(this.expr,a)}};return Jh.AsyncEvaluator=n,Jh}var Ep={},Op={},oL;function Yee(){if(oL)return Op;oL=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.SyncRecursiveEvaluator=void 0;const t=Kn(),e=no(),u=on(),s=TB();let n=class extends s.BaseExpressionEvaluator{constructor(a,o){super(o??new e.TermTransformer(a.superTypeProvider)),this.context=a,this.subEvaluators={[t.ExpressionType.Term]:(l,c)=>this.term(l),[t.ExpressionType.Variable]:(l,c)=>this.variable(l,c),[t.ExpressionType.Operator]:(l,c)=>this.evalOperator(l,c),[t.ExpressionType.SpecialOperator]:(l,c)=>this.evalSpecialOperator(l,c),[t.ExpressionType.Named]:(l,c)=>this.evalNamed(l,c),[t.ExpressionType.Existence]:(l,c)=>this.evalExistence(l,c),[t.ExpressionType.Aggregate]:(l,c)=>this.evalAggregate(l),[t.ExpressionType.SyncExtension]:(l,c)=>this.evalSyncExtension(l,c)}}evaluate(a,o){const l=this.subEvaluators[a.expressionType];if(!l)throw new u.InvalidExpressionType(a);return l.bind(this)(a,o)}evalOperator(a,o){const l=a.args.map(c=>this.evaluate(c,o));return a.apply(l)}evalSpecialOperator(a,o){const l=this.evaluate.bind(this),c={args:a.args,mapping:o,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,functionArgumentsCache:this.context.functionArgumentsCache,evaluate:l,bnode:this.context.bnode,defaultTimeZone:this.context.defaultTimeZone};return a.applySynchronously(c)}evalNamed(a,o){const l=a.args.map(c=>this.evaluate(c,o));return a.apply(l)}evalSyncExtension(a,o){const l=a.args.map(c=>this.evaluate(c,o));return a.apply(l)}evalExistence(a,o){if(!this.context.exists)throw new u.NoExistenceHook;return new t.BooleanLiteral(this.context.exists(a.expression,o))}evalAggregate(a){if(!this.context.aggregate)throw new u.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(this.context.aggregate(a.expression))}};return Op.SyncRecursiveEvaluator=n,Op}var uL;function RB(){if(uL)return Ep;uL=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.SyncEvaluator=void 0;const t=os(),e=SB(),u=uu(),s=Yee();let n=class OB{static completeContext(a){const o=a.now??new Date(Date.now());return{now:o,baseIRI:a.baseIRI??void 0,functionArgumentsCache:a.functionArgumentsCache??{},superTypeProvider:{cache:a.typeCache??new t.LRUCache({max:1e3}),discoverer:a.getSuperType??(()=>"term")},extensionFunctionCreator:a.extensionFunctionCreator,exists:a.exists,aggregate:a.aggregate,bnode:a.bnode,defaultTimeZone:a.defaultTimeZone??(0,u.extractTimeZone)(o)}}constructor(a,o={}){this.algExpr=a,this.context=o;const l=o.extensionFunctionCreator??(()=>{}),c=OB.completeContext(o),d=new e.AlgebraTransformer({type:"sync",creator:l,...c});this.expr=d.transformAlgebra(a),this.evaluator=new s.SyncRecursiveEvaluator(c,d)}evaluate(a){return this.evaluator.evaluate(this.expr,a).toRDF()}evaluateAsEBV(a){return this.evaluator.evaluate(this.expr,a).coerceEBV()}evaluateAsInternal(a){return this.evaluator.evaluate(this.expr,a)}};return Ep.SyncEvaluator=n,Ep}var Rp={},xp={},Ip={},Pp={},Ns={},cL;function cs(){if(cL)return Ns;cL=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.Aggregator=Ns.AggregatorComponent=void 0;const t=Xt(),e=no(),u=Nn(),s=am();class n{static emptyValue(){}constructor(o,l){this.sharedContext=l,this.separator=o.separator||" ",this.termTransformer=new e.TermTransformer(l.superTypeProvider)}termToNumericOrError(o){if(o.termType!=="Literal")throw new Error(`Term with value ${o.value} has type ${o.termType} and is not a numeric literal`);if(!(0,s.isSubTypeOf)(o.datatype.value,u.TypeAlias.SPARQL_NUMERIC,this.sharedContext.superTypeProvider))throw new Error(`Term datatype ${o.datatype.value} with value ${o.value} has type ${o.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(o)}}Ns.AggregatorComponent=n;let r=class{constructor(o,l){this.aggregatorComponent=l,this.variableValues=new Map,this.distinct=o.distinct}static emptyValue(o){return o.emptyValue()}result(){return this.aggregatorComponent.result()}put(o,l=""){this.canSkip(o,l)||(this.aggregatorComponent.put(o),this.addSeen(o,l))}canSkip(o,l){const c=this.variableValues.get(l);return this.distinct&&c!==void 0&&c.has(t.termToString(o))}addSeen(o,l){this.distinct&&(this.variableValues.has(l)||this.variableValues.set(l,new Set),this.variableValues.get(l).add(t.termToString(o)))}};return Ns.Aggregator=r,Ns}var lL;function Zee(){if(lL)return Pp;lL=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.Average=void 0;const t=Kn(),e=cu(),u=Yi(),s=Nn(),n=cs();let r=class xB extends n.AggregatorComponent{constructor(){super(...arguments),this.summer=e.regularFunctions[s.RegularOperator.ADDITION],this.divider=e.regularFunctions[s.RegularOperator.DIVISION],this.state=void 0}static emptyValue(){return(0,u.integer)(0).toRDF()}put(o){if(this.state===void 0){const l=this.termToNumericOrError(o);this.state={sum:l,count:1}}else{const l=this.termToNumericOrError(o);this.state.sum=this.summer.apply([this.state.sum,l],this.sharedContext),this.state.count++}}result(){if(this.state===void 0)return xB.emptyValue();const o=new t.IntegerLiteral(this.state.count);return this.divider.apply([this.state.sum,o],this.sharedContext).toRDF()}};return Pp.Average=r,Pp}var Dp={},dL;function ete(){if(dL)return Dp;dL=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.Count=void 0;const t=Yi(),e=cs();let u=class IB extends e.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}static emptyValue(){return(0,t.integer)(0).toRDF()}put(){this.state===void 0&&(this.state=0),this.state++}result(){return this.state===void 0?IB.emptyValue():(0,t.integer)(this.state).toRDF()}};return Dp.Count=u,Dp}var Np={},fL;function tte(){if(fL)return Np;fL=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.GroupConcat=void 0;const t=Yi(),e=cs();let u=class PB extends e.AggregatorComponent{constructor(){super(...arguments),this.state=void 0,this.lastLanguageValid=!0,this.lastLanguage=void 0}static emptyValue(){return(0,t.string)("").toRDF()}put(n){this.state===void 0?(this.state=n.value,n.termType==="Literal"&&(this.lastLanguage=n.language)):(this.state+=this.separator+n.value,this.lastLanguageValid&&n.termType==="Literal"&&this.lastLanguage!==n.language&&(this.lastLanguageValid=!1,this.lastLanguage=void 0))}result(){return this.state===void 0?PB.emptyValue():this.lastLanguageValid&&this.lastLanguage?(0,t.langString)(this.state,this.lastLanguage).toRDF():(0,t.string)(this.state).toRDF()}};return Np.GroupConcat=u,Np}var Cp={},hL;function rte(){if(hL)return Cp;hL=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.Max=void 0;const t=um(),e=cs();let u=class DB extends e.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}put(n){if(n.termType!=="Literal")throw new Error(`Term with value ${n.value} has type ${n.termType} and is not a literal`);this.state===void 0?this.state=n:(0,t.orderTypes)(this.state,n)===-1&&(this.state=n)}result(){return this.state===void 0?DB.emptyValue():this.state}};return Cp.Max=u,Cp}var jp={},pL;function nte(){if(pL)return jp;pL=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.Min=void 0;const t=um(),e=cs();let u=class NB extends e.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}put(n){if(n.termType!=="Literal")throw new Error(`Term with value ${n.value} has type ${n.termType} and is not a literal`);this.state===void 0?this.state=n:(0,t.orderTypes)(this.state,n)===1&&(this.state=n)}result(){return this.state===void 0?NB.emptyValue():this.state}};return jp.Min=u,jp}var Lp={},yL;function ite(){if(yL)return Lp;yL=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.Sample=void 0;const t=cs();let e=class CB extends t.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}put(s){this.state===void 0&&(this.state=s)}result(){return this.state===void 0?CB.emptyValue():this.state}};return Lp.Sample=e,Lp}var Mp={},bL;function ate(){if(bL)return Mp;bL=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.Sum=void 0;const t=cu(),e=Yi(),u=Nn(),s=cs();let n=class jB extends s.AggregatorComponent{constructor(){super(...arguments),this.state=void 0,this.summer=t.regularFunctions[u.RegularOperator.ADDITION]}static emptyValue(){return(0,e.integer)(0).toRDF()}put(a){if(this.state===void 0)this.state=this.termToNumericOrError(a);else{const o=this.termToNumericOrError(a);this.state=this.summer.apply([this.state,o],this.sharedContext)}}result(){return this.state===void 0?jB.emptyValue():this.state.toRDF()}};return Mp.Sum=n,Mp}var mL;function ste(){if(mL)return Ip;mL=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.aggregators=void 0;const t=Zee(),e=ete(),u=tte(),s=rte(),n=nte(),r=ite(),a=ate();return Ip.aggregators={count:e.Count,sum:a.Sum,min:n.Min,max:s.Max,avg:t.Average,group_concat:u.GroupConcat,sample:r.Sample},Ip}var Fp={},gL;function ote(){if(gL)return Fp;gL=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.WildcardCountAggregator=void 0;const t=Xt(),e=Yi();let u=class{constructor(n){this.bindingValues=new Map,this.counter=0,this.distinct=n.distinct}putBindings(n){this.handleDistinct(n)||(this.counter+=1)}static emptyValue(){return(0,e.integer)(0).toRDF()}result(){return(0,e.integer)(this.counter).toRDF()}handleDistinct(n){if(this.distinct){const r=[...n];r.sort((d,h)=>d[0].value.localeCompare(h[0].value));const a=r.map(([d])=>d.value).join(","),o=r.map(([,d])=>t.termToString(d)).join(","),l=this.bindingValues.get(a),c=l!==void 0&&l.has(o);return l||this.bindingValues.set(a,new Set),this.bindingValues.get(a).add(o),c}return!1}};return Fp.WildcardCountAggregator=u,Fp}var _L;function LB(){if(_L)return xp;_L=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.BaseAggregateEvaluator=void 0;const t=Ot(),e=ste(),u=cs(),s=ote(),n=on();let r=class{constructor(o,l,c){this.throwError=!1,this.isWildcard=!1,this.errorOccurred=!1,this.expression=o,this.aggregator=new u.Aggregator(o,new e.aggregators[o.aggregator](o,l)),this.throwError=c??!1,this.isWildcard=o.expression.expressionType===t.Algebra.expressionTypes.WILDCARD,this.isWildcard&&(this.wildcardAggregator=new s.WildcardCountAggregator(o))}static emptyValue(o,l=!1){let c;if(o.expression.expressionType===t.Algebra.expressionTypes.WILDCARD?c=s.WildcardCountAggregator.emptyValue():c=u.Aggregator.emptyValue(e.aggregators[o.aggregator]),c===void 0&&l)throw new n.EmptyAggregateError;return c}result(){if(!this.errorOccurred)return this.isWildcard?this.wildcardAggregator.result():this.aggregator.result()}};return xp.BaseAggregateEvaluator=r,xp}var vL;function ute(){if(vL)return Rp;vL=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.AggregateEvaluator=void 0;const t=LB(),e=RB();let u=class extends t.BaseAggregateEvaluator{constructor(n,r,a){super(n,e.SyncEvaluator.completeContext(r??{}),a),this.evaluator=new e.SyncEvaluator(n.expression,r)}put(n){if(!this.errorOccurred)if(this.isWildcard)this.wildcardAggregator.putBindings(n);else try{const r=this.evaluator.evaluate(n);this.aggregator.put(r)}catch(r){this.safeThrow(r)}}safeThrow(n){if(this.throwError)throw n;this.errorOccurred=!0}};return Rp.AggregateEvaluator=u,Rp}var qp={},wL;function cte(){if(wL)return qp;wL=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.AsyncAggregateEvaluator=void 0;const t=EB(),e=LB();let u=class extends e.BaseAggregateEvaluator{constructor(n,r,a){super(n,t.AsyncEvaluator.completeContext(r??{}),a),this.evaluator=new t.AsyncEvaluator(n.expression,r),this.errorOccurred=!1}async put(n){if(!this.errorOccurred)if(this.isWildcard)this.wildcardAggregator.putBindings(n);else try{const r=await this.evaluator.evaluate(n);if(!r||this.errorOccurred)return;this.aggregator.put(r)}catch(r){this.safeThrow(r)}}safeThrow(n){if(this.throwError)throw n;this.errorOccurred=!0}};return qp.AsyncAggregateEvaluator=u,qp}var SL;function lu(){return SL||(SL=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncAggregateEvaluator=t.orderTypes=t.isExpressionError=t.ExpressionError=t.AggregateEvaluator=t.SyncEvaluator=t.AsyncEvaluator=void 0;var e=EB();Object.defineProperty(t,"AsyncEvaluator",{enumerable:!0,get:function(){return e.AsyncEvaluator}});var u=RB();Object.defineProperty(t,"SyncEvaluator",{enumerable:!0,get:function(){return u.SyncEvaluator}});var s=ute();Object.defineProperty(t,"AggregateEvaluator",{enumerable:!0,get:function(){return s.AggregateEvaluator}});var n=on();Object.defineProperty(t,"ExpressionError",{enumerable:!0,get:function(){return n.ExpressionError}}),Object.defineProperty(t,"isExpressionError",{enumerable:!0,get:function(){return n.isExpressionError}});var r=um();Object.defineProperty(t,"orderTypes",{enumerable:!0,get:function(){return r.orderTypes}});var a=cte();Object.defineProperty(t,"AsyncAggregateEvaluator",{enumerable:!0,get:function(){return a.AsyncAggregateEvaluator}})}(uS)),uS}var TL;function lte(){if(TL)return Wh;TL=1,Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.ActorQueryOperationExtend=void 0;const t=xr(),e=wt(),u=lu();let s=class extends e.ActorQueryOperationTypedMediated{constructor(r){super(r,"extend")}async testOperation(r,a){const o=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,a);return new u.AsyncEvaluator(r.expression,e.ActorQueryOperation.getAsyncExpressionContext(a,this.mediatorQueryOperation,o)),!0}async runOperation(r,a){const{expression:o,input:l,variable:c}=r,d=e.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:l,context:a}));if((await d.metadata()).variables.some(g=>g.equals(c)))throw new Error(`Illegal binding to variable '${c.value}' that has already been bound`);const h=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,a),f={...e.ActorQueryOperation.getAsyncExpressionContext(a,this.mediatorQueryOperation,h)},p=new u.AsyncEvaluator(o,f),y=async(g,m,v)=>{try{const _=await p.evaluate(g),w=g.set(c,_);v(w)}catch(_){(0,u.isExpressionError)(_)?(v(g),this.logWarn(a,`Expression error for extend operation (${_.message})with bindings '${(0,t.bindingsToString)(g)}'`)):b.emit("error",_)}m()},b=d.bindingsStream.transform({autoStart:!1,transform:y});return{type:"bindings",bindingsStream:b,async metadata(){const g=await d.metadata();return{...g,variables:[...g.variables,c]}}}}};return Wh.ActorQueryOperationExtend=s,Wh}var AL;function dte(){return AL||(AL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(lte(),t)}(oS)),oS}var bS={},Bp={},EL;function fte(){if(EL)return Bp;EL=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.ActorQueryOperationFilter=void 0;const t=xr(),e=wt(),u=lu();let s=class extends e.ActorQueryOperationTypedMediated{constructor(r){super(r,"filter")}async testOperation(r,a){const o=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,a),l={...e.ActorQueryOperation.getAsyncExpressionContext(a,this.mediatorQueryOperation,o)};return new u.AsyncEvaluator(r.expression,l),!0}async runOperation(r,a){const o=await this.mediatorQueryOperation.mediate({operation:r.input,context:a}),l=e.ActorQueryOperation.getSafeBindings(o);e.ActorQueryOperation.validateQueryOutput(l,"bindings");const c=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,a),d={...e.ActorQueryOperation.getAsyncExpressionContext(a,this.mediatorQueryOperation,c)},h=new u.AsyncEvaluator(r.expression,d),f=async(y,b,g)=>{try{await h.evaluateAsEBV(y)&&g(y)}catch(m){(0,u.isExpressionError)(m)?this.logWarn(a,"Error occurred while filtering.",()=>({error:m,bindings:(0,t.bindingsToString)(y)})):p.emit("error",m)}b()},p=l.bindingsStream.transform({transform:f,autoStart:!1});return{type:"bindings",bindingsStream:p,metadata:l.metadata}}};return Bp.ActorQueryOperationFilter=s,Bp}var OL;function hte(){return OL||(OL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(fte(),t)}(bS)),bS}var mS={},Up={},Qp={},RL;function pte(){if(RL)return Qp;RL=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.GroupsState=void 0;const t=lu(),e=Et(),u=new e.DataFactory;let s=class{constructor(r,a,o,l){this.hashFunction=r,this.pattern=a,this.sparqleeConfig=o,this.bindingsFactory=l,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(c=>c.value)),this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(r){const a=this.resultCheck();if(a)return a;this.waitCounter++;const o=r.filter((h,f)=>this.groupVariables.has(f.value)),l=this.hashBindings(o);let c=this.groupsInitializer.get(l),d;if(c){const h=c;d=(async()=>{const f=await h;await Promise.all(this.pattern.aggregates.map(async p=>{const y=p.variable.value;await f.aggregators[y].put(r)}))})().then(async()=>{this.subtractWaitCounterAndCollect()})}else c=(async()=>{const h={};await Promise.all(this.pattern.aggregates.map(async p=>{const y=p.variable.value;h[y]=new t.AsyncAggregateEvaluator(p,this.sparqleeConfig),await h[y].put(r)}));const f={aggregators:h,bindings:o};return this.groups.set(l,f),this.subtractWaitCounterAndCollect(),f})(),this.groupsInitializer.set(l,c),d=c;return d}subtractWaitCounterAndCollect(){--this.waitCounter===0&&this.handleResultCollection()}handleResultCollection(){let r=[...this.groups].map(([a,o])=>{const{bindings:l,aggregators:c}=o;let d=l;for(const h in c){const f=c[h].result();f&&(d=d.set(u.variable(h),f))}return d});if(r.length===0&&this.groupVariables.size===0){const a=[];for(const o of this.pattern.aggregates){const l=o.variable,c=t.AsyncAggregateEvaluator.emptyValue(o);c!==void 0&&a.push([l,c])}r=[this.bindingsFactory.bindings(a)]}this.waitResolver(r)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}collectResults(){const r=this.resultCheck();if(r)return r;this.resultHasBeenCalled=!0;const a=new Promise(o=>{this.waitResolver=o});return this.subtractWaitCounterAndCollect(),a}hashBindings(r){return this.hashFunction(r)}};return Qp.GroupsState=s,Qp}var xL;function yte(){if(xL)return Up;xL=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.ActorQueryOperationGroup=void 0;const t=xr(),e=wt(),u=lu(),s=Dt(),n=pte();let r=class extends e.ActorQueryOperationTypedMediated{constructor(o){super(o,"group")}async testOperation(o,l){const c=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,l);for(const d of o.aggregates)new u.AsyncEvaluator(d.expression,e.ActorQueryOperation.getAsyncExpressionContext(l,this.mediatorQueryOperation,c));return!0}async runOperation(o,l){const c=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,l),{hashFunction:d}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:l}),{input:h,aggregates:f}=o,p=await this.mediatorQueryOperation.mediate({operation:h,context:l}),y=e.ActorQueryOperation.getSafeBindings(p),b=[...o.variables,...f.map(v=>v.variable)],g=e.ActorQueryOperation.getAsyncExpressionContext(l,this.mediatorQueryOperation,c);return{type:"bindings",bindingsStream:new s.TransformIterator(()=>new Promise((v,_)=>{const w=new n.GroupsState(d,o,g,c);y.bindingsStream.on("end",async()=>{try{const S=new s.ArrayIterator(await w.collectResults(),{autoStart:!1});v(S)}catch(S){_(S)}}),y.bindingsStream.on("error",_),y.bindingsStream.on("data",S=>{w.consumeBindings(S).catch(_)})}),{autoStart:!1}),metadata:async()=>({...await y.metadata(),variables:b})}}};return Up.ActorQueryOperationGroup=r,Up}var IL;function bte(){return IL||(IL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(yte(),t)}(mS)),mS}var gS={},Hp={},PL;function mte(){if(PL)return Hp;PL=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.ActorQueryOperationLeftJoin=void 0;const t=xr(),e=wt(),u=lu();let s=class extends e.ActorQueryOperationTypedMediated{constructor(r){super(r,"leftjoin")}async testOperation(r,a){return!0}async runOperation(r,a){const o=(await Promise.all(r.input.map(async c=>({output:await this.mediatorQueryOperation.mediate({operation:c,context:a}),operation:c})))).map(({output:c,operation:d})=>({output:e.ActorQueryOperation.getSafeBindings(c),operation:d})),l=await this.mediatorJoin.mediate({type:"optional",entries:o,context:a});if(r.expression){const d=(await o[1].output.metadata()).variables,h=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,a),f={...e.ActorQueryOperation.getAsyncExpressionContext(a,this.mediatorQueryOperation,h)},p=new u.AsyncEvaluator(r.expression,f),y=l.bindingsStream.transform({autoStart:!1,transform:async(b,g,m)=>{if(!d.every(v=>b.has(v.value)))return m(b),g();try{await p.evaluateAsEBV(b)&&m(b)}catch(v){(0,u.isExpressionError)(v)?this.logWarn(a,"Error occurred while filtering.",()=>({error:v,bindings:b})):y.emit("error",v)}g()}});l.bindingsStream=y}return l}};return Hp.ActorQueryOperationLeftJoin=s,Hp}var DL;function gte(){return DL||(DL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(mte(),t)}(gS)),gS}var _S={},$p={},NL;function _te(){if(NL)return $p;NL=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.ActorQueryOperationNop=void 0;const t=xr(),e=wt(),u=Cn(),s=Dt();let n=class extends e.ActorQueryOperationTypedMediated{constructor(a){super(a,"nop")}async testOperation(a,o){return!0}async runOperation(a,o){const l=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,o);return{bindingsStream:new s.SingletonIterator(l.bindings()),metadata:()=>Promise.resolve({state:new u.MetadataValidationState,cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}};return $p.ActorQueryOperationNop=n,$p}var CL;function vte(){return CL||(CL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(_te(),t)}(_S)),_S}var vS={},Vp={},kp={},jL;function wte(){if(jL)return kp;jL=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.SortIterator=void 0;const t=Dt();let e=class extends t.TransformIterator{constructor(s,n,r){super(s,r);const a=r&&r.window;this.windowLength=Number.isFinite(a)&&a>0?a:Number.POSITIVE_INFINITY,this.sort=n,this.sorted=[]}_read(s,n){let r,{length:a}=this.sorted;for(;a!==this.windowLength&&(r=this.source.read(),r!==null);){let o=0,l=a-1,c,d;for(;o<=l;)c=Math.trunc((o+l)/2),d=this.sort(r,this.sorted[c]),d<0?o=c+1:d>0?l=c-1:(o=c,l=-1);this.sorted.splice(o,0,r),a++}a===this.windowLength&&this._push(this.sorted.pop()),n()}_flush(s){let{length:n}=this.sorted;for(;n--;)this._push(this.sorted.pop());s()}};return kp.SortIterator=e,kp}var LL;function Ste(){if(LL)return Vp;LL=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.ActorQueryOperationOrderBy=void 0;const t=xr(),e=wt(),u=lu(),s=Ot(),n=wte();let r=class extends e.ActorQueryOperationTypedMediated{constructor(o){super(o,"orderby"),this.window=o.window??Number.POSITIVE_INFINITY}async testOperation(o,l){const c=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,l);for(let d of o.expressions)d=this.extractSortExpression(d),new u.AsyncEvaluator(d,e.ActorQueryOperation.getAsyncExpressionContext(l,this.mediatorQueryOperation,c));return!0}async runOperation(o,l){const c=await this.mediatorQueryOperation.mediate({operation:o.input,context:l}),d=e.ActorQueryOperation.getSafeBindings(c),h={window:this.window},f=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,l),p={...e.ActorQueryOperation.getAsyncExpressionContext(l,this.mediatorQueryOperation,f)};let{bindingsStream:y}=d;for(let b=o.expressions.length-1;b>=0;b--){let g=o.expressions[b];const m=this.isAscending(g);g=this.extractSortExpression(g);const v=new u.AsyncEvaluator(g,p),_=async(A,D,L)=>{try{const O=await v.evaluate(A);L({bindings:A,result:O})}catch(O){(0,u.isExpressionError)(O)||y.emit("error",O),L({bindings:A,result:void 0})}D()},w=y.transform({transform:_});y=new n.SortIterator(w,(A,D)=>{let L=(0,u.orderTypes)(A.result,D.result);return m||(L*=-1),L},h).map(({bindings:A})=>A)}return{type:"bindings",bindingsStream:y,metadata:d.metadata}}extractSortExpression(o){const{expressionType:l,operator:c}=o;return l!==s.Algebra.expressionTypes.OPERATOR?o:c==="desc"?o.args[0]:o}isAscending(o){const{expressionType:l,operator:c}=o;return l!==s.Algebra.expressionTypes.OPERATOR?!0:c!=="desc"}};return Vp.ActorQueryOperationOrderBy=r,Vp}var ML;function Tte(){return ML||(ML=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Ste(),t)}(vS)),vS}var wS={},zp={},FL;function Ate(){if(FL)return zp;FL=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.ActorQueryOperationService=void 0;const t=xr(),e=wt(),u=Cn(),s=Dt();let n=class extends e.ActorQueryOperationTypedMediated{constructor(a){super(a,"service")}async testOperation(a,o){if(a.name.termType!=="NamedNode")throw new Error(`${this.name} can only query services by IRI, while a ${a.name.termType} was given.`);return!0}async runOperation(a,o){const{querySource:l}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:a.name.value,type:this.forceSparqlEndpoint?"sparql":void 0},context:o});let c;try{c=e.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.ActorQueryOperation.assignOperationSource(a.input,l),context:o}))}catch(d){if(a.silent){const h=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,o);c={bindingsStream:new s.SingletonIterator(h.bindings()),type:"bindings",metadata:async()=>({state:new u.MetadataValidationState,cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})},this.logWarn(o,`An error occurred when executing a SERVICE clause: ${d.message}`)}else throw d}return c}};return zp.ActorQueryOperationService=n,zp}var qL;function Ete(){return qL||(qL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Ate(),t)}(wS)),wS}var SS={},Gp={},BL;function Ote(){if(BL)return Gp;BL=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.ActorQueryOperationValues=void 0;const t=xr(),e=wt(),u=Cn(),s=Dt(),n=Et(),r=new n.DataFactory;let a=class extends e.ActorQueryOperationTyped{constructor(l){super(l,"values")}async testOperation(l,c){return!0}async runOperation(l,c){const d=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,c),h=new s.ArrayIterator(l.bindings.map(y=>d.bindings(Object.entries(y).map(([b,g])=>[r.variable(b.slice(1)),g])))),f=l.variables;return{type:"bindings",bindingsStream:h,metadata:()=>Promise.resolve({state:new u.MetadataValidationState,cardinality:{type:"exact",value:l.bindings.length},canContainUndefs:l.bindings.some(y=>f.some(b=>!(`?${b.value}`in y))),variables:f})}}};return Gp.ActorQueryOperationValues=a,Gp}var UL;function Rte(){return UL||(UL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Ote(),t)}(SS)),SS}var TS={},Wp={},QL;function xte(){if(QL)return Wp;QL=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.ActorQueryOperationPathOneOrMore=void 0;const t=us(),e=xr(),u=wt(),s=Dt(),n=Ot();let r=class extends t.ActorAbstractPath{constructor(o){super(o,n.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(o,l){const c=await e.BindingsFactory.create(this.mediatorMergeBindingsContext,l),d=await this.isPathArbitraryLengthDistinct(l,o);if(d.operation)return d.operation;l=d.context;const h=o.predicate;if(o.subject.termType!=="Variable"&&o.object.termType==="Variable"){const b=o.object,g=await this.getObjectsPredicateStarEval(o.subject,h.path,b,o.graph,l,!1,c),m=o.graph.termType==="Variable"?[b,o.graph]:[b];return{type:"bindings",bindingsStream:g.bindingsStream,metadata:async()=>({...await g.metadata(),variables:m})}}if(o.subject.termType==="Variable"&&o.object.termType==="Variable"){const b=t.ActorAbstractPath.FACTORY.createDistinct(t.ActorAbstractPath.FACTORY.createPath(o.subject,o.predicate.path,o.object,o.graph)),g=u.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:l,operation:b})),m=o.subject,v=o.object,_={},w=new s.MultiTransformIterator(g.bindingsStream,{multiTransform:A=>{const D=A.get(m),L=A.get(v),O=o.graph.termType==="Variable"?A.get(o.graph):o.graph;return new s.TransformIterator(async()=>{const E=new s.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(m,v,D,L,h.path,O,l,_,{},E,{count:0},c),E.transform({transform(P,M,U){o.graph.termType==="Variable"&&(P=P.set(o.graph,O)),U(P),M()}})},{maxBufferSize:128})},autoStart:!1}),S=o.graph.termType==="Variable"?[m,v,o.graph]:[m,v];return{type:"bindings",bindingsStream:w,metadata:async()=>({...await g.metadata(),variables:S})}}if(o.subject.termType==="Variable"&&o.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:l,operation:t.ActorAbstractPath.FACTORY.createPath(o.object,t.ActorAbstractPath.FACTORY.createOneOrMorePath(t.ActorAbstractPath.FACTORY.createInv(h.path)),o.subject,o.graph)});const f=this.generateVariable(),p=u.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:l,operation:t.ActorAbstractPath.FACTORY.createPath(o.subject,h,f,o.graph)}));return{type:"bindings",bindingsStream:p.bindingsStream.transform({filter:b=>o.object.equals(b.get(f)),transform(b,g,m){const v=o.graph.termType==="Variable"?c.bindings([[o.graph,b.get(o.graph)]]):c.bindings();m(v),g()}}),metadata:async()=>({...await p.metadata(),variables:o.graph.termType==="Variable"?[o.graph]:[]})}}};return Wp.ActorQueryOperationPathOneOrMore=r,Wp}var HL;function Ite(){return HL||(HL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(xte(),t)}(TS)),TS}var AS={},Jp={},$L;function Pte(){if($L)return Jp;$L=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.ActorQueryOperationPathZeroOrMore=void 0;const t=us(),e=xr(),u=wt(),s=Dt(),n=Xt(),r=Ot();let a=class extends t.ActorAbstractPath{constructor(l){super(l,r.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(l,c){const d=await e.BindingsFactory.create(this.mediatorMergeBindingsContext,c),h=await this.isPathArbitraryLengthDistinct(c,l);if(h.operation)return h.operation;c=h.context;const f=l.predicate,p=this.getPathSources(f),y=l.subject.termType==="Variable",b=l.object.termType==="Variable";if(l.subject.termType==="Variable"&&l.object.termType==="Variable"){const S=this.generateVariable(l),A=this.assignPatternSources(t.ActorAbstractPath.FACTORY.createPattern(l.subject,S,l.object,l.graph),p),D=u.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:c,operation:A})),L=l.subject,O=l.object,E=new Set,P={},M=new s.MultiTransformIterator(D.bindingsStream,{multiTransform:j=>{const q=j.get(L),$=j.get(O),Z=l.graph.termType==="Variable"?j.get(l.graph):l.graph,X=(0,n.termToString)(q)+(0,n.termToString)(Z),le=(0,n.termToString)($)+(0,n.termToString)(Z);return new s.TransformIterator(async()=>{if(E.has(X)&&E.has(le))return new s.EmptyIterator;const K=new s.BufferedIterator,he={count:0};return E.has(X)||(E.add(X),await this.getSubjectAndObjectBindingsPredicateStar(L,O,q,q,f.path,Z,c,P,{},K,he,d)),E.has(le)||(E.add(le),await this.getSubjectAndObjectBindingsPredicateStar(L,O,$,$,f.path,Z,c,P,{},K,he,d)),K.transform({transform(Re,ie,ae){l.graph.termType==="Variable"&&(Re=Re.set(l.graph,Z)),ae(Re),ie()}})})}}),U=l.graph.termType==="Variable"?[L,l.object,l.graph]:[L,l.object];return{type:"bindings",bindingsStream:M,metadata:async()=>({...await D.metadata(),variables:U})}}if(!y&&!b){const S=this.generateVariable(),A=await this.getObjectsPredicateStarEval(l.subject,f.path,S,l.graph,c,!0,d);return{type:"bindings",bindingsStream:A.bindingsStream.transform({filter:L=>l.object.equals(L.get(S)),transform(L,O,E){const P=l.graph.termType==="Variable"?d.bindings([[l.graph,L.get(l.graph)]]):d.bindings();E(P),O()}}),metadata:async()=>({...await A.metadata(),variables:l.graph.termType==="Variable"?[l.graph]:[]})}}const g=y?l.object:l.subject,m=y?l.subject:l.object,v=y?t.ActorAbstractPath.FACTORY.createInv(f.path):f.path,_=await this.getObjectsPredicateStarEval(g,v,m,l.graph,c,!0,d),w=l.graph.termType==="Variable"?[m,l.graph]:[m];return{type:"bindings",bindingsStream:_.bindingsStream,metadata:async()=>({...await _.metadata(),variables:w})}}};return Jp.ActorQueryOperationPathZeroOrMore=a,Jp}var VL;function Dte(){return VL||(VL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Pte(),t)}(AS)),AS}var ES={},Xp={},kL;function Nte(){if(kL)return Xp;kL=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.ActorQueryOperationPathZeroOrOne=void 0;const t=us(),e=xr(),u=wt(),s=Cn(),n=Dt(),r=Ot();let a=class extends t.ActorAbstractPath{constructor(l){super(l,r.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(l,c){const d=await e.BindingsFactory.create(this.mediatorMergeBindingsContext,c),h=l.predicate,f=this.getPathSources(h),p=[];if(l.subject.termType!=="Variable"&&l.object.termType!=="Variable"&&l.subject.equals(l.object))return{type:"bindings",bindingsStream:new n.SingletonIterator(d.bindings()),metadata:()=>Promise.resolve({state:new s.MetadataValidationState,cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};const y=await this.isPathArbitraryLengthDistinct(c,l);if(y.operation)return y.operation;c=y.context;const b=u.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:c,operation:t.ActorAbstractPath.FACTORY.createPath(l.subject,h.path,l.object,l.graph)}));let g;if(l.subject.termType==="Variable"&&l.object.termType==="Variable"){const m=this.generateVariable(l),v=u.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:c,operation:t.ActorAbstractPath.FACTORY.createFilter(this.assignPatternSources(t.ActorAbstractPath.FACTORY.createPattern(l.subject,m,l.object,l.graph),f),t.ActorAbstractPath.FACTORY.createOperatorExpression("=",[t.ActorAbstractPath.FACTORY.createTermExpression(l.subject),t.ActorAbstractPath.FACTORY.createTermExpression(l.object)]))})).bindingsStream.map(_=>_.delete(m));g=new n.UnionIterator([v,b.bindingsStream],{autoStart:!1})}else l.subject.termType==="Variable"&&p.push(d.bindings([[l.subject,l.object]])),l.object.termType==="Variable"&&p.push(d.bindings([[l.object,l.subject]])),g=b.bindingsStream.prepend(p);return{type:"bindings",bindingsStream:g,metadata:b.metadata}}};return Xp.ActorQueryOperationPathZeroOrOne=a,Xp}var zL;function Cte(){return zL||(zL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Nte(),t)}(ES)),ES}var OS={},Kp={},GL;function jte(){if(GL)return Kp;GL=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.ActorQueryOperationUpdateDeleteInsert=void 0;const t=G7(),e=xr(),u=wt(),s=Dt();let n=class extends u.ActorQueryOperationTypedMediated{constructor(a){super(a,"deleteinsert"),this.blankNodeCounter=0}async testOperation(a,o){return u.ActorQueryOperation.throwOnReadOnly(o),!0}async runOperation(a,o){const l=await e.BindingsFactory.create(this.mediatorMergeBindingsContext,o),c=a.where?u.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:a.where,context:o})).bindingsStream:new s.ArrayIterator([l.bindings()],{autoStart:!1});let d,h;a.insert&&(d=new t.BindingsToQuadsIterator(a.insert.map(t.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),c.clone()),this.blankNodeCounter++),a.delete&&(h=new t.BindingsToQuadsIterator(a.delete.map(t.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),c.clone()),this.blankNodeCounter++);const{execute:f}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:d,quadStreamDelete:h,context:o});return{type:"void",execute:f}}};return Kp.ActorQueryOperationUpdateDeleteInsert=n,Kp}var WL;function Lte(){return WL||(WL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(jte(),t)}(OS)),OS}var RS={},Yp={},xS={},Zp={},JL;function Mte(){if(JL)return Zp;JL=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.ActorQueryProcess=void 0;const t=ot;let e=class extends t.Actor{constructor(s){super(s)}};return Zp.ActorQueryProcess=e,Zp}var XL;function cm(){return XL||(XL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Mte(),t)}(xS)),xS}var KL;function Fte(){if(KL)return Yp;KL=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.ActorQueryProcessSequential=void 0;const t=xr(),e=wt(),u=cm(),s=Lt,n=ot;let r=class extends u.ActorQueryProcess{constructor(o){super(o)}async test(o){if(o.context.get(s.KeysInitQuery.explain)||o.context.get(new n.ActionContextKey("explain")))throw new Error(`${this.name} is not able to explain queries.`);return!0}async run(o){let{operation:l,context:c}=await this.parse(o.query,o.context);return{operation:l,context:c}=await this.optimize(l,c),{result:await this.evaluate(l,c)}}async parse(o,l){l=(await this.mediatorContextPreprocess.mediate({context:l,initialize:!0})).context;let c;if(typeof o=="string"){l=l.set(s.KeysInitQuery.queryString,o);const d=l.get(s.KeysInitQuery.baseIRI),h=l.get(s.KeysInitQuery.queryFormat),f=await this.mediatorQueryParse.mediate({context:l,query:o,queryFormat:h,baseIRI:d});c=f.operation,f.baseIRI&&(l=l.set(s.KeysInitQuery.baseIRI,f.baseIRI))}else c=o;if(l.has(s.KeysInitQuery.initialBindings)){const d=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,l);c=(0,e.materializeOperation)(c,l.get(s.KeysInitQuery.initialBindings),d),l=l.delete(s.KeysInitQuery.queryString)}return{operation:c,context:l}}async optimize(o,l){return l=l.set(s.KeysInitQuery.query,o),{operation:o,context:l}=await this.mediatorOptimizeQueryOperation.mediate({context:l,operation:o}),l=l.set(s.KeysInitQuery.query,o),{operation:o,context:l}}async evaluate(o,l){const c=await this.mediatorQueryOperation.mediate({context:l,operation:o});return c.context=l,c}};return Yp.ActorQueryProcessSequential=r,Yp}var YL;function qte(){return YL||(YL=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Fte(),t)}(RS)),RS}var IS={},e0={},t0={},r0={},n0={},ZL;function Bte(){if(ZL)return n0;ZL=1,Object.defineProperty(n0,"__esModule",{value:!0}),n0.LinkedRdfSourcesAsyncRdfIterator=void 0;const t=Cn(),e=Dt();let u=class extends e.BufferedIterator{constructor(n,r,a,o,l,c,d,h){if(super({autoStart:!1,...h}),this.started=!1,this.currentIterators=[],this.iteratorsPendingCreation=0,this.iteratorsPendingTermination=0,this.accumulatedMetadata=Promise.resolve(void 0),this._reading=!1,this.cacheSize=n,this.operation=r,this.queryBindingsOptions=a,this.context=o,this.firstUrl=l,this.maxIterators=c,this.sourceStateGetter=d,this.maxIterators<=0)throw new Error(`LinkedRdfSourcesAsyncRdfIterator.maxIterators must be larger than zero, but got ${this.maxIterators}`)}kickstart(){this.started||this._fillBufferAsync()}getProperty(n,r){return n==="metadata"&&!this.started&&(this.preflightMetadata||(this.preflightMetadata=new Promise((a,o)=>{this.sourceStateGetter({url:this.firstUrl},{}).then(l=>{const c=l.source.queryBindings(this.operation,this.context);c.getProperty("metadata",d=>{d.state=new t.MetadataValidationState,c.destroy(),this.accumulateMetadata(l.metadata,d).then(h=>{const f={...l.metadata,...d,...h};a(f)}).catch(()=>{a({...l.metadata,state:new t.MetadataValidationState})})})}).catch(o)})),this.preflightMetadata.then(a=>this.setProperty("metadata",a)).catch(()=>{})),super.getProperty(n,r)}_end(n){for(const r of this.currentIterators)r.destroy();super._end(n)}_read(n,r){if(this.started){for(const a of this.currentIterators){for(;n>0;){const o=a.read();if(o===null)break;n--,this._push(o)}if(n<=0)break}n>=0&&this.canStartNewIterator()?this.sourceStateGetter({url:this.firstUrl},{}).then(a=>{this.startIteratorsForNextUrls(a.handledDatasets,!1),r()}):r()}else this.started=!0,this.sourceStateGetter({url:this.firstUrl},{}).then(a=>{this.startIterator(a),r()}).catch(a=>setTimeout(()=>this.destroy(a)))}canStartNewIterator(){return this.currentIterators.length+this.iteratorsPendingCreation+this.iteratorsPendingTermination<this.maxIterators&&(!this.canStartNewIteratorConsiderReadable()||!this.readable)}canStartNewIteratorConsiderReadable(){return!0}areIteratorsRunning(){return this.currentIterators.length+this.iteratorsPendingCreation+this.iteratorsPendingTermination>0}startIterator(n){try{const r=n.source.queryBindings(this.operation,this.context,this.queryBindingsOptions);this.currentIterators.push(r);let a=!1,o=!1;r._destination=this,r.on("error",l=>this.destroy(l)),r.on("readable",()=>this._fillBuffer()),r.on("end",()=>{this.currentIterators.splice(this.currentIterators.indexOf(r),1),a=!0,o||this.iteratorsPendingTermination++,o&&this.startIteratorsForNextUrls(n.handledDatasets,!0)}),r.getProperty("metadata",l=>{this.accumulatedMetadata=this.accumulatedMetadata.then(c=>(async()=>(c||(c=n.metadata),this.accumulateMetadata(c,l)))().then(d=>{const h={...n.metadata,...l,...d};return h.state=new t.MetadataValidationState,this.updateMetadata(h),this.preflightMetadata&&this.preflightMetadata.then(f=>f.state.invalidate()).catch(()=>{}),this.getSourceLinks(h).then(f=>Promise.all(f)).then(async f=>{const p=await this.getLinkQueue();for(const y of f)p.push(y,n.link);o=!0,a&&this.iteratorsPendingTermination--,this.startIteratorsForNextUrls(n.handledDatasets,!0)}).catch(f=>this.destroy(f)),h})).catch(c=>(this.destroy(c),{}))})}catch(r){this.destroy(r)}}updateMetadata(n){const r=this.getProperty("metadata");this.setProperty("metadata",n),r==null||r.state.invalidate()}isRunning(){return!this.done}startIteratorsForNextUrls(n,r){this.getLinkQueue().then(a=>{for(;this.canStartNewIterator()&&this.isRunning();){const o=a.pop();if(o)this.iteratorsPendingCreation++,this.sourceStateGetter(o,n).then(l=>{this.iteratorsPendingCreation--,this.startIterator(l)}).catch(l=>this.emit("error",l));else break}r&&this.isCloseable(a,!0)&&this.close()}).catch(a=>this.destroy(a))}isCloseable(n,r){return n.isEmpty()&&!this.areIteratorsRunning()}};return n0.LinkedRdfSourcesAsyncRdfIterator=u,n0}var eM;function Ute(){if(eM)return r0;eM=1,Object.defineProperty(r0,"__esModule",{value:!0}),r0.MediatedLinkedRdfSourcesAsyncRdfIterator=void 0;const t=Lt,e=Et(),u=Ot(),s=Bte(),n=new e.DataFactory,r=new u.Factory;let a=class extends s.LinkedRdfSourcesAsyncRdfIterator{constructor(l,c,d,h,f,p,y,b,g,m,v,_){super(l,c,d,h,p,y,b,g?{maxBufferSize:Number.POSITIVE_INFINITY}:void 0),this.wasForcefullyClosed=!1,this.forceSourceType=f,this.mediatorMetadataAccumulate=m,this.mediatorRdfResolveHypermediaLinks=v,this.mediatorRdfResolveHypermediaLinksQueue=_,this.handledUrls={[p]:!0},this.aggregatedStore=g}close(){if(!this.aggregatedStore){super.close();return}this.getLinkQueue().then(l=>{this.isCloseable(l,!1)?(this.aggregatedStore&&setTimeout(()=>this.aggregatedStore.end()),super.close()):this.wasForcefullyClosed=!0}).catch(l=>super.destroy(l))}destroy(l){if(!this.aggregatedStore){super.destroy(l);return}this.getLinkQueue().then(c=>{l??this.isCloseable(c,!1)?(this.aggregatedStore&&setTimeout(()=>this.aggregatedStore.end()),super.destroy(l)):this.wasForcefullyClosed=!0}).catch(c=>super.destroy(c))}isCloseable(l,c){return(c?l.isEmpty():this.wasForcefullyClosed||l.isEmpty())&&!this.areIteratorsRunning()}canStartNewIterator(){return!this.wasForcefullyClosed&&this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||super.canStartNewIterator()}canStartNewIteratorConsiderReadable(){return!this.aggregatedStore}isRunning(){return this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||!this.done}getLinkQueue(){return this.linkQueue||(this.linkQueue=this.mediatorRdfResolveHypermediaLinksQueue.mediate({firstUrl:this.firstUrl,context:this.context}).then(l=>l.linkQueue)),this.linkQueue}async getSourceLinks(l){try{const{links:c}=await this.mediatorRdfResolveHypermediaLinks.mediate({context:this.context,metadata:l});return c.filter(d=>this.handledUrls[d.url]?!1:(this.handledUrls[d.url]=!0,!0))}catch{return[]}}startIterator(l){var c;if(this.aggregatedStore&&!this.aggregatedStore.containedSources.has(l.link.url)){(c=this.aggregatedStore)==null||c.containedSources.add(l.link.url);const d=l.source.queryBindings(r.createPattern(n.variable("s"),n.variable("p"),n.variable("o"),n.variable("g")),this.context.set(t.KeysQueryOperation.unionDefaultGraph,!0)).map(h=>n.quad(h.get("s"),h.get("p"),h.get("o"),h.get("g")));this.aggregatedStore.import(d).on("end",()=>{super.startIterator(l)})}else super.startIterator(l)}async accumulateMetadata(l,c){return(await this.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:l,appendingMetadata:c,context:this.context})).metadata}updateMetadata(l){var c;super.updateMetadata(l),(c=this.aggregatedStore)==null||c.setBaseMetadata(l,!0)}};return r0.MediatedLinkedRdfSourcesAsyncRdfIterator=a,r0}var i0={},PS={},a0={},tM;function MB(){if(tM)return a0;tM=1,Object.defineProperty(a0,"__esModule",{value:!0}),a0.PendingStreamsIndex=void 0;const t=Xt(),e=un();let u=class qs{constructor(){this.indexedStreams=new Map,this.allStreams=[]}termToString(n){return n&&n.termType!=="Variable"?(0,t.termToString)(n):qs.ID_VARIABLE}addPatternListener(n,r,a,o,l){this.allStreams.push(n);const c=`${this.termToString(r)}${qs.ID_SEPARATOR}${this.termToString(a)}${qs.ID_SEPARATOR}${this.termToString(o)}${qs.ID_SEPARATOR}${this.termToString(l)}`;let d=this.indexedStreams.get(c);d||(d=[],this.indexedStreams.set(c,d)),d.push(n)}getPendingStreamsForQuad(n){let r=[(0,e.getTerms)(n).map(o=>(0,t.termToString)(o))];for(let o=0;o<e.QUAD_TERM_NAMES.length;o++){const l=r;r=[];for(const c of l){r.push(c);const d=[...c];d[o]=qs.ID_VARIABLE,r.push(d)}}const a=[];for(const o of r){const l=this.indexedStreams.get(o.join(qs.ID_SEPARATOR));l&&a.push(...l)}return a}};return u.ID_VARIABLE="?",u.ID_SEPARATOR=":",a0.PendingStreamsIndex=u,a0}var s0={},rM;function Qte(){if(rM)return s0;rM=1;var t=I&&I.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=o[Symbol.asyncIterator],c;return l?l.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),c={},d("next"),d("throw"),d("return"),c[Symbol.asyncIterator]=function(){return this},c);function d(f){c[f]=o[f]&&function(p){return new Promise(function(y,b){p=o[f](p),h(y,b,p.done,p.value)})}}function h(f,p,y,b){Promise.resolve(b).then(function(g){f({value:g,done:y})},p)}},e=I&&I.__await||function(o){return this instanceof e?(this.v=o,this):new e(o)},u=I&&I.__asyncGenerator||function(o,l,c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=c.apply(o,l||[]),h,f=[];return h={},p("next"),p("throw"),p("return"),h[Symbol.asyncIterator]=function(){return this},h;function p(_){d[_]&&(h[_]=function(w){return new Promise(function(S,A){f.push([_,w,S,A])>1||y(_,w)})})}function y(_,w){try{b(d[_](w))}catch(S){v(f[0][3],S)}}function b(_){_.value instanceof e?Promise.resolve(_.value.v).then(g,m):v(f[0][2],_)}function g(_){y("next",_)}function m(_){y("throw",_)}function v(_,w){_(w),f.shift(),f.length&&y(f[0][0],f[0][1])}};Object.defineProperty(s0,"__esModule",{value:!0}),s0.StreamingStore=void 0;const s=is,n=Wt(),r=MB();let a=class FB{constructor(l=new s.Store){this.pendingStreams=new r.PendingStreamsIndex,this.ended=!1,this.store=l}end(){this.ended=!0;for(const l of this.pendingStreams.allStreams)l.push(null)}importToListeners(l){l.on("data",c=>{if(!this.ended&&!this.store.countQuads(c.subject,c.predicate,c.object,c.graph))for(const d of this.pendingStreams.getPendingStreamsForQuad(c))d.isInitialized&&(d.push(c),d.emit("quad",c))})}static concatStreams(l){return u(this,arguments,function*(){var d,h,f,p;for(const m of l)try{for(var y=!0,b=(h=void 0,t(m)),g;g=yield e(b.next()),d=g.done,!d;){p=g.value,y=!1;try{yield yield e(p)}finally{y=!0}}}catch(v){h={error:v}}finally{try{!y&&!d&&(f=b.return)&&(yield e(f.call(b)))}finally{if(h)throw h.error}}})}import(l){if(this.ended)throw new Error("Attempted to import into an ended StreamingStore");return this.importToListeners(l),this.store.import(l)}match(l,c,d,h){const f=this.store.match(l,c,d,h);let p=f;if(!this.ended){const y=new n.PassThrough({objectMode:!0});this.pendingStreams.addPatternListener(y,l,c,d,h),p=n.Readable.from(FB.concatStreams([f,y])),p._pipeSource=f;const b=f._read;f._read=g=>{y.isInitialized=!0,b.call(f,g)}}return p}getStore(){return this.store}};return s0.StreamingStore=a,s0}var nM;function Hte(){return nM||(nM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(MB(),t),u(Qte(),t)}(PS)),PS}var iM;function $te(){if(iM)return i0;iM=1,Object.defineProperty(i0,"__esModule",{value:!0}),i0.StreamingStoreMetadata=void 0;const t=wt(),e=Cn(),u=Hte();let s=class extends u.StreamingStore{constructor(r,a){super(r),this.started=!1,this.containedSources=new Set,this.runningIterators=new Set,this.iteratorCreatedListeners=new Set,this.baseMetadata={state:new e.MetadataValidationState,cardinality:{type:"exact",value:0},canContainUndefs:!1,variables:[]},this.metadataAccumulator=a}import(r){return this.ended||super.import(r),r}hasRunningIterators(){return this.runningIterators.size>0}match(r,a,o,l){const c=super.match(r,a,o,l),d=new t.ClosableTransformIterator(c,{autoStart:!1,onClose:()=>{this.runningIterators.delete(d)}});let h=this.getStore().countQuads(r,a,o,l);const f={state:new e.MetadataValidationState,cardinality:{type:"estimate",value:h},canContainUndefs:!1};d.setProperty("metadata",f),d.setProperty("lastCount",h),c.on("quad",()=>{d.setProperty("lastCount",++h),this.updateMetadataState(d,h)}),this.runningIterators.add(d);for(const p of this.iteratorCreatedListeners)p();return d}setBaseMetadata(r,a){if(this.baseMetadata={...r},this.baseMetadata.cardinality={type:"exact",value:0},a)for(const o of this.runningIterators){const l=o.getProperty("lastCount");this.updateMetadataState(o,l)}}updateMetadataState(r,a){const o={state:new e.MetadataValidationState,cardinality:{type:"estimate",value:a},canContainUndefs:!1,variables:[]};this.metadataAccumulator(this.baseMetadata,o).then(l=>{l.state=new e.MetadataValidationState;const c=r.getProperty("metadata");r.setProperty("metadata",l),c==null||c.state.invalidate()}).catch(()=>{})}addIteratorCreatedListener(r){this.iteratorCreatedListeners.add(r)}removeIteratorCreatedListener(r){this.iteratorCreatedListeners.delete(r)}};return i0.StreamingStoreMetadata=s,i0}var aM;function qB(){if(aM)return t0;aM=1,Object.defineProperty(t0,"__esModule",{value:!0}),t0.QuerySourceHypermedia=void 0;const t=yA(),e=Lt,u=Dt(),s=os(),n=Wt(),r=Ute(),a=$te();let o=class{constructor(c,d,h,f,p,y,b,g){this.referenceValue=d,this.cacheSize=c,this.firstUrl=d,this.forceSourceType=h,this.maxIterators=f,this.mediators=y,this.aggregateStore=p,this.logWarning=b,this.bindingsFactory=g,this.sourcesState=new s.LRUCache({max:this.cacheSize})}async getSelectorShape(c){return(await this.getSourceCached({url:this.firstUrl},{},c,this.getAggregateStore(c))).source.getSelectorShape(c)}queryBindings(c,d,h){const f=this.getAggregateStore(d);if(f&&c.type==="pattern"&&f.started)return new t.QuerySourceRdfJs(f,this.bindingsFactory).queryBindings(c,d);this.sourcesState.size===0&&this.getSourceCached({url:this.firstUrl},{},d,f).catch(y=>p.destroy(y));const p=new r.MediatedLinkedRdfSourcesAsyncRdfIterator(this.cacheSize,c,h,d,this.forceSourceType,this.firstUrl,this.maxIterators,(y,b)=>this.getSourceCached(y,b,d,f),f,this.mediators.mediatorMetadataAccumulate,this.mediators.mediatorRdfResolveHypermediaLinks,this.mediators.mediatorRdfResolveHypermediaLinksQueue);if(f){f.started=!0;const y=()=>p.kickstart();f.addIteratorCreatedListener(y),p.on("end",()=>f.removeIteratorCreatedListener(y))}return p}queryQuads(c,d){return new u.TransformIterator(async()=>(await this.getSourceCached({url:this.firstUrl},{},d,this.getAggregateStore(d))).source.queryQuads(c,d))}async queryBoolean(c,d){return await(await this.getSourceCached({url:this.firstUrl},{},d,this.getAggregateStore(d))).source.queryBoolean(c,d)}async queryVoid(c,d){return await(await this.getSourceCached({url:this.firstUrl},{},d,this.getAggregateStore(d))).source.queryVoid(c,d)}async getSource(c,d,h,f){var v;c.context&&(h=h.merge(c.context));let p=c.url,y,b;try{const _=await this.mediators.mediatorDereferenceRdf.mediate({context:h,url:p});p=_.url;const w=await this.mediators.mediatorMetadata.mediate({context:h,url:p,quads:_.data,triples:(v=_.metadata)==null?void 0:v.triples});w.data.on("error",()=>{}),b=(await this.mediators.mediatorMetadataExtract.mediate({context:h,url:p,metadata:w.metadata,headers:_.headers,requestTime:_.requestTime})).metadata,y=w.data,c.transform&&(y=await c.transform(y))}catch(_){y=new n.Readable,y.read=()=>(setTimeout(()=>y.emit("error",_)),null),{metadata:b}=await this.mediators.mediatorMetadataAccumulate.mediate({context:h,mode:"initialize"}),this.logWarning(`Metadata extraction for ${p} failed: ${_.message}`)}f==null||f.setBaseMetadata(b,!1),f==null||f.containedSources.add(c.url),f==null||f.import(y);const{source:g,dataset:m}=await this.mediators.mediatorQuerySourceIdentifyHypermedia.mediate({context:h,forceSourceType:c.url===this.firstUrl?this.forceSourceType:void 0,handledDatasets:d,metadata:b,quads:y,url:p});return m&&(d[m]=!0),{link:c,source:g,metadata:b,handledDatasets:d}}getSourceCached(c,d,h,f){let p=this.sourcesState.get(c.url);return p||(p=this.getSource(c,d,h,f),(c.url===this.firstUrl||f===void 0)&&this.sourcesState.set(c.url,p),p)}getAggregateStore(c){let d;if(this.aggregateStore){const h=c.get(e.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores);if(h)return d=h.get(this.firstUrl),d||(d=new a.StreamingStoreMetadata(void 0,async(f,p)=>(await this.mediators.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:f,appendingMetadata:p,context:c})).metadata),h.set(this.firstUrl,d)),d}}toString(){return`QuerySourceHypermedia(${this.firstUrl})`}};return t0.QuerySourceHypermedia=o,t0}var sM;function Vte(){if(sM)return e0;sM=1,Object.defineProperty(e0,"__esModule",{value:!0}),e0.ActorQuerySourceIdentifyHypermedia=void 0;const t=xr(),e=Ly(),u=Lt,s=ot,n=qB();let r=class extends e.ActorQuerySourceIdentify{constructor(o){super(o)}async test(o){if(typeof o.querySourceUnidentified.value!="string")throw new TypeError(`${this.name} requires a single query source with a URL value to be present in the context.`);return!0}async run(o){var l;return{querySource:{source:new n.QuerySourceHypermedia(this.cacheSize,o.querySourceUnidentified.value,o.querySourceUnidentified.type,this.maxIterators,this.aggregateTraversalStore&&!!((l=o.querySourceUnidentified.context)!=null&&l.get(u.KeysQuerySourceIdentify.traverse)),{mediatorMetadata:this.mediatorMetadata,mediatorMetadataExtract:this.mediatorMetadataExtract,mediatorMetadataAccumulate:this.mediatorMetadataAccumulate,mediatorDereferenceRdf:this.mediatorDereferenceRdf,mediatorQuerySourceIdentifyHypermedia:this.mediatorQuerySourceIdentifyHypermedia,mediatorRdfResolveHypermediaLinks:this.mediatorRdfResolveHypermediaLinks,mediatorRdfResolveHypermediaLinksQueue:this.mediatorRdfResolveHypermediaLinksQueue},c=>this.logWarn(o.context,c),await t.BindingsFactory.create(this.mediatorMergeBindingsContext,o.context)),context:o.querySourceUnidentified.context??new s.ActionContext}}}};return e0.ActorQuerySourceIdentifyHypermedia=r,e0}var oM;function kte(){return oM||(oM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Vte(),t),u(qB(),t)}(IS)),IS}var DS={},o0={},uM;function zte(){if(uM)return o0;uM=1,Object.defineProperty(o0,"__esModule",{value:!0}),o0.ActorRdfJoinNone=void 0;const t=xr(),e=jn(),u=Cn(),s=Dt();let n=class extends e.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(a){if(a.entries.length>0)throw new Error(`Actor ${this.name} can only join zero entries`);return await this.getJoinCoefficients()}async getOutput(a){const o=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,a.context);return{result:{bindingsStream:new s.ArrayIterator([o.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({state:new u.MetadataValidationState,cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}};return o0.ActorRdfJoinNone=n,o0}var cM;function Gte(){return cM||(cM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(zte(),t)}(DS)),DS}var NS={},u0={},lM;function Wte(){if(lM)return u0;lM=1,Object.defineProperty(u0,"__esModule",{value:!0}),u0.ActorRdfJoinMultiBind=void 0;const t=xr(),e=wt(),u=jn(),s=Lt,n=Dt(),r=Ot();let a=class C3 extends u.ActorRdfJoin{constructor(l){l.minMaxCardinalityRatio===void 0&&(l.minMaxCardinalityRatio=60),super(l,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0,isLeaf:!1})}static createBindStream(l,c,d,h,f,p){const y=l==="depth-first",b=g=>{const m=d.map(_=>(0,e.materializeOperation)(_,g,p,{bindFilter:!0})),v=_=>_.merge(g);return new n.TransformIterator(async()=>(await h(m,g)).transform({map:v}),{maxBufferSize:128,autoStart:y})};switch(l){case"depth-first":return new n.MultiTransformIterator(c,{autoStart:!1,multiTransform:b,optional:f});case"breadth-first":return new n.UnionIterator(c.transform({map:b,optional:f}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${l}`)}}async getOutput(l){const c=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,l.context),d=await u.ActorRdfJoin.getEntriesWithMetadatas(l.entries),h=await u.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,d,l.context);this.logDebug(l.context,"First entry for Bind Join: ",()=>({entry:h[0].operation,metadata:h[0].metadata}));for(const[g,m]of h.entries())g!==0&&m.output.bindingsStream.close();const f=h[0].output,p=[...h];p.splice(0,1);const y=l.context.set(s.KeysQueryOperation.joinLeftMetadata,h[0].metadata).set(s.KeysQueryOperation.joinRightMetadatas,p.map(g=>g.metadata));return{result:{type:"bindings",bindingsStream:C3.createBindStream(this.bindOrder,f.bindingsStream,p.map(g=>g.operation),async(g,m)=>{const v=g.length===1?g[0]:C3.FACTORY.createJoin(g);return e.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:v,context:y==null?void 0:y.set(s.KeysQueryOperation.joinBindings,m)})).bindingsStream},!1,c),metadata:()=>this.constructResultMetadata(h,h.map(g=>g.metadata),l.context)},physicalPlanMetadata:{bindIndex:d.indexOf(h[0]),bindOperation:h[0].operation,bindOperationCardinality:h[0].metadata.cardinality,bindOrder:this.bindOrder}}}canBindWithOperation(l){let c=!0;return r.Util.recurseOperation(l,{[r.Algebra.types.EXTEND](){return c=!1,!1},[r.Algebra.types.GROUP](){return c=!1,!1}}),c}async getJoinCoefficients(l,c){const d=await u.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,l.entries.map((w,S)=>({...w,metadata:c[S]})),l.context);c=d.map(w=>w.metadata);const h=u.ActorRdfJoin.getRequestInitialTimes(c),f=u.ActorRdfJoin.getRequestItemTimes(c),p=[...d],y=[...h],b=[...f];if(p.splice(0,1),y.splice(0,1),b.splice(0,1),p.some(w=>!this.canBindWithOperation(w.operation)))throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);if(p.some(w=>w.operationModified))throw new Error(`Actor ${this.name} can not be used over remaining entries with modified operations`);if(c[0].cardinality.value*this.minMaxCardinalityRatio>Math.max(...c.map(w=>w.cardinality.value)))throw new Error(`Actor ${this.name} can only run if the smallest stream is much smaller than largest stream`);const g=await Promise.all(p.map(async w=>(await this.mediatorJoinSelectivity.mediate({entries:[d[0],w],context:l.context})).selectivity*this.selectivityModifier)),m=p.map((w,S)=>w.metadata.cardinality.value*g[S]).reduce((w,S)=>w+S,0),v=y.reduce((w,S)=>w+S,0),_=b.reduce((w,S)=>w+S,0);return{iterations:c[0].cardinality.value*m,persistedItems:0,blockingItems:0,requestTime:h[0]+c[0].cardinality.value*(f[0]+v+m*_)}}};return u0.ActorRdfJoinMultiBind=a,a.FACTORY=new r.Factory,u0}var dM;function BB(){return dM||(dM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Wte(),t)}(NS)),NS}var CS={},c0={},fM;function Jte(){if(fM)return c0;fM=1,Object.defineProperty(c0,"__esModule",{value:!0}),c0.ActorRdfJoinOptionalBind=void 0;const t=BB(),e=xr(),u=wt(),s=jn(),n=Lt,r=Ot();let a=class extends s.ActorRdfJoin{constructor(l){super(l,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0,isLeaf:!1})}async getOutput(l){const c=await e.BindingsFactory.create(this.mediatorMergeBindingsContext,l.context);l.entries[1].output.bindingsStream.close();const d=l.context.set(n.KeysQueryOperation.joinLeftMetadata,await l.entries[0].output.metadata()).set(n.KeysQueryOperation.joinRightMetadatas,[await l.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:t.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,l.entries[0].output.bindingsStream,[l.entries[1].operation],async(f,p)=>{const y=f[0];return u.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:y,context:d==null?void 0:d.set(n.KeysQueryOperation.joinBindings,p)})).bindingsStream},!0,c),metadata:async()=>await this.constructResultMetadata(l.entries,await s.ActorRdfJoin.getMetadatas(l.entries),l.context,{canContainUndefs:!0},!0)}}}async getJoinCoefficients(l,c){if(s.ActorRdfJoin.overlappingVariables(c).length===0)throw new Error(`Actor ${this.name} only join entries with at least one common variable`);const d=s.ActorRdfJoin.getRequestInitialTimes(c),h=s.ActorRdfJoin.getRequestItemTimes(c);if(l.entries[1].operation.type===r.Algebra.types.EXTEND||l.entries[1].operation.type===r.Algebra.types.GROUP)throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const f=(await this.mediatorJoinSelectivity.mediate({entries:l.entries,context:l.context})).selectivity*this.selectivityModifier;return{iterations:c[0].cardinality.value*c[1].cardinality.value*f,persistedItems:0,blockingItems:0,requestTime:d[0]+c[0].cardinality.value*(h[0]+d[1]+f*c[1].cardinality.value*h[1])}}};return c0.ActorRdfJoinOptionalBind=a,c0}var hM;function Xte(){return hM||(hM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Jte(),t)}(CS)),CS}var jS={},l0={},pM;function Kte(){if(pM)return l0;pM=1,Object.defineProperty(l0,"__esModule",{value:!0}),l0.ActorQueryProcessExplainParsed=void 0;const t=cm(),e=Lt,u=ot;let s=class extends t.ActorQueryProcess{constructor(r){super(r)}async test(r){if((r.context.get(e.KeysInitQuery.explain)||r.context.get(new u.ActionContextKey("explain")))!=="parsed")throw new Error(`${this.name} can only explain in 'parsed' mode.`);return!0}async run(r){const{operation:a}=await this.queryProcessor.parse(r.query,r.context);return{result:{explain:!0,type:"parsed",data:a}}}};return l0.ActorQueryProcessExplainParsed=s,l0}var yM;function Yte(){return yM||(yM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Kte(),t)}(jS)),jS}var LS={},d0={},bM;function Zte(){if(bM)return d0;bM=1,Object.defineProperty(d0,"__esModule",{value:!0}),d0.ActorQueryProcessExplainLogical=void 0;const t=cm(),e=Lt,u=ot;let s=class extends t.ActorQueryProcess{constructor(r){super(r)}async test(r){if((r.context.get(e.KeysInitQuery.explain)||r.context.get(new u.ActionContextKey("explain")))!=="logical")throw new Error(`${this.name} can only explain in 'logical' mode.`);return!0}async run(r){let{operation:a,context:o}=await this.queryProcessor.parse(r.query,r.context);return{operation:a,context:o}=await this.queryProcessor.optimize(a,o),{result:{explain:!0,type:"logical",data:a}}}};return d0.ActorQueryProcessExplainLogical=s,d0}var mM;function ere(){return mM||(mM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Zte(),t)}(LS)),LS}var MS={},f0={},Cs={},gM;function UB(){if(gM)return Cs;gM=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.numberToString=Cs.MemoryPhysicalQueryPlanLogger=void 0;const t=Xt();let e=class{constructor(){this.planNodes=new Map}logOperation(n,r,a,o,l,c){const d={actor:l,logicalOperator:n,physicalOperator:r,rawNode:a,children:[],metadata:c};if(this.planNodes.set(a,d),this.rootNode){if(!o)throw new Error("Detected more than one parent-less node");const h=this.planNodes.get(o);if(!h)throw new Error("Could not find parent node");h.children.push(d)}else{if(o)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=d}}stashChildren(n,r){const a=this.planNodes.get(n);if(!a)throw new Error("Could not find plan node");a.children=r?a.children.filter(r):[]}unstashChild(n,r){const a=this.planNodes.get(n);if(a){const o=this.planNodes.get(r);if(!o)throw new Error("Could not find plan parent node");o.children.push(a)}}appendMetadata(n,r){const a=this.planNodes.get(n);a&&(a.metadata={...a.metadata,...r})}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(n){var a;const r={logical:n.logicalOperator,physical:n.physicalOperator,...this.getLogicalMetadata(n.rawNode),...this.compactMetadata(n.metadata)};if(n.children.length>0&&(r.children=n.children.map(o=>this.planNodeToJson(o))),r.physical==="bind"&&r.children){const o={};for(const c of r.children){const d=((a=c.children)==null?void 0:a.at(-1))??c,h=this.getPlanHash(d).join(",");o[h]||(o[h]=[]),o[h].push(c)}const l=[];for(const c of Object.values(o))l.push({occurrences:c.length,firstOccurrence:c[0]});r.childrenCompact=l,delete r.children}return r}getPlanHash(n){let r=[`${n.logical}-${n.physical}`];return n.children?r=[...r,...n.children.flatMap(a=>this.getPlanHash(a))]:n.childrenCompact&&(r=[...r,...n.childrenCompact.flatMap(a=>this.getPlanHash(a.firstOccurrence))]),r}compactMetadata(n){return Object.fromEntries(Object.entries(n).map(([r,a])=>[r,this.compactMetadataValue(a)]))}compactMetadataValue(n){return n&&typeof n=="object"&&"termType"in n?this.getLogicalMetadata(n):n}getLogicalMetadata(n){var a;const r={};if("type"in n){const o=n;switch((a=o.metadata)!=null&&a.scopedSource&&(r.source=o.metadata.scopedSource.source.toString()),o.type){case"pattern":r.pattern=this.quadToString(o);break;case"project":r.variables=o.variables.map(l=>l.value);break}}return r}quadToString(n){return`${(0,t.termToString)(n.subject)} ${(0,t.termToString)(n.predicate)} ${(0,t.termToString)(n.object)}${n.graph.termType==="DefaultGraph"?"":` ${(0,t.termToString)(n.graph)}`}`}toCompactString(){const n=this.toJson(),r=[],a=new Map;if("logical"in n?this.nodeToCompactString(r,a,"",n):r.push("Empty"),a.size>0){r.push(""),r.push("sources:");for(const[o,l]of a.entries())r.push(`  ${l}: ${o}`)}return r.join(`
`)}nodeToCompactString(n,r,a,o,l){let c;o.source&&(c=r.get(o.source),c===void 0&&(c=r.size,r.set(o.source,c))),n.push(`${a}${o.logical}${o.physical?`(${o.physical})`:""}${o.pattern?` (${o.pattern})`:""}${o.variables?` (${o.variables.join(",")})`:""}${o.bindOperation?` bindOperation:(${o.bindOperation.pattern}) bindCardEst:${o.bindOperationCardinality.type==="estimate"?"~":""}${u(o.bindOperationCardinality.value)}`:""}${o.cardinality?` cardEst:${o.cardinality.type==="estimate"?"~":""}${u(o.cardinality.value)}`:""}${o.source?` src:${c}`:""}${o.cardinalityReal?` cardReal:${o.cardinalityReal}`:""}${o.timeSelf?` timeSelf:${u(o.timeSelf)}ms`:""}${o.timeLife?` timeLife:${u(o.timeLife)}ms`:""}${l?` ${l}`:""}`);for(const d of o.children??[])this.nodeToCompactString(n,r,`${a}  `,d);for(const d of o.childrenCompact??[])this.nodeToCompactString(n,r,`${a}  `,d.firstOccurrence,`compacted-occurrences:${d.occurrences}`)}};Cs.MemoryPhysicalQueryPlanLogger=e;function u(s){return s.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:3})}return Cs.numberToString=u,Cs}var _M;function tre(){if(_M)return f0;_M=1,Object.defineProperty(f0,"__esModule",{value:!0}),f0.ActorQueryProcessExplainPhysical=void 0;const t=cm(),e=Lt,u=ot,s=UB();let n=class extends t.ActorQueryProcess{constructor(a){super(a)}async test(a){const o=a.context.get(e.KeysInitQuery.explain)||a.context.get(new u.ActionContextKey("explain"));if(o!=="physical"&&o!=="physical-json")throw new Error(`${this.name} can only explain in 'physical' or 'physical-json' mode.`);return!0}async run(a){let{operation:o,context:l}=await this.queryProcessor.parse(a.query,a.context);({operation:o,context:l}=await this.queryProcessor.optimize(o,l));const c=new s.MemoryPhysicalQueryPlanLogger;l=l.set(e.KeysInitQuery.physicalQueryPlanLogger,c);const d=await this.queryProcessor.evaluate(o,l);switch(d.type){case"bindings":await d.bindingsStream.toArray();break;case"quads":await d.quadStream.toArray();break;case"boolean":await d.execute();break;case"void":await d.execute();break}const h=a.context.get(e.KeysInitQuery.explain)??a.context.getSafe(new u.ActionContextKey("explain"));return{result:{explain:!0,type:h,data:h==="physical"?c.toCompactString():c.toJson()}}}};return f0.ActorQueryProcessExplainPhysical=n,f0}var vM;function rre(){return vM||(vM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(tre(),t),u(UB(),t)}(MS)),MS}var FS={},h0={},wM;function nre(){if(wM)return h0;wM=1,Object.defineProperty(h0,"__esModule",{value:!0}),h0.ActorOptimizeQueryOperationPruneEmptySourceOperations=void 0;const t=di(),e=wt(),u=Lt,s=Et(),n=Ot(),r=new n.Factory,a=new s.DataFactory;let o=class M0 extends t.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){if(e.ActorQueryOperation.getOperationSource(c.operation))throw new Error(`Actor ${this.name} does not work with top-level operation sources.`);return!0}async run(c){let d=c.operation;const h=[],f=this;n.Util.recurseOperation(d,{[n.Algebra.types.UNION](y){return f.collectMultiOperationInputs(y.input,h,n.Algebra.types.PATTERN),!0},[n.Algebra.types.ALT](y){return f.collectMultiOperationInputs(y.input,h,n.Algebra.types.LINK),!1},[n.Algebra.types.SERVICE](){return!1}});const p=new Set;return await Promise.all(h.map(async y=>{const b=y.type==="link"?r.createPattern(a.variable("?s"),y.iri,a.variable("?o")):y;await this.hasSourceResults(e.ActorQueryOperation.getOperationSource(y),b,c.context)||p.add(y)})),p.size>0&&(this.logDebug(c.context,`Pruning ${p.size} source-specific operations`),d=n.Util.mapOperation(d,{[n.Algebra.types.UNION](y,b){return f.mapMultiOperation(y,p,g=>b.createUnion(g))},[n.Algebra.types.ALT](y,b){return f.mapMultiOperation(y,p,g=>b.createAlt(g))}}),d=n.Util.mapOperation(d,{[n.Algebra.types.PROJECT](y,b){return M0.hasEmptyOperation(y)?{recurse:!1,result:b.createUnion([])}:{recurse:!0,result:y}},[n.Algebra.types.LEFT_JOIN](y){return M0.hasEmptyOperation(y.input[1])?{recurse:!0,result:y.input[0]}:{recurse:!0,result:y}}})),{operation:d,context:c.context}}static hasEmptyOperation(c){let d=!1;return n.Util.recurseOperation(c,{[n.Algebra.types.UNION](h){return h.input.every(f=>M0.hasEmptyOperation(f))&&(d=!0),!1},[n.Algebra.types.ALT](h){return h.input.length===0&&(d=!0),!1},[n.Algebra.types.LEFT_JOIN](h){return M0.hasEmptyOperation(h.input[0])&&(d=!0),!1}}),d}collectMultiOperationInputs(c,d,h){for(const f of c)e.ActorQueryOperation.getOperationSource(f)&&f.type===h&&d.push(f)}mapMultiOperation(c,d,h){const f=c.input.filter(p=>!d.has(p));return f.length===c.input.length?{result:c,recurse:!0}:f.length===0?{result:h([]),recurse:!1}:f.length===1?{result:f[0],recurse:!0}:{result:h(f),recurse:!0}}async hasSourceResults(c,d,h){var p;if((p=c.context)!=null&&p.get(u.KeysQuerySourceIdentify.traverse))return!0;if(this.useAskIfSupported){const y=r.createAsk(d);if(e.ActorQueryOperation.doesShapeAcceptOperation(await c.source.getSelectorShape(h),y))return c.source.queryBoolean(y,h)}const f=c.source.queryBindings(d,h);return new Promise((y,b)=>{f.on("error",b),f.getProperty("metadata",g=>{f.destroy(),y(g.cardinality.value>0)})})}};return h0.ActorOptimizeQueryOperationPruneEmptySourceOperations=o,h0}var SM;function ire(){return SM||(SM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(nre(),t)}(FS)),FS}var qS={},p0={},TM;function are(){if(TM)return p0;TM=1,Object.defineProperty(p0,"__esModule",{value:!0}),p0.ActorQuerySourceIdentifySerialized=void 0;const t=Ly(),e=yB(),u=Wt();let s=class extends t.ActorQuerySourceIdentify{constructor(r){super(r)}async test(r){if(!this.isStringSource(r.querySourceUnidentified))throw new Error(`${this.name} requires a single query source with serialized type to be present in the context.`);return!0}async run(r){return await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{type:"rdfjs",value:await this.getRdfSource(r.context,r.querySourceUnidentified),context:r.querySourceUnidentified.context},context:r.context})}async getRdfSource(r,a){const o=new u.Readable({objectMode:!0});o._read=()=>{},o.push(a.value),o.push(null);const l={context:r,handle:{metadata:{baseIRI:a.baseIRI},data:o,context:r},handleMediaType:a.mediaType},c=await this.mediatorRdfParse.mediate(l);return await(0,e.storeStream)(c.handle.data)}isStringSource(r){return"type"in r?r.type==="serialized":typeof r.value!="string"?!1:"mediaType"in r}};return p0.ActorQuerySourceIdentifySerialized=s,p0}var AM;function sre(){return AM||(AM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(are(),t)}(qS)),qS}var BS={},y0={},EM;function ore(){if(EM)return y0;EM=1,Object.defineProperty(y0,"__esModule",{value:!0}),y0.ActorOptimizeQueryOperationJoinConnected=void 0;const t=di(),e=Ot();let u=class K1 extends t.ActorOptimizeQueryOperation{async test(n){return!0}async run(n){return{operation:e.Util.mapOperation(n.operation,{join(a,o){return{recurse:!1,result:K1.cluster(a,o)}}}),context:n.context}}static cluster(n,r){const a=n.input.map(d=>({inScopeVariables:Object.fromEntries(e.Util.inScopeVariables(d).map(h=>[h.value,!0])),entries:[d]}));let o,l=a;do o=l,l=K1.clusterIteration(o);while(o.length!==l.length);const c=l.map(d=>d.entries.length===1?d.entries[0]:r.createJoin(d.entries));return c.length===1?c[0]:r.createJoin(c,!1)}static clusterIteration(n){const r=[];for(const a of n){let o=!1;for(const l of r)if(K1.haveOverlappingVariables(a.inScopeVariables,l.inScopeVariables)){l.entries=[...l.entries,...a.entries],l.inScopeVariables={...l.inScopeVariables,...a.inScopeVariables},o=!0;break}o||r.push({inScopeVariables:a.inScopeVariables,entries:a.entries})}return r}static haveOverlappingVariables(n,r){for(const a of Object.keys(n))if(r[a])return!0;return!1}};return y0.ActorOptimizeQueryOperationJoinConnected=u,y0}var OM;function ure(){return OM||(OM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(ore(),t)}(BS)),BS}var US={},b0={},RM;function cre(){if(RM)return b0;RM=1,Object.defineProperty(b0,"__esModule",{value:!0}),b0.ActorOptimizeQueryOperationBgpToJoin=void 0;const t=di(),e=Ot();let u=class extends t.ActorOptimizeQueryOperation{async test(n){return!0}async run(n){return{operation:e.Util.mapOperation(n.operation,{bgp(a,o){return{recurse:!1,result:o.createJoin(a.patterns)}}}),context:n.context}}};return b0.ActorOptimizeQueryOperationBgpToJoin=u,b0}var xM;function lre(){return xM||(xM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(cre(),t)}(US)),US}var QS={},m0={},IM;function dre(){if(IM)return m0;IM=1,Object.defineProperty(m0,"__esModule",{value:!0}),m0.ActorOptimizeQueryOperationJoinBgp=void 0;const t=di(),e=Ot();let u=class extends t.ActorOptimizeQueryOperation{async test(n){return!0}async run(n){return{operation:e.Util.mapOperation(n.operation,{join(a,o){return a.input.every(l=>l.type==="bgp")?{recurse:!1,result:o.createBgp(a.input.flatMap(l=>l.patterns))}:{recurse:!1,result:a}}}),context:n.context}}};return m0.ActorOptimizeQueryOperationJoinBgp=u,m0}var PM;function fre(){return PM||(PM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(dre(),t)}(QS)),QS}var HS={},g0={},DM;function hre(){if(DM)return g0;DM=1,Object.defineProperty(g0,"__esModule",{value:!0}),g0.ActorOptimizeQueryOperationAssignSourcesExhaustive=void 0;const t=di(),e=wt(),u=dA(),s=Lt,n=Ot();let r=class extends t.ActorOptimizeQueryOperation{constructor(o){super(o)}async test(o){return!0}async run(o){const l=o.context.get(s.KeysQueryOperation.querySources)??[];if(l.length===0)return{operation:o.operation,context:o.context};if(l.length===1){const c=l[0],d=o.context.get(s.KeysRdfUpdateQuads.destination);if(!d||c.source.referenceValue===(0,u.getDataDestinationValue)(d))try{const h=await c.source.getSelectorShape(o.context);if(e.ActorQueryOperation.doesShapeAcceptOperation(h,o.operation))return{operation:e.ActorQueryOperation.assignOperationSource(o.operation,c),context:o.context}}catch{}}return{operation:this.assignExhaustive(o.operation,l),context:o.context.delete(s.KeysInitQuery.queryString)}}assignExhaustive(o,l){const c=this;return n.Util.mapOperation(o,{[n.Algebra.types.PATTERN](d,h){return l.length===1?{result:e.ActorQueryOperation.assignOperationSource(d,l[0]),recurse:!1}:{result:h.createUnion(l.map(f=>e.ActorQueryOperation.assignOperationSource(d,f))),recurse:!1}},[n.Algebra.types.LINK](d,h){return l.length===1?{result:e.ActorQueryOperation.assignOperationSource(d,l[0]),recurse:!1}:{result:h.createAlt(l.map(f=>e.ActorQueryOperation.assignOperationSource(d,f))),recurse:!1}},[n.Algebra.types.NPS](d,h){return l.length===1?{result:e.ActorQueryOperation.assignOperationSource(d,l[0]),recurse:!1}:{result:h.createAlt(l.map(f=>e.ActorQueryOperation.assignOperationSource(d,f))),recurse:!1}},[n.Algebra.types.SERVICE](d){return{result:d,recurse:!1}},[n.Algebra.types.CONSTRUCT](d,h){return{result:h.createConstruct(c.assignExhaustive(d.input,l),d.template),recurse:!1}},[n.Algebra.types.DELETE_INSERT](d,h){return{result:h.createDeleteInsert(d.delete,d.insert,d.where?c.assignExhaustive(d.where,l):void 0),recurse:!1}}})}};return g0.ActorOptimizeQueryOperationAssignSourcesExhaustive=r,g0}var NM;function pre(){return NM||(NM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(hre(),t)}(HS)),HS}var $S={},_0={},CM;function yre(){if(CM)return _0;CM=1,Object.defineProperty(_0,"__esModule",{value:!0}),_0.ActorOptimizeQueryOperationDescribeToConstructsSubject=void 0;const t=di(),e=Et(),u=Ot(),s=new e.DataFactory,n=new u.Factory;let r=class extends t.ActorOptimizeQueryOperation{constructor(o){super(o)}async test(o){if(o.operation.type!==u.Algebra.types.DESCRIBE)throw new Error(`Actor ${this.name} only supports describe operations, but got ${o.operation.type}`);return!0}async run(o){const l=o.operation,c=l.terms.filter(h=>h.termType!=="Variable").map(h=>{const f=[s.quad(h,s.variable("__predicate"),s.variable("__object"))];return f.forEach(y=>y.type="pattern"),{input:{type:u.Algebra.types.BGP,patterns:f},template:f,type:"construct"}});if(c.length!==l.terms.length){let h=[];l.terms.filter(f=>f.termType==="Variable").forEach((f,p)=>{const y=[s.quad(f,s.variable(`__predicate${p}`),s.variable(`__object${p}`))];y.forEach(b=>b.type="pattern"),h=[...h,...y]}),c.push({input:{type:u.Algebra.types.JOIN,input:[l.input,{type:u.Algebra.types.BGP,patterns:h}]},template:h,type:u.Algebra.types.CONSTRUCT})}return{operation:n.createUnion(c,!1),context:o.context}}};return _0.ActorOptimizeQueryOperationDescribeToConstructsSubject=r,_0}var jM;function bre(){return jM||(jM=1,function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(yre(),t)}($S)),$S}var mre=function(t){const e=new(WV()).LoggerVoid,u=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^3.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),s=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^3.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),n=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^3.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),r=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-quads/^3.0.0/components/ActorHashQuads.jsonld#ActorHashQuads_default_bus"}),a=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^3.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),o=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^3.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),l=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^3.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),c=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify-hypermedia/^3.0.0/components/ActorQuerySourceIdentifyHypermedia.jsonld#ActorQuerySourceIdentifyHypermedia_default_bus"}),d=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference/^3.0.0/components/ActorDereference.jsonld#ActorDereference_default_bus"}),h=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference-rdf/^3.0.0/components/ActorDereferenceRdf.jsonld#ActorDereferenceRdf_default_bus"}),f=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^3.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),p=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^3.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),y=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/^3.0.0/components/ActorRdfMetadata.jsonld#ActorRdfMetadata_default_bus"}),b=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^3.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),g=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/^3.0.0/components/ActorRdfMetadataExtract.jsonld#ActorRdfMetadataExtract_default_bus"}),m=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/^3.0.0/components/ActorRdfParse.jsonld#ActorRdfParse_default_bus"}),v=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/^3.0.0/components/ActorRdfParseHtml.jsonld#ActorRdfParseHtml_default_bus"}),_=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/^3.0.0/components/ActorRdfResolveHypermediaLinks.jsonld#ActorRdfResolveHypermediaLinks_default_bus"}),w=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/^3.0.0/components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus"}),S=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links-queue/^3.0.0/components/ActorRdfResolveHypermediaLinksQueue.jsonld#ActorRdfResolveHypermediaLinksQueue_default_bus"}),A=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-hypermedia/^3.0.0/components/ActorRdfUpdateHypermedia.jsonld#ActorRdfUpdateHypermedia_default_bus"}),D=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^3.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),L=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^3.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),O=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^3.0.0/components/ActorHttp.jsonld#ActorHttp_fallback_bus"}),E=new(wt()).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^3.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),P=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^3.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus"}),M=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^3.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus"}),U=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^3.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),j=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^3.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),q=new ot.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^3.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus"});new(Ak()).ActorContextPreprocessConvertShortcuts({contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",distinctConstruct:"@comunica/actor-init-query:distinctConstruct",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelay:"@comunica/bus-http:http-retry-delay",httpRetryOnServerError:"@comunica/bus-http:http-retry-on-server-error",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",noCache:"@comunica/actor-init-query:noCache",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",sources:"@comunica/actor-init-query:querySourcesUnidentified",traverse:"@comunica/bus-query-source-identify:traverse",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:context-preprocess/actors#convert-shortcuts",bus:s}),new(Ok()).ActorContextPreprocessSetDefaults({logger:e,name:"urn:comunica:default:context-preprocess/actors#set-defaults",bus:s}),new(xk()).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:s});const $=new(dq()).ActorContextPreprocessQuerySourceSkolemize({name:"urn:comunica:default:context-preprocess/actors#query-source-skolemize",bus:s}),Z=new(ER()).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:s});new(Lk()).ActorHashBindingsSha1({name:"urn:comunica:default:hash-bindings/actors#sha1",bus:n});const X=new(cn()).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:n});new(Uk()).ActorHashQuadsSha1({name:"urn:comunica:default:hash-quads/actors#sha1",bus:r});const le=new(cn()).MediatorRace({name:"urn:comunica:default:hash-quads/mediators#main",bus:r});new($k()).ActorOptimizeQueryOperationRewriteCopy({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-copy",bus:a}),new(kk()).ActorOptimizeQueryOperationRewriteMove({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-move",bus:a}),new(Gk()).ActorOptimizeQueryOperationRewriteAdd({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-add",bus:a});const K=new(Jk()).ActorOptimizeQueryOperationGroupSources({name:"urn:comunica:default:optimize-query-operation/actors#group-sources",bus:a});new(Kk()).ActorOptimizeQueryOperationConstructDistinct({name:"urn:comunica:default:optimize-query-operation/actors#construct-distinct",bus:a});const he=new(ER()).MediatorCombinePipeline({filterErrors:!0,name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:a});new(ez()).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:o}),new(OG()).ActorQueryParseGraphql({name:"urn:comunica:default:query-parse/actors#graphql",bus:o});const Re=new(cn()).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:o});new(qG()).ActorQueryResultSerializeJson({mediaTypePriorities:{"application/json":1},mediaTypeFormats:{"application/json":"https://comunica.linkeddatafragments.org/#results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#json",bus:l}),new(UG()).ActorQueryResultSerializeSimple({mediaTypePriorities:{simple:.9},mediaTypeFormats:{simple:"https://comunica.linkeddatafragments.org/#results_simple"},name:"urn:comunica:default:query-result-serialize/actors#simple",bus:l}),new(HG()).ActorQueryResultSerializeSparqlCsv({mediaTypePriorities:{"text/csv":.75},mediaTypeFormats:{"text/csv":"http://www.w3.org/ns/formats/SPARQL_Results_CSV"},name:"urn:comunica:default:query-result-serialize/actors#csv",bus:l}),new(kG()).ActorQueryResultSerializeSparqlTsv({mediaTypePriorities:{"text/tab-separated-values":.75},mediaTypeFormats:{"text/tab-separated-values":"http://www.w3.org/ns/formats/SPARQL_Results_TSV"},name:"urn:comunica:default:query-result-serialize/actors#sparql-tsv",bus:l}),new(WG()).ActorQueryResultSerializeSparqlXml({mediaTypePriorities:{"application/sparql-results+xml":.8},mediaTypeFormats:{"application/sparql-results+xml":"http://www.w3.org/ns/formats/SPARQL_Results_XML"},name:"urn:comunica:default:query-result-serialize/actors#sparql-xml",bus:l}),new(XG()).ActorQueryResultSerializeTable({columnWidth:50,mediaTypePriorities:{table:.6},mediaTypeFormats:{table:"https://comunica.linkeddatafragments.org/#results_table"},name:"urn:comunica:default:query-result-serialize/actors#table",bus:l}),new(oW()).ActorQueryResultSerializeTree({mediaTypePriorities:{tree:.5},mediaTypeFormats:{tree:"https://comunica.linkeddatafragments.org/#results_tree"},name:"urn:comunica:default:query-result-serialize/actors#tree",bus:l});const ie=new(cn()).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:l}),ae=new(xa()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:l}),Ee=new(xa()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:l}),De=new(il()).MediatorNumber({field:"filterFactor",type:"max",ignoreErrors:!0,name:"urn:comunica:default:query-source-identify-hypermedia/mediators#main",bus:c}),ge=new(hW()).ActorDereferenceFallback({name:"urn:comunica:default:dereference/actors#fallback",bus:d}),de=new(cn()).MediatorRace({name:"urn:comunica:default:dereference/mediators#main",bus:d}),fe=new(cn()).MediatorRace({name:"urn:comunica:default:dereference-rdf/mediators#main",bus:h});new(mW()).ActorRdfJoinEntriesSortCardinality({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:f});const H=new(cn()).MediatorRace({name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:f});new(wW()).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:p});const N=new(il()).MediatorNumber({field:"accuracy",type:"max",ignoreErrors:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:p});new(AW()).ActorRdfMetadataPrimaryTopic({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:"urn:comunica:default:rdf-metadata/actors#primary-topic",bus:y}),new(OW()).ActorRdfMetadataAll({name:"urn:comunica:default:rdf-metadata/actors#all",bus:y});const R=new(cn()).MediatorRace({name:"urn:comunica:default:rdf-metadata/mediators#main",bus:y});new(IW()).ActorRdfMetadataAccumulateCanContainUndefs({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cancontainundefs",bus:b}),new(DW()).ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:b}),new(CW()).ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:b}),new(LW()).ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:b});const T=new(xa()).MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:b});new(BW()).ActorRdfMetadataExtractHydraControls({name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-controls",bus:g}),new(QW()).ActorRdfMetadataExtractHydraCount({predicates:["http://www.w3.org/ns/hydra/core#totalItems","http://rdfs.org/ns/void#triples"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-count",bus:g}),new($W()).ActorRdfMetadataExtractHydraPagesize({predicates:["http://www.w3.org/ns/hydra/core#itemsPerPage"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-pagesize",bus:g}),new(kW()).ActorRdfMetadataExtractRequestTime({name:"urn:comunica:default:rdf-metadata-extract/actors#request-time",bus:g}),new(GW()).ActorRdfMetadataExtractAllowHttpMethods({name:"urn:comunica:default:rdf-metadata-extract/actors#allow-http-methods",bus:g}),new(JW()).ActorRdfMetadataExtractPutAccepted({name:"urn:comunica:default:rdf-metadata-extract/actors#put-accepted",bus:g}),new(KW()).ActorRdfMetadataExtractPatchSparqlUpdate({name:"urn:comunica:default:rdf-metadata-extract/actors#patch-sparql-update",bus:g}),new(ZW()).ActorRdfMetadataExtractSparqlService({inferHttpsEndpoint:!0,name:"urn:comunica:default:rdf-metadata-extract/actors#sparql-service",bus:g});const x=new(xa()).MediatorCombineUnion({filterErrors:!0,field:"metadata",name:"urn:comunica:default:rdf-metadata-extract/mediators#main",bus:g});new(RJ()).ActorRdfParseN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},priorityScale:1,name:"urn:comunica:default:rdf-parse/actors#n3",bus:m}),new(FJ()).ActorRdfParseRdfXml({mediaTypePriorities:{"application/rdf+xml":1},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:.5,name:"urn:comunica:default:rdf-parse/actors#rdfxml",bus:m}),new(rX()).ActorRdfParseXmlRdfa({mediaTypePriorities:{"application/xml":1,"image/svg+xml":1,"text/xml":1},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:.3,name:"urn:comunica:default:rdf-parse/actors#xmlrdfa",bus:m}),new(oX()).ActorRdfParseShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-parse/actors#shaclc",bus:m});const B=new(cn()).MediatorRace({name:"urn:comunica:default:rdf-parse/mediators#parse",bus:m}),k=new(xa()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-parse/mediators#mediaType",bus:m});new(lX()).ActorRdfParseHtml({busRdfParseHtml:v,mediaTypePriorities:{"application/xhtml+xml":.9,"text/html":1},mediaTypeFormats:{"application/xhtml+xml":"http://www.w3.org/ns/formats/HTML","text/html":"http://www.w3.org/ns/formats/HTML"},priorityScale:.2,name:"urn:comunica:default:rdf-parse/actors#html",bus:m}),new(wX()).ActorRdfParseHtmlMicrodata({name:"urn:comunica:default:rdf-parse-html/actors#microdata",bus:v}),new(TX()).ActorRdfParseHtmlRdfa({name:"urn:comunica:default:rdf-parse-html/actors#rdfa",bus:v}),new(RX()).ActorRdfResolveHypermediaLinksNext({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#next",bus:_});const V=new(cn()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links/mediators#main",bus:_});new(DX()).ActorRdfSerializeN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},name:"urn:comunica:default:rdf-serialize/actors#n3",bus:w}),new(MX()).ActorRdfSerializeJsonLd({jsonStringifyIndentSpaces:2,mediaTypePriorities:{"application/ld+json":1},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-serialize/actors#jsonld",bus:w}),new(ZX()).ActorRdfSerializeShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-serialize/actors#shaclc",bus:w});const J=new(cn()).MediatorRace({name:"urn:comunica:default:rdf-serialize/mediators#serialize",bus:w}),z=new(xa()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-serialize/mediators#mediaType",bus:w}),Y=new(xa()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:rdf-serialize/mediators#mediaTypeFormat",bus:w});new(aK()).ActorRdfResolveHypermediaLinksQueueFifo({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/actors#fifo",bus:S});const re=new(cn()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/mediators#main",bus:S}),ce=new(cn()).MediatorRace({name:"urn:comunica:default:rdf-update-hypermedia/mediators#main",bus:A});new(dK()).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:D});const Te=new(cn()).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:D}),xe=new(_K()).ActorHttpFetch({agentOptions:{keepAlive:!0,maxSockets:5},name:"urn:comunica:default:http/actors#fetch",bus:L}),Le=new(il()).MediatorNumber({field:"time",type:"min",ignoreErrors:!0,name:"urn:comunica:default:http/mediators#no-fallback",bus:L}),qe=new(il()).MediatorNumber({field:"time",type:"min",ignoreErrors:!0,name:"urn:comunica:default:http/mediators#main",bus:O});new(wK()).ActorQueryOperationSource({name:"urn:comunica:default:query-operation/actors#source",bus:E});const G=new(il()).MediatorNumber({field:"httpRequests",type:"min",ignoreErrors:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:E}),F=new(cn()).MediatorRace({name:"urn:comunica:default:query-process/mediators#main",bus:P}),Q=new(cn()).MediatorRace({name:"urn:comunica:default:query-source-identify/mediators#main",bus:M}),te=new(TK()).MediatorJoinCoefficientsFixed({cpuWeight:10,memoryWeight:1,timeWeight:2,ioWeight:10,name:"urn:comunica:default:rdf-join/mediators#main",bus:U}),me=new(N1()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-context-preprocess-query-source-identify/^3.0.0/components/ActorContextPreprocessQuerySourceIdentify.jsonld#IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator",bus:j}),Oe=new(OK()).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:j}),Ne=new(N1()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-update-quads-hypermedia/^3.0.0/components/ActorRdfUpdateQuadsHypermedia.jsonld#IActorRdfUpdateQuadsHypermediaArgs_default_invalidator",bus:j}),We=new(N1()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^3.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:j}),Ve=new(N1()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^3.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:j}),pe=new(xa()).MediatorCombineUnion({field:"mergeHandlers",name:"urn:comunica:default:merge-bindings-context/mediators#main",bus:q});new(DK()).ActorRdfJoinSingle({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:U}),new(CK()).ActorRdfJoinMultiEmpty({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:U}),new(LK()).ActorRdfJoinMultiBindSource({selectivityModifier:1e-4,blockSize:16,mediatorJoinEntriesSort:H,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind-source",bus:U}),new(HK()).ActorRdfJoinHash({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-hash",bus:U}),new(VK()).ActorRdfJoinSymmetricHash({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:U}),new(zK()).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:U}),new(WK()).ActorRdfJoinMinusHash({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#minus-hash",bus:U}),new(KK()).ActorRdfJoinMinusHashUndef({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:U}),new(C1()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!1,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-nonblocking",bus:U}),new(C1()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!0,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-blocking",bus:U}),new(C1()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!1,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-nonblocking",bus:U}),new(C1()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!0,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-blocking",bus:U}),new(rY()).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:U}),new(sY()).ActorDereferenceRdfParse({mediatorDereference:de,mediatorParse:B,mediatorParseMediatypes:k,mediaMappings:{htm:"text/html",html:"text/html",json:"application/json",jsonld:"application/ld+json",n3:"text/n3",nq:"application/n-quads",nquads:"application/n-quads",nt:"application/n-triples",ntriples:"application/n-triples",owl:"application/rdf+xml",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",shaclc:"text/shaclc",shaclce:"text/shaclc-ext",shc:"text/shaclc",shce:"text/shaclc-ext",svg:"image/svg+xml",svgz:"image/svg+xml",trig:"application/trig",ttl:"text/turtle",turtle:"text/turtle",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"application/xml"},name:"urn:comunica:default:dereference-rdf/actors#parse",bus:h}),new(cY()).ActorRdfParseHtmlScript({mediatorRdfParseMediatypes:k,mediatorRdfParseHandle:B,name:"urn:comunica:default:rdf-parse-html/actors#script",bus:v}),new(dY()).ActorQueryResultSerializeRdf({mediatorRdfSerialize:J,mediatorMediaTypeCombiner:z,mediatorMediaTypeFormatCombiner:Y,name:"urn:comunica:default:query-result-serialize/actors#rdf",bus:l}),new(hY()).ActorHttpWayback({mediatorHttp:Le,name:"urn:comunica:default:http/actors#wayback",bus:O}),new(jY()).ActorRdfParseJsonLd({mediatorHttp:qe,mediaTypePriorities:{"application/json":.15,"application/ld+json":1},mediaTypeFormats:{"application/json":"http://www.w3.org/ns/formats/JSON-LD","application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-parse/actors#jsonld",bus:m}),new(FY()).ActorRdfUpdateHypermediaPatchSparqlUpdate({mediatorHttp:qe,name:"urn:comunica:default:rdf-update-hypermedia/actors#patch-sparql-update",bus:A}),new(BY()).ActorRdfUpdateHypermediaPutLdp({mediatorHttp:qe,mediatorRdfSerializeMediatypes:z,mediatorRdfSerialize:J,name:"urn:comunica:default:rdf-update-hypermedia/actors#put-ldp",bus:A}),new(WY()).ActorRdfUpdateHypermediaSparql({mediatorHttp:qe,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,name:"urn:comunica:default:rdf-update-hypermedia/actors#sparql",bus:A}),new(XY()).ActorQueryOperationBgpJoin({mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#bgp",bus:E}),new(YY()).ActorQueryOperationAsk({mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#ask",bus:E}),new(G7()).ActorQueryOperationConstruct({mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#construct",bus:E}),new(tZ()).ActorQueryOperationDistinctHash({mediatorHashBindings:X,mediatorHashQuads:le,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#distinct",bus:E}),new(nZ()).ActorQueryOperationFromQuad({mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#from",bus:E}),new(aZ()).ActorQueryOperationProject({mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#project",bus:E}),new(oZ()).ActorQueryOperationReducedHash({mediatorHashBindings:X,cacheSize:100,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#reduced",bus:E}),new(cZ()).ActorQueryOperationSlice({mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#slice",bus:E}),new(J7()).ActorQueryOperationUnion({mediatorRdfMetadataAccumulate:T,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#union",bus:E}),new(hZ()).ActorQueryOperationPathAlt({mediatorRdfMetadataAccumulate:T,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#path-alt",bus:E}),new(yZ()).ActorQueryOperationPathInv({mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#path-inv",bus:E}),new(mZ()).ActorQueryOperationPathNps({mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#path-nps",bus:E}),new(_Z()).ActorQueryOperationPathLink({mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#path-link",bus:E}),new(wZ()).ActorQueryOperationClear({mediatorUpdateQuads:Te,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#update-clear",bus:E}),new(TZ()).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#update-composite",bus:E}),new(EZ()).ActorQueryOperationCreate({mediatorUpdateQuads:Te,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#update-create",bus:E}),new(RZ()).ActorQueryOperationDrop({mediatorUpdateQuads:Te,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#update-drop",bus:E}),new(IZ()).ActorQueryOperationLoad({mediatorUpdateQuads:Te,mediatorQuerySourceIdentify:Q,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#update-load",bus:E}),new(DZ()).ActorQueryOperationJoin({mediatorJoin:te,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#join",bus:E}),new(CZ()).ActorQueryOperationMinus({mediatorJoin:te,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#minus",bus:E}),new(LZ()).ActorQueryOperationPathSeq({mediatorJoin:te,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#path-seq",bus:E}),new(FZ()).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:H,mediatorJoin:te,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:U}),new(UZ()).ActorRdfJoinMultiSmallestFilterBindings({selectivityModifier:1e-4,blockSize:64,mediatorJoinEntriesSort:H,mediatorJoin:te,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings",bus:U});const we=new(HZ()).ActorOptimizeQueryOperationFilterPushdown({aggressivePushdown:!1,maxIterations:10,splitConjunctive:!0,mergeConjunctive:!0,pushIntoLeftJoins:!0,pushEqualityIntoPatterns:!0,name:"urn:comunica:default:optimize-query-operation/actors#filter-pushdown",bus:a,beforeActors:[K]});new(VZ()).ActorDereferenceHttp({mediatorHttp:qe,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,name:"urn:comunica:default:dereference/actors#http",bus:d,beforeActors:[ge]}),new(GZ()).ActorHttpProxy({mediatorHttp:qe,name:"urn:comunica:default:http/actors#proxy",bus:L,beforeActors:[xe]}),new(JZ()).ActorContextPreprocessQuerySourceIdentify({cacheSize:100,httpInvalidator:me,mediatorQuerySourceIdentify:Q,mediatorContextPreprocess:Z,name:"urn:comunica:default:context-preprocess/actors#query-source-identify",bus:s,beforeActors:[$]});const W=new aT.ActorInitQuery({mediatorQueryProcess:F,mediatorQueryResultSerialize:ie,mediatorQueryResultSerializeMediaTypeCombiner:ae,mediatorQueryResultSerializeMediaTypeFormatCombiner:Ee,mediatorHttpInvalidate:Oe,defaultQueryInputFormat:"sparql",allowNoSources:!1,name:"urn:comunica:default:init/actors#query",bus:u});new(KZ()).ActorRdfUpdateQuadsHypermedia({cacheSize:100,httpInvalidator:Ne,mediatorDereferenceRdf:fe,mediatorMetadata:R,mediatorMetadataExtract:x,mediatorRdfUpdateHypermedia:ce,name:"urn:comunica:default:rdf-update-quads/actors#hypermedia",bus:D});const Se=new(w5()).ActionObserverHttp({httpInvalidator:We,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^3.0.0/components/ActorQueryResultSerializeSparqlJson.jsonld#ActorQueryResultSerializeSparqlJson_default_observer",bus:L}),Ae=new(E5()).ActionObserverHttp({httpInvalidator:Ve,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^3.0.0/components/ActorQueryResultSerializeStats.jsonld#ActorQueryResultSerializeStats_default_observer",bus:L});new(see()).ActorQuerySourceIdentifyHypermediaQpf({mediatorMetadata:R,mediatorMetadataExtract:x,mediatorDereferenceRdf:fe,mediatorMergeBindingsContext:pe,subjectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject",predicateUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate",objectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",graphUri:"http://www.w3.org/ns/sparql-service-description#graph",name:"urn:comunica:default:query-source-identify-hypermedia/actors#qpf",bus:c}),new(uee()).ActorQuerySourceIdentifyHypermediaSparql({mediatorHttp:qe,mediatorMergeBindingsContext:pe,checkUrlSuffix:!0,forceHttpGet:!1,cacheSize:1024,bindMethod:"values",countTimeout:3e3,name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#sparql",bus:c}),new(Aee()).ActorQuerySourceIdentifyHypermediaNone({mediatorMergeBindingsContext:pe,name:"urn:comunica:default:query-source-identify-hypermedia/actors#none",bus:c}),new(dte()).ActorQueryOperationExtend({mediatorMergeBindingsContext:pe,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#extend",bus:E}),new(hte()).ActorQueryOperationFilter({mediatorMergeBindingsContext:pe,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#filter",bus:E}),new(bte()).ActorQueryOperationGroup({mediatorHashBindings:X,mediatorMergeBindingsContext:pe,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#group",bus:E}),new(gte()).ActorQueryOperationLeftJoin({mediatorJoin:te,mediatorMergeBindingsContext:pe,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:E}),new(vte()).ActorQueryOperationNop({mediatorMergeBindingsContext:pe,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#nop",bus:E}),new(Tte()).ActorQueryOperationOrderBy({mediatorMergeBindingsContext:pe,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#orderby",bus:E}),new(Ete()).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorMergeBindingsContext:pe,mediatorQuerySourceIdentify:Q,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#service",bus:E}),new(Rte()).ActorQueryOperationValues({mediatorMergeBindingsContext:pe,name:"urn:comunica:default:query-operation/actors#values",bus:E}),new(Ite()).ActorQueryOperationPathOneOrMore({mediatorMergeBindingsContext:pe,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:E}),new(Dte()).ActorQueryOperationPathZeroOrMore({mediatorMergeBindingsContext:pe,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:E}),new(Cte()).ActorQueryOperationPathZeroOrOne({mediatorMergeBindingsContext:pe,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:E}),new(Lte()).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:Te,mediatorMergeBindingsContext:pe,mediatorQueryOperation:G,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:E});const je=new(qte()).ActorQueryProcessSequential({mediatorContextPreprocess:Z,mediatorQueryParse:Re,mediatorOptimizeQueryOperation:he,mediatorQueryOperation:G,mediatorMergeBindingsContext:pe,name:"urn:comunica:default:query-process/actors#sequential",bus:P}),He=new(kte()).ActorQuerySourceIdentifyHypermedia({cacheSize:100,maxIterators:64,aggregateTraversalStore:!0,mediatorDereferenceRdf:fe,mediatorMetadata:R,mediatorMetadataExtract:x,mediatorMetadataAccumulate:T,mediatorQuerySourceIdentifyHypermedia:De,mediatorRdfResolveHypermediaLinks:V,mediatorRdfResolveHypermediaLinksQueue:re,mediatorMergeBindingsContext:pe,name:"urn:comunica:default:query-source-identify/actors#hypermedia",bus:M});new(Gte()).ActorRdfJoinNone({mediatorMergeBindingsContext:pe,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:U}),new(BB()).ActorRdfJoinMultiBind({bindOrder:"depth-first",selectivityModifier:1e-4,minMaxCardinalityRatio:60,mediatorJoinEntriesSort:H,mediatorQueryOperation:G,mediatorMergeBindingsContext:pe,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:U}),new(Xte()).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-6,mediatorQueryOperation:G,mediatorMergeBindingsContext:pe,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:U}),new(w5()).ActorQueryResultSerializeSparqlJson({emitMetadata:!0,httpObserver:Se,mediaTypePriorities:{"application/sparql-results+json":.8},mediaTypeFormats:{"application/sparql-results+json":"http://www.w3.org/ns/formats/SPARQL_Results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#sparql-json",bus:l}),new(E5()).ActorQueryResultSerializeStats({httpObserver:Ae,mediaTypePriorities:{stats:.5},mediaTypeFormats:{stats:"https://comunica.linkeddatafragments.org/#results_stats"},name:"urn:comunica:default:query-result-serialize/actors#stats",bus:l}),new(Yte()).ActorQueryProcessExplainParsed({queryProcessor:je,name:"urn:comunica:default:query-process/actors#explain-parsed",bus:P}),new(ere()).ActorQueryProcessExplainLogical({queryProcessor:je,name:"urn:comunica:default:query-process/actors#explain-logical",bus:P}),new(rre()).ActorQueryProcessExplainPhysical({queryProcessor:je,name:"urn:comunica:default:query-process/actors#explain-physical",bus:P});const Ge=new(ire()).ActorOptimizeQueryOperationPruneEmptySourceOperations({useAskIfSupported:!1,name:"urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations",bus:a,beforeActors:[we]});new(yA()).ActorQuerySourceIdentifyRdfJs({mediatorMergeBindingsContext:pe,name:"urn:comunica:default:query-source-identify/actors#rdfjs",bus:M,beforeActors:[He]}),new(sre()).ActorQuerySourceIdentifySerialized({mediatorRdfParse:B,mediatorQuerySourceIdentify:Q,name:"urn:comunica:default:query-source-identify/actors#serialized",bus:M,beforeActors:[He]});const tt=new(ure()).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:a,beforeActors:[Ge]}),lt=new(lre()).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:a,beforeActors:[tt]}),ut=new(fre()).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:a,beforeActors:[lt]}),oe=new(pre()).ActorOptimizeQueryOperationAssignSourcesExhaustive({name:"urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive",bus:a,beforeActors:[ut]});return new(bre()).ActorOptimizeQueryOperationDescribeToConstructsSubject({name:"urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject",bus:a,beforeActors:[oe]}),W};Object.defineProperty(Eb,"__esModule",{value:!0});Eb.QueryEngine=void 0;const gre=aT,_re=mre;class vre extends gre.QueryEngineBase{constructor(e=_re()){super(e)}}Eb.QueryEngine=vre;(function(t){var e=I&&I.__createBinding||(Object.create?function(s,n,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(n,r);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,a,o)}:function(s,n,r,a){a===void 0&&(a=r),s[a]=n[r]}),u=I&&I.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&e(n,s,r)};Object.defineProperty(t,"__esModule",{value:!0}),u(Eb,t)})(Z9);var Ks=globalThis&&globalThis.__awaiter||function(t,e,u,s){function n(r){return r instanceof u?r:new u(function(a){a(r)})}return new(u||(u=Promise))(function(r,a){function o(d){try{c(s.next(d))}catch(h){a(h)}}function l(d){try{c(s.throw(d))}catch(h){a(h)}}function c(d){d.done?r(d.value):n(d.value).then(o,l)}c((s=s.apply(t,e||[])).next())})};const lm=new Z9.QueryEngine;function wre(t,e){return Ks(this,void 0,void 0,function*(){let u=yield Sre(e||t);return u=u.replace("{url}",t),yield Tre(u)})}function Sre(t){return Ks(this,void 0,void 0,function*(){var e,u;const n=(e=(yield fetch(t,{method:"HEAD"})).headers.get("Link-Template"))===null||e===void 0?void 0:e.split(",").map(a=>{const o=a.trim().split(";"),l=o[0].trim().slice(1,-1),c=o[1].trim().split("=")[1].trim().slice(1,-1);return{url:l,rel:c}}),r=(u=n==null?void 0:n.find(a=>a.rel==="eventlog"))===null||u===void 0?void 0:u.url;if(!r)throw new Error("No event log found");return console.log("Found event log: "+r),r})}function Tre(t){return Ks(this,void 0,void 0,function*(){const e=`
    PREFIX ldes: <https://w3id.org/ldes#>
    PREFIX tree: <https://w3id.org/tree#>
    PREFIX as: <https://www.w3.org/ns/activitystreams#>
    
    SELECT ?member
    WHERE {
      ?id a ldes:EventStream;
                    tree:member ?member.
    }`;return(yield lm.queryBindings(e,{sources:[t],lenient:!0})).transform({map:s=>Ks(this,void 0,void 0,function*(){const n=s.get("member").value;return yield Are(n)})})})}function Are(t){return Ks(this,void 0,void 0,function*(){const e=`
  PREFIX as: <https://www.w3.org/ns/activitystreams#>
  
  SELECT ?id ?actorUrl ?actorName ?object ?targetUrl ?targetName ?context
  WHERE {
    ?id as:actor ?actorUrl;
        as:object ?object.
    OPTIONAL { ?id as:target ?targetUrl. }
    OPTIONAL { ?actorUrl as:name ?actorName. }
    OPTIONAL { ?targetUrl as:name ?targetName. }
    OPTIONAL { ?id as:context ?context. }
  } LIMIT 1`,u=yield(yield lm.queryBindings(e,{sources:[t],lenient:!0})).toArray();u.length!==1&&console.warn(`Found ${u.length} results for content, expected 1.`);const s=u.map(n=>{var r,a,o,l;return{id:n.get("id").value,actorUrl:n.get("actorUrl").value,actorName:(r=n.get("actorName"))===null||r===void 0?void 0:r.value,object:n.get("object").value,targetUrl:(a=n.get("targetUrl"))===null||a===void 0?void 0:a.value,targetName:(o=n.get("targetName"))===null||o===void 0?void 0:o.value,context:(l=n.get("context"))===null||l===void 0?void 0:l.value,types:[],objectTypes:[],objectRelationship:{}}})[0];return s.types=yield LM(s.id,t),s.objectTypes=yield LM(s.object,t),s.objectTypes.includes("https://www.w3.org/ns/activitystreams#Relationship")&&(s.objectRelationship=yield Ere(s.object,t)),s})}function LM(t,e){return Ks(this,void 0,void 0,function*(){if(!t)return[];const u=`    
    SELECT ?type
    WHERE {
      <${t}> a ?type.
    }`;return(yield(yield lm.queryBindings(u,{sources:[e],lenient:!0})).toArray()).map(n=>n.get("type").value)})}function Ere(t,e){return Ks(this,void 0,void 0,function*(){if(!t)return{object:void 0,relationship:void 0,subject:void 0};const u=`
    PREFIX as: <https://www.w3.org/ns/activitystreams#>
    
    SELECT ?subject ?relationship ?object
    WHERE {
        <${t}> as:subject ?subject;
                 as:relationship ?relationship;
                 as:object ?object.
    } LIMIT 1`;return(yield(yield lm.queryBindings(u,{sources:[e],lenient:!0})).toArray()).map(n=>({subject:n.get("subject").value,relationship:n.get("relationship").value,object:n.get("object").value}))[0]||{}})}const Ore={name:"ScholarlyBrowser",components:{MDBContainer:d$,MDBCard:zH,MDBCardBody:WH,MDBCardText:YH,MDBInput:O$,MDBCardTitle:XH},data(){return{artifactUrl:"",serviceNodeUrl:"",members:[],loading:!1,noEventLog:!1,lastUpdated:0}},created(){this.$watch("$route.query.artifactUrl",()=>{this.artifactUrl=this.$route.query.artifactUrl||"",this.artifactUrl.trim(),this.urlUpdated()}),this.$watch("$route.query.serviceNodeUrl",()=>{this.serviceNodeUrl=this.$route.query.serviceNodeUrl||"",this.serviceNodeUrl.trim(),this.urlUpdated()})},methods:{async urlUpdated(){if(this.noEventLog=!1,this.loading=!1,this.members=[],!(Date.now()-this.lastUpdated<1e3)&&(this.lastUpdated=Date.now(),this.$router.push({query:{artifactUrl:this.artifactUrl,serviceNodeUrl:this.serviceNodeUrl}}),!!this.artifactUrl)){this.loading=!0;try{const t=await wre(this.artifactUrl.trim(),this.serviceNodeUrl.trim());t.on("data",async e=>{e=await e,e.mainTypes=await this.getMainTypes(e.types),e.secondaryTypes=await this.getSecondaryTypes(e.types),e.objectTypes=await Promise.all(await(e==null?void 0:e.objectTypes.map(async u=>await this.getPrefixedProperty(u))))??[],this.members.push(e),this.loading=!0}),t.on("end",()=>{this.loading=!1,this.members=this.members.sort((e,u)=>(console.log(`${e.published}`),e.published<u.published?-1:e.published>u.published?1:0))})}catch{this.noEventLog=!0,this.loading=!1;return}}},async getMainTypes(t){return await Promise.all(t.filter(e=>e.startsWith("https://www.w3.org/ns/activitystreams#")).map(async e=>await this.getPrefixedProperty(e)))},async getSecondaryTypes(t){return await Promise.all(t.filter(e=>!e.startsWith("https://www.w3.org/ns/activitystreams#")).map(async e=>await this.getPrefixedProperty(e)))},async getPrefixedProperty(t){const e=await fetch(`https://prefixcc-proxy.smessie.com/?q=${encodeURIComponent(t)}`,{method:"HEAD"});return e.url.includes(`/?q=${encodeURIComponent(t)}`)?t:e.url.split("prefixcc-proxy.smessie.com/")[1]},getStyleByMainType(t){switch(t){case"as:Create":return"success";case"as:Remove":return"dark";case"as:Announce":return"warning";case"as:Offer":return"primary";case"as:Accept":return"info";case"as:Reject":return"danger";case"as:Undo":return"secondary";case"as:Update":default:return"light"}}}},Rre=""+new URL("../forkme_right_gray.png",import.meta.url).href;const xre=(t,e)=>{const u=t.__vccOpts||t;for(const[s,n]of e)u[s]=n;return u},Di=t=>(pQ("data-v-ce99c8e5"),t=t(),yQ(),t),Ire=Di(()=>Bt("a",{href:"https://github.com/MellonScholarlyCommunication/scholarly-browser"},[Bt("img",{loading:"lazy",width:"149",height:"149",src:Rre,class:"attachment-full size-full fork",alt:"Fork me on GitHub","data-recalc-dims":"1"})],-1)),Pre=Di(()=>Bt("h1",null,"Scholarly Browser",-1)),Dre=Di(()=>Bt("small",null,"Provide an optional service node URL to retrieve the event notifications from the service node.",-1)),Nre={key:0,class:"status-message"},Cre={key:1,class:"status-message"},jre=Di(()=>Bt("b",null,"No event log found.",-1)),Lre=Di(()=>Bt("b",null,"Actor: ",-1)),Mre=["href"],Fre=Di(()=>Bt("b",null,"Target: ",-1)),qre=["href"],Bre={key:1},Ure=Di(()=>Bt("b",null,"Context: ",-1)),Qre=["href"],Hre={key:1},$re=Di(()=>Bt("b",null,"Object: ",-1)),Vre=["href"],kre={key:0},zre=Di(()=>Bt("b",null,"Subject: ",-1)),Gre=["href"],Wre=Di(()=>Bt("b",null,"Relationship: ",-1)),Jre=["href"],Xre=Di(()=>Bt("b",null,"Object: ",-1)),Kre=["href"];function Yre(t,e,u,s,n,r){const a=yo("MDBInput"),o=yo("MDBCardText"),l=yo("MDBCardBody"),c=yo("MDBCard"),d=yo("MDBCardTitle"),h=yo("MDBContainer");return jt(),ir(On,null,[Ire,ar(h,null,{default:Lr(()=>[Pre,ar(c,null,{default:Lr(()=>[ar(l,{class:"w-100"},{default:Lr(()=>[ar(o,null,{default:Lr(()=>[ar(a,{label:"Artifact URL",modelValue:n.artifactUrl,"onUpdate:modelValue":e[0]||(e[0]=f=>n.artifactUrl=f),onChange:r.urlUpdated},null,8,["modelValue","onChange"]),ar(a,{label:"Service Node URL",modelValue:n.serviceNodeUrl,"onUpdate:modelValue":e[1]||(e[1]=f=>n.serviceNodeUrl=f),onChange:r.urlUpdated,class:"mt-3"},null,8,["modelValue","onChange"]),Dre]),_:1})]),_:1})]),_:1}),ar(c,null,{default:Lr(()=>[ar(l,{class:"w-100"},{default:Lr(()=>[ar(o,null,{default:Lr(()=>[n.loading?(jt(),ir("p",Nre,"Loading notifications...")):Vr("",!0),n.noEventLog?(jt(),ir("p",Cre,[jre,T0(" Make sure the provided URL contains a ldes:EventStream Link header.")])):Vr("",!0),(jt(!0),ir(On,null,KA(n.members,(f,p)=>(jt(),Ii(c,{key:p,border:r.getStyleByMainType(f.mainTypes[0])},{default:Lr(()=>[ar(l,{class:"w-100",style:{"padding-bottom":"0"}},{default:Lr(()=>[ar(d,null,{default:Lr(()=>[T0(Or(f.mainTypes.join(", ")),1)]),_:2},1024),ar(d,{subtitle:"",class:"mb-2 text-muted"},{default:Lr(()=>[T0(Or(f.secondaryTypes.join(", ")),1)]),_:2},1024),ar(o,null,{default:Lr(()=>[Bt("p",null,[Lre,Bt("a",{href:f.actorUrl},Or(f.actorName??f.actorUrl),9,Mre)]),Bt("p",null,[Fre,f.targetUrl?(jt(),ir("a",{key:0,href:f.targetUrl},Or(f.targetName??f.targetUrl),9,qre)):(jt(),ir("i",Bre,"<not provided>"))]),Bt("p",null,[Ure,f.context?(jt(),ir("a",{key:0,href:"?url="+f.context},Or(f.context),9,Qre)):(jt(),ir("i",Hre,"<not provided>"))]),Bt("p",null,[$re,Bt("a",{href:"?url="+f.object},Or(f.object),9,Vre)]),Bt("ul",null,[(jt(!0),ir(On,null,KA(f.objectTypes,(y,b)=>(jt(),ir("li",{key:b},[T0(Or(y)+" ",1),y==="as:Relationship"?(jt(),ir("ul",kre,[Bt("li",null,[zre,Bt("a",{href:f.objectRelationship.subject},Or(f.objectRelationship.subject),9,Gre)]),Bt("li",null,[Wre,Bt("a",{href:f.objectRelationship.relationship},Or(f.objectRelationship.relationship),9,Jre)]),Bt("li",null,[Xre,Bt("a",{href:f.objectRelationship.object},Or(f.objectRelationship.object),9,Kre)])])):Vr("",!0)]))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["border"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Zre=xre(Ore,[["render",Yre],["__scopeId","data-v-ce99c8e5"]]),QB=xi({__name:"App",setup(t){return(e,u)=>(jt(),ir("main",null,[ar(Zre)]))}});/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const To=typeof window<"u";function ene(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const er=Object.assign;function VS(t,e){const u={};for(const s in e){const n=e[s];u[s]=Ri(n)?n.map(t):t(n)}return u}const Q0=()=>{},Ri=Array.isArray,tne=/\/$/,rne=t=>t.replace(tne,"");function kS(t,e,u="/"){let s,n={},r="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(s=e.slice(0,l),r=e.slice(l+1,o>-1?o:e.length),n=t(r)),o>-1&&(s=s||e.slice(0,o),a=e.slice(o,e.length)),s=sne(s??e,u),{fullPath:s+(r&&"?")+r+a,path:s,query:n,hash:a}}function nne(t,e){const u=e.query?t(e.query):"";return e.path+(u&&"?")+u+(e.hash||"")}function MM(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ine(t,e,u){const s=e.matched.length-1,n=u.matched.length-1;return s>-1&&s===n&&$o(e.matched[s],u.matched[n])&&HB(e.params,u.params)&&t(e.query)===t(u.query)&&e.hash===u.hash}function $o(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function HB(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const u in t)if(!ane(t[u],e[u]))return!1;return!0}function ane(t,e){return Ri(t)?FM(t,e):Ri(e)?FM(e,t):t===e}function FM(t,e){return Ri(e)?t.length===e.length&&t.every((u,s)=>u===e[s]):t.length===1&&t[0]===e}function sne(t,e){if(t.startsWith("/"))return t;if(!t)return e;const u=e.split("/"),s=t.split("/"),n=s[s.length-1];(n===".."||n===".")&&s.push("");let r=u.length-1,a,o;for(a=0;a<s.length;a++)if(o=s[a],o!==".")if(o==="..")r>1&&r--;else break;return u.slice(0,r).join("/")+"/"+s.slice(a-(a===s.length?1:0)).join("/")}var ay;(function(t){t.pop="pop",t.push="push"})(ay||(ay={}));var H0;(function(t){t.back="back",t.forward="forward",t.unknown=""})(H0||(H0={}));function one(t){if(!t)if(To){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),rne(t)}const une=/^[^#]+#/;function cne(t,e){return t.replace(une,"#")+e}function lne(t,e){const u=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-u.left-(e.left||0),top:s.top-u.top-(e.top||0)}}const dm=()=>({left:window.pageXOffset,top:window.pageYOffset});function dne(t){let e;if("el"in t){const u=t.el,s=typeof u=="string"&&u.startsWith("#"),n=typeof u=="string"?s?document.getElementById(u.slice(1)):document.querySelector(u):u;if(!n)return;e=lne(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function qM(t,e){return(history.state?history.state.position-e:-1)+t}const j3=new Map;function fne(t,e){j3.set(t,e)}function hne(t){const e=j3.get(t);return j3.delete(t),e}let pne=()=>location.protocol+"//"+location.host;function $B(t,e){const{pathname:u,search:s,hash:n}=e,r=t.indexOf("#");if(r>-1){let o=n.includes(t.slice(r))?t.slice(r).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),MM(l,"")}return MM(u,t)+s+n}function yne(t,e,u,s){let n=[],r=[],a=null;const o=({state:f})=>{const p=$B(t,location),y=u.value,b=e.value;let g=0;if(f){if(u.value=p,e.value=f,a&&a===y){a=null;return}g=b?f.position-b.position:0}else s(p);n.forEach(m=>{m(u.value,y,{delta:g,type:ay.pop,direction:g?g>0?H0.forward:H0.back:H0.unknown})})};function l(){a=u.value}function c(f){n.push(f);const p=()=>{const y=n.indexOf(f);y>-1&&n.splice(y,1)};return r.push(p),p}function d(){const{history:f}=window;f.state&&f.replaceState(er({},f.state,{scroll:dm()}),"")}function h(){for(const f of r)f();r=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function BM(t,e,u,s=!1,n=!1){return{back:t,current:e,forward:u,replaced:s,position:window.history.length,scroll:n?dm():null}}function bne(t){const{history:e,location:u}=window,s={value:$B(t,u)},n={value:e.state};n.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,d){const h=t.indexOf("#"),f=h>-1?(u.host&&document.querySelector("base")?t:t.slice(h))+l:pne()+t+l;try{e[d?"replaceState":"pushState"](c,"",f),n.value=c}catch(p){console.error(p),u[d?"replace":"assign"](f)}}function a(l,c){const d=er({},e.state,BM(n.value.back,l,n.value.forward,!0),c,{position:n.value.position});r(l,d,!0),s.value=l}function o(l,c){const d=er({},n.value,e.state,{forward:l,scroll:dm()});r(d.current,d,!0);const h=er({},BM(s.value,l,null),{position:d.position+1},c);r(l,h,!1),s.value=l}return{location:s,state:n,push:o,replace:a}}function mne(t){t=one(t);const e=bne(t),u=yne(t,e.state,e.location,e.replace);function s(r,a=!0){a||u.pauseListeners(),history.go(r)}const n=er({location:"",base:t,go:s,createHref:cne.bind(null,t)},e,u);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function gne(t){return typeof t=="string"||t&&typeof t=="object"}function VB(t){return typeof t=="string"||typeof t=="symbol"}const Pa={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},kB=Symbol("");var UM;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(UM||(UM={}));function Vo(t,e){return er(new Error,{type:t,[kB]:!0},e)}function da(t,e){return t instanceof Error&&kB in t&&(e==null||!!(t.type&e))}const QM="[^/]+?",_ne={sensitive:!1,strict:!1,start:!0,end:!0},vne=/[.+*?^${}()[\]/\\]/g;function wne(t,e){const u=er({},_ne,e),s=[];let n=u.start?"^":"";const r=[];for(const c of t){const d=c.length?[]:[90];u.strict&&!c.length&&(n+="/");for(let h=0;h<c.length;h++){const f=c[h];let p=40+(u.sensitive?.25:0);if(f.type===0)h||(n+="/"),n+=f.value.replace(vne,"\\$&"),p+=40;else if(f.type===1){const{value:y,repeatable:b,optional:g,regexp:m}=f;r.push({name:y,repeatable:b,optional:g});const v=m||QM;if(v!==QM){p+=10;try{new RegExp(`(${v})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${y}" (${v}): `+w.message)}}let _=b?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;h||(_=g&&c.length<2?`(?:/${_})`:"/"+_),g&&(_+="?"),n+=_,p+=20,g&&(p+=-8),b&&(p+=-20),v===".*"&&(p+=-50)}d.push(p)}s.push(d)}if(u.strict&&u.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}u.strict||(n+="/?"),u.end?n+="$":u.strict&&(n+="(?:/|$)");const a=new RegExp(n,u.sensitive?"":"i");function o(c){const d=c.match(a),h={};if(!d)return null;for(let f=1;f<d.length;f++){const p=d[f]||"",y=r[f-1];h[y.name]=p&&y.repeatable?p.split("/"):p}return h}function l(c){let d="",h=!1;for(const f of t){(!h||!d.endsWith("/"))&&(d+="/"),h=!1;for(const p of f)if(p.type===0)d+=p.value;else if(p.type===1){const{value:y,repeatable:b,optional:g}=p,m=y in c?c[y]:"";if(Ri(m)&&!b)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const v=Ri(m)?m.join("/"):m;if(!v)if(g)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):h=!0);else throw new Error(`Missing required param "${y}"`);d+=v}}return d||"/"}return{re:a,score:s,keys:r,parse:o,stringify:l}}function Sne(t,e){let u=0;for(;u<t.length&&u<e.length;){const s=e[u]-t[u];if(s)return s;u++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Tne(t,e){let u=0;const s=t.score,n=e.score;for(;u<s.length&&u<n.length;){const r=Sne(s[u],n[u]);if(r)return r;u++}if(Math.abs(n.length-s.length)===1){if(HM(s))return 1;if(HM(n))return-1}return n.length-s.length}function HM(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Ane={type:0,value:""},Ene=/[a-zA-Z0-9_]/;function One(t){if(!t)return[[]];if(t==="/")return[[Ane]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${u})/"${c}": ${p}`)}let u=0,s=u;const n=[];let r;function a(){r&&n.push(r),r=[]}let o=0,l,c="",d="";function h(){c&&(u===0?r.push({type:0,value:c}):u===1||u===2||u===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&u!==2){s=u,u=4;continue}switch(u){case 0:l==="/"?(c&&h(),a()):l===":"?(h(),u=1):f();break;case 4:f(),u=s;break;case 1:l==="("?u=2:Ene.test(l)?f():(h(),u=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:u=3:d+=l;break;case 3:h(),u=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,d="";break;default:e("Unknown state");break}}return u===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),a(),n}function Rne(t,e,u){const s=wne(One(t.path),u),n=er(s,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function xne(t,e){const u=[],s=new Map;e=kM({strict:!1,end:!0,sensitive:!1},e);function n(d){return s.get(d)}function r(d,h,f){const p=!f,y=Ine(d);y.aliasOf=f&&f.record;const b=kM(e,d),g=[y];if("alias"in d){const _=typeof d.alias=="string"?[d.alias]:d.alias;for(const w of _)g.push(er({},y,{components:f?f.record.components:y.components,path:w,aliasOf:f?f.record:y}))}let m,v;for(const _ of g){const{path:w}=_;if(h&&w[0]!=="/"){const S=h.record.path,A=S[S.length-1]==="/"?"":"/";_.path=h.record.path+(w&&A+w)}if(m=Rne(_,h,b),f?f.alias.push(m):(v=v||m,v!==m&&v.alias.push(m),p&&d.name&&!VM(m)&&a(d.name)),y.children){const S=y.children;for(let A=0;A<S.length;A++)r(S[A],m,f&&f.children[A])}f=f||m,(m.record.components&&Object.keys(m.record.components).length||m.record.name||m.record.redirect)&&l(m)}return v?()=>{a(v)}:Q0}function a(d){if(VB(d)){const h=s.get(d);h&&(s.delete(d),u.splice(u.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=u.indexOf(d);h>-1&&(u.splice(h,1),d.record.name&&s.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function o(){return u}function l(d){let h=0;for(;h<u.length&&Tne(d,u[h])>=0&&(d.record.path!==u[h].record.path||!zB(d,u[h]));)h++;u.splice(h,0,d),d.record.name&&!VM(d)&&s.set(d.record.name,d)}function c(d,h){let f,p={},y,b;if("name"in d&&d.name){if(f=s.get(d.name),!f)throw Vo(1,{location:d});b=f.record.name,p=er($M(h.params,f.keys.filter(v=>!v.optional).map(v=>v.name)),d.params&&$M(d.params,f.keys.map(v=>v.name))),y=f.stringify(p)}else if("path"in d)y=d.path,f=u.find(v=>v.re.test(y)),f&&(p=f.parse(y),b=f.record.name);else{if(f=h.name?s.get(h.name):u.find(v=>v.re.test(h.path)),!f)throw Vo(1,{location:d,currentLocation:h});b=f.record.name,p=er({},h.params,d.params),y=f.stringify(p)}const g=[];let m=f;for(;m;)g.unshift(m.record),m=m.parent;return{name:b,path:y,params:p,matched:g,meta:Dne(g)}}return t.forEach(d=>r(d)),{addRoute:r,resolve:c,removeRoute:a,getRoutes:o,getRecordMatcher:n}}function $M(t,e){const u={};for(const s of e)s in t&&(u[s]=t[s]);return u}function Ine(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Pne(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Pne(t){const e={},u=t.props||!1;if("component"in t)e.default=u;else for(const s in t.components)e[s]=typeof u=="object"?u[s]:u;return e}function VM(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Dne(t){return t.reduce((e,u)=>er(e,u.meta),{})}function kM(t,e){const u={};for(const s in t)u[s]=s in e?e[s]:t[s];return u}function zB(t,e){return e.children.some(u=>u===t||zB(t,u))}const GB=/#/g,Nne=/&/g,Cne=/\//g,jne=/=/g,Lne=/\?/g,WB=/\+/g,Mne=/%5B/g,Fne=/%5D/g,JB=/%5E/g,qne=/%60/g,XB=/%7B/g,Bne=/%7C/g,KB=/%7D/g,Une=/%20/g;function mA(t){return encodeURI(""+t).replace(Bne,"|").replace(Mne,"[").replace(Fne,"]")}function Qne(t){return mA(t).replace(XB,"{").replace(KB,"}").replace(JB,"^")}function L3(t){return mA(t).replace(WB,"%2B").replace(Une,"+").replace(GB,"%23").replace(Nne,"%26").replace(qne,"`").replace(XB,"{").replace(KB,"}").replace(JB,"^")}function Hne(t){return L3(t).replace(jne,"%3D")}function $ne(t){return mA(t).replace(GB,"%23").replace(Lne,"%3F")}function Vne(t){return t==null?"":$ne(t).replace(Cne,"%2F")}function db(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function kne(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let n=0;n<s.length;++n){const r=s[n].replace(WB," "),a=r.indexOf("="),o=db(a<0?r:r.slice(0,a)),l=a<0?null:db(r.slice(a+1));if(o in e){let c=e[o];Ri(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function zM(t){let e="";for(let u in t){const s=t[u];if(u=Hne(u),s==null){s!==void 0&&(e+=(e.length?"&":"")+u);continue}(Ri(s)?s.map(r=>r&&L3(r)):[s&&L3(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+u,r!=null&&(e+="="+r))})}return e}function zne(t){const e={};for(const u in t){const s=t[u];s!==void 0&&(e[u]=Ri(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return e}const Gne=Symbol(""),GM=Symbol(""),gA=Symbol(""),YB=Symbol(""),M3=Symbol("");function v0(){let t=[];function e(s){return t.push(s),()=>{const n=t.indexOf(s);n>-1&&t.splice(n,1)}}function u(){t=[]}return{add:e,list:()=>t.slice(),reset:u}}function Ba(t,e,u,s,n){const r=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((a,o)=>{const l=h=>{h===!1?o(Vo(4,{from:u,to:e})):h instanceof Error?o(h):gne(h)?o(Vo(2,{from:e,to:h})):(r&&s.enterCallbacks[n]===r&&typeof h=="function"&&r.push(h),a())},c=t.call(s&&s.instances[n],e,u,l);let d=Promise.resolve(c);t.length<3&&(d=d.then(l)),d.catch(h=>o(h))})}function zS(t,e,u,s){const n=[];for(const r of t)for(const a in r.components){let o=r.components[a];if(!(e!=="beforeRouteEnter"&&!r.instances[a]))if(Wne(o)){const c=(o.__vccOpts||o)[e];c&&n.push(Ba(c,u,s,r,a))}else{let l=o();n.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${r.path}"`));const d=ene(c)?c.default:c;r.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&Ba(f,u,s,r,a)()}))}}return n}function Wne(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function WM(t){const e=Ai(gA),u=Ai(YB),s=sr(()=>e.resolve(qt(t.to))),n=sr(()=>{const{matched:l}=s.value,{length:c}=l,d=l[c-1],h=u.matched;if(!d||!h.length)return-1;const f=h.findIndex($o.bind(null,d));if(f>-1)return f;const p=JM(l[c-2]);return c>1&&JM(d)===p&&h[h.length-1].path!==p?h.findIndex($o.bind(null,l[c-2])):f}),r=sr(()=>n.value>-1&&Yne(u.params,s.value.params)),a=sr(()=>n.value>-1&&n.value===u.matched.length-1&&HB(u.params,s.value.params));function o(l={}){return Kne(l)?e[qt(t.replace)?"replace":"push"](qt(t.to)).catch(Q0):Promise.resolve()}return{route:s,href:sr(()=>s.value.href),isActive:r,isExactActive:a,navigate:o}}const Jne=xi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:WM,setup(t,{slots:e}){const u=mb(WM(t)),{options:s}=Ai(gA),n=sr(()=>({[XM(t.activeClass,s.linkActiveClass,"router-link-active")]:u.isActive,[XM(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:u.isExactActive}));return()=>{const r=e.default&&e.default(u);return t.custom?r:X9("a",{"aria-current":u.isExactActive?t.ariaCurrentValue:null,href:u.href,onClick:u.navigate,class:n.value},r)}}}),Xne=Jne;function Kne(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Yne(t,e){for(const u in e){const s=e[u],n=t[u];if(typeof s=="string"){if(s!==n)return!1}else if(!Ri(n)||n.length!==s.length||s.some((r,a)=>r!==n[a]))return!1}return!0}function JM(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const XM=(t,e,u)=>t??e??u,Zne=xi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:u}){const s=Ai(M3),n=sr(()=>t.route||s.value),r=Ai(GM,0),a=sr(()=>{let c=qt(r);const{matched:d}=n.value;let h;for(;(h=d[c])&&!h.components;)c++;return c}),o=sr(()=>n.value.matched[a.value]);F1(GM,sr(()=>a.value+1)),F1(Gne,o),F1(M3,n);const l=En();return Po(()=>[l.value,o.value,t.name],([c,d,h],[f,p,y])=>{d&&(d.instances[h]=c,p&&p!==d&&c&&c===f&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),c&&d&&(!p||!$o(d,p)||!f)&&(d.enterCallbacks[h]||[]).forEach(b=>b(c))},{flush:"post"}),()=>{const c=n.value,d=t.name,h=o.value,f=h&&h.components[d];if(!f)return KM(u.default,{Component:f,route:c});const p=h.props[d],y=p?p===!0?c.params:typeof p=="function"?p(c):p:null,g=X9(f,er({},y,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(h.instances[d]=null)},ref:l}));return KM(u.default,{Component:g,route:c})||g}}});function KM(t,e){if(!t)return null;const u=t(e);return u.length===1?u[0]:u}const eie=Zne;function tie(t){const e=xne(t.routes,t),u=t.parseQuery||kne,s=t.stringifyQuery||zM,n=t.history,r=v0(),a=v0(),o=v0(),l=nQ(Pa);let c=Pa;To&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=VS.bind(null,ge=>""+ge),h=VS.bind(null,Vne),f=VS.bind(null,db);function p(ge,de){let fe,H;return VB(ge)?(fe=e.getRecordMatcher(ge),H=de):H=ge,e.addRoute(H,fe)}function y(ge){const de=e.getRecordMatcher(ge);de&&e.removeRoute(de)}function b(){return e.getRoutes().map(ge=>ge.record)}function g(ge){return!!e.getRecordMatcher(ge)}function m(ge,de){if(de=er({},de||l.value),typeof ge=="string"){const x=kS(u,ge,de.path),B=e.resolve({path:x.path},de),k=n.createHref(x.fullPath);return er(x,B,{params:f(B.params),hash:db(x.hash),redirectedFrom:void 0,href:k})}let fe;if("path"in ge)fe=er({},ge,{path:kS(u,ge.path,de.path).path});else{const x=er({},ge.params);for(const B in x)x[B]==null&&delete x[B];fe=er({},ge,{params:h(x)}),de.params=h(de.params)}const H=e.resolve(fe,de),N=ge.hash||"";H.params=d(f(H.params));const R=nne(s,er({},ge,{hash:Qne(N),path:H.path})),T=n.createHref(R);return er({fullPath:R,hash:N,query:s===zM?zne(ge.query):ge.query||{}},H,{redirectedFrom:void 0,href:T})}function v(ge){return typeof ge=="string"?kS(u,ge,l.value.path):er({},ge)}function _(ge,de){if(c!==ge)return Vo(8,{from:de,to:ge})}function w(ge){return D(ge)}function S(ge){return w(er(v(ge),{replace:!0}))}function A(ge){const de=ge.matched[ge.matched.length-1];if(de&&de.redirect){const{redirect:fe}=de;let H=typeof fe=="function"?fe(ge):fe;return typeof H=="string"&&(H=H.includes("?")||H.includes("#")?H=v(H):{path:H},H.params={}),er({query:ge.query,hash:ge.hash,params:"path"in H?{}:ge.params},H)}}function D(ge,de){const fe=c=m(ge),H=l.value,N=ge.state,R=ge.force,T=ge.replace===!0,x=A(fe);if(x)return D(er(v(x),{state:typeof x=="object"?er({},N,x.state):N,force:R,replace:T}),de||fe);const B=fe;B.redirectedFrom=de;let k;return!R&&ine(s,H,fe)&&(k=Vo(16,{to:B,from:H}),he(H,H,!0,!1)),(k?Promise.resolve(k):E(B,H)).catch(V=>da(V)?da(V,2)?V:K(V):X(V,B,H)).then(V=>{if(V){if(da(V,2))return D(er({replace:T},v(V.to),{state:typeof V.to=="object"?er({},N,V.to.state):N,force:R}),de||B)}else V=M(B,H,!0,T,N);return P(B,H,V),V})}function L(ge,de){const fe=_(ge,de);return fe?Promise.reject(fe):Promise.resolve()}function O(ge){const de=ae.values().next().value;return de&&typeof de.runWithContext=="function"?de.runWithContext(ge):ge()}function E(ge,de){let fe;const[H,N,R]=rie(ge,de);fe=zS(H.reverse(),"beforeRouteLeave",ge,de);for(const x of H)x.leaveGuards.forEach(B=>{fe.push(Ba(B,ge,de))});const T=L.bind(null,ge,de);return fe.push(T),De(fe).then(()=>{fe=[];for(const x of r.list())fe.push(Ba(x,ge,de));return fe.push(T),De(fe)}).then(()=>{fe=zS(N,"beforeRouteUpdate",ge,de);for(const x of N)x.updateGuards.forEach(B=>{fe.push(Ba(B,ge,de))});return fe.push(T),De(fe)}).then(()=>{fe=[];for(const x of R)if(x.beforeEnter)if(Ri(x.beforeEnter))for(const B of x.beforeEnter)fe.push(Ba(B,ge,de));else fe.push(Ba(x.beforeEnter,ge,de));return fe.push(T),De(fe)}).then(()=>(ge.matched.forEach(x=>x.enterCallbacks={}),fe=zS(R,"beforeRouteEnter",ge,de),fe.push(T),De(fe))).then(()=>{fe=[];for(const x of a.list())fe.push(Ba(x,ge,de));return fe.push(T),De(fe)}).catch(x=>da(x,8)?x:Promise.reject(x))}function P(ge,de,fe){o.list().forEach(H=>O(()=>H(ge,de,fe)))}function M(ge,de,fe,H,N){const R=_(ge,de);if(R)return R;const T=de===Pa,x=To?history.state:{};fe&&(H||T?n.replace(ge.fullPath,er({scroll:T&&x&&x.scroll},N)):n.push(ge.fullPath,N)),l.value=ge,he(ge,de,fe,T),K()}let U;function j(){U||(U=n.listen((ge,de,fe)=>{if(!Ee.listening)return;const H=m(ge),N=A(H);if(N){D(er(N,{replace:!0}),H).catch(Q0);return}c=H;const R=l.value;To&&fne(qM(R.fullPath,fe.delta),dm()),E(H,R).catch(T=>da(T,12)?T:da(T,2)?(D(T.to,H).then(x=>{da(x,20)&&!fe.delta&&fe.type===ay.pop&&n.go(-1,!1)}).catch(Q0),Promise.reject()):(fe.delta&&n.go(-fe.delta,!1),X(T,H,R))).then(T=>{T=T||M(H,R,!1),T&&(fe.delta&&!da(T,8)?n.go(-fe.delta,!1):fe.type===ay.pop&&da(T,20)&&n.go(-1,!1)),P(H,R,T)}).catch(Q0)}))}let q=v0(),$=v0(),Z;function X(ge,de,fe){K(ge);const H=$.list();return H.length?H.forEach(N=>N(ge,de,fe)):console.error(ge),Promise.reject(ge)}function le(){return Z&&l.value!==Pa?Promise.resolve():new Promise((ge,de)=>{q.add([ge,de])})}function K(ge){return Z||(Z=!ge,j(),q.list().forEach(([de,fe])=>ge?fe(ge):de()),q.reset()),ge}function he(ge,de,fe,H){const{scrollBehavior:N}=t;if(!To||!N)return Promise.resolve();const R=!fe&&hne(qM(ge.fullPath,0))||(H||!fe)&&history.state&&history.state.scroll||null;return T9().then(()=>N(ge,de,R)).then(T=>T&&dne(T)).catch(T=>X(T,ge,de))}const Re=ge=>n.go(ge);let ie;const ae=new Set,Ee={currentRoute:l,listening:!0,addRoute:p,removeRoute:y,hasRoute:g,getRoutes:b,resolve:m,options:t,push:w,replace:S,go:Re,back:()=>Re(-1),forward:()=>Re(1),beforeEach:r.add,beforeResolve:a.add,afterEach:o.add,onError:$.add,isReady:le,install(ge){const de=this;ge.component("RouterLink",Xne),ge.component("RouterView",eie),ge.config.globalProperties.$router=de,Object.defineProperty(ge.config.globalProperties,"$route",{enumerable:!0,get:()=>qt(l)}),To&&!ie&&l.value===Pa&&(ie=!0,w(n.location).catch(N=>{}));const fe={};for(const N in Pa)Object.defineProperty(fe,N,{get:()=>l.value[N],enumerable:!0});ge.provide(gA,de),ge.provide(YB,p9(fe)),ge.provide(M3,l);const H=ge.unmount;ae.add(ge),ge.unmount=function(){ae.delete(ge),ae.size<1&&(c=Pa,U&&U(),U=null,l.value=Pa,ie=!1,Z=!1),H()}}};function De(ge){return ge.reduce((de,fe)=>de.then(()=>O(fe)),Promise.resolve())}return Ee}function rie(t,e){const u=[],s=[],n=[],r=Math.max(e.matched.length,t.matched.length);for(let a=0;a<r;a++){const o=e.matched[a];o&&(t.matched.find(c=>$o(c,o))?s.push(o):u.push(o));const l=t.matched[a];l&&(e.matched.find(c=>$o(c,l))||n.push(l))}return[u,s,n]}const nie=tie({history:mne("/scholarly-browser/"),routes:[{path:"/",component:QB,props:!0}]}),ZB=NH(QB);ZB.use(nie);ZB.mount("#app");
