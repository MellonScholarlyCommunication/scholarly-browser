var I$=Object.defineProperty;var P$=(t,e,r)=>e in t?I$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Lr=(t,e,r)=>(P$(t,typeof e!="symbol"?e+"":e,r),r),bS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var ue=(t,e,r)=>(bS(t,e,"read from private field"),r?r.call(t):e.get(t)),xt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},dt=(t,e,r,n)=>(bS(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var Ly=(t,e,r,n)=>({set _(a){dt(t,e,a,r)},get _(){return ue(t,e,n)}}),st=(t,e,r)=>(bS(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();function LO(t,e){const r=Object.create(null),n=t.split(",");for(let a=0;a<n.length;a++)r[n[a]]=!0;return e?a=>!!r[a.toLowerCase()]:a=>!!r[a]}const Rr={},Pd=[],os=()=>{},D$=()=>!1,N$=/^on[^a-z]/,sm=t=>N$.test(t),BO=t=>t.startsWith("onUpdate:"),In=Object.assign,$O=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},j$=Object.prototype.hasOwnProperty,Gt=(t,e)=>j$.call(t,e),vt=Array.isArray,Dd=t=>om(t)==="[object Map]",v8=t=>om(t)==="[object Set]",Rt=t=>typeof t=="function",ln=t=>typeof t=="string",UO=t=>typeof t=="symbol",Ur=t=>t!==null&&typeof t=="object",w8=t=>Ur(t)&&Rt(t.then)&&Rt(t.catch),S8=Object.prototype.toString,om=t=>S8.call(t),C$=t=>om(t).slice(8,-1),T8=t=>om(t)==="[object Object]",qO=t=>ln(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,eb=LO(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),um=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},F$=/-(\w)/g,Ks=um(t=>t.replace(F$,(e,r)=>r?r.toUpperCase():"")),M$=/\B([A-Z])/g,yf=um(t=>t.replace(M$,"-$1").toLowerCase()),cm=um(t=>t.charAt(0).toUpperCase()+t.slice(1)),mS=um(t=>t?`on${cm(t)}`:""),gp=(t,e)=>!Object.is(t,e),gS=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},Tb=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},L$=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let sI;const yE=()=>sI||(sI=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Cu(t){if(vt(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],a=ln(n)?q$(n):Cu(n);if(a)for(const s in a)e[s]=a[s]}return e}else{if(ln(t))return t;if(Ur(t))return t}}const B$=/;(?![^(]*\))/g,$$=/:([^]+)/,U$=/\/\*[^]*?\*\//g;function q$(t){const e={};return t.replace(U$,"").split(B$).forEach(r=>{if(r){const n=r.split($$);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function cn(t){let e="";if(ln(t))e=t;else if(vt(t))for(let r=0;r<t.length;r++){const n=cn(t[r]);n&&(e+=n+" ")}else if(Ur(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const V$="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",H$=LO(V$);function E8(t){return!!t||t===""}const Sr=t=>ln(t)?t:t==null?"":vt(t)||Ur(t)&&(t.toString===S8||!Rt(t.toString))?JSON.stringify(t,O8,2):String(t),O8=(t,e)=>e&&e.__v_isRef?O8(t,e.value):Dd(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,a])=>(r[`${n} =>`]=a,r),{})}:v8(e)?{[`Set(${e.size})`]:[...e.values()]}:Ur(e)&&!vt(e)&&!T8(e)?String(e):e;let za;class k${constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=za,!e&&za&&(this.index=(za.scopes||(za.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=za;try{return za=this,e()}finally{za=r}}}on(){za=this}off(){za=this.parent}stop(e){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function Q$(t,e=za){e&&e.active&&e.effects.push(t)}function G$(){return za}const VO=t=>{const e=new Set(t);return e.w=0,e.n=0,e},A8=t=>(t.w&Xu)>0,x8=t=>(t.n&Xu)>0,z$=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Xu},W$=t=>{const{deps:e}=t;if(e.length){let r=0;for(let n=0;n<e.length;n++){const a=e[n];A8(a)&&!x8(a)?a.delete(t):e[r++]=a,a.w&=~Xu,a.n&=~Xu}e.length=r}},bE=new WeakMap;let Lh=0,Xu=1;const mE=30;let ns;const rl=Symbol(""),gE=Symbol("");class HO{constructor(e,r=null,n){this.fn=e,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Q$(this,n)}run(){if(!this.active)return this.fn();let e=ns,r=Uu;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=ns,ns=this,Uu=!0,Xu=1<<++Lh,Lh<=mE?z$(this):oI(this),this.fn()}finally{Lh<=mE&&W$(this),Xu=1<<--Lh,ns=this.parent,Uu=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ns===this?this.deferStop=!0:this.active&&(oI(this),this.onStop&&this.onStop(),this.active=!1)}}function oI(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let Uu=!0;const R8=[];function bf(){R8.push(Uu),Uu=!1}function mf(){const t=R8.pop();Uu=t===void 0?!0:t}function zi(t,e,r){if(Uu&&ns){let n=bE.get(t);n||bE.set(t,n=new Map);let a=n.get(r);a||n.set(r,a=VO()),I8(a)}}function I8(t,e){let r=!1;Lh<=mE?x8(t)||(t.n|=Xu,r=!A8(t)):r=!t.has(ns),r&&(t.add(ns),ns.deps.push(t))}function zo(t,e,r,n,a,s){const o=bE.get(t);if(!o)return;let u=[];if(e==="clear")u=[...o.values()];else if(r==="length"&&vt(t)){const c=Number(n);o.forEach((l,d)=>{(d==="length"||d>=c)&&u.push(l)})}else switch(r!==void 0&&u.push(o.get(r)),e){case"add":vt(t)?qO(r)&&u.push(o.get("length")):(u.push(o.get(rl)),Dd(t)&&u.push(o.get(gE)));break;case"delete":vt(t)||(u.push(o.get(rl)),Dd(t)&&u.push(o.get(gE)));break;case"set":Dd(t)&&u.push(o.get(rl));break}if(u.length===1)u[0]&&_E(u[0]);else{const c=[];for(const l of u)l&&c.push(...l);_E(VO(c))}}function _E(t,e){const r=vt(t)?t:[...t];for(const n of r)n.computed&&uI(n);for(const n of r)n.computed||uI(n)}function uI(t,e){(t!==ns||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const X$=LO("__proto__,__v_isRef,__isVue"),P8=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(UO)),K$=kO(),J$=kO(!1,!0),Y$=kO(!0),cI=Z$();function Z$(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const n=tr(this);for(let s=0,o=this.length;s<o;s++)zi(n,"get",s+"");const a=n[e](...r);return a===-1||a===!1?n[e](...r.map(tr)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){bf();const n=tr(this)[e].apply(this,r);return mf(),n}}),t}function eU(t){const e=tr(this);return zi(e,"has",t),e.hasOwnProperty(t)}function kO(t=!1,e=!1){return function(n,a,s){if(a==="__v_isReactive")return!t;if(a==="__v_isReadonly")return t;if(a==="__v_isShallow")return e;if(a==="__v_raw"&&s===(t?e?bU:F8:e?C8:j8).get(n))return n;const o=vt(n);if(!t){if(o&&Gt(cI,a))return Reflect.get(cI,a,s);if(a==="hasOwnProperty")return eU}const u=Reflect.get(n,a,s);return(UO(a)?P8.has(a):X$(a))||(t||zi(n,"get",a),e)?u:ai(u)?o&&qO(a)?u:u.value:Ur(u)?t?L8(u):dm(u):u}}const tU=D8(),rU=D8(!0);function D8(t=!1){return function(r,n,a,s){let o=r[n];if(Vd(o)&&ai(o)&&!ai(a))return!1;if(!t&&(!Eb(a)&&!Vd(a)&&(o=tr(o),a=tr(a)),!vt(r)&&ai(o)&&!ai(a)))return o.value=a,!0;const u=vt(r)&&qO(n)?Number(n)<r.length:Gt(r,n),c=Reflect.set(r,n,a,s);return r===tr(s)&&(u?gp(a,o)&&zo(r,"set",n,a):zo(r,"add",n,a)),c}}function nU(t,e){const r=Gt(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&r&&zo(t,"delete",e,void 0),n}function iU(t,e){const r=Reflect.has(t,e);return(!UO(e)||!P8.has(e))&&zi(t,"has",e),r}function aU(t){return zi(t,"iterate",vt(t)?"length":rl),Reflect.ownKeys(t)}const N8={get:K$,set:tU,deleteProperty:nU,has:iU,ownKeys:aU},sU={get:Y$,set(t,e){return!0},deleteProperty(t,e){return!0}},oU=In({},N8,{get:J$,set:rU}),QO=t=>t,lm=t=>Reflect.getPrototypeOf(t);function By(t,e,r=!1,n=!1){t=t.__v_raw;const a=tr(t),s=tr(e);r||(e!==s&&zi(a,"get",e),zi(a,"get",s));const{has:o}=lm(a),u=n?QO:r?WO:_p;if(o.call(a,e))return u(t.get(e));if(o.call(a,s))return u(t.get(s));t!==a&&t.get(e)}function $y(t,e=!1){const r=this.__v_raw,n=tr(r),a=tr(t);return e||(t!==a&&zi(n,"has",t),zi(n,"has",a)),t===a?r.has(t):r.has(t)||r.has(a)}function Uy(t,e=!1){return t=t.__v_raw,!e&&zi(tr(t),"iterate",rl),Reflect.get(t,"size",t)}function lI(t){t=tr(t);const e=tr(this);return lm(e).has.call(e,t)||(e.add(t),zo(e,"add",t,t)),this}function dI(t,e){e=tr(e);const r=tr(this),{has:n,get:a}=lm(r);let s=n.call(r,t);s||(t=tr(t),s=n.call(r,t));const o=a.call(r,t);return r.set(t,e),s?gp(e,o)&&zo(r,"set",t,e):zo(r,"add",t,e),this}function fI(t){const e=tr(this),{has:r,get:n}=lm(e);let a=r.call(e,t);a||(t=tr(t),a=r.call(e,t)),n&&n.call(e,t);const s=e.delete(t);return a&&zo(e,"delete",t,void 0),s}function hI(){const t=tr(this),e=t.size!==0,r=t.clear();return e&&zo(t,"clear",void 0,void 0),r}function qy(t,e){return function(n,a){const s=this,o=s.__v_raw,u=tr(o),c=e?QO:t?WO:_p;return!t&&zi(u,"iterate",rl),o.forEach((l,d)=>n.call(a,c(l),c(d),s))}}function Vy(t,e,r){return function(...n){const a=this.__v_raw,s=tr(a),o=Dd(s),u=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=a[t](...n),d=r?QO:e?WO:_p;return!e&&zi(s,"iterate",c?gE:rl),{next(){const{value:h,done:f}=l.next();return f?{value:h,done:f}:{value:u?[d(h[0]),d(h[1])]:d(h),done:f}},[Symbol.iterator](){return this}}}}function fu(t){return function(...e){return t==="delete"?!1:this}}function uU(){const t={get(s){return By(this,s)},get size(){return Uy(this)},has:$y,add:lI,set:dI,delete:fI,clear:hI,forEach:qy(!1,!1)},e={get(s){return By(this,s,!1,!0)},get size(){return Uy(this)},has:$y,add:lI,set:dI,delete:fI,clear:hI,forEach:qy(!1,!0)},r={get(s){return By(this,s,!0)},get size(){return Uy(this,!0)},has(s){return $y.call(this,s,!0)},add:fu("add"),set:fu("set"),delete:fu("delete"),clear:fu("clear"),forEach:qy(!0,!1)},n={get(s){return By(this,s,!0,!0)},get size(){return Uy(this,!0)},has(s){return $y.call(this,s,!0)},add:fu("add"),set:fu("set"),delete:fu("delete"),clear:fu("clear"),forEach:qy(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Vy(s,!1,!1),r[s]=Vy(s,!0,!1),e[s]=Vy(s,!1,!0),n[s]=Vy(s,!0,!0)}),[t,r,e,n]}const[cU,lU,dU,fU]=uU();function GO(t,e){const r=e?t?fU:dU:t?lU:cU;return(n,a,s)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?n:Reflect.get(Gt(r,a)&&a in n?r:n,a,s)}const hU={get:GO(!1,!1)},pU={get:GO(!1,!0)},yU={get:GO(!0,!1)},j8=new WeakMap,C8=new WeakMap,F8=new WeakMap,bU=new WeakMap;function mU(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gU(t){return t.__v_skip||!Object.isExtensible(t)?0:mU(C$(t))}function dm(t){return Vd(t)?t:zO(t,!1,N8,hU,j8)}function M8(t){return zO(t,!1,oU,pU,C8)}function L8(t){return zO(t,!0,sU,yU,F8)}function zO(t,e,r,n,a){if(!Ur(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=a.get(t);if(s)return s;const o=gU(t);if(o===0)return t;const u=new Proxy(t,o===2?n:r);return a.set(t,u),u}function Nd(t){return Vd(t)?Nd(t.__v_raw):!!(t&&t.__v_isReactive)}function Vd(t){return!!(t&&t.__v_isReadonly)}function Eb(t){return!!(t&&t.__v_isShallow)}function B8(t){return Nd(t)||Vd(t)}function tr(t){const e=t&&t.__v_raw;return e?tr(e):t}function $8(t){return Tb(t,"__v_skip",!0),t}const _p=t=>Ur(t)?dm(t):t,WO=t=>Ur(t)?L8(t):t;function U8(t){Uu&&ns&&(t=tr(t),I8(t.dep||(t.dep=VO())))}function q8(t,e){t=tr(t);const r=t.dep;r&&_E(r)}function ai(t){return!!(t&&t.__v_isRef===!0)}function Si(t){return V8(t,!1)}function _U(t){return V8(t,!0)}function V8(t,e){return ai(t)?t:new vU(t,e)}class vU{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:tr(e),this._value=r?e:_p(e)}get value(){return U8(this),this._value}set value(e){const r=this.__v_isShallow||Eb(e)||Vd(e);e=r?e:tr(e),gp(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:_p(e),q8(this))}}function St(t){return ai(t)?t.value:t}const wU={get:(t,e,r)=>St(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const a=t[e];return ai(a)&&!ai(r)?(a.value=r,!0):Reflect.set(t,e,r,n)}};function H8(t){return Nd(t)?t:new Proxy(t,wU)}class SU{constructor(e,r,n,a){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new HO(e,()=>{this._dirty||(this._dirty=!0,q8(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=n}get value(){const e=tr(this);return U8(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function TU(t,e,r=!1){let n,a;const s=Rt(t);return s?(n=t,a=os):(n=t.get,a=t.set),new SU(n,a,s||!a,r)}function qu(t,e,r,n){let a;try{a=n?t(...n):t()}catch(s){fm(s,e,r)}return a}function us(t,e,r,n){if(Rt(t)){const s=qu(t,e,r,n);return s&&w8(s)&&s.catch(o=>{fm(o,e,r)}),s}const a=[];for(let s=0;s<t.length;s++)a.push(us(t[s],e,r,n));return a}function fm(t,e,r,n=!0){const a=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,u=r;for(;s;){const l=s.ec;if(l){for(let d=0;d<l.length;d++)if(l[d](t,o,u)===!1)return}s=s.parent}const c=e.appContext.config.errorHandler;if(c){qu(c,null,10,[t,o,u]);return}}EU(t,r,a,n)}function EU(t,e,r,n=!0){console.error(t)}let vp=!1,vE=!1;const ii=[];let Ls=0;const jd=[];let Po=null,Bc=0;const k8=Promise.resolve();let XO=null;function Q8(t){const e=XO||k8;return t?e.then(this?t.bind(this):t):e}function OU(t){let e=Ls+1,r=ii.length;for(;e<r;){const n=e+r>>>1;wp(ii[n])<t?e=n+1:r=n}return e}function KO(t){(!ii.length||!ii.includes(t,vp&&t.allowRecurse?Ls+1:Ls))&&(t.id==null?ii.push(t):ii.splice(OU(t.id),0,t),G8())}function G8(){!vp&&!vE&&(vE=!0,XO=k8.then(W8))}function AU(t){const e=ii.indexOf(t);e>Ls&&ii.splice(e,1)}function xU(t){vt(t)?jd.push(...t):(!Po||!Po.includes(t,t.allowRecurse?Bc+1:Bc))&&jd.push(t),G8()}function pI(t,e=vp?Ls+1:0){for(;e<ii.length;e++){const r=ii[e];r&&r.pre&&(ii.splice(e,1),e--,r())}}function z8(t){if(jd.length){const e=[...new Set(jd)];if(jd.length=0,Po){Po.push(...e);return}for(Po=e,Po.sort((r,n)=>wp(r)-wp(n)),Bc=0;Bc<Po.length;Bc++)Po[Bc]();Po=null,Bc=0}}const wp=t=>t.id==null?1/0:t.id,RU=(t,e)=>{const r=wp(t)-wp(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function W8(t){vE=!1,vp=!0,ii.sort(RU);const e=os;try{for(Ls=0;Ls<ii.length;Ls++){const r=ii[Ls];r&&r.active!==!1&&qu(r,null,14)}}finally{Ls=0,ii.length=0,z8(),vp=!1,XO=null,(ii.length||jd.length)&&W8()}}function IU(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Rr;let a=r;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in n){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=n[d]||Rr;f&&(a=r.map(p=>ln(p)?p.trim():p)),h&&(a=r.map(L$))}let u,c=n[u=mS(e)]||n[u=mS(Ks(e))];!c&&s&&(c=n[u=mS(yf(e))]),c&&us(c,t,6,a);const l=n[u+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[u])return;t.emitted[u]=!0,us(l,t,6,a)}}function X8(t,e,r=!1){const n=e.emitsCache,a=n.get(t);if(a!==void 0)return a;const s=t.emits;let o={},u=!1;if(!Rt(t)){const c=l=>{const d=X8(l,e,!0);d&&(u=!0,In(o,d))};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!u?(Ur(t)&&n.set(t,null),null):(vt(s)?s.forEach(c=>o[c]=null):In(o,s),Ur(t)&&n.set(t,o),o)}function hm(t,e){return!t||!sm(e)?!1:(e=e.slice(2).replace(/Once$/,""),Gt(t,e[0].toLowerCase()+e.slice(1))||Gt(t,yf(e))||Gt(t,e))}let Un=null,pm=null;function Ob(t){const e=Un;return Un=t,pm=t&&t.type.__scopeId||null,e}function PU(t){pm=t}function DU(){pm=null}function ar(t,e=Un,r){if(!e||t._n)return t;const n=(...a)=>{n._d&&OI(-1);const s=Ob(e);let o;try{o=t(...a)}finally{Ob(s),n._d&&OI(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function _S(t){const{type:e,vnode:r,proxy:n,withProxy:a,props:s,propsOptions:[o],slots:u,attrs:c,emit:l,render:d,renderCache:h,data:f,setupState:p,ctx:b,inheritAttrs:y}=t;let S,w;const I=Ob(t);try{if(r.shapeFlag&4){const T=a||n;S=Fs(d.call(T,T,h,s,p,f,b)),w=c}else{const T=e;S=Fs(T.length>1?T(s,{attrs:c,slots:u,emit:l}):T(s,null)),w=e.props?c:NU(c)}}catch(T){sp.length=0,fm(T,t,1),S=Qt(Ku)}let O=S;if(w&&y!==!1){const T=Object.keys(w),{shapeFlag:x}=O;T.length&&x&7&&(o&&T.some(BO)&&(w=jU(w,o)),O=Hd(O,w))}return r.dirs&&(O=Hd(O),O.dirs=O.dirs?O.dirs.concat(r.dirs):r.dirs),r.transition&&(O.transition=r.transition),S=O,Ob(I),S}const NU=t=>{let e;for(const r in t)(r==="class"||r==="style"||sm(r))&&((e||(e={}))[r]=t[r]);return e},jU=(t,e)=>{const r={};for(const n in t)(!BO(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function CU(t,e,r){const{props:n,children:a,component:s}=t,{props:o,children:u,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&c>=0){if(c&1024)return!0;if(c&16)return n?yI(n,o,l):!!o;if(c&8){const d=e.dynamicProps;for(let h=0;h<d.length;h++){const f=d[h];if(o[f]!==n[f]&&!hm(l,f))return!0}}}else return(a||u)&&(!u||!u.$stable)?!0:n===o?!1:n?o?yI(n,o,l):!0:!!o;return!1}function yI(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let a=0;a<n.length;a++){const s=n[a];if(e[s]!==t[s]&&!hm(r,s))return!0}return!1}function FU({vnode:t,parent:e},r){for(;e&&e.subTree===t;)(t=e.vnode).el=r,e=e.parent}const MU=t=>t.__isSuspense;function LU(t,e){e&&e.pendingBranch?vt(t)?e.effects.push(...t):e.effects.push(t):xU(t)}function K8(t,e){return JO(t,null,e)}const Hy={};function Cd(t,e,r){return JO(t,e,r)}function JO(t,e,{immediate:r,deep:n,flush:a,onTrack:s,onTrigger:o}=Rr){var u;const c=G$()===((u=Rn)==null?void 0:u.scope)?Rn:null;let l,d=!1,h=!1;if(ai(t)?(l=()=>t.value,d=Eb(t)):Nd(t)?(l=()=>t,n=!0):vt(t)?(h=!0,d=t.some(T=>Nd(T)||Eb(T)),l=()=>t.map(T=>{if(ai(T))return T.value;if(Nd(T))return Xc(T);if(Rt(T))return qu(T,c,2)})):Rt(t)?e?l=()=>qu(t,c,2):l=()=>{if(!(c&&c.isUnmounted))return f&&f(),us(t,c,3,[p])}:l=os,e&&n){const T=l;l=()=>Xc(T())}let f,p=T=>{f=I.onStop=()=>{qu(T,c,4)}},b;if(Tp)if(p=os,e?r&&us(e,c,3,[l(),h?[]:void 0,p]):l(),a==="sync"){const T=xq();b=T.__watcherHandles||(T.__watcherHandles=[])}else return os;let y=h?new Array(t.length).fill(Hy):Hy;const S=()=>{if(I.active)if(e){const T=I.run();(n||d||(h?T.some((x,P)=>gp(x,y[P])):gp(T,y)))&&(f&&f(),us(e,c,3,[T,y===Hy?void 0:h&&y[0]===Hy?[]:y,p]),y=T)}else I.run()};S.allowRecurse=!!e;let w;a==="sync"?w=S:a==="post"?w=()=>qi(S,c&&c.suspense):(S.pre=!0,c&&(S.id=c.uid),w=()=>KO(S));const I=new HO(l,w);e?r?S():y=I.run():a==="post"?qi(I.run.bind(I),c&&c.suspense):I.run();const O=()=>{I.stop(),c&&c.scope&&$O(c.scope.effects,I)};return b&&b.push(O),O}function BU(t,e,r){const n=this.proxy,a=ln(t)?t.includes(".")?J8(n,t):()=>n[t]:t.bind(n,n);let s;Rt(e)?s=e:(s=e.handler,r=e);const o=Rn;kd(this);const u=JO(a,s.bind(n),r);return o?kd(o):nl(),u}function J8(t,e){const r=e.split(".");return()=>{let n=t;for(let a=0;a<r.length&&n;a++)n=n[r[a]];return n}}function Xc(t,e){if(!Ur(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ai(t))Xc(t.value,e);else if(vt(t))for(let r=0;r<t.length;r++)Xc(t[r],e);else if(v8(t)||Dd(t))t.forEach(r=>{Xc(r,e)});else if(T8(t))for(const r in t)Xc(t[r],e);return t}function Ab(t,e){const r=Un;if(r===null)return t;const n=gm(r)||r.proxy,a=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,u,c,l=Rr]=e[s];o&&(Rt(o)&&(o={mounted:o,updated:o}),o.deep&&Xc(u),a.push({dir:o,instance:n,value:u,oldValue:void 0,arg:c,modifiers:l}))}return t}function wc(t,e,r,n){const a=t.dirs,s=e&&e.dirs;for(let o=0;o<a.length;o++){const u=a[o];s&&(u.oldValue=s[o].value);let c=u.dir[n];c&&(bf(),us(c,r,8,[t.el,u,t,e]),mf())}}function ji(t,e){return Rt(t)?(()=>In({name:t.name},e,{setup:t}))():t}const ip=t=>!!t.type.__asyncLoader,Y8=t=>t.type.__isKeepAlive;function $U(t,e){Z8(t,"a",e)}function UU(t,e){Z8(t,"da",e)}function Z8(t,e,r=Rn){const n=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(ym(e,n,r),r){let a=r.parent;for(;a&&a.parent;)Y8(a.parent.vnode)&&qU(n,e,r,a),a=a.parent}}function qU(t,e,r,n){const a=ym(e,t,n,!0);YO(()=>{$O(n[e],a)},r)}function ym(t,e,r=Rn,n=!1){if(r){const a=r[t]||(r[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(r.isUnmounted)return;bf(),kd(r);const u=us(e,r,t,o);return nl(),mf(),u});return n?a.unshift(s):a.push(s),s}}const tu=t=>(e,r=Rn)=>(!Tp||t==="sp")&&ym(t,(...n)=>e(...n),r),VU=tu("bm"),e5=tu("m"),HU=tu("bu"),t5=tu("u"),kU=tu("bum"),YO=tu("um"),QU=tu("sp"),GU=tu("rtg"),zU=tu("rtc");function WU(t,e=Rn){ym("ec",t,e)}const ZO="components";function ia(t,e){return n5(ZO,t,!0,e)||t}const r5=Symbol.for("v-ndc");function ys(t){return ln(t)?n5(ZO,t,!1)||t:t||r5}function n5(t,e,r=!0,n=!1){const a=Un||Rn;if(a){const s=a.type;if(t===ZO){const u=Eq(s,!1);if(u&&(u===e||u===Ks(e)||u===cm(Ks(e))))return s}const o=bI(a[t]||s[t],e)||bI(a.appContext[t],e);return!o&&n?s:o}}function bI(t,e){return t&&(t[e]||t[Ks(e)]||t[cm(Ks(e))])}function wE(t,e,r,n){let a;const s=r&&r[n];if(vt(t)||ln(t)){a=new Array(t.length);for(let o=0,u=t.length;o<u;o++)a[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){a=new Array(t);for(let o=0;o<t;o++)a[o]=e(o+1,o,void 0,s&&s[o])}else if(Ur(t))if(t[Symbol.iterator])a=Array.from(t,(o,u)=>e(o,u,void 0,s&&s[u]));else{const o=Object.keys(t);a=new Array(o.length);for(let u=0,c=o.length;u<c;u++){const l=o[u];a[u]=e(t[l],l,u,s&&s[u])}}else a=[];return r&&(r[n]=a),a}function Qi(t,e,r={},n,a){if(Un.isCE||Un.parent&&ip(Un.parent)&&Un.parent.isCE)return e!=="default"&&(r.name=e),Qt("slot",r,n&&n());let s=t[e];s&&s._c&&(s._d=!1),mt();const o=s&&i5(s(r)),u=si(ri,{key:r.key||o&&o.key||`_${e}`},o||(n?n():[]),o&&t._===1?64:-2);return!a&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),s&&s._c&&(s._d=!0),u}function i5(t){return t.some(e=>Ib(e)?!(e.type===Ku||e.type===ri&&!i5(e.children)):!0)?t:null}const SE=t=>t?y5(t)?gm(t)||t.proxy:SE(t.parent):null,ap=In(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>SE(t.parent),$root:t=>SE(t.root),$emit:t=>t.emit,$options:t=>eA(t),$forceUpdate:t=>t.f||(t.f=()=>KO(t.update)),$nextTick:t=>t.n||(t.n=Q8.bind(t.proxy)),$watch:t=>BU.bind(t)}),vS=(t,e)=>t!==Rr&&!t.__isScriptSetup&&Gt(t,e),XU={get({_:t},e){const{ctx:r,setupState:n,data:a,props:s,accessCache:o,type:u,appContext:c}=t;let l;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return a[e];case 4:return r[e];case 3:return s[e]}else{if(vS(n,e))return o[e]=1,n[e];if(a!==Rr&&Gt(a,e))return o[e]=2,a[e];if((l=t.propsOptions[0])&&Gt(l,e))return o[e]=3,s[e];if(r!==Rr&&Gt(r,e))return o[e]=4,r[e];TE&&(o[e]=0)}}const d=ap[e];let h,f;if(d)return e==="$attrs"&&zi(t,"get",e),d(t);if((h=u.__cssModules)&&(h=h[e]))return h;if(r!==Rr&&Gt(r,e))return o[e]=4,r[e];if(f=c.config.globalProperties,Gt(f,e))return f[e]},set({_:t},e,r){const{data:n,setupState:a,ctx:s}=t;return vS(a,e)?(a[e]=r,!0):n!==Rr&&Gt(n,e)?(n[e]=r,!0):Gt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:a,propsOptions:s}},o){let u;return!!r[o]||t!==Rr&&Gt(t,o)||vS(e,o)||(u=s[0])&&Gt(u,o)||Gt(n,o)||Gt(ap,o)||Gt(a.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Gt(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function KU(){return JU().attrs}function JU(){const t=vq();return t.setupContext||(t.setupContext=m5(t))}function mI(t){return vt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let TE=!0;function YU(t){const e=eA(t),r=t.proxy,n=t.ctx;TE=!1,e.beforeCreate&&gI(e.beforeCreate,t,"bc");const{data:a,computed:s,methods:o,watch:u,provide:c,inject:l,created:d,beforeMount:h,mounted:f,beforeUpdate:p,updated:b,activated:y,deactivated:S,beforeDestroy:w,beforeUnmount:I,destroyed:O,unmounted:T,render:x,renderTracked:P,renderTriggered:B,errorCaptured:Q,serverPrefetch:N,expose:D,inheritAttrs:F,components:W,directives:z,filters:M}=e;if(l&&ZU(l,n,null),o)for(const ie in o){const ne=o[ie];Rt(ne)&&(n[ie]=ne.bind(r))}if(a){const ie=a.call(r,r);Ur(ie)&&(t.data=dm(ie))}if(TE=!0,s)for(const ie in s){const ne=s[ie],fe=Rt(ne)?ne.bind(r,r):Rt(ne.get)?ne.get.bind(r,r):os,_e=!Rt(ne)&&Rt(ne.set)?ne.set.bind(r):os,we=zt({get:fe,set:_e});Object.defineProperty(n,ie,{enumerable:!0,configurable:!0,get:()=>we.value,set:Ce=>we.value=Ce})}if(u)for(const ie in u)a5(u[ie],n,r,ie);if(c){const ie=Rt(c)?c.call(r):c;Reflect.ownKeys(ie).forEach(ne=>{tb(ne,ie[ne])})}d&&gI(d,t,"c");function V(ie,ne){vt(ne)?ne.forEach(fe=>ie(fe.bind(r))):ne&&ie(ne.bind(r))}if(V(VU,h),V(e5,f),V(HU,p),V(t5,b),V($U,y),V(UU,S),V(WU,Q),V(zU,P),V(GU,B),V(kU,I),V(YO,T),V(QU,N),vt(D))if(D.length){const ie=t.exposed||(t.exposed={});D.forEach(ne=>{Object.defineProperty(ie,ne,{get:()=>r[ne],set:fe=>r[ne]=fe})})}else t.exposed||(t.exposed={});x&&t.render===os&&(t.render=x),F!=null&&(t.inheritAttrs=F),W&&(t.components=W),z&&(t.directives=z)}function ZU(t,e,r=os){vt(t)&&(t=EE(t));for(const n in t){const a=t[n];let s;Ur(a)?"default"in a?s=cs(a.from||n,a.default,!0):s=cs(a.from||n):s=cs(a),ai(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[n]=s}}function gI(t,e,r){us(vt(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function a5(t,e,r,n){const a=n.includes(".")?J8(r,n):()=>r[n];if(ln(t)){const s=e[t];Rt(s)&&Cd(a,s)}else if(Rt(t))Cd(a,t.bind(r));else if(Ur(t))if(vt(t))t.forEach(s=>a5(s,e,r,n));else{const s=Rt(t.handler)?t.handler.bind(r):e[t.handler];Rt(s)&&Cd(a,s,t)}}function eA(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:a,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,u=s.get(e);let c;return u?c=u:!a.length&&!r&&!n?c=e:(c={},a.length&&a.forEach(l=>xb(c,l,o,!0)),xb(c,e,o)),Ur(e)&&s.set(e,c),c}function xb(t,e,r,n=!1){const{mixins:a,extends:s}=e;s&&xb(t,s,r,!0),a&&a.forEach(o=>xb(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const u=eq[o]||r&&r[o];t[o]=u?u(t[o],e[o]):e[o]}return t}const eq={data:_I,props:vI,emits:vI,methods:Bh,computed:Bh,beforeCreate:_i,created:_i,beforeMount:_i,mounted:_i,beforeUpdate:_i,updated:_i,beforeDestroy:_i,beforeUnmount:_i,destroyed:_i,unmounted:_i,activated:_i,deactivated:_i,errorCaptured:_i,serverPrefetch:_i,components:Bh,directives:Bh,watch:rq,provide:_I,inject:tq};function _I(t,e){return e?t?function(){return In(Rt(t)?t.call(this,this):t,Rt(e)?e.call(this,this):e)}:e:t}function tq(t,e){return Bh(EE(t),EE(e))}function EE(t){if(vt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function _i(t,e){return t?[...new Set([].concat(t,e))]:e}function Bh(t,e){return t?In(Object.create(null),t,e):e}function vI(t,e){return t?vt(t)&&vt(e)?[...new Set([...t,...e])]:In(Object.create(null),mI(t),mI(e??{})):e}function rq(t,e){if(!t)return e;if(!e)return t;const r=In(Object.create(null),t);for(const n in e)r[n]=_i(t[n],e[n]);return r}function s5(){return{app:null,config:{isNativeTag:D$,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nq=0;function iq(t,e){return function(n,a=null){Rt(n)||(n=In({},n)),a!=null&&!Ur(a)&&(a=null);const s=s5(),o=new Set;let u=!1;const c=s.app={_uid:nq++,_component:n,_props:a,_container:null,_context:s,_instance:null,version:Rq,get config(){return s.config},set config(l){},use(l,...d){return o.has(l)||(l&&Rt(l.install)?(o.add(l),l.install(c,...d)):Rt(l)&&(o.add(l),l(c,...d))),c},mixin(l){return s.mixins.includes(l)||s.mixins.push(l),c},component(l,d){return d?(s.components[l]=d,c):s.components[l]},directive(l,d){return d?(s.directives[l]=d,c):s.directives[l]},mount(l,d,h){if(!u){const f=Qt(n,a);return f.appContext=s,d&&e?e(f,l):t(f,l,h),u=!0,c._container=l,l.__vue_app__=c,gm(f.component)||f.component.proxy}},unmount(){u&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,d){return s.provides[l]=d,c},runWithContext(l){Rb=c;try{return l()}finally{Rb=null}}};return c}}let Rb=null;function tb(t,e){if(Rn){let r=Rn.provides;const n=Rn.parent&&Rn.parent.provides;n===r&&(r=Rn.provides=Object.create(n)),r[t]=e}}function cs(t,e,r=!1){const n=Rn||Un;if(n||Rb){const a=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Rb._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return r&&Rt(e)?e.call(n&&n.proxy):e}}function aq(t,e,r,n=!1){const a={},s={};Tb(s,mm,1),t.propsDefaults=Object.create(null),o5(t,e,a,s);for(const o in t.propsOptions[0])o in a||(a[o]=void 0);r?t.props=n?a:M8(a):t.type.props?t.props=a:t.props=s,t.attrs=s}function sq(t,e,r,n){const{props:a,attrs:s,vnode:{patchFlag:o}}=t,u=tr(a),[c]=t.propsOptions;let l=!1;if((n||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let h=0;h<d.length;h++){let f=d[h];if(hm(t.emitsOptions,f))continue;const p=e[f];if(c)if(Gt(s,f))p!==s[f]&&(s[f]=p,l=!0);else{const b=Ks(f);a[b]=OE(c,u,b,p,t,!1)}else p!==s[f]&&(s[f]=p,l=!0)}}}else{o5(t,e,a,s)&&(l=!0);let d;for(const h in u)(!e||!Gt(e,h)&&((d=yf(h))===h||!Gt(e,d)))&&(c?r&&(r[h]!==void 0||r[d]!==void 0)&&(a[h]=OE(c,u,h,void 0,t,!0)):delete a[h]);if(s!==u)for(const h in s)(!e||!Gt(e,h))&&(delete s[h],l=!0)}l&&zo(t,"set","$attrs")}function o5(t,e,r,n){const[a,s]=t.propsOptions;let o=!1,u;if(e)for(let c in e){if(eb(c))continue;const l=e[c];let d;a&&Gt(a,d=Ks(c))?!s||!s.includes(d)?r[d]=l:(u||(u={}))[d]=l:hm(t.emitsOptions,c)||(!(c in n)||l!==n[c])&&(n[c]=l,o=!0)}if(s){const c=tr(r),l=u||Rr;for(let d=0;d<s.length;d++){const h=s[d];r[h]=OE(a,c,h,l[h],t,!Gt(l,h))}}return o}function OE(t,e,r,n,a,s){const o=t[r];if(o!=null){const u=Gt(o,"default");if(u&&n===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Rt(c)){const{propsDefaults:l}=a;r in l?n=l[r]:(kd(a),n=l[r]=c.call(null,e),nl())}else n=c}o[0]&&(s&&!u?n=!1:o[1]&&(n===""||n===yf(r))&&(n=!0))}return n}function u5(t,e,r=!1){const n=e.propsCache,a=n.get(t);if(a)return a;const s=t.props,o={},u=[];let c=!1;if(!Rt(t)){const d=h=>{c=!0;const[f,p]=u5(h,e,!0);In(o,f),p&&u.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!c)return Ur(t)&&n.set(t,Pd),Pd;if(vt(s))for(let d=0;d<s.length;d++){const h=Ks(s[d]);wI(h)&&(o[h]=Rr)}else if(s)for(const d in s){const h=Ks(d);if(wI(h)){const f=s[d],p=o[h]=vt(f)||Rt(f)?{type:f}:In({},f);if(p){const b=EI(Boolean,p.type),y=EI(String,p.type);p[0]=b>-1,p[1]=y<0||b<y,(b>-1||Gt(p,"default"))&&u.push(h)}}}const l=[o,u];return Ur(t)&&n.set(t,l),l}function wI(t){return t[0]!=="$"}function SI(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function TI(t,e){return SI(t)===SI(e)}function EI(t,e){return vt(e)?e.findIndex(r=>TI(r,t)):Rt(e)&&TI(e,t)?0:-1}const c5=t=>t[0]==="_"||t==="$stable",tA=t=>vt(t)?t.map(Fs):[Fs(t)],oq=(t,e,r)=>{if(e._n)return e;const n=ar((...a)=>tA(e(...a)),r);return n._c=!1,n},l5=(t,e,r)=>{const n=t._ctx;for(const a in t){if(c5(a))continue;const s=t[a];if(Rt(s))e[a]=oq(a,s,n);else if(s!=null){const o=tA(s);e[a]=()=>o}}},d5=(t,e)=>{const r=tA(e);t.slots.default=()=>r},uq=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=tr(e),Tb(e,"_",r)):l5(e,t.slots={})}else t.slots={},e&&d5(t,e);Tb(t.slots,mm,1)},cq=(t,e,r)=>{const{vnode:n,slots:a}=t;let s=!0,o=Rr;if(n.shapeFlag&32){const u=e._;u?r&&u===1?s=!1:(In(a,e),!r&&u===1&&delete a._):(s=!e.$stable,l5(e,a)),o=e}else e&&(d5(t,e),o={default:1});if(s)for(const u in a)!c5(u)&&!(u in o)&&delete a[u]};function AE(t,e,r,n,a=!1){if(vt(t)){t.forEach((f,p)=>AE(f,e&&(vt(e)?e[p]:e),r,n,a));return}if(ip(n)&&!a)return;const s=n.shapeFlag&4?gm(n.component)||n.component.proxy:n.el,o=a?null:s,{i:u,r:c}=t,l=e&&e.r,d=u.refs===Rr?u.refs={}:u.refs,h=u.setupState;if(l!=null&&l!==c&&(ln(l)?(d[l]=null,Gt(h,l)&&(h[l]=null)):ai(l)&&(l.value=null)),Rt(c))qu(c,u,12,[o,d]);else{const f=ln(c),p=ai(c);if(f||p){const b=()=>{if(t.f){const y=f?Gt(h,c)?h[c]:d[c]:c.value;a?vt(y)&&$O(y,s):vt(y)?y.includes(s)||y.push(s):f?(d[c]=[s],Gt(h,c)&&(h[c]=d[c])):(c.value=[s],t.k&&(d[t.k]=c.value))}else f?(d[c]=o,Gt(h,c)&&(h[c]=o)):p&&(c.value=o,t.k&&(d[t.k]=o))};o?(b.id=-1,qi(b,r)):b()}}}const qi=LU;function lq(t){return dq(t)}function dq(t,e){const r=yE();r.__VUE__=!0;const{insert:n,remove:a,patchProp:s,createElement:o,createText:u,createComment:c,setText:l,setElementText:d,parentNode:h,nextSibling:f,setScopeId:p=os,insertStaticContent:b}=t,y=(A,m,v,j=null,q=null,$=null,G=!1,Y=null,J=!!m.dynamicChildren)=>{if(A===m)return;A&&!Yf(A,m)&&(j=he(A),Ce(A,q,$,!0),A=null),m.patchFlag===-2&&(J=!1,m.dynamicChildren=null);const{type:re,ref:de,shapeFlag:be}=m;switch(re){case bm:S(A,m,v,j);break;case Ku:w(A,m,v,j);break;case wS:A==null&&I(m,v,j,G);break;case ri:W(A,m,v,j,q,$,G,Y,J);break;default:be&1?x(A,m,v,j,q,$,G,Y,J):be&6?z(A,m,v,j,q,$,G,Y,J):(be&64||be&128)&&re.process(A,m,v,j,q,$,G,Y,J,me)}de!=null&&q&&AE(de,A&&A.ref,$,m||A,!m)},S=(A,m,v,j)=>{if(A==null)n(m.el=u(m.children),v,j);else{const q=m.el=A.el;m.children!==A.children&&l(q,m.children)}},w=(A,m,v,j)=>{A==null?n(m.el=c(m.children||""),v,j):m.el=A.el},I=(A,m,v,j)=>{[A.el,A.anchor]=b(A.children,m,v,j,A.el,A.anchor)},O=({el:A,anchor:m},v,j)=>{let q;for(;A&&A!==m;)q=f(A),n(A,v,j),A=q;n(m,v,j)},T=({el:A,anchor:m})=>{let v;for(;A&&A!==m;)v=f(A),a(A),A=v;a(m)},x=(A,m,v,j,q,$,G,Y,J)=>{G=G||m.type==="svg",A==null?P(m,v,j,q,$,G,Y,J):N(A,m,q,$,G,Y,J)},P=(A,m,v,j,q,$,G,Y)=>{let J,re;const{type:de,props:be,shapeFlag:Ee,transition:xe,dirs:Pe}=A;if(J=A.el=o(A.type,$,be&&be.is,be),Ee&8?d(J,A.children):Ee&16&&Q(A.children,J,null,j,q,$&&de!=="foreignObject",G,Y),Pe&&wc(A,null,j,"created"),B(J,A,A.scopeId,G,j),be){for(const E in be)E!=="value"&&!eb(E)&&s(J,E,null,be[E],$,A.children,j,q,Ie);"value"in be&&s(J,"value",null,be.value),(re=be.onVnodeBeforeMount)&&As(re,j,A)}Pe&&wc(A,null,j,"beforeMount");const U=(!q||q&&!q.pendingBranch)&&xe&&!xe.persisted;U&&xe.beforeEnter(J),n(J,m,v),((re=be&&be.onVnodeMounted)||U||Pe)&&qi(()=>{re&&As(re,j,A),U&&xe.enter(J),Pe&&wc(A,null,j,"mounted")},q)},B=(A,m,v,j,q)=>{if(v&&p(A,v),j)for(let $=0;$<j.length;$++)p(A,j[$]);if(q){let $=q.subTree;if(m===$){const G=q.vnode;B(A,G,G.scopeId,G.slotScopeIds,q.parent)}}},Q=(A,m,v,j,q,$,G,Y,J=0)=>{for(let re=J;re<A.length;re++){const de=A[re]=Y?Ou(A[re]):Fs(A[re]);y(null,de,m,v,j,q,$,G,Y)}},N=(A,m,v,j,q,$,G)=>{const Y=m.el=A.el;let{patchFlag:J,dynamicChildren:re,dirs:de}=m;J|=A.patchFlag&16;const be=A.props||Rr,Ee=m.props||Rr;let xe;v&&Sc(v,!1),(xe=Ee.onVnodeBeforeUpdate)&&As(xe,v,m,A),de&&wc(m,A,v,"beforeUpdate"),v&&Sc(v,!0);const Pe=q&&m.type!=="foreignObject";if(re?D(A.dynamicChildren,re,Y,v,j,Pe,$):G||ne(A,m,Y,null,v,j,Pe,$,!1),J>0){if(J&16)F(Y,m,be,Ee,v,j,q);else if(J&2&&be.class!==Ee.class&&s(Y,"class",null,Ee.class,q),J&4&&s(Y,"style",be.style,Ee.style,q),J&8){const U=m.dynamicProps;for(let E=0;E<U.length;E++){const R=U[E],K=be[R],ce=Ee[R];(ce!==K||R==="value")&&s(Y,R,K,ce,q,A.children,v,j,Ie)}}J&1&&A.children!==m.children&&d(Y,m.children)}else!G&&re==null&&F(Y,m,be,Ee,v,j,q);((xe=Ee.onVnodeUpdated)||de)&&qi(()=>{xe&&As(xe,v,m,A),de&&wc(m,A,v,"updated")},j)},D=(A,m,v,j,q,$,G)=>{for(let Y=0;Y<m.length;Y++){const J=A[Y],re=m[Y],de=J.el&&(J.type===ri||!Yf(J,re)||J.shapeFlag&70)?h(J.el):v;y(J,re,de,null,j,q,$,G,!0)}},F=(A,m,v,j,q,$,G)=>{if(v!==j){if(v!==Rr)for(const Y in v)!eb(Y)&&!(Y in j)&&s(A,Y,v[Y],null,G,m.children,q,$,Ie);for(const Y in j){if(eb(Y))continue;const J=j[Y],re=v[Y];J!==re&&Y!=="value"&&s(A,Y,re,J,G,m.children,q,$,Ie)}"value"in j&&s(A,"value",v.value,j.value)}},W=(A,m,v,j,q,$,G,Y,J)=>{const re=m.el=A?A.el:u(""),de=m.anchor=A?A.anchor:u("");let{patchFlag:be,dynamicChildren:Ee,slotScopeIds:xe}=m;xe&&(Y=Y?Y.concat(xe):xe),A==null?(n(re,v,j),n(de,v,j),Q(m.children,v,de,q,$,G,Y,J)):be>0&&be&64&&Ee&&A.dynamicChildren?(D(A.dynamicChildren,Ee,v,q,$,G,Y),(m.key!=null||q&&m===q.subTree)&&f5(A,m,!0)):ne(A,m,v,de,q,$,G,Y,J)},z=(A,m,v,j,q,$,G,Y,J)=>{m.slotScopeIds=Y,A==null?m.shapeFlag&512?q.ctx.activate(m,v,j,G,J):M(m,v,j,q,$,G,J):C(A,m,J)},M=(A,m,v,j,q,$,G)=>{const Y=A.component=_q(A,j,q);if(Y8(A)&&(Y.ctx.renderer=me),wq(Y),Y.asyncDep){if(q&&q.registerDep(Y,V),!A.el){const J=Y.subTree=Qt(Ku);w(null,J,m,v)}return}V(Y,A,m,v,q,$,G)},C=(A,m,v)=>{const j=m.component=A.component;if(CU(A,m,v))if(j.asyncDep&&!j.asyncResolved){ie(j,m,v);return}else j.next=m,AU(j.update),j.update();else m.el=A.el,j.vnode=m},V=(A,m,v,j,q,$,G)=>{const Y=()=>{if(A.isMounted){let{next:de,bu:be,u:Ee,parent:xe,vnode:Pe}=A,U=de,E;Sc(A,!1),de?(de.el=Pe.el,ie(A,de,G)):de=Pe,be&&gS(be),(E=de.props&&de.props.onVnodeBeforeUpdate)&&As(E,xe,de,Pe),Sc(A,!0);const R=_S(A),K=A.subTree;A.subTree=R,y(K,R,h(K.el),he(K),A,q,$),de.el=R.el,U===null&&FU(A,R.el),Ee&&qi(Ee,q),(E=de.props&&de.props.onVnodeUpdated)&&qi(()=>As(E,xe,de,Pe),q)}else{let de;const{el:be,props:Ee}=m,{bm:xe,m:Pe,parent:U}=A,E=ip(m);if(Sc(A,!1),xe&&gS(xe),!E&&(de=Ee&&Ee.onVnodeBeforeMount)&&As(de,U,m),Sc(A,!0),be&&H){const R=()=>{A.subTree=_S(A),H(be,A.subTree,A,q,null)};E?m.type.__asyncLoader().then(()=>!A.isUnmounted&&R()):R()}else{const R=A.subTree=_S(A);y(null,R,v,j,A,q,$),m.el=R.el}if(Pe&&qi(Pe,q),!E&&(de=Ee&&Ee.onVnodeMounted)){const R=m;qi(()=>As(de,U,R),q)}(m.shapeFlag&256||U&&ip(U.vnode)&&U.vnode.shapeFlag&256)&&A.a&&qi(A.a,q),A.isMounted=!0,m=v=j=null}},J=A.effect=new HO(Y,()=>KO(re),A.scope),re=A.update=()=>J.run();re.id=A.uid,Sc(A,!0),re()},ie=(A,m,v)=>{m.component=A;const j=A.vnode.props;A.vnode=m,A.next=null,sq(A,m.props,j,v),cq(A,m.children,v),bf(),pI(),mf()},ne=(A,m,v,j,q,$,G,Y,J=!1)=>{const re=A&&A.children,de=A?A.shapeFlag:0,be=m.children,{patchFlag:Ee,shapeFlag:xe}=m;if(Ee>0){if(Ee&128){_e(re,be,v,j,q,$,G,Y,J);return}else if(Ee&256){fe(re,be,v,j,q,$,G,Y,J);return}}xe&8?(de&16&&Ie(re,q,$),be!==re&&d(v,be)):de&16?xe&16?_e(re,be,v,j,q,$,G,Y,J):Ie(re,q,$,!0):(de&8&&d(v,""),xe&16&&Q(be,v,j,q,$,G,Y,J))},fe=(A,m,v,j,q,$,G,Y,J)=>{A=A||Pd,m=m||Pd;const re=A.length,de=m.length,be=Math.min(re,de);let Ee;for(Ee=0;Ee<be;Ee++){const xe=m[Ee]=J?Ou(m[Ee]):Fs(m[Ee]);y(A[Ee],xe,v,null,q,$,G,Y,J)}re>de?Ie(A,q,$,!0,!1,be):Q(m,v,j,q,$,G,Y,J,be)},_e=(A,m,v,j,q,$,G,Y,J)=>{let re=0;const de=m.length;let be=A.length-1,Ee=de-1;for(;re<=be&&re<=Ee;){const xe=A[re],Pe=m[re]=J?Ou(m[re]):Fs(m[re]);if(Yf(xe,Pe))y(xe,Pe,v,null,q,$,G,Y,J);else break;re++}for(;re<=be&&re<=Ee;){const xe=A[be],Pe=m[Ee]=J?Ou(m[Ee]):Fs(m[Ee]);if(Yf(xe,Pe))y(xe,Pe,v,null,q,$,G,Y,J);else break;be--,Ee--}if(re>be){if(re<=Ee){const xe=Ee+1,Pe=xe<de?m[xe].el:j;for(;re<=Ee;)y(null,m[re]=J?Ou(m[re]):Fs(m[re]),v,Pe,q,$,G,Y,J),re++}}else if(re>Ee)for(;re<=be;)Ce(A[re],q,$,!0),re++;else{const xe=re,Pe=re,U=new Map;for(re=Pe;re<=Ee;re++){const ke=m[re]=J?Ou(m[re]):Fs(m[re]);ke.key!=null&&U.set(ke.key,re)}let E,R=0;const K=Ee-Pe+1;let ce=!1,ye=0;const ge=new Array(K);for(re=0;re<K;re++)ge[re]=0;for(re=xe;re<=be;re++){const ke=A[re];if(R>=K){Ce(ke,q,$,!0);continue}let Xe;if(ke.key!=null)Xe=U.get(ke.key);else for(E=Pe;E<=Ee;E++)if(ge[E-Pe]===0&&Yf(ke,m[E])){Xe=E;break}Xe===void 0?Ce(ke,q,$,!0):(ge[Xe-Pe]=re+1,Xe>=ye?ye=Xe:ce=!0,y(ke,m[Xe],v,null,q,$,G,Y,J),R++)}const $e=ce?fq(ge):Pd;for(E=$e.length-1,re=K-1;re>=0;re--){const ke=Pe+re,Xe=m[ke],Ke=ke+1<de?m[ke+1].el:j;ge[re]===0?y(null,Xe,v,Ke,q,$,G,Y,J):ce&&(E<0||re!==$e[E]?we(Xe,v,Ke,2):E--)}}},we=(A,m,v,j,q=null)=>{const{el:$,type:G,transition:Y,children:J,shapeFlag:re}=A;if(re&6){we(A.component.subTree,m,v,j);return}if(re&128){A.suspense.move(m,v,j);return}if(re&64){G.move(A,m,v,me);return}if(G===ri){n($,m,v);for(let be=0;be<J.length;be++)we(J[be],m,v,j);n(A.anchor,m,v);return}if(G===wS){O(A,m,v);return}if(j!==2&&re&1&&Y)if(j===0)Y.beforeEnter($),n($,m,v),qi(()=>Y.enter($),q);else{const{leave:be,delayLeave:Ee,afterLeave:xe}=Y,Pe=()=>n($,m,v),U=()=>{be($,()=>{Pe(),xe&&xe()})};Ee?Ee($,Pe,U):U()}else n($,m,v)},Ce=(A,m,v,j=!1,q=!1)=>{const{type:$,props:G,ref:Y,children:J,dynamicChildren:re,shapeFlag:de,patchFlag:be,dirs:Ee}=A;if(Y!=null&&AE(Y,null,v,A,!0),de&256){m.ctx.deactivate(A);return}const xe=de&1&&Ee,Pe=!ip(A);let U;if(Pe&&(U=G&&G.onVnodeBeforeUnmount)&&As(U,m,A),de&6)Ae(A.component,v,j);else{if(de&128){A.suspense.unmount(v,j);return}xe&&wc(A,null,m,"beforeUnmount"),de&64?A.type.remove(A,m,v,q,me,j):re&&($!==ri||be>0&&be&64)?Ie(re,m,v,!1,!0):($===ri&&be&384||!q&&de&16)&&Ie(J,m,v),j&&oe(A)}(Pe&&(U=G&&G.onVnodeUnmounted)||xe)&&qi(()=>{U&&As(U,m,A),xe&&wc(A,null,m,"unmounted")},v)},oe=A=>{const{type:m,el:v,anchor:j,transition:q}=A;if(m===ri){ae(v,j);return}if(m===wS){T(A);return}const $=()=>{a(v),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(A.shapeFlag&1&&q&&!q.persisted){const{leave:G,delayLeave:Y}=q,J=()=>G(v,$);Y?Y(A.el,$,J):J()}else $()},ae=(A,m)=>{let v;for(;A!==m;)v=f(A),a(A),A=v;a(m)},Ae=(A,m,v)=>{const{bum:j,scope:q,update:$,subTree:G,um:Y}=A;j&&gS(j),q.stop(),$&&($.active=!1,Ce(G,A,m,v)),Y&&qi(Y,m),qi(()=>{A.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},Ie=(A,m,v,j=!1,q=!1,$=0)=>{for(let G=$;G<A.length;G++)Ce(A[G],m,v,j,q)},he=A=>A.shapeFlag&6?he(A.component.subTree):A.shapeFlag&128?A.suspense.next():f(A.anchor||A.el),ve=(A,m,v)=>{A==null?m._vnode&&Ce(m._vnode,null,null,!0):y(m._vnode||null,A,m,null,null,null,v),pI(),z8(),m._vnode=A},me={p:y,um:Ce,m:we,r:oe,mt:M,mc:Q,pc:ne,pbc:D,n:he,o:t};let L,H;return e&&([L,H]=e(me)),{render:ve,hydrate:L,createApp:iq(ve,L)}}function Sc({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function f5(t,e,r=!1){const n=t.children,a=e.children;if(vt(n)&&vt(a))for(let s=0;s<n.length;s++){const o=n[s];let u=a[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=a[s]=Ou(a[s]),u.el=o.el),r||f5(o,u)),u.type===bm&&(u.el=o.el)}}function fq(t){const e=t.slice(),r=[0];let n,a,s,o,u;const c=t.length;for(n=0;n<c;n++){const l=t[n];if(l!==0){if(a=r[r.length-1],t[a]<l){e[n]=a,r.push(n);continue}for(s=0,o=r.length-1;s<o;)u=s+o>>1,t[r[u]]<l?s=u+1:o=u;l<t[r[s]]&&(s>0&&(e[n]=r[s-1]),r[s]=n)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=e[o];return r}const hq=t=>t.__isTeleport,ri=Symbol.for("v-fgt"),bm=Symbol.for("v-txt"),Ku=Symbol.for("v-cmt"),wS=Symbol.for("v-stc"),sp=[];let ss=null;function mt(t=!1){sp.push(ss=t?null:[])}function pq(){sp.pop(),ss=sp[sp.length-1]||null}let Sp=1;function OI(t){Sp+=t}function h5(t){return t.dynamicChildren=Sp>0?ss||Pd:null,pq(),Sp>0&&ss&&ss.push(t),t}function er(t,e,r,n,a,s){return h5(Lt(t,e,r,n,a,s,!0))}function si(t,e,r,n,a){return h5(Qt(t,e,r,n,a,!0))}function Ib(t){return t?t.__v_isVNode===!0:!1}function Yf(t,e){return t.type===e.type&&t.key===e.key}const mm="__vInternal",p5=({key:t})=>t??null,rb=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?ln(t)||ai(t)||Rt(t)?{i:Un,r:t,k:e,f:!!r}:t:null);function Lt(t,e=null,r=null,n=0,a=null,s=t===ri?0:1,o=!1,u=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&p5(e),ref:e&&rb(e),scopeId:pm,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Un};return u?(rA(c,r),s&128&&t.normalize(c)):r&&(c.shapeFlag|=ln(r)?8:16),Sp>0&&!o&&ss&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&ss.push(c),c}const Qt=yq;function yq(t,e=null,r=null,n=0,a=null,s=!1){if((!t||t===r5)&&(t=Ku),Ib(t)){const u=Hd(t,e,!0);return r&&rA(u,r),Sp>0&&!s&&ss&&(u.shapeFlag&6?ss[ss.indexOf(t)]=u:ss.push(u)),u.patchFlag|=-2,u}if(Oq(t)&&(t=t.__vccOpts),e){e=bq(e);let{class:u,style:c}=e;u&&!ln(u)&&(e.class=cn(u)),Ur(c)&&(B8(c)&&!vt(c)&&(c=In({},c)),e.style=Cu(c))}const o=ln(t)?1:MU(t)?128:hq(t)?64:Ur(t)?4:Rt(t)?2:0;return Lt(t,e,r,n,a,o,s,!0)}function bq(t){return t?B8(t)||mm in t?In({},t):t:null}function Hd(t,e,r=!1){const{props:n,ref:a,patchFlag:s,children:o}=t,u=e?xE(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&p5(u),ref:e&&e.ref?r&&a?vt(a)?a.concat(rb(e)):[a,rb(e)]:rb(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ri?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Hd(t.ssContent),ssFallback:t.ssFallback&&Hd(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function $c(t=" ",e=0){return Qt(bm,null,t,e)}function en(t="",e=!1){return e?(mt(),si(Ku,null,t)):Qt(Ku,null,t)}function Fs(t){return t==null||typeof t=="boolean"?Qt(Ku):vt(t)?Qt(ri,null,t.slice()):typeof t=="object"?Ou(t):Qt(bm,null,String(t))}function Ou(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Hd(t)}function rA(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(vt(e))r=16;else if(typeof e=="object")if(n&65){const a=e.default;a&&(a._c&&(a._d=!1),rA(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!(mm in e)?e._ctx=Un:a===3&&Un&&(Un.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Rt(e)?(e={default:e,_ctx:Un},r=32):(e=String(e),n&64?(r=16,e=[$c(e)]):r=8);t.children=e,t.shapeFlag|=r}function xE(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const a in n)if(a==="class")e.class!==n.class&&(e.class=cn([e.class,n.class]));else if(a==="style")e.style=Cu([e.style,n.style]);else if(sm(a)){const s=e[a],o=n[a];o&&s!==o&&!(vt(s)&&s.includes(o))&&(e[a]=s?[].concat(s,o):o)}else a!==""&&(e[a]=n[a])}return e}function As(t,e,r,n=null){us(t,e,7,[r,n])}const mq=s5();let gq=0;function _q(t,e,r){const n=t.type,a=(e?e.appContext:t.appContext)||mq,s={uid:gq++,vnode:t,type:n,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new k$(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:u5(n,a),emitsOptions:X8(n,a),emit:null,emitted:null,propsDefaults:Rr,inheritAttrs:n.inheritAttrs,ctx:Rr,data:Rr,props:Rr,attrs:Rr,slots:Rr,refs:Rr,setupState:Rr,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=IU.bind(null,s),t.ce&&t.ce(s),s}let Rn=null;const vq=()=>Rn||Un;let nA,zl,AI="__VUE_INSTANCE_SETTERS__";(zl=yE()[AI])||(zl=yE()[AI]=[]),zl.push(t=>Rn=t),nA=t=>{zl.length>1?zl.forEach(e=>e(t)):zl[0](t)};const kd=t=>{nA(t),t.scope.on()},nl=()=>{Rn&&Rn.scope.off(),nA(null)};function y5(t){return t.vnode.shapeFlag&4}let Tp=!1;function wq(t,e=!1){Tp=e;const{props:r,children:n}=t.vnode,a=y5(t);aq(t,r,a,e),uq(t,n);const s=a?Sq(t,e):void 0;return Tp=!1,s}function Sq(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=$8(new Proxy(t.ctx,XU));const{setup:n}=r;if(n){const a=t.setupContext=n.length>1?m5(t):null;kd(t),bf();const s=qu(n,t,0,[t.props,a]);if(mf(),nl(),w8(s)){if(s.then(nl,nl),e)return s.then(o=>{xI(t,o,e)}).catch(o=>{fm(o,t,0)});t.asyncDep=s}else xI(t,s,e)}else b5(t,e)}function xI(t,e,r){Rt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ur(e)&&(t.setupState=H8(e)),b5(t,r)}let RI;function b5(t,e,r){const n=t.type;if(!t.render){if(!e&&RI&&!n.render){const a=n.template||eA(t).template;if(a){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:u,compilerOptions:c}=n,l=In(In({isCustomElement:s,delimiters:u},o),c);n.render=RI(a,l)}}t.render=n.render||os}kd(t),bf(),YU(t),mf(),nl()}function Tq(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,r){return zi(t,"get","$attrs"),e[r]}}))}function m5(t){const e=r=>{t.exposed=r||{}};return{get attrs(){return Tq(t)},slots:t.slots,emit:t.emit,expose:e}}function gm(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(H8($8(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in ap)return ap[r](t)},has(e,r){return r in e||r in ap}}))}function Eq(t,e=!0){return Rt(t)?t.displayName||t.name:t.name||e&&t.__name}function Oq(t){return Rt(t)&&"__vccOpts"in t}const zt=(t,e)=>TU(t,e,Tp);function g5(t,e,r){const n=arguments.length;return n===2?Ur(e)&&!vt(e)?Ib(e)?Qt(t,null,[e]):Qt(t,e):Qt(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Ib(r)&&(r=[r]),Qt(t,e,r))}const Aq=Symbol.for("v-scx"),xq=()=>cs(Aq),Rq="3.3.4",Iq="http://www.w3.org/2000/svg",Uc=typeof document<"u"?document:null,II=Uc&&Uc.createElement("template"),Pq={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const a=e?Uc.createElementNS(Iq,t):Uc.createElement(t,r?{is:r}:void 0);return t==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:t=>Uc.createTextNode(t),createComment:t=>Uc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Uc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,a,s){const o=r?r.previousSibling:e.lastChild;if(a&&(a===s||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===s||!(a=a.nextSibling)););else{II.innerHTML=n?`<svg>${t}</svg>`:t;const u=II.content;if(n){const c=u.firstChild;for(;c.firstChild;)u.appendChild(c.firstChild);u.removeChild(c)}e.insertBefore(u,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}};function Dq(t,e,r){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}function Nq(t,e,r){const n=t.style,a=ln(r);if(r&&!a){if(e&&!ln(e))for(const s in e)r[s]==null&&RE(n,s,"");for(const s in r)RE(n,s,r[s])}else{const s=n.display;a?e!==r&&(n.cssText=r):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=s)}}const PI=/\s*!important$/;function RE(t,e,r){if(vt(r))r.forEach(n=>RE(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=jq(t,e);PI.test(r)?t.setProperty(yf(n),r.replace(PI,""),"important"):t[n]=r}}const DI=["Webkit","Moz","ms"],SS={};function jq(t,e){const r=SS[e];if(r)return r;let n=Ks(e);if(n!=="filter"&&n in t)return SS[e]=n;n=cm(n);for(let a=0;a<DI.length;a++){const s=DI[a]+n;if(s in t)return SS[e]=s}return e}const NI="http://www.w3.org/1999/xlink";function Cq(t,e,r,n,a){if(n&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(NI,e.slice(6,e.length)):t.setAttributeNS(NI,e,r);else{const s=H$(e);r==null||s&&!E8(r)?t.removeAttribute(e):t.setAttribute(e,s?"":r)}}function Fq(t,e,r,n,a,s,o){if(e==="innerHTML"||e==="textContent"){n&&o(n,a,s),t[e]=r??"";return}const u=t.tagName;if(e==="value"&&u!=="PROGRESS"&&!u.includes("-")){t._value=r;const l=u==="OPTION"?t.getAttribute("value"):t.value,d=r??"";l!==d&&(t.value=d),r==null&&t.removeAttribute(e);return}let c=!1;if(r===""||r==null){const l=typeof t[e];l==="boolean"?r=E8(r):r==null&&l==="string"?(r="",c=!0):l==="number"&&(r=0,c=!0)}try{t[e]=r}catch{}c&&t.removeAttribute(e)}function Mq(t,e,r,n){t.addEventListener(e,r,n)}function Lq(t,e,r,n){t.removeEventListener(e,r,n)}function Bq(t,e,r,n,a=null){const s=t._vei||(t._vei={}),o=s[e];if(n&&o)o.value=n;else{const[u,c]=$q(e);if(n){const l=s[e]=Vq(n,a);Mq(t,u,l,c)}else o&&(Lq(t,u,o,c),s[e]=void 0)}}const jI=/(?:Once|Passive|Capture)$/;function $q(t){let e;if(jI.test(t)){e={};let n;for(;n=t.match(jI);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):yf(t.slice(2)),e]}let TS=0;const Uq=Promise.resolve(),qq=()=>TS||(Uq.then(()=>TS=0),TS=Date.now());function Vq(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;us(Hq(n,r.value),e,5,[n])};return r.value=t,r.attached=qq(),r}function Hq(t,e){if(vt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>a=>!a._stopped&&n&&n(a))}else return e}const CI=/^on[a-z]/,kq=(t,e,r,n,a=!1,s,o,u,c)=>{e==="class"?Dq(t,n,a):e==="style"?Nq(t,r,n):sm(e)?BO(e)||Bq(t,e,r,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Qq(t,e,n,a))?Fq(t,e,n,s,o,u,c):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Cq(t,e,n,a))};function Qq(t,e,r,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&CI.test(e)&&Rt(r)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||CI.test(e)&&ln(r)?!1:e in t}const Gq=In({patchProp:kq},Pq);let FI;function zq(){return FI||(FI=lq(Gq))}const Wq=(...t)=>{const e=zq().createApp(...t),{mount:r}=e;return e.mount=n=>{const a=Xq(n);if(!a)return;const s=e._component;!Rt(s)&&!s.render&&!s.template&&(s.template=a.innerHTML),a.innerHTML="";const o=r(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),o},e};function Xq(t){return ln(t)?document.querySelector(t):t}const Kq=["primary","secondary","success","danger","warning","info","light","dark"],Jq="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%",Yq=[0,0,0],MI=.5,Zq=t=>t&&Kq.includes(t.toLowerCase()),eV=(t,e)=>{const r=s=>(s.length<7&&(s=`#${s[1]}${s[1]}${s[2]}${s[2]}${s[3]}${s[3]}`),[parseInt(s.substr(1,2),16),parseInt(s.substr(3,2),16),parseInt(s.substr(5,2),16)]),n=s=>{const o=document.body.appendChild(document.createElement("fictum")),u="rgb(1, 2, 3)";return o.style.color=u,o.style.color!==u||(o.style.color=s,o.style.color===u||o.style.color==="")?e:(s=getComputedStyle(o).color,document.body.removeChild(o),s)},a=s=>{const o=s.match(/[.\d]+/g);if(o===null)return;const u=o.map(c=>+Number(c));return u.length=3,u};return typeof t=="string"&&t.toLowerCase()==="transparent"?e:typeof t=="string"&&t[0]==="#"?r(t):(typeof t=="string"&&t.indexOf("rgb")===-1&&(t=n(t)),typeof t=="string"&&t.indexOf("rgb")===0?a(t):e)},tV=({offsetX:t,offsetY:e,height:r,width:n})=>{const a=e<=r/2,s=t<=n/2,o=(h,f)=>Math.sqrt(h**2+f**2),u=e===r/2&&t===n/2,c={first:a===!0&&s===!1,second:a===!0&&s===!0,third:a===!1&&s===!0,fourth:a===!1&&s===!1},l={topLeft:o(t,e),topRight:o(n-t,e),bottomLeft:o(t,r-e),bottomRight:o(n-t,r-e)};let d=0;return u||c.fourth?d=l.topLeft:c.third?d=l.topRight:c.second?d=l.bottomRight:c.first&&(d=l.bottomLeft),d*2},rV=(t,e)=>{for(const r in e)t.style[r]=e[r]},nV=t=>{const e=eV(t,Yq);if(t!==""&&e){const r=e.join(",");return`radial-gradient(circle, ${Jq.split("{{color}}").join(`${r}`)})`}},iV=(t,e,r)=>{const n=document.createElement("div");n.classList.add("ripple-wave");const a={offsetX:r.centered?e.height/2:e.left,offsetY:r.centered?e.width/2:e.top,height:e.height,width:e.width},s=tV(a),o=r.radius||s/2,u={delay:r.duration&&r.duration*MI,duration:r.duration&&r.duration-r.duration*MI},c={left:r.centered?`${Math.round(e.width/2-o)}px`:`${Math.round(e.left-o)}px`,top:r.centered?`${Math.round(e.height/2-o)}px`:`${Math.round(e.top-o)}px`,height:`${Math.round(r.radius&&r.radius*2||s)}px`,width:`${Math.round(r.radius&&r.radius*2||s)}px`,transitionDelay:`0s, ${u.delay}ms`,transitionDuration:`${r.duration}ms, ${u.duration}ms`};r.unbound&&t.classList.add("ripple-surface-unbound"),Zq(r.color)?t.classList.add(`ripple-surface-${r.color}`):c.backgroundImage=nV(r.color),rV(n,c),t.appendChild(n),setTimeout(()=>{n.classList.add("active")},50),setTimeout(()=>{t.removeChild(n)},r.duration?r.duration+1e3:1e3)},_5={mounted(t,e){if(e.value===!1)return;const r={centered:e.value&&e.value.centered||!1,color:e.value&&e.value.color||"",duration:e.value&&e.value.duration||500,radius:e.value&&e.value.radius||0,unbound:e.value&&e.value.unbound||!1};t.classList.add("ripple-surface"),t.waves=n=>{const a={top:n.layerY,left:n.layerX,height:t.offsetHeight,width:t.offsetWidth};iV(t,a,r)},t.addEventListener("click",n=>t.waves(n))},updated(t){t.classList.contains("ripple-surface")||t.classList.add("ripple-surface")},unmounted(t){t.removeEventListener("click",e=>t.waves(e))}},aV={name:"MDBBtn"},sV=ji({...aV,props:{color:String,size:String,outline:String,rounded:Boolean,floating:Boolean,toggler:Boolean,toggle:Boolean,role:{type:String,default:"button"},type:{type:String,default:"button"},tag:{type:String,default:"button"},block:{type:Boolean,default:!1},ripple:{type:[Object,Boolean],default:t=>t.outline||t.color==="light"||t.color==="link"?{color:"dark"}:!0},picker:Boolean},emits:["update:toggle"],setup(t,{emit:e}){const r=t,n=Si(r.toggle),a=zt(()=>[!r.picker&&"btn",r.color&&`btn-${r.color}`,r.size&&`btn-${r.size}`,r.outline&&`btn-outline-${r.outline}`,r.rounded&&"btn-rounded",r.floating&&"btn-floating",r.block&&"btn-block",n.value&&"active"]),s=()=>{r.toggler&&(n.value=!n.value,e("update:toggle",n.value))};return(o,u)=>Ab((mt(),si(ys(t.tag),{type:t.type,role:t.role,class:cn(St(a)),onClick:s},{default:ar(()=>[Qi(o.$slots,"default")]),_:3},8,["type","role","class"])),[[St(_5),t.ripple]])}}),oV={name:"MDBCard"},v5=ji({...oV,props:{tag:{type:String,default:"div"},border:String,bg:String,text:[String,Array],shadow:String},setup(t){const e=t,r=zt(()=>{const a=e.text;return["card",e.border&&`border border-${e.border}`,e.bg&&`bg-${e.bg}`,e.shadow&&`shadow-${e.shadow}`,e.text&&n(a)]}),n=a=>typeof a=="string"?`text-${a}`:a.map(s=>`text-${s}`.trim()).join(" ");return(a,s)=>(mt(),si(ys(t.tag),{class:cn(St(r))},{default:ar(()=>[Qi(a.$slots,"default")]),_:3},8,["class"]))}}),uV={name:"MDBCardBody"},w5=ji({...uV,props:{tag:{type:String,default:"div"},text:{type:[String,Array]}},setup(t){const e=t,r=zt(()=>{const a=e.text;return["card-body",e.text&&n(a)]}),n=a=>typeof a=="string"?`text-${a}`:a.map(s=>`text-${s}`.trim()).join(" ");return(a,s)=>(mt(),si(ys(t.tag),{class:cn(St(r))},{default:ar(()=>[Qi(a.$slots,"default")]),_:3},8,["class"]))}}),cV={name:"MDBCardTitle"},lV=ji({...cV,props:{tag:{type:String,default:"h5"},subtitle:{type:Boolean,default:!1}},setup(t){const e=t,r=zt(()=>e.subtitle?e.tag!=="h5"?e.tag:"h6":e.tag),n=zt(()=>[e.subtitle?"card-subtitle":"card-title"]);return(a,s)=>(mt(),si(ys(St(r)),{class:cn(St(n))},{default:ar(()=>[Qi(a.$slots,"default")]),_:3},8,["class"]))}}),dV={name:"MDBCardText"},S5=ji({...dV,props:{tag:{type:String,default:"p"}},setup(t){const e=zt(()=>["card-text"]);return(r,n)=>(mt(),si(ys(t.tag),{class:cn(St(e))},{default:ar(()=>[Qi(r.$slots,"default")]),_:3},8,["class"]))}}),fV={name:"MDBCardFooter"},hV=ji({...fV,props:{tag:{type:String,default:"div"},bg:String,border:String},setup(t){const e=t,r=zt(()=>["card-footer",e.border&&`border-${e.border}`,e.bg&&`bg-${e.bg}`]);return(n,a)=>(mt(),si(ys(t.tag),{class:cn(St(r))},{default:ar(()=>[Qi(n.$slots,"default")]),_:3},8,["class"]))}}),pV=1e6,yV=t=>{do t+=Math.floor(Math.random()*pV);while(document.getElementById(t));return t},bV=/\..*/,mV={mouseenter:"mouseover",mouseleave:"mouseout"},gV=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function T5(t,e,r){const n=typeof e=="string",a=n?r:e;let s=t.replace(bV,"");const o=mV[s];return o&&(s=o),gV.indexOf(s)>-1||(s=t),[n,a,s]}function _V(t,e,r,n){if(typeof e!="string"||!t)return;r||(r=n,n=null);const[a,s,o]=T5(e,r,n);t.addEventListener(o,s,a)}function vV(t,e,r,n){t.removeEventListener(e,r,!!n)}const wV=function(t,e,r,n=void 0){_V(t,e,r,n)},SV=function(t,e,r,n=void 0){if(typeof e!="string"||!t)return;const[a,s,o]=T5(e,r,n);vV(t,o,s,a?r:null)};var IE={stopProp(t){t.stopPropagation()},mounted(t,e){const r=a=>{const s=a.target;!t.contains(s)&&t!==s&&e.value(a)};t.clickOutside=r;const n=e.modifiers.mousedown?"mousedown":"click";document.addEventListener(n,a=>{var s;return(s=t.clickOutside)==null?void 0:s.call(t,a)}),document.addEventListener("touchstart",a=>{var s;return(s=t.clickOutside)==null?void 0:s.call(t,a)})},unmounted(t,e){if(!t.clickOutside)return;const r=e.modifiers.mousedown?"mousedown":"click";document.removeEventListener(r,n=>{var a;return(a=t.clickOutside)==null?void 0:a.call(t,n)}),document.removeEventListener("touchstart",n=>{var a;return(a=t.clickOutside)==null?void 0:a.call(t,n)}),delete t.clickOutside}};const TV={key:1,class:"visually-hidden"},EV={name:"MDBDropdownToggle"};({...EV,props:{...sV.props}});const OV={name:"MDBPagination"},AV=ji({...OV,props:{tag:{type:String,default:"ul"},circle:{type:Boolean,default:!1},lg:{type:Boolean,default:!1},sm:{type:Boolean,default:!1}},setup(t){const e=t,r=zt(()=>["pagination",e.sm&&"pagination-sm",e.lg&&"pagination-lg",e.circle&&"pagination-circle"]);return(n,a)=>(mt(),si(ys(t.tag),{class:cn(St(r))},{default:ar(()=>[Qi(n.$slots,"default")]),_:3},8,["class"]))}}),xV=["href","aria-label","aria-disabled","tabindex"],RV={key:0,"aria-hidden":"true"},IV={key:1,class:"sr-only"},PV={name:"MDBPageItem"},DV=ji({...PV,props:{tag:{type:String,default:"li"},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},href:String,icon:{type:Boolean,defaul:!1},label:{type:String}},setup(t){const e=t,r=zt(()=>["page-item",e.active&&"active",e.disabled&&"disabled"]),n=zt(()=>e.icon&&e.label?e.label:e.href),a=zt(()=>e.disabled?"-1":" false");return(s,o)=>(mt(),si(ys(t.tag),{class:cn(St(r))},{default:ar(()=>[Lt("a",{class:"page-link",href:t.href,"aria-label":St(n),"aria-disabled":t.disabled,tabindex:St(a)},[t.icon?(mt(),er("span",RV,[Qi(s.$slots,"default")])):en("",!0),t.icon?(mt(),er("span",IV,Sr(St(n)),1)):Qi(s.$slots,"default",{key:2})],8,xV)]),_:3},8,["class"]))}}),NV={name:"MDBContainer"},jV=ji({...NV,props:{tag:{type:String,default:"div"},sm:{type:Boolean,default:!1},md:{type:Boolean,default:!1},lg:{type:Boolean,default:!1},xl:{type:Boolean,default:!1},xxl:{type:Boolean,default:!1},fluid:{type:Boolean,default:!1}},setup(t){const e=t,r=zt(()=>[e.fluid?"container-fluid":"",e.sm?"container-sm":"",e.md?"container-md":"",e.lg?"container-lg":"",e.xl?"container-xl":"",e.xxl?"container-xxl":"",!e.fluid&&!e.sm&&!e.md&&!e.lg&&!e.xl&&!e.xxl?"container":""]);return(n,a)=>(mt(),si(ys(t.tag),{class:cn(St(r))},{default:ar(()=>[Qi(n.$slots,"default")]),_:3},8,["class"]))}}),CV=["id","value"],FV=["for"],MV={key:2,class:"form-helper"},LV={key:3,class:"form-helper"},BV={class:"form-counter"},$V=Lt("div",{class:"form-notch-trailing"},null,-1),UV=["id","value"],qV=["for"],VV={key:1,class:"form-helper"},HV={key:2,class:"form-helper"},kV={class:"form-counter"},QV=Lt("div",{class:"form-notch-trailing"},null,-1),GV={key:9,class:"form-text"},zV={name:"MDBInput",inheritAttrs:!1},WV=ji({...zV,props:{id:String,label:String,labelClass:String,modelValue:[String,Number,Date],size:String,formOutline:{type:Boolean,default:!0},wrapperClass:String,inputGroup:{type:[Boolean,String],default:!1},wrap:{type:Boolean,default:!0},formText:String,white:Boolean,validationEvent:String,isValidated:Boolean,isValid:Boolean,validFeedback:String,invalidFeedback:String,tooltipFeedback:{type:Boolean,default:!1},tag:{type:String,default:"div"},helper:String,counter:Boolean,maxlength:{type:Number,default:0}},emits:["update:modelValue","click-outside","on-validate"],setup(t,{expose:e,emit:r}){const n=t,a=KU(),s=Si(null),o=Si(n.modelValue),u=Si(null),c=Si(!1),l=Si(9),d=Si(0),h=n.id||yV("MDBInput-"),f=zt(()=>[n.formOutline&&"form-outline",y.value,n.white&&"form-white",n.wrapperClass]),p=zt(()=>["form-control",n.size?`form-control-${n.size}`:n.inputGroup&&n.inputGroup!==!0&&`form-control-${n.inputGroup}`,(o.value||o.value===0)&&"active",c.value&&"placeholder-active",O.value&&T.value&&"is-valid",O.value&&!T.value&&"is-invalid"]),b=zt(()=>["form-label",n.labelClass]),y=zt(()=>{if(n.inputGroup)return n.inputGroup!==!0?`input-group input-group-${n.inputGroup}`:"input-group"}),S=zt(()=>n.inputGroup&&O.value?{marginBottom:"1rem"}:""),w=zt(()=>n.tooltipFeedback?"valid-tooltip":"valid-feedback"),I=zt(()=>n.tooltipFeedback?"invalid-tooltip":"invalid-feedback"),O=Si(n.isValidated),T=Si(n.isValid),x=Si(""),P=zt(()=>O.value&&!T.value&&n.validationEvent?x.value:n.invalidFeedback),B=_e=>{const we=_e.target;T.value=we.checkValidity(),T.value||(x.value=we.validationMessage),O.value=!0,r("on-validate",T.value)},Q=()=>{n.validationEvent!=="submit"&&typeof s.value!="string"&&wV(s.value,n.validationEvent,B)};function N(){u.value&&(d.value=u.value.clientWidth*.8+8)}function D(){a.placeholder&&!u.value?c.value=!0:c.value=!1}const F=Si(null);F.value=typeof o.value=="string"&&o.value?o.value.length:0;function W(_e){const we=_e.target;if(n.counter){if(we.value.length>n.maxlength){typeof o.value=="string"&&(we.value=o.value);return}F.value=we.value.length}o.value=we.value,r("update:modelValue",o.value)}function z(){r("click-outside")}const M=Si(null),C=Si(),V=_e=>{C.value.forEach(we=>we.style.opacity=_e?"0":"1"),_e&&(M.value.style.opacity="1")},ie=a.type&&a.type==="date",ne=(_e=!1)=>{var we;n.label&&n.formOutline&&((we=C.value)==null?void 0:we.length)>1&&V(_e),ie&&typeof s.value!="string"&&(s.value.type=_e?"date":"text")},fe=_e=>![..._e.parentNode.children].findIndex(we=>we===_e);return e5(()=>{if(N(),D(),ne(),n.label&&n.formOutline&&(C.value=s.value.parentNode.querySelectorAll(".form-notch")),n.label&&n.formOutline&&!fe(s.value)){const _e=parseFloat(getComputedStyle(u.value).left);u.value.style.left=`${_e+s.value.offsetLeft}px`,l.value+=s.value.offsetLeft}n.validationEvent&&Q()}),t5(()=>{N(),D()}),YO(()=>{typeof s.value!="string"&&SV(s.value,n.validationEvent,B)}),K8(()=>{var _e,we;if(n.counter&&typeof n.modelValue=="string"){if(((_e=n.modelValue)==null?void 0:_e.length)>n.maxlength){o.value=n.modelValue.slice(0,n.maxlength),F.value=n.maxlength;return}F.value=((we=n.modelValue)==null?void 0:we.length)||0}o.value=n.modelValue}),Cd(()=>n.isValidated,_e=>O.value=_e),Cd(()=>n.isValid,_e=>T.value=_e),e({inputRef:s}),(_e,we)=>(mt(),er(ri,null,[t.wrap?en("",!0):Ab((mt(),er("input",xE({key:0,class:St(p),id:St(h),value:o.value},_e.$attrs,{onInput:W,ref_key:"inputRef",ref:s,onFocus:we[0]||(we[0]=Ce=>ne(!0)),onBlur:we[1]||(we[1]=Ce=>ne())}),null,16,CV)),[[St(IE),z]]),t.label&&!t.wrap?(mt(),er("label",{key:1,ref_key:"labelRef",ref:u,class:cn(St(b)),for:St(h)},Sr(t.label),11,FV)):en("",!0),!t.wrap&&t.helper?(mt(),er("div",MV,Sr(t.helper),1)):en("",!0),!t.wrap&&t.counter?(mt(),er("div",LV,[Lt("div",BV,Sr(F.value)+" / "+Sr(t.maxlength),1)])):en("",!0),t.wrap?en("",!0):Qi(_e.$slots,"default",{key:4}),!t.wrap&&t.validFeedback?(mt(),er("div",{key:5,class:cn(St(w))},Sr(t.validFeedback),3)):en("",!0),!t.wrap&&St(P)?(mt(),er("div",{key:6,class:cn(St(I))},Sr(St(P)),3)):en("",!0),!t.wrap&&t.formOutline?(mt(),er("div",{key:7,class:"form-notch",ref_key:"notchRef",ref:M},[Lt("div",{class:"form-notch-leading",style:Cu({width:`${l.value}px`})},null,4),Lt("div",{class:"form-notch-middle",style:Cu({width:`${d.value}px`})},null,4),$V],512)):en("",!0),t.wrap?Ab((mt(),si(ys(t.tag),{key:8,class:cn(St(f)),style:Cu(St(S))},{default:ar(()=>[Qi(_e.$slots,"prepend"),Lt("input",xE({class:St(p)},_e.$attrs,{id:St(h),value:o.value,onInput:W,ref_key:"inputRef",ref:s,onFocus:we[2]||(we[2]=Ce=>ne(!0)),onBlur:we[3]||(we[3]=Ce=>ne())}),null,16,UV),t.label?(mt(),er("label",{key:0,ref_key:"labelRef",ref:u,class:cn(St(b)),for:St(h)},Sr(t.label),11,qV)):en("",!0),t.helper?(mt(),er("div",VV,Sr(t.helper),1)):en("",!0),t.counter?(mt(),er("div",HV,[Lt("div",kV,Sr(F.value)+" / "+Sr(t.maxlength),1)])):en("",!0),Qi(_e.$slots,"default"),t.validFeedback?(mt(),er("div",{key:3,class:cn(St(w))},Sr(t.validFeedback),3)):en("",!0),St(P)?(mt(),er("div",{key:4,class:cn(St(I))},Sr(St(P)),3)):en("",!0),t.formOutline?(mt(),er("div",{key:5,class:"form-notch",ref_key:"notchRef",ref:M},[Lt("div",{class:"form-notch-leading",style:Cu({width:`${l.value}px`})},null,4),Lt("div",{class:"form-notch-middle",style:Cu({width:`${d.value}px`})},null,4),QV],512)):en("",!0)]),_:3},8,["class","style"])),[[St(IE),z]]):en("",!0),t.formText?(mt(),er("div",GV,Sr(t.formText),1)):en("",!0)],64))}});var g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function XV(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function iA(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var E5={},_m={},vm={},Kp={},O5={},wm={},et={},aA={},A5={};Object.defineProperty(A5,"__esModule",{value:!0});var x5={};Object.defineProperty(x5,"__esModule",{value:!0});var R5={};Object.defineProperty(R5,"__esModule",{value:!0});var I5={};Object.defineProperty(I5,"__esModule",{value:!0});var P5={};Object.defineProperty(P5,"__esModule",{value:!0});var D5={};Object.defineProperty(D5,"__esModule",{value:!0});var N5={};Object.defineProperty(N5,"__esModule",{value:!0});var j5={};Object.defineProperty(j5,"__esModule",{value:!0});var C5={};Object.defineProperty(C5,"__esModule",{value:!0});var F5={};Object.defineProperty(F5,"__esModule",{value:!0});var M5={};Object.defineProperty(M5,"__esModule",{value:!0});var L5={};Object.defineProperty(L5,"__esModule",{value:!0});var B5={};Object.defineProperty(B5,"__esModule",{value:!0});var Sm={};Object.defineProperty(Sm,"__esModule",{value:!0});Sm.Logger=void 0;class Tm{static getLevelOrdinal(e){return Tm.LEVELS[e]}}Sm.Logger=Tm;Tm.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(A5,t),r(x5,t),r(R5,t),r(I5,t),r(P5,t),r(D5,t),r(N5,t),r(j5,t),r(C5,t),r(F5,t),r(M5,t),r(L5,t),r(B5,t),r(Sm,t)})(aA);var sl={},Jp="delete",Ir=5,Ea=1<<Ir,Ri=Ea-1,Vt={};function PE(){return{value:!1}}function Oa(t){t&&(t.value=!0)}function sA(){}function Qd(t){return t.size===void 0&&(t.size=t.__iterate($5)),t.size}function Ju(t,e){if(typeof e!="number"){var r=e>>>0;if(""+r!==e||r===4294967295)return NaN;e=r}return e<0?Qd(t)+e:e}function $5(){return!0}function Yp(t,e,r){return(t===0&&!q5(t)||r!==void 0&&t<=-r)&&(e===void 0||r!==void 0&&e>=r)}function gf(t,e){return U5(t,e,0)}function Zp(t,e){return U5(t,e,e)}function U5(t,e,r){return t===void 0?r:q5(t)?e===1/0?e:Math.max(0,e+t)|0:e===void 0||e===t?t:Math.min(e,t)|0}function q5(t){return t<0||t===0&&1/t===-1/0}var V5="@@__IMMUTABLE_ITERABLE__@@";function oi(t){return!!(t&&t[V5])}var H5="@@__IMMUTABLE_KEYED__@@";function _r(t){return!!(t&&t[H5])}var k5="@@__IMMUTABLE_INDEXED__@@";function qn(t){return!!(t&&t[k5])}function _f(t){return _r(t)||qn(t)}var Dr=function(e){return oi(e)?e:ui(e)},Pa=function(t){function e(r){return _r(r)?r:ac(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Dr),ml=function(t){function e(r){return qn(r)?r:Da(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Dr),vf=function(t){function e(r){return oi(r)&&!_f(r)?r:Tf(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Dr);Dr.Keyed=Pa;Dr.Indexed=ml;Dr.Set=vf;var Q5="@@__IMMUTABLE_SEQ__@@";function e0(t){return!!(t&&t[Q5])}var G5="@@__IMMUTABLE_RECORD__@@";function ic(t){return!!(t&&t[G5])}function ya(t){return oi(t)||ic(t)}var wf="@@__IMMUTABLE_ORDERED__@@";function da(t){return!!(t&&t[wf])}var t0=0,ds=1,Ra=2,DE=typeof Symbol=="function"&&Symbol.iterator,z5="@@iterator",Em=DE||z5,Xt=function(e){this.next=e};Xt.prototype.toString=function(){return"[Iterator]"};Xt.KEYS=t0;Xt.VALUES=ds;Xt.ENTRIES=Ra;Xt.prototype.inspect=Xt.prototype.toSource=function(){return this.toString()};Xt.prototype[Em]=function(){return this};function Nr(t,e,r,n){var a=t===0?e:t===1?r:[e,r];return n?n.value=a:n={value:a,done:!1},n}function Pi(){return{value:void 0,done:!0}}function oA(t){return Array.isArray(t)?!0:!!Om(t)}function LI(t){return t&&typeof t.next=="function"}function NE(t){var e=Om(t);return e&&e.call(t)}function Om(t){var e=t&&(DE&&t[DE]||t[z5]);if(typeof e=="function")return e}function KV(t){var e=Om(t);return e&&e===t.entries}function JV(t){var e=Om(t);return e&&e===t.keys}var Sf=Object.prototype.hasOwnProperty;function uA(t){return Array.isArray(t)||typeof t=="string"?!0:t&&typeof t=="object"&&Number.isInteger(t.length)&&t.length>=0&&(t.length===0?Object.keys(t).length===1:t.hasOwnProperty(t.length-1))}var ui=function(t){function e(r){return r==null?lA():ya(r)?r.toSeq():ZV(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(n,a){var s=this._cache;if(s){for(var o=s.length,u=0;u!==o;){var c=s[a?o-++u:u++];if(n(c[1],c[0],this)===!1)break}return u}return this.__iterateUncached(n,a)},e.prototype.__iterator=function(n,a){var s=this._cache;if(s){var o=s.length,u=0;return new Xt(function(){if(u===o)return Pi();var c=s[a?o-++u:u++];return Nr(n,c[0],c[1])})}return this.__iteratorUncached(n,a)},e}(Dr),ac=function(t){function e(r){return r==null?lA().toKeyedSeq():oi(r)?_r(r)?r.toSeq():r.fromEntrySeq():ic(r)?r.toSeq():dA(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(ui),Da=function(t){function e(r){return r==null?lA():oi(r)?_r(r)?r.entrySeq():r.toIndexedSeq():ic(r)?r.toSeq().entrySeq():W5(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(ui),Tf=function(t){function e(r){return(oi(r)&&!_f(r)?r:Da(r)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(ui);ui.isSeq=e0;ui.Keyed=ac;ui.Set=Tf;ui.Indexed=Da;ui.prototype[Q5]=!0;var ol=function(t){function e(r){this._array=r,this.size=r.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,a){return this.has(n)?this._array[Ju(this,n)]:a},e.prototype.__iterate=function(n,a){for(var s=this._array,o=s.length,u=0;u!==o;){var c=a?o-++u:u++;if(n(s[c],c,this)===!1)break}return u},e.prototype.__iterator=function(n,a){var s=this._array,o=s.length,u=0;return new Xt(function(){if(u===o)return Pi();var c=a?o-++u:u++;return Nr(n,c,s[c])})},e}(Da),cA=function(t){function e(r){var n=Object.keys(r).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r):[]);this._object=r,this._keys=n,this.size=n.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,a){return a!==void 0&&!this.has(n)?a:this._object[n]},e.prototype.has=function(n){return Sf.call(this._object,n)},e.prototype.__iterate=function(n,a){for(var s=this._object,o=this._keys,u=o.length,c=0;c!==u;){var l=o[a?u-++c:c++];if(n(s[l],l,this)===!1)break}return c},e.prototype.__iterator=function(n,a){var s=this._object,o=this._keys,u=o.length,c=0;return new Xt(function(){if(c===u)return Pi();var l=o[a?u-++c:c++];return Nr(n,l,s[l])})},e}(ac);cA.prototype[wf]=!0;var YV=function(t){function e(r){this._collection=r,this.size=r.length||r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,a){if(a)return this.cacheResult().__iterate(n,a);var s=this._collection,o=NE(s),u=0;if(LI(o))for(var c;!(c=o.next()).done&&n(c.value,u++,this)!==!1;);return u},e.prototype.__iteratorUncached=function(n,a){if(a)return this.cacheResult().__iterator(n,a);var s=this._collection,o=NE(s);if(!LI(o))return new Xt(Pi);var u=0;return new Xt(function(){var c=o.next();return c.done?c:Nr(n,u++,c.value)})},e}(Da),BI;function lA(){return BI||(BI=new ol([]))}function dA(t){var e=fA(t);if(e)return e.fromEntrySeq();if(typeof t=="object")return new cA(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function W5(t){var e=fA(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function ZV(t){var e=fA(t);if(e)return KV(t)?e.fromEntrySeq():JV(t)?e.toSetSeq():e;if(typeof t=="object")return new cA(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function fA(t){return uA(t)?new ol(t):oA(t)?new YV(t):void 0}var X5="@@__IMMUTABLE_MAP__@@";function r0(t){return!!(t&&t[X5])}function Am(t){return r0(t)&&da(t)}function Pb(t){return!!(t&&typeof t.equals=="function"&&typeof t.hashCode=="function")}function _n(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if(typeof t.valueOf=="function"&&typeof e.valueOf=="function"){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(Pb(t)&&Pb(e)&&t.equals(e))}var Zf=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,r){e|=0,r|=0;var n=e&65535,a=r&65535;return n*a+((e>>>16)*a+n*(r>>>16)<<16>>>0)|0};function xm(t){return t>>>1&1073741824|t&3221225471}var eH=Object.prototype.valueOf;function Ai(t){if(t==null)return $I(t);if(typeof t.hashCode=="function")return xm(t.hashCode(t));var e=sH(t);if(e==null)return $I(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return tH(e);case"string":return e.length>oH?rH(e):jE(e);case"object":case"function":return iH(e);case"symbol":return nH(e);default:if(typeof e.toString=="function")return jE(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function $I(t){return t===null?1108378658:1108378659}function tH(t){if(t!==t||t===1/0)return 0;var e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return xm(e)}function rH(t){var e=AS[t];return e===void 0&&(e=jE(t),OS===uH&&(OS=0,AS={}),OS++,AS[t]=e),e}function jE(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return xm(e)}function nH(t){var e=VI[t];return e!==void 0||(e=K5(),VI[t]=e),e}function iH(t){var e;if(CE&&(e=FE.get(t),e!==void 0)||(e=t[qc],e!==void 0)||!qI&&(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[qc],e!==void 0||(e=aH(t),e!==void 0)))return e;if(e=K5(),CE)FE.set(t,e);else{if(UI!==void 0&&UI(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(qI)Object.defineProperty(t,qc,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[qc]=e;else if(t.nodeType!==void 0)t[qc]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var UI=Object.isExtensible,qI=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function aH(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function sH(t){return t.valueOf!==eH&&typeof t.valueOf=="function"?t.valueOf(t):t}function K5(){var t=++ES;return ES&1073741824&&(ES=0),t}var CE=typeof WeakMap=="function",FE;CE&&(FE=new WeakMap);var VI=Object.create(null),ES=0,qc="__immutablehash__";typeof Symbol=="function"&&(qc=Symbol(qc));var oH=16,uH=255,OS=0,AS={},Rm=function(t){function e(r,n){this._iter=r,this._useKeys=n,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,a){return this._iter.get(n,a)},e.prototype.has=function(n){return this._iter.has(n)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var n=this,a=hA(this,!0);return this._useKeys||(a.valueSeq=function(){return n._iter.toSeq().reverse()}),a},e.prototype.map=function(n,a){var s=this,o=tj(this,n,a);return this._useKeys||(o.valueSeq=function(){return s._iter.toSeq().map(n,a)}),o},e.prototype.__iterate=function(n,a){var s=this;return this._iter.__iterate(function(o,u){return n(o,u,s)},a)},e.prototype.__iterator=function(n,a){return this._iter.__iterator(n,a)},e}(ac);Rm.prototype[wf]=!0;var J5=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,a){var s=this,o=0;return a&&Qd(this),this._iter.__iterate(function(u){return n(u,a?s.size-++o:o++,s)},a)},e.prototype.__iterator=function(n,a){var s=this,o=this._iter.__iterator(ds,a),u=0;return a&&Qd(this),new Xt(function(){var c=o.next();return c.done?c:Nr(n,a?s.size-++u:u++,c.value,c)})},e}(Da),Y5=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,a){var s=this;return this._iter.__iterate(function(o){return n(o,o,s)},a)},e.prototype.__iterator=function(n,a){var s=this._iter.__iterator(ds,a);return new Xt(function(){var o=s.next();return o.done?o:Nr(n,o.value,o.value,o)})},e}(Tf),Z5=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(n,a){var s=this;return this._iter.__iterate(function(o){if(o){kI(o);var u=oi(o);return n(u?o.get(1):o[1],u?o.get(0):o[0],s)}},a)},e.prototype.__iterator=function(n,a){var s=this._iter.__iterator(ds,a);return new Xt(function(){for(;;){var o=s.next();if(o.done)return o;var u=o.value;if(u){kI(u);var c=oi(u);return Nr(n,c?u.get(0):u[0],c?u.get(1):u[1],o)}}})},e}(ac);J5.prototype.cacheResult=Rm.prototype.cacheResult=Y5.prototype.cacheResult=Z5.prototype.cacheResult=bA;function ej(t){var e=no(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var r=t.reverse.apply(this);return r.flip=function(){return t.reverse()},r},e.has=function(r){return t.includes(r)},e.includes=function(r){return t.has(r)},e.cacheResult=bA,e.__iterateUncached=function(r,n){var a=this;return t.__iterate(function(s,o){return r(o,s,a)!==!1},n)},e.__iteratorUncached=function(r,n){if(r===Ra){var a=t.__iterator(r,n);return new Xt(function(){var s=a.next();if(!s.done){var o=s.value[0];s.value[0]=s.value[1],s.value[1]=o}return s})}return t.__iterator(r===ds?t0:ds,n)},e}function tj(t,e,r){var n=no(t);return n.size=t.size,n.has=function(a){return t.has(a)},n.get=function(a,s){var o=t.get(a,Vt);return o===Vt?s:e.call(r,o,a,t)},n.__iterateUncached=function(a,s){var o=this;return t.__iterate(function(u,c,l){return a(e.call(r,u,c,l),c,o)!==!1},s)},n.__iteratorUncached=function(a,s){var o=t.__iterator(Ra,s);return new Xt(function(){var u=o.next();if(u.done)return u;var c=u.value,l=c[0];return Nr(a,l,e.call(r,c[1],l,t),u)})},n}function hA(t,e){var r=this,n=no(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var a=ej(t);return a.reverse=function(){return t.flip()},a}),n.get=function(a,s){return t.get(e?a:-1-a,s)},n.has=function(a){return t.has(e?a:-1-a)},n.includes=function(a){return t.includes(a)},n.cacheResult=bA,n.__iterate=function(a,s){var o=this,u=0;return s&&Qd(t),t.__iterate(function(c,l){return a(c,e?l:s?o.size-++u:u++,o)},!s)},n.__iterator=function(a,s){var o=0;s&&Qd(t);var u=t.__iterator(Ra,!s);return new Xt(function(){var c=u.next();if(c.done)return c;var l=c.value;return Nr(a,e?l[0]:s?r.size-++o:o++,l[1],c)})},n}function rj(t,e,r,n){var a=no(t);return n&&(a.has=function(s){var o=t.get(s,Vt);return o!==Vt&&!!e.call(r,o,s,t)},a.get=function(s,o){var u=t.get(s,Vt);return u!==Vt&&e.call(r,u,s,t)?u:o}),a.__iterateUncached=function(s,o){var u=this,c=0;return t.__iterate(function(l,d,h){if(e.call(r,l,d,h))return c++,s(l,n?d:c-1,u)},o),c},a.__iteratorUncached=function(s,o){var u=t.__iterator(Ra,o),c=0;return new Xt(function(){for(;;){var l=u.next();if(l.done)return l;var d=l.value,h=d[0],f=d[1];if(e.call(r,f,h,t))return Nr(s,n?h:c++,f,l)}})},a}function cH(t,e,r){var n=oc().asMutable();return t.__iterate(function(a,s){n.update(e.call(r,a,s,t),0,function(o){return o+1})}),n.asImmutable()}function lH(t,e,r){var n=_r(t),a=(da(t)?fs():oc()).asMutable();t.__iterate(function(o,u){a.update(e.call(r,o,u,t),function(c){return c=c||[],c.push(n?[u,o]:o),c})});var s=yA(t);return a.map(function(o){return gr(t,s(o))}).asImmutable()}function dH(t,e,r){var n=_r(t),a=[[],[]];t.__iterate(function(o,u){a[e.call(r,o,u,t)?1:0].push(n?[u,o]:o)});var s=yA(t);return a.map(function(o){return gr(t,s(o))})}function pA(t,e,r,n){var a=t.size;if(Yp(e,r,a))return t;var s=gf(e,a),o=Zp(r,a);if(s!==s||o!==o)return pA(t.toSeq().cacheResult(),e,r,n);var u=o-s,c;u===u&&(c=u<0?0:u);var l=no(t);return l.size=c===0?c:t.size&&c||void 0,!n&&e0(t)&&c>=0&&(l.get=function(d,h){return d=Ju(this,d),d>=0&&d<c?t.get(d+s,h):h}),l.__iterateUncached=function(d,h){var f=this;if(c===0)return 0;if(h)return this.cacheResult().__iterate(d,h);var p=0,b=!0,y=0;return t.__iterate(function(S,w){if(!(b&&(b=p++<s)))return y++,d(S,n?w:y-1,f)!==!1&&y!==c}),y},l.__iteratorUncached=function(d,h){if(c!==0&&h)return this.cacheResult().__iterator(d,h);if(c===0)return new Xt(Pi);var f=t.__iterator(d,h),p=0,b=0;return new Xt(function(){for(;p++<s;)f.next();if(++b>c)return Pi();var y=f.next();return n||d===ds||y.done?y:d===t0?Nr(d,b-1,void 0,y):Nr(d,b-1,y.value[1],y)})},l}function fH(t,e,r){var n=no(t);return n.__iterateUncached=function(a,s){var o=this;if(s)return this.cacheResult().__iterate(a,s);var u=0;return t.__iterate(function(c,l,d){return e.call(r,c,l,d)&&++u&&a(c,l,o)}),u},n.__iteratorUncached=function(a,s){var o=this;if(s)return this.cacheResult().__iterator(a,s);var u=t.__iterator(Ra,s),c=!0;return new Xt(function(){if(!c)return Pi();var l=u.next();if(l.done)return l;var d=l.value,h=d[0],f=d[1];return e.call(r,f,h,o)?a===Ra?l:Nr(a,h,f,l):(c=!1,Pi())})},n}function nj(t,e,r,n){var a=no(t);return a.__iterateUncached=function(s,o){var u=this;if(o)return this.cacheResult().__iterate(s,o);var c=!0,l=0;return t.__iterate(function(d,h,f){if(!(c&&(c=e.call(r,d,h,f))))return l++,s(d,n?h:l-1,u)}),l},a.__iteratorUncached=function(s,o){var u=this;if(o)return this.cacheResult().__iterator(s,o);var c=t.__iterator(Ra,o),l=!0,d=0;return new Xt(function(){var h,f,p;do{if(h=c.next(),h.done)return n||s===ds?h:s===t0?Nr(s,d++,void 0,h):Nr(s,d++,h.value[1],h);var b=h.value;f=b[0],p=b[1],l&&(l=e.call(r,p,f,u))}while(l);return s===Ra?h:Nr(s,f,p,h)})},a}function hH(t,e){var r=_r(t),n=[t].concat(e).map(function(o){return oi(o)?r&&(o=Pa(o)):o=r?dA(o):W5(Array.isArray(o)?o:[o]),o}).filter(function(o){return o.size!==0});if(n.length===0)return t;if(n.length===1){var a=n[0];if(a===t||r&&_r(a)||qn(t)&&qn(a))return a}var s=new ol(n);return r?s=s.toKeyedSeq():qn(t)||(s=s.toSetSeq()),s=s.flatten(!0),s.size=n.reduce(function(o,u){if(o!==void 0){var c=u.size;if(c!==void 0)return o+c}},0),s}function ij(t,e,r){var n=no(t);return n.__iterateUncached=function(a,s){if(s)return this.cacheResult().__iterate(a,s);var o=0,u=!1;function c(l,d){l.__iterate(function(h,f){return(!e||d<e)&&oi(h)?c(h,d+1):(o++,a(h,r?f:o-1,n)===!1&&(u=!0)),!u},s)}return c(t,0),o},n.__iteratorUncached=function(a,s){if(s)return this.cacheResult().__iterator(a,s);var o=t.__iterator(a,s),u=[],c=0;return new Xt(function(){for(;o;){var l=o.next();if(l.done!==!1){o=u.pop();continue}var d=l.value;if(a===Ra&&(d=d[1]),(!e||u.length<e)&&oi(d))u.push(o),o=d.__iterator(a,s);else return r?l:Nr(a,c++,d,l)}return Pi()})},n}function pH(t,e,r){var n=yA(t);return t.toSeq().map(function(a,s){return n(e.call(r,a,s,t))}).flatten(!0)}function yH(t,e){var r=no(t);return r.size=t.size&&t.size*2-1,r.__iterateUncached=function(n,a){var s=this,o=0;return t.__iterate(function(u){return(!o||n(e,o++,s)!==!1)&&n(u,o++,s)!==!1},a),o},r.__iteratorUncached=function(n,a){var s=t.__iterator(ds,a),o=0,u;return new Xt(function(){return(!u||o%2)&&(u=s.next(),u.done)?u:o%2?Nr(n,o++,e):Nr(n,o++,u.value,u)})},r}function Gd(t,e,r){e||(e=aj);var n=_r(t),a=0,s=t.toSeq().map(function(o,u){return[u,o,a++,r?r(o,u,t):o]}).valueSeq().toArray();return s.sort(function(o,u){return e(o[3],u[3])||o[2]-u[2]}).forEach(n?function(o,u){s[u].length=2}:function(o,u){s[u]=o[1]}),n?ac(s):qn(t)?Da(s):Tf(s)}function ky(t,e,r){if(e||(e=aj),r){var n=t.toSeq().map(function(a,s){return[a,r(a,s,t)]}).reduce(function(a,s){return HI(e,a[1],s[1])?s:a});return n&&n[0]}return t.reduce(function(a,s){return HI(e,a,s)?s:a})}function HI(t,e,r){var n=t(r,e);return n===0&&r!==e&&(r==null||r!==r)||n>0}function Qy(t,e,r,n){var a=no(t),s=new ol(r).map(function(o){return o.size});return a.size=n?s.max():s.min(),a.__iterate=function(o,u){for(var c=this.__iterator(ds,u),l,d=0;!(l=c.next()).done&&o(l.value,d++,this)!==!1;);return d},a.__iteratorUncached=function(o,u){var c=r.map(function(h){return h=Dr(h),NE(u?h.reverse():h)}),l=0,d=!1;return new Xt(function(){var h;return d||(h=c.map(function(f){return f.next()}),d=n?h.every(function(f){return f.done}):h.some(function(f){return f.done})),d?Pi():Nr(o,l++,e.apply(null,h.map(function(f){return f.value})))})},a}function gr(t,e){return t===e?t:e0(t)?e:t.constructor(e)}function kI(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function yA(t){return _r(t)?Pa:qn(t)?ml:vf}function no(t){return Object.create((_r(t)?ac:qn(t)?Da:Tf).prototype)}function bA(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):ui.prototype.cacheResult.call(this)}function aj(t,e){return t===void 0&&e===void 0?0:t===void 0?1:e===void 0?-1:t>e?1:t<e?-1:0}function Bs(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),a=0;a<r;a++)n[a]=t[a+e];return n}function mA(t,e){if(!t)throw new Error(e)}function sa(t){mA(t!==1/0,"Cannot perform this action with an infinite size.")}function sj(t){if(uA(t)&&typeof t!="string")return t;if(da(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}var bH=Object.prototype.toString;function Im(t){if(!t||typeof t!="object"||bH.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e,n=Object.getPrototypeOf(e);n!==null;)r=n,n=Object.getPrototypeOf(r);return r===e}function Yu(t){return typeof t=="object"&&(ya(t)||Array.isArray(t)||Im(t))}function Ep(t){try{return typeof t=="string"?JSON.stringify(t):String(t)}catch{return JSON.stringify(t)}}function gA(t,e){return ya(t)?t.has(e):Yu(t)&&Sf.call(t,e)}function Pm(t,e,r){return ya(t)?t.get(e,r):gA(t,e)?typeof t.get=="function"?t.get(e):t[e]:r}function Db(t){if(Array.isArray(t))return Bs(t);var e={};for(var r in t)Sf.call(t,r)&&(e[r]=t[r]);return e}function _A(t,e){if(!Yu(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(ya(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!Sf.call(t,e))return t;var r=Db(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function vA(t,e,r){if(!Yu(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(ya(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(Sf.call(t,e)&&r===t[e])return t;var n=Db(t);return n[e]=r,n}function sc(t,e,r,n){n||(n=r,r=void 0);var a=oj(ya(t),t,sj(e),0,r,n);return a===Vt?r:a}function oj(t,e,r,n,a,s){var o=e===Vt;if(n===r.length){var u=o?a:e,c=s(u);return c===u?e:c}if(!o&&!Yu(e))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(Ep)+"]: "+e);var l=r[n],d=o?Vt:Pm(e,l,Vt),h=oj(d===Vt?t:ya(d),d,r,n+1,a,s);return h===d?e:h===Vt?_A(e,l):vA(o?t?is():{}:e,l,h)}function wA(t,e,r){return sc(t,e,Vt,function(){return r})}function SA(t,e){return wA(this,t,e)}function TA(t,e){return sc(t,e,function(){return Vt})}function EA(t){return TA(this,t)}function Dm(t,e,r,n){return sc(t,[e],r,n)}function OA(t,e,r){return arguments.length===1?t(this):Dm(this,t,e,r)}function AA(t,e,r){return sc(this,t,e,r)}function uj(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return lj(this,t)}function cj(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(typeof t!="function")throw new TypeError("Invalid merger function: "+t);return lj(this,e,t)}function lj(t,e,r){for(var n=[],a=0;a<e.length;a++){var s=Pa(e[a]);s.size!==0&&n.push(s)}return n.length===0?t:t.toSeq().size===0&&!t.__ownerID&&n.length===1?t.constructor(n[0]):t.withMutations(function(o){for(var u=r?function(l,d){Dm(o,d,Vt,function(h){return h===Vt?l:r(h,l,d)})}:function(l,d){o.set(d,l)},c=0;c<n.length;c++)n[c].forEach(u)})}function dj(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return i0(t,e)}function fj(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return i0(e,r,t)}function hj(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return n0(t,e)}function pj(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return n0(e,r,t)}function n0(t,e,r){return i0(t,e,mH(r))}function i0(t,e,r){if(!Yu(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(ya(t))return typeof r=="function"&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),a=t,s=n?ml:Pa,o=n?function(c){a===t&&(a=Db(a)),a.push(c)}:function(c,l){var d=Sf.call(a,l),h=d&&r?r(a[l],c,l):c;(!d||h!==a[l])&&(a===t&&(a=Db(a)),a[l]=h)},u=0;u<e.length;u++)s(e[u]).forEach(o);return a}function mH(t){function e(r,n,a){return Yu(r)&&Yu(n)&&gH(r,n)?i0(r,[n],e):t?t(r,n,a):n}return e}function gH(t,e){var r=ui(t),n=ui(e);return qn(r)===qn(n)&&_r(r)===_r(n)}function yj(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return n0(this,t)}function bj(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return n0(this,e,t)}function xA(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return sc(this,t,is(),function(n){return i0(n,e)})}function RA(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return sc(this,t,is(),function(n){return n0(n,e)})}function a0(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function s0(){return this.__ownerID?this:this.__ensureOwner(new sA)}function o0(){return this.__ensureOwner()}function IA(){return this.__altered}var oc=function(t){function e(r){return r==null?is():r0(r)&&!da(r)?r:is().withMutations(function(n){var a=t(r);sa(a.size),a.forEach(function(s,o){return n.set(o,s)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return is().withMutations(function(s){for(var o=0;o<n.length;o+=2){if(o+1>=n.length)throw new Error("Missing value for key: "+n[o]);s.set(n[o],n[o+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(n,a){return this._root?this._root.get(0,void 0,n,a):a},e.prototype.set=function(n,a){return zI(this,n,a)},e.prototype.remove=function(n){return zI(this,n,Vt)},e.prototype.deleteAll=function(n){var a=Dr(n);return a.size===0?this:this.withMutations(function(s){a.forEach(function(o){return s.remove(o)})})},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):is()},e.prototype.sort=function(n){return fs(Gd(this,n))},e.prototype.sortBy=function(n,a){return fs(Gd(this,a,n))},e.prototype.map=function(n,a){var s=this;return this.withMutations(function(o){o.forEach(function(u,c){o.set(c,n.call(a,u,c,s))})})},e.prototype.__iterator=function(n,a){return new _H(this,n,a)},e.prototype.__iterate=function(n,a){var s=this,o=0;return this._root&&this._root.iterate(function(u){return o++,n(u[1],u[0],s)},a),o},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?PA(this.size,this._root,n,this.__hash):this.size===0?is():(this.__ownerID=n,this.__altered=!1,this)},e}(Pa);oc.isMap=r0;var jr=oc.prototype;jr[X5]=!0;jr[Jp]=jr.remove;jr.removeAll=jr.deleteAll;jr.setIn=SA;jr.removeIn=jr.deleteIn=EA;jr.update=OA;jr.updateIn=AA;jr.merge=jr.concat=uj;jr.mergeWith=cj;jr.mergeDeep=yj;jr.mergeDeepWith=bj;jr.mergeIn=xA;jr.mergeDeepIn=RA;jr.withMutations=a0;jr.wasAltered=IA;jr.asImmutable=o0;jr["@@transducer/init"]=jr.asMutable=s0;jr["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])};jr["@@transducer/result"]=function(t){return t.asImmutable()};var Op=function(e,r){this.ownerID=e,this.entries=r};Op.prototype.get=function(e,r,n,a){for(var s=this.entries,o=0,u=s.length;o<u;o++)if(_n(n,s[o][0]))return s[o][1];return a};Op.prototype.update=function(e,r,n,a,s,o,u){for(var c=s===Vt,l=this.entries,d=0,h=l.length;d<h&&!_n(a,l[d][0]);d++);var f=d<h;if(f?l[d][1]===s:c)return this;if(Oa(u),(c||!f)&&Oa(o),!(c&&l.length===1)){if(!f&&!c&&l.length>=OH)return vH(e,l,a,s);var p=e&&e===this.ownerID,b=p?l:Bs(l);return f?c?d===h-1?b.pop():b[d]=b.pop():b[d]=[a,s]:b.push([a,s]),p?(this.entries=b,this):new Op(e,b)}};var zd=function(e,r,n){this.ownerID=e,this.bitmap=r,this.nodes=n};zd.prototype.get=function(e,r,n,a){r===void 0&&(r=Ai(n));var s=1<<((e===0?r:r>>>e)&Ri),o=this.bitmap;return o&s?this.nodes[mj(o&s-1)].get(e+Ir,r,n,a):a};zd.prototype.update=function(e,r,n,a,s,o,u){n===void 0&&(n=Ai(a));var c=(r===0?n:n>>>r)&Ri,l=1<<c,d=this.bitmap,h=(d&l)!==0;if(!h&&s===Vt)return this;var f=mj(d&l-1),p=this.nodes,b=h?p[f]:void 0,y=DA(b,e,r+Ir,n,a,s,o,u);if(y===b)return this;if(!h&&y&&p.length>=AH)return SH(e,p,d,c,y);if(h&&!y&&p.length===2&&WI(p[f^1]))return p[f^1];if(h&&y&&p.length===1&&WI(y))return y;var S=e&&e===this.ownerID,w=h?y?d:d^l:d|l,I=h?y?gj(p,f,y,S):EH(p,f,S):TH(p,f,y,S);return S?(this.bitmap=w,this.nodes=I,this):new zd(e,w,I)};var Ap=function(e,r,n){this.ownerID=e,this.count=r,this.nodes=n};Ap.prototype.get=function(e,r,n,a){r===void 0&&(r=Ai(n));var s=(e===0?r:r>>>e)&Ri,o=this.nodes[s];return o?o.get(e+Ir,r,n,a):a};Ap.prototype.update=function(e,r,n,a,s,o,u){n===void 0&&(n=Ai(a));var c=(r===0?n:n>>>r)&Ri,l=s===Vt,d=this.nodes,h=d[c];if(l&&!h)return this;var f=DA(h,e,r+Ir,n,a,s,o,u);if(f===h)return this;var p=this.count;if(!h)p++;else if(!f&&(p--,p<xH))return wH(e,d,p,c);var b=e&&e===this.ownerID,y=gj(d,c,f,b);return b?(this.count=p,this.nodes=y,this):new Ap(e,p,y)};var Wd=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entries=n};Wd.prototype.get=function(e,r,n,a){for(var s=this.entries,o=0,u=s.length;o<u;o++)if(_n(n,s[o][0]))return s[o][1];return a};Wd.prototype.update=function(e,r,n,a,s,o,u){n===void 0&&(n=Ai(a));var c=s===Vt;if(n!==this.keyHash)return c?this:(Oa(u),Oa(o),NA(this,e,r,n,[a,s]));for(var l=this.entries,d=0,h=l.length;d<h&&!_n(a,l[d][0]);d++);var f=d<h;if(f?l[d][1]===s:c)return this;if(Oa(u),(c||!f)&&Oa(o),c&&h===2)return new Wo(e,this.keyHash,l[d^1]);var p=e&&e===this.ownerID,b=p?l:Bs(l);return f?c?d===h-1?b.pop():b[d]=b.pop():b[d]=[a,s]:b.push([a,s]),p?(this.entries=b,this):new Wd(e,this.keyHash,b)};var Wo=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entry=n};Wo.prototype.get=function(e,r,n,a){return _n(n,this.entry[0])?this.entry[1]:a};Wo.prototype.update=function(e,r,n,a,s,o,u){var c=s===Vt,l=_n(a,this.entry[0]);if(l?s===this.entry[1]:c)return this;if(Oa(u),c){Oa(o);return}return l?e&&e===this.ownerID?(this.entry[1]=s,this):new Wo(e,this.keyHash,[a,s]):(Oa(o),NA(this,e,r,Ai(a),[a,s]))};Op.prototype.iterate=Wd.prototype.iterate=function(t,e){for(var r=this.entries,n=0,a=r.length-1;n<=a;n++)if(t(r[e?a-n:n])===!1)return!1};zd.prototype.iterate=Ap.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,a=r.length-1;n<=a;n++){var s=r[e?a-n:n];if(s&&s.iterate(t,e)===!1)return!1}};Wo.prototype.iterate=function(t,e){return t(this.entry)};var _H=function(t){function e(r,n,a){this._type=n,this._reverse=a,this._stack=r._root&&QI(r._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var n=this._type,a=this._stack;a;){var s=a.node,o=a.index++,u=void 0;if(s.entry){if(o===0)return xS(n,s.entry)}else if(s.entries){if(u=s.entries.length-1,o<=u)return xS(n,s.entries[this._reverse?u-o:o])}else if(u=s.nodes.length-1,o<=u){var c=s.nodes[this._reverse?u-o:o];if(c){if(c.entry)return xS(n,c.entry);a=this._stack=QI(c,a)}continue}a=this._stack=this._stack.__prev}return Pi()},e}(Xt);function xS(t,e){return Nr(t,e[0],e[1])}function QI(t,e){return{node:t,index:0,__prev:e}}function PA(t,e,r,n){var a=Object.create(jr);return a.size=t,a._root=e,a.__ownerID=r,a.__hash=n,a.__altered=!1,a}var GI;function is(){return GI||(GI=PA(0))}function zI(t,e,r){var n,a;if(t._root){var s=PE(),o=PE();if(n=DA(t._root,t.__ownerID,0,void 0,e,r,s,o),!o.value)return t;a=t.size+(s.value?r===Vt?-1:1:0)}else{if(r===Vt)return t;a=1,n=new Op(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=a,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?PA(a,n):is()}function DA(t,e,r,n,a,s,o,u){return t?t.update(e,r,n,a,s,o,u):s===Vt?t:(Oa(u),Oa(o),new Wo(e,n,[a,s]))}function WI(t){return t.constructor===Wo||t.constructor===Wd}function NA(t,e,r,n,a){if(t.keyHash===n)return new Wd(e,n,[t.entry,a]);var s=(r===0?t.keyHash:t.keyHash>>>r)&Ri,o=(r===0?n:n>>>r)&Ri,u,c=s===o?[NA(t,e,r+Ir,n,a)]:(u=new Wo(e,n,a),s<o?[t,u]:[u,t]);return new zd(e,1<<s|1<<o,c)}function vH(t,e,r,n){t||(t=new sA);for(var a=new Wo(t,Ai(r),[r,n]),s=0;s<e.length;s++){var o=e[s];a=a.update(t,0,void 0,o[0],o[1])}return a}function wH(t,e,r,n){for(var a=0,s=0,o=new Array(r),u=0,c=1,l=e.length;u<l;u++,c<<=1){var d=e[u];d!==void 0&&u!==n&&(a|=c,o[s++]=d)}return new zd(t,a,o)}function SH(t,e,r,n,a){for(var s=0,o=new Array(Ea),u=0;r!==0;u++,r>>>=1)o[u]=r&1?e[s++]:void 0;return o[n]=a,new Ap(t,s+1,o)}function mj(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function gj(t,e,r,n){var a=n?t:Bs(t);return a[e]=r,a}function TH(t,e,r,n){var a=t.length+1;if(n&&e+1===a)return t[e]=r,t;for(var s=new Array(a),o=0,u=0;u<a;u++)u===e?(s[u]=r,o=-1):s[u]=t[u+o];return s}function EH(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var a=new Array(n),s=0,o=0;o<n;o++)o===e&&(s=1),a[o]=t[o+s];return a}var OH=Ea/4,AH=Ea/2,xH=Ea/4,_j="@@__IMMUTABLE_LIST__@@";function Nm(t){return!!(t&&t[_j])}var Ef=function(t){function e(r){var n=nb();if(r==null)return n;if(Nm(r))return r;var a=t(r),s=a.size;return s===0?n:(sa(s),s>0&&s<Ea?xp(0,s,Ir,null,new Vu(a.toArray())):n.withMutations(function(o){o.setSize(s),a.forEach(function(u,c){return o.set(c,u)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(n,a){if(n=Ju(this,n),n>=0&&n<this.size){n+=this._origin;var s=vj(this,n);return s&&s.array[n&Ri]}return a},e.prototype.set=function(n,a){return RH(this,n,a)},e.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},e.prototype.insert=function(n,a){return this.splice(n,0,a)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Ir,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):nb()},e.prototype.push=function(){var n=arguments,a=this.size;return this.withMutations(function(s){Au(s,0,a+n.length);for(var o=0;o<n.length;o++)s.set(a+o,n[o])})},e.prototype.pop=function(){return Au(this,0,-1)},e.prototype.unshift=function(){var n=arguments;return this.withMutations(function(a){Au(a,-n.length);for(var s=0;s<n.length;s++)a.set(s,n[s])})},e.prototype.shift=function(){return Au(this,1)},e.prototype.concat=function(){for(var n=arguments,a=[],s=0;s<arguments.length;s++){var o=n[s],u=t(typeof o!="string"&&oA(o)?o:[o]);u.size!==0&&a.push(u)}return a.length===0?this:this.size===0&&!this.__ownerID&&a.length===1?this.constructor(a[0]):this.withMutations(function(c){a.forEach(function(l){return l.forEach(function(d){return c.push(d)})})})},e.prototype.setSize=function(n){return Au(this,0,n)},e.prototype.map=function(n,a){var s=this;return this.withMutations(function(o){for(var u=0;u<s.size;u++)o.set(u,n.call(a,o.get(u),u,s))})},e.prototype.slice=function(n,a){var s=this.size;return Yp(n,a,s)?this:Au(this,gf(n,s),Zp(a,s))},e.prototype.__iterator=function(n,a){var s=a?this.size:0,o=XI(this,a);return new Xt(function(){var u=o();return u===op?Pi():Nr(n,a?--s:s++,u)})},e.prototype.__iterate=function(n,a){for(var s=a?this.size:0,o=XI(this,a),u;(u=o())!==op&&n(u,a?--s:s++,this)!==!1;);return s},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?xp(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?nb():(this.__ownerID=n,this.__altered=!1,this)},e}(ml);Ef.isList=Nm;var dn=Ef.prototype;dn[_j]=!0;dn[Jp]=dn.remove;dn.merge=dn.concat;dn.setIn=SA;dn.deleteIn=dn.removeIn=EA;dn.update=OA;dn.updateIn=AA;dn.mergeIn=xA;dn.mergeDeepIn=RA;dn.withMutations=a0;dn.wasAltered=IA;dn.asImmutable=o0;dn["@@transducer/init"]=dn.asMutable=s0;dn["@@transducer/step"]=function(t,e){return t.push(e)};dn["@@transducer/result"]=function(t){return t.asImmutable()};var Vu=function(e,r){this.array=e,this.ownerID=r};Vu.prototype.removeBefore=function(e,r,n){if(n===r?1<<r:this.array.length===0)return this;var a=n>>>r&Ri;if(a>=this.array.length)return new Vu([],e);var s=a===0,o;if(r>0){var u=this.array[a];if(o=u&&u.removeBefore(e,r-Ir,n),o===u&&s)return this}if(s&&!o)return this;var c=Xd(this,e);if(!s)for(var l=0;l<a;l++)c.array[l]=void 0;return o&&(c.array[a]=o),c};Vu.prototype.removeAfter=function(e,r,n){if(n===(r?1<<r:0)||this.array.length===0)return this;var a=n-1>>>r&Ri;if(a>=this.array.length)return this;var s;if(r>0){var o=this.array[a];if(s=o&&o.removeAfter(e,r-Ir,n),s===o&&a===this.array.length-1)return this}var u=Xd(this,e);return u.array.splice(a+1),s&&(u.array[a]=s),u};var op={};function XI(t,e){var r=t._origin,n=t._capacity,a=Rp(n),s=t._tail;return o(t._root,t._level,0);function o(l,d,h){return d===0?u(l,h):c(l,d,h)}function u(l,d){var h=d===a?s&&s.array:l&&l.array,f=d>r?0:r-d,p=n-d;return p>Ea&&(p=Ea),function(){if(f===p)return op;var b=e?--p:f++;return h&&h[b]}}function c(l,d,h){var f,p=l&&l.array,b=h>r?0:r-h>>d,y=(n-h>>d)+1;return y>Ea&&(y=Ea),function(){for(;;){if(f){var S=f();if(S!==op)return S;f=null}if(b===y)return op;var w=e?--y:b++;f=o(p&&p[w],d-Ir,h+(w<<d))}}}}function xp(t,e,r,n,a,s,o){var u=Object.create(dn);return u.size=e-t,u._origin=t,u._capacity=e,u._level=r,u._root=n,u._tail=a,u.__ownerID=s,u.__hash=o,u.__altered=!1,u}var KI;function nb(){return KI||(KI=xp(0,0,Ir))}function RH(t,e,r){if(e=Ju(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(o){e<0?Au(o,e).set(0,r):Au(o,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,a=t._root,s=PE();return e>=Rp(t._capacity)?n=ME(n,t.__ownerID,0,e,r,s):a=ME(a,t.__ownerID,t._level,e,r,s),s.value?t.__ownerID?(t._root=a,t._tail=n,t.__hash=void 0,t.__altered=!0,t):xp(t._origin,t._capacity,t._level,a,n):t}function ME(t,e,r,n,a,s){var o=n>>>r&Ri,u=t&&o<t.array.length;if(!u&&a===void 0)return t;var c;if(r>0){var l=t&&t.array[o],d=ME(l,e,r-Ir,n,a,s);return d===l?t:(c=Xd(t,e),c.array[o]=d,c)}return u&&t.array[o]===a?t:(s&&Oa(s),c=Xd(t,e),a===void 0&&o===c.array.length-1?c.array.pop():c.array[o]=a,c)}function Xd(t,e){return e&&t&&e===t.ownerID?t:new Vu(t?t.array.slice():[],e)}function vj(t,e){if(e>=Rp(t._capacity))return t._tail;if(e<1<<t._level+Ir){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&Ri],n-=Ir;return r}}function Au(t,e,r){e!==void 0&&(e|=0),r!==void 0&&(r|=0);var n=t.__ownerID||new sA,a=t._origin,s=t._capacity,o=a+e,u=r===void 0?s:r<0?s+r:a+r;if(o===a&&u===s)return t;if(o>=u)return t.clear();for(var c=t._level,l=t._root,d=0;o+d<0;)l=new Vu(l&&l.array.length?[void 0,l]:[],n),c+=Ir,d+=1<<c;d&&(o+=d,a+=d,u+=d,s+=d);for(var h=Rp(s),f=Rp(u);f>=1<<c+Ir;)l=new Vu(l&&l.array.length?[l]:[],n),c+=Ir;var p=t._tail,b=f<h?vj(t,u-1):f>h?new Vu([],n):p;if(p&&f>h&&o<s&&p.array.length){l=Xd(l,n);for(var y=l,S=c;S>Ir;S-=Ir){var w=h>>>S&Ri;y=y.array[w]=Xd(y.array[w],n)}y.array[h>>>Ir&Ri]=p}if(u<s&&(b=b&&b.removeAfter(n,0,u)),o>=f)o-=f,u-=f,c=Ir,l=null,b=b&&b.removeBefore(n,0,o);else if(o>a||f<h){for(d=0;l;){var I=o>>>c&Ri;if(I!==f>>>c&Ri)break;I&&(d+=(1<<c)*I),c-=Ir,l=l.array[I]}l&&o>a&&(l=l.removeBefore(n,c,o-d)),l&&f<h&&(l=l.removeAfter(n,c,f-d)),d&&(o-=d,u-=d)}return t.__ownerID?(t.size=u-o,t._origin=o,t._capacity=u,t._level=c,t._root=l,t._tail=b,t.__hash=void 0,t.__altered=!0,t):xp(o,u,c,l,b)}function Rp(t){return t<Ea?0:t-1>>>Ir<<Ir}var fs=function(t){function e(r){return r==null?$h():Am(r)?r:$h().withMutations(function(n){var a=Pa(r);sa(a.size),a.forEach(function(s,o){return n.set(o,s)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(n,a){var s=this._map.get(n);return s!==void 0?this._list.get(s)[1]:a},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):$h()},e.prototype.set=function(n,a){return YI(this,n,a)},e.prototype.remove=function(n){return YI(this,n,Vt)},e.prototype.__iterate=function(n,a){var s=this;return this._list.__iterate(function(o){return o&&n(o[1],o[0],s)},a)},e.prototype.__iterator=function(n,a){return this._list.fromEntrySeq().__iterator(n,a)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var a=this._map.__ensureOwner(n),s=this._list.__ensureOwner(n);return n?jA(a,s,n,this.__hash):this.size===0?$h():(this.__ownerID=n,this.__altered=!1,this._map=a,this._list=s,this)},e}(oc);fs.isOrderedMap=Am;fs.prototype[wf]=!0;fs.prototype[Jp]=fs.prototype.remove;function jA(t,e,r,n){var a=Object.create(fs.prototype);return a.size=t?t.size:0,a._map=t,a._list=e,a.__ownerID=r,a.__hash=n,a.__altered=!1,a}var JI;function $h(){return JI||(JI=jA(is(),nb()))}function YI(t,e,r){var n=t._map,a=t._list,s=n.get(e),o=s!==void 0,u,c;if(r===Vt){if(!o)return t;a.size>=Ea&&a.size>=n.size*2?(c=a.filter(function(l,d){return l!==void 0&&s!==d}),u=c.toKeyedSeq().map(function(l){return l[0]}).flip().toMap(),t.__ownerID&&(u.__ownerID=c.__ownerID=t.__ownerID)):(u=n.remove(e),c=s===a.size-1?a.pop():a.set(s,void 0))}else if(o){if(r===a.get(s)[1])return t;u=n,c=a.set(s,[e,r])}else u=n.set(e,a.size),c=a.set(a.size,[e,r]);return t.__ownerID?(t.size=u.size,t._map=u,t._list=c,t.__hash=void 0,t.__altered=!0,t):jA(u,c)}var wj="@@__IMMUTABLE_STACK__@@";function Ip(t){return!!(t&&t[wj])}var u0=function(t){function e(r){return r==null?Gy():Ip(r)?r:Gy().pushAll(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(n,a){var s=this._head;for(n=Ju(this,n);s&&n--;)s=s.next;return s?s.value:a},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var a=this.size+arguments.length,s=this._head,o=arguments.length-1;o>=0;o--)s={value:n[o],next:s};return this.__ownerID?(this.size=a,this._head=s,this.__hash=void 0,this.__altered=!0,this):Uh(a,s)},e.prototype.pushAll=function(n){if(n=t(n),n.size===0)return this;if(this.size===0&&Ip(n))return n;sa(n.size);var a=this.size,s=this._head;return n.__iterate(function(o){a++,s={value:o,next:s}},!0),this.__ownerID?(this.size=a,this._head=s,this.__hash=void 0,this.__altered=!0,this):Uh(a,s)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Gy()},e.prototype.slice=function(n,a){if(Yp(n,a,this.size))return this;var s=gf(n,this.size),o=Zp(a,this.size);if(o!==this.size)return t.prototype.slice.call(this,n,a);for(var u=this.size-s,c=this._head;s--;)c=c.next;return this.__ownerID?(this.size=u,this._head=c,this.__hash=void 0,this.__altered=!0,this):Uh(u,c)},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Uh(this.size,this._head,n,this.__hash):this.size===0?Gy():(this.__ownerID=n,this.__altered=!1,this)},e.prototype.__iterate=function(n,a){var s=this;if(a)return new ol(this.toArray()).__iterate(function(c,l){return n(c,l,s)},a);for(var o=0,u=this._head;u&&n(u.value,o++,this)!==!1;)u=u.next;return o},e.prototype.__iterator=function(n,a){if(a)return new ol(this.toArray()).__iterator(n,a);var s=0,o=this._head;return new Xt(function(){if(o){var u=o.value;return o=o.next,Nr(n,s++,u)}return Pi()})},e}(ml);u0.isStack=Ip;var Di=u0.prototype;Di[wj]=!0;Di.shift=Di.pop;Di.unshift=Di.push;Di.unshiftAll=Di.pushAll;Di.withMutations=a0;Di.wasAltered=IA;Di.asImmutable=o0;Di["@@transducer/init"]=Di.asMutable=s0;Di["@@transducer/step"]=function(t,e){return t.unshift(e)};Di["@@transducer/result"]=function(t){return t.asImmutable()};function Uh(t,e,r,n){var a=Object.create(Di);return a.size=t,a._head=e,a.__ownerID=r,a.__hash=n,a.__altered=!1,a}var ZI;function Gy(){return ZI||(ZI=Uh(0))}var Sj="@@__IMMUTABLE_SET__@@";function c0(t){return!!(t&&t[Sj])}function jm(t){return c0(t)&&da(t)}function CA(t,e){if(t===e)return!0;if(!oi(e)||t.size!==void 0&&e.size!==void 0&&t.size!==e.size||t.__hash!==void 0&&e.__hash!==void 0&&t.__hash!==e.__hash||_r(t)!==_r(e)||qn(t)!==qn(e)||da(t)!==da(e))return!1;if(t.size===0&&e.size===0)return!0;var r=!_f(t);if(da(t)){var n=t.entries();return e.every(function(c,l){var d=n.next().value;return d&&_n(d[1],c)&&(r||_n(d[0],l))})&&n.next().done}var a=!1;if(t.size===void 0)if(e.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{a=!0;var s=t;t=e,e=s}var o=!0,u=e.__iterate(function(c,l){if(r?!t.has(c):a?!_n(c,t.get(l,Vt)):!_n(t.get(l,Vt),c))return o=!1,!1});return o&&t.size===u}function gl(t,e){var r=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Nb(t){if(!t||typeof t!="object")return t;if(!oi(t)){if(!Yu(t))return t;t=ui(t)}if(_r(t)){var e={};return t.__iterate(function(n,a){e[a]=Nb(n)}),e}var r=[];return t.__iterate(function(n){r.push(Nb(n))}),r}var Of=function(t){function e(r){return r==null?qh():c0(r)&&!da(r)?r:qh().withMutations(function(n){var a=t(r);sa(a.size),a.forEach(function(s){return n.add(s)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(Pa(n).keySeq())},e.intersect=function(n){return n=Dr(n).toArray(),n.length?Vn.intersect.apply(e(n.pop()),n):qh()},e.union=function(n){return n=Dr(n).toArray(),n.length?Vn.union.apply(e(n.pop()),n):qh()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(n){return this._map.has(n)},e.prototype.add=function(n){return zy(this,this._map.set(n,n))},e.prototype.remove=function(n){return zy(this,this._map.remove(n))},e.prototype.clear=function(){return zy(this,this._map.clear())},e.prototype.map=function(n,a){var s=this,o=!1,u=zy(this,this._map.mapEntries(function(c){var l=c[1],d=n.call(a,l,l,s);return d!==l&&(o=!0),[d,d]},a));return o?u:this},e.prototype.union=function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return n=n.filter(function(s){return s.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(s){for(var o=0;o<n.length;o++)typeof n[o]=="string"?s.add(n[o]):t(n[o]).forEach(function(u){return s.add(u)})})},e.prototype.intersect=function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];if(n.length===0)return this;n=n.map(function(o){return t(o)});var s=[];return this.forEach(function(o){n.every(function(u){return u.includes(o)})||s.push(o)}),this.withMutations(function(o){s.forEach(function(u){o.remove(u)})})},e.prototype.subtract=function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];if(n.length===0)return this;n=n.map(function(o){return t(o)});var s=[];return this.forEach(function(o){n.some(function(u){return u.includes(o)})&&s.push(o)}),this.withMutations(function(o){s.forEach(function(u){o.remove(u)})})},e.prototype.sort=function(n){return ul(Gd(this,n))},e.prototype.sortBy=function(n,a){return ul(Gd(this,a,n))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(n,a){var s=this;return this._map.__iterate(function(o){return n(o,o,s)},a)},e.prototype.__iterator=function(n,a){return this._map.__iterator(n,a)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var a=this._map.__ensureOwner(n);return n?this.__make(a,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=a,this)},e}(vf);Of.isSet=c0;var Vn=Of.prototype;Vn[Sj]=!0;Vn[Jp]=Vn.remove;Vn.merge=Vn.concat=Vn.union;Vn.withMutations=a0;Vn.asImmutable=o0;Vn["@@transducer/init"]=Vn.asMutable=s0;Vn["@@transducer/step"]=function(t,e){return t.add(e)};Vn["@@transducer/result"]=function(t){return t.asImmutable()};Vn.__empty=qh;Vn.__make=Tj;function zy(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:e.size===0?t.__empty():t.__make(e)}function Tj(t,e){var r=Object.create(Vn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var eP;function qh(){return eP||(eP=Tj(is()))}var FA=function(t){function e(r,n,a){if(!(this instanceof e))return new e(r,n,a);if(mA(a!==0,"Cannot step a Range by 0"),r=r||0,n===void 0&&(n=1/0),a=a===void 0?1:Math.abs(a),n<r&&(a=-a),this._start=r,this._end=n,this._step=a,this.size=Math.max(0,Math.ceil((n-r)/a-1)+1),this.size===0){if(RS)return RS;RS=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},e.prototype.get=function(n,a){return this.has(n)?this._start+Ju(this,n)*this._step:a},e.prototype.includes=function(n){var a=(n-this._start)/this._step;return a>=0&&a<this.size&&a===Math.floor(a)},e.prototype.slice=function(n,a){return Yp(n,a,this.size)?this:(n=gf(n,this.size),a=Zp(a,this.size),a<=n?new e(0,0):new e(this.get(n,this._end),this.get(a,this._end),this._step))},e.prototype.indexOf=function(n){var a=n-this._start;if(a%this._step===0){var s=a/this._step;if(s>=0&&s<this.size)return s}return-1},e.prototype.lastIndexOf=function(n){return this.indexOf(n)},e.prototype.__iterate=function(n,a){for(var s=this.size,o=this._step,u=a?this._start+(s-1)*o:this._start,c=0;c!==s&&n(u,a?s-++c:c++,this)!==!1;)u+=a?-o:o;return c},e.prototype.__iterator=function(n,a){var s=this.size,o=this._step,u=a?this._start+(s-1)*o:this._start,c=0;return new Xt(function(){if(c===s)return Pi();var l=u;return u+=a?-o:o,Nr(n,a?s-++c:c++,l)})},e.prototype.equals=function(n){return n instanceof e?this._start===n._start&&this._end===n._end&&this._step===n._step:CA(this,n)},e}(Da),RS;function Cm(t,e,r){for(var n=sj(e),a=0;a!==n.length;)if(t=Pm(t,n[a++],Vt),t===Vt)return r;return t}function Ej(t,e){return Cm(this,t,e)}function MA(t,e){return Cm(t,e,Vt)!==Vt}function IH(t){return MA(this,t)}function Oj(){sa(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t}Dr.isIterable=oi;Dr.isKeyed=_r;Dr.isIndexed=qn;Dr.isAssociative=_f;Dr.isOrdered=da;Dr.Iterator=Xt;gl(Dr,{toArray:function(){sa(this.size);var e=new Array(this.size||0),r=_r(this),n=0;return this.__iterate(function(a,s){e[n++]=r?[s,a]:a}),e},toIndexedSeq:function(){return new J5(this)},toJS:function(){return Nb(this)},toKeyedSeq:function(){return new Rm(this,!0)},toMap:function(){return oc(this.toKeyedSeq())},toObject:Oj,toOrderedMap:function(){return fs(this.toKeyedSeq())},toOrderedSet:function(){return ul(_r(this)?this.valueSeq():this)},toSet:function(){return Of(_r(this)?this.valueSeq():this)},toSetSeq:function(){return new Y5(this)},toSeq:function(){return qn(this)?this.toIndexedSeq():_r(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return u0(_r(this)?this.valueSeq():this)},toList:function(){return Ef(_r(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,r){return this.size===0?e+r:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+r},concat:function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return gr(this,hH(this,e))},includes:function(e){return this.some(function(r){return _n(r,e)})},entries:function(){return this.__iterator(Ra)},every:function(e,r){sa(this.size);var n=!0;return this.__iterate(function(a,s,o){if(!e.call(r,a,s,o))return n=!1,!1}),n},filter:function(e,r){return gr(this,rj(this,e,r,!0))},partition:function(e,r){return dH(this,e,r)},find:function(e,r,n){var a=this.findEntry(e,r);return a?a[1]:n},forEach:function(e,r){return sa(this.size),this.__iterate(r?e.bind(r):e)},join:function(e){sa(this.size),e=e!==void 0?""+e:",";var r="",n=!0;return this.__iterate(function(a){n?n=!1:r+=e,r+=a!=null?a.toString():""}),r},keys:function(){return this.__iterator(t0)},map:function(e,r){return gr(this,tj(this,e,r))},reduce:function(e,r,n){return tP(this,e,r,n,arguments.length<2,!1)},reduceRight:function(e,r,n){return tP(this,e,r,n,arguments.length<2,!0)},reverse:function(){return gr(this,hA(this,!0))},slice:function(e,r){return gr(this,pA(this,e,r,!0))},some:function(e,r){sa(this.size);var n=!1;return this.__iterate(function(a,s,o){if(e.call(r,a,s,o))return n=!0,!1}),n},sort:function(e){return gr(this,Gd(this,e))},values:function(){return this.__iterator(ds)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(e,r){return Qd(e?this.toSeq().filter(e,r):this)},countBy:function(e,r){return cH(this,e,r)},equals:function(e){return CA(this,e)},entrySeq:function(){var e=this;if(e._cache)return new ol(e._cache);var r=e.toSeq().map(DH).toIndexedSeq();return r.fromEntrySeq=function(){return e.toSeq()},r},filterNot:function(e,r){return this.filter(IS(e),r)},findEntry:function(e,r,n){var a=n;return this.__iterate(function(s,o,u){if(e.call(r,s,o,u))return a=[o,s],!1}),a},findKey:function(e,r){var n=this.findEntry(e,r);return n&&n[0]},findLast:function(e,r,n){return this.toKeyedSeq().reverse().find(e,r,n)},findLastEntry:function(e,r,n){return this.toKeyedSeq().reverse().findEntry(e,r,n)},findLastKey:function(e,r){return this.toKeyedSeq().reverse().findKey(e,r)},first:function(e){return this.find($5,null,e)},flatMap:function(e,r){return gr(this,pH(this,e,r))},flatten:function(e){return gr(this,ij(this,e,!0))},fromEntrySeq:function(){return new Z5(this)},get:function(e,r){return this.find(function(n,a){return _n(a,e)},void 0,r)},getIn:Ej,groupBy:function(e,r){return lH(this,e,r)},has:function(e){return this.get(e,Vt)!==Vt},hasIn:IH,isSubset:function(e){return e=typeof e.includes=="function"?e:Dr(e),this.every(function(r){return e.includes(r)})},isSuperset:function(e){return e=typeof e.isSubset=="function"?e:Dr(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(r){return _n(r,e)})},keySeq:function(){return this.toSeq().map(PH).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return ky(this,e)},maxBy:function(e,r){return ky(this,r,e)},min:function(e){return ky(this,e?rP(e):iP)},minBy:function(e,r){return ky(this,r?rP(r):iP,e)},rest:function(){return this.slice(1)},skip:function(e){return e===0?this:this.slice(Math.max(0,e))},skipLast:function(e){return e===0?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,r){return gr(this,nj(this,e,r,!0))},skipUntil:function(e,r){return this.skipWhile(IS(e),r)},sortBy:function(e,r){return gr(this,Gd(this,r,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,r){return gr(this,fH(this,e,r))},takeUntil:function(e,r){return this.takeWhile(IS(e),r)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=NH(this))}});var ci=Dr.prototype;ci[V5]=!0;ci[Em]=ci.values;ci.toJSON=ci.toArray;ci.__toStringMapper=Ep;ci.inspect=ci.toSource=function(){return this.toString()};ci.chain=ci.flatMap;ci.contains=ci.includes;gl(Pa,{flip:function(){return gr(this,ej(this))},mapEntries:function(e,r){var n=this,a=0;return gr(this,this.toSeq().map(function(s,o){return e.call(r,[o,s],a++,n)}).fromEntrySeq())},mapKeys:function(e,r){var n=this;return gr(this,this.toSeq().flip().map(function(a,s){return e.call(r,a,s,n)}).flip())}});var l0=Pa.prototype;l0[H5]=!0;l0[Em]=ci.entries;l0.toJSON=Oj;l0.__toStringMapper=function(t,e){return Ep(e)+": "+Ep(t)};gl(ml,{toKeyedSeq:function(){return new Rm(this,!1)},filter:function(e,r){return gr(this,rj(this,e,r,!1))},findIndex:function(e,r){var n=this.findEntry(e,r);return n?n[0]:-1},indexOf:function(e){var r=this.keyOf(e);return r===void 0?-1:r},lastIndexOf:function(e){var r=this.lastKeyOf(e);return r===void 0?-1:r},reverse:function(){return gr(this,hA(this,!1))},slice:function(e,r){return gr(this,pA(this,e,r,!1))},splice:function(e,r){var n=arguments.length;if(r=Math.max(r||0,0),n===0||n===2&&!r)return this;e=gf(e,e<0?this.count():this.size);var a=this.slice(0,e);return gr(this,n===1?a:a.concat(Bs(arguments,2),this.slice(e+r)))},findLastIndex:function(e,r){var n=this.findLastEntry(e,r);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return gr(this,ij(this,e,!1))},get:function(e,r){return e=Ju(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?r:this.find(function(n,a){return a===e},void 0,r)},has:function(e){return e=Ju(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return gr(this,yH(this,e))},interleave:function(){var e=[this].concat(Bs(arguments)),r=Qy(this.toSeq(),Da.of,e),n=r.flatten(!0);return r.size&&(n.size=r.size*e.length),gr(this,n)},keySeq:function(){return FA(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,r){return gr(this,nj(this,e,r,!1))},zip:function(){var e=[this].concat(Bs(arguments));return gr(this,Qy(this,nP,e))},zipAll:function(){var e=[this].concat(Bs(arguments));return gr(this,Qy(this,nP,e,!0))},zipWith:function(e){var r=Bs(arguments);return r[0]=this,gr(this,Qy(this,e,r))}});var Af=ml.prototype;Af[k5]=!0;Af[wf]=!0;gl(vf,{get:function(e,r){return this.has(e)?e:r},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var Kd=vf.prototype;Kd.has=ci.includes;Kd.contains=Kd.includes;Kd.keys=Kd.values;gl(ac,l0);gl(Da,Af);gl(Tf,Kd);function tP(t,e,r,n,a,s){return sa(t.size),t.__iterate(function(o,u,c){a?(a=!1,r=o):r=e.call(n,r,o,u,c)},s),r}function PH(t,e){return e}function DH(t,e){return[e,t]}function IS(t){return function(){return!t.apply(this,arguments)}}function rP(t){return function(){return-t.apply(this,arguments)}}function nP(){return Bs(arguments)}function iP(t,e){return t<e?1:t>e?-1:0}function NH(t){if(t.size===1/0)return 0;var e=da(t),r=_r(t),n=e?1:0,a=t.__iterate(r?e?function(s,o){n=31*n+aP(Ai(s),Ai(o))|0}:function(s,o){n=n+aP(Ai(s),Ai(o))|0}:e?function(s){n=31*n+Ai(s)|0}:function(s){n=n+Ai(s)|0});return jH(a,n)}function jH(t,e){return e=Zf(e,3432918353),e=Zf(e<<15|e>>>-15,461845907),e=Zf(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Zf(e^e>>>16,2246822507),e=Zf(e^e>>>13,3266489909),e=xm(e^e>>>16),e}function aP(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var ul=function(t){function e(r){return r==null?LE():jm(r)?r:LE().withMutations(function(n){var a=vf(r);sa(a.size),a.forEach(function(s){return n.add(s)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(Pa(n).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Of);ul.isOrderedSet=jm;var _l=ul.prototype;_l[wf]=!0;_l.zip=Af.zip;_l.zipWith=Af.zipWith;_l.zipAll=Af.zipAll;_l.__empty=LE;_l.__make=Aj;function Aj(t,e){var r=Object.create(_l);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var sP;function LE(){return sP||(sP=Aj($h()))}var xj={LeftThenRight:-1,RightThenLeft:1};function CH(t){if(ic(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(ya(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(t===null||typeof t!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var fn=function(e,r){var n;CH(e);var a=function(u){var c=this;if(u instanceof a)return u;if(!(this instanceof a))return new a(u);if(!n){n=!0;var l=Object.keys(e),d=s._indices={};s._name=r,s._keys=l,s._defaultValues=e;for(var h=0;h<l.length;h++){var f=l[h];d[f]=h,s[f]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+BA(this)+' with property "'+f+'" since that property name is part of the Record API.'):FH(s,f)}}return this.__ownerID=void 0,this._values=Ef().withMutations(function(p){p.setSize(c._keys.length),Pa(u).forEach(function(b,y){p.set(c._indices[y],b===c._defaultValues[y]?void 0:b)})}),this},s=a.prototype=Object.create(Tr);return s.constructor=a,r&&(a.displayName=r),a};fn.prototype.toString=function(){for(var e=BA(this)+" { ",r=this._keys,n,a=0,s=r.length;a!==s;a++)n=r[a],e+=(a?", ":"")+n+": "+Ep(this.get(n));return e+" }"};fn.prototype.equals=function(e){return this===e||ic(e)&&Jd(this).equals(Jd(e))};fn.prototype.hashCode=function(){return Jd(this).hashCode()};fn.prototype.has=function(e){return this._indices.hasOwnProperty(e)};fn.prototype.get=function(e,r){if(!this.has(e))return r;var n=this._indices[e],a=this._values.get(n);return a===void 0?this._defaultValues[e]:a};fn.prototype.set=function(e,r){if(this.has(e)){var n=this._values.set(this._indices[e],r===this._defaultValues[e]?void 0:r);if(n!==this._values&&!this.__ownerID)return LA(this,n)}return this};fn.prototype.remove=function(e){return this.set(e)};fn.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:LA(this,e)};fn.prototype.wasAltered=function(){return this._values.wasAltered()};fn.prototype.toSeq=function(){return Jd(this)};fn.prototype.toJS=function(){return Nb(this)};fn.prototype.entries=function(){return this.__iterator(Ra)};fn.prototype.__iterator=function(e,r){return Jd(this).__iterator(e,r)};fn.prototype.__iterate=function(e,r){return Jd(this).__iterate(e,r)};fn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var r=this._values.__ensureOwner(e);return e?LA(this,r,e):(this.__ownerID=e,this._values=r,this)};fn.isRecord=ic;fn.getDescriptiveName=BA;var Tr=fn.prototype;Tr[G5]=!0;Tr[Jp]=Tr.remove;Tr.deleteIn=Tr.removeIn=EA;Tr.getIn=Ej;Tr.hasIn=ci.hasIn;Tr.merge=uj;Tr.mergeWith=cj;Tr.mergeIn=xA;Tr.mergeDeep=yj;Tr.mergeDeepWith=bj;Tr.mergeDeepIn=RA;Tr.setIn=SA;Tr.update=OA;Tr.updateIn=AA;Tr.withMutations=a0;Tr.asMutable=s0;Tr.asImmutable=o0;Tr[Em]=Tr.entries;Tr.toJSON=Tr.toObject=ci.toObject;Tr.inspect=Tr.toSource=function(){return this.toString()};function LA(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function BA(t){return t.constructor.displayName||t.constructor.name||"Record"}function Jd(t){return dA(t._keys.map(function(e){return[e,t.get(e)]}))}function FH(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(r){mA(this.__ownerID,"Cannot set on an immutable record."),this.set(e,r)}})}catch{}}var Rj=function(t){function e(r,n){if(!(this instanceof e))return new e(r,n);if(this._value=r,this.size=n===void 0?1/0:Math.max(0,n),this.size===0){if(PS)return PS;PS=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(n,a){return this.has(n)?this._value:a},e.prototype.includes=function(n){return _n(this._value,n)},e.prototype.slice=function(n,a){var s=this.size;return Yp(n,a,s)?this:new e(this._value,Zp(a,s)-gf(n,s))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(n){return _n(this._value,n)?0:-1},e.prototype.lastIndexOf=function(n){return _n(this._value,n)?this.size:-1},e.prototype.__iterate=function(n,a){for(var s=this.size,o=0;o!==s&&n(this._value,a?s-++o:o++,this)!==!1;);return o},e.prototype.__iterator=function(n,a){var s=this,o=this.size,u=0;return new Xt(function(){return u===o?Pi():Nr(n,a?o-++u:u++,s._value)})},e.prototype.equals=function(n){return n instanceof e?_n(this._value,n._value):CA(n)},e}(Da),PS;function Ij(t,e){return Pj([],e||MH,t,"",e&&e.length>2?[]:void 0,{"":t})}function Pj(t,e,r,n,a,s){if(typeof r!="string"&&!ya(r)&&(uA(r)||oA(r)||Im(r))){if(~t.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");t.push(r),a&&n!==""&&a.push(n);var o=e.call(s,n,ui(r).map(function(u,c){return Pj(t,e,u,c,a,r)}),a&&a.slice());return t.pop(),a&&a.pop(),o}return r}function MH(t,e){return qn(e)?e.toList():_r(e)?e.toMap():e.toSet()}var Dj="4.3.5",LH={version:Dj,Collection:Dr,Iterable:Dr,Seq:ui,Map:oc,OrderedMap:fs,List:Ef,Stack:u0,Set:Of,OrderedSet:ul,PairSorting:xj,Record:fn,Range:FA,Repeat:Rj,is:_n,fromJS:Ij,hash:Ai,isImmutable:ya,isCollection:oi,isKeyed:_r,isIndexed:qn,isAssociative:_f,isOrdered:da,isValueObject:Pb,isPlainObject:Im,isSeq:e0,isList:Nm,isMap:r0,isOrderedMap:Am,isStack:Ip,isSet:c0,isOrderedSet:jm,isRecord:ic,get:Pm,getIn:Cm,has:gA,hasIn:MA,merge:dj,mergeDeep:hj,mergeWith:fj,mergeDeepWith:pj,remove:_A,removeIn:TA,set:vA,setIn:wA,update:Dm,updateIn:sc},BH=Dr;const $H=Object.freeze(Object.defineProperty({__proto__:null,Collection:Dr,Iterable:BH,List:Ef,Map:oc,OrderedMap:fs,OrderedSet:ul,PairSorting:xj,Range:FA,Record:fn,Repeat:Rj,Seq:ui,Set:Of,Stack:u0,default:LH,fromJS:Ij,get:Pm,getIn:Cm,has:gA,hasIn:MA,hash:Ai,is:_n,isAssociative:_f,isCollection:oi,isImmutable:ya,isIndexed:qn,isKeyed:_r,isList:Nm,isMap:r0,isOrdered:da,isOrderedMap:Am,isOrderedSet:jm,isPlainObject:Im,isRecord:ic,isSeq:e0,isSet:c0,isStack:Ip,isValueObject:Pb,merge:dj,mergeDeep:hj,mergeDeepWith:pj,mergeWith:fj,remove:_A,removeIn:TA,set:vA,setIn:wA,update:Dm,updateIn:sc,version:Dj},Symbol.toStringTag,{value:"Module"})),$A=iA($H);Object.defineProperty(sl,"__esModule",{value:!0});sl.ActionContextKey=sl.ActionContext=void 0;const oP=$A;class gd{constructor(e={}){this.map=(0,oP.Map)(e)}setDefault(e,r){return this.has(e)?this:this.set(e,r)}set(e,r){return this.setRaw(e.name,r)}setRaw(e,r){return new gd(this.map.set(e,r))}delete(e){return new gd(this.map.delete(e.name))}get(e){return this.getRaw(e.name)}getRaw(e){return this.map.get(e)}getSafe(e){if(!this.has(e))throw new Error(`Context entry ${e.name} is required but not available`);return this.get(e)}has(e){return this.hasRaw(e.name)}hasRaw(e){return this.map.has(e)}merge(...e){let r=this;for(const n of e)for(const a of n.keys())r=r.set(a,n.get(a));return r}keys(){return[...this.map.keys()].map(e=>new Nj(e))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(e){return e instanceof gd?e:new gd((0,oP.Map)(e||{}))}}sl.ActionContext=gd;class Nj{constructor(e){this.name=e}}sl.ActionContextKey=Nj;var d0={};Object.defineProperty(d0,"__esModule",{value:!0});d0.Bus=void 0;class UH{constructor(e){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,e)}subscribe(e){this.actors.push(e),this.reorderForDependencies()}subscribeObserver(e){this.observers.push(e)}unsubscribe(e){const r=this.actors.indexOf(e);return r>=0?(this.actors.splice(r,1),!0):!1}unsubscribeObserver(e){const r=this.observers.indexOf(e);return r>=0?(this.observers.splice(r,1),!0):!1}publish(e){return this.actors.map(r=>({actor:r,reply:r.test(e)}))}onRun(e,r,n){for(const a of this.observers)a.onRun(e,r,n)}addDependencies(e,r){for(const n of r){let a=this.dependencyLinks.get(n);a||(a=[],this.dependencyLinks.set(n,a)),a.push(e)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const e=[];for(const r of this.dependencyLinks.keys()){const n=this.actors.indexOf(r);n>=0&&(this.actors.splice(n,1),e.push(r))}for(;e.length>0;){let r=-1;for(let a=0;a<e.length;a++){let s=!0;for(const o of this.dependencyLinks.get(e[a]))if(!this.actors.includes(o)&&e.includes(o)){s=!1;break}if(s){r=a;break}}if(r<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const n=e.splice(r,1)[0];this.actors.push(n)}}}}d0.Bus=UH;var Fm={};Object.defineProperty(Fm,"__esModule",{value:!0});Fm.BusIndexed=void 0;const qH=d0;class VH extends qH.Bus{constructor(e){super(e),this.actorsIndex={}}subscribe(e){const r=this.getActorIdentifier(e)||"_undefined_";let n=this.actorsIndex[r];n||(n=this.actorsIndex[r]=[]),n.push(e),super.subscribe(e)}unsubscribe(e){const r=this.getActorIdentifier(e)||"_undefined_",n=this.actorsIndex[r];if(n){const a=n.indexOf(e);a>=0&&n.splice(a,1),n.length===0&&delete this.actorsIndex[r]}return super.unsubscribe(e)}publish(e){const r=this.getActionIdentifier(e);return r?[...this.actorsIndex[r]||[],...this.actorsIndex._undefined_||[]].map(a=>({actor:a,reply:a.test(e)})):super.publish(e)}getActorIdentifier(e){return this.actorIdentifierFields.reduce((r,n)=>r[n],e)}getActionIdentifier(e){return this.actionIdentifierFields.reduce((r,n)=>r[n],e)}}Fm.BusIndexed=VH;var f0={};Object.defineProperty(f0,"__esModule",{value:!0});f0.CONTEXT_KEY_LOGGER=void 0;const HH=sl;f0.CONTEXT_KEY_LOGGER=new HH.ActionContextKey("@comunica/core:log");var Mm={};Object.defineProperty(Mm,"__esModule",{value:!0});Mm.ActionObserver=void 0;class kH{constructor(e){Object.assign(this,e)}}Mm.ActionObserver=kH;var Lm={};Object.defineProperty(Lm,"__esModule",{value:!0});Lm.Actor=void 0;const QH=f0;class xu{constructor(e){this.beforeActors=[],Object.assign(this,e),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors)}static getContextLogger(e){return e.get(QH.CONTEXT_KEY_LOGGER)}runObservable(e){const r=this.run(e);return this.bus.onRun(this,e,r),r}async initialize(){return!0}async deinitialize(){return!0}getDefaultLogData(e,r){const n=r?r():{};return n.actor=this.name,n}logTrace(e,r,n){const a=xu.getContextLogger(e);a&&a.trace(r,this.getDefaultLogData(e,n))}logDebug(e,r,n){const a=xu.getContextLogger(e);a&&a.debug(r,this.getDefaultLogData(e,n))}logInfo(e,r,n){const a=xu.getContextLogger(e);a&&a.info(r,this.getDefaultLogData(e,n))}logWarn(e,r,n){const a=xu.getContextLogger(e);a&&a.warn(r,this.getDefaultLogData(e,n))}logError(e,r,n){const a=xu.getContextLogger(e);a&&a.error(r,this.getDefaultLogData(e,n))}logFatal(e,r,n){const a=xu.getContextLogger(e);a&&a.fatal(r,this.getDefaultLogData(e,n))}}Lm.Actor=xu;var Bm={};Object.defineProperty(Bm,"__esModule",{value:!0});Bm.Mediator=void 0;class GH{constructor(e){Object.assign(this,e)}publish(e){const r=this.bus.publish(e);if(r.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return r}async mediateActor(e){return await this.mediateWith(e,this.publish(e))}async mediate(e){return(await this.mediateActor(e)).runObservable(e)}}Bm.Mediator=GH;(function(t){var e=g&&g.__createBinding||(Object.create?function(s,o,u,c){c===void 0&&(c=u);var l=Object.getOwnPropertyDescriptor(o,u);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(s,c,l)}:function(s,o,u,c){c===void 0&&(c=u),s[c]=o[u]}),r=g&&g.__exportStar||function(s,o){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&e(o,s,u)};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const a=aA.Logger;t.Logger=a,r(sl,t),r(d0,t),r(Fm,t),r(f0,t),r(Mm,t),r(Lm,t),r(Bm,t)})(et);Object.defineProperty(wm,"__esModule",{value:!0});wm.ActorInit=void 0;const zH=et;class WH extends zH.Actor{constructor(e){super(e)}}wm.ActorInit=WH;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(wm,t)})(O5);Object.defineProperty(Kp,"__esModule",{value:!0});Kp.ActorInitQueryBase=void 0;const XH=O5;class KH extends XH.ActorInit{constructor(e){var r;(r=e.contextKeyShortcutsExtensions)==null||r.forEach(n=>{if(Object.keys(e.contextKeyShortcuts).some(a=>Object.keys(n).includes(a)))throw new Error("Duplicate keys found while adding `contextKeyShortcutsExtensions`.");e.contextKeyShortcuts={...e.contextKeyShortcuts,...n}}),super(e)}async test(e){return!0}async run(e){throw new Error("ActorInitSparql#run is not supported in the browser.")}}Kp.ActorInitQueryBase=KH;var $m={},DS={exports:{}},uP;function ru(){if(uP)return DS.exports;uP=1;var t=DS.exports={},e,r;function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?r=clearTimeout:r=a}catch{r=a}})();function s(y){if(e===setTimeout)return setTimeout(y,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(y,0);try{return e(y,0)}catch{try{return e.call(null,y,0)}catch{return e.call(this,y,0)}}}function o(y){if(r===clearTimeout)return clearTimeout(y);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(y);try{return r(y)}catch{try{return r.call(null,y)}catch{return r.call(this,y)}}}var u=[],c=!1,l,d=-1;function h(){!c||!l||(c=!1,l.length?u=l.concat(u):d=-1,u.length&&f())}function f(){if(!c){var y=s(h);c=!0;for(var S=u.length;S;){for(l=u,u=[];++d<S;)l&&l[d].run();d=-1,S=u.length}l=null,c=!1,o(y)}}t.nextTick=function(y){var S=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)S[w-1]=arguments[w];u.push(new p(y,S)),u.length===1&&!c&&s(f)};function p(y,S){this.fun=y,this.array=S}p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function b(){}return t.on=b,t.addListener=b,t.once=b,t.off=b,t.removeListener=b,t.removeAllListeners=b,t.emit=b,t.prependListener=b,t.prependOnceListener=b,t.listeners=function(y){return[]},t.binding=function(y){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(y){throw new Error("process.chdir is not supported")},t.umask=function(){return 0},DS.exports}Object.defineProperty($m,"__esModule",{value:!0});$m.ActorInitQuery=void 0;const JH=Kp;typeof process>"u"&&(globalThis.process=ru());class YH extends JH.ActorInitQueryBase{}$m.ActorInitQuery=YH;var Um={},ft={},h0={},Ht={},$r={};Object.defineProperty($r,"__esModule",{value:!0});$r.KeysRdfUpdateQuads=$r.KeysRdfResolveQuadPattern=$r.KeysRdfParseHtmlScript=$r.KeysRdfParseJsonLd=$r.KeysQueryOperation=$r.KeysInitQuery=$r.KeysHttpProxy=$r.KeysHttpMemento=$r.KeysHttpWayback=$r.KeysHttp=$r.KeysCore=void 0;const gt=et;$r.KeysCore={log:gt.CONTEXT_KEY_LOGGER};$r.KeysHttp={includeCredentials:new gt.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new gt.ActionContextKey("@comunica/bus-http:auth"),fetch:new gt.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new gt.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new gt.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new gt.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelay:new gt.ActionContextKey("@comunica/bus-http:http-retry-delay"),httpRetryOnServerError:new gt.ActionContextKey("@comunica/bus-http:http-retry-on-server-error")};$r.KeysHttpWayback={recoverBrokenLinks:new gt.ActionContextKey("@comunica/bus-http:recover-broken-links")};$r.KeysHttpMemento={datetime:new gt.ActionContextKey("@comunica/actor-http-memento:datetime")};$r.KeysHttpProxy={httpProxyHandler:new gt.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")};$r.KeysInitQuery={initialBindings:new gt.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new gt.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new gt.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new gt.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new gt.ActionContextKey("@comunica/actor-init-query:queryString"),query:new gt.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new gt.ActionContextKey("@comunica/actor-init-query:baseIRI"),functionArgumentsCache:new gt.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new gt.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),extensionFunctionCreator:new gt.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new gt.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),cliArgsHandlers:new gt.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new gt.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new gt.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new gt.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new gt.ActionContextKey("@context")};$r.KeysQueryOperation={operation:new gt.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new gt.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new gt.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new gt.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new gt.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new gt.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new gt.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new gt.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph")};$r.KeysRdfParseJsonLd={documentLoader:new gt.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new gt.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new gt.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")};$r.KeysRdfParseHtmlScript={processingHtmlScript:new gt.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new gt.ActionContextKey("extractAllScripts")};$r.KeysRdfResolveQuadPattern={sources:new gt.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sources"),source:new gt.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:source"),sourceIds:new gt.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sourceIds"),hypermediaSourcesAggregatedStores:new gt.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:hypermediaSourcesAggregatedStores")};$r.KeysRdfUpdateQuads={destination:new gt.ActionContextKey("@comunica/bus-rdf-update-quads:destination")};(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r($r,t)})(Ht);var qm={},Vm={};Object.defineProperty(Vm,"__esModule",{value:!0});Vm.BlankNodeScoped=void 0;class ZH{constructor(e,r){this.termType="BlankNode",this.value=e,this.skolemized=r}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}}Vm.BlankNodeScoped=ZH;var Hm={};Object.defineProperty(Hm,"__esModule",{value:!0});Hm.BlankNodeBindingsScoped=void 0;class ek{constructor(e){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}}Hm.BlankNodeBindingsScoped=ek;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Vm,t),r(Hm,t)})(qm);var cl={},Hn={},p0={},y0={},sr={},Zn={},yt={},b0={};Object.defineProperty(b0,"__esModule",{value:!0});b0.BlankNode=void 0;let tk=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}};b0.BlankNode=tk;var km={},m0={};Object.defineProperty(m0,"__esModule",{value:!0});m0.DefaultGraph=void 0;let BE=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&e.termType==="DefaultGraph"}};m0.DefaultGraph=BE;BE.INSTANCE=new BE;var g0={},xf={};Object.defineProperty(xf,"__esModule",{value:!0});xf.NamedNode=void 0;let rk=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&e.termType==="NamedNode"&&e.value===this.value}};xf.NamedNode=rk;Object.defineProperty(g0,"__esModule",{value:!0});g0.Literal=void 0;const jj=xf;let UA=class $E{constructor(e,r){this.termType="Literal",this.value=e,typeof r=="string"?(this.language=r,this.datatype=$E.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=$E.XSD_STRING)}equals(e){return!!e&&e.termType==="Literal"&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}};g0.Literal=UA;UA.RDF_LANGUAGE_STRING=new jj.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");UA.XSD_STRING=new jj.NamedNode("http://www.w3.org/2001/XMLSchema#string");var _0={};Object.defineProperty(_0,"__esModule",{value:!0});_0.Quad=void 0;let nk=class{constructor(e,r,n,a){this.termType="Quad",this.value="",this.subject=e,this.predicate=r,this.object=n,this.graph=a}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}};_0.Quad=nk;var v0={};Object.defineProperty(v0,"__esModule",{value:!0});v0.Variable=void 0;let ik=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&e.termType==="Variable"&&e.value===this.value}};v0.Variable=ik;Object.defineProperty(km,"__esModule",{value:!0});km.DataFactory=void 0;const ak=b0,sk=m0,cP=g0,ok=xf,uk=_0,ck=v0;let lk=0,dk=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${lk++}_`}namedNode(e){return new ok.NamedNode(e)}blankNode(e){return new ak.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,r){return new cP.Literal(e,r)}variable(e){return new ck.Variable(e)}defaultGraph(){return sk.DefaultGraph.INSTANCE}quad(e,r,n,a){return new uk.Quad(e,r,n,a||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(cP.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}};km.DataFactory=dk;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(b0,t),r(km,t),r(m0,t),r(g0,t),r(xf,t),r(_0,t),r(v0,t)})(yt);Object.defineProperty(Zn,"__esModule",{value:!0});Zn.stringQuadToQuad=Zn.quadToStringQuad=Zn.stringToTerm=Zn.getLiteralLanguage=Zn.getLiteralType=Zn.getLiteralValue=Zn.termToString=void 0;const fk=yt,Cj=new fk.DataFactory;function Bo(t){if(t)switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return"_:"+t.value;case"Literal":const e=t;return'"'+e.value+'"'+(e.datatype&&e.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&e.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+e.datatype.value:"")+(e.language?"@"+e.language:"");case"Quad":return`<<${Bo(t.subject)} ${Bo(t.predicate)} ${Bo(t.object)}${t.graph.termType==="DefaultGraph"?"":" "+Bo(t.graph)}>>`;case"Variable":return"?"+t.value;case"DefaultGraph":return t.value}}Zn.termToString=Bo;function Fj(t){const e=/^"([^]*)"/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]}Zn.getLiteralValue=Fj;function Mj(t){const e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}Zn.getLiteralType=Mj;function Lj(t){const e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]?e[1].toLowerCase():""}Zn.getLiteralLanguage=Lj;function $o(t,e){if(e=e||Cj,!t||!t.length)return e.defaultGraph();switch(t[0]){case"_":return e.blankNode(t.substr(2));case"?":if(!e.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return e.variable(t.substr(1));case'"':const r=Lj(t),n=e.namedNode(Mj(t));return e.literal(Fj(t),r||n);case"<":default:if(t[0]==="<"&&t.length>4&&t[1]==="<"&&t[t.length-1]===">"&&t[t.length-2]===">"){const a=t.slice(2,-2).trim();let s=[],o=0,u=0,c=!1;for(let l=0;l<a.length;l++){const d=a[l];if(d==="<"&&o++,d===">"){if(o===0)throw new Error("Found closing tag without opening tag in "+t);o--}if(d==='"'){let h=!1,f=l;for(;f-- >0&&a[f]==="\\";)h=!h;h||(c=!c)}if(d===" "&&!c&&o===0){for(s.push(a.slice(u,l));a[l+1]===" ";)l+=1;u=l+1}}if(o!==0)throw new Error("Found opening tag without closing tag in "+t);if(s.push(a.slice(u,a.length)),s.length!==3&&s.length!==4)throw new Error("Nested quad syntax error "+t);return s=s.map(l=>l.startsWith("<")&&!l.includes(" ")?l.slice(1,-1):l),e.quad($o(s[0]),$o(s[1]),$o(s[2]),s[3]?$o(s[3]):void 0)}return e.namedNode(t)}}Zn.stringToTerm=$o;function hk(t){return{subject:Bo(t.subject),predicate:Bo(t.predicate),object:Bo(t.object),graph:Bo(t.graph)}}Zn.quadToStringQuad=hk;function pk(t,e){return e=e||Cj,e.quad($o(t.subject,e),$o(t.predicate,e),$o(t.object,e),$o(t.graph,e))}Zn.stringQuadToQuad=pk;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.termToString=t.stringToTerm=t.stringQuadToQuad=t.quadToStringQuad=t.getLiteralValue=t.getLiteralType=t.getLiteralLanguage=void 0;const e=Zn;Object.defineProperty(t,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(t,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(t,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(t,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(t,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(t,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(t,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(sr);Object.defineProperty(y0,"__esModule",{value:!0});y0.bindingsToString=void 0;const yk=sr;function bk(t){const e={};for(const r of t.keys())e[r.value]=(0,yk.termToString)(t.get(r));return JSON.stringify(e,null,"  ")}y0.bindingsToString=bk;Object.defineProperty(p0,"__esModule",{value:!0});p0.Bindings=void 0;const Wy=$A,mk=y0;class Ru{constructor(e,r){this.type="bindings",this.dataFactory=e,this.entries=r}has(e){return this.entries.has(typeof e=="string"?e:e.value)}get(e){return this.entries.get(typeof e=="string"?e:e.value)}set(e,r){return new Ru(this.dataFactory,this.entries.set(typeof e=="string"?e:e.value,r))}delete(e){return new Ru(this.dataFactory,this.entries.delete(typeof e=="string"?e:e.value))}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),e=>this.dataFactory.variable(e))}values(){return this.iteratorToIterable(this.entries.values())}forEach(e){this.entries.forEach((r,n)=>e(r,this.dataFactory.variable(n)))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([e,r])=>[this.dataFactory.variable(e),r])[Symbol.iterator]()}equals(e){var r;if(!e)return!1;if(this===e)return!0;if(this.size!==e.size)return!1;for(const n of this.keys())if(!((r=this.get(n))!=null&&r.equals(e.get(n))))return!1;return!0}filter(e){return new Ru(this.dataFactory,(0,Wy.Map)(this.entries.filter((r,n)=>e(r,this.dataFactory.variable(n)))))}map(e){return new Ru(this.dataFactory,(0,Wy.Map)(this.entries.map((r,n)=>e(r,this.dataFactory.variable(n)))))}merge(e){const r=new Set([...this.iteratorToIterable(this.entries.keys()),...[...e.keys()].map(a=>a.value)]),n=[];for(const a of r){const s=this.entries.get(a),o=e.get(this.dataFactory.variable(a));if(s&&o&&!s.equals(o))return;const u=s||o;n.push([a,u])}return new Ru(this.dataFactory,(0,Wy.Map)(n))}mergeWith(e,r){const n=new Set([...this.iteratorToIterable(this.entries.keys()),...[...r.keys()].map(s=>s.value)]),a=[];for(const s of n){const o=this.dataFactory.variable(s),u=this.entries.get(s),c=r.get(o);let l;u&&c&&!u.equals(c)?l=e(u,c,o):l=u||c,a.push([s,l])}return new Ru(this.dataFactory,(0,Wy.Map)(a))}toString(){return(0,mk.bindingsToString)(this)}*mapIterable(e,r){for(const n of e)yield r(n)}iteratorToIterable(e){return{[Symbol.iterator]:()=>e}}}p0.Bindings=Ru;var Qm={};Object.defineProperty(Qm,"__esModule",{value:!0});Qm.BindingsFactory=void 0;const gk=$A,_k=yt,vk=p0;class wk{constructor(e=new _k.DataFactory){this.dataFactory=e}bindings(e=[]){return new vk.Bindings(this.dataFactory,(0,gk.Map)(e.map(([r,n])=>[r.value,n])))}fromBindings(e){return this.bindings([...e])}fromRecord(e){return this.bindings(Object.entries(e).map(([r,n])=>[this.dataFactory.variable(r),n]))}}Qm.BindingsFactory=wk;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(p0,t),r(Qm,t),r(y0,t)})(Hn);var hn={},ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.matchPatternMappings=ut.matchPatternComplete=ut.matchPattern=ut.matchTerm=ut.getValueNestedPath=ut.someTermsNested=ut.someTerms=ut.everyTermsNested=ut.everyTerms=ut.reduceTermsNested=ut.reduceTerms=ut.mapTermsNested=ut.mapTerms=ut.filterQuadTermNamesNested=ut.filterQuadTermNames=ut.filterTermsNested=ut.filterTerms=ut.forEachTermsNested=ut.forEachTerms=ut.collectNamedTerms=ut.getNamedTerms=ut.getTermsNested=ut.getTerms=ut.TRIPLE_TERM_NAMES=ut.QUAD_TERM_NAMES=void 0;const Sk=yt,qA=new Sk.DataFactory;ut.QUAD_TERM_NAMES=["subject","predicate","object","graph"];ut.TRIPLE_TERM_NAMES=["subject","predicate","object"];function Bj(t,e){return e&&t.graph.termType==="DefaultGraph"?[t.subject,t.predicate,t.object]:[t.subject,t.predicate,t.object,t.graph]}ut.getTerms=Bj;function $j(t,e){const r=[];for(const n of Bj(t,e))n.termType==="Quad"?$j(n,e).forEach(a=>r.push(a)):r.push(n);return r}ut.getTermsNested=$j;function Tk(t){return[{key:"subject",value:t.subject},{key:"predicate",value:t.predicate},{key:"object",value:t.object},{key:"graph",value:t.graph}]}ut.getNamedTerms=Tk;function Ek(t,e,r){const n={};return t.forEach(a=>n[a.key]=a.value),e&&(n.subject=n.subject||e("subject"),n.predicate=n.predicate||e("predicate"),n.object=n.object||e("object"),n.graph=n.graph||e("graph")),(r||qA).quad(n.subject,n.predicate,n.object,n.graph)}ut.collectNamedTerms=Ek;function Ok(t,e){e(t.subject,"subject"),e(t.predicate,"predicate"),e(t.object,"object"),e(t.graph,"graph")}ut.forEachTerms=Ok;function Vh(t,e,r=[]){t.subject.termType==="Quad"?Vh(t.subject,e,[...r,"subject"]):e(t.subject,[...r,"subject"]),t.predicate.termType==="Quad"?Vh(t.predicate,e,[...r,"predicate"]):e(t.predicate,[...r,"predicate"]),t.object.termType==="Quad"?Vh(t.object,e,[...r,"object"]):e(t.object,[...r,"object"]),t.graph.termType==="Quad"?Vh(t.graph,e,[...r,"graph"]):e(t.graph,[...r,"graph"])}ut.forEachTermsNested=Vh;function Ak(t,e){const r=[];return e(t.subject,"subject")&&r.push(t.subject),e(t.predicate,"predicate")&&r.push(t.predicate),e(t.object,"object")&&r.push(t.object),e(t.graph,"graph")&&r.push(t.graph),r}ut.filterTerms=Ak;function Hh(t,e,r=[]){let n=[];return t.subject.termType==="Quad"?n=[...n,...Hh(t.subject,e,[...r,"subject"])]:e(t.subject,[...r,"subject"])&&n.push(t.subject),t.predicate.termType==="Quad"?n=[...n,...Hh(t.predicate,e,[...r,"predicate"])]:e(t.predicate,[...r,"predicate"])&&n.push(t.predicate),t.object.termType==="Quad"?n=[...n,...Hh(t.object,e,[...r,"object"])]:e(t.object,[...r,"object"])&&n.push(t.object),t.graph.termType==="Quad"?n=[...n,...Hh(t.graph,e,[...r,"graph"])]:e(t.graph,[...r,"graph"])&&n.push(t.graph),n}ut.filterTermsNested=Hh;function xk(t,e){const r=[];return e(t.subject,"subject")&&r.push("subject"),e(t.predicate,"predicate")&&r.push("predicate"),e(t.object,"object")&&r.push("object"),e(t.graph,"graph")&&r.push("graph"),r}ut.filterQuadTermNames=xk;function kh(t,e,r=[]){let n=[];const a=[...r,"subject"];t.subject.termType==="Quad"?n=[...n,...kh(t.subject,e,a)]:e(t.subject,a)&&n.push(a);const s=[...r,"predicate"];t.predicate.termType==="Quad"?n=[...n,...kh(t.predicate,e,s)]:e(t.predicate,s)&&n.push(s);const o=[...r,"object"];t.object.termType==="Quad"?n=[...n,...kh(t.object,e,o)]:e(t.object,o)&&n.push(o);const u=[...r,"graph"];return t.graph.termType==="Quad"?n=[...n,...kh(t.graph,e,u)]:e(t.graph,u)&&n.push(u),n}ut.filterQuadTermNamesNested=kh;function Rk(t,e,r){return(r||qA).quad(e(t.subject,"subject"),e(t.predicate,"predicate"),e(t.object,"object"),e(t.graph,"graph"))}ut.mapTerms=Rk;function Qh(t,e,r,n=[]){return(r||qA).quad(t.subject.termType==="Quad"?Qh(t.subject,e,r,[...n,"subject"]):e(t.subject,[...n,"subject"]),t.predicate.termType==="Quad"?Qh(t.predicate,e,r,[...n,"predicate"]):e(t.predicate,[...n,"predicate"]),t.object.termType==="Quad"?Qh(t.object,e,r,[...n,"object"]):e(t.object,[...n,"object"]),t.graph.termType==="Quad"?Qh(t.graph,e,r,[...n,"graph"]):e(t.graph,[...n,"graph"]))}ut.mapTermsNested=Qh;function Ik(t,e,r){let n=r;return n=e(n,t.subject,"subject"),n=e(n,t.predicate,"predicate"),n=e(n,t.object,"object"),e(n,t.graph,"graph")}ut.reduceTerms=Ik;function Gh(t,e,r,n=[]){let a=r;return t.subject.termType==="Quad"?a=Gh(t.subject,e,a,[...n,"subject"]):a=e(a,t.subject,[...n,"subject"]),t.predicate.termType==="Quad"?a=Gh(t.predicate,e,a,[...n,"predicate"]):a=e(a,t.predicate,[...n,"predicate"]),t.object.termType==="Quad"?a=Gh(t.object,e,a,[...n,"object"]):a=e(a,t.object,[...n,"object"]),t.graph.termType==="Quad"?a=Gh(t.graph,e,a,[...n,"graph"]):a=e(a,t.graph,[...n,"graph"]),a}ut.reduceTermsNested=Gh;function Uj(t,e){return e(t.subject,"subject")&&e(t.predicate,"predicate")&&e(t.object,"object")&&e(t.graph,"graph")}ut.everyTerms=Uj;function zh(t,e,r=[]){return(t.subject.termType==="Quad"?zh(t.subject,e,[...r,"subject"]):e(t.subject,[...r,"subject"]))&&(t.predicate.termType==="Quad"?zh(t.predicate,e,[...r,"predicate"]):e(t.predicate,[...r,"predicate"]))&&(t.object.termType==="Quad"?zh(t.object,e,[...r,"object"]):e(t.object,[...r,"object"]))&&(t.graph.termType==="Quad"?zh(t.graph,e,[...r,"graph"]):e(t.graph,[...r,"graph"]))}ut.everyTermsNested=zh;function Pk(t,e){return e(t.subject,"subject")||e(t.predicate,"predicate")||e(t.object,"object")||e(t.graph,"graph")}ut.someTerms=Pk;function Wh(t,e,r=[]){return(t.subject.termType==="Quad"?Wh(t.subject,e,[...r,"subject"]):e(t.subject,[...r,"subject"]))||(t.predicate.termType==="Quad"?Wh(t.predicate,e,[...r,"predicate"]):e(t.predicate,[...r,"predicate"]))||(t.object.termType==="Quad"?Wh(t.object,e,[...r,"object"]):e(t.object,[...r,"object"]))||(t.graph.termType==="Quad"?Wh(t.graph,e,[...r,"graph"]):e(t.graph,[...r,"graph"]))}ut.someTermsNested=Wh;function qj(t,e){if(e.length===0)return t;if(t.termType==="Quad")return qj(t[e[0]],e.slice(1));throw new Error(`Tried to get ${e[0]} from term of type ${t.termType}`)}ut.getValueNestedPath=qj;function Xh(t,e){return!e||e.termType==="Variable"||e.termType==="Quad"&&t.termType==="Quad"&&Hj(t,e)||e.equals(t)}ut.matchTerm=Xh;function Vj(t,e,r,n,a){return Xh(t.subject,e)&&Xh(t.predicate,r)&&Xh(t.object,n)&&Xh(t.graph,a)}ut.matchPattern=Vj;function Hj(t,e){return Vj(t,e.subject,e.predicate,e.object,e.graph)}ut.matchPatternComplete=Hj;function Dk(t,e,r={}){const n={};function a(s,o){return Uj(s,(u,c)=>{var l,d;const h=o[c];switch(u.termType){case"Variable":return r.skipVarMapping&&h.termType==="Variable"||((d=(l=n[u.value])===null||l===void 0?void 0:l.equals(h))!==null&&d!==void 0?d:(n[u.value]=h,!0));case"Quad":return h.termType==="Quad"&&a(u,h);default:return u.equals(h)}})}return a(e,t)&&(r.returnMappings?n:!0)}ut.matchPatternMappings=Dk;var un={};Object.defineProperty(un,"__esModule",{value:!0});un.getQuads=un.getDefaultGraphs=un.getVariables=un.getLiterals=un.getBlankNodes=un.getNamedNodes=un.getTermsOfType=un.uniqTerms=un.TERM_TYPES=void 0;const Nk=sr;un.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function jk(t){const e={};return t.filter(r=>{const n=(0,Nk.termToString)(r);return!(n in e)&&(e[n]=!0)})}un.uniqTerms=jk;function vl(t,e){return t.filter(r=>r.termType===e)}un.getTermsOfType=vl;function Ck(t){return vl(t,"NamedNode")}un.getNamedNodes=Ck;function Fk(t){return vl(t,"BlankNode")}un.getBlankNodes=Fk;function Mk(t){return vl(t,"Literal")}un.getLiterals=Mk;function Lk(t){return vl(t,"Variable")}un.getVariables=Lk;function Bk(t){return vl(t,"DefaultGraph")}un.getDefaultGraphs=Bk;function $k(t){return vl(t,"Quad")}un.getQuads=$k;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ut,t),r(un,t)})(hn);var Tt={},VA={},Uk=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!t(e[a],r[a]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(a of e.entries())if(!r.has(a[0]))return!1;for(a of e.entries())if(!t(a[1],r.get(a[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(a of e.entries())if(!r.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(n=e.length,n!=r.length)return!1;for(a=n;a--!==0;)if(e[a]!==r[a])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!==0;){var o=s[a];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r},Rf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.expressionTypes=t.types=void 0,function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"}(t.types||(t.types={})),function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"}(t.expressionTypes||(t.expressionTypes={}))})(Rf);var If={},HA={};let Gm=class{constructor(){return qk||this}equals(e){return e&&this.termType===e.termType}};Object.defineProperty(Gm.prototype,"value",{enumerable:!0,value:"*"});Object.defineProperty(Gm.prototype,"termType",{enumerable:!0,value:"Wildcard"});var qk=new Gm;HA.Wildcard=Gm;var Vk=function(){var t=function(Re,Oe,Ne,Ue){for(Ne=Ne||{},Ue=Re.length;Ue--;Ne[Re[Ue]]=Oe);return Ne},e=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],r=[2,247],n=[100,110,113,115,116,123,126,131,329,330,331,332,333],a=[2,409],s=[1,18],o=[1,27],u=[13,16,45,197,224,229,308],c=[28,29,53],l=[28,53],d=[1,42],h=[1,45],f=[1,41],p=[1,44],b=[123,126],y=[1,67],S=[39,45,87],w=[13,16,45,197,224,308],I=[1,87],O=[2,281],T=[1,86],x=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],P=[6,28,29,53,63,70,73,81,83,85],B=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],Q=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],N=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],D=[13,16,308],F=[112,132,327,334],W=[13,16,112,132,308],z=[1,111],M=[1,117],C=[112,132,327,328,334],V=[13,16,112,132,308,328],ie=[28,29,45,53,87],ne=[1,138],fe=[1,151],_e=[1,128],we=[1,127],Ce=[1,129],oe=[1,140],ae=[1,141],Ae=[1,142],Ie=[1,143],he=[1,144],ve=[1,145],me=[1,147],L=[1,148],H=[2,457],A=[1,158],m=[1,159],v=[1,160],j=[1,152],q=[1,153],$=[1,156],G=[1,171],Y=[1,172],J=[1,173],re=[1,174],de=[1,175],be=[1,176],Ee=[1,167],xe=[1,168],Pe=[1,169],U=[1,170],E=[1,157],R=[1,166],K=[1,161],ce=[1,162],ye=[1,163],ge=[1,164],$e=[1,165],ke=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Xe=[1,195],Ke=[6,31,73,81,83,85],ht=[2,285],rn=[1,199],Vr=[1,201],nn=[6,31,70,73,81,83,85],br=[2,283],Pn=[1,207],vr=[1,218],wr=[1,223],an=[1,219],te=[1,225],_=[1,226],k=[1,224],le=[6,63,70,73,81,83,85],Te=[1,236],Se=[2,334],He=[1,243],je=[1,241],Fe=[6,193],Je=[2,349],It=[2,339],it=[28,128],qe=[47,48,193,272],Li=[47,48,193,242,272],Qe=[47,48,193,242,246,272],Gr=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],Jt=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],kt=[1,271],Fr=[1,270],At=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],wa=[1,281],Ji=[1,280],lr=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],ho=[45,89],uu=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Jr=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Bi=[31,89],pn=[48,87],Yi=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],yn=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],Ma=[1,313],sn=[6,85],Ss=[6,31,81,83,85],La=[2,361],hi=[2,353],Qn=[1,343],cu=[31,112,335],Ba=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Ll=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],ee=[6,109,193],se=[31,112],pe=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],Ve=[1,390],ze=[1,391],Ye=[13,16,87,197,308,314],Et=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],qt=[1,417],or=[1,418],Mr=[13,16,48,197,229,308],rr=[6,31,85],Er=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],pi=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],Gn=[29,31,85,112,159,160,161,163,164],Dn=[1,443],yi=[1,444],$a=[1,449],wn=[31,112,193,232,318,335],po=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],pc=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],yc=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Yt=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Sn=[31,45],yo=[1,507],lu=[1,508],Ey=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],Oy=[29,31,85,112,159,160,161,163,164,335],bc=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],UR=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],qR=[2,352],tS=[13,16,197,308,314],VR=[1,565],Bl=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],HR=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],bo=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],kR=[13,16,87,308],mo=[2,364],$l=[29,31,85,112,159,160,161,163,164,193,232,318,335],Ay=[31,112,193,232,272,318,335],go=[2,359],QR=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],xy=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],GR=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],zR=[2,347],rS={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:function(Oe,Ne,Ue,ot,ct,X,Zi){var Z=X.length-1;switch(ct){case 1:if(X[Z-1]=X[Z-1]||{},Nt.base&&(X[Z-1].base=Nt.base),Nt.base="",X[Z-1].prefixes=Nt.prefixes,Nt.prefixes=null,Nt.pathOnly){if(X[Z-1].type==="path"||"termType"in X[Z-1])return X[Z-1];throw new Error("Received full SPARQL query in path only mode")}else if(X[Z-1].type==="path"||"termType"in X[Z-1])throw new Error("Received only path in full SPARQL mode");if(X[Z-1].type==="update"){const Pt={};for(const nr of X[Z-1].updates)if(nr.updateType==="insert"){const Ot={};for(const jn of nr.insert)if(jn.type==="bgp"||jn.type==="graph")for(const Cn of jn.triples)Cn.subject.termType==="BlankNode"&&(Ot[Cn.subject.value]=!0),Cn.predicate.termType==="BlankNode"&&(Ot[Cn.predicate.value]=!0),Cn.object.termType==="BlankNode"&&(Ot[Cn.object.value]=!0);for(const jn of Object.keys(Ot)){if(Pt[jn])throw new Error("Detected reuse blank node across different INSERT DATA clauses");Pt[jn]=!0}}}return X[Z-1];case 2:this.$={...X[Z-1],...X[Z],type:"query"};break;case 4:Nt.base=Xf(X[Z]);break;case 5:Nt.prefixes||(Nt.prefixes={}),X[Z-1]=X[Z-1].substr(0,X[Z-1].length-1),X[Z]=Xf(X[Z]),Nt.prefixes[X[Z-1]]=X[Z];break;case 6:this.$={...X[Z-3],..._c(X[Z-2]),...X[Z-1],...X[Z]};break;case 7:if(!Nt.skipValidation&&(lS(X[Z-3].variables.map(nr=>cS(nr.expression))).some(nr=>nr.aggregation==="count"&&!(nr.expression instanceof Ry))||X[Z].group)){for(const nr of X[Z-3].variables)if(nr.termType==="Variable"){if(!X[Z].group||!X[Z].group.map(Ot=>kl(Ot)).includes(kl(nr)))throw Error("Projection of ungrouped variable (?"+kl(nr)+")")}else if(cS(nr.expression).length===0){const Ot=A$(nr.expression);for(const jn of Ot)if(!X[Z].group||!X[Z].group.map||!X[Z].group.map(Cn=>kl(Cn)).includes(kl(jn)))throw Error("Use of ungrouped variable in projection of operation (?"+kl(jn)+")")}}const Ql=X[Z-1].where.filter(Pt=>Pt.type==="query");if(Ql.length>0){const Pt=X[Z-3].variables.filter(Ot=>Ot.variable&&Ot.variable.value).map(Ot=>Ot.variable.value),nr=lS(Ql.map(Ot=>Ot.variables)).map(Ot=>Ot.value||Ot.variable.value);for(const Ot of Pt)if(nr.indexOf(Ot)>=0)throw Error("Target id of 'AS' (?"+Ot+") already used in subquery")}this.$=Yr(X[Z-3],_c(X[Z-2]),X[Z-1],X[Z]);break;case 8:this.$=Yr({queryType:"CONSTRUCT",template:X[Z-3]},_c(X[Z-2]),X[Z-1],X[Z]);break;case 9:this.$=Yr({queryType:"CONSTRUCT",template:X[Z-2]=X[Z-2]?X[Z-2].triples:[]},_c(X[Z-5]),{where:[{type:"bgp",triples:Ul([],X[Z-2])}]},X[Z]);break;case 10:this.$=Yr({queryType:"DESCRIBE",variables:X[Z-3]==="*"?[new Ry]:X[Z-3]},_c(X[Z-2]),X[Z-1],X[Z]);break;case 11:this.$=Yr({queryType:"ASK"},_c(X[Z-2]),X[Z-1],X[Z]);break;case 12:this.$=Yr(X[Z-1],{variables:[new Ry]});break;case 13:const pS=X[Z].map(Pt=>Pt.value||Pt.variable.value),Cy=x$(pS);if(Cy.length>0)throw Error("Two or more of the resulting columns have the same name (?"+Cy[0]+")");this.$=Yr(X[Z-1],{variables:X[Z]});break;case 14:this.$=Yr({queryType:"SELECT"},X[Z]&&(X[Z-1]=bi(X[Z]),X[Z]={},X[Z][X[Z-1]]=!0,X[Z]));break;case 16:case 27:this.$=ql(X[Z-3],{variable:X[Z-1]});break;case 17:case 18:this.$=Yr(X[Z-3],X[Z-2],X[Z-1],X[Z],{type:"query"});break;case 19:case 58:this.$={iri:X[Z],named:!!X[Z-1]};break;case 20:this.$={where:X[Z].patterns};break;case 21:this.$=Yr(X[Z-1],X[Z]);break;case 22:this.$=Yr(X[Z-2],X[Z-1],X[Z]);break;case 23:this.$={group:X[Z]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=ql(X[Z]);break;case 26:this.$=ql(X[Z-1]);break;case 29:this.$={having:X[Z]};break;case 30:this.$={order:X[Z]};break;case 32:this.$=ql(X[Z],{descending:!0});break;case 35:this.$={limit:Hl(X[Z])};break;case 36:this.$={offset:Hl(X[Z])};break;case 37:this.$={limit:Hl(X[Z-2]),offset:Hl(X[Z])};break;case 38:this.$={limit:Hl(X[Z]),offset:Hl(X[Z-2])};break;case 39:case 43:this.$={type:"values",values:X[Z]};break;case 40:case 84:this.$=X[Z-1].map(Pt=>({[X[Z-3]]:Pt}));break;case 41:case 85:this.$=X[Z-1].map(()=>({}));break;case 42:case 86:var du=X[Z-4].length;X[Z-4]=X[Z-4].map(nS),this.$=X[Z-1].map(function(Pt){if(Pt.length!==du)throw Error("Inconsistent VALUES length");for(var nr={},Ot=0;Ot<du;Ot++)nr["?"+X[Z-4][Ot].value]=Pt[Ot];return nr});break;case 44:case 65:case 100:case 126:case 175:this.$=X[Z-1];break;case 45:this.$={type:"update",updates:gc(X[Z-2],X[Z-1])};break;case 46:this.$=Yr({type:"load",silent:!!X[Z-2],source:X[Z-1]},X[Z]&&{destination:X[Z]});break;case 47:this.$={type:bi(X[Z-2]),silent:!!X[Z-1],graph:X[Z]};break;case 48:this.$={type:bi(X[Z-4]),silent:!!X[Z-3],source:X[Z-2],destination:X[Z]};break;case 49:this.$={type:"create",silent:!!X[Z-2],graph:{type:"graph",name:X[Z]}};break;case 50:this.$={updateType:"insert",insert:iI(X[Z])};break;case 51:this.$={updateType:"delete",delete:hS(iI(X[Z]))};break;case 52:this.$={updateType:"deletewhere",delete:hS(X[Z])};break;case 53:this.$={updateType:"insertdelete",...X[Z-4],...X[Z-3],..._c(X[Z-2],"using"),where:X[Z].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=X[Z];break;case 55:this.$={delete:hS(X[Z-1]),insert:X[Z]||[]};break;case 56:this.$={delete:[],insert:X[Z]};break;case 59:this.$={graph:X[Z]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:X[Z]};break;case 64:this.$={[bi(X[Z])]:!0};break;case 66:this.$=X[Z-1]?Ts(X[Z],[X[Z-1]]):Ts(X[Z]);break;case 67:var Dy=Yr(X[Z-3]||{triples:[]},{type:"graph",name:X[Z-5]});this.$=X[Z]?[Dy,X[Z]]:[Dy];break;case 68:case 73:this.$={type:"bgp",triples:Ts(X[Z-2],[X[Z-1]])};break;case 69:this.$={type:"group",patterns:[X[Z-1]]};break;case 70:for(const Pt of X[Z-1].filter(nr=>nr.type==="bind")){const nr=X[Z-1].indexOf(Pt),Ot=new Set;for(const jn of X[Z-1].slice(0,nr))(jn.type==="group"||jn.type==="bgp")&&rI(jn).forEach(Cn=>Ot.add(Cn));if(Ot.has(Pt.variable.value))throw Error("Variable used to bind is already bound (?"+Pt.variable.value+")")}this.$={type:"group",patterns:X[Z-1]};break;case 71:this.$=X[Z-1]?Ts([X[Z-1]],X[Z]):Ts(X[Z]);break;case 72:this.$=X[Z]?[X[Z-2],X[Z]]:X[Z-2];break;case 75:this.$=Yr(X[Z],{type:"optional"});break;case 76:this.$=Yr(X[Z],{type:"minus"});break;case 77:this.$=Yr(X[Z],{type:"graph",name:X[Z-1]});break;case 78:this.$=Yr(X[Z],{type:"service",name:X[Z-1],silent:!!X[Z-2]});break;case 79:this.$={type:"filter",expression:X[Z]};break;case 80:this.$={type:"bind",variable:X[Z-1],expression:X[Z-3]};break;case 89:this.$=Jf(X[Z]);break;case 90:this.$=void 0;break;case 91:this.$=X[Z-1].length?{type:"union",patterns:Ts(X[Z-1].map(aS),[aS(X[Z])])}:X[Z];break;case 95:this.$={...X[Z],function:X[Z-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:gc(X[Z-2],X[Z-1]),distinct:!!X[Z-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=gc(X[Z-2],X[Z-1]);break;case 101:this.$=Ts(X[Z-2],[X[Z-1]]);break;case 102:case 112:this.$=fS(X[Z].map(Pt=>Yr(_o(X[Z-1]),Pt)));break;case 103:this.$=fS(Ul(X[Z].map(Pt=>Yr(_o(X[Z-1].entity),Pt)),X[Z-1].triples));break;case 105:this.$=Ts([X[Z-1]],X[Z]);break;case 106:this.$=Ts(X[Z]);break;case 107:this.$=uS(X[Z-1],X[Z]);break;case 109:case 237:this.$=Nt.factory.namedNode(b$);break;case 110:case 118:this.$=gc(X[Z-1],X[Z]);break;case 111:this.$=X[Z]?{annotation:X[Z],object:X[Z-1]}:X[Z-1];break;case 113:this.$=X[Z]?fS(Ul(X[Z].map(Pt=>Yr(_o(X[Z-1].entity),Pt)),X[Z-1].triples)):X[Z-1].triples;break;case 114:this.$=uS(...X[Z-1],X[Z]);break;case 116:this.$=uS(...X[Z]);break;case 117:case 159:case 163:this.$=[X[Z-1],X[Z]];break;case 119:this.$=X[Z]?{object:X[Z-1],annotation:X[Z]}:X[Z-1];break;case 120:this.$=X[Z-1].length?Vl("|",gc(X[Z-1],X[Z])):X[Z];break;case 121:this.$=X[Z-1].length?Vl("/",gc(X[Z-1],X[Z])):X[Z];break;case 122:this.$=X[Z]?Vl(X[Z],[X[Z-1]]):X[Z-1];break;case 123:this.$=X[Z-1]?Vl(X[Z-1],[X[Z]]):X[Z];break;case 125:case 131:this.$=Vl(X[Z-1],[X[Z]]);break;case 129:this.$=Vl("|",gc(X[Z-2],X[Z-1]));break;case 132:case 134:this.$=E$(X[Z-1]);break;case 133:case 135:this.$=O$(X[Z-1]);break;case 140:this.$={entity:X[Z],triples:[]};break;case 145:this.$=nS(X[Z]);break;case 149:this.$=Nt.factory.namedNode(WR);break;case 151:case 153:case 158:case 162:this.$=iS(X[Z-1],X[Z]);break;case 152:this.$=["||",X[Z]];break;case 154:this.$=["&&",X[Z]];break;case 156:this.$=Nn(X[Z-1],[X[Z-2],X[Z]]);break;case 157:this.$=Nn(X[Z-2]?"notin":"in",[X[Z-3],X[Z]]);break;case 160:this.$=["+",iS(X[Z-1],X[Z])];break;case 161:var Ny=Es(X[Z-1].value.replace("-",""),X[Z-1].datatype);this.$=["-",iS(Ny,X[Z])];break;case 164:this.$=Nn("UPLUS",[X[Z]]);break;case 165:this.$=Nn(X[Z-1],[X[Z]]);break;case 166:this.$=Nn("UMINUS",[X[Z]]);break;case 177:this.$=Nn(bi(X[Z-1]));break;case 178:this.$=Nn(bi(X[Z-3]),[X[Z-1]]);break;case 179:this.$=Jf(Nn(bi(X[Z-3]),[X[Z-1]]));break;case 180:this.$=Nn(bi(X[Z-5]),[X[Z-3],X[Z-1]]);break;case 181:this.$=Nn(bi(X[Z-7]),[X[Z-5],X[Z-3],X[Z-1]]);break;case 182:this.$=Jf(Nn(bi(X[Z-7]),[X[Z-5],X[Z-3],X[Z-1]]));break;case 183:this.$=Nn(bi(X[Z-1]),X[Z]);break;case 184:this.$=Nn("bound",[nS(X[Z-1])]);break;case 185:this.$=Nn(X[Z-1],[]);break;case 186:this.$=Nn(X[Z-3],[X[Z-1]]);break;case 187:this.$=Nn(X[Z-2]?"notexists":"exists",[aS(X[Z])]);break;case 188:case 189:this.$=ql(X[Z-1],{type:"aggregate",aggregation:bi(X[Z-4]),distinct:!!X[Z-2]});break;case 190:this.$=ql(X[Z-2],{type:"aggregate",aggregation:bi(X[Z-5]),distinct:!!X[Z-3],separator:typeof X[Z-1]=="string"?X[Z-1]:" "});break;case 192:this.$=Es(X[Z]);break;case 193:this.$=v$(X[Z-1],bi(X[Z].substr(1)));break;case 194:this.$=Es(X[Z-2],X[Z]);break;case 195:case 204:this.$=Es(X[Z],XR);break;case 196:case 205:this.$=Es(X[Z],KR);break;case 197:case 206:this.$=Es(bi(X[Z]),JR);break;case 200:this.$=Es(X[Z].toLowerCase(),_$);break;case 201:this.$=Es(X[Z].substr(1),XR);break;case 202:this.$=Es(X[Z].substr(1),KR);break;case 203:this.$=Es(X[Z].substr(1).toLowerCase(),JR);break;case 207:case 208:this.$=tI(X[Z],1);break;case 209:case 210:this.$=tI(X[Z],3);break;case 211:this.$=Nt.factory.namedNode(Xf(X[Z]));break;case 213:var jy=X[Z].indexOf(":"),Zr=X[Z].substr(0,jy),Os=Nt.prefixes[Zr];if(!Os)throw new Error("Unknown prefix: "+Zr);var vc=Xf(Os+X[Z].substr(jy+1));this.$=Nt.factory.namedNode(vc);break;case 214:if(X[Z]=X[Z].substr(0,X[Z].length-1),!(X[Z]in Nt.prefixes))throw new Error("Unknown prefix: "+X[Z]);var vc=Xf(Nt.prefixes[X[Z]]);this.$=Nt.factory.namedNode(vc);break;case 215:this.$=Kf(X[Z].replace(/^(_:)/,""));break;case 216:this.$=Kf();break;case 217:case 218:case 232:this.$=Jf(sS(X[Z-3],X[Z-2],X[Z-1]));break;case 230:case 231:this.$=Jf(X[Z-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:X[Z-1].push(X[Z]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[X[Z]];break;case 308:X[Z-3].push(X[Z-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:X[Z-2].push(X[Z-1]);break}},table:[t(e,r,{3:1,4:2,10:3}),{1:[3]},t(n,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:a,16:a,45:a,197:a,224:a,229:a,308:a,24:[1,13],32:[1,14],36:[1,15],41:s}),t([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:o},{6:[2,239]},t(u,[2,411],{216:28,217:29}),t(c,[2,249],{18:30}),t(c,[2,251],{22:31}),t(l,[2,255],{25:32,27:33,29:[1,34]}),{13:d,16:h,33:35,39:[1,37],44:39,55:40,87:f,139:38,307:43,308:p,323:36},t(c,[2,267],{37:46}),t(b,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:y,87:f},t(S,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),t(e,[2,248]),t(e,[2,245]),t(e,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},t([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),t(w,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:I,29:O,52:84,53:T,56:85},{19:88,28:I,29:O,52:89,53:T,56:85},t(c,[2,253],{26:90}),{28:[1,91],52:92,53:T},t(x,[2,385],{181:93,182:94,183:95,31:[2,383]}),t(P,[2,263],{34:96}),t(P,[2,261],{44:39,55:40,307:43,139:97,13:d,16:h,87:f,308:p}),t(P,[2,262]),t(B,[2,259]),t(Q,[2,143]),t(Q,[2,144]),t([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),t(N,[2,211]),t(N,[2,212]),t(N,[2,213]),t(N,[2,214]),{19:98,28:I,29:O,52:99,53:T,56:85},{6:[2,309],99:100,193:[1,101]},t(D,[2,311],{101:102,328:[1,103]}),t(F,[2,317],{104:104,328:[1,105]}),t(W,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:z,114:110},{29:z,114:112},{29:z,114:113},{118:114,123:[1,115],125:116,126:M},t(C,[2,315]),t(C,[2,316]),t(V,[2,319]),t(V,[2,320]),t(V,[2,321]),t(b,[2,327]),{13:d,16:h,55:118,307:43,308:p},t(c,[2,12]),t(c,[2,13],{44:66,43:119,45:y,87:f}),t(ie,[2,269]),t(ie,[2,15]),{13:d,16:h,44:136,45:ne,46:120,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(S,[2,14]),t(S,[2,274]),t(S,[2,271]),t(S,[2,272]),t(e,[2,4]),{13:[1,177]},t(ke,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},t(u,[2,410]),t([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:d,16:h,45:[1,193],55:194,197:Xe,219:189,220:190,223:191,224:[1,192],307:43,308:p},t(w,[2,419]),t(Ke,ht,{20:196,59:197,69:198,70:rn}),t(c,[2,250]),{29:Vr,57:200},t(D,[2,279],{54:202,327:[1,203]}),{29:[2,282]},t(nn,br,{23:204,58:205,62:206,63:Pn}),t(c,[2,252]),{19:208,28:I,29:O,52:209,53:T,56:85},{29:[1,210]},t(l,[2,256]),{31:[1,211]},{31:[2,384]},{13:d,16:h,44:215,45:vr,55:220,82:fe,87:f,89:wr,145:212,172:221,185:213,187:214,231:an,236:216,237:222,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,309:te,310:_,311:217,312:k},t(le,[2,265],{56:85,35:227,52:228,19:229,28:I,29:O,53:T}),t(B,[2,260]),t(nn,br,{58:205,62:206,23:230,63:Pn}),t(c,[2,268]),{6:[2,45]},t(e,r,{10:3,4:231}),{13:d,16:h,55:232,307:43,308:p},t(D,[2,312]),{105:233,112:Te,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},t(F,[2,318]),t(D,Se,{108:240,133:242,112:He,132:je}),t(W,[2,323]),{112:[1,244]},{112:[2,325]},t(Fe,[2,50]),t(x,Je,{135:245,136:246,143:247,144:248,31:It,112:It}),t(Fe,[2,51]),t(Fe,[2,52]),t(it,[2,328],{119:249}),{29:z,114:250},t(it,[2,56]),{29:z,114:251},t(b,[2,59]),t(ie,[2,270]),{47:[1,252]},t(qe,[2,150]),t(Li,[2,428],{240:253}),t(Qe,[2,430],{244:254}),t(Qe,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),t(Gr,[2,440],{252:264}),t(Jt,[2,448],{260:265}),{13:d,16:h,44:136,45:ne,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,255:154,257:155,264:266,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{13:d,16:h,44:136,45:ne,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,255:154,257:155,264:267,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{13:d,16:h,44:136,45:ne,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,255:154,257:155,264:268,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(Jt,[2,167]),t(Jt,[2,168]),t(Jt,[2,169]),t(Jt,[2,170],{176:269,45:kt,89:Fr}),t(Jt,[2,171]),t(Jt,[2,172]),t(Jt,[2,173]),t(Jt,[2,174]),{13:d,16:h,44:136,45:ne,46:272,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(At,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:wa,89:Ji,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},t(lr,[2,192],{292:[1,286],293:[1,287]}),t(lr,[2,195]),t(lr,[2,196]),t(lr,[2,197]),t(lr,[2,198]),t(lr,[2,199]),t(lr,[2,200]),{13:d,16:h,44:39,55:40,82:fe,87:f,139:289,172:291,255:154,257:155,266:290,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},t(ho,[2,452]),t(ho,[2,453]),t(ho,[2,454]),t(ho,[2,455]),t(ho,[2,456]),{279:[2,458]},t(uu,[2,207]),t(uu,[2,208]),t(uu,[2,209]),t(uu,[2,210]),t(lr,[2,201]),t(lr,[2,202]),t(lr,[2,203]),t(lr,[2,204]),t(lr,[2,205]),t(lr,[2,206]),t(e,[2,5]),t(Jr,[2,297],{88:295}),t(Bi,[2,299],{90:296}),{48:[1,297],87:[1,298]},t(pn,[2,301]),t(ke,[2,43]),t(ke,[2,82]),t(ke,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},t(u,[2,412]),t(Yi,[2,123]),t(Yi,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),t(yn,[2,124]),{13:d,16:h,45:[1,311],55:194,89:[1,310],197:Xe,223:312,225:308,226:309,229:Ma,307:43,308:p},t(u,a,{215:10,214:314}),t(yn,[2,236]),t(yn,[2,237]),t(sn,[2,6]),t(Ss,[2,287],{60:315,72:316,73:[1,317]}),t(Ke,[2,286]),{13:d,16:h,45:ne,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,307:43,308:p,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t([6,31,63,70,73,81,83,85],[2,20]),t(x,La,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:hi,31:hi,85:hi,112:hi,159:hi,160:hi,161:hi,163:hi,164:hi,41:s}),{13:d,16:h,55:331,307:43,308:p},t(D,[2,280]),t(sn,[2,7]),t(Ke,ht,{59:197,69:198,20:332,70:rn}),t(nn,[2,284]),{64:[1,333]},t(nn,br,{58:205,62:206,23:334,63:Pn}),t(c,[2,254]),t(x,Je,{144:248,30:335,143:336,31:[2,257]}),t(c,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:d,16:h,44:39,55:40,87:f,139:342,186:339,190:340,195:341,197:Qn,307:43,308:p},t(cu,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:d,16:h,87:f,197:Qn,308:p}),t(Ba,[2,227]),t(Ba,[2,228]),t(Ba,[2,229]),{13:d,16:h,44:215,45:vr,55:220,82:fe,87:f,89:wr,172:221,185:351,187:350,200:348,230:347,231:an,234:349,236:216,237:222,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,309:te,310:_,311:217,312:k},{13:d,16:h,44:39,55:40,87:f,139:342,186:352,190:340,195:341,197:Qn,307:43,308:p},t(Ba,[2,146]),t(Ba,[2,147]),t(Ba,[2,148]),t(Ba,[2,149]),{13:d,16:h,44:354,55:355,82:fe,87:f,172:357,237:356,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,309:te,310:_,311:358,312:k,313:353},t(Ll,[2,215]),t(Ll,[2,216]),t(nn,br,{58:205,62:206,23:359,63:Pn}),t(P,[2,264]),t(le,[2,266]),t(sn,[2,11]),t(n,[2,308],{6:[2,310]}),t(Fe,[2,313],{102:360,120:361,121:[1,362]}),t(Fe,[2,47]),t(Fe,[2,63]),t(Fe,[2,64]),{13:d,16:h,55:363,307:43,308:p},t(Fe,[2,336]),t(Fe,[2,337]),t(Fe,[2,338]),{109:[1,364]},t(ee,[2,60]),{13:d,16:h,55:365,307:43,308:p},t(D,[2,335]),{13:d,16:h,55:366,307:43,308:p},{31:[1,367]},t(se,[2,341],{137:368}),t(se,[2,340]),{13:d,16:h,44:215,45:vr,55:220,82:fe,87:f,89:wr,145:369,172:221,185:213,187:214,231:an,236:216,237:222,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,309:te,310:_,311:217,312:k},{28:[1,370],127:371,128:[1,372]},t(it,[2,330],{124:373,125:374,126:M}),t(it,[2,57]),{44:375,87:f},t(qe,[2,151],{241:376,242:[1,377]}),t(Li,[2,153],{245:378,246:[1,379]}),{13:d,16:h,44:136,45:ne,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,247:380,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{250:[1,381]},t(pe,[2,432]),t(pe,[2,433]),t(pe,[2,434]),t(pe,[2,435]),t(pe,[2,436]),t(pe,[2,437]),{250:[2,439]},t([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:G,298:Y,299:J,300:re,301:de,302:be}),t(Gr,[2,162],{261:388,262:389,39:Ve,338:ze}),t(Jt,[2,164]),t(Jt,[2,165]),t(Jt,[2,166]),t(At,[2,95]),t(At,[2,96]),t(pe,[2,377],{177:392,325:[1,393]}),{48:[1,394]},t(At,[2,177]),{13:d,16:h,44:136,45:ne,46:395,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{13:d,16:h,44:136,45:ne,46:396,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{13:d,16:h,44:136,45:ne,46:397,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{13:d,16:h,44:136,45:ne,46:398,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{13:d,16:h,44:136,45:ne,46:399,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(At,[2,183]),t(At,[2,98]),t(pe,[2,381],{180:400}),{87:[1,401]},t(At,[2,185]),{13:d,16:h,44:136,45:ne,46:402,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{29:Vr,57:403},t(lr,[2,193]),{13:d,16:h,55:404,307:43,308:p},{13:d,16:h,44:39,55:40,87:f,139:342,195:405,197:Qn,307:43,308:p},t(Ye,[2,233]),t(Ye,[2,234]),t(Ye,[2,235]),t(Et,[2,459],{281:406,325:[1,407]}),t(pe,[2,463],{284:408,325:[1,409]}),t(pe,[2,465],{286:410,325:[1,411]}),{13:d,16:h,31:[1,412],55:414,82:fe,171:413,172:415,173:416,174:qt,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:or},{31:[1,419],89:[1,420]},{29:[1,421]},t(pn,[2,302]),t(Jr,[2,367],{167:422}),t(Bi,[2,369],{168:423}),{48:[1,424],87:[1,425]},t(pn,[2,371]),t(Yi,[2,122]),t(Yi,[2,417]),t(Yi,[2,413]),t(Yi,[2,414]),t(Yi,[2,415]),t(yn,[2,125]),t(yn,[2,127]),t(yn,[2,128]),t(Mr,[2,420],{227:426}),t(yn,[2,130]),{13:d,16:h,55:194,197:Xe,223:427,307:43,308:p},{48:[1,428]},t(rr,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),t(Ss,[2,288]),{64:[1,433]},t(Ke,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:d,16:h,45:ne,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,276:me,277:L,279:H,280:A,283:m,285:v,308:p,346:R,347:K,348:ce,349:ye,350:ge,351:$e}),t(Er,[2,293]),t(pi,[2,92]),t(pi,[2,93]),t(pi,[2,94]),{45:kt,89:Fr,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:I,29:O,56:85},{19:438,28:I,29:O,56:85},t(Gn,[2,355],{149:439}),t(Gn,[2,354]),{13:d,16:h,44:215,45:Dn,55:220,82:fe,87:f,89:wr,156:440,172:221,185:441,203:442,231:yi,236:216,237:222,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,309:te,310:_,311:217,312:k},t(P,[2,19]),t(rr,[2,21]),{13:d,16:h,44:450,45:$a,55:323,65:445,66:446,67:447,68:448,87:f,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,307:43,308:p,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(sn,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},t(x,[2,386],{31:[2,388]}),t(cu,[2,102]),t(wn,[2,391],{191:452}),t(x,[2,395],{196:453,198:454}),t(x,[2,108]),t(x,[2,109]),t(cu,[2,103]),t(cu,[2,104]),t(cu,[2,390]),{13:d,16:h,44:215,45:vr,48:[1,455],55:220,82:fe,87:f,89:wr,172:221,185:351,187:350,200:456,231:an,234:349,236:216,237:222,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,309:te,310:_,311:217,312:k},t(po,[2,424]),t(pc,[2,136]),t(pc,[2,137]),t(yc,[2,140]),{232:[1,457]},{13:d,16:h,44:39,55:40,87:f,139:342,195:458,197:Qn,307:43,308:p},t(Ye,[2,219]),t(Ye,[2,220]),t(Ye,[2,221]),t(Ye,[2,222]),t(Ye,[2,223]),t(sn,[2,10]),t(Fe,[2,46]),t(Fe,[2,314]),{112:Te,122:459},t(Fe,[2,62]),t(D,Se,{133:242,108:460,112:He,132:je}),t(ee,[2,61]),t(Fe,[2,49]),t([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},t(se,[2,351],{146:463,335:[1,464]}),{29:Vr,57:465},t(it,[2,329]),t(D,[2,332],{129:466,327:[1,467]}),t(it,[2,55]),t(it,[2,331]),{48:[1,468]},t(Li,[2,429]),{13:d,16:h,44:136,45:ne,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(Qe,[2,431]),{13:d,16:h,44:136,45:ne,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,243:470,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(Qe,[2,156]),{45:wa,89:Ji,179:471},t(Gr,[2,441]),{13:d,16:h,44:136,45:ne,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,251:472,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(Jt,[2,444],{256:473}),t(Jt,[2,446],{258:474}),t(pe,[2,442]),t(pe,[2,443]),t(Jt,[2,449]),{13:d,16:h,44:136,45:ne,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,255:154,257:155,259:475,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(pe,[2,450]),t(pe,[2,451]),t(pe,[2,379],{178:476}),t(pe,[2,378]),t([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:d,16:h,44:136,45:ne,46:482,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{48:[1,483]},{48:[1,484]},t(At,[2,187]),t(lr,[2,194]),{13:d,16:h,44:39,55:40,82:fe,87:f,139:289,172:291,255:154,257:155,266:290,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,320:485},{13:d,16:h,39:[1,487],44:136,45:ne,46:488,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,282:486,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(Et,[2,460]),{13:d,16:h,44:136,45:ne,46:489,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(pe,[2,464]),{13:d,16:h,44:136,45:ne,46:490,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(pe,[2,466]),t(ke,[2,40]),t(Jr,[2,298]),t(Yt,[2,87]),t(Yt,[2,88]),t(Yt,[2,89]),t(Yt,[2,90]),{13:d,16:h,55:492,82:fe,172:493,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,311:494,312:k,315:491},t(ke,[2,41]),t(Bi,[2,300]),t(Sn,[2,303],{92:495}),{13:d,16:h,31:[1,496],55:414,82:fe,171:497,172:415,173:416,174:qt,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:or},{31:[1,498],89:[1,499]},{29:[1,500]},t(pn,[2,372]),{13:d,16:h,48:[2,422],55:194,197:Xe,223:312,226:502,228:501,229:Ma,307:43,308:p},t(yn,[2,131]),t(yn,[2,126]),t(rr,[2,22]),t(rr,[2,290]),{82:[1,503]},{82:[1,504]},{13:d,16:h,44:510,45:ne,55:323,67:321,68:322,74:505,75:506,76:yo,77:320,78:lu,79:509,87:f,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,307:43,308:p,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(Er,[2,294]),t(Ey,[2,69]),t(Ey,[2,70]),t(Ke,ht,{59:197,69:198,20:511,70:rn}),t(nn,br,{58:205,62:206,23:512,63:Pn}),{29:[2,375],31:[2,71],84:522,85:o,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},t(Gn,[2,363],{157:524,335:[1,525]}),t(u,a,{215:10,202:526,205:527,208:528,214:529,44:530,87:f}),t(Oy,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:a,16:a,45:a,197:a,224:a,229:a,308:a,87:f}),{13:d,16:h,44:215,45:Dn,55:220,82:fe,87:f,89:wr,172:221,185:351,203:536,212:534,231:yi,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,309:te,310:_,311:217,312:k},t(u,a,{215:10,205:527,208:528,214:529,44:530,202:537,87:f}),t(nn,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:d,16:h,45:$a,87:f,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,276:me,277:L,279:H,280:A,283:m,285:v,308:p,346:R,347:K,348:ce,349:ye,350:ge,351:$e}),t(bc,[2,291]),t(bc,[2,24]),t(bc,[2,25]),{13:d,16:h,44:136,45:ne,46:539,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(bc,[2,28]),t(nn,br,{58:205,62:206,23:540,63:Pn}),t([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),t(wn,[2,107]),{13:d,16:h,44:215,45:vr,55:220,82:fe,87:f,89:wr,172:221,185:351,187:350,199:543,200:544,231:an,234:349,236:216,237:222,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,309:te,310:_,311:217,312:k},t(UR,[2,132]),t(po,[2,425]),t(UR,[2,133]),{13:d,16:h,44:354,55:355,82:fe,87:f,172:357,237:356,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,309:te,310:_,311:358,312:k,313:545},t(Fe,[2,54]),t(Fe,[2,48]),t(se,[2,342]),{13:d,16:h,44:39,55:40,87:f,139:546,307:43,308:p},t(se,[2,68]),t(x,[2,350],{31:qR,112:qR}),t(Fe,[2,53]),{13:d,16:h,55:547,307:43,308:p},t(D,[2,333]),t(ie,[2,16]),t(Li,[2,152]),t(Qe,[2,154]),t(Qe,[2,157]),t(Gr,[2,159]),t(Gr,[2,160],{262:389,261:548,39:Ve,338:ze}),t(Gr,[2,161],{262:389,261:549,39:Ve,338:ze}),t(Jt,[2,163]),{13:d,16:h,44:136,45:ne,46:550,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(At,[2,178]),t(At,[2,179]),{13:d,16:h,44:136,45:ne,46:551,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{13:d,16:h,44:136,45:ne,46:552,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{13:d,16:h,44:136,45:ne,46:553,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{48:[1,554],272:[1,555]},t(At,[2,184]),t(At,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:d,16:h,55:194,197:Xe,223:562,307:43,308:p},t(tS,[2,224]),t(tS,[2,225]),t(tS,[2,226]),{31:[1,563],45:VR,94:564},t(ke,[2,84]),t(Jr,[2,368]),t(ke,[2,85]),t(Bi,[2,370]),t(Sn,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},t(rr,[2,35],{83:[1,569]}),t(rr,[2,36],{81:[1,570]}),t(Ss,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:d,16:h,45:ne,76:yo,78:lu,87:f,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,276:me,277:L,279:H,280:A,283:m,285:v,308:p,346:R,347:K,348:ce,349:ye,350:ge,351:$e}),t(Bl,[2,295]),{45:ne,77:572},{45:ne,77:573},t(Bl,[2,33]),t(Bl,[2,34]),{31:[2,275],50:574,84:575,85:o},{31:[2,277],51:576,84:577,85:o},t(Gn,[2,356]),t(HR,[2,357],{152:578,335:[1,579]}),t(bo,[2,74]),{29:Vr,57:580},{29:Vr,57:581},{13:d,16:h,44:39,55:40,87:f,139:582,307:43,308:p},t(kR,[2,365],{162:583,328:[1,584]}),{13:d,16:h,45:ne,55:323,67:321,68:322,77:320,79:585,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,307:43,308:p,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{45:[1,586]},t(bo,[2,81]),{29:Vr,57:587},t(Gn,[2,73]),t(x,[2,362],{29:mo,31:mo,85:mo,112:mo,159:mo,160:mo,161:mo,163:mo,164:mo}),t(Oy,[2,112]),t($l,[2,401],{206:588}),t(x,[2,405],{209:589,210:590}),t(x,[2,403]),t(x,[2,404]),t(Oy,[2,113]),t(Oy,[2,400]),{13:d,16:h,44:215,45:Dn,48:[1,591],55:220,82:fe,87:f,89:wr,172:221,185:351,203:536,212:592,231:yi,234:535,236:216,237:222,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,309:te,310:_,311:217,312:k},t(po,[2,426]),t(yc,[2,138]),t(yc,[2,139]),{232:[1,593]},t(bc,[2,292]),{47:[1,595],48:[1,594]},t(sn,[2,9]),t(wn,[2,392]),t(wn,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:d,16:h,87:f,197:Qn,308:p}),t(wn,[2,110],{272:[1,598]}),t(Ay,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},t(it,[2,58]),t(Jt,[2,445]),t(Jt,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},t(At,[2,99]),t(pe,[2,382]),t([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),t(At,[2,188]),t(At,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:d,16:h,55:492,82:fe,172:493,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,311:494,312:k,315:611},t(ke,[2,42]),t(Sn,[2,304]),{13:d,16:h,55:414,82:fe,95:612,171:613,172:415,173:416,174:qt,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:or},{31:[1,614],45:VR,94:615},t(yn,[2,129]),t(Mr,[2,421]),{82:[1,616]},{82:[1,617]},t(Bl,[2,296]),t(Bl,[2,31]),t(Bl,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},t(x,La,{155:330,153:618,154:619,29:go,31:go,85:go,112:go,159:go,160:go,161:go,163:go,164:go}),t(HR,[2,358]),t(bo,[2,75]),t(bo,[2,76]),{29:Vr,57:620},{13:d,16:h,44:39,55:40,87:f,139:621,307:43,308:p},t(kR,[2,366]),t(bo,[2,79]),{13:d,16:h,44:136,45:ne,46:622,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(bo,[2,91],{336:[1,623]}),t([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),t($l,[2,117]),{13:d,16:h,44:215,45:Dn,55:220,82:fe,87:f,89:wr,172:221,185:351,203:536,211:626,212:627,231:yi,234:535,236:216,237:222,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,309:te,310:_,311:217,312:k},t(Ba,[2,134]),t(po,[2,427]),t(Ba,[2,135]),t(bc,[2,26]),{44:628,87:f},t(wn,[2,106]),t(wn,[2,394]),t(x,[2,396]),t(Ay,[2,111]),t(Ay,[2,398]),{13:d,16:h,44:39,55:40,87:f,139:342,186:629,190:340,195:341,197:Qn,307:43,308:p},t(Ll,[2,217]),t(x,Je,{144:248,140:630,143:631,31:[2,343]}),t(At,[2,97]),t(pe,[2,380]),t(At,[2,180]),{13:d,16:h,44:136,45:ne,46:632,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},{13:d,16:h,44:136,45:ne,46:633,55:133,67:132,68:134,77:131,82:fe,87:f,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:we,264:130,265:Ce,266:137,267:139,268:oe,269:ae,270:Ae,271:Ie,273:he,274:ve,275:146,276:me,277:L,278:149,279:H,280:A,283:m,285:v,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:E,346:R,347:K,348:ce,349:ye,350:ge,351:$e},t(At,[2,190]),{290:[1,634]},{314:[1,635]},{13:d,16:h,48:[1,636],55:414,82:fe,171:637,172:415,173:416,174:qt,255:154,257:155,291:150,294:j,295:q,296:$,297:G,298:Y,299:J,300:re,301:de,302:be,303:Ee,304:xe,305:Pe,306:U,307:43,308:p,312:or},t(QR,[2,305]),t(ke,[2,86]),t(Sn,[2,374]),t(rr,[2,37]),t(rr,[2,38]),t(Gn,[2,72]),t(Gn,[2,360]),t(bo,[2,77]),{29:Vr,57:638},{47:[1,639]},{29:[2,376]},t($l,[2,402]),t($l,[2,115],{215:10,208:528,214:529,44:530,205:640,13:a,16:a,45:a,197:a,224:a,229:a,308:a,87:f}),t($l,[2,118],{272:[1,641]}),t(xy,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:Ee,304:xe,305:Pe,306:U},t(Yt,[2,218]),t(Sn,[2,44]),t(QR,[2,306]),t(bo,[2,78]),{44:651,87:f},t($l,[2,116]),t(x,[2,406]),t(xy,[2,119]),t(xy,[2,408]),t(u,a,{215:10,205:527,208:528,214:529,44:530,202:652,87:f}),t(bc,[2,27]),t(Ay,[2,230]),t(GR,[2,345],{141:653,335:[1,654]}),t(At,[2,181]),t(At,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},t(x,Je,{144:248,142:657,143:658,31:zR,112:zR}),t(GR,[2,346]),t(bo,[2,80]),t(xy,[2,231]),t(se,[2,67]),t(se,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:function(Oe,Ne){if(Ne.recoverable)this.trace(Oe);else{var Ue=new Error(Oe);throw Ue.hash=Ne,Ue}},parse:function(Oe){var Ne=this,Ue=[0],ot=[null],ct=[],X=this.table,Zi="",Z=0,du=0,Dy=2,Ny=1,jy=ct.slice.call(arguments,1),Zr=Object.create(this.lexer),Os={yy:{}};for(var vc in this.yy)Object.prototype.hasOwnProperty.call(this.yy,vc)&&(Os.yy[vc]=this.yy[vc]);Zr.setInput(Oe,Os.yy),Os.yy.lexer=Zr,Os.yy.parser=this,typeof Zr.yylloc>"u"&&(Zr.yylloc={});var Ql=Zr.yylloc;ct.push(Ql);var pS=Zr.options&&Zr.options.ranges;typeof Os.yy.parseError=="function"?this.parseError=Os.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Cy=function(){var Gl;return Gl=Zr.lex()||Ny,typeof Gl!="number"&&(Gl=Ne.symbols_[Gl]||Gl),Gl},Pt,nr,Ot,jn,Cn={},Fy,vo,aI,My;;){if(nr=Ue[Ue.length-1],this.defaultActions[nr]?Ot=this.defaultActions[nr]:((Pt===null||typeof Pt>"u")&&(Pt=Cy()),Ot=X[nr]&&X[nr][Pt]),typeof Ot>"u"||!Ot.length||!Ot[0]){var yS="";My=[];for(Fy in X[nr])this.terminals_[Fy]&&Fy>Dy&&My.push("'"+this.terminals_[Fy]+"'");Zr.showPosition?yS="Parse error on line "+(Z+1)+`:
`+Zr.showPosition()+`
Expecting `+My.join(", ")+", got '"+(this.terminals_[Pt]||Pt)+"'":yS="Parse error on line "+(Z+1)+": Unexpected "+(Pt==Ny?"end of input":"'"+(this.terminals_[Pt]||Pt)+"'"),this.parseError(yS,{text:Zr.match,token:this.terminals_[Pt]||Pt,line:Zr.yylineno,loc:Ql,expected:My})}if(Ot[0]instanceof Array&&Ot.length>1)throw new Error("Parse Error: multiple actions possible at state: "+nr+", token: "+Pt);switch(Ot[0]){case 1:Ue.push(Pt),ot.push(Zr.yytext),ct.push(Zr.yylloc),Ue.push(Ot[1]),Pt=null,du=Zr.yyleng,Zi=Zr.yytext,Z=Zr.yylineno,Ql=Zr.yylloc;break;case 2:if(vo=this.productions_[Ot[1]][1],Cn.$=ot[ot.length-vo],Cn._$={first_line:ct[ct.length-(vo||1)].first_line,last_line:ct[ct.length-1].last_line,first_column:ct[ct.length-(vo||1)].first_column,last_column:ct[ct.length-1].last_column},pS&&(Cn._$.range=[ct[ct.length-(vo||1)].range[0],ct[ct.length-1].range[1]]),jn=this.performAction.apply(Cn,[Zi,du,Z,Os.yy,Ot[1],ot,ct].concat(jy)),typeof jn<"u")return jn;vo&&(Ue=Ue.slice(0,-1*vo*2),ot=ot.slice(0,-1*vo),ct=ct.slice(0,-1*vo)),Ue.push(this.productions_[Ot[1]][0]),ot.push(Cn.$),ct.push(Cn._$),aI=X[Ue[Ue.length-2]][Ue[Ue.length-1]],Ue.push(aI);break;case 3:return!0}}return!0}},Ry=HA.Wildcard,Iy="http://www.w3.org/1999/02/22-rdf-syntax-ns#",b$=Iy+"type",m$=Iy+"first",g$=Iy+"rest",WR=Iy+"nil",Py="http://www.w3.org/2001/XMLSchema#",XR=Py+"integer",KR=Py+"decimal",JR=Py+"double",_$=Py+"boolean",mc="",YR="",ZR="";function bi(Re){return Re.toLowerCase()}function gc(Re,Oe){return Re.push(Oe),Re}function Ul(Re,Oe){return Re.push.apply(Re,Oe),Re}function Yr(Re){Re||(Re={});for(var Oe=1,Ne=arguments.length,Ue;Oe<Ne&&(Ue=arguments[Oe]||{});Oe++)for(var ot in Ue)Re[ot]=Ue[ot];return Re}function Ts(){for(var Re=[],Oe=0,Ne=arguments.length;Oe<Ne;Oe++)Re=Re.concat.apply(Re,arguments[Oe]);return Re}function Xf(Re){if(Re[0]==="<"&&(Re=Re.substring(1,Re.length-1)),/^[a-z]+:/i.test(Re))return Re;if(!Nt.base)throw new Error("Cannot resolve relative IRI "+Re+" because no base IRI was set.");switch(mc!==Nt.base&&(mc=Nt.base,YR=mc.replace(/[^\/:]*$/,""),ZR=mc.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),Re[0]){case void 0:return mc;case"#":return mc+Re;case"?":return mc.replace(/(?:\?.*)?$/,Re);case"/":return ZR+Re;default:return YR+Re}}function nS(Re){if(Re){var Oe=Re[0];if(Oe==="?"||Oe==="$")return Nt.factory.variable(Re.substr(1))}return Re}function Nn(Re,Oe){return{type:"operation",operator:Re,args:Oe||[]}}function ql(Re,Oe){var Ne={expression:Re==="*"?new Ry:Re};if(Oe)for(var Ue in Oe)Ne[Ue]=Oe[Ue];return Ne}function Vl(Re,Oe){return{type:"path",pathType:Re,items:Oe}}function iS(Re,Oe){for(var Ne=0,Ue=Oe.length,ot;Ne<Ue&&(ot=Oe[Ne]);Ne++)Re=Nn(ot[0],[Re,ot[1]]);return Re}function _c(Re,Oe){var Ne=[],Ue=[],ot=Re.length,ct,X={};if(!ot)return null;for(var Zi=0;Zi<ot&&(ct=Re[Zi]);Zi++)(ct.named?Ue:Ne).push(ct.iri);return X[Oe||"from"]={default:Ne,named:Ue},X}function Hl(Re){return parseInt(Re,10)}function aS(Re){return Re.type==="group"&&Re.patterns.length===1?Re.patterns[0]:Re}function Es(Re,Oe){return Oe&&Oe.termType!=="NamedNode"&&(Oe=Nt.factory.namedNode(Oe)),Nt.factory.literal(Re,Oe)}function v$(Re,Oe){return Nt.factory.literal(Re,Oe)}function sS(Re,Oe,Ne){if(!("termType"in Oe))throw new Error("Nested triples cannot contain paths");return Nt.factory.quad(Re,Oe,Ne)}function _o(Re,Oe,Ne,Ue){var ot={};return Re!=null&&(ot.subject=Re),Oe!=null&&(ot.predicate=Oe),Ne!=null&&(ot.object=Ne),Ue!=null&&(ot.annotations=Ue),ot}function Kf(Re){return typeof Re=="string"?Re.startsWith("e_")?Nt.factory.blankNode(Re):Nt.factory.blankNode("e_"+Re):Nt.factory.blankNode("g_"+eI++)}var eI=0;Nt._resetBlanks=function(){eI=0};var w$=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,S$={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},T$=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,oS=String.fromCharCode;function tI(Re,Oe){Re=Re.substring(Oe,Re.length-Oe);try{Re=Re.replace(w$,function(Ne,Ue,ot,ct){var X;if(Ue){if(X=parseInt(Ue,16),isNaN(X))throw new Error;return oS(X)}else if(ot){if(X=parseInt(ot,16),isNaN(X))throw new Error;return X<65535?oS(X):oS(55296+((X-=65536)>>10),56320+(X&1023))}else{var Zi=S$[ct];if(!Zi)throw new Error;return Zi}})}catch{return""}if(T$.exec(Re))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+Re);return Re}function E$(Re){var Oe=Kf(),Ne=Oe,Ue=[],ot,ct=[];Re.forEach(function(du){Ue.push(du.entity),Ul(ct,du.triples)});for(var X=0,Zi=0,Z=Ue.length,ot=Array(Z*2);X<Z;)ot[Zi++]=_o(Ne,Nt.factory.namedNode(m$),Ue[X]),ot[Zi++]=_o(Ne,Nt.factory.namedNode(g$),Ne=++X<Z?Kf():Nt.factory.namedNode(WR));return{entity:Oe,triples:Ul(ot,ct)}}function O$(Re){var Oe=Kf();return{entity:Oe,triples:Re.map(function(Ne){return Yr(_o(Oe),Ne)})}}function uS(Re,Oe,Ne){var Ue=[],ot=[];return Oe.forEach(function(ct){let X=null;ct.annotation&&(X=ct.annotation,ct=ct.object),Ue.push(_o(null,Re,ct.entity,X)),Ul(ot,ct.triples)}),Ts(Ue,Ne||[],ot)}function kl(Re){return Re.variable?Re.variable.value:Re.value||Re.expression.value}function cS(Re){if(!Re)return[];if(Re.type==="aggregate")return[Re];if(Re.type==="operation"){const Oe=[];for(const Ne of Re.args)Oe.push(...cS(Ne));return Oe}return[]}function A$(Re){const Oe=new Set,Ne=function(Ue){Ue&&(Ue.termType==="Variable"?Oe.add(Ue):Ue.type==="operation"&&Ue.args.forEach(Ne))};return Ne(Re),Oe}function lS(Re,Oe=1,Ne=[]){for(const Ue of Re)Oe>0&&Ue instanceof Array?lS(Ue,Oe-1,Ne):Ne.push(Ue);return Ne}function dS(Re){return Re.termType==="Variable"}function rI(Re){if(Re.triples){const Oe=[];for(const Ne of Re.triples)dS(Ne.subject)&&Oe.push(Ne.subject.value),dS(Ne.predicate)&&Oe.push(Ne.predicate.value),dS(Ne.object)&&Oe.push(Ne.object.value);return Oe}else if(Re.patterns){const Oe=[];for(const Ne of Re.patterns)Oe.push(...rI(Ne));return Oe}return[]}function x$(Re){const Oe=Re.slice().sort(),Ne=[];for(let Ue=0;Ue<Oe.length-1;Ue++)Oe[Ue+1]==Oe[Ue]&&Ne.push(Oe[Ue]);return Ne}function Jf(Re){if(!Nt.sparqlStar)throw new Error("SPARQL-star support is not enabled");return Re}function nI(Re,Oe,Ne){for(const Ue of Oe){const ot=_o("subject"in Ue?Ue.subject:Re,Ue.predicate,Ue.object);Ne.push(ot),Ue.annotations&&nI(sS(Re,Ue.predicate,Ue.object),Ue.annotations,Ne)}}function fS(Re){if(Nt.sparqlStar){const Oe=[];return Re.forEach(Ne=>{const Ue=_o(Ne.subject,Ne.predicate,Ne.object);Oe.push(Ue),Ne.annotations&&nI(sS(Ne.subject,Ne.predicate,Ne.object),Ne.annotations,Oe)}),Oe}return Re}function iI(Re){for(const Oe of Re){if(Oe.type==="graph"&&Oe.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(Oe.type==="bgp"||Oe.type==="graph"){for(const Ne of Oe.triples)if(Ne.subject.termType==="Variable"||Ne.predicate.termType==="Variable"||Ne.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return Re}function hS(Re){for(const Oe of Re)if(Oe.type==="bgp"){for(const Ne of Oe.triples)if(Ne.subject.termType==="BlankNode"||Ne.predicate.termType==="BlankNode"||Ne.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return Re}var R$=function(){var Re={EOF:1,parseError:function(Ne,Ue){if(this.yy.parser)this.yy.parser.parseError(Ne,Ue);else throw new Error(Ne)},setInput:function(Oe,Ne){return this.yy=Ne||this.yy||{},this._input=Oe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Oe=this._input[0];this.yytext+=Oe,this.yyleng++,this.offset++,this.match+=Oe,this.matched+=Oe;var Ne=Oe.match(/(?:\r\n?|\n).*/g);return Ne?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Oe},unput:function(Oe){var Ne=Oe.length,Ue=Oe.split(/(?:\r\n?|\n)/g);this._input=Oe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ne),this.offset-=Ne;var ot=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ue.length-1&&(this.yylineno-=Ue.length-1);var ct=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ue?(Ue.length===ot.length?this.yylloc.first_column:0)+ot[ot.length-Ue.length].length-Ue[0].length:this.yylloc.first_column-Ne},this.options.ranges&&(this.yylloc.range=[ct[0],ct[0]+this.yyleng-Ne]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Oe){this.unput(this.match.slice(Oe))},pastInput:function(){var Oe=this.matched.substr(0,this.matched.length-this.match.length);return(Oe.length>20?"...":"")+Oe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Oe=this.match;return Oe.length<20&&(Oe+=this._input.substr(0,20-Oe.length)),(Oe.substr(0,20)+(Oe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Oe=this.pastInput(),Ne=new Array(Oe.length+1).join("-");return Oe+this.upcomingInput()+`
`+Ne+"^"},test_match:function(Oe,Ne){var Ue,ot,ct;if(this.options.backtrack_lexer&&(ct={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ct.yylloc.range=this.yylloc.range.slice(0))),ot=Oe[0].match(/(?:\r\n?|\n).*/g),ot&&(this.yylineno+=ot.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ot?ot[ot.length-1].length-ot[ot.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Oe[0].length},this.yytext+=Oe[0],this.match+=Oe[0],this.matches=Oe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Oe[0].length),this.matched+=Oe[0],Ue=this.performAction.call(this,this.yy,this,Ne,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ue)return Ue;if(this._backtrack){for(var X in ct)this[X]=ct[X];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Oe,Ne,Ue,ot;this._more||(this.yytext="",this.match="");for(var ct=this._currentRules(),X=0;X<ct.length;X++)if(Ue=this._input.match(this.rules[ct[X]]),Ue&&(!Ne||Ue[0].length>Ne[0].length)){if(Ne=Ue,ot=X,this.options.backtrack_lexer){if(Oe=this.test_match(Ue,ct[X]),Oe!==!1)return Oe;if(this._backtrack){Ne=!1;continue}else return!1}else if(!this.options.flex)break}return Ne?(Oe=this.test_match(Ne,ct[ot]),Oe!==!1?Oe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Ne=this.next();return Ne||this.lex()},begin:function(Ne){this.conditionStack.push(Ne)},popState:function(){var Ne=this.conditionStack.length-1;return Ne>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ne){return Ne=this.conditionStack.length-1-Math.abs(Ne||0),Ne>=0?this.conditionStack[Ne]:"INITIAL"},pushState:function(Ne){this.begin(Ne)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(Ne,Ue,ot,ct){switch(ot){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(Ue.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return Re}();rS.lexer=R$;function Nt(){this.yy={}}return Nt.prototype=rS,rS.Parser=Nt,new Nt}(),Hk=Vk,kk="http://www.w3.org/2001/XMLSchema#integer",Qk="http://www.w3.org/2001/XMLSchema#string";function Cr(t){this._options=t=t||{};var e=t.prefixes||{};this._prefixByIri={};var r=[];for(var n in e){var a=e[n];up(a)&&(this._prefixByIri[a]=n,r.push(a))}var s=r.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+s+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=t.sparqlStar,this._indent=up(t.indent)?t.indent:"  ",this._newline=up(t.newline)?t.newline:`
`,this._explicitDatatype=!!t.explicitDatatype}Cr.prototype.toQuery=function(t){var e="";return t.queryType&&(e+=t.queryType.toUpperCase()+" "),t.reduced&&(e+="REDUCED "),t.distinct&&(e+="DISTINCT "),t.variables?e+=oa(t.variables,void 0,function(r){return Hu(r)?this.toEntity(r):"("+this.toExpression(r.expression)+" AS "+jb(r.variable)+")"},this)+" ":t.template&&(e+=this.group(t.template,!0)+this._newline),t.from&&(e+=this.graphs("FROM ",t.from.default)+this.graphs("FROM NAMED ",t.from.named)),t.where&&(e+="WHERE "+this.group(t.where,!0)+this._newline),t.updates&&(e+=oa(t.updates,";"+this._newline,this.toUpdate,this)),t.group&&(e+="GROUP BY "+oa(t.group,void 0,function(r){var n=Hu(r.expression)?this.toEntity(r.expression):"("+this.toExpression(r.expression)+")";return r.variable?"("+n+" AS "+jb(r.variable)+")":n},this)+this._newline),t.having&&(e+="HAVING ("+oa(t.having,void 0,this.toExpression,this)+")"+this._newline),t.order&&(e+="ORDER BY "+oa(t.order,void 0,function(r){var n="("+this.toExpression(r.expression)+")";return r.descending?"DESC "+n:n},this)+this._newline),t.offset&&(e+="OFFSET "+t.offset+this._newline),t.limit&&(e+="LIMIT "+t.limit+this._newline),t.values&&(e+=this.values(t)),e=this.baseAndPrefixes(t)+e,e.trim()};Cr.prototype.baseAndPrefixes=function(t){var e=t.base?"BASE <"+t.base+">"+this._newline:"",r="";for(var n in t.prefixes)(this._options.allPrefixes||this._usedPrefixes[n])&&(r+="PREFIX "+n+": <"+t.prefixes[n]+">"+this._newline);return e+r};Cr.prototype.toPattern=function(t){var e=t.type||t instanceof Array&&"array"||(t.subject&&t.predicate&&t.object?"triple":"");if(!(e in this))throw new Error("Unknown entry type: "+e);return this[e](t)};Cr.prototype.triple=function(t){return this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+"."};Cr.prototype.array=function(t){return oa(t,this._newline,this.toPattern,this)};Cr.prototype.bgp=function(t){return this.encodeTriples(t.triples)};Cr.prototype.encodeTriples=function(t){if(!t.length)return"";for(var e=[],r=void 0,n=void 0,a=0;a<t.length;a++){var s=t[a];Vc(s.subject,r)?Vc(s.predicate,n)?e.push(","):(n=s.predicate,e.push(";"+this._newline,this._indent,this.toEntity(n))):(r&&e.push("."+this._newline),r=s.subject,n=s.predicate,e.push(this.toEntity(r)," ",this.toEntity(n))),e.push(" ",this.toEntity(s.object))}return e.push("."),e.join("")};Cr.prototype.graph=function(t){return"GRAPH "+this.toEntity(t.name)+" "+this.group(t)};Cr.prototype.graphs=function(t,e){return!e||e.length===0?"":oa(e,"",function(r){return t+this.toEntity(r)+this._newline},this)};Cr.prototype.group=function(t,e){return t=e!==!0?this.array(t.patterns||t.triples):this.toPattern(t.type!=="group"?t:t.patterns),t.indexOf(this._newline)===-1?"{ "+t+" }":"{"+this._newline+this.indent(t)+this._newline+"}"};Cr.prototype.query=function(t){return this.toQuery(t)};Cr.prototype.filter=function(t){return"FILTER("+this.toExpression(t.expression)+")"};Cr.prototype.bind=function(t){return"BIND("+this.toExpression(t.expression)+" AS "+jb(t.variable)+")"};Cr.prototype.optional=function(t){return"OPTIONAL "+this.group(t)};Cr.prototype.union=function(t){return oa(t.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)};Cr.prototype.minus=function(t){return"MINUS "+this.group(t)};Cr.prototype.values=function(t){var e=Object.keys(t.values.reduce(function(a,s){for(var o in s)a[o]=!0;return a},{})),r,n;return e.length===1?r=n="":(r="(",n=")"),"VALUES "+r+e.join(" ")+n+" {"+this._newline+oa(t.values,this._newline,function(a){return"  "+r+oa(e,void 0,function(s){return a[s]?this.toEntity(a[s]):"UNDEF"},this)+n},this)+this._newline+"}"};Cr.prototype.service=function(t){return"SERVICE "+(t.silent?"SILENT ":"")+this.toEntity(t.name)+" "+this.group(t)};Cr.prototype.toExpression=function(t){if(Hu(t))return this.toEntity(t);switch(t.type.toLowerCase()){case"aggregate":return t.aggregation.toUpperCase()+"("+(t.distinct?"DISTINCT ":"")+this.toExpression(t.expression)+(typeof t.separator=="string"?'; SEPARATOR = "'+t.separator.replace(kj,Qj)+'"':"")+")";case"functioncall":return this.toEntity(t.function)+"("+oa(t.args,", ",this.toExpression,this)+")";case"operation":var e=t.operator.toUpperCase(),r=t.args||[];switch(t.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(Hu(r[0])?this.toEntity(r[0]):"("+this.toExpression(r[0])+")")+" "+e+" "+(Hu(r[1])?this.toEntity(r[1]):"("+this.toExpression(r[1])+")");case"!":return"!("+this.toExpression(r[0])+")";case"uplus":return"+("+this.toExpression(r[0])+")";case"uminus":return"-("+this.toExpression(r[0])+")";case"notin":e="NOT IN";case"in":return this.toExpression(r[0])+" "+e+"("+(up(r[1])?r[1]:oa(r[1],", ",this.toExpression,this))+")";case"notexists":e="NOT EXISTS";case"exists":return e+" "+this.group(r[0],!0);default:return e+"("+oa(r,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+t.type)}};Cr.prototype.toEntity=function(t){if(Hu(t))switch(t.termType){case"Wildcard":return"*";case"Variable":return jb(t);case"BlankNode":return"_:"+t.value;case"Literal":var e=t.value||"",r=t.language||"",n=t.datatype;if(t='"'+e.replace(kj,Qj)+'"',r)t+="@"+r;else if(n){if(!this._explicitDatatype)switch(n.value){case Qk:return t;case kk:if(/^\d+$/.test(e))return e+" "}t+="^^"+this.encodeIRI(n.value)}return t;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return t.graph&&t.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(t.graph)+" { "+this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+" }  >>":"<< "+this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+" >>";default:return this.encodeIRI(t.value)}else{var a=t.items.map(this.toEntity,this),s=t.pathType;switch(s){case"^":case"!":return s+a[0];case"*":case"+":case"?":return"("+a[0]+s+")";default:return"("+a.join(s)+")"}}};var kj=/["\\\t\n\r\b\f]/g,Qj=function(t){return Gk[t]},Gk={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};Cr.prototype.encodeIRI=function(t){var e=this._prefixRegex.exec(t);if(e){var r=this._prefixByIri[e[1]];return this._usedPrefixes[r]=!0,r+":"+e[2]}return"<"+t+">"};Cr.prototype.toUpdate=function(t){switch(t.type||t.updateType){case"load":return"LOAD"+(t.source?" "+this.toEntity(t.source):"")+(t.destination?" INTO GRAPH "+this.toEntity(t.destination):"");case"insert":return"INSERT DATA "+this.group(t.insert,!0);case"delete":return"DELETE DATA "+this.group(t.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(t.delete,!0);case"insertdelete":return(t.graph?"WITH "+this.toEntity(t.graph)+this._newline:"")+(t.delete.length?"DELETE "+this.group(t.delete,!0)+this._newline:"")+(t.insert.length?"INSERT "+this.group(t.insert,!0)+this._newline:"")+(t.using?this.graphs("USING ",t.using.default):"")+(t.using?this.graphs("USING NAMED ",t.using.named):"")+"WHERE "+this.group(t.where,!0);case"add":case"copy":case"move":return t.type.toUpperCase()+" "+(t.silent?"SILENT ":"")+(t.source.default?"DEFAULT":this.toEntity(t.source.name))+" TO "+this.toEntity(t.destination.name);case"create":case"clear":case"drop":return t.type.toUpperCase()+(t.silent?" SILENT ":" ")+(t.graph.default?"DEFAULT":t.graph.named?"NAMED":t.graph.all?"ALL":"GRAPH "+this.toEntity(t.graph.name));default:throw new Error("Unknown update query type: "+t.type)}};Cr.prototype.indent=function(t){return t.replace(/^/gm,this._indent)};function jb(t){return"?"+t.value}function up(t){return typeof t=="string"}function Hu(t){return typeof t.termType=="string"}function Vc(t,e){if(!t||!Hu(t)||!e||!Hu(e)||t.termType!==e.termType)return!1;switch(t.termType){case"Literal":return t.value===e.value&&t.language===e.language&&Vc(t.datatype,e.datatype);case"Quad":return Vc(t.subject,e.subject)&&Vc(t.predicate,e.predicate)&&Vc(t.object,e.object)&&Vc(t.graph,e.graph);default:return t.value===e.value}}function oa(t,e,r,n){return t.map(r,n).join(up(e)?e:" ")}var zk=function(e={}){return{stringify:function(r){var n=Object.create(e);return n.prefixes=r.prefixes,new Cr(n).toQuery(r)},createGenerator:function(){return new Cr(e)}}},wo=Hk.Parser,Wk=zk,Xk=HA.Wildcard,{DataFactory:Kk}=yt,w0={Parser:function({prefixes:t,baseIRI:e,factory:r,sparqlStar:n,skipValidation:a,skipUngroupedVariableCheck:s,pathOnly:o}={}){var u={};for(var c in t||{})u[c]=t[c];var l=new wo;return l.parse=function(){return wo.base=e||"",wo.prefixes=Object.create(u),wo.factory=r||new Kk,wo.sparqlStar=!!n,wo.pathOnly=!!o,wo.skipValidation=!!a||!!s,wo.prototype.parse.apply(l,arguments)},l._resetBlanks=wo._resetBlanks,l},Generator:Wk,Wildcard:Xk},Jk=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Yk=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Zk=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Jk(e,t,r);return Yk(e,t),e};Object.defineProperty(If,"__esModule",{value:!0});const at=Zk(Rf),eQ=yt,tQ=sr,rQ=w0;class nQ{constructor(e){this.dataFactory=e||new eQ.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(e,r=!0){return this.flattenMulti({type:at.types.ALT,input:e},r)}createAsk(e){return{type:at.types.ASK,input:e}}createBoundAggregate(e,r,n,a,s){const o=this.createAggregateExpression(r,n,a,s);return o.variable=e,o}createBgp(e){return{type:at.types.BGP,patterns:e}}createConstruct(e,r){return{type:at.types.CONSTRUCT,input:e,template:r}}createDescribe(e,r){return{type:at.types.DESCRIBE,input:e,terms:r}}createDistinct(e){return{type:at.types.DISTINCT,input:e}}createExtend(e,r,n){return{type:at.types.EXTEND,input:e,variable:r,expression:n}}createFrom(e,r,n){return{type:at.types.FROM,input:e,default:r,named:n}}createFilter(e,r){return{type:at.types.FILTER,input:e,expression:r}}createGraph(e,r){return{type:at.types.GRAPH,input:e,name:r}}createGroup(e,r,n){return{type:at.types.GROUP,input:e,variables:r,aggregates:n}}createInv(e){return{type:at.types.INV,path:e}}createJoin(e,r=!0){return this.flattenMulti({type:at.types.JOIN,input:e},r)}createLeftJoin(e,r,n){return n?{type:at.types.LEFT_JOIN,input:[e,r],expression:n}:{type:at.types.LEFT_JOIN,input:[e,r]}}createLink(e){return{type:at.types.LINK,iri:e}}createMinus(e,r){return{type:at.types.MINUS,input:[e,r]}}createNop(){return{type:at.types.NOP}}createNps(e){return{type:at.types.NPS,iris:e}}createOneOrMorePath(e){return{type:at.types.ONE_OR_MORE_PATH,path:e}}createOrderBy(e,r){return{type:at.types.ORDER_BY,input:e,expressions:r}}createPath(e,r,n,a){return a?{type:at.types.PATH,subject:e,predicate:r,object:n,graph:a}:{type:at.types.PATH,subject:e,predicate:r,object:n,graph:this.dataFactory.defaultGraph()}}createPattern(e,r,n,a){const s=this.dataFactory.quad(e,r,n,a);return s.type=at.types.PATTERN,s}createProject(e,r){return{type:at.types.PROJECT,input:e,variables:r}}createReduced(e){return{type:at.types.REDUCED,input:e}}createSeq(e,r=!0){return this.flattenMulti({type:at.types.SEQ,input:e},r)}createService(e,r,n){return{type:at.types.SERVICE,input:e,name:r,silent:!!n}}createSlice(e,r,n){return r=r||0,n!==void 0?{type:at.types.SLICE,input:e,start:r,length:n}:{type:at.types.SLICE,input:e,start:r}}createUnion(e,r=!0){return this.flattenMulti({type:at.types.UNION,input:e},r)}createValues(e,r){return{type:at.types.VALUES,variables:e,bindings:r}}createZeroOrMorePath(e){return{type:at.types.ZERO_OR_MORE_PATH,path:e}}createZeroOrOnePath(e){return{type:at.types.ZERO_OR_ONE_PATH,path:e}}createAggregateExpression(e,r,n,a){return a?{type:at.types.EXPRESSION,expressionType:at.expressionTypes.AGGREGATE,aggregator:e,expression:r,separator:a,distinct:n}:{type:at.types.EXPRESSION,expressionType:at.expressionTypes.AGGREGATE,aggregator:e,expression:r,distinct:n}}createExistenceExpression(e,r){return{type:at.types.EXPRESSION,expressionType:at.expressionTypes.EXISTENCE,not:e,input:r}}createNamedExpression(e,r){return{type:at.types.EXPRESSION,expressionType:at.expressionTypes.NAMED,name:e,args:r}}createOperatorExpression(e,r){return{type:at.types.EXPRESSION,expressionType:at.expressionTypes.OPERATOR,operator:e,args:r}}createTermExpression(e){return{type:at.types.EXPRESSION,expressionType:at.expressionTypes.TERM,term:e}}createWildcardExpression(){return{type:at.types.EXPRESSION,expressionType:at.expressionTypes.WILDCARD,wildcard:new rQ.Wildcard}}createTerm(e){return(0,tQ.stringToTerm)(e,this.dataFactory)}createCompositeUpdate(e){return{type:at.types.COMPOSITE_UPDATE,updates:e}}createDeleteInsert(e,r,n){const a={type:at.types.DELETE_INSERT};return e&&(a.delete=e),r&&(a.insert=r),n&&(a.where=n),a}createLoad(e,r,n){const a={type:at.types.LOAD,source:e};return r&&(a.destination=r),this.addSilent(a,!!n)}createClear(e,r){return this.addSilent({type:at.types.CLEAR,source:e},!!r)}createCreate(e,r){return this.addSilent({type:at.types.CREATE,source:e},!!r)}createDrop(e,r){return this.addSilent({type:at.types.DROP,source:e},!!r)}createAdd(e,r,n){return this.addSilent({type:at.types.ADD,source:e,destination:r},!!n)}createMove(e,r,n){return this.addSilent({type:at.types.MOVE,source:e,destination:r},!!n)}createCopy(e,r,n){return this.addSilent({type:at.types.COPY,source:e,destination:r},!!n)}addSilent(e,r){return r&&(e.silent=r),e}flattenMulti(e,r){if(!r)return e;const n=e.type,a=e.input;let s=[];for(const o of a)o.type===n?s.push(...o.input):s.push(o);return e.input=s,e}}If.default=nQ;var S0={},iQ=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(S0,"__esModule",{value:!0});const Me=Rf,lP=iQ(If),aQ=hn;let sQ=class vi{static flatten(e){return Array.prototype.concat(...e).filter(r=>r)}static objectify(e){if(e.termType){if(e.termType==="Quad")return{type:"pattern",termType:"Quad",subject:vi.objectify(e.subject),predicate:vi.objectify(e.predicate),object:vi.objectify(e.object),graph:vi.objectify(e.graph)};{let r={termType:e.termType,value:e.value};return e.language&&(r.language=e.language),e.datatype&&(r.datatype=vi.objectify(e.datatype)),r}}if(Array.isArray(e))return e.map(r=>vi.objectify(r));if(e===Object(e)){let r={};for(let n of Object.keys(e))r[n]=vi.objectify(e[n]);return r}return e}static inScopeVariables(e){const r=[];function n(s){r.find(o=>s.value===o.value)||r.push(s)}function a(s){s.subject.termType==="Variable"&&n(s.subject),s.predicate.termType==="Variable"&&n(s.predicate),s.object.termType==="Variable"&&n(s.object),s.graph.termType==="Variable"&&n(s.graph),s.subject.termType==="Quad"&&a(s.subject),s.predicate.termType==="Quad"&&a(s.predicate),s.object.termType==="Quad"&&a(s.object),s.graph.termType==="Quad"&&a(s.graph)}return vi.recurseOperation(e,{[Me.types.EXPRESSION]:s=>(s.expressionType===Me.expressionTypes.AGGREGATE&&s.variable&&n(s.variable),!0),[Me.types.EXTEND]:s=>(n(s.variable),!0),[Me.types.GRAPH]:s=>(s.name.termType==="Variable"&&n(s.name),!0),[Me.types.GROUP]:s=>(s.variables.forEach(n),!0),[Me.types.PATH]:s=>(s.subject.termType==="Variable"&&n(s.subject),s.object.termType==="Variable"&&n(s.object),s.graph.termType==="Variable"&&n(s.graph),s.subject.termType==="Quad"&&a(s.subject),s.object.termType==="Quad"&&a(s.object),s.graph.termType==="Quad"&&a(s.graph),!0),[Me.types.PATTERN]:s=>(a(s),!0),[Me.types.PROJECT]:s=>(s.variables.forEach(n),!1),[Me.types.SERVICE]:s=>(s.name.termType==="Variable"&&n(s.name),!0),[Me.types.VALUES]:s=>(s.variables.forEach(n),!0)}),r}static recurseOperation(e,r){let n=e,a=!0;const s=r[e.type];if(s&&(a=s(e)),!a)return;let o=u=>vi.recurseOperation(u,r);switch(n.type){case Me.types.ALT:n.input.map(o);break;case Me.types.ASK:o(n.input);break;case Me.types.BGP:n.patterns.forEach(o);break;case Me.types.CONSTRUCT:o(n.input),n.template.map(o);break;case Me.types.DESCRIBE:o(n.input);break;case Me.types.DISTINCT:o(n.input);break;case Me.types.EXPRESSION:n.expressionType===Me.expressionTypes.EXISTENCE&&o(n.input);break;case Me.types.EXTEND:o(n.input),o(n.expression);break;case Me.types.FILTER:o(n.input),o(n.expression);break;case Me.types.FROM:o(n.input);break;case Me.types.GRAPH:o(n.input);break;case Me.types.GROUP:o(n.input),n.aggregates.forEach(o);break;case Me.types.INV:o(n.path);break;case Me.types.JOIN:n.input.map(o);break;case Me.types.LEFT_JOIN:n.input.map(o),n.expression&&o(n.expression);break;case Me.types.LINK:break;case Me.types.MINUS:n.input.map(o);break;case Me.types.NOP:break;case Me.types.NPS:break;case Me.types.ONE_OR_MORE_PATH:o(n.path);break;case Me.types.ORDER_BY:o(n.input),n.expressions.forEach(o);break;case Me.types.PATH:o(n.predicate);break;case Me.types.PATTERN:break;case Me.types.PROJECT:o(n.input);break;case Me.types.REDUCED:o(n.input);break;case Me.types.SEQ:n.input.map(o);break;case Me.types.SERVICE:o(n.input);break;case Me.types.SLICE:o(n.input);break;case Me.types.UNION:n.input.map(o);break;case Me.types.VALUES:break;case Me.types.ZERO_OR_MORE_PATH:o(n.path);break;case Me.types.ZERO_OR_ONE_PATH:o(n.path);break;case Me.types.COMPOSITE_UPDATE:n.updates.forEach(u=>o(u));break;case Me.types.DELETE_INSERT:n.delete&&n.delete.forEach(u=>o(u)),n.insert&&n.insert.forEach(u=>o(u)),n.where&&o(n.where);break;case Me.types.LOAD:break;case Me.types.CLEAR:break;case Me.types.CREATE:break;case Me.types.DROP:break;case Me.types.ADD:break;case Me.types.MOVE:break;case Me.types.COPY:break;default:throw new Error(`Unknown Operation type ${n.type}`)}}static mapOperation(e,r,n){let a=e,s=!0,o=!0;n=n||new lP.default;const u=r[e.type];if(u){const d=u(e,n);a=d.result,s=d.recurse,o=d.copyMetadata!==!1}let c;if(o&&(a.metadata||e.metadata)&&(c={...a.metadata,...e.metadata}),!s)return c&&(a.metadata=c),a;let l=d=>vi.mapOperation(d,r,n);switch(a.type){case Me.types.ALT:a=n.createAlt(a.input.map(l));break;case Me.types.ASK:a=n.createAsk(l(a.input));break;case Me.types.BGP:a=n.createBgp(a.patterns.map(l));break;case Me.types.CONSTRUCT:a=n.createConstruct(l(a.input),a.template.map(l));break;case Me.types.DESCRIBE:a=n.createDescribe(l(a.input),a.terms);break;case Me.types.DISTINCT:a=n.createDistinct(l(a.input));break;case Me.types.EXPRESSION:a=vi.mapExpression(a,r,n);break;case Me.types.EXTEND:a=n.createExtend(l(a.input),a.variable,l(a.expression));break;case Me.types.FILTER:a=n.createFilter(l(a.input),l(a.expression));break;case Me.types.FROM:a=n.createFrom(l(a.input),[...a.default],[...a.named]);break;case Me.types.GRAPH:a=n.createGraph(l(a.input),a.name);break;case Me.types.GROUP:a=n.createGroup(l(a.input),[].concat(a.variables),a.aggregates.map(l));break;case Me.types.INV:a=n.createInv(l(a.path));break;case Me.types.JOIN:a=n.createJoin(a.input.map(l));break;case Me.types.LEFT_JOIN:a=n.createLeftJoin(l(a.input[0]),l(a.input[1]),a.expression?l(a.expression):void 0);break;case Me.types.LINK:a=n.createLink(a.iri);break;case Me.types.MINUS:a=n.createMinus(l(a.input[0]),l(a.input[1]));break;case Me.types.NOP:a=n.createNop();break;case Me.types.NPS:a=n.createNps([].concat(a.iris));break;case Me.types.ONE_OR_MORE_PATH:a=n.createOneOrMorePath(l(a.path));break;case Me.types.ORDER_BY:a=n.createOrderBy(l(a.input),a.expressions.map(l));break;case Me.types.PATH:a=n.createPath(a.subject,l(a.predicate),a.object,a.graph);break;case Me.types.PATTERN:a=n.createPattern(a.subject,a.predicate,a.object,a.graph);break;case Me.types.PROJECT:a=n.createProject(l(a.input),[...a.variables]);break;case Me.types.REDUCED:a=n.createReduced(l(a.input));break;case Me.types.SEQ:a=n.createSeq(a.input.map(l));break;case Me.types.SERVICE:a=n.createService(l(a.input),a.name,a.silent);break;case Me.types.SLICE:a=n.createSlice(l(a.input),a.start,a.length);break;case Me.types.UNION:a=n.createUnion(a.input.map(l));break;case Me.types.VALUES:a=n.createValues([].concat(a.variables),a.bindings.map(d=>Object.assign({},d)));break;case Me.types.ZERO_OR_MORE_PATH:a=n.createZeroOrMorePath(l(a.path));break;case Me.types.ZERO_OR_ONE_PATH:a=n.createZeroOrOnePath(l(a.path));break;case Me.types.COMPOSITE_UPDATE:a=n.createCompositeUpdate(a.updates.map(l));break;case Me.types.DELETE_INSERT:a=n.createDeleteInsert(a.delete?a.delete.map(l):void 0,a.insert?a.insert.map(l):void 0,a.where?l(a.where):void 0);break;case Me.types.LOAD:a=n.createLoad(a.source,a.destination,a.silent);break;case Me.types.CLEAR:a=n.createClear(a.source,a.silent);break;case Me.types.CREATE:a=n.createCreate(a.source,a.silent);break;case Me.types.DROP:a=n.createDrop(a.source,a.silent);break;case Me.types.ADD:a=n.createAdd(a.source,a.destination);break;case Me.types.MOVE:a=n.createMove(a.source,a.destination);break;case Me.types.COPY:a=n.createCopy(a.source,a.destination);break;default:throw new Error(`Unknown Operation type ${a.type}`)}return c&&(a.metadata=c),a}static mapExpression(e,r,n){let a=e,s=!0;n=n||new lP.default;const o=r[e.expressionType];if(o&&({result:a,recurse:s}=o(e,n)),!s)return a;let u=c=>vi.mapOperation(c,r,n);switch(e.expressionType){case Me.expressionTypes.AGGREGATE:return e.variable?n.createBoundAggregate(e.variable,e.aggregator,u(e.expression),e.distinct,e.separator):n.createAggregateExpression(e.aggregator,u(e.expression),e.distinct,e.separator);case Me.expressionTypes.EXISTENCE:return n.createExistenceExpression(e.not,u(e.input));case Me.expressionTypes.NAMED:return n.createNamedExpression(e.name,e.args.map(u));case Me.expressionTypes.OPERATOR:return n.createOperatorExpression(e.operator,e.args.map(u));case Me.expressionTypes.TERM:return n.createTermExpression(e.term);case Me.expressionTypes.WILDCARD:return n.createWildcardExpression();default:throw new Error(`Unknown Expression type ${e.expressionType}`)}}static cloneOperation(e){return vi.mapOperation(e,{})}static cloneExpression(e){return vi.mapExpression(e,{})}static createUniqueVariable(e,r,n){let a=0,s=e;for(;r[s];)s=`${e}${a++}`;return n.variable(s)}static isSimpleTerm(e){return e.termType!==void 0&&e.termType!=="Quad"&&e.termType!=="Wildcard"}static isQuad(e){return e.termType==="Quad"}static hasQuadVariables(e){return(0,aQ.someTermsNested)(e,r=>r.termType==="Variable")}static isWildcard(e){return e.termType==="Wildcard"}};S0.default=sQ;var oQ=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uQ=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cQ=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&oQ(e,t,r);return uQ(e,t),e},Gj=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(VA,"__esModule",{value:!0});const lQ=Uk,dQ=sr,Kh=cQ(Rf),fQ=Gj(If),Ii=Gj(S0),hQ=w0.Parser,ni=Kh.types;let Yd=new Set,zj=0,Cb=!1,We;function pQ(t,e){e=e||{},We=new fQ.default(e.dataFactory);let r;if(yQ(t)){let n=new hQ(e);n._resetBlanks(),r=n.parse(t)}else r=t;return Wj(r,e.quads,e.blankToVariable)}VA.default=pQ;function Wj(t,e,r){if(Yd=new Set,zj=0,Cb=!!e,!t.type)return We.createNop();if(t.type!=="query"&&t.type!=="update")throw new Error("Translate only works on complete query or update objects.");let n;if(UE(t),t.type==="query"){const a={type:"group",patterns:t.where||[]};n=Uo(a),n=wQ(t,n)}else t.type==="update"&&(n=TQ(t));return r&&(n=Jj(n)),n}function yQ(t){return typeof t=="string"}function Xj(t){return!!(t!=null&&t.termType)}function bQ(t){return t.subject&&t.predicate&&t.object}function Pp(t){return(t==null?void 0:t.termType)==="Variable"}function UE(t){if(Xj(t))Pp(t)&&Yd.add(`?${t.value}`);else if(Array.isArray(t))for(const e of t)UE(e);else if(t&&typeof t=="object")for(let e of Object.keys(t))e.startsWith("?")&&Yd.add(e),UE(t[e])}function Ln(t){let e={};if(bQ(t)){const r=[Ln(t.subject),Ln(t.predicate),Ln(t.object),t.graph?Ln(t.graph):{}];Object.assign(e,...r)}else if(Xj(t))Pp(t)&&(e[t.value]=t);else if(t.type==="bgp"){const r=t.triples;Object.assign(e,...r.map(Ln))}else if(t.type==="path")Object.assign(e,...t.items.map(Ln));else if(t.type==="group"||t.type==="union"||t.type==="optional")Object.assign(e,...t.patterns.map(Ln));else if(t.type==="service"||t.type==="graph")Object.assign(e,Ln(t.name)),Object.assign(e,...t.patterns.map(Ln));else if(t.type==="bind")Object.assign(e,Ln(t.variable));else if(t.type==="values"){if(t.values.length>0){const r=Object.keys(t.values[0]).map(n=>We.createTerm(n));Object.assign(e,...r.map(Ln))}}else if(t.type==="query"&&(t.queryType==="SELECT"||t.queryType==="DESCRIBE")){t.where&&t.variables.some(Ii.default.isWildcard)&&Object.assign(e,...t.where.map(Ln));for(const r of t.variables)Pp(r)?Object.assign(e,Ln(r)):r.variable&&Object.assign(e,Ln(r.variable));if(t.queryType==="SELECT"){if(t.group)for(const r of t.group)r.variable&&Object.assign(e,Ln(r.variable));if(t.values){const r={type:"values",values:t.values};Object.assign(e,Ln(r))}}}return e}function Uo(t){if(t.type==="bgp")return mQ(t);if(t.type==="union")return We.createUnion(t.patterns.map(e=>(e.type!=="group"&&(e={type:"group",patterns:[e]}),Uo(e))));if(t.type==="graph"){const e={type:"group",patterns:t.patterns};let r=Uo(e);return Cb?r=Hc(r,t.name):r=We.createGraph(r,t.name),r}if(t.type==="values")return Kj(t);if(t.type==="query")return Wj(t,Cb,!1);if(t.type==="group"){let e=[],r=[];for(let s of t.patterns)(s.type==="filter"?e:r).push(s);let n=r.reduce(vQ,We.createBgp([])),a=e.map(s=>aa(s.expression));return a.length>0&&(n=We.createFilter(n,a.reduce((s,o)=>We.createOperatorExpression("&&",[s,o])))),n}throw new Error(`Unexpected type: ${t.type}`)}function aa(t){if(Ii.default.isSimpleTerm(t))return We.createTermExpression(t);if(Ii.default.isQuad(t))return Ii.default.hasQuadVariables(t)?We.createOperatorExpression("triple",[aa(t.subject),aa(t.predicate),aa(t.object)]):We.createTermExpression(t);if(Ii.default.isWildcard(t))return We.createWildcardExpression();if("aggregation"in t)return We.createAggregateExpression(t.aggregation,aa(t.expression),!!t.distinct,t.separator);if("function"in t)return We.createNamedExpression(t.function,t.args.map(aa));if("operator"in t)return t.operator==="exists"||t.operator==="notexists"?We.createExistenceExpression(t.operator==="notexists",Uo(t.args[0])):((t.operator==="in"||t.operator==="notin")&&(t.args=[t.args[0]].concat(t.args[1])),We.createOperatorExpression(t.operator,t.args.map(aa)));throw new Error(`Unknown expression: ${JSON.stringify(t)}`)}function mQ(t){let e=[],r=[];for(let n of t.triples)if("pathType"in n.predicate){let a=gQ(n);for(let s of a)s.type===ni.PATH?(e.length>0&&r.push(We.createBgp(e)),e=[],r.push(s)):e.push(s)}else e.push(kA(n));return e.length>0&&r.push(We.createBgp(e)),r.length===1?r[0]:We.createJoin(r)}function gQ(t){let e=t.subject,r=jc(t.predicate),n=t.object;return qE(e,r,n)}function jc(t){if(Ii.default.isSimpleTerm(t)){if(t.termType==="NamedNode")return We.createLink(t);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(t)}`)}if(t.pathType==="^")return We.createInv(jc(t.items[0]));if(t.pathType==="!"){let e=[],r=[],n;"pathType"in t.items[0]&&t.items[0].pathType==="|"?n=t.items[0].items:n=t.items;for(let o of n)if(Ii.default.isSimpleTerm(o))e.push(o);else if(o.pathType==="^")r.push(o.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(o)}`);let a=We.createNps(e),s=We.createInv(We.createNps(r));return r.length===0?a:e.length===0?s:We.createAlt([a,s])}if(t.pathType==="/")return We.createSeq(t.items.map(jc));if(t.pathType==="|")return We.createAlt(t.items.map(jc));if(t.pathType==="*")return We.createZeroOrMorePath(jc(t.items[0]));if(t.pathType==="+")return We.createOneOrMorePath(jc(t.items[0]));if(t.pathType==="?")return We.createZeroOrOnePath(jc(t.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(t)}`)}function qE(t,e,r){if(e.type===ni.LINK)return[We.createPattern(t,e.iri,r)];if(e.type===ni.INV)return qE(r,e.path,t);if(e.type===ni.SEQ){let n=t;return Ii.default.flatten(e.input.map((a,s)=>{const o=s===e.input.length-1?r:Zd(),u=qE(n,a,o);return o.termType==="Variable"&&(n=o),u}))}return[We.createPath(t,e,r)]}function Zd(){let t=`?var${zj++}`;return Yd.has(t)?Zd():(Yd.add(t),We.createTerm(t))}function kA(t){if("pathType"in t.predicate)throw new Error("Trying to translate property path to quad.");return We.createPattern(t.subject,t.predicate,t.object,t.graph)}let _Q=Object.values(ni);function Hc(t,e,r){if(t.type===ni.GRAPH){if(r)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");t=Hc(t.input,t.name)}else if(t.type!==ni.SERVICE)if(t.type===ni.BGP)t.patterns=t.patterns.map(n=>(r&&(n.subject.equals(e)&&(n.subject=r),n.predicate.equals(e)&&(n.predicate=r),n.object.equals(e)&&(n.object=r)),n.graph.termType==="DefaultGraph"&&(n.graph=e),n));else if(t.type===ni.PATH)r&&(t.subject.equals(e)&&(t.subject=r),t.object.equals(e)&&(t.object=r)),t.graph.termType==="DefaultGraph"&&(t.graph=e);else if(t.type===ni.PROJECT&&!r)t.variables.some(n=>n.equals(e))||(r=Zd()),t.input=Hc(t.input,e,r);else if(t.type===ni.EXTEND&&!r)t.variable.equals(e)&&(r=Zd()),t.input=Hc(t.input,e,r);else for(let n of Object.keys(t))Array.isArray(t[n])?t[n]=t[n].map(a=>Hc(a,e,r)):_Q.indexOf(t[n].type)>=0?t[n]=Hc(t[n],e,r):r&&Pp(t[n])&&t[n].equals(e)&&(t[n]=r);return t}function vQ(t,e){if(e.type==="optional"){const r=Uo({type:"group",patterns:e.patterns});r.type===ni.FILTER?t=We.createLeftJoin(t,r.input,r.expression):t=We.createLeftJoin(t,r)}else if(e.type==="minus"){const r=Uo({type:"group",patterns:e.patterns});t=We.createMinus(t,r)}else if(e.type==="bind")t=We.createExtend(t,e.variable,aa(e.expression));else if(e.type==="service"){const r={type:"group",patterns:e.patterns},n=We.createService(Uo(r),e.name,e.silent);t=dP(t,n)}else{const r=Uo(e);t=dP(t,r)}return t}function dP(t,e){return t.type===ni.BGP&&e.type===ni.BGP?t=We.createBgp([...t.patterns,...e.patterns]):t.type===ni.BGP&&t.patterns.length===0?t=e:e.type===ni.BGP&&e.patterns.length===0||(t=We.createJoin([t,e])),t}function Kj(t){let e=(t.values.length===0?[]:Object.keys(t.values[0])).map(We.createTerm.bind(We)),r=t.values.map(n=>{let a=Object.keys(n);a=a.filter(o=>n[o]!==void 0);let s={};for(let o of a)s[o]=n[o];return s});return We.createValues(e,r)}function wQ(t,e){const r=t,n=[],a={};if(r.variables=r.variables&&r.variables.map(o=>cp(o,a)),r.having=r.having&&r.having.map(o=>cp(o,a)),r.order=r.order&&r.order.map(o=>cp(o,a)),r.group||Object.keys(a).length>0){const o=Object.keys(a).map(c=>SQ(a[c],We.createTerm(c))),u=[];if(r.group)for(const c of r.group)if(Ii.default.isSimpleTerm(c.expression))u.push(c.expression);else{const l="variable"in c?c.variable:Zd();e=We.createExtend(e,l,aa(c.expression)),u.push(l)}e=We.createGroup(e,u,o)}if(r.having)for(let o of r.having)e=We.createFilter(e,aa(o));t.values&&(e=We.createJoin([e,Kj(t)]));let s=[];if(t.queryType==="SELECT"||t.queryType==="DESCRIBE")if(t.variables.some(o=>o&&Ii.default.isWildcard(o)))s=Object.values(Ln(t)).sort((o,u)=>o.value.localeCompare(u.value));else for(let o of t.variables)Pp(o)||!("variable"in o)?s.push(o):o.variable&&(s.push(o.variable),n.push(o));for(let o of n)e=We.createExtend(e,o.variable,aa(o.expression));return r.order&&(e=We.createOrderBy(e,r.order.map(o=>{let u=aa(o.expression);return o.descending&&(u=We.createOperatorExpression("desc",[u])),u}))),t.queryType==="SELECT"&&(e=We.createProject(e,s)),r.distinct&&(e=We.createDistinct(e)),r.reduced&&(e=We.createReduced(e)),t.queryType==="CONSTRUCT"?e=We.createConstruct(e,(t.template||[]).map(kA)):t.queryType==="ASK"?e=We.createAsk(e):t.queryType==="DESCRIBE"&&(e=We.createDescribe(e,s)),(r.offset||r.limit)&&(e=We.createSlice(e,r.offset||0,r.limit)),r.from&&(e=We.createFrom(e,r.from.default,r.from.named)),e}function cp(t,e){if("type"in t&&t.type==="aggregate"){let r=!1,n;for(let a of Object.keys(e))if(lQ(e[a],t)){n=We.createTerm(a),r=!0;break}return r||(n=Zd(),e[(0,dQ.termToString)(n)]=t),n}return"expression"in t&&t.expression?{...t,expression:cp(t.expression,e)}:"args"in t&&t.args?{...t,args:t.args.map(r=>cp(r,e))}:t}function SQ(t,e){if(t.type!=="aggregate"||!t.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(t)}`);const r=aa(t);return r.variable=e,r}function TQ(t){return t.updates.length===1?fP(t.updates[0]):We.createCompositeUpdate(t.updates.map(fP))}function fP(t){if("type"in t){if(t.type==="load")return AQ(t);if(t.type==="clear"||t.type==="create"||t.type==="drop")return OQ(t);if(t.type==="add"||t.type==="copy"||t.type==="move")return xQ(t)}else if(t.updateType==="insertdelete"||t.updateType==="deletewhere"||t.updateType==="delete"||t.updateType==="insert")return EQ(t);throw new Error(`Unknown update type ${JSON.stringify(t)}`)}function EQ(t){if(!Cb)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let e=[],r=[],n;if(t.delete&&(e=Ii.default.flatten(t.delete.map(a=>hP(a,t.graph)))),t.insert&&(r=Ii.default.flatten(t.insert.map(a=>hP(a,t.graph)))),t.where&&t.where.length>0){n=Uo({type:"group",patterns:t.where});const a=t.using;a?n=We.createFrom(n,a.default,a.named):t.graph&&(n=Hc(n,t.graph))}else t.updateType==="deletewhere"&&e.length>0&&(n=We.createBgp(e));return We.createDeleteInsert(e.length>0?e:void 0,r.length>0?r:void 0,n)}function hP(t,e){let r=e;t.type==="graph"&&(r=t.name);let n=t.triples;return r&&(n=n.map(a=>Object.assign(a,{graph:r}))),n.map(kA)}function OQ(t){let e;switch(Ii.default.isSimpleTerm(t.graph)?e=t.graph:t.graph.all?e="ALL":t.graph.default?e="DEFAULT":t.graph.named?e="NAMED":e=t.graph.name,t.type){case"clear":return We.createClear(e,t.silent);case"create":return We.createCreate(e,t.silent);case"drop":return We.createDrop(e,t.silent)}}function AQ(t){return We.createLoad(t.source,t.destination,t.silent)}function xQ(t){const e=t.source.default?"DEFAULT":t.source.name,r=t.destination.default?"DEFAULT":t.destination.name;switch(t.type){case"copy":return We.createCopy(e,r,t.silent);case"move":return We.createMove(e,r,t.silent);case"add":return We.createAdd(e,r,t.silent)}}function Jj(t){const e={},r=Array.from(Yd).reduce((a,s)=>(a[s]=!0,a),{});return Ii.default.mapOperation(t,{[Kh.types.DELETE_INSERT]:a=>({result:a,recurse:!1}),[Kh.types.PATH]:(a,s)=>({result:s.createPath(n(a.subject),a.predicate,n(a.object),n(a.graph)),recurse:!1}),[Kh.types.PATTERN]:(a,s)=>({result:s.createPattern(n(a.subject),n(a.predicate),n(a.object),n(a.graph)),recurse:!1}),[Kh.types.CONSTRUCT]:a=>({result:We.createConstruct(Jj(a.input),a.template),recurse:!1})});function n(a){if(a.termType==="BlankNode"){let s=e[a.value];return s||(s=Ii.default.createUniqueVariable(a.value,r,We.dataFactory),r[s.value]=!0,e[a.value]=s),s}return a}}var ef={},Yj={},Bt={},zm={},Ut={},T0=Zj;function Zj(t,e){if(!t)throw new Error(e||"Assertion failed")}Zj.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var VE={exports:{}};typeof Object.create=="function"?VE.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:VE.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var RQ=VE.exports,IQ=T0,PQ=RQ;Ut.inherits=PQ;function DQ(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function NQ(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),a=0;a<t.length;a+=2)r.push(parseInt(t[a]+t[a+1],16))}else for(var n=0,a=0;a<t.length;a++){var s=t.charCodeAt(a);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):DQ(t,a)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++a)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(a=0;a<t.length;a++)r[a]=t[a]|0;return r}Ut.toArray=NQ;function jQ(t){for(var e="",r=0;r<t.length;r++)e+=tC(t[r].toString(16));return e}Ut.toHex=jQ;function eC(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Ut.htonl=eC;function CQ(t,e){for(var r="",n=0;n<t.length;n++){var a=t[n];e==="little"&&(a=eC(a)),r+=rC(a.toString(16))}return r}Ut.toHex32=CQ;function tC(t){return t.length===1?"0"+t:t}Ut.zero2=tC;function rC(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Ut.zero8=rC;function FQ(t,e,r,n){var a=r-e;IQ(a%4===0);for(var s=new Array(a/4),o=0,u=e;o<s.length;o++,u+=4){var c;n==="big"?c=t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:c=t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],s[o]=c>>>0}return s}Ut.join32=FQ;function MQ(t,e){for(var r=new Array(t.length*4),n=0,a=0;n<t.length;n++,a+=4){var s=t[n];e==="big"?(r[a]=s>>>24,r[a+1]=s>>>16&255,r[a+2]=s>>>8&255,r[a+3]=s&255):(r[a+3]=s>>>24,r[a+2]=s>>>16&255,r[a+1]=s>>>8&255,r[a]=s&255)}return r}Ut.split32=MQ;function LQ(t,e){return t>>>e|t<<32-e}Ut.rotr32=LQ;function BQ(t,e){return t<<e|t>>>32-e}Ut.rotl32=BQ;function $Q(t,e){return t+e>>>0}Ut.sum32=$Q;function UQ(t,e,r){return t+e+r>>>0}Ut.sum32_3=UQ;function qQ(t,e,r,n){return t+e+r+n>>>0}Ut.sum32_4=qQ;function VQ(t,e,r,n,a){return t+e+r+n+a>>>0}Ut.sum32_5=VQ;function HQ(t,e,r,n){var a=t[e],s=t[e+1],o=n+s>>>0,u=(o<n?1:0)+r+a;t[e]=u>>>0,t[e+1]=o}Ut.sum64=HQ;function kQ(t,e,r,n){var a=e+n>>>0,s=(a<e?1:0)+t+r;return s>>>0}Ut.sum64_hi=kQ;function QQ(t,e,r,n){var a=e+n;return a>>>0}Ut.sum64_lo=QQ;function GQ(t,e,r,n,a,s,o,u){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+u>>>0,c+=l<u?1:0;var d=t+r+a+o+c;return d>>>0}Ut.sum64_4_hi=GQ;function zQ(t,e,r,n,a,s,o,u){var c=e+n+s+u;return c>>>0}Ut.sum64_4_lo=zQ;function WQ(t,e,r,n,a,s,o,u,c,l){var d=0,h=e;h=h+n>>>0,d+=h<e?1:0,h=h+s>>>0,d+=h<s?1:0,h=h+u>>>0,d+=h<u?1:0,h=h+l>>>0,d+=h<l?1:0;var f=t+r+a+o+c+d;return f>>>0}Ut.sum64_5_hi=WQ;function XQ(t,e,r,n,a,s,o,u,c,l){var d=e+n+s+u+l;return d>>>0}Ut.sum64_5_lo=XQ;function KQ(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Ut.rotr64_hi=KQ;function JQ(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ut.rotr64_lo=JQ;function YQ(t,e,r){return t>>>r}Ut.shr64_hi=YQ;function ZQ(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ut.shr64_lo=ZQ;var Pf={},pP=Ut,eG=T0;function Wm(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Pf.BlockHash=Wm;Wm.prototype.update=function(e,r){if(e=pP.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=pP.join32(e,0,e.length-n,this.endian);for(var a=0;a<e.length;a+=this._delta32)this._update(e,a,a+this._delta32)}return this};Wm.prototype.digest=function(e){return this.update(this._pad()),eG(this.pending===null),this._digest(e)};Wm.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,a=new Array(n+this.padLength);a[0]=128;for(var s=1;s<n;s++)a[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)a[s++]=0;a[s++]=0,a[s++]=0,a[s++]=0,a[s++]=0,a[s++]=e>>>24&255,a[s++]=e>>>16&255,a[s++]=e>>>8&255,a[s++]=e&255}else for(a[s++]=e&255,a[s++]=e>>>8&255,a[s++]=e>>>16&255,a[s++]=e>>>24&255,a[s++]=0,a[s++]=0,a[s++]=0,a[s++]=0,o=8;o<this.padLength;o++)a[s++]=0;return a};var Df={},io={},tG=Ut,qs=tG.rotr32;function rG(t,e,r,n){if(t===0)return nC(e,r,n);if(t===1||t===3)return aC(e,r,n);if(t===2)return iC(e,r,n)}io.ft_1=rG;function nC(t,e,r){return t&e^~t&r}io.ch32=nC;function iC(t,e,r){return t&e^t&r^e&r}io.maj32=iC;function aC(t,e,r){return t^e^r}io.p32=aC;function nG(t){return qs(t,2)^qs(t,13)^qs(t,22)}io.s0_256=nG;function iG(t){return qs(t,6)^qs(t,11)^qs(t,25)}io.s1_256=iG;function aG(t){return qs(t,7)^qs(t,18)^t>>>3}io.g0_256=aG;function sG(t){return qs(t,17)^qs(t,19)^t>>>10}io.g1_256=sG;var tf=Ut,oG=Pf,uG=io,NS=tf.rotl32,eh=tf.sum32,cG=tf.sum32_5,lG=uG.ft_1,sC=oG.BlockHash,dG=[1518500249,1859775393,2400959708,3395469782];function Js(){if(!(this instanceof Js))return new Js;sC.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}tf.inherits(Js,sC);var fG=Js;Js.blockSize=512;Js.outSize=160;Js.hmacStrength=80;Js.padLength=64;Js.prototype._update=function(e,r){for(var n=this.W,a=0;a<16;a++)n[a]=e[r+a];for(;a<n.length;a++)n[a]=NS(n[a-3]^n[a-8]^n[a-14]^n[a-16],1);var s=this.h[0],o=this.h[1],u=this.h[2],c=this.h[3],l=this.h[4];for(a=0;a<n.length;a++){var d=~~(a/20),h=cG(NS(s,5),lG(d,o,u,c),l,n[a],dG[d]);l=c,c=u,u=NS(o,30),o=s,s=h}this.h[0]=eh(this.h[0],s),this.h[1]=eh(this.h[1],o),this.h[2]=eh(this.h[2],u),this.h[3]=eh(this.h[3],c),this.h[4]=eh(this.h[4],l)};Js.prototype._digest=function(e){return e==="hex"?tf.toHex32(this.h,"big"):tf.split32(this.h,"big")};var rf=Ut,hG=Pf,Nf=io,pG=T0,Ua=rf.sum32,yG=rf.sum32_4,bG=rf.sum32_5,mG=Nf.ch32,gG=Nf.maj32,_G=Nf.s0_256,vG=Nf.s1_256,wG=Nf.g0_256,SG=Nf.g1_256,oC=hG.BlockHash,TG=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ys(){if(!(this instanceof Ys))return new Ys;oC.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=TG,this.W=new Array(64)}rf.inherits(Ys,oC);var uC=Ys;Ys.blockSize=512;Ys.outSize=256;Ys.hmacStrength=192;Ys.padLength=64;Ys.prototype._update=function(e,r){for(var n=this.W,a=0;a<16;a++)n[a]=e[r+a];for(;a<n.length;a++)n[a]=yG(SG(n[a-2]),n[a-7],wG(n[a-15]),n[a-16]);var s=this.h[0],o=this.h[1],u=this.h[2],c=this.h[3],l=this.h[4],d=this.h[5],h=this.h[6],f=this.h[7];for(pG(this.k.length===n.length),a=0;a<n.length;a++){var p=bG(f,vG(l),mG(l,d,h),this.k[a],n[a]),b=Ua(_G(s),gG(s,o,u));f=h,h=d,d=l,l=Ua(c,p),c=u,u=o,o=s,s=Ua(p,b)}this.h[0]=Ua(this.h[0],s),this.h[1]=Ua(this.h[1],o),this.h[2]=Ua(this.h[2],u),this.h[3]=Ua(this.h[3],c),this.h[4]=Ua(this.h[4],l),this.h[5]=Ua(this.h[5],d),this.h[6]=Ua(this.h[6],h),this.h[7]=Ua(this.h[7],f)};Ys.prototype._digest=function(e){return e==="hex"?rf.toHex32(this.h,"big"):rf.split32(this.h,"big")};var HE=Ut,cC=uC;function Xo(){if(!(this instanceof Xo))return new Xo;cC.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}HE.inherits(Xo,cC);var EG=Xo;Xo.blockSize=512;Xo.outSize=224;Xo.hmacStrength=192;Xo.padLength=64;Xo.prototype._digest=function(e){return e==="hex"?HE.toHex32(this.h.slice(0,7),"big"):HE.split32(this.h.slice(0,7),"big")};var Wi=Ut,OG=Pf,AG=T0,Vs=Wi.rotr64_hi,Hs=Wi.rotr64_lo,lC=Wi.shr64_hi,dC=Wi.shr64_lo,hu=Wi.sum64,jS=Wi.sum64_hi,CS=Wi.sum64_lo,xG=Wi.sum64_4_hi,RG=Wi.sum64_4_lo,IG=Wi.sum64_5_hi,PG=Wi.sum64_5_lo,fC=OG.BlockHash,DG=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function hs(){if(!(this instanceof hs))return new hs;fC.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=DG,this.W=new Array(160)}Wi.inherits(hs,fC);var hC=hs;hs.blockSize=1024;hs.outSize=512;hs.hmacStrength=192;hs.padLength=128;hs.prototype._prepareBlock=function(e,r){for(var n=this.W,a=0;a<32;a++)n[a]=e[r+a];for(;a<n.length;a+=2){var s=VG(n[a-4],n[a-3]),o=HG(n[a-4],n[a-3]),u=n[a-14],c=n[a-13],l=UG(n[a-30],n[a-29]),d=qG(n[a-30],n[a-29]),h=n[a-32],f=n[a-31];n[a]=xG(s,o,u,c,l,d,h,f),n[a+1]=RG(s,o,u,c,l,d,h,f)}};hs.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,a=this.h[0],s=this.h[1],o=this.h[2],u=this.h[3],c=this.h[4],l=this.h[5],d=this.h[6],h=this.h[7],f=this.h[8],p=this.h[9],b=this.h[10],y=this.h[11],S=this.h[12],w=this.h[13],I=this.h[14],O=this.h[15];AG(this.k.length===n.length);for(var T=0;T<n.length;T+=2){var x=I,P=O,B=BG(f,p),Q=$G(f,p),N=NG(f,p,b,y,S),D=jG(f,p,b,y,S,w),F=this.k[T],W=this.k[T+1],z=n[T],M=n[T+1],C=IG(x,P,B,Q,N,D,F,W,z,M),V=PG(x,P,B,Q,N,D,F,W,z,M);x=MG(a,s),P=LG(a,s),B=CG(a,s,o,u,c),Q=FG(a,s,o,u,c,l);var ie=jS(x,P,B,Q),ne=CS(x,P,B,Q);I=S,O=w,S=b,w=y,b=f,y=p,f=jS(d,h,C,V),p=CS(h,h,C,V),d=c,h=l,c=o,l=u,o=a,u=s,a=jS(C,V,ie,ne),s=CS(C,V,ie,ne)}hu(this.h,0,a,s),hu(this.h,2,o,u),hu(this.h,4,c,l),hu(this.h,6,d,h),hu(this.h,8,f,p),hu(this.h,10,b,y),hu(this.h,12,S,w),hu(this.h,14,I,O)};hs.prototype._digest=function(e){return e==="hex"?Wi.toHex32(this.h,"big"):Wi.split32(this.h,"big")};function NG(t,e,r,n,a){var s=t&r^~t&a;return s<0&&(s+=4294967296),s}function jG(t,e,r,n,a,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function CG(t,e,r,n,a){var s=t&r^t&a^r&a;return s<0&&(s+=4294967296),s}function FG(t,e,r,n,a,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function MG(t,e){var r=Vs(t,e,28),n=Vs(e,t,2),a=Vs(e,t,7),s=r^n^a;return s<0&&(s+=4294967296),s}function LG(t,e){var r=Hs(t,e,28),n=Hs(e,t,2),a=Hs(e,t,7),s=r^n^a;return s<0&&(s+=4294967296),s}function BG(t,e){var r=Vs(t,e,14),n=Vs(t,e,18),a=Vs(e,t,9),s=r^n^a;return s<0&&(s+=4294967296),s}function $G(t,e){var r=Hs(t,e,14),n=Hs(t,e,18),a=Hs(e,t,9),s=r^n^a;return s<0&&(s+=4294967296),s}function UG(t,e){var r=Vs(t,e,1),n=Vs(t,e,8),a=lC(t,e,7),s=r^n^a;return s<0&&(s+=4294967296),s}function qG(t,e){var r=Hs(t,e,1),n=Hs(t,e,8),a=dC(t,e,7),s=r^n^a;return s<0&&(s+=4294967296),s}function VG(t,e){var r=Vs(t,e,19),n=Vs(e,t,29),a=lC(t,e,6),s=r^n^a;return s<0&&(s+=4294967296),s}function HG(t,e){var r=Hs(t,e,19),n=Hs(e,t,29),a=dC(t,e,6),s=r^n^a;return s<0&&(s+=4294967296),s}var kE=Ut,pC=hC;function Ko(){if(!(this instanceof Ko))return new Ko;pC.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}kE.inherits(Ko,pC);var kG=Ko;Ko.blockSize=1024;Ko.outSize=384;Ko.hmacStrength=192;Ko.padLength=128;Ko.prototype._digest=function(e){return e==="hex"?kE.toHex32(this.h.slice(0,12),"big"):kE.split32(this.h.slice(0,12),"big")};Df.sha1=fG;Df.sha224=EG;Df.sha256=uC;Df.sha384=kG;Df.sha512=hC;var yC={},ll=Ut,QG=Pf,Xy=ll.rotl32,yP=ll.sum32,th=ll.sum32_3,bP=ll.sum32_4,bC=QG.BlockHash;function Zs(){if(!(this instanceof Zs))return new Zs;bC.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}ll.inherits(Zs,bC);yC.ripemd160=Zs;Zs.blockSize=512;Zs.outSize=160;Zs.hmacStrength=192;Zs.padLength=64;Zs.prototype._update=function(e,r){for(var n=this.h[0],a=this.h[1],s=this.h[2],o=this.h[3],u=this.h[4],c=n,l=a,d=s,h=o,f=u,p=0;p<80;p++){var b=yP(Xy(bP(n,mP(p,a,s,o),e[WG[p]+r],GG(p)),KG[p]),u);n=u,u=o,o=Xy(s,10),s=a,a=b,b=yP(Xy(bP(c,mP(79-p,l,d,h),e[XG[p]+r],zG(p)),JG[p]),f),c=f,f=h,h=Xy(d,10),d=l,l=b}b=th(this.h[1],s,h),this.h[1]=th(this.h[2],o,f),this.h[2]=th(this.h[3],u,c),this.h[3]=th(this.h[4],n,l),this.h[4]=th(this.h[0],a,d),this.h[0]=b};Zs.prototype._digest=function(e){return e==="hex"?ll.toHex32(this.h,"little"):ll.split32(this.h,"little")};function mP(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function GG(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function zG(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var WG=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],XG=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],KG=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],JG=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],YG=Ut,ZG=T0;function nf(t,e,r){if(!(this instanceof nf))return new nf(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(YG.toArray(e,r))}var ez=nf;nf.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),ZG(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};nf.prototype.update=function(e,r){return this.inner.update(e,r),this};nf.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Ut,e.common=Pf,e.sha=Df,e.ripemd=yC,e.hmac=ez,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(zm);Object.defineProperty(Bt,"__esModule",{value:!0});Bt.isTermGrounded=Bt.termToSignature=Bt.quadToSignature=Bt.sha1hex=Bt.hashTerm=Bt.hashTerms=Bt.getGraphBlankNodes=Bt.uniqGraph=Bt.deindexGraph=Bt.indexGraph=Bt.getQuadsWithoutBlankNodes=Bt.getQuadsWithBlankNodes=Bt.hasValue=Bt.hashValues=Bt.getBijectionInner=Bt.getBijection=Bt.isomorphic=void 0;const tz=zm,as=sr,ks=hn;function rz(t,e){return!!mC(t,e)}Bt.isomorphic=rz;function mC(t,e){const r=Fb(GE(t)),n=Fb(GE(e));if(Object.keys(r).length!==Object.keys(n).length)return null;for(const c in r)if(r[c]!==n[c])return null;const a=zE(QE(t)),s=zE(QE(e)),o=WE(t),u=WE(e);return QA(a,s,o,u)}Bt.getBijection=mC;function QA(t,e,r,n,a,s){a||(a={}),s||(s={});const[o,u]=XE(t,r,a),[c,l]=XE(e,n,s);if(Object.keys(o).length!==Object.keys(c).length)return null;for(const h in o)if(!_C(c,o[h]))return null;let d={};for(const h of r){const f=as.termToString(h),p=u[f];for(const b in l)if(l[b]===p){d[f]=b,delete l[b];break}}if(!gP(Object.keys(d).sort(),r.map(as.termToString).sort())||!gP(gC(d).sort(),n.map(as.termToString).sort())){d=null;for(const h of r){const f=as.termToString(h);if(!o[f])for(const p of n){const b=as.termToString(p);if(!c[b]&&u[f]===l[b]){const y=GA(f);d=QA(t,e,r,n,Object.assign(Object.assign({},o),{[f]:y}),Object.assign(Object.assign({},c),{[b]:y}))}}}}return d}Bt.getBijectionInner=QA;function gP(t,e){if(t.length!==e.length)return!1;for(let r=t.length;r--;)if(t[r]!==e[r])return!1;return!0}function gC(t){const e=[];for(const r in t)e.push(t[r]);return e}Bt.hashValues=gC;function _C(t,e){for(const r in t)if(t[r]===e)return!0;return!1}Bt.hasValue=_C;function QE(t){return t.filter(e=>ks.someTerms(e,r=>r.termType==="BlankNode"||r.termType==="Quad"&&ks.getTermsNested(r).some(n=>n.termType==="BlankNode")))}Bt.getQuadsWithBlankNodes=QE;function GE(t){return t.filter(e=>ks.everyTerms(e,r=>r.termType!=="BlankNode"&&!(r.termType==="Quad"&&ks.getTermsNested(r).some(n=>n.termType==="BlankNode"))))}Bt.getQuadsWithoutBlankNodes=GE;function Fb(t){const e={};for(const r of t)e[JSON.stringify(as.quadToStringQuad(r))]=!0;return e}Bt.indexGraph=Fb;function vC(t){return Object.keys(t).map(e=>as.stringQuadToQuad(JSON.parse(e)))}Bt.deindexGraph=vC;function zE(t){return vC(Fb(t))}Bt.uniqGraph=zE;function WE(t){return ks.uniqTerms(t.map(e=>ks.getBlankNodes(ks.getTermsNested(e))).reduce((e,r)=>e.concat(r),[]))}Bt.getGraphBlankNodes=WE;function XE(t,e,r){const n=Object.assign({},r),a={};let s=!0;for(;s;){const o=Object.keys(n).length;for(const c of e){const l=as.termToString(c);if(!n[l]){const[d,h]=wC(c,t,n);d&&(n[l]=h),a[l]=h}}const u={};for(const c in a){const l=a[c];u[l]===void 0?u[l]=c:u[l]=!1}for(const c in u){const l=u[c];l&&(n[l]=c)}s=o!==Object.keys(n).length}return[n,a]}Bt.hashTerms=XE;function wC(t,e,r){const n=[];let a=!0;for(const o of e){const u=ks.getTermsNested(o);if(u.some(c=>c.equals(t))){n.push(zA(o,r,t));for(const c of u)!WA(c,r)&&!c.equals(t)&&(a=!1)}}const s=GA(n.sort().join(""));return[a,s]}Bt.hashTerm=wC;function GA(t){return tz.sha1().update(t).digest("hex")}Bt.sha1hex=GA;function zA(t,e,r){return ks.getTerms(t).map(n=>SC(n,e,r)).join("|")}Bt.quadToSignature=zA;function SC(t,e,r){return t.equals(r)?"@self":t.termType==="BlankNode"?e[as.termToString(t)]||"@blank":t.termType==="Quad"?`<${zA(t,e,r)}>`:as.termToString(t)}Bt.termToSignature=SC;function WA(t,e){return t.termType!=="BlankNode"&&!(t.termType==="Quad"&&ks.getTermsNested(t).some(r=>!WA(r,e)))||!!e[as.termToString(t)]}Bt.isTermGrounded=WA;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Bt,t)})(Yj);var nz=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iz=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),az=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nz(e,t,r);return iz(e,t),e},TC=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ef,"__esModule",{value:!0});ef.toSparqlJs=ef.toSparql=void 0;const sz=Yj,oz=sr,EC=w0,OC=az(Rf),uz=TC(If),Xi=TC(S0),nt=OC.types,Wl=OC.expressionTypes;let kr;const Kc=new uz.default;function cz(t,e={}){return new EC.Generator(e).stringify(AC(t))}ef.toSparql=cz;function AC(t){xC(),t=Zz(t);let e=qr(t);return e.type==="group"?e.patterns[0]:e}ef.toSparqlJs=AC;function xC(){kr={project:!1,extend:[],group:[],aggregates:[],order:[]}}function qr(t){switch(t.type!==nt.EXTEND&&t.type!==nt.ORDER_BY&&t.type!==nt.GRAPH&&(kr.project=!1),t.type){case nt.EXPRESSION:return eo(t);case nt.ASK:return FS(t,nt.ASK);case nt.BGP:return gz(t);case nt.CONSTRUCT:return _z(t);case nt.DESCRIBE:return FS(t,nt.DESCRIBE);case nt.DISTINCT:return vz(t);case nt.EXTEND:return wz(t);case nt.FROM:return Sz(t);case nt.FILTER:return Tz(t);case nt.GRAPH:return Ez(t);case nt.GROUP:return Oz(t);case nt.JOIN:return Az(t);case nt.LEFT_JOIN:return xz(t);case nt.MINUS:return Rz(t);case nt.NOP:return{};case nt.ORDER_BY:return Iz(t);case nt.PATH:return Pz(t);case nt.PATTERN:return Dp(t);case nt.PROJECT:return FS(t,nt.PROJECT);case nt.REDUCED:return Dz(t);case nt.SERVICE:return Nz(t);case nt.SLICE:return jz(t);case nt.UNION:return Cz(t);case nt.VALUES:return Fz(t);case nt.COMPOSITE_UPDATE:return kz(t);case nt.DELETE_INSERT:return Qz(t);case nt.LOAD:return Gz(t);case nt.CLEAR:return zz(t);case nt.CREATE:return Wz(t);case nt.DROP:return Xz(t);case nt.ADD:return Kz(t);case nt.MOVE:return Jz(t);case nt.COPY:return Yz(t)}throw new Error(`Unknown Operation type ${t.type}`)}function eo(t){switch(t.expressionType){case Wl.AGGREGATE:return lz(t);case Wl.EXISTENCE:return dz(t);case Wl.NAMED:return fz(t);case Wl.OPERATOR:return hz(t);case Wl.TERM:return pz(t);case Wl.WILDCARD:return yz(t)}throw new Error(`Unknown Expression Operation type ${t.expressionType}`)}function wl(t){switch(t.type){case nt.ALT:return Mz(t);case nt.INV:return Lz(t);case nt.LINK:return Bz(t);case nt.NPS:return $z(t);case nt.ONE_OR_MORE_PATH:return Uz(t);case nt.SEQ:return qz(t);case nt.ZERO_OR_MORE_PATH:return Vz(t);case nt.ZERO_OR_ONE_PATH:return Hz(t)}throw new Error(`Unknown Path type ${t.type}`)}function _d(t){return(0,oz.termToString)(t)}function lz(t){const e={expression:eo(t.expression),type:"aggregate",aggregation:t.aggregator,distinct:t.distinct};return t.separator&&(e.separator=t.separator),e}function dz(t){return{type:"operation",operator:t.not?"notexists":"exists",args:Xi.default.flatten([qr(t.input)])}}function fz(t){return{type:"functionCall",function:t.name,args:t.args.map(eo)}}function hz(t){if(t.operator==="desc"){const r={expression:eo(t.args[0])};return r.descending=!0,r}const e={type:"operation",operator:t.operator,args:t.args.map(eo)};return(e.operator==="in"||e.operator==="notin")&&(e.args=[e.args[0]].concat([e.args.slice(1)])),e}function pz(t){return t.term}function yz(t){return t.wildcard}function bz(t){return Array.isArray(t)?t.length===1?t[0]:{type:"group",patterns:t}:t}function mz(t){return t}function gz(t){let e=t.patterns.map(Dp);return e.length===0?null:{type:"bgp",triples:e}}function _z(t){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:t.template.map(Dp),where:Xi.default.flatten([qr(t.input)])}}function vz(t){let e=qr(t.input);return e.patterns[0].distinct=!0,e}function wz(t){return kr.project?(kr.extend.push(t),qr(t.input)):Xi.default.flatten([qr(t.input),{type:"bind",variable:t.variable,expression:eo(t.expression)}])}function Sz(t){const e=qr(t.input);let r=e;return e.type==="group"&&(r=e.patterns[0]),r.from={default:t.default,named:t.named},e}function Tz(t){return{type:"group",patterns:Xi.default.flatten([qr(t.input),{type:"filter",expression:eo(t.expression)}])}}function Ez(t){return{type:"graph",patterns:Xi.default.flatten([qr(t.input)]),name:t.name}}function Oz(t){const e=qr(t.input),r=t.aggregates.map(mz);return kr.aggregates.push(...r),kr.group.push(...t.variables),e}function Az(t){return Xi.default.flatten(t.input.map(qr)).reduce((r,n)=>(n.type!=="bgp"||r.length==0||r[r.length-1].type!=="bgp"?r.push(n):r[r.length-1].triples.push(...n.triples),r),[])}function xz(t){const e={type:"optional",patterns:[qr(t.input[1])]};return t.expression&&e.patterns.push({type:"filter",expression:eo(t.expression)}),e.patterns=Xi.default.flatten(e.patterns),Xi.default.flatten([qr(t.input[0]),e])}function Rz(t){let e=qr(t.input[1]);return e.type==="group"&&(e=e.patterns),Array.isArray(e)||(e=[e]),Xi.default.flatten([qr(t.input[0]),{type:"minus",patterns:e}])}function Iz(t){return kr.order.push(...t.expressions),qr(t.input)}function Pz(t){return{type:"bgp",triples:[{subject:t.subject,predicate:wl(t.predicate),object:t.object}]}}function Dp(t){return{subject:t.subject,predicate:t.predicate,object:t.object}}function Mb(t,e){let r=Xi.default.isSimpleTerm(t)?_d(t):t;if(typeof r=="string"){if(e[r])return e[r]}else if(Array.isArray(t))t=t.map(n=>Mb(n,e));else for(let n of Object.keys(t))t[n]=Mb(t[n],e);return t}function FS(t,e){const r={type:"query",prefixes:{}},n=r;let a;e===nt.PROJECT?(r.queryType="SELECT",a=t.variables):e===nt.ASK?r.queryType="ASK":e===nt.DESCRIBE&&(r.queryType="DESCRIBE",a=t.terms);const s=kr.extend,o=kr.group,u=kr.aggregates,c=kr.order;xC(),kr.project=!0;let l=Xi.default.flatten([qr(t.input)]);l.length===1&&l[0].type==="group"&&(l=l[0].patterns),r.where=l;let d={};for(let f of kr.aggregates)d[_d(f.variable)]=eo(f);let h={};for(let f=kr.extend.length-1;f>=0;--f){let p=kr.extend[f];h[_d(p.variable)]=Mb(eo(p.expression),d)}if(kr.group.length>0&&(n.group=kr.group.map(f=>{let p=_d(f);if(h[p]){let b=h[p];return delete h[p],{variable:f,expression:b}}return{expression:f}})),kr.order.length>0&&(n.order=kr.order.map(qr).map(f=>f.descending?f:{expression:f})),a&&(n.variables=a.map(f=>{let p=_d(f);return h[p]?{variable:f,expression:h[p]}:f}),n.variables.length===0&&(n.variables=[new EC.Wildcard])),r.where.length>0&&r.where[r.where.length-1].type==="filter"){const f=r.where[r.where.length-1];KE(f,Object.keys(d))&&(n.having=Xi.default.flatten([Mb(f.expression,d)]),r.where.splice(-1))}return kr.extend=s,kr.group=o,kr.aggregates=u,kr.order=c,{type:"group",patterns:[n]}}function KE(t,e){return Xi.default.isSimpleTerm(t)?e.indexOf(_d(t))>=0:Array.isArray(t)?t.some(r=>KE(r,e)):t===Object(t)?Object.keys(t).some(r=>KE(t[r],e)):e.indexOf(t)>=0}function Dz(t){let e=qr(t.input);return e.patterns[0].reduced=!0,e}function Nz(t){let e=qr(t.input);return e.type==="group"&&(e=e.patterns),Array.isArray(e)||(e=[e]),{type:"service",name:t.name,silent:t.silent,patterns:e}}function jz(t){let e=qr(t.input),r=e;return e.type&&e.type==="group"&&(r=e.patterns[0]),t.start!==0&&(r.offset=t.start),t.length!==void 0&&(r.limit=t.length),e}function Cz(t){return{type:"union",patterns:t.input.map(qr).map(bz)}}function Fz(t){return{type:"values",values:t.bindings.map(e=>{let r={};for(let n of t.variables){let a=`?${n.value}`;e[a]?r[a]=e[a]:r[a]=void 0}return r})}}function Mz(t){const e=t.input.map(wl);return e.every(r=>"pathType"in r&&r.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:Xi.default.flatten(e.map(r=>r.items))}]}:{type:"path",pathType:"|",items:e}}function Lz(t){if(t.path.type===nt.NPS){const e=t.path.iris.map(r=>({type:"path",pathType:"^",items:[r]}));return e.length<=1?{type:"path",pathType:"!",items:e}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:e}]}}return{type:"path",pathType:"^",items:[wl(t.path)]}}function Bz(t){return t.iri}function $z(t){return t.iris.length<=1?{type:"path",pathType:"!",items:t.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:t.iris}]}}function Uz(t){return{type:"path",pathType:"+",items:[wl(t.path)]}}function qz(t){return{type:"path",pathType:"/",items:t.input.map(wl)}}function Vz(t){return{type:"path",pathType:"*",items:[wl(t.path)]}}function Hz(t){return{type:"path",pathType:"?",items:[wl(t.path)]}}function kz(t){const e=t.updates.map(r=>qr(r).updates[0]);return{prefixes:{},type:"update",updates:e}}function Qz(t){var e;let r=t.where,n;if(r&&r.type===nt.FROM){let s=r;r=s.input,n={default:s.default,named:s.named}}const a=[{updateType:"insertdelete",delete:_P(t.delete||[]),insert:_P(t.insert||[])}];if(n&&(a[0].using=n),!r||r.type===nt.BGP&&r.patterns.length===0)a[0].where=[];else{const s=[];let o=qr(Lb(r,s));if(o.type==="group"?a[0].where=o.patterns:a[0].where=[o],s.length>0){if(s.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((e=s[0])===null||e===void 0?void 0:e.value)!==""&&(a[0].where=[{type:"graph",patterns:a[0].where,name:s[0]}])}}return!t.delete&&!t.where?(a[0].updateType="insert",delete a[0].delete,delete a[0].where):!t.insert&&!t.where?(delete a[0].insert,delete a[0].where,t.delete.some(s=>s.subject.termType==="Variable"||s.predicate.termType==="Variable"||s.object.termType==="Variable")?a[0].updateType="deletewhere":a[0].updateType="delete"):!t.insert&&t.where&&t.where.type==="bgp"&&(0,sz.isomorphic)(t.delete,t.where.patterns)&&(delete a[0].where,a[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:a}}function Gz(t){const e=[{type:"load",silent:!!t.silent,source:t.source}];return t.destination&&(e[0].destination=t.destination),{prefixes:{},type:"update",updates:e}}function zz(t){return XA(t,"clear")}function Wz(t){return XA(t,"create")}function Xz(t){return XA(t,"drop")}function XA(t,e){const r=[{type:e,silent:!!t.silent}];return t.source==="DEFAULT"?r[0].graph={default:!0}:t.source==="NAMED"?r[0].graph={named:!0}:t.source==="ALL"?r[0].graph={all:!0}:r[0].graph={type:"graph",name:t.source},{prefixes:{},type:"update",updates:r}}function Kz(t){return KA(t,"add")}function Jz(t){return KA(t,"move")}function Yz(t){return KA(t,"copy")}function KA(t,e){const r=[{type:e,silent:!!t.silent}];return r[0].source=t.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:t.source},r[0].destination=t.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:t.destination},{prefixes:{},type:"update",updates:r}}function _P(t){if(!t)return[];const e={};return t.forEach(r=>{const n=r.graph.value;e[n]||(e[n]=[]),e[n].push(r)}),Object.keys(e).map(r=>r===""?{type:"bgp",triples:e[r].map(Dp)}:{type:"graph",triples:e[r].map(Dp),name:e[r][0].graph})}function Zz(t){return Lb(t,[])}function Lb(t,e){if(Array.isArray(t))return t.map(o=>Lb(o,e));if(!t.type||t.type===nt.DELETE_INSERT)return t;if((t.type===nt.PATTERN||t.type===nt.PATH)&&t.graph)return e.push(t.graph),t.graph.name!==""?t.type===nt.PATTERN?Kc.createPattern(t.subject,t.predicate,t.object):Kc.createPath(t.subject,t.predicate,t.object):t;const r={},n={},a={};for(let o of Object.keys(t)){const u=[];if(r[o]=Lb(t[o],u),u.length>0){n[o]=u;for(const c of u)a[c.value]=c}}const s=Object.keys(a);if(s.length>0)if(s.length===1&&![nt.PROJECT,nt.SERVICE].includes(t.type))e.push(a[s[0]]);else{if(t.type===nt.BGP)return eW(t,n.patterns);for(let o of Object.keys(n)){const u=r[o];Array.isArray(u)?r[o]=u.map((c,l)=>n[o][0].value===""?c:Kc.createGraph(c,n[o][l])):n[o][0].value!==""&&(r[o]=Kc.createGraph(u,n[o][0]))}}return r}function eW(t,e){var r;const n={};for(let o=0;o<t.patterns.length;++o){const u=t.patterns[o],c=e[o].value;n[c]=(r=n[c])!==null&&r!==void 0?r:{patterns:[],graph:e[o]},n[c].patterns.push(u)}let a=[];for(const[o,{patterns:u,graph:c}]of Object.entries(n)){const l=Kc.createBgp(u);a.push(o===""?l:Kc.createGraph(l,c))}let s=a[0];for(let o=1;o<a.length;++o)s=Kc.createJoin([s,a[o]]);return s}(function(t){var e=g&&g.__createBinding||(Object.create?function(d,h,f,p){p===void 0&&(p=f);var b=Object.getOwnPropertyDescriptor(h,f);(!b||("get"in b?!h.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(d,p,b)}:function(d,h,f,p){p===void 0&&(p=f),d[p]=h[f]}),r=g&&g.__setModuleDefault||(Object.create?function(d,h){Object.defineProperty(d,"default",{enumerable:!0,value:h})}:function(d,h){d.default=h}),n=g&&g.__importStar||function(d){if(d&&d.__esModule)return d;var h={};if(d!=null)for(var f in d)f!=="default"&&Object.prototype.hasOwnProperty.call(d,f)&&e(h,d,f);return r(h,d),h},a=g&&g.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.toSparqlJs=t.toSparql=t.Factory=t.Algebra=t.translate=void 0;const s=a(VA);t.translate=s.default;const o=n(Rf);t.Algebra=o;const u=a(If);t.Factory=u.default;const c=ef;Object.defineProperty(t,"toSparql",{enumerable:!0,get:function(){return c.toSparql}}),Object.defineProperty(t,"toSparqlJs",{enumerable:!0,get:function(){return c.toSparqlJs}});const l=a(S0);t.Util=l.default})(Tt);Object.defineProperty(cl,"__esModule",{value:!0});cl.materializeOperation=cl.materializeTerm=void 0;const tW=Hn,Xl=sr,vP=hn,rW=Tt,nW=new tW.BindingsFactory;function Is(t,e){if(t.termType==="Variable"){const r=e.get(t);if(r)return r}return t.termType==="Quad"&&(0,vP.someTermsNested)(t,r=>r.termType==="Variable")?(0,vP.mapTermsNested)(t,r=>Is(r,e)):t}cl.materializeTerm=Is;function JE(t,e,r={}){return r={strictTargetVariables:"strictTargetVariables"in r?r.strictTargetVariables:!1,bindFilter:"bindFilter"in r?r.bindFilter:!0},rW.Util.mapOperation(t,{path(n,a){return{recurse:!1,result:a.createPath(Is(n.subject,e),n.predicate,Is(n.object,e),Is(n.graph,e))}},pattern(n,a){return{recurse:!1,result:a.createPattern(Is(n.subject,e),Is(n.predicate,e),Is(n.object,e),Is(n.graph,e))}},extend(n){if(e.has(n.variable)){if(r.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,Xl.termToString)(n.variable)} in a BIND operator.`);return{recurse:!0,result:JE(n.input,e,r)}}return{recurse:!0,result:n}},group(n,a){if(r.strictTargetVariables){for(const o of n.variables)if(e.has(o))throw new Error(`Tried to bind variable ${(0,Xl.termToString)(o)} in a GROUP BY operator.`);return{recurse:!0,result:n}}const s=n.variables.filter(o=>!e.has(o));return{recurse:!0,result:a.createGroup(n.input,s,n.aggregates)}},project(n,a){if(r.strictTargetVariables){for(const u of n.variables)if(e.has(u))throw new Error(`Tried to bind variable ${(0,Xl.termToString)(u)} in a SELECT operator.`);return{recurse:!0,result:n}}const s=n.variables.filter(u=>!e.has(u)),o=nW.bindings(n.variables.map(u=>{const c=e.get(u);if(c)return[u,c]}).filter(u=>!!u));return{recurse:!1,result:a.createProject(JE(n.input,o,r),s)}},values(n,a){if(r.strictTargetVariables){for(const s of n.variables)if(e.has(s))throw new Error(`Tried to bind variable ${(0,Xl.termToString)(s)} in a VALUES operator.`)}else{const s=n.variables.filter(u=>!e.has(u)),o=n.bindings.map(u=>{const c={...u};let l=!0;return e.forEach((d,h)=>{const f=(0,Xl.termToString)(h);f in c&&(d.equals(c[f])||(l=!1),delete c[f])}),l?c:void 0}).filter(Boolean);return{recurse:!0,result:a.createValues(s,o)}}return{recurse:!1,result:n}},expression(n,a){if(!r.bindFilter)return{recurse:!1,result:n};if(n.expressionType==="term")return{recurse:!1,result:a.createTermExpression(Is(n.term,e))};if(n.expressionType==="aggregate"&&"variable"in n&&e.has(n.variable)){if(r.strictTargetVariables)throw new Error(`Tried to bind ${(0,Xl.termToString)(n.variable)} in a ${n.aggregator} aggregate.`);return{recurse:!0,result:n}}return{recurse:!0,result:n}}})}cl.materializeOperation=JE;Object.defineProperty(h0,"__esModule",{value:!0});h0.ActorQueryOperation=void 0;const pu=Ht,iW=et,wP=qm,aW=cl;let SP=0;class Iu extends iW.Actor{constructor(e){super(e)}static getSafeBindings(e){return Iu.validateQueryOutput(e,"bindings"),e}static getSafeQuads(e){return Iu.validateQueryOutput(e,"quads"),e}static getSafeBoolean(e){return Iu.validateQueryOutput(e,"boolean"),e}static getSafeVoid(e){return Iu.validateQueryOutput(e,"void"),e}static cachifyMetadata(e){let r;return()=>(r||(r=e(),r.then(n=>n.state.addInvalidateListener(()=>{r=void 0})).catch(()=>{})),r)}static validateQueryOutput(e,r){if(e.type!==r)throw new Error(`Invalid query output type: Expected '${r}' but got '${e.type}'`)}static getBaseExpressionContext(e){const r=e.get(pu.KeysInitQuery.queryTimestamp),n=e.get(pu.KeysInitQuery.baseIRI),a=e.get(pu.KeysInitQuery.functionArgumentsCache)||{};if(e.has(pu.KeysInitQuery.extensionFunctionCreator)&&e.has(pu.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");let s=e.get(pu.KeysInitQuery.extensionFunctionCreator);const o=e.get(pu.KeysInitQuery.extensionFunctions);return o&&(s=u=>o[u.value]),{now:r,baseIRI:n,extensionFunctionCreator:s,functionArgumentsCache:a}}static getExpressionContext(e,r){return{...this.getBaseExpressionContext(e),bnode:n=>new wP.BlankNodeBindingsScoped(n||`BNODE_${SP++}`)}}static getAsyncExpressionContext(e,r){return{...this.getBaseExpressionContext(e),bnode:n=>Promise.resolve(new wP.BlankNodeBindingsScoped(n||`BNODE_${SP++}`)),exists:Iu.createExistenceResolver(e,r)}}static createExistenceResolver(e,r){return async(n,a)=>{const s=(0,aW.materializeOperation)(n.input,a),o=await r.mediate({operation:s,context:e}),u=Iu.getSafeBindings(o);return new Promise((c,l)=>{u.bindingsStream.on("end",()=>{c(!1)}),u.bindingsStream.on("error",l),u.bindingsStream.on("data",()=>{u.bindingsStream.close(),c(!0)})}).then(c=>n.not?!c:c)}}static throwOnReadOnly(e){if(e.get(pu.KeysQueryOperation.readOnly))throw new Error("Attempted a write operation in read-only mode")}}h0.ActorQueryOperation=Iu;var E0={};Object.defineProperty(E0,"__esModule",{value:!0});E0.ActorQueryOperationTyped=void 0;const Ky=Ht,TP=h0;class sW extends TP.ActorQueryOperation{constructor(e,r){if(super({...e,operationName:r}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(e){if(!e.operation)throw new Error("Missing field 'operation' in a query operation action.");if(e.operation.type!==this.operationName)throw new Error(`Actor ${this.name} only supports ${this.operationName} operations, but got ${e.operation.type}`);const r=e.operation;return this.testOperation(r,e.context)}async run(e){const r=e.context.get(Ky.KeysInitQuery.physicalQueryPlanLogger);r&&(r.logOperation(e.operation.type,void 0,e.operation,e.context.get(Ky.KeysInitQuery.physicalQueryPlanNode),this.name,{}),e.context=e.context.set(Ky.KeysInitQuery.physicalQueryPlanNode,e.operation));const n=e.operation,a=e.context.set(Ky.KeysQueryOperation.operation,n),s=await this.runOperation(n,a);return"metadata"in s&&(s.metadata=TP.ActorQueryOperation.cachifyMetadata(s.metadata)),s}}E0.ActorQueryOperationTyped=sW;var Xm={};Object.defineProperty(Xm,"__esModule",{value:!0});Xm.ActorQueryOperationTypedMediated=void 0;const oW=E0;class uW extends oW.ActorQueryOperationTyped{constructor(e,r){super(e,r)}}Xm.ActorQueryOperationTypedMediated=uW;var Km={};Object.defineProperty(Km,"__esModule",{value:!0});Km.BusQueryOperation=void 0;const cW=et;class lW extends cW.BusIndexed{constructor(e){super({...e,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}}Km.BusQueryOperation=lW;var Jm={},Wt={},JA={exports:{}},Fd=typeof Reflect=="object"?Reflect:null,EP=Fd&&typeof Fd.apply=="function"?Fd.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ib;Fd&&typeof Fd.ownKeys=="function"?ib=Fd.ownKeys:Object.getOwnPropertySymbols?ib=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ib=function(e){return Object.getOwnPropertyNames(e)};function dW(t){console&&console.warn&&console.warn(t)}var RC=Number.isNaN||function(e){return e!==e};function yr(){yr.init.call(this)}JA.exports=yr;JA.exports.once=yW;yr.EventEmitter=yr;yr.prototype._events=void 0;yr.prototype._eventsCount=0;yr.prototype._maxListeners=void 0;var OP=10;function Ym(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(yr,"defaultMaxListeners",{enumerable:!0,get:function(){return OP},set:function(t){if(typeof t!="number"||t<0||RC(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");OP=t}});yr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};yr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||RC(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function IC(t){return t._maxListeners===void 0?yr.defaultMaxListeners:t._maxListeners}yr.prototype.getMaxListeners=function(){return IC(this)};yr.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var a=e==="error",s=this._events;if(s!==void 0)a=a&&s.error===void 0;else if(!a)return!1;if(a){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")EP(c,this,r);else for(var l=c.length,d=CC(c,l),n=0;n<l;++n)EP(d[n],this,r);return!0};function PC(t,e,r,n){var a,s,o;if(Ym(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),a=IC(t),a>0&&o.length>a&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,dW(u)}return t}yr.prototype.addListener=function(e,r){return PC(this,e,r,!1)};yr.prototype.on=yr.prototype.addListener;yr.prototype.prependListener=function(e,r){return PC(this,e,r,!0)};function fW(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function DC(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},a=fW.bind(n);return a.listener=r,n.wrapFn=a,a}yr.prototype.once=function(e,r){return Ym(r),this.on(e,DC(this,e,r)),this};yr.prototype.prependOnceListener=function(e,r){return Ym(r),this.prependListener(e,DC(this,e,r)),this};yr.prototype.removeListener=function(e,r){var n,a,s,o,u;if(Ym(r),a=this._events,a===void 0)return this;if(n=a[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){u=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():hW(n,s),n.length===1&&(a[e]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",e,u||r)}return this};yr.prototype.off=yr.prototype.removeListener;yr.prototype.removeAllListeners=function(e){var r,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(a=0;a<s.length;++a)o=s[a],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(e,r[a]);return this};function NC(t,e,r){var n=t._events;if(n===void 0)return[];var a=n[e];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?pW(a):CC(a,a.length)}yr.prototype.listeners=function(e){return NC(this,e,!0)};yr.prototype.rawListeners=function(e){return NC(this,e,!1)};yr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):jC.call(t,e)};yr.prototype.listenerCount=jC;function jC(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}yr.prototype.eventNames=function(){return this._eventsCount>0?ib(this._events):[]};function CC(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function hW(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function pW(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function yW(t,e){return new Promise(function(r,n){function a(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",a),r([].slice.call(arguments))}FC(t,e,s,{once:!0}),e!=="error"&&bW(t,a,{once:!0})})}function bW(t,e,r){typeof t.on=="function"&&FC(t,"error",e,r)}function FC(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function a(s){n.once&&t.removeEventListener(e,a),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var O0=JA.exports,Zm={};Object.defineProperty(Zm,"__esModule",{value:!0});Zm.LinkedList=void 0;class mW{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}get empty(){return this._head===null}push(e){const r={value:e,next:null};this._tail===null?this._head=this._tail=r:this._tail.next=this._tail=r,this._length++}shift(){if(this._head===null)return;const{value:e,next:r}=this._head;return this._head=r,r===null&&(this._tail=null),this._length--,e}clear(){this._length=0,this._head=this._tail=null}}Zm.LinkedList=mW;var eg={};Object.defineProperty(eg,"__esModule",{value:!0});eg.createTaskScheduler=void 0;const gW=Promise.resolve(void 0);function _W(){const t=typeof queueMicrotask=="function"?queueMicrotask:a=>gW.then(a),e=typeof setImmediate=="function"?setImmediate:a=>setTimeout(a,0);let r=0,n=null;return a=>{n!==null?n.push(a):++r<100?t(a):(n=[a],e(()=>{for(const s of n)t(s);n=null,r=0}))}}eg.createTaskScheduler=_W;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isIterator=t.isIterable=t.isSourceExpression=t.isPromise=t.isEventEmitter=t.isFunction=t.range=t.union=t.fromIterable=t.fromIterator=t.fromArray=t.single=t.empty=t.wrap=t.WrappingIterator=t.ClonedIterator=t.UnionIterator=t.MultiTransformIterator=t.SimpleTransformIterator=t.TransformIterator=t.BufferedIterator=t.MappingIterator=t.DESTINATION=t.identity=t.IntegerIterator=t.ArrayIterator=t.SingletonIterator=t.EmptyIterator=t.AsyncIterator=t.DESTROYED=t.ENDED=t.CLOSED=t.CLOSING=t.OPEN=t.INIT=t.setTaskScheduler=t.getTaskScheduler=t.scheduleTask=t.LinkedList=void 0;const e=O0,r=Zm;Object.defineProperty(t,"LinkedList",{enumerable:!0,get:function(){return r.LinkedList}});let a=eg.createTaskScheduler();function s(A){a(A)}t.scheduleTask=s;function o(){return a}t.getTaskScheduler=o;function u(A){a=A}t.setTaskScheduler=u,t.INIT=1,t.OPEN=2,t.CLOSING=4,t.CLOSED=8,t.ENDED=16,t.DESTROYED=32;class c extends e.EventEmitter{constructor(m=t.OPEN){super(),this._readable=!1,this._state=m,this.on("newListener",l)}_changeState(m,v=!1){const j=m>this._state&&this._state<t.ENDED;return j&&(this._state=m,m===t.ENDED&&(v?a(()=>this.emit("end")):this.emit("end"))),j}read(){return null}forEach(m,v){this.on("data",Ae(m,v))}close(){this._changeState(t.CLOSED)&&this._endAsync()}destroy(m){this.done||this._destroy(m,v=>{m=m||v,m&&this.emit("error",m),this._end(!0)})}_destroy(m,v){v()}_end(m=!1){this._changeState(m?t.DESTROYED:t.ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){a(()=>this._end())}get readable(){return this._readable}set readable(m){m=!!m&&!this.done,this._readable!==m&&(this._readable=m,m&&a(()=>this.emit("readable")))}get closed(){return this._state>=t.CLOSING}get ended(){return this._state===t.ENDED}get destroyed(){return this._state===t.DESTROYED}get done(){return this._state>=t.ENDED}toString(){const m=this._toStringDetails();return`[${this.constructor.name}${m?` ${m}`:""}]`}_toStringDetails(){return""}toArray(m){const v=[],j=typeof(m==null?void 0:m.limit)=="number"?m.limit:1/0;return this.ended||j<=0?Promise.resolve(v):new Promise((q,$)=>{const G=()=>q(v),Y=J=>{v.push(J),v.length>=j&&(this.removeListener("error",$),this.removeListener("data",Y),this.removeListener("end",G),q(v))};this.on("error",$),this.on("data",Y),this.on("end",G)})}getProperty(m,v){const j=this._properties;if(!v)return j&&j[m];if(j&&m in j)a(()=>v(j[m]));else{let q;(q=this._propertyCallbacks)||(this._propertyCallbacks=q=Object.create(null)),m in q?q[m].push(v):q[m]=[v]}}setProperty(m,v){const j=this._properties||(this._properties=Object.create(null));j[m]=v;const q=this._propertyCallbacks||{},$=q[m];if($){delete q[m],a(()=>{for(const G of $)G(v)});for(m in q)return;delete this._propertyCallbacks}}getProperties(){const m=this._properties,v={};for(const j in m)v[j]=m[j];return v}setProperties(m){for(const v in m)this.setProperty(v,m[v])}copyProperties(m,v){for(const j of v)m.getProperty(j,q=>this.setProperty(j,q))}transform(m){return new D(this,m)}map(m,v){return new w(this,Ae(m,v))}filter(m,v){return this.map(function(j){return m.call(v||this,j)?j:null})}uniq(m=S){const v=new Set;return this.filter(function(j){const q=m.call(this,j);return v.has(q)?!1:(v.add(q),!0)})}prepend(m){return this.transform({prepend:m})}append(m){return this.transform({append:m})}surround(m,v){return this.transform({prepend:m,append:v})}skip(m){return this.map(v=>m-- >0?null:v)}take(m){return this.transform({limit:m})}range(m,v){return this.transform({offset:m,limit:Math.max(v-m+1,0)})}clone(){return new M(this)}}t.AsyncIterator=c;function l(A){A==="data"&&(this.removeListener("newListener",l),h(this,"readable",d),this.readable&&a(()=>d.call(this)))}function d(){let A;for(;this.listenerCount("data")!==0&&(A=this.read())!==null;)this.emit("data",A);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",d),h(this,"newListener",l))}function h(A,m,v){A.listeners(m).includes(v)||A.on(m,v)}class f extends c{constructor(){super(),this._changeState(t.ENDED,!0)}}t.EmptyIterator=f;class p extends c{constructor(m){super(),this._item=m,m===null?this.close():this.readable=!0}read(){const m=this._item;return this._item=null,this.close(),m}_toStringDetails(){return this._item===null?"":`(${this._item})`}}t.SingletonIterator=p;class b extends c{constructor(m=[],{autoStart:v=!0,preserve:j=!0}={}){super();const q=j||!Array.isArray(m)?[...m]:m;this._index=0,this._sourceStarted=v!==!1,this._truncateThreshold=j?-1:64,this._sourceStarted&&q.length===0?this.close():this._buffer=q,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let m=null;return this._buffer&&(this._index<this._buffer.length&&(m=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),m}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(m,v){delete this._buffer,v()}toArray(m={}){if(!this._buffer)return Promise.resolve([]);const{length:v}=this._buffer,j=this._index,q=typeof m.limit!="number"?v:j+m.limit,$=this._buffer.slice(j,q);return this._index=q,q>=v&&this.close(),Promise.resolve($)}}t.ArrayIterator=b;class y extends c{constructor({start:m=0,step:v=1,end:j}={}){super(),Number.isFinite(m)&&(m=Math.trunc(m)),this._next=m,Number.isFinite(v)&&(v=Math.trunc(v)),this._step=v;const q=v>=0,$=q?1/0:-1/0;Number.isFinite(j)?j=Math.trunc(j):j!==-$&&(j=$),this._last=j,!Number.isFinite(m)||(q?m>j:m<j)?this.close():this.readable=!0}read(){if(this.closed)return null;const m=this._next,v=this._step,j=this._last,q=this._next+=v;return(v>=0?q>j:q<j)&&this.close(),m}_toStringDetails(){return`(${this._next}...${this._last})`}}t.IntegerIterator=y;function S(A){return A}t.identity=S,t.DESTINATION=Symbol("destination");class w extends c{constructor(m,v=S,j={}){super(),this._map=v,this._source=I(m),this._destroySource=j.destroySource!==!1,m.done?this.close():(this._source[t.DESTINATION]=this,this._source.on("end",B),this._source.on("error",P),this._source.on("readable",x),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let m,v;for(;(m=this._source.read())!==null;)if((v=this._map(m))!==null)return v}this.readable=!1,this._source.done&&this.close()}return null}_end(m){this._source.removeListener("end",B),this._source.removeListener("error",P),this._source.removeListener("readable",x),delete this._source[t.DESTINATION],this._destroySource&&this._source.destroy(),super._end(m)}}t.MappingIterator=w;function I(A,m=!1){if(!A||!Ie(A.read)||!Ie(A.on))throw new TypeError(`Invalid source: ${A}`);if(!m&&A[t.DESTINATION])throw new Error("The source already has a destination");return A}class O extends c{constructor({maxBufferSize:m=4,autoStart:v=!0}={}){super(t.INIT),this._buffer=new r.LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=m,a(()=>this._init(v)),this._sourceStarted=v!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(m){m!==1/0&&(m=Number.isFinite(m)?Math.max(Math.trunc(m),1):4),this._maxBufferSize!==m&&(this._maxBufferSize=m,this._state===t.OPEN&&this._fillBuffer())}_init(m){let v=!1;this._reading=!0,this._begin(()=>{if(v)throw new Error("done callback called multiple times");v=!0,this._reading=!1,this._changeState(t.OPEN),m?this._fillBufferAsync():this.readable=!0})}_begin(m){m()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const m=this._buffer;let v;return m.empty?(v=null,this.readable=!1):v=m.shift(),!this._reading&&m.length<this._maxBufferSize&&(this.closed?m.empty&&this._endAsync():this._fillBufferAsync()),v}_read(m,v){v()}_push(m){this.done||(this._pushedCount++,this._buffer.push(m),this.readable=!0)}_fillBuffer(){let m;this._reading||(this.closed?this._completeClose():(m=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(m,()=>{if(!m)throw new Error("done callback called multiple times");m=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,a(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(t.CLOSING):this._completeClose()}_completeClose(){this._changeState(t.CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(m,v){this._buffer.clear(),v()}_flush(m){m()}_toStringDetails(){const m=this._buffer;return`{${m.empty?"":`next: ${m.first}, `}buffer: ${m.length}}`}}t.BufferedIterator=O;class T extends O{constructor(m,v=m||{}){super(v),this._boundPush=j=>this._push(j),me(m)||(m=v.source),he(m)?this.source=m:m&&(this._createSource=ve(m)?()=>m:m,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!v.optional,this._destroySource=v.destroySource!==!1}get source(){return Ie(this._createSource)&&this._loadSourceAsync(),this._source}set source(m){const v=this._source=this._validateSource(m);v[t.DESTINATION]=this,this.done?this._destroySource&&v.destroy():v.done?this.close():(v.on("end",Q),v.on("readable",N),v.on("error",P))}_loadSourceAsync(){Ie(this._createSource)&&(Promise.resolve(this._createSource()).then(m=>{delete this._createSource,this.source=m,this._fillBuffer()},m=>this.emit("error",m)),this._createSource=null)}_validateSource(m,v=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return I(m,v)}_read(m,v){const j=()=>{this._pushedCount<m&&!this.closed?a(()=>this._readAndTransform(j,v)):v()};this._readAndTransform(j,v)}_readAndTransform(m,v){let j;const q=this.source;!q||q.done||(j=q.read())===null?v():this._optional?this._optionalTransform(j,m):this._transform(j,m,this._boundPush)}_optionalTransform(m,v){const j=this._pushedCount;this._transform(m,()=>{j===this._pushedCount&&this._push(m),v()},this._boundPush)}_transform(m,v,j){j(m),v()}_closeWhenDone(){this.close()}_end(m){const v=this._source;v&&(v.removeListener("end",Q),v.removeListener("error",P),v.removeListener("readable",N),delete v[t.DESTINATION],this._destroySource&&v.destroy()),super._end(m)}}t.TransformIterator=T;function x(){this[t.DESTINATION].readable=!0}function P(A){this[t.DESTINATION].emit("error",A)}function B(){this[t.DESTINATION].close()}function Q(){this[t.DESTINATION]._closeWhenDone()}function N(){this[t.DESTINATION]._sourceStarted!==!1&&this[t.DESTINATION]._fillBuffer()}class D extends T{constructor(m,v){if(super(m,v),this._offset=0,this._limit=1/0,this._filter=j=>!0,v=v||(me(m)?null:m),v){const j=Ie(v)?v:v.transform,{limit:q,offset:$,filter:G,map:Y,prepend:J,append:re}=v;$===1/0||q===-1/0?this._limit=0:(Number.isFinite($)&&(this._offset=Math.max(Math.trunc($),0)),Number.isFinite(q)&&(this._limit=Math.max(Math.trunc(q),0)),Ie(G)&&(this._filter=G),Ie(Y)&&(this._map=Y),this._transform=Ie(j)?j:null),J&&(this._prepender=he(J)?J:_e(J)),re&&(this._appender=he(re)?re:_e(re))}}_read(m,v){const j=()=>this._readAndTransformSimple(m,q,v);this._readAndTransformSimple(m,q,v);function q(){a(j)}}_readAndTransformSimple(m,v,j){let q;const{source:$}=this;if(!$||$.done){j();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<m&&(q=$.read())!==null;){if(!this._filter(q)||this._offset!==0&&this._offset--)continue;const G=typeof this._map>"u"?q:this._map(q);if(G===null)this._optional&&this._push(q);else if(!Ie(this._transform))this._push(G);else{this._optional?this._optionalTransform(G,v):this._transform(G,v,this._boundPush);return}--this._limit===0&&this.close()}j()}_begin(m){this._insert(this._prepender,m),delete this._prepender}_flush(m){this._insert(this._appender,m),delete this._appender}_insert(m,v){const j=$=>this._push($);!m||m.done?v():(m.on("data",j),m.on("end",q));function q(){m.removeListener("data",j),m.removeListener("end",q),v()}}}t.SimpleTransformIterator=D;class F extends T{constructor(m,v){if(super(m,v),this._transformerQueue=[],v){const j=Ie(v)?v:v.multiTransform;j&&(this._createTransformer=j)}}_read(m,v){const j=this._transformerQueue,q=this._optional;let $,G;for(;($=j[0])&&$.transformer.done;){q&&$.item!==null&&(m--,this._push($.item)),j.shift();const{transformer:J}=$;J.removeListener("end",N),J.removeListener("readable",N),J.removeListener("error",P)}const{source:Y}=this;for(;Y&&!Y.done&&j.length<this.maxBufferSize&&(G=Y.read(),G!==null);){const J=this._createTransformer(G)||new f;J[t.DESTINATION]=this,J.on("end",N),J.on("readable",N),J.on("error",P),j.push({transformer:J,item:G})}if($=j[0],$){const{transformer:J}=$;for(;m-- >0&&(G=J.read())!==null;)this._push(G),q&&($.item=null)}else Y&&Y.done&&this.close();v()}_createTransformer(m){return new p(m)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(m){if(super._end(m),this._destroySource)for(const v of this._transformerQueue)v.transformer.destroy()}}t.MultiTransformIterator=F;class W extends O{constructor(m,v={}){super(v),this._sources=[],this._currentSource=-1;const j=v.autoStart!==!1;if(he(m))m.on("error",q=>this.emit("error",q)),this._pending={loading:!1,sources:m},j&&this._loadSources();else if(Array.isArray(m)&&m.length>0)for(const q of m)this._addSource(q);else j&&this.close();this._destroySources=v.destroySources!==!1}_loadSources(){const m=this._pending.sources;this._pending.loading=!0,m.done?(delete this._pending,this.close()):(m.on("data",v=>{this._addSource(v),this._fillBufferAsync()}),m.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(m){ve(m)&&(m=ie(m)),m.done||(this._sources.push(m),m[t.DESTINATION]=this,m.on("error",P),m.on("readable",N),m.on("end",z))}_removeEmptySources(){this._sources=this._sources.filter((m,v)=>(m.done&&v<=this._currentSource&&this._currentSource--,!m.done)),this._fillBuffer()}_read(m,v){var j;((j=this._pending)===null||j===void 0?void 0:j.loading)===!1&&this._loadSources();let q=0,$;for(;q!==(q=m);)for(let G=0;G<this._sources.length&&m>0;G++)this._currentSource=(this._currentSource+1)%this._sources.length,($=this._sources[this._currentSource].read())!==null&&(m--,this._push($));!this._pending&&this._sources.length===0&&this.close(),v()}_end(m=!1){if(super._end(m),this._destroySources){for(const v of this._sources)v.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}t.UnionIterator=W;function z(){this[t.DESTINATION]._removeEmptySources()}class M extends T{constructor(m){super(m,{autoStart:!1}),this._readPosition=0,this._reading=!1,m&&(this.readable=!0)}_init(){}close(){c.prototype.close.call(this)}get source(){return super.source}set source(m){const v=this._source=this._validateSource(m),j=v&&v[t.DESTINATION]||(v[t.DESTINATION]=new C(v));this.done?this._destroySource&&v.destroy():j.endsAt(0)?this.close():(j.register(this),(v._sourceStarted===!1||j.readAt(0)!==null)&&(this.readable=!0));const q=this._propertyCallbacks;for(const $ in q){const G=q[$];for(const Y of G)this._getSourceProperty($,Y)}}_validateSource(m,v=!1){const j=m&&m[t.DESTINATION];return super._validateSource(m,!j||j instanceof C)}getProperty(m,v){const{source:j}=this,q=this._properties,$=q&&m in q;if(!v)return $?q&&q[m]:j&&j.getProperty(m);super.getProperty(m,v),j&&!$&&this._getSourceProperty(m,v)}_getSourceProperty(m,v){this.source.getProperty(m,j=>{(!this._properties||!(m in this._properties))&&v(j)})}getProperties(){const m=this.source?this.source.getProperties():{},v=this._properties;for(const j in v)m[j]=v[j];return m}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const m=this.source;let v=null;if(!this.done&&m){const j=m[t.DESTINATION];(v=j.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,j.endsAt(this._readPosition)&&this.close()}return v}_end(m){const v=this.source,j=v==null?void 0:v[t.DESTINATION];j&&j.unregister(this),O.prototype._end.call(this,m)}}t.ClonedIterator=M;class C{constructor(m){if(this._history=[],this._trackers=new Set,this._source=m,!m.done){const v=()=>{for(const $ of this._trackers)$.readable=!0},j=$=>{for(const G of this._trackers)G.emit("error",$)},q=()=>{for(const $ of this._trackers)$._sourceStarted!==!1&&$._readPosition===this._history.length&&$.close();this._trackers.clear(),m.removeListener("end",q),m.removeListener("error",j),m.removeListener("readable",v)};m.on("end",q),m.on("error",j),m.on("readable",v)}}register(m){this._source.done||this._trackers.add(m)}unregister(m){this._trackers.delete(m)}readAt(m){let v=null;return m<this._history.length?v=this._history[m]:!this._source.done&&(v=this._source.read())!==null&&(this._history[m]=v),v}endsAt(m){return this._source.done&&this._history.length===m}}class V extends c{constructor(m,v){super(),this._source=null,this._destroySource=(v==null?void 0:v.destroySource)!==!1,ve(m)?(this._source=new c,m.then(j=>{this._source=null,this.source=j}).catch(j=>this.emit("error",j))):m&&(this.source=m)}set source(m){let v=m;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(L(v)&&(v=v[Symbol.iterator]()),H(v)){let j=v;v=new e.EventEmitter,v.read=()=>{if(j!==null){let q;for(;!(q=j.next()).done;)if(q.value!==null)return q.value;j=null,this.close()}return null}}else v=I(v);if(this.done){this._destroySource&&Ie(v.destroy)&&v.destroy();return}v[t.DESTINATION]=this,v.on("end",B),v.on("error",P),v.on("readable",x),this._source=v,this.readable=v.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const m=this._source.read();if(m!==null)return m;this.readable=!1}return null}_end(m=!1){this._source!==null&&(this._source.removeListener("end",B),this._source.removeListener("error",P),this._source.removeListener("readable",x),delete this._source[t.DESTINATION],this._destroySource&&Ie(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(m)}}t.WrappingIterator=V;function ie(A,m){if(m&&("autoStart"in m||"optional"in m||"source"in m||"maxBufferSize"in m))return A&&!he(A)&&(A=new V(A)),new T(A,m);if(!A)return ne();if(ve(A))return new V(A,m);if(A instanceof c)return A;if(Array.isArray(A))return _e(A);if(L(A)||H(A)||he(A))return new V(A,m);throw new TypeError(`Invalid source: ${A}`)}t.wrap=ie;function ne(){return new f}t.empty=ne;function fe(A){return new p(A)}t.single=fe;function _e(A){return new b(A)}t.fromArray=_e;function we(A){return new V(A)}t.fromIterator=we;function Ce(A){return new V(A)}t.fromIterable=Ce;function oe(A){return new W(A)}t.union=oe;function ae(A,m,v){return new y({start:A,end:m,step:v})}t.range=ae;function Ae(A,m){return m?A.bind(m):A}function Ie(A){return typeof A=="function"}t.isFunction=Ie;function he(A){return Ie(A==null?void 0:A.on)}t.isEventEmitter=he;function ve(A){return Ie(A==null?void 0:A.then)}t.isPromise=ve;function me(A){return A&&(he(A)||ve(A)||Ie(A))}t.isSourceExpression=me;function L(A){return A&&Symbol.iterator in A}t.isIterable=L;function H(A){return Ie(A==null?void 0:A.next)}t.isIterator=H})(Wt);Object.defineProperty(Jm,"__esModule",{value:!0});Jm.ClosableTransformIterator=void 0;const vW=Wt;class wW extends vW.TransformIterator{constructor(e,r){super(e,r),this.onClose=r.onClose}_end(e){this.onClose(),super._end(e)}}Jm.ClosableTransformIterator=wW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(h0,t),r(E0,t),r(Xm,t),r(cl,t),r(Km,t),r(Jm,t)})(ft);var tg={};Object.defineProperty(tg,"__esModule",{value:!0});tg.MemoryPhysicalQueryPlanLogger=void 0;const Jy=sr;class SW{constructor(){this.children=new Map}logOperation(e,r,n,a,s,o){const u={actor:s,logicalOperator:e,physicalOperator:r,rawNode:n,children:[],metadata:o};if(this.children.set(n,u.children),this.rootNode){if(!a)throw new Error("Detected more than one parent-less node");const c=this.children.get(a);if(!c)throw new Error("Could not find parent node");c.push(u)}else{if(a)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=u}}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(e){return{logical:e.logicalOperator,physical:e.physicalOperator,...this.getLogicalMetadata(e.rawNode),...e.metadata,...e.children.length>0?{children:e.children.map(r=>this.planNodeToJson(r))}:{}}}getLogicalMetadata(e){if("type"in e){const r=e;switch(r.type){case"pattern":return{pattern:this.quadToString(r)};case"project":return{variables:r.variables.map(n=>n.value)}}}return{}}quadToString(e){return`${(0,Jy.termToString)(e.subject)} ${(0,Jy.termToString)(e.predicate)} ${(0,Jy.termToString)(e.object)}${e.graph.termType==="DefaultGraph"?"":` ${(0,Jy.termToString)(e.graph)}`}`}}tg.MemoryPhysicalQueryPlanLogger=SW;Object.defineProperty(Um,"__esModule",{value:!0});Um.QueryEngineBase=void 0;const TW=ft,Tn=Ht,rh=et,EW=tg;class Bb{constructor(e){this.actorInitQuery=e,this.defaultFunctionArgumentsCache={}}async queryBindings(e,r){return this.queryOfType(e,r,"bindings")}async queryQuads(e,r){return this.queryOfType(e,r,"quads")}async queryBoolean(e,r){return this.queryOfType(e,r,"boolean")}async queryVoid(e,r){return this.queryOfType(e,r,"void")}async queryOfType(e,r,n){const a=await this.query(e,r);if(a.resultType===n)return await a.execute();throw new Error(`Query result type '${n}' was expected, while '${a.resultType}' was found.`)}async query(e,r){const n=await this.queryOrExplain(e,r);if("explain"in n)throw new Error("Tried to explain a query when in query-only mode");return n}async explain(e,r,n){return r.explain=n,await this.queryOrExplain(e,r)}async queryOrExplain(e,r){r=r||{};for(const f in r)this.actorInitQuery.contextKeyShortcuts[f]&&(r[this.actorInitQuery.contextKeyShortcuts[f]]=r[f],delete r[f]);let n=new rh.ActionContext(r),a={language:"sparql",version:"1.1"};n.has(Tn.KeysInitQuery.queryFormat)&&(a=n.get(Tn.KeysInitQuery.queryFormat),n=n.delete(Tn.KeysInitQuery.queryFormat),a.language==="graphql"&&(n=n.setDefault(Tn.KeysInitQuery.graphqlSingularizeVariables,{})));const s=n.get(Tn.KeysInitQuery.baseIRI);n=n.setDefault(Tn.KeysInitQuery.queryTimestamp,new Date).setDefault(Tn.KeysRdfResolveQuadPattern.sourceIds,new Map).setDefault(Tn.KeysCore.log,this.actorInitQuery.logger).setDefault(Tn.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(Tn.KeysRdfResolveQuadPattern.hypermediaSourcesAggregatedStores,new Map),n=(await this.actorInitQuery.mediatorContextPreprocess.mediate({context:n})).context;const o=n.get(Tn.KeysInitQuery.explain);let u;if(typeof e=="string"){n=n.set(Tn.KeysInitQuery.queryString,e);const f=await this.actorInitQuery.mediatorQueryParse.mediate({context:n,query:e,queryFormat:a,baseIRI:s});u=f.operation,f.baseIRI&&(n=n.set(Tn.KeysInitQuery.baseIRI,f.baseIRI))}else u=e;if(o==="parsed")return{explain:!0,type:o,data:u};n.has(Tn.KeysInitQuery.initialBindings)&&(u=(0,TW.materializeOperation)(u,n.get(Tn.KeysInitQuery.initialBindings)),n=n.delete(Tn.KeysInitQuery.queryString));const c=await this.actorInitQuery.mediatorOptimizeQueryOperation.mediate({context:n,operation:u});if(u=c.operation,n=c.context||n,o==="logical")return{explain:!0,type:o,data:u};n=n.set(Tn.KeysInitQuery.query,u);let l;o==="physical"&&(l=new EW.MemoryPhysicalQueryPlanLogger,n=n.set(Tn.KeysInitQuery.physicalQueryPlanLogger,l));const d=await this.actorInitQuery.mediatorQueryOperation.mediate({context:n,operation:u});d.context=n;const h=Bb.internalToFinalResult(d);if(l){switch(h.resultType){case"bindings":await(await h.execute()).toArray();break;case"quads":await(await h.execute()).toArray();break;case"boolean":await h.execute();break;case"void":await h.execute();break}return{explain:!0,type:o,data:l.toJson()}}return h}async getResultMediaTypes(e){return e=rh.ActionContext.ensureActionContext(e),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(e){return e=rh.ActionContext.ensureActionContext(e),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(e,r,n){if(n=rh.ActionContext.ensureActionContext(n),!r)switch(e.resultType){case"bindings":r="application/json";break;case"quads":r="application/trig";break;default:r="simple";break}const a={...await Bb.finalToInternalResult(e),context:n};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:n,handle:a,handleMediaType:r})).handle}invalidateHttpCache(e,r){return r=rh.ActionContext.ensureActionContext(r),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:e,context:r})}static internalToFinalResult(e){switch(e.type){case"bindings":return{resultType:"bindings",execute:async()=>e.bindingsStream,metadata:async()=>await e.metadata(),context:e.context};case"quads":return{resultType:"quads",execute:async()=>e.quadStream,metadata:async()=>await e.metadata(),context:e.context};case"boolean":return{resultType:"boolean",execute:async()=>e.execute(),context:e.context};case"void":return{resultType:"void",execute:async()=>e.execute(),context:e.context}}}static async finalToInternalResult(e){switch(e.resultType){case"bindings":return{type:"bindings",bindingsStream:await e.execute(),metadata:async()=>await e.metadata()};case"quads":return{type:"quads",quadStream:await e.execute(),metadata:async()=>await e.metadata()};case"boolean":return{type:"boolean",execute:()=>e.execute()};case"void":return{type:"void",execute:()=>e.execute()}}}}Um.QueryEngineBase=Bb;(function(t){var e=g&&g.__createBinding||(Object.create?function(a,s,o,u){u===void 0&&(u=o);var c=Object.getOwnPropertyDescriptor(s,o);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(a,u,c)}:function(a,s,o,u){u===void 0&&(u=o),a[u]=s[o]}),r=g&&g.__exportStar||function(a,s){for(var o in a)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,a,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryEngineBase=void 0,r(Kp,t),r($m,t);var n=Um;Object.defineProperty(t,"QueryEngineBase",{enumerable:!0,get:function(){return n.QueryEngineBase}})})(vm);var MC={},rg={};Object.defineProperty(rg,"__esModule",{value:!0});rg.LoggerVoid=void 0;const OW=aA;class AW extends OW.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}}rg.LoggerVoid=AW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(rg,t)})(MC);var ng={},ig={},ag={},sg={};Object.defineProperty(sg,"__esModule",{value:!0});sg.ActorExtractLinks=void 0;const xW=et;class RW extends xW.Actor{constructor(e){super(e)}static collectStream(e,r){return new Promise((n,a)=>{const s=[];e.on("error",a),e.on("data",o=>r(o,s)),e.on("end",()=>{n(s)})})}}sg.ActorExtractLinks=RW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(sg,t)})(ag);Object.defineProperty(ig,"__esModule",{value:!0});ig.ActorExtractLinksPredicates=void 0;const AP=ag;class IW extends AP.ActorExtractLinks{constructor(e){super(e),this.predicates=e.predicateRegexes.map(r=>new RegExp(r,"u"))}async test(e){return!0}async run(e){return{links:await AP.ActorExtractLinks.collectStream(e.metadata,(r,n)=>{if(!this.checkSubject||this.subjectMatches(r.subject.value,e.url)){for(const a of this.predicates)if(a.test(r.predicate.value)){n.push({url:r.object.value});break}}})}}subjectMatches(e,r){const n=e.indexOf("#");return n>=0&&(e=e.slice(0,n)),e===r}}ig.ActorExtractLinksPredicates=IW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ig,t)})(ng);var LC={},og={};Object.defineProperty(og,"__esModule",{value:!0});og.ActorExtractLinksQuadPatternQuery=void 0;const xP=ag,PW=Ht,DW=yt,Kl=hn,RP=Tt,YE=new DW.DataFactory,Yy=YE.variable("__comunica:pp_var");class lp extends xP.ActorExtractLinks{constructor(e){super(e)}static getCurrentQuery(e){const r=e.get(PW.KeysInitQuery.query);if(r)return r}static matchQuadPatternInOperation(e,r){const n=[];return RP.Util.recurseOperation(r,{pattern(a){return(0,Kl.matchPatternComplete)(e,a)&&n.push(a),!1},path(a){return RP.Util.recurseOperation(a,{link(s){const o=YE.quad(Yy,s.iri,Yy,a.graph);return(0,Kl.matchPatternComplete)(e,o)&&n.push(o),!1},nps(s){for(const o of s.iris){const u=YE.quad(Yy,o,Yy,a.graph);(0,Kl.matchPatternComplete)(e,u)&&n.push(u)}return!1}}),!1}}),n}async test(e){if(!lp.getCurrentQuery(e.context))throw new Error(`Actor ${this.name} can only work in the context of a query.`);return!0}async run(e){const r=lp.getCurrentQuery(e.context);return{links:await xP.ActorExtractLinks.collectStream(e.metadata,(n,a)=>{const s=lp.matchQuadPatternInOperation(n,r);if(s.length>0)if(this.onlyVariables){const o={};for(const u of s)for(const c of(0,Kl.filterQuadTermNames)(u,l=>l.termType==="Variable"))o[c]=!0;for(const u of Object.keys(o))n[u].termType==="NamedNode"&&a.push({url:n[u].value})}else for(const o of(0,Kl.getNamedNodes)((0,Kl.getTerms)(n)))a.push({url:o.value})})}}}og.ActorExtractLinksQuadPatternQuery=lp;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(og,t)})(LC);var BC={},ug={};Object.defineProperty(ug,"__esModule",{value:!0});ug.MediatorCombineArray=void 0;const NW=et;class jW extends NW.Mediator{constructor(e){super(e),this.combiner=this.createCombiner()}async mediate(e){let r;try{r=this.publish(e)}catch{r=[]}await Promise.all(r.map(({reply:a})=>a));const n=await Promise.all(r.map(a=>a.actor.runObservable(e)));return this.combiner(n)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return e=>{const r={};for(const n of this.fields)r[n]=[],[[]].concat(e.map(a=>a[n])).forEach((a,s,o)=>{a&&r[n].push(...a)});return r}}}ug.MediatorCombineArray=jW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ug,t)})(BC);var YA={},cg={};Object.defineProperty(cg,"__esModule",{value:!0});cg.MediatorCombinePipeline=void 0;const CW=et;class FW extends CW.Mediator{constructor(e){super(e)}async mediate(e){let r;try{r=this.publish(e)}catch{return e}if(this.filterErrors){const a=[];for(const s of r)try{await s.reply,a.push(s)}catch{}r=a}if(r=await Promise.all(r.map(async({actor:a,reply:s})=>({actor:a,reply:await s}))),this.order){const a=s=>{const o=this.field?s[this.field]:s;if(typeof o!="number")throw new Error("Cannot order elements that are not numbers.");return o};r=r.sort((s,o)=>(this.order==="increasing"?1:-1)*(a(s.reply)-a(o.reply)))}let n=e;for(const{actor:a}of r)n={...n,...await a.runObservable(n)};return n}mediateWith(){throw new Error("Method not supported.")}}cg.MediatorCombinePipeline=FW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(cg,t)})(YA);var $C={},lg={},A0={},dg={};Object.defineProperty(dg,"__esModule",{value:!0});dg.ActorOptimizeQueryOperation=void 0;const MW=et;class LW extends MW.Actor{constructor(e){super(e)}}dg.ActorOptimizeQueryOperation=LW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(dg,t)})(A0);Object.defineProperty(lg,"__esModule",{value:!0});lg.ActorOptimizeQueryOperationSetSeedSourcesQuadpatternIris=void 0;const BW=A0,IP=Ht,MS=Tt;class $W extends BW.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return!0}async run(e){const r=e.context.get(IP.KeysRdfResolveQuadPattern.sources);if(!r||r.length===0){const n=[...new Set(this.extractIrisFromOperation(e.operation))];e.context=e.context.set(IP.KeysRdfResolveQuadPattern.sources,n)}return{...e,context:e.context}}extractIrisFromOperation(e){const r=[];return MS.Util.recurseOperation(e,{[MS.Algebra.types.PATH]:n=>(this.extractSubjects&&n.subject.termType==="NamedNode"&&r.push(n.subject.value),this.extractObjects&&n.object.termType==="NamedNode"&&r.push(n.object.value),this.extractGraphs&&n.graph.termType==="NamedNode"&&r.push(n.graph.value),!1),[MS.Algebra.types.PATTERN]:n=>(this.extractSubjects&&n.subject.termType==="NamedNode"&&r.push(n.subject.value),this.extractPredicates&&n.predicate.termType==="NamedNode"&&r.push(n.predicate.value),this.extractObjects&&n.object.termType==="NamedNode"&&(this.extractVocabIris||n.predicate.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#type")&&r.push(n.object.value),this.extractGraphs&&n.graph.termType==="NamedNode"&&r.push(n.graph.value),!1)}),r}}lg.ActorOptimizeQueryOperationSetSeedSourcesQuadpatternIris=$W;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(lg,t)})($C);var UC={},fg={};Object.defineProperty(fg,"__esModule",{value:!0});fg.ActorOptimizeQueryOperationJoinBgp=void 0;const UW=A0,qW=Tt;class VW extends UW.ActorOptimizeQueryOperation{async test(e){return!0}async run(e){return{operation:qW.Util.mapOperation(e.operation,{join(n,a){return n.input.every(s=>s.type==="bgp")?{recurse:!1,result:a.createBgp(n.input.flatMap(s=>s.patterns))}:{recurse:!1,result:n}}}),context:e.context}}}fg.ActorOptimizeQueryOperationJoinBgp=VW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(fg,t)})(UC);var qC={},hg={};Object.defineProperty(hg,"__esModule",{value:!0});hg.ActorOptimizeQueryOperationBgpToJoin=void 0;const HW=A0,kW=Tt;class QW extends HW.ActorOptimizeQueryOperation{async test(e){return!0}async run(e){return{operation:kW.Util.mapOperation(e.operation,{bgp(n,a){return{recurse:!1,result:a.createJoin(n.patterns)}}}),context:e.context}}}hg.ActorOptimizeQueryOperationBgpToJoin=QW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(hg,t)})(qC);var VC={},pg={};Object.defineProperty(pg,"__esModule",{value:!0});pg.ActorOptimizeQueryOperationJoinConnected=void 0;const GW=A0,PP=Tt;class dp extends GW.ActorOptimizeQueryOperation{async test(e){return!0}async run(e){return{operation:PP.Util.mapOperation(e.operation,{join(n,a){return{recurse:!1,result:dp.cluster(n,a)}}}),context:e.context}}static cluster(e,r){const n=e.input.map(u=>({inScopeVariables:Object.fromEntries(PP.Util.inScopeVariables(u).map(c=>[c.value,!0])),entries:[u]}));let a,s=n;do a=s,s=dp.clusterIteration(a);while(a.length!==s.length);const o=s.map(u=>r.createJoin(u.entries));return o.length===1?o[0]:r.createJoin(o,!1)}static clusterIteration(e){const r=[];for(const n of e){let a=!1;for(const s of r)if(dp.haveOverlappingVariables(n.inScopeVariables,s.inScopeVariables)){s.entries=[...s.entries,...n.entries],s.inScopeVariables={...s.inScopeVariables,...n.inScopeVariables},a=!0;break}a||r.push({inScopeVariables:n.inScopeVariables,entries:n.entries})}return r}static haveOverlappingVariables(e,r){for(const n of Object.keys(e))if(r[n])return!0;return!1}}pg.ActorOptimizeQueryOperationJoinConnected=dp;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(pg,t)})(VC);var jf={},yg={};Object.defineProperty(yg,"__esModule",{value:!0});yg.MediatorNumber=void 0;const zW=et;class WW extends zW.Mediator{constructor(e){super(e),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return e=>e.reduce((r,n,a)=>{const s=this.getOrDefault(n[this.field],Number.POSITIVE_INFINITY);return s!==null&&(Number.isNaN(r[0])||r[0]>s)?[s,a]:r},[Number.NaN,-1])[1];case"max":return e=>e.reduce((r,n,a)=>{const s=this.getOrDefault(n[this.field],Number.NEGATIVE_INFINITY);return s!==null&&(Number.isNaN(r[0])||r[0]<s)?[s,a]:r},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(e,r){return e===void 0?r:e}async mediateWith(e,r){let n=r.map(({reply:u})=>u);const a=[];if(this.ignoreErrors){const u={};u[this.field]=null,n=n.map(c=>c.catch(l=>(a.push(l),u)))}const s=await Promise.all(n),o=this.indexPicker(s);if(o<0)throw new Error(`All actors rejected their test in ${this.name}
${a.map(u=>u.message).join(`
`)}`);return r[o].actor}}yg.MediatorNumber=WW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(yg,t)})(jf);var HC={},bg={},ba={},mg={};Object.defineProperty(mg,"__esModule",{value:!0});mg.MetadataValidationState=void 0;class XW{constructor(){this.invalidateListeners=[],this.valid=!0}addInvalidateListener(e){this.invalidateListeners.push(e)}invalidate(){if(this.valid){this.valid=!1;for(const e of this.invalidateListeners)e()}}}mg.MetadataValidationState=XW;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(mg,t)})(ba);Object.defineProperty(bg,"__esModule",{value:!0});bg.ActorQueryOperationValues=void 0;const KW=Hn,JW=ft,YW=ba,ZW=Wt,eX=yt,tX=new KW.BindingsFactory,rX=new eX.DataFactory;class nX extends JW.ActorQueryOperationTyped{constructor(e){super(e,"values")}async testOperation(e,r){return!0}async runOperation(e,r){const n=new ZW.ArrayIterator(e.bindings.map(o=>tX.bindings(Object.entries(o).map(([u,c])=>[rX.variable(u.slice(1)),c])))),a=e.variables;return{type:"bindings",bindingsStream:n,metadata:()=>Promise.resolve({state:new YW.MetadataValidationState,cardinality:{type:"exact",value:e.bindings.length},canContainUndefs:e.bindings.some(o=>a.some(u=>!(`?${u.value}`in o))),variables:a})}}}bg.ActorQueryOperationValues=nX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(bg,t)})(HC);var Ci={},gg={};Object.defineProperty(gg,"__esModule",{value:!0});gg.MediatorRace=void 0;const iX=et;class aX extends iX.Mediator{constructor(e){super(e)}mediateWith(e,r){return new Promise((n,a)=>{const s=[];for(const o of r)o.reply.then(()=>{n(o.actor)}).catch(u=>{s.push(u),s.length===r.length&&a(new Error(`${this.name} mediated over all rejecting actors:
${s.map(c=>c.message).join(`
`)}`))})})}}gg.MediatorRace=aX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(gg,t)})(Ci);var kC={},_g={},ZA={},vg={};Object.defineProperty(vg,"__esModule",{value:!0});vg.ActorQueryParse=void 0;const sX=et;class oX extends sX.Actor{constructor(e){super(e)}}vg.ActorQueryParse=oX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(vg,t)})(ZA);Object.defineProperty(_g,"__esModule",{value:!0});_g.ActorQueryParseSparql=void 0;const uX=ZA,cX=Tt,lX=w0;class dX extends uX.ActorQueryParse{constructor(e){super(e),this.prefixes=Object.freeze(this.prefixes)}async test(e){if(e.queryFormat&&e.queryFormat.language!=="sparql")throw new Error("This actor can only parse SPARQL queries");return!0}async run(e){const n=new lX.Parser({prefixes:this.prefixes,baseIRI:e.baseIRI,sparqlStar:!0}).parse(e.query);return{baseIRI:n.type==="query"?n.base:void 0,operation:(0,cX.translate)(n,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:e.baseIRI})}}}_g.ActorQueryParseSparql=dX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(_g,t)})(kC);var QC={},wg={},GC={},ex={},tx={},nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.DirectiveNodeHandlerAdapter=void 0;class fX{constructor(e,r,n){this.targetKind=e,this.util=r,this.settings=n}getDirectiveConditionalValue(e,r){const n=this.util.getArgument(e.arguments,"if");if(!n)throw new Error(`The directive ${e.name.value} is missing an if-argument.`);const a=this.util.handleNodeValue(n.value,n.name.value,r);if(a.terms.length!==1)throw new Error(`Can not apply the directive ${e.name.value} with a list.`);return a.terms[0]}isDirectiveScopeAll(e){const r=this.util.getArgument(e.arguments,"scope");return r&&r.value.kind==="EnumValue"&&r.value.value==="all"}}nu.DirectiveNodeHandlerAdapter=fX;var Sg={};Object.defineProperty(Sg,"__esModule",{value:!0});Sg.DirectiveNodeHandlerInclude=void 0;const hX=nu;class pX extends hX.DirectiveNodeHandlerAdapter{constructor(e,r){super("include",e,r)}handle(e,r){const n=this.getDirectiveConditionalValue(e.directive,r);return n.termType==="Literal"&&n.value==="false"?{ignore:!0}:{}}}Sg.DirectiveNodeHandlerInclude=pX;var Tg={};Object.defineProperty(Tg,"__esModule",{value:!0});Tg.DirectiveNodeHandlerOptional=void 0;const yX=nu;class bX extends yX.DirectiveNodeHandlerAdapter{constructor(e,r){super("optional",e,r)}handle(e,r){return{operationOverrider:n=>this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),n)}}}Tg.DirectiveNodeHandlerOptional=bX;var Eg={},Cf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SingularizeState=void 0,function(e){e[e.SINGLE=0]="SINGLE",e[e.PLURAL=1]="PLURAL"}(t.SingularizeState||(t.SingularizeState={}))})(Cf);Object.defineProperty(Eg,"__esModule",{value:!0});Eg.DirectiveNodeHandlerPlural=void 0;const mX=Cf,gX=nu;class _X extends gX.DirectiveNodeHandlerAdapter{constructor(e,r){super("plural",e,r)}handle(e,r){return this.isDirectiveScopeAll(e.directive)&&(r.singularizeState=mX.SingularizeState.PLURAL),delete r.singularizeVariables[this.util.nameToVariable(e.fieldLabel,r).value],{}}}Eg.DirectiveNodeHandlerPlural=_X;var Og={};Object.defineProperty(Og,"__esModule",{value:!0});Og.DirectiveNodeHandlerSingle=void 0;const vX=Cf,wX=nu;class SX extends wX.DirectiveNodeHandlerAdapter{constructor(e,r){super("single",e,r)}handle(e,r){return this.isDirectiveScopeAll(e.directive)&&(r.singularizeState=vX.SingularizeState.SINGLE),r.singularizeVariables[this.util.nameToVariable(e.fieldLabel,r).value]=!0,{}}}Og.DirectiveNodeHandlerSingle=SX;var Ag={};Object.defineProperty(Ag,"__esModule",{value:!0});Ag.DirectiveNodeHandlerSkip=void 0;const TX=nu;class EX extends TX.DirectiveNodeHandlerAdapter{constructor(e,r){super("skip",e,r)}handle(e,r){const n=this.getDirectiveConditionalValue(e.directive,r);return n.termType==="Literal"&&n.value==="true"?{ignore:!0}:{}}}Ag.DirectiveNodeHandlerSkip=EX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(nu,t),r(Sg,t),r(Tg,t),r(Eg,t),r(Og,t),r(Ag,t)})(tx);var zC={},ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.NodeValueHandlerAdapter=void 0;class OX{constructor(e,r,n){this.targetKind=e,this.util=r,this.settings=n}}ma.NodeValueHandlerAdapter=OX;var xg={};Object.defineProperty(xg,"__esModule",{value:!0});xg.NodeValueHandlerBoolean=void 0;const AX=ma;class xX extends AX.NodeValueHandlerAdapter{constructor(e,r){super("BooleanValue",e,r),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")}handle(e,r,n){return{terms:[this.util.dataFactory.literal(e.value?"true":"false",this.datatype)]}}}xg.NodeValueHandlerBoolean=xX;var Rg={};Object.defineProperty(Rg,"__esModule",{value:!0});Rg.NodeValueHandlerEnum=void 0;const RX=ma;class IX extends RX.NodeValueHandlerAdapter{constructor(e,r){super("EnumValue",e,r)}handle(e,r,n){return{terms:[this.util.valueToNamedNode(e.value,n.context)]}}}Rg.NodeValueHandlerEnum=IX;var Ig={};Object.defineProperty(Ig,"__esModule",{value:!0});Ig.NodeValueHandlerFloat=void 0;const PX=ma;class DX extends PX.NodeValueHandlerAdapter{constructor(e,r){super("FloatValue",e,r),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#float")}handle(e,r,n){return{terms:[this.util.dataFactory.literal(e.value,this.datatype)]}}}Ig.NodeValueHandlerFloat=DX;var Pg={};Object.defineProperty(Pg,"__esModule",{value:!0});Pg.NodeValueHandlerInt=void 0;const NX=ma;class jX extends NX.NodeValueHandlerAdapter{constructor(e,r){super("IntValue",e,r),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#integer")}handle(e,r,n){return{terms:[this.util.dataFactory.literal(e.value,this.datatype)]}}}Pg.NodeValueHandlerInt=jX;var Dg={};Object.defineProperty(Dg,"__esModule",{value:!0});Dg.NodeValueHandlerList=void 0;const CX=ma;class FX extends CX.NodeValueHandlerAdapter{constructor(e,r){super("ListValue",e,r),this.nodeFirst=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),this.nodeRest=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),this.nodeNil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(e,r,n){const a=[];let s=[];for(const o of e.values){const u=this.util.handleNodeValue(o,r,n);for(const c of u.terms)a.push(c);u.auxiliaryPatterns&&(s=s.concat(u.auxiliaryPatterns))}if(this.settings.arraysToRdfLists){const o=this.util.dataFactory.blankNode();let u=o,c=a.length;for(const l of a){s.push(this.util.operationFactory.createPattern(u,this.nodeFirst,l,n.graph));const d=--c===0?this.nodeNil:this.util.dataFactory.blankNode();s.push(this.util.operationFactory.createPattern(u,this.nodeRest,d,n.graph)),u=d}return{terms:[o],auxiliaryPatterns:s}}else return{terms:a,auxiliaryPatterns:s}}}Dg.NodeValueHandlerList=FX;var Ng={};Object.defineProperty(Ng,"__esModule",{value:!0});Ng.NodeValueHandlerNull=void 0;const MX=ma;class LX extends MX.NodeValueHandlerAdapter{constructor(e,r){super("NullValue",e,r),this.nil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(e,r,n){return{terms:[this.nil]}}}Ng.NodeValueHandlerNull=LX;var jg={};Object.defineProperty(jg,"__esModule",{value:!0});jg.NodeValueHandlerObject=void 0;const BX=ma;class $X extends BX.NodeValueHandlerAdapter{constructor(e,r){super("ObjectValue",e,r)}handle(e,r,n){const a=this.util.dataFactory.blankNode();let s=[];for(const o of e.fields){const u=this.util.handleNodeValue(o.value,r,n);for(const c of u.terms)s.push(this.util.createQuadPattern(a,o.name,c,n.graph,n.context));u.auxiliaryPatterns&&(s=s.concat(u.auxiliaryPatterns))}return{terms:[a],auxiliaryPatterns:s}}}jg.NodeValueHandlerObject=$X;var Cg={};Object.defineProperty(Cg,"__esModule",{value:!0});Cg.NodeValueHandlerString=void 0;const UX=ma;class qX extends UX.NodeValueHandlerAdapter{constructor(e,r){super("StringValue",e,r)}handle(e,r,n){const a=n.context.getContextRaw()[r];let s,o;return a&&typeof a!="string"&&(a["@language"]?s=a["@language"]:a["@type"]&&(o=this.util.dataFactory.namedNode(a["@type"]))),{terms:[this.util.dataFactory.literal(e.value,s||o)]}}}Cg.NodeValueHandlerString=qX;var Fg={};Object.defineProperty(Fg,"__esModule",{value:!0});Fg.NodeValueHandlerVariable=void 0;const VX=ma;class HX extends VX.NodeValueHandlerAdapter{constructor(e,r){super("Variable",e,r)}handle(e,r,n){const a=e.name.value,s=n.variablesDict[a],o=n.variablesMetaDict[a];if(!s){if(!n.ignoreUnknownVariables&&(!o||o.mandatory))throw new Error(`Undefined variable: ${a}`);{const u=this.util.dataFactory.variable(a);return n.terminalVariables.map(c=>c.value).indexOf(a)<0&&n.terminalVariables.push(u),{terms:[u]}}}if(s.kind==="Variable")throw new Error(`Variable refers to another variable: ${a}`);if(o)if(o.list){if(s.kind!=="ListValue")throw new Error(`Expected a list, but got ${s.kind} for ${a}`);if(o.type){const u=s;for(const c of u.values)if(c.kind!==o.type)throw new Error(`Expected ${o.type}, but got ${c.kind} for ${a}`)}}else o.type;return this.util.handleNodeValue(s,r,n)}}Fg.NodeValueHandlerVariable=HX;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ma,t),r(xg,t),r(Rg,t),r(Ig,t),r(Pg,t),r(Dg,t),r(Ng,t),r(jg,t),r(Cg,t),r(Fg,t)})(zC);var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.NodeHandlerAdapter=void 0;class kX{constructor(e,r,n){this.targetKind=e,this.util=r,this.settings=n}getNodeQuadContextSelectionSet(e,r,n){const a={};if(e){for(const s of e.selections)if(s.kind==="Field"){const o=s;this.handleNodeQuadContextField(o,n,a,"id","subject"),this.handleNodeQuadContextField(o,n,a,"graph","graph")}}return a}handleNodeQuadContextField(e,r,n,a,s){if(!n[s]&&e.name.value===a){if(!n[s]){const o=this.util.getArgument(e.arguments,"_");if(o){const u=this.util.handleNodeValue(o.value,e.name.value,r);if(u.terms.length!==1)throw new Error(`Only single values can be set as ${a}, but got ${u.terms.length} at ${e.name.value}`);n[s]=u.terms[0],u.auxiliaryPatterns&&(n.auxiliaryPatterns||(n.auxiliaryPatterns=[]),n.auxiliaryPatterns.concat(u.auxiliaryPatterns))}}if(!n[s]){const o=this.util.nameToVariable(this.util.getFieldLabel(e),r);r.terminalVariables.push(o),n[s]=o}}}getDirectiveOutputs(e,r,n){const a=[];if(e)for(const s of e){const o=this.util.handleDirectiveNode({directive:s,fieldLabel:r},n);if(o){if(o.ignore)return null;a.push(o)}}return a}handleDirectiveOutputs(e,r){for(const n of e){if(n.ignore)return this.util.operationFactory.createBgp([]);n.operationOverrider&&(r=n.operationOverrider(r))}return r}}Sl.NodeHandlerAdapter=kX;var Ff={};Object.defineProperty(Ff,"__esModule",{value:!0});Ff.NodeHandlerDefinitionAdapter=void 0;const QX=Sl;class GX extends QX.NodeHandlerAdapter{constructor(e,r,n){super(e,r,n)}}Ff.NodeHandlerDefinitionAdapter=GX;var Mg={};Object.defineProperty(Mg,"__esModule",{value:!0});Mg.NodeHandlerDefinitionFragment=void 0;const zX=Ff;class WX extends zX.NodeHandlerDefinitionAdapter{constructor(e,r){super("FragmentDefinition",e,r)}handle(e,r){throw new Error("Illegal state: fragment definitions must be indexed and removed before processing")}}Mg.NodeHandlerDefinitionFragment=WX;var Lg={};Object.defineProperty(Lg,"__esModule",{value:!0});Lg.NodeHandlerDefinitionOperation=void 0;const XX=Ff;class KX extends XX.NodeHandlerDefinitionAdapter{constructor(e,r){super("OperationDefinition",e,r)}handle(e,r){if(e.operation!=="query")throw new Error("Unsupported definition operation: "+e.operation);if(e.variableDefinitions)for(const s of e.variableDefinitions){const o=s.variable.name.value;s.defaultValue&&(r.variablesDict[o]||(r.variablesDict[o]=s.defaultValue));let u=s.type;const c=u.kind==="NonNullType";c&&(u=u.type);const l=u.kind==="ListType";l&&(u=u.type);const d=u.name.value;r.variablesMetaDict[o]={mandatory:c,list:l,type:d}}const n=this.getDirectiveOutputs(e.directives,e.name?e.name.value:"",r);if(!n)return this.util.operationFactory.createBgp([]);const a=this.util.joinOperations(e.selectionSet.selections.map(s=>this.util.handleNode(s,r)));return this.handleDirectiveOutputs(n,a)}}Lg.NodeHandlerDefinitionOperation=KX;var Bg={};Object.defineProperty(Bg,"__esModule",{value:!0});Bg.NodeHandlerDocument=void 0;const DP=Tt,JX=Sl;class YX extends JX.NodeHandlerAdapter{constructor(e,r){super("Document",e,r)}handle(e,r){const n=e.definitions.map(s=>{const o=this.getNodeQuadContextDefinitionNode(s,Object.assign(Object.assign({},r),{ignoreUnknownVariables:!0})),u=Object.assign(Object.assign({},r),{graph:o.graph||r.graph,subject:o.subject||this.util.dataFactory.blankNode()});let c=this.util.handleNode(s,u);return o&&o.auxiliaryPatterns&&(c=this.util.joinOperations([c,this.util.operationFactory.createBgp(o.auxiliaryPatterns)])),c}),a=this.util.operationFactory.createProject(n.length===1?n[0]:this.util.operationFactory.createUnion(n),r.terminalVariables);return this.translateBlankNodesToVariables(a)}getNodeQuadContextDefinitionNode(e,r){if(e.kind==="OperationDefinition")return this.getNodeQuadContextSelectionSet(e.selectionSet,e.name?e.name.value:"",r);throw new Error(`Unsupported definition: ${e.kind}`)}translateBlankNodesToVariables(e){const r=this,n={},a=Array.from(e.variables).reduce((o,u)=>(o[u.value]=!0,o),{});return DP.Util.mapOperation(e,{path:(o,u)=>({recurse:!1,result:u.createPath(s(o.subject),o.predicate,s(o.object),s(o.graph))}),pattern:(o,u)=>({recurse:!1,result:u.createPattern(s(o.subject),s(o.predicate),s(o.object),s(o.graph))})});function s(o){if(o.termType==="BlankNode"){let u=n[o.value];return u||(u=DP.Util.createUniqueVariable(o.value,a,r.util.dataFactory),a[u.value]=!0,n[o.value]=u),u}return o}}}Bg.NodeHandlerDocument=YX;var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});Tl.NodeHandlerSelectionAdapter=void 0;const ZX=Tt,eK=Cf,tK=Sl;class rK extends tK.NodeHandlerAdapter{constructor(e,r,n){super(e,r,n)}getNodeQuadContextFieldNode(e,r,n){return this.getNodeQuadContextSelectionSet(e.selectionSet,r,Object.assign(Object.assign({},n),{path:this.util.appendFieldToPath(n.path,r)}))}fieldToOperation(e,r,n,a){const s=n;let o=0,u;if((r.name.value==="id"||r.name.value==="graph")&&(n=!1,r.arguments))for(const w of r.arguments)w.name.value==="_"&&this.util.handleNodeValue(w.value,r.name.value,e);const c=this.util.getFieldLabel(r);if(e.singularizeState===eK.SingularizeState.SINGLE&&(e.singularizeVariables[this.util.nameToVariable(c,e).value]=!0),n){const w=this.handleMetaField(e,c,a);if(w)return w}const l=a?[this.util.operationFactory.createBgp(a)]:[],d=this.getNodeQuadContextFieldNode(r,c,e);let h=d.subject||this.util.nameToVariable(c,e),f=d.graph||e.graph;d.auxiliaryPatterns&&l.push(this.util.operationFactory.createBgp(d.auxiliaryPatterns));let p=!0,b=null;if(n&&r.arguments&&r.arguments.length){for(const w of r.arguments)if(w.name.value==="_"){const I=this.util.handleNodeValue(w.value,r.name.value,e);b=I.terms,l.push(this.util.operationFactory.createBgp(I.terms.map(O=>this.util.createQuadPattern(e.subject,r.name,O,e.graph,e.context)))),I.auxiliaryPatterns&&l.push(this.util.operationFactory.createBgp(I.auxiliaryPatterns)),n=!1;break}else if(w.name.value==="graph"){const I=this.util.handleNodeValue(w.value,r.name.value,e);if(I.terms.length!==1)throw new Error(`Only single values can be set as graph, but got ${I.terms.length} at ${r.name.value}`);f=I.terms[0],e=Object.assign(Object.assign({},e),{graph:f}),I.auxiliaryPatterns&&l.push(this.util.operationFactory.createBgp(I.auxiliaryPatterns));break}else if(w.name.value==="alt"){let I=w.value;I.kind!=="ListValue"&&(I={kind:"ListValue",values:[I]}),l.push(this.util.createQuadPath(e.subject,r.name,I,h,e.graph,e.context)),p=!1;break}}if(n&&p&&l.push(this.util.operationFactory.createBgp([this.util.createQuadPattern(e.subject,r.name,h,e.graph,e.context)])),r.arguments&&r.arguments.length){for(const w of r.arguments)if(!(w.name.value==="_"||w.name.value==="graph"||w.name.value==="alt"))if(w.name.value==="first"){if(w.value.kind!=="IntValue")throw new Error("Invalid value type for 'first' argument: "+w.value.kind);u=parseInt(w.value.value,10)}else if(w.name.value==="offset"){if(w.value.kind!=="IntValue")throw new Error("Invalid value type for 'offset' argument: "+w.value.kind);o=parseInt(w.value.value,10)}else{const I=this.util.handleNodeValue(w.value,w.name.value,e);l.push(this.util.operationFactory.createBgp(I.terms.map(O=>this.util.createQuadPattern(h,w.name,O,e.graph,e.context)))),I.auxiliaryPatterns&&l.push(this.util.operationFactory.createBgp(I.auxiliaryPatterns))}}const y=this.getDirectiveOutputs(r.directives,c,e);if(!y)return this.util.operationFactory.createBgp([]);let S=this.util.joinOperations(l);if(r.selectionSet&&r.selectionSet.selections.length){if(b){if(b.length!==1)throw new Error(`Only single values can be set as id, but got ${b.length} at ${r.name.value}`);h=b[0]}const w=Object.assign(Object.assign(Object.assign({},e),s?{path:this.util.appendFieldToPath(e.path,c)}:{}),{graph:f,subject:s?h:e.subject});let I=!1;const O=r.selectionSet.selections.filter(x=>x.kind==="Field"&&x.name.value==="totalCount"?(I=!0,!1):!0);let T=this.util.joinOperations(l.concat(O.map(x=>this.util.handleNode(x,w))));if(I){const x=this.util.dataFactory.variable("var"+this.settings.expressionVariableCounter++),P=this.util.dataFactory.variable(h.value+this.settings.variableDelimiter+"totalCount"),B=this.util.operationFactory.createBoundAggregate(x,"count",this.util.operationFactory.createTermExpression(h),!1),Q=this.util.operationFactory.createProject(this.util.operationFactory.createExtend(this.util.operationFactory.createGroup(S,[],[B]),P,this.util.operationFactory.createTermExpression(x)),[P]);e.terminalVariables.push(P),O.length?T=this.util.operationFactory.createJoin([this.util.operationFactory.createProject(T,[]),Q]):T=Q}S=T}else n&&h.termType==="Variable"&&e.terminalVariables.push(h);return(o||u)&&(S=this.util.operationFactory.createSlice(this.util.operationFactory.createProject(S,ZX.Util.inScopeVariables(S)),o,u)),this.handleDirectiveOutputs(y,S)}handleMetaField(e,r,n){if(r==="__typename"){const a=this.util.nameToVariable(r,e);return e.terminalVariables.push(a),this.util.operationFactory.createBgp([this.util.operationFactory.createPattern(e.subject,this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.util.nameToVariable(r,e),e.graph)].concat(n||[]))}}}Tl.NodeHandlerSelectionAdapter=rK;var $g={};Object.defineProperty($g,"__esModule",{value:!0});$g.NodeHandlerSelectionField=void 0;const nK=Tl;class iK extends nK.NodeHandlerSelectionAdapter{constructor(e,r){super("Field",e,r)}handle(e,r){return this.fieldToOperation(r,e,!0)}}$g.NodeHandlerSelectionField=iK;var Ug={};Object.defineProperty(Ug,"__esModule",{value:!0});Ug.NodeHandlerSelectionFragmentSpread=void 0;const aK=Tl;class sK extends aK.NodeHandlerSelectionAdapter{constructor(e,r){super("FragmentSpread",e,r)}handle(e,r){const n=r.fragmentDefinitions[e.name.value];if(!n)throw new Error("Undefined fragment definition: "+e.name.value);const a={alias:void 0,arguments:void 0,directives:n.directives,kind:"Field",name:e.name,selectionSet:n.selectionSet},s=[this.util.newTypePattern(r.subject,n.typeCondition,r)];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(r,a,!1,s))}}Ug.NodeHandlerSelectionFragmentSpread=sK;var qg={};Object.defineProperty(qg,"__esModule",{value:!0});qg.NodeHandlerSelectionInlineFragment=void 0;const oK=Tl;class uK extends oK.NodeHandlerSelectionAdapter{constructor(e,r){super("InlineFragment",e,r)}handle(e,r){const n={alias:void 0,arguments:void 0,directives:e.directives,kind:"Field",name:{kind:"Name",value:r.subject.value},selectionSet:e.selectionSet},a=e.typeCondition?[this.util.newTypePattern(r.subject,e.typeCondition,r)]:[];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(r,n,!1,a))}}qg.NodeHandlerSelectionInlineFragment=uK;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(tx,t),r(zC,t),r(Sl,t),r(Ff,t),r(Mg,t),r(Lg,t),r(Bg,t),r(Tl,t),r($g,t),r(Ug,t),r(qg,t)})(ex);var Vg={},WC=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag",cK=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;const ZE=cK;function ab(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ab=function(r){return typeof r}:ab=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ab(t)}var lK=10,XC=2;function KC(t){return Hg(t,[])}function Hg(t,e){switch(ab(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return t===null?"null":dK(t,e);default:return String(t)}}function dK(t,e){if(e.indexOf(t)!==-1)return"[Circular]";var r=[].concat(e,[t]),n=pK(t);if(n!==void 0){var a=n.call(t);if(a!==t)return typeof a=="string"?a:Hg(a,r)}else if(Array.isArray(t))return hK(t,r);return fK(t,r)}function fK(t,e){var r=Object.keys(t);if(r.length===0)return"{}";if(e.length>XC)return"["+yK(t)+"]";var n=r.map(function(a){var s=Hg(t[a],e);return a+": "+s});return"{ "+n.join(", ")+" }"}function hK(t,e){if(t.length===0)return"[]";if(e.length>XC)return"[Array]";for(var r=Math.min(lK,t.length),n=t.length-r,a=[],s=0;s<r;++s)a.push(Hg(t[s],e));return n===1?a.push("... 1 more item"):n>1&&a.push("... ".concat(n," more items")),"["+a.join(", ")+"]"}function pK(t){var e=t[String(ZE)];if(typeof e=="function")return e;if(typeof t.inspect=="function")return t.inspect}function yK(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){var r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}function LS(t,e){var r=!!t;if(!r)throw new Error(e)}const bK=function(e,r){return e instanceof r};function NP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mK(t,e,r){return e&&NP(t.prototype,e),r&&NP(t,r),t}var rx=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof e=="string"||LS(0,"Body must be a string. Received: ".concat(KC(e),".")),this.body=e,this.name=r,this.locationOffset=n,this.locationOffset.line>0||LS(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||LS(0,"column in locationOffset is 1-indexed and must be positive.")}return mK(t,[{key:WC,get:function(){return"Source"}}]),t}();function gK(t){return bK(t,rx)}function $b(t,e){for(var r=/\r\n|[\n\r]/g,n=1,a=e+1,s;(s=r.exec(t.body))&&s.index<e;)n+=1,a=e+1-(s.index+s[0].length);return{line:n,column:a}}function JC(t){return nx(t.source,$b(t.source,t.start))}function nx(t,e){var r=t.locationOffset.column-1,n=sb(r)+t.body,a=e.line-1,s=t.locationOffset.line-1,o=e.line+s,u=e.line===1?r:0,c=e.column+u,l="".concat(t.name,":").concat(o,":").concat(c,`
`),d=n.split(/\r\n|[\n\r]/g),h=d[a];if(h.length>120){for(var f=Math.floor(c/80),p=c%80,b=[],y=0;y<h.length;y+=80)b.push(h.slice(y,y+80));return l+jP([["".concat(o),b[0]]].concat(b.slice(1,f+1).map(function(S){return["",S]}),[[" ",sb(p-1)+"^"],["",b[f+1]]]))}return l+jP([["".concat(o-1),d[a-1]],["".concat(o),h],["",sb(c-1)+"^"],["".concat(o+1),d[a+1]]])}function jP(t){var e=t.filter(function(n){n[0];var a=n[1];return a!==void 0}),r=Math.max.apply(Math,e.map(function(n){var a=n[0];return a.length}));return e.map(function(n){var a=n[0],s=n[1];return _K(r,a)+(s?" | "+s:" |")}).join(`
`)}function sb(t){return Array(t+1).join(" ")}function _K(t,e){return sb(t-e.length)+e}var Ge=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),De=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function ob(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ob=function(r){return typeof r}:ob=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ob(t)}function vK(t){return ob(t)=="object"&&t!==null}function ub(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ub=function(r){return typeof r}:ub=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ub(t)}function CP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(r),!0).forEach(function(n){SK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SK(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function EK(t,e,r){return e&&FP(t.prototype,e),r&&FP(t,r),t}function OK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Np(t,e)}function AK(t){var e=ZC();return function(){var n=jp(t),a;if(e){var s=jp(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return YC(this,a)}}function YC(t,e){return e&&(ub(e)==="object"||typeof e=="function")?e:Jh(t)}function Jh(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eO(t){var e=typeof Map=="function"?new Map:void 0;return eO=function(n){if(n===null||!xK(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,a)}function a(){return cb(n,arguments,jp(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Np(a,n)},eO(t)}function cb(t,e,r){return ZC()?cb=Reflect.construct:cb=function(a,s,o){var u=[null];u.push.apply(u,s);var c=Function.bind.apply(a,u),l=new c;return o&&Np(l,o.prototype),l},cb.apply(null,arguments)}function ZC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function xK(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Np(t,e){return Np=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},Np(t,e)}function jp(t){return jp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},jp(t)}var RK=function(t){OK(r,t);var e=AK(r);function r(n,a,s,o,u,c,l){var d,h,f,p;TK(this,r),p=e.call(this,n),p.name="GraphQLError",p.originalError=c??void 0,p.nodes=MP(Array.isArray(a)?a:a?[a]:void 0);for(var b=[],y=0,S=(w=p.nodes)!==null&&w!==void 0?w:[];y<S.length;y++){var w,I=S[y],O=I.loc;O!=null&&b.push(O)}b=MP(b),p.source=s??((d=b)===null||d===void 0?void 0:d[0].source),p.positions=o??((h=b)===null||h===void 0?void 0:h.map(function(x){return x.start})),p.locations=o&&s?o.map(function(x){return $b(s,x)}):(f=b)===null||f===void 0?void 0:f.map(function(x){return $b(x.source,x.start)}),p.path=u??void 0;var T=c==null?void 0:c.extensions;return l==null&&vK(T)?p.extensions=wK({},T):p.extensions=l??{},Object.defineProperties(Jh(p),{message:{enumerable:!0},locations:{enumerable:p.locations!=null},path:{enumerable:p.path!=null},extensions:{enumerable:p.extensions!=null&&Object.keys(p.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?(Object.defineProperty(Jh(p),"stack",{value:c.stack,writable:!0,configurable:!0}),YC(p)):(Error.captureStackTrace?Error.captureStackTrace(Jh(p),r):Object.defineProperty(Jh(p),"stack",{value:Error().stack,writable:!0,configurable:!0}),p)}return EK(r,[{key:"toString",value:function(){return IK(this)}},{key:WC,get:function(){return"Object"}}]),r}(eO(Error));function MP(t){return t===void 0||t.length===0?void 0:t}function IK(t){var e=t.message;if(t.nodes)for(var r=0,n=t.nodes;r<n.length;r++){var a=n[r];a.loc&&(e+=`

`+JC(a.loc))}else if(t.source&&t.locations)for(var s=0,o=t.locations;s<o.length;s++){var u=o[s];e+=`

`+nx(t.source,u)}return e}function la(t,e,r){return new RK("Syntax Error: ".concat(r),void 0,t,[e])}function PK(t,e){var r=!!t;if(!r)throw new Error(e??"Unexpected invariant triggered.")}function e9(t){var e=t.prototype.toJSON;typeof e=="function"||PK(0),t.prototype.inspect=e,ZE&&(t.prototype[ZE]=e)}var ix=function(){function t(r,n,a){this.start=r.start,this.end=n.end,this.startToken=r,this.endToken=n,this.source=a}var e=t.prototype;return e.toJSON=function(){return{start:this.start,end:this.end}},t}();e9(ix);var Qr=function(){function t(r,n,a,s,o,u,c){this.kind=r,this.start=n,this.end=a,this.line=s,this.column=o,this.value=c,this.prev=u,this.next=null}var e=t.prototype;return e.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t}();e9(Qr);function LP(t){return t!=null&&typeof t.kind=="string"}function DK(t){var e=t.split(/\r\n|[\n\r]/g),r=NK(t);if(r!==0)for(var n=1;n<e.length;n++)e[n]=e[n].slice(r);for(var a=0;a<e.length&&BP(e[a]);)++a;for(var s=e.length;s>a&&BP(e[s-1]);)--s;return e.slice(a,s).join(`
`)}function BP(t){for(var e=0;e<t.length;++e)if(t[e]!==" "&&t[e]!=="	")return!1;return!0}function NK(t){for(var e,r=!0,n=!0,a=0,s=null,o=0;o<t.length;++o)switch(t.charCodeAt(o)){case 13:t.charCodeAt(o+1)===10&&++o;case 10:r=!1,n=!0,a=0;break;case 9:case 32:++a;break;default:n&&!r&&(s===null||a<s)&&(s=a),n=!1}return(e=s)!==null&&e!==void 0?e:0}function jK(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=t.indexOf(`
`)===-1,a=t[0]===" "||t[0]==="	",s=t[t.length-1]==='"',o=t[t.length-1]==="\\",u=!n||s||o||r,c="";return u&&!(n&&a)&&(c+=`
`+e),c+=e?t.replace(/\n/g,`
`+e):t,u&&(c+=`
`),'"""'+c.replace(/"""/g,'\\"""')+'"""'}var t9=function(){function t(r){var n=new Qr(De.SOF,0,0,0,0,null);this.source=r,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}var e=t.prototype;return e.advance=function(){this.lastToken=this.token;var n=this.token=this.lookahead();return n},e.lookahead=function(){var n=this.token;if(n.kind!==De.EOF)do{var a;n=(a=n.next)!==null&&a!==void 0?a:n.next=FK(this,n)}while(n.kind===De.COMMENT);return n},t}();function CK(t){return t===De.BANG||t===De.DOLLAR||t===De.AMP||t===De.PAREN_L||t===De.PAREN_R||t===De.SPREAD||t===De.COLON||t===De.EQUALS||t===De.AT||t===De.BRACKET_L||t===De.BRACKET_R||t===De.BRACE_L||t===De.PIPE||t===De.BRACE_R}function dl(t){return isNaN(t)?De.EOF:t<127?JSON.stringify(String.fromCharCode(t)):'"\\u'.concat(("00"+t.toString(16).toUpperCase()).slice(-4),'"')}function FK(t,e){for(var r=t.source,n=r.body,a=n.length,s=e.end;s<a;){var o=n.charCodeAt(s),u=t.line,c=1+s-t.lineStart;switch(o){case 65279:case 9:case 32:case 44:++s;continue;case 10:++s,++t.line,t.lineStart=s;continue;case 13:n.charCodeAt(s+1)===10?s+=2:++s,++t.line,t.lineStart=s;continue;case 33:return new Qr(De.BANG,s,s+1,u,c,e);case 35:return LK(r,s,u,c,e);case 36:return new Qr(De.DOLLAR,s,s+1,u,c,e);case 38:return new Qr(De.AMP,s,s+1,u,c,e);case 40:return new Qr(De.PAREN_L,s,s+1,u,c,e);case 41:return new Qr(De.PAREN_R,s,s+1,u,c,e);case 46:if(n.charCodeAt(s+1)===46&&n.charCodeAt(s+2)===46)return new Qr(De.SPREAD,s,s+3,u,c,e);break;case 58:return new Qr(De.COLON,s,s+1,u,c,e);case 61:return new Qr(De.EQUALS,s,s+1,u,c,e);case 64:return new Qr(De.AT,s,s+1,u,c,e);case 91:return new Qr(De.BRACKET_L,s,s+1,u,c,e);case 93:return new Qr(De.BRACKET_R,s,s+1,u,c,e);case 123:return new Qr(De.BRACE_L,s,s+1,u,c,e);case 124:return new Qr(De.PIPE,s,s+1,u,c,e);case 125:return new Qr(De.BRACE_R,s,s+1,u,c,e);case 34:return n.charCodeAt(s+1)===34&&n.charCodeAt(s+2)===34?UK(r,s,u,c,e,t):$K(r,s,u,c,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return BK(r,s,o,u,c,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return VK(r,s,u,c,e)}throw la(r,s,MK(o))}var l=t.line,d=1+s-t.lineStart;return new Qr(De.EOF,a,a,l,d,e)}function MK(t){return t<32&&t!==9&&t!==10&&t!==13?"Cannot contain the invalid character ".concat(dl(t),"."):t===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(dl(t),".")}function LK(t,e,r,n,a){var s=t.body,o,u=e;do o=s.charCodeAt(++u);while(!isNaN(o)&&(o>31||o===9));return new Qr(De.COMMENT,e,u,r,n,a,s.slice(e+1,u))}function BK(t,e,r,n,a,s){var o=t.body,u=r,c=e,l=!1;if(u===45&&(u=o.charCodeAt(++c)),u===48){if(u=o.charCodeAt(++c),u>=48&&u<=57)throw la(t,c,"Invalid number, unexpected digit after 0: ".concat(dl(u),"."))}else c=BS(t,c,u),u=o.charCodeAt(c);if(u===46&&(l=!0,u=o.charCodeAt(++c),c=BS(t,c,u),u=o.charCodeAt(c)),(u===69||u===101)&&(l=!0,u=o.charCodeAt(++c),(u===43||u===45)&&(u=o.charCodeAt(++c)),c=BS(t,c,u),u=o.charCodeAt(c)),u===46||HK(u))throw la(t,c,"Invalid number, expected digit but got: ".concat(dl(u),"."));return new Qr(l?De.FLOAT:De.INT,e,c,n,a,s,o.slice(e,c))}function BS(t,e,r){var n=t.body,a=e,s=r;if(s>=48&&s<=57){do s=n.charCodeAt(++a);while(s>=48&&s<=57);return a}throw la(t,a,"Invalid number, expected digit but got: ".concat(dl(s),"."))}function $K(t,e,r,n,a){for(var s=t.body,o=e+1,u=o,c=0,l="";o<s.length&&!isNaN(c=s.charCodeAt(o))&&c!==10&&c!==13;){if(c===34)return l+=s.slice(u,o),new Qr(De.STRING,e,o+1,r,n,a,l);if(c<32&&c!==9)throw la(t,o,"Invalid character within String: ".concat(dl(c),"."));if(++o,c===92){switch(l+=s.slice(u,o-1),c=s.charCodeAt(o),c){case 34:l+='"';break;case 47:l+="/";break;case 92:l+="\\";break;case 98:l+="\b";break;case 102:l+="\f";break;case 110:l+=`
`;break;case 114:l+="\r";break;case 116:l+="	";break;case 117:{var d=qK(s.charCodeAt(o+1),s.charCodeAt(o+2),s.charCodeAt(o+3),s.charCodeAt(o+4));if(d<0){var h=s.slice(o+1,o+5);throw la(t,o,"Invalid character escape sequence: \\u".concat(h,"."))}l+=String.fromCharCode(d),o+=4;break}default:throw la(t,o,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}++o,u=o}}throw la(t,o,"Unterminated string.")}function UK(t,e,r,n,a,s){for(var o=t.body,u=e+3,c=u,l=0,d="";u<o.length&&!isNaN(l=o.charCodeAt(u));){if(l===34&&o.charCodeAt(u+1)===34&&o.charCodeAt(u+2)===34)return d+=o.slice(c,u),new Qr(De.BLOCK_STRING,e,u+3,r,n,a,DK(d));if(l<32&&l!==9&&l!==10&&l!==13)throw la(t,u,"Invalid character within String: ".concat(dl(l),"."));l===10?(++u,++s.line,s.lineStart=u):l===13?(o.charCodeAt(u+1)===10?u+=2:++u,++s.line,s.lineStart=u):l===92&&o.charCodeAt(u+1)===34&&o.charCodeAt(u+2)===34&&o.charCodeAt(u+3)===34?(d+=o.slice(c,u)+'"""',u+=4,c=u):++u}throw la(t,u,"Unterminated string.")}function qK(t,e,r,n){return Zy(t)<<12|Zy(e)<<8|Zy(r)<<4|Zy(n)}function Zy(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function VK(t,e,r,n,a){for(var s=t.body,o=s.length,u=e+1,c=0;u!==o&&!isNaN(c=s.charCodeAt(u))&&(c===95||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++u;return new Qr(De.NAME,e,u,r,n,a,s.slice(e,u))}function HK(t){return t===95||t>=65&&t<=90||t>=97&&t<=122}var r9=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function kK(t,e){var r=new ax(t,e);return r.parseDocument()}function QK(t,e){var r=new ax(t,e);r.expectToken(De.SOF);var n=r.parseValueLiteral(!1);return r.expectToken(De.EOF),n}function GK(t,e){var r=new ax(t,e);r.expectToken(De.SOF);var n=r.parseTypeReference();return r.expectToken(De.EOF),n}var ax=function(){function t(r,n){var a=gK(r)?r:new rx(r);this._lexer=new t9(a),this._options=n}var e=t.prototype;return e.parseName=function(){var n=this.expectToken(De.NAME);return{kind:Ge.NAME,value:n.value,loc:this.loc(n)}},e.parseDocument=function(){var n=this._lexer.token;return{kind:Ge.DOCUMENT,definitions:this.many(De.SOF,this.parseDefinition,De.EOF),loc:this.loc(n)}},e.parseDefinition=function(){if(this.peek(De.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(De.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},e.parseOperationDefinition=function(){var n=this._lexer.token;if(this.peek(De.BRACE_L))return{kind:Ge.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(n)};var a=this.parseOperationType(),s;return this.peek(De.NAME)&&(s=this.parseName()),{kind:Ge.OPERATION_DEFINITION,operation:a,name:s,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},e.parseOperationType=function(){var n=this.expectToken(De.NAME);switch(n.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(n)},e.parseVariableDefinitions=function(){return this.optionalMany(De.PAREN_L,this.parseVariableDefinition,De.PAREN_R)},e.parseVariableDefinition=function(){var n=this._lexer.token;return{kind:Ge.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(De.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(De.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(n)}},e.parseVariable=function(){var n=this._lexer.token;return this.expectToken(De.DOLLAR),{kind:Ge.VARIABLE,name:this.parseName(),loc:this.loc(n)}},e.parseSelectionSet=function(){var n=this._lexer.token;return{kind:Ge.SELECTION_SET,selections:this.many(De.BRACE_L,this.parseSelection,De.BRACE_R),loc:this.loc(n)}},e.parseSelection=function(){return this.peek(De.SPREAD)?this.parseFragment():this.parseField()},e.parseField=function(){var n=this._lexer.token,a=this.parseName(),s,o;return this.expectOptionalToken(De.COLON)?(s=a,o=this.parseName()):o=a,{kind:Ge.FIELD,alias:s,name:o,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(De.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},e.parseArguments=function(n){var a=n?this.parseConstArgument:this.parseArgument;return this.optionalMany(De.PAREN_L,a,De.PAREN_R)},e.parseArgument=function(){var n=this._lexer.token,a=this.parseName();return this.expectToken(De.COLON),{kind:Ge.ARGUMENT,name:a,value:this.parseValueLiteral(!1),loc:this.loc(n)}},e.parseConstArgument=function(){var n=this._lexer.token;return{kind:Ge.ARGUMENT,name:this.parseName(),value:(this.expectToken(De.COLON),this.parseValueLiteral(!0)),loc:this.loc(n)}},e.parseFragment=function(){var n=this._lexer.token;this.expectToken(De.SPREAD);var a=this.expectOptionalKeyword("on");return!a&&this.peek(De.NAME)?{kind:Ge.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(n)}:{kind:Ge.INLINE_FRAGMENT,typeCondition:a?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},e.parseFragmentDefinition=function(){var n,a=this._lexer.token;return this.expectKeyword("fragment"),((n=this._options)===null||n===void 0?void 0:n.experimentalFragmentVariables)===!0?{kind:Ge.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(a)}:{kind:Ge.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(a)}},e.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},e.parseValueLiteral=function(n){var a=this._lexer.token;switch(a.kind){case De.BRACKET_L:return this.parseList(n);case De.BRACE_L:return this.parseObject(n);case De.INT:return this._lexer.advance(),{kind:Ge.INT,value:a.value,loc:this.loc(a)};case De.FLOAT:return this._lexer.advance(),{kind:Ge.FLOAT,value:a.value,loc:this.loc(a)};case De.STRING:case De.BLOCK_STRING:return this.parseStringLiteral();case De.NAME:switch(this._lexer.advance(),a.value){case"true":return{kind:Ge.BOOLEAN,value:!0,loc:this.loc(a)};case"false":return{kind:Ge.BOOLEAN,value:!1,loc:this.loc(a)};case"null":return{kind:Ge.NULL,loc:this.loc(a)};default:return{kind:Ge.ENUM,value:a.value,loc:this.loc(a)}}case De.DOLLAR:if(!n)return this.parseVariable();break}throw this.unexpected()},e.parseStringLiteral=function(){var n=this._lexer.token;return this._lexer.advance(),{kind:Ge.STRING,value:n.value,block:n.kind===De.BLOCK_STRING,loc:this.loc(n)}},e.parseList=function(n){var a=this,s=this._lexer.token,o=function(){return a.parseValueLiteral(n)};return{kind:Ge.LIST,values:this.any(De.BRACKET_L,o,De.BRACKET_R),loc:this.loc(s)}},e.parseObject=function(n){var a=this,s=this._lexer.token,o=function(){return a.parseObjectField(n)};return{kind:Ge.OBJECT,fields:this.any(De.BRACE_L,o,De.BRACE_R),loc:this.loc(s)}},e.parseObjectField=function(n){var a=this._lexer.token,s=this.parseName();return this.expectToken(De.COLON),{kind:Ge.OBJECT_FIELD,name:s,value:this.parseValueLiteral(n),loc:this.loc(a)}},e.parseDirectives=function(n){for(var a=[];this.peek(De.AT);)a.push(this.parseDirective(n));return a},e.parseDirective=function(n){var a=this._lexer.token;return this.expectToken(De.AT),{kind:Ge.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(n),loc:this.loc(a)}},e.parseTypeReference=function(){var n=this._lexer.token,a;return this.expectOptionalToken(De.BRACKET_L)?(a=this.parseTypeReference(),this.expectToken(De.BRACKET_R),a={kind:Ge.LIST_TYPE,type:a,loc:this.loc(n)}):a=this.parseNamedType(),this.expectOptionalToken(De.BANG)?{kind:Ge.NON_NULL_TYPE,type:a,loc:this.loc(n)}:a},e.parseNamedType=function(){var n=this._lexer.token;return{kind:Ge.NAMED_TYPE,name:this.parseName(),loc:this.loc(n)}},e.parseTypeSystemDefinition=function(){var n=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(n.kind===De.NAME)switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(n)},e.peekDescription=function(){return this.peek(De.STRING)||this.peek(De.BLOCK_STRING)},e.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},e.parseSchemaDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("schema");var s=this.parseDirectives(!0),o=this.many(De.BRACE_L,this.parseOperationTypeDefinition,De.BRACE_R);return{kind:Ge.SCHEMA_DEFINITION,description:a,directives:s,operationTypes:o,loc:this.loc(n)}},e.parseOperationTypeDefinition=function(){var n=this._lexer.token,a=this.parseOperationType();this.expectToken(De.COLON);var s=this.parseNamedType();return{kind:Ge.OPERATION_TYPE_DEFINITION,operation:a,type:s,loc:this.loc(n)}},e.parseScalarTypeDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("scalar");var s=this.parseName(),o=this.parseDirectives(!0);return{kind:Ge.SCALAR_TYPE_DEFINITION,description:a,name:s,directives:o,loc:this.loc(n)}},e.parseObjectTypeDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("type");var s=this.parseName(),o=this.parseImplementsInterfaces(),u=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:Ge.OBJECT_TYPE_DEFINITION,description:a,name:s,interfaces:o,directives:u,fields:c,loc:this.loc(n)}},e.parseImplementsInterfaces=function(){var n;if(!this.expectOptionalKeyword("implements"))return[];if(((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLImplementsInterfaces)===!0){var a=[];this.expectOptionalToken(De.AMP);do a.push(this.parseNamedType());while(this.expectOptionalToken(De.AMP)||this.peek(De.NAME));return a}return this.delimitedMany(De.AMP,this.parseNamedType)},e.parseFieldsDefinition=function(){var n;return((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLEmptyFields)===!0&&this.peek(De.BRACE_L)&&this._lexer.lookahead().kind===De.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(De.BRACE_L,this.parseFieldDefinition,De.BRACE_R)},e.parseFieldDefinition=function(){var n=this._lexer.token,a=this.parseDescription(),s=this.parseName(),o=this.parseArgumentDefs();this.expectToken(De.COLON);var u=this.parseTypeReference(),c=this.parseDirectives(!0);return{kind:Ge.FIELD_DEFINITION,description:a,name:s,arguments:o,type:u,directives:c,loc:this.loc(n)}},e.parseArgumentDefs=function(){return this.optionalMany(De.PAREN_L,this.parseInputValueDef,De.PAREN_R)},e.parseInputValueDef=function(){var n=this._lexer.token,a=this.parseDescription(),s=this.parseName();this.expectToken(De.COLON);var o=this.parseTypeReference(),u;this.expectOptionalToken(De.EQUALS)&&(u=this.parseValueLiteral(!0));var c=this.parseDirectives(!0);return{kind:Ge.INPUT_VALUE_DEFINITION,description:a,name:s,type:o,defaultValue:u,directives:c,loc:this.loc(n)}},e.parseInterfaceTypeDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("interface");var s=this.parseName(),o=this.parseImplementsInterfaces(),u=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:Ge.INTERFACE_TYPE_DEFINITION,description:a,name:s,interfaces:o,directives:u,fields:c,loc:this.loc(n)}},e.parseUnionTypeDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("union");var s=this.parseName(),o=this.parseDirectives(!0),u=this.parseUnionMemberTypes();return{kind:Ge.UNION_TYPE_DEFINITION,description:a,name:s,directives:o,types:u,loc:this.loc(n)}},e.parseUnionMemberTypes=function(){return this.expectOptionalToken(De.EQUALS)?this.delimitedMany(De.PIPE,this.parseNamedType):[]},e.parseEnumTypeDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("enum");var s=this.parseName(),o=this.parseDirectives(!0),u=this.parseEnumValuesDefinition();return{kind:Ge.ENUM_TYPE_DEFINITION,description:a,name:s,directives:o,values:u,loc:this.loc(n)}},e.parseEnumValuesDefinition=function(){return this.optionalMany(De.BRACE_L,this.parseEnumValueDefinition,De.BRACE_R)},e.parseEnumValueDefinition=function(){var n=this._lexer.token,a=this.parseDescription(),s=this.parseName(),o=this.parseDirectives(!0);return{kind:Ge.ENUM_VALUE_DEFINITION,description:a,name:s,directives:o,loc:this.loc(n)}},e.parseInputObjectTypeDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("input");var s=this.parseName(),o=this.parseDirectives(!0),u=this.parseInputFieldsDefinition();return{kind:Ge.INPUT_OBJECT_TYPE_DEFINITION,description:a,name:s,directives:o,fields:u,loc:this.loc(n)}},e.parseInputFieldsDefinition=function(){return this.optionalMany(De.BRACE_L,this.parseInputValueDef,De.BRACE_R)},e.parseTypeSystemExtension=function(){var n=this._lexer.lookahead();if(n.kind===De.NAME)switch(n.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(n)},e.parseSchemaExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var a=this.parseDirectives(!0),s=this.optionalMany(De.BRACE_L,this.parseOperationTypeDefinition,De.BRACE_R);if(a.length===0&&s.length===0)throw this.unexpected();return{kind:Ge.SCHEMA_EXTENSION,directives:a,operationTypes:s,loc:this.loc(n)}},e.parseScalarTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var a=this.parseName(),s=this.parseDirectives(!0);if(s.length===0)throw this.unexpected();return{kind:Ge.SCALAR_TYPE_EXTENSION,name:a,directives:s,loc:this.loc(n)}},e.parseObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var a=this.parseName(),s=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),u=this.parseFieldsDefinition();if(s.length===0&&o.length===0&&u.length===0)throw this.unexpected();return{kind:Ge.OBJECT_TYPE_EXTENSION,name:a,interfaces:s,directives:o,fields:u,loc:this.loc(n)}},e.parseInterfaceTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var a=this.parseName(),s=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),u=this.parseFieldsDefinition();if(s.length===0&&o.length===0&&u.length===0)throw this.unexpected();return{kind:Ge.INTERFACE_TYPE_EXTENSION,name:a,interfaces:s,directives:o,fields:u,loc:this.loc(n)}},e.parseUnionTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var a=this.parseName(),s=this.parseDirectives(!0),o=this.parseUnionMemberTypes();if(s.length===0&&o.length===0)throw this.unexpected();return{kind:Ge.UNION_TYPE_EXTENSION,name:a,directives:s,types:o,loc:this.loc(n)}},e.parseEnumTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var a=this.parseName(),s=this.parseDirectives(!0),o=this.parseEnumValuesDefinition();if(s.length===0&&o.length===0)throw this.unexpected();return{kind:Ge.ENUM_TYPE_EXTENSION,name:a,directives:s,values:o,loc:this.loc(n)}},e.parseInputObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var a=this.parseName(),s=this.parseDirectives(!0),o=this.parseInputFieldsDefinition();if(s.length===0&&o.length===0)throw this.unexpected();return{kind:Ge.INPUT_OBJECT_TYPE_EXTENSION,name:a,directives:s,fields:o,loc:this.loc(n)}},e.parseDirectiveDefinition=function(){var n=this._lexer.token,a=this.parseDescription();this.expectKeyword("directive"),this.expectToken(De.AT);var s=this.parseName(),o=this.parseArgumentDefs(),u=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var c=this.parseDirectiveLocations();return{kind:Ge.DIRECTIVE_DEFINITION,description:a,name:s,arguments:o,repeatable:u,locations:c,loc:this.loc(n)}},e.parseDirectiveLocations=function(){return this.delimitedMany(De.PIPE,this.parseDirectiveLocation)},e.parseDirectiveLocation=function(){var n=this._lexer.token,a=this.parseName();if(r9[a.value]!==void 0)return a;throw this.unexpected(n)},e.loc=function(n){var a;if(((a=this._options)===null||a===void 0?void 0:a.noLocation)!==!0)return new ix(n,this._lexer.lastToken,this._lexer.source)},e.peek=function(n){return this._lexer.token.kind===n},e.expectToken=function(n){var a=this._lexer.token;if(a.kind===n)return this._lexer.advance(),a;throw la(this._lexer.source,a.start,"Expected ".concat(n9(n),", found ").concat($S(a),"."))},e.expectOptionalToken=function(n){var a=this._lexer.token;if(a.kind===n)return this._lexer.advance(),a},e.expectKeyword=function(n){var a=this._lexer.token;if(a.kind===De.NAME&&a.value===n)this._lexer.advance();else throw la(this._lexer.source,a.start,'Expected "'.concat(n,'", found ').concat($S(a),"."))},e.expectOptionalKeyword=function(n){var a=this._lexer.token;return a.kind===De.NAME&&a.value===n?(this._lexer.advance(),!0):!1},e.unexpected=function(n){var a=n??this._lexer.token;return la(this._lexer.source,a.start,"Unexpected ".concat($S(a),"."))},e.any=function(n,a,s){this.expectToken(n);for(var o=[];!this.expectOptionalToken(s);)o.push(a.call(this));return o},e.optionalMany=function(n,a,s){if(this.expectOptionalToken(n)){var o=[];do o.push(a.call(this));while(!this.expectOptionalToken(s));return o}return[]},e.many=function(n,a,s){this.expectToken(n);var o=[];do o.push(a.call(this));while(!this.expectOptionalToken(s));return o},e.delimitedMany=function(n,a){this.expectOptionalToken(n);var s=[];do s.push(a.call(this));while(this.expectOptionalToken(n));return s},t}();function $S(t){var e=t.value;return n9(t.kind)+(e!=null?' "'.concat(e,'"'):"")}function n9(t){return CK(t)?'"'.concat(t,'"'):t}var zK={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},vd=Object.freeze({});function i9(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zK,n=void 0,a=Array.isArray(t),s=[t],o=-1,u=[],c=void 0,l=void 0,d=void 0,h=[],f=[],p=t;do{o++;var b=o===s.length,y=b&&u.length!==0;if(b){if(l=f.length===0?void 0:h[h.length-1],c=d,d=f.pop(),y){if(a)c=c.slice();else{for(var S={},w=0,I=Object.keys(c);w<I.length;w++){var O=I[w];S[O]=c[O]}c=S}for(var T=0,x=0;x<u.length;x++){var P=u[x][0],B=u[x][1];a&&(P-=T),a&&B===null?(c.splice(P,1),T++):c[P]=B}}o=n.index,s=n.keys,u=n.edits,a=n.inArray,n=n.prev}else{if(l=d?a?o:s[o]:void 0,c=d?d[l]:p,c==null)continue;d&&h.push(l)}var Q=void 0;if(!Array.isArray(c)){if(!LP(c))throw new Error("Invalid AST Node: ".concat(KC(c),"."));var N=Ub(e,c.kind,b);if(N){if(Q=N.call(e,c,l,d,h,f),Q===vd)break;if(Q===!1){if(!b){h.pop();continue}}else if(Q!==void 0&&(u.push([l,Q]),!b))if(LP(Q))c=Q;else{h.pop();continue}}}if(Q===void 0&&y&&u.push([l,c]),b)h.pop();else{var D;n={inArray:a,index:o,keys:s,edits:u,prev:n},a=Array.isArray(c),s=a?c:(D=r[c.kind])!==null&&D!==void 0?D:[],o=-1,u=[],d&&f.push(d),d=c}}while(n!==void 0);return u.length!==0&&(p=u[u.length-1][1]),p}function WK(t){var e=new Array(t.length);return{enter:function(n){for(var a=0;a<t.length;a++)if(e[a]==null){var s=Ub(t[a],n.kind,!1);if(s){var o=s.apply(t[a],arguments);if(o===!1)e[a]=n;else if(o===vd)e[a]=vd;else if(o!==void 0)return o}}},leave:function(n){for(var a=0;a<t.length;a++)if(e[a]==null){var s=Ub(t[a],n.kind,!0);if(s){var o=s.apply(t[a],arguments);if(o===vd)e[a]=vd;else if(o!==void 0&&o!==!1)return o}}else e[a]===n&&(e[a]=null)}}}function Ub(t,e,r){var n=t[e];if(n){if(!r&&typeof n=="function")return n;var a=r?n.leave:n.enter;if(typeof a=="function")return a}else{var s=r?t.leave:t.enter;if(s){if(typeof s=="function")return s;var o=s[e];if(typeof o=="function")return o}}}function XK(t){return i9(t,{leave:JK})}var KK=80,JK={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return rt(e.definitions,`

`)+`
`},OperationDefinition:function(e){var r=e.operation,n=e.name,a=Hr("(",rt(e.variableDefinitions,", "),")"),s=rt(e.directives," "),o=e.selectionSet;return!n&&!s&&!a&&r==="query"?o:rt([r,rt([n,a]),s,o]," ")},VariableDefinition:function(e){var r=e.variable,n=e.type,a=e.defaultValue,s=e.directives;return r+": "+n+Hr(" = ",a)+Hr(" ",rt(s," "))},SelectionSet:function(e){var r=e.selections;return Va(r)},Field:function(e){var r=e.alias,n=e.name,a=e.arguments,s=e.directives,o=e.selectionSet,u=Hr("",r,": ")+n,c=u+Hr("(",rt(a,", "),")");return c.length>KK&&(c=u+Hr(`(
`,lb(rt(a,`
`)),`
)`)),rt([c,rt(s," "),o]," ")},Argument:function(e){var r=e.name,n=e.value;return r+": "+n},FragmentSpread:function(e){var r=e.name,n=e.directives;return"..."+r+Hr(" ",rt(n," "))},InlineFragment:function(e){var r=e.typeCondition,n=e.directives,a=e.selectionSet;return rt(["...",Hr("on ",r),rt(n," "),a]," ")},FragmentDefinition:function(e){var r=e.name,n=e.typeCondition,a=e.variableDefinitions,s=e.directives,o=e.selectionSet;return"fragment ".concat(r).concat(Hr("(",rt(a,", "),")")," ")+"on ".concat(n," ").concat(Hr("",rt(s," ")," "))+o},IntValue:function(e){var r=e.value;return r},FloatValue:function(e){var r=e.value;return r},StringValue:function(e,r){var n=e.value,a=e.block;return a?jK(n,r==="description"?"":"  "):JSON.stringify(n)},BooleanValue:function(e){var r=e.value;return r?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var r=e.value;return r},ListValue:function(e){var r=e.values;return"["+rt(r,", ")+"]"},ObjectValue:function(e){var r=e.fields;return"{"+rt(r,", ")+"}"},ObjectField:function(e){var r=e.name,n=e.value;return r+": "+n},Directive:function(e){var r=e.name,n=e.arguments;return"@"+r+Hr("(",rt(n,", "),")")},NamedType:function(e){var r=e.name;return r},ListType:function(e){var r=e.type;return"["+r+"]"},NonNullType:function(e){var r=e.type;return r+"!"},SchemaDefinition:qa(function(t){var e=t.directives,r=t.operationTypes;return rt(["schema",rt(e," "),Va(r)]," ")}),OperationTypeDefinition:function(e){var r=e.operation,n=e.type;return r+": "+n},ScalarTypeDefinition:qa(function(t){var e=t.name,r=t.directives;return rt(["scalar",e,rt(r," ")]," ")}),ObjectTypeDefinition:qa(function(t){var e=t.name,r=t.interfaces,n=t.directives,a=t.fields;return rt(["type",e,Hr("implements ",rt(r," & ")),rt(n," "),Va(a)]," ")}),FieldDefinition:qa(function(t){var e=t.name,r=t.arguments,n=t.type,a=t.directives;return e+($P(r)?Hr(`(
`,lb(rt(r,`
`)),`
)`):Hr("(",rt(r,", "),")"))+": "+n+Hr(" ",rt(a," "))}),InputValueDefinition:qa(function(t){var e=t.name,r=t.type,n=t.defaultValue,a=t.directives;return rt([e+": "+r,Hr("= ",n),rt(a," ")]," ")}),InterfaceTypeDefinition:qa(function(t){var e=t.name,r=t.interfaces,n=t.directives,a=t.fields;return rt(["interface",e,Hr("implements ",rt(r," & ")),rt(n," "),Va(a)]," ")}),UnionTypeDefinition:qa(function(t){var e=t.name,r=t.directives,n=t.types;return rt(["union",e,rt(r," "),n&&n.length!==0?"= "+rt(n," | "):""]," ")}),EnumTypeDefinition:qa(function(t){var e=t.name,r=t.directives,n=t.values;return rt(["enum",e,rt(r," "),Va(n)]," ")}),EnumValueDefinition:qa(function(t){var e=t.name,r=t.directives;return rt([e,rt(r," ")]," ")}),InputObjectTypeDefinition:qa(function(t){var e=t.name,r=t.directives,n=t.fields;return rt(["input",e,rt(r," "),Va(n)]," ")}),DirectiveDefinition:qa(function(t){var e=t.name,r=t.arguments,n=t.repeatable,a=t.locations;return"directive @"+e+($P(r)?Hr(`(
`,lb(rt(r,`
`)),`
)`):Hr("(",rt(r,", "),")"))+(n?" repeatable":"")+" on "+rt(a," | ")}),SchemaExtension:function(e){var r=e.directives,n=e.operationTypes;return rt(["extend schema",rt(r," "),Va(n)]," ")},ScalarTypeExtension:function(e){var r=e.name,n=e.directives;return rt(["extend scalar",r,rt(n," ")]," ")},ObjectTypeExtension:function(e){var r=e.name,n=e.interfaces,a=e.directives,s=e.fields;return rt(["extend type",r,Hr("implements ",rt(n," & ")),rt(a," "),Va(s)]," ")},InterfaceTypeExtension:function(e){var r=e.name,n=e.interfaces,a=e.directives,s=e.fields;return rt(["extend interface",r,Hr("implements ",rt(n," & ")),rt(a," "),Va(s)]," ")},UnionTypeExtension:function(e){var r=e.name,n=e.directives,a=e.types;return rt(["extend union",r,rt(n," "),a&&a.length!==0?"= "+rt(a," | "):""]," ")},EnumTypeExtension:function(e){var r=e.name,n=e.directives,a=e.values;return rt(["extend enum",r,rt(n," "),Va(a)]," ")},InputObjectTypeExtension:function(e){var r=e.name,n=e.directives,a=e.fields;return rt(["extend input",r,rt(n," "),Va(a)]," ")}};function qa(t){return function(e){return rt([e.description,t(e)],`
`)}}function rt(t){var e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(e=t==null?void 0:t.filter(function(n){return n}).join(r))!==null&&e!==void 0?e:""}function Va(t){return Hr(`{
`,lb(rt(t,`
`)),`
}`)}function Hr(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return e!=null&&e!==""?t+e+r:""}function lb(t){return Hr("  ",t.replace(/\n/g,`
  `))}function YK(t){return t.indexOf(`
`)!==-1}function $P(t){return t!=null&&t.some(YK)}function ZK(t){return a9(t)||s9(t)||u9(t)}function a9(t){return t.kind===Ge.OPERATION_DEFINITION||t.kind===Ge.FRAGMENT_DEFINITION}function eJ(t){return t.kind===Ge.FIELD||t.kind===Ge.FRAGMENT_SPREAD||t.kind===Ge.INLINE_FRAGMENT}function tJ(t){return t.kind===Ge.VARIABLE||t.kind===Ge.INT||t.kind===Ge.FLOAT||t.kind===Ge.STRING||t.kind===Ge.BOOLEAN||t.kind===Ge.NULL||t.kind===Ge.ENUM||t.kind===Ge.LIST||t.kind===Ge.OBJECT}function rJ(t){return t.kind===Ge.NAMED_TYPE||t.kind===Ge.LIST_TYPE||t.kind===Ge.NON_NULL_TYPE}function s9(t){return t.kind===Ge.SCHEMA_DEFINITION||o9(t)||t.kind===Ge.DIRECTIVE_DEFINITION}function o9(t){return t.kind===Ge.SCALAR_TYPE_DEFINITION||t.kind===Ge.OBJECT_TYPE_DEFINITION||t.kind===Ge.INTERFACE_TYPE_DEFINITION||t.kind===Ge.UNION_TYPE_DEFINITION||t.kind===Ge.ENUM_TYPE_DEFINITION||t.kind===Ge.INPUT_OBJECT_TYPE_DEFINITION}function u9(t){return t.kind===Ge.SCHEMA_EXTENSION||c9(t)}function c9(t){return t.kind===Ge.SCALAR_TYPE_EXTENSION||t.kind===Ge.OBJECT_TYPE_EXTENSION||t.kind===Ge.INTERFACE_TYPE_EXTENSION||t.kind===Ge.UNION_TYPE_EXTENSION||t.kind===Ge.ENUM_TYPE_EXTENSION||t.kind===Ge.INPUT_OBJECT_TYPE_EXTENSION}const nJ=Object.freeze(Object.defineProperty({__proto__:null,BREAK:vd,DirectiveLocation:r9,Kind:Ge,Lexer:t9,Location:ix,Source:rx,Token:Qr,TokenKind:De,getLocation:$b,getVisitFn:Ub,isDefinitionNode:ZK,isExecutableDefinitionNode:a9,isSelectionNode:eJ,isTypeDefinitionNode:o9,isTypeExtensionNode:c9,isTypeNode:rJ,isTypeSystemDefinitionNode:s9,isTypeSystemExtensionNode:u9,isValueNode:tJ,parse:kK,parseType:GK,parseValue:QK,print:XK,printLocation:JC,printSourceLocation:nx,visit:i9,visitInParallel:WK},Symbol.toStringTag,{value:"Module"})),iJ=iA(nJ);var x0={},vn={},kg={};(function(){(function(t){(function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(N){return N&&DataView.prototype.isPrototypeOf(N)}if(r.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(N){return N&&a.indexOf(Object.prototype.toString.call(N))>-1};function o(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(N))throw new TypeError("Invalid character in header field name");return N.toLowerCase()}function u(N){return typeof N!="string"&&(N=String(N)),N}function c(N){var D={next:function(){var F=N.shift();return{done:F===void 0,value:F}}};return r.iterable&&(D[Symbol.iterator]=function(){return D}),D}function l(N){this.map={},N instanceof l?N.forEach(function(D,F){this.append(F,D)},this):Array.isArray(N)?N.forEach(function(D){this.append(D[0],D[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(D){this.append(D,N[D])},this)}l.prototype.append=function(N,D){N=o(N),D=u(D);var F=this.map[N];this.map[N]=F?F+", "+D:D},l.prototype.delete=function(N){delete this.map[o(N)]},l.prototype.get=function(N){return N=o(N),this.has(N)?this.map[N]:null},l.prototype.has=function(N){return this.map.hasOwnProperty(o(N))},l.prototype.set=function(N,D){this.map[o(N)]=u(D)},l.prototype.forEach=function(N,D){for(var F in this.map)this.map.hasOwnProperty(F)&&N.call(D,this.map[F],F,this)},l.prototype.keys=function(){var N=[];return this.forEach(function(D,F){N.push(F)}),c(N)},l.prototype.values=function(){var N=[];return this.forEach(function(D){N.push(D)}),c(N)},l.prototype.entries=function(){var N=[];return this.forEach(function(D,F){N.push([F,D])}),c(N)},r.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);function d(N){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}function h(N){return new Promise(function(D,F){N.onload=function(){D(N.result)},N.onerror=function(){F(N.error)}})}function f(N){var D=new FileReader,F=h(D);return D.readAsArrayBuffer(N),F}function p(N){var D=new FileReader,F=h(D);return D.readAsText(N),F}function b(N){for(var D=new Uint8Array(N),F=new Array(D.length),W=0;W<D.length;W++)F[W]=String.fromCharCode(D[W]);return F.join("")}function y(N){if(N.slice)return N.slice(0);var D=new Uint8Array(N.byteLength);return D.set(new Uint8Array(N)),D.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(N){this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:r.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:r.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():r.arrayBuffer&&r.blob&&n(N)?(this._bodyArrayBuffer=y(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||s(N))?this._bodyArrayBuffer=y(N):this._bodyText=N=Object.prototype.toString.call(N):this._bodyText="",this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var N=d(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var N=d(this);if(N)return N;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(b(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function I(N){var D=N.toUpperCase();return w.indexOf(D)>-1?D:N}function O(N,D){D=D||{};var F=D.body;if(N instanceof O){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,D.headers||(this.headers=new l(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!F&&N._bodyInit!=null&&(F=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=D.credentials||this.credentials||"same-origin",(D.headers||!this.headers)&&(this.headers=new l(D.headers)),this.method=I(D.method||this.method||"GET"),this.mode=D.mode||this.mode||null,this.signal=D.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&F)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(F)}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function T(N){var D=new FormData;return N.trim().split("&").forEach(function(F){if(F){var W=F.split("="),z=W.shift().replace(/\+/g," "),M=W.join("=").replace(/\+/g," ");D.append(decodeURIComponent(z),decodeURIComponent(M))}}),D}function x(N){var D=new l,F=N.replace(/\r?\n[\t ]+/g," ");return F.split(/\r?\n/).forEach(function(W){var z=W.split(":"),M=z.shift().trim();if(M){var C=z.join(":").trim();D.append(M,C)}}),D}S.call(O.prototype);function P(N,D){D||(D={}),this.type="default",this.status=D.status===void 0?200:D.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in D?D.statusText:"OK",this.headers=new l(D.headers),this.url=D.url||"",this._initBody(N)}S.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},P.error=function(){var N=new P(null,{status:0,statusText:""});return N.type="error",N};var B=[301,302,303,307,308];P.redirect=function(N,D){if(B.indexOf(D)===-1)throw new RangeError("Invalid status code");return new P(null,{status:D,headers:{location:N}})},e.DOMException=t.DOMException;try{new e.DOMException}catch{e.DOMException=function(D,F){this.message=D,this.name=F;var W=Error(D);this.stack=W.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function Q(N,D){return new Promise(function(F,W){var z=new O(N,D);if(z.signal&&z.signal.aborted)return W(new e.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function C(){M.abort()}M.onload=function(){var V={status:M.status,statusText:M.statusText,headers:x(M.getAllResponseHeaders()||"")};V.url="responseURL"in M?M.responseURL:V.headers.get("X-Request-URL");var ie="response"in M?M.response:M.responseText;F(new P(ie,V))},M.onerror=function(){W(new TypeError("Network request failed"))},M.ontimeout=function(){W(new TypeError("Network request failed"))},M.onabort=function(){W(new e.DOMException("Aborted","AbortError"))},M.open(z.method,z.url,!0),z.credentials==="include"?M.withCredentials=!0:z.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&r.blob&&(M.responseType="blob"),z.headers.forEach(function(V,ie){M.setRequestHeader(ie,V)}),z.signal&&(z.signal.addEventListener("abort",C),M.onreadystatechange=function(){M.readyState===4&&z.signal.removeEventListener("abort",C)}),M.send(typeof z._bodyInit>"u"?null:z._bodyInit)})}return Q.polyfill=!0,t.fetch||(t.fetch=Q,t.Headers=l,t.Request=O,t.Response=P),e.Headers=l,e.Request=O,e.Response=P,e.fetch=Q,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:g)})();var Na={},ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.removeDotSegmentsOfPath=ku.removeDotSegments=ku.resolve=void 0;function aJ(t,e){e=e||"";const r=e.indexOf("#");if(r>0&&(e=e.substr(0,r)),!t.length){if(e.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${e}' for value '${t}'`);return e}if(t.startsWith("?")){const l=e.indexOf("?");return l>0&&(e=e.substr(0,l)),e+t}if(t.startsWith("#"))return e+t;if(!e.length){const l=t.indexOf(":");if(l<0)throw new Error(`Found invalid relative IRI '${t}' for a missing baseIRI`);return Cc(t,l)}const n=t.indexOf(":");if(n>=0)return Cc(t,n);const a=e.indexOf(":");if(a<0)throw new Error(`Found invalid baseIRI '${e}' for value '${t}'`);const s=e.substr(0,a+1);if(t.indexOf("//")===0)return s+Cc(t,n);let o;if(e.indexOf("//",a)===a+1){if(o=e.indexOf("/",a+3),o<0)return e.length>a+3?e+"/"+Cc(t,n):s+Cc(t,n)}else if(o=e.indexOf("/",a+1),o<0)return s+Cc(t,n);if(t.indexOf("/")===0)return e.substr(0,o)+qb(t);let u=e.substr(o);const c=u.lastIndexOf("/");return c>=0&&c<u.length-1&&(u=u.substr(0,c+1),t[0]==="."&&t[1]!=="."&&t[1]!=="/"&&t[2]&&(t=t.substr(1))),t=u+t,t=qb(t),e.substr(0,o)+t}ku.resolve=aJ;function qb(t){const e=[];let r=0;for(;r<t.length;)switch(t[r]){case"/":if(t[r+1]===".")if(t[r+2]==="."){if(!UP(t[r+3])){e.push([]),r++;break}e.pop(),t[r+3]||e.push([]),r+=3}else{if(!UP(t[r+2])){e.push([]),r++;break}t[r+2]||e.push([]),r+=2}else e.push([]),r++;break;case"#":case"?":e.length||e.push([]),e[e.length-1].push(t.substr(r)),r=t.length;break;default:e.length||e.push([]),e[e.length-1].push(t[r]),r++;break}return"/"+e.map(n=>n.join("")).join("/")}ku.removeDotSegments=qb;function Cc(t,e){let r=e+1;e>=0?t[e+1]==="/"&&t[e+2]==="/"&&(r=e+3):t[0]==="/"&&t[1]==="/"&&(r=2);const n=t.indexOf("/",r);if(n<0)return t;const a=t.substr(0,n),s=t.substr(n);return a+qb(s)}ku.removeDotSegmentsOfPath=Cc;function UP(t){return!t||t==="#"||t==="?"||t==="/"}(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ku,t)})(Na);var Mf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=t.ErrorCoded=void 0;class e extends Error{constructor(n,a){super(n),this.code=a}}t.ErrorCoded=e,function(r){r.COLLIDING_KEYWORDS="colliding keywords",r.CONFLICTING_INDEXES="conflicting indexes",r.CYCLIC_IRI_MAPPING="cyclic IRI mapping",r.INVALID_ID_VALUE="invalid @id value",r.INVALID_INDEX_VALUE="invalid @index value",r.INVALID_NEST_VALUE="invalid @nest value",r.INVALID_PREFIX_VALUE="invalid @prefix value",r.INVALID_PROPAGATE_VALUE="invalid @propagate value",r.INVALID_REVERSE_VALUE="invalid @reverse value",r.INVALID_IMPORT_VALUE="invalid @import value",r.INVALID_VERSION_VALUE="invalid @version value",r.INVALID_BASE_IRI="invalid base IRI",r.INVALID_CONTAINER_MAPPING="invalid container mapping",r.INVALID_CONTEXT_ENTRY="invalid context entry",r.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",r.INVALID_DEFAULT_LANGUAGE="invalid default language",r.INVALID_INCLUDED_VALUE="invalid @included value",r.INVALID_IRI_MAPPING="invalid IRI mapping",r.INVALID_JSON_LITERAL="invalid JSON literal",r.INVALID_KEYWORD_ALIAS="invalid keyword alias",r.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",r.INVALID_LANGUAGE_MAPPING="invalid language mapping",r.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",r.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",r.INVALID_LOCAL_CONTEXT="invalid local context",r.INVALID_REMOTE_CONTEXT="invalid remote context",r.INVALID_REVERSE_PROPERTY="invalid reverse property",r.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",r.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",r.INVALID_SCOPED_CONTEXT="invalid scoped context",r.INVALID_SCRIPT_ELEMENT="invalid script element",r.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",r.INVALID_TERM_DEFINITION="invalid term definition",r.INVALID_TYPE_MAPPING="invalid type mapping",r.INVALID_TYPE_VALUE="invalid type value",r.INVALID_TYPED_VALUE="invalid typed value",r.INVALID_VALUE_OBJECT="invalid value object",r.INVALID_VALUE_OBJECT_VALUE="invalid value object value",r.INVALID_VOCAB_MAPPING="invalid vocab mapping",r.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",r.KEYWORD_REDEFINITION="keyword redefinition",r.LOADING_DOCUMENT_FAILED="loading document failed",r.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",r.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",r.PROCESSING_MODE_CONFLICT="processing mode conflict",r.PROTECTED_TERM_REDEFINITION="protected term redefinition",r.CONTEXT_OVERFLOW="context overflow",r.INVALID_BASE_DIRECTION="invalid base direction",r.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",r.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",r.INVALID_EMBEDDED_NODE="invalid embedded node",r.INVALID_ANNOTATION="invalid annotation"}(t.ERROR_CODES||(t.ERROR_CODES={}))})(Mf);var R0={},sJ=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,oJ=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,uJ=/\s|\uFEFF|\xA0/,cJ=/\r?\n[\x20\x09]+/g,lJ=/[;,"]/,dJ=/[;,"]|\s/,fJ=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,So={IDLE:1,URI:2,ATTR:4};function qP(t){return t.replace(oJ,"")}function db(t){return uJ.test(t)}function hJ(t,e){for(;db(t[e]);)e++;return e}function VP(t){return dJ.test(t)||!fJ.test(t)}function pJ(t,e){return Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>r in e&&t[r]===e[r])}class Pr{constructor(e){this.refs=[],e&&this.parse(e)}rel(e){for(var r=[],n=e.toLowerCase(),a=0;a<this.refs.length;a++)this.refs[a].rel.toLowerCase()===n&&r.push(this.refs[a]);return r}get(e,r){e=e.toLowerCase(),r=r.toLowerCase();for(var n=[],a=0;a<this.refs.length;a++)this.refs[a][e].toLowerCase()===r&&n.push(this.refs[a]);return n}set(e){return this.refs.push(e),this}setUnique(e){return this.refs.some(r=>pJ(r,e))||this.refs.push(e),this}has(e,r){e=e.toLowerCase(),r=r.toLowerCase();for(var n=0;n<this.refs.length;n++)if(this.refs[n][e].toLowerCase()===r)return!0;return!1}parse(e,s){s=s||0,e=s?e.slice(s):e,e=qP(e).replace(cJ,"");for(var n=So.IDLE,a=e.length,s=0,o=null;s<a;)if(n===So.IDLE){if(db(e[s])){s++;continue}else if(e[s]==="<"){o!=null&&(o.rel!=null?this.refs.push(...Pr.expandRelations(o)):this.refs.push(o));var u=e.indexOf(">",s);if(u===-1)throw new Error("Expected end of URI delimiter at offset "+s);o={uri:e.slice(s+1,u)},s=u,n=So.URI}else throw new Error('Unexpected character "'+e[s]+'" at offset '+s);s++}else if(n===So.URI)if(db(e[s])){s++;continue}else if(e[s]===";")n=So.ATTR,s++;else if(e[s]===",")n=So.IDLE,s++;else throw new Error('Unexpected character "'+e[s]+'" at offset '+s);else if(n===So.ATTR){if(e[s]===";"||db(e[s])){s++;continue}var u=e.indexOf("=",s);u===-1&&(u=e.indexOf(";",s)),u===-1&&(u=e.length);var c=qP(e.slice(s,u)).toLowerCase(),l="";if(s=u+1,s=hJ(e,s),e[s]==='"')for(s++;s<a;){if(e[s]==='"'){s++;break}e[s]==="\\"&&s++,l+=e[s],s++}else{for(var u=s+1;!lJ.test(e[u])&&u<a;)u++;l=e.slice(s,u),s=u}switch(o[c]&&Pr.isSingleOccurenceAttr(c)||(c[c.length-1]==="*"?o[c]=Pr.parseExtendedValue(l):(l=c==="type"?l.toLowerCase():l,o[c]!=null?Array.isArray(o[c])?o[c].push(l):o[c]=[o[c],l]:o[c]=l)),e[s]){case",":n=So.IDLE;break;case";":n=So.ATTR;break}s++}else throw new Error('Unknown parser state "'+n+'"');return o!=null&&(o.rel!=null?this.refs.push(...Pr.expandRelations(o)):this.refs.push(o)),o=null,this}toString(){for(var e=[],r="",n=null,a=0;a<this.refs.length;a++)n=this.refs[a],r=Object.keys(this.refs[a]).reduce(function(s,o){return o==="uri"?s:s+"; "+Pr.formatAttribute(o,n[o])},"<"+n.uri+">"),e.push(r);return e.join(", ")}}Pr.isCompatibleEncoding=function(t){return sJ.test(t)};Pr.parse=function(t,e){return new Pr().parse(t,e)};Pr.isSingleOccurenceAttr=function(t){return t==="rel"||t==="type"||t==="media"||t==="title"||t==="title*"};Pr.isTokenAttr=function(t){return t==="rel"||t==="type"||t==="anchor"};Pr.escapeQuotes=function(t){return t.replace(/"/g,'\\"')};Pr.expandRelations=function(t){var e=t.rel.split(" ");return e.map(function(r){var n=Object.assign({},t);return n.rel=r,n})};Pr.parseExtendedValue=function(t){var e=/([^']+)?(?:'([^']*)')?(.+)/.exec(t);return{language:e[2].toLowerCase(),encoding:Pr.isCompatibleEncoding(e[1])?null:e[1].toLowerCase(),value:Pr.isCompatibleEncoding(e[1])?decodeURIComponent(e[3]):e[3]}};Pr.formatExtendedAttribute=function(t,e){var r=(e.encoding||"utf-8").toUpperCase(),n=e.language||"en",a="";return Buffer.isBuffer(e.value)&&Pr.isCompatibleEncoding(r)?a=e.value.toString(r):Buffer.isBuffer(e.value)?a=e.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):a=encodeURIComponent(e.value),t+"="+r+"'"+n+"'"+a};Pr.formatAttribute=function(t,e){return Array.isArray(e)?e.map(r=>Pr.formatAttribute(t,r)).join("; "):t[t.length-1]==="*"||typeof e!="string"?Pr.formatExtendedAttribute(t,e):(Pr.isTokenAttr(t)?e=VP(e)?'"'+Pr.escapeQuotes(e)+'"':Pr.escapeQuotes(e):VP(e)&&(e=encodeURIComponent(e),e=e.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),e='"'+e+'"'),t+"="+e)};var l9=Pr;Object.defineProperty(R0,"__esModule",{value:!0});R0.FetchDocumentLoader=void 0;const HP=Mf,yJ=l9,bJ=Na;class mJ{constructor(e){this.fetcher=e}async load(e){const r=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(r.ok&&r.headers){let n=r.headers.get("Content-Type");if(n){const a=n.indexOf(";");a>0&&(n=n.substr(0,a))}if(n==="application/ld+json")return await r.json();if(r.headers.has("Link")){let a;if(r.headers.forEach((s,o)=>{if(o==="link"){const u=(0,yJ.parse)(s);for(const c of u.get("type","application/ld+json"))if(c.rel==="alternate"){if(a)throw new Error("Multiple JSON-LD alternate links were found on "+e);a=(0,bJ.resolve)(c.uri,e)}}}),a)return this.load(a)}throw new HP.ErrorCoded(`Unsupported JSON-LD media type ${n}`,HP.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(r.statusText||`Status code: ${r.status}`)}}R0.FetchDocumentLoader=mJ;var sx={},Lf={};Object.defineProperty(Lf,"__esModule",{value:!0});Lf.Util=void 0;let ga=class Ro{static isCompactIri(e){return e.indexOf(":")>0&&!(e&&e[0]==="#")}static getPrefix(e,r){if(e&&e[0]==="#")return null;const n=e.indexOf(":");if(n>=0){if(e.length>n+1&&e.charAt(n+1)==="/"&&e.charAt(n+2)==="/")return null;const a=e.substr(0,n);if(a==="_")return null;if(r[a])return a}return null}static getContextValueId(e){if(e===null||typeof e=="string")return e;const r=e["@id"];return r||null}static isSimpleTermDefinitionPrefix(e,r){return!Ro.isPotentialKeyword(e)&&(r.allowPrefixNonGenDelims||typeof e=="string"&&(e[0]==="_"||Ro.isPrefixIriEndingWithGenDelim(e)))}static isPotentialKeyword(e){return typeof e=="string"&&Ro.KEYWORD_REGEX.test(e)}static isPrefixIriEndingWithGenDelim(e){return Ro.ENDS_WITH_GEN_DELIM.test(e)}static isPrefixValue(e){return e&&(typeof e=="string"||e&&typeof e=="object")}static isValidIri(e){return!!(e&&Ro.IRI_REGEX.test(e))}static isValidIriWeak(e){return!!e&&e[0]!==":"&&Ro.IRI_REGEX_WEAK.test(e)}static isValidKeyword(e){return Ro.VALID_KEYWORDS[e]}static isTermProtected(e,r){const n=e[r];return typeof n!="string"&&n&&n["@protected"]}static hasProtectedTerms(e){for(const r of Object.keys(e))if(Ro.isTermProtected(e,r))return!0;return!1}static isReservedInternalKeyword(e){return e.startsWith("@__")}static deepEqual(e,r){const n=Object.keys(e),a=Object.keys(r);return n.length!==a.length?!1:n.every(s=>{const o=e[s],u=r[s];return o===u||o!==null&&u!==null&&typeof o=="object"&&typeof u=="object"&&this.deepEqual(o,u)})}};ga.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/;ga.IRI_REGEX_WEAK=/(?::[^:])|\//;ga.KEYWORD_REGEX=/^@[a-z]+$/i;ga.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/;ga.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/;ga.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/;ga.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0};ga.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"];ga.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"];ga.ALIAS_RANGE_BLACKLIST=["@context","@preserve"];ga.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"];ga.CONTAINERS_1_0=["@list","@set","@index"];Lf.Util=ga;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpandOptions=t.JsonLdContextNormalized=void 0;const e=Na,r=Mf,n=Lf;class a{constructor(o){this.contextRaw=o}getContextRaw(){return this.contextRaw}expandTerm(o,u,c=t.defaultExpandOptions){const l=this.contextRaw[o];if(l===null||l&&l["@id"]===null)return null;let d=!0;if(l&&u){const S=n.Util.getContextValueId(l);if(S&&S!==o)if(typeof S!="string"||!n.Util.isValidIri(S)&&!n.Util.isValidKeyword(S))n.Util.isPotentialKeyword(S)||(d=!1);else return S}const h=n.Util.getPrefix(o,this.contextRaw),f=this.contextRaw["@vocab"],p=(!!f||f==="")&&f.indexOf(":")<0,b=this.contextRaw["@base"],y=n.Util.isPotentialKeyword(o);if(h){const S=this.contextRaw[h],w=n.Util.getContextValueId(S);if(w){if(typeof S=="string"||!c.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(w,c))return o}else if(w[0]!=="_"&&!y&&!S["@prefix"]&&!(o in this.contextRaw))return o;return w+o.substr(h.length+1)}}else if(u&&(f||f===""||c.allowVocabRelativeToBase&&b&&p)&&!y&&!n.Util.isCompactIri(o))if(p){if(c.allowVocabRelativeToBase)return(f||b?(0,e.resolve)(f,b):"")+o;throw new r.ErrorCoded(`Relative vocab expansion for term '${o}' with vocab '${f}' is not allowed.`,r.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+o;else if(!u&&b&&!y&&!n.Util.isCompactIri(o))return(0,e.resolve)(o,b);if(d)return o;throw new r.ErrorCoded(`Invalid IRI mapping found for context entry '${o}': '${JSON.stringify(l)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(o,u){if(u&&this.contextRaw["@vocab"]&&o.startsWith(this.contextRaw["@vocab"]))return o.substr(this.contextRaw["@vocab"].length);if(!u&&this.contextRaw["@base"]&&o.startsWith(this.contextRaw["@base"]))return o.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:o};for(const l in this.contextRaw){const d=this.contextRaw[l];if(d&&!n.Util.isPotentialKeyword(l)){const h=n.Util.getContextValueId(d);if(o.startsWith(h)){const f=o.substr(h.length);if(f)f.length<c.suffix.length&&(c.prefix=l,c.suffix=f);else if(u)return l}}}return c.prefix?c.prefix+":"+c.suffix:o}}t.JsonLdContextNormalized=a,t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(sx);Object.defineProperty(kg,"__esModule",{value:!0});kg.ContextParser=void 0;const kP=Na,Le=Mf,gJ=R0,Ha=sx,pt=Lf;class jo{constructor(e){e=e||{},this.documentLoader=e.documentLoader||new gJ.FetchDocumentLoader,this.documentCache={},this.validateContext=!e.skipValidation,this.expandContentTypeToBase=!!e.expandContentTypeToBase,this.remoteContextsDepthLimit=e.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in e?!!e.redirectSchemaOrgHttps:!0}static validateLanguage(e,r,n){if(typeof e!="string")throw new Le.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(e)}'`,n);if(!pt.Util.REGEX_LANGUAGE_TAG.test(e)){if(r)throw new Le.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(e)}'`,n);return!1}return!0}static validateDirection(e,r){if(typeof e!="string")throw new Le.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(e)}'`,Le.ERROR_CODES.INVALID_BASE_DIRECTION);if(!pt.Util.REGEX_DIRECTION_TAG.test(e)){if(r)throw new Le.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(e)}'`,Le.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(e){for(const r of Object.keys(e)){let n=e[r];if(n&&typeof n=="object"&&n["@reverse"]&&!n["@id"]){if(typeof n["@reverse"]!="string"||pt.Util.isValidKeyword(n["@reverse"]))throw new Le.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${n["@reverse"]}'`,Le.ERROR_CODES.INVALID_IRI_MAPPING);n=e[r]=Object.assign(Object.assign({},n),{"@id":n["@reverse"]}),n["@id"]=n["@reverse"],pt.Util.isPotentialKeyword(n["@reverse"])?delete n["@reverse"]:n["@reverse"]=!0}}return e}expandPrefixedTerms(e,r,n){const a=e.getContextRaw();for(const s of n||Object.keys(a))if(pt.Util.EXPAND_KEYS_BLACKLIST.indexOf(s)<0&&!pt.Util.isReservedInternalKeyword(s)){const o=a[s];if(pt.Util.isPotentialKeyword(s)&&pt.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(s)>=0&&(s!=="@type"||typeof a[s]=="object"&&!(a[s]["@protected"]||a[s]["@container"]==="@set")))throw new Le.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${s} to ${JSON.stringify(o)}`,Le.ERROR_CODES.KEYWORD_REDEFINITION);if(pt.Util.ALIAS_RANGE_BLACKLIST.indexOf(pt.Util.getContextValueId(o))>=0)throw new Le.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${s} to ${JSON.stringify(o)}`,Le.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(o&&pt.Util.isPotentialKeyword(pt.Util.getContextValueId(o))&&o["@prefix"]===!0)throw new Le.ErrorCoded(`Tried to use keyword aliases as prefix: '${s}': '${JSON.stringify(o)}'`,Le.ERROR_CODES.INVALID_TERM_DEFINITION);for(;pt.Util.isPrefixValue(a[s]);){const u=a[s];let c=!1;if(typeof u=="string")a[s]=e.expandTerm(u,!0),c=c||u!==a[s];else{const l=u["@id"],d=u["@type"],h=!("@prefix"in u)||pt.Util.isValidIri(s);if("@id"in u)l!=null&&typeof l=="string"&&(a[s]=Object.assign(Object.assign({},a[s]),{"@id":e.expandTerm(l,!0)}),c=c||l!==a[s]["@id"]);else if(!pt.Util.isPotentialKeyword(s)&&h){const f=e.expandTerm(s,!0);f!==s&&(a[s]=Object.assign(Object.assign({},a[s]),{"@id":f}),c=!0)}if(d&&typeof d=="string"&&d!=="@vocab"&&(!u["@container"]||!u["@container"]["@type"])&&h){let f=e.expandTerm(d,!0);r&&d===f&&(f=e.expandTerm(d,!1)),f!==d&&(c=!0,a[s]=Object.assign(Object.assign({},a[s]),{"@type":f}))}}if(!c)break}}}normalize(e,{processingMode:r,normalizeLanguageTags:n}){if(n||r===1)for(const a of Object.keys(e))if(a==="@language"&&typeof e[a]=="string")e[a]=e[a].toLowerCase();else{const s=e[a];if(s&&typeof s=="object"&&typeof s["@language"]=="string"){const o=s["@language"].toLowerCase();o!==s["@language"]&&(e[a]=Object.assign(Object.assign({},s),{"@language":o}))}}}containersToHash(e){for(const r of Object.keys(e)){const n=e[r];if(n&&typeof n=="object"){if(typeof n["@container"]=="string")e[r]=Object.assign(Object.assign({},n),{"@container":{[n["@container"]]:!0}});else if(Array.isArray(n["@container"])){const a={};for(const s of n["@container"])a[s]=!0;e[r]=Object.assign(Object.assign({},n),{"@container":a})}}}}applyScopedProtected(e,{processingMode:r},n){if(r&&r>=1.1&&e["@protected"]){for(const a of Object.keys(e))if(!pt.Util.isReservedInternalKeyword(a)&&!pt.Util.isPotentialKeyword(a)&&!pt.Util.isTermProtected(e,a)){const s=e[a];s&&typeof s=="object"?"@protected"in e[a]||(e[a]=Object.assign(Object.assign({},e[a]),{"@protected":!0})):(e[a]={"@id":s,"@protected":!0},pt.Util.isSimpleTermDefinitionPrefix(s,n)&&(e[a]=Object.assign(Object.assign({},e[a]),{"@prefix":!0})))}delete e["@protected"]}}validateKeywordRedefinitions(e,r,n,a){for(const s of a??Object.keys(r))if(pt.Util.isTermProtected(e,s)&&(typeof r[s]=="string"?r[s]={"@id":r[s],"@protected":!0}:r[s]=Object.assign(Object.assign({},r[s]),{"@protected":!0}),!pt.Util.deepEqual(e[s],r[s])))throw new Le.ErrorCoded(`Attempted to override the protected keyword ${s} from ${JSON.stringify(pt.Util.getContextValueId(e[s]))} to ${JSON.stringify(pt.Util.getContextValueId(r[s]))}`,Le.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(e,{processingMode:r}){for(const n of Object.keys(e)){if(pt.Util.isReservedInternalKeyword(n))continue;if(n==="")throw new Le.ErrorCoded(`The empty term is not allowed, got: '${n}': '${JSON.stringify(e[n])}'`,Le.ERROR_CODES.INVALID_TERM_DEFINITION);const a=e[n],s=typeof a;if(pt.Util.isPotentialKeyword(n)){switch(n.substr(1)){case"vocab":if(a!==null&&s!=="string")throw new Le.ErrorCoded(`Found an invalid @vocab IRI: ${a}`,Le.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(a!==null&&s!=="string")throw new Le.ErrorCoded(`Found an invalid @base IRI: ${e[n]}`,Le.ERROR_CODES.INVALID_BASE_IRI);break;case"language":a!==null&&jo.validateLanguage(a,!0,Le.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(a!==null&&s!=="number")throw new Le.ErrorCoded(`Found an invalid @version number: ${a}`,Le.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":a!==null&&jo.validateDirection(a,!0);break;case"propagate":if(r===1)throw new Le.ErrorCoded(`Found an illegal @propagate keyword: ${a}`,Le.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(a!==null&&s!=="boolean")throw new Le.ErrorCoded(`Found an invalid @propagate value: ${a}`,Le.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(pt.Util.isValidKeyword(n)&&pt.Util.isValidKeyword(pt.Util.getContextValueId(a)))throw new Le.ErrorCoded(`Illegal keyword alias in term value, found: '${n}': '${pt.Util.getContextValueId(a)}'`,Le.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(a!==null)switch(s){case"string":if(pt.Util.getPrefix(a,e)===n)throw new Le.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${n}': '${JSON.stringify(a)}'`,Le.ERROR_CODES.CYCLIC_IRI_MAPPING);if(pt.Util.isValidIriWeak(n)){if(a==="@type")throw new Le.ErrorCoded(`IRIs can not be mapped to @type, found: '${n}': '${a}'`,Le.ERROR_CODES.INVALID_IRI_MAPPING);if(pt.Util.isValidIri(a)&&a!==new Ha.JsonLdContextNormalized(e).expandTerm(n))throw new Le.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${n}': '${a}'`,Le.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!pt.Util.isCompactIri(n)&&!("@id"in a)&&(a["@type"]==="@id"?!e["@base"]:!e["@vocab"]))throw new Le.ErrorCoded(`Missing @id in context entry: '${n}': '${JSON.stringify(a)}'`,Le.ERROR_CODES.INVALID_IRI_MAPPING);for(const o of Object.keys(a)){const u=a[o];if(u)switch(o){case"@id":if(pt.Util.isValidKeyword(u)&&u!=="@type"&&u!=="@id"&&u!=="@graph"&&u!=="@nest")throw new Le.ErrorCoded(`Illegal keyword alias in term value, found: '${n}': '${JSON.stringify(a)}'`,Le.ERROR_CODES.INVALID_IRI_MAPPING);if(pt.Util.isValidIriWeak(n)){if(u==="@type")throw new Le.ErrorCoded(`IRIs can not be mapped to @type, found: '${n}': '${JSON.stringify(a)}'`,Le.ERROR_CODES.INVALID_IRI_MAPPING);if(pt.Util.isValidIri(u)&&u!==new Ha.JsonLdContextNormalized(e).expandTerm(n))throw new Le.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${n}': '${JSON.stringify(a)}'`,Le.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof u!="string")throw new Le.ErrorCoded(`Detected non-string @id in context entry: '${n}': '${JSON.stringify(a)}'`,Le.ERROR_CODES.INVALID_IRI_MAPPING);if(pt.Util.getPrefix(u,e)===n)throw new Le.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${n}': '${JSON.stringify(a)}'`,Le.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(a["@container"]==="@type"&&u!=="@id"&&u!=="@vocab")throw new Le.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${n}': '${u}'`,Le.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof u!="string")throw new Le.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(s)}'`,Le.ERROR_CODES.INVALID_TYPE_MAPPING);if(u!=="@id"&&u!=="@vocab"&&(r===1||u!=="@json")&&(r===1||u!=="@none")&&(u[0]==="_"||!pt.Util.isValidIri(u)))throw new Le.ErrorCoded(`A context @type must be an absolute IRI, found: '${n}': '${u}'`,Le.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof u=="string"&&a["@id"]&&a["@id"]!==u)throw new Le.ErrorCoded(`Found non-matching @id and @reverse term values in '${n}':'${u}' and '${a["@id"]}'`,Le.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in a)throw new Le.ErrorCoded(`@nest is not allowed in the reverse property '${n}'`,Le.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(r===1&&(Object.keys(u).length>1||pt.Util.CONTAINERS_1_0.indexOf(Object.keys(u)[0])<0))throw new Le.ErrorCoded(`Invalid term @container for '${n}' ('${Object.keys(u)}') in 1.0, must be only one of ${pt.Util.CONTAINERS_1_0.join(", ")}`,Le.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const c of Object.keys(u)){if(c==="@list"&&a["@reverse"])throw new Le.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${n}'`,Le.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(pt.Util.CONTAINERS.indexOf(c)<0)throw new Le.ErrorCoded(`Invalid term @container for '${n}' ('${c}'), must be one of ${pt.Util.CONTAINERS.join(", ")}`,Le.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":jo.validateLanguage(u,!0,Le.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":jo.validateDirection(u,!0);break;case"@prefix":if(u!==null&&typeof u!="boolean")throw new Le.ErrorCoded(`Found an invalid term @prefix boolean in: '${n}': '${JSON.stringify(a)}'`,Le.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in a)&&!pt.Util.isValidIri(n))throw new Le.ErrorCoded(`Invalid @prefix definition for '${n}' ('${JSON.stringify(a)}'`,Le.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(r===1||!a["@container"]||!a["@container"]["@index"])throw new Le.ErrorCoded(`Attempt to add illegal key to value object: '${n}': '${JSON.stringify(a)}'`,Le.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(pt.Util.isPotentialKeyword(u)&&u!=="@nest")throw new Le.ErrorCoded(`Found an invalid term @nest value in: '${n}': '${JSON.stringify(a)}'`,Le.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new Le.ErrorCoded(`Found an invalid term value: '${n}': '${a}'`,Le.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(e,r,n){return typeof e=="string"||(n&&!("@base"in e)&&r.parentContext&&typeof r.parentContext=="object"&&"@base"in r.parentContext&&(e["@base"]=r.parentContext["@base"],r.parentContext["@__baseDocument"]&&(e["@__baseDocument"]=!0)),r.baseIRI&&!r.external&&("@base"in e?e["@base"]!==null&&typeof e["@base"]=="string"&&!pt.Util.isValidIri(e["@base"])&&(e["@base"]=(0,kP.resolve)(e["@base"],r.parentContext&&r.parentContext["@base"]||r.baseIRI)):(e["@base"]=r.baseIRI,e["@__baseDocument"]=!0))),e}normalizeContextIri(e,r){if(!pt.Util.isValidIri(e))try{e=(0,kP.resolve)(e,r)}catch{throw new Error(`Invalid context IRI: ${e}`)}return this.redirectSchemaOrgHttps&&e.startsWith("http://schema.org")&&(e="https://schema.org/"),e}async parseInnerContexts(e,r,n){for(const a of n??Object.keys(e)){const s=e[a];if(s&&typeof s=="object"&&"@context"in s&&s["@context"]!==null&&!r.ignoreScopedContexts){if(this.validateContext)try{const o=Object.assign(Object.assign({},e),{[a]:Object.assign({},e[a])});delete o[a]["@context"],await this.parse(s["@context"],Object.assign(Object.assign({},r),{external:!1,parentContext:o,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(o){throw new Le.ErrorCoded(o.message,Le.ERROR_CODES.INVALID_SCOPED_CONTEXT)}e[a]=Object.assign(Object.assign({},s),{"@context":(await this.parse(s["@context"],Object.assign(Object.assign({},r),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:e}))).getContextRaw()})}}return e}async parse(e,r={},n={}){const{baseIRI:a,parentContext:s,external:o,processingMode:u=jo.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:c,ignoreProtection:l,minimalProcessing:d}=r,h=r.remoteContexts||{};if(Object.keys(h).length>=this.remoteContextsDepthLimit)throw new Le.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(h),Le.ERROR_CODES.CONTEXT_OVERFLOW);if(e==null){if(!l&&s&&pt.Util.hasProtectedTerms(s))throw new Le.ErrorCoded("Illegal context nullification when terms are protected",Le.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new Ha.JsonLdContextNormalized(this.applyBaseEntry({},r,!1))}else if(typeof e=="string"){const f=this.normalizeContextIri(e,a),p=this.getOverriddenLoad(f,r);if(p)return new Ha.JsonLdContextNormalized(p);const b=await this.parse(await this.load(f),Object.assign(Object.assign({},r),{baseIRI:f,external:!0,remoteContexts:Object.assign(Object.assign({},h),{[f]:!0})}));return this.applyBaseEntry(b.getContextRaw(),r,!0),b}else if(Array.isArray(e)){const f=[],p=await Promise.all(e.map((y,S)=>{if(typeof y=="string"){const w=this.normalizeContextIri(y,a);f[S]=w;const I=this.getOverriddenLoad(w,r);return I||this.load(w)}else return y}));if(d)return new Ha.JsonLdContextNormalized(p);const b=await p.reduce((y,S,w)=>y.then(I=>this.parse(S,Object.assign(Object.assign({},r),{baseIRI:f[w]||r.baseIRI,external:!!f[w]||r.external,parentContext:I.getContextRaw(),remoteContexts:f[w]?Object.assign(Object.assign({},h),{[f[w]]:!0}):h}),{skipValidation:w<p.length-1})),Promise.resolve(new Ha.JsonLdContextNormalized(s||{})));return this.applyBaseEntry(b.getContextRaw(),r,!0),b}else if(typeof e=="object"){if("@context"in e)return await this.parse(e["@context"],r);if(e=Object.assign({},e),o&&delete e["@base"],this.applyBaseEntry(e,r,!0),this.containersToHash(e),d)return new Ha.JsonLdContextNormalized(e);let f={};if("@import"in e)if(u>=1.1){if(typeof e["@import"]!="string")throw new Le.ErrorCoded("An @import value must be a string, but got "+typeof e["@import"],Le.ERROR_CODES.INVALID_IMPORT_VALUE);f=await this.loadImportContext(this.normalizeContextIri(e["@import"],a)),delete e["@import"]}else throw new Le.ErrorCoded("Context importing is not supported in JSON-LD 1.0",Le.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(f,{processingMode:u},Ha.defaultExpandOptions);const p=Object.assign(f,e);this.idifyReverseTerms(p),this.normalize(p,{processingMode:u,normalizeLanguageTags:c}),this.applyScopedProtected(p,{processingMode:u},Ha.defaultExpandOptions);const b=Object.keys(p),y=[];if(typeof s=="object")for(const w in s)w in p?y.push(w):p[w]=s[w];await this.parseInnerContexts(p,r,b);const S=new Ha.JsonLdContextNormalized(p);return(p&&p["@version"]||jo.DEFAULT_PROCESSING_MODE)>=1.1&&(e["@vocab"]&&typeof e["@vocab"]=="string"||e["@vocab"]==="")&&(s&&"@vocab"in s&&e["@vocab"].indexOf(":")<0?p["@vocab"]=s["@vocab"]+e["@vocab"]:(pt.Util.isCompactIri(e["@vocab"])||e["@vocab"]in p)&&(p["@vocab"]=S.expandTerm(e["@vocab"],!0))),this.expandPrefixedTerms(S,this.expandContentTypeToBase,b),!l&&s&&u>=1.1&&this.validateKeywordRedefinitions(s,p,Ha.defaultExpandOptions,y),this.validateContext&&!n.skipValidation&&this.validate(p,{processingMode:u}),S}else throw new Le.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${e}`,Le.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(e){const r=this.documentCache[e];if(r)return r;let n;try{n=await this.documentLoader.load(e)}catch(a){throw new Le.ErrorCoded(`Failed to load remote context ${e}: ${a.message}`,Le.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in n))throw new Le.ErrorCoded(`Missing @context in remote context at ${e}`,Le.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[e]=n["@context"]}getOverriddenLoad(e,r){if(e in(r.remoteContexts||{})){if(r.ignoreRemoteScopedContexts)return e;throw new Le.ErrorCoded("Detected a cyclic context inclusion of "+e,Le.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(e){let r=await this.load(e);if(typeof r!="object"||Array.isArray(r))throw new Le.ErrorCoded("An imported context must be a single object: "+e,Le.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in r)throw new Le.ErrorCoded("An imported context can not import another context: "+e,Le.ERROR_CODES.INVALID_CONTEXT_ENTRY);return r=Object.assign({},r),this.containersToHash(r),r}}jo.DEFAULT_PROCESSING_MODE=1.1;kg.ContextParser=jo;var d9={};Object.defineProperty(d9,"__esModule",{value:!0});var f9={};Object.defineProperty(f9,"__esModule",{value:!0});(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(kg,t),r(Mf,t),r(R0,t),r(d9,t),r(f9,t),r(sx,t),r(Lf,t)})(vn);Object.defineProperty(x0,"__esModule",{value:!0});x0.Util=void 0;const _J=yt,vJ=vn,wJ=Tt;let SJ=class{constructor(e){this.nodeHandlers={},this.nodeValueHandlers={},this.directiveNodeHandlers={},this.settings=e,this.dataFactory=e.dataFactory||new _J.DataFactory,this.operationFactory=new wJ.Factory(this.dataFactory),this.contextParser=new vJ.ContextParser}registerNodeHandler(e){this.nodeHandlers[e.targetKind]=e}registerNodeValueHandler(e){this.nodeValueHandlers[e.targetKind]=e}registerDirectiveNodeHandler(e){this.directiveNodeHandlers[e.targetKind]=e}handleNode(e,r){const n=this.nodeHandlers[e.kind];if(!n)throw new Error(`Unsupported GraphQL node '${e.kind}'`);return n.handle(e,r)}handleNodeValue(e,r,n){const a=this.nodeValueHandlers[e.kind];if(!a)throw new Error(`Unsupported GraphQL value node '${e.kind}'`);return a.handle(e,r,n)}handleDirectiveNode(e,r){const n=this.directiveNodeHandlers[e.directive.name.value];return n?n.handle(e,r):null}joinOperations(e){if(e.length===1)return e[0];const r=[],n=[];for(const a of e)a.type==="bgp"?r.push(a):n.push(a);if(r.length===e.length)return this.joinOperationsAsBgp(r);if(r.length===e.length-1&&n[0].type==="leftjoin"&&n[0].input[0].type==="bgp"){const a=n[0];return r.push(a.input[0]),this.operationFactory.createLeftJoin(this.joinOperationsAsBgp(r),a.input[1])}else return n.length===e.length?this.joinOperationsAsNestedJoin(n):this.joinOperationsAsNestedJoin([this.joinOperationsAsBgp(r),this.joinOperationsAsNestedJoin(n)])}joinOperationsAsBgp(e){return this.operationFactory.createBgp([].concat.apply([],e.map(r=>r.patterns)))}joinOperationsAsNestedJoin(e){return this.operationFactory.createJoin(e)}appendFieldToPath(e,r){return e.concat([r])}getFieldLabel(e){return(e.alias?e.alias:e.name).value}nameToVariable(e,r){return this.dataFactory.variable((r.path.length?r.path.join(this.settings.variableDelimiter)+this.settings.variableDelimiter:"")+e)}valueToNamedNode(e,r){const n=r.expandTerm(e,!0);if(this.settings.requireContext&&!n)throw new Error("No context entry was found for "+e);return this.dataFactory.namedNode(n||e)}getArgument(e,r){if(e){for(const n of e)if(n.name.value===r)return n}}newTypePattern(e,r,n){return this.operationFactory.createPattern(e,this.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.valueToNamedNode(r.name.value,n.context),n.graph)}createQuadPattern(e,r,n,a,s){const o=this.valueToNamedNode(r.value,s);return s&&s.getContextRaw()[r.value]&&s.getContextRaw()[r.value]["@reverse"]?this.operationFactory.createPattern(n,o,e,a):this.operationFactory.createPattern(e,o,n,a)}createQuadPath(e,r,n,a,s,o){const u=this.valueToNamedNode(r.value,o);let c=this.operationFactory.createLink(u);for(const l of n.values){if(l.kind!=="EnumValue")throw new Error("Invalid value type for 'alt' argument, must be EnumValue, but got "+l.kind);c=this.operationFactory.createAlt([c,this.operationFactory.createLink(this.valueToNamedNode(l.value,o))])}return o&&o.getContextRaw()[r.value]&&o.getContextRaw()[r.value]["@reverse"]?this.operationFactory.createPath(a,c,e,s):this.operationFactory.createPath(e,c,a,s)}};x0.Util=SJ;var TJ=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(h){o(h)}}function c(d){try{l(n.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Vg,"__esModule",{value:!0});Vg.Converter=void 0;const EJ=iJ,mi=ex,nh=tx,OJ=Cf,AJ=x0;let xJ=class fb{constructor(e){e=e||{},e.variableDelimiter=e.variableDelimiter||"_",e.expressionVariableCounter=e.expressionVariableCounter||0,this.util=new AJ.Util(e),this.initializeNodeHandlers(e)}static registerNodeHandlers(e,r){e.registerNodeHandler(new mi.NodeHandlerDocument(e,r)),e.registerNodeHandler(new mi.NodeHandlerDefinitionOperation(e,r)),e.registerNodeHandler(new mi.NodeHandlerDefinitionFragment(e,r)),e.registerNodeHandler(new mi.NodeHandlerSelectionFragmentSpread(e,r)),e.registerNodeHandler(new mi.NodeHandlerSelectionInlineFragment(e,r)),e.registerNodeHandler(new mi.NodeHandlerSelectionField(e,r))}static registerNodeValueHandlers(e,r){e.registerNodeValueHandler(new mi.NodeValueHandlerVariable(e,r)),e.registerNodeValueHandler(new mi.NodeValueHandlerInt(e,r)),e.registerNodeValueHandler(new mi.NodeValueHandlerFloat(e,r)),e.registerNodeValueHandler(new mi.NodeValueHandlerString(e,r)),e.registerNodeValueHandler(new mi.NodeValueHandlerBoolean(e,r)),e.registerNodeValueHandler(new mi.NodeValueHandlerNull(e,r)),e.registerNodeValueHandler(new mi.NodeValueHandlerEnum(e,r)),e.registerNodeValueHandler(new mi.NodeValueHandlerList(e,r)),e.registerNodeValueHandler(new mi.NodeValueHandlerObject(e,r))}static registerDirectiveNodeHandlers(e,r){e.registerDirectiveNodeHandler(new nh.DirectiveNodeHandlerInclude(e,r)),e.registerDirectiveNodeHandler(new nh.DirectiveNodeHandlerOptional(e,r)),e.registerDirectiveNodeHandler(new nh.DirectiveNodeHandlerPlural(e,r)),e.registerDirectiveNodeHandler(new nh.DirectiveNodeHandlerSingle(e,r)),e.registerDirectiveNodeHandler(new nh.DirectiveNodeHandlerSkip(e,r))}graphqlToSparqlAlgebra(e,r,n){return TJ(this,void 0,void 0,function*(){return this.graphqlToSparqlAlgebraRawContext(e,yield this.util.contextParser.parse(r),n)})}graphqlToSparqlAlgebraRawContext(e,r,n){n=n||{};const a=typeof e=="string"?(0,EJ.parse)(e):e,s=this.indexFragments(a),o={context:r,fragmentDefinitions:s,graph:this.util.dataFactory.defaultGraph(),path:[],singularizeState:OJ.SingularizeState.PLURAL,singularizeVariables:n.singularizeVariables||{},subject:null,terminalVariables:[],variablesDict:n.variablesDict||{},variablesMetaDict:{}};return this.util.handleNode(a,o)}indexFragments(e){const r={},n=[];for(const a of e.definitions)a.kind==="FragmentDefinition"?r[a.name.value]=a:n.push(a);return e.definitions=n,r}initializeNodeHandlers(e){fb.registerNodeHandlers(this.util,e),fb.registerNodeValueHandlers(this.util,e),fb.registerDirectiveNodeHandlers(this.util,e)}};Vg.Converter=xJ;var h9={};Object.defineProperty(h9,"__esModule",{value:!0});(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ex,t),r(Vg,t),r(Cf,t),r(h9,t),r(x0,t)})(GC);Object.defineProperty(wg,"__esModule",{value:!0});wg.ActorQueryParseGraphql=void 0;const RJ=ZA,QP=Ht,IJ=GC;class PJ extends RJ.ActorQueryParse{constructor(e){super(e),this.graphqlToSparql=new IJ.Converter({requireContext:!0})}async test(e){var r;if(((r=e.queryFormat)==null?void 0:r.language)!=="graphql")throw new Error("This actor can only parse GraphQL queries");return!0}async run(e){const r=e.context.get(QP.KeysInitQuery.jsonLdContext)||{},n={singularizeVariables:e.context.get(QP.KeysInitQuery.graphqlSingularizeVariables)};return{operation:await this.graphqlToSparql.graphqlToSparqlAlgebra(e.query,r,n)}}}wg.ActorQueryParseGraphql=PJ;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(wg,t)})(QC);var uc={},Qg={};Object.defineProperty(Qg,"__esModule",{value:!0});Qg.MediatorCombineUnion=void 0;const DJ=et;class NJ extends DJ.Mediator{constructor(e){super(e),this.combiner=this.createCombiner()}async mediate(e){let r;try{r=this.publish(e)}catch{r=[]}await Promise.all(r.map(({reply:a})=>a));const n=await Promise.all(r.map(a=>a.actor.runObservable(e)));return this.combiner(n)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return e=>{const r={};return r[this.field]={},[{}].concat(e.map(n=>n[this.field])).forEach((n,a,s)=>{r[this.field]={...n,...r[this.field]}}),r}}}Qg.MediatorCombineUnion=NJ;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Qg,t)})(uc);var p9={},Gg={},bs={},zg={},El={},I0={};Object.defineProperty(I0,"__esModule",{value:!0});I0.ActorAbstractMediaTyped=void 0;const jJ=et;class CJ extends jJ.Actor{constructor(e){super(e)}async run(e){if("handle"in e){const r=e;return{handle:await this.runHandle(r.handle,r.handleMediaType,e.context)}}if("mediaTypes"in e)return{mediaTypes:await this.getMediaTypes(e.context)};if("mediaTypeFormats"in e)return{mediaTypeFormats:await this.getMediaTypeFormats(e.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}async test(e){if("handle"in e){const r=e;return{handle:await this.testHandle(r.handle,r.handleMediaType,e.context)}}if("mediaTypes"in e)return{mediaTypes:await this.testMediaType(e.context)};if("mediaTypeFormats"in e)return{mediaTypeFormats:await this.testMediaTypeFormats(e.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}}I0.ActorAbstractMediaTyped=CJ;var Wg={};Object.defineProperty(Wg,"__esModule",{value:!0});Wg.ActorAbstractMediaTypedFixed=void 0;const FJ=I0;class MJ extends FJ.ActorAbstractMediaTyped{constructor(e){super(e);const r=this.priorityScale||this.priorityScale===0?this.priorityScale:1;this.mediaTypePriorities&&Object.entries(this.mediaTypePriorities).forEach(([n,a],s)=>{this.mediaTypePriorities[n]=r*a}),this.mediaTypePriorities=Object.freeze(this.mediaTypePriorities),this.mediaTypeFormats=Object.freeze(this.mediaTypeFormats)}async testHandle(e,r,n){if(!r||!(r in this.mediaTypePriorities))throw new Error(`Unrecognized media type: ${r}`);return await this.testHandleChecked(e,n)}async testMediaType(e){return!0}async getMediaTypes(e){return this.mediaTypePriorities}async testMediaTypeFormats(e){return!0}async getMediaTypeFormats(e){return this.mediaTypeFormats}}Wg.ActorAbstractMediaTypedFixed=MJ;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(I0,t),r(Wg,t)})(El);Object.defineProperty(zg,"__esModule",{value:!0});zg.ActorQueryResultSerialize=void 0;const LJ=El;class BJ extends LJ.ActorAbstractMediaTyped{constructor(e){super(e)}}zg.ActorQueryResultSerialize=BJ;var Xg={};Object.defineProperty(Xg,"__esModule",{value:!0});Xg.ActorQueryResultSerializeFixedMediaTypes=void 0;const $J=El;class UJ extends $J.ActorAbstractMediaTypedFixed{constructor(e){super(e)}async testHandleChecked(e,r){return!0}}Xg.ActorQueryResultSerializeFixedMediaTypes=UJ;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(zg,t),r(Xg,t)})(bs);var y9={exports:{}},US={exports:{}},ao={},Kg={};Kg.byteLength=HJ;Kg.toByteArray=QJ;Kg.fromByteArray=WJ;var $s=[],Sa=[],qJ=typeof Uint8Array<"u"?Uint8Array:Array,qS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Jl=0,VJ=qS.length;Jl<VJ;++Jl)$s[Jl]=qS[Jl],Sa[qS.charCodeAt(Jl)]=Jl;Sa["-".charCodeAt(0)]=62;Sa["_".charCodeAt(0)]=63;function b9(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function HJ(t){var e=b9(t),r=e[0],n=e[1];return(r+n)*3/4-n}function kJ(t,e,r){return(e+r)*3/4-r}function QJ(t){var e,r=b9(t),n=r[0],a=r[1],s=new qJ(kJ(t,n,a)),o=0,u=a>0?n-4:n,c;for(c=0;c<u;c+=4)e=Sa[t.charCodeAt(c)]<<18|Sa[t.charCodeAt(c+1)]<<12|Sa[t.charCodeAt(c+2)]<<6|Sa[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return a===2&&(e=Sa[t.charCodeAt(c)]<<2|Sa[t.charCodeAt(c+1)]>>4,s[o++]=e&255),a===1&&(e=Sa[t.charCodeAt(c)]<<10|Sa[t.charCodeAt(c+1)]<<4|Sa[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function GJ(t){return $s[t>>18&63]+$s[t>>12&63]+$s[t>>6&63]+$s[t&63]}function zJ(t,e,r){for(var n,a=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),a.push(GJ(n));return a.join("")}function WJ(t){for(var e,r=t.length,n=r%3,a=[],s=16383,o=0,u=r-n;o<u;o+=s)a.push(zJ(t,o,o+s>u?u:o+s));return n===1?(e=t[r-1],a.push($s[e>>2]+$s[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],a.push($s[e>>10]+$s[e>>4&63]+$s[e<<2&63]+"=")),a.join("")}var ox={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ox.read=function(t,e,r,n,a){var s,o,u=a*8-n-1,c=(1<<u)-1,l=c>>1,d=-7,h=r?a-1:0,f=r?-1:1,p=t[e+h];for(h+=f,s=p&(1<<-d)-1,p>>=-d,d+=u;d>0;s=s*256+t[e+h],h+=f,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=n;d>0;o=o*256+t[e+h],h+=f,d-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(p?-1:1)*o*Math.pow(2,s-n)};ox.write=function(t,e,r,n,a,s){var o,u,c,l=s*8-a-1,d=(1<<l)-1,h=d>>1,f=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,b=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=f/c:e+=f*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=d?(u=0,o=d):o+h>=1?(u=(e*c-1)*Math.pow(2,a),o=o+h):(u=e*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;t[r+p]=u&255,p+=b,u/=256,a-=8);for(o=o<<a|u,l+=a;l>0;t[r+p]=o&255,p+=b,o/=256,l-=8);t[r+p-b]|=y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Kg,r=ox,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=I,t.INSPECT_MAX_BYTES=50;const a=2147483647;t.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=s(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const U=new Uint8Array(1),E={foo:function(){return 42}};return Object.setPrototypeOf(E,Uint8Array.prototype),Object.setPrototypeOf(U,E),U.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function o(U){if(U>a)throw new RangeError('The value "'+U+'" is invalid for option "size"');const E=new Uint8Array(U);return Object.setPrototypeOf(E,u.prototype),E}function u(U,E,R){if(typeof U=="number"){if(typeof E=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(U)}return c(U,E,R)}u.poolSize=8192;function c(U,E,R){if(typeof U=="string")return f(U,E);if(ArrayBuffer.isView(U))return b(U);if(U==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(de(U,ArrayBuffer)||U&&de(U.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(de(U,SharedArrayBuffer)||U&&de(U.buffer,SharedArrayBuffer)))return y(U,E,R);if(typeof U=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const K=U.valueOf&&U.valueOf();if(K!=null&&K!==U)return u.from(K,E,R);const ce=S(U);if(ce)return ce;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof U[Symbol.toPrimitive]=="function")return u.from(U[Symbol.toPrimitive]("string"),E,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}u.from=function(U,E,R){return c(U,E,R)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function l(U){if(typeof U!="number")throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function d(U,E,R){return l(U),U<=0?o(U):E!==void 0?typeof R=="string"?o(U).fill(E,R):o(U).fill(E):o(U)}u.alloc=function(U,E,R){return d(U,E,R)};function h(U){return l(U),o(U<0?0:w(U)|0)}u.allocUnsafe=function(U){return h(U)},u.allocUnsafeSlow=function(U){return h(U)};function f(U,E){if((typeof E!="string"||E==="")&&(E="utf8"),!u.isEncoding(E))throw new TypeError("Unknown encoding: "+E);const R=O(U,E)|0;let K=o(R);const ce=K.write(U,E);return ce!==R&&(K=K.slice(0,ce)),K}function p(U){const E=U.length<0?0:w(U.length)|0,R=o(E);for(let K=0;K<E;K+=1)R[K]=U[K]&255;return R}function b(U){if(de(U,Uint8Array)){const E=new Uint8Array(U);return y(E.buffer,E.byteOffset,E.byteLength)}return p(U)}function y(U,E,R){if(E<0||U.byteLength<E)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<E+(R||0))throw new RangeError('"length" is outside of buffer bounds');let K;return E===void 0&&R===void 0?K=new Uint8Array(U):R===void 0?K=new Uint8Array(U,E):K=new Uint8Array(U,E,R),Object.setPrototypeOf(K,u.prototype),K}function S(U){if(u.isBuffer(U)){const E=w(U.length)|0,R=o(E);return R.length===0||U.copy(R,0,0,E),R}if(U.length!==void 0)return typeof U.length!="number"||be(U.length)?o(0):p(U);if(U.type==="Buffer"&&Array.isArray(U.data))return p(U.data)}function w(U){if(U>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return U|0}function I(U){return+U!=U&&(U=0),u.alloc(+U)}u.isBuffer=function(E){return E!=null&&E._isBuffer===!0&&E!==u.prototype},u.compare=function(E,R){if(de(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),de(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),!u.isBuffer(E)||!u.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===R)return 0;let K=E.length,ce=R.length;for(let ye=0,ge=Math.min(K,ce);ye<ge;++ye)if(E[ye]!==R[ye]){K=E[ye],ce=R[ye];break}return K<ce?-1:ce<K?1:0},u.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(E,R){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(E.length===0)return u.alloc(0);let K;if(R===void 0)for(R=0,K=0;K<E.length;++K)R+=E[K].length;const ce=u.allocUnsafe(R);let ye=0;for(K=0;K<E.length;++K){let ge=E[K];if(de(ge,Uint8Array))ye+ge.length>ce.length?(u.isBuffer(ge)||(ge=u.from(ge)),ge.copy(ce,ye)):Uint8Array.prototype.set.call(ce,ge,ye);else if(u.isBuffer(ge))ge.copy(ce,ye);else throw new TypeError('"list" argument must be an Array of Buffers');ye+=ge.length}return ce};function O(U,E){if(u.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||de(U,ArrayBuffer))return U.byteLength;if(typeof U!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const R=U.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&R===0)return 0;let ce=!1;for(;;)switch(E){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return $(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return J(U).length;default:if(ce)return K?-1:$(U).length;E=(""+E).toLowerCase(),ce=!0}}u.byteLength=O;function T(U,E,R){let K=!1;if((E===void 0||E<0)&&(E=0),E>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,E>>>=0,R<=E))return"";for(U||(U="utf8");;)switch(U){case"hex":return fe(this,E,R);case"utf8":case"utf-8":return M(this,E,R);case"ascii":return ie(this,E,R);case"latin1":case"binary":return ne(this,E,R);case"base64":return z(this,E,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,E,R);default:if(K)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),K=!0}}u.prototype._isBuffer=!0;function x(U,E,R){const K=U[E];U[E]=U[R],U[R]=K}u.prototype.swap16=function(){const E=this.length;if(E%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<E;R+=2)x(this,R,R+1);return this},u.prototype.swap32=function(){const E=this.length;if(E%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<E;R+=4)x(this,R,R+3),x(this,R+1,R+2);return this},u.prototype.swap64=function(){const E=this.length;if(E%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<E;R+=8)x(this,R,R+7),x(this,R+1,R+6),x(this,R+2,R+5),x(this,R+3,R+4);return this},u.prototype.toString=function(){const E=this.length;return E===0?"":arguments.length===0?M(this,0,E):T.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(E){if(!u.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:u.compare(this,E)===0},u.prototype.inspect=function(){let E="";const R=t.INSPECT_MAX_BYTES;return E=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(E+=" ... "),"<Buffer "+E+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(E,R,K,ce,ye){if(de(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),!u.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);if(R===void 0&&(R=0),K===void 0&&(K=E?E.length:0),ce===void 0&&(ce=0),ye===void 0&&(ye=this.length),R<0||K>E.length||ce<0||ye>this.length)throw new RangeError("out of range index");if(ce>=ye&&R>=K)return 0;if(ce>=ye)return-1;if(R>=K)return 1;if(R>>>=0,K>>>=0,ce>>>=0,ye>>>=0,this===E)return 0;let ge=ye-ce,$e=K-R;const ke=Math.min(ge,$e),Xe=this.slice(ce,ye),Ke=E.slice(R,K);for(let ht=0;ht<ke;++ht)if(Xe[ht]!==Ke[ht]){ge=Xe[ht],$e=Ke[ht];break}return ge<$e?-1:$e<ge?1:0};function P(U,E,R,K,ce){if(U.length===0)return-1;if(typeof R=="string"?(K=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,be(R)&&(R=ce?0:U.length-1),R<0&&(R=U.length+R),R>=U.length){if(ce)return-1;R=U.length-1}else if(R<0)if(ce)R=0;else return-1;if(typeof E=="string"&&(E=u.from(E,K)),u.isBuffer(E))return E.length===0?-1:B(U,E,R,K,ce);if(typeof E=="number")return E=E&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(U,E,R):Uint8Array.prototype.lastIndexOf.call(U,E,R):B(U,[E],R,K,ce);throw new TypeError("val must be string, number or Buffer")}function B(U,E,R,K,ce){let ye=1,ge=U.length,$e=E.length;if(K!==void 0&&(K=String(K).toLowerCase(),K==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(U.length<2||E.length<2)return-1;ye=2,ge/=2,$e/=2,R/=2}function ke(Ke,ht){return ye===1?Ke[ht]:Ke.readUInt16BE(ht*ye)}let Xe;if(ce){let Ke=-1;for(Xe=R;Xe<ge;Xe++)if(ke(U,Xe)===ke(E,Ke===-1?0:Xe-Ke)){if(Ke===-1&&(Ke=Xe),Xe-Ke+1===$e)return Ke*ye}else Ke!==-1&&(Xe-=Xe-Ke),Ke=-1}else for(R+$e>ge&&(R=ge-$e),Xe=R;Xe>=0;Xe--){let Ke=!0;for(let ht=0;ht<$e;ht++)if(ke(U,Xe+ht)!==ke(E,ht)){Ke=!1;break}if(Ke)return Xe}return-1}u.prototype.includes=function(E,R,K){return this.indexOf(E,R,K)!==-1},u.prototype.indexOf=function(E,R,K){return P(this,E,R,K,!0)},u.prototype.lastIndexOf=function(E,R,K){return P(this,E,R,K,!1)};function Q(U,E,R,K){R=Number(R)||0;const ce=U.length-R;K?(K=Number(K),K>ce&&(K=ce)):K=ce;const ye=E.length;K>ye/2&&(K=ye/2);let ge;for(ge=0;ge<K;++ge){const $e=parseInt(E.substr(ge*2,2),16);if(be($e))return ge;U[R+ge]=$e}return ge}function N(U,E,R,K){return re($(E,U.length-R),U,R,K)}function D(U,E,R,K){return re(G(E),U,R,K)}function F(U,E,R,K){return re(J(E),U,R,K)}function W(U,E,R,K){return re(Y(E,U.length-R),U,R,K)}u.prototype.write=function(E,R,K,ce){if(R===void 0)ce="utf8",K=this.length,R=0;else if(K===void 0&&typeof R=="string")ce=R,K=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(K)?(K=K>>>0,ce===void 0&&(ce="utf8")):(ce=K,K=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ye=this.length-R;if((K===void 0||K>ye)&&(K=ye),E.length>0&&(K<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");let ge=!1;for(;;)switch(ce){case"hex":return Q(this,E,R,K);case"utf8":case"utf-8":return N(this,E,R,K);case"ascii":case"latin1":case"binary":return D(this,E,R,K);case"base64":return F(this,E,R,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,E,R,K);default:if(ge)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),ge=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(U,E,R){return E===0&&R===U.length?e.fromByteArray(U):e.fromByteArray(U.slice(E,R))}function M(U,E,R){R=Math.min(U.length,R);const K=[];let ce=E;for(;ce<R;){const ye=U[ce];let ge=null,$e=ye>239?4:ye>223?3:ye>191?2:1;if(ce+$e<=R){let ke,Xe,Ke,ht;switch($e){case 1:ye<128&&(ge=ye);break;case 2:ke=U[ce+1],(ke&192)===128&&(ht=(ye&31)<<6|ke&63,ht>127&&(ge=ht));break;case 3:ke=U[ce+1],Xe=U[ce+2],(ke&192)===128&&(Xe&192)===128&&(ht=(ye&15)<<12|(ke&63)<<6|Xe&63,ht>2047&&(ht<55296||ht>57343)&&(ge=ht));break;case 4:ke=U[ce+1],Xe=U[ce+2],Ke=U[ce+3],(ke&192)===128&&(Xe&192)===128&&(Ke&192)===128&&(ht=(ye&15)<<18|(ke&63)<<12|(Xe&63)<<6|Ke&63,ht>65535&&ht<1114112&&(ge=ht))}}ge===null?(ge=65533,$e=1):ge>65535&&(ge-=65536,K.push(ge>>>10&1023|55296),ge=56320|ge&1023),K.push(ge),ce+=$e}return V(K)}const C=4096;function V(U){const E=U.length;if(E<=C)return String.fromCharCode.apply(String,U);let R="",K=0;for(;K<E;)R+=String.fromCharCode.apply(String,U.slice(K,K+=C));return R}function ie(U,E,R){let K="";R=Math.min(U.length,R);for(let ce=E;ce<R;++ce)K+=String.fromCharCode(U[ce]&127);return K}function ne(U,E,R){let K="";R=Math.min(U.length,R);for(let ce=E;ce<R;++ce)K+=String.fromCharCode(U[ce]);return K}function fe(U,E,R){const K=U.length;(!E||E<0)&&(E=0),(!R||R<0||R>K)&&(R=K);let ce="";for(let ye=E;ye<R;++ye)ce+=Ee[U[ye]];return ce}function _e(U,E,R){const K=U.slice(E,R);let ce="";for(let ye=0;ye<K.length-1;ye+=2)ce+=String.fromCharCode(K[ye]+K[ye+1]*256);return ce}u.prototype.slice=function(E,R){const K=this.length;E=~~E,R=R===void 0?K:~~R,E<0?(E+=K,E<0&&(E=0)):E>K&&(E=K),R<0?(R+=K,R<0&&(R=0)):R>K&&(R=K),R<E&&(R=E);const ce=this.subarray(E,R);return Object.setPrototypeOf(ce,u.prototype),ce};function we(U,E,R){if(U%1!==0||U<0)throw new RangeError("offset is not uint");if(U+E>R)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(E,R,K){E=E>>>0,R=R>>>0,K||we(E,R,this.length);let ce=this[E],ye=1,ge=0;for(;++ge<R&&(ye*=256);)ce+=this[E+ge]*ye;return ce},u.prototype.readUintBE=u.prototype.readUIntBE=function(E,R,K){E=E>>>0,R=R>>>0,K||we(E,R,this.length);let ce=this[E+--R],ye=1;for(;R>0&&(ye*=256);)ce+=this[E+--R]*ye;return ce},u.prototype.readUint8=u.prototype.readUInt8=function(E,R){return E=E>>>0,R||we(E,1,this.length),this[E]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(E,R){return E=E>>>0,R||we(E,2,this.length),this[E]|this[E+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(E,R){return E=E>>>0,R||we(E,2,this.length),this[E]<<8|this[E+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(E,R){return E=E>>>0,R||we(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+this[E+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(E,R){return E=E>>>0,R||we(E,4,this.length),this[E]*16777216+(this[E+1]<<16|this[E+2]<<8|this[E+3])},u.prototype.readBigUInt64LE=xe(function(E){E=E>>>0,m(E,"offset");const R=this[E],K=this[E+7];(R===void 0||K===void 0)&&v(E,this.length-8);const ce=R+this[++E]*2**8+this[++E]*2**16+this[++E]*2**24,ye=this[++E]+this[++E]*2**8+this[++E]*2**16+K*2**24;return BigInt(ce)+(BigInt(ye)<<BigInt(32))}),u.prototype.readBigUInt64BE=xe(function(E){E=E>>>0,m(E,"offset");const R=this[E],K=this[E+7];(R===void 0||K===void 0)&&v(E,this.length-8);const ce=R*2**24+this[++E]*2**16+this[++E]*2**8+this[++E],ye=this[++E]*2**24+this[++E]*2**16+this[++E]*2**8+K;return(BigInt(ce)<<BigInt(32))+BigInt(ye)}),u.prototype.readIntLE=function(E,R,K){E=E>>>0,R=R>>>0,K||we(E,R,this.length);let ce=this[E],ye=1,ge=0;for(;++ge<R&&(ye*=256);)ce+=this[E+ge]*ye;return ye*=128,ce>=ye&&(ce-=Math.pow(2,8*R)),ce},u.prototype.readIntBE=function(E,R,K){E=E>>>0,R=R>>>0,K||we(E,R,this.length);let ce=R,ye=1,ge=this[E+--ce];for(;ce>0&&(ye*=256);)ge+=this[E+--ce]*ye;return ye*=128,ge>=ye&&(ge-=Math.pow(2,8*R)),ge},u.prototype.readInt8=function(E,R){return E=E>>>0,R||we(E,1,this.length),this[E]&128?(255-this[E]+1)*-1:this[E]},u.prototype.readInt16LE=function(E,R){E=E>>>0,R||we(E,2,this.length);const K=this[E]|this[E+1]<<8;return K&32768?K|4294901760:K},u.prototype.readInt16BE=function(E,R){E=E>>>0,R||we(E,2,this.length);const K=this[E+1]|this[E]<<8;return K&32768?K|4294901760:K},u.prototype.readInt32LE=function(E,R){return E=E>>>0,R||we(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},u.prototype.readInt32BE=function(E,R){return E=E>>>0,R||we(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},u.prototype.readBigInt64LE=xe(function(E){E=E>>>0,m(E,"offset");const R=this[E],K=this[E+7];(R===void 0||K===void 0)&&v(E,this.length-8);const ce=this[E+4]+this[E+5]*2**8+this[E+6]*2**16+(K<<24);return(BigInt(ce)<<BigInt(32))+BigInt(R+this[++E]*2**8+this[++E]*2**16+this[++E]*2**24)}),u.prototype.readBigInt64BE=xe(function(E){E=E>>>0,m(E,"offset");const R=this[E],K=this[E+7];(R===void 0||K===void 0)&&v(E,this.length-8);const ce=(R<<24)+this[++E]*2**16+this[++E]*2**8+this[++E];return(BigInt(ce)<<BigInt(32))+BigInt(this[++E]*2**24+this[++E]*2**16+this[++E]*2**8+K)}),u.prototype.readFloatLE=function(E,R){return E=E>>>0,R||we(E,4,this.length),r.read(this,E,!0,23,4)},u.prototype.readFloatBE=function(E,R){return E=E>>>0,R||we(E,4,this.length),r.read(this,E,!1,23,4)},u.prototype.readDoubleLE=function(E,R){return E=E>>>0,R||we(E,8,this.length),r.read(this,E,!0,52,8)},u.prototype.readDoubleBE=function(E,R){return E=E>>>0,R||we(E,8,this.length),r.read(this,E,!1,52,8)};function Ce(U,E,R,K,ce,ye){if(!u.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(E>ce||E<ye)throw new RangeError('"value" argument is out of bounds');if(R+K>U.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(E,R,K,ce){if(E=+E,R=R>>>0,K=K>>>0,!ce){const $e=Math.pow(2,8*K)-1;Ce(this,E,R,K,$e,0)}let ye=1,ge=0;for(this[R]=E&255;++ge<K&&(ye*=256);)this[R+ge]=E/ye&255;return R+K},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(E,R,K,ce){if(E=+E,R=R>>>0,K=K>>>0,!ce){const $e=Math.pow(2,8*K)-1;Ce(this,E,R,K,$e,0)}let ye=K-1,ge=1;for(this[R+ye]=E&255;--ye>=0&&(ge*=256);)this[R+ye]=E/ge&255;return R+K},u.prototype.writeUint8=u.prototype.writeUInt8=function(E,R,K){return E=+E,R=R>>>0,K||Ce(this,E,R,1,255,0),this[R]=E&255,R+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(E,R,K){return E=+E,R=R>>>0,K||Ce(this,E,R,2,65535,0),this[R]=E&255,this[R+1]=E>>>8,R+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(E,R,K){return E=+E,R=R>>>0,K||Ce(this,E,R,2,65535,0),this[R]=E>>>8,this[R+1]=E&255,R+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(E,R,K){return E=+E,R=R>>>0,K||Ce(this,E,R,4,4294967295,0),this[R+3]=E>>>24,this[R+2]=E>>>16,this[R+1]=E>>>8,this[R]=E&255,R+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(E,R,K){return E=+E,R=R>>>0,K||Ce(this,E,R,4,4294967295,0),this[R]=E>>>24,this[R+1]=E>>>16,this[R+2]=E>>>8,this[R+3]=E&255,R+4};function oe(U,E,R,K,ce){A(E,K,ce,U,R,7);let ye=Number(E&BigInt(4294967295));U[R++]=ye,ye=ye>>8,U[R++]=ye,ye=ye>>8,U[R++]=ye,ye=ye>>8,U[R++]=ye;let ge=Number(E>>BigInt(32)&BigInt(4294967295));return U[R++]=ge,ge=ge>>8,U[R++]=ge,ge=ge>>8,U[R++]=ge,ge=ge>>8,U[R++]=ge,R}function ae(U,E,R,K,ce){A(E,K,ce,U,R,7);let ye=Number(E&BigInt(4294967295));U[R+7]=ye,ye=ye>>8,U[R+6]=ye,ye=ye>>8,U[R+5]=ye,ye=ye>>8,U[R+4]=ye;let ge=Number(E>>BigInt(32)&BigInt(4294967295));return U[R+3]=ge,ge=ge>>8,U[R+2]=ge,ge=ge>>8,U[R+1]=ge,ge=ge>>8,U[R]=ge,R+8}u.prototype.writeBigUInt64LE=xe(function(E,R=0){return oe(this,E,R,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=xe(function(E,R=0){return ae(this,E,R,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(E,R,K,ce){if(E=+E,R=R>>>0,!ce){const ke=Math.pow(2,8*K-1);Ce(this,E,R,K,ke-1,-ke)}let ye=0,ge=1,$e=0;for(this[R]=E&255;++ye<K&&(ge*=256);)E<0&&$e===0&&this[R+ye-1]!==0&&($e=1),this[R+ye]=(E/ge>>0)-$e&255;return R+K},u.prototype.writeIntBE=function(E,R,K,ce){if(E=+E,R=R>>>0,!ce){const ke=Math.pow(2,8*K-1);Ce(this,E,R,K,ke-1,-ke)}let ye=K-1,ge=1,$e=0;for(this[R+ye]=E&255;--ye>=0&&(ge*=256);)E<0&&$e===0&&this[R+ye+1]!==0&&($e=1),this[R+ye]=(E/ge>>0)-$e&255;return R+K},u.prototype.writeInt8=function(E,R,K){return E=+E,R=R>>>0,K||Ce(this,E,R,1,127,-128),E<0&&(E=255+E+1),this[R]=E&255,R+1},u.prototype.writeInt16LE=function(E,R,K){return E=+E,R=R>>>0,K||Ce(this,E,R,2,32767,-32768),this[R]=E&255,this[R+1]=E>>>8,R+2},u.prototype.writeInt16BE=function(E,R,K){return E=+E,R=R>>>0,K||Ce(this,E,R,2,32767,-32768),this[R]=E>>>8,this[R+1]=E&255,R+2},u.prototype.writeInt32LE=function(E,R,K){return E=+E,R=R>>>0,K||Ce(this,E,R,4,2147483647,-2147483648),this[R]=E&255,this[R+1]=E>>>8,this[R+2]=E>>>16,this[R+3]=E>>>24,R+4},u.prototype.writeInt32BE=function(E,R,K){return E=+E,R=R>>>0,K||Ce(this,E,R,4,2147483647,-2147483648),E<0&&(E=4294967295+E+1),this[R]=E>>>24,this[R+1]=E>>>16,this[R+2]=E>>>8,this[R+3]=E&255,R+4},u.prototype.writeBigInt64LE=xe(function(E,R=0){return oe(this,E,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=xe(function(E,R=0){return ae(this,E,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(U,E,R,K,ce,ye){if(R+K>U.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function Ie(U,E,R,K,ce){return E=+E,R=R>>>0,ce||Ae(U,E,R,4),r.write(U,E,R,K,23,4),R+4}u.prototype.writeFloatLE=function(E,R,K){return Ie(this,E,R,!0,K)},u.prototype.writeFloatBE=function(E,R,K){return Ie(this,E,R,!1,K)};function he(U,E,R,K,ce){return E=+E,R=R>>>0,ce||Ae(U,E,R,8),r.write(U,E,R,K,52,8),R+8}u.prototype.writeDoubleLE=function(E,R,K){return he(this,E,R,!0,K)},u.prototype.writeDoubleBE=function(E,R,K){return he(this,E,R,!1,K)},u.prototype.copy=function(E,R,K,ce){if(!u.isBuffer(E))throw new TypeError("argument should be a Buffer");if(K||(K=0),!ce&&ce!==0&&(ce=this.length),R>=E.length&&(R=E.length),R||(R=0),ce>0&&ce<K&&(ce=K),ce===K||E.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),E.length-R<ce-K&&(ce=E.length-R+K);const ye=ce-K;return this===E&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,K,ce):Uint8Array.prototype.set.call(E,this.subarray(K,ce),R),ye},u.prototype.fill=function(E,R,K,ce){if(typeof E=="string"){if(typeof R=="string"?(ce=R,R=0,K=this.length):typeof K=="string"&&(ce=K,K=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!u.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(E.length===1){const ge=E.charCodeAt(0);(ce==="utf8"&&ge<128||ce==="latin1")&&(E=ge)}}else typeof E=="number"?E=E&255:typeof E=="boolean"&&(E=Number(E));if(R<0||this.length<R||this.length<K)throw new RangeError("Out of range index");if(K<=R)return this;R=R>>>0,K=K===void 0?this.length:K>>>0,E||(E=0);let ye;if(typeof E=="number")for(ye=R;ye<K;++ye)this[ye]=E;else{const ge=u.isBuffer(E)?E:u.from(E,ce),$e=ge.length;if($e===0)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(ye=0;ye<K-R;++ye)this[ye+R]=ge[ye%$e]}return this};const ve={};function me(U,E,R){ve[U]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:E.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,this.stack,delete this.name}get code(){return U}set code(ce){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ce,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}me("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),me("ERR_INVALID_ARG_TYPE",function(U,E){return`The "${U}" argument must be of type number. Received type ${typeof E}`},TypeError),me("ERR_OUT_OF_RANGE",function(U,E,R){let K=`The value of "${U}" is out of range.`,ce=R;return Number.isInteger(R)&&Math.abs(R)>2**32?ce=L(String(R)):typeof R=="bigint"&&(ce=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&(ce=L(ce)),ce+="n"),K+=` It must be ${E}. Received ${ce}`,K},RangeError);function L(U){let E="",R=U.length;const K=U[0]==="-"?1:0;for(;R>=K+4;R-=3)E=`_${U.slice(R-3,R)}${E}`;return`${U.slice(0,R)}${E}`}function H(U,E,R){m(E,"offset"),(U[E]===void 0||U[E+R]===void 0)&&v(E,U.length-(R+1))}function A(U,E,R,K,ce,ye){if(U>R||U<E){const ge=typeof E=="bigint"?"n":"";let $e;throw ye>3?E===0||E===BigInt(0)?$e=`>= 0${ge} and < 2${ge} ** ${(ye+1)*8}${ge}`:$e=`>= -(2${ge} ** ${(ye+1)*8-1}${ge}) and < 2 ** ${(ye+1)*8-1}${ge}`:$e=`>= ${E}${ge} and <= ${R}${ge}`,new ve.ERR_OUT_OF_RANGE("value",$e,U)}H(K,ce,ye)}function m(U,E){if(typeof U!="number")throw new ve.ERR_INVALID_ARG_TYPE(E,"number",U)}function v(U,E,R){throw Math.floor(U)!==U?(m(U,R),new ve.ERR_OUT_OF_RANGE(R||"offset","an integer",U)):E<0?new ve.ERR_BUFFER_OUT_OF_BOUNDS:new ve.ERR_OUT_OF_RANGE(R||"offset",`>= ${R?1:0} and <= ${E}`,U)}const j=/[^+/0-9A-Za-z-_]/g;function q(U){if(U=U.split("=")[0],U=U.trim().replace(j,""),U.length<2)return"";for(;U.length%4!==0;)U=U+"=";return U}function $(U,E){E=E||1/0;let R;const K=U.length;let ce=null;const ye=[];for(let ge=0;ge<K;++ge){if(R=U.charCodeAt(ge),R>55295&&R<57344){if(!ce){if(R>56319){(E-=3)>-1&&ye.push(239,191,189);continue}else if(ge+1===K){(E-=3)>-1&&ye.push(239,191,189);continue}ce=R;continue}if(R<56320){(E-=3)>-1&&ye.push(239,191,189),ce=R;continue}R=(ce-55296<<10|R-56320)+65536}else ce&&(E-=3)>-1&&ye.push(239,191,189);if(ce=null,R<128){if((E-=1)<0)break;ye.push(R)}else if(R<2048){if((E-=2)<0)break;ye.push(R>>6|192,R&63|128)}else if(R<65536){if((E-=3)<0)break;ye.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((E-=4)<0)break;ye.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return ye}function G(U){const E=[];for(let R=0;R<U.length;++R)E.push(U.charCodeAt(R)&255);return E}function Y(U,E){let R,K,ce;const ye=[];for(let ge=0;ge<U.length&&!((E-=2)<0);++ge)R=U.charCodeAt(ge),K=R>>8,ce=R%256,ye.push(ce),ye.push(K);return ye}function J(U){return e.toByteArray(q(U))}function re(U,E,R,K){let ce;for(ce=0;ce<K&&!(ce+R>=E.length||ce>=U.length);++ce)E[ce+R]=U[ce];return ce}function de(U,E){return U instanceof E||U!=null&&U.constructor!=null&&U.constructor.name!=null&&U.constructor.name===E.name}function be(U){return U!==U}const Ee=function(){const U="0123456789abcdef",E=new Array(256);for(let R=0;R<16;++R){const K=R*16;for(let ce=0;ce<16;++ce)E[K+ce]=U[R]+U[ce]}return E}();function xe(U){return typeof BigInt>"u"?Pe:U}function Pe(){throw new Error("BigInt not supported")}})(ao);var Kr={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array},m9={exports:{}},ih={exports:{}},GP;function af(){if(GP)return ih.exports;GP=1;const{AbortController:t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return ih.exports=t,ih.exports.AbortSignal=e,ih.exports.default=t,ih.exports}(function(t){const e=ao,{kResistStopPropagation:r,SymbolDispose:n}=Kr,a=globalThis.AbortSignal||af().AbortSignal,s=globalThis.AbortController||af().AbortController,o=Object.getPrototypeOf(async function(){}).constructor,u=globalThis.Blob||e.Blob,c=typeof u<"u"?function(p){return p instanceof u}:function(p){return!1},l=(f,p)=>{if(f!==void 0&&(f===null||typeof f!="object"||!("aborted"in f)))throw new ERR_INVALID_ARG_TYPE(p,"AbortSignal",f)},d=(f,p)=>{if(typeof f!="function")throw new ERR_INVALID_ARG_TYPE(p,"Function",f)};class h extends Error{constructor(p){if(!Array.isArray(p))throw new TypeError(`Expected input to be an Array, got ${typeof p}`);let b="";for(let y=0;y<p.length;y++)b+=`    ${p[y].stack}
`;super(b),this.name="AggregateError",this.errors=p}}t.exports={AggregateError:h,kEmptyObject:Object.freeze({}),once(f){let p=!1;return function(...b){p||(p=!0,f.apply(this,b))}},createDeferredPromise:function(){let f,p;return{promise:new Promise((y,S)=>{f=y,p=S}),resolve:f,reject:p}},promisify(f){return new Promise((p,b)=>{f((y,...S)=>y?b(y):p(...S))})},debuglog(){return function(){}},format(f,...p){return f.replace(/%([sdifj])/g,function(...[b,y]){const S=p.shift();return y==="f"?S.toFixed(6):y==="j"?JSON.stringify(S):y==="s"&&typeof S=="object"?`${S.constructor!==Object?S.constructor.name:""} {}`.trim():S.toString()})},inspect(f){switch(typeof f){case"string":if(f.includes("'"))if(f.includes('"')){if(!f.includes("`")&&!f.includes("${"))return`\`${f}\``}else return`"${f}"`;return`'${f}'`;case"number":return isNaN(f)?"NaN":Object.is(f,-0)?String(f):f;case"bigint":return`${String(f)}n`;case"boolean":case"undefined":return String(f);case"object":return"{}"}},types:{isAsyncFunction(f){return f instanceof o},isArrayBufferView(f){return ArrayBuffer.isView(f)}},isBlob:c,deprecate(f,p){return f},addAbortListener:O0.addAbortListener||function(p,b){if(p===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",p);l(p,"signal"),d(b,"listener");let y;return p.aborted?queueMicrotask(()=>b()):(p.addEventListener("abort",b,{__proto__:null,once:!0,[r]:!0}),y=()=>{p.removeEventListener("abort",b)}),{__proto__:null,[n](){var S;(S=y)===null||S===void 0||S()}}},AbortSignalAny:a.any||function(p){if(p.length===1)return p[0];const b=new s,y=()=>b.abort();return p.forEach(S=>{l(S,"signals"),S.addEventListener("abort",y,{once:!0})}),b.signal.addEventListener("abort",()=>{p.forEach(S=>S.removeEventListener("abort",y))},{once:!0}),b.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(m9);var Fi=m9.exports,ux={};const{format:XJ,inspect:Vb,AggregateError:KJ}=Fi,JJ=globalThis.AggregateError||KJ,YJ=Symbol("kIsNodeError"),ZJ=["string","function","number","object","Function","Object","boolean","bigint","symbol"],eY=/^([A-Z][a-z0-9]*)+$/,tY="__node_internal_",Jg={};function il(t,e){if(!t)throw new Jg.ERR_INTERNAL_ASSERTION(e)}function zP(t){let e="",r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function rY(t,e,r){if(typeof e=="function")return il(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);const n=(e.match(/%[dfijoOs]/g)||[]).length;return il(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:XJ(e,...r)}function kn(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(rY(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[YJ]=!0,Jg[t]=n}function WP(t){const e=tY+t.name;return Object.defineProperty(t,"name",{value:e}),t}function nY(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const r=new JJ([e,t],e.message);return r.code=e.code,r}return t||e}let iY=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Jg.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};kn("ERR_ASSERTION","%s",Error);kn("ERR_INVALID_ARG_TYPE",(t,e,r)=>{il(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";const a=[],s=[],o=[];for(const c of e)il(typeof c=="string","All expected entries have to be of type string"),ZJ.includes(c)?a.push(c.toLowerCase()):eY.test(c)?s.push(c):(il(c!=="object",'The value "object" should be written as "Object"'),o.push(c));if(s.length>0){const c=a.indexOf("object");c!==-1&&(a.splice(a,c,1),s.push("Object"))}if(a.length>0){switch(a.length){case 1:n+=`of type ${a[0]}`;break;case 2:n+=`one of type ${a[0]} or ${a[1]}`;break;default:{const c=a.pop();n+=`one of type ${a.join(", ")}, or ${c}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{const c=s.pop();n+=`an instance of ${s.join(", ")}, or ${c}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{const c=o.pop();n+=`one of ${o.join(", ")}, or ${c}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var u;if((u=r.constructor)!==null&&u!==void 0&&u.name)n+=`. Received an instance of ${r.constructor.name}`;else{const c=Vb(r,{depth:-1});n+=`. Received ${c}`}}else{let c=Vb(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`}return n},TypeError);kn("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=Vb(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);kn("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;const a=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${a}.`},TypeError);kn("ERR_MISSING_ARGS",(...t)=>{il(t.length>0,"At least one arg needs to be specified");let e;const r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);kn("ERR_OUT_OF_RANGE",(t,e,r)=>{il(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=zP(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=zP(n)),n+="n"):n=Vb(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);kn("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);kn("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);kn("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);kn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);kn("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);kn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);kn("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);kn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);kn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);kn("ERR_STREAM_WRITE_AFTER_END","write after end",Error);kn("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Ki={AbortError:iY,aggregateTwoErrors:WP(nY),hideStackFrames:WP,codes:Jg};const{ArrayIsArray:cx,ArrayPrototypeIncludes:g9,ArrayPrototypeJoin:_9,ArrayPrototypeMap:aY,NumberIsInteger:lx,NumberIsNaN:sY,NumberMAX_SAFE_INTEGER:oY,NumberMIN_SAFE_INTEGER:uY,NumberParseInt:cY,ObjectPrototypeHasOwnProperty:lY,RegExpPrototypeExec:v9,String:dY,StringPrototypeToUpperCase:fY,StringPrototypeTrim:hY}=Kr,{hideStackFrames:ja,codes:{ERR_SOCKET_BAD_PORT:pY,ERR_INVALID_ARG_TYPE:fi,ERR_INVALID_ARG_VALUE:Bf,ERR_OUT_OF_RANGE:fl,ERR_UNKNOWN_SIGNAL:XP}}=Ki,{normalizeEncoding:yY}=Fi,{isAsyncFunction:bY,isArrayBufferView:mY}=Fi.types,KP={};function gY(t){return t===(t|0)}function _Y(t){return t===t>>>0}const vY=/^[0-7]+$/,wY="must be a 32-bit unsigned integer or an octal string";function SY(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(v9(vY,t)===null)throw new Bf(e,t,wY);t=cY(t,8)}return w9(t,e),t}const TY=ja((t,e,r=uY,n=oY)=>{if(typeof t!="number")throw new fi(e,"number",t);if(!lx(t))throw new fl(e,"an integer",t);if(t<r||t>n)throw new fl(e,`>= ${r} && <= ${n}`,t)}),EY=ja((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new fi(e,"number",t);if(!lx(t))throw new fl(e,"an integer",t);if(t<r||t>n)throw new fl(e,`>= ${r} && <= ${n}`,t)}),w9=ja((t,e,r=!1)=>{if(typeof t!="number")throw new fi(e,"number",t);if(!lx(t))throw new fl(e,"an integer",t);const n=r?1:0,a=4294967295;if(t<n||t>a)throw new fl(e,`>= ${n} && <= ${a}`,t)});function dx(t,e){if(typeof t!="string")throw new fi(e,"string",t)}function OY(t,e,r=void 0,n){if(typeof t!="number")throw new fi(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&sY(t))throw new fl(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}const AY=ja((t,e,r)=>{if(!g9(r,t)){const a="must be one of: "+_9(aY(r,s=>typeof s=="string"?`'${s}'`:dY(s)),", ");throw new Bf(e,t,a)}});function S9(t,e){if(typeof t!="boolean")throw new fi(e,"boolean",t)}function VS(t,e,r){return t==null||!lY(t,e)?r:t[e]}const xY=ja((t,e,r=null)=>{const n=VS(r,"allowArray",!1),a=VS(r,"allowFunction",!1);if(!VS(r,"nullable",!1)&&t===null||!n&&cx(t)||typeof t!="object"&&(!a||typeof t!="function"))throw new fi(e,"Object",t)}),RY=ja((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new fi(e,"a dictionary",t)}),Yg=ja((t,e,r=0)=>{if(!cx(t))throw new fi(e,"Array",t);if(t.length<r){const n=`must be longer than ${r}`;throw new Bf(e,t,n)}});function IY(t,e){Yg(t,e);for(let r=0;r<t.length;r++)dx(t[r],`${e}[${r}]`)}function PY(t,e){Yg(t,e);for(let r=0;r<t.length;r++)S9(t[r],`${e}[${r}]`)}function DY(t,e){Yg(t,e);for(let r=0;r<t.length;r++){const n=t[r],a=`${e}[${r}]`;if(n==null)throw new fi(a,"AbortSignal",n);T9(n,a)}}function NY(t,e="signal"){if(dx(t,e),KP[t]===void 0)throw KP[fY(t)]!==void 0?new XP(t+" (signals must use all capital letters)"):new XP(t)}const jY=ja((t,e="buffer")=>{if(!mY(t))throw new fi(e,["Buffer","TypedArray","DataView"],t)});function CY(t,e){const r=yY(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Bf("encoding",e,`is invalid for data of length ${n}`)}function FY(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&hY(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new pY(e,t,r);return t|0}const T9=ja((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new fi(e,"AbortSignal",t)}),MY=ja((t,e)=>{if(typeof t!="function")throw new fi(e,"Function",t)}),LY=ja((t,e)=>{if(typeof t!="function"||bY(t))throw new fi(e,"Function",t)}),BY=ja((t,e)=>{if(t!==void 0)throw new fi(e,"undefined",t)});function $Y(t,e,r){if(!g9(r,t))throw new fi(e,`('${_9(r,"|")}')`,t)}const UY=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function JP(t,e){if(typeof t>"u"||!v9(UY,t))throw new Bf(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function qY(t){if(typeof t=="string")return JP(t,"hints"),t;if(cx(t)){const e=t.length;let r="";if(e===0)return r;for(let n=0;n<e;n++){const a=t[n];JP(a,"hints"),r+=a,n!==e-1&&(r+=", ")}return r}throw new Bf("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var P0={isInt32:gY,isUint32:_Y,parseFileMode:SY,validateArray:Yg,validateStringArray:IY,validateBooleanArray:PY,validateAbortSignalArray:DY,validateBoolean:S9,validateBuffer:jY,validateDictionary:RY,validateEncoding:CY,validateFunction:MY,validateInt32:EY,validateInteger:TY,validateNumber:OY,validateObject:xY,validateOneOf:AY,validatePlainFunction:LY,validatePort:FY,validateSignalName:NY,validateString:dx,validateUint32:w9,validateUndefined:BY,validateUnion:$Y,validateAbortSignal:T9,validateLinkHeaderValue:qY},fx={exports:{}};const{SymbolAsyncIterator:YP,SymbolIterator:ZP,SymbolFor:Ol}=Kr,E9=Ol("nodejs.stream.destroyed"),O9=Ol("nodejs.stream.errored"),tO=Ol("nodejs.stream.readable"),rO=Ol("nodejs.stream.writable"),A9=Ol("nodejs.stream.disturbed"),VY=Ol("nodejs.webstream.isClosedPromise"),HY=Ol("nodejs.webstream.controllerErrorFunction");function Zg(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function e_(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function kY(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function so(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function x9(t){return!!(t&&!so(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function R9(t){return!!(t&&!so(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function I9(t){return!!(t&&!so(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function QY(t){return x9(t)||R9(t)||I9(t)}function GY(t,e){return t==null?!1:e===!0?typeof t[YP]=="function":e===!1?typeof t[ZP]=="function":typeof t[YP]=="function"||typeof t[ZP]=="function"}function t_(t){if(!so(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[E9]||n!=null&&n.destroyed)}function P9(t){if(!e_(t))return null;if(t.writableEnded===!0)return!0;const e=t._writableState;return e!=null&&e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function zY(t,e){if(!e_(t))return null;if(t.writableFinished===!0)return!0;const r=t._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function WY(t){if(!Zg(t))return null;if(t.readableEnded===!0)return!0;const e=t._readableState;return!e||e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function D9(t,e){if(!Zg(t))return null;const r=t._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function N9(t){return t&&t[tO]!=null?t[tO]:typeof(t==null?void 0:t.readable)!="boolean"?null:t_(t)?!1:Zg(t)&&t.readable&&!D9(t)}function j9(t){return t&&t[rO]!=null?t[rO]:typeof(t==null?void 0:t.writable)!="boolean"?null:t_(t)?!1:e_(t)&&t.writable&&!P9(t)}function XY(t,e){return so(t)?t_(t)?!0:!((e==null?void 0:e.readable)!==!1&&N9(t)||(e==null?void 0:e.writable)!==!1&&j9(t)):null}function KY(t){var e,r;return so(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function JY(t){var e,r;return so(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function YY(t){if(!so(t))return null;if(typeof t.closed=="boolean")return t.closed;const e=t._writableState,r=t._readableState;return typeof(e==null?void 0:e.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(e==null?void 0:e.closed)||(r==null?void 0:r.closed):typeof t._closed=="boolean"&&C9(t)?t._closed:null}function C9(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function F9(t){return typeof t._sent100=="boolean"&&C9(t)}function ZY(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function eZ(t){if(!so(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!n&&F9(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function tZ(t){var e;return!!(t&&((e=t[A9])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function rZ(t){var e,r,n,a,s,o,u,c,l,d;return!!(t&&((e=(r=(n=(a=(s=(o=t[O9])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&a!==void 0?a:(u=t._readableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&n!==void 0?n:(c=t._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(l=t._readableState)===null||l===void 0?void 0:l.errored)!==null&&e!==void 0?e:!((d=t._writableState)===null||d===void 0)&&d.errored))}var iu={isDestroyed:t_,kIsDestroyed:E9,isDisturbed:tZ,kIsDisturbed:A9,isErrored:rZ,kIsErrored:O9,isReadable:N9,kIsReadable:tO,kIsClosedPromise:VY,kControllerErrorFunction:HY,kIsWritable:rO,isClosed:YY,isDuplexNodeStream:kY,isFinished:XY,isIterable:GY,isReadableNodeStream:Zg,isReadableStream:x9,isReadableEnded:WY,isReadableFinished:D9,isReadableErrored:JY,isNodeStream:so,isWebStream:QY,isWritable:j9,isWritableNodeStream:e_,isWritableStream:R9,isWritableEnded:P9,isWritableFinished:zY,isWritableErrored:KY,isServerRequest:ZY,isServerResponse:F9,willEmitClose:eZ,isTransformStream:I9};const Pu=ru(),{AbortError:M9,codes:nZ}=Ki,{ERR_INVALID_ARG_TYPE:iZ,ERR_STREAM_PREMATURE_CLOSE:eD}=nZ,{kEmptyObject:nO,once:iO}=Fi,{validateAbortSignal:aZ,validateFunction:sZ,validateObject:oZ,validateBoolean:uZ}=P0,{Promise:cZ,PromisePrototypeThen:lZ,SymbolDispose:L9}=Kr,{isClosed:dZ,isReadable:tD,isReadableNodeStream:HS,isReadableStream:fZ,isReadableFinished:rD,isReadableErrored:nD,isWritable:iD,isWritableNodeStream:aD,isWritableStream:hZ,isWritableFinished:sD,isWritableErrored:oD,isNodeStream:pZ,willEmitClose:yZ,kIsClosedPromise:bZ}=iu;let Md;function mZ(t){return t.setHeader&&typeof t.abort=="function"}const aO=()=>{};function B9(t,e,r){var n,a;if(arguments.length===2?(r=e,e=nO):e==null?e=nO:oZ(e,"options"),sZ(r,"callback"),aZ(e.signal,"options.signal"),r=iO(r),fZ(t)||hZ(t))return gZ(t,e,r);if(!pZ(t))throw new iZ("stream",["ReadableStream","WritableStream","Stream"],t);const s=(n=e.readable)!==null&&n!==void 0?n:HS(t),o=(a=e.writable)!==null&&a!==void 0?a:aD(t),u=t._writableState,c=t._readableState,l=()=>{t.writable||f()};let d=yZ(t)&&HS(t)===s&&aD(t)===o,h=sD(t,!1);const f=()=>{h=!0,t.destroyed&&(d=!1),!(d&&(!t.readable||s))&&(!s||p)&&r.call(t)};let p=rD(t,!1);const b=()=>{p=!0,t.destroyed&&(d=!1),!(d&&(!t.writable||o))&&(!o||h)&&r.call(t)},y=x=>{r.call(t,x)};let S=dZ(t);const w=()=>{S=!0;const x=oD(t)||nD(t);if(x&&typeof x!="boolean")return r.call(t,x);if(s&&!p&&HS(t,!0)&&!rD(t,!1))return r.call(t,new eD);if(o&&!h&&!sD(t,!1))return r.call(t,new eD);r.call(t)},I=()=>{S=!0;const x=oD(t)||nD(t);if(x&&typeof x!="boolean")return r.call(t,x);r.call(t)},O=()=>{t.req.on("finish",f)};mZ(t)?(t.on("complete",f),d||t.on("abort",w),t.req?O():t.on("request",O)):o&&!u&&(t.on("end",l),t.on("close",l)),!d&&typeof t.aborted=="boolean"&&t.on("aborted",w),t.on("end",b),t.on("finish",f),e.error!==!1&&t.on("error",y),t.on("close",w),S?Pu.nextTick(w):u!=null&&u.errorEmitted||c!=null&&c.errorEmitted?d||Pu.nextTick(I):(!s&&(!d||tD(t))&&(h||iD(t)===!1)||!o&&(!d||iD(t))&&(p||tD(t)===!1)||c&&t.req&&t.aborted)&&Pu.nextTick(I);const T=()=>{r=aO,t.removeListener("aborted",w),t.removeListener("complete",f),t.removeListener("abort",w),t.removeListener("request",O),t.req&&t.req.removeListener("finish",f),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",f),t.removeListener("end",b),t.removeListener("error",y),t.removeListener("close",w)};if(e.signal&&!S){const x=()=>{const P=r;T(),P.call(t,new M9(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Pu.nextTick(x);else{Md=Md||Fi.addAbortListener;const P=Md(e.signal,x),B=r;r=iO((...Q)=>{P[L9](),B.apply(t,Q)})}}return T}function gZ(t,e,r){let n=!1,a=aO;if(e.signal)if(a=()=>{n=!0,r.call(t,new M9(void 0,{cause:e.signal.reason}))},e.signal.aborted)Pu.nextTick(a);else{Md=Md||Fi.addAbortListener;const o=Md(e.signal,a),u=r;r=iO((...c)=>{o[L9](),u.apply(t,c)})}const s=(...o)=>{n||Pu.nextTick(()=>r.apply(t,o))};return lZ(t[bZ].promise,s,s),aO}function _Z(t,e){var r;let n=!1;return e===null&&(e=nO),(r=e)!==null&&r!==void 0&&r.cleanup&&(uZ(e.cleanup,"cleanup"),n=e.cleanup),new cZ((a,s)=>{const o=B9(t,e,u=>{n&&o(),u?s(u):a()})})}fx.exports=B9;fx.exports.finished=_Z;var cc=fx.exports;const Qs=ru(),{aggregateTwoErrors:vZ,codes:{ERR_MULTIPLE_CALLBACK:wZ},AbortError:SZ}=Ki,{Symbol:$9}=Kr,{kIsDestroyed:TZ,isDestroyed:EZ,isFinished:OZ,isServerRequest:AZ}=iu,U9=$9("kDestroy"),sO=$9("kConstruct");function q9(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function xZ(t,e){const r=this._readableState,n=this._writableState,a=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(q9(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),a.constructed?uD(this,t,e):this.once(U9,function(s){uD(this,vZ(s,t),e)}),this)}function uD(t,e,r){let n=!1;function a(s){if(n)return;n=!0;const o=t._readableState,u=t._writableState;q9(s,u,o),u&&(u.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?Qs.nextTick(RZ,t,s):Qs.nextTick(V9,t)}try{t._destroy(e||null,a)}catch(s){a(s)}}function RZ(t,e){oO(t,e),V9(t)}function V9(t){const e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function oO(t,e){const r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function IZ(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function uO(t,e,r){const n=t._readableState,a=t._writableState;if(a!=null&&a.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||a!=null&&a.autoDestroy?t.destroy(e):e&&(e.stack,a&&!a.errored&&(a.errored=e),n&&!n.errored&&(n.errored=e),r?Qs.nextTick(oO,t,e):oO(t,e))}function PZ(t,e){if(typeof t._construct!="function")return;const r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(sO,e),!(t.listenerCount(sO)>1)&&Qs.nextTick(DZ,t)}function DZ(t){let e=!1;function r(n){if(e){uO(t,n??new wZ);return}e=!0;const a=t._readableState,s=t._writableState,o=s||a;a&&(a.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(U9,n):n?uO(t,n,!0):Qs.nextTick(NZ,t)}try{t._construct(n=>{Qs.nextTick(r,n)})}catch(n){Qs.nextTick(r,n)}}function NZ(t){t.emit(sO)}function cD(t){return(t==null?void 0:t.setHeader)&&typeof t.abort=="function"}function H9(t){t.emit("close")}function jZ(t,e){t.emit("error",e),Qs.nextTick(H9,t)}function CZ(t,e){!t||EZ(t)||(!e&&!OZ(t)&&(e=new SZ),AZ(t)?(t.socket=null,t.destroy(e)):cD(t)?t.abort():cD(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Qs.nextTick(jZ,t,e):Qs.nextTick(H9,t),t.destroyed||(t[TZ]=!0))}var $f={construct:PZ,destroyer:CZ,destroy:xZ,undestroy:IZ,errorOrDestroy:uO};const{ArrayIsArray:FZ,ObjectSetPrototypeOf:k9}=Kr,{EventEmitter:r_}=O0;function n_(t){r_.call(this,t)}k9(n_.prototype,r_.prototype);k9(n_,r_);n_.prototype.pipe=function(t,e){const r=this;function n(d){t.writable&&t.write(d)===!1&&r.pause&&r.pause()}r.on("data",n);function a(){r.readable&&r.resume&&r.resume()}t.on("drain",a),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",u));let s=!1;function o(){s||(s=!0,t.end())}function u(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function c(d){l(),r_.listenerCount(this,"error")===0&&this.emit("error",d)}cO(r,"error",c),cO(t,"error",c);function l(){r.removeListener("data",n),t.removeListener("drain",a),r.removeListener("end",o),r.removeListener("close",u),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};function cO(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):FZ(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}var hx={Stream:n_,prependListener:cO},Q9={exports:{}};(function(t){const{SymbolDispose:e}=Kr,{AbortError:r,codes:n}=Ki,{isNodeStream:a,isWebStream:s,kControllerErrorFunction:o}=iu,u=cc,{ERR_INVALID_ARG_TYPE:c}=n;let l;const d=(h,f)=>{if(typeof h!="object"||!("aborted"in h))throw new c(f,"AbortSignal",h)};t.exports.addAbortSignal=function(f,p){if(d(f,"signal"),!a(p)&&!s(p))throw new c("stream",["ReadableStream","WritableStream","Stream"],p);return t.exports.addAbortSignalNoValidate(f,p)},t.exports.addAbortSignalNoValidate=function(h,f){if(typeof h!="object"||!("aborted"in h))return f;const p=a(f)?()=>{f.destroy(new r(void 0,{cause:h.reason}))}:()=>{f[o](new r(void 0,{cause:h.reason}))};if(h.aborted)p();else{l=l||Fi.addAbortListener;const b=l(h,p);u(f,b[e])}return f}})(Q9);var i_=Q9.exports;const{StringPrototypeSlice:lD,SymbolIterator:MZ,TypedArrayPrototypeSet:e1,Uint8Array:LZ}=Kr,{Buffer:kS}=ao,{inspect:BZ}=Fi;var $Z=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){const r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return kS.alloc(0);const r=kS.allocUnsafe(e>>>0);let n=this.head,a=0;for(;n;)e1(r,n.data,a),a+=n.data.length,n=n.next;return r}consume(e,r){const n=this.head.data;if(e<n.length){const a=n.slice(0,e);return this.head.data=n.slice(e),a}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[MZ](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,a=0;do{const s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++a,n.next?this.head=n.next:this.head=this.tail=null):(r+=lD(s,0,e),this.head=n,n.data=lD(s,e));break}++a}while((n=n.next)!==null);return this.length-=a,r}_getBuffer(e){const r=kS.allocUnsafe(e),n=e;let a=this.head,s=0;do{const o=a.data;if(e>o.length)e1(r,o,n-e),e-=o.length;else{e===o.length?(e1(r,o,n-e),++s,a.next?this.head=a.next:this.head=this.tail=null):(e1(r,new LZ(o.buffer,o.byteOffset,e),n-e),this.head=a,a.data=o.slice(e));break}++s}while((a=a.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return BZ(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:UZ,NumberIsInteger:qZ}=Kr,{validateInteger:VZ}=P0,{ERR_INVALID_ARG_VALUE:HZ}=Ki.codes;let G9=16*1024,z9=16;function kZ(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function W9(t){return t?z9:G9}function QZ(t,e){VZ(e,"value",0),t?z9=e:G9=e}function GZ(t,e,r,n){const a=kZ(e,n,r);if(a!=null){if(!qZ(a)||a<0){const s=n?`options.${r}`:"options.highWaterMark";throw new HZ(s,a)}return UZ(a)}return W9(t.objectMode)}var a_={getHighWaterMark:GZ,getDefaultHighWaterMark:W9,setDefaultHighWaterMark:QZ},X9={},lO={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=ao,n=r.Buffer;function a(o,u){for(var c in o)u[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=s);function s(o,u,c){return n(o,u,c)}s.prototype=Object.create(n.prototype),a(n,s),s.from=function(o,u,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,u,c)},s.alloc=function(o,u,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return u!==void 0?typeof c=="string"?l.fill(u,c):l.fill(u):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(lO,lO.exports);var zZ=lO.exports,px=zZ.Buffer,dD=px.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function WZ(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function XZ(t){var e=WZ(t);if(typeof e!="string"&&(px.isEncoding===dD||!dD(t)))throw new Error("Unknown encoding: "+t);return e||t}X9.StringDecoder=D0;function D0(t){this.encoding=XZ(t);var e;switch(this.encoding){case"utf16le":this.text=tee,this.end=ree,e=4;break;case"utf8":this.fillLast=YZ,e=4;break;case"base64":this.text=nee,this.end=iee,e=3;break;default:this.write=aee,this.end=see;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=px.allocUnsafe(e)}D0.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};D0.prototype.end=eee;D0.prototype.text=ZZ;D0.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function QS(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function KZ(t,e,r){var n=e.length-1;if(n<r)return 0;var a=QS(e[n]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--n<r||a===-2?0:(a=QS(e[n]),a>=0?(a>0&&(t.lastNeed=a-2),a):--n<r||a===-2?0:(a=QS(e[n]),a>=0?(a>0&&(a===2?a=0:t.lastNeed=a-3),a):0))}function JZ(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,""}}function YZ(t){var e=this.lastTotal-this.lastNeed,r=JZ(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function ZZ(t,e){var r=KZ(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function eee(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function tee(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function ree(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function nee(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function iee(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function aee(t){return t.toString(this.encoding)}function see(t){return t&&t.length?this.write(t):""}const fD=ru(),{PromisePrototypeThen:oee,SymbolAsyncIterator:hD,SymbolIterator:pD}=Kr,{Buffer:uee}=ao,{ERR_INVALID_ARG_TYPE:cee,ERR_STREAM_NULL_VALUES:lee}=Ki.codes;function dee(t,e,r){let n;if(typeof e=="string"||e instanceof uee)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let a;if(e&&e[hD])a=!0,n=e[hD]();else if(e&&e[pD])a=!1,n=e[pD]();else throw new cee("iterable",["Iterable"],e);const s=new t({objectMode:!0,highWaterMark:1,...r});let o=!1;s._read=function(){o||(o=!0,c())},s._destroy=function(l,d){oee(u(l),()=>fD.nextTick(d,l),h=>fD.nextTick(d,h||l))};async function u(l){const d=l!=null,h=typeof n.throw=="function";if(d&&h){const{value:f,done:p}=await n.throw(l);if(await f,p)return}if(typeof n.return=="function"){const{value:f}=await n.return();await f}}async function c(){for(;;){try{const{value:l,done:d}=a?await n.next():n.next();if(d)s.push(null);else{const h=l&&typeof l.then=="function"?await l:l;if(h===null)throw o=!1,new lee;if(s.push(h))continue;o=!1}}catch(l){s.destroy(l)}break}}return s}var K9=dee,GS,yD;function s_(){if(yD)return GS;yD=1;const t=ru(),{ArrayPrototypeIndexOf:e,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:a,ObjectDefineProperties:s,ObjectKeys:o,ObjectSetPrototypeOf:u,Promise:c,SafeSet:l,SymbolAsyncDispose:d,SymbolAsyncIterator:h,Symbol:f}=Kr;GS=de,de.ReadableState=re;const{EventEmitter:p}=O0,{Stream:b,prependListener:y}=hx,{Buffer:S}=ao,{addAbortSignal:w}=i_,I=cc;let O=Fi.debuglog("stream",te=>{O=te});const T=$Z,x=$f,{getHighWaterMark:P,getDefaultHighWaterMark:B}=a_,{aggregateTwoErrors:Q,codes:{ERR_INVALID_ARG_TYPE:N,ERR_METHOD_NOT_IMPLEMENTED:D,ERR_OUT_OF_RANGE:F,ERR_STREAM_PUSH_AFTER_EOF:W,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:z},AbortError:M}=Ki,{validateObject:C}=P0,V=f("kPaused"),{StringDecoder:ie}=X9,ne=K9;u(de.prototype,b.prototype),u(de,b);const fe=()=>{},{errorOrDestroy:_e}=x,we=1,Ce=2,oe=4,ae=8,Ae=16,Ie=32,he=64,ve=128,me=256,L=512,H=1024,A=2048,m=4096,v=8192,j=16384,q=32768,$=65536,G=1<<17,Y=1<<18;function J(te){return{enumerable:!1,get(){return(this.state&te)!==0},set(_){_?this.state|=te:this.state&=~te}}}s(re.prototype,{objectMode:J(we),ended:J(Ce),endEmitted:J(oe),reading:J(ae),constructed:J(Ae),sync:J(Ie),needReadable:J(he),emittedReadable:J(ve),readableListening:J(me),resumeScheduled:J(L),errorEmitted:J(H),emitClose:J(A),autoDestroy:J(m),destroyed:J(v),closed:J(j),closeEmitted:J(q),multiAwaitDrain:J($),readingMore:J(G),dataEmitted:J(Y)});function re(te,_,k){typeof k!="boolean"&&(k=_ instanceof Jo()),this.state=A|m|Ae|Ie,te&&te.objectMode&&(this.state|=we),k&&te&&te.readableObjectMode&&(this.state|=we),this.highWaterMark=te?P(this,te,"readableHighWaterMark",k):B(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[V]=null,te&&te.emitClose===!1&&(this.state&=~A),te&&te.autoDestroy===!1&&(this.state&=~m),this.errored=null,this.defaultEncoding=te&&te.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,te&&te.encoding&&(this.decoder=new ie(te.encoding),this.encoding=te.encoding)}function de(te){if(!(this instanceof de))return new de(te);const _=this instanceof Jo();this._readableState=new re(te,this,_),te&&(typeof te.read=="function"&&(this._read=te.read),typeof te.destroy=="function"&&(this._destroy=te.destroy),typeof te.construct=="function"&&(this._construct=te.construct),te.signal&&!_&&w(te.signal,this)),b.call(this,te),x.construct(this,()=>{this._readableState.needReadable&&ce(this,this._readableState)})}de.prototype.destroy=x.destroy,de.prototype._undestroy=x.undestroy,de.prototype._destroy=function(te,_){_(te)},de.prototype[p.captureRejectionSymbol]=function(te){this.destroy(te)},de.prototype[d]=function(){let te;return this.destroyed||(te=this.readableEnded?null:new M,this.destroy(te)),new c((_,k)=>I(this,le=>le&&le!==te?k(le):_(null)))},de.prototype.push=function(te,_){return be(this,te,_,!1)},de.prototype.unshift=function(te,_){return be(this,te,_,!0)};function be(te,_,k,le){O("readableAddChunk",_);const Te=te._readableState;let Se;if(Te.state&we||(typeof _=="string"?(k=k||Te.defaultEncoding,Te.encoding!==k&&(le&&Te.encoding?_=S.from(_,k).toString(Te.encoding):(_=S.from(_,k),k=""))):_ instanceof S?k="":b._isUint8Array(_)?(_=b._uint8ArrayToBuffer(_),k=""):_!=null&&(Se=new N("chunk",["string","Buffer","Uint8Array"],_))),Se)_e(te,Se);else if(_===null)Te.state&=~ae,E(te,Te);else if(Te.state&we||_&&_.length>0)if(le)if(Te.state&oe)_e(te,new z);else{if(Te.destroyed||Te.errored)return!1;Ee(te,Te,_,!0)}else if(Te.ended)_e(te,new W);else{if(Te.destroyed||Te.errored)return!1;Te.state&=~ae,Te.decoder&&!k?(_=Te.decoder.write(_),Te.objectMode||_.length!==0?Ee(te,Te,_,!1):ce(te,Te)):Ee(te,Te,_,!1)}else le||(Te.state&=~ae,ce(te,Te));return!Te.ended&&(Te.length<Te.highWaterMark||Te.length===0)}function Ee(te,_,k,le){_.flowing&&_.length===0&&!_.sync&&te.listenerCount("data")>0?(_.state&$?_.awaitDrainWriters.clear():_.awaitDrainWriters=null,_.dataEmitted=!0,te.emit("data",k)):(_.length+=_.objectMode?1:k.length,le?_.buffer.unshift(k):_.buffer.push(k),_.state&he&&R(te)),ce(te,_)}de.prototype.isPaused=function(){const te=this._readableState;return te[V]===!0||te.flowing===!1},de.prototype.setEncoding=function(te){const _=new ie(te);this._readableState.decoder=_,this._readableState.encoding=this._readableState.decoder.encoding;const k=this._readableState.buffer;let le="";for(const Te of k)le+=_.write(Te);return k.clear(),le!==""&&k.push(le),this._readableState.length=le.length,this};const xe=1073741824;function Pe(te){if(te>xe)throw new F("size","<= 1GiB",te);return te--,te|=te>>>1,te|=te>>>2,te|=te>>>4,te|=te>>>8,te|=te>>>16,te++,te}function U(te,_){return te<=0||_.length===0&&_.ended?0:_.state&we?1:n(te)?_.flowing&&_.length?_.buffer.first().length:_.length:te<=_.length?te:_.ended?_.length:0}de.prototype.read=function(te){O("read",te),te===void 0?te=NaN:r(te)||(te=a(te,10));const _=this._readableState,k=te;if(te>_.highWaterMark&&(_.highWaterMark=Pe(te)),te!==0&&(_.state&=~ve),te===0&&_.needReadable&&((_.highWaterMark!==0?_.length>=_.highWaterMark:_.length>0)||_.ended))return O("read: emitReadable",_.length,_.ended),_.length===0&&_.ended?br(this):R(this),null;if(te=U(te,_),te===0&&_.ended)return _.length===0&&br(this),null;let le=(_.state&he)!==0;if(O("need readable",le),(_.length===0||_.length-te<_.highWaterMark)&&(le=!0,O("length less than watermark",le)),_.ended||_.reading||_.destroyed||_.errored||!_.constructed)le=!1,O("reading, ended or constructing",le);else if(le){O("do read"),_.state|=ae|Ie,_.length===0&&(_.state|=he);try{this._read(_.highWaterMark)}catch(Se){_e(this,Se)}_.state&=~Ie,_.reading||(te=U(k,_))}let Te;return te>0?Te=nn(te,_):Te=null,Te===null?(_.needReadable=_.length<=_.highWaterMark,te=0):(_.length-=te,_.multiAwaitDrain?_.awaitDrainWriters.clear():_.awaitDrainWriters=null),_.length===0&&(_.ended||(_.needReadable=!0),k!==te&&_.ended&&br(this)),Te!==null&&!_.errorEmitted&&!_.closeEmitted&&(_.dataEmitted=!0,this.emit("data",Te)),Te};function E(te,_){if(O("onEofChunk"),!_.ended){if(_.decoder){const k=_.decoder.end();k&&k.length&&(_.buffer.push(k),_.length+=_.objectMode?1:k.length)}_.ended=!0,_.sync?R(te):(_.needReadable=!1,_.emittedReadable=!0,K(te))}}function R(te){const _=te._readableState;O("emitReadable",_.needReadable,_.emittedReadable),_.needReadable=!1,_.emittedReadable||(O("emitReadable",_.flowing),_.emittedReadable=!0,t.nextTick(K,te))}function K(te){const _=te._readableState;O("emitReadable_",_.destroyed,_.length,_.ended),!_.destroyed&&!_.errored&&(_.length||_.ended)&&(te.emit("readable"),_.emittedReadable=!1),_.needReadable=!_.flowing&&!_.ended&&_.length<=_.highWaterMark,ht(te)}function ce(te,_){!_.readingMore&&_.constructed&&(_.readingMore=!0,t.nextTick(ye,te,_))}function ye(te,_){for(;!_.reading&&!_.ended&&(_.length<_.highWaterMark||_.flowing&&_.length===0);){const k=_.length;if(O("maybeReadMore read 0"),te.read(0),k===_.length)break}_.readingMore=!1}de.prototype._read=function(te){throw new D("_read()")},de.prototype.pipe=function(te,_){const k=this,le=this._readableState;le.pipes.length===1&&(le.multiAwaitDrain||(le.multiAwaitDrain=!0,le.awaitDrainWriters=new l(le.awaitDrainWriters?[le.awaitDrainWriters]:[]))),le.pipes.push(te),O("pipe count=%d opts=%j",le.pipes.length,_);const Se=(!_||_.end!==!1)&&te!==t.stdout&&te!==t.stderr?je:Jt;le.endEmitted?t.nextTick(Se):k.once("end",Se),te.on("unpipe",He);function He(kt,Fr){O("onunpipe"),kt===k&&Fr&&Fr.hasUnpiped===!1&&(Fr.hasUnpiped=!0,It())}function je(){O("onend"),te.end()}let Fe,Je=!1;function It(){O("cleanup"),te.removeListener("close",Qe),te.removeListener("finish",Gr),Fe&&te.removeListener("drain",Fe),te.removeListener("error",Li),te.removeListener("unpipe",He),k.removeListener("end",je),k.removeListener("end",Jt),k.removeListener("data",qe),Je=!0,Fe&&le.awaitDrainWriters&&(!te._writableState||te._writableState.needDrain)&&Fe()}function it(){Je||(le.pipes.length===1&&le.pipes[0]===te?(O("false write response, pause",0),le.awaitDrainWriters=te,le.multiAwaitDrain=!1):le.pipes.length>1&&le.pipes.includes(te)&&(O("false write response, pause",le.awaitDrainWriters.size),le.awaitDrainWriters.add(te)),k.pause()),Fe||(Fe=ge(k,te),te.on("drain",Fe))}k.on("data",qe);function qe(kt){O("ondata");const Fr=te.write(kt);O("dest.write",Fr),Fr===!1&&it()}function Li(kt){if(O("onerror",kt),Jt(),te.removeListener("error",Li),te.listenerCount("error")===0){const Fr=te._writableState||te._readableState;Fr&&!Fr.errorEmitted?_e(te,kt):te.emit("error",kt)}}y(te,"error",Li);function Qe(){te.removeListener("finish",Gr),Jt()}te.once("close",Qe);function Gr(){O("onfinish"),te.removeListener("close",Qe),Jt()}te.once("finish",Gr);function Jt(){O("unpipe"),k.unpipe(te)}return te.emit("pipe",k),te.writableNeedDrain===!0?it():le.flowing||(O("pipe resume"),k.resume()),te};function ge(te,_){return function(){const le=te._readableState;le.awaitDrainWriters===_?(O("pipeOnDrain",1),le.awaitDrainWriters=null):le.multiAwaitDrain&&(O("pipeOnDrain",le.awaitDrainWriters.size),le.awaitDrainWriters.delete(_)),(!le.awaitDrainWriters||le.awaitDrainWriters.size===0)&&te.listenerCount("data")&&te.resume()}}de.prototype.unpipe=function(te){const _=this._readableState,k={hasUnpiped:!1};if(_.pipes.length===0)return this;if(!te){const Te=_.pipes;_.pipes=[],this.pause();for(let Se=0;Se<Te.length;Se++)Te[Se].emit("unpipe",this,{hasUnpiped:!1});return this}const le=e(_.pipes,te);return le===-1?this:(_.pipes.splice(le,1),_.pipes.length===0&&this.pause(),te.emit("unpipe",this,k),this)},de.prototype.on=function(te,_){const k=b.prototype.on.call(this,te,_),le=this._readableState;return te==="data"?(le.readableListening=this.listenerCount("readable")>0,le.flowing!==!1&&this.resume()):te==="readable"&&!le.endEmitted&&!le.readableListening&&(le.readableListening=le.needReadable=!0,le.flowing=!1,le.emittedReadable=!1,O("on readable",le.length,le.reading),le.length?R(this):le.reading||t.nextTick(ke,this)),k},de.prototype.addListener=de.prototype.on,de.prototype.removeListener=function(te,_){const k=b.prototype.removeListener.call(this,te,_);return te==="readable"&&t.nextTick($e,this),k},de.prototype.off=de.prototype.removeListener,de.prototype.removeAllListeners=function(te){const _=b.prototype.removeAllListeners.apply(this,arguments);return(te==="readable"||te===void 0)&&t.nextTick($e,this),_};function $e(te){const _=te._readableState;_.readableListening=te.listenerCount("readable")>0,_.resumeScheduled&&_[V]===!1?_.flowing=!0:te.listenerCount("data")>0?te.resume():_.readableListening||(_.flowing=null)}function ke(te){O("readable nexttick read 0"),te.read(0)}de.prototype.resume=function(){const te=this._readableState;return te.flowing||(O("resume"),te.flowing=!te.readableListening,Xe(this,te)),te[V]=!1,this};function Xe(te,_){_.resumeScheduled||(_.resumeScheduled=!0,t.nextTick(Ke,te,_))}function Ke(te,_){O("resume",_.reading),_.reading||te.read(0),_.resumeScheduled=!1,te.emit("resume"),ht(te),_.flowing&&!_.reading&&te.read(0)}de.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[V]=!0,this};function ht(te){const _=te._readableState;for(O("flow",_.flowing);_.flowing&&te.read()!==null;);}de.prototype.wrap=function(te){let _=!1;te.on("data",le=>{!this.push(le)&&te.pause&&(_=!0,te.pause())}),te.on("end",()=>{this.push(null)}),te.on("error",le=>{_e(this,le)}),te.on("close",()=>{this.destroy()}),te.on("destroy",()=>{this.destroy()}),this._read=()=>{_&&te.resume&&(_=!1,te.resume())};const k=o(te);for(let le=1;le<k.length;le++){const Te=k[le];this[Te]===void 0&&typeof te[Te]=="function"&&(this[Te]=te[Te].bind(te))}return this},de.prototype[h]=function(){return rn(this)},de.prototype.iterator=function(te){return te!==void 0&&C(te,"options"),rn(this,te)};function rn(te,_){typeof te.read!="function"&&(te=de.wrap(te,{objectMode:!0}));const k=Vr(te,_);return k.stream=te,k}async function*Vr(te,_){let k=fe;function le(He){this===te?(k(),k=fe):k=He}te.on("readable",le);let Te;const Se=I(te,{writable:!1},He=>{Te=He?Q(Te,He):null,k(),k=fe});try{for(;;){const He=te.destroyed?null:te.read();if(He!==null)yield He;else{if(Te)throw Te;if(Te===null)return;await new c(le)}}}catch(He){throw Te=Q(Te,He),Te}finally{(Te||(_==null?void 0:_.destroyOnReturn)!==!1)&&(Te===void 0||te._readableState.autoDestroy)?x.destroyer(te,null):(te.off("readable",le),Se())}}s(de.prototype,{readable:{__proto__:null,get(){const te=this._readableState;return!!te&&te.readable!==!1&&!te.destroyed&&!te.errorEmitted&&!te.endEmitted},set(te){this._readableState&&(this._readableState.readable=!!te)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(te){this._readableState&&(this._readableState.destroyed=te)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(re.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[V]!==!1},set(te){this[V]=!!te}}}),de._fromList=nn;function nn(te,_){if(_.length===0)return null;let k;return _.objectMode?k=_.buffer.shift():!te||te>=_.length?(_.decoder?k=_.buffer.join(""):_.buffer.length===1?k=_.buffer.first():k=_.buffer.concat(_.length),_.buffer.clear()):k=_.buffer.consume(te,_.decoder),k}function br(te){const _=te._readableState;O("endReadable",_.endEmitted),_.endEmitted||(_.ended=!0,t.nextTick(Pn,_,te))}function Pn(te,_){if(O("endReadableNT",te.endEmitted,te.length),!te.errored&&!te.closeEmitted&&!te.endEmitted&&te.length===0){if(te.endEmitted=!0,_.emit("end"),_.writable&&_.allowHalfOpen===!1)t.nextTick(vr,_);else if(te.autoDestroy){const k=_._writableState;(!k||k.autoDestroy&&(k.finished||k.writable===!1))&&_.destroy()}}}function vr(te){te.writable&&!te.writableEnded&&!te.destroyed&&te.end()}de.from=function(te,_){return ne(de,te,_)};let wr;function an(){return wr===void 0&&(wr={}),wr}return de.fromWeb=function(te,_){return an().newStreamReadableFromReadableStream(te,_)},de.toWeb=function(te,_){return an().newReadableStreamFromStreamReadable(te,_)},de.wrap=function(te,_){var k,le;return new de({objectMode:(k=(le=te.readableObjectMode)!==null&&le!==void 0?le:te.objectMode)!==null&&k!==void 0?k:!0,..._,destroy(Te,Se){x.destroyer(te,Te),Se(Te)}}).wrap(te)},GS}var zS,bD;function yx(){if(bD)return zS;bD=1;const t=ru(),{ArrayPrototypeSlice:e,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:a,ObjectDefineProperties:s,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:u,Symbol:c,SymbolHasInstance:l}=Kr;zS=C,C.WritableState=z;const{EventEmitter:d}=O0,h=hx.Stream,{Buffer:f}=ao,p=$f,{addAbortSignal:b}=i_,{getHighWaterMark:y,getDefaultHighWaterMark:S}=a_,{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_MULTIPLE_CALLBACK:O,ERR_STREAM_CANNOT_PIPE:T,ERR_STREAM_DESTROYED:x,ERR_STREAM_ALREADY_FINISHED:P,ERR_STREAM_NULL_VALUES:B,ERR_STREAM_WRITE_AFTER_END:Q,ERR_UNKNOWN_ENCODING:N}=Ki.codes,{errorOrDestroy:D}=p;o(C.prototype,h.prototype),o(C,h);function F(){}const W=c("kOnFinished");function z(m,v,j){typeof j!="boolean"&&(j=v instanceof Jo()),this.objectMode=!!(m&&m.objectMode),j&&(this.objectMode=this.objectMode||!!(m&&m.writableObjectMode)),this.highWaterMark=m?y(this,m,"writableHighWaterMark",j):S(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const q=!!(m&&m.decodeStrings===!1);this.decodeStrings=!q,this.defaultEncoding=m&&m.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=_e.bind(void 0,v),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,M(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!m||m.emitClose!==!1,this.autoDestroy=!m||m.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[W]=[]}function M(m){m.buffered=[],m.bufferedIndex=0,m.allBuffers=!0,m.allNoop=!0}z.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},a(z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function C(m){const v=this instanceof Jo();if(!v&&!n(C,this))return new C(m);this._writableState=new z(m,this,v),m&&(typeof m.write=="function"&&(this._write=m.write),typeof m.writev=="function"&&(this._writev=m.writev),typeof m.destroy=="function"&&(this._destroy=m.destroy),typeof m.final=="function"&&(this._final=m.final),typeof m.construct=="function"&&(this._construct=m.construct),m.signal&&b(m.signal,this)),h.call(this,m),p.construct(this,()=>{const j=this._writableState;j.writing||ae(this,j),ve(this,j)})}a(C,l,{__proto__:null,value:function(m){return n(this,m)?!0:this!==C?!1:m&&m._writableState instanceof z}}),C.prototype.pipe=function(){D(this,new T)};function V(m,v,j,q){const $=m._writableState;if(typeof j=="function")q=j,j=$.defaultEncoding;else{if(!j)j=$.defaultEncoding;else if(j!=="buffer"&&!f.isEncoding(j))throw new N(j);typeof q!="function"&&(q=F)}if(v===null)throw new B;if(!$.objectMode)if(typeof v=="string")$.decodeStrings!==!1&&(v=f.from(v,j),j="buffer");else if(v instanceof f)j="buffer";else if(h._isUint8Array(v))v=h._uint8ArrayToBuffer(v),j="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],v);let G;return $.ending?G=new Q:$.destroyed&&(G=new x("write")),G?(t.nextTick(q,G),D(m,G,!0),G):($.pendingcb++,ie(m,$,v,j,q))}C.prototype.write=function(m,v,j){return V(this,m,v,j)===!0},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){const m=this._writableState;m.corked&&(m.corked--,m.writing||ae(this,m))},C.prototype.setDefaultEncoding=function(v){if(typeof v=="string"&&(v=u(v)),!f.isEncoding(v))throw new N(v);return this._writableState.defaultEncoding=v,this};function ie(m,v,j,q,$){const G=v.objectMode?1:j.length;v.length+=G;const Y=v.length<v.highWaterMark;return Y||(v.needDrain=!0),v.writing||v.corked||v.errored||!v.constructed?(v.buffered.push({chunk:j,encoding:q,callback:$}),v.allBuffers&&q!=="buffer"&&(v.allBuffers=!1),v.allNoop&&$!==F&&(v.allNoop=!1)):(v.writelen=G,v.writecb=$,v.writing=!0,v.sync=!0,m._write(j,q,v.onwrite),v.sync=!1),Y&&!v.errored&&!v.destroyed}function ne(m,v,j,q,$,G,Y){v.writelen=q,v.writecb=Y,v.writing=!0,v.sync=!0,v.destroyed?v.onwrite(new x("write")):j?m._writev($,v.onwrite):m._write($,G,v.onwrite),v.sync=!1}function fe(m,v,j,q){--v.pendingcb,q(j),oe(v),D(m,j)}function _e(m,v){const j=m._writableState,q=j.sync,$=j.writecb;if(typeof $!="function"){D(m,new O);return}j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0,v?(v.stack,j.errored||(j.errored=v),m._readableState&&!m._readableState.errored&&(m._readableState.errored=v),q?t.nextTick(fe,m,j,v,$):fe(m,j,v,$)):(j.buffered.length>j.bufferedIndex&&ae(m,j),q?j.afterWriteTickInfo!==null&&j.afterWriteTickInfo.cb===$?j.afterWriteTickInfo.count++:(j.afterWriteTickInfo={count:1,cb:$,stream:m,state:j},t.nextTick(we,j.afterWriteTickInfo)):Ce(m,j,1,$))}function we({stream:m,state:v,count:j,cb:q}){return v.afterWriteTickInfo=null,Ce(m,v,j,q)}function Ce(m,v,j,q){for(!v.ending&&!m.destroyed&&v.length===0&&v.needDrain&&(v.needDrain=!1,m.emit("drain"));j-- >0;)v.pendingcb--,q();v.destroyed&&oe(v),ve(m,v)}function oe(m){if(m.writing)return;for(let $=m.bufferedIndex;$<m.buffered.length;++$){var v;const{chunk:G,callback:Y}=m.buffered[$],J=m.objectMode?1:G.length;m.length-=J,Y((v=m.errored)!==null&&v!==void 0?v:new x("write"))}const j=m[W].splice(0);for(let $=0;$<j.length;$++){var q;j[$]((q=m.errored)!==null&&q!==void 0?q:new x("end"))}M(m)}function ae(m,v){if(v.corked||v.bufferProcessing||v.destroyed||!v.constructed)return;const{buffered:j,bufferedIndex:q,objectMode:$}=v,G=j.length-q;if(!G)return;let Y=q;if(v.bufferProcessing=!0,G>1&&m._writev){v.pendingcb-=G-1;const J=v.allNoop?F:de=>{for(let be=Y;be<j.length;++be)j[be].callback(de)},re=v.allNoop&&Y===0?j:e(j,Y);re.allBuffers=v.allBuffers,ne(m,v,!0,v.length,re,"",J),M(v)}else{do{const{chunk:J,encoding:re,callback:de}=j[Y];j[Y++]=null;const be=$?1:J.length;ne(m,v,!1,be,J,re,de)}while(Y<j.length&&!v.writing);Y===j.length?M(v):Y>256?(j.splice(0,Y),v.bufferedIndex=0):v.bufferedIndex=Y}v.bufferProcessing=!1}C.prototype._write=function(m,v,j){if(this._writev)this._writev([{chunk:m,encoding:v}],j);else throw new I("_write()")},C.prototype._writev=null,C.prototype.end=function(m,v,j){const q=this._writableState;typeof m=="function"?(j=m,m=null,v=null):typeof v=="function"&&(j=v,v=null);let $;if(m!=null){const G=V(this,m,v);G instanceof r&&($=G)}return q.corked&&(q.corked=1,this.uncork()),$||(!q.errored&&!q.ending?(q.ending=!0,ve(this,q,!0),q.ended=!0):q.finished?$=new P("end"):q.destroyed&&($=new x("end"))),typeof j=="function"&&($||q.finished?t.nextTick(j,$):q[W].push(j)),this};function Ae(m){return m.ending&&!m.destroyed&&m.constructed&&m.length===0&&!m.errored&&m.buffered.length===0&&!m.finished&&!m.writing&&!m.errorEmitted&&!m.closeEmitted}function Ie(m,v){let j=!1;function q($){if(j){D(m,$??O());return}if(j=!0,v.pendingcb--,$){const G=v[W].splice(0);for(let Y=0;Y<G.length;Y++)G[Y]($);D(m,$,v.sync)}else Ae(v)&&(v.prefinished=!0,m.emit("prefinish"),v.pendingcb++,t.nextTick(me,m,v))}v.sync=!0,v.pendingcb++;try{m._final(q)}catch($){q($)}v.sync=!1}function he(m,v){!v.prefinished&&!v.finalCalled&&(typeof m._final=="function"&&!v.destroyed?(v.finalCalled=!0,Ie(m,v)):(v.prefinished=!0,m.emit("prefinish")))}function ve(m,v,j){Ae(v)&&(he(m,v),v.pendingcb===0&&(j?(v.pendingcb++,t.nextTick((q,$)=>{Ae($)?me(q,$):$.pendingcb--},m,v)):Ae(v)&&(v.pendingcb++,me(m,v))))}function me(m,v){v.pendingcb--,v.finished=!0;const j=v[W].splice(0);for(let q=0;q<j.length;q++)j[q]();if(m.emit("finish"),v.autoDestroy){const q=m._readableState;(!q||q.autoDestroy&&(q.endEmitted||q.readable===!1))&&m.destroy()}}s(C.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(m){this._writableState&&(this._writableState.destroyed=m)}},writable:{__proto__:null,get(){const m=this._writableState;return!!m&&m.writable!==!1&&!m.destroyed&&!m.errored&&!m.ending&&!m.ended},set(m){this._writableState&&(this._writableState.writable=!!m)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const m=this._writableState;return m?!m.destroyed&&!m.ending&&m.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const L=p.destroy;C.prototype.destroy=function(m,v){const j=this._writableState;return!j.destroyed&&(j.bufferedIndex<j.buffered.length||j[W].length)&&t.nextTick(oe,j),L.call(this,m,v),this},C.prototype._undestroy=p.undestroy,C.prototype._destroy=function(m,v){v(m)},C.prototype[d.captureRejectionSymbol]=function(m){this.destroy(m)};let H;function A(){return H===void 0&&(H={}),H}return C.fromWeb=function(m,v){return A().newStreamWritableFromWritableStream(m,v)},C.toWeb=function(m){return A().newWritableStreamFromStreamWritable(m)},zS}var WS,mD;function fee(){if(mD)return WS;mD=1;const t=ru(),e=ao,{isReadable:r,isWritable:n,isIterable:a,isNodeStream:s,isReadableNodeStream:o,isWritableNodeStream:u,isDuplexNodeStream:c,isReadableStream:l,isWritableStream:d}=iu,h=cc,{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:b}}=Ki,{destroyer:y}=$f,S=Jo(),w=s_(),I=yx(),{createDeferredPromise:O}=Fi,T=K9,x=globalThis.Blob||e.Blob,P=typeof x<"u"?function(z){return z instanceof x}:function(z){return!1},B=globalThis.AbortController||af().AbortController,{FunctionPrototypeCall:Q}=Kr;class N extends S{constructor(z){super(z),(z==null?void 0:z.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(z==null?void 0:z.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}WS=function W(z,M){if(c(z))return z;if(o(z))return F({readable:z});if(u(z))return F({writable:z});if(s(z))return F({writable:!1,readable:!1});if(l(z))return F({readable:w.fromWeb(z)});if(d(z))return F({writable:I.fromWeb(z)});if(typeof z=="function"){const{value:V,write:ie,final:ne,destroy:fe}=D(z);if(a(V))return T(N,V,{objectMode:!0,write:ie,final:ne,destroy:fe});const _e=V==null?void 0:V.then;if(typeof _e=="function"){let we;const Ce=Q(_e,V,oe=>{if(oe!=null)throw new b("nully","body",oe)},oe=>{y(we,oe)});return we=new N({objectMode:!0,readable:!1,write:ie,final(oe){ne(async()=>{try{await Ce,t.nextTick(oe,null)}catch(ae){t.nextTick(oe,ae)}})},destroy:fe})}throw new b("Iterable, AsyncIterable or AsyncFunction",M,V)}if(P(z))return W(z.arrayBuffer());if(a(z))return T(N,z,{objectMode:!0,writable:!1});if(l(z==null?void 0:z.readable)&&d(z==null?void 0:z.writable))return N.fromWeb(z);if(typeof(z==null?void 0:z.writable)=="object"||typeof(z==null?void 0:z.readable)=="object"){const V=z!=null&&z.readable?o(z==null?void 0:z.readable)?z==null?void 0:z.readable:W(z.readable):void 0,ie=z!=null&&z.writable?u(z==null?void 0:z.writable)?z==null?void 0:z.writable:W(z.writable):void 0;return F({readable:V,writable:ie})}const C=z==null?void 0:z.then;if(typeof C=="function"){let V;return Q(C,z,ie=>{ie!=null&&V.push(ie),V.push(null)},ie=>{y(V,ie)}),V=new N({objectMode:!0,writable:!1,read(){}})}throw new p(M,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],z)};function D(W){let{promise:z,resolve:M}=O();const C=new B,V=C.signal;return{value:W(async function*(){for(;;){const ne=z;z=null;const{chunk:fe,done:_e,cb:we}=await ne;if(t.nextTick(we),_e)return;if(V.aborted)throw new f(void 0,{cause:V.reason});({promise:z,resolve:M}=O()),yield fe}}(),{signal:V}),write(ne,fe,_e){const we=M;M=null,we({chunk:ne,done:!1,cb:_e})},final(ne){const fe=M;M=null,fe({done:!0,cb:ne})},destroy(ne,fe){C.abort(),fe(ne)}}}function F(W){const z=W.readable&&typeof W.readable.read!="function"?w.wrap(W.readable):W.readable,M=W.writable;let C=!!r(z),V=!!n(M),ie,ne,fe,_e,we;function Ce(oe){const ae=_e;_e=null,ae?ae(oe):oe&&we.destroy(oe)}return we=new N({readableObjectMode:!!(z!=null&&z.readableObjectMode),writableObjectMode:!!(M!=null&&M.writableObjectMode),readable:C,writable:V}),V&&(h(M,oe=>{V=!1,oe&&y(z,oe),Ce(oe)}),we._write=function(oe,ae,Ae){M.write(oe,ae)?Ae():ie=Ae},we._final=function(oe){M.end(),ne=oe},M.on("drain",function(){if(ie){const oe=ie;ie=null,oe()}}),M.on("finish",function(){if(ne){const oe=ne;ne=null,oe()}})),C&&(h(z,oe=>{C=!1,oe&&y(z,oe),Ce(oe)}),z.on("readable",function(){if(fe){const oe=fe;fe=null,oe()}}),z.on("end",function(){we.push(null)}),we._read=function(){for(;;){const oe=z.read();if(oe===null){fe=we._read;return}if(!we.push(oe))return}}),we._destroy=function(oe,ae){!oe&&_e!==null&&(oe=new f),fe=null,ie=null,ne=null,_e===null?ae(oe):(_e=ae,y(M,oe),y(z,oe))},we}return WS}var XS,gD;function Jo(){if(gD)return XS;gD=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:r,ObjectSetPrototypeOf:n}=Kr;XS=o;const a=s_(),s=yx();n(o.prototype,a.prototype),n(o,a);{const d=r(s.prototype);for(let h=0;h<d.length;h++){const f=d[h];o.prototype[f]||(o.prototype[f]=s.prototype[f])}}function o(d){if(!(this instanceof o))return new o(d);a.call(this,d),s.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(o.prototype,{writable:{__proto__:null,...e(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(s.prototype,"writableLength")},writableFinished:{__proto__:null,...e(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let u;function c(){return u===void 0&&(u={}),u}o.fromWeb=function(d,h){return c().newStreamDuplexFromReadableWritablePair(d,h)},o.toWeb=function(d){return c().newReadableWritablePairFromDuplex(d)};let l;return o.from=function(d){return l||(l=fee()),l(d,"body")},XS}const{ObjectSetPrototypeOf:J9,Symbol:hee}=Kr;var Y9=Yo;const{ERR_METHOD_NOT_IMPLEMENTED:pee}=Ki.codes,bx=Jo(),{getHighWaterMark:yee}=a_;J9(Yo.prototype,bx.prototype);J9(Yo,bx);const fp=hee("kCallback");function Yo(t){if(!(this instanceof Yo))return new Yo(t);const e=t?yee(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),bx.call(this,t),this._readableState.sync=!1,this[fp]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",bee)}function dO(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function bee(){this._final!==dO&&dO.call(this)}Yo.prototype._final=dO;Yo.prototype._transform=function(t,e,r){throw new pee("_transform()")};Yo.prototype._write=function(t,e,r){const n=this._readableState,a=this._writableState,s=n.length;this._transform(t,e,(o,u)=>{if(o){r(o);return}u!=null&&this.push(u),a.ended||s===n.length||n.length<n.highWaterMark?r():this[fp]=r})};Yo.prototype._read=function(){if(this[fp]){const t=this[fp];this[fp]=null,t()}};const{ObjectSetPrototypeOf:Z9}=Kr;var eF=sf;const mx=Y9;Z9(sf.prototype,mx.prototype);Z9(sf,mx);function sf(t){if(!(this instanceof sf))return new sf(t);mx.call(this,t)}sf.prototype._transform=function(t,e,r){r(null,t)};const Yh=ru(),{ArrayIsArray:mee,Promise:gee,SymbolAsyncIterator:_ee,SymbolDispose:vee}=Kr,Hb=cc,{once:wee}=Fi,See=$f,_D=Jo(),{aggregateTwoErrors:Tee,codes:{ERR_INVALID_ARG_TYPE:fO,ERR_INVALID_RETURN_VALUE:KS,ERR_MISSING_ARGS:Eee,ERR_STREAM_DESTROYED:Oee,ERR_STREAM_PREMATURE_CLOSE:Aee},AbortError:xee}=Ki,{validateFunction:Ree,validateAbortSignal:Iee}=P0,{isIterable:Fc,isReadable:JS,isReadableNodeStream:hb,isNodeStream:vD,isTransformStream:hd,isWebStream:Pee,isReadableStream:YS,isReadableFinished:Dee}=iu,Nee=globalThis.AbortController||af().AbortController;let ZS,eT,tT;function wD(t,e,r){let n=!1;t.on("close",()=>{n=!0});const a=Hb(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,See.destroyer(t,s||new Oee("pipe")))},cleanup:a}}function jee(t){return Ree(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function rT(t){if(Fc(t))return t;if(hb(t))return Cee(t);throw new fO("val",["Readable","Iterable","AsyncIterable"],t)}async function*Cee(t){eT||(eT=s_()),yield*eT.prototype[_ee].call(t)}async function t1(t,e,r,{end:n}){let a,s=null;const o=l=>{if(l&&(a=l),s){const d=s;s=null,d()}},u=()=>new gee((l,d)=>{a?d(a):s=()=>{a?d(a):l()}});e.on("drain",o);const c=Hb(e,{readable:!1},o);try{e.writableNeedDrain&&await u();for await(const l of t)e.write(l)||await u();n&&(e.end(),await u()),r()}catch(l){r(a!==l?Tee(a,l):l)}finally{c(),e.off("drain",o)}}async function nT(t,e,r,{end:n}){hd(e)&&(e=e.writable);const a=e.getWriter();try{for await(const s of t)await a.ready,a.write(s).catch(()=>{});await a.ready,n&&await a.close(),r()}catch(s){try{await a.abort(s),r(s)}catch(o){r(o)}}}function Fee(...t){return tF(t,wee(jee(t)))}function tF(t,e,r){if(t.length===1&&mee(t[0])&&(t=t[0]),t.length<2)throw new Eee("streams");const n=new Nee,a=n.signal,s=r==null?void 0:r.signal,o=[];Iee(s,"options.signal");function u(){b(new xee)}tT=tT||Fi.addAbortListener;let c;s&&(c=tT(s,u));let l,d;const h=[];let f=0;function p(I){b(I,--f===0)}function b(I,O){var T;if(I&&(!l||l.code==="ERR_STREAM_PREMATURE_CLOSE")&&(l=I),!(!l&&!O)){for(;h.length;)h.shift()(l);(T=c)===null||T===void 0||T[vee](),n.abort(),O&&(l||o.forEach(x=>x()),Yh.nextTick(e,l,d))}}let y;for(let I=0;I<t.length;I++){const O=t[I],T=I<t.length-1,x=I>0,P=T||(r==null?void 0:r.end)!==!1,B=I===t.length-1;if(vD(O)){let Q=function(N){N&&N.name!=="AbortError"&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"&&p(N)};if(P){const{destroy:N,cleanup:D}=wD(O,T,x);h.push(N),JS(O)&&B&&o.push(D)}O.on("error",Q),JS(O)&&B&&o.push(()=>{O.removeListener("error",Q)})}if(I===0)if(typeof O=="function"){if(y=O({signal:a}),!Fc(y))throw new KS("Iterable, AsyncIterable or Stream","source",y)}else Fc(O)||hb(O)||hd(O)?y=O:y=_D.from(O);else if(typeof O=="function"){if(hd(y)){var S;y=rT((S=y)===null||S===void 0?void 0:S.readable)}else y=rT(y);if(y=O(y,{signal:a}),T){if(!Fc(y,!0))throw new KS("AsyncIterable",`transform[${I-1}]`,y)}else{var w;ZS||(ZS=eF);const Q=new ZS({objectMode:!0}),N=(w=y)===null||w===void 0?void 0:w.then;if(typeof N=="function")f++,N.call(y,W=>{d=W,W!=null&&Q.write(W),P&&Q.end(),Yh.nextTick(p)},W=>{Q.destroy(W),Yh.nextTick(p,W)});else if(Fc(y,!0))f++,t1(y,Q,p,{end:P});else if(YS(y)||hd(y)){const W=y.readable||y;f++,t1(W,Q,p,{end:P})}else throw new KS("AsyncIterable or Promise","destination",y);y=Q;const{destroy:D,cleanup:F}=wD(y,!1,!0);h.push(D),B&&o.push(F)}}else if(vD(O)){if(hb(y)){f+=2;const Q=Mee(y,O,p,{end:P});JS(O)&&B&&o.push(Q)}else if(hd(y)||YS(y)){const Q=y.readable||y;f++,t1(Q,O,p,{end:P})}else if(Fc(y))f++,t1(y,O,p,{end:P});else throw new fO("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],y);y=O}else if(Pee(O)){if(hb(y))f++,nT(rT(y),O,p,{end:P});else if(YS(y)||Fc(y))f++,nT(y,O,p,{end:P});else if(hd(y))f++,nT(y.readable,O,p,{end:P});else throw new fO("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],y);y=O}else y=_D.from(O)}return(a!=null&&a.aborted||s!=null&&s.aborted)&&Yh.nextTick(u),y}function Mee(t,e,r,{end:n}){let a=!1;if(e.on("close",()=>{a||r(new Aee)}),t.pipe(e,{end:!1}),n){let s=function(){a=!0,e.end()};Dee(t)?Yh.nextTick(s):t.once("end",s)}else r();return Hb(t,{readable:!0,writable:!1},s=>{const o=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&o&&o.ended&&!o.errored&&!o.errorEmitted?t.once("end",r).once("error",r):r(s)}),Hb(e,{readable:!1,writable:!0},r)}var gx={pipelineImpl:tF,pipeline:Fee};const{pipeline:Lee}=gx,r1=Jo(),{destroyer:Bee}=$f,{isNodeStream:n1,isReadable:SD,isWritable:TD,isWebStream:iT,isTransformStream:Tc,isWritableStream:ED,isReadableStream:OD}=iu,{AbortError:$ee,codes:{ERR_INVALID_ARG_VALUE:AD,ERR_MISSING_ARGS:Uee}}=Ki,qee=cc;var rF=function(...e){if(e.length===0)throw new Uee("streams");if(e.length===1)return r1.from(e[0]);const r=[...e];if(typeof e[0]=="function"&&(e[0]=r1.from(e[0])),typeof e[e.length-1]=="function"){const p=e.length-1;e[p]=r1.from(e[p])}for(let p=0;p<e.length;++p)if(!(!n1(e[p])&&!iT(e[p]))){if(p<e.length-1&&!(SD(e[p])||OD(e[p])||Tc(e[p])))throw new AD(`streams[${p}]`,r[p],"must be readable");if(p>0&&!(TD(e[p])||ED(e[p])||Tc(e[p])))throw new AD(`streams[${p}]`,r[p],"must be writable")}let n,a,s,o,u;function c(p){const b=o;o=null,b?b(p):p?u.destroy(p):!f&&!h&&u.destroy()}const l=e[0],d=Lee(e,c),h=!!(TD(l)||ED(l)||Tc(l)),f=!!(SD(d)||OD(d)||Tc(d));if(u=new r1({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(d!=null&&d.readableObjectMode),writable:h,readable:f}),h){if(n1(l))u._write=function(b,y,S){l.write(b,y)?S():n=S},u._final=function(b){l.end(),a=b},l.on("drain",function(){if(n){const b=n;n=null,b()}});else if(iT(l)){const y=(Tc(l)?l.writable:l).getWriter();u._write=async function(S,w,I){try{await y.ready,y.write(S).catch(()=>{}),I()}catch(O){I(O)}},u._final=async function(S){try{await y.ready,y.close().catch(()=>{}),a=S}catch(w){S(w)}}}const p=Tc(d)?d.readable:d;qee(p,()=>{if(a){const b=a;a=null,b()}})}if(f){if(n1(d))d.on("readable",function(){if(s){const p=s;s=null,p()}}),d.on("end",function(){u.push(null)}),u._read=function(){for(;;){const p=d.read();if(p===null){s=u._read;return}if(!u.push(p))return}};else if(iT(d)){const b=(Tc(d)?d.readable:d).getReader();u._read=async function(){for(;;)try{const{value:y,done:S}=await b.read();if(!u.push(y))return;if(S){u.push(null);return}}catch{return}}}}return u._destroy=function(p,b){!p&&o!==null&&(p=new $ee),s=null,n=null,a=null,o===null?b(p):(o=b,n1(d)&&Bee(d,p))},u};const Vee=globalThis.AbortController||af().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Hee,ERR_INVALID_ARG_TYPE:N0,ERR_MISSING_ARGS:kee,ERR_OUT_OF_RANGE:Qee},AbortError:to}=Ki,{validateAbortSignal:Al,validateInteger:xD,validateObject:xl}=P0,Gee=Kr.Symbol("kWeak"),zee=Kr.Symbol("kResistStopPropagation"),{finished:Wee}=cc,Xee=rF,{addAbortSignalNoValidate:Kee}=i_,{isWritable:Jee,isNodeStream:Yee}=iu,{deprecate:Zee}=Fi,{ArrayPrototypePush:ete,Boolean:tte,MathFloor:RD,Number:rte,NumberIsNaN:nte,Promise:ID,PromiseReject:PD,PromiseResolve:ite,PromisePrototypeThen:DD,Symbol:nF}=Kr,kb=nF("kEmpty"),ND=nF("kEof");function ate(t,e){if(e!=null&&xl(e,"options"),(e==null?void 0:e.signal)!=null&&Al(e.signal,"options.signal"),Yee(t)&&!Jee(t))throw new Hee("stream",t,"must be writable");const r=Xee(this,t);return e!=null&&e.signal&&Kee(e.signal,r),r}function o_(t,e){if(typeof t!="function")throw new N0("fn",["Function","AsyncFunction"],t);e!=null&&xl(e,"options"),(e==null?void 0:e.signal)!=null&&Al(e.signal,"options.signal");let r=1;(e==null?void 0:e.concurrency)!=null&&(r=RD(e.concurrency));let n=r-1;return(e==null?void 0:e.highWaterMark)!=null&&(n=RD(e.highWaterMark)),xD(r,"options.concurrency",1),xD(n,"options.highWaterMark",0),n+=r,(async function*(){const s=Fi.AbortSignalAny([e==null?void 0:e.signal].filter(tte)),o=this,u=[],c={signal:s};let l,d,h=!1,f=0;function p(){h=!0,b()}function b(){f-=1,y()}function y(){d&&!h&&f<r&&u.length<n&&(d(),d=null)}async function S(){try{for await(let w of o){if(h)return;if(s.aborted)throw new to;try{if(w=t(w,c),w===kb)continue;w=ite(w)}catch(I){w=PD(I)}f+=1,DD(w,b,p),u.push(w),l&&(l(),l=null),!h&&(u.length>=n||f>=r)&&await new ID(I=>{d=I})}u.push(ND)}catch(w){const I=PD(w);DD(I,b,p),u.push(I)}finally{h=!0,l&&(l(),l=null)}}S();try{for(;;){for(;u.length>0;){const w=await u[0];if(w===ND)return;if(s.aborted)throw new to;w!==kb&&(yield w),u.shift(),y()}await new ID(w=>{l=w})}}finally{h=!0,d&&(d(),d=null)}}).call(this)}function ste(t=void 0){return t!=null&&xl(t,"options"),(t==null?void 0:t.signal)!=null&&Al(t.signal,"options.signal"),(async function*(){let r=0;for await(const a of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new to({cause:t.signal.reason});yield[r++,a]}}).call(this)}async function iF(t,e=void 0){for await(const r of _x.call(this,t,e))return!0;return!1}async function ote(t,e=void 0){if(typeof t!="function")throw new N0("fn",["Function","AsyncFunction"],t);return!await iF.call(this,async(...r)=>!await t(...r),e)}async function ute(t,e){for await(const r of _x.call(this,t,e))return r}async function cte(t,e){if(typeof t!="function")throw new N0("fn",["Function","AsyncFunction"],t);async function r(n,a){return await t(n,a),kb}for await(const n of o_.call(this,r,e));}function _x(t,e){if(typeof t!="function")throw new N0("fn",["Function","AsyncFunction"],t);async function r(n,a){return await t(n,a)?n:kb}return o_.call(this,r,e)}class lte extends kee{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function dte(t,e,r){var n;if(typeof t!="function")throw new N0("reducer",["Function","AsyncFunction"],t);r!=null&&xl(r,"options"),(r==null?void 0:r.signal)!=null&&Al(r.signal,"options.signal");let a=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const l=new to(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Wee(this.destroy(l)),l}const s=new Vee,o=s.signal;if(r!=null&&r.signal){const l={once:!0,[Gee]:this,[zee]:!0};r.signal.addEventListener("abort",()=>s.abort(),l)}let u=!1;try{for await(const l of this){var c;if(u=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new to;a?e=await t(e,l,{signal:o}):(e=l,a=!0)}if(!u&&!a)throw new lte}finally{s.abort()}return e}async function fte(t){t!=null&&xl(t,"options"),(t==null?void 0:t.signal)!=null&&Al(t.signal,"options.signal");const e=[];for await(const n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new to(void 0,{cause:t.signal.reason});ete(e,n)}return e}function hte(t,e){const r=o_.call(this,t,e);return(async function*(){for await(const a of r)yield*a}).call(this)}function aF(t){if(t=rte(t),nte(t))return 0;if(t<0)throw new Qee("number",">= 0",t);return t}function pte(t,e=void 0){return e!=null&&xl(e,"options"),(e==null?void 0:e.signal)!=null&&Al(e.signal,"options.signal"),t=aF(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new to;for await(const s of this){var a;if(e!=null&&(a=e.signal)!==null&&a!==void 0&&a.aborted)throw new to;t--<=0&&(yield s)}}).call(this)}function yte(t,e=void 0){return e!=null&&xl(e,"options"),(e==null?void 0:e.signal)!=null&&Al(e.signal,"options.signal"),t=aF(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new to;for await(const s of this){var a;if(e!=null&&(a=e.signal)!==null&&a!==void 0&&a.aborted)throw new to;if(t-- >0&&(yield s),t<=0)return}}).call(this)}ux.streamReturningOperators={asIndexedPairs:Zee(ste,"readable.asIndexedPairs will be removed in a future version."),drop:pte,filter:_x,flatMap:hte,map:o_,take:yte,compose:ate};ux.promiseReturningOperators={every:ote,forEach:cte,reduce:dte,toArray:fte,some:iF,find:ute};var aT,jD;function sF(){if(jD)return aT;jD=1;const{ArrayPrototypePop:t,Promise:e}=Kr,{isIterable:r,isNodeStream:n,isWebStream:a}=iu,{pipelineImpl:s}=gx,{finished:o}=cc;oF();function u(...c){return new e((l,d)=>{let h,f;const p=c[c.length-1];if(p&&typeof p=="object"&&!n(p)&&!r(p)&&!a(p)){const b=t(c);h=b.signal,f=b.end}s(c,(b,y)=>{b?d(b):l(y)},{signal:h,end:f})})}return aT={finished:o,pipeline:u},aT}var CD;function oF(){if(CD)return US.exports;CD=1;const{Buffer:t}=ao,{ObjectDefineProperty:e,ObjectKeys:r,ReflectApply:n}=Kr,{promisify:{custom:a}}=Fi,{streamReturningOperators:s,promiseReturningOperators:o}=ux,{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=Ki,c=rF,{setDefaultHighWaterMark:l,getDefaultHighWaterMark:d}=a_,{pipeline:h}=gx,{destroyer:f}=$f,p=cc,b=sF(),y=iu,S=US.exports=hx.Stream;S.isDestroyed=y.isDestroyed,S.isDisturbed=y.isDisturbed,S.isErrored=y.isErrored,S.isReadable=y.isReadable,S.isWritable=y.isWritable,S.Readable=s_();for(const I of r(s)){let T=function(...x){if(new.target)throw u();return S.Readable.from(n(O,this,x))};const O=s[I];e(T,"name",{__proto__:null,value:O.name}),e(T,"length",{__proto__:null,value:O.length}),e(S.Readable.prototype,I,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const I of r(o)){let T=function(...x){if(new.target)throw u();return n(O,this,x)};const O=o[I];e(T,"name",{__proto__:null,value:O.name}),e(T,"length",{__proto__:null,value:O.length}),e(S.Readable.prototype,I,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}S.Writable=yx(),S.Duplex=Jo(),S.Transform=Y9,S.PassThrough=eF,S.pipeline=h;const{addAbortSignal:w}=i_;return S.addAbortSignal=w,S.finished=p,S.destroy=f,S.compose=c,S.setDefaultHighWaterMark=l,S.getDefaultHighWaterMark=d,e(S,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),e(h,a,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),e(p,a,{__proto__:null,enumerable:!0,get(){return b.finished}}),S.Stream=S,S._isUint8Array=function(O){return O instanceof Uint8Array},S._uint8ArrayToBuffer=function(O){return t.from(O.buffer,O.byteOffset,O.byteLength)},US.exports}(function(t){const e=oF(),r=sF(),n=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=n,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return r}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})(y9);var Kt=y9.exports;Object.defineProperty(Gg,"__esModule",{value:!0});Gg.ActorQueryResultSerializeJson=void 0;const bte=bs,FD=sr,mte=Kt;class gte extends bte.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}async testHandleChecked(e,r){if(!["bindings","quads","boolean"].includes(e.type))throw new Error("This actor can only handle bindings or quad streams.");return!0}async runHandle(e,r,n){const a=new mte.Readable;a._read=()=>{};let s=!0;if(e.type==="bindings"){const o=e.bindingsStream;a.push("["),o.on("error",u=>a.emit("error",u)),o.on("data",u=>{a.push(s?`
`:`,
`),a.push(JSON.stringify(Object.fromEntries([...u].map(([c,l])=>[c.value,FD.termToString(l)])))),s=!1}),o.on("end",()=>{a.push(s?`]
`:`
]
`),a.push(null)})}else if(e.type==="quads"){const o=e.quadStream;a.push("["),o.on("error",u=>a.emit("error",u)),o.on("data",u=>{a.push(s?`
`:`,
`),a.push(JSON.stringify(FD.quadToStringQuad(u))),s=!1}),o.on("end",()=>{a.push(s?`]
`:`
]
`),a.push(null)})}else try{a.push(`${JSON.stringify(await e.execute())}
`),a.push(null)}catch(o){setTimeout(()=>a.emit("error",o))}return{data:a}}}Gg.ActorQueryResultSerializeJson=gte;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Gg,t)})(p9);var uF={},u_={};Object.defineProperty(u_,"__esModule",{value:!0});u_.ActorQueryResultSerializeSimple=void 0;const _te=bs,vte=sr,wte=Kt;class kc extends _te.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}async testHandleChecked(e,r){if(!["bindings","quads","boolean","void"].includes(e.type))throw new Error("This actor can only handle bindings streams, quad streams, booleans, or updates.");return!0}static termToString(e){return e.termType==="Quad"?(0,vte.termToString)(e):e.value}async runHandle(e,r,n){const a=new wte.Readable;a._read=()=>{};let s;if(e.type==="bindings")s=e.bindingsStream,s.on("error",o=>a.emit("error",o)),s.on("data",o=>a.push(`${[...o].map(([u,c])=>`?${u.value}: ${kc.termToString(c)}`).join(`
`)}

`)),s.on("end",()=>a.push(null));else if(e.type==="quads")s=e.quadStream,s.on("error",o=>a.emit("error",o)),s.on("data",o=>a.push(`subject: ${kc.termToString(o.subject)}
predicate: ${kc.termToString(o.predicate)}
object: ${kc.termToString(o.object)}
graph: ${kc.termToString(o.graph)}

`)),s.on("end",()=>a.push(null));else if(e.type==="boolean")try{a.push(`${JSON.stringify(await e.execute())}
`),a.push(null)}catch(o){setTimeout(()=>a.emit("error",o))}else e.execute().then(()=>{a.push(`ok
`),a.push(null)}).catch(o=>setTimeout(()=>a.emit("error",o)));return{data:a}}}u_.ActorQueryResultSerializeSimple=kc;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(u_,t)})(uF);var cF={},c_={};Object.defineProperty(c_,"__esModule",{value:!0});c_.ActorQueryResultSerializeSparqlCsv=void 0;const Ste=bs,Tte=Kt;class wd extends Ste.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToCsvBindings(e){if(!e)return"";let r=e.value;if(e.termType==="Literal")r=`${r}`;else if(e.termType==="BlankNode")r=`_:${r}`;else if(e.termType==="Quad"){let n=wd.bindingToCsvBindings(e.object);e.object.termType==="Literal"&&(n=`"${n.replace(/"/ug,'""')}"`),r=`<< ${wd.bindingToCsvBindings(e.subject)} ${wd.bindingToCsvBindings(e.predicate)} ${n} >>`}else r=`<${r}>`;return/[",\n\r]/u.test(r)&&(r=`"${r.replace(/"/ug,'""')}"`),r}async testHandleChecked(e,r){if(e.type!=="bindings")throw new Error("This actor can only handle bindings streams.");return!0}async runHandle(e,r,n){const a=e,s=new Tte.Readable;s._read=()=>{};const o=await a.metadata();return s.push(`${o.variables.map(u=>u.value).join(",")}\r
`),a.bindingsStream.on("error",u=>{s.emit("error",u)}),a.bindingsStream.on("data",u=>{s.push(`${o.variables.map(c=>wd.bindingToCsvBindings(u.get(c))).join(",")}\r
`)}),a.bindingsStream.on("end",()=>{s.push(null)}),{data:s}}}c_.ActorQueryResultSerializeSparqlCsv=wd;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(c_,t)})(cF);var lF={},l_={},j0={},ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.stringQuadToQuad=ei.quadToStringQuad=ei.stringToTerm=ei.getLiteralLanguage=ei.getLiteralType=ei.getLiteralValue=ei.termToString=void 0;const Ete=yt,dF=new Ete.DataFactory;function qo(t){if(t)switch(t.termType){case"NamedNode":return`<${xte(t.value)}>`;case"BlankNode":return`_:${t.value}`;case"Literal":{const e=t;return`"${Rte(e.value)}"${e.datatype&&e.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&e.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?`^^<${e.datatype.value}>`:""}${e.language?`@${e.language}`:""}`}case"Quad":return`<<${qo(t.subject)} ${qo(t.predicate)} ${qo(t.object)}${t.graph.termType==="DefaultGraph"?"":` ${qo(t.graph)}`}>>`;case"Variable":return`?${t.value}`;case"DefaultGraph":return t.value}}ei.termToString=qo;function fF(t){const e=/^"([^]*)"((\^\^.*)|(@.*))?$/u.exec(t);if(!e)throw new Error(`${t} is not a literal`);return e[1].replace(/\\"/ug,'"')}ei.getLiteralValue=fF;function hF(t){const e=/^"[^]*"(?:\^\^<([^"]+)>|(@)[^@"]+)?$/u.exec(t);if(!e)throw new Error(`${t} is not a literal`);return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}ei.getLiteralType=hF;function pF(t){const e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/u.exec(t);if(!e)throw new Error(`${t} is not a literal`);return e[1]?e[1].toLowerCase():""}ei.getLiteralLanguage=pF;function Vo(t,e){if(e=e||dF,!t||t.length===0)return e.defaultGraph();switch(t[0]){case"_":return e.blankNode(t.slice(2));case"?":if(!e.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return e.variable(t.slice(1));case'"':{const r=pF(t),n=e.namedNode(hF(t));return e.literal(fF(t),r||n)}case"<":default:if(t.startsWith("<<")&&t.endsWith(">>")){const r=t.slice(2,-2),n=[];let a=0,s=0;for(let o=0;o<r.length;o++){const u=r[o];if(u==="<"&&a++,u===">"){if(a===0)throw new Error(`Found closing tag without opening tag in ${t}`);a--}u===" "&&a===0&&(n.push(r.slice(s,o)),s=o+1)}if(a!==0)throw new Error(`Found opening tag without closing tag in ${t}`);if(n.push(r.slice(s,r.length)),n.length!==3&&n.length!==4)throw new Error(`Nested quad syntax error ${t}`);return e.quad(Vo(n[0]),Vo(n[1]),Vo(n[2]),n[3]?Vo(n[3]):void 0)}if(!t.startsWith("<")||!t.endsWith(">"))throw new Error(`Detected invalid iri for named node (must be wrapped in <>): ${t}`);return e.namedNode(t.slice(1,-1))}}ei.stringToTerm=Vo;function Ote(t){return{subject:qo(t.subject),predicate:qo(t.predicate),object:qo(t.object),graph:qo(t.graph)}}ei.quadToStringQuad=Ote;function Ate(t,e){return e=e||dF,e.quad(Vo(t.subject,e),Vo(t.predicate,e),Vo(t.object,e),Vo(t.graph,e))}ei.stringQuadToQuad=Ate;function xte(t){return t.replace(hO,yF)}function Rte(t){return hO.test(t)&&(t=t.replace(hO,yF)),t}const hO=/["\\\t\n\r\b\f\u0000-\u0019]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ite=new Map([["\\","\\\\"],['"','\\"'],["	","\\t"],[`
`,"\\n"],["\r","\\r"],["\b","\\b"],["\f","\\f"]]);function yF(t){const e=Ite.get(t);if(!e){if(t.length===1){const n=t.charCodeAt(0).toString(16);return`${"\\u0000".slice(0,-n.length)}${n}`}const r=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16);return`${"\\U00000000".slice(0,-r.length)}${r}`}return e}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.termToString=t.stringToTerm=t.stringQuadToQuad=t.quadToStringQuad=t.getLiteralValue=t.getLiteralType=t.getLiteralLanguage=void 0;const e=ei;Object.defineProperty(t,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(t,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(t,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(t,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(t,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(t,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(t,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(j0);Object.defineProperty(l_,"__esModule",{value:!0});l_.ActorQueryResultSerializeSparqlTsv=void 0;const Pte=bs,Dte=j0,Nte=Kt;class vx extends Pte.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToTsvBindings(e){return e?(0,Dte.termToString)(e).replace(/\t/gu,"\\t").replace(/\n/gu,"\\n").replace(/\r/gu,"\\r"):""}async testHandleChecked(e,r){if(e.type!=="bindings")throw new Error("This actor can only handle bindings streams.");return!0}async runHandle(e,r,n){const a=e,s=new Nte.Readable;s._read=()=>{};const o=await a.metadata();return s.push(`${o.variables.map(u=>u.value).join("	")}
`),a.bindingsStream.on("error",u=>{s.emit("error",u)}),a.bindingsStream.on("data",u=>{s.push(`${o.variables.map(c=>vx.bindingToTsvBindings(u.get(c))).join("	")}
`)}),a.bindingsStream.on("end",()=>{s.push(null)}),{data:s}}}l_.ActorQueryResultSerializeSparqlTsv=vx;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(l_,t)})(lF);var bF={},d_={},f_={};Object.defineProperty(f_,"__esModule",{value:!0});f_.XmlSerializer=void 0;class jte{constructor(e){this.stack=[],this.push=e,this.push(`<?xml version="1.0" encoding="UTF-8"?>
`)}open(e,r){this.push(`${this.identation()+this.formatTag(e,r,"open")}
`),this.stack.push(e)}close(){const e=this.stack.pop();if(e===void 0)throw new Error("There is no tag left to close");this.push(`${this.identation()+this.formatTag(e,{},"close")}
`)}add(e){this.push(this.serializeNode(e))}serializeNode(e){if(e.children===void 0)return`${this.identation()+this.formatTag(e.name,e.attributes,"self-closing")}
`;if(typeof e.children=="string")return`${this.identation()+this.formatTag(e.name,e.attributes,"open")+this.escape(e.children)+this.formatTag(e.name,{},"close")}
`;const r=[];r.push(`${this.identation()+this.formatTag(e.name,e.attributes,"open")}
`),this.stack.push(e.name);for(const n of e.children)r.push(this.serializeNode(n));return this.stack.pop(),r.push(`${this.identation()+this.formatTag(e.name,{},"close")}
`),r.join("")}identation(){return this.stack.map(e=>"  ").join("")}formatTag(e,r,n){return`<${n==="close"?"/":""}${e}${Object.entries(r||{}).map(a=>` ${a[0]}="${this.escape(a[1])}"`)}${n==="self-closing"?"/":""}>`}escape(e){return e.replace(/["&'<>]/gu,r=>{switch(r){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}})}}f_.XmlSerializer=jte;Object.defineProperty(d_,"__esModule",{value:!0});d_.ActorQueryResultSerializeSparqlXml=void 0;const Cte=bs,Fte=Kt,Mte=f_;class wx extends Cte.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToXmlBindings(e,r){return{name:"binding",attributes:{name:r.value},children:[this.valueToXmlValue(e)]}}static valueToXmlValue(e){let r;switch(e.termType){case"Literal":return e.language?r={"xml:lang":e.language}:e.datatype&&e.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"?r={datatype:e.datatype.value}:r={},{name:"literal",attributes:r,children:e.value};case"BlankNode":return{name:"bnode",children:e.value};case"Quad":return{name:"triple",children:[{name:"subject",children:[this.valueToXmlValue(e.subject)]},{name:"predicate",children:[this.valueToXmlValue(e.predicate)]},{name:"object",children:[this.valueToXmlValue(e.object)]}]};default:return{name:"uri",children:e.value}}}async testHandleChecked(e,r){if(!["bindings","boolean"].includes(e.type))throw new Error("This actor can only handle bindings streams or booleans.");return!0}async runHandle(e,r,n){const a=new Fte.Readable;a._read=()=>{};const s=new Mte.XmlSerializer(u=>a.push(u));s.open("sparql",{xmlns:"http://www.w3.org/2005/sparql-results#"});const o=await e.metadata();if(s.add({name:"head",children:o.variables.map(u=>({name:"variable",attributes:{name:u.value}}))}),e.type==="bindings"){s.open("results");const u=e.bindingsStream;u.on("error",c=>{a.emit("error",c)}),u.on("data",c=>{s.add({name:"result",children:[...c].map(([l,d])=>wx.bindingToXmlBindings(d,l))})}),u.on("end",()=>{s.close(),s.close(),setTimeout(()=>a.push(null))})}else try{const u=await e.execute();s.add({name:"boolean",children:u.toString()}),s.close(),setTimeout(()=>a.push(null))}catch(u){setTimeout(()=>a.emit("error",u))}return{data:a}}}d_.ActorQueryResultSerializeSparqlXml=wx;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(d_,t)})(bF);var mF={},h_={};Object.defineProperty(h_,"__esModule",{value:!0});h_.ActorQueryResultSerializeTable=void 0;const Lte=bs,Bte=yt,$te=sr,gF=hn,Ute=Kt,qte=new Bte.DataFactory,Vte=gF.QUAD_TERM_NAMES.map(t=>qte.variable(t));class Qb extends Lte.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e),this.padding=Qb.repeat(" ",this.columnWidth)}static repeat(e,r){return e.repeat(r)}async testHandleChecked(e,r){if(!["bindings","quads"].includes(e.type))throw new Error("This actor can only handle bindings or quad streams.");return!0}termToString(e){return e.termType==="Quad"?(0,$te.termToString)(e):e.value}pad(e){return e.length<=this.columnWidth?e+this.padding.slice(e.length):`${e.slice(0,this.columnWidth-1)}`}pushHeader(e,r){const n=r.map(a=>this.pad(a.value)).join(" ");e.push(`${n}
${Qb.repeat("-",n.length)}
`)}pushRow(e,r,n){e.push(`${r.map(a=>n.has(a)?this.termToString(n.get(a)):"").map(a=>this.pad(a)).join(" ")}
`)}async runHandle(e,r,n){const a=new Ute.Readable;a._read=()=>{};let s;if(e.type==="bindings"){s=e.bindingsStream;const o=(await e.metadata()).variables;this.pushHeader(a,o),s.on("error",u=>a.emit("error",u)),s.on("data",u=>this.pushRow(a,o,u))}else s=e.quadStream,this.pushHeader(a,Vte),s.on("error",o=>a.emit("error",o)),s.on("data",o=>a.push(`${(0,gF.getTerms)(o).map(u=>this.pad(this.termToString(u))).join(" ")}
`));return s.on("end",()=>a.push(null)),{data:a}}}h_.ActorQueryResultSerializeTable=Qb;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(h_,t)})(mF);var _F={},Cp={},vF={},p_={},wF={},pO={},y_={},Zo={};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.Translator=void 0;class Hte{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(e){throw new Error(`Invalid RDF ${e.datatype.value} value: '${e.value}'`)}registerHandler(e,r,n){for(const a of r)this.supportedRdfDatatypes.push(a),this.fromRdfHandlers[a.value]=e;for(const a of n){let s=this.toRdfHandlers[a];s||(this.toRdfHandlers[a]=s=[]),s.push(e)}}fromRdf(e,r){const n=this.fromRdfHandlers[e.datatype.value];return n?n.fromRdf(e,r):e.value}toRdf(e,r){const n=this.toRdfHandlers[typeof e];if(n)for(const a of n){const s=a.toRdf(e,r);if(s)return s}throw new Error(`Invalid JavaScript value: '${e}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}Zo.Translator=Hte;Object.defineProperty(y_,"__esModule",{value:!0});y_.TypeHandlerBoolean=void 0;const kte=Zo;class b_{fromRdf(e,r){switch(e.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return r&&kte.Translator.incorrectRdfDataType(e),!1}toRdf(e,{datatype:r,dataFactory:n}){return n.literal(e?"true":"false",r||n.namedNode(b_.TYPE))}}b_.TYPE="http://www.w3.org/2001/XMLSchema#boolean";y_.TypeHandlerBoolean=b_;var m_={};Object.defineProperty(m_,"__esModule",{value:!0});m_.TypeHandlerDate=void 0;const Qte=Zo;class of{fromRdf(e,r){switch(r&&!e.value.match(of.VALIDATORS[e.datatype.value.substr(33,e.datatype.value.length)])&&Qte.Translator.incorrectRdfDataType(e),e.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(e.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const n=e.value.split("-");return new Date(0,parseInt(n[0],10)-1,parseInt(n[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(e.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(e.value+"-01");default:return new Date(e.value)}}toRdf(e,{datatype:r,dataFactory:n}){if(r=r||n.namedNode(of.TYPES[0]),!(e instanceof Date))return null;const a=e;let s;switch(r.value){case"http://www.w3.org/2001/XMLSchema#gDay":s=String(a.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":s=a.getUTCMonth()+1+"-"+a.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":s=String(a.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":s=a.getUTCFullYear()+"-"+(a.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":s=a.toISOString().replace(/T.*$/,"");break;default:s=a.toISOString()}return n.literal(s,r)}}of.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"];of.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/};m_.TypeHandlerDate=of;var g_={};Object.defineProperty(g_,"__esModule",{value:!0});g_.TypeHandlerNumberDouble=void 0;const Gte=Zo;class __{fromRdf(e,r){const n=parseFloat(e.value);return r&&isNaN(n)&&Gte.Translator.incorrectRdfDataType(e),n}toRdf(e,{datatype:r,dataFactory:n}){return r=r||n.namedNode(__.TYPES[0]),isNaN(e)?n.literal("NaN",r):isFinite(e)?e%1===0?null:n.literal(e.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),r):n.literal(e>0?"INF":"-INF",r)}}__.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"];g_.TypeHandlerNumberDouble=__;var v_={};Object.defineProperty(v_,"__esModule",{value:!0});v_.TypeHandlerNumberInteger=void 0;const zte=Zo;class Ho{fromRdf(e,r){const n=parseInt(e.value,10);return r&&(isNaN(n)||e.value.indexOf(".")>=0)&&zte.Translator.incorrectRdfDataType(e),n}toRdf(e,{datatype:r,dataFactory:n}){return n.literal(String(e),r||(e<=Ho.MAX_INT&&e>=Ho.MIN_INT?n.namedNode(Ho.TYPES[0]):n.namedNode(Ho.TYPES[1])))}}Ho.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"];Ho.MAX_INT=2147483647;Ho.MIN_INT=-2147483648;v_.TypeHandlerNumberInteger=Ho;var w_={};Object.defineProperty(w_,"__esModule",{value:!0});w_.TypeHandlerString=void 0;class SF{fromRdf(e){return e.value}toRdf(e,{datatype:r,dataFactory:n}){return n.literal(e,r)}}SF.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"];w_.TypeHandlerString=SF;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(y_,t),r(m_,t),r(g_,t),r(v_,t),r(w_,t)})(pO);var TF={};Object.defineProperty(TF,"__esModule",{value:!0});(function(t){var e=g&&g.__createBinding||(Object.create?function(p,b,y,S){S===void 0&&(S=y);var w=Object.getOwnPropertyDescriptor(b,y);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[y]}}),Object.defineProperty(p,S,w)}:function(p,b,y,S){S===void 0&&(S=y),p[S]=b[y]}),r=g&&g.__exportStar||function(p,b){for(var y in p)y!=="default"&&!Object.prototype.hasOwnProperty.call(b,y)&&e(b,p,y)};Object.defineProperty(t,"__esModule",{value:!0}),t.getSupportedJavaScriptPrimitives=t.getSupportedRdfDatatypes=t.getTermRaw=t.toRdf=t.fromRdf=void 0;const n=yt,a=pO,s=Zo;r(pO,t),r(TF,t),r(Zo,t);const o=new n.DataFactory,u=new s.Translator;u.registerHandler(new a.TypeHandlerString,a.TypeHandlerString.TYPES.map(p=>o.namedNode(p)),["string"]),u.registerHandler(new a.TypeHandlerBoolean,[a.TypeHandlerBoolean.TYPE].map(p=>o.namedNode(p)),["boolean"]),u.registerHandler(new a.TypeHandlerNumberDouble,a.TypeHandlerNumberDouble.TYPES.map(p=>o.namedNode(p)),["number"]),u.registerHandler(new a.TypeHandlerNumberInteger,a.TypeHandlerNumberInteger.TYPES.map(p=>o.namedNode(p)),["number"]),u.registerHandler(new a.TypeHandlerDate,a.TypeHandlerDate.TYPES.map(p=>o.namedNode(p)),["object"]);function c(p,b){return u.fromRdf(p,b)}t.fromRdf=c;function l(p,b){return b&&"namedNode"in b&&(b={dataFactory:b}),b=b||{},b&&!b.dataFactory&&(b.dataFactory=o),u.toRdf(p,b)}t.toRdf=l;function d(p,b){return p.termType==="Literal"?c(p,b):p.value}t.getTermRaw=d;function h(){return u.getSupportedRdfDatatypes()}t.getSupportedRdfDatatypes=h;function f(){return u.getSupportedJavaScriptPrimitives()}t.getSupportedJavaScriptPrimitives=f})(wF);var Sx={},S_={},{Buffer:Fu}=ao,Ct={},EF=Ct.LEFT_BRACE=1,pb=Ct.RIGHT_BRACE=2,OF=Ct.LEFT_BRACKET=3,yO=Ct.RIGHT_BRACKET=4,yb=Ct.COLON=5,Gb=Ct.COMMA=6,AF=Ct.TRUE=7,xF=Ct.FALSE=8,RF=Ct.NULL=9,zb=Ct.STRING=10,IF=Ct.NUMBER=11,Mc=Ct.START=17,PF=Ct.STOP=18,MD=Ct.TRUE1=33,LD=Ct.TRUE2=34,BD=Ct.TRUE3=35,$D=Ct.FALSE1=49,UD=Ct.FALSE2=50,qD=Ct.FALSE3=51,VD=Ct.FALSE4=52,HD=Ct.NULL1=65,kD=Ct.NULL2=66,QD=Ct.NULL3=67,GD=Ct.NUMBER1=81,sT=Ct.NUMBER3=83,ka=Ct.STRING1=97,zD=Ct.STRING2=98,WD=Ct.STRING3=99,Wte=Ct.STRING4=100,Xte=Ct.STRING5=101,XD=Ct.STRING6=102,Sd=Ct.VALUE=113,oT=Ct.KEY=114,i1=Ct.OBJECT=129,a1=Ct.ARRAY=130,Kte="\\".charCodeAt(0),Jte="/".charCodeAt(0),Yte="\b".charCodeAt(0),Zte="\f".charCodeAt(0),ere=`
`.charCodeAt(0),tre="\r".charCodeAt(0),rre="	".charCodeAt(0),Tx=64*1024;function s1(t){return Fu.alloc?Fu.alloc(t):new Fu(t)}function Zu(){this.tState=Mc,this.value=void 0,this.string=void 0,this.stringBuffer=s1(Tx),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=Sd,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:s1(2),3:s1(3),4:s1(4)},this.offset=-1}Zu.toknam=function(t){for(var e=Object.keys(Ct),r=0,n=e.length;r<n;r++){var a=e[r];if(Ct[a]===t)return a}return t&&"0x"+t.toString(16)};var _a=Zu.prototype;_a.onError=function(t){throw t};_a.charError=function(t,e){this.tState=PF,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+Zu.toknam(this.tState)))};_a.appendStringChar=function(t){this.stringBufferOffset>=Tx&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=t};_a.appendStringBuf=function(t,e,r){var n=t.length;typeof e=="number"&&(typeof r=="number"?r<0?n=t.length-e+r:n=r-e:n=t.length-e),n<0&&(n=0),this.stringBufferOffset+n>Tx&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),t.copy(this.stringBuffer,this.stringBufferOffset,e,r),this.stringBufferOffset+=n};_a.write=function(t){typeof t=="string"&&(t=new Fu(t));for(var e,r=0,n=t.length;r<n;r++)if(this.tState===Mc){if(e=t[r],this.offset++,e===123)this.onToken(EF,"{");else if(e===125)this.onToken(pb,"}");else if(e===91)this.onToken(OF,"[");else if(e===93)this.onToken(yO,"]");else if(e===58)this.onToken(yb,":");else if(e===44)this.onToken(Gb,",");else if(e===116)this.tState=MD;else if(e===102)this.tState=$D;else if(e===110)this.tState=HD;else if(e===34)this.string="",this.stringBufferOffset=0,this.tState=ka;else if(e===45)this.string="-",this.tState=GD;else if(e>=48&&e<64)this.string=String.fromCharCode(e),this.tState=sT;else if(!(e===32||e===9||e===10||e===13))return this.charError(t,r)}else if(this.tState===ka)if(e=t[r],this.bytes_remaining>0){for(var a=0;a<this.bytes_remaining;a++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+a]=t[a];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,r=r+a-1}else if(this.bytes_remaining===0&&e>=128){if(e<=193||e>244)return this.onError(new Error("Invalid UTF-8 character at position "+r+" in state "+Zu.toknam(this.tState)));if(e>=194&&e<=223&&(this.bytes_in_sequence=2),e>=224&&e<=239&&(this.bytes_in_sequence=3),e>=240&&e<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>t.length){for(var s=0;s<=t.length-1-r;s++)this.temp_buffs[this.bytes_in_sequence][s]=t[r+s];this.bytes_remaining=r+this.bytes_in_sequence-t.length,r=t.length-1}else this.appendStringBuf(t,r,r+this.bytes_in_sequence),r=r+this.bytes_in_sequence-1}else if(e===34)this.tState=Mc,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(zb,this.string),this.offset+=Fu.byteLength(this.string,"utf8")+1,this.string=void 0;else if(e===92)this.tState=zD;else if(e>=32)this.appendStringChar(e);else return this.charError(t,r);else if(this.tState===zD)if(e=t[r],e===34)this.appendStringChar(e),this.tState=ka;else if(e===92)this.appendStringChar(Kte),this.tState=ka;else if(e===47)this.appendStringChar(Jte),this.tState=ka;else if(e===98)this.appendStringChar(Yte),this.tState=ka;else if(e===102)this.appendStringChar(Zte),this.tState=ka;else if(e===110)this.appendStringChar(ere),this.tState=ka;else if(e===114)this.appendStringChar(tre),this.tState=ka;else if(e===116)this.appendStringChar(rre),this.tState=ka;else if(e===117)this.unicode="",this.tState=WD;else return this.charError(t,r);else if(this.tState===WD||this.tState===Wte||this.tState===Xte||this.tState===XD)if(e=t[r],e>=48&&e<64||e>64&&e<=70||e>96&&e<=102){if(this.unicode+=String.fromCharCode(e),this.tState++===XD){var o=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&o>=56320&&o<57343+1?(this.appendStringBuf(new Fu(String.fromCharCode(this.highSurrogate,o))),this.highSurrogate=void 0):this.highSurrogate===void 0&&o>=55296&&o<56319+1?this.highSurrogate=o:(this.highSurrogate!==void 0&&(this.appendStringBuf(new Fu(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new Fu(String.fromCharCode(o)))),this.tState=ka}}else return this.charError(t,r);else if(this.tState===GD||this.tState===sT)switch(e=t[r],e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(e),this.tState=sT;break;default:this.tState=Mc;var u=this.numberReviver(this.string);if(u)return u;this.offset+=this.string.length-1,this.string=void 0,r--;break}else if(this.tState===MD)if(t[r]===114)this.tState=LD;else return this.charError(t,r);else if(this.tState===LD)if(t[r]===117)this.tState=BD;else return this.charError(t,r);else if(this.tState===BD)if(t[r]===101)this.tState=Mc,this.onToken(AF,!0),this.offset+=3;else return this.charError(t,r);else if(this.tState===$D)if(t[r]===97)this.tState=UD;else return this.charError(t,r);else if(this.tState===UD)if(t[r]===108)this.tState=qD;else return this.charError(t,r);else if(this.tState===qD)if(t[r]===115)this.tState=VD;else return this.charError(t,r);else if(this.tState===VD)if(t[r]===101)this.tState=Mc,this.onToken(xF,!1),this.offset+=4;else return this.charError(t,r);else if(this.tState===HD)if(t[r]===117)this.tState=kD;else return this.charError(t,r);else if(this.tState===kD)if(t[r]===108)this.tState=QD;else return this.charError(t,r);else if(this.tState===QD)if(t[r]===108)this.tState=Mc,this.onToken(RF,null),this.offset+=3;else return this.charError(t,r)};_a.onToken=function(t,e){};_a.parseError=function(t,e){this.tState=PF,this.onError(new Error("Unexpected "+Zu.toknam(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+Zu.toknam(this.state)))};_a.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})};_a.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=Sd)};_a.emit=function(t){this.mode&&(this.state=Gb),this.onValue(t)};_a.onValue=function(t){};_a.onToken=function(t,e){if(this.state===Sd)if(t===zb||t===IF||t===AF||t===xF||t===RF)this.value&&(this.value[this.key]=e),this.emit(e);else if(t===EF)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=oT,this.mode=i1;else if(t===OF)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=a1,this.state=Sd;else if(t===pb)if(this.mode===i1)this.pop();else return this.parseError(t,e);else if(t===yO)if(this.mode===a1)this.pop();else return this.parseError(t,e);else return this.parseError(t,e);else if(this.state===oT)if(t===zb)this.key=e,this.state=yb;else if(t===pb)this.pop();else return this.parseError(t,e);else if(this.state===yb)if(t===yb)this.state=Sd;else return this.parseError(t,e);else if(this.state===Gb)if(t===Gb)this.mode===a1?(this.key++,this.state=Sd):this.mode===i1&&(this.state=oT);else if(t===yO&&this.mode===a1||t===pb&&this.mode===i1)this.pop();else return this.parseError(t,e);else return this.parseError(t,e)};_a.numberReviver=function(t){var e=Number(t);if(isNaN(e))return this.charError(buffer,i);t.match(/[0-9]+/)==t&&e.toString()!=t?this.onToken(zb,t):this.onToken(IF,e)};Zu.C=Ct;var DF=Zu;Object.defineProperty(S_,"__esModule",{value:!0});S_.SparqlJsonParser=void 0;const nre=yt,ire=Kt,KD=DF;class are{constructor(e){var r;e=e||{},this.dataFactory=e.dataFactory||new nre.DataFactory,this.prefixVariableQuestionMark=!!e.prefixVariableQuestionMark,this.suppressMissingStreamResultsError=(r=e.suppressMissingStreamResultsError)!==null&&r!==void 0?r:!0}parseJsonResults(e){return e.results.bindings.map(r=>this.parseJsonBindings(r))}parseJsonResultsStream(e){const r=u=>o.emit("error",u);e.on("error",r);const n=new KD;n.onError=r;let a=!1,s=!1;n.onValue=u=>{if(n.key==="vars"&&n.stack.length===2&&n.stack[1].key==="head")o.emit("variables",u.map(c=>this.dataFactory.variable(c))),a=!0;else if(n.key==="results"&&n.stack.length===1)s=!0;else if(typeof n.key=="number"&&n.stack.length===3&&n.stack[1].key==="results"&&n.stack[2].key==="bindings")try{o.push(this.parseJsonBindings(u))}catch(c){o.emit("error",c)}else n.key==="metadata"&&n.stack.length===1&&o.emit("metadata",u)};const o=e.on("end",u=>{!s&&!this.suppressMissingStreamResultsError?o.emit("error",new Error("No valid SPARQL query results were found.")):a||o.emit("variables",[])}).pipe(new ire.Transform({objectMode:!0,transform(u,c,l){n.write(u),l()}}));return o}parseJsonBindings(e){const r={};for(const n in e){const a=e[n];r[this.prefixVariableQuestionMark?"?"+n:n]=this.parseJsonValue(a)}return r}parseJsonValue(e){let r;switch(e.type){case"bnode":r=this.dataFactory.blankNode(e.value);break;case"literal":e["xml:lang"]?r=this.dataFactory.literal(e.value,e["xml:lang"]):e.datatype?r=this.dataFactory.literal(e.value,this.dataFactory.namedNode(e.datatype)):r=this.dataFactory.literal(e.value);break;case"typed-literal":r=this.dataFactory.literal(e.value,this.dataFactory.namedNode(e.datatype));break;case"triple":const n=e.value;if(!n||!n.subject||!n.predicate||!n.object)throw new Error("Invalid quoted triple: "+JSON.stringify(e));r=this.dataFactory.quad(this.parseJsonValue(n.subject),this.parseJsonValue(n.predicate),this.parseJsonValue(n.object));break;default:r=this.dataFactory.namedNode(e.value);break}return r}parseJsonBoolean(e){if("boolean"in e)return e.boolean;throw new Error("No valid ASK response was found.")}parseJsonBooleanStream(e){return new Promise((r,n)=>{const a=new KD;a.onError=n,a.onValue=s=>{a.key==="boolean"&&typeof s=="boolean"&&a.stack.length===1&&r(s)},e.on("error",n).on("data",s=>a.write(s)).on("end",()=>n(new Error("No valid ASK response was found.")))})}}S_.SparqlJsonParser=are;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(S_,t)})(Sx);Object.defineProperty(p_,"__esModule",{value:!0});p_.Converter=void 0;const sre=wF,ore=Sx;class Ps{constructor(e){e=e||{delimiter:"_"},e.prefixVariableQuestionMark=!1,this.delimiter=e.delimiter||"_",this.parser=new ore.SparqlJsonParser(e),this.materializeRdfJsTerms=e.materializeRdfJsTerms}static addValueToTree(e,r,n,a,s,o){const u=r[0],c=a?a+o+u:u,l=s.singularizeVariables[c];if(r.length===1)l?e[u]||(e[u]=n):(e[u]||(e[u]=[]),e[u].push(n));else{let d;l?(e[u]||(e[u]={}),d=e[u]):(e[u]||(e[u]=[{}]),d=e[u][0]),Ps.addValueToTree(d,r.slice(1),n,c,s,o)}}static mergeTrees(e,r){if(typeof e!=typeof r)throw new Error(`Two incompatible tree nodes were found: ${typeof e} and ${typeof r}`);if(Array.isArray(e)!==Array.isArray(r))throw new Error(`Two incompatible tree nodes were found: Array?${Array.isArray(e)} and Array?${Array.isArray(r)}`);if(typeof e=="object"&&typeof r=="object"){if(e.termType&&r.termType)return e.equals(r)?{valid:!0,result:e}:{valid:!1,result:e};if(Array.isArray(e)&&Array.isArray(r)){if(e.length>0){const n=[];let a=!1;for(const s of e){const o=Ps.mergeTrees(s,r[0]);o.valid?(a=!0,n.push(o.result)):n.push(s)}if(a)return{valid:!0,result:n}}return{valid:!0,result:e.concat(r)}}else{const n={};for(const a in r)n[a]=r[a];for(const a in e)if(n[a]){const s=Ps.mergeTrees(e[a],n[a]);if(s.valid)n[a]=s.result;else return{valid:!1,result:e}}else n[a]=e[a];return{valid:!0,result:n}}}else throw new Error(`Unmergable tree types: ${typeof e} and ${typeof r}`)}static materializeTree(e){if(e.termType)return(0,sre.getTermRaw)(e);if(Array.isArray(e))return e.map(Ps.materializeTree);{const r={};for(const n in e)r[n]=Ps.materializeTree(e[n]);return r}}sparqlJsonResultsToTree(e,r){return this.bindingsToTree(this.parser.parseJsonResults(e),r||{singularizeVariables:{}})}bindingsToTree(e,r){const n=r&&r.singularizeVariables[""];let a=n?{}:[];for(const s of e){const o=n?{}:[{}];for(const u in s){const c=u.split(this.delimiter),l=s[u];Ps.addValueToTree(n?o:o[0],c,l,"",r,this.delimiter)}a=Ps.mergeTrees(a,o).result}return this.materializeRdfJsTerms&&(a=Ps.materializeTree(a)),a}}p_.Converter=Ps;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(p_,t)})(vF);Object.defineProperty(Cp,"__esModule",{value:!0});Cp.ActorQueryResultSerializeTree=void 0;const ure=bs,cre=Ht,lre=et,dre=Kt,fre=vF;class Ex extends ure.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingsStreamToGraphQl(e,r,n){const a=lre.ActionContext.ensureActionContext(r);return new Promise((s,o)=>{const u=[],c=new fre.Converter(n),l={singularizeVariables:a.get(cre.KeysInitQuery.graphqlSingularizeVariables)||{}};e.on("error",o),e.on("data",d=>{u.push(Object.fromEntries([...d].map(([h,f])=>[h.value,f])))}),e.on("end",()=>{s(c.bindingsToTree(u,l))})})}async testHandleChecked(e){if(e.type!=="bindings")throw new Error("This actor can only handle bindings streams.");return!0}async runHandle(e,r){const n=new dre.Readable;n._read=()=>{};const a=e.bindingsStream;return a.on("error",s=>n.emit("error",s)),Ex.bindingsStreamToGraphQl(a,e.context,{materializeRdfJsTerms:!0}).then(s=>{n.push(JSON.stringify(s,null,"  ")),n.push(null)}).catch(s=>n.emit("error",s)),{data:n}}}Cp.ActorQueryResultSerializeTree=Ex;(function(t){var e=g&&g.__createBinding||(Object.create?function(s,o,u,c){c===void 0&&(c=u);var l=Object.getOwnPropertyDescriptor(o,u);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(s,c,l)}:function(s,o,u,c){c===void 0&&(c=u),s[c]=o[u]}),r=g&&g.__exportStar||function(s,o){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&e(o,s,u)};Object.defineProperty(t,"__esModule",{value:!0}),t.bindingsStreamToGraphQl=void 0;const n=Cp,{bindingsStreamToGraphQl:a}=n.ActorQueryResultSerializeTree;t.bindingsStreamToGraphQl=a,r(Cp,t)})(_F);var NF={},T_={},jF={},E_={};Object.defineProperty(E_,"__esModule",{value:!0});E_.ActorContextPreprocess=void 0;const hre=et;class pre extends hre.Actor{constructor(e){super(e)}}E_.ActorContextPreprocess=pre;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(E_,t)})(jF);Object.defineProperty(T_,"__esModule",{value:!0});T_.ActorContextPreprocessSourceToDestination=void 0;const yre=jF,o1=Ht;class bre extends yre.ActorContextPreprocess{constructor(e){super(e)}async test(e){return!0}async run(e){if(e.context.get(o1.KeysRdfResolveQuadPattern.sources)&&!e.context.get(o1.KeysRdfUpdateQuads.destination)){const r=e.context.get(o1.KeysRdfResolveQuadPattern.sources);if(r.length===1)return{context:e.context.set(o1.KeysRdfUpdateQuads.destination,r[0])}}return e}}T_.ActorContextPreprocessSourceToDestination=bre;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(T_,t)})(NF);var CF={},O_={};Object.defineProperty(O_,"__esModule",{value:!0});O_.MediatorAll=void 0;const mre=et;class gre extends mre.Mediator{constructor(e){super(e)}async mediate(e){const r=[];let n;try{n=this.publish(e)}catch{n=[]}for(const s of n)try{await s.reply,r.push(s.actor)}catch{}return(await Promise.all(r.map(s=>s.runObservable(e))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}}O_.MediatorAll=gre;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(O_,t)})(CF);var C0={},F0={};Object.defineProperty(F0,"__esModule",{value:!0});F0.ActorHttpInvalidate=void 0;const _re=et;class vre extends _re.Actor{constructor(e){super(e)}}F0.ActorHttpInvalidate=vre;var A_={};Object.defineProperty(A_,"__esModule",{value:!0});A_.ActorHttpInvalidateListenable=void 0;const wre=F0;class Sre extends wre.ActorHttpInvalidate{constructor(e){super(e),this.invalidateListeners=[],this.invalidateListeners=[]}addInvalidateListener(e){this.invalidateListeners.push(e)}async test(e){return!0}async run(e){for(const r of this.invalidateListeners)r(e);return{}}}A_.ActorHttpInvalidateListenable=Sre;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(F0,t),r(A_,t)})(C0);var FF={},x_={},MF={},R_={};Object.defineProperty(R_,"__esModule",{value:!0});R_.ActorHashBindings=void 0;const Tre=et;class Ere extends Tre.Actor{constructor(e){super(e)}}R_.ActorHashBindings=Ere;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(R_,t)})(MF);var Ore=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((a,s,o)=>`${a}${o===0?"":","}${t(s===void 0||typeof s=="symbol"?null:s)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,a)=>{if(e[a]===void 0||typeof e[a]=="symbol")return n;const s=n.length===0?"":",";return`${n}${s}${t(a)}:${t(e[a])}`},"")}}`};Object.defineProperty(x_,"__esModule",{value:!0});x_.ActorHashBindingsSha1=void 0;const Are=MF,xre=zm,JD=sr,Rre=Ore;class Ire extends Are.ActorHashBindings{async test(e){if(!e.allowHashCollisions)throw new Error(`Actor ${this.name} can not provide hash functions without hash collisions`);return!0}async run(e){return{hashFunction:r=>(0,xre.sha1)().update(Rre(Object.fromEntries([...r].map(([n,a])=>[(0,JD.termToString)(n),(0,JD.termToString)(a)])))).digest("hex"),hashCollisions:!0}}}x_.ActorHashBindingsSha1=Ire;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(x_,t)})(FF);var LF={},I_={},P_={},D_={};Object.defineProperty(D_,"__esModule",{value:!0});D_.ActorRdfSerialize=void 0;const Pre=El;class Dre extends Pre.ActorAbstractMediaTyped{constructor(e){super(e)}}D_.ActorRdfSerialize=Dre;var N_={};Object.defineProperty(N_,"__esModule",{value:!0});N_.ActorRdfSerializeFixedMediaTypes=void 0;const Nre=El;class jre extends Nre.ActorAbstractMediaTypedFixed{constructor(e){super(e)}async testHandleChecked(e){return!0}}N_.ActorRdfSerializeFixedMediaTypes=jre;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(D_,t),r(N_,t)})(P_);const ah="http://www.w3.org/1999/02/22-rdf-syntax-ns#",sh="http://www.w3.org/2001/XMLSchema#",uT="http://www.w3.org/2000/10/swap/",Yn={xsd:{decimal:`${sh}decimal`,boolean:`${sh}boolean`,double:`${sh}double`,integer:`${sh}integer`,string:`${sh}string`},rdf:{type:`${ah}type`,nil:`${ah}nil`,first:`${ah}first`,rest:`${ah}rest`,langString:`${ah}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${uT}reify#forSome`,forAll:`${uT}reify#forAll`},log:{implies:`${uT}log#implies`}};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let YD;var Cre=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:g):t=>(YD||(YD=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));const Fre=XV(Cre),{xsd:u1}=Yn,Mre=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,ZD={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Lre=/[\x00-\x20<>\\"\{\}\|\^\`]/,Bre={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},$re=/$0^/;class Ox{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const r in this)!(r in Bre)&&this[r]instanceof RegExp&&(this[r]=$re)}else this._n3Mode=e.n3!==!1;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,a=n.length;for(;;){let u,c;for(;u=this._newline.exec(n);)this._comments&&(c=this._comment.exec(u[0]))&&s("comment",c[1],"",this._line,u[0].length),n=n.substr(u[0].length,n.length),a=n.length,this._line++;if(!u&&(u=this._whitespace.exec(n))&&(n=n.substr(u[0].length,n.length)),this._endOfFile.test(n))return r&&(this._comments&&(c=this._comment.exec(n))&&s("comment",c[1],"",this._line,n.length),n=null,s("eof","","",this._line,0)),this._input=n;const l=this._line,d=n[0];let h="",f="",p="",b=null,y=0,S=!1;switch(d){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){S=!0;break}}else{this._n3Mode&&(y=1,h="^");break}case"<":if(b=this._unescapedIri.exec(n))h="IRI",f=b[1];else if(b=this._iri.exec(n)){if(f=this._unescape(b[1]),f===null||Lre.test(f))return o(this);h="IRI"}else n.length>1&&n[1]==="<"?(h="<<",y=2):this._n3Mode&&n.length>1&&n[1]==="="&&(h="inverse",y=2,f=">");break;case">":n.length>1&&n[1]===">"&&(h=">>",y=2);break;case"_":((b=this._blank.exec(n))||r&&(b=this._blank.exec(`${n} `)))&&(h="blank",p="_",f=b[1]);break;case'"':if(b=this._simpleQuotedString.exec(n))f=b[1];else if({value:f,matchLength:y}=this._parseLiteral(n),f===null)return o(this);(b!==null||y!==0)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(b=this._simpleApostropheString.exec(n))f=b[1];else if({value:f,matchLength:y}=this._parseLiteral(n),f===null)return o(this);(b!==null||y!==0)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(b=this._variable.exec(n))&&(h="var",f=b[0]);break;case"@":this._previousMarker==="literal"&&(b=this._langcode.exec(n))?(h="langcode",f=b[1]):(b=this._keyword.exec(n))&&(h=b[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){h=".",y=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(b=this._number.exec(n)||r&&(b=this._number.exec(`${n} `)))&&(h="literal",f=b[0],p=typeof b[1]=="string"?u1.double:typeof b[2]=="string"?u1.decimal:u1.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(b=this._sparqlKeyword.exec(n))?h=b[0].toUpperCase():S=!0;break;case"f":case"t":(b=this._boolean.exec(n))?(h="literal",f=b[0],p=u1.boolean):S=!0;break;case"a":(b=this._shortPredicates.exec(n))?(h="abbreviation",f="a"):S=!0;break;case"=":this._n3Mode&&n.length>1&&(h="abbreviation",n[1]!==">"?(y=1,f="="):(y=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(y=1,h=d);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(h="{|",y=2):(h=d,y=1));break;case"|":n.length>=2&&n[1]==="}"&&(h="|}",y=2);break;default:S=!0}if(S&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(b=this._prefix.exec(n))?(h="prefix",f=b[1]||""):((b=this._prefixed.exec(n))||r&&(b=this._prefixed.exec(`${n} `)))&&(h="prefixed",p=b[1]||"",f=this._unescape(b[2]))),this._previousMarker==="^^")switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?o(this):this._input=n;const w=y||b[0].length,I=s(h,f,p,l,w);this.previousToken=I,this._previousMarker=h,n=n.substr(w,n.length)}function s(u,c,l,d,h){const f=n?a-n.length:a,p=f+h,b={type:u,value:c,prefix:l,line:d,start:f,end:p};return e(null,b),b}function o(u){e(u._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1;const n=e.replace(Mre,(a,s,o,u)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof o=="string"){let c=Number.parseInt(o,16);return c<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return u in ZD?ZD[u]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){const r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let a=Math.max(this._literalClosingPos,n);for(;(a=e.indexOf(r,a))>0;){let s=0;for(;e[a-s-1]==="\\";)s++;if(s%2===0){const o=e.substring(n,a),u=o.split(/\r\n|\r|\n/).length-1,c=a+n;if(n===1&&u!==0||n===3&&this._lineMode)break;return this._line+=u,{value:this._unescape(o),matchLength:c}}a++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")Fre(()=>this._tokenizeToEnd(r,!0));else{const n=[];let a;if(this._tokenizeToEnd((s,o)=>s?a=s:n.push(o),!0),a)throw a;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}}function Ure(t){return!!t&&t.termType==="NamedNode"}function qre(t){return!!t&&t.termType==="BlankNode"}function Vre(t){return!!t&&t.termType==="Literal"}function Hre(t){return!!t&&t.termType==="Variable"}function uf(t){return!!t&&t.termType==="DefaultGraph"}function kre(t){return uf(t.graph)}function Qre(t,e){return BF({"":t.value||t},e)("")}function BF(t,e){const r=Object.create(null);for(const a in t)n(a,t[a]);e=e||Uf;function n(a,s){if(typeof s=="string"){const o=Object.create(null);r[a]=u=>o[u]||(o[u]=e.namedNode(s+u))}else if(!(a in r))throw new Error(`Unknown prefix: ${a}`);return r[a]}return n}const $F=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:kre,isBlankNode:qre,isDefaultGraph:uf,isLiteral:Vre,isNamedNode:Ure,isVariable:Hre,prefix:Qre,prefixes:BF},Symbol.toStringTag,{value:"Module"})),{rdf:Gre,xsd:Qc}=Yn;let M0,zre=0;const bO={namedNode:Wre,blankNode:Xre,variable:Jre,literal:Kre,defaultGraph:Yre,quad:eN,triple:eN},Uf=bO;let oo=class UF{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof UF?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}};class j_ extends oo{get termType(){return"NamedNode"}}class Qu extends oo{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let r=e.lastIndexOf('"')+1;return r<e.length&&e[r++]==="@"?e.substr(r).toLowerCase():""}get datatype(){return new j_(this.datatypeString)}get datatypeString(){const e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?Qc.string:Gre.langString}equals(e){return e instanceof Qu?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Ax extends oo{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}let xx=class extends oo{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}};class Rx extends oo{constructor(){return super(""),M0||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}M0=new Rx;function Jc(t,e,r){if(e=e||bO,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===bO)return new Qu(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),t[n+1]==="@"?t.substr(n+2):e.namedNode(t.substr(n+3)));case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(Jc(t[0],e,!0),Jc(t[1],e,!0),Jc(t[2],e,!0),t[3]&&Jc(t[3],e,!0))}function Oi(t,e){if(typeof t=="string")return t;if(t instanceof oo&&t.termType!=="Quad")return t.id;if(!t)return M0.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==Qc.string?`^^${t.datatype.value}`:""}`;case"Quad":const r=[Oi(t.subject,!0),Oi(t.predicate,!0),Oi(t.object,!0)];return uf(t.graph)||r.push(Oi(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}class Fp extends oo{constructor(e,r,n,a){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=a||M0}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function Wre(t){return new j_(t)}function Xre(t){return new Ax(t||`n3-${zre++}`)}function Kre(t,e){if(typeof e=="string")return new Qu(`"${t}"@${e.toLowerCase()}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=Qc.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?Qc.integer:Qc.double:(r=Qc.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===Qc.string?new Qu(`"${t}"`):new Qu(`"${t}"^^${r}`)}function Jre(t){return new xx(t)}function Yre(){return M0}function eN(t,e,r,n){return new Fp(t,e,r,n)}let tN=0;class C_{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&qF(this,e.factory);const r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),a=/trig/.test(r),s=/triple/.test(r),o=/quad/.test(r),u=this._n3Mode=/n3/.test(r),c=s||o;(this._supportsNamedGraphs=!(n||u))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||a||s||u),this._supportsRDFStar=r===""||/star|\*$/.test(r),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new Ox({lineMode:c,n3:u}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){tN=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,a,s){const o=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:a,object:s,graph:r,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":const a=this._resolveIRI(e.value);if(a===null)return this._error("Invalid IRI",e);n=this._namedNode(a);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(s===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._namedNode(s+e.value);break;case"blank":n=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,a=this._readListItem;const s=this._subject,o=this._contextStack,u=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=r=this._blankNode()),a=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(a=this._readPredicate,this._subject===this.RDF_NIL)return a}else if(a=this._getContextEndReader(),this._object===this.RDF_NIL)return a;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,a=this._readListItemDataTypeOrLang):(r=this._literal(e.value,this._namedNode(e.prefix)),a=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._blankNode()),s===null?u.predicate===null?u.subject=n:u.object=n:this._emit(s,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return a}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let r=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(n===void 0)return;r=this._literal(this._literalValue,n),e=null;break;case"langcode":r=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:r}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){const n=this._completeLiteral(e);if(n)return this._object=n.literal,r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph;const a=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);const o=this._predicate,u=this._object;this._subject=this._quad(a,o,u,this.DEFAULTGRAPH),r=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(a!==null){const o=this._predicate,u=this._object;s?this._emit(u,o,a,n):this._emit(a,o,u,n)}return r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){const r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const a=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,a,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n;const a=this._blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=a):(r=this._object,this._object=a),this._emit(r,n,a,this._graph),this._readPath}_readBackwardPath(e){const r=this._blankNode();let n,a;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(a=this._subject,this._subject=r):(a=this._object,this._object=r),this._emit(r,n,a,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const r=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,r,n,a){this._callback(null,this._quad(e,r,n,a||this.DEFAULTGRAPH))}_error(e,r){const n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=cT}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const r=e.length;let n="",a=-1,s=-1,o=0,u="/";for(;a<r;){switch(u){case":":if(s<0&&e[++a]==="/"&&e[++a]==="/")for(;(s=a+1)<r&&e[s]!=="/";)a=s;break;case"?":case"#":a=r;break;case"/":if(e[a+1]===".")switch(u=e[++a+1],u){case"/":n+=e.substring(o,a-1),o=a+1;break;case void 0:case"?":case"#":return n+e.substring(o,a)+e.substr(a+1);case".":if(u=e[++a+1],u===void 0||u==="/"||u==="?"||u==="#"){if(n+=e.substring(o,a-2),(o=n.lastIndexOf("/"))>=s&&(n=n.substr(0,o)),u!=="/")return`${n}/${e.substr(a+1)}`;o=a+1}}}u=e[++a]}return n+e.substring(o)}parse(e,r,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${tN++}_`,this._prefixCallback=n||cT,this._inversePredicate=!1,this._quantified=Object.create(null),!r){const a=[];let s;if(this._callback=(o,u)=>{o?s=o:u&&a.push(u)},this._lexer.tokenize(e).every(o=>this._readCallback=this._readCallback(o)),s)throw s;return a}this._callback=r,this._lexer.tokenize(e,(a,s)=>{a!==null?(this._callback(a),this._callback=cT):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function cT(){}function qF(t,e){const r=e.namedNode;t._namedNode=r,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=r(Yn.rdf.first),t.RDF_REST=r(Yn.rdf.rest),t.RDF_NIL=r(Yn.rdf.nil),t.N3_FORALL=r(Yn.r.forAll),t.N3_FORSOME=r(Yn.r.forSome),t.ABBREVIATIONS={a:r(Yn.rdf.type),"=":r(Yn.owl.sameAs),">":r(Yn.log.implies)},t.QUANTIFIERS_GRAPH=r("urn:n3:quantifiers")}qF(C_.prototype,Uf);const oh=Uf.defaultGraph(),{rdf:Zre,xsd:Yl}=Yn,rN=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,nN=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,ene={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class uh extends oo{equals(e){return e===this}}class Ix{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(a,s,o){n+=a,o&&o()},end:a=>{a&&a(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=oh,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseMatcher=new RegExp(`^${aN(r.baseIRI)}${r.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=r.baseIRI.length))}get _inDefaultGraph(){return oh.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,a,s){try{a.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(oh.equals(a)?"":`${this._encodeIriOrBlank(a)} {
`)),this._graph=a,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,s):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,s):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,s)}catch(o){s&&s(o)}}_writeQuadLine(e,r,n,a,s){delete this._prefixMatch,this._write(this.quadToString(e,r,n,a),s)}quadToString(e,r,n,a){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${a&&a.value?` ${this._encodeIriOrBlank(a)} .
`:` .
`}`}quadsToString(e){return e.map(r=>this.quadToString(r.subject,r.predicate,r.object,r.graph)).join("")}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseMatcher&&this._baseMatcher.test(r)&&(r=r.substr(this._baseLength)),rN.test(r)&&(r=r.replace(nN,iN));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;if(rN.test(r)&&(r=r.replace(nN,iN)),e.language)return`"${r}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Yl.string)return`"${r}"`}else switch(e.datatype.value){case Yl.string:return`"${r}"`;case Yl.boolean:if(r==="true"||r==="false")return r;break;case Yl.integer:if(/^[+-]?\d+$/.test(r))return r;break;case Yl.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case Yl.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===Zre.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:a}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${uf(a)?"":` ${this._encodeIriOrBlank(a)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,a,s){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof a=="function"?this._writeQuad(e,r,n,oh,a):this._writeQuad(e,r,n,a||oh,s)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){const a={};a[e]=r,this.addPrefixes(a,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let a in e){let s=e[a];typeof s!="string"&&(s=s.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[s]=a+=":",this._write(`@prefix ${a} <${s}>.
`)}if(n){let a="",s="";for(const o in this._prefixIRIs)a+=a?`|${o}`:o,s+=(s?"|":"")+this._prefixIRIs[o];a=aN(a),this._prefixRegex=new RegExp(`^(?:${s})[^/]*$|^(${a})([_a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,a,s;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),s=n.length){case 0:return new uh("[]");case 1:if(a=n[0],!(a.object instanceof uh))return new uh(`[ ${this._encodePredicate(a.predicate)} ${this._encodeObject(a.object)} ]`);default:let o="[";for(let u=0;u<s;u++)a=n[u],a.predicate.equals(e)?o+=`, ${this._encodeObject(a.object)}`:(o+=`${(u?`;
  `:`
  `)+this._encodePredicate(a.predicate)} ${this._encodeObject(a.object)}`,e=a.predicate);return new uh(`${o}
]`)}}list(e){const r=e&&e.length||0,n=new Array(r);for(let a=0;a<r;a++)n[a]=this._encodeObject(e[a]);return new uh(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,a)=>{r=null,e(n,a)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}}function iN(t){let e=ene[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}function aN(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}class Px{constructor(e,r){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._entities=Object.create(null),this._blankNodeIndex=0,!r&&e&&!e[0]&&(r=e,e=null),r=r||{},this._factory=r.factory||Uf,e&&this.addQuads(e)}_termFromId(e,r){if(e[0]==="."){const n=this._entities,a=e.split(".");return this._factory.quad(this._termFromId(n[a[1]]),this._termFromId(n[a[2]]),this._termFromId(n[a[3]]),a[4]&&this._termFromId(n[a[4]]))}return Jc(e,r)}_termToNumericId(e){if(e.termType==="Quad"){const r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),a=this._termToNumericId(e.object);let s;return r&&n&&a&&(uf(e.graph)||(s=this._termToNumericId(e.graph)))&&this._ids[s?`.${r}.${n}.${a}.${s}`:`.${r}.${n}.${a}`]}return this._ids[Oi(e)]}_termToNewNumericId(e){const r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${uf(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:Oi(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}get size(){let e=this._size;if(e!==null)return e;e=0;const r=this._graphs;let n,a;for(const s in r)for(const o in n=r[s].subjects)for(const u in a=n[o])e+=Object.keys(a[u]).length;return this._size=e}_addToIndex(e,r,n,a){const s=e[r]||(e[r]={}),o=s[n]||(s[n]={}),u=a in o;return u||(o[a]=null),!u}_removeFromIndex(e,r,n,a){const s=e[r],o=s[n];delete o[a];for(const u in o)return;delete s[n];for(const u in s)return;delete e[r]}*_findInIndex(e,r,n,a,s,o,u,c){let l,d,h;const f=this._entities,p=this._termFromId(c,this._factory),b={subject:null,predicate:null,object:null};r&&((l=e,e={})[r]=l[r]);for(const y in e)if(d=e[y]){b[s]=this._termFromId(f[y],this._factory),n&&((l=d,d={})[n]=l[n]);for(const S in d)if(h=d[S]){b[o]=this._termFromId(f[S],this._factory);const w=a?a in h?[a]:[]:Object.keys(h);for(let I=0;I<w.length;I++)b[u]=this._termFromId(f[w[I]],this._factory),yield this._factory.quad(b.subject,b.predicate,b.object,p)}}}_loop(e,r){for(const n in e)r(n)}_loopByKey0(e,r,n){let a,s;if(a=e[r])for(s in a)n(s)}_loopByKey1(e,r,n){let a,s;for(a in e)s=e[a],s[r]&&n(a)}_loopBy2Keys(e,r,n,a){let s,o,u;if((s=e[r])&&(o=s[n]))for(u in o)a(u)}_countInIndex(e,r,n,a){let s=0,o,u,c;r&&((o=e,e={})[r]=o[r]);for(const l in e)if(u=e[l]){n&&((o=u,u={})[n]=o[n]);for(const d in u)(c=u[d])&&(a?a in c&&s++:s+=Object.keys(c).length)}return s}_getGraphs(e){if(!tne(e))return this._graphs;const r={};return r[e]=this._graphs[e],r}_uniqueEntities(e){const r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,a){r||(a=e.graph,n=e.object,r=e.predicate,e=e.subject),a=Oi(a);let s=this._graphs[a];s||(s=this._graphs[a]={subjects:{},predicates:{},objects:{}},Object.freeze(s)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n);const o=this._addToIndex(s.subjects,e,r,n);return this._addToIndex(s.predicates,r,n,e),this._addToIndex(s.objects,n,e,r),this._size=null,o}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,a){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:a}=e),!this.readQuads(e,r,n,a).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,a){r||(a=e.graph,n=e.object,r=e.predicate,e=e.subject),a=Oi(a);const s=this._graphs;let o,u,c;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(o=s[a])||!(u=o.subjects[e])||!(c=u[r])||!(n in c))return!1;this._removeFromIndex(o.subjects,e,r,n),this._removeFromIndex(o.predicates,r,n,e),this._removeFromIndex(o.objects,n,e,r),this._size!==null&&this._size--;for(e in o.subjects)return!0;return delete s[a],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,a){const s=new Kt.Readable({objectMode:!0});return s._read=()=>{for(const o of this.readQuads(e,r,n,a))s.push(o);s.push(null)},this.remove(s)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,a){return[...this.readQuads(e,r,n,a)]}*readQuads(e,r,n,a){a=a&&Oi(a);const s=this._getGraphs(a);let o,u,c,l;if(!(e&&!(u=this._termToNumericId(e))||r&&!(c=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n))))for(const d in s)(o=s[d])&&(u?l?yield*this._findInIndex(o.objects,l,u,c,"object","subject","predicate",d):yield*this._findInIndex(o.subjects,u,c,null,"subject","predicate","object",d):c?yield*this._findInIndex(o.predicates,c,l,null,"predicate","object","subject",d):l?yield*this._findInIndex(o.objects,l,null,null,"object","subject","predicate",d):yield*this._findInIndex(o.subjects,null,null,null,"subject","predicate","object",d))}match(e,r,n,a){return new Dx(this,e,r,n,a)}countQuads(e,r,n,a){a=a&&Oi(a);const s=this._getGraphs(a);let o=0,u,c,l,d;if(e&&!(c=this._termToNumericId(e))||r&&!(l=this._termToNumericId(r))||n&&!(d=this._termToNumericId(n)))return 0;for(const h in s)(u=s[h])&&(e?n?o+=this._countInIndex(u.objects,d,c,l):o+=this._countInIndex(u.subjects,c,l,d):r?o+=this._countInIndex(u.predicates,l,d,c):o+=this._countInIndex(u.objects,d,c,l));return o}forEach(e,r,n,a,s){this.some(o=>(e(o),!1),r,n,a,s)}every(e,r,n,a,s){let o=!1;const u=!this.some(c=>(o=!0,!e(c)),r,n,a,s);return o&&u}some(e,r,n,a,s){for(const o of this.readQuads(r,n,a,s))if(e(o))return!0;return!1}getSubjects(e,r,n){const a=[];return this.forSubjects(s=>{a.push(s)},e,r,n),a}forSubjects(e,r,n,a){a=a&&Oi(a);const s=this._getGraphs(a);let o,u,c;if(e=this._uniqueEntities(e),!(r&&!(u=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(a in s)(o=s[a])&&(u?c?this._loopBy2Keys(o.predicates,u,c,e):this._loopByKey1(o.subjects,u,e):c?this._loopByKey0(o.objects,c,e):this._loop(o.subjects,e))}getPredicates(e,r,n){const a=[];return this.forPredicates(s=>{a.push(s)},e,r,n),a}forPredicates(e,r,n,a){a=a&&Oi(a);const s=this._getGraphs(a);let o,u,c;if(e=this._uniqueEntities(e),!(r&&!(u=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(a in s)(o=s[a])&&(u?c?this._loopBy2Keys(o.objects,c,u,e):this._loopByKey0(o.subjects,u,e):c?this._loopByKey1(o.predicates,c,e):this._loop(o.predicates,e))}getObjects(e,r,n){const a=[];return this.forObjects(s=>{a.push(s)},e,r,n),a}forObjects(e,r,n,a){a=a&&Oi(a);const s=this._getGraphs(a);let o,u,c;if(e=this._uniqueEntities(e),!(r&&!(u=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(a in s)(o=s[a])&&(u?c?this._loopBy2Keys(o.subjects,u,c,e):this._loopByKey1(o.objects,u,e):c?this._loopByKey0(o.predicates,c,e):this._loop(o.objects,e))}getGraphs(e,r,n){const a=[];return this.forGraphs(s=>{a.push(s)},e,r,n),a}forGraphs(e,r,n,a){for(const s in this._graphs)this.some(o=>(e(o.graph),!0),r,n,a,s)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){const n={},a=r?()=>!0:(u,c)=>{throw new Error(`${u.value} ${c}`)},s=this.getQuads(null,Yn.rdf.rest,Yn.rdf.nil,null),o=e?[...s]:[];return s.forEach(u=>{const c=[];let l=!1,d,h;const f=u.graph;let p=u.subject;for(;p&&!l;){const b=this.getQuads(null,null,p,null),y=this.getQuads(p,null,null,null);let S,w=null,I=null,O=null;for(let T=0;T<y.length&&!l;T++)S=y[T],S.graph.equals(f)?d?l=a(p,"has non-list arcs out"):S.predicate.value===Yn.rdf.first?w?l=a(p,"has multiple rdf:first arcs"):o.push(w=S):S.predicate.value===Yn.rdf.rest?I?l=a(p,"has multiple rdf:rest arcs"):o.push(I=S):b.length?l=a(p,"can't be subject and object"):(d=S,h="subject"):l=a(p,"not confined to single graph");for(let T=0;T<b.length&&!l;++T)S=b[T],d?l=a(p,"can't have coreferences"):S.predicate.value===Yn.rdf.rest?O?l=a(p,"has incoming rdf:rest arcs"):O=S:(d=S,h="object");w?c.unshift(w.object):l=a(p,"has no list head"),p=O&&O.subject}l?e=!1:d&&(n[d[h].value]=c)}),e&&this.removeQuads(o),n}*[Symbol.iterator](){yield*this.readQuads()}}function tne(t){return typeof t=="string"||t instanceof String}class Dx extends Kt.Readable{constructor(e,r,n,a,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:a,graph:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:r,object:n,predicate:a,subject:s}=this,o=this._filtered=new Px({factory:e._factory});for(const u of e.readQuads(s,a,n,r))o.addQuad(u)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,a){return new Dx(this.filtered,e,r,n,a)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class VF extends Kt.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const r=new C_(e);let n,a;r.parse({on:(s,o)=>{switch(s){case"data":n=o;break;case"end":a=o;break}}},(s,o)=>{s&&this.emit("error",s)||o&&this.push(o)},(s,o)=>{this.emit("prefix",s,o)}),this._transform=(s,o,u)=>{n(s),u()},this._flush=s=>{a(),s()}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),this}}class HF extends Kt.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const r=this._writer=new Ix({write:(n,a,s)=>{this.push(n),s&&s()},end:n=>{this.push(null),n&&n()}},e);this._transform=(n,a,s)=>{r.addQuad(n,s)},this._flush=n=>{r.end(n)}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),e.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}}const rne={Lexer:Ox,Parser:C_,Writer:Ix,Store:Px,StreamParser:VF,StreamWriter:HF,Util:$F,DataFactory:Uf,Term:oo,NamedNode:j_,Literal:Qu,BlankNode:Ax,Variable:xx,DefaultGraph:Rx,Quad:Fp,Triple:Fp,termFromId:Jc,termToId:Oi},nne=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:Ax,DataFactory:Uf,DefaultGraph:Rx,Lexer:Ox,Literal:Qu,NamedNode:j_,Parser:C_,Quad:Fp,Store:Px,StreamParser:VF,StreamWriter:HF,Term:oo,Triple:Fp,Util:$F,Variable:xx,Writer:Ix,default:rne,termFromId:Jc,termToId:Oi},Symbol.toStringTag,{value:"Module"})),au=iA(nne);Object.defineProperty(I_,"__esModule",{value:!0});I_.ActorRdfSerializeN3=void 0;const ine=P_,ane=au;class sne extends ine.ActorRdfSerializeFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){const a=new ane.StreamWriter({format:r});let s;return"pipe"in e.quadStream?(e.quadStream.on("error",o=>a.emit("error",o)),s=e.quadStream.pipe(a)):s=a.import(e.quadStream),{data:s,triples:r==="text/turtle"||r==="application/n-triples"||r==="text/n3"}}}I_.ActorRdfSerializeN3=sne;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(I_,t)})(LF);var kF={},F_={},QF={},M_={},L_={};Object.defineProperty(L_,"__esModule",{value:!0});L_.SeparatorType=void 0;class tn{constructor(e){this.label=e}}L_.SeparatorType=tn;tn.COMMA=new tn(",");tn.OBJECT_START=new tn("{");tn.OBJECT_END=new tn("}");tn.OBJECT_END_COMMA=new tn("},");tn.ARRAY_START=new tn("[");tn.ARRAY_END=new tn("]");tn.ARRAY_END_COMMA=new tn("],");tn.GRAPH_FIELD_NONCOMPACT=new tn('"@graph": [');tn.GRAPH_FIELD_COMPACT=new tn('"@graph":[');tn.CONTEXT_FIELD=new tn('"@context":');var L0={};Object.defineProperty(L0,"__esModule",{value:!0});L0.Util=void 0;const sN=vn;let ro=class gu{static termToValue(e,r,n={compactIds:!1,useNativeTypes:!1}){switch(e.termType){case"NamedNode":const a=r.compactIri(e.value,n.vocab);return n.compactIds?a:{"@id":a};case"DefaultGraph":return n.compactIds?e.value:{"@id":e.value};case"BlankNode":const s=`_:${e.value}`;return n.compactIds?s:{"@id":s};case"Literal":if(e.datatype.value===gu.RDF_JSON){let c;try{c=JSON.parse(e.value)}catch(l){throw new sN.ErrorCoded("Invalid JSON literal: "+l.message,sN.ERROR_CODES.INVALID_JSON_LITERAL)}return{"@value":c,"@type":"@json"}}if(n.rdfDirection==="i18n-datatype"&&e.datatype.value.startsWith(gu.I18N)){const[c,l]=e.datatype.value.substr(gu.I18N.length,e.datatype.value.length).split("_");return Object.assign(Object.assign({"@value":e.value},c?{"@language":c}:{}),l?{"@direction":l}:{})}const o=e.datatype.value===gu.XSD_STRING,u={"@value":!o&&n.useNativeTypes?gu.stringToNativeType(e.value,e.datatype.value):e.value};return e.language?Object.assign(Object.assign({},u),{"@language":e.language}):!o&&typeof u["@value"]=="string"?Object.assign(Object.assign({},u),{"@type":e.datatype.value}):u}}static stringToNativeType(e,r){if(r.startsWith(gu.XSD))switch(r.substr(gu.XSD.length)){case"boolean":if(e==="true")return!0;if(e==="false")return!1;throw new Error(`Invalid xsd:boolean value '${e}'`);case"integer":case"number":case"int":case"byte":case"long":const a=parseInt(e,10);if(isNaN(a))throw new Error(`Invalid xsd:integer value '${e}'`);return a;case"float":case"double":const s=parseFloat(e);if(isNaN(s))throw new Error(`Invalid xsd:float value '${e}'`);return s}return e}};L0.Util=ro;ro.XSD="http://www.w3.org/2001/XMLSchema#";ro.XSD_STRING=ro.XSD+"string";ro.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";ro.RDF_TYPE=ro.RDF+"type";ro.RDF_JSON=ro.RDF+"JSON";ro.I18N="https://www.w3.org/ns/i18n#";Object.defineProperty(M_,"__esModule",{value:!0});M_.JsonLdSerializer=void 0;const oN=vn,zr=L_,lT=L0,uN=Kt;class Nx extends uN.Transform{constructor(e={}){super({objectMode:!0}),this.indentation=0,this.options=e,this.options.baseIRI&&!this.options.context&&(this.options.context={"@base":this.options.baseIRI}),this.options.context?(this.originalContext=this.options.context,this.context=new oN.ContextParser().parse(this.options.context,{baseIRI:this.options.baseIRI})):this.context=Promise.resolve(new oN.JsonLdContextNormalized({}))}import(e){const r=new uN.PassThrough({objectMode:!0});e.on("error",a=>n.emit("error",a)),e.on("data",a=>r.push(a)),e.on("end",()=>r.push(null));const n=r.pipe(new Nx(this.options));return n}_transform(e,r,n){this.context.then(a=>{this.transformQuad(e,a),n()}).catch(n)}async list(e){const r=await this.context;return{"@list":e.map(n=>lT.Util.termToValue(n,r,this.options))}}_flush(e){return this.opened||this.pushDocumentStart(),this.lastPredicate&&this.endPredicate(),this.lastSubject&&this.endSubject(),this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.endGraph(),this.endDocument(),e(null,null)}transformQuad(e,r){this.opened||this.pushDocumentStart();const n=this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.lastGraph.equals(e.subject);if(!n&&(!this.lastGraph||!e.graph.equals(this.lastGraph))){let a=e.graph.termType!=="DefaultGraph"&&this.lastSubject&&this.lastSubject.equals(e.graph);this.lastGraph&&(this.lastGraph.termType!=="DefaultGraph"?(this.endPredicate(),this.endSubject(),this.endGraph(!0),a=!1):a?(this.endPredicate(!0),this.lastSubject=null):(this.endPredicate(),this.endSubject(!0))),e.graph.termType!=="DefaultGraph"&&(a||this.pushId(e.graph,!0,r),this.pushSeparator(this.options.space?zr.SeparatorType.GRAPH_FIELD_NONCOMPACT:zr.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++),this.lastGraph=e.graph}(!this.lastSubject||!e.subject.equals(this.lastSubject))&&(n?(this.endPredicate(),this.endSubject(),this.indentation--,this.pushSeparator(zr.SeparatorType.ARRAY_END_COMMA),this.lastGraph=e.graph):(this.lastSubject&&(this.endPredicate(),this.endSubject(!0)),this.pushId(e.subject,!0,r)),this.lastSubject=e.subject),(!this.lastPredicate||!e.predicate.equals(this.lastPredicate))&&(this.lastPredicate&&this.endPredicate(!0),this.pushPredicate(e.predicate,r)),this.pushObject(e.object,r)}pushDocumentStart(){this.opened=!0,this.originalContext&&!this.options.excludeContext?(this.pushSeparator(zr.SeparatorType.OBJECT_START),this.indentation++,this.pushSeparator(zr.SeparatorType.CONTEXT_FIELD),this.pushIndented(JSON.stringify(this.originalContext,null,this.options.space)+","),this.pushSeparator(this.options.space?zr.SeparatorType.GRAPH_FIELD_NONCOMPACT:zr.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++):(this.pushSeparator(zr.SeparatorType.ARRAY_START),this.indentation++)}pushId(e,r,n){if(e.termType==="Quad")this.pushNestedQuad(e,!0,n);else{const a=e.termType==="BlankNode"?"_:"+e.value:n.compactIri(e.value,!1);r?this.pushSeparator(zr.SeparatorType.OBJECT_START):(this.push(zr.SeparatorType.OBJECT_START.label),this.options.space&&this.push(`
`)),this.indentation++,this.pushIndented(this.options.space?`"@id": "${a}",`:`"@id":"${a}",`)}}pushPredicate(e,r){let n=e.value;!this.options.useRdfType&&n===lT.Util.RDF_TYPE&&(n="@type",this.objectOptions=Object.assign(Object.assign({},this.options),{compactIds:!0,vocab:!0}));const a=r.compactIri(n,!0);this.pushIndented(this.options.space?`"${a}": [`:`"${a}":[`),this.indentation++,this.lastPredicate=e}pushObject(e,r){if(this.hadObjectForPredicate?this.pushSeparator(zr.SeparatorType.COMMA):this.hadObjectForPredicate=!0,e.termType==="Quad"){const a=this.lastSubject,s=this.lastPredicate;this.hadObjectForPredicate=!1,this.pushNestedQuad(e,!1,r),this.endSubject(!1),this.hadObjectForPredicate=!0,this.lastPredicate=s,this.lastSubject=a;return}let n;try{e["@list"]?n=e:n=lT.Util.termToValue(e,r,this.objectOptions||this.options)}catch(a){return this.emit("error",a)}this.pushIndented(JSON.stringify(n,null,this.options.space))}pushNestedQuad(e,r,n){this.pushSeparator(zr.SeparatorType.OBJECT_START),this.indentation++,this.pushIndented(this.options.space?'"@id": ':'"@id":',!1),e.graph.termType!=="DefaultGraph"&&this.emit("error",new Error(`Found a nested quad with the non-default graph: ${e.graph.value}`)),this.pushId(e.subject,!1,n),this.pushPredicate(e.predicate,n),this.pushObject(e.object,n),this.endPredicate(!1),this.endSubject(r)}endDocument(){this.opened=!1,this.originalContext&&!this.options.excludeContext?(this.indentation--,this.pushSeparator(zr.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(zr.SeparatorType.OBJECT_END)):(this.indentation--,this.pushSeparator(zr.SeparatorType.ARRAY_END))}endPredicate(e){this.indentation--,this.pushSeparator(e?zr.SeparatorType.ARRAY_END_COMMA:zr.SeparatorType.ARRAY_END),this.hadObjectForPredicate=!1,this.objectOptions=null,this.lastPredicate=null}endSubject(e){this.indentation--,this.pushSeparator(e?zr.SeparatorType.OBJECT_END_COMMA:zr.SeparatorType.OBJECT_END),this.lastSubject=null}endGraph(e){this.indentation--,this.pushSeparator(zr.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(e?zr.SeparatorType.OBJECT_END_COMMA:zr.SeparatorType.OBJECT_END),this.lastGraph=null}pushSeparator(e){this.pushIndented(e.label)}pushIndented(e,r=!0){const n=this.getIndentPrefix(),a=e.split(`
`).map(s=>n+s).join(`
`);this.push(a),this.options.space&&r&&this.push(`
`)}getIndentPrefix(){return this.options.space?this.options.space.repeat(this.indentation):""}}M_.JsonLdSerializer=Nx;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return a[s]}})}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(M_,t),r(L0,t)})(QF);Object.defineProperty(F_,"__esModule",{value:!0});F_.ActorRdfSerializeJsonLd=void 0;const one=P_,une=QF;class cne extends one.ActorRdfSerializeFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){const a=new une.JsonLdSerializer({space:" ".repeat(this.jsonStringifyIndentSpaces)});let s;return"pipe"in e.quadStream?(e.quadStream.on("error",o=>a.emit("error",o)),s=e.quadStream.pipe(a)):s=a.import(e.quadStream),{data:s}}}F_.ActorRdfSerializeJsonLd=cne;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(F_,t)})(kF);var GF={},B_={},jx={};Object.defineProperty(jx,"__esModule",{value:!0});function lne(t,e){return new Promise((r,n)=>{t.on("end",()=>r(e)),t.on("error",n)})}function dne(t){const e=[];return lne(t.on("data",r=>e.push(r)),e)}jx.default=dne;var $_={},Cx={},zF={},U_={};Object.defineProperty(U_,"__esModule",{value:!0});U_.fragment=void 0;function fne(t){let e=t;(e.endsWith("/")||e.endsWith("#"))&&(e=e.slice(0,e.length-1));const r=[];e.lastIndexOf("/")>0&&r.push(e.lastIndexOf("/")),e.lastIndexOf("#")>0&&r.push(e.lastIndexOf("#"));const n=Math.max(...r);return e.slice(n+1)}function hne(t){var e;const r=(e=t.split(/[^a-z0-9]+/ig).filter(n=>n!=="").map(n=>n[0].toUpperCase()+n.slice(1)).join("").match(/[a-z][a-z0-9]+/ig))===null||e===void 0?void 0:e[0];return typeof r>"u"?void 0:r[0].toLowerCase()+r.slice(1)}function pne(t){let e=fne(t);return e=e?hne(e):void 0,e||"v"}U_.fragment=pne;var mO={},q_={},ec={},gO={exports:{}};(function(t,e){var r=typeof self<"u"?self:g,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var u={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function c(M){return M&&DataView.prototype.isPrototypeOf(M)}if(u.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(M){return M&&l.indexOf(Object.prototype.toString.call(M))>-1};function h(M){if(typeof M!="string"&&(M=String(M)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(M))throw new TypeError("Invalid character in header field name");return M.toLowerCase()}function f(M){return typeof M!="string"&&(M=String(M)),M}function p(M){var C={next:function(){var V=M.shift();return{done:V===void 0,value:V}}};return u.iterable&&(C[Symbol.iterator]=function(){return C}),C}function b(M){this.map={},M instanceof b?M.forEach(function(C,V){this.append(V,C)},this):Array.isArray(M)?M.forEach(function(C){this.append(C[0],C[1])},this):M&&Object.getOwnPropertyNames(M).forEach(function(C){this.append(C,M[C])},this)}b.prototype.append=function(M,C){M=h(M),C=f(C);var V=this.map[M];this.map[M]=V?V+", "+C:C},b.prototype.delete=function(M){delete this.map[h(M)]},b.prototype.get=function(M){return M=h(M),this.has(M)?this.map[M]:null},b.prototype.has=function(M){return this.map.hasOwnProperty(h(M))},b.prototype.set=function(M,C){this.map[h(M)]=f(C)},b.prototype.forEach=function(M,C){for(var V in this.map)this.map.hasOwnProperty(V)&&M.call(C,this.map[V],V,this)},b.prototype.keys=function(){var M=[];return this.forEach(function(C,V){M.push(V)}),p(M)},b.prototype.values=function(){var M=[];return this.forEach(function(C){M.push(C)}),p(M)},b.prototype.entries=function(){var M=[];return this.forEach(function(C,V){M.push([V,C])}),p(M)},u.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function y(M){if(M.bodyUsed)return Promise.reject(new TypeError("Already read"));M.bodyUsed=!0}function S(M){return new Promise(function(C,V){M.onload=function(){C(M.result)},M.onerror=function(){V(M.error)}})}function w(M){var C=new FileReader,V=S(C);return C.readAsArrayBuffer(M),V}function I(M){var C=new FileReader,V=S(C);return C.readAsText(M),V}function O(M){for(var C=new Uint8Array(M),V=new Array(C.length),ie=0;ie<C.length;ie++)V[ie]=String.fromCharCode(C[ie]);return V.join("")}function T(M){if(M.slice)return M.slice(0);var C=new Uint8Array(M.byteLength);return C.set(new Uint8Array(M)),C.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(M){this._bodyInit=M,M?typeof M=="string"?this._bodyText=M:u.blob&&Blob.prototype.isPrototypeOf(M)?this._bodyBlob=M:u.formData&&FormData.prototype.isPrototypeOf(M)?this._bodyFormData=M:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(M)?this._bodyText=M.toString():u.arrayBuffer&&u.blob&&c(M)?(this._bodyArrayBuffer=T(M.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(M)||d(M))?this._bodyArrayBuffer=T(M):this._bodyText=M=Object.prototype.toString.call(M):this._bodyText="",this.headers.get("content-type")||(typeof M=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(M)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var M=y(this);if(M)return M;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(w)}),this.text=function(){var M=y(this);if(M)return M;if(this._bodyBlob)return I(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(O(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(N)}),this.json=function(){return this.text().then(JSON.parse)},this}var P=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function B(M){var C=M.toUpperCase();return P.indexOf(C)>-1?C:M}function Q(M,C){C=C||{};var V=C.body;if(M instanceof Q){if(M.bodyUsed)throw new TypeError("Already read");this.url=M.url,this.credentials=M.credentials,C.headers||(this.headers=new b(M.headers)),this.method=M.method,this.mode=M.mode,this.signal=M.signal,!V&&M._bodyInit!=null&&(V=M._bodyInit,M.bodyUsed=!0)}else this.url=String(M);if(this.credentials=C.credentials||this.credentials||"same-origin",(C.headers||!this.headers)&&(this.headers=new b(C.headers)),this.method=B(C.method||this.method||"GET"),this.mode=C.mode||this.mode||null,this.signal=C.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&V)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(V)}Q.prototype.clone=function(){return new Q(this,{body:this._bodyInit})};function N(M){var C=new FormData;return M.trim().split("&").forEach(function(V){if(V){var ie=V.split("="),ne=ie.shift().replace(/\+/g," "),fe=ie.join("=").replace(/\+/g," ");C.append(decodeURIComponent(ne),decodeURIComponent(fe))}}),C}function D(M){var C=new b,V=M.replace(/\r?\n[\t ]+/g," ");return V.split(/\r?\n/).forEach(function(ie){var ne=ie.split(":"),fe=ne.shift().trim();if(fe){var _e=ne.join(":").trim();C.append(fe,_e)}}),C}x.call(Q.prototype);function F(M,C){C||(C={}),this.type="default",this.status=C.status===void 0?200:C.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in C?C.statusText:"OK",this.headers=new b(C.headers),this.url=C.url||"",this._initBody(M)}x.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},F.error=function(){var M=new F(null,{status:0,statusText:""});return M.type="error",M};var W=[301,302,303,307,308];F.redirect=function(M,C){if(W.indexOf(C)===-1)throw new RangeError("Invalid status code");return new F(null,{status:C,headers:{location:M}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(C,V){this.message=C,this.name=V;var ie=Error(C);this.stack=ie.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function z(M,C){return new Promise(function(V,ie){var ne=new Q(M,C);if(ne.signal&&ne.signal.aborted)return ie(new o.DOMException("Aborted","AbortError"));var fe=new XMLHttpRequest;function _e(){fe.abort()}fe.onload=function(){var we={status:fe.status,statusText:fe.statusText,headers:D(fe.getAllResponseHeaders()||"")};we.url="responseURL"in fe?fe.responseURL:we.headers.get("X-Request-URL");var Ce="response"in fe?fe.response:fe.responseText;V(new F(Ce,we))},fe.onerror=function(){ie(new TypeError("Network request failed"))},fe.ontimeout=function(){ie(new TypeError("Network request failed"))},fe.onabort=function(){ie(new o.DOMException("Aborted","AbortError"))},fe.open(ne.method,ne.url,!0),ne.credentials==="include"?fe.withCredentials=!0:ne.credentials==="omit"&&(fe.withCredentials=!1),"responseType"in fe&&u.blob&&(fe.responseType="blob"),ne.headers.forEach(function(we,Ce){fe.setRequestHeader(Ce,we)}),ne.signal&&(ne.signal.addEventListener("abort",_e),fe.onreadystatechange=function(){fe.readyState===4&&ne.signal.removeEventListener("abort",_e)}),fe.send(typeof ne._bodyInit>"u"?null:ne._bodyInit)})}return z.polyfill=!0,s.fetch||(s.fetch=z,s.Headers=b,s.Request=Q,s.Response=F),o.Headers=b,o.Request=Q,o.Response=F,o.fetch=z,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var a=n;e=a.fetch,e.default=a.fetch,e.fetch=a.fetch,e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response,t.exports=e})(gO,gO.exports);var yne=gO.exports,WF=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(h){o(h)}}function c(d){try{l(n.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(ec,"__esModule",{value:!0});ec.fetchContext=ec.fetchJson=void 0;const bne=yne;function XF(t,e){var r;return WF(this,void 0,void 0,function*(){return(yield((r=e==null?void 0:e.fetch)!==null&&r!==void 0?r:bne.fetch)(t)).json()})}ec.fetchJson=XF;function mne(t,e){return WF(this,void 0,void 0,function*(){return(yield XF(t,e))["@context"]})}ec.fetchContext=mne;var gne=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(h){o(h)}}function c(d){try{l(n.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(q_,"__esModule",{value:!0});q_.lookupUri=void 0;const _ne=ec;function vne(t,e){return gne(this,void 0,void 0,function*(){const r=(yield(0,_ne.fetchContext)(`https://prefix.cc/${t}.file.jsonld`,e))[t];if(typeof r!="string")throw new Error(`Expected uri to be a string, received: ${r} of type ${typeof r}`);return r})}q_.lookupUri=vne;var V_={},wne=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(h){o(h)}}function c(d){try{l(n.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(V_,"__esModule",{value:!0});V_.lookupPrefix=void 0;const Sne=ec;function Tne(t,e){return wne(this,void 0,void 0,function*(){const r=new URL("https://prefix.cc/reverse");r.searchParams.append("uri",t),r.searchParams.append("format","jsonld");const n=Object.keys(yield(0,Sne.fetchContext)(r,e));if(n.length===0)throw new Error("No prefixes returned");return n[0]})}V_.lookupPrefix=Tne;var H_={},Ene=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(h){o(h)}}function c(d){try{l(n.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(H_,"__esModule",{value:!0});H_.lookupAllPrefixes=void 0;const One=ec;function Ane(t){return Ene(this,void 0,void 0,function*(){return(0,One.fetchContext)("https://prefix.cc/context",t)})}H_.lookupAllPrefixes=Ane;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(q_,t),r(V_,t),r(H_,t)})(mO);(function(t){var e=g&&g.__awaiter||function(u,c,l,d){function h(f){return f instanceof l?f:new l(function(p){p(f)})}return new(l||(l=Promise))(function(f,p){function b(w){try{S(d.next(w))}catch(I){p(I)}}function y(w){try{S(d.throw(w))}catch(I){p(I)}}function S(w){w.done?f(w.value):h(w.value).then(b,y)}S((d=d.apply(u,c||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.lookupAllPrefixes=t.prefixToUri=t.uriToPrefix=void 0;const r=U_,n=mO;function a(u,c){return e(this,void 0,void 0,function*(){let l;try{l=yield(0,n.lookupPrefix)(u,c)}catch{c!=null&&c.mintOnUnknown&&(l=(0,r.fragment)(u).slice(0,4))}if(typeof l<"u"&&typeof(c==null?void 0:c.existingPrefixes)=="object"&&l in c.existingPrefixes){let d=0;for(;`${l}${d}`in c.existingPrefixes;)d+=1;l=`${l}${d}`}return l})}t.uriToPrefix=a;function s(u,c){return e(this,void 0,void 0,function*(){try{return yield(0,n.lookupUri)(u,c)}catch{return}})}t.prefixToUri=s;var o=mO;Object.defineProperty(t,"lookupAllPrefixes",{enumerable:!0,get:function(){return o.lookupAllPrefixes}})})(zF);var k_={};Object.defineProperty(k_,"__esModule",{value:!0});k_.getShaclName=void 0;function xne(t){if(t.termType!=="NamedNode"||!t.value.startsWith("http://www.w3.org/ns/shacl#"))throw new Error(`Term ${t.value} is not part of the SHACL namespace`);return t.value.slice(27)}k_.getShaclName=xne;var Fx={};Object.defineProperty(Fx,"__esModule",{value:!0});Fx.default={deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,uniqueLang:!0,equals:!0,disjoint:!0,lessThan:!0,lessThanOrEquals:!0,qualifiedValueShape:!0,qualifiedMinCount:!0,qualifiedMaxCount:!0,qualifiedValueShapesDisjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0,node:!0};var Mx={};Object.defineProperty(Mx,"__esModule",{value:!0});Mx.default={owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"};var Lx={};Object.defineProperty(Lx,"__esModule",{value:!0});Lx.default={targetNode:!0,targetObjectsOf:!0,targetSubjectsOf:!0,deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,equals:!0,disjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0};var Fn=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(h){o(h)}}function c(d){try{l(n.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})},Bx=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cx,"__esModule",{value:!0});const Zt=au,Rne=zF,c1=j0,ch=k_,Ine=Bx(Fx),Pne=Bx(Mx),cN=Bx(Lx);function dT(t){var e;return(e=/^[^]*[#/]/.exec(t))===null||e===void 0?void 0:e[0]}const fT={"http://www.w3.org/1999/02/22-rdf-syntax-ns#":"rdf","http://www.w3.org/2000/01/rdf-schema#":"rdfs","http://www.w3.org/ns/shacl#":"sh","http://www.w3.org/2001/XMLSchema#":"xsd"},hT={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"};class Dne{constructor(e,r,n={},a=void 0,s=!0,o=!1,u,c=!1){this.store=e,this.base=a,this.errorOnExtraQuads=s,this.mintUnspecifiedPrefixes=o,this.fetch=u,this.extendedSyntax=c,this.prefixes={},this.prefixRev={};for(const l of Object.keys(n)){const d=n[l],h=typeof d=="string"?d:d.value;!(h in fT)&&!(l in hT)&&(this.prefixRev[h]=l,this.prefixes[l]=h)}this.writer=r}write(){return Fn(this,void 0,void 0,function*(){const e=this.store.getQuads(null,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/2002/07/owl#Ontology",null);if(e.length===1&&e[0].subject.termType==="NamedNode"){const n=e[0].subject;this.store.removeQuads(e),n.equals(new Zt.NamedNode("urn:x-base:default"))||this.writer.add(`BASE ${(0,c1.termToString)(n)}`),yield this.writeImports(n)}else throw new Error("Base expected");if(this.mintUnspecifiedPrefixes){const n=new Set;for(const s of[...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)])if(s.termType==="NamedNode"){const o=dT(s.value);o&&!(o in this.prefixRev)&&!(o in fT)&&n.add(o)}const a=Object.assign(Object.assign({},this.prefixes),hT);yield Promise.all([...n].map(s=>(0,Rne.uriToPrefix)(s,{fetch:this.fetch,mintOnUnknown:!0,existingPrefixes:a}).then(o=>{this.prefixes[o]=s,a[o]=s,this.prefixRev[s]=o})))}const r=new Set([...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)].filter(n=>n.termType==="NamedNode").map(n=>dT(n.value)).filter(n=>typeof n=="string"));for(const n in this.prefixRev)r.has(n)||(delete this.prefixes[this.prefixRev[n]],delete this.prefixRev[n]);if(yield this.writePrefixes(),this.prefixes=Object.assign(Object.assign({},this.prefixes),hT),this.prefixRev=Object.assign(Object.assign({},this.prefixRev),fT),this.writer.newLine(),yield this.writeShapes(),this.extendedSyntax){const n=this.store.getSubjects(null,null,null);n.length>0&&this.writer.newLine(1);for(const a of n)this.writer.add(yield this.termToString(a,!0,!0)),this.writer.add(" "),this.writer.indent(),yield this.writeTurtlePredicates(a),this.writer.deindent();n.length>0&&(this.writer.add(" ."),this.writer.newLine())}if(this.errorOnExtraQuads&&this.store.size>0)throw new Error("Dataset contains quads that cannot be written in SHACLC");this.writer.end()})}writeImports(e){return Fn(this,void 0,void 0,function*(){const r=this.store.getObjectsOnce(e,new Zt.NamedNode("http://www.w3.org/2002/07/owl#imports"),null);if(r.length>0)for(const n of r)this.writer.add(`IMPORTS <${n.value}>`,!0)})}writePrefixes(){return Fn(this,void 0,void 0,function*(){const e=Object.keys(this.prefixes).filter(r=>!(r in Pne.default)).sort();if(e.length>0)for(const r of e)this.writer.add(`PREFIX ${r}: <${this.prefixes[r]}>`,!0)})}termToString(e,r=!1,n=!1){return Fn(this,void 0,void 0,function*(){try{if(r)throw new Error("Shacl name disabled");return(0,ch.getShaclName)(e)}catch{}if(e.termType==="NamedNode"){const a=dT(e.value);return a&&a in this.prefixRev&&a in this.prefixRev?`${this.prefixRev[a]}:${e.value.slice(a.length)}`:(0,c1.termToString)(e)}if(e.termType==="Literal")return e.datatypeString==="http://www.w3.org/2001/XMLSchema#integer"||e.datatypeString==="http://www.w3.org/2001/XMLSchema#boolean"?e.value:(0,c1.termToString)(e);throw e.termType==="BlankNode"&&n&&(0,c1.termToString)(e),new Error(`Invalid term type for extra statement ${e.value} (${e.termType})`)})}writeShapes(){return Fn(this,void 0,void 0,function*(){for(const e of this.store.getSubjectsOnce(new Zt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new Zt.NamedNode("http://www.w3.org/ns/shacl#NodeShape"),null)){this.store.getQuadsOnce(e,new Zt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new Zt.NamedNode("http://www.w3.org/2000/01/rdf-schema#Class"),null).length>0?this.writer.add("shapeClass "):this.writer.add("shape "),this.writer.add(yield this.termToString(e)),this.writer.add(" ");const r=this.store.getObjectsOnce(e,new Zt.NamedNode("http://www.w3.org/ns/shacl#targetClass"),null);if(r.length>0){this.writer.add("-> ");for(const a of r)a.termType==="NamedNode"?this.writer.add(yield this.termToString(a)):(this.writer.add("!"),this.writer.add(yield this.termToString(this.singleObject(a,new Zt.NamedNode("http://www.w3.org/ns/shacl#not"),!0)))),this.writer.add(" ")}const n=this.store.getPredicates(e,null,null).filter(a=>[new Zt.NamedNode("http://www.w3.org/ns/shacl#targetClass"),new Zt.NamedNode("http://www.w3.org/ns/shacl#property"),new Zt.NamedNode("http://www.w3.org/ns/shacl#or"),...Object.keys(cN.default).map(s=>new Zt.NamedNode("http://www.w3.org/ns/shacl#"+s))].every(s=>!a.equals(s)));n.length>0&&(this.writer.add(";"),this.writer.indent(),this.writer.newLine(1)),this.extendedSyntax&&(yield this.writeGivenTurtlePredicates(e,n)),n.length>0&&(this.writer.add(" "),this.writer.deindent()),yield this.writeShapeBody(e,!1)}})}getSingleProperty(e,r){let n=[e];try{let a=(0,ch.getShaclName)(e.predicate),s="pred";if(a==="not"){const o=this.store.getQuadsOnce(e.object,null,null,null);if(n=n.concat(o),o.length!==1)throw new Error("Can only handle having one predicate of 'not'");[e]=o,a=(0,ch.getShaclName)(e.predicate),s="not"}if(!(a in r))throw new Error(`${a} is not allowed`);return{name:a,type:s,object:e.object}}catch{this.store.addQuads(n)}}singleLayerPropertiesList(e,r){const n=[];for(const a of this.store.getQuadsOnce(e,null,null,null)){const s=this.getSingleProperty(a,r);s&&n.push(s)}return n}expectOneProperty(e,r){const n=this.store.getQuadsOnce(e,null,null,null);if(n.length===1){const a=this.getSingleProperty(n[0],r);if(a)return a}this.store.addQuads(n)}orProperties(e,r){const n=[];for(const a of this.store.getQuadsOnce(e,new Zt.NamedNode("http://www.w3.org/ns/shacl#or"),null,null)){const s=[];for(const o of this.getList(a.object)){const u=this.expectOneProperty(o,r);if(!u)throw this.store.addQuad(a),new Error("Each entry of the 'or' statement must declare exactly one property");s.push(u)}n.push(s)}return n}getList(e){let r=e;const n=[];for(;!r.equals(new Zt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));)n.push(this.singleObject(r,new Zt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),!0)),r=this.singleObject(r,new Zt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),!0);return n}writeIriLiteralOrArray(e){return Fn(this,void 0,void 0,function*(){if(e.termType==="BlankNode"){this.writer.add("[");let r=!0;for(const n of this.getList(e))r?r=!1:this.writer.add(" "),this.writer.add(yield this.termToString(n));this.writer.add("]")}else this.writer.add(yield this.termToString(e))})}singleObject(e,r,n){var a;return(a=this.singleQuad(e,r,n))===null||a===void 0?void 0:a.object}singleQuad(e,r,n=!1){const a=this.store.getQuadsOnce(e,r,null,null);if(n&&a.length!==1)throw this.store.addQuads(a),new Error(`The subject and predicate ${e==null?void 0:e.value} ${r==null?void 0:r.value} must have exactly one object. Instead has ${a.length}`);if(a.length>1)throw this.store.addQuads(a),new Error(`The subject and predicate ${e==null?void 0:e.value} ${r==null?void 0:r.value} can have at most one object. Instead has ${a.length}`);return a.length===1?a[0]:void 0}writeAssigment({name:e,type:r,object:n}){return Fn(this,void 0,void 0,function*(){r==="not"&&this.writer.add("!"),this.writer.add(e),this.writer.add("="),yield this.writeIriLiteralOrArray(n)})}writeAtom({name:e,type:r,object:n}){return Fn(this,void 0,void 0,function*(){switch(r==="not"&&this.writer.add("!"),e){case"node":{if(n.termType==="NamedNode")this.writer.add(`@${yield this.termToString(n)}`);else if(n.termType==="BlankNode")yield this.writeShapeBody(n);else throw new Error("Invalid nested shape, must be blank node or IRI");return}case"nodeKind":{this.writer.add((0,ch.getShaclName)(n));return}case"class":{this.writer.add(yield this.termToString(n));return}case"datatype":{this.writer.add(yield this.termToString(n));return}default:this.writer.add(e),this.writer.add("="),yield this.writeIriLiteralOrArray(n)}})}writeAssigments(e,r=" ",n=!0,a){return Fn(this,void 0,void 0,function*(){for(const s of e)n?n=!1:this.writer.add(r),a?yield this.writeAtom(s):yield this.writeAssigment(s)})}writeParams(e,r=!0,n,a=!1,s=!1){return Fn(this,void 0,void 0,function*(){const o=this.orProperties(e,n),u=this.singleLayerPropertiesList(e,n);s&&(o.length>0||u.length>0)&&this.writer.newLine(1);for(const c of o)r?r=!1:this.writer.add(" "),yield this.writeAssigments(c,"|",!0,a);yield this.writeAssigments(u," ",r,a),s&&(o.length>0||u.length>0)&&this.writer.add(" .")})}writeShapeBody(e,r=!0){return Fn(this,void 0,void 0,function*(){this.writer.add("{").indent();const n=this.store.getObjectsOnce(e,new Zt.NamedNode("http://www.w3.org/ns/shacl#property"),null);yield this.writeParams(e,!0,cN.default,!1,!0);for(const a of n)this.writer.newLine(1),yield this.writeProperty(a);this.writer.deindent().newLine(1),r?this.writer.add("} ."):this.writer.add("}").newLine(1)})}writeProperty(e){return Fn(this,void 0,void 0,function*(){yield this.writePath(this.singleObject(e,new Zt.NamedNode("http://www.w3.org/ns/shacl#path"),!0));const r=this.singleObject(e,new Zt.NamedNode("http://www.w3.org/ns/shacl#minCount")),n=this.singleObject(e,new Zt.NamedNode("http://www.w3.org/ns/shacl#maxCount")),a=this.singleObject(e,new Zt.NamedNode("http://www.w3.org/ns/shacl#nodeKind")),s=this.singleObject(e,new Zt.NamedNode("http://www.w3.org/ns/shacl#class")),o=this.singleObject(e,new Zt.NamedNode("http://www.w3.org/ns/shacl#datatype")),u=this.store.getObjectsOnce(e,new Zt.NamedNode("http://www.w3.org/ns/shacl#node"),null);if(a&&(this.writer.add(" "),this.writer.add((0,ch.getShaclName)(a))),s&&(this.writer.add(" "),this.writer.add(yield this.termToString(s))),o&&(this.writer.add(" "),this.writer.add(yield this.termToString(o))),r!==void 0||n!==void 0){if(this.writer.add(" ["),r){if(r.termType!=="Literal"||r.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid min value, must me an integer literal");this.writer.add(r.value)}else this.writer.add("0");if(this.writer.add(".."),n){if(n.termType!=="Literal"||n.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid max value, must me an integer literal");this.store.removeMatches(e,new Zt.NamedNode("http://www.w3.org/ns/shacl#maxCount"),void 0,void 0),this.writer.add(n.value)}else this.writer.add("*");this.writer.add("]")}yield this.writeParams(e,!1,Ine.default,!0);const c=[];for(const l of u)if(l.termType==="NamedNode")this.writer.add(" "),this.writer.add(`@${yield this.termToString(l)}`);else if(l.termType==="BlankNode")c.push(l);else throw new Error("Invalid nested shape, must be blank node or IRI");for(const l of c)this.writer.add(" "),yield this.writeShapeBody(l);this.extendedSyntax&&this.store.getQuads(e,null,null,null).length>0&&(this.writer.add(" %"),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(e),this.writer.deindent(),this.writer.newLine(1),this.writer.add("%")),c.length===0&&this.writer.add(" .")})}writeTurtlePredicates(e){return Fn(this,void 0,void 0,function*(){return this.writeGivenTurtlePredicates(e,this.store.getPredicates(e,null,null))})}writeGivenTurtlePredicates(e,r){return Fn(this,void 0,void 0,function*(){let n=!1;if(r.some(a=>a.equals(Zt.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")))){const a=this.store.getObjectsOnce(e,Zt.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),null);a.length>0&&(n=!0,this.writer.add("a "),yield this.writeTurtleObjects(a))}for(const a of r)a.equals(Zt.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))||(n?(this.writer.add(" ;"),this.writer.newLine(1)):n=!0,this.writer.add(yield this.termToString(a,!0)),this.writer.add(" "),yield this.writeTurtleObjects(this.store.getObjectsOnce(e,a,null)))})}writeTurtleObjects(e){return Fn(this,void 0,void 0,function*(){const r=[],n=[];for(const s of e)s.termType==="BlankNode"&&[...this.store.match(null,null,s),...this.store.match(null,s,null)].length===0?r.push(s):n.push(s);this.writer.add((yield Promise.all(n.map(s=>this.termToString(s,!0,!0)))).join(", "));let a=n.length>0;if(r.length>0)for(const s of r)a?this.writer.add(", "):a=!0,(yield this.writeList(s))||(this.writer.add("["),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(s),this.writer.deindent(),this.writer.newLine(1),this.writer.add("]"))})}writeList(e){return Fn(this,void 0,void 0,function*(){let r=e;const n=[],a=[];for(;!r.equals(Zt.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));){const o=this.store.getQuadsOnce(r,Zt.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),null,null),u=this.store.getQuadsOnce(r,Zt.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),null,null);if(a.push(...o,...u),o.length!==1||u.length!==1||this.store.getQuads(r,null,null,null).length!==0)return this.store.addQuads(a),!1;n.push(o[0].object),r=u[0].object}let s=!1;this.writer.add("(");for(const o of n)s?this.writer.add(" "):s=!0,yield this.writeTurtleObjects([o]);return this.writer.add(")"),!0})}writePath(e,r=!1){return Fn(this,void 0,void 0,function*(){if(e.termType==="NamedNode")this.writer.add(yield this.termToString(e));else if(e.termType==="BlankNode"){const n=this.store.getQuadsOnce(e,null,null,null);if(n.length===1){const{predicate:a,object:s}=n[0];switch(a.value){case"http://www.w3.org/ns/shacl#inversePath":this.writer.add("^"),yield this.writePath(s,!0);return;case"http://www.w3.org/ns/shacl#alternativePath":{const o=this.getList(s);if(o.length===0)throw new Error("Invalid Alternative Path - no options");if(o.length===1)yield this.writePath(o[0]);else{r&&this.writer.add("(");let u=!0;for(const c of o)u?u=!1:this.writer.add("|"),yield this.writePath(c,!0);r&&this.writer.add(")")}return}case"http://www.w3.org/ns/shacl#zeroOrMorePath":yield this.writePath(s,!0),this.writer.add("*");return;case"http://www.w3.org/ns/shacl#oneOrMorePath":yield this.writePath(s,!0),this.writer.add("+");return;case"http://www.w3.org/ns/shacl#zeroOrOnePath":yield this.writePath(s,!0),this.writer.add("?");return;default:throw new Error(`Invalid path type ${e.value}`)}}else{this.store.addQuads(n);const a=this.getList(e);if(a.length===0)throw new Error("Invalid Path");{r&&this.writer.add("(");let s=!0;for(const o of a)s?s=!1:this.writer.add("/"),yield this.writePath(o,!0);r&&this.writer.add(")")}}}else throw new Error("Path should be named node or blank node")})}}Cx.default=Dne;var $x={};Object.defineProperty($x,"__esModule",{value:!0});class Nne{constructor(e){this.indents=0,this.write=e.write,this.end=e.end}indent(){return this.indents+=1,this}deindent(){if(this.indents<1)throw new Error(`Trying to deindent when indent is only ${this.indents}`);return this.indents-=1,this}add(e,r=!1){return this.write(r?`
${"	".repeat(this.indents)}${e}`:e,"utf-8"),this}newLine(e=2){return this.write(`
`.repeat(e)+"	".repeat(this.indents),"utf-8"),this}}$x.default=Nne;var Ux={};Object.defineProperty(Ux,"__esModule",{value:!0});const jne=au;class Cne extends jne.Store{getQuadsOnce(e,r,n,a){const s=this.getQuads(e,r,n,a);return this.removeQuads(s),s}getSubjectsOnce(e,r,n){return this.getQuadsOnce(null,e,r,n).map(a=>a.subject)}getObjectsOnce(e,r,n){return this.getQuadsOnce(e,r,null,n).map(a=>a.object)}}Ux.default=Cne;var lN=g&&g.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(h){o(h)}}function c(d){try{l(n.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})},qx=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($_,"__esModule",{value:!0});$_.write=void 0;const Fne=au,Mne=qx(Cx),Lne=qx($x),Bne=qx(Ux);function $ne(t,e){return lN(this,void 0,void 0,function*(){return new Promise((r,n)=>lN(this,void 0,void 0,function*(){try{let a="";const s=new Bne.default(t),o=s.getGraphs(null,null,null);if(o.length>1)throw new Error("More than one graph found - can serialize in the default graph");if(o.length===1&&!o[0].equals(Fne.DataFactory.defaultGraph()))throw new Error(`Expected all triples to be in the default graph, instead triples were in ${o[0].value}`);const u=new Lne.default({write:l=>{a+=l},end:()=>{let l=s.getQuads(null,null,null,null);l.length===0&&(l=void 0),r({text:a,extraQuads:l})}});yield new Mne.default(s,u,e==null?void 0:e.prefixes,void 0,(e==null?void 0:e.errorOnUnused)!==!1,e==null?void 0:e.mintPrefixes,e==null?void 0:e.fetch,e==null?void 0:e.extendedSyntax).write()}catch(a){n(a)}}))})}$_.write=$ne;Object.defineProperty(B_,"__esModule",{value:!0});B_.ActorRdfSerializeShaclc=void 0;const Une=P_,qne=jx,Vne=Kt,Hne=$_;class kne extends Une.ActorRdfSerializeFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){const a=new Vne.Readable;a._read=()=>{};try{const s={};e.quadStream.on("prefix",(u,c)=>{s[u]=c});const{text:o}=await(0,Hne.write)(await(0,qne.default)(e.quadStream),{errorOnUnused:!0,extendedSyntax:r==="text/shaclc-ext",prefixes:s});a.push(o),a.push(null)}catch(s){a._read=()=>{a.emit("error",s)}}return{data:a,triples:!0}}}B_.ActorRdfSerializeShaclc=kne;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(B_,t)})(GF);var KF={},Q_={},ms={},G_={},B0={};Object.defineProperty(B0,"__esModule",{value:!0});B0.ReadableWebToNodeStream=void 0;const Qne=Kt;class Gne extends Qne.Readable{constructor(e){super(),this.bytesRead=0,this.released=!1,this.reader=e.getReader()}async _read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read();const e=await this.pendingRead;delete this.pendingRead,e.done||this.released?this.push(null):(this.bytesRead+=e.value.length,this.push(e.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}B0.ReadableWebToNodeStream=Gne;function l1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pT={exports:{}},dN;function zne(){return dN||(dN=1,function(t,e){(function(r){t.exports=r()})(function(){return function r(n,a,s){function o(l,d){if(!a[l]){if(!n[l]){var h=typeof l1=="function"&&l1;if(!d&&h)return h(l,!0);if(u)return u(l,!0);var f=new Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f}var p=a[l]={exports:{}};n[l][0].call(p.exports,function(b){var y=n[l][1][b];return o(y||b)},p,p.exports,r,n,a,s)}return a[l].exports}for(var u=typeof l1=="function"&&l1,c=0;c<s.length;c++)o(s[c]);return o}({1:[function(r,n,a){Object.defineProperty(a,"__esModule",{value:!0});var s=r("./spec/reference-implementation/lib/readable-stream"),o=s.ReadableStream,u=r("./spec/reference-implementation/lib/writable-stream"),c=u.WritableStream,l=r("./spec/reference-implementation/lib/byte-length-queuing-strategy"),d=r("./spec/reference-implementation/lib/count-queuing-strategy"),h=r("./spec/reference-implementation/lib/transform-stream"),f=h.TransformStream;a.ByteLengthQueuingStrategy=l,a.CountQueuingStrategy=d,a.ReadableStream=o,a.WritableStream=c,a.TransformStream=f;var p={ReadableStream:o,WritableStream:c,ByteLengthQueuingStrategy:l,CountQueuingStrategy:d,TransformStream:f};a.default=p},{"./spec/reference-implementation/lib/byte-length-queuing-strategy":8,"./spec/reference-implementation/lib/count-queuing-strategy":9,"./spec/reference-implementation/lib/readable-stream":12,"./spec/reference-implementation/lib/transform-stream":13,"./spec/reference-implementation/lib/writable-stream":15}],2:[function(r,n,a){(function(s){function o(M,C){if(M===C)return 0;for(var V=M.length,ie=C.length,ne=0,fe=Math.min(V,ie);ne<fe;++ne)if(M[ne]!==C[ne]){V=M[ne],ie=C[ne];break}return V<ie?-1:ie<V?1:0}function u(M){return s.Buffer&&typeof s.Buffer.isBuffer=="function"?s.Buffer.isBuffer(M):!(M==null||!M._isBuffer)}function c(M){return Object.prototype.toString.call(M)}function l(M){return!u(M)&&typeof s.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(M):!!M&&(M instanceof DataView||!!(M.buffer&&M.buffer instanceof ArrayBuffer)))}function d(M){if(B.isFunction(M)){if(D)return M.name;var C=M.toString().match(W);return C&&C[1]}}function h(M,C){return typeof M=="string"?M.length<C?M:M.slice(0,C):M}function f(M){if(D||!B.isFunction(M))return B.inspect(M);var C=d(M);return"[Function"+(C?": "+C:"")+"]"}function p(M){return h(f(M.actual),128)+" "+M.operator+" "+h(f(M.expected),128)}function b(M,C,V,ie,ne){throw new F.AssertionError({message:V,actual:M,expected:C,operator:ie,stackStartFunction:ne})}function y(M,C){M||b(M,!0,C,"==",F.ok)}function S(M,C,V,ie){if(M===C)return!0;if(u(M)&&u(C))return o(M,C)===0;if(B.isDate(M)&&B.isDate(C))return M.getTime()===C.getTime();if(B.isRegExp(M)&&B.isRegExp(C))return M.source===C.source&&M.global===C.global&&M.multiline===C.multiline&&M.lastIndex===C.lastIndex&&M.ignoreCase===C.ignoreCase;if(M!==null&&typeof M=="object"||C!==null&&typeof C=="object"){if(l(M)&&l(C)&&c(M)===c(C)&&!(M instanceof Float32Array||M instanceof Float64Array))return o(new Uint8Array(M.buffer),new Uint8Array(C.buffer))===0;if(u(M)!==u(C))return!1;var ne=(ie=ie||{actual:[],expected:[]}).actual.indexOf(M);return ne!==-1&&ne===ie.expected.indexOf(C)||(ie.actual.push(M),ie.expected.push(C),I(M,C,V,ie))}return V?M===C:M==C}function w(M){return Object.prototype.toString.call(M)=="[object Arguments]"}function I(M,C,V,ie){if(M==null||C===null||C===void 0)return!1;if(B.isPrimitive(M)||B.isPrimitive(C))return M===C;if(V&&Object.getPrototypeOf(M)!==Object.getPrototypeOf(C))return!1;var ne=w(M),fe=w(C);if(ne&&!fe||!ne&&fe)return!1;if(ne)return M=N.call(M),C=N.call(C),S(M,C,V);var _e,we,Ce=z(M),oe=z(C);if(Ce.length!==oe.length)return!1;for(Ce.sort(),oe.sort(),we=Ce.length-1;we>=0;we--)if(Ce[we]!==oe[we])return!1;for(we=Ce.length-1;we>=0;we--)if(_e=Ce[we],!S(M[_e],C[_e],V,ie))return!1;return!0}function O(M,C,V){S(M,C,!0)&&b(M,C,V,"notDeepStrictEqual",O)}function T(M,C){if(!M||!C)return!1;if(Object.prototype.toString.call(C)=="[object RegExp]")return C.test(M);try{if(M instanceof C)return!0}catch{}return!Error.isPrototypeOf(C)&&C.call({},M)===!0}function x(M){var C;try{M()}catch(V){C=V}return C}function P(M,C,V,ie){var ne;if(typeof C!="function")throw new TypeError('"block" argument must be a function');typeof V=="string"&&(ie=V,V=null),ne=x(C),ie=(V&&V.name?" ("+V.name+").":".")+(ie?" "+ie:"."),M&&!ne&&b(ne,V,"Missing expected exception"+ie);var fe=typeof ie=="string",_e=!M&&B.isError(ne),we=!M&&ne&&!V;if((_e&&fe&&T(ne,V)||we)&&b(ne,V,"Got unwanted exception"+ie),M&&ne&&V&&!T(ne,V)||!M&&ne)throw ne}var B=r("util/"),Q=Object.prototype.hasOwnProperty,N=Array.prototype.slice,D=(function(){}).name==="foo",F=n.exports=y,W=/\s*function\s+([^\(\s]*)\s*/;F.AssertionError=function(C){this.name="AssertionError",this.actual=C.actual,this.expected=C.expected,this.operator=C.operator,C.message?(this.message=C.message,this.generatedMessage=!1):(this.message=p(this),this.generatedMessage=!0);var V=C.stackStartFunction||b;if(Error.captureStackTrace)Error.captureStackTrace(this,V);else{var ie=new Error;if(ie.stack){var ne=ie.stack,fe=d(V),_e=ne.indexOf(`
`+fe);if(_e>=0){var we=ne.indexOf(`
`,_e+1);ne=ne.substring(we+1)}this.stack=ne}}},B.inherits(F.AssertionError,Error),F.fail=b,F.ok=y,F.equal=function(C,V,ie){C!=V&&b(C,V,ie,"==",F.equal)},F.notEqual=function(C,V,ie){C==V&&b(C,V,ie,"!=",F.notEqual)},F.deepEqual=function(C,V,ie){S(C,V,!1)||b(C,V,ie,"deepEqual",F.deepEqual)},F.deepStrictEqual=function(C,V,ie){S(C,V,!0)||b(C,V,ie,"deepStrictEqual",F.deepStrictEqual)},F.notDeepEqual=function(C,V,ie){S(C,V,!1)&&b(C,V,ie,"notDeepEqual",F.notDeepEqual)},F.notDeepStrictEqual=O,F.strictEqual=function(C,V,ie){C!==V&&b(C,V,ie,"===",F.strictEqual)},F.notStrictEqual=function(C,V,ie){C===V&&b(C,V,ie,"!==",F.notStrictEqual)},F.throws=function(M,C,V){P(!0,M,C,V)},F.doesNotThrow=function(M,C,V){P(!1,M,C,V)},F.ifError=function(M){if(M)throw M};var z=Object.keys||function(M){var C=[];for(var V in M)Q.call(M,V)&&C.push(V);return C}}).call(this,typeof g<"u"?g:typeof self<"u"?self:typeof window<"u"?window:{})},{"util/":7}],3:[function(r,n,a){},{}],4:[function(r,n,a){function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(T){if(p===setTimeout)return setTimeout(T,0);if((p===s||!p)&&setTimeout)return p=setTimeout,setTimeout(T,0);try{return p(T,0)}catch{try{return p.call(null,T,0)}catch{return p.call(this,T,0)}}}function c(T){if(b===clearTimeout)return clearTimeout(T);if((b===o||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(T);try{return b(T)}catch{try{return b.call(null,T)}catch{return b.call(this,T)}}}function l(){I&&S&&(I=!1,S.length?w=S.concat(w):O=-1,w.length&&d())}function d(){if(!I){var T=u(l);I=!0;for(var x=w.length;x;){for(S=w,w=[];++O<x;)S&&S[O].run();O=-1,x=w.length}S=null,I=!1,c(T)}}function h(T,x){this.fun=T,this.array=x}function f(){}var p,b,y=n.exports={};(function(){try{p=typeof setTimeout=="function"?setTimeout:s}catch{p=s}try{b=typeof clearTimeout=="function"?clearTimeout:o}catch{b=o}})();var S,w=[],I=!1,O=-1;y.nextTick=function(T){var x=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)x[P-1]=arguments[P];w.push(new h(T,x)),w.length!==1||I||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},y.title="browser",y.browser=!0,y.env={},y.argv=[],y.version="",y.versions={},y.on=f,y.addListener=f,y.once=f,y.off=f,y.removeListener=f,y.removeAllListeners=f,y.emit=f,y.prependListener=f,y.prependOnceListener=f,y.listeners=function(T){return[]},y.binding=function(T){throw new Error("process.binding is not supported")},y.cwd=function(){return"/"},y.chdir=function(T){throw new Error("process.chdir is not supported")},y.umask=function(){return 0}},{}],5:[function(r,n,a){typeof Object.create=="function"?n.exports=function(o,u){o.super_=u,o.prototype=Object.create(u.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(o,u){o.super_=u;var c=function(){};c.prototype=u.prototype,o.prototype=new c,o.prototype.constructor=o}},{}],6:[function(r,n,a){n.exports=function(o){return o&&typeof o=="object"&&typeof o.copy=="function"&&typeof o.fill=="function"&&typeof o.readUInt8=="function"}},{}],7:[function(r,n,a){(function(s,o){function u(oe,ae){var Ae={seen:[],stylize:l};return arguments.length>=3&&(Ae.depth=arguments[2]),arguments.length>=4&&(Ae.colors=arguments[3]),I(ae)?Ae.showHidden=ae:ae&&a._extend(Ae,ae),Q(Ae.showHidden)&&(Ae.showHidden=!1),Q(Ae.depth)&&(Ae.depth=2),Q(Ae.colors)&&(Ae.colors=!1),Q(Ae.customInspect)&&(Ae.customInspect=!0),Ae.colors&&(Ae.stylize=c),h(Ae,oe,Ae.depth)}function c(oe,ae){var Ae=u.styles[ae];return Ae?"\x1B["+u.colors[Ae][0]+"m"+oe+"\x1B["+u.colors[Ae][1]+"m":oe}function l(oe,ae){return oe}function d(oe){var ae={};return oe.forEach(function(Ae,Ie){ae[Ae]=!0}),ae}function h(oe,ae,Ae){if(oe.customInspect&&ae&&z(ae.inspect)&&ae.inspect!==a.inspect&&(!ae.constructor||ae.constructor.prototype!==ae)){var Ie=ae.inspect(Ae,oe);return P(Ie)||(Ie=h(oe,Ie,Ae)),Ie}var he=f(oe,ae);if(he)return he;var ve=Object.keys(ae),me=d(ve);if(oe.showHidden&&(ve=Object.getOwnPropertyNames(ae)),W(ae)&&(ve.indexOf("message")>=0||ve.indexOf("description")>=0))return p(ae);if(ve.length===0){if(z(ae)){var L=ae.name?": "+ae.name:"";return oe.stylize("[Function"+L+"]","special")}if(N(ae))return oe.stylize(RegExp.prototype.toString.call(ae),"regexp");if(F(ae))return oe.stylize(Date.prototype.toString.call(ae),"date");if(W(ae))return p(ae)}var H="",A=!1,m=["{","}"];if(w(ae)&&(A=!0,m=["[","]"]),z(ae)&&(H=" [Function"+(ae.name?": "+ae.name:"")+"]"),N(ae)&&(H=" "+RegExp.prototype.toString.call(ae)),F(ae)&&(H=" "+Date.prototype.toUTCString.call(ae)),W(ae)&&(H=" "+p(ae)),ve.length===0&&(!A||ae.length==0))return m[0]+H+m[1];if(Ae<0)return N(ae)?oe.stylize(RegExp.prototype.toString.call(ae),"regexp"):oe.stylize("[Object]","special");oe.seen.push(ae);var v;return v=A?b(oe,ae,Ae,me,ve):ve.map(function(j){return y(oe,ae,Ae,me,j,A)}),oe.seen.pop(),S(v,H,m)}function f(oe,ae){if(Q(ae))return oe.stylize("undefined","undefined");if(P(ae)){var Ae="'"+JSON.stringify(ae).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return oe.stylize(Ae,"string")}return x(ae)?oe.stylize(""+ae,"number"):I(ae)?oe.stylize(""+ae,"boolean"):O(ae)?oe.stylize("null","null"):void 0}function p(oe){return"["+Error.prototype.toString.call(oe)+"]"}function b(oe,ae,Ae,Ie,he){for(var ve=[],me=0,L=ae.length;me<L;++me)ne(ae,String(me))?ve.push(y(oe,ae,Ae,Ie,String(me),!0)):ve.push("");return he.forEach(function(H){H.match(/^\d+$/)||ve.push(y(oe,ae,Ae,Ie,H,!0))}),ve}function y(oe,ae,Ae,Ie,he,ve){var me,L,H;if((H=Object.getOwnPropertyDescriptor(ae,he)||{value:ae[he]}).get?L=H.set?oe.stylize("[Getter/Setter]","special"):oe.stylize("[Getter]","special"):H.set&&(L=oe.stylize("[Setter]","special")),ne(Ie,he)||(me="["+he+"]"),L||(oe.seen.indexOf(H.value)<0?(L=O(Ae)?h(oe,H.value,null):h(oe,H.value,Ae-1)).indexOf(`
`)>-1&&(L=ve?L.split(`
`).map(function(A){return"  "+A}).join(`
`).substr(2):`
`+L.split(`
`).map(function(A){return"   "+A}).join(`
`)):L=oe.stylize("[Circular]","special")),Q(me)){if(ve&&he.match(/^\d+$/))return L;(me=JSON.stringify(""+he)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(me=me.substr(1,me.length-2),me=oe.stylize(me,"name")):(me=me.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),me=oe.stylize(me,"string"))}return me+": "+L}function S(oe,ae,Ae){var Ie=0;return oe.reduce(function(he,ve){return Ie++,ve.indexOf(`
`)>=0&&Ie++,he+ve.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Ae[0]+(ae===""?"":ae+`
 `)+" "+oe.join(`,
  `)+" "+Ae[1]:Ae[0]+ae+" "+oe.join(", ")+" "+Ae[1]}function w(oe){return Array.isArray(oe)}function I(oe){return typeof oe=="boolean"}function O(oe){return oe===null}function T(oe){return oe==null}function x(oe){return typeof oe=="number"}function P(oe){return typeof oe=="string"}function B(oe){return typeof oe=="symbol"}function Q(oe){return oe===void 0}function N(oe){return D(oe)&&C(oe)==="[object RegExp]"}function D(oe){return typeof oe=="object"&&oe!==null}function F(oe){return D(oe)&&C(oe)==="[object Date]"}function W(oe){return D(oe)&&(C(oe)==="[object Error]"||oe instanceof Error)}function z(oe){return typeof oe=="function"}function M(oe){return oe===null||typeof oe=="boolean"||typeof oe=="number"||typeof oe=="string"||typeof oe=="symbol"||oe===void 0}function C(oe){return Object.prototype.toString.call(oe)}function V(oe){return oe<10?"0"+oe.toString(10):oe.toString(10)}function ie(){var oe=new Date,ae=[V(oe.getHours()),V(oe.getMinutes()),V(oe.getSeconds())].join(":");return[oe.getDate(),Ce[oe.getMonth()],ae].join(" ")}function ne(oe,ae){return Object.prototype.hasOwnProperty.call(oe,ae)}var fe=/%[sdj%]/g;a.format=function(oe){if(!P(oe)){for(var ae=[],Ae=0;Ae<arguments.length;Ae++)ae.push(u(arguments[Ae]));return ae.join(" ")}for(var Ae=1,Ie=arguments,he=Ie.length,ve=String(oe).replace(fe,function(H){if(H==="%%")return"%";if(Ae>=he)return H;switch(H){case"%s":return String(Ie[Ae++]);case"%d":return Number(Ie[Ae++]);case"%j":try{return JSON.stringify(Ie[Ae++])}catch{return"[Circular]"}default:return H}}),me=Ie[Ae];Ae<he;me=Ie[++Ae])O(me)||!D(me)?ve+=" "+me:ve+=" "+u(me);return ve},a.deprecate=function(oe,ae){if(Q(o.process))return function(){return a.deprecate(oe,ae).apply(this,arguments)};if(s.noDeprecation===!0)return oe;var Ae=!1;return function(){if(!Ae){if(s.throwDeprecation)throw new Error(ae);s.traceDeprecation?console.trace(ae):console.error(ae),Ae=!0}return oe.apply(this,arguments)}};var _e,we={};a.debuglog=function(oe){if(Q(_e)&&(_e={}.NODE_DEBUG||""),oe=oe.toUpperCase(),!we[oe])if(new RegExp("\\b"+oe+"\\b","i").test(_e)){var ae=s.pid;we[oe]=function(){var Ae=a.format.apply(a,arguments);console.error("%s %d: %s",oe,ae,Ae)}}else we[oe]=function(){};return we[oe]},a.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},a.isArray=w,a.isBoolean=I,a.isNull=O,a.isNullOrUndefined=T,a.isNumber=x,a.isString=P,a.isSymbol=B,a.isUndefined=Q,a.isRegExp=N,a.isObject=D,a.isDate=F,a.isError=W,a.isFunction=z,a.isPrimitive=M,a.isBuffer=r("./support/isBuffer");var Ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.log=function(){console.log("%s - %s",ie(),a.format.apply(a,arguments))},a.inherits=r("inherits"),a._extend=function(oe,ae){if(!ae||!D(ae))return oe;for(var Ae=Object.keys(ae),Ie=Ae.length;Ie--;)oe[Ae[Ie]]=ae[Ae[Ie]];return oe}}).call(this,r("_process"),typeof g<"u"?g:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":6,_process:4,inherits:5}],8:[function(r,n,a){function s(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(){function l(d,h){for(var f=0;f<h.length;f++){var p=h[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,h,f){return h&&l(d.prototype,h),f&&l(d,f),d}}(),u=r("./helpers.js"),c=u.createDataProperty;n.exports=function(){function l(d){var h=d.highWaterMark;s(this,l),c(this,"highWaterMark",h)}return o(l,[{key:"size",value:function(h){return h.byteLength}}]),l}()},{"./helpers.js":10}],9:[function(r,n,a){function s(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(){function l(d,h){for(var f=0;f<h.length;f++){var p=h[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,h,f){return h&&l(d.prototype,h),f&&l(d,f),d}}(),u=r("./helpers.js"),c=u.createDataProperty;n.exports=function(){function l(d){var h=d.highWaterMark;s(this,l),c(this,"highWaterMark",h)}return o(l,[{key:"size",value:function(){return 1}}]),l}()},{"./helpers.js":10}],10:[function(r,n,a){function s(l,d,h){if(typeof l!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(l,d,h)}function o(l,d,h){try{return Promise.resolve(s(l,d,h))}catch(f){return Promise.reject(f)}}var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l};r("better-assert");var c=Symbol('is "detached" for our purposes');a.typeIsObject=function(l){return(l===void 0?"undefined":u(l))==="object"&&l!==null||typeof l=="function"},a.createDataProperty=function(l,d,h){Object.defineProperty(l,d,{value:h,writable:!0,enumerable:!0,configurable:!0})},a.createArrayFromList=function(l){return l.slice()},a.ArrayBufferCopy=function(l,d,h,f,p){new Uint8Array(l).set(new Uint8Array(h,f,p),d)},a.CreateIterResultObject=function(l,d){var h={};return Object.defineProperty(h,"value",{value:l,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(h,"done",{value:d,enumerable:!0,writable:!0,configurable:!0}),h},a.IsFiniteNonNegativeNumber=function(l){return a.IsNonNegativeNumber(l)!==!1&&l!==1/0},a.IsNonNegativeNumber=function(l){return typeof l=="number"&&!Number.isNaN(l)&&!(l<0)},a.Call=s,a.CreateAlgorithmFromUnderlyingMethod=function(l,d,h,f){var p=l[d];if(p!==void 0){if(typeof p!="function")throw new TypeError(p+" is not a method");switch(h){case 0:return function(){return o(p,l,f)};case 1:return function(b){var y=[b].concat(f);return o(p,l,y)}}}return function(){return Promise.resolve()}},a.InvokeOrNoop=function(l,d,h){var f=l[d];if(f!==void 0)return s(f,l,h)},a.PromiseCall=o,a.TransferArrayBuffer=function(l){var d=l.slice();return Object.defineProperty(l,"byteLength",{get:function(){return 0}}),l[c]=!0,d},a.IsDetachedBuffer=function(l){return c in l},a.ValidateAndNormalizeHighWaterMark=function(l){if(l=Number(l),Number.isNaN(l)||l<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return l},a.MakeSizeAlgorithmFromSizeFunction=function(l){if(l===void 0)return function(){return 1};if(typeof l!="function")throw new TypeError("size property of a queuing strategy must be a function");return function(d){return l(d)}}},{"better-assert":16}],11:[function(r,n,a){r("better-assert");var s=r("./helpers.js"),o=s.IsFiniteNonNegativeNumber;a.DequeueValue=function(u){var c=u._queue.shift();return u._queueTotalSize-=c.size,u._queueTotalSize<0&&(u._queueTotalSize=0),c.value},a.EnqueueValueWithSize=function(u,c,l){if(l=Number(l),!o(l))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");u._queue.push({value:c,size:l}),u._queueTotalSize+=l},a.PeekQueueValue=function(u){return u._queue[0].value},a.ResetQueue=function(u){u._queue=[],u._queueTotalSize=0}},{"./helpers.js":10,"better-assert":16}],12:[function(r,n,a){function s(ee,se){if(!(ee instanceof se))throw new TypeError("Cannot call a class as a function")}function o(ee){return new Qn(ee)}function u(ee){return new hi(ee)}function c(ee,se,pe){var Ve=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,ze=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return 1},Ye=Object.create(La.prototype);return d(Ye),he(Ye,Object.create(cu.prototype),ee,se,pe,Ve,ze),Ye}function l(ee,se,pe){var Ve=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,ze=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,Ye=Object.create(La.prototype);return d(Ye),ge(Ye,Object.create(Ll.prototype),ee,se,pe,Ve,ze),Ye}function d(ee){ee._state="readable",ee._reader=void 0,ee._storedError=void 0,ee._disturbed=!1}function h(ee){return!!Gr(ee)&&!!Object.prototype.hasOwnProperty.call(ee,"_readableStreamController")}function f(ee){return ee._disturbed}function p(ee){return ee._reader!==void 0}function b(ee,se){function pe(){return V(ze).then(function(Dn){var yi=Dn.value;if(Dn.done===!0&&Ye===!1&&(Et===!1&&_e(rr._readableStreamController),qt===!1&&_e(Er._readableStreamController),Ye=!0),Ye!==!0){var $a=yi,wn=yi;Et===!1&&we(rr._readableStreamController,$a),qt===!1&&we(Er._readableStreamController,wn)}})}function Ve(){}var ze=u(ee),Ye=!1,Et=!1,qt=!1,or=void 0,Mr=void 0,rr=void 0,Er=void 0,pi=void 0,Gn=new Promise(function(Dn){pi=Dn});return rr=c(Ve,pe,function(yi){if(Et=!0,or=yi,qt===!0){var $a=Qe([or,Mr]),wn=w(ee,$a);pi(wn)}return Gn}),Er=c(Ve,pe,function(yi){if(qt=!0,Mr=yi,Et===!0){var $a=Qe([or,Mr]),wn=w(ee,$a);pi(wn)}return Gn}),ze._closedPromise.catch(function(Dn){Ye!==!0&&(oe(rr._readableStreamController,Dn),oe(Er._readableStreamController,Dn),Ye=!0)}),[rr,Er]}function y(ee){return new Promise(function(se,pe){var Ve={_resolve:se,_reject:pe};ee._reader._readIntoRequests.push(Ve)})}function S(ee){return new Promise(function(se,pe){var Ve={_resolve:se,_reject:pe};ee._reader._readRequests.push(Ve)})}function w(ee,se){return ee._disturbed=!0,ee._state==="closed"?Promise.resolve(void 0):ee._state==="errored"?Promise.reject(ee._storedError):(I(ee),ee._readableStreamController[sn](se).then(function(){}))}function I(ee){ee._state="closed";var se=ee._reader;if(se!==void 0){if(F(se)===!0){var pe=!0,Ve=!1,ze=void 0;try{for(var Ye,Et=se._readRequests[Symbol.iterator]();!(pe=(Ye=Et.next()).done);pe=!0)(0,Ye.value._resolve)(je(void 0,!0))}catch(qt){Ve=!0,ze=qt}finally{try{!pe&&Et.return&&Et.return()}finally{if(Ve)throw ze}}se._readRequests=[]}vr(se)}}function O(ee,se){ee._state="errored",ee._storedError=se;var pe=ee._reader;if(pe!==void 0){if(F(pe)===!0){var Ve=!0,ze=!1,Ye=void 0;try{for(var Et,qt=pe._readRequests[Symbol.iterator]();!(Ve=(Et=qt.next()).done);Ve=!0)Et.value._reject(se)}catch(Gn){ze=!0,Ye=Gn}finally{try{!Ve&&qt.return&&qt.return()}finally{if(ze)throw Ye}}pe._readRequests=[]}else{var or=!0,Mr=!1,rr=void 0;try{for(var Er,pi=pe._readIntoRequests[Symbol.iterator]();!(or=(Er=pi.next()).done);or=!0)Er.value._reject(se)}catch(Gn){Mr=!0,rr=Gn}finally{try{!or&&pi.return&&pi.return()}finally{if(Mr)throw rr}}pe._readIntoRequests=[]}br(pe,se),pe._closedPromise.catch(function(){})}}function T(ee,se,pe){ee._reader._readIntoRequests.shift()._resolve(je(se,pe))}function x(ee,se,pe){ee._reader._readRequests.shift()._resolve(je(se,pe))}function P(ee){return ee._reader._readIntoRequests.length}function B(ee){return ee._reader._readRequests.length}function Q(ee){var se=ee._reader;return se!==void 0&&D(se)!==!1}function N(ee){var se=ee._reader;return se!==void 0&&F(se)!==!1}function D(ee){return!!Gr(ee)&&!!Object.prototype.hasOwnProperty.call(ee,"_readIntoRequests")}function F(ee){return!!Gr(ee)&&!!Object.prototype.hasOwnProperty.call(ee,"_readRequests")}function W(ee,se){ee._ownerReadableStream=se,se._reader=ee,se._state==="readable"?rn(ee):se._state==="closed"?nn(ee):(Vr(ee,se._storedError),ee._closedPromise.catch(function(){}))}function z(ee,se){return w(ee._ownerReadableStream,se)}function M(ee){ee._ownerReadableStream._state==="readable"?br(ee,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Pn(ee,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),ee._closedPromise.catch(function(){}),ee._ownerReadableStream._reader=void 0,ee._ownerReadableStream=void 0}function C(ee,se){var pe=ee._ownerReadableStream;return pe._disturbed=!0,pe._state==="errored"?Promise.reject(pe._storedError):re(pe._readableStreamController,se)}function V(ee){var se=ee._ownerReadableStream;return se._disturbed=!0,se._state==="closed"?Promise.resolve(je(void 0,!0)):se._state==="errored"?Promise.reject(se._storedError):se._readableStreamController[Ss]()}function ie(ee){return!!Gr(ee)&&!!Object.prototype.hasOwnProperty.call(ee,"_controlledReadableStream")}function ne(ee){fe(ee)!==!1&&(ee._pulling!==!0?(ee._pulling=!0,ee._pullAlgorithm().then(function(){if(ee._pulling=!1,ee._pullAgain===!0)return ee._pullAgain=!1,ne(ee)},function(se){oe(ee,se)}).catch(kt)):ee._pullAgain=!0)}function fe(ee){var se=ee._controlledReadableStream;return Ie(ee)!==!1&&ee._started!==!1&&(p(se)===!0&&B(se)>0||ae(ee)>0)}function _e(ee){var se=ee._controlledReadableStream;ee._closeRequested=!0,ee._queue.length===0&&I(se)}function we(ee,se){var pe=ee._controlledReadableStream;if(p(pe)===!0&&B(pe)>0)x(pe,se,!1);else{var Ve=void 0;try{Ve=ee._strategySizeAlgorithm(se)}catch(ze){throw oe(ee,ze),ze}try{wa(ee,se,Ve)}catch(ze){throw oe(ee,ze),ze}}ne(ee)}function Ce(ee,se){var pe=ee._controlledReadableStream;Ji(ee),O(pe,se)}function oe(ee,se){ee._controlledReadableStream._state==="readable"&&Ce(ee,se)}function ae(ee){var se=ee._controlledReadableStream._state;return se==="errored"?null:se==="closed"?0:ee._strategyHWM-ee._queueTotalSize}function Ae(ee){return fe(ee)!==!0}function Ie(ee){var se=ee._controlledReadableStream._state;return ee._closeRequested===!1&&se==="readable"}function he(ee,se,pe,Ve,ze,Ye,Et){se._controlledReadableStream=ee,se._queue=void 0,se._queueTotalSize=void 0,Ji(se),se._started=!1,se._closeRequested=!1,se._pullAgain=!1,se._pulling=!1,se._strategySizeAlgorithm=Et,se._strategyHWM=Ye,se._pullAlgorithm=Ve,se._cancelAlgorithm=ze,ee._readableStreamController=se;var qt=pe();Promise.resolve(qt).then(function(){se._started=!0,ne(se)},function(or){oe(se,or)}).catch(kt)}function ve(ee,se,pe,Ve){var ze=Object.create(cu.prototype),Ye=He(se,"pull",0,[ze]),Et=He(se,"cancel",1,[]);he(ee,ze,function(){return Je(se,"start",[ze])},Ye,Et,pe,Ve)}function me(ee){return!!Gr(ee)&&!!Object.prototype.hasOwnProperty.call(ee,"_controlledReadableByteStream")}function L(ee){return!!Gr(ee)&&!!Object.prototype.hasOwnProperty.call(ee,"_associatedReadableByteStreamController")}function H(ee){Pe(ee)!==!1&&(ee._pulling!==!0?(ee._pulling=!0,ee._pullAlgorithm().then(function(){ee._pulling=!1,ee._pullAgain===!0&&(ee._pullAgain=!1,H(ee))},function(se){ee._controlledReadableByteStream._state==="readable"&&R(ee,se)}).catch(kt)):ee._pullAgain=!0)}function A(ee){Y(ee),ee._pendingPullIntos=[]}function m(ee,se){var pe=!1;ee._state==="closed"&&(pe=!0);var Ve=v(se);se.readerType==="default"?x(ee,Ve,pe):T(ee,Ve,pe)}function v(ee){var se=ee.bytesFilled,pe=ee.elementSize;return new ee.ctor(ee.buffer,ee.byteOffset,se/pe)}function j(ee,se,pe,Ve){ee._queue.push({buffer:se,byteOffset:pe,byteLength:Ve}),ee._queueTotalSize+=Ve}function q(ee,se){var pe=se.elementSize,Ve=se.bytesFilled-se.bytesFilled%pe,ze=Math.min(ee._queueTotalSize,se.byteLength-se.bytesFilled),Ye=se.bytesFilled+ze,Et=Ye-Ye%pe,qt=ze,or=!1;Et>Ve&&(qt=Et-se.bytesFilled,or=!0);for(var Mr=ee._queue;qt>0;){var rr=Mr[0],Er=Math.min(qt,rr.byteLength),pi=se.byteOffset+se.bytesFilled;Se(se.buffer,pi,rr.buffer,rr.byteOffset,Er),rr.byteLength===Er?Mr.shift():(rr.byteOffset+=Er,rr.byteLength-=Er),ee._queueTotalSize-=Er,$(ee,Er,se),qt-=Er}return or}function $(ee,se,pe){Y(ee),pe.bytesFilled+=se}function G(ee){ee._queueTotalSize===0&&ee._closeRequested===!0?I(ee._controlledReadableByteStream):H(ee)}function Y(ee){ee._byobRequest!==void 0&&(ee._byobRequest._associatedReadableByteStreamController=void 0,ee._byobRequest._view=void 0,ee._byobRequest=void 0)}function J(ee){for(;ee._pendingPullIntos.length>0;){if(ee._queueTotalSize===0)return;var se=ee._pendingPullIntos[0];q(ee,se)===!0&&(xe(ee),m(ee._controlledReadableByteStream,se))}}function re(ee,se){var pe=ee._controlledReadableByteStream,Ve=1;se.constructor!==DataView&&(Ve=se.constructor.BYTES_PER_ELEMENT);var ze=se.constructor,Ye={buffer:it(se.buffer),byteOffset:se.byteOffset,byteLength:se.byteLength,bytesFilled:0,elementSize:Ve,ctor:ze,readerType:"byob"};if(ee._pendingPullIntos.length>0)return ee._pendingPullIntos.push(Ye),y(pe);if(pe._state==="closed"){var Et=new se.constructor(Ye.buffer,Ye.byteOffset,0);return Promise.resolve(je(Et,!0))}if(ee._queueTotalSize>0){if(q(ee,Ye)===!0){var qt=v(Ye);return G(ee),Promise.resolve(je(qt,!1))}if(ee._closeRequested===!0){var or=new TypeError("Insufficient bytes to fill elements in the given buffer");return R(ee,or),Promise.reject(or)}}ee._pendingPullIntos.push(Ye);var Mr=y(pe);return H(ee),Mr}function de(ee,se){se.buffer=it(se.buffer);var pe=ee._controlledReadableByteStream;if(Q(pe)===!0)for(;P(pe)>0;)m(pe,xe(ee))}function be(ee,se,pe){if(pe.bytesFilled+se>pe.byteLength)throw new RangeError("bytesWritten out of range");if($(ee,se,pe),!(pe.bytesFilled<pe.elementSize)){xe(ee);var Ve=pe.bytesFilled%pe.elementSize;if(Ve>0){var ze=pe.byteOffset+pe.bytesFilled,Ye=pe.buffer.slice(ze-Ve,ze);j(ee,Ye,0,Ye.byteLength)}pe.buffer=it(pe.buffer),pe.bytesFilled-=Ve,m(ee._controlledReadableByteStream,pe),J(ee)}}function Ee(ee,se){var pe=ee._pendingPullIntos[0];if(ee._controlledReadableByteStream._state==="closed"){if(se!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");de(ee,pe)}else be(ee,se,pe)}function xe(ee){var se=ee._pendingPullIntos.shift();return Y(ee),se}function Pe(ee){var se=ee._controlledReadableByteStream;return se._state==="readable"&&ee._closeRequested!==!0&&ee._started!==!1&&(N(se)===!0&&B(se)>0||Q(se)===!0&&P(se)>0||K(ee)>0)}function U(ee){var se=ee._controlledReadableByteStream;if(ee._queueTotalSize>0)ee._closeRequested=!0;else{if(ee._pendingPullIntos.length>0&&ee._pendingPullIntos[0].bytesFilled>0){var pe=new TypeError("Insufficient bytes to fill elements in the given buffer");throw R(ee,pe),pe}I(se)}}function E(ee,se){var pe=ee._controlledReadableByteStream,Ve=se.buffer,ze=se.byteOffset,Ye=se.byteLength,Et=it(Ve);N(pe)===!0?B(pe)===0?j(ee,Et,ze,Ye):x(pe,new Uint8Array(Et,ze,Ye),!1):Q(pe)===!0?(j(ee,Et,ze,Ye),J(ee)):j(ee,Et,ze,Ye)}function R(ee,se){var pe=ee._controlledReadableByteStream;A(ee),Ji(ee),O(pe,se)}function K(ee){var se=ee._controlledReadableByteStream._state;return se==="errored"?null:se==="closed"?0:ee._strategyHWM-ee._queueTotalSize}function ce(ee,se){if(se=Number(se),Fe(se)===!1)throw new RangeError("bytesWritten must be a finite");Ee(ee,se)}function ye(ee,se){var pe=ee._pendingPullIntos[0];if(pe.byteOffset+pe.bytesFilled!==se.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(pe.byteLength!==se.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");pe.buffer=se.buffer,Ee(ee,se.byteLength)}function ge(ee,se,pe,Ve,ze,Ye,Et){se._controlledReadableByteStream=ee,se._pullAgain=!1,se._pulling=!1,A(se),se._queue=se._queueTotalSize=void 0,Ji(se),se._closeRequested=!1,se._started=!1,se._strategyHWM=qe(Ye),se._pullAlgorithm=Ve,se._cancelAlgorithm=ze,se._autoAllocateChunkSize=Et,se._pendingPullIntos=[],ee._readableStreamController=se;var qt=pe();Promise.resolve(qt).then(function(){se._started=!0,H(se)},function(or){ee._state==="readable"&&R(se,or)}).catch(kt)}function $e(ee,se,pe){var Ve=Object.create(Ll.prototype),ze=He(se,"pull",0,[Ve]),Ye=He(se,"cancel",1,[]),Et=se.autoAllocateChunkSize;if(Et!==void 0&&(Number.isInteger(Et)===!1||Et<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");ge(ee,Ve,function(){return Je(se,"start",[Ve])},ze,Ye,pe,Et)}function ke(ee,se,pe){ee._associatedReadableByteStreamController=se,ee._view=pe}function Xe(ee){return new TypeError("ReadableStream.prototype."+ee+" can only be used on a ReadableStream")}function Ke(ee){return new TypeError("Cannot "+ee+" a stream using a released reader")}function ht(ee){return new TypeError("ReadableStreamDefaultReader.prototype."+ee+" can only be used on a ReadableStreamDefaultReader")}function rn(ee){ee._closedPromise=new Promise(function(se,pe){ee._closedPromise_resolve=se,ee._closedPromise_reject=pe})}function Vr(ee,se){ee._closedPromise=Promise.reject(se),ee._closedPromise_resolve=void 0,ee._closedPromise_reject=void 0}function nn(ee){ee._closedPromise=Promise.resolve(void 0),ee._closedPromise_resolve=void 0,ee._closedPromise_reject=void 0}function br(ee,se){ee._closedPromise_reject(se),ee._closedPromise_resolve=void 0,ee._closedPromise_reject=void 0}function Pn(ee,se){ee._closedPromise=Promise.reject(se)}function vr(ee){ee._closedPromise_resolve(void 0),ee._closedPromise_resolve=void 0,ee._closedPromise_reject=void 0}function wr(ee){return new TypeError("ReadableStreamBYOBReader.prototype."+ee+" can only be used on a ReadableStreamBYOBReader")}function an(ee){return new TypeError("ReadableStreamDefaultController.prototype."+ee+" can only be used on a ReadableStreamDefaultController")}function te(ee){return new TypeError("ReadableStreamBYOBRequest.prototype."+ee+" can only be used on a ReadableStreamBYOBRequest")}function _(ee){return new TypeError("ReadableByteStreamController.prototype."+ee+" can only be used on a ReadableByteStreamController")}function k(ee){try{Promise.prototype.then.call(ee,void 0,function(){})}catch{}}var le=function(){function ee(se,pe){for(var Ve=0;Ve<pe.length;Ve++){var ze=pe[Ve];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(se,ze.key,ze)}}return function(se,pe,Ve){return pe&&ee(se.prototype,pe),Ve&&ee(se,Ve),se}}();r("better-assert");var Te=r("./helpers.js"),Se=Te.ArrayBufferCopy,He=Te.CreateAlgorithmFromUnderlyingMethod,je=Te.CreateIterResultObject,Fe=Te.IsFiniteNonNegativeNumber,Je=Te.InvokeOrNoop,It=Te.IsDetachedBuffer,it=Te.TransferArrayBuffer,qe=Te.ValidateAndNormalizeHighWaterMark;Te.IsNonNegativeNumber;var Li=Te.MakeSizeAlgorithmFromSizeFunction,Qe=Te.createArrayFromList,Gr=Te.typeIsObject,Jt=r("./utils.js"),kt=Jt.rethrowAssertionErrorRejection,Fr=r("./queue-with-sizes.js"),At=Fr.DequeueValue,wa=Fr.EnqueueValueWithSize,Ji=Fr.ResetQueue,lr=r("./writable-stream.js"),ho=lr.AcquireWritableStreamDefaultWriter,uu=lr.IsWritableStream,Jr=lr.IsWritableStreamLocked,Bi=lr.WritableStreamAbort,pn=lr.WritableStreamDefaultWriterCloseWithErrorPropagation,Yi=lr.WritableStreamDefaultWriterRelease,yn=lr.WritableStreamDefaultWriterWrite,Ma=lr.WritableStreamCloseQueuedOrInFlight,sn=Symbol("[[CancelSteps]]"),Ss=Symbol("[[PullSteps]]"),La=function(){function ee(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ve=pe.size,ze=pe.highWaterMark;s(this,ee),d(this);var Ye=se.type;if(String(Ye)==="bytes"){if(ze===void 0&&(ze=0),ze=qe(ze),Ve!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");$e(this,se,ze)}else{if(Ye!==void 0)throw new RangeError("Invalid type is specified");ze===void 0&&(ze=1),ve(this,se,ze=qe(ze),Li(Ve))}}return le(ee,[{key:"cancel",value:function(pe){return h(this)===!1?Promise.reject(Xe("cancel")):p(this)===!0?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):w(this,pe)}},{key:"getReader",value:function(){var pe=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).mode;if(h(this)===!1)throw Xe("getReader");if(pe===void 0)return u(this);if((pe=String(pe))==="byob")return o(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(pe,Ve){var ze=pe.writable,Ye=pe.readable;if(ze===void 0||Ye===void 0)throw new TypeError("readable and writable arguments must be defined");return k(this.pipeTo(ze,Ve)),Ye}},{key:"pipeTo",value:function(pe){var Ve=this,ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ye=ze.preventClose,Et=ze.preventAbort,qt=ze.preventCancel;if(h(this)===!1)return Promise.reject(Xe("pipeTo"));if(uu(pe)===!1)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(Ye=!!Ye,Et=!!Et,qt=!!qt,p(this)===!0)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(Jr(pe)===!0)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var or=u(this),Mr=ho(pe),rr=!1,Er=Promise.resolve();return new Promise(function(pi,Gn){function Dn(){return rr===!0?Promise.resolve():Mr._readyPromise.then(function(){return V(or).then(function(Yt){var Sn=Yt.value;Yt.done!==!0&&(Er=yn(Mr,Sn).catch(function(){}))})}).then(Dn)}function yi(){var Yt=Er;return Er.then(function(){return Yt!==Er?yi():void 0})}function $a(Yt,Sn,yo){Yt._state==="errored"?yo(Yt._storedError):Sn.catch(yo).catch(kt)}function wn(Yt,Sn,yo){function lu(){Yt().then(function(){return pc(Sn,yo)},function(Ey){return pc(!0,Ey)}).catch(kt)}rr!==!0&&(rr=!0,pe._state==="writable"&&Ma(pe)===!1?yi().then(lu):lu())}function po(Yt,Sn){rr!==!0&&(rr=!0,pe._state==="writable"&&Ma(pe)===!1?yi().then(function(){return pc(Yt,Sn)}).catch(kt):pc(Yt,Sn))}function pc(Yt,Sn){Yi(Mr),M(or),Yt?Gn(Sn):pi(void 0)}if($a(Ve,or._closedPromise,function(Yt){Et===!1?wn(function(){return Bi(pe,Yt)},!0,Yt):po(!0,Yt)}),$a(pe,Mr._closedPromise,function(Yt){qt===!1?wn(function(){return w(Ve,Yt)},!0,Yt):po(!0,Yt)}),function(Sn,yo,lu){Sn._state==="closed"?lu():yo.then(lu).catch(kt)}(Ve,or._closedPromise,function(){Ye===!1?wn(function(){return pn(Mr)}):po()}),Ma(pe)===!0||pe._state==="closed"){var yc=new TypeError("the destination writable stream closed before all data could be piped to it");qt===!1?wn(function(){return w(Ve,yc)},!0,yc):po(!0,yc)}Dn().catch(function(Yt){Er=Promise.resolve(),kt(Yt)})})}},{key:"tee",value:function(){if(h(this)===!1)throw Xe("tee");var pe=b(this);return Qe(pe)}},{key:"locked",get:function(){if(h(this)===!1)throw Xe("locked");return p(this)}}]),ee}();n.exports={CreateReadableByteStream:l,CreateReadableStream:c,ReadableStream:La,IsReadableStreamDisturbed:f,ReadableStreamDefaultControllerClose:_e,ReadableStreamDefaultControllerEnqueue:we,ReadableStreamDefaultControllerError:Ce,ReadableStreamDefaultControllerGetDesiredSize:ae,ReadableStreamDefaultControllerHasBackpressure:Ae,ReadableStreamDefaultControllerCanCloseOrEnqueue:Ie};var hi=function(){function ee(se){if(s(this,ee),h(se)===!1)throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(p(se)===!0)throw new TypeError("This stream has already been locked for exclusive reading by another reader");W(this,se),this._readRequests=[]}return le(ee,[{key:"cancel",value:function(pe){return F(this)===!1?Promise.reject(ht("cancel")):this._ownerReadableStream===void 0?Promise.reject(Ke("cancel")):z(this,pe)}},{key:"read",value:function(){return F(this)===!1?Promise.reject(ht("read")):this._ownerReadableStream===void 0?Promise.reject(Ke("read from")):V(this)}},{key:"releaseLock",value:function(){if(F(this)===!1)throw ht("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");M(this)}}},{key:"closed",get:function(){return F(this)===!1?Promise.reject(ht("closed")):this._closedPromise}}]),ee}(),Qn=function(){function ee(se){if(s(this,ee),!h(se))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(me(se._readableStreamController)===!1)throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(p(se))throw new TypeError("This stream has already been locked for exclusive reading by another reader");W(this,se),this._readIntoRequests=[]}return le(ee,[{key:"cancel",value:function(pe){return D(this)?this._ownerReadableStream===void 0?Promise.reject(Ke("cancel")):z(this,pe):Promise.reject(wr("cancel"))}},{key:"read",value:function(pe){return D(this)?this._ownerReadableStream===void 0?Promise.reject(Ke("read from")):ArrayBuffer.isView(pe)?It(pe.buffer)===!0?Promise.reject(new TypeError("Cannot read into a view onto a detached ArrayBuffer")):pe.byteLength===0?Promise.reject(new TypeError("view must have non-zero byteLength")):C(this,pe):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(wr("read"))}},{key:"releaseLock",value:function(){if(!D(this))throw wr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");M(this)}}},{key:"closed",get:function(){return D(this)?this._closedPromise:Promise.reject(wr("closed"))}}]),ee}(),cu=function(){function ee(){throw s(this,ee),new TypeError}return le(ee,[{key:"close",value:function(){if(ie(this)===!1)throw an("close");if(Ie(this)===!1)throw new TypeError("The stream is not in a state that permits close");_e(this)}},{key:"enqueue",value:function(pe){if(ie(this)===!1)throw an("enqueue");if(Ie(this)===!1)throw new TypeError("The stream is not in a state that permits enqueue");return we(this,pe)}},{key:"error",value:function(pe){if(ie(this)===!1)throw an("error");var Ve=this._controlledReadableStream;if(Ve._state!=="readable")throw new TypeError("The stream is "+Ve._state+" and so cannot be errored");Ce(this,pe)}},{key:sn,value:function(pe){return Ji(this),this._cancelAlgorithm(pe)}},{key:Ss,value:function(){var pe=this._controlledReadableStream;if(this._queue.length>0){var Ve=At(this);return this._closeRequested===!0&&this._queue.length===0?I(pe):ne(this),Promise.resolve(je(Ve,!1))}var ze=S(pe);return ne(this),ze}},{key:"desiredSize",get:function(){if(ie(this)===!1)throw an("desiredSize");return ae(this)}}]),ee}(),Ba=function(){function ee(){throw s(this,ee),new TypeError("ReadableStreamBYOBRequest cannot be used directly")}return le(ee,[{key:"respond",value:function(pe){if(L(this)===!1)throw te("respond");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(It(this._view.buffer)===!0)throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");ce(this._associatedReadableByteStreamController,pe)}},{key:"respondWithNewView",value:function(pe){if(L(this)===!1)throw te("respond");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(pe))throw new TypeError("You can only respond with array buffer views");if(It(pe.buffer)===!0)throw new TypeError("The supplied view's buffer has been detached and so cannot be used as a response");ye(this._associatedReadableByteStreamController,pe)}},{key:"view",get:function(){if(L(this)===!1)throw te("view");return this._view}}]),ee}(),Ll=function(){function ee(){throw s(this,ee),new TypeError("ReadableByteStreamController constructor cannot be used directly")}return le(ee,[{key:"close",value:function(){if(me(this)===!1)throw _("close");if(this._closeRequested===!0)throw new TypeError("The stream has already been closed; do not close it again!");var pe=this._controlledReadableByteStream._state;if(pe!=="readable")throw new TypeError("The stream (in "+pe+" state) is not in the readable state and cannot be closed");U(this)}},{key:"enqueue",value:function(pe){if(me(this)===!1)throw _("enqueue");if(this._closeRequested===!0)throw new TypeError("stream is closed or draining");var Ve=this._controlledReadableByteStream._state;if(Ve!=="readable")throw new TypeError("The stream (in "+Ve+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(pe))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");if(It(pe.buffer)===!0)throw new TypeError("Cannot enqueue a view onto a detached ArrayBuffer");E(this,pe)}},{key:"error",value:function(pe){if(me(this)===!1)throw _("error");var Ve=this._controlledReadableByteStream;if(Ve._state!=="readable")throw new TypeError("The stream is "+Ve._state+" and so cannot be errored");R(this,pe)}},{key:sn,value:function(pe){return this._pendingPullIntos.length>0&&(this._pendingPullIntos[0].bytesFilled=0),Ji(this),this._cancelAlgorithm(pe)}},{key:Ss,value:function(){var pe=this._controlledReadableByteStream;if(this._queueTotalSize>0){var Ve=this._queue.shift();this._queueTotalSize-=Ve.byteLength,G(this);var ze=void 0;try{ze=new Uint8Array(Ve.buffer,Ve.byteOffset,Ve.byteLength)}catch(Mr){return Promise.reject(Mr)}return Promise.resolve(je(ze,!1))}var Ye=this._autoAllocateChunkSize;if(Ye!==void 0){var Et=void 0;try{Et=new ArrayBuffer(Ye)}catch(Mr){return Promise.reject(Mr)}var qt={buffer:Et,byteOffset:0,byteLength:Ye,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(qt)}var or=S(pe);return H(this),or}},{key:"byobRequest",get:function(){if(me(this)===!1)throw _("byobRequest");if(this._byobRequest===void 0&&this._pendingPullIntos.length>0){var pe=this._pendingPullIntos[0],Ve=new Uint8Array(pe.buffer,pe.byteOffset+pe.bytesFilled,pe.byteLength-pe.bytesFilled),ze=Object.create(Ba.prototype);ke(ze,this,Ve),this._byobRequest=ze}return this._byobRequest}},{key:"desiredSize",get:function(){if(me(this)===!1)throw _("desiredSize");return K(this)}}]),ee}()},{"./helpers.js":10,"./queue-with-sizes.js":11,"./utils.js":14,"./writable-stream.js":15,"better-assert":16}],13:[function(r,n,a){function s(L,H){if(!(L instanceof H))throw new TypeError("Cannot call a class as a function")}function o(L,H,A){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return 1},j=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,q=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){return 1},$=Object.create(ve.prototype),G=void 0;u($,new Promise(function(J){G=J}),m,v,j,q),p($,Object.create(me.prototype),H,A);var Y=L();return G(Y),$}function u(L,H,A,m,v,j){function q(){return H}L._writable=Ie(q,function(G){return I(L,G)},function(){return T(L)},function(){return O(L)},A,m),L._readable=ne(q,function(){return x(L)},function(G){return d(L,G),Promise.resolve()},v,j),L._backpressure=void 0,L._backpressureChangePromise=void 0,L._backpressureChangePromise_resolve=void 0,h(L,!0),L._transformStreamController=void 0}function c(L){return!!M(L)&&!!Object.prototype.hasOwnProperty.call(L,"_transformStreamController")}function l(L,H){N("TransformStreamError()"),L._readable._state==="readable"&&we(L._readable._readableStreamController,H),d(L,H)}function d(L,H){he(L._writable._writableStreamController,H),L._backpressure===!0&&h(L,!1)}function h(L,H){N("TransformStreamSetBackpressure() [backpressure = "+H+"]"),L._backpressureChangePromise!==void 0&&L._backpressureChangePromise_resolve(),L._backpressureChangePromise=new Promise(function(A){L._backpressureChangePromise_resolve=A}),L._backpressure=H}function f(L){return!!M(L)&&!!Object.prototype.hasOwnProperty.call(L,"_controlledTransformStream")}function p(L,H,A,m){H._controlledTransformStream=L,L._transformStreamController=H,H._transformAlgorithm=A,H._flushAlgorithm=m}function b(L,H){var A=Object.create(me.prototype),m=function($){try{return y(A,$),Promise.resolve()}catch(G){return Promise.reject(G)}},v=H.transform;if(v!==void 0){if(typeof v!="function")throw new TypeError("transform is not a method");m=function($){return z(v,H,[$,A]).catch(function(G){throw l(L,G),G})}}var j=W(H,"flush",0,[A]);p(L,A,m,j)}function y(L,H){N("TransformStreamDefaultControllerEnqueue()");var A=L._controlledTransformStream,m=A._readable._readableStreamController;if(ae(m)===!1)throw new TypeError("Readable side is not in a state that permits enqueue");try{_e(m,H)}catch(v){throw d(A,v),A._readable._storedError}oe(m)!==A._backpressure&&h(A,!0)}function S(L,H){l(L._controlledTransformStream,H)}function w(L){N("TransformStreamDefaultControllerTerminate()");var H=L._controlledTransformStream,A=H._readable._readableStreamController;ae(A)===!0&&fe(A),d(H,new TypeError("TransformStream terminated"))}function I(L,H){N("TransformStreamDefaultSinkWriteAlgorithm()");var A=L._transformStreamController;return L._backpressure===!0?L._backpressureChangePromise.then(function(){var m=L._writable;if(m._state==="erroring")throw m._storedError;return A._transformAlgorithm(H)}):A._transformAlgorithm(H)}function O(L){return l(L,new TypeError("Writable side aborted")),Promise.resolve()}function T(L){N("TransformStreamDefaultSinkCloseAlgorithm()");var H=L._readable;return L._transformStreamController._flushAlgorithm().then(function(){if(H._state==="errored")throw H._storedError;var A=H._readableStreamController;ae(A)===!0&&fe(A)}).catch(function(A){throw l(L,A),H._storedError})}function x(L){return N("TransformStreamDefaultSourcePullAlgorithm()"),h(L,!1),L._backpressureChangePromise}function P(L){return new TypeError("TransformStreamDefaultController.prototype."+L+" can only be used on a TransformStreamDefaultController")}function B(L){return new TypeError("TransformStream.prototype."+L+" can only be used on a TransformStream")}var Q=function(){function L(H,A){for(var m=0;m<A.length;m++){var v=A[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(H,v.key,v)}}return function(H,A,m){return A&&L(H.prototype,A),m&&L(H,m),H}}();r("better-assert");var N=r("debug")("streams:transform-stream:verbose"),D=r("./helpers.js"),F=D.InvokeOrNoop,W=D.CreateAlgorithmFromUnderlyingMethod,z=D.PromiseCall,M=D.typeIsObject,C=D.ValidateAndNormalizeHighWaterMark;D.IsNonNegativeNumber;var V=D.MakeSizeAlgorithmFromSizeFunction,ie=r("./readable-stream.js"),ne=ie.CreateReadableStream,fe=ie.ReadableStreamDefaultControllerClose,_e=ie.ReadableStreamDefaultControllerEnqueue,we=ie.ReadableStreamDefaultControllerError,Ce=ie.ReadableStreamDefaultControllerGetDesiredSize,oe=ie.ReadableStreamDefaultControllerHasBackpressure,ae=ie.ReadableStreamDefaultControllerCanCloseOrEnqueue,Ae=r("./writable-stream.js"),Ie=Ae.CreateWritableStream,he=Ae.WritableStreamDefaultControllerErrorIfNeeded,ve=function(){function L(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(s(this,L),H.readableType!==void 0)throw new RangeError("Invalid readable type specified");if(H.writableType!==void 0)throw new RangeError("Invalid writable type specified");var v=A.size,j=V(v),q=A.highWaterMark;q===void 0&&(q=1),q=C(q);var $=m.size,G=V($),Y=m.highWaterMark;Y===void 0&&(Y=0),Y=C(Y);var J=void 0;u(this,new Promise(function(de){J=de}),q,j,Y,G),b(this,H);var re=F(H,"start",[this._transformStreamController]);J(re)}return Q(L,[{key:"readable",get:function(){if(c(this)===!1)throw B("readable");return this._readable}},{key:"writable",get:function(){if(c(this)===!1)throw B("writable");return this._writable}}]),L}(),me=function(){function L(){throw s(this,L),new TypeError("TransformStreamDefaultController instances cannot be created directly")}return Q(L,[{key:"enqueue",value:function(A){if(f(this)===!1)throw P("enqueue");y(this,A)}},{key:"error",value:function(A){if(f(this)===!1)throw P("error");S(this,A)}},{key:"terminate",value:function(){if(f(this)===!1)throw P("terminate");w(this)}},{key:"desiredSize",get:function(){if(f(this)===!1)throw P("desiredSize");var A=this._controlledTransformStream._readable._readableStreamController;return Ce(A)}}]),L}();n.exports={CreateTransformStream:o,TransformStream:ve}},{"./helpers.js":10,"./readable-stream.js":12,"./writable-stream.js":15,"better-assert":16,debug:18}],14:[function(r,n,a){var s=r("better-assert");a.rethrowAssertionErrorRejection=function(o){o&&o.constructor===s.AssertionError&&setTimeout(function(){throw o},0)}},{"better-assert":16}],15:[function(r,n,a){function s(_,k){if(!(_ instanceof k))throw new TypeError("Cannot call a class as a function")}function o(_){return new an(_)}function u(_,k,le,Te){var Se=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,He=arguments.length>5&&arguments[5]!==void 0?arguments[5]:function(){return 1},je=Object.create(wr.prototype);return c(je),_e(je,Object.create(te.prototype),_,k,le,Te,Se,He),je}function c(_){_._state="writable",_._storedError=void 0,_._writer=void 0,_._writableStreamController=void 0,_._writeRequests=[],_._inFlightWriteRequest=void 0,_._closeRequest=void 0,_._inFlightCloseRequest=void 0,_._pendingAbortRequest=void 0,_._backpressure=!1}function l(_){return!!ke(_)&&!!Object.prototype.hasOwnProperty.call(_,"_writableStreamController")}function d(_){return _._writer!==void 0}function h(_,k){var le=_._state;if(le==="closed")return Promise.resolve(void 0);if(le==="errored")return Promise.reject(_._storedError);var Te=new TypeError("Requested to abort");if(_._pendingAbortRequest!==void 0)return Promise.reject(Te);var Se=!1;le==="erroring"&&(Se=!0,k=void 0);var He=new Promise(function(je,Fe){_._pendingAbortRequest={_resolve:je,_reject:Fe,_reason:k,_wasAlreadyErroring:Se}});return Se===!1&&b(_,Te),He}function f(_){return new Promise(function(k,le){var Te={_resolve:k,_reject:le};_._writeRequests.push(Te)})}function p(_,k){R("WritableStreamDealWithRejection(stream, %o)",k),_._state!=="writable"?y(_):b(_,k)}function b(_,k){R("WritableStreamStartErroring(stream, %o)",k);var le=_._writableStreamController;_._state="erroring",_._storedError=k;var Te=_._writer;Te!==void 0&&C(Te,k),x(_)===!1&&le._started===!0&&y(_)}function y(_){R("WritableStreamFinishErroring()"),_._state="errored",_._writableStreamController[vr]();var k=_._storedError,le=!0,Te=!1,Se=void 0;try{for(var He,je=_._writeRequests[Symbol.iterator]();!(le=(He=je.next()).done);le=!0)He.value._reject(k)}catch(Je){Te=!0,Se=Je}finally{try{!le&&je.return&&je.return()}finally{if(Te)throw Se}}if(_._writeRequests=[],_._pendingAbortRequest!==void 0){var Fe=_._pendingAbortRequest;if(_._pendingAbortRequest=void 0,Fe._wasAlreadyErroring===!0)return Fe._reject(k),void Q(_);_._writableStreamController[Pn](Fe._reason).then(function(){Fe._resolve(),Q(_)},function(Je){Fe._reject(Je),Q(_)})}else Q(_)}function S(_){_._inFlightWriteRequest._resolve(void 0),_._inFlightWriteRequest=void 0}function w(_,k){_._inFlightWriteRequest._reject(k),_._inFlightWriteRequest=void 0,p(_,k)}function I(_){_._inFlightCloseRequest._resolve(void 0),_._inFlightCloseRequest=void 0,_._state==="erroring"&&(_._storedError=void 0,_._pendingAbortRequest!==void 0&&(_._pendingAbortRequest._resolve(),_._pendingAbortRequest=void 0)),_._state="closed";var k=_._writer;k!==void 0&&J(k)}function O(_,k){_._inFlightCloseRequest._reject(k),_._inFlightCloseRequest=void 0,_._pendingAbortRequest!==void 0&&(_._pendingAbortRequest._reject(k),_._pendingAbortRequest=void 0),p(_,k)}function T(_){return _._closeRequest!==void 0||_._inFlightCloseRequest!==void 0}function x(_){return _._inFlightWriteRequest===void 0&&_._inFlightCloseRequest===void 0?(R("WritableStreamHasOperationMarkedInFlight() is false"),!1):(R("WritableStreamHasOperationMarkedInFlight() is true"),!0)}function P(_){_._inFlightCloseRequest=_._closeRequest,_._closeRequest=void 0}function B(_){_._inFlightWriteRequest=_._writeRequests.shift()}function Q(_){R("WritableStreamRejectCloseAndClosedPromiseIfNeeded()"),_._closeRequest!==void 0&&(_._closeRequest._reject(_._storedError),_._closeRequest=void 0);var k=_._writer;k!==void 0&&(G(k,_._storedError),k._closedPromise.catch(function(){}))}function N(_,k){var le=_._writer;le!==void 0&&k!==_._backpressure&&(k===!0?xe(le):U(le)),_._backpressure=k}function D(_){return!!ke(_)&&!!Object.prototype.hasOwnProperty.call(_,"_ownerWritableStream")}function F(_,k){return h(_._ownerWritableStream,k)}function W(_){var k=_._ownerWritableStream,le=k._state;if(le==="closed"||le==="errored")return Promise.reject(new TypeError("The stream (in "+le+" state) is not in the writable state and cannot be closed"));var Te=new Promise(function(Se,He){var je={_resolve:Se,_reject:He};k._closeRequest=je});return k._backpressure===!0&&le==="writable"&&U(_),Ce(k._writableStreamController),Te}function z(_){var k=_._ownerWritableStream,le=k._state;return T(k)===!0||le==="closed"?Promise.resolve():le==="errored"?Promise.reject(k._storedError):W(_)}function M(_,k){_._closedPromiseState==="pending"?G(_,k):Y(_,k),_._closedPromise.catch(function(){})}function C(_,k){R("WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, %o)",k),_._readyPromiseState==="pending"?Ee(_,k):Pe(_,k),_._readyPromise.catch(function(){})}function V(_){var k=_._ownerWritableStream,le=k._state;return le==="errored"||le==="erroring"?null:le==="closed"?0:ae(k._writableStreamController)}function ie(_){var k=_._ownerWritableStream,le=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");C(_,le),M(_,le),k._writer=void 0,_._ownerWritableStream=void 0}function ne(_,k){var le=_._ownerWritableStream,Te=le._writableStreamController,Se=oe(Te,k);if(le!==_._ownerWritableStream)return Promise.reject(v("write to"));var He=le._state;if(He==="errored")return Promise.reject(le._storedError);if(T(le)===!0||He==="closed")return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if(He==="erroring")return Promise.reject(le._storedError);var je=f(le);return Ae(Te,k,Se),je}function fe(_){return!!ke(_)&&!!Object.prototype.hasOwnProperty.call(_,"_controlledWritableStream")}function _e(_,k,le,Te,Se,He,je,Fe){k._controlledWritableStream=_,_._writableStreamController=k,k._queue=void 0,k._queueTotalSize=void 0,br(k),k._started=!1,k._strategySizeAlgorithm=Fe,k._strategyHWM=je,k._writeAlgorithm=Te,k._closeAlgorithm=Se,k._abortAlgorithm=He;var Je=L(k);N(_,Je);var It=le();Promise.resolve(It).then(function(){k._started=!0,Ie(k)},function(it){k._started=!0,p(_,it)}).catch(Ke)}function we(_,k,le,Te){var Se=Object.create(te.prototype),He=ce(k,"write",1,[Se]),je=ce(k,"close",0,[]),Fe=ce(k,"abort",1,[]);_e(_,Se,function(){return ye(k,"start",[Se])},He,je,Fe,le,Te)}function Ce(_){Vr(_,"close",0),Ie(_)}function oe(_,k){try{return _._strategySizeAlgorithm(k)}catch(le){return he(_,le),1}}function ae(_){return _._strategyHWM-_._queueTotalSize}function Ae(_,k,le){var Te={chunk:k};try{Vr(_,Te,le)}catch(He){return void he(_,He)}var Se=_._controlledWritableStream;T(Se)===!1&&Se._state==="writable"&&N(Se,L(_)),Ie(_)}function Ie(_){R("WritableStreamDefaultControllerAdvanceQueueIfNeeded()");var k=_._controlledWritableStream;if(_._started!==!1&&k._inFlightWriteRequest===void 0){var le=k._state;if(le!=="closed"&&le!=="errored")if(le!=="erroring"){if(_._queue.length!==0){var Te=nn(_);Te==="close"?ve(_):me(_,Te.chunk)}}else y(k)}}function he(_,k){_._controlledWritableStream._state==="writable"&&H(_,k)}function ve(_){var k=_._controlledWritableStream;P(k),rn(_),_._closeAlgorithm().then(function(){I(k)},function(le){O(k,le)}).catch(Ke)}function me(_,k){var le=_._controlledWritableStream;B(le),_._writeAlgorithm(k).then(function(){S(le);var Te=le._state;if(rn(_),T(le)===!1&&Te==="writable"){var Se=L(_);N(le,Se)}Ie(_)},function(Te){w(le,Te)}).catch(Ke)}function L(_){return ae(_)<=0}function H(_,k){b(_._controlledWritableStream,k)}function A(_){return new TypeError("WritableStream.prototype."+_+" can only be used on a WritableStream")}function m(_){return new TypeError("WritableStreamDefaultWriter.prototype."+_+" can only be used on a WritableStreamDefaultWriter")}function v(_){return new TypeError("Cannot "+_+" a stream using a released writer")}function j(_){_._closedPromise=new Promise(function(k,le){_._closedPromise_resolve=k,_._closedPromise_reject=le,_._closedPromiseState="pending"})}function q(_,k){_._closedPromise=Promise.reject(k),_._closedPromise_resolve=void 0,_._closedPromise_reject=void 0,_._closedPromiseState="rejected"}function $(_){_._closedPromise=Promise.resolve(void 0),_._closedPromise_resolve=void 0,_._closedPromise_reject=void 0,_._closedPromiseState="resolved"}function G(_,k){_._closedPromise_reject(k),_._closedPromise_resolve=void 0,_._closedPromise_reject=void 0,_._closedPromiseState="rejected"}function Y(_,k){_._closedPromise=Promise.reject(k),_._closedPromiseState="rejected"}function J(_){_._closedPromise_resolve(void 0),_._closedPromise_resolve=void 0,_._closedPromise_reject=void 0,_._closedPromiseState="resolved"}function re(_){R("defaultWriterReadyPromiseInitialize()"),_._readyPromise=new Promise(function(k,le){_._readyPromise_resolve=k,_._readyPromise_reject=le}),_._readyPromiseState="pending"}function de(_,k){R("defaultWriterReadyPromiseInitializeAsRejected(writer, %o)",k),_._readyPromise=Promise.reject(k),_._readyPromise_resolve=void 0,_._readyPromise_reject=void 0,_._readyPromiseState="rejected"}function be(_){R("defaultWriterReadyPromiseInitializeAsResolved()"),_._readyPromise=Promise.resolve(void 0),_._readyPromise_resolve=void 0,_._readyPromise_reject=void 0,_._readyPromiseState="fulfilled"}function Ee(_,k){R("defaultWriterReadyPromiseReject(writer, %o)",k),_._readyPromise_reject(k),_._readyPromise_resolve=void 0,_._readyPromise_reject=void 0,_._readyPromiseState="rejected"}function xe(_){R("defaultWriterReadyPromiseReset()"),_._readyPromise=new Promise(function(k,le){_._readyPromise_resolve=k,_._readyPromise_reject=le}),_._readyPromiseState="pending"}function Pe(_,k){R("defaultWriterReadyPromiseResetToRejected(writer, %o)",k),_._readyPromise=Promise.reject(k),_._readyPromiseState="rejected"}function U(_){R("defaultWriterReadyPromiseResolve()"),_._readyPromise_resolve(void 0),_._readyPromise_resolve=void 0,_._readyPromise_reject=void 0,_._readyPromiseState="fulfilled"}var E=function(){function _(k,le){for(var Te=0;Te<le.length;Te++){var Se=le[Te];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(k,Se.key,Se)}}return function(k,le,Te){return le&&_(k.prototype,le),Te&&_(k,Te),k}}();r("better-assert");var R=r("debug")("streams:writable-stream:verbose"),K=r("./helpers.js"),ce=K.CreateAlgorithmFromUnderlyingMethod,ye=K.InvokeOrNoop,ge=K.ValidateAndNormalizeHighWaterMark;K.IsNonNegativeNumber;var $e=K.MakeSizeAlgorithmFromSizeFunction,ke=K.typeIsObject,Xe=r("./utils.js"),Ke=Xe.rethrowAssertionErrorRejection,ht=r("./queue-with-sizes.js"),rn=ht.DequeueValue,Vr=ht.EnqueueValueWithSize,nn=ht.PeekQueueValue,br=ht.ResetQueue,Pn=Symbol("[[AbortSteps]]"),vr=Symbol("[[ErrorSteps]]"),wr=function(){function _(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Te=le.size,Se=le.highWaterMark,He=Se===void 0?1:Se;if(s(this,_),c(this),k.type!==void 0)throw new RangeError("Invalid type is specified");var je=$e(Te);we(this,k,He=ge(He),je)}return E(_,[{key:"abort",value:function(le){return l(this)===!1?Promise.reject(A("abort")):d(this)===!0?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):h(this,le)}},{key:"getWriter",value:function(){if(l(this)===!1)throw A("getWriter");return o(this)}},{key:"locked",get:function(){if(l(this)===!1)throw A("locked");return d(this)}}]),_}();n.exports={AcquireWritableStreamDefaultWriter:o,CreateWritableStream:u,IsWritableStream:l,IsWritableStreamLocked:d,WritableStream:wr,WritableStreamAbort:h,WritableStreamDefaultControllerErrorIfNeeded:he,WritableStreamDefaultWriterCloseWithErrorPropagation:z,WritableStreamDefaultWriterRelease:ie,WritableStreamDefaultWriterWrite:ne,WritableStreamCloseQueuedOrInFlight:T};var an=function(){function _(k){if(s(this,_),l(k)===!1)throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(d(k)===!0)throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=k,k._writer=this;var le=k._state;if(le==="writable")T(k)===!1&&k._backpressure===!0?re(this):be(this),j(this);else if(le==="erroring")de(this,k._storedError),this._readyPromise.catch(function(){}),j(this);else if(le==="closed")be(this),$(this);else{var Te=k._storedError;de(this,Te),this._readyPromise.catch(function(){}),q(this,Te),this._closedPromise.catch(function(){})}}return E(_,[{key:"abort",value:function(le){return D(this)===!1?Promise.reject(m("abort")):this._ownerWritableStream===void 0?Promise.reject(v("abort")):F(this,le)}},{key:"close",value:function(){if(D(this)===!1)return Promise.reject(m("close"));var le=this._ownerWritableStream;return le===void 0?Promise.reject(v("close")):T(le)===!0?Promise.reject(new TypeError("cannot close an already-closing stream")):W(this)}},{key:"releaseLock",value:function(){if(D(this)===!1)throw m("releaseLock");this._ownerWritableStream!==void 0&&ie(this)}},{key:"write",value:function(le){return D(this)===!1?Promise.reject(m("write")):this._ownerWritableStream===void 0?Promise.reject(v("write to")):ne(this,le)}},{key:"closed",get:function(){return D(this)===!1?Promise.reject(m("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(D(this)===!1)throw m("desiredSize");if(this._ownerWritableStream===void 0)throw v("desiredSize");return V(this)}},{key:"ready",get:function(){return D(this)===!1?Promise.reject(m("ready")):this._readyPromise}}]),_}(),te=function(){function _(){throw s(this,_),new TypeError("WritableStreamDefaultController cannot be constructed explicitly")}return E(_,[{key:"error",value:function(le){if(fe(this)===!1)throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");this._controlledWritableStream._state==="writable"&&H(this,le)}},{key:Pn,value:function(le){return this._abortAlgorithm(le)}},{key:vr,value:function(){br(this)}}]),_}()},{"./helpers.js":10,"./queue-with-sizes.js":11,"./utils.js":14,"better-assert":16,debug:18}],16:[function(r,n,a){(function(s){function o(d){if(!d){var h=c(),f=h[1],p=f.getFileName(),b=f.getLineNumber(),y=(y=l.readFileSync(p,"utf8")).split(`
`)[b-1].match(/assert\((.*)\)/)[1];throw new u({message:y,stackStartFunction:h[0].getFunction()})}}var u=r("assert").AssertionError,c=r("callsite"),l=r("fs");n.exports={}.NO_ASSERT?function(){}:o}).call(this,r("_process"))},{_process:4,assert:2,callsite:17,fs:3}],17:[function(r,n,a){n.exports=function(){var s=Error.prepareStackTrace;Error.prepareStackTrace=function(c,l){return l};var o=new Error;Error.captureStackTrace(o,arguments.callee);var u=o.stack;return Error.prepareStackTrace=s,u}},{}],18:[function(r,n,a){(function(s){function o(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function u(f){var p=this.useColors;if(f[0]=(p?"%c":"")+this.namespace+(p?" %c":" ")+f[0]+(p?"%c ":" ")+"+"+a.humanize(this.diff),p){var b="color: "+this.color;f.splice(1,0,b,"color: inherit");var y=0,S=0;f[0].replace(/%[a-zA-Z%]/g,function(w){w!=="%%"&&(y++,w==="%c"&&(S=y))}),f.splice(S,0,b)}}function c(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function l(f){try{f==null?a.storage.removeItem("debug"):a.storage.debug=f}catch{}}function d(){var f;try{f=a.storage.debug}catch{}return!f&&typeof s<"u"&&"env"in s&&(f={}.DEBUG),f}function h(){try{return window.localStorage}catch{}}a=n.exports=r("./debug"),a.log=c,a.formatArgs=u,a.save=l,a.load=d,a.useColors=o,a.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:h(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],a.formatters.j=function(f){try{return JSON.stringify(f)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}},a.enable(d())}).call(this,r("_process"))},{"./debug":19,_process:4}],19:[function(r,n,a){function s(f){var p,b=0;for(p in f)b=(b<<5)-b+f.charCodeAt(p),b|=0;return a.colors[Math.abs(b)%a.colors.length]}function o(f){function p(){if(p.enabled){var y=p,S=+new Date,w=S-(b||S);y.diff=w,y.prev=b,y.curr=S,b=S;for(var I=new Array(arguments.length),O=0;O<I.length;O++)I[O]=arguments[O];I[0]=a.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");var T=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,function(x,P){if(x==="%%")return x;T++;var B=a.formatters[P];if(typeof B=="function"){var Q=I[T];x=B.call(y,Q),I.splice(T,1),T--}return x}),a.formatArgs.call(y,I),(p.log||a.log||console.log.bind(console)).apply(y,I)}}var b;return p.namespace=f,p.enabled=a.enabled(f),p.useColors=a.useColors(),p.color=s(f),p.destroy=u,typeof a.init=="function"&&a.init(p),a.instances.push(p),p}function u(){var f=a.instances.indexOf(this);return f!==-1&&(a.instances.splice(f,1),!0)}function c(f){a.save(f),a.names=[],a.skips=[];var p,b=(typeof f=="string"?f:"").split(/[\s,]+/),y=b.length;for(p=0;p<y;p++)b[p]&&((f=b[p].replace(/\*/g,".*?"))[0]==="-"?a.skips.push(new RegExp("^"+f.substr(1)+"$")):a.names.push(new RegExp("^"+f+"$")));for(p=0;p<a.instances.length;p++){var S=a.instances[p];S.enabled=a.enabled(S.namespace)}}function l(){a.enable("")}function d(f){if(f[f.length-1]==="*")return!0;var p,b;for(p=0,b=a.skips.length;p<b;p++)if(a.skips[p].test(f))return!1;for(p=0,b=a.names.length;p<b;p++)if(a.names[p].test(f))return!0;return!1}function h(f){return f instanceof Error?f.stack||f.message:f}a=n.exports=o.debug=o.default=o,a.coerce=h,a.disable=l,a.enable=c,a.enabled=d,a.humanize=r("ms"),a.instances=[],a.names=[],a.skips=[],a.formatters={}},{ms:20}],20:[function(r,n,a){function s(b){if(!((b=String(b)).length>100)){var y=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(b);if(y){var S=parseFloat(y[1]);switch((y[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return S*p;case"days":case"day":case"d":return S*f;case"hours":case"hour":case"hrs":case"hr":case"h":return S*h;case"minutes":case"minute":case"mins":case"min":case"m":return S*d;case"seconds":case"second":case"secs":case"sec":case"s":return S*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return S;default:return}}}}function o(b){return b>=f?Math.round(b/f)+"d":b>=h?Math.round(b/h)+"h":b>=d?Math.round(b/d)+"m":b>=l?Math.round(b/l)+"s":b+"ms"}function u(b){return c(b,f,"day")||c(b,h,"hour")||c(b,d,"minute")||c(b,l,"second")||b+" ms"}function c(b,y,S){if(!(b<y))return b<1.5*y?Math.floor(b/y)+" "+S:Math.ceil(b/y)+" "+S+"s"}var l=1e3,d=60*l,h=60*d,f=24*h,p=365.25*f;n.exports=function(b,y){y=y||{};var S=typeof b;if(S==="string"&&b.length>0)return s(b);if(S==="number"&&isNaN(b)===!1)return y.long?u(b):o(b);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b))}},{}]},{},[1])(1)})}(pT)),pT.exports}const Gs=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Gs.writable=t=>Gs(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Gs.readable=t=>Gs(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Gs.duplex=t=>Gs.writable(t)&&Gs.readable(t);Gs.transform=t=>Gs.duplex(t)&&typeof t._transform=="function";var JF=Gs,YF={exports:{}};(function(t){t.exports=e,t.exports.WEBSTREAM_SUPPORT=typeof ReadableStream<"u";function e(r){if(!t.exports.WEBSTREAM_SUPPORT)throw new Error("No web ReadableStream support");var n=!1,a={};function s(c){a.data=d,a.end=d,a.end=h,a.close=h,a.error=h;for(var l in a)r.on(l,a[l]);r.pause();function d(f){n||(c.enqueue(f),r.pause())}function h(f){if(!n){n=!0;for(var p in a)r.removeListener(p,a[p]);f?c.error(f):c.close()}}}function o(){n||r.resume()}function u(){n=!0;for(var c in a)r.removeListener(c,a[c]);r.push(null),r.pause(),r.destroy?r.destroy():r.close&&r.close()}return new ReadableStream({start:s,pull:o,cancel:u})}})(YF);var Wne=YF.exports;Object.defineProperty(G_,"__esModule",{value:!0});G_.ActorHttp=void 0;const Xne=et,Kne=B0;globalThis.ReadableStream||(globalThis.ReadableStream=zne().ReadableStream);const Jne=JF,Yne=Wne;class Zne extends Xne.Actor{constructor(e){super(e)}static toNodeReadable(e){return Jne(e)||e===null?e:new Kne.ReadableWebToNodeStream(e)}static toWebReadableStream(e){return Yne(e)}static headersToHash(e){const r={};return e.forEach((n,a)=>{r[a]=n}),r}}G_.ActorHttp=Zne;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(G_,t)})(ms);(function(t){(function(e){var r=typeof globalThis<"u"&&globalThis||typeof t<"u"&&t||typeof r<"u"&&r,n={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function a(D){return D&&DataView.prototype.isPrototypeOf(D)}if(n.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(D){return D&&s.indexOf(Object.prototype.toString.call(D))>-1};function u(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(D)||D==="")throw new TypeError('Invalid character in header field name: "'+D+'"');return D.toLowerCase()}function c(D){return typeof D!="string"&&(D=String(D)),D}function l(D){var F={next:function(){var W=D.shift();return{done:W===void 0,value:W}}};return n.iterable&&(F[Symbol.iterator]=function(){return F}),F}function d(D){this.map={},D instanceof d?D.forEach(function(F,W){this.append(W,F)},this):Array.isArray(D)?D.forEach(function(F){this.append(F[0],F[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(F){this.append(F,D[F])},this)}d.prototype.append=function(D,F){D=u(D),F=c(F);var W=this.map[D];this.map[D]=W?W+", "+F:F},d.prototype.delete=function(D){delete this.map[u(D)]},d.prototype.get=function(D){return D=u(D),this.has(D)?this.map[D]:null},d.prototype.has=function(D){return this.map.hasOwnProperty(u(D))},d.prototype.set=function(D,F){this.map[u(D)]=c(F)},d.prototype.forEach=function(D,F){for(var W in this.map)this.map.hasOwnProperty(W)&&D.call(F,this.map[W],W,this)},d.prototype.keys=function(){var D=[];return this.forEach(function(F,W){D.push(W)}),l(D)},d.prototype.values=function(){var D=[];return this.forEach(function(F){D.push(F)}),l(D)},d.prototype.entries=function(){var D=[];return this.forEach(function(F,W){D.push([W,F])}),l(D)},n.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function h(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function f(D){return new Promise(function(F,W){D.onload=function(){F(D.result)},D.onerror=function(){W(D.error)}})}function p(D){var F=new FileReader,W=f(F);return F.readAsArrayBuffer(D),W}function b(D){var F=new FileReader,W=f(F);return F.readAsText(D),W}function y(D){for(var F=new Uint8Array(D),W=new Array(F.length),z=0;z<F.length;z++)W[z]=String.fromCharCode(F[z]);return W.join("")}function S(D){if(D.slice)return D.slice(0);var F=new Uint8Array(D.byteLength);return F.set(new Uint8Array(D)),F.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(D){this.bodyUsed=this.bodyUsed,this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:n.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:n.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():n.arrayBuffer&&n.blob&&a(D)?(this._bodyArrayBuffer=S(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||o(D))?this._bodyArrayBuffer=S(D):this._bodyText=D=Object.prototype.toString.call(D):this._bodyText="",this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var D=h(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var D=h(this);return D||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(p)}),this.text=function(){var D=h(this);if(D)return D;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function O(D){var F=D.toUpperCase();return I.indexOf(F)>-1?F:D}function T(D,F){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');F=F||{};var W=F.body;if(D instanceof T){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,F.headers||(this.headers=new d(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!W&&D._bodyInit!=null&&(W=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=F.credentials||this.credentials||"same-origin",(F.headers||!this.headers)&&(this.headers=new d(F.headers)),this.method=O(F.method||this.method||"GET"),this.mode=F.mode||this.mode||null,this.signal=F.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&W)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(W),(this.method==="GET"||this.method==="HEAD")&&(F.cache==="no-store"||F.cache==="no-cache")){var z=/([?&])_=[^&]*/;if(z.test(this.url))this.url=this.url.replace(z,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function x(D){var F=new FormData;return D.trim().split("&").forEach(function(W){if(W){var z=W.split("="),M=z.shift().replace(/\+/g," "),C=z.join("=").replace(/\+/g," ");F.append(decodeURIComponent(M),decodeURIComponent(C))}}),F}function P(D){var F=new d,W=D.replace(/\r?\n[\t ]+/g," ");return W.split("\r").map(function(z){return z.indexOf(`
`)===0?z.substr(1,z.length):z}).forEach(function(z){var M=z.split(":"),C=M.shift().trim();if(C){var V=M.join(":").trim();F.append(C,V)}}),F}w.call(T.prototype);function B(D,F){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');F||(F={}),this.type="default",this.status=F.status===void 0?200:F.status,this.ok=this.status>=200&&this.status<300,this.statusText=F.statusText===void 0?"":""+F.statusText,this.headers=new d(F.headers),this.url=F.url||"",this._initBody(D)}w.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},B.error=function(){var D=new B(null,{status:0,statusText:""});return D.type="error",D};var Q=[301,302,303,307,308];B.redirect=function(D,F){if(Q.indexOf(F)===-1)throw new RangeError("Invalid status code");return new B(null,{status:F,headers:{location:D}})},e.DOMException=r.DOMException;try{new e.DOMException}catch{e.DOMException=function(F,W){this.message=F,this.name=W;var z=Error(F);this.stack=z.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function N(D,F){return new Promise(function(W,z){var M=new T(D,F);if(M.signal&&M.signal.aborted)return z(new e.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function V(){C.abort()}C.onload=function(){var ne={status:C.status,statusText:C.statusText,headers:P(C.getAllResponseHeaders()||"")};ne.url="responseURL"in C?C.responseURL:ne.headers.get("X-Request-URL");var fe="response"in C?C.response:C.responseText;setTimeout(function(){W(new B(fe,ne))},0)},C.onerror=function(){setTimeout(function(){z(new TypeError("Network request failed"))},0)},C.ontimeout=function(){setTimeout(function(){z(new TypeError("Network request failed"))},0)},C.onabort=function(){setTimeout(function(){z(new e.DOMException("Aborted","AbortError"))},0)};function ie(ne){try{return ne===""&&r.location.href?r.location.href:ne}catch{return ne}}C.open(M.method,ie(M.url),!0),M.credentials==="include"?C.withCredentials=!0:M.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&(n.blob?C.responseType="blob":n.arrayBuffer&&M.headers.get("Content-Type")&&M.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(C.responseType="arraybuffer")),F&&typeof F.headers=="object"&&!(F.headers instanceof d)?Object.getOwnPropertyNames(F.headers).forEach(function(ne){C.setRequestHeader(ne,c(F.headers[ne]))}):M.headers.forEach(function(ne,fe){C.setRequestHeader(fe,ne)}),M.signal&&(M.signal.addEventListener("abort",V),C.onreadystatechange=function(){C.readyState===4&&M.signal.removeEventListener("abort",V)}),C.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return N.polyfill=!0,r.fetch||(r.fetch=N,r.Headers=d,r.Request=T,r.Response=B),e.Headers=d,e.Request=T,e.Response=B,e.fetch=N,e})({})})(typeof self<"u"?self:g);var z_={};Object.defineProperty(z_,"__esModule",{value:!0});z_.FetchInitPreprocessor=void 0;const eie=ms;class tie{async handle(e){if(e.headers){const r=new Headers(e.headers);r.has("user-agent")&&r.delete("user-agent"),e.headers=r}if(e!=null&&e.headers&&"append"in e.headers&&(e.headers=eie.ActorHttp.headersToHash(e.headers)),e.body&&typeof e.body!="string"&&"getReader"in e.body){const r=e.body.getReader(),n=[];for(;;){const{done:a,value:s}=await r.read();if(a)break;n.push(s)}e.body=n.join("")}return{keepalive:!e.body,...e}}async createAbortController(){return new AbortController}}z_.FetchInitPreprocessor=tie;Object.defineProperty(Q_,"__esModule",{value:!0});Q_.ActorHttpFetch=void 0;const yT=ms,To=Ht,rie=z_;class Wb extends yT.ActorHttp{constructor(e){super(e),this.userAgent=Wb.createUserAgent(),this.fetchInitPreprocessor=new rie.FetchInitPreprocessor(e.agentOptions)}static createUserAgent(){return`Comunica/actor-http-fetch (${typeof globalThis.navigator>"u"?`Node.js ${process.version}; ${process.platform}`:`Browser-${globalThis.navigator.userAgent}`})`}async test(e){return{time:Number.POSITIVE_INFINITY}}static async getResponse(e,r,n,a,s,o){var l;let u,c=a+1;for(;c-- >0;)try{const d=await e(r,n);if(o&&d.status>=500&&d.status<600)throw new Error(`Server replied with response code ${d.status}: ${d.statusText}`);return d}catch(d){if(u=d,(l=n.signal)!=null&&l.aborted)throw d;c>0&&await new Promise((h,f)=>{var p;setTimeout(h,s),(p=n.signal)==null||p.addEventListener("abort",()=>{f(new Error("Fetch aborted by timeout."))})})}throw a>0?new Error(`Number of fetch retries (${a}) exceeded. Last error: ${String(u)}`):u}async run(e){var c,l,d,h,f,p,b,y;const r=((c=e.init)==null?void 0:c.headers)??{};e.init=e.init??{},e.init.headers=new Headers(r),e.init.headers.has("user-agent")||e.init.headers.append("user-agent",this.userAgent);const n=e.context.get(To.KeysHttp.auth);n&&e.init.headers.append("Authorization",`Basic ${Buffer.from(n).toString("base64")}`),this.logInfo(e.context,`Requesting ${typeof e.input=="string"?e.input:e.input.url}`,()=>({headers:yT.ActorHttp.headersToHash(new Headers(e.init.headers)),method:e.init.method||"GET"})),(l=e.init)!=null&&l.headers&&"append"in e.init.headers&&e.context.has(To.KeysHttp.fetch)&&(e.init.headers=yT.ActorHttp.headersToHash(e.init.headers));let a={...e.init};e.context.get(To.KeysHttp.includeCredentials)&&(a.credentials="include");const s=(d=e.context)==null?void 0:d.get(To.KeysHttp.httpTimeout);let o,u;if(s!==void 0){const S=await this.fetchInitPreprocessor.createAbortController();a.signal=S.signal,u=()=>S.abort(),o=setTimeout(()=>u(),s)}try{a=await this.fetchInitPreprocessor.handle(a);const S=((h=e.context)==null?void 0:h.get(To.KeysHttp.httpRetryCount))??0,w=((f=e.context)==null?void 0:f.get(To.KeysHttp.httpRetryDelay))??0,I=((p=e.context)==null?void 0:p.get(To.KeysHttp.httpRetryOnServerError))??!1,O=(b=e.context)==null?void 0:b.get(To.KeysHttp.fetch),T=await Wb.getResponse(O||fetch,e.input,a,S,w,I);return o!==void 0&&((((y=e.context)==null?void 0:y.get(To.KeysHttp.httpBodyTimeout))||!1)&&T.body?(u=()=>{var P;return(P=T.body)==null?void 0:P.cancel(new Error(`HTTP timeout when reading the body of ${T.url}.
This error can be disabled by modifying the 'httpBodyTimeout' and/or 'httpTimeout' options.`))},T.body.on("close",()=>{clearTimeout(o)})):clearTimeout(o)),T.body&&!T.body.cancel&&(T.body.cancel=async x=>{T.body.destroy(x),o!==void 0&&clearTimeout(o)}),T}catch(S){throw o!==void 0&&clearTimeout(o),S}}}Q_.ActorHttpFetch=Wb;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Q_,t)})(KF);var ZF={},W_={},X_={},K_={},zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.ActorDereferenceBase=zs.isHardError=zs.emptyReadable=void 0;const nie=Ht,iie=et,aie=Kt;function eM(){const t=new aie.Readable;return t.push(null),t}zs.emptyReadable=eM;function tM(t){return!t.get(nie.KeysInitQuery.lenient)}zs.isHardError=tM;class sie extends iie.Actor{constructor(e){super(e)}async dereferenceErrorHandler(e,r,n){if(tM(e.context))throw r;return this.logError(e.context,r.message),{...n,data:eM()}}}zs.ActorDereferenceBase=sie;Object.defineProperty(K_,"__esModule",{value:!0});K_.ActorDereference=void 0;const oie=zs;class uie extends oie.ActorDereferenceBase{constructor(e){super(e)}async handleDereferenceErrors(e,r,n,a=0){return this.dereferenceErrorHandler(e,r,{url:e.url,exists:!1,headers:n,requestTime:a})}}K_.ActorDereference=uie;var cf={};Object.defineProperty(cf,"__esModule",{value:!0});cf.ActorDereferenceParse=cf.getMediaTypeFromExtension=void 0;const cie=Kt,fN=zs;function rM(t,e){const r=t.lastIndexOf(".");return r>=0&&(e==null?void 0:e[t.slice(r+1)])||""}cf.getMediaTypeFromExtension=rM;class lie extends fN.ActorDereferenceBase{constructor(e){super(e)}async test(e){return!0}handleDereferenceStreamErrors(e,r){return(0,fN.isHardError)(e.context)||(r.on("error",n=>{this.logError(e.context,n.message,()=>({url:e.url})),r.push(null)}),r=r.pipe(new cie.PassThrough({objectMode:!0}))),r}async run(e){var s,o;const{context:r}=e,n=await this.mediatorDereference.mediate({...e,mediaTypes:async()=>{var u,c;return(c=await((u=this.mediatorParseMediatypes)==null?void 0:u.mediate({context:r,mediaTypes:!0})))==null?void 0:c.mediaTypes}});let a;try{a=(await this.mediatorParse.mediate({context:r,handle:{context:r,...n,metadata:await this.getMetadata(n)},handleMediaType:n.mediaType||rM(n.url,this.mediaMappings)||e.mediaType})).handle,a.data=this.handleDereferenceStreamErrors(e,a.data)}catch(u){await((o=(s=n.data).close)==null?void 0:o.call(s)),a=await this.dereferenceErrorHandler(e,u,{})}return{...n,...a}}}cf.ActorDereferenceParse=lie;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(K_,t),r(cf,t),r(zs,t)})(X_);Object.defineProperty(W_,"__esModule",{value:!0});W_.ActorDereferenceFallback=void 0;const die=X_;class fie extends die.ActorDereference{constructor(e){super(e)}async test(e){return!0}async run(e){return this.handleDereferenceErrors(e,new Error(`Could not dereference '${e.url}'`))}}W_.ActorDereferenceFallback=fie;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(W_,t)})(ZF);var nM={},J_={},Rl={},Y_={};Object.defineProperty(Y_,"__esModule",{value:!0});Y_.ActorRdfParse=void 0;const hie=El;class pie extends hie.ActorAbstractMediaTyped{constructor(e){super(e)}}Y_.ActorRdfParse=pie;var Z_={};Object.defineProperty(Z_,"__esModule",{value:!0});Z_.ActorRdfParseFixedMediaTypes=void 0;const yie=El;class bie extends yie.ActorAbstractMediaTypedFixed{constructor(e){super(e)}async testHandleChecked(e){return!0}}Z_.ActorRdfParseFixedMediaTypes=bie;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Y_,t),r(Z_,t)})(Rl);Object.defineProperty(J_,"__esModule",{value:!0});J_.ActorRdfParseN3=void 0;const mie=Rl,gie=au;class _ie extends mie.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){var s;e.data.on("error",o=>a.emit("error",o));const a=e.data.pipe(new gie.StreamParser({baseIRI:(s=e.metadata)==null?void 0:s.baseIRI,format:r.endsWith("n3")?r:`${r}*`}));return{data:a,metadata:{triples:r==="text/turtle"||r==="application/n-triples"||r==="text/n3"}}}}J_.ActorRdfParseN3=_ie;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(J_,t)})(nM);var iM={},ev={},aM={},lf={},hl={},sM={};(function(t){/**
 * Character classes and associated utilities for the 5th edition of XML 1.0.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR=`	
\r ---`,t.S=` 	\r
`,t.NAME_START_CHAR=":A-Z_a-z-----------",t.NAME_CHAR="-"+t.NAME_START_CHAR+".0-9--",t.CHAR_RE=new RegExp("^["+t.CHAR+"]$","u"),t.S_RE=new RegExp("^["+t.S+"]+$","u"),t.NAME_START_CHAR_RE=new RegExp("^["+t.NAME_START_CHAR+"]$","u"),t.NAME_CHAR_RE=new RegExp("^["+t.NAME_CHAR+"]$","u"),t.NAME_RE=new RegExp("^["+t.NAME_START_CHAR+"]["+t.NAME_CHAR+"]*$","u"),t.NMTOKEN_RE=new RegExp("^["+t.NAME_CHAR+"]+$","u");var e=9,r=10,n=13,a=32;t.S_LIST=[a,r,n,e];function s(l){return l>=a&&l<=55295||l===r||l===n||l===e||l>=57344&&l<=65533||l>=65536&&l<=1114111}t.isChar=s;function o(l){return l===a||l===r||l===n||l===e}t.isS=o;function u(l){return l>=65&&l<=90||l>=97&&l<=122||l===58||l===95||l===8204||l===8205||l>=192&&l<=214||l>=216&&l<=246||l>=248&&l<=767||l>=880&&l<=893||l>=895&&l<=8191||l>=8304&&l<=8591||l>=11264&&l<=12271||l>=12289&&l<=55295||l>=63744&&l<=64975||l>=65008&&l<=65533||l>=65536&&l<=983039}t.isNameStartChar=u;function c(l){return u(l)||l>=48&&l<=57||l===45||l===46||l===183||l>=768&&l<=879||l>=8255&&l<=8256}t.isNameChar=c})(sM);var oM={};(function(t){/**
 * Character classes and associated utilities for the 2nd edition of XML 1.1.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR="---",t.RESTRICTED_CHAR="-\b\v\f---",t.S=` 	\r
`,t.NAME_START_CHAR=":A-Z_a-z-----------",t.NAME_CHAR="-"+t.NAME_START_CHAR+".0-9--",t.CHAR_RE=new RegExp("^["+t.CHAR+"]$","u"),t.RESTRICTED_CHAR_RE=new RegExp("^["+t.RESTRICTED_CHAR+"]$","u"),t.S_RE=new RegExp("^["+t.S+"]+$","u"),t.NAME_START_CHAR_RE=new RegExp("^["+t.NAME_START_CHAR+"]$","u"),t.NAME_CHAR_RE=new RegExp("^["+t.NAME_CHAR+"]$","u"),t.NAME_RE=new RegExp("^["+t.NAME_START_CHAR+"]["+t.NAME_CHAR+"]*$","u"),t.NMTOKEN_RE=new RegExp("^["+t.NAME_CHAR+"]+$","u");var e=9,r=10,n=13,a=32;t.S_LIST=[a,r,n,e];function s(h){return h>=1&&h<=55295||h>=57344&&h<=65533||h>=65536&&h<=1114111}t.isChar=s;function o(h){return h>=1&&h<=8||h===11||h===12||h>=14&&h<=31||h>=127&&h<=132||h>=134&&h<=159}t.isRestrictedChar=o;function u(h){return h===9||h===10||h===13||h>31&&h<127||h===133||h>159&&h<=55295||h>=57344&&h<=65533||h>=65536&&h<=1114111}t.isCharAndNotRestricted=u;function c(h){return h===a||h===r||h===n||h===e}t.isS=c;function l(h){return h>=65&&h<=90||h>=97&&h<=122||h===58||h===95||h===8204||h===8205||h>=192&&h<=214||h>=216&&h<=246||h>=248&&h<=767||h>=880&&h<=893||h>=895&&h<=8191||h>=8304&&h<=8591||h>=11264&&h<=12271||h>=12289&&h<=55295||h>=63744&&h<=64975||h>=65008&&h<=65533||h>=65536&&h<=983039}t.isNameStartChar=l;function d(h){return l(h)||h>=48&&h<=57||h===45||h===46||h===183||h>=768&&h<=879||h>=8255&&h<=8256}t.isNameChar=d})(oM);var uM={};(function(t){/**
 * Character class utilities for XML NS 1.0 edition 3.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(t,"__esModule",{value:!0}),t.NC_NAME_START_CHAR="A-Z_a-z------------",t.NC_NAME_CHAR="-"+t.NC_NAME_START_CHAR+".0-9--",t.NC_NAME_START_CHAR_RE=new RegExp("^["+t.NC_NAME_START_CHAR+"]$","u"),t.NC_NAME_CHAR_RE=new RegExp("^["+t.NC_NAME_CHAR+"]$","u"),t.NC_NAME_RE=new RegExp("^["+t.NC_NAME_START_CHAR+"]["+t.NC_NAME_CHAR+"]*$","u");function e(n){return n>=65&&n<=90||n===95||n>=97&&n<=122||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}t.isNCNameStartChar=e;function r(n){return e(n)||n===45||n===46||n>=48&&n<=57||n===183||n>=768&&n<=879||n>=8255&&n<=8256}t.isNCNameChar=r})(uM);Object.defineProperty(hl,"__esModule",{value:!0});hl.SaxesParser=hl.EVENTS=void 0;const qf=sM,vie=oM,Vx=uM;var $i=qf.isS,wie=qf.isChar,lh=qf.isNameStartChar,hN=qf.isNameChar,cM=qf.S_LIST,Sie=qf.NAME_RE,Tie=vie.isChar,Eie=Vx.isNCNameStartChar,Oie=Vx.isNCNameChar,Aie=Vx.NC_NAME_RE;const bb="http://www.w3.org/XML/1998/namespace",Td="http://www.w3.org/2000/xmlns/",xie={__proto__:null,xml:bb,xmlns:Td},Rie={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},Br=-1,xs=-2,pN=0,Iie=1,bT=2,Pie=3,Zl=4,Die=5,Nie=6,jie=7,mT=8,Cie=9,Fie=10,Mie=11,Lie=12,gi=13,d1=14,gT=15,Bie=16,_T=17,$ie=18,Uie=19,vT=20,qie=21,Vie=22,Hie=23,yN=24,wT=25,f1=26,bN=27,kie=28,Qie=29,mN=30,Gie=31,zie=32,Ec=33,Wie=34,ST=35,dh=36,TT=37,Xie=38,gN=39,_N=40,Kie=41,vN=42,Jie=43,Yie=44,ET=9,Qa=10,OT=13,wN=32,SN=33,lM=34,Zh=38,dM=39,h1=45,p1=47,Zie=59,Du=60,pd=61,bn=62,Bn=63,fM=91,yd=93,TN=133,EN=8232,y1=t=>t===lM||t===dM,hM=[lM,dM],eae=[...hM,fM,bn],tae=[...hM,Du,yd],rae=[pd,Bn,...cM],nae=[...cM,bn,Zh,Du];function _O(t,e,r){switch(e){case"xml":r!==bb&&t.fail(`xml prefix must be bound to ${bb}.`);break;case"xmlns":r!==Td&&t.fail(`xmlns prefix must be bound to ${Td}.`);break}switch(r){case Td:t.fail(e===""?`the default namespace may not be set to ${r}.`:`may not assign a prefix (even "xmlns") to the URI ${Td}.`);break;case bb:switch(e){case"xml":break;case"":t.fail(`the default namespace may not be set to ${r}.`);break;default:t.fail("may not assign the xml namespace to another prefix.")}break}}function iae(t,e){for(const r of Object.keys(e))_O(t,r,e[r])}const aae=t=>Aie.test(t),sae=t=>Sie.test(t),Oc=0,ON=1,AT=2;hl.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const AN={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class oae{get closed(){return this._closed}constructor(e){this.opt=e??{},this.fragmentOpt=!!this.opt.fragment;const r=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,r){this.nameStartCheck=Eie,this.nameCheck=Oie,this.isName=aae,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},xie);const n=this.opt.additionalNamespaces;n!=null&&(iae(this,n),Object.assign(this.ns,n))}else this.nameStartCheck=lh,this.nameCheck=hN,this.isName=sae,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var e;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=Oc,this.attribList=[];const{fragmentOpt:r}=this;this.state=r?gi:pN,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=r,this.xmlDeclPossible=!r,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:n}=this.opt;if(n===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");n="1.0"}this.setXMLVersion(n),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(Rie),(e=this.readyHandler)===null||e===void 0||e.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(e,r){this[AN[e]]=r}off(e){this[AN[e]]=void 0}makeError(e){var r;let n=(r=this.fileName)!==null&&r!==void 0?r:"";return this.trackPosition&&(n.length>0&&(n+=":"),n+=`${this.line}:${this.column}`),n.length>0&&(n+=": "),new Error(n+e)}fail(e){const r=this.makeError(e),n=this.errorHandler;if(n===void 0)throw r;return n(r),this}write(e){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let r=!1;e===null?(r=!0,e=""):typeof e=="object"&&(e=e.toString()),this.carriedFromPrevious!==void 0&&(e=`${this.carriedFromPrevious}${e}`,this.carriedFromPrevious=void 0);let n=e.length;const a=e.charCodeAt(n-1);!r&&(a===OT||a>=55296&&a<=56319)&&(this.carriedFromPrevious=e[n-1],n--,e=e.slice(0,n));const{stateTable:s}=this;for(this.chunk=e,this.i=0;this.i<n;)s[this.state].call(this);return this.chunkPosition+=n,r?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:e,i:r}=this;if(this.prevI=r,this.i=r+1,r>=e.length)return Br;const n=e.charCodeAt(r);if(this.column++,n<55296){if(n>=wN||n===ET)return n;switch(n){case Qa:return this.line++,this.column=0,this.positionAtNewLine=this.position,Qa;case OT:return e.charCodeAt(r+1)===Qa&&(this.i=r+2),this.line++,this.column=0,this.positionAtNewLine=this.position,xs;default:return this.fail("disallowed character."),n}}if(n>56319)return n>=57344&&n<=65533||this.fail("disallowed character."),n;const a=65536+(n-55296)*1024+(e.charCodeAt(r+1)-56320);return this.i=r+2,a>1114111&&this.fail("disallowed character."),a}getCode11(){const{chunk:e,i:r}=this;if(this.prevI=r,this.i=r+1,r>=e.length)return Br;const n=e.charCodeAt(r);if(this.column++,n<55296){if(n>31&&n<127||n>159&&n!==EN||n===ET)return n;switch(n){case Qa:return this.line++,this.column=0,this.positionAtNewLine=this.position,Qa;case OT:{const s=e.charCodeAt(r+1);(s===Qa||s===TN)&&(this.i=r+2)}case TN:case EN:return this.line++,this.column=0,this.positionAtNewLine=this.position,xs;default:return this.fail("disallowed character."),n}}if(n>56319)return n>=57344&&n<=65533||this.fail("disallowed character."),n;const a=65536+(n-55296)*1024+(e.charCodeAt(r+1)-56320);return this.i=r+2,a>1114111&&this.fail("disallowed character."),a}getCodeNorm(){const e=this.getCode();return e===xs?Qa:e}unget(){this.i=this.prevI,this.column--}captureTo(e){let{i:r}=this;const{chunk:n}=this;for(;;){const a=this.getCode(),s=a===xs,o=s?Qa:a;if(o===Br||e.includes(o))return this.text+=n.slice(r,this.prevI),o;s&&(this.text+=`${n.slice(r,this.prevI)}
`,r=this.i)}}captureToChar(e){let{i:r}=this;const{chunk:n}=this;for(;;){let a=this.getCode();switch(a){case xs:this.text+=`${n.slice(r,this.prevI)}
`,r=this.i,a=Qa;break;case Br:return this.text+=n.slice(r),!1}if(a===e)return this.text+=n.slice(r,this.prevI),!0}}captureNameChars(){const{chunk:e,i:r}=this;for(;;){const n=this.getCode();if(n===Br)return this.name+=e.slice(r),Br;if(!hN(n))return this.name+=e.slice(r,this.prevI),n===xs?Qa:n}}skipSpaces(){for(;;){const e=this.getCodeNorm();if(e===Br||!$i(e))return e}}setXMLVersion(e){this.currentXMLVersion=e,e==="1.0"?(this.isChar=wie,this.getCode=this.getCode10):(this.isChar=Tie,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=Iie}sBeginWhitespace(){const e=this.i,r=this.skipSpaces();switch(this.prevI!==e&&(this.xmlDeclPossible=!1),r){case Du:if(this.state=gT,this.text.length!==0)throw new Error("no-empty text at start");break;case Br:break;default:this.unget(),this.state=gi,this.xmlDeclPossible=!1}}sDoctype(){var e;const r=this.captureTo(eae);switch(r){case bn:{(e=this.doctypeHandler)===null||e===void 0||e.call(this,this.text),this.text="",this.state=gi,this.doctype=!0;break}case Br:break;default:this.text+=String.fromCodePoint(r),r===fM?this.state=Zl:y1(r)&&(this.state=Pie,this.q=r)}}sDoctypeQuote(){const e=this.q;this.captureToChar(e)&&(this.text+=String.fromCodePoint(e),this.q=null,this.state=bT)}sDTD(){const e=this.captureTo(tae);e!==Br&&(this.text+=String.fromCodePoint(e),e===yd?this.state=bT:e===Du?this.state=Nie:y1(e)&&(this.state=Die,this.q=e))}sDTDQuoted(){const e=this.q;this.captureToChar(e)&&(this.text+=String.fromCodePoint(e),this.state=Zl,this.q=null)}sDTDOpenWaka(){const e=this.getCodeNorm();switch(this.text+=String.fromCodePoint(e),e){case SN:this.state=jie,this.openWakaBang="";break;case Bn:this.state=Mie;break;default:this.state=Zl}}sDTDOpenWakaBang(){const e=String.fromCodePoint(this.getCodeNorm()),r=this.openWakaBang+=e;this.text+=e,r!=="-"&&(this.state=r==="--"?mT:Zl,this.openWakaBang="")}sDTDComment(){this.captureToChar(h1)&&(this.text+="-",this.state=Cie)}sDTDCommentEnding(){const e=this.getCodeNorm();this.text+=String.fromCodePoint(e),this.state=e===h1?Fie:mT}sDTDCommentEnded(){const e=this.getCodeNorm();this.text+=String.fromCodePoint(e),e===bn?this.state=Zl:(this.fail("malformed comment."),this.state=mT)}sDTDPI(){this.captureToChar(Bn)&&(this.text+="?",this.state=Lie)}sDTDPIEnding(){const e=this.getCodeNorm();this.text+=String.fromCodePoint(e),e===bn&&(this.state=Zl)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:e}=this;const{chunk:r}=this;e:for(;;)switch(this.getCode()){case xs:this.entity+=`${r.slice(e,this.prevI)}
`,e=this.i;break;case Zie:{const{entityReturnState:n}=this,a=this.entity+r.slice(e,this.prevI);this.state=n;let s;a===""?(this.fail("empty entity name."),s="&;"):(s=this.parseEntity(a),this.entity=""),(n!==gi||this.textHandler!==void 0)&&(this.text+=s);break e}case Br:this.entity+=r.slice(e);break e}}sOpenWaka(){const e=this.getCode();if(lh(e))this.state=Wie,this.unget(),this.xmlDeclPossible=!1;else switch(e){case p1:this.state=Jie,this.xmlDeclPossible=!1;break;case SN:this.state=Bie,this.openWakaBang="",this.xmlDeclPossible=!1;break;case Bn:this.state=Hie;break;default:this.fail("disallowed character in tag name"),this.state=gi,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=vT,this.openWakaBang="";break;case"--":this.state=_T,this.openWakaBang="";break;case"DOCTYPE":this.state=bT,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(h1)&&(this.state=$ie)}sCommentEnding(){var e;const r=this.getCodeNorm();r===h1?(this.state=Uie,(e=this.commentHandler)===null||e===void 0||e.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(r)}`,this.state=_T)}sCommentEnded(){const e=this.getCodeNorm();e!==bn?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(e)}`,this.state=_T):this.state=gi}sCData(){this.captureToChar(yd)&&(this.state=qie)}sCDataEnding(){const e=this.getCodeNorm();e===yd?this.state=Vie:(this.text+=`]${String.fromCodePoint(e)}`,this.state=vT)}sCDataEnding2(){var e;const r=this.getCodeNorm();switch(r){case bn:{(e=this.cdataHandler)===null||e===void 0||e.call(this,this.text),this.text="",this.state=gi;break}case yd:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(r)}`,this.state=vT}}sPIFirstChar(){const e=this.getCodeNorm();this.nameStartCheck(e)?(this.piTarget+=String.fromCodePoint(e),this.state=yN):e===Bn||$i(e)?(this.fail("processing instruction without a target."),this.state=e===Bn?f1:wT):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(e),this.state=yN)}sPIRest(){const{chunk:e,i:r}=this;for(;;){const n=this.getCodeNorm();if(n===Br){this.piTarget+=e.slice(r);return}if(!this.nameCheck(n)){this.piTarget+=e.slice(r,this.prevI);const a=n===Bn;a||$i(n)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=a?Ec:bN):this.state=a?f1:wT:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(n));break}}}sPIBody(){if(this.text.length===0){const e=this.getCodeNorm();e===Bn?this.state=f1:$i(e)||(this.text=String.fromCodePoint(e))}else this.captureToChar(Bn)&&(this.state=f1)}sPIEnding(){var e;const r=this.getCodeNorm();if(r===bn){const{piTarget:n}=this;n.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(e=this.piHandler)===null||e===void 0||e.call(this,{target:n,body:this.text}),this.piTarget=this.text="",this.state=gi}else r===Bn?this.text+="?":(this.text+=`?${String.fromCodePoint(r)}`,this.state=wT);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const e=this.skipSpaces();if(e===Bn){this.state=Ec;return}e!==Br&&(this.state=kie,this.name=String.fromCodePoint(e))}sXMLDeclName(){const e=this.captureTo(rae);if(e===Bn){this.state=Ec,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if($i(e)||e===pd){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=e===pd?mN:Qie}}sXMLDeclEq(){const e=this.getCodeNorm();if(e===Bn){this.state=Ec,this.fail("XML declaration is incomplete.");return}$i(e)||(e!==pd&&this.fail("value required."),this.state=mN)}sXMLDeclValueStart(){const e=this.getCodeNorm();if(e===Bn){this.state=Ec,this.fail("XML declaration is incomplete.");return}$i(e)||(y1(e)?this.q=e:(this.fail("value must be quoted."),this.q=wN),this.state=Gie)}sXMLDeclValue(){const e=this.captureTo([this.q,Bn]);if(e===Bn){this.state=Ec,this.text="",this.fail("XML declaration is incomplete.");return}if(e===Br)return;const r=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const n=r;this.xmlDecl.version=n,/^1\.[0-9]+$/.test(n)?this.opt.forceXMLVersion||this.setXMLVersion(n):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(r)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=r;break;case"standalone":r!=="yes"&&r!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=r;break}this.name="",this.state=zie}sXMLDeclSeparator(){const e=this.getCodeNorm();if(e===Bn){this.state=Ec;return}$i(e)||(this.fail("whitespace required."),this.unget()),this.state=bN}sXMLDeclEnding(){var e;this.getCodeNorm()===bn?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(e=this.xmldeclHandler)===null||e===void 0||e.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=gi):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var e;const r=this.captureNameChars();if(r===Br)return;const n=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=n.ns=Object.create(null)),(e=this.openTagStartHandler)===null||e===void 0||e.call(this,n),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),r){case bn:this.openTag();break;case p1:this.state=ST;break;default:$i(r)||this.fail("disallowed character in tag name."),this.state=dh}}sOpenTagSlash(){this.getCode()===bn?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=dh)}sAttrib(){const e=this.skipSpaces();e!==Br&&(lh(e)?(this.unget(),this.state=TT):e===bn?this.openTag():e===p1?this.state=ST:this.fail("disallowed character in attribute name."))}sAttribName(){const e=this.captureNameChars();e===pd?this.state=gN:$i(e)?this.state=Xie:e===bn?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):e!==Br&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const e=this.skipSpaces();switch(e){case Br:return;case pd:this.state=gN;break;default:this.fail("attribute without value."),this.text="",this.name="",e===bn?this.openTag():lh(e)?(this.unget(),this.state=TT):(this.fail("disallowed character in attribute name."),this.state=dh)}}sAttribValue(){const e=this.getCodeNorm();y1(e)?(this.q=e,this.state=_N):$i(e)||(this.fail("unquoted attribute value."),this.state=vN,this.unget())}sAttribValueQuoted(){const{q:e,chunk:r}=this;let{i:n}=this;for(;;)switch(this.getCode()){case e:this.pushAttrib(this.name,this.text+r.slice(n,this.prevI)),this.name=this.text="",this.q=null,this.state=Kie;return;case Zh:this.text+=r.slice(n,this.prevI),this.state=d1,this.entityReturnState=_N;return;case Qa:case xs:case ET:this.text+=`${r.slice(n,this.prevI)} `,n=this.i;break;case Du:this.text+=r.slice(n,this.prevI),this.fail("disallowed character.");return;case Br:this.text+=r.slice(n);return}}sAttribValueClosed(){const e=this.getCodeNorm();$i(e)?this.state=dh:e===bn?this.openTag():e===p1?this.state=ST:lh(e)?(this.fail("no whitespace between attributes."),this.unget(),this.state=TT):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const e=this.captureTo(nae);switch(e){case Zh:this.state=d1,this.entityReturnState=vN;break;case Du:this.fail("disallowed character.");break;case Br:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",e===bn?this.openTag():this.state=dh}}sCloseTag(){const e=this.captureNameChars();e===bn?this.closeTag():$i(e)?this.state=Yie:e!==Br&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case bn:this.closeTag();break;case Br:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:e,forbiddenState:r}=this;const{chunk:n,textHandler:a}=this;e:for(;;)switch(this.getCode()){case Du:{if(this.state=gT,a!==void 0){const{text:s}=this,o=n.slice(e,this.prevI);s.length!==0?(a(s+o),this.text=""):o.length!==0&&a(o)}r=Oc;break e}case Zh:this.state=d1,this.entityReturnState=gi,a!==void 0&&(this.text+=n.slice(e,this.prevI)),r=Oc;break e;case yd:switch(r){case Oc:r=ON;break;case ON:r=AT;break;case AT:break;default:throw new Error("impossible state")}break;case bn:r===AT&&this.fail('the string "]]>" is disallowed in char data.'),r=Oc;break;case xs:a!==void 0&&(this.text+=`${n.slice(e,this.prevI)}
`),e=this.i,r=Oc;break;case Br:a!==void 0&&(this.text+=n.slice(e));break e;default:r=Oc}this.forbiddenState=r}handleTextOutsideRoot(){let{i:e}=this;const{chunk:r,textHandler:n}=this;let a=!1;e:for(;;){const s=this.getCode();switch(s){case Du:{if(this.state=gT,n!==void 0){const{text:o}=this,u=r.slice(e,this.prevI);o.length!==0?(n(o+u),this.text=""):u.length!==0&&n(u)}break e}case Zh:this.state=d1,this.entityReturnState=gi,n!==void 0&&(this.text+=r.slice(e,this.prevI)),a=!0;break e;case xs:n!==void 0&&(this.text+=`${r.slice(e,this.prevI)}
`),e=this.i;break;case Br:n!==void 0&&(this.text+=r.slice(e));break e;default:$i(s)||(a=!0)}}a&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(e,r){var n;const{prefix:a,local:s}=this.qname(e),o={name:e,prefix:a,local:s,value:r};if(this.attribList.push(o),(n=this.attributeHandler)===null||n===void 0||n.call(this,o),a==="xmlns"){const u=r.trim();this.currentXMLVersion==="1.0"&&u===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[s]=u,_O(this,s,u)}else if(e==="xmlns"){const u=r.trim();this.topNS[""]=u,_O(this,"",u)}}pushAttribPlain(e,r){var n;const a={name:e,value:r};this.attribList.push(a),(n=this.attributeHandler)===null||n===void 0||n.call(this,a)}end(){var e,r;this.sawRoot||this.fail("document must contain a root element.");const{tags:n}=this;for(;n.length>0;){const s=n.pop();this.fail(`unclosed tag: ${s.name}`)}this.state!==pN&&this.state!==gi&&this.fail("unexpected end.");const{text:a}=this;return a.length!==0&&((e=this.textHandler)===null||e===void 0||e.call(this,a),this.text=""),this._closed=!0,(r=this.endHandler)===null||r===void 0||r.call(this),this._init(),this}resolve(e){var r,n;let a=this.topNS[e];if(a!==void 0)return a;const{tags:s}=this;for(let o=s.length-1;o>=0;o--)if(a=s[o].ns[e],a!==void 0)return a;return a=this.ns[e],a!==void 0?a:(n=(r=this.opt).resolvePrefix)===null||n===void 0?void 0:n.call(r,e)}qname(e){const r=e.indexOf(":");if(r===-1)return{prefix:"",local:e};const n=e.slice(r+1),a=e.slice(0,r);return(a===""||n===""||n.includes(":"))&&this.fail(`malformed name: ${e}.`),{prefix:a,local:n}}processAttribsNS(){var e;const{attribList:r}=this,n=this.tag;{const{prefix:o,local:u}=this.qname(n.name);n.prefix=o,n.local=u;const c=n.uri=(e=this.resolve(o))!==null&&e!==void 0?e:"";o!==""&&(o==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),c===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(o)}.`),n.uri=o))}if(r.length===0)return;const{attributes:a}=n,s=new Set;for(const o of r){const{name:u,prefix:c,local:l}=o;let d,h;c===""?(d=u==="xmlns"?Td:"",h=u):(d=this.resolve(c),d===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(c)}.`),d=c),h=`{${d}}${l}`),s.has(h)&&this.fail(`duplicate attribute: ${h}.`),s.add(h),o.uri=d,a[u]=o}this.attribList=[]}processAttribsPlain(){const{attribList:e}=this,r=this.tag.attributes;for(const{name:n,value:a}of e)r[n]!==void 0&&this.fail(`duplicate attribute: ${n}.`),r[n]=a;this.attribList=[]}openTag(){var e;this.processAttribs();const{tags:r}=this,n=this.tag;n.isSelfClosing=!1,(e=this.openTagHandler)===null||e===void 0||e.call(this,n),r.push(n),this.state=gi,this.name=""}openSelfClosingTag(){var e,r,n;this.processAttribs();const{tags:a}=this,s=this.tag;s.isSelfClosing=!0,(e=this.openTagHandler)===null||e===void 0||e.call(this,s),(r=this.closeTagHandler)===null||r===void 0||r.call(this,s),(this.tag=(n=a[a.length-1])!==null&&n!==void 0?n:null)===null&&(this.closedRoot=!0),this.state=gi,this.name=""}closeTag(){const{tags:e,name:r}=this;if(this.state=gi,this.name="",r===""){this.fail("weird empty close tag."),this.text+="</>";return}const n=this.closeTagHandler;let a=e.length;for(;a-- >0;){const s=this.tag=e.pop();if(this.topNS=s.ns,n==null||n(s),s.name===r)break;this.fail("unexpected close tag.")}a===0?this.closedRoot=!0:a<0&&(this.fail(`unmatched closing tag: ${r}.`),this.text+=`</${r}>`)}parseEntity(e){if(e[0]!=="#"){const n=this.ENTITIES[e];return n!==void 0?n:(this.fail(this.isName(e)?"undefined entity.":"disallowed character in entity name."),`&${e};`)}let r=NaN;return e[1]==="x"&&/^#x[0-9a-f]+$/i.test(e)?r=parseInt(e.slice(2),16):/^#[0-9]+$/.test(e)&&(r=parseInt(e.slice(1),10)),this.isChar(r)?String.fromCodePoint(r):(this.fail("malformed character entity."),`&${e};`)}}hl.SaxesParser=oae;var tv={};Object.defineProperty(tv,"__esModule",{value:!0});tv.ParseError=void 0;let uae=class extends Error{constructor(e,r){const n=e.saxParser;super(e.trackPosition?`Line ${n.line} column ${n.column+1}: ${r}`:r)}};tv.ParseError=uae;var pM={},yM={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateIri=t.IriValidationStrategy=void 0;function e(){const u="[!$&'()*+,;=]",c="%[a-fA-F0-9]{2}",l="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",d=`${l}\\.${l}\\.${l}\\.${l}`,h="[a-fA-F0-9]{1,4}",f=`(${h}:${h}|${d})`,p=`((${h}:){6}${f}|::(${h}:){5}${f}|(${h})?::(${h}:){4}${f}|((${h}:){0,1}${h})?::(${h}:){3}${f}|((${h}:){0,2}${h})?::(${h}:){2}${f}|((${h}:){0,3}${h})?::${h}:${f}|((${h}:){0,4}${h})?::${f}|((${h}:){0,5}${h})?::${h}|((${h}:){0,6}${h})?::)`,b=`v[a-fA-F0-9]+\\.(${u}|${u}|":)+`,y=`\\[(${p}|${b})\\]`,S="[0-9]*",w="[a-zA-Z][a-zA-Z0-9+\\-.]*",O="[---]",P="[a-zA-Z0-9\\-._~-----------------]",B=`(${P}|${c}|${u}|[:@])*`,Q=`(${B}|[\\/?])*`,N=`(${B}|${O}|[\\/?])*`,D=`(${B})+`,F=`(${B})*`,W="",z=`${D}(\\/${F})*`,M=`\\/(${D}(\\/${F})*)?`,C=`(\\/${F})*`,V=`(${P}|${c}|${u})*`,ie=`(${y}|${d}|${V})`,_e=`(\\/\\/${`(${`(${P}|${c}|${u}|:)*`}@)?${ie}(:${S})?`}${C}|${M}|${z}|${W})`,we=`^${w}:${_e}(\\?${N})?(#${Q})?$`;return new RegExp(we,"u")}const r=e(),n=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var a;(function(o){o.Strict="strict",o.Pragmatic="pragmatic",o.None="none"})(a=t.IriValidationStrategy||(t.IriValidationStrategy={}));function s(o,u=a.Strict){switch(u){case a.Strict:return r.test(o)?void 0:new Error(`Invalid IRI according to RFC 3987: '${o}'`);case a.Pragmatic:return n.test(o)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${o}'`);case a.None:return;default:return new Error(`Not supported validation strategy "${u}"`)}}t.validateIri=s})(yM);(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(yM,t)})(pM);Object.defineProperty(lf,"__esModule",{value:!0});lf.ParseType=lf.RdfXmlParser=void 0;const xN=Na,cae=hl,RN=Kt,lae=tv,dae=yt,xT=pM;class ir extends RN.Transform{constructor(e){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},e&&(Object.assign(this,e),this.options=e),this.dataFactory||(this.dataFactory=new dae.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.validateUri!==!1&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?xT.IriValidationStrategy.Pragmatic:xT.IriValidationStrategy.None),this.saxParser=new cae.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(e){const r=new RN.PassThrough({readableObjectMode:!0});e.on("error",a=>n.emit("error",a)),e.on("data",a=>r.push(a)),e.on("end",()=>r.push(null));const n=r.pipe(new ir(this.options));return n}_transform(e,r,n){try{this.saxParser.write(e)}catch(a){return n(a)}n()}newParseError(e){return new lae.ParseError(this,e)}valueToUri(e,r){return this.uriToNamedNode((0,xN.resolve)(e,r.baseIRI))}uriToNamedNode(e){const r=(0,xT.validateIri)(e,this.iriValidationStrategy);if(r instanceof Error)throw this.newParseError(r.message);return this.dataFactory.namedNode(e)}validateNcname(e){if(!ir.NCNAME_MATCHER.test(e))throw this.newParseError(`Not a valid NCName: ${e}`)}attachSaxListeners(){this.saxParser.on("error",e=>this.emit("error",e)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(e){const r=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let n=Do.RESOURCE;if(r&&(r.hadChildren=!0,n=r.childrenParseType),r&&r.childrenStringTags){const s=e.name;let o="";for(const d in e.attributes)o+=` ${d}="${e.attributes[d].value}"`;const c=`<${`${s}${o}`}>`;r.childrenStringTags.push(c);const l={childrenStringTags:r.childrenStringTags};l.childrenStringEmitClosingTag=`</${s}>`,this.activeTagStack.push(l);return}const a={};r?(a.language=r.language,a.baseIRI=r.baseIRI):a.baseIRI=this.baseIRI,this.activeTagStack.push(a),n===Do.RESOURCE?this.onTagResource(e,a,r,!r):this.onTagProperty(e,a,r)}onTagResource(e,r,n,a){r.childrenParseType=Do.PROPERTY;let s=!0;if(e.uri===ir.RDF){if(!a&&ir.FORBIDDEN_NODE_ELEMENTS.indexOf(e.local)>=0)throw this.newParseError(`Illegal node element name: ${e.local}`);switch(e.local){case"RDF":r.childrenParseType=Do.RESOURCE;case"Description":s=!1}}const o=[],u=[];let c=null,l=!1,d=!1,h=null;for(const f in e.attributes){const p=e.attributes[f];if(n&&p.uri===ir.RDF)switch(p.local){case"about":if(c)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${p.value} and ${c} where found.`);c=p.value;continue;case"ID":if(c)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${p.value} and ${c} where found.`);this.validateNcname(p.value),c="#"+p.value,l=!0;continue;case"nodeID":if(c)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${p.value} and ${c} where found.`);this.validateNcname(p.value),c=p.value,d=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":h=p.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(p.uri===ir.XML){if(p.local==="lang"){r.language=p.value===""?null:p.value.toLowerCase();continue}else if(p.local==="base"){r.baseIRI=(0,xN.resolve)(p.value,r.baseIRI);continue}}p.prefix!=="xml"&&p.prefix!=="xmlns"&&(p.prefix!==""||p.local!=="xmlns")&&p.uri&&(o.push(this.uriToNamedNode(p.uri+p.local)),u.push(p.value))}if(c!==null&&(r.subject=d?this.dataFactory.blankNode(c):this.valueToUri(c,r),l&&this.claimNodeId(r.subject)),r.subject||(r.subject=this.dataFactory.blankNode()),s){const f=this.uriToNamedNode(e.uri+e.local);this.emitTriple(r.subject,this.dataFactory.namedNode(ir.RDF+"type"),f,n?n.reifiedStatementId:null)}if(n){if(n.predicate)if(n.childrenCollectionSubject){const f=this.dataFactory.blankNode();this.emitTriple(n.childrenCollectionSubject,n.childrenCollectionPredicate,f,n.reifiedStatementId),this.emitTriple(f,this.dataFactory.namedNode(ir.RDF+"first"),r.subject,r.reifiedStatementId),n.childrenCollectionSubject=f,n.childrenCollectionPredicate=this.dataFactory.namedNode(ir.RDF+"rest")}else{this.emitTriple(n.subject,n.predicate,r.subject,n.reifiedStatementId);for(let f=0;f<n.predicateSubPredicates.length;f++)this.emitTriple(r.subject,n.predicateSubPredicates[f],n.predicateSubObjects[f],null);n.predicateSubPredicates=[],n.predicateSubObjects=[],n.predicateEmitted=!0}for(let f=0;f<o.length;f++){const p=this.dataFactory.literal(u[f],r.datatype||r.language);this.emitTriple(r.subject,o[f],p,n.reifiedStatementId)}h&&this.emitTriple(r.subject,this.dataFactory.namedNode(ir.RDF+"type"),this.uriToNamedNode(h),null)}}onTagProperty(e,r,n){if(r.childrenParseType=Do.RESOURCE,r.subject=n.subject,e.uri===ir.RDF&&e.local==="li"?(n.listItemCounter||(n.listItemCounter=1),r.predicate=this.uriToNamedNode(e.uri+"_"+n.listItemCounter++)):r.predicate=this.uriToNamedNode(e.uri+e.local),e.uri===ir.RDF&&ir.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(e.local)>=0)throw this.newParseError(`Illegal property element name: ${e.local}`);r.predicateSubPredicates=[],r.predicateSubObjects=[];let a=!1,s=!1,o=null,u=!0;const c=[],l=[];for(const d in e.attributes){const h=e.attributes[d];if(h.uri===ir.RDF)switch(h.local){case"resource":if(o)throw this.newParseError(`Found both rdf:resource (${h.value}) and rdf:nodeID (${o}).`);if(a)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${h.value})`);r.hadChildren=!0,o=h.value,u=!1;continue;case"datatype":if(s)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${h.value}).`);if(a)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${h.value})`);r.datatype=this.valueToUri(h.value,r);continue;case"nodeID":if(s)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${h.value}).`);if(r.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${h.value}).`);if(a)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${h.value})`);this.validateNcname(h.value),r.hadChildren=!0,o=h.value,u=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(s)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(r.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${r.datatype.value})`);if(o)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${o})`);if(h.value==="Resource"){a=!0,r.childrenParseType=Do.PROPERTY;const f=this.dataFactory.blankNode();this.emitTriple(r.subject,r.predicate,f,r.reifiedStatementId),r.subject=f,r.predicate=null}else h.value==="Collection"?(a=!0,r.hadChildren=!0,r.childrenCollectionSubject=r.subject,r.childrenCollectionPredicate=r.predicate,u=!1):h.value==="Literal"&&(a=!0,r.childrenTagsToString=!0,r.childrenStringTags=[]);continue;case"ID":this.validateNcname(h.value),r.reifiedStatementId=this.valueToUri("#"+h.value,r),this.claimNodeId(r.reifiedStatementId);continue}else if(h.uri===ir.XML&&h.local==="lang"){r.language=h.value===""?null:h.value.toLowerCase();continue}if(h.prefix!=="xml"&&h.prefix!=="xmlns"&&(h.prefix!==""||h.local!=="xmlns")&&h.uri){if(a||r.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${h.value}`);r.hadChildren=!0,s=!0,c.push(this.uriToNamedNode(h.uri+h.local)),l.push(this.dataFactory.literal(h.value,r.datatype||r.language))}}if(o!==null){const d=r.subject;r.subject=u?this.dataFactory.blankNode(o):this.valueToUri(o,r),this.emitTriple(d,r.predicate,r.subject,r.reifiedStatementId);for(let h=0;h<c.length;h++)this.emitTriple(r.subject,c[h],l[h],null);r.predicateEmitted=!0}else u&&(r.predicateSubPredicates=c,r.predicateSubObjects=l,r.predicateEmitted=!1)}emitTriple(e,r,n,a){this.push(this.dataFactory.quad(e,r,n,this.defaultGraph)),a&&(this.push(this.dataFactory.quad(a,this.dataFactory.namedNode(ir.RDF+"type"),this.dataFactory.namedNode(ir.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(a,this.dataFactory.namedNode(ir.RDF+"subject"),e,this.defaultGraph)),this.push(this.dataFactory.quad(a,this.dataFactory.namedNode(ir.RDF+"predicate"),r,this.defaultGraph)),this.push(this.dataFactory.quad(a,this.dataFactory.namedNode(ir.RDF+"object"),n,this.defaultGraph)))}claimNodeId(e){if(!this.allowDuplicateRdfIds){if(this.nodeIds[e.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${e.value}'.`);this.nodeIds[e.value]=!0}}onText(e){const r=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;r&&(r.childrenStringTags?r.childrenStringTags.push(e):r.predicate&&(r.text=e))}onCloseTag(){const e=this.activeTagStack.pop();if(e.childrenStringEmitClosingTag&&e.childrenStringTags.push(e.childrenStringEmitClosingTag),e.childrenTagsToString&&(e.datatype=this.dataFactory.namedNode(ir.RDF+"XMLLiteral"),e.text=e.childrenStringTags.join(""),e.hadChildren=!1),e.childrenCollectionSubject)this.emitTriple(e.childrenCollectionSubject,e.childrenCollectionPredicate,this.dataFactory.namedNode(ir.RDF+"nil"),e.reifiedStatementId);else if(e.predicate){if(!e.hadChildren&&e.childrenParseType!==Do.PROPERTY)this.emitTriple(e.subject,e.predicate,this.dataFactory.literal(e.text||"",e.datatype||e.language),e.reifiedStatementId);else if(!e.predicateEmitted){const r=this.dataFactory.blankNode();this.emitTriple(e.subject,e.predicate,r,e.reifiedStatementId);for(let n=0;n<e.predicateSubPredicates.length;n++)this.emitTriple(r,e.predicateSubPredicates[n],e.predicateSubObjects[n],null)}}}onDoctype(e){e.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(r,n,a)=>(this.saxParser.ENTITIES[n]=a,""))}}lf.RdfXmlParser=ir;ir.MIME_TYPE="application/rdf+xml";ir.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";ir.XML="http://www.w3.org/XML/1998/namespace";ir.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"];ir.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"];ir.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u;var Do;(function(t){t[t.RESOURCE=0]="RESOURCE",t[t.PROPERTY=1]="PROPERTY"})(Do||(lf.ParseType=Do={}));(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(lf,t)})(aM);Object.defineProperty(ev,"__esModule",{value:!0});ev.ActorRdfParseRdfXml=void 0;const fae=Rl,hae=aM;class pae extends fae.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){var s;e.data.on("error",o=>a.emit("error",o));const a=e.data.pipe(new hae.RdfXmlParser({baseIRI:(s=e.metadata)==null?void 0:s.baseIRI}));return{data:a,metadata:{triples:!0}}}}ev.ActorRdfParseRdfXml=pae;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ev,t)})(iM);var bM={},rv={},Hx={},mM={};Object.defineProperty(mM,"__esModule",{value:!0});var gM={};Object.defineProperty(gM,"__esModule",{value:!0});var _M={};Object.defineProperty(_M,"__esModule",{value:!0});var nv={},vM={},Mp={},kx={},eu={},Qx={};Object.defineProperty(Qx,"__esModule",{value:!0});Qx.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(t){return t.charCodeAt(0)}));var Gx={};Object.defineProperty(Gx,"__esModule",{value:!0});Gx.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(t){return t.charCodeAt(0)}));var vO={};(function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCodePoint=t.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);t.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(s){var o="";return s>65535&&(s-=65536,o+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),o+=String.fromCharCode(s),o};function n(s){var o;return s>=55296&&s<=57343||s>1114111?65533:(o=r.get(s))!==null&&o!==void 0?o:s}t.replaceCodePoint=n;function a(s){return(0,t.fromCodePoint)(n(s))}t.default=a})(vO);(function(t){var e=g&&g.__createBinding||(Object.create?function(F,W,z,M){M===void 0&&(M=z);var C=Object.getOwnPropertyDescriptor(W,z);(!C||("get"in C?!W.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return W[z]}}),Object.defineProperty(F,M,C)}:function(F,W,z,M){M===void 0&&(M=z),F[M]=W[z]}),r=g&&g.__setModuleDefault||(Object.create?function(F,W){Object.defineProperty(F,"default",{enumerable:!0,value:W})}:function(F,W){F.default=W}),n=g&&g.__importStar||function(F){if(F&&F.__esModule)return F;var W={};if(F!=null)for(var z in F)z!=="default"&&Object.prototype.hasOwnProperty.call(F,z)&&e(W,F,z);return r(W,F),W},a=g&&g.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXML=t.decodeHTMLStrict=t.decodeHTMLAttribute=t.decodeHTML=t.determineBranch=t.EntityDecoder=t.DecodingMode=t.BinTrieFlags=t.fromCodePoint=t.replaceCodePoint=t.decodeCodePoint=t.xmlDecodeTree=t.htmlDecodeTree=void 0;var s=a(Qx);t.htmlDecodeTree=s.default;var o=a(Gx);t.xmlDecodeTree=o.default;var u=n(vO);t.decodeCodePoint=u.default;var c=vO;Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return c.replaceCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return c.fromCodePoint}});var l;(function(F){F[F.NUM=35]="NUM",F[F.SEMI=59]="SEMI",F[F.EQUALS=61]="EQUALS",F[F.ZERO=48]="ZERO",F[F.NINE=57]="NINE",F[F.LOWER_A=97]="LOWER_A",F[F.LOWER_F=102]="LOWER_F",F[F.LOWER_X=120]="LOWER_X",F[F.LOWER_Z=122]="LOWER_Z",F[F.UPPER_A=65]="UPPER_A",F[F.UPPER_F=70]="UPPER_F",F[F.UPPER_Z=90]="UPPER_Z"})(l||(l={}));var d=32,h;(function(F){F[F.VALUE_LENGTH=49152]="VALUE_LENGTH",F[F.BRANCH_LENGTH=16256]="BRANCH_LENGTH",F[F.JUMP_TABLE=127]="JUMP_TABLE"})(h=t.BinTrieFlags||(t.BinTrieFlags={}));function f(F){return F>=l.ZERO&&F<=l.NINE}function p(F){return F>=l.UPPER_A&&F<=l.UPPER_F||F>=l.LOWER_A&&F<=l.LOWER_F}function b(F){return F>=l.UPPER_A&&F<=l.UPPER_Z||F>=l.LOWER_A&&F<=l.LOWER_Z||f(F)}function y(F){return F===l.EQUALS||b(F)}var S;(function(F){F[F.EntityStart=0]="EntityStart",F[F.NumericStart=1]="NumericStart",F[F.NumericDecimal=2]="NumericDecimal",F[F.NumericHex=3]="NumericHex",F[F.NamedEntity=4]="NamedEntity"})(S||(S={}));var w;(function(F){F[F.Legacy=0]="Legacy",F[F.Strict=1]="Strict",F[F.Attribute=2]="Attribute"})(w=t.DecodingMode||(t.DecodingMode={}));var I=function(){function F(W,z,M){this.decodeTree=W,this.emitCodePoint=z,this.errors=M,this.state=S.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=w.Strict}return F.prototype.startEntity=function(W){this.decodeMode=W,this.state=S.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},F.prototype.write=function(W,z){switch(this.state){case S.EntityStart:return W.charCodeAt(z)===l.NUM?(this.state=S.NumericStart,this.consumed+=1,this.stateNumericStart(W,z+1)):(this.state=S.NamedEntity,this.stateNamedEntity(W,z));case S.NumericStart:return this.stateNumericStart(W,z);case S.NumericDecimal:return this.stateNumericDecimal(W,z);case S.NumericHex:return this.stateNumericHex(W,z);case S.NamedEntity:return this.stateNamedEntity(W,z)}},F.prototype.stateNumericStart=function(W,z){return z>=W.length?-1:(W.charCodeAt(z)|d)===l.LOWER_X?(this.state=S.NumericHex,this.consumed+=1,this.stateNumericHex(W,z+1)):(this.state=S.NumericDecimal,this.stateNumericDecimal(W,z))},F.prototype.addToNumericResult=function(W,z,M,C){if(z!==M){var V=M-z;this.result=this.result*Math.pow(C,V)+parseInt(W.substr(z,V),C),this.consumed+=V}},F.prototype.stateNumericHex=function(W,z){for(var M=z;z<W.length;){var C=W.charCodeAt(z);if(f(C)||p(C))z+=1;else return this.addToNumericResult(W,M,z,16),this.emitNumericEntity(C,3)}return this.addToNumericResult(W,M,z,16),-1},F.prototype.stateNumericDecimal=function(W,z){for(var M=z;z<W.length;){var C=W.charCodeAt(z);if(f(C))z+=1;else return this.addToNumericResult(W,M,z,10),this.emitNumericEntity(C,2)}return this.addToNumericResult(W,M,z,10),-1},F.prototype.emitNumericEntity=function(W,z){var M;if(this.consumed<=z)return(M=this.errors)===null||M===void 0||M.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(W===l.SEMI)this.consumed+=1;else if(this.decodeMode===w.Strict)return 0;return this.emitCodePoint((0,u.replaceCodePoint)(this.result),this.consumed),this.errors&&(W!==l.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},F.prototype.stateNamedEntity=function(W,z){for(var M=this.decodeTree,C=M[this.treeIndex],V=(C&h.VALUE_LENGTH)>>14;z<W.length;z++,this.excess++){var ie=W.charCodeAt(z);if(this.treeIndex=T(M,C,this.treeIndex+Math.max(1,V),ie),this.treeIndex<0)return this.result===0||this.decodeMode===w.Attribute&&(V===0||y(ie))?0:this.emitNotTerminatedNamedEntity();if(C=M[this.treeIndex],V=(C&h.VALUE_LENGTH)>>14,V!==0){if(ie===l.SEMI)return this.emitNamedEntityData(this.treeIndex,V,this.consumed+this.excess);this.decodeMode!==w.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},F.prototype.emitNotTerminatedNamedEntity=function(){var W,z=this,M=z.result,C=z.decodeTree,V=(C[M]&h.VALUE_LENGTH)>>14;return this.emitNamedEntityData(M,V,this.consumed),(W=this.errors)===null||W===void 0||W.missingSemicolonAfterCharacterReference(),this.consumed},F.prototype.emitNamedEntityData=function(W,z,M){var C=this.decodeTree;return this.emitCodePoint(z===1?C[W]&~h.VALUE_LENGTH:C[W+1],M),z===3&&this.emitCodePoint(C[W+2],M),M},F.prototype.end=function(){var W;switch(this.state){case S.NamedEntity:return this.result!==0&&(this.decodeMode!==w.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case S.NumericDecimal:return this.emitNumericEntity(0,2);case S.NumericHex:return this.emitNumericEntity(0,3);case S.NumericStart:return(W=this.errors)===null||W===void 0||W.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case S.EntityStart:return 0}},F}();t.EntityDecoder=I;function O(F){var W="",z=new I(F,function(M){return W+=(0,u.fromCodePoint)(M)});return function(C,V){for(var ie=0,ne=0;(ne=C.indexOf("&",ne))>=0;){W+=C.slice(ie,ne),z.startEntity(V);var fe=z.write(C,ne+1);if(fe<0){ie=ne+z.end();break}ie=ne+fe,ne=fe===0?ie+1:ie}var _e=W+C.slice(ie);return W="",_e}}function T(F,W,z,M){var C=(W&h.BRANCH_LENGTH)>>7,V=W&h.JUMP_TABLE;if(C===0)return V!==0&&M===V?z:-1;if(V){var ie=M-V;return ie<0||ie>=C?-1:F[z+ie]-1}for(var ne=z,fe=ne+C-1;ne<=fe;){var _e=ne+fe>>>1,we=F[_e];if(we<M)ne=_e+1;else if(we>M)fe=_e-1;else return F[_e+C]}return-1}t.determineBranch=T;var x=O(s.default),P=O(o.default);function B(F,W){return W===void 0&&(W=w.Legacy),x(F,W)}t.decodeHTML=B;function Q(F){return x(F,w.Attribute)}t.decodeHTMLAttribute=Q;function N(F){return x(F,w.Strict)}t.decodeHTMLStrict=N;function D(F){return P(F,w.Strict)}t.decodeXML=D})(eu);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var e=eu,r;(function(f){f[f.Tab=9]="Tab",f[f.NewLine=10]="NewLine",f[f.FormFeed=12]="FormFeed",f[f.CarriageReturn=13]="CarriageReturn",f[f.Space=32]="Space",f[f.ExclamationMark=33]="ExclamationMark",f[f.Number=35]="Number",f[f.Amp=38]="Amp",f[f.SingleQuote=39]="SingleQuote",f[f.DoubleQuote=34]="DoubleQuote",f[f.Dash=45]="Dash",f[f.Slash=47]="Slash",f[f.Zero=48]="Zero",f[f.Nine=57]="Nine",f[f.Semi=59]="Semi",f[f.Lt=60]="Lt",f[f.Eq=61]="Eq",f[f.Gt=62]="Gt",f[f.Questionmark=63]="Questionmark",f[f.UpperA=65]="UpperA",f[f.LowerA=97]="LowerA",f[f.UpperF=70]="UpperF",f[f.LowerF=102]="LowerF",f[f.UpperZ=90]="UpperZ",f[f.LowerZ=122]="LowerZ",f[f.LowerX=120]="LowerX",f[f.OpeningSquareBracket=91]="OpeningSquareBracket"})(r||(r={}));var n;(function(f){f[f.Text=1]="Text",f[f.BeforeTagName=2]="BeforeTagName",f[f.InTagName=3]="InTagName",f[f.InSelfClosingTag=4]="InSelfClosingTag",f[f.BeforeClosingTagName=5]="BeforeClosingTagName",f[f.InClosingTagName=6]="InClosingTagName",f[f.AfterClosingTagName=7]="AfterClosingTagName",f[f.BeforeAttributeName=8]="BeforeAttributeName",f[f.InAttributeName=9]="InAttributeName",f[f.AfterAttributeName=10]="AfterAttributeName",f[f.BeforeAttributeValue=11]="BeforeAttributeValue",f[f.InAttributeValueDq=12]="InAttributeValueDq",f[f.InAttributeValueSq=13]="InAttributeValueSq",f[f.InAttributeValueNq=14]="InAttributeValueNq",f[f.BeforeDeclaration=15]="BeforeDeclaration",f[f.InDeclaration=16]="InDeclaration",f[f.InProcessingInstruction=17]="InProcessingInstruction",f[f.BeforeComment=18]="BeforeComment",f[f.CDATASequence=19]="CDATASequence",f[f.InSpecialComment=20]="InSpecialComment",f[f.InCommentLike=21]="InCommentLike",f[f.BeforeSpecialS=22]="BeforeSpecialS",f[f.SpecialStartSequence=23]="SpecialStartSequence",f[f.InSpecialTag=24]="InSpecialTag",f[f.BeforeEntity=25]="BeforeEntity",f[f.BeforeNumericEntity=26]="BeforeNumericEntity",f[f.InNamedEntity=27]="InNamedEntity",f[f.InNumericEntity=28]="InNumericEntity",f[f.InHexEntity=29]="InHexEntity"})(n||(n={}));function a(f){return f===r.Space||f===r.NewLine||f===r.Tab||f===r.FormFeed||f===r.CarriageReturn}function s(f){return f===r.Slash||f===r.Gt||a(f)}function o(f){return f>=r.Zero&&f<=r.Nine}function u(f){return f>=r.LowerA&&f<=r.LowerZ||f>=r.UpperA&&f<=r.UpperZ}function c(f){return f>=r.UpperA&&f<=r.UpperF||f>=r.LowerA&&f<=r.LowerF}var l;(function(f){f[f.NoValue=0]="NoValue",f[f.Unquoted=1]="Unquoted",f[f.Single=2]="Single",f[f.Double=3]="Double"})(l=t.QuoteType||(t.QuoteType={}));var d={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},h=function(){function f(p,b){var y=p.xmlMode,S=y===void 0?!1:y,w=p.decodeEntities,I=w===void 0?!0:w;this.cbs=b,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=S,this.decodeEntities=I,this.entityTrie=S?e.xmlDecodeTree:e.htmlDecodeTree}return f.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},f.prototype.write=function(p){this.offset+=this.buffer.length,this.buffer=p,this.parse()},f.prototype.end=function(){this.running&&this.finish()},f.prototype.pause=function(){this.running=!1},f.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},f.prototype.getIndex=function(){return this.index},f.prototype.getSectionStart=function(){return this.sectionStart},f.prototype.stateText=function(p){p===r.Lt||!this.decodeEntities&&this.fastForwardTo(r.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&p===r.Amp&&(this.state=n.BeforeEntity)},f.prototype.stateSpecialStartSequence=function(p){var b=this.sequenceIndex===this.currentSequence.length,y=b?s(p):(p|32)===this.currentSequence[this.sequenceIndex];if(!y)this.isSpecial=!1;else if(!b){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(p)},f.prototype.stateInSpecialTag=function(p){if(this.sequenceIndex===this.currentSequence.length){if(p===r.Gt||a(p)){var b=this.index-this.currentSequence.length;if(this.sectionStart<b){var y=this.index;this.index=b,this.cbs.ontext(this.sectionStart,b),this.index=y}this.isSpecial=!1,this.sectionStart=b+2,this.stateInClosingTagName(p);return}this.sequenceIndex=0}(p|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===d.TitleEnd?this.decodeEntities&&p===r.Amp&&(this.state=n.BeforeEntity):this.fastForwardTo(r.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(p===r.Lt)},f.prototype.stateCDATASequence=function(p){p===d.Cdata[this.sequenceIndex]?++this.sequenceIndex===d.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=d.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(p))},f.prototype.fastForwardTo=function(p){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===p)return!0;return this.index=this.buffer.length+this.offset-1,!1},f.prototype.stateInCommentLike=function(p){p===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):p!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},f.prototype.isTagStartChar=function(p){return this.xmlMode?!s(p):u(p)},f.prototype.startSpecial=function(p,b){this.isSpecial=!0,this.currentSequence=p,this.sequenceIndex=b,this.state=n.SpecialStartSequence},f.prototype.stateBeforeTagName=function(p){if(p===r.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(p===r.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(p)){var b=p|32;this.sectionStart=this.index,!this.xmlMode&&b===d.TitleEnd[2]?this.startSpecial(d.TitleEnd,3):this.state=!this.xmlMode&&b===d.ScriptEnd[2]?n.BeforeSpecialS:n.InTagName}else p===r.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(p))},f.prototype.stateInTagName=function(p){s(p)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p))},f.prototype.stateBeforeClosingTagName=function(p){a(p)||(p===r.Gt?this.state=n.Text:(this.state=this.isTagStartChar(p)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},f.prototype.stateInClosingTagName=function(p){(p===r.Gt||a(p))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(p))},f.prototype.stateAfterClosingTagName=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeAttributeName=function(p){p===r.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.baseState=this.state,this.sectionStart=this.index+1):p===r.Slash?this.state=n.InSelfClosingTag:a(p)||(this.state=n.InAttributeName,this.sectionStart=this.index)},f.prototype.stateInSelfClosingTag=function(p){p===r.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):a(p)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p))},f.prototype.stateInAttributeName=function(p){(p===r.Eq||s(p))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(p))},f.prototype.stateAfterAttributeName=function(p){p===r.Eq?this.state=n.BeforeAttributeValue:p===r.Slash||p===r.Gt?(this.cbs.onattribend(l.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p)):a(p)||(this.cbs.onattribend(l.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},f.prototype.stateBeforeAttributeValue=function(p){p===r.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):p===r.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):a(p)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(p))},f.prototype.handleInAttributeValue=function(p,b){p===b||!this.decodeEntities&&this.fastForwardTo(b)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(b===r.DoubleQuote?l.Double:l.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&p===r.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},f.prototype.stateInAttributeValueDoubleQuotes=function(p){this.handleInAttributeValue(p,r.DoubleQuote)},f.prototype.stateInAttributeValueSingleQuotes=function(p){this.handleInAttributeValue(p,r.SingleQuote)},f.prototype.stateInAttributeValueNoQuotes=function(p){a(p)||p===r.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(l.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p)):this.decodeEntities&&p===r.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},f.prototype.stateBeforeDeclaration=function(p){p===r.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=p===r.Dash?n.BeforeComment:n.InDeclaration},f.prototype.stateInDeclaration=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateInProcessingInstruction=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeComment=function(p){p===r.Dash?(this.state=n.InCommentLike,this.currentSequence=d.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},f.prototype.stateInSpecialComment=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeSpecialS=function(p){var b=p|32;b===d.ScriptEnd[3]?this.startSpecial(d.ScriptEnd,4):b===d.StyleEnd[3]?this.startSpecial(d.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(p))},f.prototype.stateBeforeEntity=function(p){this.entityExcess=1,this.entityResult=0,p===r.Number?this.state=n.BeforeNumericEntity:p===r.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=n.InNamedEntity,this.stateInNamedEntity(p))},f.prototype.stateInNamedEntity=function(p){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,p),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var b=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(b){var y=(b>>14)-1;if(!this.allowLegacyEntity()&&p!==r.Semi)this.trieIndex+=y;else{var S=this.index-this.entityExcess+1;S>this.sectionStart&&this.emitPartial(this.sectionStart,S),this.entityResult=this.trieIndex,this.trieIndex+=y,this.entityExcess=0,this.sectionStart=this.index+1,y===0&&this.emitNamedEntity()}}},f.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var p=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(p){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},f.prototype.stateBeforeNumericEntity=function(p){(p|32)===r.LowerX?(this.entityExcess++,this.state=n.InHexEntity):(this.state=n.InNumericEntity,this.stateInNumericEntity(p))},f.prototype.emitNumericEntity=function(p){var b=this.index-this.entityExcess-1,y=b+2+ +(this.state===n.InHexEntity);y!==this.index&&(b>this.sectionStart&&this.emitPartial(this.sectionStart,b),this.sectionStart=this.index+Number(p),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},f.prototype.stateInNumericEntity=function(p){p===r.Semi?this.emitNumericEntity(!0):o(p)?(this.entityResult=this.entityResult*10+(p-r.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.stateInHexEntity=function(p){p===r.Semi?this.emitNumericEntity(!0):o(p)?(this.entityResult=this.entityResult*16+(p-r.Zero),this.entityExcess++):c(p)?(this.entityResult=this.entityResult*16+((p|32)-r.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===n.Text||this.baseState===n.InSpecialTag)},f.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===n.InAttributeValueDq||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},f.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},f.prototype.parse=function(){for(;this.shouldContinue();){var p=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:{this.stateText(p);break}case n.SpecialStartSequence:{this.stateSpecialStartSequence(p);break}case n.InSpecialTag:{this.stateInSpecialTag(p);break}case n.CDATASequence:{this.stateCDATASequence(p);break}case n.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(p);break}case n.InAttributeName:{this.stateInAttributeName(p);break}case n.InCommentLike:{this.stateInCommentLike(p);break}case n.InSpecialComment:{this.stateInSpecialComment(p);break}case n.BeforeAttributeName:{this.stateBeforeAttributeName(p);break}case n.InTagName:{this.stateInTagName(p);break}case n.InClosingTagName:{this.stateInClosingTagName(p);break}case n.BeforeTagName:{this.stateBeforeTagName(p);break}case n.AfterAttributeName:{this.stateAfterAttributeName(p);break}case n.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(p);break}case n.BeforeAttributeValue:{this.stateBeforeAttributeValue(p);break}case n.BeforeClosingTagName:{this.stateBeforeClosingTagName(p);break}case n.AfterClosingTagName:{this.stateAfterClosingTagName(p);break}case n.BeforeSpecialS:{this.stateBeforeSpecialS(p);break}case n.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(p);break}case n.InSelfClosingTag:{this.stateInSelfClosingTag(p);break}case n.InDeclaration:{this.stateInDeclaration(p);break}case n.BeforeDeclaration:{this.stateBeforeDeclaration(p);break}case n.BeforeComment:{this.stateBeforeComment(p);break}case n.InProcessingInstruction:{this.stateInProcessingInstruction(p);break}case n.InNamedEntity:{this.stateInNamedEntity(p);break}case n.BeforeEntity:{this.stateBeforeEntity(p);break}case n.InHexEntity:{this.stateInHexEntity(p);break}case n.InNumericEntity:{this.stateInNumericEntity(p);break}default:this.stateBeforeNumericEntity(p)}this.index++}this.cleanup()},f.prototype.finish=function(){this.state===n.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},f.prototype.handleTrailingData=function(){var p=this.buffer.length+this.offset;this.state===n.InCommentLike?this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,p,0):this.cbs.oncomment(this.sectionStart,p,0):this.state===n.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,p)},f.prototype.emitPartial=function(p,b){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribdata(p,b):this.cbs.ontext(p,b)},f.prototype.emitCodePoint=function(p){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribentity(p):this.cbs.ontextentity(p)},f}();t.default=h})(kx);var yae=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bae=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mae=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yae(e,t,r);return bae(e,t),e};Object.defineProperty(Mp,"__esModule",{value:!0});Mp.Parser=void 0;var b1=mae(kx),IN=eu,ed=new Set(["input","option","optgroup","select","button","datalist","textarea"]),dr=new Set(["p"]),PN=new Set(["thead","tbody"]),DN=new Set(["dd","dt"]),NN=new Set(["rt","rp"]),gae=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",dr],["h1",dr],["h2",dr],["h3",dr],["h4",dr],["h5",dr],["h6",dr],["select",ed],["input",ed],["output",ed],["button",ed],["datalist",ed],["textarea",ed],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",DN],["dt",DN],["address",dr],["article",dr],["aside",dr],["blockquote",dr],["details",dr],["div",dr],["dl",dr],["fieldset",dr],["figcaption",dr],["figure",dr],["footer",dr],["form",dr],["header",dr],["hr",dr],["main",dr],["nav",dr],["ol",dr],["pre",dr],["section",dr],["table",dr],["ul",dr],["rt",NN],["rp",NN],["tbody",PN],["tfoot",PN]]),_ae=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),jN=new Set(["math","svg"]),CN=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),vae=/\s|\//,wae=function(){function t(e,r){r===void 0&&(r={});var n,a,s,o,u;this.options=r,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=(n=r.lowerCaseTags)!==null&&n!==void 0?n:!r.xmlMode,this.lowerCaseAttributeNames=(a=r.lowerCaseAttributeNames)!==null&&a!==void 0?a:!r.xmlMode,this.tokenizer=new((s=r.Tokenizer)!==null&&s!==void 0?s:b1.default)(this.options,this),(u=(o=this.cbs).onparserinit)===null||u===void 0||u.call(o,this)}return t.prototype.ontext=function(e,r){var n,a,s=this.getSlice(e,r);this.endIndex=r-1,(a=(n=this.cbs).ontext)===null||a===void 0||a.call(n,s),this.startIndex=r},t.prototype.ontextentity=function(e){var r,n,a=this.tokenizer.getSectionStart();this.endIndex=a-1,(n=(r=this.cbs).ontext)===null||n===void 0||n.call(r,(0,IN.fromCodePoint)(e)),this.startIndex=a},t.prototype.isVoidElement=function(e){return!this.options.xmlMode&&_ae.has(e)},t.prototype.onopentagname=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)},t.prototype.emitOpenTag=function(e){var r,n,a,s;this.openTagStart=this.startIndex,this.tagname=e;var o=!this.options.xmlMode&&gae.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[this.stack.length-1]);){var u=this.stack.pop();(n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,u,!0)}this.isVoidElement(e)||(this.stack.push(e),jN.has(e)?this.foreignContext.push(!0):CN.has(e)&&this.foreignContext.push(!1)),(s=(a=this.cbs).onopentagname)===null||s===void 0||s.call(a,e),this.cbs.onopentag&&(this.attribs={})},t.prototype.endOpenTag=function(e){var r,n;this.startIndex=this.openTagStart,this.attribs&&((n=(r=this.cbs).onopentag)===null||n===void 0||n.call(r,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},t.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},t.prototype.onclosetag=function(e,r){var n,a,s,o,u,c;this.endIndex=r;var l=this.getSlice(e,r);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(jN.has(l)||CN.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))!this.options.xmlMode&&l==="br"&&((a=(n=this.cbs).onopentagname)===null||a===void 0||a.call(n,"br"),(o=(s=this.cbs).onopentag)===null||o===void 0||o.call(s,"br",{},!0),(c=(u=this.cbs).onclosetag)===null||c===void 0||c.call(u,"br",!1));else{var d=this.stack.lastIndexOf(l);if(d!==-1)if(this.cbs.onclosetag)for(var h=this.stack.length-d;h--;)this.cbs.onclosetag(this.stack.pop(),h!==0);else this.stack.length=d;else!this.options.xmlMode&&l==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=r+1},t.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},t.prototype.closeCurrentTag=function(e){var r,n,a=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===a&&((n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,a,!e),this.stack.pop())},t.prototype.onattribname=function(e,r){this.startIndex=e;var n=this.getSlice(e,r);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n},t.prototype.onattribdata=function(e,r){this.attribvalue+=this.getSlice(e,r)},t.prototype.onattribentity=function(e){this.attribvalue+=(0,IN.fromCodePoint)(e)},t.prototype.onattribend=function(e,r){var n,a;this.endIndex=r,(a=(n=this.cbs).onattribute)===null||a===void 0||a.call(n,this.attribname,this.attribvalue,e===b1.QuoteType.Double?'"':e===b1.QuoteType.Single?"'":e===b1.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},t.prototype.getInstructionName=function(e){var r=e.search(vae),n=r<0?e:e.substr(0,r);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},t.prototype.ondeclaration=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var a=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(a),"!".concat(n))}this.startIndex=r+1},t.prototype.onprocessinginstruction=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var a=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(a),"?".concat(n))}this.startIndex=r+1},t.prototype.oncomment=function(e,r,n){var a,s,o,u;this.endIndex=r,(s=(a=this.cbs).oncomment)===null||s===void 0||s.call(a,this.getSlice(e,r-n)),(u=(o=this.cbs).oncommentend)===null||u===void 0||u.call(o),this.startIndex=r+1},t.prototype.oncdata=function(e,r,n){var a,s,o,u,c,l,d,h,f,p;this.endIndex=r;var b=this.getSlice(e,r-n);this.options.xmlMode||this.options.recognizeCDATA?((s=(a=this.cbs).oncdatastart)===null||s===void 0||s.call(a),(u=(o=this.cbs).ontext)===null||u===void 0||u.call(o,b),(l=(c=this.cbs).oncdataend)===null||l===void 0||l.call(c)):((h=(d=this.cbs).oncomment)===null||h===void 0||h.call(d,"[CDATA[".concat(b,"]]")),(p=(f=this.cbs).oncommentend)===null||p===void 0||p.call(f)),this.startIndex=r+1},t.prototype.onend=function(){var e,r;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n],!0));}(r=(e=this.cbs).onend)===null||r===void 0||r.call(e)},t.prototype.reset=function(){var e,r,n,a;(r=(e=this.cbs).onreset)===null||r===void 0||r.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(a=(n=this.cbs).onparserinit)===null||a===void 0||a.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},t.prototype.parseComplete=function(e){this.reset(),this.end(e)},t.prototype.getSlice=function(e,r){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(e-this.bufferOffset,r-this.bufferOffset);r-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,r-this.bufferOffset);return n},t.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},t.prototype.write=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)},t.prototype.end=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()},t.prototype.pause=function(){this.tokenizer.pause()},t.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},t.prototype.parseChunk=function(e){this.write(e)},t.prototype.done=function(e){this.end(e)},t}();Mp.Parser=wae;var fa={},lc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0;var e;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(e=t.ElementType||(t.ElementType={}));function r(n){return n.type===e.Tag||n.type===e.Script||n.type===e.Style}t.isTag=r,t.Root=e.Root,t.Text=e.Text,t.Directive=e.Directive,t.Comment=e.Comment,t.Script=e.Script,t.Style=e.Style,t.Tag=e.Tag,t.CDATA=e.CDATA,t.Doctype=e.Doctype})(lc);var Ft={},dc=g&&g.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hp=g&&g.__assign||function(){return hp=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},hp.apply(this,arguments)};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.cloneNode=Ft.hasChildren=Ft.isDocument=Ft.isDirective=Ft.isComment=Ft.isText=Ft.isCDATA=Ft.isTag=Ft.Element=Ft.Document=Ft.CDATA=Ft.NodeWithChildren=Ft.ProcessingInstruction=Ft.Comment=Ft.Text=Ft.DataNode=Ft.Node=void 0;var Gi=lc,zx=function(){function t(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(e){return e===void 0&&(e=!1),Wx(this,e)},t}();Ft.Node=zx;var iv=function(t){dc(e,t);function e(r){var n=t.call(this)||this;return n.data=r,n}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(r){this.data=r},enumerable:!1,configurable:!0}),e}(zx);Ft.DataNode=iv;var wM=function(t){dc(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=Gi.ElementType.Text,r}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),e}(iv);Ft.Text=wM;var SM=function(t){dc(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=Gi.ElementType.Comment,r}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),e}(iv);Ft.Comment=SM;var TM=function(t){dc(e,t);function e(r,n){var a=t.call(this,n)||this;return a.name=r,a.type=Gi.ElementType.Directive,a}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(iv);Ft.ProcessingInstruction=TM;var av=function(t){dc(e,t);function e(r){var n=t.call(this)||this;return n.children=r,n}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var r;return(r=this.children[0])!==null&&r!==void 0?r:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(r){this.children=r},enumerable:!1,configurable:!0}),e}(zx);Ft.NodeWithChildren=av;var EM=function(t){dc(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=Gi.ElementType.CDATA,r}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),e}(av);Ft.CDATA=EM;var OM=function(t){dc(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=Gi.ElementType.Root,r}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),e}(av);Ft.Document=OM;var AM=function(t){dc(e,t);function e(r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=r==="script"?Gi.ElementType.Script:r==="style"?Gi.ElementType.Style:Gi.ElementType.Tag);var o=t.call(this,a)||this;return o.name=r,o.attribs=n,o.type=s,o}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(r){this.name=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var r=this;return Object.keys(this.attribs).map(function(n){var a,s;return{name:n,value:r.attribs[n],namespace:(a=r["x-attribsNamespace"])===null||a===void 0?void 0:a[n],prefix:(s=r["x-attribsPrefix"])===null||s===void 0?void 0:s[n]}})},enumerable:!1,configurable:!0}),e}(av);Ft.Element=AM;function xM(t){return(0,Gi.isTag)(t)}Ft.isTag=xM;function RM(t){return t.type===Gi.ElementType.CDATA}Ft.isCDATA=RM;function IM(t){return t.type===Gi.ElementType.Text}Ft.isText=IM;function PM(t){return t.type===Gi.ElementType.Comment}Ft.isComment=PM;function DM(t){return t.type===Gi.ElementType.Directive}Ft.isDirective=DM;function NM(t){return t.type===Gi.ElementType.Root}Ft.isDocument=NM;function Sae(t){return Object.prototype.hasOwnProperty.call(t,"children")}Ft.hasChildren=Sae;function Wx(t,e){e===void 0&&(e=!1);var r;if(IM(t))r=new wM(t.data);else if(PM(t))r=new SM(t.data);else if(xM(t)){var n=e?RT(t.children):[],a=new AM(t.name,hp({},t.attribs),n);n.forEach(function(c){return c.parent=a}),t.namespace!=null&&(a.namespace=t.namespace),t["x-attribsNamespace"]&&(a["x-attribsNamespace"]=hp({},t["x-attribsNamespace"])),t["x-attribsPrefix"]&&(a["x-attribsPrefix"]=hp({},t["x-attribsPrefix"])),r=a}else if(RM(t)){var n=e?RT(t.children):[],s=new EM(n);n.forEach(function(l){return l.parent=s}),r=s}else if(NM(t)){var n=e?RT(t.children):[],o=new OM(n);n.forEach(function(l){return l.parent=o}),t["x-mode"]&&(o["x-mode"]=t["x-mode"]),r=o}else if(DM(t)){var u=new TM(t.name,t.data);t["x-name"]!=null&&(u["x-name"]=t["x-name"],u["x-publicId"]=t["x-publicId"],u["x-systemId"]=t["x-systemId"]),r=u}else throw new Error("Not implemented yet: ".concat(t.type));return r.startIndex=t.startIndex,r.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(r.sourceCodeLocation=t.sourceCodeLocation),r}Ft.cloneNode=Wx;function RT(t){for(var e=t.map(function(n){return Wx(n,!0)}),r=1;r<e.length;r++)e[r].prev=e[r-1],e[r-1].next=e[r];return e}(function(t){var e=g&&g.__createBinding||(Object.create?function(u,c,l,d){d===void 0&&(d=l);var h=Object.getOwnPropertyDescriptor(c,l);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[l]}}),Object.defineProperty(u,d,h)}:function(u,c,l,d){d===void 0&&(d=l),u[d]=c[l]}),r=g&&g.__exportStar||function(u,c){for(var l in u)l!=="default"&&!Object.prototype.hasOwnProperty.call(c,l)&&e(c,u,l)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var n=lc,a=Ft;r(Ft,t);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=function(){function u(c,l,d){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof l=="function"&&(d=l,l=s),typeof c=="object"&&(l=c,c=void 0),this.callback=c??null,this.options=l??s,this.elementCB=d??null}return u.prototype.onparserinit=function(c){this.parser=c},u.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},u.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},u.prototype.onerror=function(c){this.handleCallback(c)},u.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},u.prototype.onopentag=function(c,l){var d=this.options.xmlMode?n.ElementType.Tag:void 0,h=new a.Element(c,l,void 0,d);this.addNode(h),this.tagStack.push(h)},u.prototype.ontext=function(c){var l=this.lastNode;if(l&&l.type===n.ElementType.Text)l.data+=c,this.options.withEndIndices&&(l.endIndex=this.parser.endIndex);else{var d=new a.Text(c);this.addNode(d),this.lastNode=d}},u.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=c;return}var l=new a.Comment(c);this.addNode(l),this.lastNode=l},u.prototype.oncommentend=function(){this.lastNode=null},u.prototype.oncdatastart=function(){var c=new a.Text(""),l=new a.CDATA([c]);this.addNode(l),c.parent=l,this.lastNode=c},u.prototype.oncdataend=function(){this.lastNode=null},u.prototype.onprocessinginstruction=function(c,l){var d=new a.ProcessingInstruction(c,l);this.addNode(d)},u.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},u.prototype.addNode=function(c){var l=this.tagStack[this.tagStack.length-1],d=l.children[l.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),l.children.push(c),d&&(c.prev=d,d.next=c),c.parent=l,this.lastNode=null},u}();t.DomHandler=o,t.default=o})(fa);var Ws={},ua={},$0={},jM={},pl={},Xx={};Object.defineProperty(Xx,"__esModule",{value:!0});function m1(t){for(var e=1;e<t.length;e++)t[e][0]+=t[e-1][0]+1;return t}Xx.default=new Map(m1([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(m1([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(m1([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(m1([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var Xb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.getCodePoint=t.xmlReplacer=void 0,t.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var e=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);t.getCodePoint=String.prototype.codePointAt!=null?function(a,s){return a.codePointAt(s)}:function(a,s){return(a.charCodeAt(s)&64512)===55296?(a.charCodeAt(s)-55296)*1024+a.charCodeAt(s+1)-56320+65536:a.charCodeAt(s)};function r(a){for(var s="",o=0,u;(u=t.xmlReplacer.exec(a))!==null;){var c=u.index,l=a.charCodeAt(c),d=e.get(l);d!==void 0?(s+=a.substring(o,c)+d,o=c+1):(s+="".concat(a.substring(o,c),"&#x").concat((0,t.getCodePoint)(a,c).toString(16),";"),o=t.xmlReplacer.lastIndex+=+((l&64512)===55296))}return s+a.substr(o)}t.encodeXML=r,t.escape=r;function n(a,s){return function(u){for(var c,l=0,d="";c=a.exec(u);)l!==c.index&&(d+=u.substring(l,c.index)),d+=s.get(c[0].charCodeAt(0)),l=c.index+1;return d+u.substring(l)}}t.escapeUTF8=n(/[&<>'"]/g,e),t.escapeAttribute=n(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),t.escapeText=n(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(Xb);var Tae=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pl,"__esModule",{value:!0});pl.encodeNonAsciiHTML=pl.encodeHTML=void 0;var Eae=Tae(Xx),CM=Xb,Oae=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function Aae(t){return FM(Oae,t)}pl.encodeHTML=Aae;function xae(t){return FM(CM.xmlReplacer,t)}pl.encodeNonAsciiHTML=xae;function FM(t,e){for(var r="",n=0,a;(a=t.exec(e))!==null;){var s=a.index;r+=e.substring(n,s);var o=e.charCodeAt(s),u=Eae.default.get(o);if(typeof u=="object"){if(s+1<e.length){var c=e.charCodeAt(s+1),l=typeof u.n=="number"?u.n===c?u.o:void 0:u.n.get(c);if(l!==void 0){r+=l,n=t.lastIndex+=1;continue}}u=u.v}if(u!==void 0)r+=u,n=s+1;else{var d=(0,CM.getCodePoint)(e,s);r+="&#x".concat(d.toString(16),";"),n=t.lastIndex+=+(d!==o)}}return r+e.substr(n)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLAttribute=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.DecodingMode=t.EntityDecoder=t.encodeHTML5=t.encodeHTML4=t.encodeNonAsciiHTML=t.encodeHTML=t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.encode=t.decodeStrict=t.decode=t.EncodingMode=t.EntityLevel=void 0;var e=eu,r=pl,n=Xb,a;(function(f){f[f.XML=0]="XML",f[f.HTML=1]="HTML"})(a=t.EntityLevel||(t.EntityLevel={}));var s;(function(f){f[f.UTF8=0]="UTF8",f[f.ASCII=1]="ASCII",f[f.Extensive=2]="Extensive",f[f.Attribute=3]="Attribute",f[f.Text=4]="Text"})(s=t.EncodingMode||(t.EncodingMode={}));function o(f,p){p===void 0&&(p=a.XML);var b=typeof p=="number"?p:p.level;if(b===a.HTML){var y=typeof p=="object"?p.mode:void 0;return(0,e.decodeHTML)(f,y)}return(0,e.decodeXML)(f)}t.decode=o;function u(f,p){var b;p===void 0&&(p=a.XML);var y=typeof p=="number"?{level:p}:p;return(b=y.mode)!==null&&b!==void 0||(y.mode=e.DecodingMode.Strict),o(f,y)}t.decodeStrict=u;function c(f,p){p===void 0&&(p=a.XML);var b=typeof p=="number"?{level:p}:p;return b.mode===s.UTF8?(0,n.escapeUTF8)(f):b.mode===s.Attribute?(0,n.escapeAttribute)(f):b.mode===s.Text?(0,n.escapeText)(f):b.level===a.HTML?b.mode===s.ASCII?(0,r.encodeNonAsciiHTML)(f):(0,r.encodeHTML)(f):(0,n.encodeXML)(f)}t.encode=c;var l=Xb;Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return l.encodeXML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return l.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return l.escapeUTF8}}),Object.defineProperty(t,"escapeAttribute",{enumerable:!0,get:function(){return l.escapeAttribute}}),Object.defineProperty(t,"escapeText",{enumerable:!0,get:function(){return l.escapeText}});var d=pl;Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return d.encodeNonAsciiHTML}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return d.encodeHTML}});var h=eu;Object.defineProperty(t,"EntityDecoder",{enumerable:!0,get:function(){return h.EntityDecoder}}),Object.defineProperty(t,"DecodingMode",{enumerable:!0,get:function(){return h.DecodingMode}}),Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return h.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTMLAttribute",{enumerable:!0,get:function(){return h.decodeHTMLAttribute}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return h.decodeXML}})})(jM);var df={};Object.defineProperty(df,"__esModule",{value:!0});df.attributeNames=df.elementNames=void 0;df.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(t){return[t.toLowerCase(),t]}));df.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(t){return[t.toLowerCase(),t]}));var Ed=g&&g.__assign||function(){return Ed=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ed.apply(this,arguments)},Rae=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Iae=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Pae=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Rae(e,t,r);return Iae(e,t),e};Object.defineProperty($0,"__esModule",{value:!0});$0.render=void 0;var Eo=Pae(lc),Kb=jM,MM=df,Dae=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function Nae(t){return t.replace(/"/g,"&quot;")}function jae(t,e){var r;if(t){var n=((r=e.encodeEntities)!==null&&r!==void 0?r:e.decodeEntities)===!1?Nae:e.xmlMode||e.encodeEntities!=="utf8"?Kb.encodeXML:Kb.escapeAttribute;return Object.keys(t).map(function(a){var s,o,u=(s=t[a])!==null&&s!==void 0?s:"";return e.xmlMode==="foreign"&&(a=(o=MM.attributeNames.get(a))!==null&&o!==void 0?o:a),!e.emptyAttrs&&!e.xmlMode&&u===""?a:"".concat(a,'="').concat(n(u),'"')}).join(" ")}}var FN=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function sv(t,e){e===void 0&&(e={});for(var r=("length"in t)?t:[t],n="",a=0;a<r.length;a++)n+=Cae(r[a],e);return n}$0.render=sv;$0.default=sv;function Cae(t,e){switch(t.type){case Eo.Root:return sv(t.children,e);case Eo.Doctype:case Eo.Directive:return Bae(t);case Eo.Comment:return qae(t);case Eo.CDATA:return Uae(t);case Eo.Script:case Eo.Style:case Eo.Tag:return Lae(t,e);case Eo.Text:return $ae(t,e)}}var Fae=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),Mae=new Set(["svg","math"]);function Lae(t,e){var r;e.xmlMode==="foreign"&&(t.name=(r=MM.elementNames.get(t.name))!==null&&r!==void 0?r:t.name,t.parent&&Fae.has(t.parent.name)&&(e=Ed(Ed({},e),{xmlMode:!1}))),!e.xmlMode&&Mae.has(t.name)&&(e=Ed(Ed({},e),{xmlMode:"foreign"}));var n="<".concat(t.name),a=jae(t.attribs,e);return a&&(n+=" ".concat(a)),t.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&FN.has(t.name))?(e.xmlMode||(n+=" "),n+="/>"):(n+=">",t.children.length>0&&(n+=sv(t.children,e)),(e.xmlMode||!FN.has(t.name))&&(n+="</".concat(t.name,">"))),n}function Bae(t){return"<".concat(t.data,">")}function $ae(t,e){var r,n=t.data||"";return((r=e.encodeEntities)!==null&&r!==void 0?r:e.decodeEntities)!==!1&&!(!e.xmlMode&&t.parent&&Dae.has(t.parent.name))&&(n=e.xmlMode||e.encodeEntities!=="utf8"?(0,Kb.encodeXML)(n):(0,Kb.escapeText)(n)),n}function Uae(t){return"<![CDATA[".concat(t.children[0].data,"]]>")}function qae(t){return"<!--".concat(t.data,"-->")}var Vae=g&&g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ua,"__esModule",{value:!0});ua.innerText=ua.textContent=ua.getText=ua.getInnerHTML=ua.getOuterHTML=void 0;var Xs=fa,Hae=Vae($0),kae=lc;function LM(t,e){return(0,Hae.default)(t,e)}ua.getOuterHTML=LM;function Qae(t,e){return(0,Xs.hasChildren)(t)?t.children.map(function(r){return LM(r,e)}).join(""):""}ua.getInnerHTML=Qae;function mb(t){return Array.isArray(t)?t.map(mb).join(""):(0,Xs.isTag)(t)?t.name==="br"?`
`:mb(t.children):(0,Xs.isCDATA)(t)?mb(t.children):(0,Xs.isText)(t)?t.data:""}ua.getText=mb;function wO(t){return Array.isArray(t)?t.map(wO).join(""):(0,Xs.hasChildren)(t)&&!(0,Xs.isComment)(t)?wO(t.children):(0,Xs.isText)(t)?t.data:""}ua.textContent=wO;function SO(t){return Array.isArray(t)?t.map(SO).join(""):(0,Xs.hasChildren)(t)&&(t.type===kae.ElementType.Tag||(0,Xs.isCDATA)(t))?SO(t.children):(0,Xs.isText)(t)?t.data:""}ua.innerText=SO;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.prevElementSibling=xn.nextElementSibling=xn.getName=xn.hasAttrib=xn.getAttributeValue=xn.getSiblings=xn.getParent=xn.getChildren=void 0;var Kx=fa;function BM(t){return(0,Kx.hasChildren)(t)?t.children:[]}xn.getChildren=BM;function $M(t){return t.parent||null}xn.getParent=$M;function Gae(t){var e,r,n=$M(t);if(n!=null)return BM(n);for(var a=[t],s=t.prev,o=t.next;s!=null;)a.unshift(s),e=s,s=e.prev;for(;o!=null;)a.push(o),r=o,o=r.next;return a}xn.getSiblings=Gae;function zae(t,e){var r;return(r=t.attribs)===null||r===void 0?void 0:r[e]}xn.getAttributeValue=zae;function Wae(t,e){return t.attribs!=null&&Object.prototype.hasOwnProperty.call(t.attribs,e)&&t.attribs[e]!=null}xn.hasAttrib=Wae;function Xae(t){return t.name}xn.getName=Xae;function Kae(t){for(var e,r=t.next;r!==null&&!(0,Kx.isTag)(r);)e=r,r=e.next;return r}xn.nextElementSibling=Kae;function Jae(t){for(var e,r=t.prev;r!==null&&!(0,Kx.isTag)(r);)e=r,r=e.prev;return r}xn.prevElementSibling=Jae;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.prepend=Hi.prependChild=Hi.append=Hi.appendChild=Hi.replaceElement=Hi.removeElement=void 0;function U0(t){if(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent){var e=t.parent.children,r=e.lastIndexOf(t);r>=0&&e.splice(r,1)}t.next=null,t.prev=null,t.parent=null}Hi.removeElement=U0;function Yae(t,e){var r=e.prev=t.prev;r&&(r.next=e);var n=e.next=t.next;n&&(n.prev=e);var a=e.parent=t.parent;if(a){var s=a.children;s[s.lastIndexOf(t)]=e,t.parent=null}}Hi.replaceElement=Yae;function Zae(t,e){if(U0(e),e.next=null,e.parent=t,t.children.push(e)>1){var r=t.children[t.children.length-2];r.next=e,e.prev=r}else e.prev=null}Hi.appendChild=Zae;function ese(t,e){U0(e);var r=t.parent,n=t.next;if(e.next=n,e.prev=t,t.next=e,e.parent=r,n){if(n.prev=e,r){var a=r.children;a.splice(a.lastIndexOf(n),0,e)}}else r&&r.children.push(e)}Hi.append=ese;function tse(t,e){if(U0(e),e.parent=t,e.prev=null,t.children.unshift(e)!==1){var r=t.children[1];r.prev=e,e.next=r}else e.next=null}Hi.prependChild=tse;function rse(t,e){U0(e);var r=t.parent;if(r){var n=r.children;n.splice(n.indexOf(t),0,e)}t.prev&&(t.prev.next=e),e.parent=r,e.prev=t.prev,e.next=t,t.prev=e}Hi.prepend=rse;var xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.findAll=xi.existsOne=xi.findOne=xi.findOneChild=xi.find=xi.filter=void 0;var ov=fa;function nse(t,e,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),UM(t,Array.isArray(e)?e:[e],r,n)}xi.filter=nse;function UM(t,e,r,n){for(var a=[],s=[e],o=[0];;){if(o[0]>=s[0].length){if(o.length===1)return a;s.shift(),o.shift();continue}var u=s[0][o[0]++];if(t(u)&&(a.push(u),--n<=0))return a;r&&(0,ov.hasChildren)(u)&&u.children.length>0&&(o.unshift(0),s.unshift(u.children))}}xi.find=UM;function ise(t,e){return e.find(t)}xi.findOneChild=ise;function qM(t,e,r){r===void 0&&(r=!0);for(var n=null,a=0;a<e.length&&!n;a++){var s=e[a];if((0,ov.isTag)(s))t(s)?n=s:r&&s.children.length>0&&(n=qM(t,s.children,!0));else continue}return n}xi.findOne=qM;function VM(t,e){return e.some(function(r){return(0,ov.isTag)(r)&&(t(r)||VM(t,r.children))})}xi.existsOne=VM;function ase(t,e){for(var r=[],n=[e],a=[0];;){if(a[0]>=n[0].length){if(n.length===1)return r;n.shift(),a.shift();continue}var s=n[0][a[0]++];(0,ov.isTag)(s)&&(t(s)&&r.push(s),s.children.length>0&&(a.unshift(0),n.unshift(s.children)))}}xi.findAll=ase;var ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.getElementsByTagType=ca.getElementsByTagName=ca.getElementById=ca.getElements=ca.testElement=void 0;var Gc=fa,uv=xi,Jb={tag_name:function(t){return typeof t=="function"?function(e){return(0,Gc.isTag)(e)&&t(e.name)}:t==="*"?Gc.isTag:function(e){return(0,Gc.isTag)(e)&&e.name===t}},tag_type:function(t){return typeof t=="function"?function(e){return t(e.type)}:function(e){return e.type===t}},tag_contains:function(t){return typeof t=="function"?function(e){return(0,Gc.isText)(e)&&t(e.data)}:function(e){return(0,Gc.isText)(e)&&e.data===t}}};function HM(t,e){return typeof e=="function"?function(r){return(0,Gc.isTag)(r)&&e(r.attribs[t])}:function(r){return(0,Gc.isTag)(r)&&r.attribs[t]===e}}function sse(t,e){return function(r){return t(r)||e(r)}}function kM(t){var e=Object.keys(t).map(function(r){var n=t[r];return Object.prototype.hasOwnProperty.call(Jb,r)?Jb[r](n):HM(r,n)});return e.length===0?null:e.reduce(sse)}function ose(t,e){var r=kM(t);return r?r(e):!0}ca.testElement=ose;function use(t,e,r,n){n===void 0&&(n=1/0);var a=kM(t);return a?(0,uv.filter)(a,e,r,n):[]}ca.getElements=use;function cse(t,e,r){return r===void 0&&(r=!0),Array.isArray(e)||(e=[e]),(0,uv.findOne)(HM("id",t),e,r)}ca.getElementById=cse;function lse(t,e,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),(0,uv.filter)(Jb.tag_name(t),e,r,n)}ca.getElementsByTagName=lse;function dse(t,e,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),(0,uv.filter)(Jb.tag_type(t),e,r,n)}ca.getElementsByTagType=dse;var QM={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.DocumentPosition=t.removeSubsets=void 0;var e=fa;function r(o){for(var u=o.length;--u>=0;){var c=o[u];if(u>0&&o.lastIndexOf(c,u-1)>=0){o.splice(u,1);continue}for(var l=c.parent;l;l=l.parent)if(o.includes(l)){o.splice(u,1);break}}return o}t.removeSubsets=r;var n;(function(o){o[o.DISCONNECTED=1]="DISCONNECTED",o[o.PRECEDING=2]="PRECEDING",o[o.FOLLOWING=4]="FOLLOWING",o[o.CONTAINS=8]="CONTAINS",o[o.CONTAINED_BY=16]="CONTAINED_BY"})(n=t.DocumentPosition||(t.DocumentPosition={}));function a(o,u){var c=[],l=[];if(o===u)return 0;for(var d=(0,e.hasChildren)(o)?o:o.parent;d;)c.unshift(d),d=d.parent;for(d=(0,e.hasChildren)(u)?u:u.parent;d;)l.unshift(d),d=d.parent;for(var h=Math.min(c.length,l.length),f=0;f<h&&c[f]===l[f];)f++;if(f===0)return n.DISCONNECTED;var p=c[f-1],b=p.children,y=c[f],S=l[f];return b.indexOf(y)>b.indexOf(S)?p===u?n.FOLLOWING|n.CONTAINED_BY:n.FOLLOWING:p===o?n.PRECEDING|n.CONTAINS:n.PRECEDING}t.compareDocumentPosition=a;function s(o){return o=o.filter(function(u,c,l){return!l.includes(u,c+1)}),o.sort(function(u,c){var l=a(u,c);return l&n.PRECEDING?-1:l&n.FOLLOWING?1:0}),o}t.uniqueSort=s})(QM);var cv={};Object.defineProperty(cv,"__esModule",{value:!0});cv.getFeed=void 0;var fse=ua,q0=ca;function hse(t){var e=Yb(gse,t);return e?e.name==="feed"?pse(e):yse(e):null}cv.getFeed=hse;function pse(t){var e,r=t.children,n={type:"atom",items:(0,q0.getElementsByTagName)("entry",r).map(function(o){var u,c=o.children,l={media:GM(c)};Vi(l,"id","id",c),Vi(l,"title","title",c);var d=(u=Yb("link",c))===null||u===void 0?void 0:u.attribs.href;d&&(l.link=d);var h=Bu("summary",c)||Bu("content",c);h&&(l.description=h);var f=Bu("updated",c);return f&&(l.pubDate=new Date(f)),l})};Vi(n,"id","id",r),Vi(n,"title","title",r);var a=(e=Yb("link",r))===null||e===void 0?void 0:e.attribs.href;a&&(n.link=a),Vi(n,"description","subtitle",r);var s=Bu("updated",r);return s&&(n.updated=new Date(s)),Vi(n,"author","email",r,!0),n}function yse(t){var e,r,n=(r=(e=Yb("channel",t.children))===null||e===void 0?void 0:e.children)!==null&&r!==void 0?r:[],a={type:t.name.substr(0,3),id:"",items:(0,q0.getElementsByTagName)("item",t.children).map(function(o){var u=o.children,c={media:GM(u)};Vi(c,"id","guid",u),Vi(c,"title","title",u),Vi(c,"link","link",u),Vi(c,"description","description",u);var l=Bu("pubDate",u)||Bu("dc:date",u);return l&&(c.pubDate=new Date(l)),c})};Vi(a,"title","title",n),Vi(a,"link","link",n),Vi(a,"description","description",n);var s=Bu("lastBuildDate",n);return s&&(a.updated=new Date(s)),Vi(a,"author","managingEditor",n,!0),a}var bse=["url","type","lang"],mse=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function GM(t){return(0,q0.getElementsByTagName)("media:content",t).map(function(e){for(var r=e.attribs,n={medium:r.medium,isDefault:!!r.isDefault},a=0,s=bse;a<s.length;a++){var o=s[a];r[o]&&(n[o]=r[o])}for(var u=0,c=mse;u<c.length;u++){var o=c[u];r[o]&&(n[o]=parseInt(r[o],10))}return r.expression&&(n.expression=r.expression),n})}function Yb(t,e){return(0,q0.getElementsByTagName)(t,e,!0,1)[0]}function Bu(t,e,r){return r===void 0&&(r=!1),(0,fse.textContent)((0,q0.getElementsByTagName)(t,e,r,1)).trim()}function Vi(t,e,r,n,a){a===void 0&&(a=!1);var s=Bu(r,n,a);s&&(t[e]=s)}function gse(t){return t==="rss"||t==="feed"||t==="rdf:RDF"}(function(t){var e=g&&g.__createBinding||(Object.create?function(a,s,o,u){u===void 0&&(u=o);var c=Object.getOwnPropertyDescriptor(s,o);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(a,u,c)}:function(a,s,o,u){u===void 0&&(u=o),a[u]=s[o]}),r=g&&g.__exportStar||function(a,s){for(var o in a)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,a,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,r(ua,t),r(xn,t),r(Hi,t),r(xi,t),r(ca,t),r(QM,t),r(cv,t);var n=fa;Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})})(Ws);(function(t){var e=g&&g.__createBinding||(Object.create?function(w,I,O,T){T===void 0&&(T=O);var x=Object.getOwnPropertyDescriptor(I,O);(!x||("get"in x?!I.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return I[O]}}),Object.defineProperty(w,T,x)}:function(w,I,O,T){T===void 0&&(T=O),w[T]=I[O]}),r=g&&g.__setModuleDefault||(Object.create?function(w,I){Object.defineProperty(w,"default",{enumerable:!0,value:I})}:function(w,I){w.default=I}),n=g&&g.__importStar||function(w){if(w&&w.__esModule)return w;var I={};if(w!=null)for(var O in w)O!=="default"&&Object.prototype.hasOwnProperty.call(w,O)&&e(I,w,O);return r(I,w),I},a=g&&g.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var s=Mp,o=Mp;Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return o.Parser}});var u=fa,c=fa;Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function l(w,I){var O=new u.DomHandler(void 0,I);return new s.Parser(O,I).end(w),O.root}t.parseDocument=l;function d(w,I){return l(w,I).children}t.parseDOM=d;function h(w,I,O){var T=new u.DomHandler(w,I,O);return new s.Parser(T,I)}t.createDomStream=h;var f=kx;Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return a(f).default}}),t.ElementType=n(lc);var p=Ws,b=Ws;Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return b.getFeed}});var y={xmlMode:!0};function S(w,I){return I===void 0&&(I=y),(0,p.getFeed)(d(w,I))}t.parseFeed=S,t.DomUtils=n(Ws)})(vM);const _se={"@context":{alternate:"http://www.w3.org/1999/xhtml/vocab#alternate",appendix:"http://www.w3.org/1999/xhtml/vocab#appendix",cite:"http://www.w3.org/1999/xhtml/vocab#cite",bookmark:"http://www.w3.org/1999/xhtml/vocab#bookmark",contents:"http://www.w3.org/1999/xhtml/vocab#contents",chapter:"http://www.w3.org/1999/xhtml/vocab#chapter",copyright:"http://www.w3.org/1999/xhtml/vocab#copyright",first:"http://www.w3.org/1999/xhtml/vocab#first",glossary:"http://www.w3.org/1999/xhtml/vocab#glossary",help:"http://www.w3.org/1999/xhtml/vocab#help",icon:"http://www.w3.org/1999/xhtml/vocab#icon",index:"http://www.w3.org/1999/xhtml/vocab#index",last:"http://www.w3.org/1999/xhtml/vocab#last",license:"http://www.w3.org/1999/xhtml/vocab#license",meta:"http://www.w3.org/1999/xhtml/vocab#meta",next:"http://www.w3.org/1999/xhtml/vocab#next",prev:"http://www.w3.org/1999/xhtml/vocab#prev",previous:"http://www.w3.org/1999/xhtml/vocab#previous",section:"http://www.w3.org/1999/xhtml/vocab#section",start:"http://www.w3.org/1999/xhtml/vocab#start",stylesheet:"http://www.w3.org/1999/xhtml/vocab#stylesheet",subsection:"http://www.w3.org/1999/xhtml/vocab#subsection",top:"http://www.w3.org/1999/xhtml/vocab#top",up:"http://www.w3.org/1999/xhtml/vocab#up",p3pv1:"http://www.w3.org/1999/xhtml/vocab#p3pv1"}},vse={"@context":{as:"https://www.w3.org/ns/activitystreams#",cat:"http://www.w3.org/ns/dcat#",cc:"http://creativecommons.org/ns#",cnt:"http://www.w3.org/2008/content#",csvw:"http://www.w3.org/ns/csvw#",ctag:"http://commontag.org/ns#",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcat:"http://www.w3.org/ns/dcat#",dcterms:"http://purl.org/dc/terms/",dqv:"http://www.w3.org/ns/dqv#",duv:"https://www.w3.org/TR/vocab-duv#",earl:"http://www.w3.org/ns/earl#",foaf:"http://xmlns.com/foaf/0.1/",gldp:"http://www.w3.org/ns/people#",gr:"http://purl.org/goodrelations/v1#",grddl:"http://www.w3.org/2003/g/data-view#",ht:"http://www.w3.org/2006/http#",ical:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",ma:"http://www.w3.org/ns/ma-ont#",oa:"http://www.w3.org/ns/oa#",odrl:"http://www.w3.org/ns/odrl/2/",og:"http://ogp.me/ns#",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",prov:"http://www.w3.org/ns/prov#",ptr:"http://www.w3.org/2009/pointers#",qb:"http://purl.org/linked-data/cube#",rev:"http://purl.org/stuff/rev#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfa:"http://www.w3.org/ns/rdfa#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rif:"http://www.w3.org/2007/rif#",rr:"http://www.w3.org/ns/r2rml#",schema:"http://schema.org/",sd:"http://www.w3.org/ns/sparql-service-description#",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",ssn:"http://www.w3.org/ns/ssn/",sosa:"http://www.w3.org/ns/sosa/",time:"http://www.w3.org/2006/time#",v:"http://rdf.data-vocabulary.org/#",vcard:"http://www.w3.org/2006/vcard/ns#",void:"http://rdfs.org/ns/void#",wdr:"http://www.w3.org/2007/05/powder#",wdrs:"http://www.w3.org/2007/05/powder-s#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",describedby:"http://www.w3.org/2007/05/powder-s#describedby",license:"http://www.w3.org/1999/xhtml/vocab#license",role:"http://www.w3.org/1999/xhtml/vocab#role"}};var tc={};Object.defineProperty(tc,"__esModule",{value:!0});tc.RDFA_CONTENTTYPES=tc.RDFA_FEATURES=void 0;tc.RDFA_FEATURES={"":{baseTag:!0,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},core:{baseTag:!1,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!1,datetimeAttribute:!1,timeTag:!1,htmlDatatype:!1,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!1},html:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0},xhtml:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},xml:{baseTag:!1,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!1,inheritSubjectInHeadBody:!1,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!1,copyRdfaPatterns:!1,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0}};tc.RDFA_CONTENTTYPES={"text/html":"html","application/xhtml+xml":"xhtml","application/xml":"xml","text/xml":"xml","image/svg+xml":"xml"};var V0={};Object.defineProperty(V0,"__esModule",{value:!0});V0.Util=void 0;const g1=Na,wse=tc,Sse=yt;let Il=class _u{constructor(e,r){this.dataFactory=e||new Sse.DataFactory,this.baseIRI=this.dataFactory.namedNode(r||""),this.baseIRIDocument=this.baseIRI}static parsePrefixes(e,r,n){const a={};if(n)for(const s in e)s.startsWith("xmlns")&&(a[s.substr(6)]=e[s]);if(e.prefix||Object.keys(a).length>0){const s=Object.assign(Object.assign({},r),a);if(e.prefix){let o;for(;o=_u.PREFIX_REGEX.exec(e.prefix);)s[o[1]]=o[2]}return s}else return r}static expandPrefixedTerm(e,r){const n=e.indexOf(":");let a,s;if(n>=0&&(a=e.substr(0,n),s=e.substr(n+1)),a==="")return"http://www.w3.org/1999/xhtml/vocab#"+s;if(a){const o=r.prefixesAll[a];if(o)return o+s}if(e){const o=r.prefixesAll[e.toLocaleLowerCase()];if(o)return o}return e}static isValidIri(e){return _u.IRI_REGEX.test(e)}static contentTypeToProfile(e){return wse.RDFA_CONTENTTYPES[e]||""}getBaseIRI(e){let r=e;const n=r.indexOf("#");return n>=0&&(r=r.substr(0,n)),this.dataFactory.namedNode((0,g1.resolve)(r,this.baseIRI.value))}getResourceOrBaseIri(e,r){return e===!0?this.getBaseIriTerm(r):e}getBaseIriTerm(e){return e.localBaseIRI||this.baseIRI}createVocabIris(e,r,n,a){return e.split(/\s+/).filter(s=>s&&(n||s.indexOf(":")>=0)).map(s=>this.createIri(s,r,!0,!0,a)).filter(s=>s!=null)}createLiteral(e,r){if(r.interpretObjectAsTime&&!r.datatype){for(const n of _u.TIME_REGEXES)if(e.match(n.regex)){r.datatype=this.dataFactory.namedNode(_u.XSD+n.type);break}}return this.dataFactory.literal(e,r.datatype||r.language)}createBlankNode(){return this.blankNodeFactory?this.blankNodeFactory():this.dataFactory.blankNode()}createIri(e,r,n,a,s){if(e=e||"",!a)return n||(e=(0,g1.resolve)(e,this.getBaseIriTerm(r).value)),_u.isValidIri(e)?this.dataFactory.namedNode(e):null;if(e.length>0&&e[0]==="["&&e[e.length-1]==="]"&&(e=e.substr(1,e.length-2),e.indexOf(":")<0))return null;if(e.startsWith("_:"))return s?this.dataFactory.blankNode(e.substr(2)||"b_identity"):null;if(n&&r.vocab&&e.indexOf(":")<0)return this.dataFactory.namedNode(r.vocab+e);let o=_u.expandPrefixedTerm(e,r);return n?e!==o&&(o=(0,g1.resolve)(o,this.baseIRIDocument.value)):o=(0,g1.resolve)(o,this.getBaseIriTerm(r).value),_u.isValidIri(o)?this.dataFactory.namedNode(o):null}};V0.Util=Il;Il.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";Il.XSD="http://www.w3.org/2001/XMLSchema#";Il.RDFA="http://www.w3.org/ns/rdfa#";Il.PREFIX_REGEX=/\s*([^:\s]*)*:\s*([^\s]*)*\s*/g;Il.TIME_REGEXES=[{regex:/^-?P([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9])?S)?)?$/,type:"duration"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"dateTime"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,type:"date"},{regex:/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"time"},{regex:/^[0-9]+-[0-9][0-9]$/,type:"gYearMonth"},{regex:/^[0-9]+$/,type:"gYear"}];Il.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`]*$/;Object.defineProperty(nv,"__esModule",{value:!0});nv.RdfaParser=void 0;const Tse=vM,MN=Kt,Ese=_se,Ose=vse,Ase=tc,Ui=V0;class Jx extends MN.Transform{constructor(e){super({readableObjectMode:!0}),this.activeTagStack=[],e=e||{},this.options=e,this.util=new Ui.Util(e.dataFactory,e.baseIRI),this.defaultGraph=e.defaultGraph||this.util.dataFactory.defaultGraph();const r=e.contentType?Ui.Util.contentTypeToProfile(e.contentType):e.profile||"";this.features=e.features||Ase.RDFA_FEATURES[r],this.htmlParseListener=e.htmlParseListener,this.rdfaPatterns=this.features.copyRdfaPatterns?{}:null,this.pendingRdfaPatternCopies=this.features.copyRdfaPatterns?{}:null,this.parser=this.initializeParser(r==="xml"),this.activeTagStack.push({incompleteTriples:[],inlist:!1,language:e.language,listMapping:{},listMappingLocal:{},name:"",prefixesAll:Object.assign(Object.assign({},Ose["@context"]),this.features.xhtmlInitialContext?Ese["@context"]:{}),prefixesCustom:{},skipElement:!1,vocab:e.vocab})}import(e){const r=new MN.PassThrough({readableObjectMode:!0});e.on("error",a=>n.emit("error",a)),e.on("data",a=>r.push(a)),e.on("end",()=>r.push(null));const n=r.pipe(new Jx(this.options));return n}_transform(e,r,n){this.parser.write(e.toString()),n()}_flush(e){this.parser.end(),e()}onTagOpen(e,r){let n=this.activeTagStack.length-1;for(;n>0&&this.activeTagStack[n].skipElement;)n--;let a=this.activeTagStack[n];n!==this.activeTagStack.length-1&&(a=Object.assign(Object.assign({},a),{language:this.activeTagStack[this.activeTagStack.length-1].language,prefixesAll:this.activeTagStack[this.activeTagStack.length-1].prefixesAll,prefixesCustom:this.activeTagStack[this.activeTagStack.length-1].prefixesCustom,vocab:this.activeTagStack[this.activeTagStack.length-1].vocab}));const s={collectChildTags:a.collectChildTags,incompleteTriples:[],inlist:"inlist"in r,listMapping:[],listMappingLocal:a.listMapping,localBaseIRI:a.localBaseIRI,name:e,prefixesAll:null,prefixesCustom:null,skipElement:!1};if(this.activeTagStack.push(s),s.collectChildTags){for(const b of Object.keys(a.prefixesCustom).sort()){const y=a.prefixesCustom[b],S=b===""?"xmlns":"xmlns:"+b;S in r||(r[S]=y)}const p=Object.keys(r).map(b=>`${b}="${r[b]}"`).join(" ");if(s.text=[`<${e}${p?" "+p:""}>`],this.features.skipHandlingXmlLiteralChildren)return}let o=!0,u=!0;if(this.features.onlyAllowUriRelRevIfProperty&&("property"in r&&"rel"in r&&(o=!1,r.rel.indexOf(":")<0&&delete r.rel),"property"in r&&"rev"in r&&(u=!1,r.rev.indexOf(":")<0&&delete r.rev)),this.features.copyRdfaPatterns){if(a.collectedPatternTag){const p={attributes:r,children:[],name:e,referenced:!1,rootPattern:!1,text:[]};a.collectedPatternTag.children.push(p),s.collectedPatternTag=p;return}if(r.typeof==="rdfa:Pattern"){s.collectedPatternTag={attributes:r,children:[],name:e,parentTag:a,referenced:!1,rootPattern:!0,text:[]};return}if(r.property==="rdfa:copy"){const p=r.resource||r.href||r.src;this.rdfaPatterns[p]?this.emitPatternCopy(a,this.rdfaPatterns[p],p):(this.pendingRdfaPatternCopies[p]||(this.pendingRdfaPatternCopies[p]=[]),this.pendingRdfaPatternCopies[p].push(a));return}}this.features.baseTag&&e==="base"&&r.href&&(this.util.baseIRI=this.util.getBaseIRI(r.href)),this.features.xmlBase&&r["xml:base"]&&(s.localBaseIRI=this.util.getBaseIRI(r["xml:base"])),this.features.timeTag&&e==="time"&&!r.datatype&&(s.interpretObjectAsTime=!0);let c,l,d;if("vocab"in r?r.vocab?(s.vocab=r.vocab,this.emitTriple(this.util.getBaseIriTerm(s),this.util.dataFactory.namedNode(Ui.Util.RDFA+"usesVocabulary"),this.util.dataFactory.namedNode(s.vocab))):s.vocab=this.activeTagStack[0].vocab:s.vocab=a.vocab,s.prefixesCustom=Ui.Util.parsePrefixes(r,a.prefixesCustom,this.features.xmlnsPrefixMappings),s.prefixesAll=Object.keys(s.prefixesCustom).length>0?Object.assign(Object.assign({},a.prefixesAll),s.prefixesCustom):a.prefixesAll,this.features.roleAttribute&&r.role){const p=r.id?this.util.createIri("#"+r.id,s,!1,!1,!1):this.util.createBlankNode(),b=s.vocab;s.vocab="http://www.w3.org/1999/xhtml/vocab#";for(const y of this.util.createVocabIris(r.role,s,!0,!1))this.emitTriple(p,this.util.dataFactory.namedNode("http://www.w3.org/1999/xhtml/vocab#role"),y);s.vocab=b}"xml:lang"in r||this.features.langAttribute&&"lang"in r?s.language=r["xml:lang"]||r.lang:s.language=a.language;const h=this.activeTagStack.length===2;if(!("rel"in r)&&!("rev"in r)?"property"in r&&!("content"in r)&&!("datatype"in r)?("about"in r?(c=this.util.createIri(r.about,s,!1,!0,!0),s.explicitNewSubject=!!c):h?c=!0:a.object&&(c=a.object),"typeof"in r&&("about"in r&&(d=this.util.createIri(r.about,s,!1,!0,!0)),!d&&h&&(d=!0),!d&&"resource"in r&&(d=this.util.createIri(r.resource,s,!1,!0,!0)),!d&&("href"in r||"src"in r)&&(d=this.util.createIri(r.href||r.src,s,!1,!1,!0)),!d&&this.isInheritSubjectInHeadBody(e)&&(d=c),d||(d=this.util.createBlankNode()),l=d)):(("about"in r||"resource"in r)&&(c=this.util.createIri(r.about||r.resource,s,!1,!0,!0),s.explicitNewSubject=!!c),!c&&("href"in r||"src"in r)&&(c=this.util.createIri(r.href||r.src,s,!1,!1,!0),s.explicitNewSubject=!!c),c||(h?c=!0:this.isInheritSubjectInHeadBody(e)?c=a.object:"typeof"in r?(c=this.util.createBlankNode(),s.explicitNewSubject=!0):a.object&&(c=a.object,"property"in r||(s.skipElement=!0))),"typeof"in r&&(d=c)):("about"in r?(c=this.util.createIri(r.about,s,!1,!0,!0),s.explicitNewSubject=!!c,"typeof"in r&&(d=c)):h?c=!0:a.object&&(c=a.object),"resource"in r&&(l=this.util.createIri(r.resource,s,!1,!0,!0)),l||("href"in r||"src"in r?l=this.util.createIri(r.href||r.src,s,!1,!1,!0):"typeof"in r&&!("about"in r)&&!this.isInheritSubjectInHeadBody(e)&&(l=this.util.createBlankNode())),"typeof"in r&&!("about"in r)&&(this.isInheritSubjectInHeadBody(e)?d=c:d=l)),d)for(const p of this.util.createVocabIris(r.typeof,s,!0,!0))this.emitTriple(this.util.getResourceOrBaseIri(d,s),this.util.dataFactory.namedNode(Ui.Util.RDF+"type"),p);if(c&&(s.listMapping={}),l){if("rel"in r&&"inlist"in r)for(const p of this.util.createVocabIris(r.rel,s,o,!1))this.addListMapping(s,c,p,l);if(!("rel"in r&&"inlist"in r)){if("rel"in r)for(const p of this.util.createVocabIris(r.rel,s,o,!1))this.emitTriple(this.util.getResourceOrBaseIri(c,s),p,this.util.getResourceOrBaseIri(l,s));if("rev"in r)for(const p of this.util.createVocabIris(r.rev,s,u,!1))this.emitTriple(this.util.getResourceOrBaseIri(l,s),p,this.util.getResourceOrBaseIri(c,s))}}if(!l){if("rel"in r)if("inlist"in r)for(const p of this.util.createVocabIris(r.rel,s,o,!1))this.addListMapping(s,c,p,null),s.incompleteTriples.push({predicate:p,reverse:!1,list:!0});else for(const p of this.util.createVocabIris(r.rel,s,o,!1))s.incompleteTriples.push({predicate:p,reverse:!1});if("rev"in r)for(const p of this.util.createVocabIris(r.rev,s,u,!1))s.incompleteTriples.push({predicate:p,reverse:!0});s.incompleteTriples.length>0&&(l=this.util.createBlankNode())}if("property"in r){s.predicates=this.util.createVocabIris(r.property,s,!0,!1);let p;if("datatype"in r?(s.datatype=this.util.createIri(r.datatype,s,!0,!0,!1),s.datatype&&(s.datatype.value===Ui.Util.RDF+"XMLLiteral"||this.features.htmlDatatype&&s.datatype.value===Ui.Util.RDF+"HTML")&&(s.collectChildTags=!0)):(!("rev"in r)&&!("rel"in r)&&!("content"in r)&&("resource"in r&&(p=this.util.createIri(r.resource,s,!1,!0,!0)),!p&&"href"in r&&(p=this.util.createIri(r.href,s,!1,!1,!0)),!p&&"src"in r&&(p=this.util.createIri(r.src,s,!1,!1,!0))),"typeof"in r&&!("about"in r)&&(p=d)),"content"in r){const b=this.util.createLiteral(r.content,s);if("inlist"in r)for(const y of s.predicates)this.addListMapping(s,c,y,b);else{const y=this.util.getResourceOrBaseIri(c,s);for(const S of s.predicates)this.emitTriple(y,S,b)}s.predicates=null}else if(this.features.datetimeAttribute&&"datetime"in r){s.interpretObjectAsTime=!0;const b=this.util.createLiteral(r.datetime,s);if("inlist"in r)for(const y of s.predicates)this.addListMapping(s,c,y,b);else{const y=this.util.getResourceOrBaseIri(c,s);for(const S of s.predicates)this.emitTriple(y,S,b)}s.predicates=null}else if(p){const b=this.util.getResourceOrBaseIri(p,s);if("inlist"in r)for(const y of s.predicates)this.addListMapping(s,c,y,b);else{const y=this.util.getResourceOrBaseIri(c,s);for(const S of s.predicates)this.emitTriple(y,S,b)}s.predicates=null}}let f=!1;if(!s.skipElement&&c&&a.incompleteTriples.length>0){f=!0;const p=this.util.getResourceOrBaseIri(a.subject,s),b=this.util.getResourceOrBaseIri(c,s);for(const y of a.incompleteTriples)if(y.reverse)this.emitTriple(b,y.predicate,p);else if(y.list){let S=null;for(let w=this.activeTagStack.length-1;w>=0;w--)if(this.activeTagStack[w].inlist){S=this.activeTagStack[w];break}this.addListMapping(S,c,y.predicate,b)}else this.emitTriple(p,y.predicate,b)}!f&&a.incompleteTriples.length>0&&(s.incompleteTriples=s.incompleteTriples.concat(a.incompleteTriples)),s.subject=c||a.subject,s.object=l||c}onText(e){const r=this.activeTagStack[this.activeTagStack.length-1];if(this.features.copyRdfaPatterns&&r.collectedPatternTag){r.collectedPatternTag.text.push(e);return}r.text||(r.text=[]),r.text.push(e)}onTagClose(){const e=this.activeTagStack[this.activeTagStack.length-1],r=this.activeTagStack[this.activeTagStack.length-2];if(!(e.collectChildTags&&r.collectChildTags&&this.features.skipHandlingXmlLiteralChildren)){if(this.features.copyRdfaPatterns&&e.collectedPatternTag&&e.collectedPatternTag.rootPattern){const n=e.collectedPatternTag.attributes.resource;if(delete e.collectedPatternTag.attributes.resource,delete e.collectedPatternTag.attributes.typeof,this.rdfaPatterns[n]=e.collectedPatternTag,this.pendingRdfaPatternCopies[n]){for(const a of this.pendingRdfaPatternCopies[n])this.emitPatternCopy(a,e.collectedPatternTag,n);delete this.pendingRdfaPatternCopies[n]}this.activeTagStack.pop();return}if(e.predicates){const n=this.util.getResourceOrBaseIri(e.subject,e);let a=e.text||[];e.collectChildTags&&r.collectChildTags&&(a=a.slice(1));const s=this.util.createLiteral(a.join(""),e);if(e.inlist)for(const o of e.predicates)this.addListMapping(e,n,o,s);else for(const o of e.predicates)this.emitTriple(n,o,s);r.predicates||(e.text=null)}if(e.object&&Object.keys(e.listMapping).length>0){const n=this.util.getResourceOrBaseIri(e.object,e);for(const a in e.listMapping){const s=this.util.dataFactory.namedNode(a),o=e.listMapping[a];if(o.length>0){const u=o.map(()=>this.util.createBlankNode());for(let c=0;c<o.length;c++){const l=this.util.getResourceOrBaseIri(o[c],e);this.emitTriple(u[c],this.util.dataFactory.namedNode(Ui.Util.RDF+"first"),l),this.emitTriple(u[c],this.util.dataFactory.namedNode(Ui.Util.RDF+"rest"),c<o.length-1?u[c+1]:this.util.dataFactory.namedNode(Ui.Util.RDF+"nil"))}this.emitTriple(n,s,u[0])}else this.emitTriple(n,s,this.util.dataFactory.namedNode(Ui.Util.RDF+"nil"))}}}this.activeTagStack.pop(),e.collectChildTags&&e.text&&e.text.push(`</${e.name}>`),e.text&&r&&(r.text?r.text=r.text.concat(e.text):r.text=e.text)}onEnd(){if(this.features.copyRdfaPatterns){this.features.copyRdfaPatterns=!1;for(const e in this.rdfaPatterns){const r=this.rdfaPatterns[e];r.referenced||(r.attributes.typeof="rdfa:Pattern",r.attributes.resource=e,this.emitPatternCopy(r.parentTag,r,e),r.referenced=!1,delete r.attributes.typeof,delete r.attributes.resource)}for(const e in this.pendingRdfaPatternCopies)for(const r of this.pendingRdfaPatternCopies[e])this.activeTagStack.push(r),this.onTagOpen("link",{property:"rdfa:copy",href:e}),this.onTagClose(),this.activeTagStack.pop();this.features.copyRdfaPatterns=!0}}isInheritSubjectInHeadBody(e){return this.features.inheritSubjectInHeadBody&&(e==="head"||e==="body")}addListMapping(e,r,n,a){if(e.explicitNewSubject){const s=this.util.createBlankNode();this.emitTriple(this.util.getResourceOrBaseIri(r,e),n,s),this.emitTriple(s,this.util.dataFactory.namedNode(Ui.Util.RDF+"first"),this.util.getResourceOrBaseIri(a,e)),this.emitTriple(s,this.util.dataFactory.namedNode(Ui.Util.RDF+"rest"),this.util.dataFactory.namedNode(Ui.Util.RDF+"nil"))}else{let s=e.listMappingLocal[n.value];s||(e.listMappingLocal[n.value]=s=[]),a&&s.push(a)}}emitTriple(e,r,n){e.termType==="NamedNode"&&e.value.indexOf(":")<0||r.termType==="NamedNode"&&r.value.indexOf(":")<0||n.termType==="NamedNode"&&n.value.indexOf(":")<0||this.push(this.util.dataFactory.quad(e,r,n,this.defaultGraph))}emitPatternCopy(e,r,n){if(this.activeTagStack.push(e),r.referenced=!0,!r.constructedBlankNodes)r.constructedBlankNodes=[],this.util.blankNodeFactory=()=>{const a=this.util.dataFactory.blankNode();return r.constructedBlankNodes.push(a),a};else{let a=0;this.util.blankNodeFactory=()=>r.constructedBlankNodes[a++]}this.emitPatternCopyAbsolute(r,!0,n),this.util.blankNodeFactory=null,this.activeTagStack.pop()}emitPatternCopyAbsolute(e,r,n){if(!(!r&&e.attributes.property==="rdfa:copy"&&e.attributes.href===n)){this.onTagOpen(e.name,e.attributes);for(const a of e.text)this.onText(a);for(const a of e.children)this.emitPatternCopyAbsolute(a,!1,n);this.onTagClose()}}initializeParser(e){return new Tse.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(r){this.emit("error",r)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(r){this.emit("error",r)}},onopentag:(r,n)=>{try{this.onTagOpen(r,n),this.htmlParseListener&&this.htmlParseListener.onTagOpen(r,n)}catch(a){this.emit("error",a)}},ontext:r=>{try{this.onText(r),this.htmlParseListener&&this.htmlParseListener.onText(r)}catch(n){this.emit("error",n)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:e})}}nv.RdfaParser=Jx;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(mM,t),r(gM,t),r(_M,t),r(nv,t),r(tc,t),r(V0,t)})(Hx);Object.defineProperty(rv,"__esModule",{value:!0});rv.ActorRdfParseXmlRdfa=void 0;const xse=Rl,Rse=Hx;class Ise extends xse.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){var o;const a=(e.headers&&e.headers.get("content-language"))??void 0;e.data.on("error",u=>s.emit("error",u));const s=e.data.pipe(new Rse.RdfaParser({baseIRI:(o=e.metadata)==null?void 0:o.baseIRI,profile:"xml",language:a}));return{data:s,metadata:{triples:!0}}}}rv.ActorRdfParseXmlRdfa=Ise;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(rv,t)})(bM);var zM={},lv={},Yx={},Pse=function(){var t=function(He,je,Fe,Je){for(Fe=Fe||{},Je=He.length;Je--;Fe[He[Je]]=je);return Fe},e=[7,12,13,14,15,16,20,25,115,130],r=[7,13,16,20,25,115,130],n=[7,13,16,115,130],a=[1,25],s=[1,29],o=[1,27],u=[1,28],c=[13,16,115,130],l=[13,16,28,38,40,42,44,46,48,53,56,61,67,85,87,92,93,95,96,102,110,111,115,119,120,126,128,129,130,131,132,133,134,135,136],d=[28,56],h=[1,42],f=[46,48,53,56],p=[1,54],b=[1,60],y=[1,56],S=[1,57],w=[1,58],I=[1,63],O=[1,64],T=[1,65],x=[1,66],P=[1,67],B=[1,68],Q=[1,75],N=[28,46,48,53,56],D=[28,42,46,48,53,56],F=[13,16,28,38,40,42,44,46,48,53,56,92,115,119,120,130,131,132,133,134,135,136],W=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,119,120,126,128,129,130,131,132,133,134,135,136],z=[13,16,38,40,44,92,115,119,120,130,131,132,133,134,135,136],M=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,117,118,119,120,126,128,129,130,131,132,133,134,135,136],C=[13,16,28,56,115,130],V=[13,16,38,58,87,96,109,115,126,130],ie=[1,116],ne=[1,112],fe=[1,108],_e=[1,114],we=[1,111],Ce=[7,13,16,20,25,44,48,53,56,67,85,87,95,96,115,128,129,130],oe=[48,53],ae=[48,53,87,96,126],Ae=[13,16,44,48,53,56,85,87,95,96,115,128,129,130],Ie=[1,126],he=[13,16,40,44,48,53,56,85,87,95,96,115,128,129,130],ve=[1,129],me=[48,53,67,87,96,126],L=[13,16,40,44,48,53,56,67,85,87,95,96,115,128,129,130],H=[1,133],A=[13,16,40,44,48,53,56,67,85,87,95,96,102,115,128,129,130],m=[13,16,40,44,48,53,56,67,85,87,93,95,96,102,110,111,115,128,129,130],v=[1,151],j=[1,153],q=[1,156],$=[1,157],G=[1,158],Y=[1,167],J=[1,175],re=[13,16,44,48,53,56,67,85,87,95,96,115,128,129,130],de=[13,16,44,48,53,56,67,85,87,95,96,115,126,128,129,130],be=[13,16,46,92,115,119,120,130,131,132,133,134,135,136],Ee={trace:function(){},yy:{},symbols_:{error:2,shaclDoc:3,shaclDoc_repetition0:4,shaclDoc_repetition1:5,ttlSection:6,EOF:7,directive:8,baseDecl:9,importsDecl:10,prefixDecl:11,KW_BASE:12,IRIREF:13,KW_IMPORTS:14,KW_PREFIX:15,PNAME_NS:16,nodeShapeIri:17,iri:18,nodeShape:19,KW_SHAPE:20,nodeShape_option0:21,nodeShape_option1:22,nodeShapeBody:23,shapeClass:24,KW_SHAPE_CLASS:25,shapeClass_option0:26,turtleAnnotation:27,";":28,turtleAnnotation2:29,predicate:30,turtleAnnotation2_option0:31,objectList:32,object:33,objectList_repetition0:34,iriOrLiteral:35,blankNodeSection:36,list:37,"(":38,list_repetition0:39,")":40,objectTail:41,",":42,LB:43,"[":44,RB:45,"]":46,LP:47,"%":48,RP:49,pcSection:50,iriHead:51,ttlStatement:52,".":53,ttlSection_repetition0:54,startNodeShape:55,"{":56,endNodeShape:57,"}":58,nodeShapeBody_repetition0:59,targetClass:60,"->":61,targetClass_repetition_plus0:62,constraint:63,constraint_group0:64,constraint_option0:65,orNotComponent:66,"|":67,nodeNot:68,nodeOrEmit:69,nodeOr:70,nodeOr_repetition_plus0:71,nodeValue:72,negation:73,nodeValue_group0:74,"=":75,iriOrLiteralOrArray:76,propertyShape:77,path:78,propertyShape_repetition0:79,propertyOrComponent:80,propertyNot:81,propertyOr:82,propertyOr_repetition_plus0:83,propertyAtom:84,NODEKIND:85,shapeRef:86,PARAM:87,propertyCount:88,propertyMinCount:89,"..":90,propertyMaxCount:91,INTEGER:92,"*":93,shapeRef_group0:94,"@":95,"!":96,pathAlternative:97,additionalAlternative:98,pathSequence:99,pathAlternative_repetition_plus0:100,additionalSequence:101,"/":102,pathEltOrInverse:103,pathSequence_repetition_plus0:104,pathElt:105,pathPrimary:106,pathMod:107,pathInverse:108,"^":109,"?":110,"+":111,iriOrLiteralOrArray_repetition0:112,literal:113,iri_group0:114,a:115,string:116,LANGTAG:117,"^^":118,DECIMAL:119,DOUBLE:120,literal_group0:121,string_group0:122,string_group1:123,shaclDoc_repetition1_group0:124,constraint_group0_repetition_plus0:125,TARGET:126,propertyShape_repetition0_group0:127,ATPNAME_LN:128,ATPNAME_NS:129,PNAME_LN:130,KW_TRUE:131,KW_FALSE:132,STRING_LITERAL1:133,STRING_LITERAL2:134,STRING_LITERAL_LONG1:135,STRING_LITERAL_LONG2:136,$accept:0,$end:1},terminals_:{2:"error",7:"EOF",12:"KW_BASE",13:"IRIREF",14:"KW_IMPORTS",15:"KW_PREFIX",16:"PNAME_NS",20:"KW_SHAPE",25:"KW_SHAPE_CLASS",28:";",38:"(",40:")",42:",",44:"[",46:"]",48:"%",53:".",56:"{",58:"}",61:"->",67:"|",75:"=",85:"NODEKIND",87:"PARAM",90:"..",92:"INTEGER",93:"*",95:"@",96:"!",102:"/",109:"^",110:"?",111:"+",115:"a",117:"LANGTAG",118:"^^",119:"DECIMAL",120:"DOUBLE",126:"TARGET",128:"ATPNAME_LN",129:"ATPNAME_NS",130:"PNAME_LN",131:"KW_TRUE",132:"KW_FALSE",133:"STRING_LITERAL1",134:"STRING_LITERAL2",135:"STRING_LITERAL_LONG1",136:"STRING_LITERAL_LONG2"},productions_:[0,[3,4],[8,1],[8,1],[8,1],[9,2],[10,2],[11,3],[17,1],[19,5],[24,4],[27,2],[29,2],[30,2],[32,2],[33,1],[33,1],[33,1],[37,3],[41,2],[43,1],[45,1],[36,3],[47,1],[49,1],[50,3],[51,1],[52,3],[6,1],[55,1],[57,1],[23,3],[60,2],[63,3],[66,2],[69,1],[70,1],[70,2],[68,1],[68,2],[72,3],[77,2],[80,2],[82,1],[82,2],[81,1],[81,2],[84,1],[84,1],[84,1],[84,3],[84,1],[88,5],[89,1],[91,1],[91,1],[86,1],[86,2],[73,1],[78,1],[98,2],[97,1],[97,2],[101,2],[99,1],[99,2],[105,1],[105,2],[103,1],[103,2],[108,1],[107,1],[107,1],[107,1],[106,1],[106,3],[76,1],[76,3],[35,1],[35,1],[18,1],[18,1],[18,1],[113,1],[113,2],[113,3],[113,1],[113,1],[113,1],[113,1],[116,1],[116,1],[4,0],[4,2],[124,1],[124,1],[5,0],[5,2],[21,0],[21,1],[22,0],[22,1],[26,0],[26,1],[31,0],[31,1],[34,0],[34,2],[39,0],[39,2],[54,0],[54,2],[59,0],[59,2],[62,1],[62,2],[125,1],[125,2],[64,1],[64,1],[65,0],[65,1],[71,1],[71,2],[74,1],[74,1],[127,1],[127,1],[79,0],[79,2],[83,1],[83,2],[94,1],[94,1],[100,1],[100,2],[104,1],[104,2],[112,0],[112,2],[114,1],[114,1],[121,1],[121,1],[122,1],[122,1],[123,1],[123,1]],performAction:function(je,Fe,Je,It,it,qe,Li){var Qe=qe.length-1;switch(it){case 1:this.$=te(Se.factory.namedNode(Vr("")),Se.factory.namedNode(Pe),Se.factory.namedNode(Xe+"Ontology"));break;case 5:Se.base=Se.factory.namedNode(qe[Qe].slice(1,-1)),Se.n3Parser._setBase(Se.base.value);break;case 6:this.$=te(Se.base,Se.factory.namedNode(Xe+"imports"),Se.factory.namedNode(qe[Qe].slice(1,-1)));break;case 7:this.$=Se.prefixes[qe[Qe-1].substr(0,qe[Qe-1].length-1)]=Vr(qe[Qe]);break;case 8:Se.nodeShapeStack=!1,te(Se.currentNodeShape=qe[Qe],Se.factory.namedNode(Pe),Se.factory.namedNode(ke+"NodeShape"));break;case 10:this.$=te(Se.currentNodeShape,Se.factory.namedNode(Pe),Se.factory.namedNode(Ke+"Class"));break;case 11:this.$=le();break;case 13:this.$=qe[Qe].forEach(kt=>te(Se.currentNodeShape,qe[Qe-1],kt));break;case 14:this.$=[qe[Qe-1],...qe[Qe]];break;case 18:this.$=rn(qe[Qe-1],!0);break;case 19:case 34:case 42:case 60:case 63:this.$=qe[Qe];break;case 20:Se.tempCurrentNodeShape=Se.currentNodeShape,this.$=Se.currentNodeShape=vr();break;case 21:Se.currentNodeShape=Se.tempCurrentNodeShape;break;case 22:case 31:this.$=qe[Qe-2];break;case 23:Se.tempCurrentNodeShape=Se.currentNodeShape,Se.currentNodeShape=Se.currentPropertyNode;break;case 24:Se.currentNodeShape=Se.tempCurrentNodeShape;break;case 26:Se.currentNodeShape=qe[Qe];break;case 29:Se.nodeShapeStack?(Se.nodeShapeStack.push(Se.currentNodeShape),te(Se.currentPropertyNode,Se.factory.namedNode(ke+"node"),Se.currentNodeShape=vr())):Se.nodeShapeStack=[],this.$=Se.currentNodeShape;break;case 30:Se.nodeShapeStack.length>0&&(Se.currentNodeShape=Se.nodeShapeStack.pop());break;case 32:this.$=qe[Qe].forEach(kt=>{te(Se.currentNodeShape,Se.factory.namedNode(ke+"targetClass"),kt)});break;case 35:this.$=te(Se.currentNodeShape,Se.factory.namedNode(ke+qe[Qe][0]),qe[Qe][1]);break;case 36:break;case 37:const Gr=rn([qe[Qe-1],...qe[Qe]].map(kt=>{const Fr=vr();return te(Fr,Se.factory.namedNode(ke+kt[0]),kt[1]),Fr}));this.$=["or",Gr];break;case 39:case 46:this.$=k("not",...qe[Qe]);break;case 40:case 50:this.$=[qe[Qe-2],qe[Qe]];break;case 43:this.$=qe[Qe]&&_(...qe[Qe]);break;case 44:this.$=_("or",rn([qe[Qe-1],...qe[Qe]].map(kt=>{const Fr=vr();return te(Fr,Se.factory.namedNode(ke+kt[0]),kt[1]),Fr})));break;case 47:this.$=[ht[qe[Qe].value]?"datatype":"class",qe[Qe]];break;case 48:this.$=["nodeKind",Se.factory.namedNode(ke+qe[Qe])];break;case 49:this.$=["node",Se.factory.namedNode(qe[Qe])];break;case 51:this.$=void 0;break;case 53:this.$=qe[Qe]>0&&_("minCount",br(qe[Qe],ce));break;case 54:this.$=_("maxCount",br(qe[Qe],ce));break;case 56:this.$=nn(qe[Qe].slice(1));break;case 57:this.$=Vr(qe[Qe]);break;case 59:te(Se.currentNodeShape,Se.factory.namedNode(ke+"property"),Se.currentPropertyNode=vr()),_("path",qe[Qe]);break;case 62:const Jt=vr();te(Jt,Se.factory.namedNode(ke+"alternativePath"),rn([qe[Qe-1],...qe[Qe]])),this.$=Jt;break;case 65:this.$=rn([qe[Qe-1],...qe[Qe]]);break;case 67:te(this.$=vr(),Se.factory.namedNode(ke+qe[Qe]),qe[Qe-1]);break;case 69:te(this.$=vr(),Se.factory.namedNode(ke+"inversePath"),qe[Qe]);break;case 71:this.$="zeroOrOnePath";break;case 72:this.$="zeroOrMorePath";break;case 73:this.$="oneOrMorePath";break;case 75:this.$=qe[Qe-1];break;case 77:this.$=rn(qe[Qe-1]);break;case 80:this.$=Se.factory.namedNode(Vr(qe[Qe]));break;case 81:this.$=Se.factory.namedNode(nn(qe[Qe]));break;case 82:this.$=le(Se.factory.namedNode(Pe));break;case 83:this.$=br(qe[Qe]);break;case 84:this.$=Pn(qe[Qe-1],lowercase(qe[Qe].substr(1)));break;case 85:this.$=br(qe[Qe-2],qe[Qe]);break;case 86:this.$=br(qe[Qe],ce);break;case 87:this.$=br(qe[Qe],ye);break;case 88:this.$=br(qe[Qe].toLowerCase(),ge);break;case 89:this.$=br(qe[Qe].toLowerCase(),$e);break;case 90:this.$=an(qe[Qe],1);break;case 91:this.$=an(qe[Qe],3);break;case 92:case 96:case 106:case 108:case 110:case 112:case 128:case 138:this.$=[];break;case 93:case 97:case 107:case 109:case 111:case 113:case 115:case 117:case 123:case 129:case 131:case 135:case 137:case 139:qe[Qe-1].push(qe[Qe]);break;case 114:case 116:case 122:case 130:case 134:case 136:this.$=[qe[Qe]];break}},table:[t(e,[2,92],{3:1,4:2}),{1:[3]},t(r,[2,96],{5:3,8:4,9:5,10:6,11:7,12:[1,8],14:[1,9],15:[1,10]}),t(n,[2,110],{6:11,124:12,54:13,19:14,24:15,20:[1,16],25:[1,17]}),t(e,[2,93]),t(e,[2,2]),t(e,[2,3]),t(e,[2,4]),{13:[1,18]},{13:[1,19]},{16:[1,20]},{7:[1,21]},t(r,[2,97]),{7:[2,28],13:a,16:s,18:24,51:23,52:22,114:26,115:o,130:u},t(r,[2,94]),t(r,[2,95]),{13:a,16:s,17:30,18:31,114:26,115:o,130:u},{13:a,16:s,17:32,18:31,114:26,115:o,130:u},t(e,[2,5]),t(e,[2,6]),{13:[1,33]},{1:[2,1]},t(n,[2,111]),{13:a,16:s,18:36,29:34,30:35,114:26,115:o,130:u},t(c,[2,26]),t(l,[2,80]),t(l,[2,81]),t(l,[2,82]),t(l,[2,140]),t(l,[2,141]),t(d,[2,98],{21:37,60:38,61:[1,39]}),t([28,56,61],[2,8]),{26:40,27:41,28:h,56:[2,102]},t(e,[2,7]),{53:[1,43]},t(f,[2,104],{31:44,27:45,28:h}),{13:a,16:s,18:51,32:46,33:47,35:48,36:49,37:50,38:p,43:53,44:b,92:y,113:52,114:26,115:o,116:55,119:S,120:w,121:59,122:61,123:62,130:u,131:I,132:O,133:T,134:x,135:P,136:B},{22:69,27:70,28:h,56:[2,100]},t(d,[2,99]),{13:a,16:s,18:72,62:71,114:26,115:o,130:u},{23:73,55:74,56:Q},{56:[2,103]},{13:a,16:s,18:36,29:76,30:35,114:26,115:o,130:u},t(n,[2,27]),t(f,[2,12]),t(f,[2,105]),t(N,[2,13]),t(D,[2,106],{34:77}),t(F,[2,15]),t(F,[2,16]),t(F,[2,17]),t(W,[2,78]),t(W,[2,79]),{13:a,16:s,18:36,29:78,30:35,114:26,115:o,130:u},t(z,[2,108],{39:79}),t(W,[2,83],{117:[1,80],118:[1,81]}),t(W,[2,86]),t(W,[2,87]),t(W,[2,88]),t(W,[2,89]),t(c,[2,20]),t(M,[2,90]),t(M,[2,91]),t(W,[2,142]),t(W,[2,143]),t(M,[2,144]),t(M,[2,145]),t(M,[2,146]),t(M,[2,147]),{23:82,55:74,56:Q},{56:[2,101]},t(d,[2,32],{114:26,18:83,13:a,16:s,115:o,130:u}),t(C,[2,114]),t(r,[2,10]),t(V,[2,112],{59:84}),t(V,[2,29]),t(f,[2,11]),t(N,[2,14],{41:85,42:[1,86]}),{45:87,46:[1,88]},{13:a,16:s,18:51,33:90,35:48,36:49,37:50,38:p,40:[1,89],43:53,44:b,92:y,113:52,114:26,115:o,116:55,119:S,120:w,121:59,122:61,123:62,130:u,131:I,132:O,133:T,134:x,135:P,136:B},t(W,[2,84]),{13:a,16:s,18:91,114:26,115:o,130:u},t(r,[2,9]),t(C,[2,115]),{13:a,16:s,18:115,38:ie,57:92,58:[1,94],63:93,64:95,68:102,69:98,70:100,72:104,73:105,74:107,77:97,78:99,87:ne,96:fe,97:101,99:103,103:106,105:109,106:113,108:110,109:_e,114:26,115:o,125:96,126:we,130:u},t(D,[2,107]),{13:a,16:s,18:51,33:117,35:48,36:49,37:50,38:p,43:53,44:b,92:y,113:52,114:26,115:o,116:55,119:S,120:w,121:59,122:61,123:62,130:u,131:I,132:O,133:T,134:x,135:P,136:B},t(F,[2,22]),t(F,[2,21]),t(F,[2,18]),t(z,[2,109]),t(W,[2,85]),t(Ce,[2,31]),t(V,[2,113]),t(Ce,[2,30]),{47:120,48:[1,121],50:119,53:[2,120],65:118},t(oe,[2,118],{70:100,68:102,72:104,73:105,74:107,69:122,87:ne,96:fe,126:we}),t(oe,[2,119]),t(ae,[2,116]),t(Ae,[2,128],{79:123}),t(ae,[2,35]),t(Ae,[2,59]),t(ae,[2,36],{71:124,66:125,67:Ie}),t(he,[2,61],{100:127,98:128,67:ve}),t(me,[2,38]),{72:130,74:107,87:ne,126:we},t(L,[2,64],{104:131,101:132,102:H}),{75:[1,134]},t([13,16,56,85,87,95,115,126,128,129,130],[2,58]),t(A,[2,68]),{13:a,16:s,18:115,38:ie,105:135,106:113,114:26,115:o,130:u},{75:[2,124]},{75:[2,125]},t(A,[2,66],{107:136,93:[1,138],110:[1,137],111:[1,139]}),t([13,16,38,115,130],[2,70]),t(m,[2,74]),{13:a,16:s,18:115,38:ie,97:140,99:103,103:106,105:109,106:113,108:110,109:_e,114:26,115:o,130:u},t(D,[2,19]),{53:[1,141]},{53:[2,121]},{13:a,16:s,18:36,29:142,30:35,114:26,115:o,130:u},t(c,[2,23]),t(ae,[2,117]),t(oe,[2,41],{114:26,55:74,127:143,88:144,82:145,81:147,84:148,73:149,18:150,86:152,23:154,94:155,13:a,16:s,44:[1,146],56:Q,85:v,87:j,95:q,96:fe,115:o,128:$,129:G,130:u}),t(ae,[2,37],{66:159,67:Ie}),t(me,[2,122]),{68:160,72:104,73:105,74:107,87:ne,96:fe,126:we},t(he,[2,62],{98:161,67:ve}),t(L,[2,134]),{13:a,16:s,18:115,38:ie,99:162,103:106,105:109,106:113,108:110,109:_e,114:26,115:o,130:u},t(me,[2,39]),t(L,[2,65],{101:163,102:H}),t(A,[2,136]),{13:a,16:s,18:115,38:ie,103:164,105:109,106:113,108:110,109:_e,114:26,115:o,130:u},{13:a,16:s,18:51,35:166,44:Y,76:165,92:y,113:52,114:26,115:o,116:55,119:S,120:w,121:59,122:61,123:62,130:u,131:I,132:O,133:T,134:x,135:P,136:B},t(A,[2,69]),t(A,[2,67]),t(A,[2,71]),t(A,[2,72]),t(A,[2,73]),{40:[1,168]},t(V,[2,33]),{48:[1,170],49:169},t(Ae,[2,129]),t(Ae,[2,126]),t(Ae,[2,127]),{89:171,92:[1,172]},t(Ae,[2,43],{83:173,80:174,67:J}),t(re,[2,45]),{13:a,16:s,18:150,23:154,55:74,56:Q,84:176,85:v,86:152,87:j,94:155,95:q,114:26,115:o,128:$,129:G,130:u},t(re,[2,47]),t(re,[2,48]),t(re,[2,49]),{75:[1,177]},t(re,[2,51]),t(re,[2,56]),{13:[1,178]},t(re,[2,132]),t(re,[2,133]),t(me,[2,123]),t(me,[2,34]),t(L,[2,135]),t(L,[2,60]),t(A,[2,137]),t(A,[2,63]),t(me,[2,40]),t(de,[2,76]),t(be,[2,138],{112:179}),t(m,[2,75]),{53:[2,25]},{53:[2,24]},{90:[1,180]},{90:[2,53]},t(Ae,[2,44],{80:181,67:J}),t(re,[2,130]),{13:a,16:s,18:150,23:154,55:74,56:Q,73:149,81:182,84:148,85:v,86:152,87:j,94:155,95:q,96:fe,114:26,115:o,128:$,129:G,130:u},t(re,[2,46]),{13:a,16:s,18:51,35:166,44:Y,76:183,92:y,113:52,114:26,115:o,116:55,119:S,120:w,121:59,122:61,123:62,130:u,131:I,132:O,133:T,134:x,135:P,136:B},t(re,[2,57]),{13:a,16:s,18:51,35:185,46:[1,184],92:y,113:52,114:26,115:o,116:55,119:S,120:w,121:59,122:61,123:62,130:u,131:I,132:O,133:T,134:x,135:P,136:B},{91:186,92:[1,187],93:[1,188]},t(re,[2,131]),t(re,[2,42]),t(re,[2,50]),t(de,[2,77]),t(be,[2,139]),{46:[1,189]},{46:[2,54]},{46:[2,55]},t(Ae,[2,52])],defaultActions:{21:[2,1],41:[2,103],70:[2,101],111:[2,124],112:[2,125],119:[2,121],169:[2,25],170:[2,24],172:[2,53],187:[2,54],188:[2,55]},parseError:function(je,Fe){if(Fe.recoverable)this.trace(je);else{var Je=new Error(je);throw Je.hash=Fe,Je}},parse:function(je){var Fe=this,Je=[0],It=[null],it=[],qe=this.table,Li="",Qe=0,Gr=0,Jt=2,kt=1,Fr=it.slice.call(arguments,1),At=Object.create(this.lexer),wa={yy:{}};for(var Ji in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ji)&&(wa.yy[Ji]=this.yy[Ji]);At.setInput(je,wa.yy),wa.yy.lexer=At,wa.yy.parser=this,typeof At.yylloc>"u"&&(At.yylloc={});var lr=At.yylloc;it.push(lr);var ho=At.options&&At.options.ranges;typeof wa.yy.parseError=="function"?this.parseError=wa.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var uu=function(){var Qn;return Qn=At.lex()||kt,typeof Qn!="number"&&(Qn=Fe.symbols_[Qn]||Qn),Qn},Jr,Bi,pn,Yi,yn={},Ma,sn,Ss,La;;){if(Bi=Je[Je.length-1],this.defaultActions[Bi]?pn=this.defaultActions[Bi]:((Jr===null||typeof Jr>"u")&&(Jr=uu()),pn=qe[Bi]&&qe[Bi][Jr]),typeof pn>"u"||!pn.length||!pn[0]){var hi="";La=[];for(Ma in qe[Bi])this.terminals_[Ma]&&Ma>Jt&&La.push("'"+this.terminals_[Ma]+"'");At.showPosition?hi="Parse error on line "+(Qe+1)+`:
`+At.showPosition()+`
Expecting `+La.join(", ")+", got '"+(this.terminals_[Jr]||Jr)+"'":hi="Parse error on line "+(Qe+1)+": Unexpected "+(Jr==kt?"end of input":"'"+(this.terminals_[Jr]||Jr)+"'"),this.parseError(hi,{text:At.match,token:this.terminals_[Jr]||Jr,line:At.yylineno,loc:lr,expected:La})}if(pn[0]instanceof Array&&pn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Bi+", token: "+Jr);switch(pn[0]){case 1:Je.push(Jr),It.push(At.yytext),it.push(At.yylloc),Je.push(pn[1]),Jr=null,Gr=At.yyleng,Li=At.yytext,Qe=At.yylineno,lr=At.yylloc;break;case 2:if(sn=this.productions_[pn[1]][1],yn.$=It[It.length-sn],yn._$={first_line:it[it.length-(sn||1)].first_line,last_line:it[it.length-1].last_line,first_column:it[it.length-(sn||1)].first_column,last_column:it[it.length-1].last_column},ho&&(yn._$.range=[it[it.length-(sn||1)].range[0],it[it.length-1].range[1]]),Yi=this.performAction.apply(yn,[Li,Gr,Qe,wa.yy,pn[1],It,it].concat(Fr)),typeof Yi<"u")return Yi;sn&&(Je=Je.slice(0,-1*sn*2),It=It.slice(0,-1*sn),it=it.slice(0,-1*sn)),Je.push(this.productions_[pn[1]][0]),It.push(yn.$),it.push(yn._$),Ss=qe[Je[Je.length-2]][Je[Je.length-1]],Je.push(Ss);break;case 3:return!0}}return!0}};const xe="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Pe=xe+"type",U=xe+"first",E=xe+"rest",R=xe+"nil",K="http://www.w3.org/2001/XMLSchema#",ce=K+"integer",ye=K+"decimal",ge=K+"double",$e=K+"boolean",ke="http://www.w3.org/ns/shacl#",Xe="http://www.w3.org/2002/07/owl#",Ke="http://www.w3.org/2000/01/rdf-schema#",ht={[ce]:!0,[ye]:!0,[K+"float"]:!0,[ge]:!0,[K+"string"]:!0,[$e]:!0,[K+"dateTime"]:!0,[K+"nonPositiveInteger"]:!0,[K+"negativeInteger"]:!0,[K+"long"]:!0,[K+"int"]:!0,[K+"short"]:!0,[K+"byte"]:!0,[K+"nonNegativeInteger"]:!0,[K+"unsignedLong"]:!0,[K+"unsignedShort"]:!0,[K+"unsignedByte"]:!0,[K+"positiveInteger"]:!0,[xe+"langString"]:!0};function rn(He,je=!1){let Fe=0,Je=He.length;if(je&&Je===0)return Se.factory.namedNode(R);const It=head=vr();return Je===0&&te(head,Se.factory.namedNode(E),Se.factory.namedNode(R)),He.forEach(it=>{if(it===void 0)throw new Error("b");te(head,Se.factory.namedNode(U),it),te(head,Se.factory.namedNode(E),head=++Fe<Je?vr():Se.factory.namedNode(R))}),It}function Vr(He){return Se.n3Parser._resolveIRI(He[0]==="<"?He.substring(1,He.length-1):He)}function nn(He){const je=He.indexOf(":"),Fe=He.substr(0,je),Je=Se.prefixes[Fe];if(!Je)throw new Error("Unknown prefix: "+Fe);return Vr(Je+He.substr(je+1))}function br(He,je){return je&&je.termType!=="NamedNode"&&(je=Se.factory.namedNode(je)),Se.factory.literal(He,je)}function Pn(He,je){return Se.factory.literal(He,je)}function vr(He){return typeof He=="string"?He.startsWith("e_")?Se.factory.blankNode(He):Se.factory.blankNode("e_"+He):Se.factory.blankNode("g_"+wr++)}var wr=0;Se._resetBlanks=function(){wr=0};function an(He,je){return Se.n3Parser._lexer._unescape(He.substring(je,He.length-je))}function te(He,je,Fe){if(!He.termType||!je.termType||je.value.includes(",")||!Fe.termType)throw new Error(`boo ${He.value} ${je.value} ${Fe.value}`);Se.onQuad(Se.factory.quad(He,je,Fe))}function _(He,je){te(Se.currentPropertyNode,Se.factory.namedNode(ke+He),je)}function k(He,je,Fe){const Je=vr();return te(Je,Se.factory.namedNode(ke+je),Fe),[He,Je]}function le(He){if(!Se.extended)throw new Error("Encountered extended SHACLC syntax; but extended parsing is disabled");return He}var Te=function(){var He={EOF:1,parseError:function(Fe,Je){if(this.yy.parser)this.yy.parser.parseError(Fe,Je);else throw new Error(Fe)},setInput:function(je,Fe){return this.yy=Fe||this.yy||{},this._input=je,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var je=this._input[0];this.yytext+=je,this.yyleng++,this.offset++,this.match+=je,this.matched+=je;var Fe=je.match(/(?:\r\n?|\n).*/g);return Fe?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),je},unput:function(je){var Fe=je.length,Je=je.split(/(?:\r\n?|\n)/g);this._input=je+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Fe),this.offset-=Fe;var It=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Je.length-1&&(this.yylineno-=Je.length-1);var it=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Je?(Je.length===It.length?this.yylloc.first_column:0)+It[It.length-Je.length].length-Je[0].length:this.yylloc.first_column-Fe},this.options.ranges&&(this.yylloc.range=[it[0],it[0]+this.yyleng-Fe]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(je){this.unput(this.match.slice(je))},pastInput:function(){var je=this.matched.substr(0,this.matched.length-this.match.length);return(je.length>20?"...":"")+je.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var je=this.match;return je.length<20&&(je+=this._input.substr(0,20-je.length)),(je.substr(0,20)+(je.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var je=this.pastInput(),Fe=new Array(je.length+1).join("-");return je+this.upcomingInput()+`
`+Fe+"^"},test_match:function(je,Fe){var Je,It,it;if(this.options.backtrack_lexer&&(it={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(it.yylloc.range=this.yylloc.range.slice(0))),It=je[0].match(/(?:\r\n?|\n).*/g),It&&(this.yylineno+=It.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:It?It[It.length-1].length-It[It.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+je[0].length},this.yytext+=je[0],this.match+=je[0],this.matches=je,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(je[0].length),this.matched+=je[0],Je=this.performAction.call(this,this.yy,this,Fe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Je)return Je;if(this._backtrack){for(var qe in it)this[qe]=it[qe];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var je,Fe,Je,It;this._more||(this.yytext="",this.match="");for(var it=this._currentRules(),qe=0;qe<it.length;qe++)if(Je=this._input.match(this.rules[it[qe]]),Je&&(!Fe||Je[0].length>Fe[0].length)){if(Fe=Je,It=qe,this.options.backtrack_lexer){if(je=this.test_match(Je,it[qe]),je!==!1)return je;if(this._backtrack){Fe=!1;continue}else return!1}else if(!this.options.flex)break}return Fe?(je=this.test_match(Fe,it[It]),je!==!1?je:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Fe=this.next();return Fe||this.lex()},begin:function(Fe){this.conditionStack.push(Fe)},popState:function(){var Fe=this.conditionStack.length-1;return Fe>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Fe){return Fe=this.conditionStack.length-1-Math.abs(Fe||0),Fe>=0?this.conditionStack[Fe]:"INITIAL"},pushState:function(Fe){this.begin(Fe)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(Fe,Je,It,it){switch(It){case 0:break;case 1:return 12;case 2:return 14;case 3:return 15;case 4:return 25;case 5:return 20;case 6:return 131;case 7:return 132;case 8:return 85;case 9:return 126;case 10:return 87;case 11:return"PASS";case 12:return"COMMENT";case 13:return 13;case 14:return 16;case 15:return 130;case 16:return 129;case 17:return 128;case 18:return 117;case 19:return 92;case 20:return 119;case 21:return 120;case 22:return"EXPONENT";case 23:return 133;case 24:return 134;case 25:return 135;case 26:return 136;case 27:return 61;case 28:return 90;case 29:return 58;case 30:return 56;case 31:return 38;case 32:return 40;case 33:return 44;case 34:return 46;case 35:return 110;case 36:return 93;case 37:return 111;case 38:return 67;case 39:return 118;case 40:return 53;case 41:return 96;case 42:return 102;case 43:return 75;case 44:return 95;case 45:return 109;case 46:return 28;case 47:return 42;case 48:return 48;case 49:return 115;case 50:return 7;case 51:console.log(Je.yytext);break}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:IMPORTS)/i,/^(?:PREFIX)/i,/^(?:shapeClass)/i,/^(?:shape)/i,/^(?:true)/i,/^(?:false)/i,/^(?:(BlankNode|IRI|Literal|BlankNodeOrIRI|BlankNodeOrLiteral|IRIOrLiteral\b))/i,/^(?:(targetNode|targetObjectsOf|targetSubjectsOf\b))/i,/^(?:(deactivated|severity|message|class|datatype|nodeKind|minExclusive|minInclusive|maxExclusive|maxInclusive|minLength|maxLength|pattern|flags|languageIn|uniqueLang|equals|disjoint|lessThan|lessThanOrEquals|qualifiedValueShape|qualifiedMinCount|qualifiedMaxCount|qualifiedValueShapesDisjoint|closed|ignoredProperties|hasValue|in))/i,/^(?:([ \t\r\n]+))/i,/^(?:(#[\r\n]*))/i,/^(?:(<([^=<>\"\{\}\|\^`\\\u0000-\u0020]|(\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*>))/i,/^(?:((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@(([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(@((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@[a-zA-Z]+(-[a-zA-Z0-9]+)*))/i,/^(?:([+-]?[0-9]+))/i,/^(?:([+-]?[0-9]*\.[0-9]+))/i,/^(?:([+-]?([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.?[0-9]+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"\'])))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"\'])))*"""))/i,/^(?:->)/i,/^(?:\.\.)/i,/^(?:\})/i,/^(?:\{)/i,/^(?:\()/i,/^(?:\))/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\?)/i,/^(?:\*)/i,/^(?:\+)/i,/^(?:\|)/i,/^(?:\^\^)/i,/^(?:\.)/i,/^(?:!)/i,/^(?:\/)/i,/^(?:=)/i,/^(?:@)/i,/^(?:\^)/i,/^(?:;)/i,/^(?:,)/i,/^(?:%)/i,/^(?:a)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return He}();Ee.lexer=Te;function Se(){this.yy={}}return Se.prototype=Ee,Ee.Parser=Se,new Se}(),Dse=Pse;const Nse=Dse.Parser,IT=au;let WM=class{constructor(){}parse(e,{extendedSyntax:r,baseIRI:n}={}){this._parser=new Nse,this._parser.Parser.factory=IT.DataFactory,this._parser.Parser.base=IT.DataFactory.namedNode(n||"urn:x-base:default"),this._parser.Parser.extended=r===!0,this._parser.Parser.prefixes={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"},this._parser.Parser.currentNodeShape=void 0,this._parser.Parser.currentPropertyNode=void 0,this._parser.Parser.nodeShapeStack=[],this._parser.Parser.tempCurrentNodeShape=void 0,this._parser.Parser.n3Parser=new IT.Parser({baseIRI:n||"urn:x-base:default"});const a=[];return this._parser.Parser.onQuad=s=>{a.push(s)},this._parser.parse(e),a.prefixes=this._parser.Parser.prefixes,a}};Yx.Parser=WM;Yx.parse=function(e,r){return new WM().parse(e,r)};var XM={exports:{}};(function(t){(function(){var e;typeof window=="object"&&window?e=window:e=g,t.exports?t.exports=e.Promise?e.Promise:s:e.Promise||(e.Promise=s);var r=e.setImmediate||function(f){setTimeout(f,1)};function n(f,p){return function(){f.apply(p,arguments)}}var a=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function s(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof f!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],h(f,n(u,this),n(c,this))}function o(f){var p=this;if(this._state===null){this._deferreds.push(f);return}r(function(){var b=p._state?f.onFulfilled:f.onRejected;if(b===null){(p._state?f.resolve:f.reject)(p._value);return}var y;try{y=b(p._value)}catch(S){f.reject(S);return}f.resolve(y)})}function u(f){try{if(f===this)throw new TypeError("A promise cannot be resolved with itself.");if(f&&(typeof f=="object"||typeof f=="function")){var p=f.then;if(typeof p=="function"){h(n(p,f),n(u,this),n(c,this));return}}this._state=!0,this._value=f,l.call(this)}catch(b){c.call(this,b)}}function c(f){this._state=!1,this._value=f,l.call(this)}function l(){for(var f=0,p=this._deferreds.length;f<p;f++)o.call(this,this._deferreds[f]);this._deferreds=null}function d(f,p,b,y){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof p=="function"?p:null,this.resolve=b,this.reject=y}function h(f,p,b){var y=!1;try{f(function(S){y||(y=!0,p(S))},function(S){y||(y=!0,b(S))})}catch(S){if(y)return;y=!0,b(S)}}s.prototype.catch=function(f){return this.then(null,f)},s.prototype.then=function(f,p){var b=this;return new s(function(y,S){o.call(b,new d(f,p,y,S))})},s.all=function(){var f=Array.prototype.slice.call(arguments.length===1&&a(arguments[0])?arguments[0]:arguments);return new s(function(p,b){if(f.length===0)return p([]);var y=f.length;function S(I,O){try{if(O&&(typeof O=="object"||typeof O=="function")){var T=O.then;if(typeof T=="function"){T.call(O,function(x){S(I,x)},b);return}}f[I]=O,--y===0&&p(f)}catch(x){b(x)}}for(var w=0;w<f.length;w++)S(w,f[w])})},s.resolve=function(f){return f&&typeof f=="object"&&f.constructor===s?f:new s(function(p){p(f)})},s.reject=function(f){return new s(function(p,b){b(f)})},s.race=function(f){return new s(function(p,b){for(var y=0,S=f.length;y<S;y++)f[y].then(p,b)})}})()})(XM);var jse=XM.exports,Cse=jse,Pl=function(t,e,r){typeof e=="function"&&(r=e,e=null);var n="",a=new Cse(function(s,o){t.on("data",function(u){n+=typeof e=="string"?u.toString(e):u.toString()}),t.on("end",function(){s(n)}),t.on("error",o)});return r&&a.then(function(s){r(null,s)},r),a},dv={};Object.defineProperty(dv,"__esModule",{value:!0});dv.PrefixWrappingIterator=void 0;const Fse=Wt;class Mse extends Fse.WrappingIterator{constructor(e){super(e==null?void 0:e.then(r=>(this.prefixes=r.prefixes,r)))}read(){if(this.prefixes){for(const e of Object.entries(this.prefixes))this.emit("prefix",...e);delete this.prefixes}return super.read()}}dv.PrefixWrappingIterator=Mse;Object.defineProperty(lv,"__esModule",{value:!0});lv.ActorRdfParseShaclc=void 0;const Lse=Rl,Bse=Kt,$se=Yx,Use=Pl,qse=dv;class Vse extends Lse.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){const a=new qse.PrefixWrappingIterator(Use(e.data).then(o=>{var u;return(0,$se.parse)(o,{extendedSyntax:r==="text/shaclc-ext",baseIRI:(u=e.metadata)==null?void 0:u.baseIRI})})),s=new Bse.Readable({objectMode:!0});return a.on("prefix",(...o)=>s.emit("prefix",...o)),{data:s.wrap(a),metadata:{triples:!0}}}}lv.ActorRdfParseShaclc=Vse;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(lv,t)})(zM);var KM={},fv={},JM={},hv={};Object.defineProperty(hv,"__esModule",{value:!0});hv.ActorRdfJoinEntriesSort=void 0;const Hse=et;class kse extends Hse.Actor{constructor(e){super(e)}}hv.ActorRdfJoinEntriesSort=kse;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(hv,t)})(JM);var Dl={},H0={};Object.defineProperty(H0,"__esModule",{value:!0});H0.ActorRdfResolveQuadPattern=void 0;const Qse=et;class Gse extends Qse.Actor{constructor(e){super(e)}}H0.ActorRdfResolveQuadPattern=Gse;var pv={};Object.defineProperty(pv,"__esModule",{value:!0});pv.ActorRdfResolveQuadPatternSource=void 0;const zse=H0;class Wse extends zse.ActorRdfResolveQuadPattern{constructor(e){super(e)}async test(e){return!0}async run(e){const r=await this.getSource(e.context,e.pattern);return await this.getOutput(r,e.pattern,e.context)}async getOutput(e,r,n){return{data:e.match(r.subject,r.predicate,r.object,r.graph,n)}}}pv.ActorRdfResolveQuadPatternSource=Wse;var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.hasContextSingleSourceOfType=Wr.hasContextSingleSource=Wr.getContextSourceUrl=Wr.getContextSourceFirst=Wr.getContextSource=Wr.getContextSources=Wr.getDataSourceContext=Wr.getDataSourceValue=Wr.getDataSourceType=Wr.isDataSourceRawType=void 0;const pp=Ht,Xse=et;function yv(t){return typeof t=="string"||"match"in t}Wr.isDataSourceRawType=yv;function YM(t){return typeof t=="string"?"":"match"in t?"rdfjsSource":t.type}Wr.getDataSourceType=YM;function Zx(t){return yv(t)?t:t.value}Wr.getDataSourceValue=Zx;function Kse(t,e){return yv(t)||!t.context?e:e.merge(Xse.ActionContext.ensureActionContext(t.context))}Wr.getDataSourceContext=Kse;function Jse(t){return t.get(pp.KeysRdfResolveQuadPattern.sources)}Wr.getContextSources=Jse;function eR(t){return t.get(pp.KeysRdfResolveQuadPattern.source)}Wr.getContextSource=eR;function Yse(t){if(t.has(pp.KeysRdfResolveQuadPattern.source))return t.get(pp.KeysRdfResolveQuadPattern.source);const e=t.get(pp.KeysRdfResolveQuadPattern.sources);if((e==null?void 0:e.length)===1)return e[0]}Wr.getContextSourceFirst=Yse;function Zse(t){if(t){let e=Zx(t);if(typeof e=="string"){const r=e.indexOf("#");return r>=0&&(e=e.slice(0,r)),e}}}Wr.getContextSourceUrl=Zse;function eoe(t){const e=eR(t);return!!(e&&(yv(e)||e.value))}Wr.hasContextSingleSource=eoe;function toe(t,e){const r=eR(e);return!!(r&&YM(r)===t&&Zx(r))}Wr.hasContextSingleSourceOfType=toe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(H0,t),r(pv,t),r(Wr,t)})(Dl);Object.defineProperty(fv,"__esModule",{value:!0});fv.ActorRdfJoinEntriesSortTraversalZeroKnowledge=void 0;const roe=JM,noe=Dl,ioe=Ht,_1=hn,td=Tt;class No extends roe.ActorRdfJoinEntriesSort{constructor(e){super(e)}static getPatternNonVocabUris(e){let r;const n=[];return e.type==="pattern"?n.push(e.predicate):td.Util.recurseOperation(e,{link(a){return n.push(a.iri),!1},nps(a){for(const s of a.iris)n.push(s);return!1}}),n.some(a=>a.termType==="NamedNode"&&a.value==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type")?r=[e.subject,e.graph]:r=[e.subject,e.object,e.graph],(0,_1.getNamedNodes)(r)}static getSourceUri(e){const r=e.value,n=r.indexOf("#");return n>0?r.slice(0,n):r}static getScoreSeedNonVocab(e,r){return No.getPatternNonVocabUris(e).map(n=>No.getSourceUri(n)).filter(n=>r.includes(n)).length}static getScoreSelectivity(e){const r=e.type==="pattern"?(0,_1.getTerms)(e):[e.subject,e.object,e.graph];return _1.QUAD_TERM_NAMES.length-(0,_1.getVariables)(r).length}static sortJoinEntries(e,r){return[...e].sort((n,a)=>{if((n.operation.type===td.Algebra.types.PATTERN||n.operation.type===td.Algebra.types.PATH)&&(a.operation.type===td.Algebra.types.PATTERN||a.operation.type===td.Algebra.types.PATH)){const s=No.getScoreSeedNonVocab(a.operation,r)-No.getScoreSeedNonVocab(n.operation,r);return s===0?No.getScoreSelectivity(a.operation)-No.getScoreSelectivity(n.operation):s}return n.operation.type===td.Algebra.types.PATTERN?-1:1})}async test(e){return!0}async run(e){const r=[],n=e.context.get(ioe.KeysRdfResolveQuadPattern.sources);if(n)for(const a of n){const s=(0,noe.getDataSourceValue)(a);typeof s=="string"&&r.push(s)}return{entries:No.sortJoinEntries(e.entries,r)}}}fv.ActorRdfJoinEntriesSortTraversalZeroKnowledge=No;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(fv,t)})(KM);var ZM={},ff={},e7={},bv={};Object.defineProperty(bv,"__esModule",{value:!0});bv.ActorRdfJoinSelectivity=void 0;const aoe=et;class soe extends aoe.Actor{constructor(e){super(e)}}bv.ActorRdfJoinSelectivity=soe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(bv,t)})(e7);Object.defineProperty(ff,"__esModule",{value:!0});ff.JoinTypes=ff.ActorRdfJoinSelectivityVariableCounting=void 0;const ooe=e7,v1=Tt;class Co extends ooe.ActorRdfJoinSelectivity{constructor(e){super(e)}async test(e){return{accuracy:.5}}static getPatternCost(e){let r=1;return e.subject.termType==="Variable"&&(r+=4),(e.predicate.termType==="Variable"||e.type===v1.Algebra.types.PATH)&&(r+=1),e.object.termType==="Variable"&&(r+=2),e.graph.termType==="Variable"&&(r+=1),r/9}static getJoinTypes(e,r){const n=[];return e.subject.termType==="Variable"?(e.subject.equals(r.subject)&&n.push(tt.unboundSS),r.type==="pattern"&&e.subject.equals(r.predicate)&&n.push(tt.unboundSP),e.subject.equals(r.object)&&n.push(tt.unboundSO),e.subject.equals(r.graph)&&n.push(tt.unboundSG)):(e.subject.equals(r.subject)&&n.push(tt.boundSS),r.type==="pattern"&&e.subject.equals(r.predicate)&&n.push(tt.boundSP),e.subject.equals(r.object)&&n.push(tt.boundSO),e.subject.equals(r.graph)&&n.push(tt.boundSG)),e.type==="pattern"&&(e.predicate.termType==="Variable"?(e.predicate.equals(r.subject)&&n.push(tt.unboundPS),r.type==="pattern"&&e.predicate.equals(r.predicate)&&n.push(tt.unboundPP),e.predicate.equals(r.object)&&n.push(tt.unboundPO),e.predicate.equals(r.graph)&&n.push(tt.unboundPG)):(e.predicate.equals(r.subject)&&n.push(tt.boundPS),r.type==="pattern"&&e.predicate.equals(r.predicate)&&n.push(tt.boundPP),e.predicate.equals(r.object)&&n.push(tt.boundPO),e.predicate.equals(r.graph)&&n.push(tt.boundPG))),e.object.termType==="Variable"?(e.object.equals(r.subject)&&n.push(tt.unboundOS),r.type==="pattern"&&e.object.equals(r.predicate)&&n.push(tt.unboundOP),e.object.equals(r.object)&&n.push(tt.unboundOO),e.object.equals(r.graph)&&n.push(tt.unboundOG)):(e.object.equals(r.subject)&&n.push(tt.boundOS),r.type==="pattern"&&e.object.equals(r.predicate)&&n.push(tt.boundOP),e.object.equals(r.object)&&n.push(tt.boundOO),e.object.equals(r.graph)&&n.push(tt.boundOG)),e.graph.termType==="Variable"?(e.graph.equals(r.subject)&&n.push(tt.unboundGS),r.type==="pattern"&&e.graph.equals(r.predicate)&&n.push(tt.unboundGP),e.graph.equals(r.object)&&n.push(tt.unboundGO),e.graph.equals(r.graph)&&n.push(tt.unboundGG)):(e.graph.equals(r.subject)&&n.push(tt.boundGS),r.type==="pattern"&&e.graph.equals(r.predicate)&&n.push(tt.boundGP),e.graph.equals(r.object)&&n.push(tt.boundGO),e.graph.equals(r.graph)&&n.push(tt.boundGG)),n}static getOperationsPairwiseJoinCost(e,r){let n=Co.MAX_PAIRWISE_COST;for(const a of Co.getJoinTypes(e,r))switch(a){case tt.boundSS:n-=2*2;break;case tt.boundSP:n-=3*2;break;case tt.boundSO:n-=1*2;break;case tt.boundSG:n-=3*2;break;case tt.boundPS:n-=3*2;break;case tt.boundPP:return 1;case tt.boundPO:n-=3*2;break;case tt.boundPG:n-=3*2;break;case tt.boundOS:n-=1*2;break;case tt.boundOP:n-=3*2;break;case tt.boundOO:n-=1*2;break;case tt.boundOG:n-=3*2;break;case tt.boundGS:n-=3*2;break;case tt.boundGP:n-=3*2;break;case tt.boundGO:n-=3*2;break;case tt.boundGG:n-=3*2;break;case tt.unboundSS:n-=2;break;case tt.unboundSP:n-=3;break;case tt.unboundSO:n-=1;break;case tt.unboundSG:n-=3;break;case tt.unboundPS:n-=3;break;case tt.unboundPP:n-=3;break;case tt.unboundPO:n-=3;break;case tt.unboundPG:n-=3;break;case tt.unboundOS:n-=1;break;case tt.unboundOP:n-=3;break;case tt.unboundOO:n-=1;break;case tt.unboundOG:n-=3;break;case tt.unboundGS:n-=3;break;case tt.unboundGP:n-=3;break;case tt.unboundGO:n-=3;break;case tt.unboundGG:n-=3;break}return n/Co.MAX_PAIRWISE_COST}static getOperationsJoinCost(e){const r=[];for(const s of e)v1.Util.recurseOperation(s,{[v1.Algebra.types.PATTERN](o){return r.push(o),!1},[v1.Algebra.types.PATH](o){return r.push(o),!1}});let n=0,a=0;for(const s of r)for(const o of r)s!==o&&(n+=Co.getOperationsPairwiseJoinCost(s,o),a++);return a===0?1:n/a*r.reduce((s,o)=>s*Co.getPatternCost(o),1)}async run(e){return e.entries.length<=1?{selectivity:1}:{selectivity:Co.getOperationsJoinCost(e.entries.map(r=>r.operation))}}}ff.ActorRdfJoinSelectivityVariableCounting=Co;Co.MAX_PAIRWISE_COST=41*2;var tt;(function(t){t[t.boundSS=0]="boundSS",t[t.boundSP=1]="boundSP",t[t.boundSO=2]="boundSO",t[t.boundSG=3]="boundSG",t[t.boundPS=4]="boundPS",t[t.boundPP=5]="boundPP",t[t.boundPO=6]="boundPO",t[t.boundPG=7]="boundPG",t[t.boundOS=8]="boundOS",t[t.boundOP=9]="boundOP",t[t.boundOO=10]="boundOO",t[t.boundOG=11]="boundOG",t[t.boundGS=12]="boundGS",t[t.boundGP=13]="boundGP",t[t.boundGO=14]="boundGO",t[t.boundGG=15]="boundGG",t[t.unboundSS=16]="unboundSS",t[t.unboundSP=17]="unboundSP",t[t.unboundSO=18]="unboundSO",t[t.unboundSG=19]="unboundSG",t[t.unboundPS=20]="unboundPS",t[t.unboundPP=21]="unboundPP",t[t.unboundPO=22]="unboundPO",t[t.unboundPG=23]="unboundPG",t[t.unboundOS=24]="unboundOS",t[t.unboundOP=25]="unboundOP",t[t.unboundOO=26]="unboundOO",t[t.unboundOG=27]="unboundOG",t[t.unboundGS=28]="unboundGS",t[t.unboundGP=29]="unboundGP",t[t.unboundGO=30]="unboundGO",t[t.unboundGG=31]="unboundGG"})(tt||(ff.JoinTypes=tt={}));(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ff,t)})(ZM);var t7={},mv={},tR={},gv={};Object.defineProperty(gv,"__esModule",{value:!0});gv.ActorRdfMetadata=void 0;const uoe=et;class coe extends uoe.Actor{constructor(e){super(e)}}gv.ActorRdfMetadata=coe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(gv,t)})(tR);Object.defineProperty(mv,"__esModule",{value:!0});mv.ActorRdfMetadataPrimaryTopic=void 0;const loe=tR,LN=Kt;class doe extends loe.ActorRdfMetadata{constructor(e){super(e)}async test(e){if(e.triples)throw new Error("This actor only supports non-triple quad streams.");return!0}async run(e){const r=new LN.Readable({objectMode:!0}),n=new LN.Readable({objectMode:!0}),a=()=>{r._read=n._read=()=>{},e.quads.on("error",c=>{r.emit("error",c),n.emit("error",c)});const s={};let o;const u={};e.quads.on("data",c=>{c.predicate.value==="http://rdfs.org/ns/void#subset"&&c.object.value===e.url?o=c.subject.value:c.predicate.value==="http://xmlns.com/foaf/0.1/primaryTopic"&&(u[c.object.value]=c.subject.value);let l=s[c.graph.value];l||(l=s[c.graph.value]=[]),l.push(c)}),e.quads.on("end",()=>{const c=o?u[o]:void 0;for(const l in s)if(l===c){for(const d of s[l])n.push(d);if(this.metadataToData)for(const d of s[l])r.push(d)}else{for(const d of s[l])r.push(d);if(!c&&this.dataToMetadataOnInvalidMetadataGraph)for(const d of s[l])n.push(d)}r.push(null),n.push(null)})};return r._read=n._read=()=>{a()},{data:r,metadata:n}}}mv.ActorRdfMetadataPrimaryTopic=doe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(mv,t)})(t7);var r7={},_v={};Object.defineProperty(_v,"__esModule",{value:!0});_v.ActorRdfMetadataAll=void 0;const foe=tR,BN=Kt;class hoe extends foe.ActorRdfMetadata{constructor(e){super(e)}async test(e){return!0}async run(e){const r=new BN.Readable({objectMode:!0}),n=new BN.Readable({objectMode:!0});e.quads.on("error",s=>{r.emit("error",s),n.emit("error",s)});const a=()=>{r._read=n._read=()=>{},e.quads.on("data",s=>{r.push(s),n.push(s)}),e.quads.on("end",()=>{r.push(null),n.push(null)})};return r._read=n._read=()=>{a()},{data:r,metadata:n}}}_v.ActorRdfMetadataAll=hoe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(_v,t)})(r7);var n7={},vv={},k0={},wv={};Object.defineProperty(wv,"__esModule",{value:!0});wv.ActorRdfMetadataAccumulate=void 0;const poe=et;class yoe extends poe.Actor{constructor(e){super(e)}}wv.ActorRdfMetadataAccumulate=yoe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(wv,t)})(k0);Object.defineProperty(vv,"__esModule",{value:!0});vv.ActorRdfMetadataAccumulateCanContainUndefs=void 0;const boe=k0;class moe extends boe.ActorRdfMetadataAccumulate{constructor(e){super(e)}async test(e){return!0}async run(e){if(e.mode==="initialize")return{metadata:{canContainUndefs:!1}};let r=e.accumulatedMetadata.canContainUndefs;return e.appendingMetadata.canContainUndefs&&(r=!0),{metadata:{canContainUndefs:r}}}}vv.ActorRdfMetadataAccumulateCanContainUndefs=moe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(vv,t)})(n7);var i7={},Sv={};Object.defineProperty(Sv,"__esModule",{value:!0});Sv.ActorRdfMetadataAccumulateCardinality=void 0;const goe=k0;class _oe extends goe.ActorRdfMetadataAccumulate{constructor(e){super(e)}async test(e){return!0}async run(e){if(e.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0}}};const r={...e.accumulatedMetadata.cardinality};if(r.dataset)if(e.appendingMetadata.cardinality.dataset){if(r.dataset!==e.appendingMetadata.cardinality.dataset&&e.appendingMetadata.subsetOf===r.dataset)return{metadata:{cardinality:e.appendingMetadata.cardinality}};if(r.dataset!==e.appendingMetadata.cardinality.dataset)delete r.dataset;else return{metadata:{cardinality:r}}}else return{metadata:{cardinality:r}};return!e.appendingMetadata.cardinality||!Number.isFinite(e.appendingMetadata.cardinality.value)?(r.type="estimate",r.value=Number.POSITIVE_INFINITY):(e.appendingMetadata.cardinality.type==="estimate"&&(r.type="estimate"),r.value+=e.appendingMetadata.cardinality.value),{metadata:{cardinality:r}}}}Sv.ActorRdfMetadataAccumulateCardinality=_oe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Sv,t)})(i7);var a7={},Tv={};Object.defineProperty(Tv,"__esModule",{value:!0});Tv.ActorRdfMetadataAccumulatePageSize=void 0;const voe=k0;class woe extends voe.ActorRdfMetadataAccumulate{constructor(e){super(e)}async test(e){return!0}async run(e){return e.mode==="initialize"?{metadata:{}}:{metadata:{..."pageSize"in e.accumulatedMetadata||"pageSize"in e.appendingMetadata?{pageSize:(e.accumulatedMetadata.pageSize||0)+(e.appendingMetadata.pageSize||0)}:{}}}}}Tv.ActorRdfMetadataAccumulatePageSize=woe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tv,t)})(a7);var s7={},Ev={};Object.defineProperty(Ev,"__esModule",{value:!0});Ev.ActorRdfMetadataAccumulateRequestTime=void 0;const Soe=k0;class Toe extends Soe.ActorRdfMetadataAccumulate{constructor(e){super(e)}async test(e){return!0}async run(e){return e.mode==="initialize"?{metadata:{}}:{metadata:{..."requestTime"in e.accumulatedMetadata||"requestTime"in e.appendingMetadata?{requestTime:(e.accumulatedMetadata.requestTime||0)+(e.appendingMetadata.requestTime||0)}:{}}}}}Ev.ActorRdfMetadataAccumulateRequestTime=Toe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ev,t)})(s7);var o7={},Ov={},uo={},Av={};Object.defineProperty(Av,"__esModule",{value:!0});Av.ActorRdfMetadataExtract=void 0;const Eoe=et;class Ooe extends Eoe.Actor{constructor(e){super(e)}}Av.ActorRdfMetadataExtract=Ooe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Av,t)})(uo);var u7={exports:{}};(function(t){(function(e){var r=function(){function b(y){this.options=y}return b.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},b}(),n=function(){function b(B){return Object.prototype.toString.apply(B)==="[object Array]"}function y(B){return Object.prototype.toString.apply(B)==="[object String]"}function S(B){return Object.prototype.toString.apply(B)==="[object Number]"}function w(B){return Object.prototype.toString.apply(B)==="[object Boolean]"}function I(B,Q){var N="",D=!0,F;for(F=0;F<B.length;F+=1)D?D=!1:N+=Q,N+=B[F];return N}function O(B,Q){for(var N=[],D=0;D<B.length;D+=1)N.push(Q(B[D]));return N}function T(B,Q){for(var N=[],D=0;D<B.length;D+=1)Q(B[D])&&N.push(B[D]);return N}function x(B){if(typeof B!="object"||B===null)return B;Object.freeze(B);var Q,N;for(N in B)B.hasOwnProperty(N)&&(Q=B[N],typeof Q=="object"&&P(Q));return B}function P(B){return typeof Object.freeze=="function"?x(B):B}return{isArray:b,isString:y,isNumber:S,isBoolean:w,join:I,map:O,filter:T,deepFreeze:P}}(),a=function(){function b(w){return w>="a"&&w<="z"||w>="A"&&w<="Z"}function y(w){return w>="0"&&w<="9"}function S(w){return y(w)||w>="a"&&w<="f"||w>="A"&&w<="F"}return{isAlpha:b,isDigit:y,isHexDigit:S}}(),s=function(){var b={encode:function(T){return unescape(encodeURIComponent(T))},numBytes:function(T){return T<=127?1:194<=T&&T<=223?2:224<=T&&T<=239?3:240<=T&&T<=244?4:0},isValidFollowingCharCode:function(T){return 128<=T&&T<=191}};function y(T){var x="",P=b.encode(T),B,Q;for(Q=0;Q<P.length;Q+=1)B=P.charCodeAt(Q),x+="%"+(B<16?"0":"")+B.toString(16).toUpperCase();return x}function S(T,x){return T.charAt(x)==="%"&&a.isHexDigit(T.charAt(x+1))&&a.isHexDigit(T.charAt(x+2))}function w(T,x){return parseInt(T.substr(x,2),16)}function I(T){if(!S(T,0))return!1;var x=w(T,1),P=b.numBytes(x);if(P===0)return!1;for(var B=1;B<P;B+=1)if(!S(T,3*B)||!b.isValidFollowingCharCode(w(T,3*B+1)))return!1;return!0}function O(T,x){var P=T.charAt(x);if(!S(T,x))return P;var B=w(T,x+1),Q=b.numBytes(B);if(Q===0)return P;for(var N=1;N<Q;N+=1)if(!S(T,x+3*N)||!b.isValidFollowingCharCode(w(T,x+3*N+1)))return P;return T.substr(x,3*Q)}return{encodeCharacter:y,isPctEncoded:I,pctCharAt:O}}(),o=function(){function b(w){return a.isAlpha(w)||a.isDigit(w)||w==="_"||s.isPctEncoded(w)}function y(w){return a.isAlpha(w)||a.isDigit(w)||w==="-"||w==="."||w==="_"||w==="~"}function S(w){return w===":"||w==="/"||w==="?"||w==="#"||w==="["||w==="]"||w==="@"||w==="!"||w==="$"||w==="&"||w==="("||w===")"||w==="*"||w==="+"||w===","||w===";"||w==="="||w==="'"}return{isVarchar:b,isUnreserved:y,isReserved:S}}(),u=function(){function b(I,O){var T="",x,P="";for((typeof I=="number"||typeof I=="boolean")&&(I=I.toString()),x=0;x<I.length;x+=P.length)P=I.charAt(x),T+=o.isUnreserved(P)||O&&o.isReserved(P)?P:s.encodeCharacter(P);return T}function y(I){return b(I,!0)}function S(I,O){var T=s.pctCharAt(I,O);return T.length>1||o.isReserved(T)||o.isUnreserved(T)?T:s.encodeCharacter(T)}function w(I){var O="",T,x="";for(T=0;T<I.length;T+=x.length)x=s.pctCharAt(I,T),x.length>1?O+=x:O+=o.isReserved(x)||o.isUnreserved(x)?x:s.encodeCharacter(x);return O}return{encode:b,encodePassReserved:y,encodeLiteral:w,encodeLiteralCharacter:S}}(),c=function(){var b={};function y(S){b[S]={symbol:S,separator:S==="?"?"&":S===""||S==="+"||S==="#"?",":S,named:S===";"||S==="&"||S==="?",ifEmpty:S==="&"||S==="?"?"=":"",first:S==="+"?"":S,encode:S==="+"||S==="#"?u.encodePassReserved:u.encode,toString:function(){return this.symbol}}}return y(""),y("+"),y("#"),y("."),y("/"),y(";"),y("?"),y("&"),{valueOf:function(S){return b[S]?b[S]:"=,!@|".indexOf(S)>=0?null:b[""]}}}();function l(b){var y;if(b==null)return!1;if(n.isArray(b))return b.length>0;if(typeof b=="string"||typeof b=="number"||typeof b=="boolean")return!0;for(y in b)if(b.hasOwnProperty(y)&&l(b[y]))return!0;return!1}var d=function(){function b(y){this.literal=u.encodeLiteral(y)}return b.prototype.expand=function(){return this.literal},b.prototype.toString=b.prototype.expand,b}(),h=function(){function b(S){var w,I=[],O=null,T=null,x=null,P,B="";function Q(){var D=S.substring(T,P);if(D.length===0)throw new r({expressionText:S,message:"a varname must be specified",position:P});O={varname:D,exploded:!1,maxLength:null},T=null}function N(){if(x===P)throw new r({expressionText:S,message:"after a ':' you have to specify the length",position:P});O.maxLength=parseInt(S.substring(x,P),10),x=null}for(w=function(D){var F=c.valueOf(D);if(F===null)throw new r({expressionText:S,message:"illegal use of reserved operator",position:P,operator:D});return F}(S.charAt(0)),P=w.symbol.length,T=P;P<S.length;P+=B.length){if(B=s.pctCharAt(S,P),T!==null){if(B==="."){if(T===P)throw new r({expressionText:S,message:"a varname MUST NOT start with a dot",position:P});continue}if(o.isVarchar(B))continue;Q()}if(x!==null){if(P===x&&B==="0")throw new r({expressionText:S,message:"A :prefix must not start with digit 0",position:P});if(a.isDigit(B)){if(P-x>=4)throw new r({expressionText:S,message:"A :prefix must have max 4 digits",position:P});continue}N()}if(B===":"){if(O.maxLength!==null)throw new r({expressionText:S,message:"only one :maxLength is allowed per varspec",position:P});if(O.exploded)throw new r({expressionText:S,message:"an exploeded varspec MUST NOT be varspeced",position:P});x=P+1;continue}if(B==="*"){if(O===null)throw new r({expressionText:S,message:"exploded without varspec",position:P});if(O.exploded)throw new r({expressionText:S,message:"exploded twice",position:P});if(O.maxLength)throw new r({expressionText:S,message:"an explode (*) MUST NOT follow to a prefix",position:P});O.exploded=!0;continue}if(B===","){I.push(O),O=null,T=P+1;continue}throw new r({expressionText:S,message:"illegal character",character:B,position:P})}return T!==null&&Q(),x!==null&&N(),I.push(O),new f(S,w,I)}function y(S){var w,I,O=[],T=null,x=0;for(w=0;w<S.length;w+=1){if(I=S.charAt(w),x!==null){if(I==="}")throw new r({templateText:S,message:"unopened brace closed",position:w});I==="{"&&(x<w&&O.push(new d(S.substring(x,w))),x=null,T=w);continue}if(T!==null){if(I==="{")throw new r({templateText:S,message:"brace already opened",position:w});if(I==="}"){if(T+1===w)throw new r({templateText:S,message:"empty braces",position:T});try{O.push(b(S.substring(T+1,w)))}catch(P){throw P.prototype===r.prototype?new r({templateText:S,message:P.options.message,position:T+P.options.position,details:P.options}):P}T=null,x=w+1}continue}throw new Error("reached unreachable code")}if(T!==null)throw new r({templateText:S,message:"unclosed brace",position:T});return x<S.length&&O.push(new d(S.substr(x))),new p(S,O)}return y}(),f=function(){function b(B){return JSON&&JSON.stringify?JSON.stringify(B):B}function y(B){if(!l(B))return!0;if(n.isString(B))return B==="";if(n.isNumber(B)||n.isBoolean(B))return!1;if(n.isArray(B))return B.length===0;for(var Q in B)if(B.hasOwnProperty(Q))return!1;return!0}function S(B){var Q=[],N;for(N in B)B.hasOwnProperty(N)&&Q.push({name:N,value:B[N]});return Q}function w(B,Q,N){this.templateText=B,this.operator=Q,this.varspecs=N}w.prototype.toString=function(){return this.templateText};function I(B,Q,N){var D="";if(N=N.toString(),Q.named){if(D+=u.encodeLiteral(B.varname),N==="")return D+=Q.ifEmpty,D;D+="="}return B.maxLength!==null&&(N=N.substr(0,B.maxLength)),D+=Q.encode(N),D}function O(B){return l(B.value)}function T(B,Q,N){var D=[],F="";if(Q.named){if(F+=u.encodeLiteral(B.varname),y(N))return F+=Q.ifEmpty,F;F+="="}return n.isArray(N)?(D=N,D=n.filter(D,l),D=n.map(D,Q.encode),F+=n.join(D,",")):(D=S(N),D=n.filter(D,O),D=n.map(D,function(W){return Q.encode(W.name)+","+Q.encode(W.value)}),F+=n.join(D,",")),F}function x(B,Q,N){var D=n.isArray(N),F=[];return D?(F=N,F=n.filter(F,l),F=n.map(F,function(W){var z=u.encodeLiteral(B.varname);return y(W)?z+=Q.ifEmpty:z+="="+Q.encode(W),z})):(F=S(N),F=n.filter(F,O),F=n.map(F,function(W){var z=u.encodeLiteral(W.name);return y(W.value)?z+=Q.ifEmpty:z+="="+Q.encode(W.value),z})),n.join(F,Q.separator)}function P(B,Q){var N=[],D="";return n.isArray(Q)?(N=Q,N=n.filter(N,l),N=n.map(N,B.encode),D+=n.join(N,B.separator)):(N=S(Q),N=n.filter(N,function(F){return l(F.value)}),N=n.map(N,function(F){return B.encode(F.name)+"="+B.encode(F.value)}),D+=n.join(N,B.separator)),D}return w.prototype.expand=function(B){var Q=[],N,D,F,W=this.operator;for(N=0;N<this.varspecs.length;N+=1)if(D=this.varspecs[N],F=B[D.varname],F!=null)if(D.exploded,n.isArray(F),typeof F=="string"||typeof F=="number"||typeof F=="boolean")Q.push(I(D,W,F));else{if(D.maxLength&&l(F))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+b(F));D.exploded?l(F)&&(W.named?Q.push(x(D,W,F)):Q.push(P(W,F))):(W.named||!y(F))&&Q.push(T(D,W,F))}return Q.length===0?"":W.first+n.join(Q,W.separator)},w}(),p=function(){function b(y,S){this.templateText=y,this.expressions=S,n.deepFreeze(this)}return b.prototype.toString=function(){return this.templateText},b.prototype.expand=function(y){var S,w="";for(S=0;S<this.expressions.length;S+=1)w+=this.expressions[S].expand(y);return w},b.parse=h,b.UriTemplateError=r,b}();e(p)})(function(e){t.exports=e})})(u7);var Aoe=u7.exports;Object.defineProperty(Ov,"__esModule",{value:!0});Ov.ActorRdfMetadataExtractHydraControls=void 0;const xoe=uo,Roe=Aoe;class al extends xoe.ActorRdfMetadataExtract{constructor(e){super(e),this.parsedUriTemplateCache={}}async test(e){return!0}getLinks(e,r){return Object.fromEntries(al.LINK_TYPES.map(n=>{const a=r[n]||r[`${n}Page`],s=a&&a[e];return[n,s&&s.length>0?s[0]:null]}))}parseUriTemplateCached(e){const r=this.parsedUriTemplateCache[e];return r||(this.parsedUriTemplateCache[e]=(0,Roe.parse)(e))}getSearchForms(e){const r=e.search,n=[];if(r)for(const a in r)for(const s of r[a]){const o=(e.template||{})[s]||[];if(o.length!==1)throw new Error(`Expected 1 hydra:template for ${s}`);const u=o[0],c=this.parseUriTemplateCached(u),l=Object.fromEntries(((e.mapping||{})[s]||[]).map(h=>{const f=((e.variable||{})[h]||[])[0],p=((e.property||{})[h]||[])[0];if(!f)throw new Error(`Expected a hydra:variable for ${h}`);if(!p)throw new Error(`Expected a hydra:property for ${h}`);return[p,f]})),d=h=>c.expand(Object.fromEntries(Object.keys(h).map(f=>[l[f],h[f]])));n.push({dataset:a,template:u,mappings:l,getUri:d})}return{values:n}}getHydraProperties(e){return new Promise((r,n)=>{e.on("error",n);const a={};e.on("data",s=>{if(s.predicate.value.startsWith(al.HYDRA)){const o=s.predicate.value.slice(al.HYDRA.length),u=a[o]||(a[o]={});(u[s.subject.value]||(u[s.subject.value]=[])).push(s.object.value)}}),e.on("end",()=>r(a))})}async run(e){const r={},n=await this.getHydraProperties(e.metadata);return Object.assign(r,this.getLinks(e.url,n)),r.searchForms=this.getSearchForms(n),{metadata:r}}}Ov.ActorRdfMetadataExtractHydraControls=al;al.HYDRA="http://www.w3.org/ns/hydra/core#";al.LINK_TYPES=["first","next","previous","last"];(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ov,t)})(o7);var c7={},xv={};Object.defineProperty(xv,"__esModule",{value:!0});xv.ActorRdfMetadataExtractHydraCount=void 0;const Ioe=uo;class Poe extends Ioe.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}run(e){return new Promise((r,n)=>{e.metadata.on("error",n),e.metadata.on("data",a=>{this.predicates.includes(a.predicate.value)&&r({metadata:{cardinality:{type:"estimate",value:Number.parseInt(a.object.value,10),dataset:a.subject.value}}})}),e.metadata.on("end",()=>{r({metadata:{cardinality:{type:"estimate",value:0}}})})})}}xv.ActorRdfMetadataExtractHydraCount=Poe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(xv,t)})(c7);var l7={},Rv={};Object.defineProperty(Rv,"__esModule",{value:!0});Rv.ActorRdfMetadataExtractHydraPagesize=void 0;const Doe=uo;class Noe extends Doe.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){return new Promise((r,n)=>{e.metadata.on("error",n),e.metadata.on("data",a=>{this.predicates.includes(a.predicate.value)&&r({metadata:{pageSize:Number.parseInt(a.object.value,10)}})}),e.metadata.on("end",()=>{r({metadata:{}})})})}}Rv.ActorRdfMetadataExtractHydraPagesize=Noe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Rv,t)})(l7);var d7={},Iv={};Object.defineProperty(Iv,"__esModule",{value:!0});Iv.ActorRdfMetadataExtractRequestTime=void 0;const joe=uo;class Coe extends joe.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){return{metadata:{requestTime:e.requestTime}}}}Iv.ActorRdfMetadataExtractRequestTime=Coe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Iv,t)})(d7);var f7={},Pv={};Object.defineProperty(Pv,"__esModule",{value:!0});Pv.ActorRdfMetadataExtractAllowHttpMethods=void 0;const Foe=uo;class Moe extends Foe.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){var n,a;const r={};return(n=e.headers)!=null&&n.get("allow")&&(r.allowHttpMethods=(a=e.headers.get("allow"))==null?void 0:a.split(/, */u)),{metadata:r}}}Pv.ActorRdfMetadataExtractAllowHttpMethods=Moe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Pv,t)})(f7);var h7={},Dv={};Object.defineProperty(Dv,"__esModule",{value:!0});Dv.ActorRdfMetadataExtractPutAccepted=void 0;const Loe=uo;class Boe extends Loe.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){var n,a;const r={};return(n=e.headers)!=null&&n.get("accept-put")&&(r.putAccepted=(a=e.headers.get("accept-put"))==null?void 0:a.split(/, */u)),{metadata:r}}}Dv.ActorRdfMetadataExtractPutAccepted=Boe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Dv,t)})(h7);var p7={},Nv={};Object.defineProperty(Nv,"__esModule",{value:!0});Nv.ActorRdfMetadataExtractPatchSparqlUpdate=void 0;const $oe=uo;class Uoe extends $oe.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){var n,a,s,o;const r={};return((a=(n=e.headers)==null?void 0:n.get("accept-patch"))!=null&&a.includes("application/sparql-update")||(o=(s=e.headers)==null?void 0:s.get("ms-author-via"))!=null&&o.includes("SPARQL"))&&(r.patchSparqlUpdate=!0),{metadata:r}}}Nv.ActorRdfMetadataExtractPatchSparqlUpdate=Uoe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Nv,t)})(p7);var y7={},jv={};Object.defineProperty(jv,"__esModule",{value:!0});jv.ActorRdfMetadataExtractSparqlService=void 0;const qoe=uo,Voe=Na;class Hoe extends qoe.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){return new Promise((r,n)=>{e.metadata.on("error",n);const a={};e.metadata.on("data",s=>{s.predicate.value==="http://www.w3.org/ns/sparql-service-description#endpoint"&&(s.subject.termType==="BlankNode"||s.subject.value===e.url)?(a.sparqlService=s.object.termType==="Literal"?(0,Voe.resolve)(s.object.value,e.url):s.object.value,this.inferHttpsEndpoint&&e.url.startsWith("https")&&!a.sparqlService.startsWith("https")&&(a.sparqlService=a.sparqlService.replace("http:","https:"))):s.predicate.value==="http://www.w3.org/ns/sparql-service-description#defaultGraph"&&(a.defaultGraph=s.object.value)}),e.metadata.on("end",()=>{r({metadata:a})})})}}jv.ActorRdfMetadataExtractSparqlService=Hoe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(jv,t)})(y7);var b7={},Cv={},m7={},Lp={},Vf={};Object.defineProperty(Vf,"__esModule",{value:!0});Vf.QuoteType=void 0;var rd=eu,lt;(function(t){t[t.Tab=9]="Tab",t[t.NewLine=10]="NewLine",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.ExclamationMark=33]="ExclamationMark",t[t.Number=35]="Number",t[t.Amp=38]="Amp",t[t.SingleQuote=39]="SingleQuote",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dash=45]="Dash",t[t.Slash=47]="Slash",t[t.Zero=48]="Zero",t[t.Nine=57]="Nine",t[t.Semi=59]="Semi",t[t.Lt=60]="Lt",t[t.Eq=61]="Eq",t[t.Gt=62]="Gt",t[t.Questionmark=63]="Questionmark",t[t.UpperA=65]="UpperA",t[t.LowerA=97]="LowerA",t[t.UpperF=70]="UpperF",t[t.LowerF=102]="LowerF",t[t.UpperZ=90]="UpperZ",t[t.LowerZ=122]="LowerZ",t[t.LowerX=120]="LowerX",t[t.OpeningSquareBracket=91]="OpeningSquareBracket"})(lt||(lt={}));var Be;(function(t){t[t.Text=1]="Text",t[t.BeforeTagName=2]="BeforeTagName",t[t.InTagName=3]="InTagName",t[t.InSelfClosingTag=4]="InSelfClosingTag",t[t.BeforeClosingTagName=5]="BeforeClosingTagName",t[t.InClosingTagName=6]="InClosingTagName",t[t.AfterClosingTagName=7]="AfterClosingTagName",t[t.BeforeAttributeName=8]="BeforeAttributeName",t[t.InAttributeName=9]="InAttributeName",t[t.AfterAttributeName=10]="AfterAttributeName",t[t.BeforeAttributeValue=11]="BeforeAttributeValue",t[t.InAttributeValueDq=12]="InAttributeValueDq",t[t.InAttributeValueSq=13]="InAttributeValueSq",t[t.InAttributeValueNq=14]="InAttributeValueNq",t[t.BeforeDeclaration=15]="BeforeDeclaration",t[t.InDeclaration=16]="InDeclaration",t[t.InProcessingInstruction=17]="InProcessingInstruction",t[t.BeforeComment=18]="BeforeComment",t[t.CDATASequence=19]="CDATASequence",t[t.InSpecialComment=20]="InSpecialComment",t[t.InCommentLike=21]="InCommentLike",t[t.BeforeSpecialS=22]="BeforeSpecialS",t[t.BeforeSpecialT=23]="BeforeSpecialT",t[t.SpecialStartSequence=24]="SpecialStartSequence",t[t.InSpecialTag=25]="InSpecialTag",t[t.InEntity=26]="InEntity"})(Be||(Be={}));function Io(t){return t===lt.Space||t===lt.NewLine||t===lt.Tab||t===lt.FormFeed||t===lt.CarriageReturn}function w1(t){return t===lt.Slash||t===lt.Gt||Io(t)}function koe(t){return t>=lt.LowerA&&t<=lt.LowerZ||t>=lt.UpperA&&t<=lt.UpperZ}var zc;(function(t){t[t.NoValue=0]="NoValue",t[t.Unquoted=1]="Unquoted",t[t.Single=2]="Single",t[t.Double=3]="Double"})(zc||(Vf.QuoteType=zc={}));var Mn={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])},Qoe=function(){function t(e,r){var n=e.xmlMode,a=n===void 0?!1:n,s=e.decodeEntities,o=s===void 0?!0:s,u=this;this.cbs=r,this.state=Be.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=Be.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=a,this.decodeEntities=o,this.entityDecoder=new rd.EntityDecoder(a?rd.xmlDecodeTree:rd.htmlDecodeTree,function(c,l){return u.emitCodePoint(c,l)})}return t.prototype.reset=function(){this.state=Be.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Be.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},t.prototype.write=function(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()},t.prototype.end=function(){this.running&&this.finish()},t.prototype.pause=function(){this.running=!1},t.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},t.prototype.stateText=function(e){e===lt.Lt||!this.decodeEntities&&this.fastForwardTo(lt.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=Be.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===lt.Amp&&this.startEntity()},t.prototype.stateSpecialStartSequence=function(e){var r=this.sequenceIndex===this.currentSequence.length,n=r?w1(e):(e|32)===this.currentSequence[this.sequenceIndex];if(!n)this.isSpecial=!1;else if(!r){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=Be.InTagName,this.stateInTagName(e)},t.prototype.stateInSpecialTag=function(e){if(this.sequenceIndex===this.currentSequence.length){if(e===lt.Gt||Io(e)){var r=this.index-this.currentSequence.length;if(this.sectionStart<r){var n=this.index;this.index=r,this.cbs.ontext(this.sectionStart,r),this.index=n}this.isSpecial=!1,this.sectionStart=r+2,this.stateInClosingTagName(e);return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Mn.TitleEnd?this.decodeEntities&&e===lt.Amp&&this.startEntity():this.fastForwardTo(lt.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===lt.Lt)},t.prototype.stateCDATASequence=function(e){e===Mn.Cdata[this.sequenceIndex]?++this.sequenceIndex===Mn.Cdata.length&&(this.state=Be.InCommentLike,this.currentSequence=Mn.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=Be.InDeclaration,this.stateInDeclaration(e))},t.prototype.fastForwardTo=function(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1},t.prototype.stateInCommentLike=function(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Mn.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=Be.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},t.prototype.isTagStartChar=function(e){return this.xmlMode?!w1(e):koe(e)},t.prototype.startSpecial=function(e,r){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=r,this.state=Be.SpecialStartSequence},t.prototype.stateBeforeTagName=function(e){if(e===lt.ExclamationMark)this.state=Be.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===lt.Questionmark)this.state=Be.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){var r=e|32;this.sectionStart=this.index,this.xmlMode?this.state=Be.InTagName:r===Mn.ScriptEnd[2]?this.state=Be.BeforeSpecialS:r===Mn.TitleEnd[2]?this.state=Be.BeforeSpecialT:this.state=Be.InTagName}else e===lt.Slash?this.state=Be.BeforeClosingTagName:(this.state=Be.Text,this.stateText(e))},t.prototype.stateInTagName=function(e){w1(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Be.BeforeAttributeName,this.stateBeforeAttributeName(e))},t.prototype.stateBeforeClosingTagName=function(e){Io(e)||(e===lt.Gt?this.state=Be.Text:(this.state=this.isTagStartChar(e)?Be.InClosingTagName:Be.InSpecialComment,this.sectionStart=this.index))},t.prototype.stateInClosingTagName=function(e){(e===lt.Gt||Io(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=Be.AfterClosingTagName,this.stateAfterClosingTagName(e))},t.prototype.stateAfterClosingTagName=function(e){(e===lt.Gt||this.fastForwardTo(lt.Gt))&&(this.state=Be.Text,this.sectionStart=this.index+1)},t.prototype.stateBeforeAttributeName=function(e){e===lt.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=Be.InSpecialTag,this.sequenceIndex=0):this.state=Be.Text,this.sectionStart=this.index+1):e===lt.Slash?this.state=Be.InSelfClosingTag:Io(e)||(this.state=Be.InAttributeName,this.sectionStart=this.index)},t.prototype.stateInSelfClosingTag=function(e){e===lt.Gt?(this.cbs.onselfclosingtag(this.index),this.state=Be.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Io(e)||(this.state=Be.BeforeAttributeName,this.stateBeforeAttributeName(e))},t.prototype.stateInAttributeName=function(e){(e===lt.Eq||w1(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=Be.AfterAttributeName,this.stateAfterAttributeName(e))},t.prototype.stateAfterAttributeName=function(e){e===lt.Eq?this.state=Be.BeforeAttributeValue:e===lt.Slash||e===lt.Gt?(this.cbs.onattribend(zc.NoValue,this.sectionStart),this.sectionStart=-1,this.state=Be.BeforeAttributeName,this.stateBeforeAttributeName(e)):Io(e)||(this.cbs.onattribend(zc.NoValue,this.sectionStart),this.state=Be.InAttributeName,this.sectionStart=this.index)},t.prototype.stateBeforeAttributeValue=function(e){e===lt.DoubleQuote?(this.state=Be.InAttributeValueDq,this.sectionStart=this.index+1):e===lt.SingleQuote?(this.state=Be.InAttributeValueSq,this.sectionStart=this.index+1):Io(e)||(this.sectionStart=this.index,this.state=Be.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))},t.prototype.handleInAttributeValue=function(e,r){e===r||!this.decodeEntities&&this.fastForwardTo(r)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(r===lt.DoubleQuote?zc.Double:zc.Single,this.index+1),this.state=Be.BeforeAttributeName):this.decodeEntities&&e===lt.Amp&&this.startEntity()},t.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,lt.DoubleQuote)},t.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,lt.SingleQuote)},t.prototype.stateInAttributeValueNoQuotes=function(e){Io(e)||e===lt.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(zc.Unquoted,this.index),this.state=Be.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===lt.Amp&&this.startEntity()},t.prototype.stateBeforeDeclaration=function(e){e===lt.OpeningSquareBracket?(this.state=Be.CDATASequence,this.sequenceIndex=0):this.state=e===lt.Dash?Be.BeforeComment:Be.InDeclaration},t.prototype.stateInDeclaration=function(e){(e===lt.Gt||this.fastForwardTo(lt.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=Be.Text,this.sectionStart=this.index+1)},t.prototype.stateInProcessingInstruction=function(e){(e===lt.Gt||this.fastForwardTo(lt.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=Be.Text,this.sectionStart=this.index+1)},t.prototype.stateBeforeComment=function(e){e===lt.Dash?(this.state=Be.InCommentLike,this.currentSequence=Mn.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=Be.InDeclaration},t.prototype.stateInSpecialComment=function(e){(e===lt.Gt||this.fastForwardTo(lt.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=Be.Text,this.sectionStart=this.index+1)},t.prototype.stateBeforeSpecialS=function(e){var r=e|32;r===Mn.ScriptEnd[3]?this.startSpecial(Mn.ScriptEnd,4):r===Mn.StyleEnd[3]?this.startSpecial(Mn.StyleEnd,4):(this.state=Be.InTagName,this.stateInTagName(e))},t.prototype.stateBeforeSpecialT=function(e){var r=e|32;r===Mn.TitleEnd[3]?this.startSpecial(Mn.TitleEnd,4):r===Mn.TextareaEnd[3]?this.startSpecial(Mn.TextareaEnd,4):(this.state=Be.InTagName,this.stateInTagName(e))},t.prototype.startEntity=function(){this.baseState=this.state,this.state=Be.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?rd.DecodingMode.Strict:this.baseState===Be.Text||this.baseState===Be.InSpecialTag?rd.DecodingMode.Legacy:rd.DecodingMode.Attribute)},t.prototype.stateInEntity=function(){var e=this.entityDecoder.write(this.buffer,this.index-this.offset);e>=0?(this.state=this.baseState,e===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1},t.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===Be.Text||this.state===Be.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===Be.InAttributeValueDq||this.state===Be.InAttributeValueSq||this.state===Be.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},t.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},t.prototype.parse=function(){for(;this.shouldContinue();){var e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case Be.Text:{this.stateText(e);break}case Be.SpecialStartSequence:{this.stateSpecialStartSequence(e);break}case Be.InSpecialTag:{this.stateInSpecialTag(e);break}case Be.CDATASequence:{this.stateCDATASequence(e);break}case Be.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(e);break}case Be.InAttributeName:{this.stateInAttributeName(e);break}case Be.InCommentLike:{this.stateInCommentLike(e);break}case Be.InSpecialComment:{this.stateInSpecialComment(e);break}case Be.BeforeAttributeName:{this.stateBeforeAttributeName(e);break}case Be.InTagName:{this.stateInTagName(e);break}case Be.InClosingTagName:{this.stateInClosingTagName(e);break}case Be.BeforeTagName:{this.stateBeforeTagName(e);break}case Be.AfterAttributeName:{this.stateAfterAttributeName(e);break}case Be.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(e);break}case Be.BeforeAttributeValue:{this.stateBeforeAttributeValue(e);break}case Be.BeforeClosingTagName:{this.stateBeforeClosingTagName(e);break}case Be.AfterClosingTagName:{this.stateAfterClosingTagName(e);break}case Be.BeforeSpecialS:{this.stateBeforeSpecialS(e);break}case Be.BeforeSpecialT:{this.stateBeforeSpecialT(e);break}case Be.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(e);break}case Be.InSelfClosingTag:{this.stateInSelfClosingTag(e);break}case Be.InDeclaration:{this.stateInDeclaration(e);break}case Be.BeforeDeclaration:{this.stateBeforeDeclaration(e);break}case Be.BeforeComment:{this.stateBeforeComment(e);break}case Be.InProcessingInstruction:{this.stateInProcessingInstruction(e);break}case Be.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()},t.prototype.finish=function(){this.state===Be.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()},t.prototype.handleTrailingData=function(){var e=this.buffer.length+this.offset;this.sectionStart>=e||(this.state===Be.InCommentLike?this.currentSequence===Mn.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===Be.InTagName||this.state===Be.BeforeAttributeName||this.state===Be.BeforeAttributeValue||this.state===Be.AfterAttributeName||this.state===Be.InAttributeName||this.state===Be.InAttributeValueSq||this.state===Be.InAttributeValueDq||this.state===Be.InAttributeValueNq||this.state===Be.InClosingTagName||this.cbs.ontext(this.sectionStart,e))},t.prototype.emitCodePoint=function(e,r){this.baseState!==Be.Text&&this.baseState!==Be.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+r,this.index=this.sectionStart-1,this.cbs.onattribentity(e)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+r,this.index=this.sectionStart-1,this.cbs.ontextentity(e,this.sectionStart))},t}();Vf.default=Qoe;var Goe=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zoe=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Woe=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Goe(e,t,r);return zoe(e,t),e};Object.defineProperty(Lp,"__esModule",{value:!0});Lp.Parser=void 0;var S1=Woe(Vf),$N=eu,nd=new Set(["input","option","optgroup","select","button","datalist","textarea"]),fr=new Set(["p"]),UN=new Set(["thead","tbody"]),qN=new Set(["dd","dt"]),VN=new Set(["rt","rp"]),Xoe=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",fr],["h1",fr],["h2",fr],["h3",fr],["h4",fr],["h5",fr],["h6",fr],["select",nd],["input",nd],["output",nd],["button",nd],["datalist",nd],["textarea",nd],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",qN],["dt",qN],["address",fr],["article",fr],["aside",fr],["blockquote",fr],["details",fr],["div",fr],["dl",fr],["fieldset",fr],["figcaption",fr],["figure",fr],["footer",fr],["form",fr],["header",fr],["hr",fr],["main",fr],["nav",fr],["ol",fr],["pre",fr],["section",fr],["table",fr],["ul",fr],["rt",VN],["rp",VN],["tbody",UN],["tfoot",UN]]),Koe=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),HN=new Set(["math","svg"]),kN=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),Joe=/\s|\//,Yoe=function(){function t(e,r){r===void 0&&(r={});var n,a,s,o,u,c;this.options=r,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(n=r.lowerCaseTags)!==null&&n!==void 0?n:this.htmlMode,this.lowerCaseAttributeNames=(a=r.lowerCaseAttributeNames)!==null&&a!==void 0?a:this.htmlMode,this.recognizeSelfClosing=(s=r.recognizeSelfClosing)!==null&&s!==void 0?s:!this.htmlMode,this.tokenizer=new((o=r.Tokenizer)!==null&&o!==void 0?o:S1.default)(this.options,this),this.foreignContext=[!this.htmlMode],(c=(u=this.cbs).onparserinit)===null||c===void 0||c.call(u,this)}return t.prototype.ontext=function(e,r){var n,a,s=this.getSlice(e,r);this.endIndex=r-1,(a=(n=this.cbs).ontext)===null||a===void 0||a.call(n,s),this.startIndex=r},t.prototype.ontextentity=function(e,r){var n,a;this.endIndex=r-1,(a=(n=this.cbs).ontext)===null||a===void 0||a.call(n,(0,$N.fromCodePoint)(e)),this.startIndex=r},t.prototype.isVoidElement=function(e){return this.htmlMode&&Koe.has(e)},t.prototype.onopentagname=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)},t.prototype.emitOpenTag=function(e){var r,n,a,s;this.openTagStart=this.startIndex,this.tagname=e;var o=this.htmlMode&&Xoe.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[0]);){var u=this.stack.shift();(n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,u,!0)}this.isVoidElement(e)||(this.stack.unshift(e),this.htmlMode&&(HN.has(e)?this.foreignContext.unshift(!0):kN.has(e)&&this.foreignContext.unshift(!1))),(s=(a=this.cbs).onopentagname)===null||s===void 0||s.call(a,e),this.cbs.onopentag&&(this.attribs={})},t.prototype.endOpenTag=function(e){var r,n;this.startIndex=this.openTagStart,this.attribs&&((n=(r=this.cbs).onopentag)===null||n===void 0||n.call(r,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},t.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},t.prototype.onclosetag=function(e,r){var n,a,s,o,u,c,l,d;this.endIndex=r;var h=this.getSlice(e,r);if(this.lowerCaseTagNames&&(h=h.toLowerCase()),this.htmlMode&&(HN.has(h)||kN.has(h))&&this.foreignContext.shift(),this.isVoidElement(h))this.htmlMode&&h==="br"&&((o=(s=this.cbs).onopentagname)===null||o===void 0||o.call(s,"br"),(c=(u=this.cbs).onopentag)===null||c===void 0||c.call(u,"br",{},!0),(d=(l=this.cbs).onclosetag)===null||d===void 0||d.call(l,"br",!1));else{var f=this.stack.indexOf(h);if(f!==-1)for(var p=0;p<=f;p++){var b=this.stack.shift();(a=(n=this.cbs).onclosetag)===null||a===void 0||a.call(n,b,p!==f)}else this.htmlMode&&h==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=r+1},t.prototype.onselfclosingtag=function(e){this.endIndex=e,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},t.prototype.closeCurrentTag=function(e){var r,n,a=this.tagname;this.endOpenTag(e),this.stack[0]===a&&((n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,a,!e),this.stack.shift())},t.prototype.onattribname=function(e,r){this.startIndex=e;var n=this.getSlice(e,r);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n},t.prototype.onattribdata=function(e,r){this.attribvalue+=this.getSlice(e,r)},t.prototype.onattribentity=function(e){this.attribvalue+=(0,$N.fromCodePoint)(e)},t.prototype.onattribend=function(e,r){var n,a;this.endIndex=r,(a=(n=this.cbs).onattribute)===null||a===void 0||a.call(n,this.attribname,this.attribvalue,e===S1.QuoteType.Double?'"':e===S1.QuoteType.Single?"'":e===S1.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},t.prototype.getInstructionName=function(e){var r=e.search(Joe),n=r<0?e:e.substr(0,r);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},t.prototype.ondeclaration=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var a=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(a),"!".concat(n))}this.startIndex=r+1},t.prototype.onprocessinginstruction=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var a=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(a),"?".concat(n))}this.startIndex=r+1},t.prototype.oncomment=function(e,r,n){var a,s,o,u;this.endIndex=r,(s=(a=this.cbs).oncomment)===null||s===void 0||s.call(a,this.getSlice(e,r-n)),(u=(o=this.cbs).oncommentend)===null||u===void 0||u.call(o),this.startIndex=r+1},t.prototype.oncdata=function(e,r,n){var a,s,o,u,c,l,d,h,f,p;this.endIndex=r;var b=this.getSlice(e,r-n);!this.htmlMode||this.options.recognizeCDATA?((s=(a=this.cbs).oncdatastart)===null||s===void 0||s.call(a),(u=(o=this.cbs).ontext)===null||u===void 0||u.call(o,b),(l=(c=this.cbs).oncdataend)===null||l===void 0||l.call(c)):((h=(d=this.cbs).oncomment)===null||h===void 0||h.call(d,"[CDATA[".concat(b,"]]")),(p=(f=this.cbs).oncommentend)===null||p===void 0||p.call(f)),this.startIndex=r+1},t.prototype.onend=function(){var e,r;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=0;n<this.stack.length;n++)this.cbs.onclosetag(this.stack[n],!0)}(r=(e=this.cbs).onend)===null||r===void 0||r.call(e)},t.prototype.reset=function(){var e,r,n,a;(r=(e=this.cbs).onreset)===null||r===void 0||r.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(a=(n=this.cbs).onparserinit)===null||a===void 0||a.call(n,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1},t.prototype.parseComplete=function(e){this.reset(),this.end(e)},t.prototype.getSlice=function(e,r){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(e-this.bufferOffset,r-this.bufferOffset);r-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,r-this.bufferOffset);return n},t.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},t.prototype.write=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)},t.prototype.end=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()},t.prototype.pause=function(){this.tokenizer.pause()},t.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},t.prototype.parseChunk=function(e){this.write(e)},t.prototype.done=function(e){this.end(e)},t}();Lp.Parser=Yoe;(function(t){var e=g&&g.__createBinding||(Object.create?function(I,O,T,x){x===void 0&&(x=T);var P=Object.getOwnPropertyDescriptor(O,T);(!P||("get"in P?!O.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return O[T]}}),Object.defineProperty(I,x,P)}:function(I,O,T,x){x===void 0&&(x=T),I[x]=O[T]}),r=g&&g.__setModuleDefault||(Object.create?function(I,O){Object.defineProperty(I,"default",{enumerable:!0,value:O})}:function(I,O){I.default=O}),n=g&&g.__importStar||function(I){if(I&&I.__esModule)return I;var O={};if(I!=null)for(var T in I)T!=="default"&&Object.prototype.hasOwnProperty.call(I,T)&&e(O,I,T);return r(O,I),O},a=g&&g.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.QuoteType=t.Tokenizer=t.createDomStream=t.createDocumentStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var s=Lp,o=Lp;Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return o.Parser}});var u=fa,c=fa;Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function l(I,O){var T=new u.DomHandler(void 0,O);return new s.Parser(T,O).end(I),T.root}t.parseDocument=l;function d(I,O){return l(I,O).children}t.parseDOM=d;function h(I,O,T){var x=new u.DomHandler(function(P){return I(P,x.root)},O,T);return new s.Parser(x,O)}t.createDocumentStream=h;function f(I,O,T){var x=new u.DomHandler(I,O,T);return new s.Parser(x,O)}t.createDomStream=f;var p=Vf;Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return a(p).default}}),Object.defineProperty(t,"QuoteType",{enumerable:!0,get:function(){return p.QuoteType}}),t.ElementType=n(lc);var b=Ws,y=Ws;Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return y.getFeed}});var S={xmlMode:!0};function w(I,O){return O===void 0&&(O=S),(0,b.getFeed)(d(I,O))}t.parseFeed=w,t.DomUtils=n(Ws)})(m7);Object.defineProperty(Cv,"__esModule",{value:!0});Cv.ActorRdfParseHtml=void 0;const Zoe=Rl,eue=m7,tue=Kt;let rue=class extends Zoe.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,n){const a=new tue.Readable({objectMode:!0});return a._read=async()=>{var d;a._read=()=>{};let s=1;function o(h){a.emit("data",h)}function u(h){a.emit("error",h)}function c(){--s===0&&a.push(null)}const l={baseIRI:((d=e.metadata)==null?void 0:d.baseIRI)??"",context:n,emit:o,end:c,error:u,headers:e.headers};Promise.all(this.busRdfParseHtml.publish(l)).then(async h=>{s+=h.length;const f=[];for(const b of h){const{htmlParseListener:y}=await b.actor.run(l);f.push(y)}const p=new eue.Parser({onclosetag(){try{for(const b of f)b.onTagClose()}catch(b){u(b)}},onend(){try{for(const b of f)b.onEnd()}catch(b){u(b)}c()},onopentag(b,y){try{for(const S of f)S.onTagOpen(b,y)}catch(S){u(S)}},ontext(b){try{for(const y of f)y.onText(b)}catch(y){u(y)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:!1});e.data.on("error",u).on("data",b=>p.write(b.toString())).on("end",()=>p.end())}).catch(u)},{data:a}}};Cv.ActorRdfParseHtml=rue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Cv,t)})(b7);var g7={},Fv={},Mv={},Lv={};Object.defineProperty(Lv,"__esModule",{value:!0});Lv.ActorRdfParseHtml=void 0;const nue=et;class iue extends nue.Actor{constructor(e){super(e)}}Lv.ActorRdfParseHtml=iue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Lv,t)})(Mv);var _7={},v7={};Object.defineProperty(v7,"__esModule",{value:!0});var Q0={};Object.defineProperty(Q0,"__esModule",{value:!0});Q0.ItemPropertyHandlerContent=void 0;class aue{canHandle(e,r){return"content"in r}getObject(e,r,n){return r.createLiteral(e.content,n)}}Q0.ItemPropertyHandlerContent=aue;var G0={},Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.Util=void 0;const sue=yt,QN=Na;let z0=class ep{constructor(e,r){this.dataFactory=e||new sue.DataFactory,this.baseIRI=r||""}static isValidIri(e){return ep.IRI_REGEX.test(e)}createVocabIris(e,r,n){return e.split(/\s+/u).filter(a=>!!a).map(a=>{if(!ep.isValidIri(a)){if(!n)return;a=`${r.vocab||`${this.baseIRI}#`}${a}`}return this.dataFactory.namedNode(a)}).filter(a=>!!a)}getVocabularyExpansionType(e,r,n){const a=e.split(/\s+/u);if(a.includes("subPropertyOf")||a.includes("equivalentProperty"))return[this.dataFactory.namedNode(`${ep.RDF}type`)];if(r.vocab&&r.vocab in n&&n[r.vocab].properties){let s=[];for(const[o,u]of Object.entries(n[r.vocab].properties))a.includes(o)&&(s=[...Object.values(u).map(c=>this.dataFactory.namedNode(c))]);return s}return[]}createSubject(e){if(!ep.isValidIri(e))try{e=(0,QN.resolve)(e,this.baseIRI)}catch{return}return this.dataFactory.namedNode(e)}createLiteral(e,r){return this.dataFactory.literal(e,r.language)}deriveVocab(e,r){let n;for(const a in r)if(e.startsWith(a)){n=a,n.endsWith("/")||(n+="#");break}if(!n){const a=e.indexOf("#");a>0?n=e.slice(0,a+1):n=(0,QN.resolve)(".",e)}return n}};Nl.Util=z0;z0.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";z0.XSD="http://www.w3.org/2001/XMLSchema#";z0.RDFA="http://www.w3.org/ns/rdfa#";z0.IRI_REGEX=/^([A-Za-z][\d+-.A-Za-z]*|_):[^ "<>[\\\]`{|}]*$/u;Object.defineProperty(G0,"__esModule",{value:!0});G0.ItemPropertyHandlerNumber=void 0;const GN=Nl;class oue{constructor(e,r){this.tagName=e,this.attributeName=r}canHandle(e,r){return this.tagName===e&&this.attributeName in r}getObject(e,r,n){const a=e[this.attributeName];let s;return!Number.isNaN(Number.parseInt(a,10))&&!a.includes(".")?s=`${GN.Util.XSD}integer`:Number.isNaN(Number.parseFloat(a))||(s=`${GN.Util.XSD}double`),r.dataFactory.literal(a,s&&r.dataFactory.namedNode(s))}}G0.ItemPropertyHandlerNumber=oue;var W0={};Object.defineProperty(W0,"__esModule",{value:!0});W0.ItemPropertyHandlerTime=void 0;const uue=Nl;class Bv{canHandle(e,r){return e==="time"&&"datetime"in r}getObject(e,r,n){const a=e.datetime;let s;for(const o of Bv.TIME_REGEXES)if(o.regex.test(a)){s=r.dataFactory.namedNode(uue.Util.XSD+o.type);break}return r.dataFactory.literal(a,s)}}W0.ItemPropertyHandlerTime=Bv;Bv.TIME_REGEXES=[{regex:/^-?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d)?S)?)?$/u,type:"duration"},{regex:/^\d+-\d\d-\d\dT\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"dateTime"},{regex:/^\d+-\d\d-\d\dZ?$/u,type:"date"},{regex:/^\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"time"},{regex:/^\d+-\d\d$/u,type:"gYearMonth"},{regex:/^\d+$/u,type:"gYear"}];var X0={};Object.defineProperty(X0,"__esModule",{value:!0});X0.ItemPropertyHandlerUrl=void 0;const cue=Na;class lue{constructor(e,r){this.tagName=e,this.attributeName=r}canHandle(e,r){return this.tagName===e&&this.attributeName in r}getObject(e,r,n){return r.dataFactory.namedNode((0,cue.resolve)(e[this.attributeName],r.baseIRI))}}X0.ItemPropertyHandlerUrl=lue;var w7={};Object.defineProperty(w7,"__esModule",{value:!0});var S7={};Object.defineProperty(S7,"__esModule",{value:!0});var T7={};Object.defineProperty(T7,"__esModule",{value:!0});var $v={},E7={},Bp={},rR={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var e=eu,r;(function(f){f[f.Tab=9]="Tab",f[f.NewLine=10]="NewLine",f[f.FormFeed=12]="FormFeed",f[f.CarriageReturn=13]="CarriageReturn",f[f.Space=32]="Space",f[f.ExclamationMark=33]="ExclamationMark",f[f.Number=35]="Number",f[f.Amp=38]="Amp",f[f.SingleQuote=39]="SingleQuote",f[f.DoubleQuote=34]="DoubleQuote",f[f.Dash=45]="Dash",f[f.Slash=47]="Slash",f[f.Zero=48]="Zero",f[f.Nine=57]="Nine",f[f.Semi=59]="Semi",f[f.Lt=60]="Lt",f[f.Eq=61]="Eq",f[f.Gt=62]="Gt",f[f.Questionmark=63]="Questionmark",f[f.UpperA=65]="UpperA",f[f.LowerA=97]="LowerA",f[f.UpperF=70]="UpperF",f[f.LowerF=102]="LowerF",f[f.UpperZ=90]="UpperZ",f[f.LowerZ=122]="LowerZ",f[f.LowerX=120]="LowerX",f[f.OpeningSquareBracket=91]="OpeningSquareBracket"})(r||(r={}));var n;(function(f){f[f.Text=1]="Text",f[f.BeforeTagName=2]="BeforeTagName",f[f.InTagName=3]="InTagName",f[f.InSelfClosingTag=4]="InSelfClosingTag",f[f.BeforeClosingTagName=5]="BeforeClosingTagName",f[f.InClosingTagName=6]="InClosingTagName",f[f.AfterClosingTagName=7]="AfterClosingTagName",f[f.BeforeAttributeName=8]="BeforeAttributeName",f[f.InAttributeName=9]="InAttributeName",f[f.AfterAttributeName=10]="AfterAttributeName",f[f.BeforeAttributeValue=11]="BeforeAttributeValue",f[f.InAttributeValueDq=12]="InAttributeValueDq",f[f.InAttributeValueSq=13]="InAttributeValueSq",f[f.InAttributeValueNq=14]="InAttributeValueNq",f[f.BeforeDeclaration=15]="BeforeDeclaration",f[f.InDeclaration=16]="InDeclaration",f[f.InProcessingInstruction=17]="InProcessingInstruction",f[f.BeforeComment=18]="BeforeComment",f[f.CDATASequence=19]="CDATASequence",f[f.InSpecialComment=20]="InSpecialComment",f[f.InCommentLike=21]="InCommentLike",f[f.BeforeSpecialS=22]="BeforeSpecialS",f[f.SpecialStartSequence=23]="SpecialStartSequence",f[f.InSpecialTag=24]="InSpecialTag",f[f.BeforeEntity=25]="BeforeEntity",f[f.BeforeNumericEntity=26]="BeforeNumericEntity",f[f.InNamedEntity=27]="InNamedEntity",f[f.InNumericEntity=28]="InNumericEntity",f[f.InHexEntity=29]="InHexEntity"})(n||(n={}));function a(f){return f===r.Space||f===r.NewLine||f===r.Tab||f===r.FormFeed||f===r.CarriageReturn}function s(f){return f===r.Slash||f===r.Gt||a(f)}function o(f){return f>=r.Zero&&f<=r.Nine}function u(f){return f>=r.LowerA&&f<=r.LowerZ||f>=r.UpperA&&f<=r.UpperZ}function c(f){return f>=r.UpperA&&f<=r.UpperF||f>=r.LowerA&&f<=r.LowerF}var l;(function(f){f[f.NoValue=0]="NoValue",f[f.Unquoted=1]="Unquoted",f[f.Single=2]="Single",f[f.Double=3]="Double"})(l=t.QuoteType||(t.QuoteType={}));var d={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},h=function(){function f(p,b){var y=p.xmlMode,S=y===void 0?!1:y,w=p.decodeEntities,I=w===void 0?!0:w;this.cbs=b,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=S,this.decodeEntities=I,this.entityTrie=S?e.xmlDecodeTree:e.htmlDecodeTree}return f.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},f.prototype.write=function(p){this.offset+=this.buffer.length,this.buffer=p,this.parse()},f.prototype.end=function(){this.running&&this.finish()},f.prototype.pause=function(){this.running=!1},f.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},f.prototype.getIndex=function(){return this.index},f.prototype.getSectionStart=function(){return this.sectionStart},f.prototype.stateText=function(p){p===r.Lt||!this.decodeEntities&&this.fastForwardTo(r.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&p===r.Amp&&(this.state=n.BeforeEntity)},f.prototype.stateSpecialStartSequence=function(p){var b=this.sequenceIndex===this.currentSequence.length,y=b?s(p):(p|32)===this.currentSequence[this.sequenceIndex];if(!y)this.isSpecial=!1;else if(!b){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(p)},f.prototype.stateInSpecialTag=function(p){if(this.sequenceIndex===this.currentSequence.length){if(p===r.Gt||a(p)){var b=this.index-this.currentSequence.length;if(this.sectionStart<b){var y=this.index;this.index=b,this.cbs.ontext(this.sectionStart,b),this.index=y}this.isSpecial=!1,this.sectionStart=b+2,this.stateInClosingTagName(p);return}this.sequenceIndex=0}(p|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===d.TitleEnd?this.decodeEntities&&p===r.Amp&&(this.state=n.BeforeEntity):this.fastForwardTo(r.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(p===r.Lt)},f.prototype.stateCDATASequence=function(p){p===d.Cdata[this.sequenceIndex]?++this.sequenceIndex===d.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=d.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(p))},f.prototype.fastForwardTo=function(p){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===p)return!0;return this.index=this.buffer.length+this.offset-1,!1},f.prototype.stateInCommentLike=function(p){p===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):p!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},f.prototype.isTagStartChar=function(p){return this.xmlMode?!s(p):u(p)},f.prototype.startSpecial=function(p,b){this.isSpecial=!0,this.currentSequence=p,this.sequenceIndex=b,this.state=n.SpecialStartSequence},f.prototype.stateBeforeTagName=function(p){if(p===r.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(p===r.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(p)){var b=p|32;this.sectionStart=this.index,!this.xmlMode&&b===d.TitleEnd[2]?this.startSpecial(d.TitleEnd,3):this.state=!this.xmlMode&&b===d.ScriptEnd[2]?n.BeforeSpecialS:n.InTagName}else p===r.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(p))},f.prototype.stateInTagName=function(p){s(p)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p))},f.prototype.stateBeforeClosingTagName=function(p){a(p)||(p===r.Gt?this.state=n.Text:(this.state=this.isTagStartChar(p)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},f.prototype.stateInClosingTagName=function(p){(p===r.Gt||a(p))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(p))},f.prototype.stateAfterClosingTagName=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeAttributeName=function(p){p===r.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.baseState=this.state,this.sectionStart=this.index+1):p===r.Slash?this.state=n.InSelfClosingTag:a(p)||(this.state=n.InAttributeName,this.sectionStart=this.index)},f.prototype.stateInSelfClosingTag=function(p){p===r.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):a(p)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p))},f.prototype.stateInAttributeName=function(p){(p===r.Eq||s(p))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(p))},f.prototype.stateAfterAttributeName=function(p){p===r.Eq?this.state=n.BeforeAttributeValue:p===r.Slash||p===r.Gt?(this.cbs.onattribend(l.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p)):a(p)||(this.cbs.onattribend(l.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},f.prototype.stateBeforeAttributeValue=function(p){p===r.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):p===r.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):a(p)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(p))},f.prototype.handleInAttributeValue=function(p,b){p===b||!this.decodeEntities&&this.fastForwardTo(b)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(b===r.DoubleQuote?l.Double:l.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&p===r.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},f.prototype.stateInAttributeValueDoubleQuotes=function(p){this.handleInAttributeValue(p,r.DoubleQuote)},f.prototype.stateInAttributeValueSingleQuotes=function(p){this.handleInAttributeValue(p,r.SingleQuote)},f.prototype.stateInAttributeValueNoQuotes=function(p){a(p)||p===r.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(l.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p)):this.decodeEntities&&p===r.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},f.prototype.stateBeforeDeclaration=function(p){p===r.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=p===r.Dash?n.BeforeComment:n.InDeclaration},f.prototype.stateInDeclaration=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateInProcessingInstruction=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeComment=function(p){p===r.Dash?(this.state=n.InCommentLike,this.currentSequence=d.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},f.prototype.stateInSpecialComment=function(p){(p===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeSpecialS=function(p){var b=p|32;b===d.ScriptEnd[3]?this.startSpecial(d.ScriptEnd,4):b===d.StyleEnd[3]?this.startSpecial(d.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(p))},f.prototype.stateBeforeEntity=function(p){this.entityExcess=1,this.entityResult=0,p===r.Number?this.state=n.BeforeNumericEntity:p===r.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=n.InNamedEntity,this.stateInNamedEntity(p))},f.prototype.stateInNamedEntity=function(p){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,p),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var b=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(b){var y=(b>>14)-1;if(!this.allowLegacyEntity()&&p!==r.Semi)this.trieIndex+=y;else{var S=this.index-this.entityExcess+1;S>this.sectionStart&&this.emitPartial(this.sectionStart,S),this.entityResult=this.trieIndex,this.trieIndex+=y,this.entityExcess=0,this.sectionStart=this.index+1,y===0&&this.emitNamedEntity()}}},f.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var p=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(p){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},f.prototype.stateBeforeNumericEntity=function(p){(p|32)===r.LowerX?(this.entityExcess++,this.state=n.InHexEntity):(this.state=n.InNumericEntity,this.stateInNumericEntity(p))},f.prototype.emitNumericEntity=function(p){var b=this.index-this.entityExcess-1,y=b+2+ +(this.state===n.InHexEntity);y!==this.index&&(b>this.sectionStart&&this.emitPartial(this.sectionStart,b),this.sectionStart=this.index+Number(p),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},f.prototype.stateInNumericEntity=function(p){p===r.Semi?this.emitNumericEntity(!0):o(p)?(this.entityResult=this.entityResult*10+(p-r.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.stateInHexEntity=function(p){p===r.Semi?this.emitNumericEntity(!0):o(p)?(this.entityResult=this.entityResult*16+(p-r.Zero),this.entityExcess++):c(p)?(this.entityResult=this.entityResult*16+((p|32)-r.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===n.Text||this.baseState===n.InSpecialTag)},f.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===n.InAttributeValueDq||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},f.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},f.prototype.parse=function(){for(;this.shouldContinue();){var p=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:{this.stateText(p);break}case n.SpecialStartSequence:{this.stateSpecialStartSequence(p);break}case n.InSpecialTag:{this.stateInSpecialTag(p);break}case n.CDATASequence:{this.stateCDATASequence(p);break}case n.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(p);break}case n.InAttributeName:{this.stateInAttributeName(p);break}case n.InCommentLike:{this.stateInCommentLike(p);break}case n.InSpecialComment:{this.stateInSpecialComment(p);break}case n.BeforeAttributeName:{this.stateBeforeAttributeName(p);break}case n.InTagName:{this.stateInTagName(p);break}case n.InClosingTagName:{this.stateInClosingTagName(p);break}case n.BeforeTagName:{this.stateBeforeTagName(p);break}case n.AfterAttributeName:{this.stateAfterAttributeName(p);break}case n.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(p);break}case n.BeforeAttributeValue:{this.stateBeforeAttributeValue(p);break}case n.BeforeClosingTagName:{this.stateBeforeClosingTagName(p);break}case n.AfterClosingTagName:{this.stateAfterClosingTagName(p);break}case n.BeforeSpecialS:{this.stateBeforeSpecialS(p);break}case n.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(p);break}case n.InSelfClosingTag:{this.stateInSelfClosingTag(p);break}case n.InDeclaration:{this.stateInDeclaration(p);break}case n.BeforeDeclaration:{this.stateBeforeDeclaration(p);break}case n.BeforeComment:{this.stateBeforeComment(p);break}case n.InProcessingInstruction:{this.stateInProcessingInstruction(p);break}case n.InNamedEntity:{this.stateInNamedEntity(p);break}case n.BeforeEntity:{this.stateBeforeEntity(p);break}case n.InHexEntity:{this.stateInHexEntity(p);break}case n.InNumericEntity:{this.stateInNumericEntity(p);break}default:this.stateBeforeNumericEntity(p)}this.index++}this.cleanup()},f.prototype.finish=function(){this.state===n.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},f.prototype.handleTrailingData=function(){var p=this.buffer.length+this.offset;this.state===n.InCommentLike?this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,p,0):this.cbs.oncomment(this.sectionStart,p,0):this.state===n.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,p)},f.prototype.emitPartial=function(p,b){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribdata(p,b):this.cbs.ontext(p,b)},f.prototype.emitCodePoint=function(p){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribentity(p):this.cbs.ontextentity(p)},f}();t.default=h})(rR);var due=g&&g.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fue=g&&g.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),hue=g&&g.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&due(e,t,r);return fue(e,t),e};Object.defineProperty(Bp,"__esModule",{value:!0});Bp.Parser=void 0;var T1=hue(rR),zN=eu,id=new Set(["input","option","optgroup","select","button","datalist","textarea"]),hr=new Set(["p"]),WN=new Set(["thead","tbody"]),XN=new Set(["dd","dt"]),KN=new Set(["rt","rp"]),pue=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",hr],["h1",hr],["h2",hr],["h3",hr],["h4",hr],["h5",hr],["h6",hr],["select",id],["input",id],["output",id],["button",id],["datalist",id],["textarea",id],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",XN],["dt",XN],["address",hr],["article",hr],["aside",hr],["blockquote",hr],["details",hr],["div",hr],["dl",hr],["fieldset",hr],["figcaption",hr],["figure",hr],["footer",hr],["form",hr],["header",hr],["hr",hr],["main",hr],["nav",hr],["ol",hr],["pre",hr],["section",hr],["table",hr],["ul",hr],["rt",KN],["rp",KN],["tbody",WN],["tfoot",WN]]),yue=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),JN=new Set(["math","svg"]),YN=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),bue=/\s|\//,mue=function(){function t(e,r){r===void 0&&(r={});var n,a,s,o,u;this.options=r,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=(n=r.lowerCaseTags)!==null&&n!==void 0?n:!r.xmlMode,this.lowerCaseAttributeNames=(a=r.lowerCaseAttributeNames)!==null&&a!==void 0?a:!r.xmlMode,this.tokenizer=new((s=r.Tokenizer)!==null&&s!==void 0?s:T1.default)(this.options,this),(u=(o=this.cbs).onparserinit)===null||u===void 0||u.call(o,this)}return t.prototype.ontext=function(e,r){var n,a,s=this.getSlice(e,r);this.endIndex=r-1,(a=(n=this.cbs).ontext)===null||a===void 0||a.call(n,s),this.startIndex=r},t.prototype.ontextentity=function(e){var r,n,a=this.tokenizer.getSectionStart();this.endIndex=a-1,(n=(r=this.cbs).ontext)===null||n===void 0||n.call(r,(0,zN.fromCodePoint)(e)),this.startIndex=a},t.prototype.isVoidElement=function(e){return!this.options.xmlMode&&yue.has(e)},t.prototype.onopentagname=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)},t.prototype.emitOpenTag=function(e){var r,n,a,s;this.openTagStart=this.startIndex,this.tagname=e;var o=!this.options.xmlMode&&pue.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[this.stack.length-1]);){var u=this.stack.pop();(n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,u,!0)}this.isVoidElement(e)||(this.stack.push(e),JN.has(e)?this.foreignContext.push(!0):YN.has(e)&&this.foreignContext.push(!1)),(s=(a=this.cbs).onopentagname)===null||s===void 0||s.call(a,e),this.cbs.onopentag&&(this.attribs={})},t.prototype.endOpenTag=function(e){var r,n;this.startIndex=this.openTagStart,this.attribs&&((n=(r=this.cbs).onopentag)===null||n===void 0||n.call(r,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},t.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},t.prototype.onclosetag=function(e,r){var n,a,s,o,u,c;this.endIndex=r;var l=this.getSlice(e,r);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(JN.has(l)||YN.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))!this.options.xmlMode&&l==="br"&&((a=(n=this.cbs).onopentagname)===null||a===void 0||a.call(n,"br"),(o=(s=this.cbs).onopentag)===null||o===void 0||o.call(s,"br",{},!0),(c=(u=this.cbs).onclosetag)===null||c===void 0||c.call(u,"br",!1));else{var d=this.stack.lastIndexOf(l);if(d!==-1)if(this.cbs.onclosetag)for(var h=this.stack.length-d;h--;)this.cbs.onclosetag(this.stack.pop(),h!==0);else this.stack.length=d;else!this.options.xmlMode&&l==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=r+1},t.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},t.prototype.closeCurrentTag=function(e){var r,n,a=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===a&&((n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,a,!e),this.stack.pop())},t.prototype.onattribname=function(e,r){this.startIndex=e;var n=this.getSlice(e,r);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n},t.prototype.onattribdata=function(e,r){this.attribvalue+=this.getSlice(e,r)},t.prototype.onattribentity=function(e){this.attribvalue+=(0,zN.fromCodePoint)(e)},t.prototype.onattribend=function(e,r){var n,a;this.endIndex=r,(a=(n=this.cbs).onattribute)===null||a===void 0||a.call(n,this.attribname,this.attribvalue,e===T1.QuoteType.Double?'"':e===T1.QuoteType.Single?"'":e===T1.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},t.prototype.getInstructionName=function(e){var r=e.search(bue),n=r<0?e:e.substr(0,r);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},t.prototype.ondeclaration=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var a=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(a),"!".concat(n))}this.startIndex=r+1},t.prototype.onprocessinginstruction=function(e,r){this.endIndex=r;var n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){var a=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(a),"?".concat(n))}this.startIndex=r+1},t.prototype.oncomment=function(e,r,n){var a,s,o,u;this.endIndex=r,(s=(a=this.cbs).oncomment)===null||s===void 0||s.call(a,this.getSlice(e,r-n)),(u=(o=this.cbs).oncommentend)===null||u===void 0||u.call(o),this.startIndex=r+1},t.prototype.oncdata=function(e,r,n){var a,s,o,u,c,l,d,h,f,p;this.endIndex=r;var b=this.getSlice(e,r-n);this.options.xmlMode||this.options.recognizeCDATA?((s=(a=this.cbs).oncdatastart)===null||s===void 0||s.call(a),(u=(o=this.cbs).ontext)===null||u===void 0||u.call(o,b),(l=(c=this.cbs).oncdataend)===null||l===void 0||l.call(c)):((h=(d=this.cbs).oncomment)===null||h===void 0||h.call(d,"[CDATA[".concat(b,"]]")),(p=(f=this.cbs).oncommentend)===null||p===void 0||p.call(f)),this.startIndex=r+1},t.prototype.onend=function(){var e,r;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n],!0));}(r=(e=this.cbs).onend)===null||r===void 0||r.call(e)},t.prototype.reset=function(){var e,r,n,a;(r=(e=this.cbs).onreset)===null||r===void 0||r.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(a=(n=this.cbs).onparserinit)===null||a===void 0||a.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},t.prototype.parseComplete=function(e){this.reset(),this.end(e)},t.prototype.getSlice=function(e,r){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(e-this.bufferOffset,r-this.bufferOffset);r-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,r-this.bufferOffset);return n},t.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},t.prototype.write=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)},t.prototype.end=function(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()},t.prototype.pause=function(){this.tokenizer.pause()},t.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},t.prototype.parseChunk=function(e){this.write(e)},t.prototype.done=function(e){this.end(e)},t}();Bp.Parser=mue;(function(t){var e=g&&g.__createBinding||(Object.create?function(w,I,O,T){T===void 0&&(T=O);var x=Object.getOwnPropertyDescriptor(I,O);(!x||("get"in x?!I.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return I[O]}}),Object.defineProperty(w,T,x)}:function(w,I,O,T){T===void 0&&(T=O),w[T]=I[O]}),r=g&&g.__setModuleDefault||(Object.create?function(w,I){Object.defineProperty(w,"default",{enumerable:!0,value:I})}:function(w,I){w.default=I}),n=g&&g.__importStar||function(w){if(w&&w.__esModule)return w;var I={};if(w!=null)for(var O in w)O!=="default"&&Object.prototype.hasOwnProperty.call(w,O)&&e(I,w,O);return r(I,w),I},a=g&&g.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var s=Bp,o=Bp;Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return o.Parser}});var u=fa,c=fa;Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function l(w,I){var O=new u.DomHandler(void 0,I);return new s.Parser(O,I).end(w),O.root}t.parseDocument=l;function d(w,I){return l(w,I).children}t.parseDOM=d;function h(w,I,O){var T=new u.DomHandler(w,I,O);return new s.Parser(T,I)}t.createDomStream=h;var f=rR;Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return a(f).default}}),t.ElementType=n(lc);var p=Ws,b=Ws;Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return b.getFeed}});var y={xmlMode:!0};function S(w,I){return I===void 0&&(I=y),(0,p.getFeed)(d(w,I))}t.parseFeed=S,t.DomUtils=n(Ws)})(E7);const gue={"http://schema.org/":{properties:{additionalType:{subPropertyOf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}}},"http://microformats.org/profile/hcard":{}};Object.defineProperty($v,"__esModule",{value:!0});$v.MicrodataRdfParser=void 0;const _ue=E7,ZN=Kt,vue=Q0,e4=G0,wue=W0,Ga=X0,t4=Nl,Sue=gue;class $p extends ZN.Transform{constructor(e){super({readableObjectMode:!0}),this.itemScopeStack=[],this.textBufferStack=[],this.isEmittingReferences=!1,this.pendingItemRefsDomain={},this.pendingItemRefsRangeFinalized={},this.pendingItemRefsRangeCollecting={},e=e||{},this.options=e,this.util=new t4.Util(e.dataFactory,e.baseIRI),this.defaultGraph=e.defaultGraph||this.util.dataFactory.defaultGraph(),this.htmlParseListener=e.htmlParseListener,this.vocabRegistry=e.vocabRegistry||Sue,this.parser=this.initializeParser(!!e.xmlMode)}import(e){const r=new ZN.PassThrough({readableObjectMode:!0});e.on("error",a=>n.emit("error",a)),e.on("data",a=>r.push(a)),e.on("end",()=>r.push(null));const n=r.pipe(new $p(this.options));return n}_transform(e,r,n){this.parser.write(e.toString()),n()}_flush(e){this.parser.end(),e()}getItemScope(e){let r=this.itemScopeStack.length-(e?2:1);for(;r>0&&!this.itemScopeStack[r];)r--;return this.itemScopeStack[r]}getDepth(){return this.itemScopeStack.length}onTagOpen(e,r){if(!this.isEmittingReferences){if("id"in r){const a=r.id;this.pendingItemRefsRangeCollecting[a]={events:[],counter:0,ids:[]}}for(const a of Object.values(this.pendingItemRefsRangeCollecting))a.counter++,a.events.push({type:"open",name:e,attributes:r})}this.textBufferStack.push(void 0);let n;if("itemscope"in r){let a;if(this.emittingReferencesItemScopeIdGenerator)a=this.emittingReferencesItemScopeIdGenerator();else{a="itemid"in r&&this.util.createSubject(r.itemid)||this.util.dataFactory.blankNode();for(const o of Object.values(this.pendingItemRefsRangeCollecting))o.ids.push(a)}n={subject:a},this.isEmittingReferences&&(n.blockEmission=!0);const s=this.getItemScope();s&&s.vocab&&(n.vocab=s.vocab),this.itemScopeStack.push(n)}else n=this.getItemScope(),this.itemScopeStack.push(void 0);if(n){if("itemtype"in r)for(const a of this.util.createVocabIris(r.itemtype,n,!1))n.vocab||(n.vocab=this.util.deriveVocab(a.value,this.vocabRegistry)),n.blockEmission||this.emitTriple(n.subject,this.util.dataFactory.namedNode(`${t4.Util.RDF}type`),a);if("lang"in r&&(n.language=r.lang),"xml:lang"in r&&(n.language=r["xml:lang"]),"itemscope"in r&&!this.isEmittingReferences&&"itemref"in r)for(const a of r.itemref.split(/\s+/u))a in this.pendingItemRefsDomain||(this.pendingItemRefsDomain[a]=[]),this.pendingItemRefsDomain[a].push(n),this.tryToEmitReferences(a,n)}"itemprop"in r&&this.handleItemProperties(r.itemprop,!1,n,e,r),"itemprop-reverse"in r&&this.handleItemProperties(r["itemprop-reverse"],!0,n,e,r)}onText(e){if(!this.isEmittingReferences)for(const r of Object.values(this.pendingItemRefsRangeCollecting))r.events.push({type:"text",data:e});for(const r of this.textBufferStack)r&&r.push(e)}onTagClose(){if(!this.isEmittingReferences)for(const[r,n]of Object.entries(this.pendingItemRefsRangeCollecting))n.counter--,n.events.push({type:"close"}),n.counter===0&&(this.pendingItemRefsRangeFinalized[r]=n,delete this.pendingItemRefsRangeCollecting[r],this.tryToEmitReferences(r));const e=this.getItemScope(!0);if(e){const r=this.getDepth();if(e.predicates&&r in e.predicates)for(const[n,a]of Object.entries(e.predicates[r])){const s=this.util.createLiteral(this.textBufferStack[r].join(""),e);this.emitPredicateTriples(e,a,s,n==="reverse"),delete e.predicates[r][n]}}this.itemScopeStack.pop(),this.textBufferStack.pop()}onEnd(){}initializeParser(e){return new _ue.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(r){this.emit("error",r)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(r){this.emit("error",r)}},onopentag:(r,n)=>{try{this.onTagOpen(r,n),this.htmlParseListener&&this.htmlParseListener.onTagOpen(r,n)}catch(a){this.emit("error",a)}},ontext:r=>{try{this.onText(r),this.htmlParseListener&&this.htmlParseListener.onText(r)}catch(n){this.emit("error",n)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:e})}handleItemProperties(e,r,n,a,s){const o=this.getItemScope(!0);if(o){const u=this.getDepth(),c=this.util.createVocabIris(e,o,!0);o.predicates||(o.predicates={}),o.predicates[u]||(o.predicates[u]={});const l=r?"reverse":"forward";o.predicates[u][l]=c;for(const d of this.util.getVocabularyExpansionType(e,o,this.vocabRegistry))c.push(d);if(n&&"itemscope"in s)this.emitPredicateTriples(o,c,n.subject,r),delete o.predicates[u][l];else for(const d of $p.ITEM_PROPERTY_HANDLERS)if(d.canHandle(a,s)){const h=d.getObject(s,this.util,o);this.emitPredicateTriples(o,c,h,r),delete o.predicates[u][l]}o.predicates[u][l]&&(this.textBufferStack[u]=[])}}emitPredicateTriples(e,r,n,a){if(!e.blockEmission)for(const s of r)a?n.termType!=="Literal"&&this.emitTriple(n,s,e.subject):this.emitTriple(e.subject,s,n)}emitTriple(e,r,n){this.push(this.util.dataFactory.quad(e,r,n,this.defaultGraph))}tryToEmitReferences(e,r){const n=this.pendingItemRefsRangeFinalized[e];if(n){let a;if(r){a=[r];const s=this.pendingItemRefsDomain[e].indexOf(r);this.pendingItemRefsDomain[e].splice(s,1)}else a=this.pendingItemRefsDomain[e],delete this.pendingItemRefsDomain[e];if(a){const s=this.itemScopeStack,o=this.textBufferStack;this.isEmittingReferences=!0;for(const u of a){this.itemScopeStack=[u],this.textBufferStack=[void 0];const c=[...n.ids];this.emittingReferencesItemScopeIdGenerator=()=>c.shift();for(const l of n.events)switch(l.type){case"open":this.onTagOpen(l.name,l.attributes);break;case"text":this.onText(l.data);break;case"close":this.onTagClose();break}}this.emittingReferencesItemScopeIdGenerator=void 0,this.itemScopeStack=s,this.textBufferStack=o,this.isEmittingReferences=!1}}}}$v.MicrodataRdfParser=$p;$p.ITEM_PROPERTY_HANDLERS=[new vue.ItemPropertyHandlerContent,new Ga.ItemPropertyHandlerUrl("a","href"),new Ga.ItemPropertyHandlerUrl("area","href"),new Ga.ItemPropertyHandlerUrl("audio","src"),new Ga.ItemPropertyHandlerUrl("embed","src"),new Ga.ItemPropertyHandlerUrl("iframe","src"),new Ga.ItemPropertyHandlerUrl("img","src"),new Ga.ItemPropertyHandlerUrl("link","href"),new Ga.ItemPropertyHandlerUrl("object","data"),new Ga.ItemPropertyHandlerUrl("source","src"),new Ga.ItemPropertyHandlerUrl("track","src"),new Ga.ItemPropertyHandlerUrl("video","src"),new e4.ItemPropertyHandlerNumber("data","value"),new e4.ItemPropertyHandlerNumber("meter","value"),new wue.ItemPropertyHandlerTime];(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(v7,t),r(Q0,t),r(G0,t),r(W0,t),r(X0,t),r(w7,t),r(S7,t),r(T7,t),r($v,t),r(Nl,t)})(_7);Object.defineProperty(Fv,"__esModule",{value:!0});Fv.ActorRdfParseHtmlMicrodata=void 0;const Tue=Mv,Eue=_7;class Oue extends Tue.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return!0}async run(e){const r=e.headers?e.headers.get("content-type"):null,n=r==null?void 0:r.includes("xml"),a=new Eue.MicrodataRdfParser({baseIRI:e.baseIRI,xmlMode:n});a.on("error",e.error),a.on("data",e.emit);const s=a.onEnd;return a.onEnd=()=>{s.call(a),e.end()},{htmlParseListener:a}}}Fv.ActorRdfParseHtmlMicrodata=Oue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fv,t)})(g7);var O7={},Uv={};Object.defineProperty(Uv,"__esModule",{value:!0});Uv.ActorRdfParseHtmlRdfa=void 0;const Aue=Mv,xue=Hx;class Rue extends Aue.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return!0}async run(e){const r=e.headers?e.headers.get("content-type"):null,n=(e.headers&&e.headers.get("content-language"))??void 0,a=r&&r.includes("xml")?"xhtml":"html",s=new xue.RdfaParser({baseIRI:e.baseIRI,profile:a,language:n});s.on("error",e.error),s.on("data",e.emit);const o=s.onEnd;return s.onEnd=()=>{o.call(s),e.end()},{htmlParseListener:s}}}Uv.ActorRdfParseHtmlRdfa=Rue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Uv,t)})(O7);var A7={},qv={},nR={},Vv={},K0={};Object.defineProperty(K0,"__esModule",{value:!0});K0.RdfJsQuadSource=void 0;const Iue=ba,Pue=Wt,Due=yt,ad=hn,r4=new Due.DataFactory;class wi{constructor(e){this.source=e}static nullifyVariables(e,r){return!e||e.termType==="Variable"||!r&&e.termType==="Quad"&&(0,ad.someTermsNested)(e,n=>n.termType==="Variable")?void 0:e}static hasDuplicateVariables(e){const r=(0,ad.filterTermsNested)(e,n=>n.termType==="Variable");return r.length>1&&(0,ad.uniqTerms)(r).length<r.length}match(e,r,n,a){var l;const s=!!((l=this.source.features)!=null&&l.quotedTripleFiltering),o=this.source.match(wi.nullifyVariables(e,s),wi.nullifyVariables(r,s),wi.nullifyVariables(n,s),wi.nullifyVariables(a,s));let u=(0,Pue.wrap)(o,{autoStart:!1});const c=r4.quad(e,r,n,a);return!s&&(0,ad.someTerms)(c,d=>d.termType==="Quad")&&(u=u.filter(d=>(0,ad.matchPatternComplete)(d,c))),this.setMetadata(u,e,r,n,a).catch(d=>u.destroy(d)),u}async setMetadata(e,r,n,a,s){var d;const o=!!((d=this.source.features)!=null&&d.quotedTripleFiltering);let u;if(this.source.countQuads)u=await this.source.countQuads(wi.nullifyVariables(r,o),wi.nullifyVariables(n,o),wi.nullifyVariables(a,o),wi.nullifyVariables(s,o));else{let h=0;u=await new Promise((f,p)=>{const b=this.source.match(wi.nullifyVariables(r,o),wi.nullifyVariables(n,o),wi.nullifyVariables(a,o),wi.nullifyVariables(s,o));b.on("error",p),b.on("end",()=>f(h)),b.on("data",()=>h++)})}const c=r4.quad(r,n,a,s),l=!o&&(0,ad.someTerms)(c,h=>h.termType==="Quad")||wi.hasDuplicateVariables(c);e.setProperty("metadata",{state:new Iue.MetadataValidationState,cardinality:{type:l?"estimate":"exact",value:u},canContainUndefs:!1})}}K0.RdfJsQuadSource=wi;Object.defineProperty(Vv,"__esModule",{value:!0});Vv.ActorRdfResolveQuadPatternRdfJsSource=void 0;const E1=Dl,Nue=K0;class jue extends E1.ActorRdfResolveQuadPatternSource{constructor(e){super(e)}async test(e){if(!(0,E1.hasContextSingleSourceOfType)("rdfjsSource",e.context))throw new Error(`${this.name} requires a single source with an rdfjsSource to be present in the context.`);const r=(0,E1.getContextSource)(e.context);if(!r||typeof r=="string"||!("match"in r)&&!r.value.match)throw new Error(`${this.name} received an invalid rdfjsSource.`);return!0}async getSource(e){const r=(0,E1.getContextSource)(e);return new Nue.RdfJsQuadSource("match"in r?r:r.value)}}Vv.ActorRdfResolveQuadPatternRdfJsSource=jue;var x7={};Object.defineProperty(x7,"__esModule",{value:!0});(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Vv,t),r(x7,t),r(K0,t)})(nR);var Hv={},kv={};Object.defineProperty(kv,"__esModule",{value:!0});kv.ActorRdfResolveHypermedia=void 0;const Cue=et;class Fue extends Cue.Actor{constructor(e,r){super(e),this.sourceType=r}async test(e){if(e.forceSourceType&&this.sourceType!==e.forceSourceType)throw new Error(`Actor ${this.name} is not able to handle source type ${e.forceSourceType}.`);return this.testMetadata(e)}}kv.ActorRdfResolveHypermedia=Fue;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(kv,t)})(Hv);var Qv={},R7={},fh={},hh={},J0={};Object.defineProperty(J0,"__esModule",{value:!0});J0.TermDictionaryNumberRecordFullTerms=void 0;const Mue=yt,n4=sr;class Lue{constructor(e=new Mue.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=e}encode(e){const r=(0,n4.termToString)(e);let n=this.dictionary[r];return n===void 0&&(n=this.lastId++,this.dictionary[r]=n,this.reverseDictionary[n]=e),n}encodeOptional(e){const r=(0,n4.termToString)(e);return this.dictionary[r]}decode(e){const r=this.reverseDictionary[e];if(r===void 0)throw new Error(`The value ${e} is not present in this dictionary`);return r}*encodings(){for(const e of Object.keys(this.reverseDictionary))yield Number.parseInt(e,10)}findQuotedTriples(e){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(e){throw new Error("findQuotedTriplesEncoded is not supported")}}J0.TermDictionaryNumberRecordFullTerms=Lue;var Y0={},Hf={},gs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.arePatternsQuoted=t.quadHasVariables=t.quadToPattern=t.encodeOptionalTerms=t.orderQuadComponents=t.getComponentOrderScore=t.getBestIndex=t.QUAD_TERM_NAMES_INVERSE=void 0;const e=hn;t.QUAD_TERM_NAMES_INVERSE=Object.fromEntries(e.QUAD_TERM_NAMES.map((l,d)=>[l,d]));function r(l,d){if(l.length===1||d.every(p=>p!==void 0))return 0;const h=[];for(let p=0;p<e.QUAD_TERM_NAMES.length;p++)d[p]&&h.push(e.QUAD_TERM_NAMES[p]);return l.map((p,b)=>({score:n(p,h),index:b})).sort((p,b)=>b.score-p.score)[0].index}t.getBestIndex=r;function n(l,d){return l.map((h,f)=>d.includes(h)?l.length-f:0).reduce((h,f)=>h+f,0)}t.getComponentOrderScore=n;function a(l,d){return l.map(h=>{const f=t.QUAD_TERM_NAMES_INVERSE[h];return d[f]})}t.orderQuadComponents=a;function s(l,d){const h=l.map(f=>{if(f){if(f.termType==="Quad"&&u(f))return;const p=d.encodeOptional(f);return p===void 0?"none":p}return f});if(!h.includes("none"))return h}t.encodeOptionalTerms=s;function o(l,d,h,f,p){let b=!1;return[[l||void 0,d||void 0,h||void 0,f||void 0].map(S=>{if(S){if(S.termType==="Variable")return;if(S.termType==="Quad"){if(p)return S;b=!0;return}}return S}),b]}t.quadToPattern=o;function u(l){for(const d of e.QUAD_TERM_NAMES){const h=l[d];if(h.termType==="Variable"||h.termType==="Quad"&&u(h))return!0}return!1}t.quadHasVariables=u;function c(l){return l.map(d=>(d==null?void 0:d.termType)==="Quad"&&u(d))}t.arePatternsQuoted=c})(gs);Object.defineProperty(Hf,"__esModule",{value:!0});Hf.RdfStoreIndexNestedMap=void 0;const PT=gs;class Bue{constructor(e){this.features={quotedTripleFiltering:!1},this.dictionary=e.dictionary,this.nestedMap=new Map}set(e,r){const n=this.nestedMap;let a=n.get(e[0]);a||(a=new Map,n.set(e[0],a));let s=a.get(e[1]);s||(s=new Map,a.set(e[1],s));let o=s.get(e[2]);o||(o=new Map,s.set(e[2],o));const u=o.has(e[3]);return u||o.set(e[3],r),!u}remove(e){const r=this.nestedMap,n=r.get(e[0]);if(!n)return!1;const a=n.get(e[1]);if(!a)return!1;const s=a.get(e[2]);if(!s)return!1;const o=s.delete(e[3]);return o&&s.size===0&&(a.delete(e[2]),a.size===0&&(n.delete(e[1]),n.size===0&&r.delete(e[0]))),o}get(e){const r=(0,PT.encodeOptionalTerms)(e,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(e){const r=this.nestedMap.get(e[0]);if(!r)return;const n=r.get(e[1]);if(!n)return;const a=n.get(e[2]);if(a)return a.get(e[3])}*find(e){const r=(0,PT.encodeOptionalTerms)(e,this.dictionary);if(!r)return;const[n,a,s,o]=r,[u,c,l,d]=e;let h,f,p,b,y,S,w;const I=this.nestedMap,O=n!==void 0?I.has(n)?[n]:[]:I.keys();for(const T of O){y=I.get(T),h=u||this.dictionary.decode(T);const x=a!==void 0?y.has(a)?[a]:[]:y.keys();for(const P of x){S=y.get(P),f=c||this.dictionary.decode(P);const B=s!==void 0?S.has(s)?[s]:[]:S.keys();for(const Q of B){w=S.get(Q),p=l||this.dictionary.decode(Q);const N=o!==void 0?w.has(o)?[o]:[]:w.keys();for(const D of N)b=d||this.dictionary.decode(D),yield[h,f,p,b]}}}}*findEncoded(e,r){const[n,a,s,o]=e;let u,c,l;const d=this.nestedMap,h=n!==void 0?d.has(n)?[n]:[]:d.keys();for(const f of h){u=d.get(f);const p=a!==void 0?u.has(a)?[a]:[]:u.keys();for(const b of p){c=u.get(b);const y=s!==void 0?c.has(s)?[s]:[]:c.keys();for(const S of y){l=c.get(S);const w=o!==void 0?l.has(o)?[o]:[]:l.keys();for(const I of w)yield[f,b,S,I]}}}}count(e){let r=0;const n=(0,PT.encodeOptionalTerms)(e,this.dictionary);if(!n)return 0;const a=n[0],s=n[1],o=n[2],u=n[3];let c,l,d;const h=this.nestedMap,f=a!==void 0?h.has(a)?[a]:[]:h.keys();for(const p of f){c=h.get(p);const b=s!==void 0?c.has(s)?[s]:[]:c.keys();for(const y of b){l=c.get(y);const S=o!==void 0?l.has(o)?[o]:[]:l.keys();for(const w of S)d=l.get(w),u!==void 0?d.has(u)&&r++:r+=d.size}}return r}}Hf.RdfStoreIndexNestedMap=Bue;Object.defineProperty(Y0,"__esModule",{value:!0});Y0.TermDictionaryQuotedIndexed=void 0;const $ue=yt,DT=Hf,i4=gs;class Wa{constructor(e,r=new $ue.DataFactory){this.quotedTriplesDictionary=[],this.features={quotedTriples:!0},this.plainTermDictionary=e;const n={indexCombinations:[],indexConstructor:void 0,dictionary:this,dataFactory:r};this.quotedTriplesReverseDictionaries=[new DT.RdfStoreIndexNestedMap(n),new DT.RdfStoreIndexNestedMap(n),new DT.RdfStoreIndexNestedMap(n)],this.dataFactory=r}encode(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!1):this.plainTermDictionary.encode(e)}encodeQuotedTriple(e,r){if(e.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const n=(0,i4.encodeOptionalTerms)([e.subject,e.predicate,e.object,e.graph],this),a=n&&n.every(c=>c!==void 0)?this.quotedTriplesReverseDictionaries[0].getEncoded(n):void 0;if(a!==void 0||r)return a===void 0?void 0:Wa.BITMASK|a;const s=[this.encode(e.subject),this.encode(e.predicate),this.encode(e.object)],o=this.quotedTriplesDictionary.length+1;this.quotedTriplesDictionary.push(s);const u=this.encode(this.dataFactory.defaultGraph());return this.quotedTriplesReverseDictionaries[0].set([s[0],s[1],s[2],u],o),this.quotedTriplesReverseDictionaries[1].set([s[1],s[2],s[0],u],o),this.quotedTriplesReverseDictionaries[2].set([s[2],s[0],s[1],u],o),Wa.BITMASK|o}encodeOptional(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!0):this.plainTermDictionary.encodeOptional(e)}decode(e){if(Wa.BITMASK&e){const r=(~Wa.BITMASK&e)-1;if(r>=this.quotedTriplesDictionary.length)throw new Error(`The value ${e} is not present in the quoted triples range of the dictionary`);const n=this.quotedTriplesDictionary[r];return this.dataFactory.quad(this.decode(n[0]),this.decode(n[1]),this.decode(n[2]))}return this.plainTermDictionary.decode(e)}*encodings(){for(const e of this.plainTermDictionary.encodings())yield e;for(const e of this.quotedTriplesDictionary.keys())yield Wa.BITMASK|1+e}*findQuotedTriples(e){for(const r of this.findQuotedTriplesEncoded(e))yield this.decode(r)}*findQuotedTriplesEncoded(e){const[r,n]=(0,i4.quadToPattern)(e.subject,e.predicate,e.object,e.graph,!0);for(const a of this.patternToIterable(r[0]))for(const s of this.patternToIterable(r[1]))for(const o of this.patternToIterable(r[2]))for(const u of this.patternToIterable(r[3]))if(a&&s||!s&&!o){const c=[a,s,o,u];for(const l of this.quotedTriplesReverseDictionaries[0].findEncoded(c,r))yield Wa.BITMASK|this.quotedTriplesReverseDictionaries[0].getEncoded(l)}else if(!a&&s){const c=[s,o,a,u];for(const l of this.quotedTriplesReverseDictionaries[1].findEncoded(c,r))yield Wa.BITMASK|this.quotedTriplesReverseDictionaries[1].getEncoded(l)}else{const c=[o,a,s,u];for(const l of this.quotedTriplesReverseDictionaries[2].findEncoded(c,r))yield Wa.BITMASK|this.quotedTriplesReverseDictionaries[2].getEncoded(l)}}*patternToIterable(e){if((e==null?void 0:e.termType)==="Quad"){yield*this.findQuotedTriplesEncoded(e);return}if(e===void 0){yield void 0;return}const r=this.encodeOptional(e);r!==void 0&&(yield r)}}Wa.BITMASK=1<<31;Y0.TermDictionaryQuotedIndexed=Wa;var Z0={};Object.defineProperty(Z0,"__esModule",{value:!0});Z0.RdfStoreIndexNestedMapQuoted=void 0;const ph=gs,Uue=Hf;class que extends Uue.RdfStoreIndexNestedMap{constructor(e){super(e),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(e,r){for(const n of this.dictionary.findQuotedTriplesEncoded(r))e.has(n)&&(yield n)}*find(e){const r=(0,ph.encodeOptionalTerms)(e,this.dictionary);if(!r)return;const[n,a,s,o]=r,[u,c,l,d]=e,[h,f,p,b]=(0,ph.arePatternsQuoted)(e);let y,S,w,I,O,T,x;const P=this.nestedMap,B=u!==void 0?h?this.getQuotedPatternKeys(P,u):P.has(n)?[n]:[]:P.keys();for(const Q of B){O=P.get(Q),y=!h&&u?u:this.dictionary.decode(Q);const N=c!==void 0?f?this.getQuotedPatternKeys(O,c):O.has(a)?[a]:[]:O.keys();for(const D of N){T=O.get(D),S=!f&&c?c:this.dictionary.decode(D);const F=l!==void 0?p?this.getQuotedPatternKeys(T,l):T.has(s)?[s]:[]:T.keys();for(const W of F){x=T.get(W),w=!p&&l?l:this.dictionary.decode(W);const z=d!==void 0?b?this.getQuotedPatternKeys(x,d):x.has(o)?[o]:[]:x.keys();for(const M of z)I=!b&&d?d:this.dictionary.decode(M),yield[y,S,w,I]}}}}*findEncoded(e,r){const[n,a,s,o]=e,[u,c,l,d]=r,[h,f,p,b]=(0,ph.arePatternsQuoted)(r);let y,S,w;const I=this.nestedMap,O=u!==void 0?h?this.getQuotedPatternKeys(I,u):I.has(n)?[n]:[]:I.keys();for(const T of O){y=I.get(T);const x=c!==void 0?f?this.getQuotedPatternKeys(y,c):y.has(a)?[a]:[]:y.keys();for(const P of x){S=y.get(P);const B=l!==void 0?p?this.getQuotedPatternKeys(S,l):S.has(s)?[s]:[]:S.keys();for(const Q of B){w=S.get(Q);const N=d!==void 0?b?this.getQuotedPatternKeys(w,d):w.has(o)?[o]:[]:w.keys();for(const D of N)yield[Number.parseInt(T,10),Number.parseInt(P,10),Number.parseInt(Q,10),Number.parseInt(D,10)]}}}}count(e){let r=0;const n=(0,ph.encodeOptionalTerms)(e,this.dictionary);if(!n)return 0;const[a,s,o,u]=n,[c,l,d,h]=e,[f,p,b,y]=(0,ph.arePatternsQuoted)(e);let S,w,I;const O=this.nestedMap,T=c!==void 0?f?this.getQuotedPatternKeys(O,c):O.has(a)?[a]:[]:O.keys();for(const x of T){S=O.get(x);const P=l!==void 0?p?this.getQuotedPatternKeys(S,l):S.has(s)?[s]:[]:S.keys();for(const B of P){w=S.get(B);const Q=d!==void 0?b?this.getQuotedPatternKeys(w,d):w.has(o)?[o]:[]:w.keys();for(const N of Q)I=w.get(N),h!==void 0?y?r+=[...this.getQuotedPatternKeys(I,h)].length:I.has(u)&&r++:r+=I.size}}return r}}Z0.RdfStoreIndexNestedMapQuoted=que;var a4;function I7(){if(a4)return hh;a4=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.RdfStore=void 0;const t=Wt,e=yt,r=hn,n=D7(),a=J0,s=Y0,o=Z0,u=gs;let c=class tp{constructor(d){this.features={quotedTripleFiltering:!0},this._size=0,this.options=d,this.dataFactory=d.dataFactory,this.dictionary=d.dictionary,this.indexesWrapped=tp.constructIndexesWrapped(d),this.indexesWrappedComponentOrders=this.indexesWrapped.map(h=>h.componentOrder)}static createDefault(){return new tp({indexCombinations:tp.DEFAULT_INDEX_COMBINATIONS,indexConstructor:d=>new o.RdfStoreIndexNestedMapQuoted(d),dictionary:new s.TermDictionaryQuotedIndexed(new a.TermDictionaryNumberRecordFullTerms),dataFactory:new e.DataFactory})}static constructIndexesWrapped(d){const h=[];if(d.indexCombinations.length===0)throw new Error("At least one index combination is required");for(const f of d.indexCombinations){if(!tp.isCombinationValid(f))throw new Error(`Invalid index combination: ${f}`);h.push({index:d.indexConstructor(d),componentOrder:f,componentOrderInverse:Object.fromEntries(f.map((p,b)=>[p,b]))})}return h}static isCombinationValid(d){for(const h of r.QUAD_TERM_NAMES)if(!d.includes(h))return!1;return d.length===4}get size(){return this._size}addQuad(d){const h=[this.dictionary.encode(d.subject),this.dictionary.encode(d.predicate),this.dictionary.encode(d.object),this.dictionary.encode(d.graph)];let f=!1;for(const p of this.indexesWrapped)f=p.index.set((0,u.orderQuadComponents)(p.componentOrder,h),!0);return f?(this._size++,!0):!1}removeQuad(d){const h=[this.dictionary.encodeOptional(d.subject),this.dictionary.encodeOptional(d.predicate),this.dictionary.encodeOptional(d.object),this.dictionary.encodeOptional(d.graph)];if(h.includes(void 0))return!1;let f=!1;for(const p of this.indexesWrapped)if(f=p.index.remove((0,u.orderQuadComponents)(p.componentOrder,h)),!f)break;return f?(this._size--,!0):!1}remove(d){return d.on("data",h=>this.removeQuad(h)),d}removeMatches(d,h,f,p){return this.remove(this.match(d,h,f,p))}deleteGraph(d){return typeof d=="string"&&(d=this.dataFactory.namedNode(d)),this.removeMatches(void 0,void 0,void 0,d)}import(d){return d.on("data",h=>this.addQuad(h)),d}*readQuads(d,h,f,p){const b=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(O=>O.index.features.quotedTripleFiltering),[y,S]=(0,u.quadToPattern)(d,h,f,p,b),w=this.indexesWrapped[(0,u.getBestIndex)(this.indexesWrappedComponentOrders,y)],I=(0,u.orderQuadComponents)(w.componentOrder,y);for(const O of w.index.find(I)){const T=this.dataFactory.quad(O[w.componentOrderInverse.subject],O[w.componentOrderInverse.predicate],O[w.componentOrderInverse.object],O[w.componentOrderInverse.graph]);S?(0,r.matchPattern)(T,d,h,f,p)&&(yield T):yield T}}getQuads(d,h,f,p){return[...this.readQuads(d,h,f,p)]}match(d,h,f,p){return(0,t.wrap)(this.readQuads(d,h,f,p))}countQuads(d,h,f,p){const b=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(I=>I.index.features.quotedTripleFiltering),[y]=(0,u.quadToPattern)(d,h,f,p,b);if(y.every(I=>I===void 0))return this.size;const S=this.indexesWrapped[(0,u.getBestIndex)(this.indexesWrappedComponentOrders,y)],w=(0,u.orderQuadComponents)(S.componentOrder,y);return S.index.count(w)}asDataset(){return new n.DatasetCoreWrapper(this)}};return c.DEFAULT_INDEX_COMBINATIONS=[["graph","subject","predicate","object"],["graph","predicate","object","subject"],["graph","object","subject","predicate"]],hh.RdfStore=c,hh}var s4;function D7(){if(s4)return fh;s4=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.DatasetCoreWrapper=void 0;const t=I7();let e=class P7{constructor(n){this.store=n}get size(){return this.store.size}add(n){return this.store.addQuad(n),this}delete(n){return this.store.removeQuad(n),this}has(n){for(const a of this.store.readQuads(n.subject,n.predicate,n.object,n.graph))return!0;return!1}match(n,a,s,o){const u=new t.RdfStore(this.store.options);for(const c of this.store.readQuads(n,a,s,o))u.addQuad(c);return new P7(u)}[Symbol.iterator](){return this.store.readQuads()}};return fh.DatasetCoreWrapper=e,fh}var N7={};Object.defineProperty(N7,"__esModule",{value:!0});var Gv={};Object.defineProperty(Gv,"__esModule",{value:!0});Gv.TermDictionaryNumberMap=void 0;const Vue=yt,NT=sr;class Hue{constructor(e=new Vue.DataFactory){this.lastId=0,this.dictionary=new Map,this.reverseDictionary=new Map,this.features={quotedTriples:!1},this.dataFactory=e}encode(e){const r=(0,NT.termToString)(e);let n=this.dictionary.get(r);return n===void 0&&(n=this.lastId++,this.dictionary.set(r,n),this.reverseDictionary.set(n,r)),n}encodeOptional(e){const r=(0,NT.termToString)(e);return this.dictionary.get(r)}decode(e){const r=this.reverseDictionary.get(e);if(r===void 0)throw new Error(`The value ${e} is not present in this dictionary`);return(0,NT.stringToTerm)(r,this.dataFactory)}encodings(){return this.reverseDictionary.keys()}findQuotedTriples(e){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(e){throw new Error("findQuotedTriplesEncoded is not supported")}}Gv.TermDictionaryNumberMap=Hue;var zv={};Object.defineProperty(zv,"__esModule",{value:!0});zv.TermDictionaryNumberRecord=void 0;const kue=yt,jT=sr;class Que{constructor(e=new kue.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=e}encode(e){const r=(0,jT.termToString)(e);let n=this.dictionary[r];return n===void 0&&(n=this.lastId++,this.dictionary[r]=n,this.reverseDictionary[n]=r),n}encodeOptional(e){const r=(0,jT.termToString)(e);return this.dictionary[r]}decode(e){const r=this.reverseDictionary[e];if(r===void 0)throw new Error(`The value ${e} is not present in this dictionary`);return(0,jT.stringToTerm)(r,this.dataFactory)}*encodings(){for(const e of Object.keys(this.reverseDictionary))yield Number.parseInt(e,10)}findQuotedTriples(e){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(e){throw new Error("findQuotedTriplesEncoded is not supported")}}zv.TermDictionaryNumberRecord=Que;var Wv={};Object.defineProperty(Wv,"__esModule",{value:!0});Wv.TermDictionaryQuoted=void 0;const Gue=yt,zue=hn;class Fo{constructor(e,r,n=new Gue.DataFactory){this.features={quotedTriples:!0},this.plainTermDictionary=e,this.quotedTriplesDictionary=r,this.dataFactory=n}encode(e){return e.termType==="Quad"?Fo.BITMASK|1+this.quotedTriplesDictionary.encode(e):this.plainTermDictionary.encode(e)}encodeOptional(e){if(e.termType==="Quad"){const r=this.quotedTriplesDictionary.encodeOptional(e);return r===void 0?r:Fo.BITMASK|1+r}return this.plainTermDictionary.encodeOptional(e)}decode(e){if(Fo.BITMASK&e){const r=(~Fo.BITMASK&e)-1;return this.quotedTriplesDictionary.decode(r)}return this.plainTermDictionary.decode(e)}*encodings(){for(const e of this.plainTermDictionary.encodings())yield e;for(const e of this.quotedTriplesDictionary.encodings())yield Fo.BITMASK|1+e}*findQuotedTriples(e){for(const r of this.findQuotedTriplesEncoded(e))yield this.decode(r)}*findQuotedTriplesEncoded(e){for(let r of this.quotedTriplesDictionary.encodings()){r=Fo.BITMASK|1+r;const n=this.decode(r);(0,zue.matchPattern)(n,e.subject,e.predicate,e.object,e.graph)&&(yield r)}}}Fo.BITMASK=1<<31;Wv.TermDictionaryQuoted=Fo;var Xv={};Object.defineProperty(Xv,"__esModule",{value:!0});Xv.TermDictionaryQuotedReferential=void 0;const Wue=yt,Xue=hn,Kue=gs;class Ta{constructor(e,r=new Wue.DataFactory){this.quotedTriplesDictionary=[],this.quotedTriplesReverseDictionary={},this.features={quotedTriples:!0},this.plainTermDictionary=e,this.dataFactory=r}encode(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!1):this.plainTermDictionary.encode(e)}encodeQuotedTriple(e,r){var n;if(e.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const a=(n=(0,Kue.encodeOptionalTerms)([e.subject,e.predicate,e.object,void 0],this))===null||n===void 0?void 0:n.slice(0,3),s=a&&a.every(c=>c!==void 0)?this.quotedTriplesReverseDictionary[a.join(Ta.SEPARATOR)]:void 0;if(s!==void 0||r)return s===void 0?void 0:Ta.BITMASK|s;const o=[this.encode(e.subject),this.encode(e.predicate),this.encode(e.object)],u=this.quotedTriplesDictionary.length+1;return this.quotedTriplesDictionary.push(o),this.quotedTriplesReverseDictionary[o.join(Ta.SEPARATOR)]=u,Ta.BITMASK|u}encodeOptional(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!0):this.plainTermDictionary.encodeOptional(e)}decode(e){if(Ta.BITMASK&e){const r=(~Ta.BITMASK&e)-1;if(r>=this.quotedTriplesDictionary.length)throw new Error(`The value ${e} is not present in the quoted triples range of the dictionary`);const n=this.quotedTriplesDictionary[r];return this.dataFactory.quad(this.decode(n[0]),this.decode(n[1]),this.decode(n[2]))}return this.plainTermDictionary.decode(e)}*encodings(){for(const e of this.plainTermDictionary.encodings())yield e;for(const e of this.quotedTriplesDictionary.keys())yield Ta.BITMASK|1+e}*findQuotedTriples(e){for(const r of this.findQuotedTriplesEncoded(e))yield this.decode(r)}*findQuotedTriplesEncoded(e){for(let r of this.quotedTriplesDictionary.keys()){r=Ta.BITMASK|1+r;const n=this.decode(r);(0,Xue.matchPattern)(n,e.subject,e.predicate,e.object,e.graph)&&(yield r)}}}Ta.BITMASK=1<<31;Ta.SEPARATOR="_";Xv.TermDictionaryQuotedReferential=Ta;var Kv={};Object.defineProperty(Kv,"__esModule",{value:!0});Kv.TermDictionarySymbol=void 0;const Jue=yt,o4=sr;class Yue{constructor(e=new Jue.DataFactory){this.features={quotedTriples:!1},this.dataFactory=e}encode(e){return Symbol.for(`rdf::${(0,o4.termToString)(e)}`)}encodeOptional(e){return this.encode(e)}decode(e){const r=Symbol.keyFor(e);if(r===void 0)throw new Error(`The value ${String(e)} is not present in this dictionary`);return(0,o4.stringToTerm)(r.slice(5),this.dataFactory)}encodings(){throw new Error("encodings is not supported")}findQuotedTriples(e){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(e){throw new Error("findQuotedTriplesEncoded is not supported")}}Kv.TermDictionarySymbol=Yue;var j7={};Object.defineProperty(j7,"__esModule",{value:!0});var ey={};Object.defineProperty(ey,"__esModule",{value:!0});ey.RdfStoreIndexNestedMapRecursive=void 0;const u4=gs;class Zue{constructor(e){this.features={quotedTripleFiltering:!1},this.dictionary=e.dictionary,this.nestedMap=new Map}set(e,r){let n=this.nestedMap,a=!1;for(const[s,o]of e.entries()){const u=n;let c=u.get(o);c?s===e.length-1&&(a=!0):(c=s===e.length-1?r:new Map,u.set(o,c)),n=c}return!a}remove(e){const r=this.nestedMap,n=r.get(e[0]);if(!n)return!1;const a=n.get(e[1]);if(!a)return!1;const s=a.get(e[2]);if(!s)return!1;const o=s.delete(e[3]);return o&&s.size===0&&(a.delete(e[2]),a.size===0&&(n.delete(e[1]),n.size===0&&r.delete(e[0]))),o}get(e){const r=(0,u4.encodeOptionalTerms)(e,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(e){const r=this.nestedMap.get(e[0]);if(!r)return;const n=r.get(e[1]);if(!n)return;const a=n.get(e[2]);if(a)return a.get(e[3])}*find(e){const r=(0,u4.encodeOptionalTerms)(e,this.dictionary);if(r)for(const n of this.findEncoded(r,e))yield[r[0]!==void 0?e[0]:this.dictionary.decode(n[0]),r[1]!==void 0?e[1]:this.dictionary.decode(n[1]),r[2]!==void 0?e[2]:this.dictionary.decode(n[2]),r[3]!==void 0?e[3]:this.dictionary.decode(n[3])]}*findEncoded(e,r){return yield*this.findEncodedInner(0,e,r,this.nestedMap,[])}*findEncodedInner(e,r,n,a,s){if(e===r.length)yield[...s];else{const o=r[e];if(n[e]){const c=o;if(c!==void 0){const l=a.get(c);l&&(s[e]=o,yield*this.findEncodedInner(e+1,r,n,l,s))}}else for(const[c,l]of a.entries())s[e]=c,yield*this.findEncodedInner(e+1,r,n,l,s)}}count(e){return this.countInner(0,e,this.nestedMap)}countInner(e,r,n){const a=r[e];let s=0;if(a){const o=this.dictionary.encodeOptional(a);if(o!==void 0){if(e===r.length-1)return n.has(o)?1:0;const u=n.get(o);u&&(s+=this.countInner(e+1,r,u))}}else{if(e===r.length-1)return n.size;for(const o of n.values())s+=this.countInner(e+1,r,o)}return s}}ey.RdfStoreIndexNestedMapRecursive=Zue;var Jv={};Object.defineProperty(Jv,"__esModule",{value:!0});Jv.RdfStoreIndexNestedMapRecursiveQuoted=void 0;const c4=gs,ece=ey;class tce extends ece.RdfStoreIndexNestedMapRecursive{constructor(e){super(e),this.features={quotedTripleFiltering:!0}}*findEncoded(e,r){return yield*this.findEncodedInnerQuoted(0,e,r,(0,c4.arePatternsQuoted)(r),this.nestedMap,[])}*findEncodedInnerQuoted(e,r,n,a,s,o){if(e===r.length)yield[...o];else{const u=r[e],c=n[e];if(c)if(a[e]){const l=this.dictionary.findQuotedTriplesEncoded(c);for(const d of l){const h=s.get(d);h&&(o[e]=d,yield*this.findEncodedInnerQuoted(e+1,r,n,a,h,o))}}else{const l=u;if(l!==void 0){const d=s.get(l);d&&(o[e]=u,yield*this.findEncodedInnerQuoted(e+1,r,n,a,d,o))}}else for(const[l,d]of s.entries())o[e]=l,yield*this.findEncodedInnerQuoted(e+1,r,n,a,d,o)}}countInner(e,r,n){const a=r[e];let s=0;if(a)if(a.termType==="Quad"&&(0,c4.quadHasVariables)(a)){const o=this.dictionary.findQuotedTriplesEncoded(a);for(const u of o)if(e===r.length-1)n.has(u)&&s++;else{const c=n.get(u);c&&(s+=this.countInner(e+1,r,c))}}else{const o=this.dictionary.encodeOptional(a);if(o!==void 0){if(e===r.length-1)return n.has(o)?1:0;const u=n.get(o);u&&(s+=this.countInner(e+1,r,u))}}else{if(e===r.length-1)return n.size;for(const o of n.values())s+=this.countInner(e+1,r,o)}return s}}Jv.RdfStoreIndexNestedMapRecursiveQuoted=tce;var ty={};Object.defineProperty(ty,"__esModule",{value:!0});ty.RdfStoreIndexNestedRecord=void 0;const CT=gs;class rce{constructor(e){this.features={quotedTripleFiltering:!1},this.dictionary=e.dictionary,this.nestedRecords={}}set(e,r){const n=this.nestedRecords,a=n[e[0]]||(n[e[0]]={}),s=a[e[1]]||(a[e[1]]={}),o=s[e[2]]||(s[e[2]]={});return o[e[3]]?!1:(o[e[3]]=r,!0)}remove(e){const r=this.nestedRecords,n=r[e[0]];if(!n)return!1;const a=n[e[1]];if(!a)return!1;const s=a[e[2]];return!s||!s[e[3]]?!1:(delete s[e[3]],Object.keys(s).length===0&&(delete a[e[2]],Object.keys(a).length===0&&(delete n[e[1]],Object.keys(n).length===0&&delete r[e[0]])),!0)}get(e){const r=(0,CT.encodeOptionalTerms)(e,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(e){var r,n,a;return(a=(n=(r=this.nestedRecords[e[0]])===null||r===void 0?void 0:r[e[1]])===null||n===void 0?void 0:n[e[2]])===null||a===void 0?void 0:a[e[3]]}*find(e){const r=(0,CT.encodeOptionalTerms)(e,this.dictionary);if(!r)return;const[n,a,s,o]=r,[u,c,l,d]=e;let h,f,p,b,y,S,w;const I=this.nestedRecords,O=n!==void 0?n in I?[n]:[]:Object.keys(I);for(const T of O){y=I[T],h=u||this.dictionary.decode(Number.parseInt(T,10));const x=a!==void 0?a in y?[a]:[]:Object.keys(y);for(const P of x){S=y[P],f=c||this.dictionary.decode(Number.parseInt(P,10));const B=s!==void 0?s in S?[s]:[]:Object.keys(S);for(const Q of B){w=S[Q],p=l||this.dictionary.decode(Number.parseInt(Q,10));const N=o!==void 0?o in w?[o]:[]:Object.keys(w);for(const D of N)b=d||this.dictionary.decode(Number.parseInt(D,10)),yield[h,f,p,b]}}}}*findEncoded(e,r){const[n,a,s,o]=e;let u,c,l;const d=this.nestedRecords,h=n!==void 0?n in d?[n]:[]:Object.keys(d);for(const f of h){u=d[f];const p=a!==void 0?a in u?[a]:[]:Object.keys(u);for(const b of p){c=u[b];const y=s!==void 0?s in c?[s]:[]:Object.keys(c);for(const S of y){l=c[S];const w=o!==void 0?o in l?[o]:[]:Object.keys(l);for(const I of w)yield[Number.parseInt(f,10),Number.parseInt(b,10),Number.parseInt(S,10),Number.parseInt(I,10)]}}}}count(e){let r=0;const n=(0,CT.encodeOptionalTerms)(e,this.dictionary);if(!n)return 0;const a=n[0],s=n[1],o=n[2],u=n[3];let c,l,d;const h=this.nestedRecords,f=a!==void 0?a in h?[a]:[]:Object.keys(h);for(const p of f){c=h[p];const b=s!==void 0?s in c?[s]:[]:Object.keys(c);for(const y of b){l=c[y];const S=o!==void 0?o in l?[o]:[]:Object.keys(l);for(const w of S)d=l[w],u!==void 0?u in d&&r++:r+=Object.keys(d).length}}return r}}ty.RdfStoreIndexNestedRecord=rce;var Yv={};Object.defineProperty(Yv,"__esModule",{value:!0});Yv.RdfStoreIndexNestedRecordQuoted=void 0;const yh=gs,nce=ty;class ice extends nce.RdfStoreIndexNestedRecord{constructor(e){super(e),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(e,r){for(const n of this.dictionary.findQuotedTriplesEncoded(r))n in e&&(yield n)}*find(e){const r=(0,yh.encodeOptionalTerms)(e,this.dictionary);if(!r)return;const[n,a,s,o]=r,[u,c,l,d]=e,[h,f,p,b]=(0,yh.arePatternsQuoted)(e);let y,S,w,I,O,T,x;const P=this.nestedRecords,B=u!==void 0?h?this.getQuotedPatternKeys(P,u):n in P?[n]:[]:Object.keys(P);for(const Q of B){O=P[Q],y=!h&&u?u:this.dictionary.decode(Number.parseInt(Q,10));const N=c!==void 0?f?this.getQuotedPatternKeys(O,c):a in O?[a]:[]:Object.keys(O);for(const D of N){T=O[D],S=!f&&c?c:this.dictionary.decode(Number.parseInt(D,10));const F=l!==void 0?p?this.getQuotedPatternKeys(T,l):s in T?[s]:[]:Object.keys(T);for(const W of F){x=T[W],w=!p&&l?l:this.dictionary.decode(Number.parseInt(W,10));const z=d!==void 0?b?this.getQuotedPatternKeys(x,d):o in x?[o]:[]:Object.keys(x);for(const M of z)I=!b&&d?d:this.dictionary.decode(Number.parseInt(M,10)),yield[y,S,w,I]}}}}*findEncoded(e,r){const[n,a,s,o]=e,[u,c,l,d]=r,[h,f,p,b]=(0,yh.arePatternsQuoted)(r);let y,S,w;const I=this.nestedRecords,O=u!==void 0?h?this.getQuotedPatternKeys(I,u):n in I?[n]:[]:Object.keys(I);for(const T of O){y=I[T];const x=c!==void 0?f?this.getQuotedPatternKeys(y,c):a in y?[a]:[]:Object.keys(y);for(const P of x){S=y[P];const B=l!==void 0?p?this.getQuotedPatternKeys(S,l):s in S?[s]:[]:Object.keys(S);for(const Q of B){w=S[Q];const N=d!==void 0?b?this.getQuotedPatternKeys(w,d):o in w?[o]:[]:Object.keys(w);for(const D of N)yield[Number.parseInt(T,10),Number.parseInt(P,10),Number.parseInt(Q,10),Number.parseInt(D,10)]}}}}count(e){let r=0;const n=(0,yh.encodeOptionalTerms)(e,this.dictionary);if(!n)return 0;const[a,s,o,u]=n,[c,l,d,h]=e,[f,p,b,y]=(0,yh.arePatternsQuoted)(e);let S,w,I;const O=this.nestedRecords,T=c!==void 0?f?this.getQuotedPatternKeys(O,c):a in O?[a]:[]:Object.keys(O);for(const x of T){S=O[x];const P=l!==void 0?p?this.getQuotedPatternKeys(S,l):s in S?[s]:[]:Object.keys(S);for(const B of P){w=S[B];const Q=d!==void 0?b?this.getQuotedPatternKeys(w,d):o in w?[o]:[]:Object.keys(w);for(const N of Q)I=w[N],h!==void 0?y?r+=[...this.getQuotedPatternKeys(I,h)].length:u in I&&r++:r+=Object.keys(I).length}}return r}}Yv.RdfStoreIndexNestedRecordQuoted=ice;var C7={};Object.defineProperty(C7,"__esModule",{value:!0});var F7={};Object.defineProperty(F7,"__esModule",{value:!0});(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(D7(),t),r(N7,t),r(Gv,t),r(zv,t),r(J0,t),r(Wv,t),r(Y0,t),r(Xv,t),r(Kv,t),r(j7,t),r(Hf,t),r(Z0,t),r(ey,t),r(Jv,t),r(ty,t),r(Yv,t),r(C7,t),r(gs,t),r(F7,t),r(I7(),t)})(R7);Object.defineProperty(Qv,"__esModule",{value:!0});Qv.storeStream=void 0;const ace=R7;function sce(t){const e=ace.RdfStore.createDefault();return new Promise((r,n)=>e.import(t).on("error",n).once("end",()=>r(e)))}Qv.storeStream=sce;Object.defineProperty(qv,"__esModule",{value:!0});qv.ActorRdfResolveHypermediaNone=void 0;const oce=nR,uce=Hv,cce=Qv;class lce extends uce.ActorRdfResolveHypermedia{constructor(e){super(e,"file")}async testMetadata(e){return{filterFactor:0}}async run(e){return this.logInfo(e.context,`Identified as file source: ${e.url}`),{source:new oce.RdfJsQuadSource(await(0,cce.storeStream)(e.quads))}}}qv.ActorRdfResolveHypermediaNone=lce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(qv,t)})(A7);var M7={},Zv={},iR={},e2={};Object.defineProperty(e2,"__esModule",{value:!0});e2.ActorRdfResolveHypermediaLinks=void 0;const dce=et;class fce extends dce.Actor{constructor(e){super(e)}}e2.ActorRdfResolveHypermediaLinks=fce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(e2,t)})(iR);Object.defineProperty(Zv,"__esModule",{value:!0});Zv.ActorRdfResolveHypermediaLinksNext=void 0;const hce=iR;class pce extends hce.ActorRdfResolveHypermediaLinks{constructor(e){super(e)}async test(e){if(!e.metadata.next)throw new Error(`Actor ${this.name} requires a 'next' metadata entry.`);return!0}async run(e){return{links:[{url:e.metadata.next}]}}}Zv.ActorRdfResolveHypermediaLinksNext=pce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Zv,t)})(M7);var L7={},t2={},aR={},Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.KeysRdfJoin=Gu.KeysExtractLinksTree=Gu.KeysRdfResolveHypermediaLinks=void 0;const Zb=et;Gu.KeysRdfResolveHypermediaLinks={traverse:new Zb.ActionContextKey("@comunica/actor-rdf-resolve-hypermedia-links-traverse:traverse"),annotateSources:new Zb.ActionContextKey("@comunica/bus-rdf-resolve-hypermedia-links:annotateSources")};Gu.KeysExtractLinksTree={strictTraversal:new Zb.ActionContextKey("@comunica/actor-extract-links-tree:strictTraversal")};Gu.KeysRdfJoin={skipAdaptiveJoin:new Zb.ActionContextKey("@comunica/bus-rdf-join:skipAdaptiveJoin")};(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Gu,t)})(aR);Object.defineProperty(t2,"__esModule",{value:!0});t2.ActorRdfResolveHypermediaLinksTraverse=void 0;const yce=iR,bce=Ht,l4=aR;class mce extends yce.ActorRdfResolveHypermediaLinks{constructor(e){super(e),this.upgradeInsecureRequests=e.upgradeInsecureRequests}async test(e){if(!e.metadata.traverse)throw new Error(`Actor ${this.name} requires a 'traverse' metadata entry.`);if(e.context.has(l4.KeysRdfResolveHypermediaLinks.traverse)&&!e.context.get(l4.KeysRdfResolveHypermediaLinks.traverse))throw new Error("Link traversal has been disabled via the context.");return!0}async run(e){return{links:e.metadata.traverse.map(r=>{const n=r.url.indexOf("#");return n>=0&&(r.url=r.url.slice(0,n)),r.url.startsWith("http:")&&(this.upgradeInsecureRequests??(g.window&&g.window.location.protocol==="https:"&&!e.context.get(bce.KeysHttpProxy.httpProxyHandler)))&&(r.url=r.url.replace("http:","https:")),r})}}}t2.ActorRdfResolveHypermediaLinksTraverse=mce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(t2,t)})(L7);var B7={},r2={},$7={},n2={};Object.defineProperty(n2,"__esModule",{value:!0});n2.ActorRdfResolveHypermediaLinksQueue=void 0;const gce=et;class _ce extends gce.Actor{constructor(e){super(e)}}n2.ActorRdfResolveHypermediaLinksQueue=_ce;var U7={};Object.defineProperty(U7,"__esModule",{value:!0});var i2={};Object.defineProperty(i2,"__esModule",{value:!0});i2.LinkQueueWrapper=void 0;class vce{constructor(e){this.linkQueue=e}push(e,r){return this.linkQueue.push(e,r)}getSize(){return this.linkQueue.getSize()}isEmpty(){return this.linkQueue.isEmpty()}pop(){return this.linkQueue.pop()}peek(){return this.linkQueue.peek()}}i2.LinkQueueWrapper=vce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(n2,t),r(U7,t),r(i2,t)})($7);var ry={};Object.defineProperty(ry,"__esModule",{value:!0});ry.LinkQueueFifo=void 0;class wce{constructor(){this.links=[]}push(e){return this.links.push(e),!0}getSize(){return this.links.length}isEmpty(){return this.links.length===0}pop(){return this.links.shift()}peek(){return this.links[0]}}ry.LinkQueueFifo=wce;Object.defineProperty(r2,"__esModule",{value:!0});r2.ActorRdfResolveHypermediaLinksQueueFifo=void 0;const Sce=$7,Tce=ry;class Ece extends Sce.ActorRdfResolveHypermediaLinksQueue{constructor(e){super(e)}async test(e){return!0}async run(e){return{linkQueue:new Tce.LinkQueueFifo}}}r2.ActorRdfResolveHypermediaLinksQueueFifo=Ece;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(r2,t),r(ry,t)})(B7);var q7={},a2={},kf={},ny={};Object.defineProperty(ny,"__esModule",{value:!0});ny.ActorRdfUpdateQuads=void 0;const Oce=et;class Ace extends Oce.Actor{constructor(e){super(e)}}ny.ActorRdfUpdateQuads=Ace;var zu={},sR={},s2={},iy={};Object.defineProperty(iy,"__esModule",{value:!0});iy.FederatedQuadSource=void 0;const xce=ft,Rce=Dl,O1=Ht,Ice=qm,FT=ba,d4=Wt,Pce=yt,f4=hn,Dce=Tt,h4=new Pce.DataFactory;class mn{constructor(e,r,n,a,s){if(this.mediatorResolveQuadPattern=e,this.mediatorRdfMetadataAccumulate=r,this.sources=n.get(O1.KeysRdfResolveQuadPattern.sources),this.contextDefault=n.delete(O1.KeysRdfResolveQuadPattern.sources),this.emptyPatterns=a,this.sourceIds=n.get(O1.KeysRdfResolveQuadPattern.sourceIds)??new Map,this.skipEmptyPatterns=s,this.algebraFactory=new Dce.Factory,this.skipEmptyPatterns)for(const o of this.sources)this.emptyPatterns.has(o)||this.emptyPatterns.set(o,[])}static isTermBound(e){return e.termType!=="Variable"}static isSubPatternOf(e,r){return(!mn.isTermBound(r.subject)||r.subject.equals(e.subject))&&(!mn.isTermBound(r.predicate)||r.predicate.equals(e.predicate))&&(!mn.isTermBound(r.object)||r.object.equals(e.object))&&(!mn.isTermBound(r.graph)||r.graph.equals(e.graph))}static skolemizeTerm(e,r){return e.termType==="BlankNode"?new Ice.BlankNodeScoped(`bc_${r}_${e.value}`,h4.namedNode(`${mn.SKOLEM_PREFIX}${r}:${e.value}`)):e}static skolemizeQuad(e,r){return(0,f4.mapTermsNested)(e,n=>mn.skolemizeTerm(n,r))}static deskolemizeTerm(e,r){if(e.termType==="BlankNode"&&"skolemized"in e&&(e=e.skolemized),e.termType==="NamedNode"&&e.value.startsWith(mn.SKOLEM_PREFIX)){const n=e.value.indexOf(":",mn.SKOLEM_PREFIX.length);if(e.value.slice(mn.SKOLEM_PREFIX.length,n)===r){const s=e.value.slice(n+1,e.value.length);return h4.blankNode(s)}return null}return e}static deskolemizeQuad(e,r){return(0,f4.mapTermsNested)(e,n=>{const a=mn.deskolemizeTerm(n,r);return a||n})}isSourceEmpty(e,r){if(!this.skipEmptyPatterns)return!1;const n=this.emptyPatterns.get(e);if(n){for(const a of n)if(mn.isSubPatternOf(r,a))return!0}return!1}getSourceId(e){let r=this.sourceIds.get(e);return r===void 0&&(r=`${this.sourceIds.size}`,this.sourceIds.set(e,r)),r}match(e,r,n,a){const s=async()=>{if(o.size===this.sources.length){let l=(await this.mediatorRdfMetadataAccumulate.mediate({mode:"initialize",context:this.contextDefault})).metadata;for(const h of o.values())l={...h,...(await this.mediatorRdfMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:l,appendingMetadata:h,context:this.contextDefault})).metadata};l.state=new FT.MetadataValidationState;const d=c.getProperty("metadata");c.setProperty("metadata",l),d==null||d.state.invalidate()}},o=new Map,u=Promise.all(this.sources.map(async(l,d)=>{const h=this.getSourceId(l),f=mn.deskolemizeTerm(e,h),p=mn.deskolemizeTerm(r,h),b=mn.deskolemizeTerm(n,h),y=mn.deskolemizeTerm(a,h);let S,w=(0,Rce.getDataSourceContext)(l,this.contextDefault);w=w.set(O1.KeysRdfResolveQuadPattern.source,l);let I;!f||!p||!b||!y||this.isSourceEmpty(l,S=this.algebraFactory.createPattern(f,p,b,y))?(I={data:new d4.ArrayIterator([],{autoStart:!1})},I.data.setProperty("metadata",{state:new FT.MetadataValidationState,...(await this.mediatorRdfMetadataAccumulate.mediate({mode:"initialize",context:this.contextDefault})).metadata})):I=await this.mediatorResolveQuadPattern.mediate({pattern:S,context:w});const O=()=>{I.data.getProperty("metadata",x=>{var P,B;o.set(`${d}`,x),this.skipEmptyPatterns&&!((P=x.cardinality)!=null&&P.value)&&S&&!this.isSourceEmpty(l,S)&&this.emptyPatterns.get(l).push(S),s().catch(Q=>c.emit("error",Q)),(B=x.state)==null||B.addInvalidateListener(()=>{o.delete(`${d}`),O()})})};O();const T=I.data.map(x=>mn.skolemizeQuad(x,h));return T.on("error",x=>c.emit("error",x)),T}));u.catch(l=>c.emit("error",l));const c=new xce.ClosableTransformIterator(async()=>new d4.UnionIterator(await u),{autoStart:!1,onClose(){u.then(l=>{for(const d of l)d.destroy()},()=>{})}});return this.sources.length===0&&this.mediatorRdfMetadataAccumulate.mediate({mode:"initialize",context:this.contextDefault}).then(l=>c.setProperty("metadata",{state:new FT.MetadataValidationState,...l.metadata})).catch(l=>c.emit("error",l)),c}}iy.FederatedQuadSource=mn;mn.SKOLEM_PREFIX="urn:comunica_skolem:source_";Object.defineProperty(s2,"__esModule",{value:!0});s2.ActorRdfResolveQuadPatternFederated=void 0;const p4=Dl,Nce=iy;class jce extends p4.ActorRdfResolveQuadPatternSource{constructor(e){super(e),this.emptyPatterns=new Map,e.mediatorRdfMetadataAccumulate||(this.mediatorRdfMetadataAccumulate={async mediate(r){if(r.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0},canContainUndefs:!1}};const n={...r.accumulatedMetadata},a=r.appendingMetadata;return!a.cardinality||!Number.isFinite(a.cardinality.value)?(n.cardinality.type="estimate",n.cardinality.value=Number.POSITIVE_INFINITY):(a.cardinality.type==="estimate"&&(n.cardinality.type="estimate"),n.cardinality.value+=a.cardinality.value),(n.requestTime||a.requestTime)&&(n.requestTime=n.requestTime||0,a.requestTime=a.requestTime||0,n.requestTime+=a.requestTime),(n.pageSize||a.pageSize)&&(n.pageSize=n.pageSize||0,a.pageSize=a.pageSize||0,n.pageSize+=a.pageSize),a.canContainUndefs&&(n.canContainUndefs=!0),{metadata:n}}})}async test(e){if(!(0,p4.getContextSources)(e.context))throw new Error(`Actor ${this.name} can only resolve quad pattern queries against a sources array.`);return!0}async getSource(e){return new Nce.FederatedQuadSource(this.mediatorResolveQuadPattern,this.mediatorRdfMetadataAccumulate,e,this.emptyPatterns,this.skipEmptyPatterns)}}s2.ActorRdfResolveQuadPatternFederated=jce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(s2,t),r(iy,t)})(sR);Object.defineProperty(zu,"__esModule",{value:!0});zu.ActorRdfUpdateQuadsDestination=zu.deskolemize=zu.deskolemizeStream=void 0;const Cce=sR,y4=Ht,Fce=ny;function TO(t,e){return t==null?void 0:t.map(r=>Cce.FederatedQuadSource.deskolemizeQuad(r,e))}zu.deskolemizeStream=TO;function V7(t){var n;const e=t.context.get(y4.KeysRdfUpdateQuads.destination),r=(n=t.context.get(y4.KeysRdfResolveQuadPattern.sourceIds))==null?void 0:n.get(e);return r?{...t,quadStreamInsert:TO(t.quadStreamInsert,r),quadStreamDelete:TO(t.quadStreamDelete,r)}:t}zu.deskolemize=V7;class Mce extends Fce.ActorRdfUpdateQuads{async test(e){return!0}async run(e){const r=await this.getDestination(e.context);return await this.getOutput(r,V7(e),e.context)}async getOutput(e,r,n){return{execute:()=>Promise.all([r.quadStreamInsert?e.insert(r.quadStreamInsert):Promise.resolve(),r.quadStreamDelete?e.delete(r.quadStreamDelete):Promise.resolve(),r.deleteGraphs?e.deleteGraphs(r.deleteGraphs.graphs,r.deleteGraphs.requireExistence,r.deleteGraphs.dropGraphs):Promise.resolve(),r.createGraphs?e.createGraphs(r.createGraphs.graphs,r.createGraphs.requireNonExistence):Promise.resolve()]).then(()=>{})}}}zu.ActorRdfUpdateQuadsDestination=Mce;var o2={};Object.defineProperty(o2,"__esModule",{value:!0});o2.validateHttpResponse=void 0;const Lce=ms,Bce=Pl;async function $ce(t,e){var r;if(e.status>=400){let n="empty response";if(e.body){const a=Lce.ActorHttp.toNodeReadable(e.body);n=await Bce(a)}throw new Error(`Could not update ${t} (HTTP status ${e.status}):
${n}`)}await((r=e.body)==null?void 0:r.cancel())}o2.validateHttpResponse=$ce;var ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.getContextDestinationUrl=ti.getContextDestinationFirst=ti.getContextDestination=ti.getDataDestinationContext=ti.getDataDestinationValue=ti.getDataDestinationType=ti.isDataDestinationRawType=void 0;const EO=Ht;function H7(t){return typeof t=="string"||"remove"in t}ti.isDataDestinationRawType=H7;function Uce(t){return typeof t=="string"?"":"remove"in t?"rdfjsStore":t.type}ti.getDataDestinationType=Uce;function k7(t){return H7(t)?t:t.value}ti.getDataDestinationValue=k7;function qce(t,e){return typeof t=="string"||"remove"in t||!t.context?e:e.merge(t.context)}ti.getDataDestinationContext=qce;function Vce(t){return t.get(EO.KeysRdfUpdateQuads.destination)}ti.getContextDestination=Vce;function Hce(t){if(t.has(EO.KeysRdfUpdateQuads.destination))return t.get(EO.KeysRdfUpdateQuads.destination)}ti.getContextDestinationFirst=Hce;function kce(t){if(t){let e=k7(t);if(typeof e=="string"){const r=e.indexOf("#");return r>=0&&(e=e.slice(0,r)),e}}}ti.getContextDestinationUrl=kce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ny,t),r(zu,t),r(o2,t),r(ti,t)})(kf);var u2={};Object.defineProperty(u2,"__esModule",{value:!0});u2.RdfJsQuadDestination=void 0;const Qce=yt,b4=sr,Gce=new Qce.DataFactory;class zce{constructor(e){this.store=e}promisifyEventEmitter(e){return new Promise((r,n)=>{e.on("end",r),e.on("error",n)})}delete(e){return this.promisifyEventEmitter(this.store.remove(e))}insert(e){return this.promisifyEventEmitter(this.store.import(e))}async deleteGraphs(e,r,n){switch(e){case"ALL":await this.promisifyEventEmitter(this.store.deleteGraph(Gce.defaultGraph()));case"NAMED":const a=this.store.match(),s={};a.on("data",o=>{o.graph.termType!=="DefaultGraph"&&(s[(0,b4.termToString)(o.graph)]=!0)}),await this.promisifyEventEmitter(a),await Promise.all(Object.keys(s).map(o=>this.promisifyEventEmitter(this.store.deleteGraph((0,b4.stringToTerm)(o)))));break;default:for(const o of Array.isArray(e)?e:[e])await this.promisifyEventEmitter(this.store.deleteGraph(o))}}async createGraphs(e,r){if(r)for(const n of e){const a=this.store.match(void 0,void 0,void 0,n);await new Promise((s,o)=>{a.once("data",()=>{o(new Error(`Unable to create graph ${n.value} as it already exists`))}),a.on("end",s),a.on("error",o)})}}}u2.RdfJsQuadDestination=zce;Object.defineProperty(a2,"__esModule",{value:!0});a2.ActorRdfUpdateQuadsRdfJsStore=void 0;const MT=kf,Wce=u2;class Xce extends MT.ActorRdfUpdateQuadsDestination{constructor(e){super(e)}async test(e){const r=(0,MT.getContextDestination)(e.context);if(!r||typeof r=="string"||!("remove"in r)&&"value"in r&&!r.value.remove)throw new Error(`${this.name} received an invalid rdfjsStore.`);return!0}async getDestination(e){const r=(0,MT.getContextDestination)(e);return new Wce.RdfJsQuadDestination("remove"in r?r:r.value)}}a2.ActorRdfUpdateQuadsRdfJsStore=Xce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(a2,t)})(q7);var Q7={},c2={};Object.defineProperty(c2,"__esModule",{value:!0});c2.MediatorJoinCoefficientsFixed=void 0;const Kce=Ht,m4=et;class Jce extends m4.Mediator{constructor(e){super(e)}async mediateWith(e,r){var f;const n=[],a=r.map(({reply:p})=>p).map(p=>p.catch(b=>{n.push(b)})),s=await Promise.all(a);let o=s.map((p,b)=>{if(p)return p.iterations*this.cpuWeight+p.persistedItems*this.memoryWeight+p.blockingItems*this.timeWeight+p.requestTime*this.ioWeight});const u=Math.max(...o.filter(p=>p!==void 0)),c=e.context.get(Kce.KeysQueryOperation.limitIndicator);c&&(o=o.map((p,b)=>p!==void 0&&s[b].persistedItems>0&&s[b].iterations>c?p+u:p));let l=-1,d=Number.POSITIVE_INFINITY;for(const[p,b]of o.entries())b!==void 0&&(l===-1||b<d)&&(l=p,d=b);if(l<0)throw new Error(`All actors rejected their test in ${this.name}
${n.map(p=>p.message).join(`
`)}`);const h=r[l].actor;return h.includeInLogs&&((f=m4.Actor.getContextLogger(e.context))==null||f.debug(`Determined physical join operator '${h.logicalType}-${h.physicalName}'`,{entries:e.entries.length,variables:await Promise.all(e.entries.map(async p=>(await p.output.metadata()).variables.map(b=>b.value))),costs:Object.fromEntries(o.map((p,b)=>[`${r[b].actor.logicalType}-${r[b].actor.physicalName}`,p])),coefficients:Object.fromEntries(s.map((p,b)=>[`${r[b].actor.logicalType}-${r[b].actor.physicalName}`,p]))})),h}}c2.MediatorJoinCoefficientsFixed=Jce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(c2,t)})(Q7);var G7={},l2={};Object.defineProperty(l2,"__esModule",{value:!0});l2.ActorRdfMetadataExtractTraverse=void 0;const Yce=uo;class Zce extends Yce.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return!0}async run(e){const r=await this.mediatorExtractLinks.mediate(e);return{metadata:{traverse:r.links,traverseConditional:r.linksConditional}}}}l2.ActorRdfMetadataExtractTraverse=Zce;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(l2,t)})(G7);var z7={},d2={};Object.defineProperty(d2,"__esModule",{value:!0});d2.ActorQueryOperationAsk=void 0;const g4=ft;class ele extends g4.ActorQueryOperationTypedMediated{constructor(e){super(e,"ask")}async testOperation(e,r){return!0}async runOperation(e,r){const n=await this.mediatorQueryOperation.mediate({operation:e.input,context:r}),{bindingsStream:a}=g4.ActorQueryOperation.getSafeBindings(n);return{type:"boolean",execute:async()=>(await a.take(1).toArray()).length===1}}}d2.ActorQueryOperationAsk=ele;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(d2,t)})(z7);var W7={},f2={};Object.defineProperty(f2,"__esModule",{value:!0});f2.ActorQueryOperationBgpJoin=void 0;const tle=ft,rle=Tt;class h2 extends tle.ActorQueryOperationTypedMediated{constructor(e){super(e,"bgp")}async testOperation(e,r){return!0}async runOperation(e,r){return this.mediatorQueryOperation.mediate({operation:h2.FACTORY.createJoin(e.patterns),context:r})}}f2.ActorQueryOperationBgpJoin=h2;h2.FACTORY=new rle.Factory;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(f2,t)})(W7);var X7={},p2={},y2={},b2={};Object.defineProperty(b2,"__esModule",{value:!0});b2.ActorQueryOperationUnion=void 0;const _4=ft,nle=ba,ile=Wt,ale=hn;class em extends _4.ActorQueryOperationTypedMediated{constructor(e){super(e,"union")}static unionVariables(e){return(0,ale.uniqTerms)(e.flat())}static unionMetadata(e,r){const n={type:"exact",value:0};for(const o of e)if(o.cardinality.value&&Number.isFinite(o.cardinality.value)||o.cardinality.value===0)o.cardinality.type==="estimate"&&(n.type="estimate"),n.value+=o.cardinality.value;else{n.type="estimate",n.value=Number.POSITIVE_INFINITY;break}const a={state:new nle.MetadataValidationState,cardinality:n,canContainUndefs:e.some(o=>o.canContainUndefs)},s=()=>a.state.invalidate();for(const o of e)o.state.addInvalidateListener(s);return r&&(a.variables=em.unionVariables(e.map(o=>o.variables))),a}async testOperation(e,r){return!0}async runOperation(e,r){const n=(await Promise.all(e.input.map(o=>this.mediatorQueryOperation.mediate({operation:o,context:r})))).map(_4.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new ile.UnionIterator(n.map(o=>o.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(n.map(o=>o.metadata())).then(o=>em.unionMetadata(o,!0))}}}b2.ActorQueryOperationUnion=em;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(b2,t)})(y2);Object.defineProperty(p2,"__esModule",{value:!0});p2.ActorQueryOperationDescribeSubject=void 0;const sle=y2,v4=ft,ole=Wt,ule=yt,A1=Tt,sd=new ule.DataFactory;class cle extends v4.ActorQueryOperationTypedMediated{constructor(e){super(e,"describe")}async testOperation(e,r){return!0}async runOperation(e,r){const n=e.terms.filter(u=>u.termType!=="Variable").map(u=>{const c=[sd.quad(u,sd.variable("__predicate"),sd.variable("__object"))];return c.forEach(d=>d.type="pattern"),{input:{type:A1.Algebra.types.BGP,patterns:c},template:c,type:"construct"}});if(n.length!==e.terms.length){let u=[];e.terms.filter(c=>c.termType==="Variable").forEach((c,l)=>{const d=[sd.quad(c,sd.variable(`__predicate${l}`),sd.variable(`__object${l}`))];d.forEach(h=>h.type="pattern"),u=[...u,...d]}),n.push({input:{type:A1.Algebra.types.JOIN,input:[e.input,{type:A1.Algebra.types.BGP,patterns:u}]},template:u,type:A1.Algebra.types.CONSTRUCT})}const a=(await Promise.all(n.map(u=>this.mediatorQueryOperation.mediate({operation:u,context:r})))).map(v4.ActorQueryOperation.getSafeQuads);return{type:"quads",quadStream:new ole.UnionIterator(a.map(u=>u.quadStream),{autoStart:!1}),metadata:()=>Promise.all(a.map(u=>u.metadata())).then(u=>sle.ActorQueryOperationUnion.unionMetadata(u,!1))}}}p2.ActorQueryOperationDescribeSubject=cle;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(p2,t)})(X7);var oR={},m2={},ay={};Object.defineProperty(ay,"__esModule",{value:!0});ay.BindingsToQuadsIterator=void 0;const w4=Wt,lle=yt,S4=hn,dle=new lle.DataFactory;class Od extends w4.MultiTransformIterator{constructor(e,r){super(r,{autoStart:!1}),this.template=e,this.blankNodeCounter=0}static bindTerm(e,r){return r.termType==="Variable"?e.get(r):r}static bindQuad(e,r){try{return(0,S4.mapTermsNested)(r,n=>{const a=Od.bindTerm(e,n);if(!a)throw new Error("Unbound term");return a})}catch{}}static localizeBlankNode(e,r){return r.termType==="BlankNode"?dle.blankNode(`${r.value}${e}`):r}static localizeQuad(e,r){return(0,S4.mapTermsNested)(r,n=>Od.localizeBlankNode(e,n))}bindTemplate(e,r,n){return r.map(Od.localizeQuad.bind(null,n)).map(s=>Od.bindQuad.bind(null,e)(s)).filter(Boolean)}_createTransformer(e){return new w4.ArrayIterator(this.bindTemplate(e,this.template,this.blankNodeCounter++),{autoStart:!1})}}ay.BindingsToQuadsIterator=Od;Object.defineProperty(m2,"__esModule",{value:!0});m2.ActorQueryOperationConstruct=void 0;const T4=ft,LT=hn,fle=Tt,hle=ay;class uR extends T4.ActorQueryOperationTypedMediated{constructor(e){super(e,"construct")}static getVariables(e){return(0,LT.uniqTerms)([].concat.apply([],e.map(r=>(0,LT.getVariables)((0,LT.getTermsNested)(r)))))}async testOperation(e,r){return!0}async runOperation(e,r){const n=uR.getVariables(e.template),a={type:fle.Algebra.types.PROJECT,input:e.input,variables:n},s=T4.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:a,context:r})),o=new hle.BindingsToQuadsIterator(e.template,s.bindingsStream);return{metadata:()=>s.metadata().then(c=>({...c,order:void 0,cardinality:{type:c.cardinality.type,value:c.cardinality.value*e.template.length},canContainUndefs:!1,availableOrders:void 0})),quadStream:o,type:"quads"}}}m2.ActorQueryOperationConstruct=uR;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(m2,t),r(ay,t)})(oR);var K7={},g2={},jl={},sy={},_s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.LRUCache=void 0;const od=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,J7=new Set,OO=typeof process=="object"&&process?process:{},Y7=(t,e,r,n)=>{typeof OO.emitWarning=="function"?OO.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)};let tm=globalThis.AbortController,E4=globalThis.AbortSignal;var _8;if(typeof tm>"u"){E4=class{constructor(){Lr(this,"onabort");Lr(this,"_onabort",[]);Lr(this,"reason");Lr(this,"aborted",!1)}addEventListener(n,a){this._onabort.push(a)}},tm=class{constructor(){Lr(this,"signal",new E4);e()}abort(n){var a,s;if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(const o of this.signal._onabort)o(n);(s=(a=this.signal).onabort)==null||s.call(a,n)}}};let t=((_8=OO.env)==null?void 0:_8.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,Y7("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const ple=t=>!J7.has(t),vu=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Z7=t=>vu(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?gb:null:null;class gb extends Array{constructor(e){super(e),this.fill(0)}}var Ld;const Wc=class Wc{constructor(e,r){Lr(this,"heap");Lr(this,"length");if(!ue(Wc,Ld))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}static create(e){const r=Z7(e);if(!r)return[];dt(Wc,Ld,!0);const n=new Wc(e,r);return dt(Wc,Ld,!1),n}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};Ld=new WeakMap,xt(Wc,Ld,!1);let AO=Wc;var Xa,ea,Ka,Ja,Bd,gn,Ya,on,xr,wt,Ti,ta,Jn,On,Za,An,es,ts,ra,rs,Lu,Ei,Qp,RO,Zc,Mo,Gp,na,am,eL,el,$d,zp,js,wu,Cs,Su,Wp,IO,nve,Ud,_b,qd,vb,mr,Ar,Xp,PO,tl,rp;const $R=class $R{constructor(e){xt(this,Qp);xt(this,am);xt(this,js);xt(this,Cs);xt(this,Wp);xt(this,Ud);xt(this,qd);xt(this,mr);xt(this,Xp);xt(this,tl);xt(this,Xa,void 0);xt(this,ea,void 0);xt(this,Ka,void 0);xt(this,Ja,void 0);xt(this,Bd,void 0);Lr(this,"ttl");Lr(this,"ttlResolution");Lr(this,"ttlAutopurge");Lr(this,"updateAgeOnGet");Lr(this,"updateAgeOnHas");Lr(this,"allowStale");Lr(this,"noDisposeOnSet");Lr(this,"noUpdateTTL");Lr(this,"maxEntrySize");Lr(this,"sizeCalculation");Lr(this,"noDeleteOnFetchRejection");Lr(this,"noDeleteOnStaleGet");Lr(this,"allowStaleOnFetchAbort");Lr(this,"allowStaleOnFetchRejection");Lr(this,"ignoreFetchAbort");xt(this,gn,void 0);xt(this,Ya,void 0);xt(this,on,void 0);xt(this,xr,void 0);xt(this,wt,void 0);xt(this,Ti,void 0);xt(this,ta,void 0);xt(this,Jn,void 0);xt(this,On,void 0);xt(this,Za,void 0);xt(this,An,void 0);xt(this,es,void 0);xt(this,ts,void 0);xt(this,ra,void 0);xt(this,rs,void 0);xt(this,Lu,void 0);xt(this,Ei,void 0);xt(this,Zc,()=>{});xt(this,Mo,()=>{});xt(this,Gp,()=>{});xt(this,na,()=>!1);xt(this,el,e=>{});xt(this,$d,(e,r,n)=>{});xt(this,zp,(e,r,n,a)=>{if(n||a)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Lr(this,nve,"LRUCache");const{max:r=0,ttl:n,ttlResolution:a=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:u,allowStale:c,dispose:l,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:f,maxSize:p=0,maxEntrySize:b=0,sizeCalculation:y,fetchMethod:S,noDeleteOnFetchRejection:w,noDeleteOnStaleGet:I,allowStaleOnFetchRejection:O,allowStaleOnFetchAbort:T,ignoreFetchAbort:x}=e;if(r!==0&&!vu(r))throw new TypeError("max option must be a nonnegative integer");const P=r?Z7(r):Array;if(!P)throw new Error("invalid max value: "+r);if(dt(this,Xa,r),dt(this,ea,p),this.maxEntrySize=b||ue(this,ea),this.sizeCalculation=y,this.sizeCalculation){if(!ue(this,ea)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(S!==void 0&&typeof S!="function")throw new TypeError("fetchMethod must be a function if specified");if(dt(this,Bd,S),dt(this,Lu,!!S),dt(this,on,new Map),dt(this,xr,new Array(r).fill(void 0)),dt(this,wt,new Array(r).fill(void 0)),dt(this,Ti,new P(r)),dt(this,ta,new P(r)),dt(this,Jn,0),dt(this,On,0),dt(this,Za,AO.create(r)),dt(this,gn,0),dt(this,Ya,0),typeof l=="function"&&dt(this,Ka,l),typeof d=="function"?(dt(this,Ja,d),dt(this,An,[])):(dt(this,Ja,void 0),dt(this,An,void 0)),dt(this,rs,!!ue(this,Ka)),dt(this,Ei,!!ue(this,Ja)),this.noDisposeOnSet=!!h,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!w,this.allowStaleOnFetchRejection=!!O,this.allowStaleOnFetchAbort=!!T,this.ignoreFetchAbort=!!x,this.maxEntrySize!==0){if(ue(this,ea)!==0&&!vu(ue(this,ea)))throw new TypeError("maxSize must be a positive integer if specified");if(!vu(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");st(this,am,eL).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!I,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!u,this.ttlResolution=vu(a)||a===0?a:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!vu(this.ttl))throw new TypeError("ttl must be a positive integer if specified");st(this,Qp,RO).call(this)}if(ue(this,Xa)===0&&this.ttl===0&&ue(this,ea)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!ue(this,Xa)&&!ue(this,ea)){const B="LRU_CACHE_UNBOUNDED";ple(B)&&(J7.add(B),Y7("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",B,$R))}}static unsafeExposeInternals(e){return{starts:ue(e,ts),ttls:ue(e,ra),sizes:ue(e,es),keyMap:ue(e,on),keyList:ue(e,xr),valList:ue(e,wt),next:ue(e,Ti),prev:ue(e,ta),get head(){return ue(e,Jn)},get tail(){return ue(e,On)},free:ue(e,Za),isBackgroundFetch:r=>{var n;return st(n=e,mr,Ar).call(n,r)},backgroundFetch:(r,n,a,s)=>{var o;return st(o=e,qd,vb).call(o,r,n,a,s)},moveToTail:r=>{var n;return st(n=e,tl,rp).call(n,r)},indexes:r=>{var n;return st(n=e,js,wu).call(n,r)},rindexes:r=>{var n;return st(n=e,Cs,Su).call(n,r)},isStale:r=>{var n;return ue(n=e,na).call(n,r)}}}get max(){return ue(this,Xa)}get maxSize(){return ue(this,ea)}get calculatedSize(){return ue(this,Ya)}get size(){return ue(this,gn)}get fetchMethod(){return ue(this,Bd)}get dispose(){return ue(this,Ka)}get disposeAfter(){return ue(this,Ja)}getRemainingTTL(e){return ue(this,on).has(e)?1/0:0}*entries(){for(const e of st(this,js,wu).call(this))ue(this,wt)[e]!==void 0&&ue(this,xr)[e]!==void 0&&!st(this,mr,Ar).call(this,ue(this,wt)[e])&&(yield[ue(this,xr)[e],ue(this,wt)[e]])}*rentries(){for(const e of st(this,Cs,Su).call(this))ue(this,wt)[e]!==void 0&&ue(this,xr)[e]!==void 0&&!st(this,mr,Ar).call(this,ue(this,wt)[e])&&(yield[ue(this,xr)[e],ue(this,wt)[e]])}*keys(){for(const e of st(this,js,wu).call(this)){const r=ue(this,xr)[e];r!==void 0&&!st(this,mr,Ar).call(this,ue(this,wt)[e])&&(yield r)}}*rkeys(){for(const e of st(this,Cs,Su).call(this)){const r=ue(this,xr)[e];r!==void 0&&!st(this,mr,Ar).call(this,ue(this,wt)[e])&&(yield r)}}*values(){for(const e of st(this,js,wu).call(this))ue(this,wt)[e]!==void 0&&!st(this,mr,Ar).call(this,ue(this,wt)[e])&&(yield ue(this,wt)[e])}*rvalues(){for(const e of st(this,Cs,Su).call(this))ue(this,wt)[e]!==void 0&&!st(this,mr,Ar).call(this,ue(this,wt)[e])&&(yield ue(this,wt)[e])}[Symbol.iterator](){return this.entries()}find(e,r={}){for(const n of st(this,js,wu).call(this)){const a=ue(this,wt)[n],s=st(this,mr,Ar).call(this,a)?a.__staleWhileFetching:a;if(s!==void 0&&e(s,ue(this,xr)[n],this))return this.get(ue(this,xr)[n],r)}}forEach(e,r=this){for(const n of st(this,js,wu).call(this)){const a=ue(this,wt)[n],s=st(this,mr,Ar).call(this,a)?a.__staleWhileFetching:a;s!==void 0&&e.call(r,s,ue(this,xr)[n],this)}}rforEach(e,r=this){for(const n of st(this,Cs,Su).call(this)){const a=ue(this,wt)[n],s=st(this,mr,Ar).call(this,a)?a.__staleWhileFetching:a;s!==void 0&&e.call(r,s,ue(this,xr)[n],this)}}purgeStale(){let e=!1;for(const r of st(this,Cs,Su).call(this,{allowStale:!0}))ue(this,na).call(this,r)&&(this.delete(ue(this,xr)[r]),e=!0);return e}info(e){const r=ue(this,on).get(e);if(r===void 0)return;const n=ue(this,wt)[r],a=st(this,mr,Ar).call(this,n)?n.__staleWhileFetching:n;if(a===void 0)return;const s={value:a};if(ue(this,ra)&&ue(this,ts)){const o=ue(this,ra)[r],u=ue(this,ts)[r];if(o&&u){const c=o-(od.now()-u);s.ttl=c,s.start=Date.now()}}return ue(this,es)&&(s.size=ue(this,es)[r]),s}dump(){const e=[];for(const r of st(this,js,wu).call(this,{allowStale:!0})){const n=ue(this,xr)[r],a=ue(this,wt)[r],s=st(this,mr,Ar).call(this,a)?a.__staleWhileFetching:a;if(s===void 0||n===void 0)continue;const o={value:s};if(ue(this,ra)&&ue(this,ts)){o.ttl=ue(this,ra)[r];const u=od.now()-ue(this,ts)[r];o.start=Math.floor(Date.now()-u)}ue(this,es)&&(o.size=ue(this,es)[r]),e.unshift([n,o])}return e}load(e){this.clear();for(const[r,n]of e){if(n.start){const a=Date.now()-n.start;n.start=od.now()-a}this.set(r,n.value,n)}}set(e,r,n={}){var f,p,b,y,S;if(r===void 0)return this.delete(e),this;const{ttl:a=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:u=this.sizeCalculation,status:c}=n;let{noUpdateTTL:l=this.noUpdateTTL}=n;const d=ue(this,zp).call(this,e,r,n.size||0,u);if(this.maxEntrySize&&d>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(e),this;let h=ue(this,gn)===0?void 0:ue(this,on).get(e);if(h===void 0)h=ue(this,gn)===0?ue(this,On):ue(this,Za).length!==0?ue(this,Za).pop():ue(this,gn)===ue(this,Xa)?st(this,Ud,_b).call(this,!1):ue(this,gn),ue(this,xr)[h]=e,ue(this,wt)[h]=r,ue(this,on).set(e,h),ue(this,Ti)[ue(this,On)]=h,ue(this,ta)[h]=ue(this,On),dt(this,On,h),Ly(this,gn)._++,ue(this,$d).call(this,h,d,c),c&&(c.set="add"),l=!1;else{st(this,tl,rp).call(this,h);const w=ue(this,wt)[h];if(r!==w){if(ue(this,Lu)&&st(this,mr,Ar).call(this,w)){w.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:I}=w;I!==void 0&&!o&&(ue(this,rs)&&((f=ue(this,Ka))==null||f.call(this,I,e,"set")),ue(this,Ei)&&((p=ue(this,An))==null||p.push([I,e,"set"])))}else o||(ue(this,rs)&&((b=ue(this,Ka))==null||b.call(this,w,e,"set")),ue(this,Ei)&&((y=ue(this,An))==null||y.push([w,e,"set"])));if(ue(this,el).call(this,h),ue(this,$d).call(this,h,d,c),ue(this,wt)[h]=r,c){c.set="replace";const I=w&&st(this,mr,Ar).call(this,w)?w.__staleWhileFetching:w;I!==void 0&&(c.oldValue=I)}}else c&&(c.set="update")}if(a!==0&&!ue(this,ra)&&st(this,Qp,RO).call(this),ue(this,ra)&&(l||ue(this,Gp).call(this,h,a,s),c&&ue(this,Mo).call(this,c,h)),!o&&ue(this,Ei)&&ue(this,An)){const w=ue(this,An);let I;for(;I=w==null?void 0:w.shift();)(S=ue(this,Ja))==null||S.call(this,...I)}return this}pop(){var e;try{for(;ue(this,gn);){const r=ue(this,wt)[ue(this,Jn)];if(st(this,Ud,_b).call(this,!0),st(this,mr,Ar).call(this,r)){if(r.__staleWhileFetching)return r.__staleWhileFetching}else if(r!==void 0)return r}}finally{if(ue(this,Ei)&&ue(this,An)){const r=ue(this,An);let n;for(;n=r==null?void 0:r.shift();)(e=ue(this,Ja))==null||e.call(this,...n)}}}has(e,r={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:a}=r,s=ue(this,on).get(e);if(s!==void 0){const o=ue(this,wt)[s];if(st(this,mr,Ar).call(this,o)&&o.__staleWhileFetching===void 0)return!1;if(ue(this,na).call(this,s))a&&(a.has="stale",ue(this,Mo).call(this,a,s));else return n&&ue(this,Zc).call(this,s),a&&(a.has="hit",ue(this,Mo).call(this,a,s)),!0}else a&&(a.has="miss");return!1}peek(e,r={}){const{allowStale:n=this.allowStale}=r,a=ue(this,on).get(e);if(a===void 0||!n&&ue(this,na).call(this,a))return;const s=ue(this,wt)[a];return st(this,mr,Ar).call(this,s)?s.__staleWhileFetching:s}async fetch(e,r={}){const{allowStale:n=this.allowStale,updateAgeOnGet:a=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:u=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:y,forceRefresh:S=!1,status:w,signal:I}=r;if(!ue(this,Lu))return w&&(w.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:a,noDeleteOnStaleGet:s,status:w});const O={allowStale:n,updateAgeOnGet:a,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:u,size:c,sizeCalculation:l,noUpdateTTL:d,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:b,ignoreFetchAbort:p,status:w,signal:I};let T=ue(this,on).get(e);if(T===void 0){w&&(w.fetch="miss");const x=st(this,qd,vb).call(this,e,T,O,y);return x.__returned=x}else{const x=ue(this,wt)[T];if(st(this,mr,Ar).call(this,x)){const D=n&&x.__staleWhileFetching!==void 0;return w&&(w.fetch="inflight",D&&(w.returnedStale=!0)),D?x.__staleWhileFetching:x.__returned=x}const P=ue(this,na).call(this,T);if(!S&&!P)return w&&(w.fetch="hit"),st(this,tl,rp).call(this,T),a&&ue(this,Zc).call(this,T),w&&ue(this,Mo).call(this,w,T),x;const B=st(this,qd,vb).call(this,e,T,O,y),N=B.__staleWhileFetching!==void 0&&n;return w&&(w.fetch=P?"stale":"refresh",N&&P&&(w.returnedStale=!0)),N?B.__staleWhileFetching:B.__returned=B}}get(e,r={}){const{allowStale:n=this.allowStale,updateAgeOnGet:a=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=r,u=ue(this,on).get(e);if(u!==void 0){const c=ue(this,wt)[u],l=st(this,mr,Ar).call(this,c);return o&&ue(this,Mo).call(this,o,u),ue(this,na).call(this,u)?(o&&(o.get="stale"),l?(o&&n&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?c.__staleWhileFetching:void 0):(s||this.delete(e),o&&n&&(o.returnedStale=!0),n?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(st(this,tl,rp).call(this,u),a&&ue(this,Zc).call(this,u),c))}else o&&(o.get="miss")}delete(e){var n,a,s,o;let r=!1;if(ue(this,gn)!==0){const u=ue(this,on).get(e);if(u!==void 0)if(r=!0,ue(this,gn)===1)this.clear();else{ue(this,el).call(this,u);const c=ue(this,wt)[u];if(st(this,mr,Ar).call(this,c)?c.__abortController.abort(new Error("deleted")):(ue(this,rs)||ue(this,Ei))&&(ue(this,rs)&&((n=ue(this,Ka))==null||n.call(this,c,e,"delete")),ue(this,Ei)&&((a=ue(this,An))==null||a.push([c,e,"delete"]))),ue(this,on).delete(e),ue(this,xr)[u]=void 0,ue(this,wt)[u]=void 0,u===ue(this,On))dt(this,On,ue(this,ta)[u]);else if(u===ue(this,Jn))dt(this,Jn,ue(this,Ti)[u]);else{const l=ue(this,ta)[u];ue(this,Ti)[l]=ue(this,Ti)[u];const d=ue(this,Ti)[u];ue(this,ta)[d]=ue(this,ta)[u]}Ly(this,gn)._--,ue(this,Za).push(u)}}if(ue(this,Ei)&&((s=ue(this,An))!=null&&s.length)){const u=ue(this,An);let c;for(;c=u==null?void 0:u.shift();)(o=ue(this,Ja))==null||o.call(this,...c)}return r}clear(){var e,r,n;for(const a of st(this,Cs,Su).call(this,{allowStale:!0})){const s=ue(this,wt)[a];if(st(this,mr,Ar).call(this,s))s.__abortController.abort(new Error("deleted"));else{const o=ue(this,xr)[a];ue(this,rs)&&((e=ue(this,Ka))==null||e.call(this,s,o,"delete")),ue(this,Ei)&&((r=ue(this,An))==null||r.push([s,o,"delete"]))}}if(ue(this,on).clear(),ue(this,wt).fill(void 0),ue(this,xr).fill(void 0),ue(this,ra)&&ue(this,ts)&&(ue(this,ra).fill(0),ue(this,ts).fill(0)),ue(this,es)&&ue(this,es).fill(0),dt(this,Jn,0),dt(this,On,0),ue(this,Za).length=0,dt(this,Ya,0),dt(this,gn,0),ue(this,Ei)&&ue(this,An)){const a=ue(this,An);let s;for(;s=a==null?void 0:a.shift();)(n=ue(this,Ja))==null||n.call(this,...s)}}};nve=Symbol.toStringTag,Xa=new WeakMap,ea=new WeakMap,Ka=new WeakMap,Ja=new WeakMap,Bd=new WeakMap,gn=new WeakMap,Ya=new WeakMap,on=new WeakMap,xr=new WeakMap,wt=new WeakMap,Ti=new WeakMap,ta=new WeakMap,Jn=new WeakMap,On=new WeakMap,Za=new WeakMap,An=new WeakMap,es=new WeakMap,ts=new WeakMap,ra=new WeakMap,rs=new WeakMap,Lu=new WeakMap,Ei=new WeakMap,Qp=new WeakSet,RO=function(){const e=new gb(ue(this,Xa)),r=new gb(ue(this,Xa));dt(this,ra,e),dt(this,ts,r),dt(this,Gp,(s,o,u=od.now())=>{if(r[s]=o!==0?u:0,e[s]=o,o!==0&&this.ttlAutopurge){const c=setTimeout(()=>{ue(this,na).call(this,s)&&this.delete(ue(this,xr)[s])},o+1);c.unref&&c.unref()}}),dt(this,Zc,s=>{r[s]=e[s]!==0?od.now():0}),dt(this,Mo,(s,o)=>{if(e[o]){const u=e[o],c=r[o];if(!u||!c)return;s.ttl=u,s.start=c,s.now=n||a();const l=s.now-c;s.remainingTTL=u-l}});let n=0;const a=()=>{const s=od.now();if(this.ttlResolution>0){n=s;const o=setTimeout(()=>n=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{const o=ue(this,on).get(s);if(o===void 0)return 0;const u=e[o],c=r[o];if(!u||!c)return 1/0;const l=(n||a())-c;return u-l},dt(this,na,s=>{const o=r[s],u=e[s];return!!u&&!!o&&(n||a())-o>u})},Zc=new WeakMap,Mo=new WeakMap,Gp=new WeakMap,na=new WeakMap,am=new WeakSet,eL=function(){const e=new gb(ue(this,Xa));dt(this,Ya,0),dt(this,es,e),dt(this,el,r=>{dt(this,Ya,ue(this,Ya)-e[r]),e[r]=0}),dt(this,zp,(r,n,a,s)=>{if(st(this,mr,Ar).call(this,n))return 0;if(!vu(a))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(a=s(n,r),!vu(a))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return a}),dt(this,$d,(r,n,a)=>{if(e[r]=n,ue(this,ea)){const s=ue(this,ea)-e[r];for(;ue(this,Ya)>s;)st(this,Ud,_b).call(this,!0)}dt(this,Ya,ue(this,Ya)+e[r]),a&&(a.entrySize=n,a.totalCalculatedSize=ue(this,Ya))})},el=new WeakMap,$d=new WeakMap,zp=new WeakMap,js=new WeakSet,wu=function*({allowStale:e=this.allowStale}={}){if(ue(this,gn))for(let r=ue(this,On);!(!st(this,Wp,IO).call(this,r)||((e||!ue(this,na).call(this,r))&&(yield r),r===ue(this,Jn)));)r=ue(this,ta)[r]},Cs=new WeakSet,Su=function*({allowStale:e=this.allowStale}={}){if(ue(this,gn))for(let r=ue(this,Jn);!(!st(this,Wp,IO).call(this,r)||((e||!ue(this,na).call(this,r))&&(yield r),r===ue(this,On)));)r=ue(this,Ti)[r]},Wp=new WeakSet,IO=function(e){return e!==void 0&&ue(this,on).get(ue(this,xr)[e])===e},Ud=new WeakSet,_b=function(e){var s,o;const r=ue(this,Jn),n=ue(this,xr)[r],a=ue(this,wt)[r];return ue(this,Lu)&&st(this,mr,Ar).call(this,a)?a.__abortController.abort(new Error("evicted")):(ue(this,rs)||ue(this,Ei))&&(ue(this,rs)&&((s=ue(this,Ka))==null||s.call(this,a,n,"evict")),ue(this,Ei)&&((o=ue(this,An))==null||o.push([a,n,"evict"]))),ue(this,el).call(this,r),e&&(ue(this,xr)[r]=void 0,ue(this,wt)[r]=void 0,ue(this,Za).push(r)),ue(this,gn)===1?(dt(this,Jn,dt(this,On,0)),ue(this,Za).length=0):dt(this,Jn,ue(this,Ti)[r]),ue(this,on).delete(n),Ly(this,gn)._--,r},qd=new WeakSet,vb=function(e,r,n,a){const s=r===void 0?void 0:ue(this,wt)[r];if(st(this,mr,Ar).call(this,s))return s;const o=new tm,{signal:u}=n;u==null||u.addEventListener("abort",()=>o.abort(u.reason),{signal:o.signal});const c={signal:o.signal,options:n,context:a},l=(y,S=!1)=>{const{aborted:w}=o.signal,I=n.ignoreFetchAbort&&y!==void 0;if(n.status&&(w&&!S?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,I&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),w&&!I&&!S)return h(o.signal.reason);const O=p;return ue(this,wt)[r]===p&&(y===void 0?O.__staleWhileFetching?ue(this,wt)[r]=O.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,y,c.options))),y},d=y=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=y),h(y)),h=y=>{const{aborted:S}=o.signal,w=S&&n.allowStaleOnFetchAbort,I=w||n.allowStaleOnFetchRejection,O=I||n.noDeleteOnFetchRejection,T=p;if(ue(this,wt)[r]===p&&(!O||T.__staleWhileFetching===void 0?this.delete(e):w||(ue(this,wt)[r]=T.__staleWhileFetching)),I)return n.status&&T.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),T.__staleWhileFetching;if(T.__returned===T)throw y},f=(y,S)=>{var I;const w=(I=ue(this,Bd))==null?void 0:I.call(this,e,s,c);w&&w instanceof Promise&&w.then(O=>y(O===void 0?void 0:O),S),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(y(void 0),n.allowStaleOnFetchAbort&&(y=O=>l(O,!0)))})};n.status&&(n.status.fetchDispatched=!0);const p=new Promise(f).then(l,d),b=Object.assign(p,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(e,b,{...c.options,status:void 0}),r=ue(this,on).get(e)):ue(this,wt)[r]=b,b},mr=new WeakSet,Ar=function(e){if(!ue(this,Lu))return!1;const r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof tm},Xp=new WeakSet,PO=function(e,r){ue(this,ta)[r]=e,ue(this,Ti)[e]=r},tl=new WeakSet,rp=function(e){e!==ue(this,On)&&(e===ue(this,Jn)?dt(this,Jn,ue(this,Ti)[e]):st(this,Xp,PO).call(this,ue(this,ta)[e],ue(this,Ti)[e]),st(this,Xp,PO).call(this,ue(this,On),e),dt(this,On,e))};let xO=$R;_s.LRUCache=xO;var oy={},BT={},Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.asTermType=Ni.ExpressionType=void 0;var O4;(function(t){t.Aggregate="aggregate",t.Existence="existence",t.Named="named",t.Operator="operator",t.SpecialOperator="specialOperator",t.Term="term",t.Variable="variable",t.AsyncExtension="asyncExtension",t.SyncExtension="syncExtension"})(O4||(Ni.ExpressionType=O4={}));function yle(t){if(t==="namedNode"||t==="literal"||t==="blankNode"||t==="quad")return t}Ni.asTermType=yle;var _2={};Object.defineProperty(_2,"__esModule",{value:!0});_2.Variable=void 0;const ble=Ni;class mle{constructor(e){this.expressionType=ble.ExpressionType.Variable,this.name=e}}_2.Variable=mle;var bt={},bh={},li={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NamedOperators=t.SetFunctions=t.SetFunction=t.Operators=t.SpecialOperators=t.RegularOperators=t.SpecialOperator=t.RegularOperator=t.TypeURL=t.TypeAlias=void 0;var e;(function(o){o.SPARQL_NUMERIC="SPARQL_NUMERIC",o.SPARQL_STRINGLY="SPARQL_STRINGLY"})(e||(t.TypeAlias=e={}));var r;(function(o){o.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",o.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",o.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",o.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",o.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",o.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",o.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",o.XSD_G_MONTH="http://www.w3.org/2001/XMLSchema#gMonth",o.XSD_G_MONTHDAY="http://www.w3.org/2001/XMLSchema#gMonthDay",o.XSD_G_YEAR="http://www.w3.org/2001/XMLSchema#gYear",o.XSD_G_YEAR_MONTH="http://www.w3.org/2001/XMLSchema#gYearMonth",o.XSD_TIME="http://www.w3.org/2001/XMLSchema#time",o.XSD_G_DAY="http://www.w3.org/2001/XMLSchema#gDay",o.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",o.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",o.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",o.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",o.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",o.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",o.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",o.XSD_INT="http://www.w3.org/2001/XMLSchema#int",o.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",o.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",o.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",o.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",o.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",o.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",o.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",o.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",o.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",o.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",o.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",o.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",o.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",o.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",o.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",o.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",o.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",o.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",o.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",o.XSD_DAY_TIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration"})(r||(t.TypeURL=r={}));var n;(function(o){o.NOT="!",o.UMINUS="uminus",o.UPLUS="uplus",o.EQUAL="=",o.NOT_EQUAL="!=",o.LT="<",o.GT=">",o.LTE="<=",o.GTE=">=",o.MULTIPLICATION="*",o.DIVISION="/",o.ADDITION="+",o.SUBTRACTION="-",o.IS_IRI="isiri",o.IS_URI="isuri",o.IS_BLANK="isblank",o.IS_LITERAL="isliteral",o.IS_NUMERIC="isnumeric",o.STR="str",o.LANG="lang",o.DATATYPE="datatype",o.IRI="iri",o.URI="uri",o.STRDT="strdt",o.STRLANG="strlang",o.UUID="uuid",o.STRUUID="struuid",o.STRLEN="strlen",o.SUBSTR="substr",o.UCASE="ucase",o.LCASE="lcase",o.STRSTARTS="strstarts",o.STRENDS="strends",o.CONTAINS="contains",o.STRBEFORE="strbefore",o.STRAFTER="strafter",o.ENCODE_FOR_URI="encode_for_uri",o.LANG_MATCHES="langmatches",o.REGEX="regex",o.REPLACE="replace",o.ABS="abs",o.ROUND="round",o.CEIL="ceil",o.FLOOR="floor",o.RAND="rand",o.NOW="now",o.YEAR="year",o.MONTH="month",o.DAY="day",o.HOURS="hours",o.MINUTES="minutes",o.SECONDS="seconds",o.TIMEZONE="timezone",o.TZ="tz",o.MD5="md5",o.SHA1="sha1",o.SHA256="sha256",o.SHA384="sha384",o.SHA512="sha512",o.TRIPLE="triple",o.SUBJECT="subject",o.PREDICATE="predicate",o.OBJECT="object",o.IS_TRIPLE="istriple"})(n||(t.RegularOperator=n={}));var a;(function(o){o.BOUND="bound",o.IF="if",o.COALESCE="coalesce",o.LOGICAL_OR="||",o.LOGICAL_AND="&&",o.SAME_TERM="sameterm",o.IN="in",o.NOT_IN="notin",o.CONCAT="concat",o.BNODE="bnode"})(a||(t.SpecialOperator=a={})),t.RegularOperators=new Set(Object.values(n)),t.SpecialOperators=new Set(Object.values(a)),t.Operators=new Set([...t.RegularOperators,...t.SpecialOperators]);var s;(function(o){o.COUNT="count",o.SUM="sum",o.MIN="min",o.MAX="max",o.AVG="avg",o.GROUP_CONCAT="group_concat",o.SAMPLE="sample"})(s||(t.SetFunction=s={})),t.SetFunctions=new Set(Object.values(s)),t.NamedOperators=new Set([r.XSD_STRING,r.XSD_FLOAT,r.XSD_DOUBLE,r.XSD_DECIMAL,r.XSD_INTEGER,r.XSD_DATE_TIME,r.XSD_DATE,r.XSD_BOOLEAN,r.XSD_TIME,r.XSD_DURATION,r.XSD_DAY_TIME_DURATION,r.XSD_YEAR_MONTH_DURATION])})(li);var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.NoExistenceHook=Ze.NoAggregator=Ze.ExtensionFunctionError=Ze.UnknownNamedOperator=Ze.UnknownOperator=Ze.InvalidTermType=Ze.InvalidExpressionType=Ze.InvalidExpression=Ze.InvalidArity=Ze.UnexpectedError=Ze.ParseError=Ze.EmptyAggregateError=Ze.IncompatibleLanguageOperation=Ze.InvalidTimezoneCall=Ze.CastError=Ze.InvalidCompareArgumentTypes=Ze.InvalidArgumentTypes=Ze.InError=Ze.CoalesceError=Ze.RDFEqualTypeError=Ze.EBVCoercionError=Ze.UnboundVariableError=Ze.InvalidLexicalForm=Ze.isExpressionError=Ze.ExpressionError=void 0;class Mi extends Error{}Ze.ExpressionError=Mi;function gle(t){return t instanceof Mi}Ze.isExpressionError=gle;class _le extends Mi{constructor(e){super(`Invalid lexical form '${di(e)}'`),this.arg=e}}Ze.InvalidLexicalForm=_le;class vle extends Mi{constructor(e,r){super(`Unbound variable '${di(e)}'`),this.variable=e,this.bindings=r}}Ze.UnboundVariableError=vle;class wle extends Mi{constructor(e){super(`Cannot coerce term to EBV '${di(e)}'`),this.arg=e}}Ze.EBVCoercionError=wle;class Sle extends Mi{constructor(e){super("Equality test for literals with unsupported datatypes"),this.args=e}}Ze.RDFEqualTypeError=Sle;class Tle extends Mi{constructor(e){super("All COALESCE arguments threw errors"),this.errors=e}}Ze.CoalesceError=Tle;class Ele extends Mi{constructor(e){super(`Some argument to IN errorred and none where equal. ${e.map(r=>`(${r.toString()}) `).join("and ")}`),this.errors=e}}Ze.InError=Ele;class Ole extends Mi{constructor(e,r){super(`Argument types not valid for operator: '${di(r)}' with '${di(e)}`),this.args=e,this.op=r}}Ze.InvalidArgumentTypes=Ole;class Ale extends Mi{constructor(e,r){super(`Compared argument types are supported: '${e.termType}' and '${r.termType}'`),this.arg0=e,this.arg1=r}}Ze.InvalidCompareArgumentTypes=Ale;class xle extends Mi{constructor(e,r){super(`Invalid cast: '${di(e)}' to '${di(r)}'`),this.arg=e}}Ze.CastError=xle;class Rle extends Mi{constructor(e){super(`TIMEZONE call on ${e} which has no timezone`),this.dateString=e}}Ze.InvalidTimezoneCall=Rle;class Ile extends Mi{constructor(e,r){super(`Operation on incompatible language literals '${di(e)}' and '${di(r)}'`),this.arg1=e,this.arg2=r}}Ze.IncompatibleLanguageOperation=Ile;class Ple extends Mi{constructor(){super("Empty aggregate expression")}}Ze.EmptyAggregateError=Ple;class Dle extends Mi{constructor(e,r){super(`Failed to parse ${e} as ${r}.`)}}Ze.ParseError=Dle;class Nle extends Error{constructor(e,r){super(`Programmer Error '${e}'`),this.payload=r}}Ze.UnexpectedError=Nle;class jle extends Error{constructor(e,r){super(`The number of args does not match the arity of the operator '${di(r)}'.`),this.args=e,this.op=r}}Ze.InvalidArity=jle;class Cle extends Error{constructor(e){super(`Invalid SPARQL Expression '${di(e)}'`)}}Ze.InvalidExpression=Cle;class Fle extends Error{constructor(e){super(`Invalid expression type for SPARQL Expression '${di(e)}'`),this.expr=e}}Ze.InvalidExpressionType=Fle;class Mle extends Error{constructor(e){super(`Invalid term type for term '${di(e)}'`),this.term=e}}Ze.InvalidTermType=Mle;class Lle extends Error{constructor(e){super(`Unknown operator: '${di(e)}`)}}Ze.UnknownOperator=Lle;class Ble extends Error{constructor(e){super(`Unknown named operator: '${di(e)}'`)}}Ze.UnknownNamedOperator=Ble;class $le extends Error{constructor(e,r){r instanceof Error?super(`Error thrown in ${e}: ${r.message}${r.stack?`
${r.stack}`:""}`):super(`Error thrown in ${e}`)}}Ze.ExtensionFunctionError=$le;class Ule extends Error{constructor(e){super(`Aggregate expression ${di(e)} found, but no aggregate hook provided.`)}}Ze.NoAggregator=Ule;class qle extends Error{constructor(){super("EXISTS found, but no existence hook provided.")}}Ze.NoExistenceHook=qle;function di(t){return JSON.stringify(t)}var Xr={},Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.extractTimeZone=Mt.extractRawTimeZone=Mt.dayTimeDurationsToSeconds=Mt.yearMonthDurationsToMonths=Mt.trimToDayTimeDuration=Mt.trimToYearMonthDuration=Mt.toUTCDate=Mt.toJSDate=Mt.negateDuration=Mt.toDateTimeRepresentation=Mt.defaultedDateTimeRepresentation=Mt.simplifyDurationRepresentation=Mt.defaultedDurationRepresentation=Mt.defaultedYearMonthDurationRepresentation=Mt.defaultedDayTimeDurationRepresentation=void 0;function tL(t){return{day:t.day||0,hours:t.hours||0,minutes:t.minutes||0,seconds:t.seconds||0}}Mt.defaultedDayTimeDurationRepresentation=tL;function rL(t){return{year:t.year||0,month:t.month||0}}Mt.defaultedYearMonthDurationRepresentation=rL;function nL(t){return{...tL(t),...rL(t)}}Mt.defaultedDurationRepresentation=nL;function Vle(t){const e=nL(t),r={},n=e.year+Math.trunc(e.month/12);n&&(r.year=n,e.month%=12),e.month&&(r.month=e.month);const a=e.day+Math.trunc(e.hours/24)+Math.trunc(e.minutes/(24*60))+Math.trunc(e.seconds/(24*60*60));a&&(r.day=a,e.hours%=24,e.minutes%=24*60,e.seconds%=24*60*60);const s=e.hours+Math.trunc(e.minutes/60)+Math.trunc(e.seconds/(60*60));s&&(r.hours=s,e.minutes%=60,e.seconds%=60*60);const o=e.minutes+Math.trunc(e.seconds/60);return o&&(r.minutes=o,e.seconds%=60),e.seconds&&(r.seconds=e.seconds),r}Mt.simplifyDurationRepresentation=Vle;function iL(t){return{...t,day:t.day||1,hours:t.hours||0,month:t.month||1,year:t.year||0,seconds:t.seconds||0,minutes:t.minutes||0}}Mt.defaultedDateTimeRepresentation=iL;function Hle({date:t,timeZone:e}){return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hours:t.getHours(),minutes:t.getMinutes(),seconds:t.getSeconds(),zoneHours:e.zoneHours,zoneMinutes:e.zoneMinutes}}Mt.toDateTimeRepresentation=Hle;function kle(t){return{year:t.year!==void 0?-1*t.year:void 0,month:t.month!==void 0?-1*t.month:void 0,day:t.day!==void 0?-1*t.day:void 0,hours:t.hours!==void 0?-1*t.hours:void 0,minutes:t.minutes!==void 0?-1*t.minutes:void 0,seconds:t.seconds!==void 0?-1*t.seconds:void 0}}Mt.negateDuration=kle;function aL(t){const e=new Date(t.year,t.month-1,t.day,t.hours,t.minutes,Math.trunc(t.seconds),t.seconds%1*1e3);return 0<=t.year&&t.year<100&&e.setFullYear(e.getFullYear()-1900),e}Mt.toJSDate=aL;function Qle(t,e){const r=aL(iL(t)),n=r.getTimezoneOffset(),a=t.zoneHours===void 0?e.zoneHours:t.zoneHours,s=t.zoneMinutes===void 0?e.zoneMinutes:t.zoneMinutes;return new Date(r.getTime()-(n+a*60+s)*60*1e3)}Mt.toUTCDate=Qle;function Gle(t){return{year:t.year,month:t.month}}Mt.trimToYearMonthDuration=Gle;function zle(t){return{day:t.day,hours:t.hours,minutes:t.minutes,seconds:t.seconds}}Mt.trimToDayTimeDuration=zle;function Wle(t){return t.year*12+t.month}Mt.yearMonthDurationsToMonths=Wle;function Xle(t){return((t.day*24+t.hours)*60+t.minutes)*60+t.seconds}Mt.dayTimeDurationsToSeconds=Xle;function Kle(t){return/(Z|([+-]\d\d:\d\d))?$/u.exec(t)[0]}Mt.extractRawTimeZone=Kle;function Jle(t){return{zoneHours:t.getTimezoneOffset()/60,zoneMinutes:t.getTimezoneOffset()%60}}Mt.extractTimeZone=Jle;var ko={};Object.defineProperty(ko,"__esModule",{value:!0});ko.elapsedDuration=ko.addDurationToDateTime=ko.maximumDayInMonthFor=void 0;const A4=Mt;function Lo(t,e,r=0){const n=t-r,a=e-r,s=Math.floor(n/a);return{intDiv:s,remainder:t-s*a}}function wb(t,e){const{intDiv:r,remainder:n}=Lo(e,13,1),a=t+r;return[1,3,5,7,8,10,12].includes(n)?31:[4,6,9,11].includes(n)?30:n===2&&(Lo(a,400).remainder===0||Lo(a,100).remainder!==0&&Lo(a,4).remainder===0)?29:28}ko.maximumDayInMonthFor=wb;function Yle(t,e){const r={...t};let n=Lo(t.month+e.month,13,1);for(r.month=n.remainder,r.year=t.year+e.year+n.intDiv,n=Lo(t.seconds+e.seconds,60),r.seconds=n.remainder,n=Lo(t.minutes+e.minutes+n.intDiv,60),r.minutes=n.remainder,n=Lo(t.hours+e.hours+n.intDiv,24),r.hours=n.remainder,r.day=t.day+e.day+n.intDiv;;){let a;if(r.day<1)r.day+=wb(r.year,r.month-1),a=-1;else if(r.day>wb(r.year,r.month))r.day-=wb(r.year,r.month),a=1;else break;n=Lo(r.month+a,13,1),r.month=n.remainder,r.year+=n.intDiv}return r}ko.addDurationToDateTime=Yle;function Zle(t,e,r){const n=(0,A4.toUTCDate)(t,r),a=(0,A4.toUTCDate)(e,r),s=n.getTime()-a.getTime();return{day:Math.floor(s/(1e3*60*60*24)),hours:Math.floor(s%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(s%(1e3*60*60)/(1e3*60)),seconds:s%(1e3*60)}}ko.elapsedDuration=Zle;Object.defineProperty(Xr,"__esModule",{value:!0});Xr.parseDayTimeDuration=Xr.parseYearMonthDuration=Xr.parseDuration=Xr.parseTime=Xr.parseDate=Xr.parseDateTime=Xr.parseXSDInteger=Xr.parseXSDDecimal=Xr.parseXSDFloat=void 0;const ede=Mt,Qo=Ze,tde=ko;function rde(t){const e=Number(t);return Number.isNaN(e)?t==="NaN"?Number.NaN:t==="INF"||t==="+INF"?Number.POSITIVE_INFINITY:t==="-INF"?Number.NEGATIVE_INFINITY:void 0:e}Xr.parseXSDFloat=rde;function nde(t){const e=Number(t);return Number.isNaN(e)?void 0:e}Xr.parseXSDDecimal=nde;function ide(t){const e=Number.parseInt(t,10);return Number.isNaN(e)?void 0:e}Xr.parseXSDInteger=ide;function ade(t){const[e,r]=t.split("T");return{...oL(e),...uL(r)}}Xr.parseDateTime=ade;function sL(t){if(t==="")return{zoneHours:void 0,zoneMinutes:void 0};if(t==="Z")return{zoneHours:0,zoneMinutes:0};const r=t.replace(/^([+|-])(\d\d):(\d\d)$/gu,"$11!$2!$3").split("!").map(n=>Number(n));return{zoneHours:r[0]*r[1],zoneMinutes:r[0]*r[2]}}function oL(t){const e=t.replace(/^(-)?([123456789]*\d{4})-(\d\d)-(\d\d)(Z|([+-]\d\d:\d\d))?$/gu,"$11!$2!$3!$4!$5");if(e===t)throw new Qo.ParseError(t,"date");const r=e.split("!"),n=r.slice(0,-1).map(s=>Number(s)),a={year:n[0]*n[1],month:n[2],day:n[3],...sL(r[4])};if(!(1<=a.month&&a.month<=12)||!(1<=a.day&&a.day<=(0,tde.maximumDayInMonthFor)(a.year,a.month)))throw new Qo.ParseError(t,"date");return a}Xr.parseDate=oL;function uL(t){const e=t.replace(/^(\d\d):(\d\d):(\d\d(\.\d+)?)(Z|([+-]\d\d:\d\d))?$/gu,"$1!$2!$3!$5");if(e===t)throw new Qo.ParseError(t,"time");const r=e.split("!"),n=r.slice(0,-1).map(s=>Number(s)),a={hours:n[0],minutes:n[1],seconds:n[2],...sL(r[3])};if(a.seconds>=60||a.minutes>=60||a.hours>24||a.hours===24&&(a.minutes!==0||a.seconds!==0))throw new Qo.ParseError(t,"time");return a}function sde(t){const e=uL(t);return e.hours%=24,e}Xr.parseTime=sde;function cR(t){const[e,r]=t.split("T"),n=e.replace(/^(-)?P(\d+Y)?(\d+M)?(\d+D)?$/gu,"$11S!$2!$3!$4");if(n===e)throw new Qo.ParseError(t,"duration");const a=n.split("!");if(r!==void 0){const u=r.replace(/^(\d+H)?(\d+M)?(\d+(\.\d+)?S)?$/gu,"$1!$2!$3");if(r===""||r===u)throw new Qo.ParseError(t,"duration");a.push(...u.split("!"))}const s=a.map(u=>u.slice(0,-1));if(!s.slice(1).some(u=>u))throw new Qo.ParseError(t,"duration");const o=Number(s[0]);return(0,ede.simplifyDurationRepresentation)({year:s[1]?o*Number(s[1]):void 0,month:s[2]?o*Number(s[2]):void 0,day:s[3]?o*Number(s[3]):void 0,hours:s[4]?o*Number(s[4]):void 0,minutes:s[5]?o*Number(s[5]):void 0,seconds:s[6]?o*Number(s[6]):void 0})}Xr.parseDuration=cR;function ode(t){const e=cR(t);if(["hours","minutes","seconds","day"].some(r=>!!e[r]))throw new Qo.ParseError(t,"yearMonthDuration");return e}Xr.parseYearMonthDuration=ode;function ude(t){const e=cR(t);if(["year","month"].some(r=>!!e[r]))throw new Qo.ParseError(t,"dayTimeDuration");return e}Xr.parseDayTimeDuration=ude;var $T={},Or={},mh={},x4;function cL(){if(x4)return mh;x4=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.OverloadTree=void 0;const t=ha(),e=v2();let r=class DO{constructor(a,s){this.identifier=a,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=s||0,this.promotionCount=void 0}getSubtree(a){const s=(0,e.asGeneralType)(a);if(s)return this.generalOverloads[s];for(const[o,u]of this.literalOverLoads)if(a===o)return u}getImplementationExact(a){let s=this;for(const o of a)if(s=s.getSubtree(o),!s)return;return s.implementation}search(a,s,o){let u=o[this.identifier],c=0;for(;c<a.length&&(u!=null&&u.cache);){const h=a[c],f=(0,t.isLiteralTermExpression)(h);u=u.cache[f?f.dataType:h.termType],c++}if(c===a.length&&(u!=null&&u.func))return u.func;const l=[],d=0;if(a.length===0)return this.implementation;for(l.push(...this.getSubTreeWithArg(a[d],s).map(h=>({node:h,index:d+1})));l.length>0;){const{index:h,node:f}=l.pop();if(h===a.length&&f.implementation)return this.addToCache(o,a,f.implementation),f.implementation;l.push(...f.getSubTreeWithArg(a[h],s).map(p=>({node:p,index:h+1})))}}addToCache(a,s,o){function u(l,d){return d in l||(l[d]={}),l[d]}let c=u(a,this.identifier);for(const l of s){const d=(0,t.isLiteralTermExpression)(l),h=d?d.dataType:l.termType;c.cache=c.cache||{},c=u(c.cache,h)}c.func=o}addOverload(a,s){this._addOverload([...a],s,0)}_addOverload(a,s,o){var d;const[u,...c]=a;if(!u){(this.promotionCount===void 0||o<=this.promotionCount)&&(this.promotionCount=o,this.implementation=s);return}let l=this.getSubtree(u);if(!l){const h=new DO(this.identifier,this.depth+1),f=(0,e.asGeneralType)(u);f&&(this.generalOverloads[f]=h);const p=(0,e.asOverrideType)(u);p&&this.literalOverLoads.push([p,h]),l=h}l._addOverload(c,s,o),(d=e.typePromotion[u])==null||d.forEach(h=>this.addPromotedOverload(h.typeToPromote,s,h.conversionFunction,c,o))}addPromotedOverload(a,s,o,u,c){let l=this.getSubtree(a);if(!l){const d=new DO(this.identifier,this.depth+1);this.literalOverLoads.push([a,d]),l=d}l._addOverload(u,d=>h=>s(d)([...h.slice(0,this.depth),o(h[this.depth]),...h.slice(this.depth+1,h.length)]),c+1)}getSubTreeWithArg(a,s){const o=[],u=(0,t.isLiteralTermExpression)(a);if(this.generalOverloads.term&&o.push(this.generalOverloads.term),this.generalOverloads[a.termType]&&o.push(this.generalOverloads[a.termType]),u){const c=(0,e.asKnownLiteralType)(u.dataType);let l;c?l=e.superTypeDictTable[c]:l=(0,e.getSuperTypes)(u.dataType,s);const d=this.literalOverLoads.filter(([h,f])=>h in l).map(([h,f])=>[l[h],f]);d.sort(([h,f],[p,b])=>h-p),o.push(...d.map(([h,f])=>f))}return o}};return mh.OverloadTree=r,mh}var R4;function co(){if(R4)return Or;R4=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.expressionToVar=Or.dateTime=Or.langString=Or.string=Or.double=Or.float=Or.decimal=Or.integer=Or.bool=Or.Builder=Or.declare=void 0;const t=yt,e=ha(),r=ha(),n=li,a=li,s=Ze,o=cL(),u=new t.DataFactory;function c(O){return new l(O)}Or.declare=c;class l{constructor(T){this.overloadTree=new o.OverloadTree(T),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}static wrapInvalidLexicalProtected(T){return x=>P=>(P.forEach((B,Q)=>{if(B instanceof r.NonLexicalLiteral)throw new s.InvalidLexicalForm(P[Q].toRDF())}),T(x)(P))}set(T,x,P=!0){return this.overloadTree.addOverload(T,P?l.wrapInvalidLexicalProtected(x):x),this}copy({from:T,to:x}){const P=this.overloadTree.getImplementationExact(T);if(!P)throw new s.UnexpectedError("Tried to copy implementation, but types not found",{from:T,to:x});return this.set(x,P)}onUnary(T,x,P=!0){return this.set([T],B=>([Q])=>x(B)(Q),P)}onUnaryTyped(T,x,P=!0){return this.set([T],B=>([Q])=>x(B)(Q.typedValue),P)}onBinary(T,x,P=!0){return this.set(T,B=>([Q,N])=>x(B)(Q,N),P)}onBinaryTyped(T,x,P=!0){return this.set(T,B=>([Q,N])=>x(B)(Q.typedValue,N.typedValue),P)}onTernaryTyped(T,x,P=!0){return this.set(T,B=>([Q,N,D])=>x(B)(Q.typedValue,N.typedValue,D.typedValue),P)}onTernary(T,x,P=!0){return this.set(T,B=>([Q,N,D])=>x(B)(Q,N,D),P)}onQuaternaryTyped(T,x,P=!0){return this.set(T,B=>([Q,N,D,F])=>x(B)(Q.typedValue,N.typedValue,D.typedValue,F.typedValue),P)}onTerm1(T,x=!1){return this.set(["term"],P=>([B])=>T(P)(B),x)}onTerm3(T){return this.set(["term","term","term"],x=>([P,B,Q])=>T(x)(P,B,Q))}onQuad1(T){return this.set(["quad"],x=>([P])=>T(x)(P))}onLiteral1(T,x=!0){return this.set(["literal"],P=>([B])=>T(P)(B),x)}onBoolean1(T,x=!0){return this.set([n.TypeURL.XSD_BOOLEAN],P=>([B])=>T(P)(B),x)}onBoolean1Typed(T,x=!0){return this.set([n.TypeURL.XSD_BOOLEAN],P=>([B])=>T(P)(B.typedValue),x)}onString1(T,x=!0){return this.set([n.TypeURL.XSD_STRING],P=>([B])=>T(P)(B),x)}onString1Typed(T,x=!0){return this.set([n.TypeURL.XSD_STRING],P=>([B])=>T(P)(B.typedValue),x)}onLangString1(T,x=!0){return this.set([n.TypeURL.RDF_LANG_STRING],P=>([B])=>T(P)(B),x)}onStringly1(T,x=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],P=>([B])=>T(P)(B),x)}onStringly1Typed(T,x=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],P=>([B])=>T(P)(B.typedValue),x)}onNumeric1(T,x=!0){return this.set([n.TypeAlias.SPARQL_NUMERIC],P=>([B])=>T(P)(B),x)}onDateTime1(T,x=!0){return this.set([n.TypeURL.XSD_DATE_TIME],P=>([B])=>T(P)(B),x)}numericConverter(T,x=!0){const P=B=>Q=>T(B)(Q.typedValue);return this.onBinary([a.TypeURL.XSD_INTEGER],B=>Q=>h(P(B)(Q)),x).onBinary([a.TypeURL.XSD_DECIMAL],B=>Q=>f(P(B)(Q)),x).onBinary([a.TypeURL.XSD_FLOAT],B=>Q=>p(P(B)(Q)),x).onBinary([a.TypeURL.XSD_DOUBLE],B=>Q=>b(P(B)(Q)),x)}arithmetic(T,x=!0){const P=B=>(Q,N)=>T(B)(Q.typedValue,N.typedValue);return this.onBinary([a.TypeURL.XSD_INTEGER,a.TypeURL.XSD_INTEGER],B=>(Q,N)=>h(P(B)(Q,N)),x).onBinary([a.TypeURL.XSD_DECIMAL,a.TypeURL.XSD_DECIMAL],B=>(Q,N)=>f(P(B)(Q,N)),x).onBinary([a.TypeURL.XSD_FLOAT,a.TypeURL.XSD_FLOAT],B=>(Q,N)=>p(P(B)(Q,N)),x).onBinary([a.TypeURL.XSD_DOUBLE,a.TypeURL.XSD_DOUBLE],B=>(Q,N)=>b(P(B)(Q,N)),x)}numberTest(T){return this.numeric(x=>([P,B])=>{const Q=T(x)(P.typedValue,B.typedValue);return d(Q)})}stringTest(T,x=!0){return this.set([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],P=>([B,Q])=>{const N=T(P)(B.typedValue,Q.typedValue);return d(N)},x)}booleanTest(T,x=!0){return this.set([n.TypeURL.XSD_BOOLEAN,n.TypeURL.XSD_BOOLEAN],P=>([B,Q])=>{const N=T(P)(B.typedValue,Q.typedValue);return d(N)},x)}dateTimeTest(T,x=!0){return this.set([n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_DATE_TIME],P=>([B,Q])=>{const N=T(P)(B.typedValue,Q.typedValue);return d(N)},x)}numeric(T){return this.set([n.TypeAlias.SPARQL_NUMERIC,n.TypeAlias.SPARQL_NUMERIC],T)}}Or.Builder=l;function d(O){return new e.BooleanLiteral(O)}Or.bool=d;function h(O){return new e.IntegerLiteral(O)}Or.integer=h;function f(O){return new e.DecimalLiteral(O)}Or.decimal=f;function p(O){return new e.FloatLiteral(O)}Or.float=p;function b(O){return new e.DoubleLiteral(O)}Or.double=b;function y(O){return new e.StringLiteral(O)}Or.string=y;function S(O,T){return new e.LangStringLiteral(O,T)}Or.langString=S;function w(O,T){return new e.DateTimeLiteral(O,T)}Or.dateTime=w;function I(O){return u.variable(O.name.slice(1))}return Or.expressionToVar=I,Or}var I4;function v2(){return I4||(I4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.typePromotion=t.isSubTypeOf=t.getSuperTypeDict=t.isInternalSubType=t.asGeneralType=t.asOverrideType=t.asKnownLiteralType=t.asTypeAlias=t.typeAliasCheck=t.extensionTableInit=t.getSuperTypes=t.superTypeDictTable=t.extensionTableInput=void 0;const e=ha(),r=co(),n=li;t.extensionTableInput={[n.TypeURL.XSD_DATE_TIME_STAMP]:n.TypeURL.XSD_DATE_TIME,[n.TypeURL.XSD_DAY_TIME_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.XSD_YEAR_MONTH_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.RDF_LANG_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_NORMALIZED_STRING]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_TOKEN]:n.TypeURL.XSD_NORMALIZED_STRING,[n.TypeURL.XSD_LANGUAGE]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NM_TOKEN]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NAME]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NC_NAME]:n.TypeURL.XSD_NAME,[n.TypeURL.XSD_ENTITY]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID_REF]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_DOUBLE]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_FLOAT]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_DECIMAL]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_INTEGER]:n.TypeURL.XSD_DECIMAL,[n.TypeURL.XSD_NON_POSITIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_NEGATIVE_INTEGER]:n.TypeURL.XSD_NON_POSITIVE_INTEGER,[n.TypeURL.XSD_LONG]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_INT]:n.TypeURL.XSD_LONG,[n.TypeURL.XSD_SHORT]:n.TypeURL.XSD_INT,[n.TypeURL.XSD_BYTE]:n.TypeURL.XSD_SHORT,[n.TypeURL.XSD_NON_NEGATIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_POSITIVE_INTEGER]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_LONG]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_INT]:n.TypeURL.XSD_UNSIGNED_LONG,[n.TypeURL.XSD_UNSIGNED_SHORT]:n.TypeURL.XSD_UNSIGNED_INT,[n.TypeURL.XSD_UNSIGNED_BYTE]:n.TypeURL.XSD_UNSIGNED_SHORT,[n.TypeURL.XSD_DATE_TIME]:"term",[n.TypeURL.XSD_BOOLEAN]:"term",[n.TypeURL.XSD_DATE]:"term",[n.TypeURL.XSD_G_MONTH]:"term",[n.TypeURL.XSD_G_MONTHDAY]:"term",[n.TypeURL.XSD_G_YEAR]:"term",[n.TypeURL.XSD_G_YEAR_MONTH]:"term",[n.TypeURL.XSD_TIME]:"term",[n.TypeURL.XSD_G_DAY]:"term",[n.TypeURL.XSD_DURATION]:"term",[n.TypeAlias.SPARQL_NUMERIC]:"term",[n.TypeAlias.SPARQL_STRINGLY]:"term",[n.TypeURL.XSD_ANY_URI]:"term"},t.superTypeDictTable=Object.create(null);function a(y,S){const w=S.cache.get(y);if(w)return w;const I=S.discoverer(y);if(I==="term"){const x=Object.create(null);return x.__depth=0,x[y]=0,S.cache.set(y,x),x}let O;const T=l(I);return T?O={...t.superTypeDictTable[T]}:O={...a(I,S)},O.__depth++,O[y]=O.__depth,S.cache.set(y,O),O}t.getSuperTypes=a;function s(){for(const[y,S]of Object.entries(t.extensionTableInput)){const w=y;t.superTypeDictTable[w]||o(w,S,t.superTypeDictTable)}}t.extensionTableInit=s,s();function o(y,S,w){if(S==="term"||S===void 0){const I=Object.create(null);I.__depth=0,I[y]=0,w[y]=I;return}w[S]||o(S,t.extensionTableInput[S],w),w[y]={...w[S],[y]:w[S].__depth+1,__depth:w[S].__depth+1}}t.typeAliasCheck=Object.create(null);function u(){for(const y of Object.values(n.TypeAlias))t.typeAliasCheck[y]=!0}u();function c(y){if(y in t.typeAliasCheck)return y}t.asTypeAlias=c;function l(y){if(y in t.superTypeDictTable)return y}t.asKnownLiteralType=l;function d(y){if(l(y)||y==="term")return y}t.asOverrideType=d;function h(y){if(y==="term"||(0,e.asTermType)(y))return y}t.asGeneralType=h;function f(y,S){return y!=="term"&&t.superTypeDictTable[y]&&t.superTypeDictTable[y][S]!==void 0}t.isInternalSubType=f;function p(y,S){const w=l(y);return w?t.superTypeDictTable[w]:a(y,S)}t.getSuperTypeDict=p;function b(y,S,w){return y==="term"?!1:p(y,w)[S]!==void 0}t.isSubTypeOf=b,t.typePromotion={[n.TypeURL.XSD_STRING]:[{typeToPromote:n.TypeURL.XSD_ANY_URI,conversionFunction:y=>(0,r.string)(y.str())}],[n.TypeURL.XSD_DOUBLE]:[{typeToPromote:n.TypeURL.XSD_FLOAT,conversionFunction:y=>(0,r.double)(y.typedValue)},{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:y=>(0,r.double)(y.typedValue)}],[n.TypeURL.XSD_FLOAT]:[{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:y=>(0,r.float)(y.typedValue)}]}}($T)),$T}var P4;function Cl(){if(P4)return bh;P4=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.TermTransformer=void 0;const t=sr,e=Tt,r=ha(),n=li,a=Ze,s=Ze,o=Xr,u=Xr,c=v2();let l=class{constructor(h){this.superTypeProvider=h}transformRDFTermUnsafe(h){return this.transformTerm({term:h,type:e.Algebra.types.EXPRESSION,expressionType:e.Algebra.expressionTypes.TERM})}transformTerm(h){if(!h.term)throw new a.InvalidExpression(h);switch(h.term.termType){case"Variable":return new r.Variable(t.termToString(h.term));case"Literal":return this.transformLiteral(h.term);case"NamedNode":return new r.NamedNode(h.term.value);case"BlankNode":return new r.BlankNode(h.term.value);case"Quad":return new r.Quad(h.term,this.superTypeProvider);default:throw new a.InvalidTermType(h)}}transformLiteral(h){if(!h.datatype||[null,void 0,""].includes(h.datatype.value))return h.language?new r.LangStringLiteral(h.value,h.language):new r.StringLiteral(h.value);const f=h.datatype.value,p=(0,c.getSuperTypeDict)(f,this.superTypeProvider);try{if(n.TypeURL.XSD_STRING in p)return new r.StringLiteral(h.value,f);if(n.TypeURL.RDF_LANG_STRING in p)return new r.LangStringLiteral(h.value,h.language);if(n.TypeURL.XSD_YEAR_MONTH_DURATION in p)return new r.YearMonthDurationLiteral((0,o.parseYearMonthDuration)(h.value),h.value,f);if(n.TypeURL.XSD_DAY_TIME_DURATION in p)return new r.DayTimeDurationLiteral((0,o.parseDayTimeDuration)(h.value),h.value,f);if(n.TypeURL.XSD_DURATION in p)return new r.DurationLiteral((0,o.parseDuration)(h.value),h.value,f);if(n.TypeURL.XSD_DATE_TIME in p){const S=new Date(h.value);return Number.isNaN(S.getTime())?new r.NonLexicalLiteral(void 0,f,this.superTypeProvider,h.value):new r.DateTimeLiteral((0,o.parseDateTime)(h.value),h.value,f)}if(n.TypeURL.XSD_DATE in p)return new r.DateLiteral((0,o.parseDate)(h.value),h.value,f);if(n.TypeURL.XSD_TIME in p)return new r.TimeLiteral((0,o.parseTime)(h.value),h.value,f);if(n.TypeURL.XSD_BOOLEAN in p)return h.value!=="true"&&h.value!=="false"&&h.value!=="1"&&h.value!=="0"?new r.NonLexicalLiteral(void 0,f,this.superTypeProvider,h.value):new r.BooleanLiteral(h.value==="true"||h.value==="1",h.value);if(n.TypeURL.XSD_DECIMAL in p){const S=u.parseXSDDecimal(h.value);return S===void 0?new r.NonLexicalLiteral(void 0,f,this.superTypeProvider,h.value):n.TypeURL.XSD_INTEGER in p?new r.IntegerLiteral(S,f,h.value):new r.DecimalLiteral(S,f,h.value)}const b=n.TypeURL.XSD_FLOAT in p,y=n.TypeURL.XSD_DOUBLE in p;if(b||y){const S=u.parseXSDFloat(h.value);return S===void 0?new r.NonLexicalLiteral(void 0,f,this.superTypeProvider,h.value):b?new r.FloatLiteral(S,f,h.value):new r.DoubleLiteral(S,f,h.value)}return new r.Literal(h.value,f,h.value)}catch(b){if(b instanceof Error&&(0,s.isExpressionError)(b))return new r.NonLexicalLiteral(void 0,f,this.superTypeProvider,h.value);throw b}}};return bh.TermTransformer=l,bh}var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.serializeDuration=Us.serializeTime=Us.serializeDate=Us.serializeDateTime=void 0;function Go(t,e=2){return t.toLocaleString(void 0,{minimumIntegerDigits:e,useGrouping:!1})}function cde(t){return`${dL({year:t.year,month:t.month,day:t.day})}T${fL(t)}`}Us.serializeDateTime=cde;function lL(t){return t.zoneHours===void 0||t.zoneMinutes===void 0?"":t.zoneHours===0&&t.zoneMinutes===0?"Z":`${t.zoneHours>=0?`+${Go(t.zoneHours)}`:Go(t.zoneHours)}:${Go(Math.abs(t.zoneMinutes))}`}function dL(t){return`${Go(t.year,4)}-${Go(t.month)}-${Go(t.day)}${lL(t)}`}Us.serializeDate=dL;function fL(t){return`${Go(t.hours)}:${Go(t.minutes)}:${Go(t.seconds)}${lL(t)}`}Us.serializeTime=fL;function lde(t,e="PT0S"){if(!Object.values(t).some(d=>(d||0)!==0))return e;const r=Object.values(t).some(d=>(d||0)<0)?"-":"",n=t.year?`${Math.abs(t.year)}Y`:"",a=t.month?`${Math.abs(t.month)}M`:"",s=t.day?`${Math.abs(t.day)}D`:"",o=`${r}P${n}${a}${s}`;if(!(t.hours||t.minutes||t.seconds))return o;const u=t.hours?`${Math.abs(t.hours)}H`:"",c=t.minutes?`${Math.abs(t.minutes)}M`:"",l=t.seconds?`${Math.abs(t.seconds)}S`:"";return`${o}T${u}${c}${l}`}Us.serializeDuration=lde;var D4;function dde(){if(D4)return bt;D4=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.isNonLexicalLiteral=bt.NonLexicalLiteral=bt.YearMonthDurationLiteral=bt.DayTimeDurationLiteral=bt.DurationLiteral=bt.DateLiteral=bt.TimeLiteral=bt.DateTimeLiteral=bt.StringLiteral=bt.LangStringLiteral=bt.BooleanLiteral=bt.DoubleLiteral=bt.FloatLiteral=bt.DecimalLiteral=bt.IntegerLiteral=bt.NumericLiteral=bt.Literal=bt.isLiteralTermExpression=bt.Quad=bt.BlankNode=bt.NamedNode=bt.Term=void 0;const t=yt,e=Cl(),r=li,n=li,a=Ze,s=Us,o=v2(),u=Ni,c=new t.DataFactory;let l=class{constructor(){this.expressionType=u.ExpressionType.Term}str(){throw new a.InvalidArgumentTypes([this],r.RegularOperator.STR)}coerceEBV(){throw new a.EBVCoercionError(this)}};bt.Term=l;class d extends l{constructor(V){super(),this.value=V,this.termType="namedNode"}toRDF(){return c.namedNode(this.value)}str(){return this.value}}bt.NamedNode=d;class h extends l{constructor(V){super(),this.termType="blankNode",this.value=typeof V=="string"?c.blankNode(V):V}toRDF(){return this.value}}bt.BlankNode=h;class f extends l{constructor(V,ie){super(),this.termType="quad",this.transformer=new e.TermTransformer(ie),this.valueTerm=V}toRDF(){return this.valueTerm}get subject(){return this.transformer.transformRDFTermUnsafe(this.RDFsubject)}get predicate(){return this.transformer.transformRDFTermUnsafe(this.RDFpredicate)}get object(){return this.transformer.transformRDFTermUnsafe(this.RDFobject)}get RDFsubject(){return this.toRDF().subject}get RDFpredicate(){return this.toRDF().predicate}get RDFobject(){return this.toRDF().object}}bt.Quad=f;function p(C){if(C.termType==="literal")return C}bt.isLiteralTermExpression=p;class b extends l{constructor(V,ie,ne,fe){super(),this.typedValue=V,this.dataType=ie,this.strValue=ne,this.language=fe,this.termType="literal"}toRDF(){return c.literal(this.strValue||this.str(),this.language||c.namedNode(this.dataType))}str(){return this.strValue||this.typedValue.toString()}}bt.Literal=b;class y extends b{constructor(V,ie,ne,fe){super(V,ie,ne,fe),this.typedValue=V,this.strValue=ne,this.language=fe}coerceEBV(){return!!this.typedValue}toRDF(){const V=super.toRDF();return Number.isFinite(this.typedValue)||(V.value=V.value.replace("Infinity","INF")),V}str(){return this.strValue||this.specificFormatter(this.typedValue)}}bt.NumericLiteral=y;class S extends y{constructor(V,ie,ne,fe){super(V,ie||n.TypeURL.XSD_INTEGER,ne,fe),this.typedValue=V,this.strValue=ne,this.language=fe}specificFormatter(V){return V.toFixed(0)}}bt.IntegerLiteral=S;class w extends y{constructor(V,ie,ne,fe){super(V,ie||n.TypeURL.XSD_DECIMAL,ne,fe),this.typedValue=V,this.strValue=ne,this.language=fe}specificFormatter(V){return V.toString()}}bt.DecimalLiteral=w;class I extends y{constructor(V,ie,ne,fe){super(V,ie||n.TypeURL.XSD_FLOAT,ne,fe),this.typedValue=V,this.strValue=ne,this.language=fe}specificFormatter(V){return V.toString()}}bt.FloatLiteral=I;class O extends y{constructor(V,ie,ne,fe){super(V,ie||n.TypeURL.XSD_DOUBLE,ne,fe),this.typedValue=V,this.strValue=ne,this.language=fe}specificFormatter(V){if(!Number.isFinite(V))return V>0?"INF":V<0?"-INF":"NaN";const ie=V.toExponential(),[ne,fe]=ie.split("e"),_e=fe.replace(/\+/u,"");return`${ne.includes(".")?ne:`${ne}.0`}E${_e}`}}bt.DoubleLiteral=O;class T extends b{constructor(V,ie,ne){super(V,ne||n.TypeURL.XSD_BOOLEAN,ie),this.typedValue=V,this.strValue=ie}coerceEBV(){return this.typedValue}}bt.BooleanLiteral=T;class x extends b{constructor(V,ie,ne){super(V,ne||n.TypeURL.RDF_LANG_STRING,V,ie),this.typedValue=V,this.language=ie}coerceEBV(){return this.str().length>0}}bt.LangStringLiteral=x;class P extends b{constructor(V,ie){super(V,ie||n.TypeURL.XSD_STRING,V),this.typedValue=V}coerceEBV(){return this.str().length>0}}bt.StringLiteral=P;class B extends b{constructor(V,ie,ne){super(V,ne||n.TypeURL.XSD_DATE_TIME,ie),this.typedValue=V,this.strValue=ie}str(){return(0,s.serializeDateTime)(this.typedValue)}}bt.DateTimeLiteral=B;class Q extends b{constructor(V,ie,ne){super(V,ne||n.TypeURL.XSD_TIME,ie),this.typedValue=V,this.strValue=ie}str(){return(0,s.serializeTime)(this.typedValue)}}bt.TimeLiteral=Q;class N extends b{constructor(V,ie,ne){super(V,ne||n.TypeURL.XSD_DATE,ie),this.typedValue=V,this.strValue=ie}str(){return(0,s.serializeDate)(this.typedValue)}}bt.DateLiteral=N;class D extends b{constructor(V,ie,ne){super(V,ne||n.TypeURL.XSD_DURATION,ie),this.typedValue=V,this.strValue=ie}str(){return(0,s.serializeDuration)(this.typedValue)}}bt.DurationLiteral=D;class F extends D{constructor(V,ie,ne){super(V,ie,ne||n.TypeURL.XSD_DAY_TIME_DURATION),this.typedValue=V,this.strValue=ie}}bt.DayTimeDurationLiteral=F;class W extends b{constructor(V,ie,ne){super(V,ne||n.TypeURL.XSD_YEAR_MONTH_DURATION,ie),this.typedValue=V,this.strValue=ie}str(){return(0,s.serializeDuration)(this.typedValue,"P0M")}}bt.YearMonthDurationLiteral=W;class z extends b{constructor(V,ie,ne,fe,_e){super({toString:()=>"undefined"},ie,fe,_e),this.openWorldType=ne}coerceEBV(){if((0,o.isSubTypeOf)(this.dataType,n.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,o.isSubTypeOf)(this.dataType,n.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new a.EBVCoercionError(this)}toRDF(){return c.literal(this.str(),this.language||c.namedNode(this.dataType))}str(){return this.strValue||""}}bt.NonLexicalLiteral=z;function M(C){if(C instanceof z)return C}return bt.isNonLexicalLiteral=M,bt}var w2={};Object.defineProperty(w2,"__esModule",{value:!0});w2.Operator=void 0;const fde=Ni;class hde{constructor(e,r){this.args=e,this.apply=r,this.expressionType=fde.ExpressionType.Operator}}w2.Operator=hde;var S2={};Object.defineProperty(S2,"__esModule",{value:!0});S2.SpecialOperator=void 0;const pde=Ni;class yde{constructor(e,r,n){this.args=e,this.applyAsync=r,this.applySynchronously=n,this.expressionType=pde.ExpressionType.SpecialOperator}}S2.SpecialOperator=yde;var T2={};Object.defineProperty(T2,"__esModule",{value:!0});T2.Named=void 0;const bde=Ni;class mde{constructor(e,r,n){this.name=e,this.args=r,this.apply=n,this.expressionType=bde.ExpressionType.Named}}T2.Named=mde;var E2={};Object.defineProperty(E2,"__esModule",{value:!0});E2.Aggregate=void 0;const gde=Ni;class _de{constructor(e,r){this.name=e,this.expression=r,this.expressionType=gde.ExpressionType.Aggregate}}E2.Aggregate=_de;var O2={};Object.defineProperty(O2,"__esModule",{value:!0});O2.Existence=void 0;const vde=Ni;class wde{constructor(e){this.expression=e,this.expressionType=vde.ExpressionType.Existence}}O2.Existence=wde;var A2={};Object.defineProperty(A2,"__esModule",{value:!0});A2.AsyncExtension=void 0;const Sde=Ni;class Tde{constructor(e,r,n){this.name=e,this.args=r,this.apply=n,this.expressionType=Sde.ExpressionType.AsyncExtension}}A2.AsyncExtension=Tde;var x2={};Object.defineProperty(x2,"__esModule",{value:!0});x2.SyncExtension=void 0;const Ede=Ni;class Ode{constructor(e,r,n){this.name=e,this.args=r,this.apply=n,this.expressionType=Ede.ExpressionType.SyncExtension}}x2.SyncExtension=Ode;var N4;function ha(){return N4||(N4=1,function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ni,t),r(_2,t),r(dde(),t),r(w2,t),r(S2,t),r(T2,t),r(E2,t),r(O2,t),r(A2,t),r(x2,t)}(BT)),BT}var UT={},Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.SpecialFunction=Aa.NamedFunction=Aa.RegularFunction=Aa.BaseFunction=void 0;const hL=Ze;class lR{constructor(e,r){this.operator=e,this.apply=(n,a)=>(this.monomorph(n,a.superTypeProvider,a.functionArgumentsCache)||this.handleInvalidTypes(n))(a)(n),this.arity=r.arity,this.overloads=r.overloads}monomorph(e,r,n){return this.overloads.search(e,r,n)}}Aa.BaseFunction=lR;class Ade extends lR{constructor(e,r){super(e,r),this.functionClass="regular"}handleInvalidTypes(e){throw new hL.InvalidArgumentTypes(e,this.operator)}}Aa.RegularFunction=Ade;class xde extends lR{constructor(e,r){super(e,r),this.functionClass="named"}handleInvalidTypes(e){throw new hL.InvalidArgumentTypes(e,this.operator)}}Aa.NamedFunction=xde;class Rde{constructor(e,r){this.operator=e,this.functionClass="special",this.arity=r.arity,this.applySynchronously=r.applySynchronously,this.applyAsync=r.applyAsync,this.checkArity=r.checkArity||Ide(this.arity)}}Aa.SpecialFunction=Rde;function Ide(t){return e=>t===Number.POSITIVE_INFINITY?!0:e.length===t}var R2={};Object.defineProperty(R2,"__esModule",{value:!0});R2.namedDefinitions=void 0;const xa=ha(),Pde=ha(),_t=li,pL=Mt,yl=Ze,Ia=Xr,$t=co(),Dde={arity:1,overloads:(0,$t.declare)(_t.TypeURL.XSD_STRING).onNumeric1(()=>t=>(0,$t.string)((0,$t.float)(t.typedValue).str())).onBoolean1Typed(()=>t=>(0,$t.string)((0,$t.bool)(t).str())).onTerm1(()=>t=>(0,$t.string)(t.str())).collect()},Nde={arity:1,overloads:(0,$t.declare)(_t.TypeURL.XSD_FLOAT).onNumeric1(()=>t=>(0,$t.float)(t.typedValue)).onBoolean1Typed(()=>t=>(0,$t.float)(t?1:0)).onUnary(_t.TypeURL.XSD_STRING,()=>t=>{const e=(0,Ia.parseXSDFloat)(t.str());if(e===void 0)throw new yl.CastError(t,_t.TypeURL.XSD_FLOAT);return(0,$t.float)(e)},!1).collect()},jde={arity:1,overloads:(0,$t.declare)(_t.TypeURL.XSD_DOUBLE).onNumeric1(()=>t=>(0,$t.double)(t.typedValue)).onBoolean1Typed(()=>t=>(0,$t.double)(t?1:0)).onUnary(_t.TypeURL.XSD_STRING,()=>t=>{const e=(0,Ia.parseXSDFloat)(t.str());if(e===void 0)throw new yl.CastError(t,_t.TypeURL.XSD_DOUBLE);return(0,$t.double)(e)},!1).collect()},Cde={arity:1,overloads:(0,$t.declare)(_t.TypeURL.XSD_DECIMAL).onNumeric1(()=>t=>{const e=(0,Ia.parseXSDDecimal)(t.str());if(e===void 0)throw new yl.CastError(t,_t.TypeURL.XSD_DECIMAL);return(0,$t.decimal)(e)}).onString1(()=>t=>{const e=t.str(),r=/^([+-])?(\d+(\.\d+)?)$/u.test(e)?(0,Ia.parseXSDDecimal)(e):void 0;if(r===void 0)throw new yl.CastError(t,_t.TypeURL.XSD_DECIMAL);return(0,$t.decimal)(r)},!1).onBoolean1Typed(()=>t=>(0,$t.decimal)(t?1:0)).collect()},Fde={arity:1,overloads:(0,$t.declare)(_t.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>t=>(0,$t.integer)(t?1:0)).onNumeric1(()=>t=>{const e=(0,Ia.parseXSDInteger)(t.str());if(e===void 0)throw new yl.CastError(t,_t.TypeURL.XSD_INTEGER);return(0,$t.integer)(e)},!1).onString1(()=>t=>{const e=t.str(),r=/^\d+$/u.test(e)?(0,Ia.parseXSDInteger)(e):void 0;if(r===void 0)throw new yl.CastError(t,_t.TypeURL.XSD_INTEGER);return(0,$t.integer)(r)}).collect()},Mde={arity:1,overloads:(0,$t.declare)(_t.TypeURL.XSD_DATE_TIME).onUnary(_t.TypeURL.XSD_DATE_TIME,()=>t=>t).onUnary(_t.TypeURL.XSD_STRING,()=>t=>(0,$t.dateTime)((0,Ia.parseDateTime)(t.str()),t.str()),!1).onUnary(_t.TypeURL.XSD_DATE,()=>t=>new xa.DateTimeLiteral({...t.typedValue,hours:0,minutes:0,seconds:0})).collect()},Lde={arity:1,overloads:(0,$t.declare)(_t.TypeURL.XSD_BOOLEAN).onNumeric1(()=>t=>(0,$t.bool)(t.coerceEBV()),!0).onUnary(_t.TypeURL.XSD_BOOLEAN,()=>t=>(0,$t.bool)(t.coerceEBV()),!0).onUnary(_t.TypeURL.XSD_STRING,()=>t=>{switch(t.str()){case"true":return(0,$t.bool)(!0);case"false":return(0,$t.bool)(!1);case"1":return(0,$t.bool)(!0);case"0":return(0,$t.bool)(!1);default:throw new yl.CastError(t,_t.TypeURL.XSD_BOOLEAN)}},!1).collect()},Bde={arity:1,overloads:(0,$t.declare)(_t.TypeURL.XSD_TIME).onUnary(_t.TypeURL.XSD_TIME,()=>t=>new xa.TimeLiteral(t.typedValue,t.strValue)).onUnary(_t.TypeURL.XSD_DATE_TIME,()=>t=>new xa.TimeLiteral(t.typedValue)).onStringly1(()=>t=>new xa.TimeLiteral((0,Ia.parseTime)(t.str()))).collect()},$de={arity:1,overloads:(0,$t.declare)(_t.TypeURL.XSD_DATE).onUnary(_t.TypeURL.XSD_DATE,()=>t=>new xa.DateLiteral(t.typedValue,t.strValue)).onUnary(_t.TypeURL.XSD_DATE_TIME,()=>t=>new xa.DateLiteral(t.typedValue)).onStringly1(()=>t=>new xa.DateLiteral((0,Ia.parseDate)(t.str()))).collect()},Ude={arity:1,overloads:(0,$t.declare)(_t.TypeURL.XSD_DURATION).onUnary(_t.TypeURL.XSD_DURATION,()=>t=>new xa.DurationLiteral(t.typedValue,t.strValue)).onStringly1(()=>t=>new Pde.DurationLiteral((0,Ia.parseDuration)(t.str()))).collect()},qde={arity:1,overloads:(0,$t.declare)(_t.TypeURL.XSD_DAY_TIME_DURATION).onUnary(_t.TypeURL.XSD_DURATION,()=>t=>new xa.DayTimeDurationLiteral((0,pL.trimToDayTimeDuration)(t.typedValue))).onStringly1(()=>t=>new xa.DayTimeDurationLiteral((0,Ia.parseDayTimeDuration)(t.str()))).collect()},Vde={arity:1,overloads:(0,$t.declare)(_t.TypeURL.XSD_YEAR_MONTH_DURATION).onUnary(_t.TypeURL.XSD_DURATION,()=>t=>new xa.YearMonthDurationLiteral((0,pL.trimToYearMonthDuration)(t.typedValue))).onStringly1(()=>t=>new xa.YearMonthDurationLiteral((0,Ia.parseYearMonthDuration)(t.str()))).collect()};R2.namedDefinitions={[_t.TypeURL.XSD_STRING]:Dde,[_t.TypeURL.XSD_FLOAT]:Nde,[_t.TypeURL.XSD_DOUBLE]:jde,[_t.TypeURL.XSD_DECIMAL]:Cde,[_t.TypeURL.XSD_INTEGER]:Fde,[_t.TypeURL.XSD_DATE_TIME]:Mde,[_t.TypeURL.XSD_DATE]:$de,[_t.TypeURL.XSD_BOOLEAN]:Lde,[_t.TypeURL.XSD_TIME]:Bde,[_t.TypeURL.XSD_DURATION]:Ude,[_t.TypeURL.XSD_DAY_TIME_DURATION]:qde,[_t.TypeURL.XSD_YEAR_MONTH_DURATION]:Vde};var gh={},yL={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,s=Math.floor,o="[BigNumber Error] ",u=o+"Number primitive has more than 15 significant digits: ",c=1e14,l=14,d=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,p=1e9;function b(P){var B,Q,N,D=ae.prototype={constructor:ae,toString:null,valueOf:null},F=new ae(1),W=20,z=4,M=-7,C=21,V=-1e7,ie=1e7,ne=!1,fe=1,_e=0,we={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ce="0123456789abcdefghijklmnopqrstuvwxyz",oe=!0;function ae(L,H){var A,m,v,j,q,$,G,Y,J=this;if(!(J instanceof ae))return new ae(L,H);if(H==null){if(L&&L._isBigNumber===!0){J.s=L.s,!L.c||L.e>ie?J.c=J.e=null:L.e<V?J.c=[J.e=0]:(J.e=L.e,J.c=L.c.slice());return}if(($=typeof L=="number")&&L*0==0){if(J.s=1/L<0?(L=-L,-1):1,L===~~L){for(j=0,q=L;q>=10;q/=10,j++);j>ie?J.c=J.e=null:(J.e=j,J.c=[L]);return}Y=String(L)}else{if(!n.test(Y=String(L)))return N(J,Y,$);J.s=Y.charCodeAt(0)==45?(Y=Y.slice(1),-1):1}(j=Y.indexOf("."))>-1&&(Y=Y.replace(".","")),(q=Y.search(/e/i))>0?(j<0&&(j=q),j+=+Y.slice(q+1),Y=Y.substring(0,q)):j<0&&(j=Y.length)}else{if(I(H,2,Ce.length,"Base"),H==10&&oe)return J=new ae(L),ve(J,W+J.e+1,z);if(Y=String(L),$=typeof L=="number"){if(L*0!=0)return N(J,Y,$,H);if(J.s=1/L<0?(Y=Y.slice(1),-1):1,ae.DEBUG&&Y.replace(/^0\.0*|\./,"").length>15)throw Error(u+L)}else J.s=Y.charCodeAt(0)===45?(Y=Y.slice(1),-1):1;for(A=Ce.slice(0,H),j=q=0,G=Y.length;q<G;q++)if(A.indexOf(m=Y.charAt(q))<0){if(m=="."){if(q>j){j=G;continue}}else if(!v&&(Y==Y.toUpperCase()&&(Y=Y.toLowerCase())||Y==Y.toLowerCase()&&(Y=Y.toUpperCase()))){v=!0,q=-1,j=0;continue}return N(J,String(L),$,H)}$=!1,Y=Q(Y,H,10,J.s),(j=Y.indexOf("."))>-1?Y=Y.replace(".",""):j=Y.length}for(q=0;Y.charCodeAt(q)===48;q++);for(G=Y.length;Y.charCodeAt(--G)===48;);if(Y=Y.slice(q,++G)){if(G-=q,$&&ae.DEBUG&&G>15&&(L>d||L!==s(L)))throw Error(u+J.s*L);if((j=j-q-1)>ie)J.c=J.e=null;else if(j<V)J.c=[J.e=0];else{if(J.e=j,J.c=[],q=(j+1)%l,j<0&&(q+=l),q<G){for(q&&J.c.push(+Y.slice(0,q)),G-=l;q<G;)J.c.push(+Y.slice(q,q+=l));q=l-(Y=Y.slice(q)).length}else q-=G;for(;q--;Y+="0");J.c.push(+Y)}}else J.c=[J.e=0]}ae.clone=b,ae.ROUND_UP=0,ae.ROUND_DOWN=1,ae.ROUND_CEIL=2,ae.ROUND_FLOOR=3,ae.ROUND_HALF_UP=4,ae.ROUND_HALF_DOWN=5,ae.ROUND_HALF_EVEN=6,ae.ROUND_HALF_CEIL=7,ae.ROUND_HALF_FLOOR=8,ae.EUCLID=9,ae.config=ae.set=function(L){var H,A;if(L!=null)if(typeof L=="object"){if(L.hasOwnProperty(H="DECIMAL_PLACES")&&(A=L[H],I(A,0,p,H),W=A),L.hasOwnProperty(H="ROUNDING_MODE")&&(A=L[H],I(A,0,8,H),z=A),L.hasOwnProperty(H="EXPONENTIAL_AT")&&(A=L[H],A&&A.pop?(I(A[0],-p,0,H),I(A[1],0,p,H),M=A[0],C=A[1]):(I(A,-p,p,H),M=-(C=A<0?-A:A))),L.hasOwnProperty(H="RANGE"))if(A=L[H],A&&A.pop)I(A[0],-p,-1,H),I(A[1],1,p,H),V=A[0],ie=A[1];else if(I(A,-p,p,H),A)V=-(ie=A<0?-A:A);else throw Error(o+H+" cannot be zero: "+A);if(L.hasOwnProperty(H="CRYPTO"))if(A=L[H],A===!!A)if(A)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ne=A;else throw ne=!A,Error(o+"crypto unavailable");else ne=A;else throw Error(o+H+" not true or false: "+A);if(L.hasOwnProperty(H="MODULO_MODE")&&(A=L[H],I(A,0,9,H),fe=A),L.hasOwnProperty(H="POW_PRECISION")&&(A=L[H],I(A,0,p,H),_e=A),L.hasOwnProperty(H="FORMAT"))if(A=L[H],typeof A=="object")we=A;else throw Error(o+H+" not an object: "+A);if(L.hasOwnProperty(H="ALPHABET"))if(A=L[H],typeof A=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(A))oe=A.slice(0,10)=="0123456789",Ce=A;else throw Error(o+H+" invalid: "+A)}else throw Error(o+"Object expected: "+L);return{DECIMAL_PLACES:W,ROUNDING_MODE:z,EXPONENTIAL_AT:[M,C],RANGE:[V,ie],CRYPTO:ne,MODULO_MODE:fe,POW_PRECISION:_e,FORMAT:we,ALPHABET:Ce}},ae.isBigNumber=function(L){if(!L||L._isBigNumber!==!0)return!1;if(!ae.DEBUG)return!0;var H,A,m=L.c,v=L.e,j=L.s;e:if({}.toString.call(m)=="[object Array]"){if((j===1||j===-1)&&v>=-p&&v<=p&&v===s(v)){if(m[0]===0){if(v===0&&m.length===1)return!0;break e}if(H=(v+1)%l,H<1&&(H+=l),String(m[0]).length==H){for(H=0;H<m.length;H++)if(A=m[H],A<0||A>=c||A!==s(A))break e;if(A!==0)return!0}}}else if(m===null&&v===null&&(j===null||j===1||j===-1))return!0;throw Error(o+"Invalid BigNumber: "+L)},ae.maximum=ae.max=function(){return Ie(arguments,-1)},ae.minimum=ae.min=function(){return Ie(arguments,1)},ae.random=function(){var L=9007199254740992,H=Math.random()*L&2097151?function(){return s(Math.random()*L)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(A){var m,v,j,q,$,G=0,Y=[],J=new ae(F);if(A==null?A=W:I(A,0,p),q=a(A/l),ne)if(crypto.getRandomValues){for(m=crypto.getRandomValues(new Uint32Array(q*=2));G<q;)$=m[G]*131072+(m[G+1]>>>11),$>=9e15?(v=crypto.getRandomValues(new Uint32Array(2)),m[G]=v[0],m[G+1]=v[1]):(Y.push($%1e14),G+=2);G=q/2}else if(crypto.randomBytes){for(m=crypto.randomBytes(q*=7);G<q;)$=(m[G]&31)*281474976710656+m[G+1]*1099511627776+m[G+2]*4294967296+m[G+3]*16777216+(m[G+4]<<16)+(m[G+5]<<8)+m[G+6],$>=9e15?crypto.randomBytes(7).copy(m,G):(Y.push($%1e14),G+=7);G=q/7}else throw ne=!1,Error(o+"crypto unavailable");if(!ne)for(;G<q;)$=H(),$<9e15&&(Y[G++]=$%1e14);for(q=Y[--G],A%=l,q&&A&&($=h[l-A],Y[G]=s(q/$)*$);Y[G]===0;Y.pop(),G--);if(G<0)Y=[j=0];else{for(j=-1;Y[0]===0;Y.splice(0,1),j-=l);for(G=1,$=Y[0];$>=10;$/=10,G++);G<l&&(j-=l-G)}return J.e=j,J.c=Y,J}}(),ae.sum=function(){for(var L=1,H=arguments,A=new ae(H[0]);L<H.length;)A=A.plus(H[L++]);return A},Q=function(){var L="0123456789";function H(A,m,v,j){for(var q,$=[0],G,Y=0,J=A.length;Y<J;){for(G=$.length;G--;$[G]*=m);for($[0]+=j.indexOf(A.charAt(Y++)),q=0;q<$.length;q++)$[q]>v-1&&($[q+1]==null&&($[q+1]=0),$[q+1]+=$[q]/v|0,$[q]%=v)}return $.reverse()}return function(A,m,v,j,q){var $,G,Y,J,re,de,be,Ee,xe=A.indexOf("."),Pe=W,U=z;for(xe>=0&&(J=_e,_e=0,A=A.replace(".",""),Ee=new ae(m),de=Ee.pow(A.length-xe),_e=J,Ee.c=H(x(S(de.c),de.e,"0"),10,v,L),Ee.e=Ee.c.length),be=H(A,m,v,q?($=Ce,L):($=L,Ce)),Y=J=be.length;be[--J]==0;be.pop());if(!be[0])return $.charAt(0);if(xe<0?--Y:(de.c=be,de.e=Y,de.s=j,de=B(de,Ee,Pe,U,v),be=de.c,re=de.r,Y=de.e),G=Y+Pe+1,xe=be[G],J=v/2,re=re||G<0||be[G+1]!=null,re=U<4?(xe!=null||re)&&(U==0||U==(de.s<0?3:2)):xe>J||xe==J&&(U==4||re||U==6&&be[G-1]&1||U==(de.s<0?8:7)),G<1||!be[0])A=re?x($.charAt(1),-Pe,$.charAt(0)):$.charAt(0);else{if(be.length=G,re)for(--v;++be[--G]>v;)be[G]=0,G||(++Y,be=[1].concat(be));for(J=be.length;!be[--J];);for(xe=0,A="";xe<=J;A+=$.charAt(be[xe++]));A=x(A,Y,$.charAt(0))}return A}}(),B=function(){function L(m,v,j){var q,$,G,Y,J=0,re=m.length,de=v%f,be=v/f|0;for(m=m.slice();re--;)G=m[re]%f,Y=m[re]/f|0,q=be*G+Y*de,$=de*G+q%f*f+J,J=($/j|0)+(q/f|0)+be*Y,m[re]=$%j;return J&&(m=[J].concat(m)),m}function H(m,v,j,q){var $,G;if(j!=q)G=j>q?1:-1;else for($=G=0;$<j;$++)if(m[$]!=v[$]){G=m[$]>v[$]?1:-1;break}return G}function A(m,v,j,q){for(var $=0;j--;)m[j]-=$,$=m[j]<v[j]?1:0,m[j]=$*q+m[j]-v[j];for(;!m[0]&&m.length>1;m.splice(0,1));}return function(m,v,j,q,$){var G,Y,J,re,de,be,Ee,xe,Pe,U,E,R,K,ce,ye,ge,$e,ke=m.s==v.s?1:-1,Xe=m.c,Ke=v.c;if(!Xe||!Xe[0]||!Ke||!Ke[0])return new ae(!m.s||!v.s||(Xe?Ke&&Xe[0]==Ke[0]:!Ke)?NaN:Xe&&Xe[0]==0||!Ke?ke*0:ke/0);for(xe=new ae(ke),Pe=xe.c=[],Y=m.e-v.e,ke=j+Y+1,$||($=c,Y=y(m.e/l)-y(v.e/l),ke=ke/l|0),J=0;Ke[J]==(Xe[J]||0);J++);if(Ke[J]>(Xe[J]||0)&&Y--,ke<0)Pe.push(1),re=!0;else{for(ce=Xe.length,ge=Ke.length,J=0,ke+=2,de=s($/(Ke[0]+1)),de>1&&(Ke=L(Ke,de,$),Xe=L(Xe,de,$),ge=Ke.length,ce=Xe.length),K=ge,U=Xe.slice(0,ge),E=U.length;E<ge;U[E++]=0);$e=Ke.slice(),$e=[0].concat($e),ye=Ke[0],Ke[1]>=$/2&&ye++;do{if(de=0,G=H(Ke,U,ge,E),G<0){if(R=U[0],ge!=E&&(R=R*$+(U[1]||0)),de=s(R/ye),de>1)for(de>=$&&(de=$-1),be=L(Ke,de,$),Ee=be.length,E=U.length;H(be,U,Ee,E)==1;)de--,A(be,ge<Ee?$e:Ke,Ee,$),Ee=be.length,G=1;else de==0&&(G=de=1),be=Ke.slice(),Ee=be.length;if(Ee<E&&(be=[0].concat(be)),A(U,be,E,$),E=U.length,G==-1)for(;H(Ke,U,ge,E)<1;)de++,A(U,ge<E?$e:Ke,E,$),E=U.length}else G===0&&(de++,U=[0]);Pe[J++]=de,U[0]?U[E++]=Xe[K]||0:(U=[Xe[K]],E=1)}while((K++<ce||U[0]!=null)&&ke--);re=U[0]!=null,Pe[0]||Pe.splice(0,1)}if($==c){for(J=1,ke=Pe[0];ke>=10;ke/=10,J++);ve(xe,j+(xe.e=J+Y*l-1)+1,q,re)}else xe.e=Y,xe.r=+re;return xe}}();function Ae(L,H,A,m){var v,j,q,$,G;if(A==null?A=z:I(A,0,8),!L.c)return L.toString();if(v=L.c[0],q=L.e,H==null)G=S(L.c),G=m==1||m==2&&(q<=M||q>=C)?T(G,q):x(G,q,"0");else if(L=ve(new ae(L),H,A),j=L.e,G=S(L.c),$=G.length,m==1||m==2&&(H<=j||j<=M)){for(;$<H;G+="0",$++);G=T(G,j)}else if(H-=q,G=x(G,j,"0"),j+1>$){if(--H>0)for(G+=".";H--;G+="0");}else if(H+=j-$,H>0)for(j+1==$&&(G+=".");H--;G+="0");return L.s<0&&v?"-"+G:G}function Ie(L,H){for(var A,m,v=1,j=new ae(L[0]);v<L.length;v++)m=new ae(L[v]),(!m.s||(A=w(j,m))===H||A===0&&j.s===H)&&(j=m);return j}function he(L,H,A){for(var m=1,v=H.length;!H[--v];H.pop());for(v=H[0];v>=10;v/=10,m++);return(A=m+A*l-1)>ie?L.c=L.e=null:A<V?L.c=[L.e=0]:(L.e=A,L.c=H),L}N=function(){var L=/^(-?)0([xbo])(?=\w[\w.]*$)/i,H=/^([^.]+)\.$/,A=/^\.([^.]+)$/,m=/^-?(Infinity|NaN)$/,v=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(j,q,$,G){var Y,J=$?q:q.replace(v,"");if(m.test(J))j.s=isNaN(J)?null:J<0?-1:1;else{if(!$&&(J=J.replace(L,function(re,de,be){return Y=(be=be.toLowerCase())=="x"?16:be=="b"?2:8,!G||G==Y?de:re}),G&&(Y=G,J=J.replace(H,"$1").replace(A,"0.$1")),q!=J))return new ae(J,Y);if(ae.DEBUG)throw Error(o+"Not a"+(G?" base "+G:"")+" number: "+q);j.s=null}j.c=j.e=null}}();function ve(L,H,A,m){var v,j,q,$,G,Y,J,re=L.c,de=h;if(re){e:{for(v=1,$=re[0];$>=10;$/=10,v++);if(j=H-v,j<0)j+=l,q=H,G=re[Y=0],J=s(G/de[v-q-1]%10);else if(Y=a((j+1)/l),Y>=re.length)if(m){for(;re.length<=Y;re.push(0));G=J=0,v=1,j%=l,q=j-l+1}else break e;else{for(G=$=re[Y],v=1;$>=10;$/=10,v++);j%=l,q=j-l+v,J=q<0?0:s(G/de[v-q-1]%10)}if(m=m||H<0||re[Y+1]!=null||(q<0?G:G%de[v-q-1]),m=A<4?(J||m)&&(A==0||A==(L.s<0?3:2)):J>5||J==5&&(A==4||m||A==6&&(j>0?q>0?G/de[v-q]:0:re[Y-1])%10&1||A==(L.s<0?8:7)),H<1||!re[0])return re.length=0,m?(H-=L.e+1,re[0]=de[(l-H%l)%l],L.e=-H||0):re[0]=L.e=0,L;if(j==0?(re.length=Y,$=1,Y--):(re.length=Y+1,$=de[l-j],re[Y]=q>0?s(G/de[v-q]%de[q])*$:0),m)for(;;)if(Y==0){for(j=1,q=re[0];q>=10;q/=10,j++);for(q=re[0]+=$,$=1;q>=10;q/=10,$++);j!=$&&(L.e++,re[0]==c&&(re[0]=1));break}else{if(re[Y]+=$,re[Y]!=c)break;re[Y--]=0,$=1}for(j=re.length;re[--j]===0;re.pop());}L.e>ie?L.c=L.e=null:L.e<V&&(L.c=[L.e=0])}return L}function me(L){var H,A=L.e;return A===null?L.toString():(H=S(L.c),H=A<=M||A>=C?T(H,A):x(H,A,"0"),L.s<0?"-"+H:H)}return D.absoluteValue=D.abs=function(){var L=new ae(this);return L.s<0&&(L.s=1),L},D.comparedTo=function(L,H){return w(this,new ae(L,H))},D.decimalPlaces=D.dp=function(L,H){var A,m,v,j=this;if(L!=null)return I(L,0,p),H==null?H=z:I(H,0,8),ve(new ae(j),L+j.e+1,H);if(!(A=j.c))return null;if(m=((v=A.length-1)-y(this.e/l))*l,v=A[v])for(;v%10==0;v/=10,m--);return m<0&&(m=0),m},D.dividedBy=D.div=function(L,H){return B(this,new ae(L,H),W,z)},D.dividedToIntegerBy=D.idiv=function(L,H){return B(this,new ae(L,H),0,1)},D.exponentiatedBy=D.pow=function(L,H){var A,m,v,j,q,$,G,Y,J,re=this;if(L=new ae(L),L.c&&!L.isInteger())throw Error(o+"Exponent not an integer: "+me(L));if(H!=null&&(H=new ae(H)),$=L.e>14,!re.c||!re.c[0]||re.c[0]==1&&!re.e&&re.c.length==1||!L.c||!L.c[0])return J=new ae(Math.pow(+me(re),$?L.s*(2-O(L)):+me(L))),H?J.mod(H):J;if(G=L.s<0,H){if(H.c?!H.c[0]:!H.s)return new ae(NaN);m=!G&&re.isInteger()&&H.isInteger(),m&&(re=re.mod(H))}else{if(L.e>9&&(re.e>0||re.e<-1||(re.e==0?re.c[0]>1||$&&re.c[1]>=24e7:re.c[0]<8e13||$&&re.c[0]<=9999975e7)))return j=re.s<0&&O(L)?-0:0,re.e>-1&&(j=1/j),new ae(G?1/j:j);_e&&(j=a(_e/l+2))}for($?(A=new ae(.5),G&&(L.s=1),Y=O(L)):(v=Math.abs(+me(L)),Y=v%2),J=new ae(F);;){if(Y){if(J=J.times(re),!J.c)break;j?J.c.length>j&&(J.c.length=j):m&&(J=J.mod(H))}if(v){if(v=s(v/2),v===0)break;Y=v%2}else if(L=L.times(A),ve(L,L.e+1,1),L.e>14)Y=O(L);else{if(v=+me(L),v===0)break;Y=v%2}re=re.times(re),j?re.c&&re.c.length>j&&(re.c.length=j):m&&(re=re.mod(H))}return m?J:(G&&(J=F.div(J)),H?J.mod(H):j?ve(J,_e,z,q):J)},D.integerValue=function(L){var H=new ae(this);return L==null?L=z:I(L,0,8),ve(H,H.e+1,L)},D.isEqualTo=D.eq=function(L,H){return w(this,new ae(L,H))===0},D.isFinite=function(){return!!this.c},D.isGreaterThan=D.gt=function(L,H){return w(this,new ae(L,H))>0},D.isGreaterThanOrEqualTo=D.gte=function(L,H){return(H=w(this,new ae(L,H)))===1||H===0},D.isInteger=function(){return!!this.c&&y(this.e/l)>this.c.length-2},D.isLessThan=D.lt=function(L,H){return w(this,new ae(L,H))<0},D.isLessThanOrEqualTo=D.lte=function(L,H){return(H=w(this,new ae(L,H)))===-1||H===0},D.isNaN=function(){return!this.s},D.isNegative=function(){return this.s<0},D.isPositive=function(){return this.s>0},D.isZero=function(){return!!this.c&&this.c[0]==0},D.minus=function(L,H){var A,m,v,j,q=this,$=q.s;if(L=new ae(L,H),H=L.s,!$||!H)return new ae(NaN);if($!=H)return L.s=-H,q.plus(L);var G=q.e/l,Y=L.e/l,J=q.c,re=L.c;if(!G||!Y){if(!J||!re)return J?(L.s=-H,L):new ae(re?q:NaN);if(!J[0]||!re[0])return re[0]?(L.s=-H,L):new ae(J[0]?q:z==3?-0:0)}if(G=y(G),Y=y(Y),J=J.slice(),$=G-Y){for((j=$<0)?($=-$,v=J):(Y=G,v=re),v.reverse(),H=$;H--;v.push(0));v.reverse()}else for(m=(j=($=J.length)<(H=re.length))?$:H,$=H=0;H<m;H++)if(J[H]!=re[H]){j=J[H]<re[H];break}if(j&&(v=J,J=re,re=v,L.s=-L.s),H=(m=re.length)-(A=J.length),H>0)for(;H--;J[A++]=0);for(H=c-1;m>$;){if(J[--m]<re[m]){for(A=m;A&&!J[--A];J[A]=H);--J[A],J[m]+=c}J[m]-=re[m]}for(;J[0]==0;J.splice(0,1),--Y);return J[0]?he(L,J,Y):(L.s=z==3?-1:1,L.c=[L.e=0],L)},D.modulo=D.mod=function(L,H){var A,m,v=this;return L=new ae(L,H),!v.c||!L.s||L.c&&!L.c[0]?new ae(NaN):!L.c||v.c&&!v.c[0]?new ae(v):(fe==9?(m=L.s,L.s=1,A=B(v,L,0,3),L.s=m,A.s*=m):A=B(v,L,0,fe),L=v.minus(A.times(L)),!L.c[0]&&fe==1&&(L.s=v.s),L)},D.multipliedBy=D.times=function(L,H){var A,m,v,j,q,$,G,Y,J,re,de,be,Ee,xe,Pe,U=this,E=U.c,R=(L=new ae(L,H)).c;if(!E||!R||!E[0]||!R[0])return!U.s||!L.s||E&&!E[0]&&!R||R&&!R[0]&&!E?L.c=L.e=L.s=null:(L.s*=U.s,!E||!R?L.c=L.e=null:(L.c=[0],L.e=0)),L;for(m=y(U.e/l)+y(L.e/l),L.s*=U.s,G=E.length,re=R.length,G<re&&(Ee=E,E=R,R=Ee,v=G,G=re,re=v),v=G+re,Ee=[];v--;Ee.push(0));for(xe=c,Pe=f,v=re;--v>=0;){for(A=0,de=R[v]%Pe,be=R[v]/Pe|0,q=G,j=v+q;j>v;)Y=E[--q]%Pe,J=E[q]/Pe|0,$=be*Y+J*de,Y=de*Y+$%Pe*Pe+Ee[j]+A,A=(Y/xe|0)+($/Pe|0)+be*J,Ee[j--]=Y%xe;Ee[j]=A}return A?++m:Ee.splice(0,1),he(L,Ee,m)},D.negated=function(){var L=new ae(this);return L.s=-L.s||null,L},D.plus=function(L,H){var A,m=this,v=m.s;if(L=new ae(L,H),H=L.s,!v||!H)return new ae(NaN);if(v!=H)return L.s=-H,m.minus(L);var j=m.e/l,q=L.e/l,$=m.c,G=L.c;if(!j||!q){if(!$||!G)return new ae(v/0);if(!$[0]||!G[0])return G[0]?L:new ae($[0]?m:v*0)}if(j=y(j),q=y(q),$=$.slice(),v=j-q){for(v>0?(q=j,A=G):(v=-v,A=$),A.reverse();v--;A.push(0));A.reverse()}for(v=$.length,H=G.length,v-H<0&&(A=G,G=$,$=A,H=v),v=0;H;)v=($[--H]=$[H]+G[H]+v)/c|0,$[H]=c===$[H]?0:$[H]%c;return v&&($=[v].concat($),++q),he(L,$,q)},D.precision=D.sd=function(L,H){var A,m,v,j=this;if(L!=null&&L!==!!L)return I(L,1,p),H==null?H=z:I(H,0,8),ve(new ae(j),L,H);if(!(A=j.c))return null;if(v=A.length-1,m=v*l+1,v=A[v]){for(;v%10==0;v/=10,m--);for(v=A[0];v>=10;v/=10,m++);}return L&&j.e+1>m&&(m=j.e+1),m},D.shiftedBy=function(L){return I(L,-d,d),this.times("1e"+L)},D.squareRoot=D.sqrt=function(){var L,H,A,m,v,j=this,q=j.c,$=j.s,G=j.e,Y=W+4,J=new ae("0.5");if($!==1||!q||!q[0])return new ae(!$||$<0&&(!q||q[0])?NaN:q?j:1/0);if($=Math.sqrt(+me(j)),$==0||$==1/0?(H=S(q),(H.length+G)%2==0&&(H+="0"),$=Math.sqrt(+H),G=y((G+1)/2)-(G<0||G%2),$==1/0?H="5e"+G:(H=$.toExponential(),H=H.slice(0,H.indexOf("e")+1)+G),A=new ae(H)):A=new ae($+""),A.c[0]){for(G=A.e,$=G+Y,$<3&&($=0);;)if(v=A,A=J.times(v.plus(B(j,v,Y,1))),S(v.c).slice(0,$)===(H=S(A.c)).slice(0,$))if(A.e<G&&--$,H=H.slice($-3,$+1),H=="9999"||!m&&H=="4999"){if(!m&&(ve(v,v.e+W+2,0),v.times(v).eq(j))){A=v;break}Y+=4,$+=4,m=1}else{(!+H||!+H.slice(1)&&H.charAt(0)=="5")&&(ve(A,A.e+W+2,1),L=!A.times(A).eq(j));break}}return ve(A,A.e+W+1,z,L)},D.toExponential=function(L,H){return L!=null&&(I(L,0,p),L++),Ae(this,L,H,1)},D.toFixed=function(L,H){return L!=null&&(I(L,0,p),L=L+this.e+1),Ae(this,L,H)},D.toFormat=function(L,H,A){var m,v=this;if(A==null)L!=null&&H&&typeof H=="object"?(A=H,H=null):L&&typeof L=="object"?(A=L,L=H=null):A=we;else if(typeof A!="object")throw Error(o+"Argument not an object: "+A);if(m=v.toFixed(L,H),v.c){var j,q=m.split("."),$=+A.groupSize,G=+A.secondaryGroupSize,Y=A.groupSeparator||"",J=q[0],re=q[1],de=v.s<0,be=de?J.slice(1):J,Ee=be.length;if(G&&(j=$,$=G,G=j,Ee-=j),$>0&&Ee>0){for(j=Ee%$||$,J=be.substr(0,j);j<Ee;j+=$)J+=Y+be.substr(j,$);G>0&&(J+=Y+be.slice(j)),de&&(J="-"+J)}m=re?J+(A.decimalSeparator||"")+((G=+A.fractionGroupSize)?re.replace(new RegExp("\\d{"+G+"}\\B","g"),"$&"+(A.fractionGroupSeparator||"")):re):J}return(A.prefix||"")+m+(A.suffix||"")},D.toFraction=function(L){var H,A,m,v,j,q,$,G,Y,J,re,de,be=this,Ee=be.c;if(L!=null&&($=new ae(L),!$.isInteger()&&($.c||$.s!==1)||$.lt(F)))throw Error(o+"Argument "+($.isInteger()?"out of range: ":"not an integer: ")+me($));if(!Ee)return new ae(be);for(H=new ae(F),Y=A=new ae(F),m=G=new ae(F),de=S(Ee),j=H.e=de.length-be.e-1,H.c[0]=h[(q=j%l)<0?l+q:q],L=!L||$.comparedTo(H)>0?j>0?H:Y:$,q=ie,ie=1/0,$=new ae(de),G.c[0]=0;J=B($,H,0,1),v=A.plus(J.times(m)),v.comparedTo(L)!=1;)A=m,m=v,Y=G.plus(J.times(v=Y)),G=v,H=$.minus(J.times(v=H)),$=v;return v=B(L.minus(A),m,0,1),G=G.plus(v.times(Y)),A=A.plus(v.times(m)),G.s=Y.s=be.s,j=j*2,re=B(Y,m,j,z).minus(be).abs().comparedTo(B(G,A,j,z).minus(be).abs())<1?[Y,m]:[G,A],ie=q,re},D.toNumber=function(){return+me(this)},D.toPrecision=function(L,H){return L!=null&&I(L,1,p),Ae(this,L,H,2)},D.toString=function(L){var H,A=this,m=A.s,v=A.e;return v===null?m?(H="Infinity",m<0&&(H="-"+H)):H="NaN":(L==null?H=v<=M||v>=C?T(S(A.c),v):x(S(A.c),v,"0"):L===10&&oe?(A=ve(new ae(A),W+v+1,z),H=x(S(A.c),A.e,"0")):(I(L,2,Ce.length,"Base"),H=Q(x(S(A.c),v,"0"),10,L,m,!0)),m<0&&A.c[0]&&(H="-"+H)),H},D.valueOf=D.toJSON=function(){return me(this)},D._isBigNumber=!0,P!=null&&ae.set(P),ae}function y(P){var B=P|0;return P>0||P===B?B:B-1}function S(P){for(var B,Q,N=1,D=P.length,F=P[0]+"";N<D;){for(B=P[N++]+"",Q=l-B.length;Q--;B="0"+B);F+=B}for(D=F.length;F.charCodeAt(--D)===48;);return F.slice(0,D+1||1)}function w(P,B){var Q,N,D=P.c,F=B.c,W=P.s,z=B.s,M=P.e,C=B.e;if(!W||!z)return null;if(Q=D&&!D[0],N=F&&!F[0],Q||N)return Q?N?0:-z:W;if(W!=z)return W;if(Q=W<0,N=M==C,!D||!F)return N?0:!D^Q?1:-1;if(!N)return M>C^Q?1:-1;for(z=(M=D.length)<(C=F.length)?M:C,W=0;W<z;W++)if(D[W]!=F[W])return D[W]>F[W]^Q?1:-1;return M==C?0:M>C^Q?1:-1}function I(P,B,Q,N){if(P<B||P>Q||P!==s(P))throw Error(o+(N||"Argument")+(typeof P=="number"?P<B||P>Q?" out of range: ":" not an integer: ":" not a primitive number: ")+String(P))}function O(P){var B=P.c.length-1;return y(P.e/l)==B&&P.c[B]%2!=0}function T(P,B){return(P.length>1?P.charAt(0)+"."+P.slice(1):P)+(B<0?"e":"e+")+B}function x(P,B,Q){var N,D;if(B<0){for(D=Q+".";++B;D+=Q);P=D+P}else if(N=P.length,++B>N){for(D=Q,B-=N;--B;D+=Q);P+=D}else B<N&&(P=P.slice(0,B)+"."+P.slice(B));return P}r=b(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(g)})(yL);var Hde=yL.exports,bL={exports:{}};(function(t,e){(function(r){t.exports=r()})(function(r){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(w,I){var O=w[0],T=w[1],x=w[2],P=w[3];O+=(T&x|~T&P)+I[0]-680876936|0,O=(O<<7|O>>>25)+T|0,P+=(O&T|~O&x)+I[1]-389564586|0,P=(P<<12|P>>>20)+O|0,x+=(P&O|~P&T)+I[2]+606105819|0,x=(x<<17|x>>>15)+P|0,T+=(x&P|~x&O)+I[3]-1044525330|0,T=(T<<22|T>>>10)+x|0,O+=(T&x|~T&P)+I[4]-176418897|0,O=(O<<7|O>>>25)+T|0,P+=(O&T|~O&x)+I[5]+1200080426|0,P=(P<<12|P>>>20)+O|0,x+=(P&O|~P&T)+I[6]-1473231341|0,x=(x<<17|x>>>15)+P|0,T+=(x&P|~x&O)+I[7]-45705983|0,T=(T<<22|T>>>10)+x|0,O+=(T&x|~T&P)+I[8]+1770035416|0,O=(O<<7|O>>>25)+T|0,P+=(O&T|~O&x)+I[9]-1958414417|0,P=(P<<12|P>>>20)+O|0,x+=(P&O|~P&T)+I[10]-42063|0,x=(x<<17|x>>>15)+P|0,T+=(x&P|~x&O)+I[11]-1990404162|0,T=(T<<22|T>>>10)+x|0,O+=(T&x|~T&P)+I[12]+1804603682|0,O=(O<<7|O>>>25)+T|0,P+=(O&T|~O&x)+I[13]-40341101|0,P=(P<<12|P>>>20)+O|0,x+=(P&O|~P&T)+I[14]-1502002290|0,x=(x<<17|x>>>15)+P|0,T+=(x&P|~x&O)+I[15]+1236535329|0,T=(T<<22|T>>>10)+x|0,O+=(T&P|x&~P)+I[1]-165796510|0,O=(O<<5|O>>>27)+T|0,P+=(O&x|T&~x)+I[6]-1069501632|0,P=(P<<9|P>>>23)+O|0,x+=(P&T|O&~T)+I[11]+643717713|0,x=(x<<14|x>>>18)+P|0,T+=(x&O|P&~O)+I[0]-373897302|0,T=(T<<20|T>>>12)+x|0,O+=(T&P|x&~P)+I[5]-701558691|0,O=(O<<5|O>>>27)+T|0,P+=(O&x|T&~x)+I[10]+38016083|0,P=(P<<9|P>>>23)+O|0,x+=(P&T|O&~T)+I[15]-660478335|0,x=(x<<14|x>>>18)+P|0,T+=(x&O|P&~O)+I[4]-405537848|0,T=(T<<20|T>>>12)+x|0,O+=(T&P|x&~P)+I[9]+568446438|0,O=(O<<5|O>>>27)+T|0,P+=(O&x|T&~x)+I[14]-1019803690|0,P=(P<<9|P>>>23)+O|0,x+=(P&T|O&~T)+I[3]-187363961|0,x=(x<<14|x>>>18)+P|0,T+=(x&O|P&~O)+I[8]+1163531501|0,T=(T<<20|T>>>12)+x|0,O+=(T&P|x&~P)+I[13]-1444681467|0,O=(O<<5|O>>>27)+T|0,P+=(O&x|T&~x)+I[2]-51403784|0,P=(P<<9|P>>>23)+O|0,x+=(P&T|O&~T)+I[7]+1735328473|0,x=(x<<14|x>>>18)+P|0,T+=(x&O|P&~O)+I[12]-1926607734|0,T=(T<<20|T>>>12)+x|0,O+=(T^x^P)+I[5]-378558|0,O=(O<<4|O>>>28)+T|0,P+=(O^T^x)+I[8]-2022574463|0,P=(P<<11|P>>>21)+O|0,x+=(P^O^T)+I[11]+1839030562|0,x=(x<<16|x>>>16)+P|0,T+=(x^P^O)+I[14]-35309556|0,T=(T<<23|T>>>9)+x|0,O+=(T^x^P)+I[1]-1530992060|0,O=(O<<4|O>>>28)+T|0,P+=(O^T^x)+I[4]+1272893353|0,P=(P<<11|P>>>21)+O|0,x+=(P^O^T)+I[7]-155497632|0,x=(x<<16|x>>>16)+P|0,T+=(x^P^O)+I[10]-1094730640|0,T=(T<<23|T>>>9)+x|0,O+=(T^x^P)+I[13]+681279174|0,O=(O<<4|O>>>28)+T|0,P+=(O^T^x)+I[0]-358537222|0,P=(P<<11|P>>>21)+O|0,x+=(P^O^T)+I[3]-722521979|0,x=(x<<16|x>>>16)+P|0,T+=(x^P^O)+I[6]+76029189|0,T=(T<<23|T>>>9)+x|0,O+=(T^x^P)+I[9]-640364487|0,O=(O<<4|O>>>28)+T|0,P+=(O^T^x)+I[12]-421815835|0,P=(P<<11|P>>>21)+O|0,x+=(P^O^T)+I[15]+530742520|0,x=(x<<16|x>>>16)+P|0,T+=(x^P^O)+I[2]-995338651|0,T=(T<<23|T>>>9)+x|0,O+=(x^(T|~P))+I[0]-198630844|0,O=(O<<6|O>>>26)+T|0,P+=(T^(O|~x))+I[7]+1126891415|0,P=(P<<10|P>>>22)+O|0,x+=(O^(P|~T))+I[14]-1416354905|0,x=(x<<15|x>>>17)+P|0,T+=(P^(x|~O))+I[5]-57434055|0,T=(T<<21|T>>>11)+x|0,O+=(x^(T|~P))+I[12]+1700485571|0,O=(O<<6|O>>>26)+T|0,P+=(T^(O|~x))+I[3]-1894986606|0,P=(P<<10|P>>>22)+O|0,x+=(O^(P|~T))+I[10]-1051523|0,x=(x<<15|x>>>17)+P|0,T+=(P^(x|~O))+I[1]-2054922799|0,T=(T<<21|T>>>11)+x|0,O+=(x^(T|~P))+I[8]+1873313359|0,O=(O<<6|O>>>26)+T|0,P+=(T^(O|~x))+I[15]-30611744|0,P=(P<<10|P>>>22)+O|0,x+=(O^(P|~T))+I[6]-1560198380|0,x=(x<<15|x>>>17)+P|0,T+=(P^(x|~O))+I[13]+1309151649|0,T=(T<<21|T>>>11)+x|0,O+=(x^(T|~P))+I[4]-145523070|0,O=(O<<6|O>>>26)+T|0,P+=(T^(O|~x))+I[11]-1120210379|0,P=(P<<10|P>>>22)+O|0,x+=(O^(P|~T))+I[2]+718787259|0,x=(x<<15|x>>>17)+P|0,T+=(P^(x|~O))+I[9]-343485551|0,T=(T<<21|T>>>11)+x|0,w[0]=O+w[0]|0,w[1]=T+w[1]|0,w[2]=x+w[2]|0,w[3]=P+w[3]|0}function s(w){var I=[],O;for(O=0;O<64;O+=4)I[O>>2]=w.charCodeAt(O)+(w.charCodeAt(O+1)<<8)+(w.charCodeAt(O+2)<<16)+(w.charCodeAt(O+3)<<24);return I}function o(w){var I=[],O;for(O=0;O<64;O+=4)I[O>>2]=w[O]+(w[O+1]<<8)+(w[O+2]<<16)+(w[O+3]<<24);return I}function u(w){var I=w.length,O=[1732584193,-271733879,-1732584194,271733878],T,x,P,B,Q,N;for(T=64;T<=I;T+=64)a(O,s(w.substring(T-64,T)));for(w=w.substring(T-64),x=w.length,P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=0;T<x;T+=1)P[T>>2]|=w.charCodeAt(T)<<(T%4<<3);if(P[T>>2]|=128<<(T%4<<3),T>55)for(a(O,P),T=0;T<16;T+=1)P[T]=0;return B=I*8,B=B.toString(16).match(/(.*?)(.{0,8})$/),Q=parseInt(B[2],16),N=parseInt(B[1],16)||0,P[14]=Q,P[15]=N,a(O,P),O}function c(w){var I=w.length,O=[1732584193,-271733879,-1732584194,271733878],T,x,P,B,Q,N;for(T=64;T<=I;T+=64)a(O,o(w.subarray(T-64,T)));for(w=T-64<I?w.subarray(T-64):new Uint8Array(0),x=w.length,P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=0;T<x;T+=1)P[T>>2]|=w[T]<<(T%4<<3);if(P[T>>2]|=128<<(T%4<<3),T>55)for(a(O,P),T=0;T<16;T+=1)P[T]=0;return B=I*8,B=B.toString(16).match(/(.*?)(.{0,8})$/),Q=parseInt(B[2],16),N=parseInt(B[1],16)||0,P[14]=Q,P[15]=N,a(O,P),O}function l(w){var I="",O;for(O=0;O<4;O+=1)I+=n[w>>O*8+4&15]+n[w>>O*8&15];return I}function d(w){var I;for(I=0;I<w.length;I+=1)w[I]=l(w[I]);return w.join("")}d(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function w(I,O){return I=I|0||0,I<0?Math.max(I+O,0):Math.min(I,O)}ArrayBuffer.prototype.slice=function(I,O){var T=this.byteLength,x=w(I,T),P=T,B,Q,N,D;return O!==r&&(P=w(O,T)),x>P?new ArrayBuffer(0):(B=P-x,Q=new ArrayBuffer(B),N=new Uint8Array(Q),D=new Uint8Array(this,x,B),N.set(D),Q)}}();function h(w){return/[\u0080-\uFFFF]/.test(w)&&(w=unescape(encodeURIComponent(w))),w}function f(w,I){var O=w.length,T=new ArrayBuffer(O),x=new Uint8Array(T),P;for(P=0;P<O;P+=1)x[P]=w.charCodeAt(P);return I?x:T}function p(w){return String.fromCharCode.apply(null,new Uint8Array(w))}function b(w,I,O){var T=new Uint8Array(w.byteLength+I.byteLength);return T.set(new Uint8Array(w)),T.set(new Uint8Array(I),w.byteLength),O?T:T.buffer}function y(w){var I=[],O=w.length,T;for(T=0;T<O-1;T+=2)I.push(parseInt(w.substr(T,2),16));return String.fromCharCode.apply(String,I)}function S(){this.reset()}return S.prototype.append=function(w){return this.appendBinary(h(w)),this},S.prototype.appendBinary=function(w){this._buff+=w,this._length+=w.length;var I=this._buff.length,O;for(O=64;O<=I;O+=64)a(this._hash,s(this._buff.substring(O-64,O)));return this._buff=this._buff.substring(O-64),this},S.prototype.end=function(w){var I=this._buff,O=I.length,T,x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P;for(T=0;T<O;T+=1)x[T>>2]|=I.charCodeAt(T)<<(T%4<<3);return this._finish(x,O),P=d(this._hash),w&&(P=y(P)),this.reset(),P},S.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},S.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},S.prototype.setState=function(w){return this._buff=w.buff,this._length=w.length,this._hash=w.hash,this},S.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},S.prototype._finish=function(w,I){var O=I,T,x,P;if(w[O>>2]|=128<<(O%4<<3),O>55)for(a(this._hash,w),O=0;O<16;O+=1)w[O]=0;T=this._length*8,T=T.toString(16).match(/(.*?)(.{0,8})$/),x=parseInt(T[2],16),P=parseInt(T[1],16)||0,w[14]=x,w[15]=P,a(this._hash,w)},S.hash=function(w,I){return S.hashBinary(h(w),I)},S.hashBinary=function(w,I){var O=u(w),T=d(O);return I?y(T):T},S.ArrayBuffer=function(){this.reset()},S.ArrayBuffer.prototype.append=function(w){var I=b(this._buff.buffer,w,!0),O=I.length,T;for(this._length+=w.byteLength,T=64;T<=O;T+=64)a(this._hash,o(I.subarray(T-64,T)));return this._buff=T-64<O?new Uint8Array(I.buffer.slice(T-64)):new Uint8Array(0),this},S.ArrayBuffer.prototype.end=function(w){var I=this._buff,O=I.length,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x,P;for(x=0;x<O;x+=1)T[x>>2]|=I[x]<<(x%4<<3);return this._finish(T,O),P=d(this._hash),w&&(P=y(P)),this.reset(),P},S.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},S.ArrayBuffer.prototype.getState=function(){var w=S.prototype.getState.call(this);return w.buff=p(w.buff),w},S.ArrayBuffer.prototype.setState=function(w){return w.buff=f(w.buff,!0),S.prototype.setState.call(this,w)},S.ArrayBuffer.prototype.destroy=S.prototype.destroy,S.ArrayBuffer.prototype._finish=S.prototype._finish,S.ArrayBuffer.hash=function(w,I){var O=c(new Uint8Array(w)),T=d(O);return I?y(T):T},S})})(bL);var kde=bL.exports,dR={},I2={},P2={};Object.defineProperty(P2,"__esModule",{value:!0});P2.default=Gde;let x1;const Qde=new Uint8Array(16);function Gde(){if(!x1&&(x1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x1(Qde)}var fc={},Fl={},D2={};Object.defineProperty(D2,"__esModule",{value:!0});D2.default=void 0;var zde=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;D2.default=zde;Object.defineProperty(Fl,"__esModule",{value:!0});Fl.default=void 0;var Wde=Xde(D2);function Xde(t){return t&&t.__esModule?t:{default:t}}function Kde(t){return typeof t=="string"&&Wde.default.test(t)}var Jde=Kde;Fl.default=Jde;Object.defineProperty(fc,"__esModule",{value:!0});fc.default=void 0;fc.unsafeStringify=mL;var Yde=Zde(Fl);function Zde(t){return t&&t.__esModule?t:{default:t}}const $n=[];for(let t=0;t<256;++t)$n.push((t+256).toString(16).slice(1));function mL(t,e=0){return $n[t[e+0]]+$n[t[e+1]]+$n[t[e+2]]+$n[t[e+3]]+"-"+$n[t[e+4]]+$n[t[e+5]]+"-"+$n[t[e+6]]+$n[t[e+7]]+"-"+$n[t[e+8]]+$n[t[e+9]]+"-"+$n[t[e+10]]+$n[t[e+11]]+$n[t[e+12]]+$n[t[e+13]]+$n[t[e+14]]+$n[t[e+15]]}function efe(t,e=0){const r=mL(t,e);if(!(0,Yde.default)(r))throw TypeError("Stringified UUID is invalid");return r}var tfe=efe;fc.default=tfe;Object.defineProperty(I2,"__esModule",{value:!0});I2.default=void 0;var rfe=ife(P2),nfe=fc;function ife(t){return t&&t.__esModule?t:{default:t}}let j4,qT,VT=0,HT=0;function afe(t,e,r){let n=e&&r||0;const a=e||new Array(16);t=t||{};let s=t.node||j4,o=t.clockseq!==void 0?t.clockseq:qT;if(s==null||o==null){const f=t.random||(t.rng||rfe.default)();s==null&&(s=j4=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),o==null&&(o=qT=(f[6]<<8|f[7])&16383)}let u=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:HT+1;const l=u-VT+(c-HT)/1e4;if(l<0&&t.clockseq===void 0&&(o=o+1&16383),(l<0||u>VT)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");VT=u,HT=c,qT=o,u+=122192928e5;const d=((u&268435455)*1e4+c)%4294967296;a[n++]=d>>>24&255,a[n++]=d>>>16&255,a[n++]=d>>>8&255,a[n++]=d&255;const h=u/4294967296*1e4&268435455;a[n++]=h>>>8&255,a[n++]=h&255,a[n++]=h>>>24&15|16,a[n++]=h>>>16&255,a[n++]=o>>>8|128,a[n++]=o&255;for(let f=0;f<6;++f)a[n+f]=s[f];return e||(0,nfe.unsafeStringify)(a)}var sfe=afe;I2.default=sfe;var N2={},rc={},uy={};Object.defineProperty(uy,"__esModule",{value:!0});uy.default=void 0;var ofe=ufe(Fl);function ufe(t){return t&&t.__esModule?t:{default:t}}function cfe(t){if(!(0,ofe.default)(t))throw TypeError("Invalid UUID");let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var lfe=cfe;uy.default=lfe;Object.defineProperty(rc,"__esModule",{value:!0});rc.URL=rc.DNS=void 0;rc.default=yfe;var dfe=fc,ffe=hfe(uy);function hfe(t){return t&&t.__esModule?t:{default:t}}function pfe(t){t=unescape(encodeURIComponent(t));const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}const gL="6ba7b810-9dad-11d1-80b4-00c04fd430c8";rc.DNS=gL;const _L="6ba7b811-9dad-11d1-80b4-00c04fd430c8";rc.URL=_L;function yfe(t,e,r){function n(a,s,o,u){var c;if(typeof a=="string"&&(a=pfe(a)),typeof s=="string"&&(s=(0,ffe.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+a.length);if(l.set(s),l.set(a,s.length),l=r(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){u=u||0;for(let d=0;d<16;++d)o[u+d]=l[d];return o}return(0,dfe.unsafeStringify)(l)}try{n.name=t}catch{}return n.DNS=gL,n.URL=_L,n}var j2={};Object.defineProperty(j2,"__esModule",{value:!0});j2.default=void 0;function bfe(t){if(typeof t=="string"){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return mfe(gfe(_fe(t),t.length*8))}function mfe(t){const e=[],r=t.length*32,n="0123456789abcdef";for(let a=0;a<r;a+=8){const s=t[a>>5]>>>a%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function vL(t){return(t+64>>>9<<4)+14+1}function gfe(t,e){t[e>>5]|=128<<e%32,t[vL(e)-1]=e;let r=1732584193,n=-271733879,a=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const u=r,c=n,l=a,d=s;r=zn(r,n,a,s,t[o],7,-680876936),s=zn(s,r,n,a,t[o+1],12,-389564586),a=zn(a,s,r,n,t[o+2],17,606105819),n=zn(n,a,s,r,t[o+3],22,-1044525330),r=zn(r,n,a,s,t[o+4],7,-176418897),s=zn(s,r,n,a,t[o+5],12,1200080426),a=zn(a,s,r,n,t[o+6],17,-1473231341),n=zn(n,a,s,r,t[o+7],22,-45705983),r=zn(r,n,a,s,t[o+8],7,1770035416),s=zn(s,r,n,a,t[o+9],12,-1958414417),a=zn(a,s,r,n,t[o+10],17,-42063),n=zn(n,a,s,r,t[o+11],22,-1990404162),r=zn(r,n,a,s,t[o+12],7,1804603682),s=zn(s,r,n,a,t[o+13],12,-40341101),a=zn(a,s,r,n,t[o+14],17,-1502002290),n=zn(n,a,s,r,t[o+15],22,1236535329),r=Wn(r,n,a,s,t[o+1],5,-165796510),s=Wn(s,r,n,a,t[o+6],9,-1069501632),a=Wn(a,s,r,n,t[o+11],14,643717713),n=Wn(n,a,s,r,t[o],20,-373897302),r=Wn(r,n,a,s,t[o+5],5,-701558691),s=Wn(s,r,n,a,t[o+10],9,38016083),a=Wn(a,s,r,n,t[o+15],14,-660478335),n=Wn(n,a,s,r,t[o+4],20,-405537848),r=Wn(r,n,a,s,t[o+9],5,568446438),s=Wn(s,r,n,a,t[o+14],9,-1019803690),a=Wn(a,s,r,n,t[o+3],14,-187363961),n=Wn(n,a,s,r,t[o+8],20,1163531501),r=Wn(r,n,a,s,t[o+13],5,-1444681467),s=Wn(s,r,n,a,t[o+2],9,-51403784),a=Wn(a,s,r,n,t[o+7],14,1735328473),n=Wn(n,a,s,r,t[o+12],20,-1926607734),r=Xn(r,n,a,s,t[o+5],4,-378558),s=Xn(s,r,n,a,t[o+8],11,-2022574463),a=Xn(a,s,r,n,t[o+11],16,1839030562),n=Xn(n,a,s,r,t[o+14],23,-35309556),r=Xn(r,n,a,s,t[o+1],4,-1530992060),s=Xn(s,r,n,a,t[o+4],11,1272893353),a=Xn(a,s,r,n,t[o+7],16,-155497632),n=Xn(n,a,s,r,t[o+10],23,-1094730640),r=Xn(r,n,a,s,t[o+13],4,681279174),s=Xn(s,r,n,a,t[o],11,-358537222),a=Xn(a,s,r,n,t[o+3],16,-722521979),n=Xn(n,a,s,r,t[o+6],23,76029189),r=Xn(r,n,a,s,t[o+9],4,-640364487),s=Xn(s,r,n,a,t[o+12],11,-421815835),a=Xn(a,s,r,n,t[o+15],16,530742520),n=Xn(n,a,s,r,t[o+2],23,-995338651),r=Kn(r,n,a,s,t[o],6,-198630844),s=Kn(s,r,n,a,t[o+7],10,1126891415),a=Kn(a,s,r,n,t[o+14],15,-1416354905),n=Kn(n,a,s,r,t[o+5],21,-57434055),r=Kn(r,n,a,s,t[o+12],6,1700485571),s=Kn(s,r,n,a,t[o+3],10,-1894986606),a=Kn(a,s,r,n,t[o+10],15,-1051523),n=Kn(n,a,s,r,t[o+1],21,-2054922799),r=Kn(r,n,a,s,t[o+8],6,1873313359),s=Kn(s,r,n,a,t[o+15],10,-30611744),a=Kn(a,s,r,n,t[o+6],15,-1560198380),n=Kn(n,a,s,r,t[o+13],21,1309151649),r=Kn(r,n,a,s,t[o+4],6,-145523070),s=Kn(s,r,n,a,t[o+11],10,-1120210379),a=Kn(a,s,r,n,t[o+2],15,718787259),n=Kn(n,a,s,r,t[o+9],21,-343485551),r=$u(r,u),n=$u(n,c),a=$u(a,l),s=$u(s,d)}return[r,n,a,s]}function _fe(t){if(t.length===0)return[];const e=t.length*8,r=new Uint32Array(vL(e));for(let n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function $u(t,e){const r=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(r>>16)<<16|r&65535}function vfe(t,e){return t<<e|t>>>32-e}function C2(t,e,r,n,a,s){return $u(vfe($u($u(e,t),$u(n,s)),a),r)}function zn(t,e,r,n,a,s,o){return C2(e&r|~e&n,t,e,a,s,o)}function Wn(t,e,r,n,a,s,o){return C2(e&n|r&~n,t,e,a,s,o)}function Xn(t,e,r,n,a,s,o){return C2(e^r^n,t,e,a,s,o)}function Kn(t,e,r,n,a,s,o){return C2(r^(e|~n),t,e,a,s,o)}var wfe=bfe;j2.default=wfe;Object.defineProperty(N2,"__esModule",{value:!0});N2.default=void 0;var Sfe=wL(rc),Tfe=wL(j2);function wL(t){return t&&t.__esModule?t:{default:t}}const Efe=(0,Sfe.default)("v3",48,Tfe.default);var Ofe=Efe;N2.default=Ofe;var F2={},M2={};Object.defineProperty(M2,"__esModule",{value:!0});M2.default=void 0;const Afe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var xfe={randomUUID:Afe};M2.default=xfe;Object.defineProperty(F2,"__esModule",{value:!0});F2.default=void 0;var C4=SL(M2),Rfe=SL(P2),Ife=fc;function SL(t){return t&&t.__esModule?t:{default:t}}function Pfe(t,e,r){if(C4.default.randomUUID&&!e&&!t)return C4.default.randomUUID();t=t||{};const n=t.random||(t.rng||Rfe.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let a=0;a<16;++a)e[r+a]=n[a];return e}return(0,Ife.unsafeStringify)(n)}var Dfe=Pfe;F2.default=Dfe;var L2={},B2={};Object.defineProperty(B2,"__esModule",{value:!0});B2.default=void 0;function Nfe(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function kT(t,e){return t<<e|t>>>32-e}function jfe(t){const e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){const o=unescape(encodeURIComponent(t));t=[];for(let u=0;u<o.length;++u)t.push(o.charCodeAt(u))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const n=t.length/4+2,a=Math.ceil(n/16),s=new Array(a);for(let o=0;o<a;++o){const u=new Uint32Array(16);for(let c=0;c<16;++c)u[c]=t[o*64+c*4]<<24|t[o*64+c*4+1]<<16|t[o*64+c*4+2]<<8|t[o*64+c*4+3];s[o]=u}s[a-1][14]=(t.length-1)*8/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(t.length-1)*8&4294967295;for(let o=0;o<a;++o){const u=new Uint32Array(80);for(let p=0;p<16;++p)u[p]=s[o][p];for(let p=16;p<80;++p)u[p]=kT(u[p-3]^u[p-8]^u[p-14]^u[p-16],1);let c=r[0],l=r[1],d=r[2],h=r[3],f=r[4];for(let p=0;p<80;++p){const b=Math.floor(p/20),y=kT(c,5)+Nfe(b,l,d,h)+f+e[b]+u[p]>>>0;f=h,h=d,d=kT(l,30)>>>0,l=c,c=y}r[0]=r[0]+c>>>0,r[1]=r[1]+l>>>0,r[2]=r[2]+d>>>0,r[3]=r[3]+h>>>0,r[4]=r[4]+f>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Cfe=jfe;B2.default=Cfe;Object.defineProperty(L2,"__esModule",{value:!0});L2.default=void 0;var Ffe=TL(rc),Mfe=TL(B2);function TL(t){return t&&t.__esModule?t:{default:t}}const Lfe=(0,Ffe.default)("v5",80,Mfe.default);var Bfe=Lfe;L2.default=Bfe;var $2={};Object.defineProperty($2,"__esModule",{value:!0});$2.default=void 0;var $fe="00000000-0000-0000-0000-000000000000";$2.default=$fe;var U2={};Object.defineProperty(U2,"__esModule",{value:!0});U2.default=void 0;var Ufe=qfe(Fl);function qfe(t){return t&&t.__esModule?t:{default:t}}function Vfe(t){if(!(0,Ufe.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var Hfe=Vfe;U2.default=Hfe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return o.default}});var e=d(I2),r=d(N2),n=d(F2),a=d(L2),s=d($2),o=d(U2),u=d(Fl),c=d(fc),l=d(uy);function d(h){return h&&h.__esModule?h:{default:h}}})(dR);var _h={},F4;function q2(){if(F4)return _h;F4=1,Object.defineProperty(_h,"__esModule",{value:!0}),_h.orderTypes=void 0;const t=_s,e=Qf(),r=Cl(),n=li,a=Ze;function s(l,d,h=!1,f,p){if(l===d)return 0;if(l===void 0)return-1;if(d===void 0)return 1;if(l.termType!==d.termType)return c[l.termType]<c[d.termType]?-1:1;if(l.equals(d))return 0;if(l.termType==="Quad"&&d.termType==="Quad"){const b=s(l.subject,d.subject,h,f,p);if(b!==0)return b;const y=s(l.predicate,d.predicate,h,f,p);if(y!==0)return y;const S=s(l.object,d.object,h,f,p);return S!==0?S:s(l.graph,d.graph,h,f,p)}if(l.termType==="Literal")return o(l,d,f,p);if(h)throw new a.InvalidCompareArgumentTypes(l,d);return u(l.value,d.value)}_h.orderTypes=s;function o(l,d,h,f){const p=e.regularFunctions[n.RegularOperator.GT],b=e.regularFunctions[n.RegularOperator.EQUAL],y={now:new Date,functionArgumentsCache:{},superTypeProvider:{discoverer:h||(()=>"term"),cache:f||new t.LRUCache({max:1e3})},defaultTimeZone:{zoneHours:0,zoneMinutes:0}},S=new r.TermTransformer(y.superTypeProvider),w=S.transformLiteral(l),I=S.transformLiteral(d);try{return b.apply([w,I],y).typedValue?0:p.apply([w,I],y).typedValue?1:-1}catch{const O=u(w.dataType,I.dataType);return O!==0?O:u(w.str(),I.str())}}function u(l,d){return l===d?0:l<d?-1:1}const c={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5};return _h}var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.langMatches=Wu.replace=Wu.matches=void 0;function kfe(t,e,r){return new RegExp(e,r).test(t)}Wu.matches=kfe;function Qfe(t,e,r,n){let a=new RegExp(e,n);if(!a.global){const s=n||"";a=new RegExp(e,`${s}g`)}return t.replace(a,r)}Wu.replace=Qfe;function Gfe(t,e){const r=t.split("-"),n=e.split("-");if(!L4(n[0],r[0])&&!M4(r[0]))return!1;let a=1,s=1;for(;s<n.length;){if(M4(n[s])){s++;continue}if(a===r.length)return!1;if(L4(n[s],r[a])){a++,s++;continue}if(r[a].length===1)return!1;a++}return!0}Wu.langMatches=Gfe;function M4(t){return t==="*"}function L4(t,e){return new RegExp(`/${t}/`,"iu").test(`/${e}/`)}var B4;function zfe(){if(B4)return gh;B4=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.definitions=void 0;const t=Hde,e=zm,r=yt,n=Na,a=kde,s=dR,o=ha(),u=Cl(),c=li,l=li,d=Mt,h=Ze,f=q2(),p=ko,b=Aa,y=co(),S=Wu,w=Qf(),I=new r.DataFactory,O={arity:1,overloads:(0,y.declare)(c.RegularOperator.NOT).onTerm1(()=>_=>(0,y.bool)(!_.coerceEBV())).collect()},T={arity:1,overloads:(0,y.declare)(c.RegularOperator.UPLUS).numericConverter(()=>_=>_).collect()},x={arity:1,overloads:(0,y.declare)(c.RegularOperator.UMINUS).numericConverter(()=>_=>-_).collect()},P={arity:2,overloads:(0,y.declare)(c.RegularOperator.MULTIPLICATION).arithmetic(()=>(_,k)=>new t.BigNumber(_).times(k).toNumber()).collect()},B={arity:2,overloads:(0,y.declare)(c.RegularOperator.DIVISION).arithmetic(()=>(_,k)=>new t.BigNumber(_).div(k).toNumber()).onBinaryTyped([l.TypeURL.XSD_INTEGER,l.TypeURL.XSD_INTEGER],()=>(_,k)=>{if(k===0)throw new h.ExpressionError("Integer division by 0");return(0,y.decimal)(new t.BigNumber(_).div(k).toNumber())}).collect()},Q={arity:2,overloads:(0,y.declare)(c.RegularOperator.ADDITION).arithmetic(()=>(_,k)=>new t.BigNumber(_).plus(k).toNumber()).set([l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([_,k])=>new o.DateTimeLiteral((0,p.addDurationToDateTime)(_.typedValue,(0,d.defaultedDurationRepresentation)(k.typedValue)))).copy({from:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],to:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([l.TypeURL.XSD_DATE,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([_,k])=>new o.DateLiteral((0,p.addDurationToDateTime)((0,d.defaultedDateTimeRepresentation)(_.typedValue),(0,d.defaultedDurationRepresentation)(k.typedValue)))).copy({from:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_DAY_TIME_DURATION],to:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([l.TypeURL.XSD_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([_,k])=>new o.TimeLiteral((0,p.addDurationToDateTime)((0,d.defaultedDateTimeRepresentation)(_.typedValue),(0,d.defaultedDurationRepresentation)(k.typedValue)))).copy({from:[l.TypeURL.XSD_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],to:[l.TypeURL.XSD_TIME,l.TypeURL.XSD_YEAR_MONTH_DURATION]}).collect()},N={arity:2,overloads:(0,y.declare)(c.RegularOperator.SUBTRACTION).arithmetic(()=>(_,k)=>new t.BigNumber(_).minus(k).toNumber()).set([l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DATE_TIME],({defaultTimeZone:_})=>([k,le])=>new o.DayTimeDurationLiteral((0,p.elapsedDuration)(k.typedValue,le.typedValue,_))).copy({from:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_DATE]}).copy({from:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_TIME,l.TypeURL.XSD_TIME]}).set([l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([_,k])=>new o.DateTimeLiteral((0,p.addDurationToDateTime)(_.typedValue,(0,d.defaultedDurationRepresentation)((0,d.negateDuration)(k.typedValue))))).copy({from:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],to:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([l.TypeURL.XSD_DATE,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([_,k])=>new o.DateLiteral((0,p.addDurationToDateTime)((0,d.defaultedDateTimeRepresentation)(_.typedValue),(0,d.defaultedDurationRepresentation)((0,d.negateDuration)(k.typedValue))))).copy({from:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_DAY_TIME_DURATION],to:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([l.TypeURL.XSD_TIME,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([_,k])=>new o.TimeLiteral((0,p.addDurationToDateTime)((0,d.defaultedDateTimeRepresentation)(_.typedValue),(0,d.defaultedDurationRepresentation)((0,d.negateDuration)(k.typedValue))))).collect()},D={arity:2,overloads:(0,y.declare)(c.RegularOperator.EQUAL).numberTest(()=>(_,k)=>_===k).stringTest(()=>(_,k)=>_.localeCompare(k)===0).set([l.TypeURL.RDF_LANG_STRING,l.TypeURL.RDF_LANG_STRING],()=>([_,k])=>(0,y.bool)(_.str()===k.str()&&_.language===k.language)).set([l.TypeAlias.SPARQL_STRINGLY,l.TypeAlias.SPARQL_STRINGLY],()=>()=>(0,y.bool)(!1)).booleanTest(()=>(_,k)=>_===k).dateTimeTest(({defaultTimeZone:_})=>(k,le)=>(0,d.toUTCDate)(k,_).getTime()===(0,d.toUTCDate)(le,_).getTime()).copy({from:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_DATE]}).set(["quad","quad"],_=>([k,le])=>{const Te=new b.RegularFunction(l.RegularOperator.EQUAL,D);return(0,y.bool)(Te.apply([k.subject,le.subject],_).coerceEBV()&&Te.apply([k.predicate,le.predicate],_).coerceEBV()&&Te.apply([k.object,le.object],_).coerceEBV())},!1).set(["term","term"],()=>([_,k])=>(0,y.bool)(F(_,k)),!1).set([l.TypeURL.XSD_DURATION,l.TypeURL.XSD_DURATION],()=>([_,k])=>(0,y.bool)((0,d.yearMonthDurationsToMonths)((0,d.defaultedYearMonthDurationRepresentation)(_.typedValue))===(0,d.yearMonthDurationsToMonths)((0,d.defaultedYearMonthDurationRepresentation)(k.typedValue))&&(0,d.dayTimeDurationsToSeconds)((0,d.defaultedDayTimeDurationRepresentation)(_.typedValue))===(0,d.dayTimeDurationsToSeconds)((0,d.defaultedDayTimeDurationRepresentation)(k.typedValue)))).set([l.TypeURL.XSD_TIME,l.TypeURL.XSD_TIME],({defaultTimeZone:_})=>([k,le])=>(0,y.bool)((0,d.toUTCDate)((0,d.defaultedDateTimeRepresentation)(k.typedValue),_).getTime()===(0,d.toUTCDate)((0,d.defaultedDateTimeRepresentation)(le.typedValue),_).getTime())).collect()};function F(_,k){const le=_.toRDF(),Te=k.toRDF(),Se=le.equals(Te);if(!Se&&le.termType==="Literal"&&Te.termType==="Literal")throw new h.RDFEqualTypeError([_,k]);return Se}const W={arity:2,overloads:(0,y.declare)(c.RegularOperator.NOT_EQUAL).set(["term","term"],_=>([k,le])=>(0,y.bool)(!w.regularFunctions[c.RegularOperator.EQUAL].apply([k,le],_).typedValue)).collect()},z={arity:2,overloads:(0,y.declare)(c.RegularOperator.LT).numberTest(()=>(_,k)=>_<k).stringTest(()=>(_,k)=>_.localeCompare(k)===-1).booleanTest(()=>(_,k)=>_<k).set(["quad","quad"],()=>([_,k])=>(0,y.bool)((0,f.orderTypes)(_.toRDF(),k.toRDF(),!0)===-1),!1).dateTimeTest(({defaultTimeZone:_})=>(k,le)=>(0,d.toUTCDate)(k,_).getTime()<(0,d.toUTCDate)(le,_).getTime()).copy({from:[l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_DATE,l.TypeURL.XSD_DATE]}).set([l.TypeURL.XSD_YEAR_MONTH_DURATION,l.TypeURL.XSD_YEAR_MONTH_DURATION],()=>([_,k])=>(0,y.bool)((0,d.yearMonthDurationsToMonths)((0,d.defaultedYearMonthDurationRepresentation)(_.typedValue))<(0,d.yearMonthDurationsToMonths)((0,d.defaultedYearMonthDurationRepresentation)(k.typedValue)))).set([l.TypeURL.XSD_DAY_TIME_DURATION,l.TypeURL.XSD_DAY_TIME_DURATION],()=>([_,k])=>(0,y.bool)((0,d.dayTimeDurationsToSeconds)((0,d.defaultedDayTimeDurationRepresentation)(_.typedValue))<(0,d.dayTimeDurationsToSeconds)((0,d.defaultedDayTimeDurationRepresentation)(k.typedValue)))).set([l.TypeURL.XSD_TIME,l.TypeURL.XSD_TIME],({defaultTimeZone:_})=>([k,le])=>(0,y.bool)((0,d.toUTCDate)((0,d.defaultedDateTimeRepresentation)(k.typedValue),_).getTime()<(0,d.toUTCDate)((0,d.defaultedDateTimeRepresentation)(le.typedValue),_).getTime())).collect()},M={arity:2,overloads:(0,y.declare)(c.RegularOperator.GT).set(["term","term"],_=>([k,le])=>w.regularFunctions[c.RegularOperator.LT].apply([le,k],_)).collect()},C={arity:2,overloads:(0,y.declare)(c.RegularOperator.LTE).set(["term","term"],_=>([k,le])=>(0,y.bool)(w.regularFunctions[c.RegularOperator.LT].apply([k,le],_).typedValue||w.regularFunctions[c.RegularOperator.EQUAL].apply([k,le],_).typedValue)).collect()},V={arity:2,overloads:(0,y.declare)(c.RegularOperator.GTE).set(["term","term"],_=>([k,le])=>w.regularFunctions[c.RegularOperator.LTE].apply([le,k],_)).collect()},ie={arity:1,overloads:(0,y.declare)(c.RegularOperator.IS_IRI).onTerm1(()=>_=>(0,y.bool)(_.termType==="namedNode")).collect()},ne={arity:1,overloads:(0,y.declare)(c.RegularOperator.IS_BLANK).onTerm1(()=>_=>(0,y.bool)(_.termType==="blankNode")).collect()},fe={arity:1,overloads:(0,y.declare)(c.RegularOperator.IS_LITERAL).onTerm1(()=>_=>(0,y.bool)(_.termType==="literal")).collect()},_e={arity:1,overloads:(0,y.declare)(c.RegularOperator.IS_NUMERIC).onNumeric1(()=>()=>(0,y.bool)(!0)).onTerm1(()=>()=>(0,y.bool)(!1)).collect()},we={arity:1,overloads:(0,y.declare)(c.RegularOperator.STR).onTerm1(()=>_=>(0,y.string)(_.str())).collect()},Ce={arity:1,overloads:(0,y.declare)(c.RegularOperator.LANG).onLiteral1(()=>_=>(0,y.string)(_.language||"")).collect()},oe={arity:1,overloads:(0,y.declare)(c.RegularOperator.DATATYPE).onLiteral1(()=>_=>new o.NamedNode(_.dataType)).collect()},ae={arity:1,overloads:(0,y.declare)(c.RegularOperator.IRI).set(["namedNode"],_=>k=>{const le=k[0],Te=(0,n.resolve)(le.str(),_.baseIRI||"");return new o.NamedNode(Te)}).onString1(_=>k=>{const le=(0,n.resolve)(k.str(),_.baseIRI||"");return new o.NamedNode(le)}).collect()},Ae={arity:2,overloads:(0,y.declare)(c.RegularOperator.STRDT).set([l.TypeURL.XSD_STRING,"namedNode"],({superTypeProvider:_})=>([k,le])=>{const Te=I.literal(k.typedValue,I.namedNode(le.value));return new u.TermTransformer(_).transformLiteral(Te)}).collect()},Ie={arity:2,overloads:(0,y.declare)(c.RegularOperator.STRLANG).onBinaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>(_,k)=>new o.LangStringLiteral(_,k.toLowerCase())).collect()},he={arity:0,overloads:(0,y.declare)(c.RegularOperator.UUID).set([],()=>()=>new o.NamedNode(`urn:uuid:${s.v4()}`)).collect()},ve={arity:0,overloads:(0,y.declare)(c.RegularOperator.STRUUID).set([],()=>()=>(0,y.string)(s.v4())).collect()},me={arity:1,overloads:(0,y.declare)(c.RegularOperator.STRLEN).onStringly1(()=>_=>(0,y.integer)([..._.typedValue].length)).collect()},L={arity:[2,3],overloads:(0,y.declare)(c.RegularOperator.SUBSTR).onBinaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_INTEGER],()=>(_,k)=>(0,y.string)([..._].slice(k-1).join(""))).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.XSD_INTEGER],()=>(_,k)=>{const le=[..._.typedValue].slice(k.typedValue-1).join("");return(0,y.langString)(le,_.language)}).onTernaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_INTEGER,l.TypeURL.XSD_INTEGER],()=>(_,k,le)=>(0,y.string)([..._].slice(k-1,le+k-1).join(""))).onTernary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.XSD_INTEGER,l.TypeURL.XSD_INTEGER],()=>(_,k,le)=>{const Te=[..._.typedValue].slice(k.typedValue-1,le.typedValue+k.typedValue-1).join("");return(0,y.langString)(Te,_.language)}).collect()},H={arity:1,overloads:(0,y.declare)(c.RegularOperator.UCASE).onString1Typed(()=>_=>(0,y.string)(_.toUpperCase())).onLangString1(()=>_=>(0,y.langString)(_.typedValue.toUpperCase(),_.language)).collect()},A={arity:1,overloads:(0,y.declare)(c.RegularOperator.LCASE).onString1Typed(()=>_=>(0,y.string)(_.toLowerCase())).onLangString1(()=>_=>(0,y.langString)(_.typedValue.toLowerCase(),_.language)).collect()},m={arity:2,overloads:(0,y.declare)(c.RegularOperator.STRSTARTS).onBinaryTyped([l.TypeAlias.SPARQL_STRINGLY,l.TypeURL.XSD_STRING],()=>(_,k)=>(0,y.bool)(_.startsWith(k))).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.RDF_LANG_STRING],()=>(_,k)=>{if(_.language!==k.language)throw new h.IncompatibleLanguageOperation(_,k);return(0,y.bool)(_.typedValue.startsWith(k.typedValue))}).collect()},v={arity:2,overloads:(0,y.declare)(c.RegularOperator.STRENDS).onBinaryTyped([l.TypeAlias.SPARQL_STRINGLY,l.TypeURL.XSD_STRING],()=>(_,k)=>(0,y.bool)(_.endsWith(k))).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.RDF_LANG_STRING],()=>(_,k)=>{if(_.language!==k.language)throw new h.IncompatibleLanguageOperation(_,k);return(0,y.bool)(_.typedValue.endsWith(k.typedValue))}).collect()},j={arity:2,overloads:(0,y.declare)(c.RegularOperator.CONTAINS).onBinaryTyped([l.TypeAlias.SPARQL_STRINGLY,l.TypeURL.XSD_STRING],()=>(_,k)=>(0,y.bool)(_.includes(k))).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.RDF_LANG_STRING],()=>(_,k)=>{if(_.language!==k.language)throw new h.IncompatibleLanguageOperation(_,k);return(0,y.bool)(_.typedValue.includes(k.typedValue))}).collect()},q={arity:2,overloads:(0,y.declare)(c.RegularOperator.STRBEFORE).onBinaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>(_,k)=>(0,y.string)(_.slice(0,Math.max(0,_.indexOf(k))))).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.XSD_STRING],()=>(_,k)=>{const[le,Te]=[_.typedValue,k.typedValue],Se=_.typedValue.slice(0,Math.max(0,le.indexOf(Te)));return Se||!Te?(0,y.langString)(Se,_.language):(0,y.string)(Se)}).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.RDF_LANG_STRING],()=>(_,k)=>{if(_.language!==k.language)throw new h.IncompatibleLanguageOperation(_,k);const[le,Te]=[_.typedValue,k.typedValue],Se=_.typedValue.slice(0,Math.max(0,le.indexOf(Te)));return Se||!Te?(0,y.langString)(Se,_.language):(0,y.string)(Se)}).collect()},$={arity:2,overloads:(0,y.declare)(c.RegularOperator.STRAFTER).onBinaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>(_,k)=>(0,y.string)(_.slice(_.indexOf(k)).slice(k.length))).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.XSD_STRING],()=>(_,k)=>{const[le,Te]=[_.typedValue,k.typedValue],Se=le.slice(le.indexOf(Te)).slice(Te.length);return Se||!Te?(0,y.langString)(Se,_.language):(0,y.string)(Se)}).onBinary([l.TypeURL.RDF_LANG_STRING,l.TypeURL.RDF_LANG_STRING],()=>(_,k)=>{if(_.language!==k.language)throw new h.IncompatibleLanguageOperation(_,k);const[le,Te]=[_.typedValue,k.typedValue],Se=le.slice(le.indexOf(Te)).slice(Te.length);return Se||!Te?(0,y.langString)(Se,_.language):(0,y.string)(Se)}).collect()},G={arity:1,overloads:(0,y.declare)(c.RegularOperator.ENCODE_FOR_URI).onStringly1Typed(()=>_=>(0,y.string)(encodeURI(_))).collect()},Y={arity:2,overloads:(0,y.declare)(c.RegularOperator.LANG_MATCHES).onBinaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>(_,k)=>(0,y.bool)(S.langMatches(_,k))).collect()},J=()=>(_,k)=>(0,y.bool)(S.matches(_,k)),re=()=>(_,k,le)=>(0,y.bool)(S.matches(_,k,le)),de={arity:[2,3],overloads:(0,y.declare)(c.RegularOperator.REGEX).onBinaryTyped([l.TypeAlias.SPARQL_STRINGLY,l.TypeURL.XSD_STRING],J).onTernaryTyped([l.TypeAlias.SPARQL_STRINGLY,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],re).collect()},be={arity:[3,4],overloads:(0,y.declare)(c.RegularOperator.REPLACE).onTernaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>(_,k,le)=>(0,y.string)(S.replace(_,k,le))).set([l.TypeURL.RDF_LANG_STRING,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>([_,k,le])=>{const Te=S.replace(_.typedValue,k.typedValue,le.typedValue);return(0,y.langString)(Te,_.language)}).onQuaternaryTyped([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>(_,k,le,Te)=>(0,y.string)(S.replace(_,k,le,Te))).set([l.TypeURL.RDF_LANG_STRING,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],()=>([_,k,le,Te])=>{const Se=S.replace(_.typedValue,k.typedValue,le.typedValue,Te.typedValue);return(0,y.langString)(Se,_.language)}).collect()},Ee={arity:1,overloads:(0,y.declare)(c.RegularOperator.ABS).numericConverter(()=>_=>Math.abs(_)).collect()},xe={arity:1,overloads:(0,y.declare)(c.RegularOperator.ROUND).numericConverter(()=>_=>Math.round(_)).collect()},Pe={arity:1,overloads:(0,y.declare)(c.RegularOperator.CEIL).numericConverter(()=>_=>Math.ceil(_)).collect()},U={arity:1,overloads:(0,y.declare)(c.RegularOperator.FLOOR).numericConverter(()=>_=>Math.floor(_)).collect()},E={arity:0,overloads:(0,y.declare)(c.RegularOperator.RAND).set([],()=>()=>(0,y.double)(Math.random())).collect()},R={arity:0,overloads:(0,y.declare)(c.RegularOperator.NOW).set([],_=>()=>new o.DateTimeLiteral((0,d.toDateTimeRepresentation)({date:_.now,timeZone:_.defaultTimeZone}))).collect()},K={arity:1,overloads:(0,y.declare)(c.RegularOperator.YEAR).onDateTime1(()=>_=>(0,y.integer)(_.typedValue.year)).set([l.TypeURL.XSD_DATE],()=>([_])=>(0,y.integer)(_.typedValue.year)).collect()},ce={arity:1,overloads:(0,y.declare)(c.RegularOperator.MONTH).onDateTime1(()=>_=>(0,y.integer)(_.typedValue.month)).set([l.TypeURL.XSD_DATE],()=>([_])=>(0,y.integer)(_.typedValue.month)).collect()},ye={arity:1,overloads:(0,y.declare)(c.RegularOperator.DAY).onDateTime1(()=>_=>(0,y.integer)(_.typedValue.day)).set([l.TypeURL.XSD_DATE],()=>([_])=>(0,y.integer)(_.typedValue.day)).collect()},ge={arity:1,overloads:(0,y.declare)(c.RegularOperator.HOURS).onDateTime1(()=>_=>(0,y.integer)(_.typedValue.hours)).set([l.TypeURL.XSD_TIME],()=>([_])=>(0,y.integer)(_.typedValue.hours)).collect()},$e={arity:1,overloads:(0,y.declare)(c.RegularOperator.MINUTES).onDateTime1(()=>_=>(0,y.integer)(_.typedValue.minutes)).set([l.TypeURL.XSD_TIME],()=>([_])=>(0,y.integer)(_.typedValue.minutes)).collect()},ke={arity:1,overloads:(0,y.declare)(c.RegularOperator.SECONDS).onDateTime1(()=>_=>(0,y.decimal)(_.typedValue.seconds)).set([l.TypeURL.XSD_TIME],()=>([_])=>(0,y.integer)(_.typedValue.seconds)).collect()},Xe={arity:1,overloads:(0,y.declare)(c.RegularOperator.TIMEZONE).onDateTime1(()=>_=>{const k={hours:_.typedValue.zoneHours,minutes:_.typedValue.zoneMinutes};if(k.hours===void 0&&k.minutes===void 0)throw new h.InvalidTimezoneCall(_.str());return new o.DayTimeDurationLiteral(k)}).copy({from:[l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_DATE]}).copy({from:[l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_TIME]}).collect()},Ke={arity:1,overloads:(0,y.declare)(c.RegularOperator.TZ).onDateTime1(()=>_=>(0,y.string)((0,d.extractRawTimeZone)(_.str()))).copy({from:[l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_DATE]}).copy({from:[l.TypeURL.XSD_DATE_TIME],to:[l.TypeURL.XSD_TIME]}).collect()},ht={arity:1,overloads:(0,y.declare)(c.RegularOperator.MD5).onString1Typed(()=>_=>(0,y.string)((0,a.hash)(_))).collect()},rn={arity:1,overloads:(0,y.declare)(c.RegularOperator.SHA1).onString1Typed(()=>_=>(0,y.string)((0,e.sha1)().update(_).digest("hex"))).collect()},Vr={arity:1,overloads:(0,y.declare)(c.RegularOperator.SHA256).onString1Typed(()=>_=>(0,y.string)((0,e.sha256)().update(_).digest("hex"))).collect()},nn={arity:1,overloads:(0,y.declare)(c.RegularOperator.SHA384).onString1Typed(()=>_=>(0,y.string)((0,e.sha384)().update(_).digest("hex"))).collect()},br={arity:1,overloads:(0,y.declare)(c.RegularOperator.SHA512).onString1Typed(()=>_=>(0,y.string)((0,e.sha512)().update(_).digest("hex"))).collect()},Pn={arity:3,overloads:(0,y.declare)(c.RegularOperator.TRIPLE).onTerm3(_=>(...k)=>new o.Quad(I.quad(k[0].toRDF(),k[1].toRDF(),k[2].toRDF()),_.superTypeProvider)).collect()},vr={arity:1,overloads:(0,y.declare)(c.RegularOperator.SUBJECT).onQuad1(()=>_=>_.subject).collect()},wr={arity:1,overloads:(0,y.declare)(c.RegularOperator.PREDICATE).onQuad1(()=>_=>_.predicate).collect()},an={arity:1,overloads:(0,y.declare)(c.RegularOperator.OBJECT).onQuad1(()=>_=>_.object).collect()},te={arity:1,overloads:(0,y.declare)(c.RegularOperator.IS_TRIPLE).onTerm1(()=>_=>(0,y.bool)(_.termType==="quad")).collect()};return gh.definitions={"!":O,uplus:T,uminus:x,"*":P,"/":B,"+":Q,"-":N,"=":D,"!=":W,"<":z,">":M,"<=":C,">=":V,isiri:ie,isuri:ie,isblank:ne,isliteral:fe,isnumeric:_e,str:we,lang:Ce,datatype:oe,iri:ae,uri:ae,strdt:Ae,strlang:Ie,uuid:he,struuid:ve,strlen:me,substr:L,ucase:H,lcase:A,strstarts:m,strends:v,contains:j,strbefore:q,strafter:$,encode_for_uri:G,langmatches:Y,regex:de,replace:be,abs:Ee,round:xe,ceil:Pe,floor:U,rand:E,now:R,year:K,month:ce,day:ye,hours:ge,minutes:$e,seconds:ke,timezone:Xe,tz:Ke,md5:ht,sha1:rn,sha256:Vr,sha384:nn,sha512:br,triple:Pn,subject:vr,predicate:wr,object:an,istriple:te},gh}var vh={},$4;function Wfe(){if($4)return vh;$4=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.specialDefinitions=void 0;const t=dR,e=ha(),r=li,n=Ze,a=co(),s=Qf(),o={arity:1,async applyAsync({args:B,mapping:Q}){return u({args:B,mapping:Q})},applySynchronously({args:B,mapping:Q}){return u({args:B,mapping:Q})}};function u({args:B,mapping:Q}){const N=B[0];if(N.expressionType!==e.ExpressionType.Variable)throw new n.InvalidArgumentTypes(B,r.SpecialOperator.BOUND);const D=Q.has((0,a.expressionToVar)(N));return(0,a.bool)(D)}const c={arity:3,async applyAsync({args:B,mapping:Q,evaluate:N}){const F=(await N(B[0],Q)).coerceEBV();return N(F?B[1]:B[2],Q)},applySynchronously({args:B,mapping:Q,evaluate:N}){const F=N(B[0],Q).coerceEBV();return N(F?B[1]:B[2],Q)}},l={arity:Number.POSITIVE_INFINITY,async applyAsync({args:B,mapping:Q,evaluate:N}){const D=[];for(const F of B)try{return await N(F,Q)}catch(W){D.push(W)}throw new n.CoalesceError(D)},applySynchronously({args:B,mapping:Q,evaluate:N}){const D=[];for(const F of B)try{return N(F,Q)}catch(W){D.push(W)}throw new n.CoalesceError(D)}},d={arity:2,async applyAsync({args:B,mapping:Q,evaluate:N}){const[D,F]=B;try{if((await N(D,Q)).coerceEBV())return(0,a.bool)(!0);const C=(await N(F,Q)).coerceEBV();return(0,a.bool)(C)}catch(W){if(!(await N(F,Q)).coerceEBV())throw W;return(0,a.bool)(!0)}},applySynchronously({args:B,mapping:Q,evaluate:N}){const[D,F]=B;try{if(N(D,Q).coerceEBV())return(0,a.bool)(!0);const C=N(F,Q).coerceEBV();return(0,a.bool)(C)}catch(W){if(!N(F,Q).coerceEBV())throw W;return(0,a.bool)(!0)}}},h={arity:2,async applyAsync({args:B,mapping:Q,evaluate:N}){const[D,F]=B;try{if(!(await N(D,Q)).coerceEBV())return(0,a.bool)(!1);const C=(await N(F,Q)).coerceEBV();return(0,a.bool)(C)}catch(W){if((await N(F,Q)).coerceEBV())throw W;return(0,a.bool)(!1)}},applySynchronously({args:B,mapping:Q,evaluate:N}){const[D,F]=B;try{if(!N(D,Q).coerceEBV())return(0,a.bool)(!1);const C=N(F,Q).coerceEBV();return(0,a.bool)(C)}catch(W){if(N(F,Q).coerceEBV())throw W;return(0,a.bool)(!1)}}},f={arity:2,async applyAsync({args:B,mapping:Q,evaluate:N}){const[D,F]=B.map(M=>N(M,Q)),[W,z]=await Promise.all([D,F]);return(0,a.bool)(W.toRDF().equals(z.toRDF()))},applySynchronously({args:B,mapping:Q,evaluate:N}){const[D,F]=B.map(W=>N(W,Q));return(0,a.bool)(D.toRDF().equals(F.toRDF()))}},p={arity:Number.POSITIVE_INFINITY,checkArity(B){return B.length>0},async applyAsync(B){const{args:Q,mapping:N,evaluate:D}=B,[F,...W]=Q,z=await D(F,N);return b(z,{...B,args:W},[])},applySynchronously(B){const{args:Q,mapping:N,evaluate:D}=B,[F,...W]=Q,z=D(F,N);return y(z,{...B,args:W},[])}};async function b(B,Q,N){const{args:D,mapping:F,evaluate:W}=Q;if(D.length===0)return N.every(M=>!M)?(0,a.bool)(!1):Promise.reject(new n.InError(N));try{const z=D.shift(),M=await W(z,F);return s.regularFunctions[r.RegularOperator.EQUAL].apply([B,M],Q).typedValue?(0,a.bool)(!0):b(B,Q,[...N,!1])}catch(z){return b(B,Q,[...N,z])}}function y(B,Q,N){const{args:D,mapping:F,evaluate:W}=Q;if(D.length===0){if(N.every(M=>!M))return(0,a.bool)(!1);throw new n.InError(N)}try{const z=D.shift(),M=W(z,F);return s.regularFunctions[r.RegularOperator.EQUAL].apply([B,M],Q).typedValue?(0,a.bool)(!0):y(B,Q,[...N,!1])}catch(z){return y(B,Q,[...N,z])}}const S={arity:Number.POSITIVE_INFINITY,checkArity(B){return B.length>0},async applyAsync(B){const N=await s.specialFunctions[r.SpecialOperator.IN].applyAsync(B);return(0,a.bool)(!N.typedValue)},applySynchronously(B){const N=s.specialFunctions[r.SpecialOperator.IN].applySynchronously(B);return(0,a.bool)(!N.typedValue)}},w=(0,a.declare)(r.SpecialOperator.CONCAT).onStringly1(()=>B=>B).collect(),I={arity:Number.POSITIVE_INFINITY,async applyAsync(B){const{args:Q,mapping:N,evaluate:D,functionArgumentsCache:F,superTypeProvider:W}=B,z=Q.map(async ne=>D(ne,N)).map(async ne=>{const fe=w.search([await ne],W,F);if(!fe)throw new n.InvalidArgumentTypes(Q,r.SpecialOperator.CONCAT);return fe(B)([await ne])}),M=await Promise.all(z),V=M.map(ne=>ne.typedValue).join(""),ie=O(M)?M[0].language:void 0;return ie?(0,a.langString)(V,ie):(0,a.string)(V)},applySynchronously(B){const{args:Q,mapping:N,evaluate:D,superTypeProvider:F,functionArgumentsCache:W}=B,z=Q.map(ie=>D(ie,N)).map(ie=>{const ne=w.search([ie],F,W);if(!ne)throw new n.InvalidArgumentTypes(Q,r.SpecialOperator.CONCAT);return ne(B)([ie])}),C=z.map(ie=>ie.typedValue).join(""),V=O(z)?z[0].language:void 0;return V?(0,a.langString)(C,V):(0,a.string)(C)}};function O(B){return B.length>0&&B.every(Q=>Q.language===B[0].language)}const T=(0,a.declare)(r.SpecialOperator.BNODE).onString1(()=>B=>B).collect(),x={arity:Number.POSITIVE_INFINITY,checkArity(B){return B.length===0||B.length===1},async applyAsync(B){const{args:Q,mapping:N,evaluate:D,superTypeProvider:F,functionArgumentsCache:W}=B,z=Q.length===1?await D(Q[0],N):void 0;let M;if(z){const C=T.search([z],F,W);if(!C)throw new n.InvalidArgumentTypes(Q,r.SpecialOperator.BNODE);M=C(B)([z]).str()}if(B.bnode){const C=await B.bnode(M);return new e.BlankNode(C)}return P(M)},applySynchronously(B){const{args:Q,mapping:N,evaluate:D,superTypeProvider:F,functionArgumentsCache:W}=B,z=Q.length===1?D(Q[0],N):void 0;let M;if(z){const C=T.search([z],F,W);if(!C)throw new n.InvalidArgumentTypes(Q,r.SpecialOperator.BNODE);M=C(B)([z]).str()}if(B.bnode){const C=B.bnode(M);return new e.BlankNode(C)}return P(M)}};function P(B){return new e.BlankNode(B||t.v4())}return vh.specialDefinitions={bound:o,if:c,coalesce:l,"&&":h,"||":d,sameterm:f,in:p,notin:S,concat:I,bnode:x},vh}var U4;function Qf(){return U4||(U4=1,function(t){var e=g&&g.__createBinding||(Object.create?function(c,l,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(l,d);(!f||("get"in f?!l.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(c,h,f)}:function(c,l,d,h){h===void 0&&(h=d),c[h]=l[d]}),r=g&&g.__exportStar||function(c,l){for(var d in c)d!=="default"&&!Object.prototype.hasOwnProperty.call(l,d)&&e(l,c,d)};Object.defineProperty(t,"__esModule",{value:!0}),t.OverloadTree=t.namedFunctions=t.specialFunctions=t.regularFunctions=void 0;const n=Aa,a=R2,s=zfe(),o=Wfe();r(Aa,t),t.regularFunctions=Object.fromEntries(Object.entries(s.definitions).map(([c,l])=>[c,new n.RegularFunction(c,l)])),t.specialFunctions=Object.fromEntries(Object.entries(o.specialDefinitions).map(([c,l])=>[c,new n.SpecialFunction(c,l)])),t.namedFunctions=Object.fromEntries(Object.entries(a.namedDefinitions).map(([c,l])=>[c,new n.NamedFunction(c,l)]));var u=cL();Object.defineProperty(t,"OverloadTree",{enumerable:!0,get:function(){return u.OverloadTree}})}(UT)),UT}Object.defineProperty(oy,"__esModule",{value:!0});oy.AlgebraTransformer=void 0;const Xfe=Tt,yu=ha(),QT=Qf(),GT=li,R1=Ze,q4=Ze,Kfe=Cl();class Ad extends Kfe.TermTransformer{constructor(e){super(e.superTypeProvider),this.algebraConfig=e,this.creatorConfig={type:e.type,creator:e.creator}}transformAlgebra(e){const r=Xfe.Algebra.expressionTypes;switch(e.expressionType){case r.TERM:return this.transformTerm(e);case r.OPERATOR:return this.transformOperator(e);case r.NAMED:return this.transformNamed(e);case r.EXISTENCE:return Ad.transformExistence(e);case r.AGGREGATE:return Ad.transformAggregate(e);case r.WILDCARD:return Ad.transformWildcard(e)}}static transformWildcard(e){return new yu.NamedNode(e.wildcard.value)}transformOperator(e){const r=e.operator.toLowerCase();if(GT.SpecialOperators.has(r)){const o=r,u=e.args.map(l=>this.transformAlgebra(l)),c=QT.specialFunctions[o];if(!c.checkArity(u))throw new R1.InvalidArity(u,o);return new yu.SpecialOperator(u,c.applyAsync,c.applySynchronously)}if(!GT.Operators.has(r))throw new R1.UnknownOperator(e.operator);const n=r,a=e.args.map(o=>this.transformAlgebra(o)),s=QT.regularFunctions[n];if(!Ad.hasCorrectArity(a,s.arity))throw new R1.InvalidArity(a,n);return new yu.Operator(a,o=>s.apply(o,this.algebraConfig))}wrapSyncFunction(e,r){return n=>{try{const a=e(n.map(s=>s.toRDF()));return this.transformRDFTermUnsafe(a)}catch(a){throw new q4.ExtensionFunctionError(r,a)}}}wrapAsyncFunction(e,r){return async n=>{try{const a=await e(n.map(s=>s.toRDF()));return this.transformRDFTermUnsafe(a)}catch(a){throw new q4.ExtensionFunctionError(r,a)}}}transformNamed(e){const r=e.name.value,n=e.args.map(a=>this.transformAlgebra(a));if(GT.NamedOperators.has(r)){const a=e.name.value,s=QT.namedFunctions[a];return new yu.Named(e.name,n,o=>s.apply(o,this.algebraConfig))}if(this.creatorConfig.type==="sync"){const a=this.creatorConfig.creator(e.name);if(a){const s=this.wrapSyncFunction(a,e.name.value);return new yu.SyncExtension(e.name,n,s)}}else{const a=this.creatorConfig.creator(e.name);if(a){const s=this.wrapAsyncFunction(a,e.name.value);return new yu.AsyncExtension(e.name,n,s)}}throw new R1.UnknownNamedOperator(e.name.value)}static hasCorrectArity(e,r){return Array.isArray(r)?r.includes(e.length):e.length===r}static transformAggregate(e){const r=e.aggregator;return new yu.Aggregate(r,e)}static transformExistence(e){return new yu.Existence(e)}}oy.AlgebraTransformer=Ad;var V2={},cy={};Object.defineProperty(cy,"__esModule",{value:!0});cy.BaseExpressionEvaluator=void 0;const Jfe=co(),Yfe=Ze;class Zfe{constructor(e){this.termTransformer=e}term(e,r){return e}variable(e,r){const n=r.get((0,Jfe.expressionToVar)(e));if(!n)throw new Yfe.UnboundVariableError(e.name,r);return this.termTransformer.transformRDFTermUnsafe(n)}}cy.BaseExpressionEvaluator=Zfe;Object.defineProperty(V2,"__esModule",{value:!0});V2.AsyncRecursiveEvaluator=void 0;const Oo=ha(),ehe=Cl(),zT=Ze,the=cy;class rhe extends the.BaseExpressionEvaluator{constructor(e,r){super(r||new ehe.TermTransformer(e.superTypeProvider)),this.context=e,this.subEvaluators={[Oo.ExpressionType.Term]:this.term.bind(this),[Oo.ExpressionType.Variable]:this.variable.bind(this),[Oo.ExpressionType.Operator]:this.evalOperator.bind(this),[Oo.ExpressionType.SpecialOperator]:this.evalSpecialOperator.bind(this),[Oo.ExpressionType.Named]:this.evalNamed.bind(this),[Oo.ExpressionType.Existence]:this.evalExistence.bind(this),[Oo.ExpressionType.Aggregate]:this.evalAggregate.bind(this),[Oo.ExpressionType.AsyncExtension]:this.evalAsyncExtension.bind(this)}}async evaluate(e,r){const n=this.subEvaluators[e.expressionType];if(!n)throw new zT.InvalidExpressionType(e);return n.bind(this)(e,r)}async evalOperator(e,r){const n=e.args.map(s=>this.evaluate(s,r)),a=await Promise.all(n);return e.apply(a)}async evalSpecialOperator(e,r){const n=this.evaluate.bind(this),a={args:e.args,mapping:r,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,functionArgumentsCache:this.context.functionArgumentsCache,evaluate:n,bnode:this.context.bnode,defaultTimeZone:this.context.defaultTimeZone};return e.applyAsync(a)}async _evalAsyncArgs(e,r){const n=e.map(a=>this.evaluate(a,r));return await Promise.all(n)}async evalNamed(e,r){return e.apply(await this._evalAsyncArgs(e.args,r))}async evalAsyncExtension(e,r){return await e.apply(await this._evalAsyncArgs(e.args,r))}async evalExistence(e,r){if(!this.context.exists)throw new zT.NoExistenceHook;return new Oo.BooleanLiteral(await this.context.exists(e.expression,r))}async evalAggregate(e,r){if(!this.context.aggregate)throw new zT.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(await this.context.aggregate(e.expression))}}V2.AsyncRecursiveEvaluator=rhe;Object.defineProperty(sy,"__esModule",{value:!0});sy.AsyncEvaluator=void 0;const nhe=_s,ihe=oy,ahe=Mt,she=V2;class fR{static completeContext(e){const r=e.now||new Date(Date.now());return{now:r,baseIRI:e.baseIRI||void 0,functionArgumentsCache:e.functionArgumentsCache||{},superTypeProvider:{cache:e.typeCache||new nhe.LRUCache({max:1e3}),discoverer:e.getSuperType||(()=>"term")},extensionFunctionCreator:e.extensionFunctionCreator,exists:e.exists,aggregate:e.aggregate,bnode:e.bnode,defaultTimeZone:e.defaultTimeZone||(0,ahe.extractTimeZone)(r)}}constructor(e,r={}){this.algExpr=e;const n=r.extensionFunctionCreator||(()=>{}),a=fR.completeContext(r),s=new ihe.AlgebraTransformer({type:"async",creator:n,...a});this.expr=s.transformAlgebra(e),this.evaluator=new she.AsyncRecursiveEvaluator(a,s)}async evaluate(e){return(await this.evaluator.evaluate(this.expr,e)).toRDF()}async evaluateAsEBV(e){return(await this.evaluator.evaluate(this.expr,e)).coerceEBV()}async evaluateAsInternal(e){return await this.evaluator.evaluate(this.expr,e)}}sy.AsyncEvaluator=fR;var ly={},H2={};Object.defineProperty(H2,"__esModule",{value:!0});H2.SyncRecursiveEvaluator=void 0;const Ao=ha(),ohe=Cl(),WT=Ze,uhe=cy;class che extends uhe.BaseExpressionEvaluator{constructor(e,r){super(r||new ohe.TermTransformer(e.superTypeProvider)),this.context=e,this.subEvaluators={[Ao.ExpressionType.Term]:this.term.bind(this),[Ao.ExpressionType.Variable]:this.variable.bind(this),[Ao.ExpressionType.Operator]:this.evalOperator.bind(this),[Ao.ExpressionType.SpecialOperator]:this.evalSpecialOperator.bind(this),[Ao.ExpressionType.Named]:this.evalNamed.bind(this),[Ao.ExpressionType.Existence]:this.evalExistence.bind(this),[Ao.ExpressionType.Aggregate]:this.evalAggregate.bind(this),[Ao.ExpressionType.SyncExtension]:this.evalSyncExtension.bind(this)}}evaluate(e,r){const n=this.subEvaluators[e.expressionType];if(!n)throw new WT.InvalidExpressionType(e);return n.bind(this)(e,r)}evalOperator(e,r){const n=e.args.map(a=>this.evaluate(a,r));return e.apply(n)}evalSpecialOperator(e,r){const n=this.evaluate.bind(this),a={args:e.args,mapping:r,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,functionArgumentsCache:this.context.functionArgumentsCache,evaluate:n,bnode:this.context.bnode,defaultTimeZone:this.context.defaultTimeZone};return e.applySynchronously(a)}evalNamed(e,r){const n=e.args.map(a=>this.evaluate(a,r));return e.apply(n)}evalSyncExtension(e,r){const n=e.args.map(a=>this.evaluate(a,r));return e.apply(n)}evalExistence(e,r){if(!this.context.exists)throw new WT.NoExistenceHook;return new Ao.BooleanLiteral(this.context.exists(e.expression,r))}evalAggregate(e,r){if(!this.context.aggregate)throw new WT.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(this.context.aggregate(e.expression))}}H2.SyncRecursiveEvaluator=che;Object.defineProperty(ly,"__esModule",{value:!0});ly.SyncEvaluator=void 0;const lhe=_s,dhe=oy,fhe=Mt,hhe=H2;class hR{static completeContext(e){const r=e.now||new Date(Date.now());return{now:r,baseIRI:e.baseIRI||void 0,functionArgumentsCache:e.functionArgumentsCache||{},superTypeProvider:{cache:e.typeCache||new lhe.LRUCache({max:1e3}),discoverer:e.getSuperType||(()=>"term")},extensionFunctionCreator:e.extensionFunctionCreator,exists:e.exists,aggregate:e.aggregate,bnode:e.bnode,defaultTimeZone:e.defaultTimeZone||(0,fhe.extractTimeZone)(r)}}constructor(e,r={}){this.algExpr=e,this.context=r;const n=r.extensionFunctionCreator||(()=>{}),a=hR.completeContext(r),s=new dhe.AlgebraTransformer({type:"sync",creator:n,...a});this.expr=s.transformAlgebra(e),this.evaluator=new hhe.SyncRecursiveEvaluator(a,s)}evaluate(e){return this.evaluator.evaluate(this.expr,e).toRDF()}evaluateAsEBV(e){return this.evaluator.evaluate(this.expr,e).coerceEBV()}evaluateAsInternal(e){return this.evaluator.evaluate(this.expr,e)}}ly.SyncEvaluator=hR;var k2={},dy={},Q2={},G2={},pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.Aggregator=pa.AggregatorComponent=void 0;const V4=sr,phe=Cl(),yhe=li,bhe=v2();class mhe{static emptyValue(){}constructor(e,r){this.sharedContext=r,this.separator=e.separator||" ",this.termTransformer=new phe.TermTransformer(r.superTypeProvider)}termToNumericOrError(e){if(e.termType!=="Literal")throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a numeric literal`);if(!(0,bhe.isSubTypeOf)(e.datatype.value,yhe.TypeAlias.SPARQL_NUMERIC,this.sharedContext.superTypeProvider))throw new Error(`Term datatype ${e.datatype.value} with value ${e.value} has type ${e.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(e)}}pa.AggregatorComponent=mhe;class ghe{constructor(e,r){this.aggregatorComponent=r,this.variableValues=new Map,this.distinct=e.distinct}static emptyValue(e){return e.emptyValue()}result(){return this.aggregatorComponent.result()}put(e,r=""){this.canSkip(e,r)||(this.aggregatorComponent.put(e),this.addSeen(e,r))}canSkip(e,r){const n=this.variableValues.get(r);return this.distinct&&n!==void 0&&n.has(V4.termToString(e))}addSeen(e,r){this.distinct&&(this.variableValues.has(r)||this.variableValues.set(r,new Set),this.variableValues.get(r).add(V4.termToString(e)))}}pa.Aggregator=ghe;Object.defineProperty(G2,"__esModule",{value:!0});G2.Average=void 0;const _he=ha(),H4=Qf(),vhe=co(),k4=li,whe=pa;class pR extends whe.AggregatorComponent{constructor(){super(...arguments),this.summer=H4.regularFunctions[k4.RegularOperator.ADDITION],this.divider=H4.regularFunctions[k4.RegularOperator.DIVISION],this.state=void 0}static emptyValue(){return(0,vhe.integer)(0).toRDF()}put(e){if(this.state===void 0){const r=this.termToNumericOrError(e);this.state={sum:r,count:1}}else{const r=this.termToNumericOrError(e);this.state.sum=this.summer.apply([this.state.sum,r],this.sharedContext),this.state.count++}}result(){if(this.state===void 0)return pR.emptyValue();const e=new _he.IntegerLiteral(this.state.count);return this.divider.apply([this.state.sum,e],this.sharedContext).toRDF()}}G2.Average=pR;var z2={};Object.defineProperty(z2,"__esModule",{value:!0});z2.Count=void 0;const Q4=co(),She=pa;class yR extends She.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}static emptyValue(){return(0,Q4.integer)(0).toRDF()}put(e){this.state===void 0&&(this.state=0),this.state++}result(){return this.state===void 0?yR.emptyValue():(0,Q4.integer)(this.state).toRDF()}}z2.Count=yR;var W2={};Object.defineProperty(W2,"__esModule",{value:!0});W2.GroupConcat=void 0;const G4=co(),The=pa;class bR extends The.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}static emptyValue(){return(0,G4.string)("").toRDF()}put(e){this.state===void 0?this.state=e.value:this.state+=this.separator+e.value}result(){return this.state===void 0?bR.emptyValue():(0,G4.string)(this.state).toRDF()}}W2.GroupConcat=bR;var X2={};Object.defineProperty(X2,"__esModule",{value:!0});X2.Max=void 0;const Ehe=q2(),Ohe=pa;class mR extends Ohe.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}put(e){if(e.termType!=="Literal")throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a literal`);this.state===void 0?this.state=e:(0,Ehe.orderTypes)(this.state,e)===-1&&(this.state=e)}result(){return this.state===void 0?mR.emptyValue():this.state}}X2.Max=mR;var K2={};Object.defineProperty(K2,"__esModule",{value:!0});K2.Min=void 0;const Ahe=q2(),xhe=pa;class gR extends xhe.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}put(e){if(e.termType!=="Literal")throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a literal`);this.state===void 0?this.state=e:(0,Ahe.orderTypes)(this.state,e)===1&&(this.state=e)}result(){return this.state===void 0?gR.emptyValue():this.state}}K2.Min=gR;var J2={};Object.defineProperty(J2,"__esModule",{value:!0});J2.Sample=void 0;const Rhe=pa;class _R extends Rhe.AggregatorComponent{constructor(){super(...arguments),this.state=void 0}put(e){this.state===void 0&&(this.state=e)}result(){return this.state===void 0?_R.emptyValue():this.state}}J2.Sample=_R;var Y2={};Object.defineProperty(Y2,"__esModule",{value:!0});Y2.Sum=void 0;const Ihe=Qf(),Phe=co(),Dhe=li,Nhe=pa;class vR extends Nhe.AggregatorComponent{constructor(){super(...arguments),this.state=void 0,this.summer=Ihe.regularFunctions[Dhe.RegularOperator.ADDITION]}static emptyValue(){return(0,Phe.integer)(0).toRDF()}put(e){if(this.state===void 0)this.state=this.termToNumericOrError(e);else{const r=this.termToNumericOrError(e);this.state=this.summer.apply([this.state,r],this.sharedContext)}}result(){return this.state===void 0?vR.emptyValue():this.state.toRDF()}}Y2.Sum=vR;Object.defineProperty(Q2,"__esModule",{value:!0});Q2.aggregators=void 0;const jhe=G2,Che=z2,Fhe=W2,Mhe=X2,Lhe=K2,Bhe=J2,$he=Y2;Q2.aggregators={count:Che.Count,sum:$he.Sum,min:Lhe.Min,max:Mhe.Max,avg:jhe.Average,group_concat:Fhe.GroupConcat,sample:Bhe.Sample};var Z2={};Object.defineProperty(Z2,"__esModule",{value:!0});Z2.WildcardCountAggregator=void 0;const Uhe=sr,z4=co();class qhe{constructor(e){this.bindingValues=new Map,this.counter=0,this.distinct=e.distinct}putBindings(e){this.handleDistinct(e)||(this.counter+=1)}static emptyValue(){return(0,z4.integer)(0).toRDF()}result(){return(0,z4.integer)(this.counter).toRDF()}handleDistinct(e){if(this.distinct){const r=[...e];r.sort((u,c)=>u[0].value.localeCompare(c[0].value));const n=r.map(([u])=>u.value).join(","),a=r.map(([,u])=>Uhe.termToString(u)).join(","),s=this.bindingValues.get(n),o=s!==void 0&&s.has(a);return s||this.bindingValues.set(n,new Set),this.bindingValues.get(n).add(a),o}return!1}}Z2.WildcardCountAggregator=qhe;Object.defineProperty(dy,"__esModule",{value:!0});dy.BaseAggregateEvaluator=void 0;const W4=Tt,X4=Q2,K4=pa,J4=Z2,Vhe=Ze;class Hhe{constructor(e,r,n){this.throwError=!1,this.isWildcard=!1,this.errorOccurred=!1,this.expression=e,this.aggregator=new K4.Aggregator(e,new X4.aggregators[e.aggregator](e,r)),this.throwError=n||!1,this.isWildcard=e.expression.expressionType===W4.Algebra.expressionTypes.WILDCARD,this.isWildcard&&(this.wildcardAggregator=new J4.WildcardCountAggregator(e))}static emptyValue(e,r=!1){let n;if(e.expression.expressionType===W4.Algebra.expressionTypes.WILDCARD?n=J4.WildcardCountAggregator.emptyValue():n=K4.Aggregator.emptyValue(X4.aggregators[e.aggregator]),n===void 0&&r)throw new Vhe.EmptyAggregateError;return n}result(){if(!this.errorOccurred)return this.isWildcard?this.wildcardAggregator.result():this.aggregator.result()}}dy.BaseAggregateEvaluator=Hhe;Object.defineProperty(k2,"__esModule",{value:!0});k2.AggregateEvaluator=void 0;const khe=dy,Y4=ly;class Qhe extends khe.BaseAggregateEvaluator{constructor(e,r,n){super(e,Y4.SyncEvaluator.completeContext(r||{}),n),this.evaluator=new Y4.SyncEvaluator(e.expression,r)}put(e){if(!this.errorOccurred)if(this.isWildcard)this.wildcardAggregator.putBindings(e);else try{const r=this.evaluator.evaluate(e);this.aggregator.put(r)}catch(r){this.safeThrow(r)}}safeThrow(e){if(this.throwError)throw e;this.errorOccurred=!0}}k2.AggregateEvaluator=Qhe;var ew={};Object.defineProperty(ew,"__esModule",{value:!0});ew.AsyncAggregateEvaluator=void 0;const Z4=sy,Ghe=dy;class zhe extends Ghe.BaseAggregateEvaluator{constructor(e,r,n){super(e,Z4.AsyncEvaluator.completeContext(r||{}),n),this.evaluator=new Z4.AsyncEvaluator(e.expression,r),this.errorOccurred=!1}async put(e){if(!this.errorOccurred)if(this.isWildcard)this.wildcardAggregator.putBindings(e);else try{const r=await this.evaluator.evaluate(e);if(!r||this.errorOccurred)return;this.aggregator.put(r)}catch(r){this.safeThrow(r)}}safeThrow(e){if(this.throwError)throw e;this.errorOccurred=!0}}ew.AsyncAggregateEvaluator=zhe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncAggregateEvaluator=t.orderTypes=t.isExpressionError=t.ExpressionError=t.AggregateEvaluator=t.SyncEvaluator=t.AsyncEvaluator=void 0;var e=sy;Object.defineProperty(t,"AsyncEvaluator",{enumerable:!0,get:function(){return e.AsyncEvaluator}});var r=ly;Object.defineProperty(t,"SyncEvaluator",{enumerable:!0,get:function(){return r.SyncEvaluator}});var n=k2;Object.defineProperty(t,"AggregateEvaluator",{enumerable:!0,get:function(){return n.AggregateEvaluator}});var a=Ze;Object.defineProperty(t,"ExpressionError",{enumerable:!0,get:function(){return a.ExpressionError}}),Object.defineProperty(t,"isExpressionError",{enumerable:!0,get:function(){return a.isExpressionError}});var s=q2();Object.defineProperty(t,"orderTypes",{enumerable:!0,get:function(){return s.orderTypes}});var o=ew;Object.defineProperty(t,"AsyncAggregateEvaluator",{enumerable:!0,get:function(){return o.AsyncAggregateEvaluator}})})(jl);Object.defineProperty(g2,"__esModule",{value:!0});g2.ActorQueryOperationExtend=void 0;const Whe=Hn,I1=ft,XT=jl;class Xhe extends I1.ActorQueryOperationTypedMediated{constructor(e){super(e,"extend")}async testOperation(e,r){return new XT.AsyncEvaluator(e.expression,I1.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation)),!0}async runOperation(e,r){const{expression:n,input:a,variable:s}=e,o=I1.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:a,context:r}));if((await o.metadata()).variables.some(h=>h.equals(s)))throw new Error(`Illegal binding to variable '${s.value}' that has already been bound`);const u={...I1.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation)},c=new XT.AsyncEvaluator(n,u),l=async(h,f,p)=>{try{const b=await c.evaluate(h),y=h.set(s,b);p(y)}catch(b){(0,XT.isExpressionError)(b)?(p(h),this.logWarn(r,`Expression error for extend operation (${b.message})with bindings '${(0,Whe.bindingsToString)(h)}'`)):d.emit("error",b)}f()},d=o.bindingsStream.transform({autoStart:!1,transform:l});return{type:"bindings",bindingsStream:d,async metadata(){const h=await o.metadata();return{...h,variables:[...h.variables,s]}}}}}g2.ActorQueryOperationExtend=Xhe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(g2,t)})(K7);var EL={},tw={};Object.defineProperty(tw,"__esModule",{value:!0});tw.ActorQueryOperationFilterSparqlee=void 0;const Khe=Hn,wh=ft,KT=jl;class Jhe extends wh.ActorQueryOperationTypedMediated{constructor(e){super(e,"filter")}async testOperation(e,r){const n={...wh.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation)};return new KT.AsyncEvaluator(e.expression,n),!0}async runOperation(e,r){const n=await this.mediatorQueryOperation.mediate({operation:e.input,context:r}),a=wh.ActorQueryOperation.getSafeBindings(n);wh.ActorQueryOperation.validateQueryOutput(a,"bindings");const s={...wh.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation)},o=new KT.AsyncEvaluator(e.expression,s),u=async(l,d,h)=>{try{await o.evaluateAsEBV(l)&&h(l)}catch(f){(0,KT.isExpressionError)(f)?this.logWarn(r,"Error occurred while filtering.",()=>({error:f,bindings:(0,Khe.bindingsToString)(l)})):c.emit("error",f)}d()},c=a.bindingsStream.transform({transform:u,autoStart:!1});return{type:"bindings",bindingsStream:c,metadata:a.metadata}}}tw.ActorQueryOperationFilterSparqlee=Jhe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(tw,t)})(EL);var OL={},rw={};Object.defineProperty(rw,"__esModule",{value:!0});rw.ActorQueryOperationFromQuad=void 0;const Yhe=ft,Up=Tt;class pr extends Yhe.ActorQueryOperationTypedMediated{constructor(e){super(e,"from")}static copyOperation(e,r){const n={};for(const a of Object.keys(e))Array.isArray(e[a])&&a!=="template"?a==="variables"?n[a]=e[a]:n[a]=e[a].map(r):pr.ALGEBRA_TYPES.includes(e[a].type)?n[a]=r(e[a]):n[a]=e[a];return n}static applyOperationDefaultGraph(e,r){if(e.type==="bgp"&&e.patterns.length>0||e.type==="path"||e.type==="pattern"){if(e.type==="bgp")return pr.joinOperations(e.patterns.map(a=>{if(a.graph.termType!=="DefaultGraph")return pr.FACTORY.createBgp([a]);const s=r.map(o=>pr.FACTORY.createBgp([pr.FACTORY.createPattern(a.subject,a.predicate,a.object,o)]));return pr.unionOperations(s)}));if(e.graph.termType!=="DefaultGraph")return e;const n=r.map(a=>e.type==="path"?pr.FACTORY.createPath(e.subject,e.predicate,e.object,a):pr.FACTORY.createPattern(e.subject,e.predicate,e.object,a));return pr.unionOperations(n)}return pr.copyOperation(e,n=>this.applyOperationDefaultGraph(n,r))}static applyOperationNamedGraph(e,r,n){if(e.type==="bgp"&&e.patterns.length>0||e.type==="path"||e.type==="pattern"){const a=e.type==="bgp"?e.patterns[0].graph:e.graph;if(a.termType==="DefaultGraph")return{type:Up.Algebra.types.BGP,patterns:[]};if(a.termType==="Variable"){if(r.length===1){const o=r[0],u={};u[`?${a.value}`]=o;const c=pr.FACTORY.createValues([a],[u]);let l;return e.type==="bgp"?l=pr.FACTORY.createBgp(e.patterns.map(d=>pr.FACTORY.createPattern(d.subject,d.predicate,d.object,o))):e.type==="path"?l=pr.FACTORY.createPath(e.subject,e.predicate,e.object,o):l=pr.FACTORY.createPattern(e.subject,e.predicate,e.object,o),pr.FACTORY.createJoin([c,l])}return pr.unionOperations(r.map(o=>pr.applyOperationNamedGraph(e,[o],n)))}return[...r,...n].some(o=>o.equals(a))?e:{type:Up.Algebra.types.BGP,patterns:[]}}return pr.copyOperation(e,a=>this.applyOperationNamedGraph(a,r,n))}static joinOperations(e){if(e.length===1)return e[0];if(e.length>1)return pr.FACTORY.createJoin(e);throw new Error("A join can only be applied on at least one operation")}static unionOperations(e){if(e.length===1)return e[0];if(e.length>1)return pr.FACTORY.createUnion(e);throw new Error("A union can only be applied on at least one operation")}static createOperation(e){let r=e.input;return e.default.length>0&&(r=pr.applyOperationDefaultGraph(r,e.default)),(e.named.length>0||e.default.length>0)&&(r=pr.applyOperationNamedGraph(r,e.named,e.default)),r}async testOperation(e,r){return!0}async runOperation(e,r){const n=pr.createOperation(e);return this.mediatorQueryOperation.mediate({operation:n,context:r})}}rw.ActorQueryOperationFromQuad=pr;pr.FACTORY=new Up.Factory;pr.ALGEBRA_TYPES=Object.keys(Up.Algebra.types).map(t=>Up.Algebra.types[t]);(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(rw,t)})(OL);var AL={},nw={};Object.defineProperty(nw,"__esModule",{value:!0});nw.ActorQueryOperationNop=void 0;const Zhe=Hn,epe=ft,tpe=ba,rpe=Wt,npe=new Zhe.BindingsFactory;class ipe extends epe.ActorQueryOperationTypedMediated{constructor(e){super(e,"nop")}async testOperation(e,r){return!0}async runOperation(e,r){return{bindingsStream:new rpe.SingletonIterator(npe.bindings()),metadata:()=>Promise.resolve({state:new tpe.MetadataValidationState,cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}nw.ActorQueryOperationNop=ipe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(nw,t)})(AL);var xL={},iw={},aw={};Object.defineProperty(aw,"__esModule",{value:!0});aw.SortIterator=void 0;const ape=Wt;class spe extends ape.TransformIterator{constructor(e,r,n){super(e,n);const a=n&&n.window;this.windowLength=Number.isFinite(a)&&a>0?a:Number.POSITIVE_INFINITY,this.sort=r,this.sorted=[]}_read(e,r){let n,{length:a}=this.sorted;for(;a!==this.windowLength&&(n=this.source.read(),n!==null);){let s=0,o=a-1,u,c;for(;s<=o;)u=Math.trunc((s+o)/2),c=this.sort(n,this.sorted[u]),c<0?s=u+1:c>0?o=u-1:(s=u,o=-1);this.sorted.splice(s,0,n),a++}a===this.windowLength&&this._push(this.sorted.pop()),r()}_flush(e){let{length:r}=this.sorted;for(;r--;)this._push(this.sorted.pop());e()}}aw.SortIterator=spe;Object.defineProperty(iw,"__esModule",{value:!0});iw.ActorQueryOperationOrderBySparqlee=void 0;const P1=ft,D1=jl,e6=Tt,ope=aw;class upe extends P1.ActorQueryOperationTypedMediated{constructor(e){super(e,"orderby"),this.window=e.window??Number.POSITIVE_INFINITY}async testOperation(e,r){for(let n of e.expressions)n=this.extractSortExpression(n),new D1.AsyncEvaluator(n,P1.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation));return!0}async runOperation(e,r){const n=await this.mediatorQueryOperation.mediate({operation:e.input,context:r}),a=P1.ActorQueryOperation.getSafeBindings(n),s={window:this.window},o={...P1.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation)};let{bindingsStream:u}=a;for(let c=e.expressions.length-1;c>=0;c--){let l=e.expressions[c];const d=this.isAscending(l);l=this.extractSortExpression(l);const h=new D1.AsyncEvaluator(l,o),f=async(y,S,w)=>{try{const I=await h.evaluate(y);w({bindings:y,result:I})}catch(I){(0,D1.isExpressionError)(I)||u.emit("error",I),w({bindings:y,result:void 0})}S()},p=u.transform({transform:f});u=new ope.SortIterator(p,(y,S)=>{let w=(0,D1.orderTypes)(y.result,S.result);return d||(w*=-1),w},s).map(({bindings:y,result:S})=>y)}return{type:"bindings",bindingsStream:u,metadata:a.metadata}}extractSortExpression(e){const{expressionType:r,operator:n}=e;return r!==e6.Algebra.expressionTypes.OPERATOR?e:n==="desc"?e.args[0]:e}isAscending(e){const{expressionType:r,operator:n}=e;return r!==e6.Algebra.expressionTypes.OPERATOR?!0:n!=="desc"}}iw.ActorQueryOperationOrderBySparqlee=upe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(iw,t)})(xL);var RL={},sw={};Object.defineProperty(sw,"__esModule",{value:!0});sw.ActorQueryOperationProject=void 0;const t6=ft,cpe=qm,lpe=yt,dpe=new lpe.DataFactory;class fpe extends t6.ActorQueryOperationTypedMediated{constructor(e){super(e,"project")}async testOperation(e,r){return!0}async runOperation(e,r){const n=t6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:r})),a=await n.metadata(),s=e.variables,o=a.variables.filter(d=>!s.some(h=>d.value===h.value)),u=s.filter(d=>!a.variables.some(h=>d.value===h.value));if(u.length>0)throw new Error(`Variables '${u.map(d=>`?${d.value}`)}' are used in the projection result, but are not assigned.`);let c=o.length===0?n.bindingsStream:n.bindingsStream.transform({map(d){for(const h of o)d=d.delete(h);return d},autoStart:!1}),l=0;return c=c.transform({map(d){l++;const h=new Map;return d.map(f=>{if(f instanceof cpe.BlankNodeBindingsScoped){let p=h.get(f.value);return p||(p=dpe.blankNode(`${f.value}${l}`),h.set(f.value,p)),p}return f})},autoStart:!1}),{type:"bindings",bindingsStream:c,metadata:async()=>({...a,variables:s})}}}sw.ActorQueryOperationProject=fpe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(sw,t)})(RL);var IL={},ow={};Object.defineProperty(ow,"__esModule",{value:!0});ow.ActorQueryOperationService=void 0;const hpe=Hn,r6=ft,N1=Ht,ppe=ba,ype=Wt,bpe=new hpe.BindingsFactory;class mpe extends r6.ActorQueryOperationTypedMediated{constructor(e){super(e,"service")}async testOperation(e,r){if(e.name.termType!=="NamedNode")throw new Error(`${this.name} can only query services by IRI, while a ${e.name.termType} was given.`);return!0}async runOperation(e,r){const n=e.name.value;let a=r.delete(N1.KeysRdfResolveQuadPattern.source).delete(N1.KeysRdfResolveQuadPattern.sources).delete(N1.KeysInitQuery.queryString);const s=this.forceSparqlEndpoint?"sparql":void 0;a=a.set(N1.KeysRdfResolveQuadPattern.sources,[{type:s,value:n}]);let o;try{o=r6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:a}))}catch(u){if(e.silent)o={bindingsStream:new ype.SingletonIterator(bpe.bindings()),type:"bindings",metadata:async()=>({state:new ppe.MetadataValidationState,cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};else throw u}return o}}ow.ActorQueryOperationService=mpe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ow,t)})(IL);var PL={},uw={};Object.defineProperty(uw,"__esModule",{value:!0});uw.ActorQueryOperationSlice=void 0;const gpe=ft,_pe=Ht;class vpe extends gpe.ActorQueryOperationTypedMediated{constructor(e){super(e,"slice")}async testOperation(e,r){return!0}async runOperation(e,r){e.length&&(r=r.set(_pe.KeysQueryOperation.limitIndicator,e.length));const n=await this.mediatorQueryOperation.mediate({operation:e.input,context:r});if(n.type==="bindings")return{type:"bindings",bindingsStream:this.sliceStream(n.bindingsStream,e),metadata:this.sliceMetadata(n,e)};if(n.type==="quads")return{type:"quads",quadStream:this.sliceStream(n.quadStream,e),metadata:this.sliceMetadata(n,e)};throw new Error(`Invalid query output type: Expected 'bindings' or 'quads' but got '${n.type}'`)}sliceStream(e,r){const n=!!r.length||r.length===0,{start:a}=r,s=n?r.start+r.length-1:Number.POSITIVE_INFINITY;return e.transform({offset:a,limit:Math.max(s-a+1,0),autoStart:!1})}sliceMetadata(e,r){const n=!!r.length||r.length===0;return()=>e.metadata().then(a=>{const s={...a.cardinality};return Number.isFinite(s.value)&&(s.value=Math.max(0,s.value-r.start),n&&(s.value=Math.min(s.value,r.length))),{...a,cardinality:s}})}}uw.ActorQueryOperationSlice=vpe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(uw,t)})(PL);var DL={},cw={},su={},lw={},fy={};Object.defineProperty(fy,"__esModule",{value:!0});fy.PathVariableObjectIterator=void 0;const wpe=ft,Spe=Wt,Tpe=yt,Epe=sr,Ope=Tt,Ape=new Tpe.DataFactory,xpe=new Ope.Factory;class Rpe extends Spe.BufferedIterator{constructor(e,r,n,a,s,o,u=16){super({autoStart:!0}),this.subject=e,this.predicate=r,this.graph=n,this.context=a,this.mediatorQueryOperation=s,this.maxRunningOperations=u,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this._push(this.subject,o)}_end(e){for(const r of this.runningOperations)r.destroy();super._end(e)}_push(e,r=!0){let n;if(r&&(n=(0,Epe.termToString)(e),this.termHashes.has(n)))return;const a=Ape.variable("b");this.pendingOperations.push({variable:a,operation:xpe.createPath(e,this.predicate,a,this.graph)}),n&&(this.termHashes.set(n,e),super._push(e))}_read(e,r){const n=this;(async function(){for(;n.runningOperations.length<n.maxRunningOperations&&n.pendingOperations.length!==0;){const o=n.pendingOperations.pop(),u=wpe.ActorQueryOperation.getSafeBindings(await n.mediatorQueryOperation.mediate({operation:o.operation,context:n.context})),c=u.bindingsStream.transform({autoStart:!1,transform(l,d,h){const f=l.get(o.variable);h(f),d()}});c.done||(n.runningOperations.push(c),c.on("error",l=>n.destroy(l)),c.on("readable",()=>{n.readable=!0,n._fillBufferAsync()}),c.on("end",()=>{n.runningOperations.splice(n.runningOperations.indexOf(c),1),n.readable=!0,n._fillBufferAsync()})),n.setProperty("metadata",u.metadata)}let a=0,s;for(;a!==(a=e);)for(let o=0;o<n.runningOperations.length&&e>0;o++)(s=n.runningOperations[o].read())!==null&&(e--,n._push(s));n.runningOperations.length===0&&n.pendingOperations.length===0&&n.close()})().then(()=>{r()},a=>this.destroy(a))}}fy.PathVariableObjectIterator=Rpe;Object.defineProperty(lw,"__esModule",{value:!0});lw.ActorAbstractPath=void 0;const Ipe=Hn,Sh=ft,JT=Ht,j1=Wt,Ppe=yt,YT=sr,Dpe=Tt,Npe=fy,jpe=new Ppe.DataFactory,ZT=new Ipe.BindingsFactory;class Ns extends Sh.ActorQueryOperationTypedMediated{constructor(e,r){super(e,"path"),this.predicateType=r}async testOperation(e,r){if(e.predicate.type!==this.predicateType)throw new Error(`This Actor only supports ${this.predicateType} Path operations.`);return!0}generateVariable(e,r){return r?e&&(e.subject.value===r||e.object.value===r)?this.generateVariable(e,`${r}b`):jpe.variable(r):this.generateVariable(e,"b")}async isPathArbitraryLengthDistinct(e,r){return e.get(JT.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(e=e.set(JT.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:e,operation:void 0}):(e=e.set(JT.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:e,operation:Sh.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:Ns.FACTORY.createDistinct(r),context:e}))})}async predicateStarGraphVariable(e,r,n,a,s){const o=this.generateVariable(Ns.FACTORY.createPath(e,n,r,a)),u=Ns.FACTORY.createUnion([Ns.FACTORY.createPattern(e,o,r,a),Ns.FACTORY.createPattern(r,o,e,a)]),c=Sh.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:s,operation:u})),l=new Set;return{bindingsStream:new j1.MultiTransformIterator(c.bindingsStream,{multiTransform:h=>{const f=h.get(a);return l.has(f.value)?new j1.EmptyIterator:(l.add(f.value),new j1.TransformIterator(async()=>{const p=new j1.BufferedIterator;return await this.getObjectsPredicateStar(e,n,f,s,{},p,{count:0}),p.transform({transform(b,y,S){S(ZT.bindings([[r,b],[a,f]])),y()}})},{maxBufferSize:128}))},autoStart:!1}),metadata:c.metadata}}async getObjectsPredicateStarEval(e,r,n,a,s,o){if(a.termType==="Variable")return this.predicateStarGraphVariable(e,n,r,a,s);const u=new Npe.PathVariableObjectIterator(e,r,a,s,this.mediatorQueryOperation,o);return{bindingsStream:u.transform({autoStart:!1,transform(l,d,h){h(ZT.bindings([[n,l]])),d()}}),async metadata(){const l=await new Promise(d=>{u.getProperty("metadata",h=>d(h()))});return l.cardinality.value++,l}}}async getObjectsPredicateStar(e,r,n,a,s,o,u){const c=(0,YT.termToString)(e);if(s[c])return;o._push(e),s[c]=e,u.count++;const l=this.generateVariable(),d=Ns.FACTORY.createPath(e,r,l,n),h=Sh.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:d,context:a}));return h.bindingsStream.on("data",async f=>{const p=f.get(l);await this.getObjectsPredicateStar(p,r,n,a,s,o,u)}),h.bindingsStream.on("end",()=>{--u.count===0&&o.close()}),h.metadata}async getSubjectAndObjectBindingsPredicateStar(e,r,n,a,s,o,u,c,l,d,h){const f=(0,YT.termToString)(a)+(0,YT.termToString)(o);if(l[f])return;if(h.count++,l[f]=!0,d._push(ZT.bindings([[e,n],[r,a]])),f in c){const b=await c[f];for(const y of b)await this.getSubjectAndObjectBindingsPredicateStar(e,r,n,y,s,o,u,c,l,d,h);--h.count===0&&d.close();return}const p=new Promise(async(b,y)=>{const S=[],w=this.generateVariable(),I=Ns.FACTORY.createPath(a,s,w,o),O=Sh.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:I,context:u}));O.bindingsStream.on("data",async T=>{const x=T.get(w);S.push(x),await this.getSubjectAndObjectBindingsPredicateStar(e,r,n,x,s,o,u,c,l,d,h)}),O.bindingsStream.on("error",y),O.bindingsStream.on("end",()=>{--h.count===0&&d.close(),b(S)})});c[f]=p}}lw.ActorAbstractPath=Ns;Ns.FACTORY=new Dpe.Factory;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(lw,t),r(fy,t)})(su);Object.defineProperty(cw,"__esModule",{value:!0});cw.ActorQueryOperationPathAlt=void 0;const n6=su,Cpe=y2,Fpe=ft,Mpe=Wt,Lpe=Tt;class Bpe extends n6.ActorAbstractPath{constructor(e){super(e,Lpe.Algebra.types.ALT)}async runOperation(e,r){const n=e.predicate,a=(await Promise.all(n.input.map(u=>this.mediatorQueryOperation.mediate({context:r,operation:n6.ActorAbstractPath.FACTORY.createPath(e.subject,u,e.object,e.graph)})))).map(Fpe.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new Mpe.UnionIterator(a.map(u=>u.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(a.map(u=>u.metadata())).then(u=>Cpe.ActorQueryOperationUnion.unionMetadata(u,!0))}}}cw.ActorQueryOperationPathAlt=Bpe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(cw,t)})(DL);var NL={},dw={};Object.defineProperty(dw,"__esModule",{value:!0});dw.ActorQueryOperationPathInv=void 0;const i6=su,$pe=Tt;class Upe extends i6.ActorAbstractPath{constructor(e){super(e,$pe.Algebra.types.INV)}async runOperation(e,r){const n=e.predicate,a=i6.ActorAbstractPath.FACTORY.createPath(e.object,n.path,e.subject,e.graph);return this.mediatorQueryOperation.mediate({operation:a,context:r})}}dw.ActorQueryOperationPathInv=Upe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(dw,t)})(NL);var jL={},fw={};Object.defineProperty(fw,"__esModule",{value:!0});fw.ActorQueryOperationPathLink=void 0;const a6=su,qpe=Tt;class Vpe extends a6.ActorAbstractPath{constructor(e){super(e,qpe.Algebra.types.LINK)}async runOperation(e,r){const n=e.predicate,a=a6.ActorAbstractPath.FACTORY.createPattern(e.subject,n.iri,e.object,e.graph);return this.mediatorQueryOperation.mediate({operation:a,context:r})}}fw.ActorQueryOperationPathLink=Vpe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(fw,t)})(jL);var CL={},hw={};Object.defineProperty(hw,"__esModule",{value:!0});hw.ActorQueryOperationPathNps=void 0;const s6=su,Hpe=ft,kpe=Tt;class Qpe extends s6.ActorAbstractPath{constructor(e){super(e,kpe.Algebra.types.NPS)}async runOperation(e,r){const n=e.predicate,a=this.generateVariable(e),s=s6.ActorAbstractPath.FACTORY.createPattern(e.subject,a,e.object,e.graph),o=Hpe.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:s,context:r}));return{type:"bindings",bindingsStream:o.bindingsStream.transform({filter(c){return!n.iris.some(l=>l.equals(c.get(a)))},transform(c,l,d){d(c.delete(a)),l()}}),metadata:o.metadata}}}hw.ActorQueryOperationPathNps=Qpe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(hw,t)})(CL);var FL={},pw={};Object.defineProperty(pw,"__esModule",{value:!0});pw.ActorQueryOperationPathOneOrMore=void 0;const Ac=su,Gpe=Hn,o6=ft,eE=Wt,zpe=Tt,u6=new Gpe.BindingsFactory;class Wpe extends Ac.ActorAbstractPath{constructor(e){super(e,zpe.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(e,r){const n=await this.isPathArbitraryLengthDistinct(r,e);if(n.operation)return n.operation;r=n.context;const a=e.predicate;if(e.subject.termType!=="Variable"&&e.object.termType==="Variable"){const c=e.object,l=await this.getObjectsPredicateStarEval(e.subject,a.path,c,e.graph,r,!1),d=e.graph.termType==="Variable"?[c,e.graph]:[c];return{type:"bindings",bindingsStream:l.bindingsStream,metadata:async()=>({...await l.metadata(),variables:d})}}if(e.subject.termType==="Variable"&&e.object.termType==="Variable"){const c=Ac.ActorAbstractPath.FACTORY.createDistinct(Ac.ActorAbstractPath.FACTORY.createPath(e.subject,e.predicate.path,e.object,e.graph)),l=o6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:r,operation:c})),d=e.subject,h=e.object,f={},p=new eE.MultiTransformIterator(l.bindingsStream,{multiTransform:y=>{const S=y.get(d),w=y.get(h),I=e.graph.termType==="Variable"?y.get(e.graph):e.graph;return new eE.TransformIterator(async()=>{const O=new eE.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(d,h,S,w,a.path,I,r,f,{},O,{count:0}),O.transform({transform(T,x,P){e.graph.termType==="Variable"&&(T=T.set(e.graph,I)),P(T),x()}})},{maxBufferSize:128})},autoStart:!1}),b=e.graph.termType==="Variable"?[d,h,e.graph]:[d,h];return{type:"bindings",bindingsStream:p,metadata:async()=>({...await l.metadata(),variables:b})}}if(e.subject.termType==="Variable"&&e.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:r,operation:Ac.ActorAbstractPath.FACTORY.createPath(e.object,Ac.ActorAbstractPath.FACTORY.createOneOrMorePath(Ac.ActorAbstractPath.FACTORY.createInv(a.path)),e.subject,e.graph)});const s=this.generateVariable(),o=o6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:r,operation:Ac.ActorAbstractPath.FACTORY.createPath(e.subject,a,s,e.graph)}));return{type:"bindings",bindingsStream:o.bindingsStream.transform({filter:c=>e.object.equals(c.get(s)),transform(c,l,d){const h=e.graph.termType==="Variable"?u6.bindings([[e.graph,c.get(e.graph)]]):u6.bindings();d(h),l()}}),metadata:async()=>({...await o.metadata(),variables:e.graph.termType==="Variable"?[e.graph]:[]})}}}pw.ActorQueryOperationPathOneOrMore=Wpe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(pw,t)})(FL);var ML={},yw={};Object.defineProperty(yw,"__esModule",{value:!0});yw.ActorQueryOperationPathZeroOrMore=void 0;const tE=su,Xpe=Hn,Kpe=ft,C1=Wt,F1=sr,Jpe=Tt,c6=new Xpe.BindingsFactory;class Ype extends tE.ActorAbstractPath{constructor(e){super(e,Jpe.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(e,r){const n=await this.isPathArbitraryLengthDistinct(r,e);if(n.operation)return n.operation;r=n.context;const a=e.predicate,s=e.subject.termType==="Variable",o=e.object.termType==="Variable";if(e.subject.termType==="Variable"&&e.object.termType==="Variable"){const f=this.generateVariable(e),p=tE.ActorAbstractPath.FACTORY.createPattern(e.subject,f,e.object,e.graph),b=Kpe.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:r,operation:p})),y=e.subject,S=e.object,w=new Set,I={},O=new C1.MultiTransformIterator(b.bindingsStream,{multiTransform:x=>{const P=x.get(y),B=x.get(S),Q=e.graph.termType==="Variable"?x.get(e.graph):e.graph,N=(0,F1.termToString)(P)+(0,F1.termToString)(Q),D=(0,F1.termToString)(B)+(0,F1.termToString)(Q);return new C1.TransformIterator(async()=>{if(w.has(N)&&w.has(D))return new C1.EmptyIterator;const F=new C1.BufferedIterator,W={count:0};return w.has(N)||(w.add(N),await this.getSubjectAndObjectBindingsPredicateStar(y,S,P,P,a.path,Q,r,I,{},F,W)),w.has(D)||(w.add(D),await this.getSubjectAndObjectBindingsPredicateStar(y,S,B,B,a.path,Q,r,I,{},F,W)),F.transform({transform(z,M,C){e.graph.termType==="Variable"&&(z=z.set(e.graph,Q)),C(z),M()}})})}}),T=e.graph.termType==="Variable"?[y,e.object,e.graph]:[y,e.object];return{type:"bindings",bindingsStream:O,metadata:async()=>({...await b.metadata(),variables:T})}}if(!s&&!o){const f=this.generateVariable(),p=await this.getObjectsPredicateStarEval(e.subject,a.path,f,e.graph,r,!0);return{type:"bindings",bindingsStream:p.bindingsStream.transform({filter:y=>e.object.equals(y.get(f)),transform(y,S,w){const I=e.graph.termType==="Variable"?c6.bindings([[e.graph,y.get(e.graph)]]):c6.bindings();w(I),S()}}),metadata:async()=>({...await p.metadata(),variables:e.graph.termType==="Variable"?[e.graph]:[]})}}const u=s?e.object:e.subject,c=s?e.subject:e.object,l=s?tE.ActorAbstractPath.FACTORY.createInv(a.path):a.path,d=await this.getObjectsPredicateStarEval(u,l,c,e.graph,r,!0),h=e.graph.termType==="Variable"?[c,e.graph]:[c];return{type:"bindings",bindingsStream:d.bindingsStream,metadata:async()=>({...await d.metadata(),variables:h})}}}yw.ActorQueryOperationPathZeroOrMore=Ype;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(yw,t)})(ML);var LL={},bw={};Object.defineProperty(bw,"__esModule",{value:!0});bw.ActorQueryOperationPathZeroOrOne=void 0;const xc=su,Zpe=Hn,l6=ft,e0e=ba,d6=Wt,t0e=Tt,rE=new Zpe.BindingsFactory;class r0e extends xc.ActorAbstractPath{constructor(e){super(e,t0e.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(e,r){const n=e.predicate,a=[];if(e.subject.termType!=="Variable"&&e.object.termType!=="Variable"&&e.subject.equals(e.object))return{type:"bindings",bindingsStream:new d6.SingletonIterator(rE.bindings()),metadata:()=>Promise.resolve({state:new e0e.MetadataValidationState,cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};const s=await this.isPathArbitraryLengthDistinct(r,e);if(s.operation)return s.operation;r=s.context;const o=l6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:r,operation:xc.ActorAbstractPath.FACTORY.createPath(e.subject,n.path,e.object,e.graph)}));let u;if(e.subject.termType==="Variable"&&e.object.termType==="Variable"){const c=this.generateVariable(e),l=l6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:r,operation:xc.ActorAbstractPath.FACTORY.createFilter(xc.ActorAbstractPath.FACTORY.createPattern(e.subject,c,e.object,e.graph),xc.ActorAbstractPath.FACTORY.createOperatorExpression("=",[xc.ActorAbstractPath.FACTORY.createTermExpression(e.subject),xc.ActorAbstractPath.FACTORY.createTermExpression(e.object)]))})).bindingsStream.transform({map(d){return d.delete(c)},autoStart:!1});u=new d6.UnionIterator([l,o.bindingsStream],{autoStart:!1})}else e.subject.termType==="Variable"&&a.push(rE.bindings([[e.subject,e.object]])),e.object.termType==="Variable"&&a.push(rE.bindings([[e.object,e.subject]])),u=o.bindingsStream.prepend(a);return{type:"bindings",bindingsStream:u,metadata:o.metadata}}}bw.ActorQueryOperationPathZeroOrOne=r0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(bw,t)})(LL);var BL={},mw={};Object.defineProperty(mw,"__esModule",{value:!0});mw.ActorQueryOperationAddRewrite=void 0;const f6=ft,n0e=yt,i0e=Tt,bu=new n0e.DataFactory;class a0e extends f6.ActorQueryOperationTypedMediated{constructor(e){super(e,"add"),this.factory=new i0e.Factory}async testOperation(e,r){return f6.ActorQueryOperation.throwOnReadOnly(r),!0}runOperation(e,r){const n=e.destination==="DEFAULT"?bu.defaultGraph():e.destination,a=e.source==="DEFAULT"?bu.defaultGraph():e.source,s=this.factory.createDeleteInsert(void 0,[this.factory.createPattern(bu.variable("s"),bu.variable("p"),bu.variable("o"),n)],this.factory.createPattern(bu.variable("s"),bu.variable("p"),bu.variable("o"),a));return this.mediatorQueryOperation.mediate({operation:s,context:r})}}mw.ActorQueryOperationAddRewrite=a0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(mw,t)})(BL);var $L={},gw={};Object.defineProperty(gw,"__esModule",{value:!0});gw.ActorQueryOperationUpdateCompositeUpdate=void 0;const nE=ft;class s0e extends nE.ActorQueryOperationTypedMediated{constructor(e){super(e,"compositeupdate")}async testOperation(e,r){return nE.ActorQueryOperation.throwOnReadOnly(r),!0}async runOperation(e,r){return{type:"void",execute:()=>(async()=>{for(const a of e.updates)await nE.ActorQueryOperation.getSafeVoid(await this.mediatorQueryOperation.mediate({operation:a,context:r})).execute()})()}}}gw.ActorQueryOperationUpdateCompositeUpdate=s0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(gw,t)})($L);var UL={},_w={};Object.defineProperty(_w,"__esModule",{value:!0});_w.ActorQueryOperationCopyRewrite=void 0;const h6=ft,o0e=Tt;class u0e extends h6.ActorQueryOperationTypedMediated{constructor(e){super(e,"copy"),this.factory=new o0e.Factory}async testOperation(e,r){return h6.ActorQueryOperation.throwOnReadOnly(r),!0}runOperation(e,r){if(typeof e.destination=="string"&&typeof e.source=="string"&&e.destination===e.source||typeof e.destination!="string"&&typeof e.source!="string"&&e.destination.equals(e.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const n=this.factory.createCompositeUpdate([this.factory.createDrop(e.destination,!0),this.factory.createAdd(e.source,e.destination,e.silent)]);return this.mediatorQueryOperation.mediate({operation:n,context:r})}}_w.ActorQueryOperationCopyRewrite=u0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(_w,t)})(UL);var qL={},vw={};Object.defineProperty(vw,"__esModule",{value:!0});vw.ActorQueryOperationMoveRewrite=void 0;const p6=ft,c0e=Tt;class l0e extends p6.ActorQueryOperationTypedMediated{constructor(e){super(e,"move"),this.factory=new c0e.Factory}async testOperation(e,r){return p6.ActorQueryOperation.throwOnReadOnly(r),!0}runOperation(e,r){if(typeof e.destination=="string"&&typeof e.source=="string"&&e.destination===e.source||typeof e.destination!="string"&&typeof e.source!="string"&&e.destination.equals(e.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const n=[this.factory.createDrop(e.destination,!0),this.factory.createAdd(e.source,e.destination,e.silent),this.factory.createDrop(e.source)],a=this.factory.createCompositeUpdate(n);return this.mediatorQueryOperation.mediate({operation:a,context:r})}}vw.ActorQueryOperationMoveRewrite=l0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(vw,t)})(qL);var wR={},ww={};Object.defineProperty(ww,"__esModule",{value:!0});ww.ActionObserverHttp=void 0;const d0e=et;let f0e=class extends d0e.ActionObserver{constructor(e){super(e),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(e,r,n){this.requests++}};ww.ActionObserverHttp=f0e;var Sw={};Object.defineProperty(Sw,"__esModule",{value:!0});Sw.ActorQueryResultSerializeSparqlJson=void 0;const h0e=bs,p0e=Kt;class xd extends h0e.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToJsonBindings(e){if(e.termType==="Literal"){const r=e,n={value:r.value,type:"literal"},{language:a}=r,{datatype:s}=r;return a?n["xml:lang"]=a:s&&s.value!=="http://www.w3.org/2001/XMLSchema#string"&&(n.datatype=s.value),n}return e.termType==="BlankNode"?{value:e.value,type:"bnode"}:e.termType==="Quad"?{value:{subject:xd.bindingToJsonBindings(e.subject),predicate:xd.bindingToJsonBindings(e.predicate),object:xd.bindingToJsonBindings(e.object)},type:"triple"}:{value:e.value,type:"uri"}}async testHandleChecked(e,r){if(!["bindings","boolean"].includes(e.type))throw new Error("This actor can only handle bindings streams or booleans.");return!0}async runHandle(e,r,n){const a=new p0e.Readable;a._read=()=>{};const s={};if(e.type==="bindings"){const u=await e.metadata();u.variables.length>0&&(s.vars=u.variables.map(c=>c.value))}a.push(`{"head": ${JSON.stringify(s)},
`);let o=!0;if(e.type==="bindings"){const u=e.bindingsStream;u.on("error",c=>{a.emit("error",c)}),u.on("data",c=>{o?a.push(`"results": { "bindings": [
`):a.push(`,
`);const l=Object.fromEntries([...c].map(([d,h])=>[d.value,xd.bindingToJsonBindings(h)]));a.push(JSON.stringify(l)),o=!1}),u.on("end",()=>{o&&a.push(`"results": { "bindings": [
`),a.push(`
]}`),this.emitMetadata&&a.push(`,
"metadata": { "httpRequests": ${this.httpObserver.requests} }`),a.push(`}
`),a.push(null)})}else try{a.push(`"boolean":${await e.execute()}
}
`),a.push(null)}catch(u){a.once("newListener",()=>a.emit("error",u))}return{data:a}}}Sw.ActorQueryResultSerializeSparqlJson=xd;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ww,t),r(Sw,t)})(wR);var SR={},Tw={};Object.defineProperty(Tw,"__esModule",{value:!0});Tw.ActionObserverHttp=void 0;const y0e=et;class b0e extends y0e.ActionObserver{constructor(e){super(e),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(e,r,n){this.requests++}}Tw.ActionObserverHttp=b0e;var Ew={};Object.defineProperty(Ew,"__esModule",{value:!0});Ew.ActorQueryResultSerializeStats=void 0;const m0e=bs,g0e=Kt,_0e=ru();class v0e extends m0e.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}async testHandleChecked(e,r){if(!["bindings","quads"].includes(e.type))throw new Error("This actor can only handle bindings streams or quad streams.");return!0}pushHeader(e){const r=["Result","Delay (ms)","HTTP requests"].join(",");e.push(`${r}
`)}pushStat(e,r,n){const a=[n,this.delay(r),this.httpObserver.requests].join(",");e.push(`${a}
`)}pushFooter(e,r){const n=["TOTAL",this.delay(r),this.httpObserver.requests].join(",");e.push(`${n}
`),e.push(null)}async runHandle(e,r,n){const a=new g0e.Readable;a._read=()=>{};const s=e.type==="bindings"?e.bindingsStream:e.quadStream,o=this.now();let u=1;return this.pushHeader(a),s.on("error",c=>a.emit("error",c)),s.on("data",()=>this.pushStat(a,o,u++)),s.on("end",()=>this.pushFooter(a,o)),{data:a}}now(){if(typeof performance>"u"){const e=_0e.hrtime();return e[0]*1e3+e[1]/1e6}return performance.now()}delay(e){return this.now()-e}}Ew.ActorQueryResultSerializeStats=v0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tw,t),r(Ew,t)})(SR);var VL={},Ow={};Object.defineProperty(Ow,"__esModule",{value:!0});Ow.ActorQueryOperationDistinctHash=void 0;const y6=ft;class w0e extends y6.ActorQueryOperationTypedMediated{constructor(e){super(e,"distinct")}async testOperation(e,r){return!0}async runOperation(e,r){const n=y6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:r}));return{type:"bindings",bindingsStream:n.bindingsStream.filter(await this.newHashFilter(r)),metadata:n.metadata}}async newHashFilter(e){const{hashFunction:r}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:e}),n={};return a=>{const s=r(a);return!(s in n)&&(n[s]=!0)}}}Ow.ActorQueryOperationDistinctHash=w0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ow,t)})(VL);var HL={},Aw={},xw={};Object.defineProperty(xw,"__esModule",{value:!0});xw.GroupsState=void 0;const S0e=Hn,b6=jl,T0e=yt,E0e=new T0e.DataFactory,O0e=new S0e.BindingsFactory;class A0e{constructor(e,r,n){this.hashFunction=e,this.pattern=r,this.sparqleeConfig=n,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(a=>a.value)),this.distinctHashes=r.aggregates.some(({distinct:a})=>a)?new Map:null,this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(e){const r=this.resultCheck();if(r)return r;this.waitCounter++;const n=e.filter((u,c)=>this.groupVariables.has(c.value)),a=this.hashBindings(n);let s=this.groupsInitializer.get(a),o;if(!s)s=(async()=>{const u={};if(await Promise.all(this.pattern.aggregates.map(async l=>{const d=l.variable.value;u[d]=new b6.AsyncAggregateEvaluator(l,this.sparqleeConfig),await u[d].put(e)})),this.distinctHashes){const l=this.hashBindings(e);this.distinctHashes.set(a,new Set([l]))}const c={aggregators:u,bindings:n};return this.groups.set(a,c),this.subtractWaitCounterAndCollect(),c})(),this.groupsInitializer.set(a,s),o=s;else{const u=s;o=(async()=>{const c=await u;await Promise.all(this.pattern.aggregates.map(async l=>{if(l.distinct){const h=this.hashBindings(e);if(this.distinctHashes.get(a).has(h))return;this.distinctHashes.get(a).add(h)}const d=l.variable.value;await c.aggregators[d].put(e)}))})().then(()=>{this.subtractWaitCounterAndCollect()})}return o}subtractWaitCounterAndCollect(){--this.waitCounter===0&&this.handleResultCollection()}handleResultCollection(){let e=[...this.groups].map(([r,n])=>{const{bindings:a,aggregators:s}=n;let o=a;for(const u in s){const c=s[u].result();c&&(o=o.set(E0e.variable(u),c))}return o});if(e.length===0&&this.groupVariables.size===0){const r=[];for(const n of this.pattern.aggregates){const a=n.variable,s=b6.AsyncAggregateEvaluator.emptyValue(n);s!==void 0&&r.push([a,s])}e=[O0e.bindings(r)]}this.waitResolver(e)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}collectResults(){const e=this.resultCheck();if(e)return e;this.resultHasBeenCalled=!0;const r=new Promise(n=>{this.waitResolver=n});return this.subtractWaitCounterAndCollect(),r}hashBindings(e){return this.hashFunction(e)}}xw.GroupsState=A0e;Object.defineProperty(Aw,"__esModule",{value:!0});Aw.ActorQueryOperationGroup=void 0;const M1=ft,x0e=jl,m6=Wt,R0e=xw;class I0e extends M1.ActorQueryOperationTypedMediated{constructor(e){super(e,"group")}async testOperation(e,r){for(const n of e.aggregates)new x0e.AsyncEvaluator(n.expression,M1.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation));return!0}async runOperation(e,r){const{hashFunction:n}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:r}),{input:a,aggregates:s}=e,o=await this.mediatorQueryOperation.mediate({operation:a,context:r}),u=M1.ActorQueryOperation.getSafeBindings(o),c=[...e.variables,...s.map(h=>h.variable)],l=M1.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation);return{type:"bindings",bindingsStream:new m6.TransformIterator(()=>new Promise((h,f)=>{const p=new R0e.GroupsState(n,e,l);u.bindingsStream.on("end",async()=>{try{const b=new m6.ArrayIterator(await p.collectResults(),{autoStart:!1});h(b)}catch(b){f(b)}}),u.bindingsStream.on("error",f),u.bindingsStream.on("data",b=>{p.consumeBindings(b).catch(f)})}),{autoStart:!1}),metadata:async()=>({...await u.metadata(),variables:c})}}}Aw.ActorQueryOperationGroup=I0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Aw,t)})(HL);var kL={},Rw={};Object.defineProperty(Rw,"__esModule",{value:!0});Rw.ActorQueryOperationReducedHash=void 0;const g6=ft,P0e=_s;class D0e extends g6.ActorQueryOperationTypedMediated{constructor(e){super(e,"reduced")}async testOperation(e,r){return!0}async runOperation(e,r){const n=g6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:r}));return{type:"bindings",bindingsStream:n.bindingsStream.filter(await this.newHashFilter(r)),metadata:n.metadata}}async newHashFilter(e){const{hashFunction:r}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:e}),n=new P0e.LRUCache({max:this.cacheSize});return a=>{const s=r(a);return n.has(s)?!1:(n.set(s,!0),!0)}}}Rw.ActorQueryOperationReducedHash=D0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Rw,t)})(kL);var QL={},Iw={};Object.defineProperty(Iw,"__esModule",{value:!0});Iw.ActorQueryResultSerializeRdf=void 0;const N0e=bs;class j0e extends N0e.ActorQueryResultSerialize{constructor(e){super(e)}async testHandle(e,r,n){if(e.type!=="quads")throw new Error(`Actor ${this.name} can only handle quad streams`);const{mediaTypes:a}=await this.mediatorMediaTypeCombiner.mediate({context:n,mediaTypes:!0});if(!(r in a))throw new Error(`Actor ${this.name} can not handle media type ${r}. All available types: ${Object.keys(a)}`);return!0}async runHandle(e,r,n){return(await this.mediatorRdfSerialize.mediate({context:n,handle:{context:n,quadStream:e.quadStream},handleMediaType:r})).handle}async testMediaType(e){return!0}async getMediaTypes(e){return(await this.mediatorMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes}async testMediaTypeFormats(e){return!0}async getMediaTypeFormats(e){return(await this.mediatorMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats}}Iw.ActorQueryResultSerializeRdf=j0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Iw,t)})(QL);var GL={},Pw={};Object.defineProperty(Pw,"__esModule",{value:!0});Pw.ActorHttpWayback=void 0;const _6=ms,Sb=Ht,C0e=Pl,F0e="http://wayback.archive-it.org/";function v6(t){const e=new Request(t.input,t.init);return{input:new Request(new URL(`/${e.url}`,F0e),e)}}function M0e(t){const e=t.get(Sb.KeysHttpProxy.httpProxyHandler);return e?r=>e.getProxy(v6(r)):r=>Promise.resolve(v6(r))}class L0e extends _6.ActorHttp{constructor(e){super(e)}async test(e){return!0}async run(e){let r=await this.mediatorHttp.mediate(e);if(r.status===404&&e.context.get(Sb.KeysHttpWayback.recoverBrokenLinks)){let n=await this.mediatorHttp.mediate({...e,context:e.context.set(Sb.KeysHttpWayback.recoverBrokenLinks,!1).set(Sb.KeysHttpProxy.httpProxyHandler,{getProxy:M0e(e.context)})});n.status===200&&([r,n]=[n,r]);const{body:a}=n;a&&("destroy"in a&&typeof a.destroy=="function"?a.destroy():await C0e(_6.ActorHttp.toNodeReadable(n.body)))}return r}}Pw.ActorHttpWayback=L0e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Pw,t)})(GL);var zL={},Dw={},WL={},Th={},Nw={},Eh={},Oh={},jw={};Object.defineProperty(jw,"__esModule",{value:!0});jw.ContainerHandlerIdentifier=void 0;class B0e{canCombineWithGraph(){return!0}async handle(e,r,n,a,s,o){let u;if(r.emittedStack[o+1]&&r.idStack[o+1])u=r.idStack[o+1][0];else{const d=await n.getContainerKey(a[o],a,o)!==null?await n.resourceToTerm(await r.getContext(a),a[o]):n.dataFactory.blankNode();if(!d){r.emittedStack[o]=!1;return}u=d,r.idStack[o+1]=[u]}let c=r.idStack[o];c||(c=r.idStack[o]=[]),c.some(l=>l.equals(u))||c.push(u),await r.handlePendingContainerFlushBuffers()||(r.emittedStack[o]=!1)}}jw.ContainerHandlerIdentifier=B0e;var Ah={},xh={},w6;function Cw(){if(w6)return xh;w6=1,Object.defineProperty(xh,"__esModule",{value:!0}),xh.EntryHandlerPredicate=void 0;const t=vn,e=Ml();let r=class XL{static async handlePredicateObject(a,s,o,u,c,l,d,h,f){const p=await s.getPropertiesDepth(o,u),b=await s.getDepthOffsetGraph(u,o),y=u-b,S=a.idStack[p];if(S&&!f)for(const w of S)if(b>=0){const O=a.idStack[y-1];if(O)for(const T of O)s.emitQuadChecked(u,w,c,l,T,d,h);else d?(s.validateReverseSubject(l),a.getUnidentifiedGraphBufferSafe(y-1).push({subject:l,predicate:c,object:w,isEmbedded:h})):a.getUnidentifiedGraphBufferSafe(y-1).push({subject:w,predicate:c,object:l,isEmbedded:h})}else{const O=await s.getGraphContainerValue(o,p);s.emitQuadChecked(u,w,c,l,O,d,h)}else if(d&&s.validateReverseSubject(l),f){if(a.rdfstar){a.idStack[u]&&a.emitError(new t.ErrorCoded(`Found an illegal @id inside an annotation: ${a.idStack[u][0].value}`,t.ERROR_CODES.INVALID_ANNOTATION));for(let O=0;O<u;O++)await s.unaliasKeyword(o[O],o,O)==="@id"&&a.emitError(new t.ErrorCoded("Found an illegal annotation inside an embedded node",t.ERROR_CODES.INVALID_ANNOTATION));const w=a.getAnnotationsBufferSafe(p),I={predicate:c,object:l,reverse:d,nestedAnnotations:[],depth:p};w.push(I);for(let O=w.length-2;O>=0;O--){const T=w[O];T.depth>p&&(I.nestedAnnotations.push(T),w.splice(O,1))}}}else a.getUnidentifiedValueBufferSafe(p).push({predicate:c,object:l,reverse:d,isEmbedded:h})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(a,s,o,u,c){const l=o[u];if(l){const d=await a.getContext(o);if(!a.jsonLiteralStack[u]&&await s.predicateToTerm(d,o[u]))return e.Util.getContextValueType(d,l)==="@json"&&(a.jsonLiteralStack[u+1]=!0),!0}return!1}async test(a,s,o,u,c){return u[c]}async handle(a,s,o,u,c,l,d){const h=u[l],f=await a.getContext(u),p=await s.predicateToTerm(f,o);if(p){const b=await s.valueToTerm(f,o,c,l,u);if(b.length)for(let y of b){let S=await s.unaliasKeywordParent(u,l);const w=e.Util.isPropertyReverse(f,h,S);let I=0;for(;S==="@reverse"||typeof S=="number";)typeof S=="number"?I++:l--,S=await s.unaliasKeywordParent(u,l-I);const O=e.Util.isPropertyInEmbeddedNode(S);s.validateReverseInEmbeddedNode(o,w,O);const T=e.Util.isPropertyInAnnotationObject(S);if(c){const x="@list"in e.Util.getContextValueContainer(f,o);if(x||c["@list"]){if((x&&!Array.isArray(c)&&!c["@list"]||c["@list"]&&!Array.isArray(c["@list"]))&&y!==s.rdfNil){const P=s.dataFactory.blankNode();a.emitQuad(l,s.dataFactory.quad(P,s.rdfRest,s.rdfNil,s.getDefaultGraph())),a.emitQuad(l,s.dataFactory.quad(P,s.rdfFirst,y,s.getDefaultGraph())),y=P}if(w&&!a.allowSubjectList)throw new t.ErrorCoded(`Found illegal list value in subject position at ${o}`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await XL.handlePredicateObject(a,s,u,l,p,y,w,O,T)}}}};return xh.EntryHandlerPredicate=r,xh}var S6;function $0e(){if(S6)return Ah;S6=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.ContainerHandlerIndex=void 0;const t=vn,e=Cw(),r=Ml();let n=class{canCombineWithGraph(){return!0}async handle(s,o,u,c,l,d){if(!Array.isArray(l)){const h="@graph"in s,f=await o.getContext(c),p=c[d-1],b=r.Util.getContextValueIndex(f,p);if(b){if(t.Util.isPotentialKeyword(b))throw new t.ErrorCoded(`Keywords can not be used as @index value, got: ${b}`,t.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof b!="string")throw new t.ErrorCoded(`@index values must be strings, got: ${b}`,t.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof l!="object"){if(r.Util.getContextValueType(f,p)!=="@id")throw new t.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${l}`,t.ERROR_CODES.INVALID_VALUE_OBJECT);const w=u.resourceToTerm(f,l);w&&(o.idStack[d+1]=[w])}const S=u.createVocabOrBaseTerm(f,b);if(S){const w=await u.valueToTerm(f,b,await u.getContainerKey(c[d],c,d),d,c);if(h){const I=await u.getGraphContainerValue(c,d+1);for(const O of w)o.emitQuad(d,u.dataFactory.quad(I,S,O,u.getDefaultGraph()))}else for(const I of w)await e.EntryHandlerPredicate.handlePredicateObject(o,u,c,d+1,S,I,!1,!1,!1)}}const y=h?2:1;await o.newOnValueJob(c.slice(0,c.length-y),l,d-y,!0),await o.handlePendingContainerFlushBuffers()}o.emittedStack[d]=!1}};return Ah.ContainerHandlerIndex=n,Ah}var Fw={};Object.defineProperty(Fw,"__esModule",{value:!0});Fw.ContainerHandlerLanguage=void 0;const T6=vn;class U0e{canCombineWithGraph(){return!1}async handle(e,r,n,a,s,o){const u=await n.getContainerKey(a[o],a,o);if(Array.isArray(s))s=s.map(c=>({"@value":c,"@language":u}));else{if(typeof s!="string")throw new T6.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(s)}', but expected string`,T6.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);s={"@value":s,"@language":u}}await r.newOnValueJob(a.slice(0,a.length-1),s,o-1,!0),r.emittedStack[o]=!1}}Fw.ContainerHandlerLanguage=U0e;var Rh={},E6;function q0e(){if(E6)return Rh;E6=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.ContainerHandlerType=void 0;const t=Cw(),e=Ml();let r=class{canCombineWithGraph(){return!1}async handle(a,s,o,u,c,l){if(!Array.isArray(c)){if(typeof c=="string"){const f=await s.getContext(u),b=e.Util.getContextValueType(f,u[l-1])==="@vocab"?await o.createVocabOrBaseTerm(f,c):await o.resourceToTerm(f,c);if(b){const y={"@id":b.termType==="NamedNode"?b.value:c};await s.newOnValueJob(u.slice(0,u.length-1),y,l-1,!0),s.idStack[l+1]=[b]}}else{const f=!!s.idStack[l+1];f||delete s.idStack[l],await s.newOnValueJob(u.slice(0,u.length-1),c,l-1,!0),f||(s.idStack[l+1]=s.idStack[l])}const d=await o.getContainerKey(u[l],u,l),h=d!==null?o.createVocabOrBaseTerm(await s.getContext(u),d):null;h&&await t.EntryHandlerPredicate.handlePredicateObject(s,o,u,l+1,o.rdfType,h,!1,!1,!1),await s.handlePendingContainerFlushBuffers()}s.emittedStack[l]=!1}};return Rh.ContainerHandlerType=r,Rh}var O6;function KL(){if(O6)return Oh;O6=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.EntryHandlerContainer=void 0;const t=jw,e=$0e(),r=Fw,n=q0e(),a=Ml();let s=class Tu{static isSimpleGraphContainer(u){return"@graph"in u&&("@set"in u&&Object.keys(u).length===2||Object.keys(u).length===1)}static isComplexGraphContainer(u){return"@graph"in u&&("@set"in u&&Object.keys(u).length>2||!("@set"in u)&&Object.keys(u).length>1)}static getContainerGraphIndex(u,c,l){let d=Tu.isSimpleGraphContainer(u),h="";for(let f=c;f<l.length;f++)(!d||typeof l[f]=="number")&&(h+=":"+l[f]),!d&&typeof l[f]!="number"&&(d=!0);return h}static async getContainerHandler(u,c,l){const d={containers:{"@set":!0},depth:l,fallback:!0};let h=!1;const f=await u.getContext(c,2);for(let p=l-1;p>=0;p--)if(typeof c[p]!="number"){const b=a.Util.getContextValue(f,"@container",c[p],!1);if(b&&Tu.isSimpleGraphContainer(b))return{containers:b,depth:p+1,fallback:!1};const y=a.Util.getContextValue(f,"@container",c[p-1],!1);if(y){const S="@graph"in y;for(const w in Tu.CONTAINER_HANDLERS)if(y[w])return S?Tu.CONTAINER_HANDLERS[w].canCombineWithGraph()?{containers:y,depth:p,fallback:!1}:d:h?d:{containers:y,depth:p,fallback:!1};return d}else{if(h)return d;h=!0}}return d}static async isBufferableContainerHandler(u,c,l){const d=await Tu.getContainerHandler(u,c,l);return!d.fallback&&!("@graph"in d.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(u,c,l,d,h){return!!await this.test(u,c,null,l,d)}async test(u,c,l,d,h){const f=a.Util.getContextValueContainer(await u.getContext(d,2),d[h-1]);for(const p in Tu.CONTAINER_HANDLERS)if(f[p])return{containers:f,handler:Tu.CONTAINER_HANDLERS[p]};return null}async handle(u,c,l,d,h,f,p){return p.handler.handle(p.containers,u,c,d,h,f)}};return s.CONTAINER_HANDLERS={"@id":new t.ContainerHandlerIdentifier,"@index":new e.ContainerHandlerIndex,"@language":new r.ContainerHandlerLanguage,"@type":new n.ContainerHandlerType},Oh.EntryHandlerContainer=s,Oh}var V0e=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((r,n,a)=>{const s=a===0?"":",",o=n===void 0||typeof n=="symbol"?null:n;return r+s+t(o)},"")+"]":"{"+Object.keys(e).sort().reduce((r,n,a)=>{if(e[n]===void 0||typeof e[n]=="symbol")return r;const s=r.length===0?"":",";return r+s+t(n)+":"+t(e[n])},"")+"}"},A6;function Ml(){if(A6)return Eh;A6=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.Util=void 0;const t=vn,e=yt,r=KL(),n=V0e;let a=class ur{constructor(o){this.parsingContext=o.parsingContext,this.dataFactory=o.dataFactory||new e.DataFactory,this.rdfFirst=this.dataFactory.namedNode(ur.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(ur.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(ur.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(ur.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(ur.RDF+"JSON")}static getContextValue(o,u,c,l){const d=o.getContextRaw()[c];if(!d)return l;const h=d[u];return h===void 0?l:h}static getContextValueContainer(o,u){return ur.getContextValue(o,"@container",u,{"@set":!0})}static getContextValueType(o,u){const c=ur.getContextValue(o,"@type",u,null);return c==="@none"?null:c}static getContextValueLanguage(o,u){return ur.getContextValue(o,"@language",u,o.getContextRaw()["@language"]||null)}static getContextValueDirection(o,u){return ur.getContextValue(o,"@direction",u,o.getContextRaw()["@direction"]||null)}static isContextValueReverse(o,u){return!!ur.getContextValue(o,"@reverse",u,null)}static getContextValueIndex(o,u){return ur.getContextValue(o,"@index",u,o.getContextRaw()["@index"]||null)}static isPropertyReverse(o,u,c){return c==="@reverse"!==ur.isContextValueReverse(o,u)}static isPropertyInEmbeddedNode(o){return o==="@id"}static isPropertyInAnnotationObject(o){return o==="@annotation"}static isValidIri(o){return o!==null&&t.Util.isValidIri(o)}static isPrefixArray(o,u){if(o.length>u.length)return!1;for(let c=0;c<o.length;c++)if(o[c]!==u[c])return!1;return!0}async validateValueIndexes(o){if(this.parsingContext.validateValueIndexes){const u={};for(const c of o)if(c&&typeof c=="object"){const l=c["@id"],d=c["@index"];if(l&&d){const h=u[l];if(h&&h!==d)throw new t.ErrorCoded(`Conflicting @index value for ${l}`,t.ERROR_CODES.CONFLICTING_INDEXES);u[l]=d}}}}async valueToTerm(o,u,c,l,d){if(ur.getContextValueType(o,u)==="@json")return[this.dataFactory.literal(this.valueToJsonString(c),this.rdfJson)];const h=typeof c;switch(h){case"object":if(c==null)return[];if(Array.isArray(c))return"@list"in ur.getContextValueContainer(o,u)?c.length===0?[this.rdfNil]:this.parsingContext.idStack[l+1]||[]:(await this.validateValueIndexes(c),[]);if(o=await this.getContextSelfOrPropertyScoped(o,u),"@context"in c&&(o=await this.parsingContext.parseContext(c["@context"],(await this.parsingContext.getContext(d,0)).getContextRaw())),c=await this.unaliasKeywords(c,d,l,o),"@value"in c){let f,p,b,y,S;for(u in c){const w=c[u];switch(u){case"@value":f=w;break;case"@language":p=w;break;case"@direction":b=w;break;case"@type":y=w;break;case"@index":S=w;break;case"@annotation":break;default:throw new t.ErrorCoded(`Unknown value entry '${u}' in @value: ${JSON.stringify(c)}`,t.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(y,d,l,!0,o)==="@json")return[this.dataFactory.literal(this.valueToJsonString(f),this.rdfJson)];if(f===null)return[];if(typeof f=="object")throw new t.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(f)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&S&&typeof S!="string")throw new t.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(S)}'`,t.ERROR_CODES.INVALID_INDEX_VALUE);if(p){if(typeof f!="string")throw new t.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`,t.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!t.ContextParser.validateLanguage(p,this.parsingContext.strictValues,t.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(p=p.toLowerCase())}if(b){if(typeof f!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`);if(!t.ContextParser.validateDirection(b,this.parsingContext.strictValues))return[]}if(p&&b&&this.parsingContext.rdfDirection){if(y)throw new t.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(c)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(l,f,p,b))}else if(p){if(y)throw new t.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(c)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(f,p)]}else if(b&&this.parsingContext.rdfDirection){if(y)throw new t.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(c)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(l,f,p,b))}else if(y){if(typeof y!="string")throw new t.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(y)}'`,t.ERROR_CODES.INVALID_TYPED_VALUE);const w=this.createVocabOrBaseTerm(o,y);if(!w)throw new t.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(y)}'`,t.ERROR_CODES.INVALID_TYPED_VALUE);if(w.termType!=="NamedNode")throw new t.ErrorCoded(`Illegal value type (${w.termType}): ${y}`,t.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(f,w)]}return await this.valueToTerm(new t.JsonLdContextNormalized({}),u,f,l,d)}else if("@set"in c){if(Object.keys(c).length>1)throw new t.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${u}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in c){if(Object.keys(c).length>1)throw new t.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${u}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const f=c["@list"];return Array.isArray(f)?f.length===0?[this.rdfNil]:this.parsingContext.idStack[l+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(d),u,f,l-1,d.slice(0,-1))}else{if("@reverse"in c&&typeof c["@reverse"]=="boolean")return[];if("@graph"in ur.getContextValueContainer(await this.parsingContext.getContext(d),u)){const f=this.parsingContext.graphContainerTermStack[l+1];return f?Object.values(f):[this.dataFactory.blankNode()]}else if("@id"in c){if(Object.keys(c).length>1&&(o=await this.parsingContext.getContext(d,0)),"@context"in c&&(o=await this.parsingContext.parseContext(c["@context"],o.getContextRaw())),c["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(o,c["@id"]));{const f=c["@id"];let p;if(typeof f=="object")if(this.parsingContext.rdfstar)p=this.parsingContext.idStack[l+1][0];else throw new t.ErrorCoded(`Found illegal @id '${c}'`,t.ERROR_CODES.INVALID_ID_VALUE);else p=this.resourceToTerm(o,f);return this.nullableTermToArray(p)}}else return this.parsingContext.emittedStack[l+1]||c&&typeof c=="object"&&Object.keys(c).length===0?this.parsingContext.idStack[l+1]||(this.parsingContext.idStack[l+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(l,await this.getContextSelfOrPropertyScoped(o,u),u,c,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(l,await this.getContextSelfOrPropertyScoped(o,u),u,(!!c).toString(),this.dataFactory.namedNode(ur.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(l,await this.getContextSelfOrPropertyScoped(o,u),u,c,this.dataFactory.namedNode(c%1===0&&c<1e21?ur.XSD_INTEGER:ur.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${h}`)),[]}}async getContextSelfOrPropertyScoped(o,u){const c=o.getContextRaw()[u];return c&&typeof c=="object"&&"@context"in c&&(o=await this.parsingContext.parseContext(c,o.getContextRaw(),!0)),o}nullableTermToArray(o){return o?[o]:[]}predicateToTerm(o,u){const c=o.expandTerm(u,!0,this.parsingContext.getExpandOptions());if(!c)return null;if(c[0]==="_"&&c[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(c.substr(2)):null;if(ur.isValidIri(c))return this.dataFactory.namedNode(c);if(c&&this.parsingContext.strictValues)this.parsingContext.emitError(new t.ErrorCoded(`Invalid predicate IRI: ${c}`,t.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(o,u){if(u.startsWith("_:"))return this.dataFactory.blankNode(u.substr(2));const c=o.expandTerm(u,!1,this.parsingContext.getExpandOptions());if(!ur.isValidIri(c))if(c&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${c}`));else return null;return this.dataFactory.namedNode(c)}createVocabOrBaseTerm(o,u){if(u.startsWith("_:"))return this.dataFactory.blankNode(u.substr(2));const c=this.parsingContext.getExpandOptions();let l=o.expandTerm(u,!0,c);if(l===u&&(l=o.expandTerm(u,!1,c)),!ur.isValidIri(l))if(l&&this.parsingContext.strictValues&&!l.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${l}`));else return null;return this.dataFactory.namedNode(l)}intToString(o,u){return typeof o=="number"?Number.isFinite(o)?o%1===0&&(!u||u.value!==ur.XSD_DOUBLE)?Number(o).toString():o.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):o>0?"INF":"-INF":o}stringValueToTerm(o,u,c,l,d){const h=ur.getContextValueType(u,c);if(h)if(h==="@id"){if(!d)return this.resourceToTerm(u,this.intToString(l,d))}else if(h==="@vocab"){if(!d)return this.createVocabOrBaseTerm(u,this.intToString(l,d))}else d=this.dataFactory.namedNode(h);if(!d){const f=ur.getContextValueLanguage(u,c),p=ur.getContextValueDirection(u,c);return p&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(o,this.intToString(l,d),f,p):this.dataFactory.literal(this.intToString(l,d),f)}return this.dataFactory.literal(this.intToString(l,d),d)}createLanguageDirectionLiteral(o,u,c,l){if(this.parsingContext.rdfDirection==="i18n-datatype")return c||(c=""),this.dataFactory.literal(u,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${c}_${l}`));{const d=this.dataFactory.blankNode(),h=this.getDefaultGraph();return this.parsingContext.emitQuad(o,this.dataFactory.quad(d,this.dataFactory.namedNode(ur.RDF+"value"),this.dataFactory.literal(u),h)),c&&this.parsingContext.emitQuad(o,this.dataFactory.quad(d,this.dataFactory.namedNode(ur.RDF+"language"),this.dataFactory.literal(c),h)),this.parsingContext.emitQuad(o,this.dataFactory.quad(d,this.dataFactory.namedNode(ur.RDF+"direction"),this.dataFactory.literal(l),h)),d}}valueToJsonString(o){return n(o)}async unaliasKeyword(o,u,c,l,d){if(Number.isInteger(o))return o;if(!l){const h=this.parsingContext.unaliasedKeywordCacheStack[c];if(h)return h}if(!t.Util.isPotentialKeyword(o)){d=d||await this.parsingContext.getContext(u);let h=d.getContextRaw()[o];h&&typeof h=="object"&&(h=h["@id"]),t.Util.isValidKeyword(h)&&(o=h)}return l?o:this.parsingContext.unaliasedKeywordCacheStack[c]=o}async unaliasKeywordParent(o,u){return await this.unaliasKeyword(u>0&&o[u-1],o,u-1)}async unaliasKeywords(o,u,c,l){const d={};for(const h in o)d[await this.unaliasKeyword(h,u,c+1,!0,l)]=o[h];return d}async isLiteral(o,u){for(let c=u;c>=0;c--){if(await this.unaliasKeyword(o[c],o,c)==="@annotation")return!1;if(this.parsingContext.literalStack[c]||this.parsingContext.jsonLiteralStack[c])return!0}return!1}async getDepthOffsetGraph(o,u){for(let c=o-1;c>0;c--)if(await this.unaliasKeyword(u[c],u,c)==="@graph"){const l=(await r.EntryHandlerContainer.getContainerHandler(this.parsingContext,u,c)).containers;return r.EntryHandlerContainer.isComplexGraphContainer(l)?-1:o-c-1}return-1}validateReverseSubject(o){if(o.termType==="Literal")throw new t.ErrorCoded(`Found illegal literal in subject position: ${o.value}`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(o,u){let c=this.getDefaultGraph();const{containers:l,depth:d}=await r.EntryHandlerContainer.getContainerHandler(this.parsingContext,o,u);if("@graph"in l){const h=r.EntryHandlerContainer.getContainerGraphIndex(l,d,o),f=this.parsingContext.graphContainerTermStack[d];if(c=f?f[h]:null,!c){let p=null;if("@id"in l){const b=await this.getContainerKey(o[d],o,d);b!==null&&(p=await this.resourceToTerm(await this.parsingContext.getContext(o),b))}p||(p=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[d]||(this.parsingContext.graphContainerTermStack[d]={}),c=this.parsingContext.graphContainerTermStack[d][h]=p}}return c}async getPropertiesDepth(o,u){let c=u;for(let l=u-1;l>0;l--)if(typeof o[l]!="number"){const d=await this.unaliasKeyword(o[l],o,l);if(d==="@reverse")return l;if(d==="@nest")c=l;else return c}return c}async getContainerKey(o,u,c){const l=await this.unaliasKeyword(o,u,c);return l==="@none"?null:l}validateReverseInEmbeddedNode(o,u,c){if(c&&u&&!this.parsingContext.rdfstarReverseInEmbedded)throw new t.ErrorCoded(`Illegal reverse property in embedded node in ${o}`,t.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(o,u,c,l,d,h,f){let p;if(h?(this.validateReverseSubject(l),p=this.dataFactory.quad(l,c,u,d)):p=this.dataFactory.quad(u,c,l,d),f){if(p.graph.termType!=="DefaultGraph"&&(p=this.dataFactory.quad(p.subject,p.predicate,p.object)),this.parsingContext.idStack[o-1])throw new t.ErrorCoded("Illegal multiple properties in an embedded node",t.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[o-1]=[p]}else this.parsingContext.emitQuad(o,p);const b=this.parsingContext.annotationsBuffer[o];if(b){for(const y of b)this.emitAnnotation(o,p,y);delete this.parsingContext.annotationsBuffer[o]}}emitAnnotation(o,u,c){let l;c.reverse?(this.validateReverseSubject(c.object),l=this.dataFactory.quad(c.object,c.predicate,u)):l=this.dataFactory.quad(u,c.predicate,c.object),this.parsingContext.emitQuad(o,l);for(const d of c.nestedAnnotations)this.emitAnnotation(o,l,d)}};return a.XSD="http://www.w3.org/2001/XMLSchema#",a.XSD_BOOLEAN=a.XSD+"boolean",a.XSD_INTEGER=a.XSD+"integer",a.XSD_DOUBLE=a.XSD+"double",a.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Eh.Util=a,Eh}Object.defineProperty(Nw,"__esModule",{value:!0});Nw.EntryHandlerArrayValue=void 0;const H0e=Ml(),x6=vn;class k0e{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,r,n,a,s){return this.test(e,r,null,n,a)}async test(e,r,n,a,s){return typeof a[s]=="number"}async handle(e,r,n,a,s,o){let u=await r.unaliasKeywordParent(a,o);if(u==="@list"){let c=null,l=0;for(let d=o-2;d>0;d--){const h=a[d];if(typeof h=="string"||typeof h=="number"){l=d,c=h;break}}if(c!==null){const d=await r.valueToTerm(await e.getContext(a),c,s,o,a);for(const h of d)await this.handleListElement(e,r,h,s,o,a.slice(0,l),l);d.length===0&&await this.handleListElement(e,r,null,s,o,a.slice(0,l),l)}}else if(u==="@set")await e.newOnValueJob(a.slice(0,-2),s,o-2,!1);else if(u!==void 0&&u!=="@type"){for(let l=o-1;l>0;l--)if(typeof a[l]!="number"){u=await r.unaliasKeyword(a[l],a,l);break}const c=await e.getContext(a.slice(0,-1));if("@list"in H0e.Util.getContextValueContainer(c,u)){e.emittedStack[o+1]=!0;const l=await r.valueToTerm(await e.getContext(a),u,s,o,a);for(const d of l)await this.handleListElement(e,r,d,s,o,a.slice(0,-1),o-1);l.length===0&&await this.handleListElement(e,r,null,s,o,a.slice(0,-1),o-1)}else e.shiftStack(o,1),await e.newOnValueJob(a.slice(0,-1),s,o-1,!1),e.contextTree.removeContext(a.slice(0,-1))}}async handleListElement(e,r,n,a,s,o,u){let c=e.listPointerStack[s];if(a!==null&&(await r.unaliasKeywords(a,o,s))["@value"]!==null){if(!c||!c.value){const l=r.dataFactory.blankNode();c={value:l,listRootDepth:u,listId:l}}else{const l=r.dataFactory.blankNode();e.emitQuad(s,r.dataFactory.quad(c.value,r.rdfRest,l,r.getDefaultGraph())),c.value=l}n&&e.emitQuad(s,r.dataFactory.quad(c.value,r.rdfFirst,n,r.getDefaultGraph()))}else c||(c={listRootDepth:u,listId:r.rdfNil});e.listPointerStack[s]=c,e.rdfstar&&e.annotationsBuffer[s]&&e.emitError(new x6.ErrorCoded("Found an illegal annotation inside a list",x6.ERROR_CODES.INVALID_ANNOTATION))}}Nw.EntryHandlerArrayValue=k0e;var Mw={};Object.defineProperty(Mw,"__esModule",{value:!0});Mw.EntryHandlerInvalidFallback=void 0;class Q0e{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,r,n,a,s){return!1}async test(e,r,n,a,s){return!0}async handle(e,r,n,a,s,o){e.emittedStack[o]=!1}}Mw.EntryHandlerInvalidFallback=Q0e;var Lw={},vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.EntryHandlerKeyword=void 0;class G0e{constructor(e){this.keyword=e}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,r,n,a,s){return!1}async test(e,r,n,a,s){return n===this.keyword}}vs.EntryHandlerKeyword=G0e;Object.defineProperty(Lw,"__esModule",{value:!0});Lw.EntryHandlerKeywordContext=void 0;const R6=vn,z0e=vs;class W0e extends z0e.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(e,r,n,a,s,o){e.streamingProfile&&(e.processingStack[o]||e.processingType[o]||e.idStack[o]!==void 0)&&e.emitError(new R6.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",R6.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const u=e.getContext(a),c=e.parseContext(s,(await u).getContextRaw());e.contextTree.setContext(a.slice(0,-1),c),e.emitContext(s),await e.validateContext(await c)}}Lw.EntryHandlerKeywordContext=W0e;var Bw={};Object.defineProperty(Bw,"__esModule",{value:!0});Bw.EntryHandlerKeywordGraph=void 0;const X0e=vs;class K0e extends X0e.EntryHandlerKeyword{constructor(){super("@graph")}async handle(e,r,n,a,s,o){e.graphStack[o+1]=!0}}Bw.EntryHandlerKeywordGraph=K0e;var $w={};Object.defineProperty($w,"__esModule",{value:!0});$w.EntryHandlerKeywordId=void 0;const Rs=vn,J0e=vs;class Y0e extends J0e.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(e,r,n,a,s,o){if(typeof s!="string"){if(e.rdfstar&&typeof s=="object"){const c=Object.keys(s);c.length===1&&c[0]==="@id"&&e.emitError(new Rs.ErrorCoded(`Invalid embedded node without property with @id ${s["@id"]}`,Rs.ERROR_CODES.INVALID_EMBEDDED_NODE))}else e.emitError(new Rs.ErrorCoded(`Found illegal @id '${s}'`,Rs.ERROR_CODES.INVALID_ID_VALUE));return}const u=await r.getPropertiesDepth(a,o);if(e.idStack[u]!==void 0&&(e.idStack[u][0].listHead?e.emitError(new Rs.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${a[o-1]}'`,Rs.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):e.emitError(new Rs.ErrorCoded(`Found duplicate @ids '${e.idStack[u][0].value}' and '${s}'`,Rs.ERROR_CODES.COLLIDING_KEYWORDS))),e.rdfstar&&e.annotationsBuffer[o])for(const c of e.annotationsBuffer[o])c.depth===o&&e.emitError(new Rs.ErrorCoded(`Found an illegal @id inside an annotation: ${s}`,Rs.ERROR_CODES.INVALID_ANNOTATION));e.idStack[u]=r.nullableTermToArray(await r.resourceToTerm(await e.getContext(a),s))}}$w.EntryHandlerKeywordId=Y0e;var Uw={};Object.defineProperty(Uw,"__esModule",{value:!0});Uw.EntryHandlerKeywordIncluded=void 0;const ud=vn,Z0e=vs;class eye extends Z0e.EntryHandlerKeyword{constructor(){super("@included")}async handle(e,r,n,a,s,o){typeof s!="object"&&e.emitError(new ud.ErrorCoded(`Found illegal @included '${s}'`,ud.ERROR_CODES.INVALID_INCLUDED_VALUE));const u=await r.unaliasKeywords(s,a,o,await e.getContext(a));"@value"in u&&e.emitError(new ud.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(s)}'`,ud.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in u&&e.emitError(new ud.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(s)}'`,ud.ERROR_CODES.INVALID_INCLUDED_VALUE)),e.emittedStack[o]=!1}}Uw.EntryHandlerKeywordIncluded=eye;var qw={};Object.defineProperty(qw,"__esModule",{value:!0});qw.EntryHandlerKeywordNest=void 0;const L1=vn,tye=vs;class rye extends tye.EntryHandlerKeyword{constructor(){super("@nest")}async handle(e,r,n,a,s,o){typeof s!="object"&&e.emitError(new L1.ErrorCoded(`Found invalid @nest entry for '${n}': '${s}'`,L1.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await r.unaliasKeywords(s,a,o,await e.getContext(a))&&e.emitError(new L1.ErrorCoded(`Found an invalid @value node for '${n}'`,L1.ERROR_CODES.INVALID_NEST_VALUE)),e.emittedStack[o]=!1}}qw.EntryHandlerKeywordNest=rye;var Vw={};Object.defineProperty(Vw,"__esModule",{value:!0});Vw.EntryHandlerKeywordType=void 0;const Ih=vn,B1=Ml(),nye=Cw(),iye=vs;class aye extends iye.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(e,r,n,a,s,o){const u=a[o],c=await e.getContext(a),l=r.rdfType,d=await r.unaliasKeywordParent(a,o),h=B1.Util.isPropertyReverse(c,u,d),f=B1.Util.isPropertyInEmbeddedNode(d);r.validateReverseInEmbeddedNode(n,h,f);const p=B1.Util.isPropertyInAnnotationObject(d),b=Array.isArray(s)?s:[s];for(const w of b){typeof w!="string"&&e.emitError(new Ih.ErrorCoded(`Found illegal @type '${w}'`,Ih.ERROR_CODES.INVALID_TYPE_VALUE));const I=r.createVocabOrBaseTerm(c,w);I&&await nye.EntryHandlerPredicate.handlePredicateObject(e,r,a,o,l,I,h,f,p)}let y=Promise.resolve(c),S=!1;for(const w of b.sort()){const I=B1.Util.getContextValue(c,"@context",w,null);I&&(S=!0,y=y.then(O=>e.parseContext(I,O.getContextRaw())))}e.streamingProfile&&(S||!e.streamingProfileAllowOutOfOrderPlainType)&&(e.processingStack[o]||e.idStack[o])&&e.emitError(new Ih.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",Ih.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),S&&(y=y.then(w=>w.getContextRaw()["@propagate"]!==!0?new Ih.JsonLdContextNormalized(Object.assign(Object.assign({},w.getContextRaw()),{"@propagate":!1,"@__propagateFallback":c.getContextRaw()})):w),e.contextTree.setContext(a.slice(0,a.length-1),y)),e.processingType[o]=!0}}Vw.EntryHandlerKeywordType=aye;var Hw={};Object.defineProperty(Hw,"__esModule",{value:!0});Hw.EntryHandlerKeywordUnknownFallback=void 0;const yp=vn;class kw{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,r,n,a,s){const o=await r.unaliasKeyword(n[a],n,a);return yp.Util.isPotentialKeyword(o)?!(!s&&o==="@list"):!1}async test(e,r,n,a,s){return yp.Util.isPotentialKeyword(n)}async handle(e,r,n,a,s,o){const u=kw.VALID_KEYWORDS_TYPES[n];u!==void 0?u&&typeof s!==u.type&&e.emitError(new yp.ErrorCoded(`Invalid value type for '${n}' with value '${s}'`,u.errorCode)):e.strictValues&&e.emitError(new Error(`Unknown keyword '${n}' with value '${s}'`)),e.emittedStack[o]=!1}}kw.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:yp.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:yp.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null};Hw.EntryHandlerKeywordUnknownFallback=kw;var Qw={};Object.defineProperty(Qw,"__esModule",{value:!0});Qw.EntryHandlerKeywordValue=void 0;const sye=vs;class oye extends sye.EntryHandlerKeyword{constructor(){super("@value")}async validate(e,r,n,a,s){const o=n[a];return o&&!e.literalStack[a]&&await this.test(e,r,o,n,a)&&(e.literalStack[a]=!0),super.validate(e,r,n,a,s)}async test(e,r,n,a,s){return await r.unaliasKeyword(a[s],a.slice(0,a.length-1),s-1,!0)==="@value"}async handle(e,r,n,a,s,o){e.literalStack[o]=!0,delete e.unidentifiedValuesBuffer[o],delete e.unidentifiedGraphsBuffer[o],e.emittedStack[o]=!1}}Qw.EntryHandlerKeywordValue=oye;var Ph={},Gw={};Object.defineProperty(Gw,"__esModule",{value:!0});Gw.ContextTree=void 0;class TR{constructor(){this.subTrees={}}getContext(e){if(e.length>0){const[r,...n]=e,a=this.subTrees[r];if(a){const s=a.getContext(n);if(s)return s.then(({context:o,depth:u})=>({context:o,depth:u+1}))}}return this.context?this.context.then(r=>({context:r,depth:0})):null}setContext(e,r){if(e.length===0)this.context=r;else{const[n,...a]=e;let s=this.subTrees[n];s||(s=this.subTrees[n]=new TR),s.setContext(a,r)}}removeContext(e){this.setContext(e,null)}}Gw.ContextTree=TR;var I6;function uye(){if(I6)return Ph;I6=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.ParsingContext=void 0;const t=vn,e=Mf,r=Gw,n=YL();let a=class JL{constructor(o){this.contextParser=new t.ContextParser({documentLoader:o.documentLoader,skipValidation:o.skipContextValidation}),this.streamingProfile=!!o.streamingProfile,this.baseIRI=o.baseIRI,this.produceGeneralizedRdf=!!o.produceGeneralizedRdf,this.allowSubjectList=!!o.allowSubjectList,this.processingMode=o.processingMode||n.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!o.strictValues,this.validateValueIndexes=!!o.validateValueIndexes,this.defaultGraph=o.defaultGraph,this.rdfDirection=o.rdfDirection,this.normalizeLanguageTags=o.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=o.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=o.rdfstar!==!1,this.rdfstarReverseInEmbedded=o.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new r.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=o.parser,o.context?(this.rootContext=this.parseContext(o.context),this.rootContext.then(u=>this.validateContext(u))):this.rootContext=Promise.resolve(new t.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(o,u,c){return this.contextParser.parse(o,{baseIRI:this.baseIRI,ignoreProtection:c,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:u,processingMode:this.activeProcessingMode})}validateContext(o){const u=o.getContextRaw()["@version"];if(u){if(this.activeProcessingMode&&u>this.activeProcessingMode)throw new e.ErrorCoded(`Unsupported JSON-LD version '${u}' under active processing mode ${this.activeProcessingMode}.`,e.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&u<this.activeProcessingMode)throw new e.ErrorCoded(`Invalid JSON-LD version ${u} under active processing mode ${this.activeProcessingMode}.`,e.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=u}}async getContext(o,u=1){const c=o;for(;typeof o[o.length-1]=="number";)o=o.slice(0,o.length-1);u&&(o=o.slice(0,-u));const l=await this.getContextPropagationAware(o);let h=l.context.getContextRaw();for(let f=l.depth;f<c.length-u;f++){const p=c[f],b=h[p];if(b&&typeof b=="object"&&"@context"in b){const y=(await this.parseContext(b,h,!0)).getContextRaw(),S=!(p in y)||y[p]["@context"]["@propagate"];(S!==!1||f===c.length-1-u)&&(h=Object.assign({},y),delete h["@propagate"],h[p]=Object.assign({},h[p]),"@id"in b&&(h[p]["@id"]=b["@id"]),delete h[p]["@context"],S!==!1&&this.contextTree.setContext(c.slice(0,f+u),Promise.resolve(new t.JsonLdContextNormalized(h))))}}return new t.JsonLdContextNormalized(h)}async getContextPropagationAware(o){const u=o.length;let c=null,l;do{l=!1,c&&"@__propagateFallback"in c.context.getContextRaw()?c.context=new t.JsonLdContextNormalized(c.context.getContextRaw()["@__propagateFallback"]):(c&&(o=o.slice(0,c.depth-1)),c=await this.contextTree.getContext(o)||{context:await this.rootContext,depth:0});const d=o[o.length-1];if(d in c.context.getContextRaw()){const h=c.context.getContextRaw()[d];h&&typeof h=="object"&&"@context"in h&&(l=!0)}}while(c.depth>0&&c.context.getContextRaw()["@propagate"]===!1&&c.depth!==u&&!l);return c.depth===0&&c.context.getContextRaw()["@propagate"]===!1&&c.depth!==u&&(c.context=new t.JsonLdContextNormalized({})),c}async newOnValueJob(o,u,c,l){await this.parser.newOnValueJob(o,u,c,l)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const o of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(o.depth,o.keys),this.parser.flushStacks(o.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(o,u){o===1&&(this.topLevelProperties=!0),this.parser.push(u)}emitError(o){this.parser.emit("error",o)}emitContext(o){this.parser.emit("context",o)}getUnidentifiedValueBufferSafe(o){let u=this.unidentifiedValuesBuffer[o];return u||(u=[],this.unidentifiedValuesBuffer[o]=u),u}getUnidentifiedGraphBufferSafe(o){let u=this.unidentifiedGraphsBuffer[o];return u||(u=[],this.unidentifiedGraphsBuffer[o]=u),u}getAnnotationsBufferSafe(o){let u=this.annotationsBuffer[o];return u||(u=[],this.annotationsBuffer[o]=u),u}getExpandOptions(){return JL.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(o,u){const c=this.idStack[o+u];if(c&&(this.idStack[o]=c,this.emittedStack[o]=!0,delete this.idStack[o+u]),this.pendingContainerFlushBuffers.length)for(const l of this.pendingContainerFlushBuffers)l.depth>=o+u&&(l.depth-=u,l.keys.splice(o,u));this.unidentifiedValuesBuffer[o+u]&&(this.unidentifiedValuesBuffer[o]=this.unidentifiedValuesBuffer[o+u],delete this.unidentifiedValuesBuffer[o+u]),this.annotationsBuffer[o+u-1]&&(this.annotationsBuffer[o-1]||(this.annotationsBuffer[o-1]=[]),this.annotationsBuffer[o-1]=[...this.annotationsBuffer[o-1],...this.annotationsBuffer[o+u-1]],delete this.annotationsBuffer[o+u-1])}};return a.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},Ph.ParsingContext=a,Ph}var zw={};Object.defineProperty(zw,"__esModule",{value:!0});zw.EntryHandlerKeywordAnnotation=void 0;const cye=vs,P6=vn;class lye extends cye.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(e,r,n,a,s,o){(typeof s=="string"||typeof s=="object"&&s["@value"])&&e.emitError(new P6.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(s)}`,P6.ERROR_CODES.INVALID_ANNOTATION))}}zw.EntryHandlerKeywordAnnotation=lye;var D6;function YL(){if(D6)return Th;D6=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.JsonLdParser=void 0;const t=DF,e=vn,r=Kt,n=Nw,a=KL(),s=Mw,o=Cw(),u=Lw,c=Bw,l=$w,d=Uw,h=qw,f=Vw,p=Hw,b=Qw,y=uye(),S=Ml(),w=l9,I=zw;let O=class bd extends r.Transform{constructor(x){super({readableObjectMode:!0}),x=x||{},this.options=x,this.parsingContext=new y.ParsingContext(Object.assign({parser:this},x)),this.util=new S.Util({dataFactory:x.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new t,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(x,P,B,Q){let N;if(P!=="application/ld+json"){if(P!=="application/json"&&!P.endsWith("+json"))throw new e.ErrorCoded(`Unsupported JSON-LD media type ${P}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(B&&B.has("Link")&&B.forEach((F,W)=>{if(W==="link"){const z=(0,w.parse)(F);for(const M of z.get("rel","http://www.w3.org/ns/json-ld#context")){if(N)throw new e.ErrorCoded("Multiple JSON-LD context link headers were found on "+x,e.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);N=M.uri}}}),!N&&!(Q!=null&&Q.ignoreMissingContextLinkHeader))throw new e.ErrorCoded(`Missing context link header for media type ${P} on ${x}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let D;if(B&&B.has("Content-Type")){const F=B.get("Content-Type"),W=/; *profile=([^"]*)/.exec(F);W&&W[1]==="http://www.w3.org/ns/json-ld#streaming"&&(D=!0)}return new bd(Object.assign({baseIRI:x,context:N,streamingProfile:D},Q||{}))}import(x){if("pipe"in x){x.on("error",B=>P.emit("error",B));const P=x.pipe(new bd(this.options));return P}else{const P=new r.PassThrough({readableObjectMode:!0});x.on("error",Q=>B.emit("error",Q)),x.on("data",Q=>P.push(Q)),x.on("end",()=>P.push(null));const B=P.pipe(new bd(this.options));return B}}_transform(x,P,B){this.jsonParser.write(x),this.lastOnValueJob.then(()=>B(),Q=>B(Q))}async newOnValueJob(x,P,B,Q){let N=!0;if(Q&&B<this.lastDepth){const M=this.parsingContext.listPointerStack[this.lastDepth];M&&(M.value&&this.push(this.util.dataFactory.quad(M.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),M.listId.listHead=!0,this.parsingContext.idStack[M.listRootDepth+1]=[M.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await a.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),N=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const D=await this.util.unaliasKeyword(x[B],x,B),F=await this.util.unaliasKeywordParent(x,B);this.parsingContext.emittedStack[B]=!0;let W=!0;e.Util.isValidKeyword(D)&&F==="@reverse"&&D!=="@context"&&this.emit("error",new e.ErrorCoded(`Found the @id '${P}' inside an @reverse property`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let z=!1;this.parsingContext.validationStack.length>1&&(z=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let M=Math.max(1,this.parsingContext.validationStack.length-1);M<x.length-1;M++){const C=this.parsingContext.validationStack[M]||(this.parsingContext.validationStack[M]=await this.validateKey(x.slice(0,M+1),M,z));if(C.valid)!z&&C.property&&(z=!0);else{this.parsingContext.emittedStack[B]=!1,W=!1;break}}if(await this.util.isLiteral(x,B)&&(W=!1),W)for(const M of bd.ENTRY_HANDLERS){const C=await M.test(this.parsingContext,this.util,D,x,B);if(C){await M.handle(this.parsingContext,this.util,D,x,P,B,C),M.isStackProcessor()&&(this.parsingContext.processingStack[B]=!0);break}}B===0&&Array.isArray(P)&&await this.util.validateValueIndexes(P),N&&B<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=B,this.lastKeys=x,this.parsingContext.unaliasedKeywordCacheStack.splice(B-1)}flushStacks(x){this.parsingContext.processingStack.splice(x,1),this.parsingContext.processingType.splice(x,1),this.parsingContext.emittedStack.splice(x,1),this.parsingContext.idStack.splice(x,1),this.parsingContext.graphStack.splice(x+1,1),this.parsingContext.graphContainerTermStack.splice(x,1),this.parsingContext.jsonLiteralStack.splice(x,1),this.parsingContext.validationStack.splice(x-1,2),this.parsingContext.literalStack.splice(x,this.parsingContext.literalStack.length-x),this.parsingContext.annotationsBuffer.splice(x,1)}async flushBuffer(x,P){let B=this.parsingContext.idStack[x];!!B||(B=this.parsingContext.idStack[x]=[this.util.dataFactory.blankNode()]);const N=this.parsingContext.unidentifiedValuesBuffer[x];if(N){for(const W of B){const z=await this.util.getDepthOffsetGraph(x,P),M=this.parsingContext.graphStack[x]||z>=0?this.parsingContext.idStack[x-z-1]:[await this.util.getGraphContainerValue(P,x)];if(M)for(const C of M){this.parsingContext.emittedStack[x]=!0;for(const V of N)this.util.emitQuadChecked(x,W,V.predicate,V.object,C,V.reverse,V.isEmbedded)}else{const C=this.parsingContext.getUnidentifiedGraphBufferSafe(x-await this.util.getDepthOffsetGraph(x,P)-1);for(const V of N)V.reverse?C.push({object:W,predicate:V.predicate,subject:V.object,isEmbedded:V.isEmbedded}):C.push({object:V.object,predicate:V.predicate,subject:W,isEmbedded:V.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(x,1),this.parsingContext.literalStack.splice(x,1),this.parsingContext.jsonLiteralStack.splice(x,1)}const D=this.parsingContext.unidentifiedGraphsBuffer[x];if(D){for(const W of B){const z=x===1&&W.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():W;this.parsingContext.emittedStack[x]=!0;for(const M of D)this.parsingContext.emitQuad(x,this.util.dataFactory.quad(M.subject,M.predicate,M.object,z))}this.parsingContext.unidentifiedGraphsBuffer.splice(x,1)}const F=this.parsingContext.annotationsBuffer[x];if(F){F.length>0&&x===1&&this.parsingContext.emitError(new e.ErrorCoded("Annotations can not be made on top-level nodes",e.ERROR_CODES.INVALID_ANNOTATION));const W=this.parsingContext.getAnnotationsBufferSafe(x-1);for(const z of F)W.push(z);delete this.parsingContext.annotationsBuffer[x]}}async validateKey(x,P,B){for(const Q of bd.ENTRY_HANDLERS)if(await Q.validate(this.parsingContext,this.util,x,P,B))return{valid:!0,property:B||Q.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=x=>{const P=this.jsonParser.stack.length,B=new Array(P+1).fill(0).map((Q,N)=>N===P?this.jsonParser.key:this.jsonParser.stack[N].key);if(!this.isParsingContextInner(P)){const Q=()=>this.newOnValueJob(B,x,P,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(B.slice(0,-1)))if(B[P]==="@context"){let N=this.contextJobs[P];N||(N=this.contextJobs[P]=[]),N.push(Q)}else this.contextAwaitingJobs.push({job:Q,keys:B,depth:P});else this.lastOnValueJob=this.lastOnValueJob.then(Q);!this.parsingContext.streamingProfile&&P===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=x=>{this.emit("error",x)}}isParsingContextInner(x){for(let P=x;P>0;P--)if(this.jsonParser.stack[P-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const P of this.contextJobs)if(P)for(const B of P)await B();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const x=[];for(const P of this.contextAwaitingJobs)await this.util.unaliasKeyword(P.keys[P.depth],P.keys,P.depth,!0)==="@type"||typeof P.keys[P.depth]=="number"&&await this.util.unaliasKeyword(P.keys[P.depth-1],P.keys,P.depth-1,!0)==="@type"?this.typeJobs.push({job:P.job,keys:P.keys.slice(0,P.keys.length-1)}):x.push(P);for(const P of x){if(this.typeJobs.length>0){const B=[],Q=[];for(let F=0;F<this.typeJobs.length;F++){const W=this.typeJobs[F];S.Util.isPrefixArray(W.keys,P.keys)&&(B.push(W),Q.push(F))}const N=B.sort((F,W)=>F.keys.length-W.keys.length);for(const F of N)await F.job();const D=Q.sort().reverse();for(const F of D)this.typeJobs.splice(F,1)}await P.job()}}};return O.DEFAULT_PROCESSING_MODE="1.1",O.ENTRY_HANDLERS=[new n.EntryHandlerArrayValue,new u.EntryHandlerKeywordContext,new l.EntryHandlerKeywordId,new d.EntryHandlerKeywordIncluded,new c.EntryHandlerKeywordGraph,new h.EntryHandlerKeywordNest,new f.EntryHandlerKeywordType,new b.EntryHandlerKeywordValue,new I.EntryHandlerKeywordAnnotation,new a.EntryHandlerContainer,new p.EntryHandlerKeywordUnknownFallback,new o.EntryHandlerPredicate,new s.EntryHandlerInvalidFallback],Th.JsonLdParser=O,Th}(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(YL(),t)})(WL);var hy={};Object.defineProperty(hy,"__esModule",{value:!0});hy.DocumentLoaderMediated=void 0;const dye=ms,fye=vn,hye=Pl;class ER extends fye.FetchDocumentLoader{constructor(e,r){super(ER.createFetcher(e,r)),this.mediatorHttp=e,this.context=r}static createFetcher(e,r){return async(n,a)=>{const s=await e.mediate({input:n,init:a,context:r});return s.json=async()=>JSON.parse(await hye(dye.ActorHttp.toNodeReadable(s.body))),s}}}hy.DocumentLoaderMediated=ER;Object.defineProperty(Dw,"__esModule",{value:!0});Dw.ActorRdfParseJsonLd=void 0;const pye=Rl,$1=Ht,yye=WL,bye=hy;class mye extends pye.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async testHandle(e,r,n){if(n.has($1.KeysRdfParseHtmlScript.processingHtmlScript)&&r!=="application/ld+json")throw new Error("JSON-LD in script tags can only have media type 'application/ld+json'");if(!r||!(r in this.mediaTypePriorities||r.endsWith("+json")))throw new Error(`Unrecognized media type: ${r}`);return await this.testHandleChecked(e)}async runHandle(e,r,n){var o;return{data:yye.JsonLdParser.fromHttpResponse(((o=e.metadata)==null?void 0:o.baseIRI)??"",r,e.headers,{documentLoader:n.get($1.KeysRdfParseJsonLd.documentLoader)||new bye.DocumentLoaderMediated(this.mediatorHttp,n),strictValues:n.get($1.KeysRdfParseJsonLd.strictValues),...n.get($1.KeysRdfParseJsonLd.parserOptions)}).import(e.data)}}}Dw.ActorRdfParseJsonLd=mye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Dw,t),r(hy,t)})(zL);var ZL={},Ww={},Xw={},Kw={},Jw={};(function(){(function(t){(function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(N){return N&&DataView.prototype.isPrototypeOf(N)}if(r.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(N){return N&&a.indexOf(Object.prototype.toString.call(N))>-1};function o(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(N))throw new TypeError("Invalid character in header field name");return N.toLowerCase()}function u(N){return typeof N!="string"&&(N=String(N)),N}function c(N){var D={next:function(){var F=N.shift();return{done:F===void 0,value:F}}};return r.iterable&&(D[Symbol.iterator]=function(){return D}),D}function l(N){this.map={},N instanceof l?N.forEach(function(D,F){this.append(F,D)},this):Array.isArray(N)?N.forEach(function(D){this.append(D[0],D[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(D){this.append(D,N[D])},this)}l.prototype.append=function(N,D){N=o(N),D=u(D);var F=this.map[N];this.map[N]=F?F+", "+D:D},l.prototype.delete=function(N){delete this.map[o(N)]},l.prototype.get=function(N){return N=o(N),this.has(N)?this.map[N]:null},l.prototype.has=function(N){return this.map.hasOwnProperty(o(N))},l.prototype.set=function(N,D){this.map[o(N)]=u(D)},l.prototype.forEach=function(N,D){for(var F in this.map)this.map.hasOwnProperty(F)&&N.call(D,this.map[F],F,this)},l.prototype.keys=function(){var N=[];return this.forEach(function(D,F){N.push(F)}),c(N)},l.prototype.values=function(){var N=[];return this.forEach(function(D){N.push(D)}),c(N)},l.prototype.entries=function(){var N=[];return this.forEach(function(D,F){N.push([F,D])}),c(N)},r.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);function d(N){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}function h(N){return new Promise(function(D,F){N.onload=function(){D(N.result)},N.onerror=function(){F(N.error)}})}function f(N){var D=new FileReader,F=h(D);return D.readAsArrayBuffer(N),F}function p(N){var D=new FileReader,F=h(D);return D.readAsText(N),F}function b(N){for(var D=new Uint8Array(N),F=new Array(D.length),W=0;W<D.length;W++)F[W]=String.fromCharCode(D[W]);return F.join("")}function y(N){if(N.slice)return N.slice(0);var D=new Uint8Array(N.byteLength);return D.set(new Uint8Array(N)),D.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(N){this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:r.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:r.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():r.arrayBuffer&&r.blob&&n(N)?(this._bodyArrayBuffer=y(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||s(N))?this._bodyArrayBuffer=y(N):this._bodyText=N=Object.prototype.toString.call(N):this._bodyText="",this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var N=d(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var N=d(this);if(N)return N;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(b(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function I(N){var D=N.toUpperCase();return w.indexOf(D)>-1?D:N}function O(N,D){D=D||{};var F=D.body;if(N instanceof O){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,D.headers||(this.headers=new l(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!F&&N._bodyInit!=null&&(F=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=D.credentials||this.credentials||"same-origin",(D.headers||!this.headers)&&(this.headers=new l(D.headers)),this.method=I(D.method||this.method||"GET"),this.mode=D.mode||this.mode||null,this.signal=D.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&F)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(F)}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function T(N){var D=new FormData;return N.trim().split("&").forEach(function(F){if(F){var W=F.split("="),z=W.shift().replace(/\+/g," "),M=W.join("=").replace(/\+/g," ");D.append(decodeURIComponent(z),decodeURIComponent(M))}}),D}function x(N){var D=new l,F=N.replace(/\r?\n[\t ]+/g," ");return F.split(/\r?\n/).forEach(function(W){var z=W.split(":"),M=z.shift().trim();if(M){var C=z.join(":").trim();D.append(M,C)}}),D}S.call(O.prototype);function P(N,D){D||(D={}),this.type="default",this.status=D.status===void 0?200:D.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in D?D.statusText:"OK",this.headers=new l(D.headers),this.url=D.url||"",this._initBody(N)}S.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},P.error=function(){var N=new P(null,{status:0,statusText:""});return N.type="error",N};var B=[301,302,303,307,308];P.redirect=function(N,D){if(B.indexOf(D)===-1)throw new RangeError("Invalid status code");return new P(null,{status:D,headers:{location:N}})},e.DOMException=t.DOMException;try{new e.DOMException}catch{e.DOMException=function(D,F){this.message=D,this.name=F;var W=Error(D);this.stack=W.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function Q(N,D){return new Promise(function(F,W){var z=new O(N,D);if(z.signal&&z.signal.aborted)return W(new e.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function C(){M.abort()}M.onload=function(){var V={status:M.status,statusText:M.statusText,headers:x(M.getAllResponseHeaders()||"")};V.url="responseURL"in M?M.responseURL:V.headers.get("X-Request-URL");var ie="response"in M?M.response:M.responseText;F(new P(ie,V))},M.onerror=function(){W(new TypeError("Network request failed"))},M.ontimeout=function(){W(new TypeError("Network request failed"))},M.onabort=function(){W(new e.DOMException("Aborted","AbortError"))},M.open(z.method,z.url,!0),z.credentials==="include"?M.withCredentials=!0:z.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&r.blob&&(M.responseType="blob"),z.headers.forEach(function(V,ie){M.setRequestHeader(ie,V)}),z.signal&&(z.signal.addEventListener("abort",C),M.onreadystatechange=function(){M.readyState===4&&z.signal.removeEventListener("abort",C)}),M.send(typeof z._bodyInit>"u"?null:z._bodyInit)})}return Q.polyfill=!0,t.fetch||(t.fetch=Q,t.Headers=l,t.Request=O,t.Response=P),e.Headers=l,e.Request=O,e.Response=P,e.fetch=Q,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:g)})();var eB={},Yw={};Object.defineProperty(Yw,"__esModule",{value:!0});Yw.SparqlXmlParser=void 0;const gye=yt,N6=hl,_ye=Kt;class vye{constructor(e){e=e||{},this.dataFactory=e.dataFactory||new gye.DataFactory,this.prefixVariableQuestionMark=!!e.prefixVariableQuestionMark}parseXmlResultsStream(e){const r=y=>b.emit("error",y);e.on("error",r);const n=new N6.SaxesParser,a=[];let s=!1,o=!1;const u=[];let c={},l="",d="",h,f="",p=[];n.on("error",r),n.on("opentag",y=>{y.name==="variable"&&this.stackEquals(a,["sparql","head"])?u.push(this.dataFactory.variable(y.attributes.name)):y.name==="results"&&this.stackEquals(a,["sparql"])?o=!0:y.name==="result"&&this.stackEquals(a,["sparql","results"])?c={}:y.name==="binding"&&this.stackEquals(a,["sparql","results","result"])?(l=y.attributes.name||"",d="",h="",f="",p=[]):y.name==="triple"&&this.stackBeginsWith(a,["sparql","results","result"])?p.push({components:{}}):a[a.length-1]==="triple"&&this.stackBeginsWith(a,["sparql","results","result","binding"])?(d="",h="",f="",["subject","predicate","object"].includes(y.name)?p[p.length-1].currentComponent=y.name:r(new Error(`Illegal quoted triple component '${y.name}' found on line ${n.line+1}`))):this.stackBeginsWith(a,["sparql","results","result","binding"])&&(d=y.name,"xml:lang"in y.attributes?h=y.attributes["xml:lang"]:"datatype"in y.attributes?h=this.dataFactory.namedNode(y.attributes.datatype):h=void 0),a.push(y.name)}),n.on("closetag",y=>{if(this.stackEquals(a,["sparql","head"])&&(b.emit("variables",u),s=!0),this.stackEquals(a,["sparql","results","result"])&&b.push(c),this.stackBeginsWith(a,["sparql","results","result","binding"])){let S;if(!l&&d)r(new Error(`Terms should have a name on line ${n.line+1}`));else if(d==="uri")S=this.dataFactory.namedNode(f);else if(d==="bnode")S=this.dataFactory.blankNode(f);else if(d==="literal")S=this.dataFactory.literal(f,h);else if(a[a.length-1]==="triple"){const w=p.pop();w&&w.components.subject&&w.components.predicate&&w.components.object?S=this.dataFactory.quad(w.components.subject,w.components.predicate,w.components.object):r(new Error(`Incomplete quoted triple on line ${n.line+1}`))}else d&&r(new Error(`Invalid term type '${d}' on line ${n.line+1}`));if(S)if(p.length>0){const w=p[p.length-1];w.components[w.currentComponent]&&r(new Error(`The ${w.currentComponent} in a quoted triple on line ${n.line+1} was already defined before`)),w.components[w.currentComponent]=S}else{const w=this.prefixVariableQuestionMark?"?"+l:l;c[w]=S}d=void 0}a.pop()}),n.on("text",y=>{this.stackBeginsWith(a,["sparql","results","result","binding"])&&a[a.length-1]===d&&(f=y)});const b=e.on("end",y=>{o?s||b.emit("variables",[]):b.emit("error",new Error("No valid SPARQL query results were found."))}).pipe(new _ye.Transform({objectMode:!0,transform(y,S,w){n.write(y),w()}}));return b}parseXmlBooleanStream(e){return new Promise((r,n)=>{const a=new N6.SaxesParser,s=[];a.on("error",n),a.on("opentag",o=>{s.push(o.name)}),a.on("closetag",o=>{s.pop()}),a.on("text",o=>{this.stackEquals(s,["sparql","boolean"])&&r(o==="true")}),e.on("error",n).on("data",o=>a.write(o)).on("end",()=>n(new Error("No valid ASK response was found.")))})}stackEquals(e,r){return e.length===r.length&&e.every((n,a)=>r[a]===n)}stackBeginsWith(e,r){return e.length>=r.length&&r.every((n,a)=>e[a]===n)}}Yw.SparqlXmlParser=vye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Yw,t)})(eB);Object.defineProperty(Jw,"__esModule",{value:!0});Jw.SparqlEndpointFetcher=void 0;const j6=w0,wye=Sx,Sye=eB,Tye=Pl,Eye=B0,Oye=au,Aye=JF;class ki{constructor(e){e=e||{},this.method=e.method||"POST",this.additionalUrlParams=e.additionalUrlParams||new URLSearchParams,this.defaultHeaders=e.defaultHeaders||new Headers,this.fetchCb=e.fetch,this.sparqlJsonParser=new wye.SparqlJsonParser(e),this.sparqlXmlParser=new Sye.SparqlXmlParser(e),this.sparqlParsers={[ki.CONTENTTYPE_SPARQL_JSON]:{parseBooleanStream:r=>this.sparqlJsonParser.parseJsonBooleanStream(r),parseResultsStream:r=>this.sparqlJsonParser.parseJsonResultsStream(r)},[ki.CONTENTTYPE_SPARQL_XML]:{parseBooleanStream:r=>this.sparqlXmlParser.parseXmlBooleanStream(r),parseResultsStream:r=>this.sparqlXmlParser.parseXmlResultsStream(r)}},this.timeout=e.timeout}getQueryType(e){const r=new j6.Parser({sparqlStar:!0}).parse(e);return r.type==="query"?r.queryType==="DESCRIBE"?"CONSTRUCT":r.queryType:"UNKNOWN"}getUpdateTypes(e){const r=new j6.Parser({sparqlStar:!0}).parse(e);if(r.type==="update"){const n={};for(const a of r.updates)"type"in a?n[a.type]=!0:n[a.updateType]=!0;return n}else return"UNKNOWN"}async fetchBindings(e,r){const[n,a]=await this.fetchRawStream(e,r,ki.CONTENTTYPE_SPARQL),s=this.sparqlParsers[n];if(!s)throw new Error("Unknown SPARQL results content type: "+n);return s.parseResultsStream(a)}async fetchAsk(e,r){const[n,a]=await this.fetchRawStream(e,r,ki.CONTENTTYPE_SPARQL),s=this.sparqlParsers[n];if(!s)throw new Error("Unknown SPARQL results content type: "+n);return s.parseBooleanStream(a)}async fetchTriples(e,r){return(await this.fetchRawStream(e,r,ki.CONTENTTYPE_TURTLE))[1].pipe(new Oye.StreamParser({format:ki.CONTENTTYPE_TURTLE}))}async fetchUpdate(e,r){const n=globalThis.AbortController||await Promise.resolve().then(()=>af()),a=new n,s={};this.defaultHeaders.forEach((u,c)=>{s[c]=u});const o={method:"POST",headers:Object.assign(Object.assign({},s),{"content-type":"application/sparql-update"}),body:r,signal:a.signal};await this.handleFetchCall(e,o,{ignoreBody:!0}),a.abort()}async fetchRawStream(e,r,n){let a=this.method==="POST"?e:e+"?query="+encodeURIComponent(r);const s=new Headers(this.defaultHeaders);let o;return s.append("Accept",n),this.method==="POST"?(s.append("Content-Type","application/x-www-form-urlencoded"),o=new URLSearchParams,o.set("query",r),this.additionalUrlParams.forEach((u,c)=>{o.set(c,u)}),s.append("Content-Length",o.toString().length.toString())):this.additionalUrlParams.toString()!==""&&(a+=`&${this.additionalUrlParams.toString()}`),this.handleFetchCall(a,{headers:s,method:this.method,body:o})}async handleFetchCall(e,r,n={}){let a;if(this.timeout){const c=new AbortController;r.signal=c.signal,a=setTimeout(()=>c.abort(),this.timeout)}const s=await(this.fetchCb||fetch)(e,r);clearTimeout(a);let o;n.ignoreBody||(o=Aye(s.body)?s.body:new Eye.ReadableWebToNodeStream(s.body));let u=s.headers.get("Content-Type")||"";if(u.indexOf(";")>0&&(u=u.substr(0,u.indexOf(";"))),!s.ok){const c=/^[^?]*/u.exec(e)[0];let l="empty response";throw o&&(l=await Tye(o)),new Error(`Invalid SPARQL endpoint response from ${c} (HTTP status ${s.status}):
${l}`)}return[u,o]}}ki.CONTENTTYPE_SPARQL_JSON="application/sparql-results+json";ki.CONTENTTYPE_SPARQL_XML="application/sparql-results+xml";ki.CONTENTTYPE_SPARQL=`${ki.CONTENTTYPE_SPARQL_JSON};q=1.0,${ki.CONTENTTYPE_SPARQL_XML};q=0.7`;ki.CONTENTTYPE_TURTLE="text/turtle";Jw.SparqlEndpointFetcher=ki;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Jw,t)})(Kw);Object.defineProperty(Xw,"__esModule",{value:!0});Xw.RdfSourceSparql=void 0;const xye=Hn,C6=Wt,Rye=Kw,Iye=_s,Pye=yt,cd=hn,NO=Tt,Lc=new Pye.DataFactory,Dye=new xye.BindingsFactory,Nye=Lc.variable("count");class En{constructor(e,r,n,a,s){this.url=e,this.context=r,this.mediatorHttp=n,this.endpointFetcher=new Rye.SparqlEndpointFetcher({method:a?"GET":"POST",fetch:(o,u)=>this.mediatorHttp.mediate({input:o,init:u,context:this.context}),prefixVariableQuestionMark:!0}),this.cache=s>0?new Iye.LRUCache({max:s}):void 0}static replaceBlankNodes(e){const r=(0,cd.getVariables)((0,cd.getTerms)(e)).map(o=>o.value),n={};let a=!1;const s=(0,cd.mapTermsNested)(e,o=>{if(o.termType==="BlankNode"){let u=o.value;if(n[u])u=n[u];else{if(r.includes(u)){let c=0;for(;r.includes(`${u}${c}`);)++c;u+=c}n[o.value]=u,r.push(u)}return a=!0,Lc.variable(u)}return o});return a?s:e}static patternToBgp(e){return En.FACTORY.createBgp([En.FACTORY.createPattern(e.subject,e.predicate,e.object,e.graph)])}static patternToSelectQuery(e){const r=(0,cd.getVariables)((0,cd.getTerms)(e));return(0,NO.toSparql)(En.FACTORY.createProject(En.patternToBgp(e),r),{sparqlStar:!0})}static patternToCountQuery(e){return(0,NO.toSparql)(En.FACTORY.createProject(En.FACTORY.createExtend(En.FACTORY.createGroup(En.patternToBgp(e),[],[En.FACTORY.createBoundAggregate(Lc.variable("var0"),"count",En.FACTORY.createWildcardExpression(),!1)]),Lc.variable("count"),En.FACTORY.createTermExpression(Lc.variable("var0"))),[Lc.variable("count")]),{sparqlStar:!0})}async queryBindings(e,r){const n=await this.endpointFetcher.fetchBindings(e,r);return(0,C6.wrap)(n,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY}).map(a=>Dye.bindings(Object.entries(a).map(([s,o])=>[Lc.variable(s.slice(1)),o])))}match(e,r,n,a){const s=En.replaceBlankNodes(En.FACTORY.createPattern(e,r,n,a)),o=En.patternToCountQuery(s),u=En.patternToSelectQuery(s);new Promise(async(l,d)=>{var h;try{const f=(h=this.cache)==null?void 0:h.get(o);if(f!==void 0)return l(f);const p=await this.queryBindings(this.url,o);p.on("data",b=>{var w;const y=b.get(Nye),S={type:"estimate",value:Number.POSITIVE_INFINITY};if(y){const I=Number.parseInt(y.value,10);Number.isNaN(I)||(S.type="exact",S.value=I,(w=this.cache)==null||w.set(o,S))}return l(S)}),p.on("error",()=>l({type:"estimate",value:Number.POSITIVE_INFINITY})),p.on("end",()=>l({type:"estimate",value:Number.POSITIVE_INFINITY}))}catch(f){d(f)}}).then(l=>c.setProperty("metadata",{cardinality:l,canContainUndefs:!1})).catch(()=>c.setProperty("metadata",{cardinality:{type:"estimate",value:Number.POSITIVE_INFINITY},canContainUndefs:!1}));const c=new C6.TransformIterator(async()=>this.queryBindings(this.url,u),{autoStart:!1}).transform({map:l=>(0,cd.mapTermsNested)(s,d=>{if(d.termType==="Variable"){const h=l.get(d);return h||c.destroy(new Error(`The endpoint ${this.url} failed to provide a binding for ${d.value}.`)),h}return d}),autoStart:!1});return c}}Xw.RdfSourceSparql=En;En.FACTORY=new NO.Factory;Object.defineProperty(Ww,"__esModule",{value:!0});Ww.ActorRdfResolveHypermediaSparql=void 0;const jye=Hv,Cye=Xw;class Fye extends jye.ActorRdfResolveHypermedia{constructor(e){super(e,"sparql")}async testMetadata(e){if(!e.forceSourceType&&!e.metadata.sparqlService&&!(this.checkUrlSuffix&&e.url.endsWith("/sparql")))throw new Error(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql.`);return{filterFactor:1}}async run(e){return this.logInfo(e.context,`Identified ${e.url} as sparql source with service URL: ${e.metadata.sparqlService||e.url}`),{source:new Cye.RdfSourceSparql(e.metadata.sparqlService||e.url,e.context,this.mediatorHttp,this.forceHttpGet,this.cacheSize)}}}Ww.ActorRdfResolveHypermediaSparql=Fye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ww,t)})(ZL);var tB={},Zw={},e3={},t3={};Object.defineProperty(t3,"__esModule",{value:!0});t3.ActorRdfUpdateHypermedia=void 0;const Mye=et;class Lye extends Mye.Actor{constructor(e,r){super(e),this.destinationType=r}async test(e){if(e.forceDestinationType&&this.destinationType!==e.forceDestinationType)throw new Error(`Actor ${this.name} is not able to handle destination type ${e.forceDestinationType}.`);return this.testMetadata(e)}}t3.ActorRdfUpdateHypermedia=Lye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(t3,t)})(e3);var py={},jO={exports:{}};(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof g<"u"&&g,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var u=typeof s<"u"&&s||typeof self<"u"&&self||typeof u<"u"&&u,c={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function l(C){return C&&DataView.prototype.isPrototypeOf(C)}if(c.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(C){return C&&d.indexOf(Object.prototype.toString.call(C))>-1};function f(C){if(typeof C!="string"&&(C=String(C)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(C)||C==="")throw new TypeError('Invalid character in header field name: "'+C+'"');return C.toLowerCase()}function p(C){return typeof C!="string"&&(C=String(C)),C}function b(C){var V={next:function(){var ie=C.shift();return{done:ie===void 0,value:ie}}};return c.iterable&&(V[Symbol.iterator]=function(){return V}),V}function y(C){this.map={},C instanceof y?C.forEach(function(V,ie){this.append(ie,V)},this):Array.isArray(C)?C.forEach(function(V){this.append(V[0],V[1])},this):C&&Object.getOwnPropertyNames(C).forEach(function(V){this.append(V,C[V])},this)}y.prototype.append=function(C,V){C=f(C),V=p(V);var ie=this.map[C];this.map[C]=ie?ie+", "+V:V},y.prototype.delete=function(C){delete this.map[f(C)]},y.prototype.get=function(C){return C=f(C),this.has(C)?this.map[C]:null},y.prototype.has=function(C){return this.map.hasOwnProperty(f(C))},y.prototype.set=function(C,V){this.map[f(C)]=p(V)},y.prototype.forEach=function(C,V){for(var ie in this.map)this.map.hasOwnProperty(ie)&&C.call(V,this.map[ie],ie,this)},y.prototype.keys=function(){var C=[];return this.forEach(function(V,ie){C.push(ie)}),b(C)},y.prototype.values=function(){var C=[];return this.forEach(function(V){C.push(V)}),b(C)},y.prototype.entries=function(){var C=[];return this.forEach(function(V,ie){C.push([ie,V])}),b(C)},c.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function S(C){if(C.bodyUsed)return Promise.reject(new TypeError("Already read"));C.bodyUsed=!0}function w(C){return new Promise(function(V,ie){C.onload=function(){V(C.result)},C.onerror=function(){ie(C.error)}})}function I(C){var V=new FileReader,ie=w(V);return V.readAsArrayBuffer(C),ie}function O(C){var V=new FileReader,ie=w(V);return V.readAsText(C),ie}function T(C){for(var V=new Uint8Array(C),ie=new Array(V.length),ne=0;ne<V.length;ne++)ie[ne]=String.fromCharCode(V[ne]);return ie.join("")}function x(C){if(C.slice)return C.slice(0);var V=new Uint8Array(C.byteLength);return V.set(new Uint8Array(C)),V.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(C){this.bodyUsed=this.bodyUsed,this._bodyInit=C,C?typeof C=="string"?this._bodyText=C:c.blob&&Blob.prototype.isPrototypeOf(C)?this._bodyBlob=C:c.formData&&FormData.prototype.isPrototypeOf(C)?this._bodyFormData=C:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)?this._bodyText=C.toString():c.arrayBuffer&&c.blob&&l(C)?(this._bodyArrayBuffer=x(C.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(C)||h(C))?this._bodyArrayBuffer=x(C):this._bodyText=C=Object.prototype.toString.call(C):this._bodyText="",this.headers.get("content-type")||(typeof C=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var C=S(this);if(C)return C;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var C=S(this);return C||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(I)}),this.text=function(){var C=S(this);if(C)return C;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var B=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Q(C){var V=C.toUpperCase();return B.indexOf(V)>-1?V:C}function N(C,V){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');V=V||{};var ie=V.body;if(C instanceof N){if(C.bodyUsed)throw new TypeError("Already read");this.url=C.url,this.credentials=C.credentials,V.headers||(this.headers=new y(C.headers)),this.method=C.method,this.mode=C.mode,this.signal=C.signal,!ie&&C._bodyInit!=null&&(ie=C._bodyInit,C.bodyUsed=!0)}else this.url=String(C);if(this.credentials=V.credentials||this.credentials||"same-origin",(V.headers||!this.headers)&&(this.headers=new y(V.headers)),this.method=Q(V.method||this.method||"GET"),this.mode=V.mode||this.mode||null,this.signal=V.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ie)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(ie),(this.method==="GET"||this.method==="HEAD")&&(V.cache==="no-store"||V.cache==="no-cache")){var ne=/([?&])_=[^&]*/;if(ne.test(this.url))this.url=this.url.replace(ne,"$1_="+new Date().getTime());else{var fe=/\?/;this.url+=(fe.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}N.prototype.clone=function(){return new N(this,{body:this._bodyInit})};function D(C){var V=new FormData;return C.trim().split("&").forEach(function(ie){if(ie){var ne=ie.split("="),fe=ne.shift().replace(/\+/g," "),_e=ne.join("=").replace(/\+/g," ");V.append(decodeURIComponent(fe),decodeURIComponent(_e))}}),V}function F(C){var V=new y,ie=C.replace(/\r?\n[\t ]+/g," ");return ie.split("\r").map(function(ne){return ne.indexOf(`
`)===0?ne.substr(1,ne.length):ne}).forEach(function(ne){var fe=ne.split(":"),_e=fe.shift().trim();if(_e){var we=fe.join(":").trim();V.append(_e,we)}}),V}P.call(N.prototype);function W(C,V){if(!(this instanceof W))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');V||(V={}),this.type="default",this.status=V.status===void 0?200:V.status,this.ok=this.status>=200&&this.status<300,this.statusText=V.statusText===void 0?"":""+V.statusText,this.headers=new y(V.headers),this.url=V.url||"",this._initBody(C)}P.call(W.prototype),W.prototype.clone=function(){return new W(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},W.error=function(){var C=new W(null,{status:0,statusText:""});return C.type="error",C};var z=[301,302,303,307,308];W.redirect=function(C,V){if(z.indexOf(V)===-1)throw new RangeError("Invalid status code");return new W(null,{status:V,headers:{location:C}})},o.DOMException=u.DOMException;try{new o.DOMException}catch{o.DOMException=function(V,ie){this.message=V,this.name=ie;var ne=Error(V);this.stack=ne.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function M(C,V){return new Promise(function(ie,ne){var fe=new N(C,V);if(fe.signal&&fe.signal.aborted)return ne(new o.DOMException("Aborted","AbortError"));var _e=new XMLHttpRequest;function we(){_e.abort()}_e.onload=function(){var oe={status:_e.status,statusText:_e.statusText,headers:F(_e.getAllResponseHeaders()||"")};oe.url="responseURL"in _e?_e.responseURL:oe.headers.get("X-Request-URL");var ae="response"in _e?_e.response:_e.responseText;setTimeout(function(){ie(new W(ae,oe))},0)},_e.onerror=function(){setTimeout(function(){ne(new TypeError("Network request failed"))},0)},_e.ontimeout=function(){setTimeout(function(){ne(new TypeError("Network request failed"))},0)},_e.onabort=function(){setTimeout(function(){ne(new o.DOMException("Aborted","AbortError"))},0)};function Ce(oe){try{return oe===""&&u.location.href?u.location.href:oe}catch{return oe}}_e.open(fe.method,Ce(fe.url),!0),fe.credentials==="include"?_e.withCredentials=!0:fe.credentials==="omit"&&(_e.withCredentials=!1),"responseType"in _e&&(c.blob?_e.responseType="blob":c.arrayBuffer&&fe.headers.get("Content-Type")&&fe.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(_e.responseType="arraybuffer")),V&&typeof V.headers=="object"&&!(V.headers instanceof y)?Object.getOwnPropertyNames(V.headers).forEach(function(oe){_e.setRequestHeader(oe,p(V.headers[oe]))}):fe.headers.forEach(function(oe,ae){_e.setRequestHeader(ae,oe)}),fe.signal&&(fe.signal.addEventListener("abort",we),_e.onreadystatechange=function(){_e.readyState===4&&fe.signal.removeEventListener("abort",we)}),_e.send(typeof fe._bodyInit>"u"?null:fe._bodyInit)})}return M.polyfill=!0,u.fetch||(u.fetch=M,u.Headers=y,u.Request=N,u.Response=W),o.Headers=y,o.Request=N,o.Response=W,o.fetch=M,o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var a=r.fetch?r:n;e=a.fetch,e.default=a.fetch,e.fetch=a.fetch,e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response,t.exports=e})(jO,jO.exports);var OR=jO.exports;Object.defineProperty(py,"__esModule",{value:!0});py.QuadDestinationPatchSparqlUpdate=void 0;const Bye=ms,$ye=kf,Uye=OR,U1=j0,qye=Kt;class Vye{constructor(e,r,n){this.url=e,this.context=r,this.mediatorHttp=n}insert(e){return this.wrapSparqlUpdateRequest("INSERT",e)}async delete(e){return this.wrapSparqlUpdateRequest("DELETE",e)}async wrapSparqlUpdateRequest(e,r){const n=r.map(u=>{let c=`${(0,U1.termToString)(u.subject)} ${(0,U1.termToString)(u.predicate)} ${(0,U1.termToString)(u.object)} .`;return u.graph.termType!=="DefaultGraph"?c=`  GRAPH ${(0,U1.termToString)(u.graph)} { ${c} }
`:c=`  ${c}
`,c}).prepend([`${e} DATA {
`]).append(["}"]),a=new qye.Readable;a._read=()=>!0,n.on("data",u=>a.push(u)),n.on("end",()=>a.push(null));const s=new Uye.Headers({"content-type":"application/sparql-update"}),o=await this.mediatorHttp.mediate({context:this.context,init:{headers:s,method:"PATCH",body:Bye.ActorHttp.toWebReadableStream(a)},input:this.url});await(0,$ye.validateHttpResponse)(this.url,o)}async deleteGraphs(e,r,n){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}async createGraphs(e,r){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}}py.QuadDestinationPatchSparqlUpdate=Vye;Object.defineProperty(Zw,"__esModule",{value:!0});Zw.ActorRdfUpdateHypermediaPatchSparqlUpdate=void 0;const Hye=e3,kye=py;class Qye extends Hye.ActorRdfUpdateHypermedia{constructor(e){super(e,"patchSparqlUpdate")}async testMetadata(e){if(!e.forceDestinationType&&!e.metadata.patchSparqlUpdate)throw new Error(`Actor ${this.name} could not detect a destination with 'application/sparql-update' as 'Accept-Patch' header.`);if(!e.forceDestinationType&&!e.exists)throw new Error(`Actor ${this.name} can only patch a destination that already exists.`);return!0}async run(e){return this.logInfo(e.context,`Identified as patchSparqlUpdate destination: ${e.url}`),{destination:new kye.QuadDestinationPatchSparqlUpdate(e.url,e.context,this.mediatorHttp)}}}Zw.ActorRdfUpdateHypermediaPatchSparqlUpdate=Qye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Zw,t),r(py,t)})(tB);var rB={},r3={},yy={};Object.defineProperty(yy,"__esModule",{value:!0});yy.QuadDestinationPutLdp=void 0;const Gye=ms,zye=kf,Wye=OR;class Xye{constructor(e,r,n,a,s,o){this.url=e,this.context=r,this.mediaTypes=n,this.mediatorHttp=a,this.mediatorRdfSerializeMediatypes=s,this.mediatorRdfSerialize=o}insert(e){return this.wrapRdfUpdateRequest("INSERT",e)}async delete(e){throw new Error("Put-based LDP destinations don't support deletions")}async wrapRdfUpdateRequest(e,r){const{mediaTypes:n}=await this.mediatorRdfSerializeMediatypes.mediate({context:this.context,mediaTypes:!0}),a=this.mediaTypes.filter(l=>l in n),s=a.length>0?a[0]:Object.keys(n).sort((l,d)=>n[d]-n[l])[0],{handle:{data:o}}=await this.mediatorRdfSerialize.mediate({context:this.context,handle:{quadStream:r,context:this.context},handleMediaType:s}),u=new Wye.Headers({"content-type":s}),c=await this.mediatorHttp.mediate({context:this.context,init:{headers:u,method:"PUT",body:Gye.ActorHttp.toWebReadableStream(o)},input:this.url});await(0,zye.validateHttpResponse)(this.url,c)}async deleteGraphs(e,r,n){throw new Error("Put-based LDP destinations don't support named graphs")}async createGraphs(e,r){throw new Error("Put-based LDP destinations don't support named graphs")}}yy.QuadDestinationPutLdp=Xye;Object.defineProperty(r3,"__esModule",{value:!0});r3.ActorRdfUpdateHypermediaPutLdp=void 0;const Kye=e3,Jye=yy;class Yye extends Kye.ActorRdfUpdateHypermedia{constructor(e){super(e,"putLdp")}async testMetadata(e){if(!e.forceDestinationType){if(!e.metadata.allowHttpMethods||!e.metadata.allowHttpMethods.includes("PUT"))throw new Error(`Actor ${this.name} could not detect a destination with 'Allow: PUT' header.`);if(e.exists)throw new Error(`Actor ${this.name} can only put on a destination that does not already exists.`)}return!0}async run(e){return this.logInfo(e.context,`Identified as putLdp destination: ${e.url}`),{destination:new Jye.QuadDestinationPutLdp(e.url,e.context,e.metadata.putAccepted||[],this.mediatorHttp,this.mediatorRdfSerializeMediatypes,this.mediatorRdfSerialize)}}}r3.ActorRdfUpdateHypermediaPutLdp=Yye;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(r3,t),r(yy,t)})(rB);var nB={},n3={},by={};Object.defineProperty(by,"__esModule",{value:!0});by.QuadDestinationSparql=void 0;const Zye=Kw,q1=j0,e1e=Pl;class t1e{constructor(e,r,n){this.url=e,this.context=r,this.mediatorHttp=n,this.endpointFetcher=new Zye.SparqlEndpointFetcher({fetch:(a,s)=>this.mediatorHttp.mediate({input:a,init:s,context:this.context}),prefixVariableQuestionMark:!0})}insert(e){return this.wrapSparqlUpdateRequest("INSERT",e)}async delete(e){return this.wrapSparqlUpdateRequest("DELETE",e)}async wrapSparqlUpdateRequest(e,r){const n=r.map(s=>{let o=`${(0,q1.termToString)(s.subject)} ${(0,q1.termToString)(s.predicate)} ${(0,q1.termToString)(s.object)} .`;return s.graph.termType!=="DefaultGraph"?o=`  GRAPH ${(0,q1.termToString)(s.graph)} { ${o} }
`:o=`  ${o}
`,o}).prepend([`${e} DATA {
`]).append(["}"]),a=await e1e(n);await this.endpointFetcher.fetchUpdate(this.url,a)}async deleteGraphs(e,r,n){const a=Array.isArray(e)?e:[e],s=[];for(const o of a){let u;typeof o=="string"?u=o:o.termType==="DefaultGraph"?u="DEFAULT":u=`GRAPH <${o.value}>`,s.push(`${n?"DROP":"CLEAR"} ${r?"":"SILENT "}${u}`)}await this.endpointFetcher.fetchUpdate(this.url,s.join("; "))}async createGraphs(e,r){const n=[];for(const a of e)n.push(`CREATE${r?"":" SILENT"} GRAPH <${a.value}>`);await this.endpointFetcher.fetchUpdate(this.url,n.join("; "))}}by.QuadDestinationSparql=t1e;Object.defineProperty(n3,"__esModule",{value:!0});n3.ActorRdfUpdateHypermediaSparql=void 0;const r1e=e3,n1e=by;class i1e extends r1e.ActorRdfUpdateHypermedia{constructor(e){super(e,"sparql")}async testMetadata(e){if(!e.forceDestinationType&&!e.metadata.sparqlService&&!(this.checkUrlSuffixSparql&&e.url.endsWith("/sparql"))&&!(this.checkUrlSuffixUpdate&&e.url.endsWith("/update")))throw new Error(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql or /update.`);return!0}async run(e){return this.logInfo(e.context,`Identified as sparql destination: ${e.url}`),{destination:new n1e.QuadDestinationSparql(e.metadata.sparqlService||e.url,e.context,this.mediatorHttp)}}}n3.ActorRdfUpdateHypermediaSparql=i1e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(n3,t),r(by,t)})(nB);var iB={},i3={},a3={};Object.defineProperty(a3,"__esModule",{value:!0});a3.LazyCardinalityIterator=void 0;const Yc=Wt;class a1e extends Yc.AsyncIterator{constructor(e){super(),this._source=e,this._count=0,this._buffering=!0,e[Yc.DESTINATION]=this,e.on("readable",ld),e.on("end",ld),e.on("error",F6),this.readable=e.readable}read(){if(this._buffer)return this._buffer.empty?(this._buffering||this.close(),this.readable=!1,null):this._buffer.shift();let e=null;return this._source.readable&&(e=this._source.read())!==null?this._count+=1:(this.readable=!1,this._source.done&&this.close()),e}getCardinality(){return this._cardinality?this._cardinality:this._error?Promise.reject(this._error):(this._source.done&&this.close(),this.done?this._cardinality=Promise.resolve(this._count):(this._buffer=new Yc.LinkedList,this._cardinality=new Promise((e,r)=>{this._source.removeListener("readable",ld),this._source.removeListener("end",ld);const n=()=>{this._source.removeListener("data",a),this._source.removeListener("end",s),this._source.removeListener("error",o)},a=u=>{this._buffer.push(u),this._count+=1,this.readable=!0},s=()=>{this._buffering=!1,n(),e(this._count)},o=u=>{this._buffering=!1,n(),r(u)};this._source.on("data",a),this._source.on("end",s),this._source.on("error",o)})),this._cardinality)}close(){this._source.removeListener("readable",ld),this._source.removeListener("end",ld),this._source.removeListener("error",F6),delete this._source[Yc.DESTINATION],this._source.destroy(),super.close()}}a3.LazyCardinalityIterator=a1e;function ld(){this[Yc.DESTINATION].readable=!0}function F6(t){this[Yc.DESTINATION]._error=t,this[Yc.DESTINATION].emit("error",t)}Object.defineProperty(i3,"__esModule",{value:!0});i3.ActorQueryOperationSparqlEndpoint=void 0;const s1e=Hn,o1e=ft,Dh=Dl,iE=kf,u1e=Ht,c1e=ba,l1e=Wt,d1e=Kw,f1e=yt,Eu=Tt,h1e=a3,p1e=new s1e.BindingsFactory,y1e=new f1e.DataFactory;class qp extends o1e.ActorQueryOperation{constructor(e){super(e),this.endpointFetcher=new d1e.SparqlEndpointFetcher({method:e.forceHttpGet?"GET":"POST",fetch:(r,n)=>this.mediatorHttp.mediate({input:r,init:n,context:this.lastContext}),prefixVariableQuestionMark:!0})}async test(e){if(!e.operation)throw new Error("Missing field 'operation' in a query operation action.");const r=(0,Dh.getContextSourceFirst)(e.context),n=(0,iE.getContextDestinationFirst)(e.context),a=r?(0,Dh.getDataSourceType)(r):void 0,s=n?(0,iE.getDataDestinationType)(n):void 0,o=r?(0,Dh.getDataSourceValue)(r):void 0,u=n?(0,iE.getDataDestinationValue)(n):void 0;if(r&&a==="sparql"&&(!n||s==="sparql"&&u===o)||r&&!a&&(!n||!s&&u===o)&&typeof o=="string"&&(this.checkUrlSuffixSparql&&o.endsWith("/sparql")||this.checkUrlSuffixUpdate&&o.endsWith("/update")))return{httpRequests:1};throw new Error(`${this.name} requires a single source with a 'sparql' endpoint to be present in the context or URL ending on /sparql or /update.`)}async run(e){const r=(0,Dh.getContextSourceFirst)(e.context);if(!r)throw new Error("Illegal state: undefined sparql endpoint source.");const n=(0,Dh.getDataSourceValue)(r);this.lastContext=e.context;let a,s,o;try{a=e.context.get(u1e.KeysInitQuery.queryString)??(0,Eu.toSparql)(e.operation,{sparqlStar:!0}),s=this.endpointFetcher.getQueryType(a),s==="UNKNOWN"&&(s=this.endpointFetcher.getUpdateTypes(a))}catch{}(!s||s==="UNKNOWN")&&(o=Eu.Util.inScopeVariables(e.operation),a=(0,Eu.toSparql)(qp.FACTORY.createProject(e.operation,o)),s="SELECT");const u=this.canOperationContainUndefs(e.operation);switch(s){case"SELECT":return o||(o=Eu.Util.inScopeVariables(e.operation)),this.executeQuery(n,a,!1,o,u);case"CONSTRUCT":return this.executeQuery(n,a,!0,void 0,!1);case"ASK":return{type:"boolean",execute:()=>this.endpointFetcher.fetchAsk(n,a)};default:return{type:"void",execute:()=>this.endpointFetcher.fetchUpdate(n,a)}}}executeQuery(e,r,n,a,s){const o=n?this.endpointFetcher.fetchTriples(e,r):this.endpointFetcher.fetchBindings(e,r),u=(0,l1e.wrap)(o,{autoStart:!1}).map(d=>n?d:p1e.bindings(Object.entries(d).map(([h,f])=>[y1e.variable(h.slice(1)),f]))),c=new h1e.LazyCardinalityIterator(u),l=qp.cachifyMetadata(async()=>({state:new c1e.MetadataValidationState,cardinality:{type:"exact",value:await c.getCardinality()},canContainUndefs:s,variables:a}));return n?{type:"quads",quadStream:c,metadata:l}:{type:"bindings",bindingsStream:c,metadata:l}}canOperationContainUndefs(e){let r=!1;return Eu.Util.recurseOperation(e,{[Eu.Algebra.types.LEFT_JOIN](){return r=!0,!1},[Eu.Algebra.types.VALUES](n){for(const a of n.bindings){const s=Object.keys(a);n.variables.every(o=>s.includes(`?${o.value}`))||(r=!0)}return!1}}),r}}i3.ActorQueryOperationSparqlEndpoint=qp;qp.FACTORY=new Eu.Factory;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(i3,t)})(iB);var aB={},s3={},sB={},o3={};Object.defineProperty(o3,"__esModule",{value:!0});o3.ActorDereferenceRdf=void 0;const b1e=X_;class m1e extends b1e.ActorDereferenceParse{constructor(e){super(e)}}o3.ActorDereferenceRdf=m1e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(o3,t)})(sB);Object.defineProperty(s3,"__esModule",{value:!0});s3.ActorDereferenceRdfParse=void 0;const g1e=sB;class _1e extends g1e.ActorDereferenceRdf{constructor(e){super(e)}async getMetadata(e){return{baseIRI:e.url}}}s3.ActorDereferenceRdfParse=_1e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(s3,t)})(aB);var oB={},u3={},c3={};Object.defineProperty(c3,"__esModule",{value:!0});c3.HtmlScriptListener=void 0;const M6=Ht,v1e=Kt,w1e=Na;class Rd{constructor(e,r,n,a,s,o,u,c){this.textChunksJsonLd=[],this.endBarrier=1,this.passedScripts=0,this.isFinalJsonLdProcessing=!1,this.mediatorRdfParseHandle=e,this.cbQuad=r,this.cbError=n,this.cbEnd=a,this.supportedTypes=s,this.context=o.set(M6.KeysRdfParseHtmlScript.processingHtmlScript,!0),this.baseIRI=u,this.headers=c,this.onlyFirstScript=o.get(M6.KeysRdfParseHtmlScript.extractAllScripts)===!1;const l=this.baseIRI.indexOf("#");this.targetScriptId=l>0?this.baseIRI.slice(l+1,this.baseIRI.length):null}static newErrorCoded(e,r){const n=new Error(e);return n.code=r,n}onEnd(){--this.endBarrier===0&&(this.textChunksJsonLd.length>0?(this.handleMediaType="application/ld+json",this.textChunks=this.textChunksJsonLd,this.textChunks.push("]"),this.textChunksJsonLd=[],this.isFinalJsonLdProcessing=!0,this.endBarrier++,this.onTagClose()):(this.passedScripts===0&&this.targetScriptId&&this.cbError(Rd.newErrorCoded(`Failed to find targeted script id "${this.targetScriptId}"`,"loading document failed")),this.cbEnd()),this.isFinalJsonLdProcessing=!1)}onTagClose(){if(this.handleMediaType)if(this.requiresCustomJsonLdHandling(this.handleMediaType)&&!this.isFinalJsonLdProcessing)this.handleMediaType=void 0,this.textChunks=void 0,this.onEnd();else{const e=new v1e.Readable({objectMode:!0});e._read=()=>{};const r=this.textChunks,n={context:this.context,handle:{metadata:{baseIRI:this.baseIRI},data:e,headers:this.headers,context:this.context},handleMediaType:this.handleMediaType};this.mediatorRdfParseHandle.mediate(n).then(({handle:a})=>{a.data.on("error",s=>this.cbError(Rd.newErrorCoded(s.message,"invalid script element"))).on("data",this.cbQuad).on("end",()=>this.onEnd());for(const s of r)e.push(s);e.push(null)}).catch(a=>{this.targetScriptId?this.cbError(Rd.newErrorCoded(a.message,"loading document failed")):this.onEnd()}),this.handleMediaType=void 0,this.textChunks=void 0}}onTagOpen(e,r){e==="base"&&r.href&&(this.baseIRI=(0,w1e.resolve)(r.href,this.baseIRI)),e==="script"&&(!this.targetScriptId||r.id===this.targetScriptId)?this.supportedTypes[r.type]?this.onlyFirstScript&&this.passedScripts>0?this.handleMediaType=void 0:(this.passedScripts++,this.handleMediaType=r.type,this.endBarrier++,this.requiresCustomJsonLdHandling(this.handleMediaType)?(this.textChunks=this.textChunksJsonLd,this.textChunks.push(this.textChunks.length===0?"[":",")):this.textChunks=[]):this.targetScriptId&&this.cbError(Rd.newErrorCoded(`Targeted script "${this.targetScriptId}" does not have a supported type`,"loading document failed")):this.handleMediaType=void 0}onText(e){this.handleMediaType&&this.textChunks.push(e)}requiresCustomJsonLdHandling(e){return!this.onlyFirstScript&&!this.targetScriptId&&e==="application/ld+json"}}c3.HtmlScriptListener=Rd;Object.defineProperty(u3,"__esModule",{value:!0});u3.ActorRdfParseHtmlScript=void 0;const S1e=Mv,T1e=c3;class E1e extends S1e.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return!0}async run(e){const r=(await this.mediatorRdfParseMediatypes.mediate({context:e.context,mediaTypes:!0})).mediaTypes;return{htmlParseListener:new T1e.HtmlScriptListener(this.mediatorRdfParseHandle,e.emit,e.error,e.end,r,e.context,e.baseIRI,e.headers)}}}u3.ActorRdfParseHtmlScript=E1e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(u3,t)})(oB);var uB={},l3={},Ca={},d3={};Object.defineProperty(d3,"__esModule",{value:!0});d3.ActorRdfJoin=void 0;const O1e=ft,V1=Ht,A1e=et,x1e=ba,R1e=yt,I1e=sr,P1e=new R1e.DataFactory;class Nu extends A1e.Actor{constructor(e,r){super(e),this.includeInLogs=!0,this.logicalType=r.logicalType,this.physicalName=r.physicalName,this.limitEntries=r.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=r.limitEntriesMin??!1,this.canHandleUndefs=r.canHandleUndefs??!1}static hash(e,r){return r.filter(n=>e.has(n)).map(n=>(0,I1e.termToString)(e.get(n))).join("")}static overlappingVariables(e){const r=e.map(a=>a.variables);let n=r[0];for(const a of r.slice(1))n=n.filter(s=>a.some(o=>o.value===s.value));return n}static joinVariables(e){return[...new Set(e.flatMap(r=>r.variables.map(n=>n.value)))].map(r=>P1e.variable(r))}static joinBindings(...e){if(e.length===0)return null;if(e.length===1)return e[0];let r=e[0];for(const n of e.slice(1)){const a=r.merge(n);if(!a)return null;r=a}return r}static getCardinality(e){return e.cardinality}static async getMetadatas(e){return await Promise.all(e.map(r=>r.output.metadata()))}static async getEntriesWithMetadatas(e){const r=await Nu.getMetadatas(e);return e.map((n,a)=>({...n,metadata:r[a]}))}static getRequestInitialTimes(e){return e.map(r=>r.pageSize?0:r.requestTime||0)}static getRequestItemTimes(e){return e.map(r=>r.pageSize?(r.requestTime||0)/r.pageSize:0)}async constructResultMetadata(e,r,n,a={}){let s;a.cardinality?s=a.cardinality:(s=r.reduce((c,l)=>{const d=Nu.getCardinality(l);return{type:d.type==="estimate"?"estimate":c.type,value:c.value*d.value}},{type:"exact",value:1}),s.value*=(await this.mediatorJoinSelectivity.mediate({entries:e,context:n})).selectivity);const o=new x1e.MetadataValidationState,u=()=>o.invalidate();for(const c of r)c.state.addInvalidateListener(u);return{state:o,...a,cardinality:{type:s.type,value:s.value},canContainUndefs:a.canContainUndefs??r.some(c=>c.canContainUndefs),variables:Nu.joinVariables(r)}}async test(e){if(e.type!==this.logicalType)throw new Error(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${e.type}' was given.`);if(e.entries.length<=1)throw new Error(`${this.name} requires at least two join entries.`);if(this.limitEntriesMin?e.entries.length<this.limitEntries:e.entries.length>this.limitEntries)throw new Error(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${e.entries.length}.`);for(const n of e.entries)if(n.output.type!=="bindings")throw new Error(`Invalid type of a join entry: Expected 'bindings' but got '${n.output.type}'`);const r=await Nu.getMetadatas(e.entries);if(!this.canHandleUndefs){for(const n of r)if(n.canContainUndefs)throw new Error(`Actor ${this.name} can not join streams containing undefs`)}return await this.getJoinCoefficients(e,r)}async run(e){let r;e.context.has(V1.KeysInitQuery.physicalQueryPlanLogger)&&(r=e.context.get(V1.KeysInitQuery.physicalQueryPlanNode),e.context=e.context.set(V1.KeysInitQuery.physicalQueryPlanNode,e));const n=e.context.get(V1.KeysInitQuery.physicalQueryPlanLogger);let a;this.includeInLogs&&n&&(a={},n.logOperation(`join-${this.logicalType}`,this.physicalName,e,r,this.name,a));const{result:s,physicalPlanMetadata:o}=await this.getOutput(e),u=await Nu.getMetadatas(e.entries);return a&&(Object.assign(a,o),a.cardinalities=u.map(Nu.getCardinality),a.joinCoefficients=await this.getJoinCoefficients(e,u)),s.metadata=O1e.ActorQueryOperation.cachifyMetadata(s.metadata),s}}d3.ActorRdfJoin=Nu;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(d3,t)})(Ca);Object.defineProperty(l3,"__esModule",{value:!0});l3.ActorRdfJoinNone=void 0;const D1e=Hn,N1e=Ca,j1e=ba,C1e=Wt,F1e=new D1e.BindingsFactory;class M1e extends N1e.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(e){if(e.entries.length>0)throw new Error(`Actor ${this.name} can only join zero entries`);return await this.getJoinCoefficients()}async getOutput(e){return{result:{bindingsStream:new C1e.ArrayIterator([F1e.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({state:new j1e.MetadataValidationState,cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}l3.ActorRdfJoinNone=M1e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(l3,t)})(uB);var cB={},f3={};Object.defineProperty(f3,"__esModule",{value:!0});f3.ActorRdfJoinSingle=void 0;const L1e=Ca;class B1e extends L1e.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(e){if(e.entries.length!==1)throw new Error(`Actor ${this.name} can only join a single entry`);return await this.getJoinCoefficients()}async getOutput(e){return{result:e.entries[0].output}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}f3.ActorRdfJoinSingle=B1e;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(f3,t)})(cB);var AR={},h3={};Object.defineProperty(h3,"__esModule",{value:!0});h3.ActorRdfJoinMultiBind=void 0;const L6=ft,H1=Ca,aE=Ht,sE=Wt,np=Tt;class Vp extends H1.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0})}static createBindStream(e,r,n,a,s){const o=u=>{const c=n.map(d=>(0,L6.materializeOperation)(d,u,{bindFilter:!1})),l=d=>d.merge(u);return new sE.TransformIterator(async()=>(await a(c,u)).transform({map:l}),{maxBufferSize:128,autoStart:!1})};switch(e){case"depth-first":return new sE.MultiTransformIterator(r,{autoStart:!1,multiTransform:o,optional:s});case"breadth-first":return new sE.UnionIterator(r.transform({map:o,optional:s}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${e}`)}}async sortJoinEntries(e,r){if(e.some(u=>u.metadata.canContainUndefs))return e;const a={};for(const u of e)for(const c of u.metadata.variables){let l=a[c.value];l||(l=0),a[c.value]=++l}const s=[];for(const[u,c]of Object.entries(a))c>=2&&s.push(u);if(s.length===0)throw new Error("Bind join can only join entries with at least one common variable");const o=[];for(const u of e){let c=!1;for(const l of u.metadata.variables)if(s.includes(l.value)){c=!0;break}c||o.push(u)}return(await this.mediatorJoinEntriesSort.mediate({entries:e,context:r})).entries.sort((u,c)=>{const l=o.includes(u),d=o.includes(c);return l===d?0:l?1:-1})}async getOutput(e){const r=await H1.ActorRdfJoin.getEntriesWithMetadatas(e.entries),n=await this.sortJoinEntries(r,e.context);this.logDebug(e.context,"First entry for Bind Join: ",()=>({entry:n[0].operation,metadata:n[0].metadata}));for(const[c,l]of n.entries())c!==0&&l.output.bindingsStream.close();const a=n[0].output,s=[...n];s.splice(0,1);const o=e.context.set(aE.KeysQueryOperation.joinLeftMetadata,n[0].metadata).set(aE.KeysQueryOperation.joinRightMetadatas,s.map(c=>c.metadata));return{result:{type:"bindings",bindingsStream:Vp.createBindStream(this.bindOrder,a.bindingsStream,s.map(c=>c.operation),async(c,l)=>{const d=c.length===1?c[0]:Vp.FACTORY.createJoin(c);return L6.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:d,context:o==null?void 0:o.set(aE.KeysQueryOperation.joinBindings,l)})).bindingsStream},!1),metadata:()=>this.constructResultMetadata(n,n.map(c=>c.metadata),e.context)},physicalPlanMetadata:{bindIndex:r.indexOf(n[0]),bindOrder:this.bindOrder}}}canBindWithOperation(e){let r=!0;return np.Util.recurseOperation(e,{[np.Algebra.types.EXTEND](){return r=!1,!1},[np.Algebra.types.GROUP](){return r=!1,!1},[np.Algebra.types.FILTER](){return r=!1,!1}}),r}async getJoinCoefficients(e,r){const n=await this.sortJoinEntries(e.entries.map((p,b)=>({...p,metadata:r[b]})),e.context);r=n.map(p=>p.metadata);const a=H1.ActorRdfJoin.getRequestInitialTimes(r),s=H1.ActorRdfJoin.getRequestItemTimes(r),o=[...n],u=[...a],c=[...s];if(o.splice(0,1),u.splice(0,1),c.splice(0,1),o.some(p=>!this.canBindWithOperation(p.operation)))throw new Error(`Actor ${this.name} can not bind on Extend, Group, and Filter operations`);const l=await Promise.all(o.map(async p=>(await this.mediatorJoinSelectivity.mediate({entries:[n[0],p],context:e.context})).selectivity*this.selectivityModifier)),d=o.map((p,b)=>p.metadata.cardinality.value*l[b]).reduce((p,b)=>p+b,0),h=u.reduce((p,b,y)=>p+b*l[y],0),f=c.reduce((p,b,y)=>p+b*l[y],0);return{iterations:r[0].cardinality.value*d,persistedItems:0,blockingItems:0,requestTime:a[0]+r[0].cardinality.value*(s[0]+h+d*f)}}}h3.ActorRdfJoinMultiBind=Vp;Vp.FACTORY=new np.Factory;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(h3,t)})(AR);var lB={},p3={};let dB=Wt,$1e=dB.MultiTransformIterator,U1e=dB.SimpleTransformIterator,q1e=class extends $1e{constructor(e,r,n,a){super(e,a),this.funRight=r,this.funJoin=n}_createTransformer(e){return new U1e(this.funRight(e),{transform:(r,n,a)=>{let s=this.funJoin(e,r);s!==null&&a(s),n()}})}};var V1e=q1e;let H1e=Wt.AsyncIterator,k1e=class extends H1e{constructor(e,r,n,a){super(),this.addedDataListener=!1,this.left=e,this.right=r,this.funHash=n,this.funJoin=a,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",o=>this.destroy(o)),this.right.on("error",o=>this.destroy(o)),this.readable=!1,this.left.on("end",s.bind(this));function s(){if(this.leftMap.size<=0)return this.close();this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",o=>{o==="data"&&!this.addedDataListener&&(this.addedDataListener=!0,this._addDataListener())})}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this.addedDataListener||(this.addedDataListener=!0,this._addDataListener());;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let r=this.matches[this.matchIdx++],n=this.funJoin(r,this.match);if(n!==null)return n}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let e=this.funHash(this.match);this.matches=this.leftMap.get(e)||[],this.matchIdx=0}}_addDataListener(){this.left.on("data",e.bind(this));function e(r){let n=this.funHash(r);this.leftMap.has(n)||this.leftMap.set(n,[]),this.leftMap.get(n).push(r)}}};var Q1e=k1e;const{MultiTransformIterator:G1e,SimpleTransformIterator:z1e,scheduleTask:W1e}=Wt;let X1e=class extends G1e{constructor(e,r,n,a){super(e,a),this.right=r,this.funJoin=n,this.on("end",()=>this.right.close())}_end(){super._end(),W1e(()=>this.right.destroy())}_createTransformer(e){return new z1e(this.right.clone(),{transform:(r,n,a)=>{let s=this.funJoin(e,r);s!==null&&a(s),n()}})}};var K1e=X1e;let J1e=Wt.AsyncIterator,Y1e=class extends J1e{constructor(e,r,n,a){super(),this.left=e,this.right=r,this.funHash=n,this.funJoin=a,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",s=>this.destroy(s)),this.right.on("error",s=>this.destroy(s)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(;;){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let s=this.matches[this.matchIdx++],o=this.usedLeft?this.funJoin(this.match,s):this.funJoin(s,this.match);if(o!==null)return o}this.hasResults()||this._end();let e=null;for(let s=0;s<2&&(e=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,e===null);++s);if(this.done||e===null)return this.readable=!1,null;let r=this.funHash(e),n=this.usedLeft?this.leftMap:this.rightMap;n.has(r)||n.set(r,[]),n.get(r).push(e),this.match=e,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(r)||[],this.matchIdx=0}}};var Z1e=Y1e;let ebe=Wt.AsyncIterator;class tbe extends ebe{constructor(e){super(),Array.isArray(e)||(e=Array.prototype.slice.call(arguments)),this.streams=e;for(let r of e)r.on("readable",()=>this.emit("readable")),r.on("end",()=>this._removeStream(r));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(e){let r=this.streams.indexOf(e);r<0||(this.streams.splice(r,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let e of this.streams)e.close()}read(){for(let e=0;e<this.streams.length;++e){this.idx=(this.idx+1)%this.streams.length;let r=this.streams[this.idx].read();if(r!==null)return r}return null}}var rbe=tbe;const nbe=V1e,ibe=Q1e,abe=K1e,sbe=Z1e,obe=rbe;var y3={DynamicNestedLoopJoin:nbe,HashJoin:ibe,NestedLoopJoin:abe,SymmetricHashJoin:sbe,MergeStream:obe};Object.defineProperty(p3,"__esModule",{value:!0});p3.ActorRdfJoinHash=void 0;const Rc=Ca,ube=y3;class cbe extends Rc.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"hash",limitEntries:2})}async getOutput(e){const r=await Rc.ActorRdfJoin.getMetadatas(e.entries),n=Rc.ActorRdfJoin.overlappingVariables(r);return{result:{type:"bindings",bindingsStream:new ube.HashJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,s=>Rc.ActorRdfJoin.hash(s,n),Rc.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(e.entries,r,e.context)}}}async getJoinCoefficients(e,r){const n=Rc.ActorRdfJoin.getRequestInitialTimes(r),a=Rc.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value+r[1].cardinality.value,persistedItems:r[0].cardinality.value,blockingItems:r[0].cardinality.value,requestTime:n[0]+r[0].cardinality.value*a[0]+n[1]+r[1].cardinality.value*a[1]}}}p3.ActorRdfJoinHash=cbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(p3,t)})(lB);var fB={},b3={};Object.defineProperty(b3,"__esModule",{value:!0});b3.ActorRdfJoinSymmetricHash=void 0;const dd=Ca,lbe=y3;class xR extends dd.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2})}async getOutput(e){const r=await dd.ActorRdfJoin.getMetadatas(e.entries),n=dd.ActorRdfJoin.overlappingVariables(r);return{result:{type:"bindings",bindingsStream:new lbe.SymmetricHashJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,s=>xR.hash(s,n),dd.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(e.entries,r,e.context)}}}async getJoinCoefficients(e,r){const n=dd.ActorRdfJoin.getRequestInitialTimes(r),a=dd.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value+r[1].cardinality.value,persistedItems:r[0].cardinality.value+r[1].cardinality.value,blockingItems:0,requestTime:n[0]+r[0].cardinality.value*a[0]+n[1]+r[1].cardinality.value*a[1]}}}b3.ActorRdfJoinSymmetricHash=xR;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(b3,t)})(fB);var hB={},m3={};Object.defineProperty(m3,"__esModule",{value:!0});m3.ActorRdfJoinNestedLoop=void 0;const Nh=Ca,dbe=y3;class fbe extends Nh.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new dbe.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,Nh.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await Nh.ActorRdfJoin.getMetadatas(e.entries),e.context)}}}async getJoinCoefficients(e,r){const n=Nh.ActorRdfJoin.getRequestInitialTimes(r),a=Nh.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value*r[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:n[0]+r[0].cardinality.value*a[0]+n[1]+r[1].cardinality.value*a[1]}}}m3.ActorRdfJoinNestedLoop=fbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(m3,t)})(hB);var pB={},g3={};Object.defineProperty(g3,"__esModule",{value:!0});g3.ActorRdfJoinMinusHash=void 0;const hbe=ft,Ic=Ca;class pbe extends Ic.ActorRdfJoin{constructor(e){super(e,{logicalType:"minus",physicalName:"hash",limitEntries:2})}async getOutput(e){const r=e.entries[1].output,n=e.entries[0].output,a=await Ic.ActorRdfJoin.getMetadatas(e.entries),s=Ic.ActorRdfJoin.overlappingVariables(a);if(s.length>0){const o={};return{result:{type:"bindings",bindingsStream:new hbe.ClosableTransformIterator(async()=>(await new Promise(c=>{r.bindingsStream.on("data",l=>{o[Ic.ActorRdfJoin.hash(l,s)]=!0}),r.bindingsStream.on("end",c)}),n.bindingsStream.filter(c=>!o[Ic.ActorRdfJoin.hash(c,s)])),{autoStart:!1,onClose(){r.bindingsStream.destroy(),n.bindingsStream.destroy()}}),metadata:n.metadata}}}return r.bindingsStream.destroy(),{result:n}}async getJoinCoefficients(e,r){const n=Ic.ActorRdfJoin.getRequestInitialTimes(r),a=Ic.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value+r[1].cardinality.value,persistedItems:r[0].cardinality.value,blockingItems:r[0].cardinality.value,requestTime:n[0]+r[0].cardinality.value*a[0]+n[1]+r[1].cardinality.value*a[1]}}}g3.ActorRdfJoinMinusHash=pbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(g3,t)})(pB);var yB={},_3={},v3={};Object.defineProperty(v3,"__esModule",{value:!0});v3.BindingsIndex=void 0;const ybe=sr;class rm{constructor(e){this.data={},this.keys=e}static hashTerm(e){return e&&e.termType!=="Variable"?(0,ybe.termToString)(e):""}add(e){if(this.isBindingsValid(e)){let r=this.data;for(const n of this.keys){const a=rm.hashTerm(e.get(n));let s=r[a];s||(s=r[a]={}),r=s}}}contains(e){return this.isBindingsValid(e)?this.containsRecursive(e,this.keys,[this.data]):!1}isBindingsValid(e){let r=!1;for(const n of this.keys)if(e.get(n)){r=!0;break}return r}containsRecursive(e,r,n){if(r.length===0)return!0;let a;[a,...r]=r;for(const s of n){const o=rm.hashTerm(e.get(a));if(o){const u=[s[o],s[""]].filter(Boolean);if(u.length===0)continue;if(this.containsRecursive(e,r,u))return!0}else{let u=Object.keys(s).map(c=>s[c]);if(u.length===0&&(u=[{}]),this.containsRecursive(e,r,u))return!0}}return!1}}v3.BindingsIndex=rm;Object.defineProperty(_3,"__esModule",{value:!0});_3.ActorRdfJoinMinusHashUndef=void 0;const bbe=ft,jh=Ca,mbe=v3;class gbe extends jh.ActorRdfJoin{constructor(e){super(e,{logicalType:"minus",physicalName:"hash-undef",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){const r=e.entries[1].output,n=e.entries[0].output,a=await jh.ActorRdfJoin.getMetadatas(e.entries),s=jh.ActorRdfJoin.overlappingVariables(a);if(s.length>0){const o=new mbe.BindingsIndex(s);return{result:{type:"bindings",bindingsStream:new bbe.ClosableTransformIterator(async()=>(await new Promise(c=>{r.bindingsStream.on("data",l=>o.add(l)),r.bindingsStream.on("end",c)}),n.bindingsStream.filter(c=>!o.contains(c))),{autoStart:!1,onClose(){r.bindingsStream.destroy(),n.bindingsStream.destroy()}}),async metadata(){const c=await n.metadata(),l=await n.metadata();return{...l,canContainUndefs:c.canContainUndefs||l.canContainUndefs}}}}}return r.bindingsStream.destroy(),{result:n}}async getJoinCoefficients(e,r){const n=jh.ActorRdfJoin.getRequestInitialTimes(r),a=jh.ActorRdfJoin.getRequestItemTimes(r);return{iterations:(r[0].cardinality.value+r[1].cardinality.value)*1.01,persistedItems:r[0].cardinality.value,blockingItems:r[0].cardinality.value,requestTime:n[0]+r[0].cardinality.value*a[0]+n[1]+r[1].cardinality.value*a[1]}}}_3.ActorRdfJoinMinusHashUndef=gbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(_3,t)})(yB);var bB={},w3={};Object.defineProperty(w3,"__esModule",{value:!0});w3.ActorRdfJoinOptionalBind=void 0;const _be=AR,vbe=ft,k1=Ca,oE=Ht,B6=Tt;class wbe extends k1.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){e.entries[1].output.bindingsStream.close();const r=e.context.set(oE.KeysQueryOperation.joinLeftMetadata,await e.entries[0].output.metadata()).set(oE.KeysQueryOperation.joinRightMetadatas,[await e.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:_be.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,e.entries[0].output.bindingsStream,[e.entries[1].operation],async(a,s)=>{const o=a[0];return vbe.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:o,context:r==null?void 0:r.set(oE.KeysQueryOperation.joinBindings,s)})).bindingsStream},!0),metadata:async()=>await this.constructResultMetadata(e.entries,await k1.ActorRdfJoin.getMetadatas(e.entries),e.context,{canContainUndefs:!0})}}}async getJoinCoefficients(e,r){const n=k1.ActorRdfJoin.getRequestInitialTimes(r),a=k1.ActorRdfJoin.getRequestItemTimes(r);if(e.entries[1].operation.type===B6.Algebra.types.EXTEND||e.entries[1].operation.type===B6.Algebra.types.GROUP)throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const s=(await this.mediatorJoinSelectivity.mediate({entries:e.entries,context:e.context})).selectivity*this.selectivityModifier;return{iterations:r[0].cardinality.value*r[1].cardinality.value*s,persistedItems:0,blockingItems:0,requestTime:n[0]+r[0].cardinality.value*s*(a[0]+n[1]+r[1].cardinality.value*a[1])}}}w3.ActorRdfJoinOptionalBind=wbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(w3,t)})(bB);var mB={},S3={};Object.defineProperty(S3,"__esModule",{value:!0});S3.ActorRdfJoinOptionalNestedLoop=void 0;const Ch=Ca,Sbe=y3;class Tbe extends Ch.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new Sbe.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,Ch.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await Ch.ActorRdfJoin.getMetadatas(e.entries),e.context,{canContainUndefs:!0})}}}async getJoinCoefficients(e,r){const n=Ch.ActorRdfJoin.getRequestInitialTimes(r),a=Ch.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value*r[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:n[0]+r[0].cardinality.value*a[0]+n[1]+r[1].cardinality.value*a[1]}}}S3.ActorRdfJoinOptionalNestedLoop=Tbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(S3,t)})(mB);var gB={},T3={},E3={};Object.defineProperty(E3,"__esModule",{value:!0});E3.RdfSourceQpf=void 0;const Q1=Wt,Ebe=yt,_B=sr,G1=hn,Pc=new Ebe.DataFactory;class Obe{constructor(e,r,n,a,s,o,u,c,l,d,h){this.mediatorMetadata=e,this.mediatorMetadataExtract=r,this.mediatorDereferenceRdf=n,this.subjectUri=a,this.predicateUri=s,this.objectUri=o,this.graphUri=u,this.url=c,this.context=d,this.cachedQuads={};const f=this.getSearchForm(l);if(!f)throw new Error("Illegal state: found no TPF/QPF search form anymore in metadata.");if(this.searchForm=f,this.defaultGraph=l.defaultGraph?Pc.namedNode(l.defaultGraph):void 0,h){let p=(0,Q1.wrap)(h);this.defaultGraph&&(p=this.reverseMapQuadsToDefaultGraph(p)),p.setProperty("metadata",l),this.cacheQuads(p,Pc.variable(""),Pc.variable(""),Pc.variable(""),Pc.variable(""))}}getSearchForm(e){if(!e.searchForms||!e.searchForms.values)return;const{searchForms:r}=e;for(const n of r.values)if(this.graphUri&&this.subjectUri in n.mappings&&this.predicateUri in n.mappings&&this.objectUri in n.mappings&&this.graphUri in n.mappings&&Object.keys(n.mappings).length===4||this.subjectUri in n.mappings&&this.predicateUri in n.mappings&&this.objectUri in n.mappings&&Object.keys(n.mappings).length===3)return n}createFragmentUri(e,r,n,a,s){const o={},u=[{uri:this.subjectUri,term:r},{uri:this.predicateUri,term:n},{uri:this.objectUri,term:a},{uri:this.graphUri,term:s}];for(const c of u)c.uri&&c.term.termType!=="Variable"&&(c.term.termType!=="Quad"||(0,G1.everyTermsNested)(c.term,l=>l.termType!=="Variable"))&&(o[c.uri]=(0,_B.termToString)(c.term));return e.getUri(o)}match(e,r,n,a){let s=!1;if(a.termType==="DefaultGraph"){if(this.defaultGraph)s=!0,a=this.defaultGraph;else if(Object.keys(this.searchForm.mappings).length===4&&!this.defaultGraph){const c=new Q1.ArrayIterator([],{autoStart:!1});return c.setProperty("metadata",{requestTime:0,cardinality:{type:"exact",value:0},first:null,next:null,last:null,canContainUndefs:!1}),c}}const o=this.getCachedQuads(e,r,n,a);if(o)return o;const u=new Q1.TransformIterator(async()=>{var b;let c=this.createFragmentUri(this.searchForm,e,r,n,a);const l=await this.mediatorDereferenceRdf.mediate({context:this.context,url:c});c=l.url;const d=await this.mediatorMetadata.mediate({context:this.context,url:c,quads:l.data,triples:(b=l.metadata)==null?void 0:b.triples}),h=this.mediatorMetadataExtract.mediate({context:this.context,url:c,metadata:d.metadata,requestTime:l.requestTime}).then(({metadata:y})=>u.setProperty("metadata",{...y,canContainUndefs:!1,subsetOf:this.url})),f=Pc.defaultGraph();let p=(0,Q1.wrap)(d.data).transform({filter(y){return(0,G1.matchPattern)(y,e,r,n,a)?!0:s&&(0,G1.matchPattern)(y,e,r,n,f)}});return(s||a.termType==="Variable")&&(p=this.reverseMapQuadsToDefaultGraph(p)),p.on("error",()=>{}),await h,p},{autoStart:!1});return this.cacheQuads(u,e,r,n,a),this.getCachedQuads(e,r,n,a)}reverseMapQuadsToDefaultGraph(e){const r=Pc.defaultGraph();return e.map(n=>(0,G1.mapTerms)(n,(a,s)=>s==="graph"&&a.equals(this.defaultGraph)?r:a))}getPatternId(e,r,n,a){return JSON.stringify({s:e.termType==="Variable"?"":z1(e),p:r.termType==="Variable"?"":z1(r),o:n.termType==="Variable"?"":z1(n),g:a.termType==="Variable"?"":z1(a)})}cacheQuads(e,r,n,a,s){const o=this.getPatternId(r,n,a,s);this.cachedQuads[o]=e.clone()}getCachedQuads(e,r,n,a){const s=this.getPatternId(e,r,n,a),o=this.cachedQuads[s];if(o)return o.clone()}}E3.RdfSourceQpf=Obe;function z1(t){return t.termType==="DefaultGraph"?"|":(0,_B.termToString)(t)}Object.defineProperty(T3,"__esModule",{value:!0});T3.ActorRdfResolveHypermediaQpf=void 0;const Abe=Hv,xbe=E3;class Rbe extends Abe.ActorRdfResolveHypermedia{constructor(e){super(e,"qpf")}async testMetadata(e){const{searchForm:r}=this.createSource(e.url,e.metadata,e.context);if(e.handledDatasets&&e.handledDatasets[r.dataset])throw new Error(`Actor ${this.name} can only be applied for the first page of a QPF dataset.`);return{filterFactor:1}}async run(e){this.logInfo(e.context,`Identified as qpf source: ${e.url}`);const r=this.createSource(e.url,e.metadata,e.context,e.quads);return{source:r,dataset:r.searchForm.dataset}}createSource(e,r,n,a){return new xbe.RdfSourceQpf(this.mediatorMetadata,this.mediatorMetadataExtract,this.mediatorDereferenceRdf,this.subjectUri,this.predicateUri,this.objectUri,this.graphUri,e,r,n,a)}}T3.ActorRdfResolveHypermediaQpf=Rbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(T3,t)})(gB);var vB={},O3={},my={},A3={},x3={};Object.defineProperty(x3,"__esModule",{value:!0});x3.LinkedRdfSourcesAsyncRdfIterator=void 0;const Ibe=ba,Pbe=Wt,Dbe=_s;class Nbe extends Pbe.BufferedIterator{constructor(e,r,n,a,s,o,u,c){if(super({autoStart:!0,...c}),this.started=!1,this.currentIterators=[],this.iteratorsPendingCreation=0,this.accumulatedMetadata=Promise.resolve(void 0),this.cacheSize=e,this.subject=r,this.predicate=n,this.object=a,this.graph=s,this.firstUrl=o,this.maxIterators=u,this.maxIterators<=0)throw new Error(`LinkedRdfSourcesAsyncRdfIterator.maxIterators must be larger than zero, but got ${this.maxIterators}`)}_end(e){for(const r of this.currentIterators)r.destroy();super._end(e)}setSourcesState(e){e?this.sourcesState=e:(this.sourcesState={sources:new Dbe.LRUCache({max:this.cacheSize})},this.getSourceCached({url:this.firstUrl},{}).catch(r=>this.destroy(r)))}getSourceCached(e,r){let n=this.sourcesState.sources.get(e.url);return n||(n=this.getSource(e,r),(e.url===this.firstUrl||this.shouldStoreSourcesStates())&&this.sourcesState.sources.set(e.url,n),n)}shouldStoreSourcesStates(){return!0}_read(e,r){if(!this.started)this.started=!0,this.sourcesState||this.setSourcesState(),this.getSourceCached({url:this.firstUrl},{}).then(n=>{this.startIterator(n,!0),r()}).catch(n=>setTimeout(()=>this.destroy(n)));else{for(const n of this.currentIterators){for(;e>0;){const a=n.read();if(a!==null)e--,this._push(a);else break}if(e<=0)break}e>=0&&this.canStartNewIterator()?this.getSourceCached({url:this.firstUrl},{}).then(n=>{this.startIteratorsForNextUrls(n.handledDatasets,!1),r()}).catch(n=>this.destroy(n)):r()}}canStartNewIterator(){return this.currentIterators.length+this.iteratorsPendingCreation<this.maxIterators&&!this.readable}areIteratorsRunning(){return this.currentIterators.length+this.iteratorsPendingCreation>0}startIterator(e,r){const n=e.source.match(this.subject,this.predicate,this.object,this.graph);this.currentIterators.push(n);let a=!1;n._destination=this,n.on("error",s=>this.destroy(s)),n.on("readable",()=>this._fillBuffer()),n.on("end",()=>{this.currentIterators.splice(this.currentIterators.indexOf(n),1),a&&this.startIteratorsForNextUrls(e.handledDatasets,!0)}),n.getProperty("metadata",s=>{this.accumulatedMetadata=this.accumulatedMetadata.then(o=>(async()=>(o||(o=e.metadata),this.accumulateMetadata(o,s)))().then(u=>{const c={...e.metadata,...s,...u};return c.state=new Ibe.MetadataValidationState,this.updateMetadata(c),this.getSourceLinks(c).then(l=>Promise.all(l)).then(async l=>{const d=await this.getLinkQueue();for(const h of l)d.push(h,e.link);a=!0,this.startIteratorsForNextUrls(e.handledDatasets,!0)}).catch(l=>this.destroy(l)),c})).catch(o=>(this.destroy(o),{}))})}updateMetadata(e){const r=this.getProperty("metadata");this.setProperty("metadata",e),r==null||r.state.invalidate()}isRunning(){return!this.done}startIteratorsForNextUrls(e,r){this.getLinkQueue().then(n=>{for(;this.canStartNewIterator()&&this.isRunning();){const a=n.pop();if(a)this.iteratorsPendingCreation++,this.getSourceCached(a,e).then(s=>{this.iteratorsPendingCreation--,this.startIterator(s,!1)}).catch(s=>this.destroy(s));else break}r&&this.isCloseable(n)&&this.close()}).catch(n=>this.destroy(n))}isCloseable(e){return e.isEmpty()&&!this.areIteratorsRunning()}}x3.LinkedRdfSourcesAsyncRdfIterator=Nbe;Object.defineProperty(A3,"__esModule",{value:!0});A3.MediatedLinkedRdfSourcesAsyncRdfIterator=void 0;const jbe=yt,Cbe=Kt,Fbe=x3,W1=new jbe.DataFactory;class Mbe extends Fbe.LinkedRdfSourcesAsyncRdfIterator{constructor(e,r,n,a,s,o,u,c,l,d,h){super(e,a,s,o,u,c,l,d?{maxBufferSize:Number.POSITIVE_INFINITY}:void 0),this.wasForcefullyClosed=!1,this.context=r,this.forceSourceType=n,this.mediatorDereferenceRdf=h.mediatorDereferenceRdf,this.mediatorMetadata=h.mediatorMetadata,this.mediatorMetadataExtract=h.mediatorMetadataExtract,this.mediatorMetadataAccumulate=h.mediatorMetadataAccumulate,this.mediatorRdfResolveHypermedia=h.mediatorRdfResolveHypermedia,this.mediatorRdfResolveHypermediaLinks=h.mediatorRdfResolveHypermediaLinks,this.mediatorRdfResolveHypermediaLinksQueue=h.mediatorRdfResolveHypermediaLinksQueue,this.handledUrls={[c]:!0},this.aggregatedStore=d}close(){if(!this.aggregatedStore){super.close();return}this.getLinkQueue().then(e=>{var r;this.isCloseable(e)?((r=this.aggregatedStore)==null||r.end(),super.close()):this.wasForcefullyClosed=!0}).catch(e=>super.destroy(e))}destroy(e){if(!this.aggregatedStore){super.destroy(e);return}this.getLinkQueue().then(r=>{var n;e||this.isCloseable(r)?((n=this.aggregatedStore)==null||n.end(),super.destroy(e)):this.wasForcefullyClosed=!0}).catch(r=>super.destroy(r))}isCloseable(e){return(this.wasForcefullyClosed||e.isEmpty())&&!this.areIteratorsRunning()}canStartNewIterator(){return!this.wasForcefullyClosed&&this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||super.canStartNewIterator()}isRunning(){return this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||!this.done}shouldStoreSourcesStates(){return this.aggregatedStore===void 0}getLinkQueue(){return this.linkQueue||(this.linkQueue=this.mediatorRdfResolveHypermediaLinksQueue.mediate({firstUrl:this.firstUrl,context:this.context}).then(e=>e.linkQueue)),this.linkQueue}async getSourceLinks(e){try{const{links:r}=await this.mediatorRdfResolveHypermediaLinks.mediate({context:this.context,metadata:e});return r.filter(n=>this.handledUrls[n.url]?!1:(this.handledUrls[n.url]=!0,!0))}catch{return[]}}async getSource(e,r){var l,d,h,f;let n=this.context;e.context&&(n=n.merge(e.context));let a=e.url,s,o;try{const p=await this.mediatorDereferenceRdf.mediate({context:n,url:a});a=p.url;const b=await this.mediatorMetadata.mediate({context:n,url:a,quads:p.data,triples:(l=p.metadata)==null?void 0:l.triples});b.data.on("error",()=>{}),o=(await this.mediatorMetadataExtract.mediate({context:n,url:a,metadata:b.metadata,headers:p.headers,requestTime:p.requestTime})).metadata,s=b.data,e.transform&&(s=await e.transform(s))}catch(p){s=new Cbe.Readable,s.read=()=>(setTimeout(()=>s.emit("error",p)),null),o={}}(d=this.aggregatedStore)==null||d.setBaseMetadata(o,!1),(h=this.aggregatedStore)==null||h.containedSources.add(e.url),(f=this.aggregatedStore)==null||f.import(s);const{source:u,dataset:c}=await this.mediatorRdfResolveHypermedia.mediate({context:n,forceSourceType:this.forceSourceType,handledDatasets:r,metadata:o,quads:s,url:a});return c&&(r[c]=!0),{link:e,source:u,metadata:o,handledDatasets:r}}startIterator(e,r){var n;if(this.aggregatedStore&&!this.aggregatedStore.containedSources.has(e.link.url)){(n=this.aggregatedStore)==null||n.containedSources.add(e.link.url);const a=e.source.match(W1.variable("s"),W1.variable("p"),W1.variable("o"),W1.variable("g"),this.context);this.aggregatedStore.import(a).on("end",()=>{super.startIterator(e,r)})}else super.startIterator(e,r)}async accumulateMetadata(e,r){return(await this.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:e,appendingMetadata:r,context:this.context})).metadata}updateMetadata(e){var r;super.updateMetadata(e),(r=this.aggregatedStore)==null||r.setBaseMetadata(e,!0)}}A3.MediatedLinkedRdfSourcesAsyncRdfIterator=Mbe;var R3={},wB={},gy={};Object.defineProperty(gy,"__esModule",{value:!0});gy.PendingStreamsIndex=void 0;const $6=sr,U6=hn;class Ms{constructor(){this.indexedStreams=new Map,this.allStreams=[]}termToString(e){return e&&e.termType!=="Variable"?(0,$6.termToString)(e):Ms.ID_VARIABLE}addPatternListener(e,r,n,a,s){this.allStreams.push(e);const o=`${this.termToString(r)}${Ms.ID_SEPARATOR}${this.termToString(n)}${Ms.ID_SEPARATOR}${this.termToString(a)}${Ms.ID_SEPARATOR}${this.termToString(s)}`;let u=this.indexedStreams.get(o);u||(u=[],this.indexedStreams.set(o,u)),u.push(e)}getPendingStreamsForQuad(e){let r=[(0,U6.getTerms)(e).map(a=>(0,$6.termToString)(a))];for(let a=0;a<U6.QUAD_TERM_NAMES.length;a++){const s=r;r=[];for(const o of s){r.push(o);const u=[...o];u[a]=Ms.ID_VARIABLE,r.push(u)}}const n=[];for(const a of r){const s=this.indexedStreams.get(a.join(Ms.ID_SEPARATOR));s&&n.push(...s)}return n}}Ms.ID_VARIABLE="?";Ms.ID_SEPARATOR=":";gy.PendingStreamsIndex=Ms;var I3={};Object.defineProperty(I3,"__esModule",{value:!0});I3.StreamingStore=void 0;const Lbe=au,Bbe=Kt,$be=gy;class Ube{constructor(e=new Lbe.Store){this.pendingStreams=new $be.PendingStreamsIndex,this.ended=!1,this.store=e}end(){this.ended=!0;for(const e of this.pendingStreams.allStreams)e.push(null),e._pipeSource.unpipe()}importToListeners(e){e.on("data",r=>{if(!this.ended&&!this.store.countQuads(r.subject,r.predicate,r.object,r.graph))for(const n of this.pendingStreams.getPendingStreamsForQuad(r))n.isInitialized&&(n.push(r),n.emit("quad",r))})}import(e){if(this.ended)throw new Error("Attempted to import into an ended StreamingStore");return this.importToListeners(e),this.store.import(e)}match(e,r,n,a){const s=this.store.match(e,r,n,a);let o=s;if(!this.ended){const u=new Bbe.PassThrough({objectMode:!0});this.pendingStreams.addPatternListener(u,e,r,n,a),o=s.pipe(u,{end:!1}),o._pipeSource=s;const c=s._read;s._read=l=>{u.isInitialized=!0,c.call(s,l)}}return o}getStore(){return this.store}}I3.StreamingStore=Ube;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(gy,t),r(I3,t)})(wB);Object.defineProperty(R3,"__esModule",{value:!0});R3.StreamingStoreMetadata=void 0;const qbe=ft,X1=ba,Vbe=wB;class Hbe extends Vbe.StreamingStore{constructor(e,r){super(e),this.started=!1,this.containedSources=new Set,this.runningIterators=new Set,this.baseMetadata={state:new X1.MetadataValidationState,cardinality:{type:"exact",value:0},canContainUndefs:!1},this.metadataAccumulator=r}import(e){return this.ended||super.import(e),e}hasRunningIterators(){return this.runningIterators.size>0}match(e,r,n,a){const s=super.match(e,r,n,a),o=new qbe.ClosableTransformIterator(s,{autoStart:!1,onClose:()=>{this.runningIterators.delete(o)}});let u=this.getStore().countQuads(e,r,n,a);const c={state:new X1.MetadataValidationState,cardinality:{type:"estimate",value:u},canContainUndefs:!1};return o.setProperty("metadata",c),o.setProperty("lastCount",u),s.on("quad",()=>{o.setProperty("lastCount",++u),this.updateMetadataState(o,u)}),this.runningIterators.add(o),o}setBaseMetadata(e,r){if(this.baseMetadata={...e},this.baseMetadata.cardinality={type:"exact",value:0},r)for(const n of this.runningIterators){const a=n.getProperty("lastCount");this.updateMetadataState(n,a)}}updateMetadataState(e,r){const n={state:new X1.MetadataValidationState,cardinality:{type:"estimate",value:r},canContainUndefs:!1};this.metadataAccumulator(this.baseMetadata,n).then(a=>{a.state=new X1.MetadataValidationState;const s=e.getProperty("metadata");e.setProperty("metadata",a),s==null||s.state.invalidate()}).catch(()=>{})}}R3.StreamingStoreMetadata=Hbe;Object.defineProperty(my,"__esModule",{value:!0});my.MediatedQuadSource=void 0;const kbe=Ht,Qbe=A3,Gbe=R3;class Id{constructor(e,r,n,a,s,o){this.cacheSize=e,this.firstUrl=r,this.forceSourceType=n,this.maxIterators=a,this.aggregateStore=s,this.mediators=o}static nullifyVariables(e){return!e||e.termType==="Variable"?void 0:e}match(e,r,n,a,s){let o;if(this.aggregateStore){const c=s.get(kbe.KeysRdfResolveQuadPattern.hypermediaSourcesAggregatedStores);if(c&&(o=c.get(this.firstUrl),o||(o=new Gbe.StreamingStoreMetadata(void 0,(l,d)=>u.accumulateMetadata(l,d)),c.set(this.firstUrl,o)),o.started))return o.match(Id.nullifyVariables(e),Id.nullifyVariables(r),Id.nullifyVariables(n),Id.nullifyVariables(a))}const u=new Qbe.MediatedLinkedRdfSourcesAsyncRdfIterator(this.cacheSize,s,this.forceSourceType,e,r,n,a,this.firstUrl,this.maxIterators,o,this.mediators);return this.sourcesState?u.setSourcesState(this.sourcesState):(u.setSourcesState(),this.sourcesState=u.sourcesState),o&&(o.started=!0),u}}my.MediatedQuadSource=Id;Object.defineProperty(O3,"__esModule",{value:!0});O3.ActorRdfResolveQuadPatternHypermedia=void 0;const Fh=Dl,zbe=_s,Wbe=my;class Xbe extends Fh.ActorRdfResolveQuadPatternSource{constructor(e){super(e),this.cache=this.cacheSize?new zbe.LRUCache({max:this.cacheSize}):void 0;const r=this.cache;r&&this.httpInvalidator.addInvalidateListener(({url:n})=>n?r.delete(n):r.clear()),e.mediatorMetadataAccumulate||(this.mediatorMetadataAccumulate={async mediate(n){return{metadata:{...n.accumulatedMetadata,...n.appendingMetadata}}}})}async test(e){if(!(0,Fh.hasContextSingleSource)(e.context))throw new Error(`Actor ${this.name} can only resolve quad pattern queries against a single source.`);return!0}getSource(e,r){const n=(0,Fh.getContextSource)(e),a=(0,Fh.getContextSourceUrl)(n);let s;return this.cache&&this.cache.has(a)?s=this.cache.get(a):(s=new Wbe.MediatedQuadSource(this.cacheSize,a,(0,Fh.getDataSourceType)(n),this.maxIterators,this.aggregateStore,{mediatorMetadata:this.mediatorMetadata,mediatorMetadataExtract:this.mediatorMetadataExtract,mediatorMetadataAccumulate:this.mediatorMetadataAccumulate,mediatorDereferenceRdf:this.mediatorDereferenceRdf,mediatorRdfResolveHypermedia:this.mediatorRdfResolveHypermedia,mediatorRdfResolveHypermediaLinks:this.mediatorRdfResolveHypermediaLinks,mediatorRdfResolveHypermediaLinksQueue:this.mediatorRdfResolveHypermediaLinksQueue}),this.cache&&this.cache.set(a,s)),Promise.resolve(s)}}O3.ActorRdfResolveQuadPatternHypermedia=Xbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(O3,t),r(my,t)})(vB);var SB={},P3={};Object.defineProperty(P3,"__esModule",{value:!0});P3.ActorRdfUpdateQuadsHypermedia=void 0;const fd=kf,Kbe=_s;class Jbe extends fd.ActorRdfUpdateQuadsDestination{constructor(e){super(e),this.cache=this.cacheSize?new Kbe.LRUCache({max:this.cacheSize}):void 0;const r=this.cache;r&&this.httpInvalidator.addInvalidateListener(({url:n})=>n?r.delete(n):r.clear())}async test(e){if(!(0,fd.getContextDestinationUrl)((0,fd.getContextDestination)(e.context)))throw new Error(`Actor ${this.name} can only update quads against a single destination URL.`);return!0}getDestination(e){const r=(0,fd.getContextDestination)(e);let n=(0,fd.getContextDestinationUrl)(r);if(this.cache&&this.cache.has(n))return this.cache.get(n);const a=(async()=>{var c;let s,o;try{const l=await this.mediatorDereferenceRdf.mediate({context:e,url:n,acceptErrors:!0});o=l.exists,n=l.url;const d=await this.mediatorMetadata.mediate({context:e,url:n,quads:l.data,triples:(c=l.metadata)==null?void 0:c.triples});s=(await this.mediatorMetadataExtract.mediate({context:e,url:n,metadata:d.metadata,headers:l.headers,requestTime:l.requestTime})).metadata}catch{s={},o=!1}const{destination:u}=await this.mediatorRdfUpdateHypermedia.mediate({context:e,url:n,metadata:s,exists:o,forceDestinationType:(0,fd.getDataDestinationType)(r)});return u})();return this.cache&&this.cache.set(n,a),a}}P3.ActorRdfUpdateQuadsHypermedia=Jbe;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(P3,t)})(SB);var TB={},D3={};Object.defineProperty(D3,"__esModule",{value:!0});D3.ActorQueryOperationClear=void 0;const q6=ft,Ybe=yt,Zbe=new Ybe.DataFactory;class eme extends q6.ActorQueryOperationTypedMediated{constructor(e){super(e,"clear")}async testOperation(e,r){return q6.ActorQueryOperation.throwOnReadOnly(r),!0}async runOperation(e,r){let n;e.source==="DEFAULT"?n=Zbe.defaultGraph():typeof e.source=="string"?n=e.source:n=[e.source];const{execute:a}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:n,requireExistence:!e.silent,dropGraphs:!1},context:r});return{type:"void",execute:a}}}D3.ActorQueryOperationClear=eme;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(D3,t)})(TB);var EB={},N3={};Object.defineProperty(N3,"__esModule",{value:!0});N3.ActorQueryOperationCreate=void 0;const V6=ft;class tme extends V6.ActorQueryOperationTypedMediated{constructor(e){super(e,"create")}async testOperation(e,r){return V6.ActorQueryOperation.throwOnReadOnly(r),!0}async runOperation(e,r){const{execute:n}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[e.source],requireNonExistence:!e.silent},context:r});return{type:"void",execute:n}}}N3.ActorQueryOperationCreate=tme;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(N3,t)})(EB);var OB={},j3={};Object.defineProperty(j3,"__esModule",{value:!0});j3.ActorQueryOperationUpdateDeleteInsert=void 0;const K1=oR,rme=Hn,uE=ft,nme=Wt,ime=new rme.BindingsFactory;class ame extends uE.ActorQueryOperationTypedMediated{constructor(e){super(e,"deleteinsert"),this.blankNodeCounter=0}async testOperation(e,r){return uE.ActorQueryOperation.throwOnReadOnly(r),!0}async runOperation(e,r){const n=e.where?uE.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.where,context:r})).bindingsStream:new nme.ArrayIterator([ime.bindings()],{autoStart:!1});let a,s;e.insert&&(a=new K1.BindingsToQuadsIterator(e.insert.map(K1.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),n.clone()),this.blankNodeCounter++),e.delete&&(s=new K1.BindingsToQuadsIterator(e.delete.map(K1.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),n.clone()),this.blankNodeCounter++);const{execute:o}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:a,quadStreamDelete:s,context:r});return{type:"void",execute:o}}}j3.ActorQueryOperationUpdateDeleteInsert=ame;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(j3,t)})(OB);var AB={},C3={};Object.defineProperty(C3,"__esModule",{value:!0});C3.ActorQueryOperationDrop=void 0;const H6=ft,sme=yt,ome=new sme.DataFactory;class ume extends H6.ActorQueryOperationTypedMediated{constructor(e){super(e,"drop")}async testOperation(e,r){return H6.ActorQueryOperation.throwOnReadOnly(r),!0}async runOperation(e,r){let n;e.source==="DEFAULT"?n=ome.defaultGraph():typeof e.source=="string"?n=e.source:n=[e.source];const{execute:a}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:n,requireExistence:!e.silent,dropGraphs:!0},context:r});return{type:"void",execute:a}}}C3.ActorQueryOperationDrop=ume;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(C3,t)})(AB);var xB={},F3={};Object.defineProperty(F3,"__esModule",{value:!0});F3.ActorQueryOperationLoad=void 0;const k6=ft,Q6=Ht,cme=yt,lme=Tt,Dc=new cme.DataFactory;class RR extends k6.ActorQueryOperationTypedMediated{constructor(e){super(e,"load"),this.factory=new lme.Factory,this.constructOperation=this.factory.createConstruct(this.factory.createPattern(Dc.variable("s"),Dc.variable("p"),Dc.variable("o")),[this.factory.createPattern(Dc.variable("s"),Dc.variable("p"),Dc.variable("o"))])}async testOperation(e,r){return k6.ActorQueryOperation.throwOnReadOnly(r),!0}async runOperation(e,r){let n=r.set(Q6.KeysRdfResolveQuadPattern.sources,[e.source.value]);e.silent&&(n=n.set(Q6.KeysInitQuery.lenient,!0));let s=RR.getSafeQuads(await this.mediatorQueryOperation.mediate({operation:this.constructOperation,context:n})).quadStream;e.destination&&(s=s.map(u=>Dc.quad(u.subject,u.predicate,u.object,e.destination)));const{execute:o}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:s,context:r});return{type:"void",execute:o}}}F3.ActorQueryOperationLoad=RR;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(F3,t)})(xB);var RB={},M3={};Object.defineProperty(M3,"__esModule",{value:!0});M3.ActorQueryOperationJoin=void 0;const G6=ft;class dme extends G6.ActorQueryOperationTypedMediated{constructor(e){super(e,"join")}async testOperation(e,r){return!0}async runOperation(e,r){const n=(await Promise.all(e.input.map(async a=>({output:await this.mediatorQueryOperation.mediate({operation:a,context:r}),operation:a})))).map(({output:a,operation:s})=>({output:G6.ActorQueryOperation.getSafeBindings(a),operation:s}));return this.mediatorJoin.mediate({type:"inner",entries:n,context:r})}}M3.ActorQueryOperationJoin=dme;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(M3,t)})(RB);var IB={},L3={};Object.defineProperty(L3,"__esModule",{value:!0});L3.ActorQueryOperationLeftJoin=void 0;const cE=ft,z6=jl;class fme extends cE.ActorQueryOperationTypedMediated{constructor(e){super(e,"leftjoin")}async testOperation(e,r){return!0}async runOperation(e,r){const n=(await Promise.all(e.input.map(async s=>({output:await this.mediatorQueryOperation.mediate({operation:s,context:r}),operation:s})))).map(({output:s,operation:o})=>({output:cE.ActorQueryOperation.getSafeBindings(s),operation:o})),a=await this.mediatorJoin.mediate({type:"optional",entries:n,context:r});if(e.expression){const o=(await n[1].output.metadata()).variables,u={...cE.ActorQueryOperation.getAsyncExpressionContext(r,this.mediatorQueryOperation)},c=new z6.AsyncEvaluator(e.expression,u),l=a.bindingsStream.transform({autoStart:!1,transform:async(d,h,f)=>{if(!o.every(p=>d.has(p.value)))return f(d),h();try{await c.evaluateAsEBV(d)&&f(d)}catch(p){(0,z6.isExpressionError)(p)?this.logWarn(r,"Error occurred while filtering.",()=>({error:p,bindings:d})):l.emit("error",p)}h()}});a.bindingsStream=l}return a}}L3.ActorQueryOperationLeftJoin=fme;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(L3,t)})(IB);var PB={},B3={};Object.defineProperty(B3,"__esModule",{value:!0});B3.ActorQueryOperationMinus=void 0;const W6=ft;class hme extends W6.ActorQueryOperationTypedMediated{constructor(e){super(e,"minus")}async testOperation(e,r){return!0}async runOperation(e,r){const n=(await Promise.all(e.input.map(async a=>({output:await this.mediatorQueryOperation.mediate({operation:a,context:r}),operation:a})))).map(({output:a,operation:s})=>({output:W6.ActorQueryOperation.getSafeBindings(a),operation:s}));return this.mediatorJoin.mediate({type:"minus",entries:n,context:r})}}B3.ActorQueryOperationMinus=hme;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(B3,t)})(PB);var DB={},$3={};Object.defineProperty($3,"__esModule",{value:!0});$3.ActorQueryOperationPathSeq=void 0;const X6=su,K6=ft,pme=Tt;class yme extends X6.ActorAbstractPath{constructor(e){super(e,pme.Algebra.types.SEQ)}async runOperation(e,r){const n=e.predicate;let a=e.subject;const s=[],o=await Promise.all(n.input.map((l,d)=>{const h=d===n.input.length-1?e.object:this.generateVariable(e,`b${d}`),f=X6.ActorAbstractPath.FACTORY.createPath(a,l,h,e.graph),p=this.mediatorQueryOperation.mediate({context:r,operation:f});return a=h,d<n.input.length-1&&s.push(h),{output:p,operation:f}}).map(async({output:l,operation:d})=>({output:K6.ActorQueryOperation.getSafeBindings(await l),operation:d}))),u=K6.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:"inner",entries:o,context:r}));return{type:"bindings",bindingsStream:u.bindingsStream.transform({transform(l,d,h){for(const f of s)l=l.delete(f);h(l),d()}}),async metadata(){const l=await u.metadata(),d=l.variables.filter(h=>!s.some(f=>f.value===h.value));return{...l,variables:d}}}}}$3.ActorQueryOperationPathSeq=yme;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r($3,t)})(DB);var NB={},U3={};Object.defineProperty(U3,"__esModule",{value:!0});U3.ActorRdfJoinMultiSmallest=void 0;const bme=ft,J1=Ca,mme=Tt;class q3 extends J1.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0,canHandleUndefs:!0})}async sortJoinEntries(e,r){return(await this.mediatorJoinEntriesSort.mediate({entries:e,context:r})).entries}async getOutput(e){const r=await this.sortJoinEntries(await J1.ActorRdfJoin.getEntriesWithMetadatas([...e.entries]),e.context),n=r[0],a=r[1];r.splice(0,2);const s={output:bme.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:e.type,entries:[n,a],context:e.context})),operation:q3.FACTORY.createJoin([n.operation,a.operation],!1)};return r.push(s),{result:await this.mediatorJoin.mediate({type:e.type,entries:r,context:e.context})}}async getJoinCoefficients(e,r){r=[...r],r=(await this.sortJoinEntries(e.entries.map((o,u)=>({...o,metadata:r[u]})),e.context)).map(o=>o.metadata);const a=J1.ActorRdfJoin.getRequestInitialTimes(r),s=J1.ActorRdfJoin.getRequestItemTimes(r);return{iterations:r[0].cardinality.value*r[1].cardinality.value*r.slice(2).reduce((o,u)=>o*u.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:a[0]+r[0].cardinality.value*s[0]+a[1]+r[1].cardinality.value*s[1]+r.slice(2).reduce((o,u,c)=>o+a.slice(2)[c]+u.cardinality.value*s.slice(2)[c],0)}}}U3.ActorRdfJoinMultiSmallest=q3;q3.FACTORY=new mme.Factory;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(U3,t)})(NB);var jB={},V3={};Object.defineProperty(V3,"__esModule",{value:!0});V3.ActorQueryOperationQuadpattern=void 0;const gme=Hn,J6=ft,_me=Ht,vme=yt,wme=sr,Nc=hn,Sme=Tt,Tme=new gme.BindingsFactory,lE=new vme.DataFactory,Eme=new Sme.Factory;class Ds extends J6.ActorQueryOperationTyped{constructor(e){super(e,"pattern")}static isTermVariable(e){return e.termType==="Variable"}static getVariables(e){return(0,Nc.uniqTerms)((0,Nc.getTermsNested)(e).filter(Ds.isTermVariable))}static getDuplicateElementLinks(e){const r={};let n=!1;if((0,Nc.forEachTermsNested)(e,(s,o)=>{if(s.termType==="Variable"){const u=(0,wme.termToString)(s),c=(r[u]||(r[u]=[])).push(o);n=n||c>1}}),!n)return;const a={};for(const s in r){const o=r[s],u=o.slice(1);u.length>0&&(a[o[0].join("_")]=u)}return a}static validateMetadata(e){for(const r of["cardinality","canContainUndefs"])if(!(r in e))throw new Error(`Invalid metadata: missing ${r} in ${JSON.stringify(e)}`);return e}static getMetadata(e,r,n){return()=>new Promise((a,s)=>{e.getProperty("metadata",o=>a(o)),e.on("error",s)}).then(a=>("canContainUndefs"in a||(a.canContainUndefs=!1),Ds.quadsMetadataToBindingsMetadata(Ds.validateMetadata(a),r,n)))}static quadsMetadataToBindingsMetadata(e,r,n){return{...e,order:e.order?Ds.quadsOrderToBindingsOrder(e.order,r):void 0,availableOrders:e.availableOrders?e.availableOrders.map(a=>({cost:a.cost,terms:Ds.quadsOrderToBindingsOrder(a.terms,r)})):void 0,variables:n}}static quadsOrderToBindingsOrder(e,r){const n={};return e.map(a=>{const s=r[a.term];if(s&&!n[s])return n[s]=!0,{term:lE.variable(s),direction:a.direction}}).filter(a=>!!a)}async testOperation(e,r){return!0}async runOperation(e,r){e.context&&(r=r.merge(e.context));let n=e;const a=this.unionDefaultGraph||r.get(_me.KeysQueryOperation.unionDefaultGraph);e.graph.termType==="DefaultGraph"&&a&&(n=Eme.createPattern(e.subject,e.predicate,e.object,lE.variable("__comunica:defaultGraph")));const s=await this.mediatorResolveQuadPattern.mediate({pattern:n,context:r}),o=Ds.getVariables(e),u=(0,Nc.reduceTermsNested)(e,(d,h,f)=>(h.termType==="Variable"&&(d[f.join("_")]=h.value),d),{}),c=Ds.getMetadata(s.data,u,o);return{type:"bindings",bindingsStream:new J6.ClosableTransformIterator(async()=>{let d=s.data;const h=Ds.getDuplicateElementLinks(e);return e.graph.termType==="Variable"&&!a&&(d=d.filter(f=>f.graph.termType!=="DefaultGraph")),h&&(d=d.filter(f=>{for(const p in h){const b=p.split("_"),y=(0,Nc.getValueNestedPath)(f,b);for(const S of h[p])if(!y.equals((0,Nc.getValueNestedPath)(f,S)))return!1}return!0})),d.map(f=>Tme.bindings(Object.keys(u).map(p=>{const b=p.split("_"),y=u[p],S=(0,Nc.getValueNestedPath)(f,b);return[lE.variable(y),S]})))},{autoStart:!1,onClose:()=>s.data.destroy()}),metadata:c}}}V3.ActorQueryOperationQuadpattern=Ds;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(V3,t)})(jB);var CB={},H3={};Object.defineProperty(H3,"__esModule",{value:!0});H3.ActorHttpInruptSolidClientAuthn=void 0;const Ome=ms,Y6=Ht,Ame=et;class Mu extends Ome.ActorHttp{constructor(e){super(e)}async test(e){if(!e.context||!e.context.has(Mu.CONTEXT_KEY_SESSION))throw new Error(`Unable to find Solid authn session in context with key '${Mu.CONTEXT_KEY_SESSION.name}'`);if(e.context.has(Y6.KeysHttp.fetch))throw new Error("Unable to run when a custom fetch function has been configured");if(!e.context.get(Mu.CONTEXT_KEY_SESSION).info.isLoggedIn)throw new Error("The provided Solid authn session is not in a logged in state, make sure to call session.login() first");return!0}async run(e){const r=e.context.get(Mu.CONTEXT_KEY_SESSION);return this.logInfo(e.context,`Handling request to ${typeof e.input=="string"?e.input:e.input.url} as authenticated request for ${r.info.webId}`),this.mediatorHttp.mediate({...e,context:e.context.delete(Mu.CONTEXT_KEY_SESSION).set(Y6.KeysHttp.fetch,r.fetch)})}}H3.ActorHttpInruptSolidClientAuthn=Mu;Mu.CONTEXT_KEY_SESSION=new Ame.ActionContextKey("@comunica/actor-http-inrupt-solid-client-authn:session");(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(H3,t)})(CB);var FB={},k3={},bl={};Object.defineProperty(bl,"__esModule",{value:!0});bl.ActorDereferenceHttpBase=bl.mediaTypesToAcceptString=void 0;const Z6=X_,e8=ms,xme=OR,Rme=Na,Ime=Pl,Pme=/^[^ ;]*/u;function MB(t,e){const r="*/*;q=0.1",n=[],a=Object.entries(t).map(([o,u])=>({mediaType:o,priority:u})).sort((o,u)=>u.priority===o.priority?o.mediaType.localeCompare(u.mediaType):u.priority-o.priority);let s=a.length-1;for(const{mediaType:o,priority:u}of a){const c=o+(u!==1?`;q=${u.toFixed(3).replace(/0*$/u,"")}`:"");if(s+c.length>e){for(;s+r.length>e;){const l=n.pop()||"";s-=l.length+1}n.push(r);break}n.push(c),s+=c.length}return n.length===0?"*/*":n.join(",")}bl.mediaTypesToAcceptString=MB;class Dme extends Z6.ActorDereference{constructor(e){super(e)}async test({url:e}){if(!/^https?:/u.test(e))throw new Error(`Cannot retrieve ${e} because it is not an HTTP(S) URL.`);return!0}async run(e){var l,d;let r=!0;const n=new xme.Headers(e.headers);n.append("Accept",MB(await((l=e.mediaTypes)==null?void 0:l.call(e))??{},this.getMaxAcceptHeaderLength()));let a;const s=Date.now();try{a=await this.mediatorHttp.mediate({context:e.context,init:{headers:n,method:e.method},input:e.url})}catch(h){return this.handleDereferenceErrors(e,h)}const o=(0,Rme.resolve)(a.url,e.url),u=Date.now()-s;if(a.status!==200){r=!1;const h=a.body?await Ime(e8.ActorHttp.toNodeReadable(a.body)):"empty response";if(!e.acceptErrors){const f=new Error(`Could not retrieve ${e.url} (HTTP status ${a.status}):
${h}`);return this.handleDereferenceErrors(e,f,a.headers,u)}}const c=(d=Pme.exec(a.headers.get("content-type")??""))==null?void 0:d[0];return{url:o,data:r?e8.ActorHttp.toNodeReadable(a.body):(0,Z6.emptyReadable)(),exists:r,requestTime:u,headers:a.headers,mediaType:c!=="text/plain"?c:void 0}}}bl.ActorDereferenceHttpBase=Dme;Object.defineProperty(k3,"__esModule",{value:!0});k3.ActorDereferenceHttp=void 0;const Nme=bl;class jme extends Nme.ActorDereferenceHttpBase{getMaxAcceptHeaderLength(){return this.maxAcceptHeaderLengthBrowser}}k3.ActorDereferenceHttp=jme;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(k3,t),r(bl,t)})(FB);var LB={},Q3={},G3={};Object.defineProperty(G3,"__esModule",{value:!0});G3.storeStream=void 0;const Cme=au;function Fme(t){const e=new Cme.Store;return new Promise((r,n)=>e.import(t).on("error",n).once("end",()=>r(e)))}G3.storeStream=Fme;Object.defineProperty(Q3,"__esModule",{value:!0});Q3.ActorExtractLinksSolidTypeIndex=void 0;const Mme=vm,Lme=ag,Y1=Ht,Z1=aR,Bme=G3,t8=sr,r8=Tt;class Hp extends Lme.ActorExtractLinks{constructor(e){super(e),this.queryEngine=new Mme.QueryEngineBase(e.actorInitQuery)}async test(e){if(!e.context.get(Y1.KeysInitQuery.query))throw new Error(`Actor ${this.name} can only work in the context of a query.`);if(!e.context.get(Y1.KeysQueryOperation.operation))throw new Error(`Actor ${this.name} can only work in the context of a query operation.`);return!0}async run(e){const r=[...await this.extractTypeIndexLinks(e.metadata)],n=(await Promise.all(r.map(s=>this.dereferenceTypeIndex(s,e.context)))).reduce((s,o)=>{for(const[u,c]of Object.entries(o))s[u]||(s[u]=[]),s[u].push(...c);return s},{});if(Object.keys(n).length===0)return{links:[]};if(this.onlyMatchingTypes)return{links:await this.getLinksMatchingQuery(n,e.context.get(Y1.KeysInitQuery.query),e.context.get(Y1.KeysQueryOperation.operation))};const a=[];for(const s of Object.values(n))a.push(...s);return{links:a}}extractTypeIndexLinks(e){return new Promise((r,n)=>{const a=new Set;e.on("error",n),e.on("data",s=>{this.typeIndexPredicates.includes(s.predicate.value)&&a.add(s.object.value)}),e.on("end",()=>{r(a)})})}async dereferenceTypeIndex(e,r){const n=await this.mediatorDereferenceRdf.mediate({url:e,context:r}),a=await(0,Bme.storeStream)(n.data),s=await(await this.queryEngine.queryBindings(`
        PREFIX solid: <http://www.w3.org/ns/solid/terms#>
        SELECT ?class ?instance WHERE {
          _:registration a solid:TypeRegistration;
            solid:forClass ?class;
            (solid:instance|solid:instanceContainer) ?instance.
        }`,{sources:[a],[Z1.KeysRdfResolveHypermediaLinks.traverse.name]:!1,[Z1.KeysRdfJoin.skipAdaptiveJoin.name]:!0,lenient:!0})).toArray(),o={};for(const u of s){const c=u.get("class").value;o[c]||(o[c]=[]),o[c].push({url:u.get("instance").value})}return o}async linkPredicateDomains(e,r){if(Object.keys(e).length>0){const n=await Promise.all(Object.keys(e).map(async s=>[s,await this.fetchPredicateDomains(s)])),a=Object.fromEntries(n);for(const[s,o]of Object.entries(e)){const u=a[s];if(u)for(const c of u)r[c]||(r[c]=[]),r[c].push(o)}}}async fetchPredicateDomains(e){const n=await(await this.queryEngine.queryBindings(`
        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
        SELECT * WHERE {
          <${e}> rdfs:domain ?domain.
        }`,{sources:[e],[Z1.KeysRdfResolveHypermediaLinks.traverse.name]:!1,[Z1.KeysRdfJoin.skipAdaptiveJoin.name]:!0,lenient:!0})).toArray(),a=[];for(const s of n)a.push(s.get("domain").value);return a}async getLinksMatchingQuery(e,r,n){const a=new Set,s={},o={};function u(l,d,h){if(a.add((0,t8.termToString)(l)),d.value===Hp.RDF_TYPE&&h.termType==="NamedNode"){const f=h.value;s[f]||(s[f]=[]),s[f].push(l)}d.value!==Hp.RDF_TYPE&&(o[d.value]=l)}r8.Util.recurseOperation(r,{pattern(l){return u(l.subject,l.predicate,l.object),!1},path(l){return r8.Util.recurseOperation(l,{link(d){return u(l.subject,d.iri,l.object),!1},nps(d){for(const h of d.iris)u(l.subject,h,l.object);return!1}}),!1}}),this.inference&&await this.linkPredicateDomains(o,s);const c=[];for(const[l,d]of Object.entries(s)){const h=e[l];h&&d.some(f=>f.equals(n.subject))&&c.push(...h);for(const f of d)a.delete((0,t8.termToString)(f))}return a.size>0?Object.values(e).flat():c}}Q3.ActorExtractLinksSolidTypeIndex=Hp;Hp.RDF_TYPE="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Q3,t)})(LB);var BB={},z3={};Object.defineProperty(z3,"__esModule",{value:!0});z3.ActorHttpProxy=void 0;const $me=ms,dE=Ht;class Ume extends $me.ActorHttp{constructor(e){super(e)}async test(e){const r=e.context.get(dE.KeysHttpProxy.httpProxyHandler);if(!r)throw new Error(`Actor ${this.name} could not find a proxy handler in the context.`);if(!await r.getProxy(e))throw new Error(`Actor ${this.name} could not determine a proxy for the given request.`);return{time:Number.POSITIVE_INFINITY}}async run(e){const r=typeof e.input=="string"?e.input:e.input.url,n=e.context.get(dE.KeysHttpProxy.httpProxyHandler),a=await this.mediatorHttp.mediate({...await n.getProxy(e),context:e.context.delete(dE.KeysHttpProxy.httpProxyHandler)});return Object.defineProperty(a,"url",{configurable:!0,enumerable:!0,get:()=>a.headers.get("x-final-url")??r}),a}}z3.ActorHttpProxy=Ume;var W3={};Object.defineProperty(W3,"__esModule",{value:!0});W3.ProxyHandlerStatic=void 0;class qme{constructor(e){this.prefixUrl=e}async getProxy(e){return{init:e.init,input:this.modifyInput(e.input)}}modifyInput(e){return typeof e=="string"?this.prefixUrl+e:new Request(this.prefixUrl+e.url,e)}}W3.ProxyHandlerStatic=qme;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(z3,t),r(W3,t)})(BB);const Vme=new MC.LoggerVoid,Hme=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^2.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),Gf=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-extract-links/^0.0.0/components/ActorExtractLinks.jsonld#ActorExtractLinks_default_bus"}),_y=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^2.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),Dt=new ft.BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^2.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),IR=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^2.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),va=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^2.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),$B=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^2.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),vy=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^2.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),UB=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference-rdf/^2.0.0/components/ActorDereferenceRdf.jsonld#ActorDereferenceRdf_default_bus"}),qB=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^2.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),zf=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/^2.0.0/components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus"}),Wf=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^2.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),VB=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^2.0.0/components/ActorHttp.jsonld#ActorHttp_fallback_bus"}),PR=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference/^2.0.0/components/ActorDereference.jsonld#ActorDereference_default_bus"}),hc=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/^2.0.0/components/ActorRdfParse.jsonld#ActorRdfParse_default_bus"}),HB=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^2.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),kB=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^2.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),DR=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/^2.0.0/components/ActorRdfMetadata.jsonld#ActorRdfMetadata_default_bus"}),wy=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^2.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),lo=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/^2.0.0/components/ActorRdfMetadataExtract.jsonld#ActorRdfMetadataExtract_default_bus"}),X3=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/^2.0.0/components/ActorRdfParseHtml.jsonld#ActorRdfParseHtml_default_bus"}),K3=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia/^2.0.0/components/ActorRdfResolveHypermedia.jsonld#ActorRdfResolveHypermedia_default_bus"}),NR=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/^2.0.0/components/ActorRdfResolveHypermediaLinks.jsonld#ActorRdfResolveHypermediaLinks_default_bus"}),QB=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links-queue/^2.0.0/components/ActorRdfResolveHypermediaLinksQueue.jsonld#ActorRdfResolveHypermediaLinksQueue_default_bus"}),J3=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-hypermedia/^2.0.0/components/ActorRdfUpdateHypermedia.jsonld#ActorRdfUpdateHypermedia_default_bus"}),jR=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^2.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),Fa=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^2.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),Y3=new et.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-quad-pattern/^2.0.0/components/ActorRdfResolveQuadPattern.jsonld#ActorRdfResolveQuadPattern_default_bus"});new ng.ActorExtractLinksPredicates({checkSubject:!1,predicateRegexes:["http://www.w3.org/2000/01/rdf-schema#seeAlso","http://www.w3.org/2002/07/owl##sameAs","http://xmlns.com/foaf/0.1/isPrimaryTopicOf"],name:"urn:comunica:default:extract-links/actors#predicates-common",bus:Gf});new ng.ActorExtractLinksPredicates({checkSubject:!0,predicateRegexes:["http://www.w3.org/ns/ldp#contains"],name:"urn:comunica:default:extract-links/actors#predicates-ldp",bus:Gf});new ng.ActorExtractLinksPredicates({checkSubject:!0,predicateRegexes:["http://www.w3.org/ns/pim/space#storage"],name:"urn:comunica:default:extract-links/actors#predicates-solid",bus:Gf});new LC.ActorExtractLinksQuadPatternQuery({onlyVariables:!0,name:"urn:comunica:default:extract-links/actors#quad-pattern-query",bus:Gf});const kme=new BC.MediatorCombineArray({fields:["links","linksConditional"],name:"urn:comunica:default:extract-links/mediators#main",bus:Gf}),Qme=new YA.MediatorCombinePipeline({name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:_y});new $C.ActorOptimizeQueryOperationSetSeedSourcesQuadpatternIris({extractSubjects:!0,extractPredicates:!1,extractObjects:!0,extractGraphs:!0,extractVocabIris:!1,name:"urn:comunica:default:optimize-query-operation/actors#set-seed-sources-quadpattern-iris",bus:_y});new UC.ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:_y});new qC.ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:_y});new VC.ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:_y});const jt=new jf.MediatorNumber({field:"httpRequests",type:"min",ignoreErrors:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:Dt});new HC.ActorQueryOperationValues({name:"urn:comunica:default:query-operation/actors#values",bus:Dt});const Gme=new Ci.MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:IR});new kC.ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:IR});new QC.ActorQueryParseGraphql({name:"urn:comunica:default:query-parse/actors#graphql",bus:IR});const zme=new Ci.MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:va}),Wme=new uc.MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:va}),Xme=new uc.MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:va});new p9.ActorQueryResultSerializeJson({mediaTypePriorities:{"application/json":1},mediaTypeFormats:{"application/json":"https://comunica.linkeddatafragments.org/#results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#json",bus:va});new uF.ActorQueryResultSerializeSimple({mediaTypePriorities:{simple:.9},mediaTypeFormats:{simple:"https://comunica.linkeddatafragments.org/#results_simple"},name:"urn:comunica:default:query-result-serialize/actors#simple",bus:va});new cF.ActorQueryResultSerializeSparqlCsv({mediaTypePriorities:{"text/csv":.75},mediaTypeFormats:{"text/csv":"http://www.w3.org/ns/formats/SPARQL_Results_CSV"},name:"urn:comunica:default:query-result-serialize/actors#csv",bus:va});new lF.ActorQueryResultSerializeSparqlTsv({mediaTypePriorities:{"text/tab-separated-values":.75},mediaTypeFormats:{"text/tab-separated-values":"http://www.w3.org/ns/formats/SPARQL_Results_TSV"},name:"urn:comunica:default:query-result-serialize/actors#sparql-tsv",bus:va});new bF.ActorQueryResultSerializeSparqlXml({mediaTypePriorities:{"application/sparql-results+xml":.8},mediaTypeFormats:{"application/sparql-results+xml":"http://www.w3.org/ns/formats/SPARQL_Results_XML"},name:"urn:comunica:default:query-result-serialize/actors#sparql-xml",bus:va});new mF.ActorQueryResultSerializeTable({columnWidth:50,mediaTypePriorities:{table:.6},mediaTypeFormats:{table:"https://comunica.linkeddatafragments.org/#results_table"},name:"urn:comunica:default:query-result-serialize/actors#table",bus:va});new _F.ActorQueryResultSerializeTree({mediaTypePriorities:{tree:.5},mediaTypeFormats:{tree:"https://comunica.linkeddatafragments.org/#results_tree"},name:"urn:comunica:default:query-result-serialize/actors#tree",bus:va});const Kme=new YA.MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:$B});new NF.ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:$B});const Jme=new CF.MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:vy}),Yme=new C0.ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^2.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:vy}),Zme=new C0.ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^2.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:vy}),ege=new C0.ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-update-quads-hypermedia/^2.0.0/components/ActorRdfUpdateQuadsHypermedia.jsonld#IActorRdfUpdateQuadsHypermediaArgs_default_invalidator",bus:vy}),tge=new C0.ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-resolve-quad-pattern-hypermedia/^2.0.0/components/ActorRdfResolveQuadPatternHypermedia.jsonld#IActorRdfResolveQuadPatternHypermediaArgs_default_invalidator",bus:vy}),Z3=new Ci.MediatorRace({name:"urn:comunica:default:dereference-rdf/mediators#main",bus:UB});new FF.ActorHashBindingsSha1({name:"urn:comunica:default:hash-bindings/actors#sha1",bus:qB});const CR=new Ci.MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:qB}),GB=new Ci.MediatorRace({name:"urn:comunica:default:rdf-serialize/mediators#serialize",bus:zf}),zB=new uc.MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-serialize/mediators#mediaType",bus:zf}),rge=new uc.MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:rdf-serialize/mediators#mediaTypeFormat",bus:zf});new LF.ActorRdfSerializeN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},name:"urn:comunica:default:rdf-serialize/actors#n3",bus:zf});new kF.ActorRdfSerializeJsonLd({jsonStringifyIndentSpaces:2,mediaTypePriorities:{"application/ld+json":1},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-serialize/actors#jsonld",bus:zf});new GF.ActorRdfSerializeShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-serialize/actors#shaclc",bus:zf});const nge=new jf.MediatorNumber({field:"time",type:"min",ignoreErrors:!0,name:"urn:comunica:default:http/mediators#no-fallback",bus:Wf}),WB=new KF.ActorHttpFetch({agentOptions:{keepAlive:!0,maxSockets:5},name:"urn:comunica:default:http/actors#fetch",bus:Wf}),ou=new jf.MediatorNumber({field:"time",type:"min",ignoreErrors:!0,name:"urn:comunica:default:http/mediators#main",bus:VB}),ige=new ZF.ActorDereferenceFallback({name:"urn:comunica:default:dereference/actors#fallback",bus:PR}),age=new Ci.MediatorRace({name:"urn:comunica:default:dereference/mediators#main",bus:PR}),XB=new Ci.MediatorRace({name:"urn:comunica:default:rdf-parse/mediators#parse",bus:hc}),KB=new uc.MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-parse/mediators#mediaType",bus:hc});new nM.ActorRdfParseN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},priorityScale:1,name:"urn:comunica:default:rdf-parse/actors#n3",bus:hc});new iM.ActorRdfParseRdfXml({mediaTypePriorities:{"application/rdf+xml":1},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:.5,name:"urn:comunica:default:rdf-parse/actors#rdfxml",bus:hc});new bM.ActorRdfParseXmlRdfa({mediaTypePriorities:{"application/xml":1,"image/svg+xml":1,"text/xml":1},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:.3,name:"urn:comunica:default:rdf-parse/actors#xmlrdfa",bus:hc});new zM.ActorRdfParseShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-parse/actors#shaclc",bus:hc});new KM.ActorRdfJoinEntriesSortTraversalZeroKnowledge({name:"urn:comunica:default:rdf-join-entries-sort/actors#traversal-zero-knowledge",bus:HB});const JB=new Ci.MediatorRace({name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:HB});new ZM.ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:kB});const ws=new jf.MediatorNumber({field:"accuracy",type:"max",ignoreErrors:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:kB});new t7.ActorRdfMetadataPrimaryTopic({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:"urn:comunica:default:rdf-metadata/actors#primary-topic",bus:DR});new r7.ActorRdfMetadataAll({name:"urn:comunica:default:rdf-metadata/actors#all",bus:DR});const FR=new Ci.MediatorRace({name:"urn:comunica:default:rdf-metadata/mediators#main",bus:DR});new n7.ActorRdfMetadataAccumulateCanContainUndefs({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cancontainundefs",bus:wy});new i7.ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:wy});new a7.ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:wy});new s7.ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:wy});const YB=new uc.MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:wy});new o7.ActorRdfMetadataExtractHydraControls({name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-controls",bus:lo});new c7.ActorRdfMetadataExtractHydraCount({predicates:["http://www.w3.org/ns/hydra/core#totalItems","http://rdfs.org/ns/void#triples"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-count",bus:lo});new l7.ActorRdfMetadataExtractHydraPagesize({predicates:["http://www.w3.org/ns/hydra/core#itemsPerPage"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-pagesize",bus:lo});new d7.ActorRdfMetadataExtractRequestTime({name:"urn:comunica:default:rdf-metadata-extract/actors#request-time",bus:lo});new f7.ActorRdfMetadataExtractAllowHttpMethods({name:"urn:comunica:default:rdf-metadata-extract/actors#allow-http-methods",bus:lo});new h7.ActorRdfMetadataExtractPutAccepted({name:"urn:comunica:default:rdf-metadata-extract/actors#put-accepted",bus:lo});new p7.ActorRdfMetadataExtractPatchSparqlUpdate({name:"urn:comunica:default:rdf-metadata-extract/actors#patch-sparql-update",bus:lo});new y7.ActorRdfMetadataExtractSparqlService({inferHttpsEndpoint:!0,name:"urn:comunica:default:rdf-metadata-extract/actors#sparql-service",bus:lo});const MR=new uc.MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-extract/mediators#main",bus:lo});new b7.ActorRdfParseHtml({busRdfParseHtml:X3,mediaTypePriorities:{"application/xhtml+xml":.9,"text/html":1},mediaTypeFormats:{"application/xhtml+xml":"http://www.w3.org/ns/formats/HTML","text/html":"http://www.w3.org/ns/formats/HTML"},priorityScale:.2,name:"urn:comunica:default:rdf-parse/actors#html",bus:hc});new g7.ActorRdfParseHtmlMicrodata({name:"urn:comunica:default:rdf-parse-html/actors#microdata",bus:X3});new O7.ActorRdfParseHtmlRdfa({name:"urn:comunica:default:rdf-parse-html/actors#rdfa",bus:X3});new A7.ActorRdfResolveHypermediaNone({name:"urn:comunica:default:rdf-resolve-hypermedia/actors#none",bus:K3});const sge=new jf.MediatorNumber({field:"filterFactor",type:"max",ignoreErrors:!0,name:"urn:comunica:default:rdf-resolve-hypermedia/mediators#main",bus:K3});new M7.ActorRdfResolveHypermediaLinksNext({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#next",bus:NR});new L7.ActorRdfResolveHypermediaLinksTraverse({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#traverse",bus:NR});const oge=new Ci.MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links/mediators#main",bus:NR});new B7.ActorRdfResolveHypermediaLinksQueueFifo({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/actors#fifo",bus:QB});const uge=new Ci.MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/mediators#main",bus:QB}),cge=new Ci.MediatorRace({name:"urn:comunica:default:rdf-update-hypermedia/mediators#main",bus:J3});new q7.ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:jR});const Sy=new Ci.MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:jR}),Ty=new Q7.MediatorJoinCoefficientsFixed({cpuWeight:1,memoryWeight:1,timeWeight:10,ioWeight:100,name:"urn:comunica:default:rdf-join/mediators#main",bus:Fa}),ZB=new Ci.MediatorRace({name:"urn:comunica:default:rdf-resolve-quad-pattern/mediators#main",bus:Y3});new nR.ActorRdfResolveQuadPatternRdfJsSource({name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#rdfjs-source",bus:Y3});new G7.ActorRdfMetadataExtractTraverse({mediatorExtractLinks:kme,name:"urn:comunica:default:rdf-metadata-extract/actors#traverse",bus:lo});new z7.ActorQueryOperationAsk({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#ask",bus:Dt});new W7.ActorQueryOperationBgpJoin({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#bgp",bus:Dt});new X7.ActorQueryOperationDescribeSubject({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#describe",bus:Dt});new oR.ActorQueryOperationConstruct({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#construct",bus:Dt});new K7.ActorQueryOperationExtend({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#extend",bus:Dt});new EL.ActorQueryOperationFilterSparqlee({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#filter",bus:Dt});new OL.ActorQueryOperationFromQuad({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#from",bus:Dt});new AL.ActorQueryOperationNop({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#nop",bus:Dt});new xL.ActorQueryOperationOrderBySparqlee({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#orderby",bus:Dt});new RL.ActorQueryOperationProject({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#project",bus:Dt});new IL.ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#service",bus:Dt});new PL.ActorQueryOperationSlice({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#slice",bus:Dt});new y2.ActorQueryOperationUnion({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#union",bus:Dt});new DL.ActorQueryOperationPathAlt({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#path-alt",bus:Dt});new NL.ActorQueryOperationPathInv({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#path-inv",bus:Dt});new jL.ActorQueryOperationPathLink({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#path-link",bus:Dt});new CL.ActorQueryOperationPathNps({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#path-nps",bus:Dt});new FL.ActorQueryOperationPathOneOrMore({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:Dt});new ML.ActorQueryOperationPathZeroOrMore({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:Dt});new LL.ActorQueryOperationPathZeroOrOne({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:Dt});new BL.ActorQueryOperationAddRewrite({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#update-add",bus:Dt});new $L.ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#update-composite",bus:Dt});new UL.ActorQueryOperationCopyRewrite({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#update-copy",bus:Dt});new qL.ActorQueryOperationMoveRewrite({mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#update-move",bus:Dt});const e$=new vm.ActorInitQuery({mediatorOptimizeQueryOperation:Qme,mediatorQueryOperation:jt,mediatorQueryParse:Gme,mediatorQueryResultSerialize:zme,mediatorQueryResultSerializeMediaTypeCombiner:Wme,mediatorQueryResultSerializeMediaTypeFormatCombiner:Xme,mediatorContextPreprocess:Kme,mediatorHttpInvalidate:Jme,logger:Vme,defaultQueryInputFormat:"sparql",allowNoSources:!0,contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelay:"@comunica/bus-http:http-retry-delay",httpRetryOnServerError:"@comunica/bus-http:http-retry-on-server-error",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",source:"@comunica/bus-rdf-resolve-quad-pattern:source",sources:"@comunica/bus-rdf-resolve-quad-pattern:sources",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:init/actors#query",bus:Hme}),lge=new wR.ActionObserverHttp({httpInvalidator:Yme,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^2.0.0/components/ActorQueryResultSerializeSparqlJson.jsonld#ActorQueryResultSerializeSparqlJson_default_observer",bus:Wf}),dge=new SR.ActionObserverHttp({httpInvalidator:Zme,name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^2.0.0/components/ActorQueryResultSerializeStats.jsonld#ActorQueryResultSerializeStats_default_observer",bus:Wf});new VL.ActorQueryOperationDistinctHash({mediatorHashBindings:CR,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#distinct",bus:Dt});new HL.ActorQueryOperationGroup({mediatorHashBindings:CR,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#group",bus:Dt});new kL.ActorQueryOperationReducedHash({mediatorHashBindings:CR,cacheSize:100,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#reduced",bus:Dt});new QL.ActorQueryResultSerializeRdf({mediatorRdfSerialize:GB,mediatorMediaTypeCombiner:zB,mediatorMediaTypeFormatCombiner:rge,name:"urn:comunica:default:query-result-serialize/actors#rdf",bus:va});new GL.ActorHttpWayback({mediatorHttp:nge,name:"urn:comunica:default:http/actors#wayback",bus:VB});new zL.ActorRdfParseJsonLd({mediatorHttp:ou,mediaTypePriorities:{"application/json":.5,"application/ld+json":1},mediaTypeFormats:{"application/json":"http://www.w3.org/ns/formats/JSON-LD","application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-parse/actors#jsonld",bus:hc});new ZL.ActorRdfResolveHypermediaSparql({mediatorHttp:ou,checkUrlSuffix:!0,forceHttpGet:!1,cacheSize:1024,name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#sparql",bus:K3});new tB.ActorRdfUpdateHypermediaPatchSparqlUpdate({mediatorHttp:ou,name:"urn:comunica:default:rdf-update-hypermedia/actors#patch-sparql-update",bus:J3});new rB.ActorRdfUpdateHypermediaPutLdp({mediatorHttp:ou,mediatorRdfSerializeMediatypes:zB,mediatorRdfSerialize:GB,name:"urn:comunica:default:rdf-update-hypermedia/actors#put-ldp",bus:J3});new nB.ActorRdfUpdateHypermediaSparql({mediatorHttp:ou,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,name:"urn:comunica:default:rdf-update-hypermedia/actors#sparql",bus:J3});new iB.ActorQueryOperationSparqlEndpoint({mediatorHttp:ou,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,forceHttpGet:!1,name:"urn:comunica:default:query-operation/actors#sparql-endpoint",bus:Dt});new aB.ActorDereferenceRdfParse({mediatorDereference:age,mediatorParse:XB,mediatorParseMediatypes:KB,mediaMappings:{htm:"text/html",html:"text/html",json:"application/json",jsonld:"application/ld+json",n3:"text/n3",nq:"application/n-quads",nquads:"application/n-quads",nt:"application/n-triples",ntriples:"application/n-triples",owl:"application/rdf+xml",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",shaclc:"text/shaclc",shaclce:"text/shaclc-ext",shc:"text/shaclc",shce:"text/shaclc-ext",svg:"image/svg+xml",svgz:"image/svg+xml",trig:"application/trig",ttl:"text/turtle",turtle:"text/turtle",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"application/xml"},name:"urn:comunica:default:dereference-rdf/actors#parse",bus:UB});new oB.ActorRdfParseHtmlScript({mediatorRdfParseMediatypes:KB,mediatorRdfParseHandle:XB,name:"urn:comunica:default:rdf-parse-html/actors#script",bus:X3});new uB.ActorRdfJoinNone({mediatorJoinSelectivity:ws,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:Fa});new cB.ActorRdfJoinSingle({mediatorJoinSelectivity:ws,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:Fa});new AR.ActorRdfJoinMultiBind({bindOrder:"breadth-first",selectivityModifier:1e-4,mediatorJoinEntriesSort:JB,mediatorQueryOperation:jt,mediatorJoinSelectivity:ws,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:Fa});new lB.ActorRdfJoinHash({mediatorJoinSelectivity:ws,name:"urn:comunica:default:rdf-join/actors#inner-hash",bus:Fa});new fB.ActorRdfJoinSymmetricHash({mediatorJoinSelectivity:ws,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:Fa});new hB.ActorRdfJoinNestedLoop({mediatorJoinSelectivity:ws,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:Fa});new pB.ActorRdfJoinMinusHash({mediatorJoinSelectivity:ws,name:"urn:comunica:default:rdf-join/actors#minus-hash",bus:Fa});new yB.ActorRdfJoinMinusHashUndef({mediatorJoinSelectivity:ws,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:Fa});new bB.ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-4,mediatorQueryOperation:jt,mediatorJoinSelectivity:ws,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:Fa});new mB.ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:ws,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:Fa});new gB.ActorRdfResolveHypermediaQpf({mediatorMetadata:FR,mediatorMetadataExtract:MR,mediatorDereferenceRdf:Z3,subjectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject",predicateUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate",objectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",graphUri:"http://www.w3.org/ns/sparql-service-description#graph",name:"urn:comunica:default:rdf-resolve-hypermedia/actors#qpf",bus:K3});new vB.ActorRdfResolveQuadPatternHypermedia({cacheSize:2048,httpInvalidator:tge,maxIterators:64,aggregateStore:!0,mediatorDereferenceRdf:Z3,mediatorMetadata:FR,mediatorMetadataExtract:MR,mediatorMetadataAccumulate:YB,mediatorRdfResolveHypermedia:sge,mediatorRdfResolveHypermediaLinks:oge,mediatorRdfResolveHypermediaLinksQueue:uge,name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#hypermedia",bus:Y3});new SB.ActorRdfUpdateQuadsHypermedia({cacheSize:100,httpInvalidator:ege,mediatorDereferenceRdf:Z3,mediatorMetadata:FR,mediatorMetadataExtract:MR,mediatorRdfUpdateHypermedia:cge,name:"urn:comunica:default:rdf-update-quads/actors#hypermedia",bus:jR});new TB.ActorQueryOperationClear({mediatorUpdateQuads:Sy,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#update-clear",bus:Dt});new EB.ActorQueryOperationCreate({mediatorUpdateQuads:Sy,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#update-create",bus:Dt});new OB.ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:Sy,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:Dt});new AB.ActorQueryOperationDrop({mediatorUpdateQuads:Sy,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#update-drop",bus:Dt});new xB.ActorQueryOperationLoad({mediatorUpdateQuads:Sy,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#update-load",bus:Dt});new RB.ActorQueryOperationJoin({mediatorJoin:Ty,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#join",bus:Dt});new IB.ActorQueryOperationLeftJoin({mediatorJoin:Ty,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:Dt});new PB.ActorQueryOperationMinus({mediatorJoin:Ty,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#minus",bus:Dt});new DB.ActorQueryOperationPathSeq({mediatorJoin:Ty,mediatorQueryOperation:jt,name:"urn:comunica:default:query-operation/actors#path-seq",bus:Dt});new NB.ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:JB,mediatorJoin:Ty,mediatorJoinSelectivity:ws,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:Fa});new jB.ActorQueryOperationQuadpattern({mediatorResolveQuadPattern:ZB,unionDefaultGraph:!1,name:"urn:comunica:default:query-operation/actors#quadpattern",bus:Dt});new sR.ActorRdfResolveQuadPatternFederated({mediatorResolveQuadPattern:ZB,mediatorRdfMetadataAccumulate:YB,skipEmptyPatterns:!1,name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#federated",bus:Y3});const fge=new CB.ActorHttpInruptSolidClientAuthn({mediatorHttp:ou,name:"urn:comunica:default:http/actors#inrupt-solid-client-authn",bus:Wf,beforeActors:[WB]});new FB.ActorDereferenceHttp({mediatorHttp:ou,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,name:"urn:comunica:default:dereference/actors#http",bus:PR,beforeActors:[ige]});new LB.ActorExtractLinksSolidTypeIndex({typeIndexPredicates:["http://www.w3.org/ns/solid/terms#publicTypeIndex","http://www.w3.org/ns/solid/terms#privateTypeIndex"],onlyMatchingTypes:!0,inference:!0,actorInitQuery:e$,mediatorDereferenceRdf:Z3,name:"urn:comunica:default:extract-links/actors#solid-type-index",bus:Gf});new wR.ActorQueryResultSerializeSparqlJson({emitMetadata:!0,httpObserver:lge,mediaTypePriorities:{"application/sparql-results+json":.8},mediaTypeFormats:{"application/sparql-results+json":"http://www.w3.org/ns/formats/SPARQL_Results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#sparql-json",bus:va});new SR.ActorQueryResultSerializeStats({httpObserver:dge,mediaTypePriorities:{stats:.5},mediaTypeFormats:{stats:"https://comunica.linkeddatafragments.org/#results_stats"},name:"urn:comunica:default:query-result-serialize/actors#stats",bus:va});new BB.ActorHttpProxy({mediatorHttp:ou,name:"urn:comunica:default:http/actors#proxy",bus:Wf,beforeActors:[WB,fge]});var hge=e$;Object.defineProperty(_m,"__esModule",{value:!0});_m.QueryEngine=void 0;const pge=vm,yge=hge;class bge extends pge.QueryEngineBase{constructor(e=yge){super(e)}}_m.QueryEngine=bge;(function(t){var e=g&&g.__createBinding||(Object.create?function(n,a,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,u)}:function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]}),r=g&&g.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(_m,t)})(E5);var ls=globalThis&&globalThis.__awaiter||function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(d){try{l(n.next(d))}catch(h){o(h)}}function c(d){try{l(n.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):a(d.value).then(u,c)}l((n=n.apply(t,e||[])).next())})};const nc=new E5.QueryEngine;function mge(t){return ls(this,void 0,void 0,function*(){const e=yield gge(t),r=yield _ge(e);if(r==="LDESinLDP"){console.log("LDES in LDP");const n=yield vge(e);return console.log(n),{pages:n.transform({map:a=>({uri:a.node,sort:a.value})}),url:e,type:"LDESinLDP"}}else{if(r==="LDES")return console.log("LDES"),{pages:(yield wge(e)).transform({map:a=>({uri:a.view,sort:a.view})}),url:e,type:"LDES"};throw new Error("Only LDESinLDP and LDES are supported at the moment")}})}function gge(t){return ls(this,void 0,void 0,function*(){var e,r;const a=(e=(yield fetch(t,{method:"HEAD"})).headers.get("Link"))===null||e===void 0?void 0:e.split(",").map(o=>{const u=o.trim().split(";"),c=u[0].slice(1,-1),l=u[1].trim().split("=")[1].slice(1,-1);return{url:c,rel:l}}),s=(r=a==null?void 0:a.find(o=>o.rel==="https://w3id.org/ldes#EventStream"))===null||r===void 0?void 0:r.url;if(!s)throw new Error("No LDES found");return console.log("Found LDES: "+s),s})}function _ge(t){return ls(this,void 0,void 0,function*(){var e,r;if(!t)return!1;const n=`
    PREFIX ldes: <https://w3id.org/ldes#>
    PREFIX tree: <https://w3id.org/tree#>
    
    SELECT * WHERE {
      {
        SELECT ("LDES" AS ?type) WHERE {
          <${t}> a ldes:EventStream;
                       tree:view ?view.
          <${t}> tree:member ?member.
        }
      }
      UNION
      {
        SELECT ("LDESinLDP" AS ?type) WHERE {
          <${t}> a ldes:EventStream;
                       tree:view ?view.
          ?view a tree:Node;
                tree:viewDescription ?viewDescription.
          ?viewDescription a tree:ViewDescription;
                ldes:managedBy ?ldesInLdp.
          ?ldesInLdp a ldes:LDESinLDPClient.
        }
      }
    } LIMIT 1`;return(r=(e=(yield(yield nc.queryBindings(n,{sources:[t],lenient:!0})).toArray())[0])===null||e===void 0?void 0:e.get("type"))===null||r===void 0?void 0:r.value})}function vge(t){return ls(this,void 0,void 0,function*(){const e=`
    PREFIX ldes: <https://w3id.org/ldes#>
    PREFIX tree: <https://w3id.org/tree#>
    
    SELECT ?relation ?relationType ?node ?value ?path
    WHERE {
        <${t}> a ldes:EventStream;
                   tree:view ?view.
        ?view a tree:Node;
              tree:relation ?relation.
        ?relation a ?relationType;
                  tree:node ?node.
        OPTIONAL { ?relation tree:value ?value. }
        OPTIONAL { ?relation tree:path ?path. }
    }`;return(yield nc.queryBindings(e,{sources:[t],lenient:!0})).transform({map:n=>{var a,s;return{relation:n.get("relation").value,relationType:n.get("relationType").value,node:n.get("node").value,value:(a=n.get("value"))===null||a===void 0?void 0:a.value,path:(s=n.get("path"))===null||s===void 0?void 0:s.value}}})})}function wge(t){return ls(this,void 0,void 0,function*(){const e=`
    PREFIX ldes: <https://w3id.org/ldes#>
    PREFIX tree: <https://w3id.org/tree#>
    
    SELECT ?view
    WHERE {
        <${t}> a ldes:EventStream;
                     tree:view ?view.
    }`;return(yield nc.queryBindings(e,{sources:[t],lenient:!0,"@comunica/actor-rdf-resolve-hypermedia-links-traverse:traverse":!1})).transform({map:n=>({view:n.get("view").value})})})}function Sge(t,e,r){return ls(this,void 0,void 0,function*(){if(r==="LDESinLDP"){const n=`
    PREFIX ldes: <https://w3id.org/ldes#>
    PREFIX tree: <https://w3id.org/tree#>
    PREFIX ldp: <http://www.w3.org/ns/ldp#>
    PREFIX dc: <http://purl.org/dc/terms/>
    
    SELECT ?member ?dateTime
    WHERE {
      <${t}> a ldes:EventStream;
                   tree:view ?view.
      ?view a tree:Node;
            tree:relation ?relation.
      ?relation a ?relationType;
                tree:node ?node.
      ?node a ldp:BasicContainer;
            ldp:contains ?member.
      ?member a ldp:Resource;
              dc:modified ?dateTime.
      FILTER (?node = <${e}>).
    }`,a=(o,u)=>fetch(o,Object.assign(Object.assign({},u),{headers:Object.assign(Object.assign({},u==null?void 0:u.headers),{"Cache-Control":"no-cache"})}));return(yield nc.queryBindings(n,{sources:[t],fetch:a,lenient:!1})).transform({map:o=>ls(this,void 0,void 0,function*(){return{content:yield Tge(o.get("member").value),metadata:{dateTime:o.get("dateTime").value}}})})}else if(r==="LDES"){const n=`
    PREFIX ldes: <https://w3id.org/ldes#>
    PREFIX tree: <https://w3id.org/tree#>
    PREFIX as: <https://www.w3.org/ns/activitystreams#>
    
    SELECT ?member ?actorUrl ?actorName ?object ?targetUrl ?targetName ?context
    WHERE {
      <${t}> a ldes:EventStream;
                    tree:view <${e}>;
                    tree:member ?member.
      ?member as:actor ?actorUrl;
        as:object ?object.
      OPTIONAL { ?id as:target ?targetUrl. }
      OPTIONAL { ?actorUrl as:name ?actorName. }
      OPTIONAL { ?targetUrl as:name ?targetName. }
      OPTIONAL { ?id as:context ?context. }
    }`;return(yield nc.queryBindings(n,{sources:[t],lenient:!0})).transform({map:s=>ls(this,void 0,void 0,function*(){var o,u,c,l;const d=yield nm(s.get("object").value,e);let h={};return d.includes("https://www.w3.org/ns/activitystreams#Relationship")&&(h=yield t$(s.get("object").value,e)),{content:{id:s.get("member").value,actorUrl:s.get("actorUrl").value,actorName:(o=s.get("actorName"))===null||o===void 0?void 0:o.value,object:s.get("object").value,targetUrl:(u=s.get("targetUrl"))===null||u===void 0?void 0:u.value,targetName:(c=s.get("targetName"))===null||c===void 0?void 0:c.value,context:(l=s.get("context"))===null||l===void 0?void 0:l.value,types:yield nm(s.get("member").value,e),objectTypes:d,objectRelationship:h},metadata:{}}})})}else throw new Error("Only LDESinLDP and LDES are supported at the moment")})}function Tge(t){return ls(this,void 0,void 0,function*(){const e=`
  PREFIX as: <https://www.w3.org/ns/activitystreams#>
  
  SELECT ?id ?actorUrl ?actorName ?object ?targetUrl ?targetName ?context
  WHERE {
    ?id as:actor ?actorUrl;
        as:object ?object.
    OPTIONAL { ?id as:target ?targetUrl. }
    OPTIONAL { ?actorUrl as:name ?actorName. }
    OPTIONAL { ?targetUrl as:name ?targetName. }
    OPTIONAL { ?id as:context ?context. }
  } LIMIT 1`,r=yield(yield nc.queryBindings(e,{sources:[t],lenient:!0,"@comunica/actor-rdf-resolve-hypermedia-links-traverse:traverse":!1})).toArray();r.length!==1&&console.warn(`Found ${r.length} results for content, expected 1.`);const n=r.map(a=>{var s,o,u,c;return{id:a.get("id").value,actorUrl:a.get("actorUrl").value,actorName:(s=a.get("actorName"))===null||s===void 0?void 0:s.value,object:a.get("object").value,targetUrl:(o=a.get("targetUrl"))===null||o===void 0?void 0:o.value,targetName:(u=a.get("targetName"))===null||u===void 0?void 0:u.value,context:(c=a.get("context"))===null||c===void 0?void 0:c.value,types:[],objectTypes:[],objectRelationship:{}}})[0];return n.types=yield nm(n.id,t),n.objectTypes=yield nm(n.object,t),n.objectTypes.includes("https://www.w3.org/ns/activitystreams#Relationship")&&(n.objectRelationship=yield t$(n.object,t)),n})}function nm(t,e){return ls(this,void 0,void 0,function*(){const r=`    
    SELECT ?type
    WHERE {
      <${t}> a ?type.
    }`;return(yield(yield nc.queryBindings(r,{sources:[e],lenient:!0,"@comunica/actor-rdf-resolve-hypermedia-links-traverse:traverse":!1})).toArray()).map(a=>a.get("type").value)})}function t$(t,e){return ls(this,void 0,void 0,function*(){const r=`
    PREFIX as: <https://www.w3.org/ns/activitystreams#>
    
    SELECT ?subject ?relationship ?object
    WHERE {
        <${t}> as:subject ?subject;
                 as:relationship ?relationship;
                 as:object ?object.
    } LIMIT 1`;return(yield(yield nc.queryBindings(r,{sources:[e],lenient:!0,"@comunica/actor-rdf-resolve-hypermedia-links-traverse:traverse":!1})).toArray()).map(a=>({subject:a.get("subject").value,relationship:a.get("relationship").value,object:a.get("object").value}))[0]||{}})}const Ege=ji({name:"PagesPagination",components:{MDBCardText:S5,MDBCardBody:w5,MDBCard:v5,MDBPageItem:DV,MDBPagination:AV},props:["pages","loadPage"]}),r$=(t,e)=>{const r=t.__vccOpts||t;for(const[n,a]of e)r[n]=a;return r};function Oge(t,e,r,n,a,s){var h;const o=ia("MDBPageItem"),u=ia("MDBPagination"),c=ia("MDBCardText"),l=ia("MDBCardBody"),d=ia("MDBCard");return(h=t.pages)!=null&&h.length?(mt(),si(d,{key:0},{default:ar(()=>[Qt(l,{class:"w-100"},{default:ar(()=>[Qt(c,null,{default:ar(()=>[Lt("nav",null,[Qt(u,{style:{"margin-bottom":"0"}},{default:ar(()=>[(mt(!0),er(ri,null,wE(t.pages,(f,p)=>(mt(),si(o,{key:p,active:f.active,onClick:b=>t.loadPage(f)},{default:ar(()=>[$c(Sr(f.uri),1)]),_:2},1032,["active","onClick"]))),128))]),_:1})])]),_:1})]),_:1})]),_:1})):en("",!0)}const Age=r$(Ege,[["render",Oge]]),xge={name:"ScholarlyBrowser",components:{PagesPagination:Age,MDBContainer:jV,MDBCard:v5,MDBCardBody:w5,MDBCardText:S5,MDBInput:WV,MDBCardFooter:hV,MDBCardTitle:lV},data(){return{url:"",members:[],pages:[],loading:!1,noEventLog:!1,artifact:void 0}},created(){this.$watch("$route.query.url",()=>{this.url=this.$route.query.url||"",this.urlUpdated()})},methods:{async urlUpdated(){if(this.noEventLog=!1,this.loading=!1,this.artifact=void 0,this.pages=[],this.members=[],this.$router.push({query:{url:this.url}}),!this.url)return;this.loading=!0;try{this.artifact=await mge(this.url)}catch{this.noEventLog=!0,this.loading=!1;return}let t=!0;this.artifact.pages.on("data",async e=>{e.active=!1,this.pages.push(e),t&&(t=!1,await this.loadPage(e))})},async getMainTypes(t){return await Promise.all(t.filter(e=>e.startsWith("https://www.w3.org/ns/activitystreams#")).map(async e=>await this.getPrefixedProperty(e)))},async getSecondaryTypes(t){return await Promise.all(t.filter(e=>!e.startsWith("https://www.w3.org/ns/activitystreams#")).map(async e=>await this.getPrefixedProperty(e)))},async getPrefixedProperty(t){const e=await fetch(`https://prefixcc-proxy.smessie.com/?q=${encodeURIComponent(t)}`,{method:"HEAD"});return e.url.includes(`/?q=${encodeURIComponent(t)}`)?t:e.url.split("prefixcc-proxy.smessie.com/")[1]},getStyleByMainType(t){switch(t){case"as:Create":return"success";case"as:Remove":return"dark";case"as:Announce":return"warning";case"as:Offer":return"primary";case"as:Accept":return"info";case"as:Reject":return"danger";case"as:Undo":return"secondary";case"as:Update":default:return"light"}},async loadPage(t){this.pages.forEach(r=>r.active=!1),t.active=!0,this.members=[],this.loading=!0;const e=await Sge(this.artifact.url,t.uri,this.artifact.type);e.on("data",async r=>{var n;if(r=await r,r.content.mainTypes=await this.getMainTypes(r.content.types),r.content.secondaryTypes=await this.getSecondaryTypes(r.content.types),r.content.objectTypes=await Promise.all(await((n=r.content)==null?void 0:n.objectTypes.map(async a=>await this.getPrefixedProperty(a))))??[],r.metadata.dateTime){const a=r.metadata.dateTime.split(/\D+/);r.metadata.dateTime=new Date(Date.UTC(a[0],--a[1],a[2],a[3],a[4],a[5],a[6])).toLocaleString()}this.members.push(r),this.loading=!1}),e.on("end",()=>{this.loading=!1})}}},Rge=""+new URL("../forkme_right_gray.png",import.meta.url).href;const fo=t=>(PU("data-v-9ca25a9c"),t=t(),DU(),t),Ige=fo(()=>Lt("a",{href:"https://github.com/MellonScholarlyCommunication/scholarly-browser"},[Lt("img",{loading:"lazy",width:"149",height:"149",src:Rge,class:"attachment-full size-full fork",alt:"Fork me on GitHub","data-recalc-dims":"1"})],-1)),Pge=fo(()=>Lt("h1",null,"Scholarly Browser",-1)),Dge={key:0,class:"status-message"},Nge={key:1,class:"status-message"},jge=fo(()=>Lt("b",null,"No event log found.",-1)),Cge=fo(()=>Lt("b",null,"Actor: ",-1)),Fge=["href"],Mge=fo(()=>Lt("b",null,"Target: ",-1)),Lge=["href"],Bge={key:1},$ge=fo(()=>Lt("b",null,"Context: ",-1)),Uge=["href"],qge={key:1},Vge=fo(()=>Lt("b",null,"Object: ",-1)),Hge=["href"],kge={key:0},Qge=fo(()=>Lt("b",null,"Subject: ",-1)),Gge=["href"],zge=fo(()=>Lt("b",null,"Relationship: ",-1)),Wge=["href"],Xge=fo(()=>Lt("b",null,"Object: ",-1)),Kge=["href"];function Jge(t,e,r,n,a,s){const o=ia("MDBInput"),u=ia("MDBCardText"),c=ia("MDBCardBody"),l=ia("MDBCard"),d=ia("PagesPagination"),h=ia("MDBCardTitle"),f=ia("MDBCardFooter"),p=ia("MDBContainer");return mt(),er(ri,null,[Ige,Qt(p,null,{default:ar(()=>[Pge,Qt(l,null,{default:ar(()=>[Qt(c,{class:"w-100"},{default:ar(()=>[Qt(u,null,{default:ar(()=>[Qt(o,{label:"URL",modelValue:a.url,"onUpdate:modelValue":e[0]||(e[0]=b=>a.url=b),onChange:s.urlUpdated},null,8,["modelValue","onChange"])]),_:1})]),_:1})]),_:1}),Qt(d,{"load-page":s.loadPage,pages:a.pages.sort((b,y)=>b.sort<y.sort?-1:1)},null,8,["load-page","pages"]),Qt(l,null,{default:ar(()=>[Qt(c,{class:"w-100"},{default:ar(()=>[Qt(u,null,{default:ar(()=>[a.loading?(mt(),er("p",Dge,"Loading notifications...")):en("",!0),a.noEventLog?(mt(),er("p",Nge,[jge,$c(" Make sure the provided URL contains a ldes:EventStream Link header.")])):en("",!0),(mt(!0),er(ri,null,wE(a.members,(b,y)=>(mt(),si(l,{key:y,border:s.getStyleByMainType(b.content.mainTypes[0])},{default:ar(()=>[Qt(c,{class:"w-100",style:{"padding-bottom":"0"}},{default:ar(()=>[Qt(h,null,{default:ar(()=>[$c(Sr(b.content.mainTypes.join(", ")),1)]),_:2},1024),Qt(h,{subtitle:"",class:"mb-2 text-muted"},{default:ar(()=>[$c(Sr(b.content.secondaryTypes.join(", ")),1)]),_:2},1024),Qt(u,null,{default:ar(()=>[Lt("p",null,[Cge,Lt("a",{href:b.content.actorUrl},Sr(b.content.actorName??b.content.actorUrl),9,Fge)]),Lt("p",null,[Mge,b.content.targetUrl?(mt(),er("a",{key:0,href:b.content.targetUrl},Sr(b.content.targetName??b.content.targetUrl),9,Lge)):(mt(),er("i",Bge,"<not provided>"))]),Lt("p",null,[$ge,b.content.context?(mt(),er("a",{key:0,href:"?url="+b.content.context},Sr(b.content.context),9,Uge)):(mt(),er("i",qge,"<not provided>"))]),Lt("p",null,[Vge,Lt("a",{href:"?url="+b.content.object},Sr(b.content.object),9,Hge)]),Lt("ul",null,[(mt(!0),er(ri,null,wE(b.content.objectTypes,(S,w)=>(mt(),er("li",{key:w},[$c(Sr(S)+" ",1),S==="as:Relationship"?(mt(),er("ul",kge,[Lt("li",null,[Qge,Lt("a",{href:b.content.objectRelationship.subject},Sr(b.content.objectRelationship.subject),9,Gge)]),Lt("li",null,[zge,Lt("a",{href:b.content.objectRelationship.relationship},Sr(b.content.objectRelationship.relationship),9,Wge)]),Lt("li",null,[Xge,Lt("a",{href:b.content.objectRelationship.object},Sr(b.content.objectRelationship.object),9,Kge)])])):en("",!0)]))),128))])]),_:2},1024)]),_:2},1024),Qt(f,{class:"text-muted"},{default:ar(()=>[$c(Sr(b.metadata.dateTime),1)]),_:2},1024)]),_:2},1032,["border"]))),128))]),_:1})]),_:1})]),_:1}),Qt(d,{"load-page":s.loadPage,pages:a.pages.sort((b,y)=>b.sort<y.sort?-1:1)},null,8,["load-page","pages"])]),_:1})],64)}const Yge=r$(xge,[["render",Jge],["__scopeId","data-v-9ca25a9c"]]),n$=ji({__name:"App",setup(t){return(e,r)=>(mt(),er("main",null,[Qt(Yge)]))}});/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const md=typeof window<"u";function Zge(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const cr=Object.assign;function fE(t,e){const r={};for(const n in e){const a=e[n];r[n]=ps(a)?a.map(t):t(a)}return r}const bp=()=>{},ps=Array.isArray,e_e=/\/$/,t_e=t=>t.replace(e_e,"");function hE(t,e,r="/"){let n,a={},s="",o="";const u=e.indexOf("#");let c=e.indexOf("?");return u<c&&u>=0&&(c=-1),c>-1&&(n=e.slice(0,c),s=e.slice(c+1,u>-1?u:e.length),a=t(s)),u>-1&&(n=n||e.slice(0,u),o=e.slice(u,e.length)),n=a_e(n??e,r),{fullPath:n+(s&&"?")+s+o,path:n,query:a,hash:o}}function r_e(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function n8(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function n_e(t,e,r){const n=e.matched.length-1,a=r.matched.length-1;return n>-1&&n===a&&hf(e.matched[n],r.matched[a])&&i$(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function hf(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function i$(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!i_e(t[r],e[r]))return!1;return!0}function i_e(t,e){return ps(t)?i8(t,e):ps(e)?i8(e,t):t===e}function i8(t,e){return ps(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function a_e(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),a=n[n.length-1];(a===".."||a===".")&&n.push("");let s=r.length-1,o,u;for(o=0;o<n.length;o++)if(u=n[o],u!==".")if(u==="..")s>1&&s--;else break;return r.slice(0,s).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var kp;(function(t){t.pop="pop",t.push="push"})(kp||(kp={}));var mp;(function(t){t.back="back",t.forward="forward",t.unknown=""})(mp||(mp={}));function s_e(t){if(!t)if(md){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),t_e(t)}const o_e=/^[^#]+#/;function u_e(t,e){return t.replace(o_e,"#")+e}function c_e(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const eS=()=>({left:window.pageXOffset,top:window.pageYOffset});function l_e(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),a=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!a)return;e=c_e(a,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function a8(t,e){return(history.state?history.state.position-e:-1)+t}const CO=new Map;function d_e(t,e){CO.set(t,e)}function f_e(t){const e=CO.get(t);return CO.delete(t),e}let h_e=()=>location.protocol+"//"+location.host;function a$(t,e){const{pathname:r,search:n,hash:a}=e,s=t.indexOf("#");if(s>-1){let u=a.includes(t.slice(s))?t.slice(s).length:1,c=a.slice(u);return c[0]!=="/"&&(c="/"+c),n8(c,"")}return n8(r,t)+n+a}function p_e(t,e,r,n){let a=[],s=[],o=null;const u=({state:f})=>{const p=a$(t,location),b=r.value,y=e.value;let S=0;if(f){if(r.value=p,e.value=f,o&&o===b){o=null;return}S=y?f.position-y.position:0}else n(p);a.forEach(w=>{w(r.value,b,{delta:S,type:kp.pop,direction:S?S>0?mp.forward:mp.back:mp.unknown})})};function c(){o=r.value}function l(f){a.push(f);const p=()=>{const b=a.indexOf(f);b>-1&&a.splice(b,1)};return s.push(p),p}function d(){const{history:f}=window;f.state&&f.replaceState(cr({},f.state,{scroll:eS()}),"")}function h(){for(const f of s)f();s=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function s8(t,e,r,n=!1,a=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:a?eS():null}}function y_e(t){const{history:e,location:r}=window,n={value:a$(t,r)},a={value:e.state};a.value||s(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(c,l,d){const h=t.indexOf("#"),f=h>-1?(r.host&&document.querySelector("base")?t:t.slice(h))+c:h_e()+t+c;try{e[d?"replaceState":"pushState"](l,"",f),a.value=l}catch(p){console.error(p),r[d?"replace":"assign"](f)}}function o(c,l){const d=cr({},e.state,s8(a.value.back,c,a.value.forward,!0),l,{position:a.value.position});s(c,d,!0),n.value=c}function u(c,l){const d=cr({},a.value,e.state,{forward:c,scroll:eS()});s(d.current,d,!0);const h=cr({},s8(n.value,c,null),{position:d.position+1},l);s(c,h,!1),n.value=c}return{location:n,state:a,push:u,replace:o}}function b_e(t){t=s_e(t);const e=y_e(t),r=p_e(t,e.state,e.location,e.replace);function n(s,o=!0){o||r.pauseListeners(),history.go(s)}const a=cr({location:"",base:t,go:n,createHref:u_e.bind(null,t)},e,r);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>e.state.value}),a}function m_e(t){return typeof t=="string"||t&&typeof t=="object"}function s$(t){return typeof t=="string"||typeof t=="symbol"}const mu={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},o$=Symbol("");var o8;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(o8||(o8={}));function pf(t,e){return cr(new Error,{type:t,[o$]:!0},e)}function xo(t,e){return t instanceof Error&&o$ in t&&(e==null||!!(t.type&e))}const u8="[^/]+?",g_e={sensitive:!1,strict:!1,start:!0,end:!0},__e=/[.+*?^${}()[\]/\\]/g;function v_e(t,e){const r=cr({},g_e,e),n=[];let a=r.start?"^":"";const s=[];for(const l of t){const d=l.length?[]:[90];r.strict&&!l.length&&(a+="/");for(let h=0;h<l.length;h++){const f=l[h];let p=40+(r.sensitive?.25:0);if(f.type===0)h||(a+="/"),a+=f.value.replace(__e,"\\$&"),p+=40;else if(f.type===1){const{value:b,repeatable:y,optional:S,regexp:w}=f;s.push({name:b,repeatable:y,optional:S});const I=w||u8;if(I!==u8){p+=10;try{new RegExp(`(${I})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${b}" (${I}): `+T.message)}}let O=y?`((?:${I})(?:/(?:${I}))*)`:`(${I})`;h||(O=S&&l.length<2?`(?:/${O})`:"/"+O),S&&(O+="?"),a+=O,p+=20,S&&(p+=-8),y&&(p+=-20),I===".*"&&(p+=-50)}d.push(p)}n.push(d)}if(r.strict&&r.end){const l=n.length-1;n[l][n[l].length-1]+=.7000000000000001}r.strict||(a+="/?"),r.end?a+="$":r.strict&&(a+="(?:/|$)");const o=new RegExp(a,r.sensitive?"":"i");function u(l){const d=l.match(o),h={};if(!d)return null;for(let f=1;f<d.length;f++){const p=d[f]||"",b=s[f-1];h[b.name]=p&&b.repeatable?p.split("/"):p}return h}function c(l){let d="",h=!1;for(const f of t){(!h||!d.endsWith("/"))&&(d+="/"),h=!1;for(const p of f)if(p.type===0)d+=p.value;else if(p.type===1){const{value:b,repeatable:y,optional:S}=p,w=b in l?l[b]:"";if(ps(w)&&!y)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const I=ps(w)?w.join("/"):w;if(!I)if(S)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):h=!0);else throw new Error(`Missing required param "${b}"`);d+=I}}return d||"/"}return{re:o,score:n,keys:s,parse:u,stringify:c}}function w_e(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function S_e(t,e){let r=0;const n=t.score,a=e.score;for(;r<n.length&&r<a.length;){const s=w_e(n[r],a[r]);if(s)return s;r++}if(Math.abs(a.length-n.length)===1){if(c8(n))return 1;if(c8(a))return-1}return a.length-n.length}function c8(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const T_e={type:0,value:""},E_e=/[a-zA-Z0-9_]/;function O_e(t){if(!t)return[[]];if(t==="/")return[[T_e]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${r})/"${l}": ${p}`)}let r=0,n=r;const a=[];let s;function o(){s&&a.push(s),s=[]}let u=0,c,l="",d="";function h(){l&&(r===0?s.push({type:0,value:l}):r===1||r===2||r===3?(s.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function f(){l+=c}for(;u<t.length;){if(c=t[u++],c==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),r=1):f();break;case 4:f(),r=n;break;case 1:c==="("?r=2:E_e.test(c)?f():(h(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&u--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:r=3:d+=c;break;case 3:h(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&u--,d="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),a}function A_e(t,e,r){const n=v_e(O_e(t.path),r),a=cr(n,{record:t,parent:e,children:[],alias:[]});return e&&!a.record.aliasOf==!e.record.aliasOf&&e.children.push(a),a}function x_e(t,e){const r=[],n=new Map;e=f8({strict:!1,end:!0,sensitive:!1},e);function a(d){return n.get(d)}function s(d,h,f){const p=!f,b=R_e(d);b.aliasOf=f&&f.record;const y=f8(e,d),S=[b];if("alias"in d){const O=typeof d.alias=="string"?[d.alias]:d.alias;for(const T of O)S.push(cr({},b,{components:f?f.record.components:b.components,path:T,aliasOf:f?f.record:b}))}let w,I;for(const O of S){const{path:T}=O;if(h&&T[0]!=="/"){const x=h.record.path,P=x[x.length-1]==="/"?"":"/";O.path=h.record.path+(T&&P+T)}if(w=A_e(O,h,y),f?f.alias.push(w):(I=I||w,I!==w&&I.alias.push(w),p&&d.name&&!d8(w)&&o(d.name)),b.children){const x=b.children;for(let P=0;P<x.length;P++)s(x[P],w,f&&f.children[P])}f=f||w,(w.record.components&&Object.keys(w.record.components).length||w.record.name||w.record.redirect)&&c(w)}return I?()=>{o(I)}:bp}function o(d){if(s$(d)){const h=n.get(d);h&&(n.delete(d),r.splice(r.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=r.indexOf(d);h>-1&&(r.splice(h,1),d.record.name&&n.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function u(){return r}function c(d){let h=0;for(;h<r.length&&S_e(d,r[h])>=0&&(d.record.path!==r[h].record.path||!u$(d,r[h]));)h++;r.splice(h,0,d),d.record.name&&!d8(d)&&n.set(d.record.name,d)}function l(d,h){let f,p={},b,y;if("name"in d&&d.name){if(f=n.get(d.name),!f)throw pf(1,{location:d});y=f.record.name,p=cr(l8(h.params,f.keys.filter(I=>!I.optional).map(I=>I.name)),d.params&&l8(d.params,f.keys.map(I=>I.name))),b=f.stringify(p)}else if("path"in d)b=d.path,f=r.find(I=>I.re.test(b)),f&&(p=f.parse(b),y=f.record.name);else{if(f=h.name?n.get(h.name):r.find(I=>I.re.test(h.path)),!f)throw pf(1,{location:d,currentLocation:h});y=f.record.name,p=cr({},h.params,d.params),b=f.stringify(p)}const S=[];let w=f;for(;w;)S.unshift(w.record),w=w.parent;return{name:y,path:b,params:p,matched:S,meta:P_e(S)}}return t.forEach(d=>s(d)),{addRoute:s,resolve:l,removeRoute:o,getRoutes:u,getRecordMatcher:a}}function l8(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function R_e(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:I_e(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function I_e(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function d8(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function P_e(t){return t.reduce((e,r)=>cr(e,r.meta),{})}function f8(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function u$(t,e){return e.children.some(r=>r===t||u$(t,r))}const c$=/#/g,D_e=/&/g,N_e=/\//g,j_e=/=/g,C_e=/\?/g,l$=/\+/g,F_e=/%5B/g,M_e=/%5D/g,d$=/%5E/g,L_e=/%60/g,f$=/%7B/g,B_e=/%7C/g,h$=/%7D/g,$_e=/%20/g;function LR(t){return encodeURI(""+t).replace(B_e,"|").replace(F_e,"[").replace(M_e,"]")}function U_e(t){return LR(t).replace(f$,"{").replace(h$,"}").replace(d$,"^")}function FO(t){return LR(t).replace(l$,"%2B").replace($_e,"+").replace(c$,"%23").replace(D_e,"%26").replace(L_e,"`").replace(f$,"{").replace(h$,"}").replace(d$,"^")}function q_e(t){return FO(t).replace(j_e,"%3D")}function V_e(t){return LR(t).replace(c$,"%23").replace(C_e,"%3F")}function H_e(t){return t==null?"":V_e(t).replace(N_e,"%2F")}function im(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function k_e(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let a=0;a<n.length;++a){const s=n[a].replace(l$," "),o=s.indexOf("="),u=im(o<0?s:s.slice(0,o)),c=o<0?null:im(s.slice(o+1));if(u in e){let l=e[u];ps(l)||(l=e[u]=[l]),l.push(c)}else e[u]=c}return e}function h8(t){let e="";for(let r in t){const n=t[r];if(r=q_e(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(ps(n)?n.map(s=>s&&FO(s)):[n&&FO(n)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+r,s!=null&&(e+="="+s))})}return e}function Q_e(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=ps(n)?n.map(a=>a==null?null:""+a):n==null?n:""+n)}return e}const G_e=Symbol(""),p8=Symbol(""),BR=Symbol(""),p$=Symbol(""),MO=Symbol("");function Mh(){let t=[];function e(n){return t.push(n),()=>{const a=t.indexOf(n);a>-1&&t.splice(a,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function ju(t,e,r,n,a){const s=n&&(n.enterCallbacks[a]=n.enterCallbacks[a]||[]);return()=>new Promise((o,u)=>{const c=h=>{h===!1?u(pf(4,{from:r,to:e})):h instanceof Error?u(h):m_e(h)?u(pf(2,{from:e,to:h})):(s&&n.enterCallbacks[a]===s&&typeof h=="function"&&s.push(h),o())},l=t.call(n&&n.instances[a],e,r,c);let d=Promise.resolve(l);t.length<3&&(d=d.then(c)),d.catch(h=>u(h))})}function pE(t,e,r,n){const a=[];for(const s of t)for(const o in s.components){let u=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(z_e(u)){const l=(u.__vccOpts||u)[e];l&&a.push(ju(l,r,n,s,o))}else{let c=u();a.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const d=Zge(l)?l.default:l;s.components[o]=d;const f=(d.__vccOpts||d)[e];return f&&ju(f,r,n,s,o)()}))}}return a}function z_e(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function y8(t){const e=cs(BR),r=cs(p$),n=zt(()=>e.resolve(St(t.to))),a=zt(()=>{const{matched:c}=n.value,{length:l}=c,d=c[l-1],h=r.matched;if(!d||!h.length)return-1;const f=h.findIndex(hf.bind(null,d));if(f>-1)return f;const p=b8(c[l-2]);return l>1&&b8(d)===p&&h[h.length-1].path!==p?h.findIndex(hf.bind(null,c[l-2])):f}),s=zt(()=>a.value>-1&&J_e(r.params,n.value.params)),o=zt(()=>a.value>-1&&a.value===r.matched.length-1&&i$(r.params,n.value.params));function u(c={}){return K_e(c)?e[St(t.replace)?"replace":"push"](St(t.to)).catch(bp):Promise.resolve()}return{route:n,href:zt(()=>n.value.href),isActive:s,isExactActive:o,navigate:u}}const W_e=ji({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:y8,setup(t,{slots:e}){const r=dm(y8(t)),{options:n}=cs(BR),a=zt(()=>({[m8(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[m8(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const s=e.default&&e.default(r);return t.custom?s:g5("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:a.value},s)}}}),X_e=W_e;function K_e(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function J_e(t,e){for(const r in e){const n=e[r],a=t[r];if(typeof n=="string"){if(n!==a)return!1}else if(!ps(a)||a.length!==n.length||n.some((s,o)=>s!==a[o]))return!1}return!0}function b8(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const m8=(t,e,r)=>t??e??r,Y_e=ji({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=cs(MO),a=zt(()=>t.route||n.value),s=cs(p8,0),o=zt(()=>{let l=St(s);const{matched:d}=a.value;let h;for(;(h=d[l])&&!h.components;)l++;return l}),u=zt(()=>a.value.matched[o.value]);tb(p8,zt(()=>o.value+1)),tb(G_e,u),tb(MO,a);const c=Si();return Cd(()=>[c.value,u.value,t.name],([l,d,h],[f,p,b])=>{d&&(d.instances[h]=l,p&&p!==d&&l&&l===f&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),l&&d&&(!p||!hf(d,p)||!f)&&(d.enterCallbacks[h]||[]).forEach(y=>y(l))},{flush:"post"}),()=>{const l=a.value,d=t.name,h=u.value,f=h&&h.components[d];if(!f)return g8(r.default,{Component:f,route:l});const p=h.props[d],b=p?p===!0?l.params:typeof p=="function"?p(l):p:null,S=g5(f,cr({},b,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(h.instances[d]=null)},ref:c}));return g8(r.default,{Component:S,route:l})||S}}});function g8(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const Z_e=Y_e;function eve(t){const e=x_e(t.routes,t),r=t.parseQuery||k_e,n=t.stringifyQuery||h8,a=t.history,s=Mh(),o=Mh(),u=Mh(),c=_U(mu);let l=mu;md&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=fE.bind(null,he=>""+he),h=fE.bind(null,H_e),f=fE.bind(null,im);function p(he,ve){let me,L;return s$(he)?(me=e.getRecordMatcher(he),L=ve):L=he,e.addRoute(L,me)}function b(he){const ve=e.getRecordMatcher(he);ve&&e.removeRoute(ve)}function y(){return e.getRoutes().map(he=>he.record)}function S(he){return!!e.getRecordMatcher(he)}function w(he,ve){if(ve=cr({},ve||c.value),typeof he=="string"){const v=hE(r,he,ve.path),j=e.resolve({path:v.path},ve),q=a.createHref(v.fullPath);return cr(v,j,{params:f(j.params),hash:im(v.hash),redirectedFrom:void 0,href:q})}let me;if("path"in he)me=cr({},he,{path:hE(r,he.path,ve.path).path});else{const v=cr({},he.params);for(const j in v)v[j]==null&&delete v[j];me=cr({},he,{params:h(v)}),ve.params=h(ve.params)}const L=e.resolve(me,ve),H=he.hash||"";L.params=d(f(L.params));const A=r_e(n,cr({},he,{hash:U_e(H),path:L.path})),m=a.createHref(A);return cr({fullPath:A,hash:H,query:n===h8?Q_e(he.query):he.query||{}},L,{redirectedFrom:void 0,href:m})}function I(he){return typeof he=="string"?hE(r,he,c.value.path):cr({},he)}function O(he,ve){if(l!==he)return pf(8,{from:ve,to:he})}function T(he){return B(he)}function x(he){return T(cr(I(he),{replace:!0}))}function P(he){const ve=he.matched[he.matched.length-1];if(ve&&ve.redirect){const{redirect:me}=ve;let L=typeof me=="function"?me(he):me;return typeof L=="string"&&(L=L.includes("?")||L.includes("#")?L=I(L):{path:L},L.params={}),cr({query:he.query,hash:he.hash,params:"path"in L?{}:he.params},L)}}function B(he,ve){const me=l=w(he),L=c.value,H=he.state,A=he.force,m=he.replace===!0,v=P(me);if(v)return B(cr(I(v),{state:typeof v=="object"?cr({},H,v.state):H,force:A,replace:m}),ve||me);const j=me;j.redirectedFrom=ve;let q;return!A&&n_e(n,L,me)&&(q=pf(16,{to:j,from:L}),we(L,L,!0,!1)),(q?Promise.resolve(q):D(j,L)).catch($=>xo($)?xo($,2)?$:_e($):ne($,j,L)).then($=>{if($){if(xo($,2))return B(cr({replace:m},I($.to),{state:typeof $.to=="object"?cr({},H,$.to.state):H,force:A}),ve||j)}else $=W(j,L,!0,m,H);return F(j,L,$),$})}function Q(he,ve){const me=O(he,ve);return me?Promise.reject(me):Promise.resolve()}function N(he){const ve=ae.values().next().value;return ve&&typeof ve.runWithContext=="function"?ve.runWithContext(he):he()}function D(he,ve){let me;const[L,H,A]=tve(he,ve);me=pE(L.reverse(),"beforeRouteLeave",he,ve);for(const v of L)v.leaveGuards.forEach(j=>{me.push(ju(j,he,ve))});const m=Q.bind(null,he,ve);return me.push(m),Ie(me).then(()=>{me=[];for(const v of s.list())me.push(ju(v,he,ve));return me.push(m),Ie(me)}).then(()=>{me=pE(H,"beforeRouteUpdate",he,ve);for(const v of H)v.updateGuards.forEach(j=>{me.push(ju(j,he,ve))});return me.push(m),Ie(me)}).then(()=>{me=[];for(const v of A)if(v.beforeEnter)if(ps(v.beforeEnter))for(const j of v.beforeEnter)me.push(ju(j,he,ve));else me.push(ju(v.beforeEnter,he,ve));return me.push(m),Ie(me)}).then(()=>(he.matched.forEach(v=>v.enterCallbacks={}),me=pE(A,"beforeRouteEnter",he,ve),me.push(m),Ie(me))).then(()=>{me=[];for(const v of o.list())me.push(ju(v,he,ve));return me.push(m),Ie(me)}).catch(v=>xo(v,8)?v:Promise.reject(v))}function F(he,ve,me){u.list().forEach(L=>N(()=>L(he,ve,me)))}function W(he,ve,me,L,H){const A=O(he,ve);if(A)return A;const m=ve===mu,v=md?history.state:{};me&&(L||m?a.replace(he.fullPath,cr({scroll:m&&v&&v.scroll},H)):a.push(he.fullPath,H)),c.value=he,we(he,ve,me,m),_e()}let z;function M(){z||(z=a.listen((he,ve,me)=>{if(!Ae.listening)return;const L=w(he),H=P(L);if(H){B(cr(H,{replace:!0}),L).catch(bp);return}l=L;const A=c.value;md&&d_e(a8(A.fullPath,me.delta),eS()),D(L,A).catch(m=>xo(m,12)?m:xo(m,2)?(B(m.to,L).then(v=>{xo(v,20)&&!me.delta&&me.type===kp.pop&&a.go(-1,!1)}).catch(bp),Promise.reject()):(me.delta&&a.go(-me.delta,!1),ne(m,L,A))).then(m=>{m=m||W(L,A,!1),m&&(me.delta&&!xo(m,8)?a.go(-me.delta,!1):me.type===kp.pop&&xo(m,20)&&a.go(-1,!1)),F(L,A,m)}).catch(bp)}))}let C=Mh(),V=Mh(),ie;function ne(he,ve,me){_e(he);const L=V.list();return L.length?L.forEach(H=>H(he,ve,me)):console.error(he),Promise.reject(he)}function fe(){return ie&&c.value!==mu?Promise.resolve():new Promise((he,ve)=>{C.add([he,ve])})}function _e(he){return ie||(ie=!he,M(),C.list().forEach(([ve,me])=>he?me(he):ve()),C.reset()),he}function we(he,ve,me,L){const{scrollBehavior:H}=t;if(!md||!H)return Promise.resolve();const A=!me&&f_e(a8(he.fullPath,0))||(L||!me)&&history.state&&history.state.scroll||null;return Q8().then(()=>H(he,ve,A)).then(m=>m&&l_e(m)).catch(m=>ne(m,he,ve))}const Ce=he=>a.go(he);let oe;const ae=new Set,Ae={currentRoute:c,listening:!0,addRoute:p,removeRoute:b,hasRoute:S,getRoutes:y,resolve:w,options:t,push:T,replace:x,go:Ce,back:()=>Ce(-1),forward:()=>Ce(1),beforeEach:s.add,beforeResolve:o.add,afterEach:u.add,onError:V.add,isReady:fe,install(he){const ve=this;he.component("RouterLink",X_e),he.component("RouterView",Z_e),he.config.globalProperties.$router=ve,Object.defineProperty(he.config.globalProperties,"$route",{enumerable:!0,get:()=>St(c)}),md&&!oe&&c.value===mu&&(oe=!0,T(a.location).catch(H=>{}));const me={};for(const H in mu)Object.defineProperty(me,H,{get:()=>c.value[H],enumerable:!0});he.provide(BR,ve),he.provide(p$,M8(me)),he.provide(MO,c);const L=he.unmount;ae.add(he),he.unmount=function(){ae.delete(he),ae.size<1&&(l=mu,z&&z(),z=null,c.value=mu,oe=!1,ie=!1),L()}}};function Ie(he){return he.reduce((ve,me)=>ve.then(()=>N(me)),Promise.resolve())}return Ae}function tve(t,e){const r=[],n=[],a=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const u=e.matched[o];u&&(t.matched.find(l=>hf(l,u))?n.push(u):r.push(u));const c=t.matched[o];c&&(e.matched.find(l=>hf(l,c))||a.push(c))}return[r,n,a]}const rve=eve({history:b_e("/scholarly-browser/"),routes:[{path:"/",component:n$,props:!0}]}),y$=Wq(n$);y$.use(rve);y$.mount("#app");
